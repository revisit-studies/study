var G5e=Object.defineProperty;var Y5e=(e,t,n)=>t in e?G5e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var K5e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var cu=(e,t,n)=>(Y5e(e,typeof t!="symbol"?t+"":t,n),n);var Msn=K5e((Won,Ore)=>{function X5e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var to=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Q5e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var S0e={exports:{}},SM={},T0e={exports:{}},$n={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI=Symbol.for("react.element"),J5e=Symbol.for("react.portal"),Z5e=Symbol.for("react.fragment"),e8e=Symbol.for("react.strict_mode"),t8e=Symbol.for("react.profiler"),n8e=Symbol.for("react.provider"),r8e=Symbol.for("react.context"),i8e=Symbol.for("react.forward_ref"),s8e=Symbol.for("react.suspense"),o8e=Symbol.for("react.memo"),a8e=Symbol.for("react.lazy"),Zre=Symbol.iterator;function u8e(e){return e===null||typeof e!="object"?null:(e=Zre&&e[Zre]||e["@@iterator"],typeof e=="function"?e:null)}var A0e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C0e=Object.assign,I0e={};function wx(e,t,n){this.props=e,this.context=t,this.refs=I0e,this.updater=n||A0e}wx.prototype.isReactComponent={};wx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function k0e(){}k0e.prototype=wx.prototype;function ZH(e,t,n){this.props=e,this.context=t,this.refs=I0e,this.updater=n||A0e}var eq=ZH.prototype=new k0e;eq.constructor=ZH;C0e(eq,wx.prototype);eq.isPureReactComponent=!0;var eie=Array.isArray,R0e=Object.prototype.hasOwnProperty,tq={current:null},N0e={key:!0,ref:!0,__self:!0,__source:!0};function P0e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)R0e.call(t,r)&&!N0e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:xI,type:e,key:s,ref:o,props:i,_owner:tq.current}}function l8e(e,t){return{$$typeof:xI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nq(e){return typeof e=="object"&&e!==null&&e.$$typeof===xI}function c8e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tie=/\/+/g;function w5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?c8e(""+e.key):t.toString(36)}function wP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case xI:case J5e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+w5(o,0):r,eie(i)?(n="",e!=null&&(n=e.replace(tie,"$&/")+"/"),wP(i,t,n,"",function(l){return l})):i!=null&&(nq(i)&&(i=l8e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(tie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",eie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+w5(s,a);o+=wP(s,t,n,u,i)}else if(u=u8e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+w5(s,a++),o+=wP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function PR(e,t,n){if(e==null)return e;var r=[],i=0;return wP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function f8e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tu={current:null},EP={transition:null},d8e={ReactCurrentDispatcher:tu,ReactCurrentBatchConfig:EP,ReactCurrentOwner:tq};function D0e(){throw Error("act(...) is not supported in production builds of React.")}$n.Children={map:PR,forEach:function(e,t,n){PR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return PR(e,function(){t++}),t},toArray:function(e){return PR(e,function(t){return t})||[]},only:function(e){if(!nq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$n.Component=wx;$n.Fragment=Z5e;$n.Profiler=t8e;$n.PureComponent=ZH;$n.StrictMode=e8e;$n.Suspense=s8e;$n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d8e;$n.act=D0e;$n.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=C0e({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=tq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)R0e.call(t,u)&&!N0e.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:xI,type:e.type,key:i,ref:s,props:r,_owner:o}};$n.createContext=function(e){return e={$$typeof:r8e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:n8e,_context:e},e.Consumer=e};$n.createElement=P0e;$n.createFactory=function(e){var t=P0e.bind(null,e);return t.type=e,t};$n.createRef=function(){return{current:null}};$n.forwardRef=function(e){return{$$typeof:i8e,render:e}};$n.isValidElement=nq;$n.lazy=function(e){return{$$typeof:a8e,_payload:{_status:-1,_result:e},_init:f8e}};$n.memo=function(e,t){return{$$typeof:o8e,type:e,compare:t===void 0?null:t}};$n.startTransition=function(e){var t=EP.transition;EP.transition={};try{e()}finally{EP.transition=t}};$n.unstable_act=D0e;$n.useCallback=function(e,t){return tu.current.useCallback(e,t)};$n.useContext=function(e){return tu.current.useContext(e)};$n.useDebugValue=function(){};$n.useDeferredValue=function(e){return tu.current.useDeferredValue(e)};$n.useEffect=function(e,t){return tu.current.useEffect(e,t)};$n.useId=function(){return tu.current.useId()};$n.useImperativeHandle=function(e,t,n){return tu.current.useImperativeHandle(e,t,n)};$n.useInsertionEffect=function(e,t){return tu.current.useInsertionEffect(e,t)};$n.useLayoutEffect=function(e,t){return tu.current.useLayoutEffect(e,t)};$n.useMemo=function(e,t){return tu.current.useMemo(e,t)};$n.useReducer=function(e,t,n){return tu.current.useReducer(e,t,n)};$n.useRef=function(e){return tu.current.useRef(e)};$n.useState=function(e){return tu.current.useState(e)};$n.useSyncExternalStore=function(e,t,n){return tu.current.useSyncExternalStore(e,t,n)};$n.useTransition=function(){return tu.current.useTransition()};$n.version="18.3.1";T0e.exports=$n;var N=T0e.exports;const Wi=Hl(N),BD=X5e({__proto__:null,default:Wi},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h8e=N,p8e=Symbol.for("react.element"),m8e=Symbol.for("react.fragment"),g8e=Object.prototype.hasOwnProperty,y8e=h8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,v8e={key:!0,ref:!0,__self:!0,__source:!0};function O0e(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)g8e.call(t,r)&&!v8e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:p8e,type:e,key:s,ref:o,props:i,_owner:y8e.current}}SM.Fragment=m8e;SM.jsx=O0e;SM.jsxs=O0e;S0e.exports=SM;var _=S0e.exports,mB={},$0e={exports:{}},ql={},M0e={exports:{}},L0e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,q){var D=z.length;z.push(q);e:for(;0<D;){var U=D-1>>>1,W=z[U];if(0<i(W,q))z[U]=q,z[D]=W,D=U;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],D=z.pop();if(D!==q){z[0]=D;e:for(var U=0,W=z.length,j=W>>>1;U<j;){var H=2*(U+1)-1,G=z[H],ne=H+1,ce=z[ne];if(0>i(G,D))ne<W&&0>i(ce,G)?(z[U]=ce,z[ne]=D,U=ne):(z[U]=G,z[H]=D,U=H);else if(ne<W&&0>i(ce,D))z[U]=ce,z[ne]=D,U=ne;else break e}}return q}function i(z,q){var D=z.sortIndex-q.sortIndex;return D!==0?D:z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var q=n(l);q!==null;){if(q.callback===null)r(l);else if(q.startTime<=z)r(l),q.sortIndex=q.expirationTime,t(u,q);else break;q=n(l)}}function w(z){if(m=!1,b(z),!p)if(n(u)!==null)p=!0,L(E);else{var q=n(l);q!==null&&B(w,q.startTime-z)}}function E(z,q){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var D=d;try{for(b(q),f=n(u);f!==null&&(!(f.expirationTime>q)||z&&!R());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var W=U(f.expirationTime<=q);q=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(q)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var H=n(l);H!==null&&B(w,H.startTime-q),j=!1}return j}finally{f=null,d=D,h=!1}}var S=!1,T=null,A=-1,C=5,I=-1;function R(){return!(e.unstable_now()-I<C)}function O(){if(T!==null){var z=e.unstable_now();I=z;var q=!0;try{q=T(!0,z)}finally{q?P():(S=!1,T=null)}}else S=!1}var P;if(typeof v=="function")P=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=O,P=function(){F.postMessage(null)}}else P=function(){g(O,0)};function L(z){T=z,S||(S=!0,P())}function B(z,q){A=g(function(){z(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,L(E))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(z){switch(d){case 1:case 2:case 3:var q=3;break;default:q=d}var D=d;d=q;try{return z()}finally{d=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var D=d;d=z;try{return q()}finally{d=D}},e.unstable_scheduleCallback=function(z,q,D){var U=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?U+D:U):D=U,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,z={id:c++,callback:q,priorityLevel:z,startTime:D,expirationTime:W,sortIndex:-1},D>U?(z.sortIndex=D,t(l,z),n(u)===null&&z===n(l)&&(m?(y(A),A=-1):m=!0,B(w,D-U))):(z.sortIndex=W,t(u,z),p||h||(p=!0,L(E))),z},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(z){var q=d;return function(){var D=d;d=q;try{return z.apply(this,arguments)}finally{d=D}}}})(L0e);M0e.exports=L0e;var b8e=M0e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _8e=N,kl=b8e;function et(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var F0e=new Set,$C={};function mb(e,t){rE(e,t),rE(e+"Capture",t)}function rE(e,t){for($C[e]=t,e=0;e<t.length;e++)F0e.add(t[e])}var sm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gB=Object.prototype.hasOwnProperty,w8e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,nie={},rie={};function E8e(e){return gB.call(rie,e)?!0:gB.call(nie,e)?!1:w8e.test(e)?rie[e]=!0:(nie[e]=!0,!1)}function x8e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function S8e(e,t,n,r){if(t===null||typeof t>"u"||x8e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var $o={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$o[e]=new nu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$o[t]=new nu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$o[e]=new nu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$o[e]=new nu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$o[e]=new nu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$o[e]=new nu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$o[e]=new nu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$o[e]=new nu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$o[e]=new nu(e,5,!1,e.toLowerCase(),null,!1,!1)});var rq=/[\-:]([a-z])/g;function iq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(rq,iq);$o[t]=new nu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(rq,iq);$o[t]=new nu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(rq,iq);$o[t]=new nu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$o[e]=new nu(e,1,!1,e.toLowerCase(),null,!1,!1)});$o.xlinkHref=new nu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$o[e]=new nu(e,1,!1,e.toLowerCase(),null,!0,!0)});function sq(e,t,n,r){var i=$o.hasOwnProperty(t)?$o[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(S8e(t,n,i,r)&&(n=null),r||i===null?E8e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Mm=_8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,DR=Symbol.for("react.element"),H_=Symbol.for("react.portal"),q_=Symbol.for("react.fragment"),oq=Symbol.for("react.strict_mode"),yB=Symbol.for("react.profiler"),j0e=Symbol.for("react.provider"),B0e=Symbol.for("react.context"),aq=Symbol.for("react.forward_ref"),vB=Symbol.for("react.suspense"),bB=Symbol.for("react.suspense_list"),uq=Symbol.for("react.memo"),Eg=Symbol.for("react.lazy"),U0e=Symbol.for("react.offscreen"),iie=Symbol.iterator;function VS(e){return e===null||typeof e!="object"?null:(e=iie&&e[iie]||e["@@iterator"],typeof e=="function"?e:null)}var Pi=Object.assign,E5;function HT(e){if(E5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);E5=t&&t[1]||""}return`
`+E5+e}var x5=!1;function S5(e,t){if(!e||x5)return"";x5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{x5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?HT(e):""}function T8e(e){switch(e.tag){case 5:return HT(e.type);case 16:return HT("Lazy");case 13:return HT("Suspense");case 19:return HT("SuspenseList");case 0:case 2:case 15:return e=S5(e.type,!1),e;case 11:return e=S5(e.type.render,!1),e;case 1:return e=S5(e.type,!0),e;default:return""}}function _B(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q_:return"Fragment";case H_:return"Portal";case yB:return"Profiler";case oq:return"StrictMode";case vB:return"Suspense";case bB:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B0e:return(e.displayName||"Context")+".Consumer";case j0e:return(e._context.displayName||"Context")+".Provider";case aq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case uq:return t=e.displayName||null,t!==null?t:_B(e.type)||"Memo";case Eg:t=e._payload,e=e._init;try{return _B(e(t))}catch{}}return null}function A8e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _B(t);case 8:return t===oq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function C0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function z0e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function C8e(e){var t=z0e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function OR(e){e._valueTracker||(e._valueTracker=C8e(e))}function V0e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=z0e(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function UD(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function wB(e,t){var n=t.checked;return Pi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function sie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=C0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function H0e(e,t){t=t.checked,t!=null&&sq(e,"checked",t,!1)}function EB(e,t){H0e(e,t);var n=C0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?xB(e,t.type,n):t.hasOwnProperty("defaultValue")&&xB(e,t.type,C0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function oie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function xB(e,t,n){(t!=="number"||UD(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var qT=Array.isArray;function gw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+C0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function SB(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(et(91));return Pi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function aie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(et(92));if(qT(n)){if(1<n.length)throw Error(et(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:C0(n)}}function q0e(e,t){var n=C0(t.value),r=C0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function uie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function W0e(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function TB(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?W0e(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var $R,G0e=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for($R=$R||document.createElement("div"),$R.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=$R.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function MC(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $A={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},I8e=["Webkit","ms","Moz","O"];Object.keys($A).forEach(function(e){I8e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$A[t]=$A[e]})});function Y0e(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$A.hasOwnProperty(e)&&$A[e]?(""+t).trim():t+"px"}function K0e(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Y0e(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var k8e=Pi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function AB(e,t){if(t){if(k8e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(et(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(et(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(et(61))}if(t.style!=null&&typeof t.style!="object")throw Error(et(62))}}function CB(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IB=null;function lq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var kB=null,yw=null,vw=null;function lie(e){if(e=AI(e)){if(typeof kB!="function")throw Error(et(280));var t=e.stateNode;t&&(t=kM(t),kB(e.stateNode,e.type,t))}}function X0e(e){yw?vw?vw.push(e):vw=[e]:yw=e}function Q0e(){if(yw){var e=yw,t=vw;if(vw=yw=null,lie(e),t)for(e=0;e<t.length;e++)lie(t[e])}}function J0e(e,t){return e(t)}function Z0e(){}var T5=!1;function eye(e,t,n){if(T5)return e(t,n);T5=!0;try{return J0e(e,t,n)}finally{T5=!1,(yw!==null||vw!==null)&&(Z0e(),Q0e())}}function LC(e,t){var n=e.stateNode;if(n===null)return null;var r=kM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(et(231,t,typeof n));return n}var RB=!1;if(sm)try{var HS={};Object.defineProperty(HS,"passive",{get:function(){RB=!0}}),window.addEventListener("test",HS,HS),window.removeEventListener("test",HS,HS)}catch{RB=!1}function R8e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var MA=!1,zD=null,VD=!1,NB=null,N8e={onError:function(e){MA=!0,zD=e}};function P8e(e,t,n,r,i,s,o,a,u){MA=!1,zD=null,R8e.apply(N8e,arguments)}function D8e(e,t,n,r,i,s,o,a,u){if(P8e.apply(this,arguments),MA){if(MA){var l=zD;MA=!1,zD=null}else throw Error(et(198));VD||(VD=!0,NB=l)}}function gb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function tye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function cie(e){if(gb(e)!==e)throw Error(et(188))}function O8e(e){var t=e.alternate;if(!t){if(t=gb(e),t===null)throw Error(et(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return cie(i),e;if(s===r)return cie(i),t;s=s.sibling}throw Error(et(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(et(189))}}if(n.alternate!==r)throw Error(et(190))}if(n.tag!==3)throw Error(et(188));return n.stateNode.current===n?e:t}function nye(e){return e=O8e(e),e!==null?rye(e):null}function rye(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rye(e);if(t!==null)return t;e=e.sibling}return null}var iye=kl.unstable_scheduleCallback,fie=kl.unstable_cancelCallback,$8e=kl.unstable_shouldYield,M8e=kl.unstable_requestPaint,rs=kl.unstable_now,L8e=kl.unstable_getCurrentPriorityLevel,cq=kl.unstable_ImmediatePriority,sye=kl.unstable_UserBlockingPriority,HD=kl.unstable_NormalPriority,F8e=kl.unstable_LowPriority,oye=kl.unstable_IdlePriority,TM=null,Jd=null;function j8e(e){if(Jd&&typeof Jd.onCommitFiberRoot=="function")try{Jd.onCommitFiberRoot(TM,e,void 0,(e.current.flags&128)===128)}catch{}}var kf=Math.clz32?Math.clz32:z8e,B8e=Math.log,U8e=Math.LN2;function z8e(e){return e>>>=0,e===0?32:31-(B8e(e)/U8e|0)|0}var MR=64,LR=4194304;function WT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qD(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=WT(a):(s&=o,s!==0&&(r=WT(s)))}else o=n&~i,o!==0?r=WT(o):s!==0&&(r=WT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-kf(t),i=1<<n,r|=e[n],t&=~i;return r}function V8e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H8e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-kf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=V8e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function PB(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function aye(){var e=MR;return MR<<=1,!(MR&4194240)&&(MR=64),e}function A5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function SI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kf(t),e[t]=n}function q8e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-kf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function fq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-kf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Pr=0;function uye(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var lye,dq,cye,fye,dye,DB=!1,FR=[],n0=null,r0=null,i0=null,FC=new Map,jC=new Map,Ng=[],W8e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function die(e,t){switch(e){case"focusin":case"focusout":n0=null;break;case"dragenter":case"dragleave":r0=null;break;case"mouseover":case"mouseout":i0=null;break;case"pointerover":case"pointerout":FC.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jC.delete(t.pointerId)}}function qS(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=AI(t),t!==null&&dq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function G8e(e,t,n,r,i){switch(t){case"focusin":return n0=qS(n0,e,t,n,r,i),!0;case"dragenter":return r0=qS(r0,e,t,n,r,i),!0;case"mouseover":return i0=qS(i0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return FC.set(s,qS(FC.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,jC.set(s,qS(jC.get(s)||null,e,t,n,r,i)),!0}return!1}function hye(e){var t=jv(e.target);if(t!==null){var n=gb(t);if(n!==null){if(t=n.tag,t===13){if(t=tye(n),t!==null){e.blockedOn=t,dye(e.priority,function(){cye(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=OB(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);IB=r,n.target.dispatchEvent(r),IB=null}else return t=AI(n),t!==null&&dq(t),e.blockedOn=n,!1;t.shift()}return!0}function hie(e,t,n){xP(e)&&n.delete(t)}function Y8e(){DB=!1,n0!==null&&xP(n0)&&(n0=null),r0!==null&&xP(r0)&&(r0=null),i0!==null&&xP(i0)&&(i0=null),FC.forEach(hie),jC.forEach(hie)}function WS(e,t){e.blockedOn===t&&(e.blockedOn=null,DB||(DB=!0,kl.unstable_scheduleCallback(kl.unstable_NormalPriority,Y8e)))}function BC(e){function t(i){return WS(i,e)}if(0<FR.length){WS(FR[0],e);for(var n=1;n<FR.length;n++){var r=FR[n];r.blockedOn===e&&(r.blockedOn=null)}}for(n0!==null&&WS(n0,e),r0!==null&&WS(r0,e),i0!==null&&WS(i0,e),FC.forEach(t),jC.forEach(t),n=0;n<Ng.length;n++)r=Ng[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ng.length&&(n=Ng[0],n.blockedOn===null);)hye(n),n.blockedOn===null&&Ng.shift()}var bw=Mm.ReactCurrentBatchConfig,WD=!0;function K8e(e,t,n,r){var i=Pr,s=bw.transition;bw.transition=null;try{Pr=1,hq(e,t,n,r)}finally{Pr=i,bw.transition=s}}function X8e(e,t,n,r){var i=Pr,s=bw.transition;bw.transition=null;try{Pr=4,hq(e,t,n,r)}finally{Pr=i,bw.transition=s}}function hq(e,t,n,r){if(WD){var i=OB(e,t,n,r);if(i===null)M5(e,t,r,GD,n),die(e,r);else if(G8e(i,e,t,n,r))r.stopPropagation();else if(die(e,r),t&4&&-1<W8e.indexOf(e)){for(;i!==null;){var s=AI(i);if(s!==null&&lye(s),s=OB(e,t,n,r),s===null&&M5(e,t,r,GD,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else M5(e,t,r,null,n)}}var GD=null;function OB(e,t,n,r){if(GD=null,e=lq(r),e=jv(e),e!==null)if(t=gb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=tye(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return GD=e,null}function pye(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(L8e()){case cq:return 1;case sye:return 4;case HD:case F8e:return 16;case oye:return 536870912;default:return 16}default:return 16}}var Ug=null,pq=null,SP=null;function mye(){if(SP)return SP;var e,t=pq,n=t.length,r,i="value"in Ug?Ug.value:Ug.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return SP=i.slice(e,1<r?1-r:void 0)}function TP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function jR(){return!0}function pie(){return!1}function Wl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jR:pie,this.isPropagationStopped=pie,this}return Pi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jR)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jR)},persist:function(){},isPersistent:jR}),t}var Ex={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mq=Wl(Ex),TI=Pi({},Ex,{view:0,detail:0}),Q8e=Wl(TI),C5,I5,GS,AM=Pi({},TI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==GS&&(GS&&e.type==="mousemove"?(C5=e.screenX-GS.screenX,I5=e.screenY-GS.screenY):I5=C5=0,GS=e),C5)},movementY:function(e){return"movementY"in e?e.movementY:I5}}),mie=Wl(AM),J8e=Pi({},AM,{dataTransfer:0}),Z8e=Wl(J8e),eje=Pi({},TI,{relatedTarget:0}),k5=Wl(eje),tje=Pi({},Ex,{animationName:0,elapsedTime:0,pseudoElement:0}),nje=Wl(tje),rje=Pi({},Ex,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ije=Wl(rje),sje=Pi({},Ex,{data:0}),gie=Wl(sje),oje={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aje={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uje={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lje(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=uje[e])?!!t[e]:!1}function gq(){return lje}var cje=Pi({},TI,{key:function(e){if(e.key){var t=oje[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=TP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?aje[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gq,charCode:function(e){return e.type==="keypress"?TP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?TP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fje=Wl(cje),dje=Pi({},AM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yie=Wl(dje),hje=Pi({},TI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gq}),pje=Wl(hje),mje=Pi({},Ex,{propertyName:0,elapsedTime:0,pseudoElement:0}),gje=Wl(mje),yje=Pi({},AM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),vje=Wl(yje),bje=[9,13,27,32],yq=sm&&"CompositionEvent"in window,LA=null;sm&&"documentMode"in document&&(LA=document.documentMode);var _je=sm&&"TextEvent"in window&&!LA,gye=sm&&(!yq||LA&&8<LA&&11>=LA),vie=" ",bie=!1;function yye(e,t){switch(e){case"keyup":return bje.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vye(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var W_=!1;function wje(e,t){switch(e){case"compositionend":return vye(t);case"keypress":return t.which!==32?null:(bie=!0,vie);case"textInput":return e=t.data,e===vie&&bie?null:e;default:return null}}function Eje(e,t){if(W_)return e==="compositionend"||!yq&&yye(e,t)?(e=mye(),SP=pq=Ug=null,W_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gye&&t.locale!=="ko"?null:t.data;default:return null}}var xje={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _ie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xje[e.type]:t==="textarea"}function bye(e,t,n,r){X0e(r),t=YD(t,"onChange"),0<t.length&&(n=new mq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var FA=null,UC=null;function Sje(e){Rye(e,0)}function CM(e){var t=K_(e);if(V0e(t))return e}function Tje(e,t){if(e==="change")return t}var _ye=!1;if(sm){var R5;if(sm){var N5="oninput"in document;if(!N5){var wie=document.createElement("div");wie.setAttribute("oninput","return;"),N5=typeof wie.oninput=="function"}R5=N5}else R5=!1;_ye=R5&&(!document.documentMode||9<document.documentMode)}function Eie(){FA&&(FA.detachEvent("onpropertychange",wye),UC=FA=null)}function wye(e){if(e.propertyName==="value"&&CM(UC)){var t=[];bye(t,UC,e,lq(e)),eye(Sje,t)}}function Aje(e,t,n){e==="focusin"?(Eie(),FA=t,UC=n,FA.attachEvent("onpropertychange",wye)):e==="focusout"&&Eie()}function Cje(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return CM(UC)}function Ije(e,t){if(e==="click")return CM(t)}function kje(e,t){if(e==="input"||e==="change")return CM(t)}function Rje(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ff=typeof Object.is=="function"?Object.is:Rje;function zC(e,t){if(Ff(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!gB.call(t,i)||!Ff(e[i],t[i]))return!1}return!0}function xie(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sie(e,t){var n=xie(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xie(n)}}function Eye(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Eye(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xye(){for(var e=window,t=UD();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=UD(e.document)}return t}function vq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Nje(e){var t=xye(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Eye(n.ownerDocument.documentElement,n)){if(r!==null&&vq(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Sie(n,s);var o=Sie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Pje=sm&&"documentMode"in document&&11>=document.documentMode,G_=null,$B=null,jA=null,MB=!1;function Tie(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;MB||G_==null||G_!==UD(r)||(r=G_,"selectionStart"in r&&vq(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),jA&&zC(jA,r)||(jA=r,r=YD($B,"onSelect"),0<r.length&&(t=new mq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=G_)))}function BR(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Y_={animationend:BR("Animation","AnimationEnd"),animationiteration:BR("Animation","AnimationIteration"),animationstart:BR("Animation","AnimationStart"),transitionend:BR("Transition","TransitionEnd")},P5={},Sye={};sm&&(Sye=document.createElement("div").style,"AnimationEvent"in window||(delete Y_.animationend.animation,delete Y_.animationiteration.animation,delete Y_.animationstart.animation),"TransitionEvent"in window||delete Y_.transitionend.transition);function IM(e){if(P5[e])return P5[e];if(!Y_[e])return e;var t=Y_[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Sye)return P5[e]=t[n];return e}var Tye=IM("animationend"),Aye=IM("animationiteration"),Cye=IM("animationstart"),Iye=IM("transitionend"),kye=new Map,Aie="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function py(e,t){kye.set(e,t),mb(t,[e])}for(var D5=0;D5<Aie.length;D5++){var O5=Aie[D5],Dje=O5.toLowerCase(),Oje=O5[0].toUpperCase()+O5.slice(1);py(Dje,"on"+Oje)}py(Tye,"onAnimationEnd");py(Aye,"onAnimationIteration");py(Cye,"onAnimationStart");py("dblclick","onDoubleClick");py("focusin","onFocus");py("focusout","onBlur");py(Iye,"onTransitionEnd");rE("onMouseEnter",["mouseout","mouseover"]);rE("onMouseLeave",["mouseout","mouseover"]);rE("onPointerEnter",["pointerout","pointerover"]);rE("onPointerLeave",["pointerout","pointerover"]);mb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mb("onBeforeInput",["compositionend","keypress","textInput","paste"]);mb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var GT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$je=new Set("cancel close invalid load scroll toggle".split(" ").concat(GT));function Cie(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,D8e(r,t,void 0,e),e.currentTarget=null}function Rye(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Cie(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Cie(i,a,l),s=u}}}if(VD)throw e=NB,VD=!1,NB=null,e}function si(e,t){var n=t[UB];n===void 0&&(n=t[UB]=new Set);var r=e+"__bubble";n.has(r)||(Nye(t,e,2,!1),n.add(r))}function $5(e,t,n){var r=0;t&&(r|=4),Nye(n,e,r,t)}var UR="_reactListening"+Math.random().toString(36).slice(2);function VC(e){if(!e[UR]){e[UR]=!0,F0e.forEach(function(n){n!=="selectionchange"&&($je.has(n)||$5(n,!1,e),$5(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[UR]||(t[UR]=!0,$5("selectionchange",!1,t))}}function Nye(e,t,n,r){switch(pye(t)){case 1:var i=K8e;break;case 4:i=X8e;break;default:i=hq}n=i.bind(null,t,n,e),i=void 0,!RB||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function M5(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=jv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}eye(function(){var l=s,c=lq(n),f=[];e:{var d=kye.get(e);if(d!==void 0){var h=mq,p=e;switch(e){case"keypress":if(TP(n)===0)break e;case"keydown":case"keyup":h=fje;break;case"focusin":p="focus",h=k5;break;case"focusout":p="blur",h=k5;break;case"beforeblur":case"afterblur":h=k5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=mie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Z8e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=pje;break;case Tye:case Aye:case Cye:h=nje;break;case Iye:h=gje;break;case"scroll":h=Q8e;break;case"wheel":h=vje;break;case"copy":case"cut":case"paste":h=ije;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=yie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=LC(v,y),w!=null&&m.push(HC(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==IB&&(p=n.relatedTarget||n.fromElement)&&(jv(p)||p[om]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?jv(p):null,p!==null&&(g=gb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=mie,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=yie,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:K_(h),b=p==null?d:K_(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,jv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=i_(b))v++;for(b=0,w=y;w;w=i_(w))b++;for(;0<v-b;)m=i_(m),v--;for(;0<b-v;)y=i_(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=i_(m),y=i_(y)}m=null}else m=null;h!==null&&Iie(f,d,h,m,!1),p!==null&&g!==null&&Iie(f,g,p,m,!0)}}e:{if(d=l?K_(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=Tje;else if(_ie(d))if(_ye)E=kje;else{E=Cje;var S=Aje}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=Ije);if(E&&(E=E(e,l))){bye(f,E,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&xB(d,"number",d.value)}switch(S=l?K_(l):window,e){case"focusin":(_ie(S)||S.contentEditable==="true")&&(G_=S,$B=l,jA=null);break;case"focusout":jA=$B=G_=null;break;case"mousedown":MB=!0;break;case"contextmenu":case"mouseup":case"dragend":MB=!1,Tie(f,n,c);break;case"selectionchange":if(Pje)break;case"keydown":case"keyup":Tie(f,n,c)}var T;if(yq)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else W_?yye(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(gye&&n.locale!=="ko"&&(W_||A!=="onCompositionStart"?A==="onCompositionEnd"&&W_&&(T=mye()):(Ug=c,pq="value"in Ug?Ug.value:Ug.textContent,W_=!0)),S=YD(l,A),0<S.length&&(A=new gie(A,e,null,n,c),f.push({event:A,listeners:S}),T?A.data=T:(T=vye(n),T!==null&&(A.data=T)))),(T=_je?wje(e,n):Eje(e,n))&&(l=YD(l,"onBeforeInput"),0<l.length&&(c=new gie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=T))}Rye(f,t)})}function HC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function YD(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=LC(e,n),s!=null&&r.unshift(HC(e,s,i)),s=LC(e,t),s!=null&&r.push(HC(e,s,i))),e=e.return}return r}function i_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Iie(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=LC(n,s),u!=null&&o.unshift(HC(n,u,a))):i||(u=LC(n,s),u!=null&&o.push(HC(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Mje=/\r\n?/g,Lje=/\u0000|\uFFFD/g;function kie(e){return(typeof e=="string"?e:""+e).replace(Mje,`
`).replace(Lje,"")}function zR(e,t,n){if(t=kie(t),kie(e)!==t&&n)throw Error(et(425))}function KD(){}var LB=null,FB=null;function jB(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var BB=typeof setTimeout=="function"?setTimeout:void 0,Fje=typeof clearTimeout=="function"?clearTimeout:void 0,Rie=typeof Promise=="function"?Promise:void 0,jje=typeof queueMicrotask=="function"?queueMicrotask:typeof Rie<"u"?function(e){return Rie.resolve(null).then(e).catch(Bje)}:BB;function Bje(e){setTimeout(function(){throw e})}function L5(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),BC(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);BC(t)}function s0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Nie(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xx=Math.random().toString(36).slice(2),Rd="__reactFiber$"+xx,qC="__reactProps$"+xx,om="__reactContainer$"+xx,UB="__reactEvents$"+xx,Uje="__reactListeners$"+xx,zje="__reactHandles$"+xx;function jv(e){var t=e[Rd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[om]||n[Rd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Nie(e);e!==null;){if(n=e[Rd])return n;e=Nie(e)}return t}e=n,n=e.parentNode}return null}function AI(e){return e=e[Rd]||e[om],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function K_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(et(33))}function kM(e){return e[qC]||null}var zB=[],X_=-1;function my(e){return{current:e}}function ci(e){0>X_||(e.current=zB[X_],zB[X_]=null,X_--)}function ei(e,t){X_++,zB[X_]=e.current,e.current=t}var I0={},ya=my(I0),$u=my(!1),E1=I0;function iE(e,t){var n=e.type.contextTypes;if(!n)return I0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mu(e){return e=e.childContextTypes,e!=null}function XD(){ci($u),ci(ya)}function Pie(e,t,n){if(ya.current!==I0)throw Error(et(168));ei(ya,t),ei($u,n)}function Pye(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(et(108,A8e(e)||"Unknown",i));return Pi({},n,r)}function QD(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||I0,E1=ya.current,ei(ya,e),ei($u,$u.current),!0}function Die(e,t,n){var r=e.stateNode;if(!r)throw Error(et(169));n?(e=Pye(e,t,E1),r.__reactInternalMemoizedMergedChildContext=e,ci($u),ci(ya),ei(ya,e)):ci($u),ei($u,n)}var Ep=null,RM=!1,F5=!1;function Dye(e){Ep===null?Ep=[e]:Ep.push(e)}function Vje(e){RM=!0,Dye(e)}function gy(){if(!F5&&Ep!==null){F5=!0;var e=0,t=Pr;try{var n=Ep;for(Pr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ep=null,RM=!1}catch(i){throw Ep!==null&&(Ep=Ep.slice(e+1)),iye(cq,gy),i}finally{Pr=t,F5=!1}}return null}var Q_=[],J_=0,JD=null,ZD=0,ac=[],uc=0,x1=null,Op=1,$p="";function fv(e,t){Q_[J_++]=ZD,Q_[J_++]=JD,JD=e,ZD=t}function Oye(e,t,n){ac[uc++]=Op,ac[uc++]=$p,ac[uc++]=x1,x1=e;var r=Op;e=$p;var i=32-kf(r)-1;r&=~(1<<i),n+=1;var s=32-kf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Op=1<<32-kf(t)+i|n<<i|r,$p=s+e}else Op=1<<s|n<<i|r,$p=e}function bq(e){e.return!==null&&(fv(e,1),Oye(e,1,0))}function _q(e){for(;e===JD;)JD=Q_[--J_],Q_[J_]=null,ZD=Q_[--J_],Q_[J_]=null;for(;e===x1;)x1=ac[--uc],ac[uc]=null,$p=ac[--uc],ac[uc]=null,Op=ac[--uc],ac[uc]=null}var Tl=null,vl=null,_i=!1,hf=null;function $ye(e,t){var n=gc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Oie(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Tl=e,vl=s0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Tl=e,vl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=x1!==null?{id:Op,overflow:$p}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=gc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Tl=e,vl=null,!0):!1;default:return!1}}function VB(e){return(e.mode&1)!==0&&(e.flags&128)===0}function HB(e){if(_i){var t=vl;if(t){var n=t;if(!Oie(e,t)){if(VB(e))throw Error(et(418));t=s0(n.nextSibling);var r=Tl;t&&Oie(e,t)?$ye(r,n):(e.flags=e.flags&-4097|2,_i=!1,Tl=e)}}else{if(VB(e))throw Error(et(418));e.flags=e.flags&-4097|2,_i=!1,Tl=e}}}function $ie(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Tl=e}function VR(e){if(e!==Tl)return!1;if(!_i)return $ie(e),_i=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!jB(e.type,e.memoizedProps)),t&&(t=vl)){if(VB(e))throw Mye(),Error(et(418));for(;t;)$ye(e,t),t=s0(t.nextSibling)}if($ie(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(et(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){vl=s0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}vl=null}}else vl=Tl?s0(e.stateNode.nextSibling):null;return!0}function Mye(){for(var e=vl;e;)e=s0(e.nextSibling)}function sE(){vl=Tl=null,_i=!1}function wq(e){hf===null?hf=[e]:hf.push(e)}var Hje=Mm.ReactCurrentBatchConfig;function YS(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(et(309));var r=n.stateNode}if(!r)throw Error(et(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(et(284));if(!n._owner)throw Error(et(290,e))}return e}function HR(e,t){throw e=Object.prototype.toString.call(t),Error(et(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Mie(e){var t=e._init;return t(e._payload)}function Lye(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=l0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=q5(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===q_?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Eg&&Mie(E)===v.type)?(w=i(v,b.props),w.ref=YS(y,v,b),w.return=y,w):(w=PP(b.type,b.key,b.props,null,y.mode,w),w.ref=YS(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=W5(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=o1(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=q5(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case DR:return b=PP(v.type,v.key,v.props,null,y.mode,b),b.ref=YS(y,null,v),b.return=y,b;case H_:return v=W5(v,y.mode,b),v.return=y,v;case Eg:var w=v._init;return f(y,w(v._payload),b)}if(qT(v)||VS(v))return v=o1(v,y.mode,b,null),v.return=y,v;HR(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case DR:return b.key===E?u(y,v,b,w):null;case H_:return b.key===E?l(y,v,b,w):null;case Eg:return E=b._init,d(y,v,E(b._payload),w)}if(qT(b)||VS(b))return E!==null?null:c(y,v,b,w,null);HR(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case DR:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case H_:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case Eg:var S=w._init;return h(y,v,b,S(w._payload),E)}if(qT(w)||VS(w))return y=y.get(b)||null,c(v,y,w,E,null);HR(v,w)}return null}function p(y,v,b,w){for(var E=null,S=null,T=v,A=v=0,C=null;T!==null&&A<b.length;A++){T.index>A?(C=T,T=null):C=T.sibling;var I=d(y,T,b[A],w);if(I===null){T===null&&(T=C);break}e&&T&&I.alternate===null&&t(y,T),v=s(I,v,A),S===null?E=I:S.sibling=I,S=I,T=C}if(A===b.length)return n(y,T),_i&&fv(y,A),E;if(T===null){for(;A<b.length;A++)T=f(y,b[A],w),T!==null&&(v=s(T,v,A),S===null?E=T:S.sibling=T,S=T);return _i&&fv(y,A),E}for(T=r(y,T);A<b.length;A++)C=h(T,y,A,b[A],w),C!==null&&(e&&C.alternate!==null&&T.delete(C.key===null?A:C.key),v=s(C,v,A),S===null?E=C:S.sibling=C,S=C);return e&&T.forEach(function(R){return t(y,R)}),_i&&fv(y,A),E}function m(y,v,b,w){var E=VS(b);if(typeof E!="function")throw Error(et(150));if(b=E.call(b),b==null)throw Error(et(151));for(var S=E=null,T=v,A=v=0,C=null,I=b.next();T!==null&&!I.done;A++,I=b.next()){T.index>A?(C=T,T=null):C=T.sibling;var R=d(y,T,I.value,w);if(R===null){T===null&&(T=C);break}e&&T&&R.alternate===null&&t(y,T),v=s(R,v,A),S===null?E=R:S.sibling=R,S=R,T=C}if(I.done)return n(y,T),_i&&fv(y,A),E;if(T===null){for(;!I.done;A++,I=b.next())I=f(y,I.value,w),I!==null&&(v=s(I,v,A),S===null?E=I:S.sibling=I,S=I);return _i&&fv(y,A),E}for(T=r(y,T);!I.done;A++,I=b.next())I=h(T,y,A,I.value,w),I!==null&&(e&&I.alternate!==null&&T.delete(I.key===null?A:I.key),v=s(I,v,A),S===null?E=I:S.sibling=I,S=I);return e&&T.forEach(function(O){return t(y,O)}),_i&&fv(y,A),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===q_&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case DR:e:{for(var E=b.key,S=v;S!==null;){if(S.key===E){if(E=b.type,E===q_){if(S.tag===7){n(y,S.sibling),v=i(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Eg&&Mie(E)===S.type){n(y,S.sibling),v=i(S,b.props),v.ref=YS(y,S,b),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}b.type===q_?(v=o1(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=PP(b.type,b.key,b.props,null,y.mode,w),w.ref=YS(y,v,b),w.return=y,y=w)}return o(y);case H_:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=W5(b,y.mode,w),v.return=y,y=v}return o(y);case Eg:return S=b._init,g(y,v,S(b._payload),w)}if(qT(b))return p(y,v,b,w);if(VS(b))return m(y,v,b,w);HR(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=q5(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var oE=Lye(!0),Fye=Lye(!1),eO=my(null),tO=null,Z_=null,Eq=null;function xq(){Eq=Z_=tO=null}function Sq(e){var t=eO.current;ci(eO),e._currentValue=t}function qB(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _w(e,t){tO=e,Eq=Z_=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ku=!0),e.firstContext=null)}function Tc(e){var t=e._currentValue;if(Eq!==e)if(e={context:e,memoizedValue:t,next:null},Z_===null){if(tO===null)throw Error(et(308));Z_=e,tO.dependencies={lanes:0,firstContext:e}}else Z_=Z_.next=e;return t}var Bv=null;function Tq(e){Bv===null?Bv=[e]:Bv.push(e)}function jye(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Tq(t)):(n.next=i.next,i.next=n),t.interleaved=n,am(e,r)}function am(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xg=!1;function Aq(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bye(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function o0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ar&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,am(e,n)}return i=r.interleaved,i===null?(t.next=t,Tq(r)):(t.next=i.next,i.next=t),r.interleaved=t,am(e,n)}function AP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fq(e,n)}}function Lie(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function nO(e,t,n,r){var i=e.updateQueue;xg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Pi({},f,d);break e;case 2:xg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);T1|=o,e.lanes=o,e.memoizedState=f}}function Fie(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(et(191,i));i.call(r)}}}var CI={},Zd=my(CI),WC=my(CI),GC=my(CI);function Uv(e){if(e===CI)throw Error(et(174));return e}function Cq(e,t){switch(ei(GC,t),ei(WC,e),ei(Zd,CI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:TB(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=TB(t,e)}ci(Zd),ei(Zd,t)}function aE(){ci(Zd),ci(WC),ci(GC)}function Uye(e){Uv(GC.current);var t=Uv(Zd.current),n=TB(t,e.type);t!==n&&(ei(WC,e),ei(Zd,n))}function Iq(e){WC.current===e&&(ci(Zd),ci(WC))}var Ii=my(0);function rO(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var j5=[];function kq(){for(var e=0;e<j5.length;e++)j5[e]._workInProgressVersionPrimary=null;j5.length=0}var CP=Mm.ReactCurrentDispatcher,B5=Mm.ReactCurrentBatchConfig,S1=0,Ri=null,As=null,Xs=null,iO=!1,BA=!1,YC=0,qje=0;function Wo(){throw Error(et(321))}function Rq(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ff(e[n],t[n]))return!1;return!0}function Nq(e,t,n,r,i,s){if(S1=s,Ri=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,CP.current=e===null||e.memoizedState===null?Kje:Xje,e=n(r,i),BA){s=0;do{if(BA=!1,YC=0,25<=s)throw Error(et(301));s+=1,Xs=As=null,t.updateQueue=null,CP.current=Qje,e=n(r,i)}while(BA)}if(CP.current=sO,t=As!==null&&As.next!==null,S1=0,Xs=As=Ri=null,iO=!1,t)throw Error(et(300));return e}function Pq(){var e=YC!==0;return YC=0,e}function _d(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xs===null?Ri.memoizedState=Xs=e:Xs=Xs.next=e,Xs}function Ac(){if(As===null){var e=Ri.alternate;e=e!==null?e.memoizedState:null}else e=As.next;var t=Xs===null?Ri.memoizedState:Xs.next;if(t!==null)Xs=t,As=e;else{if(e===null)throw Error(et(310));As=e,e={memoizedState:As.memoizedState,baseState:As.baseState,baseQueue:As.baseQueue,queue:As.queue,next:null},Xs===null?Ri.memoizedState=Xs=e:Xs=Xs.next=e}return Xs}function KC(e,t){return typeof t=="function"?t(e):t}function U5(e){var t=Ac(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=As,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((S1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ri.lanes|=c,T1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Ff(r,t.memoizedState)||(ku=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ri.lanes|=s,T1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function z5(e){var t=Ac(),n=t.queue;if(n===null)throw Error(et(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Ff(s,t.memoizedState)||(ku=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function zye(){}function Vye(e,t){var n=Ri,r=Ac(),i=t(),s=!Ff(r.memoizedState,i);if(s&&(r.memoizedState=i,ku=!0),r=r.queue,Dq(Wye.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Xs!==null&&Xs.memoizedState.tag&1){if(n.flags|=2048,XC(9,qye.bind(null,n,r,i,t),void 0,null),ao===null)throw Error(et(349));S1&30||Hye(n,t,i)}return i}function Hye(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ri.updateQueue,t===null?(t={lastEffect:null,stores:null},Ri.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function qye(e,t,n,r){t.value=n,t.getSnapshot=r,Gye(t)&&Yye(e)}function Wye(e,t,n){return n(function(){Gye(t)&&Yye(e)})}function Gye(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ff(e,n)}catch{return!0}}function Yye(e){var t=am(e,1);t!==null&&Rf(t,e,1,-1)}function jie(e){var t=_d();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:KC,lastRenderedState:e},t.queue=e,e=e.dispatch=Yje.bind(null,Ri,e),[t.memoizedState,e]}function XC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ri.updateQueue,t===null?(t={lastEffect:null,stores:null},Ri.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Kye(){return Ac().memoizedState}function IP(e,t,n,r){var i=_d();Ri.flags|=e,i.memoizedState=XC(1|t,n,void 0,r===void 0?null:r)}function NM(e,t,n,r){var i=Ac();r=r===void 0?null:r;var s=void 0;if(As!==null){var o=As.memoizedState;if(s=o.destroy,r!==null&&Rq(r,o.deps)){i.memoizedState=XC(t,n,s,r);return}}Ri.flags|=e,i.memoizedState=XC(1|t,n,s,r)}function Bie(e,t){return IP(8390656,8,e,t)}function Dq(e,t){return NM(2048,8,e,t)}function Xye(e,t){return NM(4,2,e,t)}function Qye(e,t){return NM(4,4,e,t)}function Jye(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Zye(e,t,n){return n=n!=null?n.concat([e]):null,NM(4,4,Jye.bind(null,t,e),n)}function Oq(){}function eve(e,t){var n=Ac();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rq(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function tve(e,t){var n=Ac();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Rq(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function nve(e,t,n){return S1&21?(Ff(n,t)||(n=aye(),Ri.lanes|=n,T1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ku=!0),e.memoizedState=n)}function Wje(e,t){var n=Pr;Pr=n!==0&&4>n?n:4,e(!0);var r=B5.transition;B5.transition={};try{e(!1),t()}finally{Pr=n,B5.transition=r}}function rve(){return Ac().memoizedState}function Gje(e,t,n){var r=u0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ive(e))sve(t,n);else if(n=jye(e,t,n,r),n!==null){var i=Ha();Rf(n,e,r,i),ove(n,t,r)}}function Yje(e,t,n){var r=u0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ive(e))sve(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ff(a,o)){var u=t.interleaved;u===null?(i.next=i,Tq(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=jye(e,t,i,r),n!==null&&(i=Ha(),Rf(n,e,r,i),ove(n,t,r))}}function ive(e){var t=e.alternate;return e===Ri||t!==null&&t===Ri}function sve(e,t){BA=iO=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ove(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,fq(e,n)}}var sO={readContext:Tc,useCallback:Wo,useContext:Wo,useEffect:Wo,useImperativeHandle:Wo,useInsertionEffect:Wo,useLayoutEffect:Wo,useMemo:Wo,useReducer:Wo,useRef:Wo,useState:Wo,useDebugValue:Wo,useDeferredValue:Wo,useTransition:Wo,useMutableSource:Wo,useSyncExternalStore:Wo,useId:Wo,unstable_isNewReconciler:!1},Kje={readContext:Tc,useCallback:function(e,t){return _d().memoizedState=[e,t===void 0?null:t],e},useContext:Tc,useEffect:Bie,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,IP(4194308,4,Jye.bind(null,t,e),n)},useLayoutEffect:function(e,t){return IP(4194308,4,e,t)},useInsertionEffect:function(e,t){return IP(4,2,e,t)},useMemo:function(e,t){var n=_d();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_d();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Gje.bind(null,Ri,e),[r.memoizedState,e]},useRef:function(e){var t=_d();return e={current:e},t.memoizedState=e},useState:jie,useDebugValue:Oq,useDeferredValue:function(e){return _d().memoizedState=e},useTransition:function(){var e=jie(!1),t=e[0];return e=Wje.bind(null,e[1]),_d().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ri,i=_d();if(_i){if(n===void 0)throw Error(et(407));n=n()}else{if(n=t(),ao===null)throw Error(et(349));S1&30||Hye(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Bie(Wye.bind(null,r,s,e),[e]),r.flags|=2048,XC(9,qye.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=_d(),t=ao.identifierPrefix;if(_i){var n=$p,r=Op;n=(r&~(1<<32-kf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=YC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=qje++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xje={readContext:Tc,useCallback:eve,useContext:Tc,useEffect:Dq,useImperativeHandle:Zye,useInsertionEffect:Xye,useLayoutEffect:Qye,useMemo:tve,useReducer:U5,useRef:Kye,useState:function(){return U5(KC)},useDebugValue:Oq,useDeferredValue:function(e){var t=Ac();return nve(t,As.memoizedState,e)},useTransition:function(){var e=U5(KC)[0],t=Ac().memoizedState;return[e,t]},useMutableSource:zye,useSyncExternalStore:Vye,useId:rve,unstable_isNewReconciler:!1},Qje={readContext:Tc,useCallback:eve,useContext:Tc,useEffect:Dq,useImperativeHandle:Zye,useInsertionEffect:Xye,useLayoutEffect:Qye,useMemo:tve,useReducer:z5,useRef:Kye,useState:function(){return z5(KC)},useDebugValue:Oq,useDeferredValue:function(e){var t=Ac();return As===null?t.memoizedState=e:nve(t,As.memoizedState,e)},useTransition:function(){var e=z5(KC)[0],t=Ac().memoizedState;return[e,t]},useMutableSource:zye,useSyncExternalStore:Vye,useId:rve,unstable_isNewReconciler:!1};function af(e,t){if(e&&e.defaultProps){t=Pi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function WB(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var PM={isMounted:function(e){return(e=e._reactInternals)?gb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ha(),i=u0(e),s=Wp(r,i);s.payload=t,n!=null&&(s.callback=n),t=o0(e,s,i),t!==null&&(Rf(t,e,i,r),AP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ha(),i=u0(e),s=Wp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=o0(e,s,i),t!==null&&(Rf(t,e,i,r),AP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ha(),r=u0(e),i=Wp(n,r);i.tag=2,t!=null&&(i.callback=t),t=o0(e,i,r),t!==null&&(Rf(t,e,r,n),AP(t,e,r))}};function Uie(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!zC(n,r)||!zC(i,s):!0}function ave(e,t,n){var r=!1,i=I0,s=t.contextType;return typeof s=="object"&&s!==null?s=Tc(s):(i=Mu(t)?E1:ya.current,r=t.contextTypes,s=(r=r!=null)?iE(e,i):I0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=PM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function zie(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&PM.enqueueReplaceState(t,t.state,null)}function GB(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Aq(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Tc(s):(s=Mu(t)?E1:ya.current,i.context=iE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(WB(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&PM.enqueueReplaceState(i,i.state,null),nO(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function uE(e,t){try{var n="",r=t;do n+=T8e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function V5(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function YB(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Jje=typeof WeakMap=="function"?WeakMap:Map;function uve(e,t,n){n=Wp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){aO||(aO=!0,iU=r),YB(e,t)},n}function lve(e,t,n){n=Wp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){YB(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){YB(e,t),typeof r!="function"&&(a0===null?a0=new Set([this]):a0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Vie(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Jje;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=d9e.bind(null,e,t,n),t.then(e,e))}function Hie(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function qie(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Wp(-1,1),t.tag=2,o0(n,t,1))),n.lanes|=1),e)}var Zje=Mm.ReactCurrentOwner,ku=!1;function Da(e,t,n,r){t.child=e===null?Fye(t,null,n,r):oE(t,e.child,n,r)}function Wie(e,t,n,r,i){n=n.render;var s=t.ref;return _w(t,i),r=Nq(e,t,n,r,s,i),n=Pq(),e!==null&&!ku?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,um(e,t,i)):(_i&&n&&bq(t),t.flags|=1,Da(e,t,r,i),t.child)}function Gie(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!zq(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,cve(e,t,s,r,i)):(e=PP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:zC,n(o,r)&&e.ref===t.ref)return um(e,t,i)}return t.flags|=1,e=l0(s,r),e.ref=t.ref,e.return=t,t.child=e}function cve(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(zC(s,r)&&e.ref===t.ref)if(ku=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(ku=!0);else return t.lanes=e.lanes,um(e,t,i)}return KB(e,t,n,r,i)}function fve(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ei(tw,fl),fl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ei(tw,fl),fl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ei(tw,fl),fl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ei(tw,fl),fl|=r;return Da(e,t,i,n),t.child}function dve(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function KB(e,t,n,r,i){var s=Mu(n)?E1:ya.current;return s=iE(t,s),_w(t,i),n=Nq(e,t,n,r,s,i),r=Pq(),e!==null&&!ku?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,um(e,t,i)):(_i&&r&&bq(t),t.flags|=1,Da(e,t,n,i),t.child)}function Yie(e,t,n,r,i){if(Mu(n)){var s=!0;QD(t)}else s=!1;if(_w(t,i),t.stateNode===null)kP(e,t),ave(t,n,r),GB(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Tc(l):(l=Mu(n)?E1:ya.current,l=iE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&zie(t,o,r,l),xg=!1;var d=t.memoizedState;o.state=d,nO(t,r,o,i),u=t.memoizedState,a!==r||d!==u||$u.current||xg?(typeof c=="function"&&(WB(t,n,c,r),u=t.memoizedState),(a=xg||Uie(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Bye(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:af(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Tc(u):(u=Mu(n)?E1:ya.current,u=iE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&zie(t,o,r,u),xg=!1,d=t.memoizedState,o.state=d,nO(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||$u.current||xg?(typeof h=="function"&&(WB(t,n,h,r),p=t.memoizedState),(l=xg||Uie(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return XB(e,t,n,r,s,i)}function XB(e,t,n,r,i,s){dve(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Die(t,n,!1),um(e,t,s);r=t.stateNode,Zje.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=oE(t,e.child,null,s),t.child=oE(t,null,a,s)):Da(e,t,a,s),t.memoizedState=r.state,i&&Die(t,n,!0),t.child}function hve(e){var t=e.stateNode;t.pendingContext?Pie(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pie(e,t.context,!1),Cq(e,t.containerInfo)}function Kie(e,t,n,r,i){return sE(),wq(i),t.flags|=256,Da(e,t,n,r),t.child}var QB={dehydrated:null,treeContext:null,retryLane:0};function JB(e){return{baseLanes:e,cachePool:null,transitions:null}}function pve(e,t,n){var r=t.pendingProps,i=Ii.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ei(Ii,i&1),e===null)return HB(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=$M(o,r,0,null),e=o1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=JB(n),t.memoizedState=QB,e):$q(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return e9e(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=l0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=l0(a,s):(s=o1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?JB(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=QB,r}return s=e.child,e=s.sibling,r=l0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function $q(e,t){return t=$M({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function qR(e,t,n,r){return r!==null&&wq(r),oE(t,e.child,null,n),e=$q(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function e9e(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=V5(Error(et(422))),qR(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=$M({mode:"visible",children:r.children},i,0,null),s=o1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&oE(t,e.child,null,o),t.child.memoizedState=JB(o),t.memoizedState=QB,s);if(!(t.mode&1))return qR(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(et(419)),r=V5(s,r,void 0),qR(e,t,o,r)}if(a=(o&e.childLanes)!==0,ku||a){if(r=ao,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,am(e,i),Rf(r,e,i,-1))}return Uq(),r=V5(Error(et(421))),qR(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=h9e.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,vl=s0(i.nextSibling),Tl=t,_i=!0,hf=null,e!==null&&(ac[uc++]=Op,ac[uc++]=$p,ac[uc++]=x1,Op=e.id,$p=e.overflow,x1=t),t=$q(t,r.children),t.flags|=4096,t)}function Xie(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),qB(e.return,t,n)}function H5(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function mve(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Da(e,t,r.children,n),r=Ii.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Xie(e,n,t);else if(e.tag===19)Xie(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ei(Ii,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&rO(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),H5(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&rO(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}H5(t,!0,n,null,s);break;case"together":H5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function um(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),T1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(et(153));if(t.child!==null){for(e=t.child,n=l0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=l0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function t9e(e,t,n){switch(t.tag){case 3:hve(t),sE();break;case 5:Uye(t);break;case 1:Mu(t.type)&&QD(t);break;case 4:Cq(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ei(eO,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ei(Ii,Ii.current&1),t.flags|=128,null):n&t.child.childLanes?pve(e,t,n):(ei(Ii,Ii.current&1),e=um(e,t,n),e!==null?e.sibling:null);ei(Ii,Ii.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return mve(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ei(Ii,Ii.current),r)break;return null;case 22:case 23:return t.lanes=0,fve(e,t,n)}return um(e,t,n)}var gve,ZB,yve,vve;gve=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ZB=function(){};yve=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Uv(Zd.current);var s=null;switch(n){case"input":i=wB(e,i),r=wB(e,r),s=[];break;case"select":i=Pi({},i,{value:void 0}),r=Pi({},r,{value:void 0}),s=[];break;case"textarea":i=SB(e,i),r=SB(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=KD)}AB(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&($C.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&($C.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&si("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};vve=function(e,t,n,r){n!==r&&(t.flags|=4)};function KS(e,t){if(!_i)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function n9e(e,t,n){var r=t.pendingProps;switch(_q(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:return Mu(t.type)&&XD(),Go(t),null;case 3:return r=t.stateNode,aE(),ci($u),ci(ya),kq(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(VR(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,hf!==null&&(aU(hf),hf=null))),ZB(e,t),Go(t),null;case 5:Iq(t);var i=Uv(GC.current);if(n=t.type,e!==null&&t.stateNode!=null)yve(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(et(166));return Go(t),null}if(e=Uv(Zd.current),VR(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Rd]=t,r[qC]=s,e=(t.mode&1)!==0,n){case"dialog":si("cancel",r),si("close",r);break;case"iframe":case"object":case"embed":si("load",r);break;case"video":case"audio":for(i=0;i<GT.length;i++)si(GT[i],r);break;case"source":si("error",r);break;case"img":case"image":case"link":si("error",r),si("load",r);break;case"details":si("toggle",r);break;case"input":sie(r,s),si("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},si("invalid",r);break;case"textarea":aie(r,s),si("invalid",r)}AB(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&zR(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&zR(r.textContent,a,e),i=["children",""+a]):$C.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&si("scroll",r)}switch(n){case"input":OR(r),oie(r,s,!0);break;case"textarea":OR(r),uie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=KD)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=W0e(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Rd]=t,e[qC]=r,gve(e,t,!1,!1),t.stateNode=e;e:{switch(o=CB(n,r),n){case"dialog":si("cancel",e),si("close",e),i=r;break;case"iframe":case"object":case"embed":si("load",e),i=r;break;case"video":case"audio":for(i=0;i<GT.length;i++)si(GT[i],e);i=r;break;case"source":si("error",e),i=r;break;case"img":case"image":case"link":si("error",e),si("load",e),i=r;break;case"details":si("toggle",e),i=r;break;case"input":sie(e,r),i=wB(e,r),si("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Pi({},r,{value:void 0}),si("invalid",e);break;case"textarea":aie(e,r),i=SB(e,r),si("invalid",e);break;default:i=r}AB(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?K0e(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&G0e(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&MC(e,u):typeof u=="number"&&MC(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&($C.hasOwnProperty(s)?u!=null&&s==="onScroll"&&si("scroll",e):u!=null&&sq(e,s,u,o))}switch(n){case"input":OR(e),oie(e,r,!1);break;case"textarea":OR(e),uie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+C0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?gw(e,!!r.multiple,s,!1):r.defaultValue!=null&&gw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=KD)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&t.stateNode!=null)vve(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(et(166));if(n=Uv(GC.current),Uv(Zd.current),VR(t)){if(r=t.stateNode,n=t.memoizedProps,r[Rd]=t,(s=r.nodeValue!==n)&&(e=Tl,e!==null))switch(e.tag){case 3:zR(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zR(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Rd]=t,t.stateNode=r}return Go(t),null;case 13:if(ci(Ii),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_i&&vl!==null&&t.mode&1&&!(t.flags&128))Mye(),sE(),t.flags|=98560,s=!1;else if(s=VR(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(et(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(et(317));s[Rd]=t}else sE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Go(t),s=!1}else hf!==null&&(aU(hf),hf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ii.current&1?Ps===0&&(Ps=3):Uq())),t.updateQueue!==null&&(t.flags|=4),Go(t),null);case 4:return aE(),ZB(e,t),e===null&&VC(t.stateNode.containerInfo),Go(t),null;case 10:return Sq(t.type._context),Go(t),null;case 17:return Mu(t.type)&&XD(),Go(t),null;case 19:if(ci(Ii),s=t.memoizedState,s===null)return Go(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)KS(s,!1);else{if(Ps!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=rO(e),o!==null){for(t.flags|=128,KS(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ei(Ii,Ii.current&1|2),t.child}e=e.sibling}s.tail!==null&&rs()>lE&&(t.flags|=128,r=!0,KS(s,!1),t.lanes=4194304)}else{if(!r)if(e=rO(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),KS(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_i)return Go(t),null}else 2*rs()-s.renderingStartTime>lE&&n!==1073741824&&(t.flags|=128,r=!0,KS(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=rs(),t.sibling=null,n=Ii.current,ei(Ii,r?n&1|2:n&1),t):(Go(t),null);case 22:case 23:return Bq(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?fl&1073741824&&(Go(t),t.subtreeFlags&6&&(t.flags|=8192)):Go(t),null;case 24:return null;case 25:return null}throw Error(et(156,t.tag))}function r9e(e,t){switch(_q(t),t.tag){case 1:return Mu(t.type)&&XD(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return aE(),ci($u),ci(ya),kq(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Iq(t),null;case 13:if(ci(Ii),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(et(340));sE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ci(Ii),null;case 4:return aE(),null;case 10:return Sq(t.type._context),null;case 22:case 23:return Bq(),null;case 24:return null;default:return null}}var WR=!1,sa=!1,i9e=typeof WeakSet=="function"?WeakSet:Set,xt=null;function ew(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ui(e,t,r)}else n.current=null}function eU(e,t,n){try{n()}catch(r){Ui(e,t,r)}}var Qie=!1;function s9e(e,t){if(LB=WD,e=xye(),vq(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(FB={focusedElem:e,selectionRange:n},WD=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:af(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(et(163))}}catch(w){Ui(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=Qie,Qie=!1,p}function UA(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&eU(t,n,s)}i=i.next}while(i!==r)}}function DM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function tU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function bve(e){var t=e.alternate;t!==null&&(e.alternate=null,bve(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Rd],delete t[qC],delete t[UB],delete t[Uje],delete t[zje])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _ve(e){return e.tag===5||e.tag===3||e.tag===4}function Jie(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_ve(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function nU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=KD));else if(r!==4&&(e=e.child,e!==null))for(nU(e,t,n),e=e.sibling;e!==null;)nU(e,t,n),e=e.sibling}function rU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(rU(e,t,n),e=e.sibling;e!==null;)rU(e,t,n),e=e.sibling}var Eo=null,lf=!1;function lg(e,t,n){for(n=n.child;n!==null;)wve(e,t,n),n=n.sibling}function wve(e,t,n){if(Jd&&typeof Jd.onCommitFiberUnmount=="function")try{Jd.onCommitFiberUnmount(TM,n)}catch{}switch(n.tag){case 5:sa||ew(n,t);case 6:var r=Eo,i=lf;Eo=null,lg(e,t,n),Eo=r,lf=i,Eo!==null&&(lf?(e=Eo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Eo.removeChild(n.stateNode));break;case 18:Eo!==null&&(lf?(e=Eo,n=n.stateNode,e.nodeType===8?L5(e.parentNode,n):e.nodeType===1&&L5(e,n),BC(e)):L5(Eo,n.stateNode));break;case 4:r=Eo,i=lf,Eo=n.stateNode.containerInfo,lf=!0,lg(e,t,n),Eo=r,lf=i;break;case 0:case 11:case 14:case 15:if(!sa&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&eU(n,t,o),i=i.next}while(i!==r)}lg(e,t,n);break;case 1:if(!sa&&(ew(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ui(n,t,a)}lg(e,t,n);break;case 21:lg(e,t,n);break;case 22:n.mode&1?(sa=(r=sa)||n.memoizedState!==null,lg(e,t,n),sa=r):lg(e,t,n);break;default:lg(e,t,n)}}function Zie(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new i9e),t.forEach(function(r){var i=p9e.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Eo=a.stateNode,lf=!1;break e;case 3:Eo=a.stateNode.containerInfo,lf=!0;break e;case 4:Eo=a.stateNode.containerInfo,lf=!0;break e}a=a.return}if(Eo===null)throw Error(et(160));wve(s,o,i),Eo=null,lf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Ui(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Eve(t,e),t=t.sibling}function Eve(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Xc(t,e),dd(e),r&4){try{UA(3,e,e.return),DM(3,e)}catch(m){Ui(e,e.return,m)}try{UA(5,e,e.return)}catch(m){Ui(e,e.return,m)}}break;case 1:Xc(t,e),dd(e),r&512&&n!==null&&ew(n,n.return);break;case 5:if(Xc(t,e),dd(e),r&512&&n!==null&&ew(n,n.return),e.flags&32){var i=e.stateNode;try{MC(i,"")}catch(m){Ui(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&H0e(i,s),CB(a,o);var l=CB(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?K0e(i,f):c==="dangerouslySetInnerHTML"?G0e(i,f):c==="children"?MC(i,f):sq(i,c,f,l)}switch(a){case"input":EB(i,s);break;case"textarea":q0e(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?gw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?gw(i,!!s.multiple,s.defaultValue,!0):gw(i,!!s.multiple,s.multiple?[]:"",!1))}i[qC]=s}catch(m){Ui(e,e.return,m)}}break;case 6:if(Xc(t,e),dd(e),r&4){if(e.stateNode===null)throw Error(et(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Ui(e,e.return,m)}}break;case 3:if(Xc(t,e),dd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{BC(t.containerInfo)}catch(m){Ui(e,e.return,m)}break;case 4:Xc(t,e),dd(e);break;case 13:Xc(t,e),dd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Fq=rs())),r&4&&Zie(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(sa=(l=sa)||c,Xc(t,e),sa=l):Xc(t,e),dd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:UA(4,d,d.return);break;case 1:ew(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Ui(r,n,m)}}break;case 5:ew(d,d.return);break;case 22:if(d.memoizedState!==null){tse(f);continue}}h!==null?(h.return=d,xt=h):tse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Y0e("display",o))}catch(m){Ui(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Ui(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Xc(t,e),dd(e),r&4&&Zie(e);break;case 21:break;default:Xc(t,e),dd(e)}}function dd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_ve(n)){var r=n;break e}n=n.return}throw Error(et(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(MC(i,""),r.flags&=-33);var s=Jie(e);rU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Jie(e);nU(e,a,o);break;default:throw Error(et(161))}}catch(u){Ui(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function o9e(e,t,n){xt=e,xve(e)}function xve(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||WR;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||sa;a=WR;var l=sa;if(WR=o,(sa=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?nse(i):u!==null?(u.return=o,xt=u):nse(i);for(;s!==null;)xt=s,xve(s),s=s.sibling;xt=i,WR=a,sa=l}ese(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):ese(e)}}function ese(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:sa||DM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!sa)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:af(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Fie(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Fie(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&BC(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(et(163))}sa||t.flags&512&&tU(t)}catch(d){Ui(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function tse(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function nse(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{DM(4,t)}catch(u){Ui(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Ui(t,i,u)}}var s=t.return;try{tU(t)}catch(u){Ui(t,s,u)}break;case 5:var o=t.return;try{tU(t)}catch(u){Ui(t,o,u)}}}catch(u){Ui(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var a9e=Math.ceil,oO=Mm.ReactCurrentDispatcher,Mq=Mm.ReactCurrentOwner,wc=Mm.ReactCurrentBatchConfig,ar=0,ao=null,ys=null,Ro=0,fl=0,tw=my(0),Ps=0,QC=null,T1=0,OM=0,Lq=0,zA=null,wu=null,Fq=0,lE=1/0,yp=null,aO=!1,iU=null,a0=null,GR=!1,zg=null,uO=0,VA=0,sU=null,RP=-1,NP=0;function Ha(){return ar&6?rs():RP!==-1?RP:RP=rs()}function u0(e){return e.mode&1?ar&2&&Ro!==0?Ro&-Ro:Hje.transition!==null?(NP===0&&(NP=aye()),NP):(e=Pr,e!==0||(e=window.event,e=e===void 0?16:pye(e.type)),e):1}function Rf(e,t,n,r){if(50<VA)throw VA=0,sU=null,Error(et(185));SI(e,n,r),(!(ar&2)||e!==ao)&&(e===ao&&(!(ar&2)&&(OM|=n),Ps===4&&Pg(e,Ro)),Lu(e,r),n===1&&ar===0&&!(t.mode&1)&&(lE=rs()+500,RM&&gy()))}function Lu(e,t){var n=e.callbackNode;H8e(e,t);var r=qD(e,e===ao?Ro:0);if(r===0)n!==null&&fie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&fie(n),t===1)e.tag===0?Vje(rse.bind(null,e)):Dye(rse.bind(null,e)),jje(function(){!(ar&6)&&gy()}),n=null;else{switch(uye(r)){case 1:n=cq;break;case 4:n=sye;break;case 16:n=HD;break;case 536870912:n=oye;break;default:n=HD}n=Nve(n,Sve.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Sve(e,t){if(RP=-1,NP=0,ar&6)throw Error(et(327));var n=e.callbackNode;if(ww()&&e.callbackNode!==n)return null;var r=qD(e,e===ao?Ro:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=lO(e,r);else{t=r;var i=ar;ar|=2;var s=Ave();(ao!==e||Ro!==t)&&(yp=null,lE=rs()+500,s1(e,t));do try{c9e();break}catch(a){Tve(e,a)}while(!0);xq(),oO.current=s,ar=i,ys!==null?t=0:(ao=null,Ro=0,t=Ps)}if(t!==0){if(t===2&&(i=PB(e),i!==0&&(r=i,t=oU(e,i))),t===1)throw n=QC,s1(e,0),Pg(e,r),Lu(e,rs()),n;if(t===6)Pg(e,r);else{if(i=e.current.alternate,!(r&30)&&!u9e(i)&&(t=lO(e,r),t===2&&(s=PB(e),s!==0&&(r=s,t=oU(e,s))),t===1))throw n=QC,s1(e,0),Pg(e,r),Lu(e,rs()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(et(345));case 2:dv(e,wu,yp);break;case 3:if(Pg(e,r),(r&130023424)===r&&(t=Fq+500-rs(),10<t)){if(qD(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ha(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=BB(dv.bind(null,e,wu,yp),t);break}dv(e,wu,yp);break;case 4:if(Pg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-kf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=rs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*a9e(r/1960))-r,10<r){e.timeoutHandle=BB(dv.bind(null,e,wu,yp),r);break}dv(e,wu,yp);break;case 5:dv(e,wu,yp);break;default:throw Error(et(329))}}}return Lu(e,rs()),e.callbackNode===n?Sve.bind(null,e):null}function oU(e,t){var n=zA;return e.current.memoizedState.isDehydrated&&(s1(e,t).flags|=256),e=lO(e,t),e!==2&&(t=wu,wu=n,t!==null&&aU(t)),e}function aU(e){wu===null?wu=e:wu.push.apply(wu,e)}function u9e(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ff(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pg(e,t){for(t&=~Lq,t&=~OM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-kf(t),r=1<<n;e[n]=-1,t&=~r}}function rse(e){if(ar&6)throw Error(et(327));ww();var t=qD(e,0);if(!(t&1))return Lu(e,rs()),null;var n=lO(e,t);if(e.tag!==0&&n===2){var r=PB(e);r!==0&&(t=r,n=oU(e,r))}if(n===1)throw n=QC,s1(e,0),Pg(e,t),Lu(e,rs()),n;if(n===6)throw Error(et(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,dv(e,wu,yp),Lu(e,rs()),null}function jq(e,t){var n=ar;ar|=1;try{return e(t)}finally{ar=n,ar===0&&(lE=rs()+500,RM&&gy())}}function A1(e){zg!==null&&zg.tag===0&&!(ar&6)&&ww();var t=ar;ar|=1;var n=wc.transition,r=Pr;try{if(wc.transition=null,Pr=1,e)return e()}finally{Pr=r,wc.transition=n,ar=t,!(ar&6)&&gy()}}function Bq(){fl=tw.current,ci(tw)}function s1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Fje(n)),ys!==null)for(n=ys.return;n!==null;){var r=n;switch(_q(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&XD();break;case 3:aE(),ci($u),ci(ya),kq();break;case 5:Iq(r);break;case 4:aE();break;case 13:ci(Ii);break;case 19:ci(Ii);break;case 10:Sq(r.type._context);break;case 22:case 23:Bq()}n=n.return}if(ao=e,ys=e=l0(e.current,null),Ro=fl=t,Ps=0,QC=null,Lq=OM=T1=0,wu=zA=null,Bv!==null){for(t=0;t<Bv.length;t++)if(n=Bv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Bv=null}return e}function Tve(e,t){do{var n=ys;try{if(xq(),CP.current=sO,iO){for(var r=Ri.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}iO=!1}if(S1=0,Xs=As=Ri=null,BA=!1,YC=0,Mq.current=null,n===null||n.return===null){Ps=1,QC=t,ys=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Ro,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Hie(o);if(h!==null){h.flags&=-257,qie(h,o,a,s,t),h.mode&1&&Vie(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Vie(s,l,t),Uq();break e}u=Error(et(426))}}else if(_i&&a.mode&1){var g=Hie(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),qie(g,o,a,s,t),wq(uE(u,a));break e}}s=u=uE(u,a),Ps!==4&&(Ps=2),zA===null?zA=[s]:zA.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=uve(s,u,t);Lie(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(a0===null||!a0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=lve(s,a,t);Lie(s,w);break e}}s=s.return}while(s!==null)}Ive(n)}catch(E){t=E,ys===n&&n!==null&&(ys=n=n.return);continue}break}while(!0)}function Ave(){var e=oO.current;return oO.current=sO,e===null?sO:e}function Uq(){(Ps===0||Ps===3||Ps===2)&&(Ps=4),ao===null||!(T1&268435455)&&!(OM&268435455)||Pg(ao,Ro)}function lO(e,t){var n=ar;ar|=2;var r=Ave();(ao!==e||Ro!==t)&&(yp=null,s1(e,t));do try{l9e();break}catch(i){Tve(e,i)}while(!0);if(xq(),ar=n,oO.current=r,ys!==null)throw Error(et(261));return ao=null,Ro=0,Ps}function l9e(){for(;ys!==null;)Cve(ys)}function c9e(){for(;ys!==null&&!$8e();)Cve(ys)}function Cve(e){var t=Rve(e.alternate,e,fl);e.memoizedProps=e.pendingProps,t===null?Ive(e):ys=t,Mq.current=null}function Ive(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=r9e(n,t),n!==null){n.flags&=32767,ys=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ps=6,ys=null;return}}else if(n=n9e(n,t,fl),n!==null){ys=n;return}if(t=t.sibling,t!==null){ys=t;return}ys=t=e}while(t!==null);Ps===0&&(Ps=5)}function dv(e,t,n){var r=Pr,i=wc.transition;try{wc.transition=null,Pr=1,f9e(e,t,n,r)}finally{wc.transition=i,Pr=r}return null}function f9e(e,t,n,r){do ww();while(zg!==null);if(ar&6)throw Error(et(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(et(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(q8e(e,s),e===ao&&(ys=ao=null,Ro=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||GR||(GR=!0,Nve(HD,function(){return ww(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wc.transition,wc.transition=null;var o=Pr;Pr=1;var a=ar;ar|=4,Mq.current=null,s9e(e,n),Eve(n,e),Nje(FB),WD=!!LB,FB=LB=null,e.current=n,o9e(n),M8e(),ar=a,Pr=o,wc.transition=s}else e.current=n;if(GR&&(GR=!1,zg=e,uO=i),s=e.pendingLanes,s===0&&(a0=null),j8e(n.stateNode),Lu(e,rs()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(aO)throw aO=!1,e=iU,iU=null,e;return uO&1&&e.tag!==0&&ww(),s=e.pendingLanes,s&1?e===sU?VA++:(VA=0,sU=e):VA=0,gy(),null}function ww(){if(zg!==null){var e=uye(uO),t=wc.transition,n=Pr;try{if(wc.transition=null,Pr=16>e?16:e,zg===null)var r=!1;else{if(e=zg,zg=null,uO=0,ar&6)throw Error(et(331));var i=ar;for(ar|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:UA(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(bve(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:UA(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,xt=b;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:DM(9,a)}}catch(E){Ui(a,a.return,E)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(ar=i,gy(),Jd&&typeof Jd.onPostCommitFiberRoot=="function")try{Jd.onPostCommitFiberRoot(TM,e)}catch{}r=!0}return r}finally{Pr=n,wc.transition=t}}return!1}function ise(e,t,n){t=uE(n,t),t=uve(e,t,1),e=o0(e,t,1),t=Ha(),e!==null&&(SI(e,1,t),Lu(e,t))}function Ui(e,t,n){if(e.tag===3)ise(e,e,n);else for(;t!==null;){if(t.tag===3){ise(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(a0===null||!a0.has(r))){e=uE(n,e),e=lve(t,e,1),t=o0(t,e,1),e=Ha(),t!==null&&(SI(t,1,e),Lu(t,e));break}}t=t.return}}function d9e(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ha(),e.pingedLanes|=e.suspendedLanes&n,ao===e&&(Ro&n)===n&&(Ps===4||Ps===3&&(Ro&130023424)===Ro&&500>rs()-Fq?s1(e,0):Lq|=n),Lu(e,t)}function kve(e,t){t===0&&(e.mode&1?(t=LR,LR<<=1,!(LR&130023424)&&(LR=4194304)):t=1);var n=Ha();e=am(e,t),e!==null&&(SI(e,t,n),Lu(e,n))}function h9e(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kve(e,n)}function p9e(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(et(314))}r!==null&&r.delete(t),kve(e,n)}var Rve;Rve=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$u.current)ku=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ku=!1,t9e(e,t,n);ku=!!(e.flags&131072)}else ku=!1,_i&&t.flags&1048576&&Oye(t,ZD,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;kP(e,t),e=t.pendingProps;var i=iE(t,ya.current);_w(t,n),i=Nq(null,t,r,e,i,n);var s=Pq();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mu(r)?(s=!0,QD(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Aq(t),i.updater=PM,t.stateNode=i,i._reactInternals=t,GB(t,r,e,n),t=XB(null,t,r,!0,s,n)):(t.tag=0,_i&&s&&bq(t),Da(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(kP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=g9e(r),e=af(r,e),i){case 0:t=KB(null,t,r,e,n);break e;case 1:t=Yie(null,t,r,e,n);break e;case 11:t=Wie(null,t,r,e,n);break e;case 14:t=Gie(null,t,r,af(r.type,e),n);break e}throw Error(et(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:af(r,i),KB(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:af(r,i),Yie(e,t,r,i,n);case 3:e:{if(hve(t),e===null)throw Error(et(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Bye(e,t),nO(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=uE(Error(et(423)),t),t=Kie(e,t,r,n,i);break e}else if(r!==i){i=uE(Error(et(424)),t),t=Kie(e,t,r,n,i);break e}else for(vl=s0(t.stateNode.containerInfo.firstChild),Tl=t,_i=!0,hf=null,n=Fye(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sE(),r===i){t=um(e,t,n);break e}Da(e,t,r,n)}t=t.child}return t;case 5:return Uye(t),e===null&&HB(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,jB(r,i)?o=null:s!==null&&jB(r,s)&&(t.flags|=32),dve(e,t),Da(e,t,o,n),t.child;case 6:return e===null&&HB(t),null;case 13:return pve(e,t,n);case 4:return Cq(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=oE(t,null,r,n):Da(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:af(r,i),Wie(e,t,r,i,n);case 7:return Da(e,t,t.pendingProps,n),t.child;case 8:return Da(e,t,t.pendingProps.children,n),t.child;case 12:return Da(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ei(eO,r._currentValue),r._currentValue=o,s!==null)if(Ff(s.value,o)){if(s.children===i.children&&!$u.current){t=um(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Wp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),qB(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(et(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),qB(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Da(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,_w(t,n),i=Tc(i),r=r(i),t.flags|=1,Da(e,t,r,n),t.child;case 14:return r=t.type,i=af(r,t.pendingProps),i=af(r.type,i),Gie(e,t,r,i,n);case 15:return cve(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:af(r,i),kP(e,t),t.tag=1,Mu(r)?(e=!0,QD(t)):e=!1,_w(t,n),ave(t,r,i),GB(t,r,i,n),XB(null,t,r,!0,e,n);case 19:return mve(e,t,n);case 22:return fve(e,t,n)}throw Error(et(156,t.tag))};function Nve(e,t){return iye(e,t)}function m9e(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gc(e,t,n,r){return new m9e(e,t,n,r)}function zq(e){return e=e.prototype,!(!e||!e.isReactComponent)}function g9e(e){if(typeof e=="function")return zq(e)?1:0;if(e!=null){if(e=e.$$typeof,e===aq)return 11;if(e===uq)return 14}return 2}function l0(e,t){var n=e.alternate;return n===null?(n=gc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function PP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")zq(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case q_:return o1(n.children,i,s,t);case oq:o=8,i|=8;break;case yB:return e=gc(12,n,t,i|2),e.elementType=yB,e.lanes=s,e;case vB:return e=gc(13,n,t,i),e.elementType=vB,e.lanes=s,e;case bB:return e=gc(19,n,t,i),e.elementType=bB,e.lanes=s,e;case U0e:return $M(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case j0e:o=10;break e;case B0e:o=9;break e;case aq:o=11;break e;case uq:o=14;break e;case Eg:o=16,r=null;break e}throw Error(et(130,e==null?e:typeof e,""))}return t=gc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function o1(e,t,n,r){return e=gc(7,e,r,t),e.lanes=n,e}function $M(e,t,n,r){return e=gc(22,e,r,t),e.elementType=U0e,e.lanes=n,e.stateNode={isHidden:!1},e}function q5(e,t,n){return e=gc(6,e,null,t),e.lanes=n,e}function W5(e,t,n){return t=gc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function y9e(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=A5(0),this.expirationTimes=A5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vq(e,t,n,r,i,s,o,a,u){return e=new y9e(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=gc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aq(s),e}function v9e(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:H_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Pve(e){if(!e)return I0;e=e._reactInternals;e:{if(gb(e)!==e||e.tag!==1)throw Error(et(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(et(171))}if(e.tag===1){var n=e.type;if(Mu(n))return Pye(e,n,t)}return t}function Dve(e,t,n,r,i,s,o,a,u){return e=Vq(n,r,!0,e,i,s,o,a,u),e.context=Pve(null),n=e.current,r=Ha(),i=u0(n),s=Wp(r,i),s.callback=t??null,o0(n,s,i),e.current.lanes=i,SI(e,i,r),Lu(e,r),e}function MM(e,t,n,r){var i=t.current,s=Ha(),o=u0(i);return n=Pve(n),t.context===null?t.context=n:t.pendingContext=n,t=Wp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=o0(i,t,o),e!==null&&(Rf(e,i,o,s),AP(e,i,o)),o}function cO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function sse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Hq(e,t){sse(e,t),(e=e.alternate)&&sse(e,t)}function b9e(){return null}var Ove=typeof reportError=="function"?reportError:function(e){console.error(e)};function qq(e){this._internalRoot=e}LM.prototype.render=qq.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(et(409));MM(e,t,null,null)};LM.prototype.unmount=qq.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;A1(function(){MM(null,e,null,null)}),t[om]=null}};function LM(e){this._internalRoot=e}LM.prototype.unstable_scheduleHydration=function(e){if(e){var t=fye();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ng.length&&t!==0&&t<Ng[n].priority;n++);Ng.splice(n,0,e),n===0&&hye(e)}};function Wq(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function FM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ose(){}function _9e(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=cO(o);s.call(l)}}var o=Dve(t,r,e,0,null,!1,!1,"",ose);return e._reactRootContainer=o,e[om]=o.current,VC(e.nodeType===8?e.parentNode:e),A1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=cO(u);a.call(l)}}var u=Vq(e,0,!1,null,null,!1,!1,"",ose);return e._reactRootContainer=u,e[om]=u.current,VC(e.nodeType===8?e.parentNode:e),A1(function(){MM(t,u,n,r)}),u}function jM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=cO(o);a.call(u)}}MM(t,o,e,i)}else o=_9e(n,t,e,i,r);return cO(o)}lye=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=WT(t.pendingLanes);n!==0&&(fq(t,n|1),Lu(t,rs()),!(ar&6)&&(lE=rs()+500,gy()))}break;case 13:A1(function(){var r=am(e,1);if(r!==null){var i=Ha();Rf(r,e,1,i)}}),Hq(e,1)}};dq=function(e){if(e.tag===13){var t=am(e,134217728);if(t!==null){var n=Ha();Rf(t,e,134217728,n)}Hq(e,134217728)}};cye=function(e){if(e.tag===13){var t=u0(e),n=am(e,t);if(n!==null){var r=Ha();Rf(n,e,t,r)}Hq(e,t)}};fye=function(){return Pr};dye=function(e,t){var n=Pr;try{return Pr=e,t()}finally{Pr=n}};kB=function(e,t,n){switch(t){case"input":if(EB(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=kM(r);if(!i)throw Error(et(90));V0e(r),EB(r,i)}}}break;case"textarea":q0e(e,n);break;case"select":t=n.value,t!=null&&gw(e,!!n.multiple,t,!1)}};J0e=jq;Z0e=A1;var w9e={usingClientEntryPoint:!1,Events:[AI,K_,kM,X0e,Q0e,jq]},XS={findFiberByHostInstance:jv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},E9e={bundleType:XS.bundleType,version:XS.version,rendererPackageName:XS.rendererPackageName,rendererConfig:XS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nye(e),e===null?null:e.stateNode},findFiberByHostInstance:XS.findFiberByHostInstance||b9e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var YR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!YR.isDisabled&&YR.supportsFiber)try{TM=YR.inject(E9e),Jd=YR}catch{}}ql.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=w9e;ql.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wq(t))throw Error(et(200));return v9e(e,t,null,n)};ql.createRoot=function(e,t){if(!Wq(e))throw Error(et(299));var n=!1,r="",i=Ove;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Vq(e,1,!1,null,null,n,!1,r,i),e[om]=t.current,VC(e.nodeType===8?e.parentNode:e),new qq(t)};ql.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(et(188)):(e=Object.keys(e).join(","),Error(et(268,e)));return e=nye(t),e=e===null?null:e.stateNode,e};ql.flushSync=function(e){return A1(e)};ql.hydrate=function(e,t,n){if(!FM(t))throw Error(et(200));return jM(null,e,t,!0,n)};ql.hydrateRoot=function(e,t,n){if(!Wq(e))throw Error(et(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Ove;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Dve(t,null,e,1,n??null,i,!1,s,o),e[om]=t.current,VC(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new LM(t)};ql.render=function(e,t,n){if(!FM(t))throw Error(et(200));return jM(null,e,t,!1,n)};ql.unmountComponentAtNode=function(e){if(!FM(e))throw Error(et(40));return e._reactRootContainer?(A1(function(){jM(null,null,e,!1,function(){e._reactRootContainer=null,e[om]=null})}),!0):!1};ql.unstable_batchedUpdates=jq;ql.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!FM(n))throw Error(et(200));if(e==null||e._reactInternals===void 0)throw Error(et(38));return jM(e,t,n,!1,r)};ql.version="18.3.1-next-f1338f8080-20240426";function $ve(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($ve)}catch(e){console.error(e)}}$ve(),$0e.exports=ql;var II=$0e.exports;const x9e=Hl(II);var ase=II;mB.createRoot=ase.createRoot,mB.hydrateRoot=ase.hydrateRoot;var Nd=function(){return Nd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Nd.apply(this,arguments)};function kI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Cp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function use(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function S9e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Gn(e){return this instanceof Gn?(this.v=e,this):new Gn(e)}function zv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Gn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function G5(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Gn(e[i](o)),done:!1}:s?s(o):o}:s}}function HA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof use=="function"?use(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var DP="right-scroll-bar-position",OP="width-before-scroll-bar",T9e="with-scroll-bars-hidden",A9e="--removed-body-scroll-bar-size";function Y5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function C9e(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var I9e=typeof window<"u"?N.useLayoutEffect:N.useEffect,lse=new WeakMap;function k9e(e,t){var n=C9e(null,function(r){return e.forEach(function(i){return Y5(i,r)})});return I9e(function(){var r=lse.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||Y5(a,null)}),s.forEach(function(a){i.has(a)||Y5(a,o)})}lse.set(n,e)},[e]),n}function R9e(e){return e}function N9e(e,t){t===void 0&&(t=R9e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function P9e(e){e===void 0&&(e={});var t=N9e(null);return t.options=Nd({async:!0,ssr:!1},e),t}var Mve=function(e){var t=e.sideCar,n=kI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Nd({},n))};Mve.isSideCarExport=!0;function D9e(e,t){return e.useMedium(t),Mve}var Lve=P9e(),K5=function(){},BM=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:K5,onWheelCapture:K5,onTouchMoveCapture:K5}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=kI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=k9e([n,t]),S=Nd(Nd({},b),i);return N.createElement(N.Fragment,null,c&&N.createElement(w,{sideCar:Lve,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?N.cloneElement(N.Children.only(a),Nd(Nd({},S),{ref:E})):N.createElement(y,Nd({},S,{className:u,ref:E}),a))});BM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};BM.classNames={fullWidth:OP,zeroRight:DP};var O9e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $9e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=O9e();return t&&e.setAttribute("nonce",t),e}function M9e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function L9e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var F9e=function(){var e=0,t=null;return{add:function(n){e==0&&(t=$9e())&&(M9e(t,n),L9e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},j9e=function(){var e=F9e();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Fve=function(){var e=j9e(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},B9e={left:0,top:0,right:0,gap:0},X5=function(e){return parseInt(e||"",10)||0},U9e=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[X5(n),X5(r),X5(i)]},z9e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return B9e;var t=U9e(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},V9e=Fve(),Ew="data-scroll-locked",H9e=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(T9e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Ew,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(DP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(OP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(DP," .").concat(DP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(OP," .").concat(OP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Ew,`] {
    `).concat(A9e,": ").concat(a,`px;
  }
`)},cse=function(){var e=parseInt(document.body.getAttribute(Ew)||"0",10);return isFinite(e)?e:0},q9e=function(){N.useEffect(function(){return document.body.setAttribute(Ew,(cse()+1).toString()),function(){var e=cse()-1;e<=0?document.body.removeAttribute(Ew):document.body.setAttribute(Ew,e.toString())}},[])},W9e=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;q9e();var s=N.useMemo(function(){return z9e(i)},[i]);return N.createElement(V9e,{styles:H9e(s,!t,i,n?"":"!important")})},uU=!1;if(typeof window<"u")try{var KR=Object.defineProperty({},"passive",{get:function(){return uU=!0,!0}});window.addEventListener("test",KR,KR),window.removeEventListener("test",KR,KR)}catch{uU=!1}var s_=uU?{passive:!1}:!1,G9e=function(e){return e.tagName==="TEXTAREA"},jve=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!G9e(e)&&n[t]==="visible")},Y9e=function(e){return jve(e,"overflowY")},K9e=function(e){return jve(e,"overflowX")},fse=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Bve(e,r);if(i){var s=Uve(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},X9e=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Q9e=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Bve=function(e,t){return e==="v"?Y9e(t):K9e(t)},Uve=function(e,t){return e==="v"?X9e(t):Q9e(t)},J9e=function(e,t){return e==="h"&&t==="rtl"?-1:1},Z9e=function(e,t,n,r,i){var s=J9e(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=Uve(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&Bve(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},XR=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},dse=function(e){return[e.deltaX,e.deltaY]},hse=function(e){return e&&"current"in e?e.current:e},eBe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},tBe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},nBe=0,o_=[];function rBe(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(nBe++)[0],s=N.useState(Fve)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=S9e([e.lockRef.current],(e.shards||[]).map(hse),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=XR(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,S=m.target,T=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&T==="h"&&S.type==="range")return!1;var A=fse(T,S);if(!A)return!0;if(A?E=T:(E=T==="v"?"h":"v",A=fse(T,S)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var C=r.current||E;return Z9e(C,g,m,C==="h"?b:w,!0)},[]),u=N.useCallback(function(m){var g=m;if(!(!o_.length||o_[o_.length-1]!==s)){var y="deltaY"in g?dse(g):XR(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&eBe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(hse).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=N.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:iBe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=N.useCallback(function(m){n.current=XR(m),r.current=void 0},[]),f=N.useCallback(function(m){l(m.type,dse(m),m.target,a(m,e.lockRef.current))},[]),d=N.useCallback(function(m){l(m.type,XR(m),m.target,a(m,e.lockRef.current))},[]);N.useEffect(function(){return o_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,s_),document.addEventListener("touchmove",u,s_),document.addEventListener("touchstart",c,s_),function(){o_=o_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,s_),document.removeEventListener("touchmove",u,s_),document.removeEventListener("touchstart",c,s_)}},[]);var h=e.removeScrollBar,p=e.inert;return N.createElement(N.Fragment,null,p?N.createElement(s,{styles:tBe(i)}):null,h?N.createElement(W9e,{gapMode:e.gapMode}):null)}function iBe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const sBe=D9e(Lve,rBe);var UM=N.forwardRef(function(e,t){return N.createElement(BM,Nd({},e,{ref:t,sideCar:sBe}))});UM.classNames=BM.classNames;function Ni(e){return Object.keys(e)}function Q5(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Gq(e,t){const n={...e},r=t;return Q5(e)&&Q5(t)&&Object.keys(t).forEach(i=>{Q5(r[i])&&i in e?n[i]=Gq(n[i],r[i]):n[i]=r[i]}),n}function oBe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function aBe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function lU(e){const t=aBe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function J5(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function zve(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?J5(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?J5(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?J5(s):s}}return r}return n}const Ae=zve("rem",{shouldScale:!0}),fO=zve("em");function Sx(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function Vve(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function yy(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==N.Fragment:!1}function fo(e){const t=N.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=N.useContext(t);if(i===null)throw new Error(e);return i}]}function Tx(e=null){const t=N.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>N.useContext(t)]}function dO(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function hO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function uBe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function lBe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function cBe(e,t,n){return hO(e,n)===hO(t,n)}function Yq({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=hO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>cBe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=lBe(l,u,r),f=uBe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const fBe={app:100,modal:200,popover:300,overlay:400,max:9999};function Lc(e){return fBe[e]}const dBe=()=>{};function hBe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||dBe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function en(e,t="size",n=!0){if(e!==void 0)return Vve(e)?n?Ae(e):e:`var(--${t}-${e})`}function Rl(e){return en(e,"mantine-spacing")}function Yr(e){return e===void 0?"var(--mantine-radius-default)":en(e,"mantine-radius")}function uo(e){return en(e,"mantine-font-size")}function Hve(e){return en(e,"mantine-line-height",!1)}function Kq(e){if(e)return en(e,"mantine-shadow",!1)}function Mp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function Xq(e,t){return e in t.breakpoints?lU(t.breakpoints[e]):lU(e)}function pO(e,t){const n=e.map(r=>({value:r,px:Xq(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function YT(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function pBe(e,t,n){var r;return n?Array.from(((r=hO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function mBe(){const[e,t]=N.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Hd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function qA(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Tv(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function zM(e,t){const n=Tv(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const pse=["mousedown","touchstart"];function gBe(e,t,n){const r=N.useRef();return N.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||pse).forEach(s=>document.addEventListener(s,i)),()=>{(t||pse).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function yBe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function vBe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function bBe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=N.useState(n?t:vBe(e)),s=N.useRef();return N.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),yBe(s.current,o=>i(o.matches))},[e]),r}const yb=typeof document<"u"?N.useLayoutEffect:N.useEffect;function lm(e,t){const n=N.useRef(!1);N.useEffect(()=>()=>{n.current=!1},[]),N.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function qve({opened:e,shouldReturnFocus:t=!0}){const n=N.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return lm(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function _Be(e,t="body > :not(script)"){const n=qA(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const wBe=/input|select|textarea|button|object/,Wve="a, input, select, textarea, button, object, [tabindex]";function EBe(e){return e.style.display==="none"}function xBe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(EBe(n))return!1;n=n.parentNode}return!0}function Gve(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function cU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Gve(e));return(wBe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&xBe(e)}function Yve(e){const t=Gve(e);return(Number.isNaN(t)||t>=0)&&cU(e)}function SBe(e){return Array.from(e.querySelectorAll(Wve)).filter(Yve)}function TBe(e,t){const n=SBe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function ABe(e=!0){const t=N.useRef(),n=N.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(Wve));o=a.find(Yve)||a.find(cU)||null,!o&&cU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=N.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=_Be(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return N.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&TBe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const CBe=Wi.useId||(()=>{});function IBe(){const e=CBe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ea(e){const t=IBe(),[n,r]=N.useState(t);return yb(()=>{r(qA())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function Kve(e,t,n){N.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function Qq(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Xve(...e){return t=>{e.forEach(n=>Qq(n,t))}}function cs(...e){return N.useCallback(Xve(...e),e)}function Qve(e,t,n="ltr"){const r=N.useRef(null),i=N.useRef(!1),s=N.useRef(!1),o=N.useRef(0),[a,u]=N.useState(!1);return N.useEffect(()=>{i.current=!0},[]),N.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const T=Hd((w-S.left)/S.width,0,1);e({x:n==="ltr"?T:1-T,y:Hd((E-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ws({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=N.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function Jq(e,t){return bBe("(prefers-reduced-motion: reduce)",e,t)}const kBe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function xw(e){const t=N.useRef(0),n=N.useRef(null),[r,i]=N.useState(kBe),s=N.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return N.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function RBe(e){const[t,{width:n,height:r}]=xw(e);return{ref:t,width:n,height:r}}function NBe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function PBe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function DBe(e){return t=>PBe(NBe(e),t)}function OBe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{DBe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function Sw(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=N.useState(e),o=N.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=N.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=N.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function $Be(e,t,n={autoInvoke:!1}){const r=N.useRef(null),i=N.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=N.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return N.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function MBe(e,t,n){const r=N.useRef(),i=N.useRef(null);return N.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function LBe(){const[e,t]=N.useState(!1);return N.useEffect(()=>t(!0),[]),e}function FBe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function jBe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});yb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>FBe(`${e}:${String(r)}`,i[0])}return[t,n]}var BBe={};function Jve(){return typeof process<"u"&&BBe?"production":"development"}function Zve(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Zve(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Ki(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Zve(e))&&(r&&(r+=" "),r+=t);return r}const UBe={};function zBe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Ki(t[r],i):t[r]=i})}),t}function VM({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||UBe);return zBe(s)}function mO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const e1e=N.createContext(null);function vy(){const e=N.useContext(e1e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function VBe(){return vy().cssVariablesResolver}function HBe(){return vy().classNamesPrefix}function Zq(){return vy().getStyleNonce}function qBe(){return vy().withStaticClasses}function WBe(){return vy().headless}function GBe(){var e;return(e=vy().stylesTransform)==null?void 0:e.sx}function YBe(){var e;return(e=vy().stylesTransform)==null?void 0:e.styles}function KBe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function XBe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function QBe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function JBe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function eW(e){return KBe(e)?XBe(e):e.startsWith("rgb")?QBe(e):e.startsWith("hsl")?JBe(e):{r:0,g:0,b:0,a:1}}function QR(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=eW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function JC(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function Z5(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function ZBe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function eUe(e){if(e.startsWith("oklch("))return(ZBe(e)||0)/100;const{r:t,g:n,b:r}=eW(e),i=t/255,s=n/255,o=r/255,a=Z5(i),u=Z5(s),l=Z5(o);return .2126*a+.7152*u+.0722*l}function QS(e,t=.179){return e.startsWith("var(")?!1:eUe(e)>t}function Dh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:QS(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:QS(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:QS(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][JC(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:QS(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:QS(e,t.luminanceThreshold),shade:s,variable:void 0}}function Gr(e,t){const n=Dh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function fU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Gr(n.from,t),i=Gr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function wd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=eW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const a_=wd,tUe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Dh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ae(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ae(1)} solid transparent`}:{background:e,hover:QR(e,.1),color:a,border:`${Ae(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ae(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:wd(a,.1),hover:wd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ae(1)} solid transparent`}}return{background:wd(e,.1),hover:wd(e,.12),color:e,border:`${Ae(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ae(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:wd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ae(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:wd(e,.05),color:e,border:`${Ae(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ae(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:wd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ae(1)} solid transparent`}}return{background:"transparent",hover:wd(e,.12),color:e,border:`${Ae(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ae(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ae(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ae(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:QR(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ae(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:QR(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ae(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:QR(t.white,.01),color:e,border:`${Ae(1)} solid transparent`}:n==="gradient"?{background:fU(r,t),hover:fU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ae(1)} solid var(--mantine-color-default-border)`}:{}},nUe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},mse="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",tW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:nUe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:tUe,autoContrast:!1,luminanceThreshold:.3,fontFamily:mse,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:mse,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ae(34),lineHeight:"1.3"},h2:{fontSize:Ae(26),lineHeight:"1.35"},h3:{fontSize:Ae(22),lineHeight:"1.4"},h4:{fontSize:Ae(18),lineHeight:"1.45"},h5:{fontSize:Ae(16),lineHeight:"1.5"},h6:{fontSize:Ae(14),lineHeight:"1.5"}}},fontSizes:{xs:Ae(12),sm:Ae(14),md:Ae(16),lg:Ae(18),xl:Ae(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ae(2),sm:Ae(4),md:Ae(8),lg:Ae(16),xl:Ae(32)},spacing:{xs:Ae(10),sm:Ae(12),md:Ae(16),lg:Ae(20),xl:Ae(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), 0 ${Ae(1)} ${Ae(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(10)} ${Ae(15)} ${Ae(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ae(7)} ${Ae(7)} ${Ae(-5)}`,md:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(20)} ${Ae(25)} ${Ae(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ae(10)} ${Ae(10)} ${Ae(-5)}`,lg:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(28)} ${Ae(23)} ${Ae(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ae(12)} ${Ae(12)} ${Ae(-7)}`,xl:`0 ${Ae(1)} ${Ae(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ae(36)} ${Ae(28)} ${Ae(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ae(17)} ${Ae(17)} ${Ae(-7)}`},other:{},components:{}};function gse(e){return e==="auto"||e==="dark"||e==="light"}function rUe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return gse(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&gse(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const iUe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",yse="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function e8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function vse(e){if(!(e.primaryColor in e.colors))throw new Error(iUe);if(typeof e.primaryShade=="object"&&(!e8(e.primaryShade.dark)||!e8(e.primaryShade.light)))throw new Error(yse);if(typeof e.primaryShade=="number"&&!e8(e.primaryShade))throw new Error(yse)}function sUe(e,t){var r;if(!t)return vse(e),e;const n=Gq(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),vse(n),n}const nW=N.createContext(null),oUe=()=>N.useContext(nW)||tW;function Bs(){const e=N.useContext(nW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function t1e({theme:e,children:t,inherit:n=!0}){const r=oUe(),i=N.useMemo(()=>sUe(n?r:tW,e),[e,r,n]);return _.jsx(nW.Provider,{value:i,children:t})}t1e.displayName="@mantine/core/MantineThemeProvider";function aUe(){const e=Bs(),t=Zq(),n=Ni(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=lU(e.breakpoints[i]),a=s?`${o-.1}px`:fO(o-.1),u=s?`${o}px`:fO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function t8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function n8(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function uUe(e,t){const n=t8(e.variables),r=n?n8(t,n):"",i=t8(e.dark),s=i?n8(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=t8(e.light),a=o?n8(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function by({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Dh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function bse(e,t){return by({color:e.colors[e.primaryColor][JC(e,t)],theme:e,autoContrast:null})}function JR({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=JC(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:a_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:a_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:a_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=JC(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:a_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:a_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:a_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function lUe(e){return Array.isArray(e)?e:Array(10).fill(e)}function cUe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function u_(e,t,n){Ni(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const n1e=e=>{const t=JC(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ae(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":bse(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":bse(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};u_(r.variables,e.breakpoints,"breakpoint"),u_(r.variables,e.spacing,"spacing"),u_(r.variables,e.fontSizes,"font-size"),u_(r.variables,e.lineHeights,"line-height"),u_(r.variables,e.shadows,"shadow"),u_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Ni(e.colors).forEach(s=>{const o=e.colors[s];if(cUe(o)){Object.assign(r.light,JR({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,JR({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,JR({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,JR({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Ni(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function fUe({theme:e,generator:t}){const n=n1e(e),r=t==null?void 0:t(e);return r?Gq(n,r):n}const r8=n1e(tW);function dUe(e){const t={variables:{},light:{},dark:{}};return Ni(e.variables).forEach(n=>{r8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Ni(e.light).forEach(n=>{r8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Ni(e.dark).forEach(n=>{r8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function hUe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function r1e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Bs(),r=Zq(),i=VBe(),s=fUe({theme:n,generator:i}),o=e===":root"&&t,a=o?dUe(s):s,u=uUe(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":hUe(e)}`}}):null}r1e.displayName="@mantine/CssVariables";function pUe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function l_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function mUe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=N.useRef(),[s,o]=N.useState(()=>e.get(t)),a=r||s,u=N.useCallback(c=>{r||(l_(c,n),o(c),e.set(c))},[e.set,a,r]),l=N.useCallback(()=>{o(t),l_(t,n),e.clear()},[e.clear,t]);return N.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),yb(()=>{l_(e.get(t),n)},[]),N.useEffect(()=>{var f;if(r)return l_(r,n),()=>{};r===void 0&&l_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&l_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function gUe({respectReducedMotion:e,getRootElement:t}){yb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}pUe();function i1e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=rUe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=mUe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return gUe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(e1e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(t1e,{theme:e,children:[o&&_.jsx(r1e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(aUe,{}),t]})})}i1e.displayName="@mantine/core/MantineProvider";function Lm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Bs();return{resolvedClassNames:VM({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:mO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const yUe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function vUe({theme:e,options:t,unstyled:n}){return Ki((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||yUe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function bUe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return VM({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function _se({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return VM({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function _Ue({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function wUe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function EUe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function xUe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=VM({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function SUe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function TUe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Ki(vUe({theme:e,options:t,unstyled:a||h}),xUe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),SUe({options:t,classes:o,selector:r,unstyled:a}),_se({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),_se({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),bUe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),_Ue({rootSelector:l,selector:r,className:u}),wUe({selector:r,classes:o,unstyled:a||h}),d&&!h&&EUe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function AUe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return mO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function dU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...dU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function CUe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Sx(n[r])}}),t),{})}function IUe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=CUe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function kUe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&AUe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&mO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&mO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...IUe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?dU({style:u,theme:e}):null,...dU({style:r==null?void 0:r.style,theme:e})}}function RUe({props:e,stylesCtx:t,themeName:n}){var o;const r=Bs(),i=(o=YBe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function yt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Bs(),h=HBe(),p=qBe(),m=WBe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=RUe({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:TUe({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:kUe({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function Ax(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=Bs(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Sx(n)}}function i8(e){return Ni(e).reduce((t,n)=>e[n]!==void 0?`${t}${oBe(n)}:${e[n]};`:t,"").trim()}function NUe({selector:e,styles:t,media:n,container:r}){const i=t?i8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${i8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${i8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function RI(e){const t=Zq();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:NUe(e)}})}function vb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:T,fz:A,fw:C,lts:I,ta:R,lh:O,fs:P,tt:$,td:F,w:L,miw:B,maw:z,h:q,mih:D,mah:U,bgsz:W,bgp:j,bgr:H,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ye,inset:Ie,display:ve,flex:Ke,hiddenFrom:Ue,visibleFrom:gt,lightHidden:rt,darkHidden:be,sx:ke,...ze}=e;return{styleProps:Sx({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:T,fz:A,fw:C,lts:I,ta:R,lh:O,fs:P,tt:$,td:F,w:L,miw:B,maw:z,h:q,mih:D,mah:U,bgsz:W,bgp:j,bgr:H,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ye,inset:Ie,display:ve,flex:Ke,hiddenFrom:Ue,visibleFrom:gt,lightHidden:rt,darkHidden:be,sx:ke}),rest:ze}}const PUe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function rW(e,t){const n=Dh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function DUe(e,t){const n=Dh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:rW(e,t)}function OUe(e,t){if(typeof e=="number")return Ae(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ae(n)}`;return r&&(s+=` ${r}`),lUe.length>0&&(s+=` ${rW(i.join(" "),t)}`),s.trim()}return e}const wse={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function $Ue(e){return typeof e=="string"&&e in wse?wse[e]:e}const MUe=["h1","h2","h3","h4","h5","h6"];function LUe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&MUe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ae(e):e}function FUe(e){return e}const jUe=["h1","h2","h3","h4","h5","h6"];function BUe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&jUe.includes(e)?`var(--mantine-${e}-line-height)`:e}function UUe(e){return typeof e=="number"?Ae(e):e}function zUe(e,t){if(typeof e=="number")return Ae(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ae(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const s8={color:rW,textColor:DUe,fontSize:LUe,spacing:zUe,identity:FUe,size:UUe,lineHeight:BUe,fontFamily:$Ue,border:OUe};function Ese(e){return e.replace("(min-width: ","").replace("em)","")}function VUe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Ese(i))-Number(Ese(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function HUe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function qUe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function WUe(e){return typeof e=="object"&&e!==null?Ni(e).filter(t=>t!=="base"):[]}function GUe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function s1e({styleProps:e,data:t,theme:n}){return VUe(Ni(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=qUe(e[i]);if(!HUe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=s8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=WUe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=s8[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:s8[s.type](GUe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function HM(){return`__m__-${N.useId().replace(/:/g,"")}`}function iW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...iW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function o1e(e){return e.startsWith("data-")?e:`data-${e}`}function YUe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[o1e(n)]=e[n]),t},{})}function a1e(e){return e?typeof e=="string"?{[o1e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...a1e(n)}),{}):YUe(e):null}function hU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...hU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function KUe({theme:e,style:t,vars:n,styleProps:r}){const i=hU(t,e),s=hU(n,e);return{...i,...s,...r}}const u1e=N.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=Bs(),g=e||"div",{styleProps:y,rest:v}=vb(h),b=GBe(),w=(A=b==null?void 0:b())==null?void 0:A(y.sx),E=HM(),S=s1e({styleProps:y,theme:m,data:PUe}),T={ref:p,style:KUe({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:Ki(r,w,{[E]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":Vve(o)?void 0:o||void 0,size:d,...a1e(s),...v};return _.jsxs(_.Fragment,{children:[S.hasResponsiveStyles&&_.jsx(RI,{selector:`.${E}`,styles:S.styles,media:S.media}),typeof f=="function"?f(T):_.jsx(g,{...T})]})});u1e.displayName="@mantine/core/Box";const _e=u1e;function l1e(e){return e}function Le(e){const t=N.forwardRef(e);return t.extend=l1e,t}function Us(e){const t=N.forwardRef(e);return t.extend=l1e,t}const XUe=N.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Oh(){return N.useContext(XUe)}function QUe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function o8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const JS=typeof window<"u"&&window.requestAnimationFrame;function JUe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=N.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=N.useState(r?{}:o),l=p=>{II.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||QUe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}lm(()=>{typeof JS=="function"&&JS(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),JS(()=>{const p=o8(i);c({...f(p),height:p})})}:()=>{const p=o8(i);c({...f(p),willChange:"height",height:p}),JS(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=o8(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:Xve(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const ZUe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},sW=Le((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=xe("Collapse",ZUe,e),c=Bs(),f=Jq(),h=(c.respectReducedMotion?f:!1)?0:i,p=JUe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(_e,{...l,children:n}):null:_.jsx(_e,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...iW(o,c)},ref:t,...l}),children:n})});sW.displayName="@mantine/core/Collapse";const[e7e,Fc]=fo("ScrollArea.Root component was not found in tree");function cE(e,t){const n=Tv(t);yb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const t7e=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Fc(),[s,o]=N.useState(0),[a,u]=N.useState(0),l=!!(s&&a);return cE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),cE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),n7e=N.forwardRef((e,t)=>{const n=Fc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(t7e,{...e,ref:t}):null}),r7e={scrollHideDelay:1e3,type:"hover"},c1e=N.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",r7e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=N.useState(null),[l,c]=N.useState(null),[f,d]=N.useState(null),[h,p]=N.useState(null),[m,g]=N.useState(null),[y,v]=N.useState(0),[b,w]=N.useState(0),[E,S]=N.useState(!1),[T,A]=N.useState(!1),C=cs(t,I=>u(I));return _.jsx(e7e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(_e,{...o,ref:C,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});c1e.displayName="@mantine/core/ScrollAreaRoot";function f1e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function qM(e){const t=f1e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function d1e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function i7e(e,[t,n]){return Math.min(n,Math.max(t,e))}function xse(e,t,n="ltr"){const r=qM(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=i7e(e,u);return d1e([0,o],[0,a])(l)}function s7e(e,t,n,r="ltr"){const i=qM(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return d1e([u,l],f)(e)}function h1e(e,t){return e>0&&e<t}function gO(e){return e?parseInt(e,10):0}function a1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[o7e,p1e]=fo("ScrollAreaScrollbar was not found in tree"),m1e=N.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Fc(),[h,p]=N.useState(null),m=cs(t,A=>p(A)),g=N.useRef(null),y=N.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=Tv(l),E=Tv(a),S=zM(c,10),T=A=>{if(g.current){const C=A.clientX-g.current.left,I=A.clientY-g.current.top;u({x:C,y:I})}};return N.useEffect(()=>{const A=C=>{const I=C.target;(h==null?void 0:h.contains(I))&&w(C,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,w]),N.useEffect(E,[n,E]),cE(h,S),cE(d.content,S),_.jsx(o7e,{value:{scrollbar:h,hasThumb:r,onThumbChange:Tv(i),onThumbPointerUp:Tv(s),onThumbPositionChange:E,onThumbPointerDown:Tv(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:a1(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",T(A))}),onPointerMove:a1(e.onPointerMove,T),onPointerUp:a1(e.onPointerUp,A=>{const C=A.target;C.hasPointerCapture(A.pointerId)&&C.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),a7e=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Fc(),[a,u]=N.useState(),l=N.useRef(null),c=cs(t,l,o.onScrollbarXChange);return N.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(m1e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${qM(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),h1e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:gO(a.paddingLeft),paddingEnd:gO(a.paddingRight)}})}})}),u7e=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Fc(),[a,u]=N.useState(),l=N.useRef(null),c=cs(t,l,o.onScrollbarYChange);return N.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(m1e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${qM(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),h1e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:gO(a.paddingTop),paddingEnd:gO(a.paddingBottom)}})}})}),oW=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Oh(),s=Fc(),o=N.useRef(null),a=N.useRef(0),[u,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=f1e(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>s7e(h,a.current,u,p);return n==="horizontal"?_.jsx(a7e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=xse(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(u7e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=xse(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),g1e=N.forwardRef((e,t)=>{const n=Fc(),{forceMount:r,...i}=e,[s,o]=N.useState(!1),a=e.orientation==="horizontal",u=zM(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return cE(n.viewport,u),cE(n.content,u),r||s?_.jsx(oW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),l7e=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fc(),[s,o]=N.useState(!1);return N.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(g1e,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),c7e=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fc(),s=e.orientation==="horizontal",[o,a]=N.useState("hidden"),u=zM(()=>a("idle"),100);return N.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),N.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(oW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:a1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:a1(e.onPointerLeave,()=>a("idle"))}):null}),Sse=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Fc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return N.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(l7e,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(c7e,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(g1e,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(oW,{...r,ref:t}):null});function f7e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const d7e=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Fc(),s=p1e(),{onThumbPositionChange:o}=s,a=cs(t,c=>s.onThumbChange(c)),u=N.useRef(),l=zM(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=f7e(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:a1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:a1(e.onPointerUp,s.onThumbPointerUp)})}),Tse=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=p1e();return n||i.hasThumb?_.jsx(d7e,{ref:t,...r}):null}),y1e=N.forwardRef(({children:e,style:t,...n},r)=>{const i=Fc(),s=cs(r,i.onViewportChange);return _.jsx(_e,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});y1e.displayName="@mantine/core/ScrollAreaViewport";var aW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const v1e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},h7e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ae(t)}}),bb=Le((e,t)=>{const n=xe("ScrollArea",v1e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=N.useState(!1),E=yt({name:"ScrollArea",props:n,classes:aW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:h7e});return _.jsxs(c1e,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(y1e,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var T;(T=d==null?void 0:d.onScroll)==null||T.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(Sse,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Tse,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(Sse,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Tse,{...E("thumb")})}),_.jsx(n7e,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});bb.displayName="@mantine/core/ScrollArea";const uW=Le((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",v1e,e);return _.jsx(_e,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(_e,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(bb,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});bb.classes=aW;uW.displayName="@mantine/core/ScrollAreaAutosize";uW.classes=aW;bb.Autosize=uW;var b1e={root:"m_87cf2631"};const p7e={__staticSelector:"UnstyledButton"},bs=Us((e,t)=>{const n=xe("UnstyledButton",p7e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=yt({name:s,props:n,classes:b1e,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(_e,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});bs.classes=b1e;bs.displayName="@mantine/core/UnstyledButton";var _1e={root:"m_515a97f8"};const m7e={},lW=Le((e,t)=>{const n=xe("VisuallyHidden",m7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=yt({name:"VisuallyHidden",classes:_1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(_e,{component:"span",ref:t,...c("root"),...l})});lW.classes=_1e;lW.displayName="@mantine/core/VisuallyHidden";var w1e={root:"m_1b7284a3"};const g7e={},y7e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Yr(t),"--paper-shadow":Kq(n)}}),WM=Us((e,t)=>{const n=xe("Paper",g7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=yt({name:"Paper",props:n,classes:w1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:y7e});return _.jsx(_e,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});WM.classes=w1e;WM.displayName="@mantine/core/Paper";function Cx(e){return E1e(e)?(e.nodeName||"").toLowerCase():"#document"}function Fu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Fm(e){var t;return(t=(E1e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function E1e(e){return e instanceof Node||e instanceof Fu(e).Node}function wi(e){return e instanceof Element||e instanceof Fu(e).Element}function Nl(e){return e instanceof HTMLElement||e instanceof Fu(e).HTMLElement}function pU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Fu(e).ShadowRoot}function NI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Cc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function v7e(e){return["table","td","th"].includes(Cx(e))}function cW(e){const t=fW(),n=Cc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function b7e(e){let t=cm(e);for(;Nl(t)&&!k0(t);){if(cW(t))return t;t=cm(t)}return null}function fW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function k0(e){return["html","body","#document"].includes(Cx(e))}function Cc(e){return Fu(e).getComputedStyle(e)}function GM(e){return wi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function cm(e){if(Cx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||pU(e)&&e.host||Fm(e);return pU(t)?t.host:t}function x1e(e){const t=cm(e);return k0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Nl(t)&&NI(t)?t:x1e(t)}function Gp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=x1e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Fu(i);return s?t.concat(o,o.visualViewport||[],NI(i)?i:[],o.frameElement&&n?Gp(o.frameElement):[]):t.concat(i,Gp(i,[],n))}function Ase(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function ZC(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&pU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function S1e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function T1e(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function _7e(e){return x7e()?!1:!Cse()&&e.width===0&&e.height===0||Cse()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function w7e(){return/apple/i.test(navigator.vendor)}function Cse(){const e=/android/i;return e.test(S1e())||e.test(T1e())}function E7e(){return S1e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function x7e(){return T1e().includes("jsdom/")}function mU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function S7e(e){return"nativeEvent"in e}function T7e(e){return e.matches("html,body")}function Vv(e){return(e==null?void 0:e.ownerDocument)||document}function a8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function N_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const A7e="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function C7e(e){return Nl(e)&&e.matches(A7e)}const bl=Math.min,oa=Math.max,yO=Math.round,ZR=Math.floor,R0=e=>({x:e,y:e}),I7e={left:"right",right:"left",bottom:"top",top:"bottom"},k7e={start:"end",end:"start"};function gU(e,t,n){return oa(e,bl(t,n))}function fm(e,t){return typeof e=="function"?e(t):e}function jf(e){return e.split("-")[0]}function Ix(e){return e.split("-")[1]}function dW(e){return e==="x"?"y":"x"}function hW(e){return e==="y"?"height":"width"}function _b(e){return["top","bottom"].includes(jf(e))?"y":"x"}function pW(e){return dW(_b(e))}function R7e(e,t,n){n===void 0&&(n=!1);const r=Ix(e),i=pW(e),s=hW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=vO(o)),[o,vO(o)]}function N7e(e){const t=vO(e);return[yU(e),t,yU(t)]}function yU(e){return e.replace(/start|end/g,t=>k7e[t])}function P7e(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function D7e(e,t,n,r){const i=Ix(e);let s=P7e(jf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(yU)))),s}function vO(e){return e.replace(/left|right|bottom|top/g,t=>I7e[t])}function O7e(e){return{top:0,right:0,bottom:0,left:0,...e}}function mW(e){return typeof e!="number"?O7e(e):{top:e,right:e,bottom:e,left:e}}function fE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Ise(e,t,n){let{reference:r,floating:i}=e;const s=_b(t),o=pW(t),a=hW(o),u=jf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Ix(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const $7e=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Ise(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=Ise(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function gW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=fm(t,e),p=mW(h),g=a[d?f==="floating"?"reference":"floating":f],y=fE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=fE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const M7e=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=fm(e,t)||{};if(l==null)return{};const f=mW(c),d={x:n,y:r},h=pW(i),p=hW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=S?S[b]:0;(!T||!await(o.isElement==null?void 0:o.isElement(S)))&&(T=a.floating[b]||s.floating[p]);const A=w/2-E/2,C=T/2-m[p]/2-1,I=bl(f[y],C),R=bl(f[v],C),O=I,P=T-m[p]-R,$=T/2-m[p]/2+A,F=gU(O,$,P),L=!u.arrow&&Ix(i)!=null&&$!==F&&s.reference[p]/2-($<O?I:R)-m[p]/2<0,B=L?$<O?$-O:$-P:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:$-F-B,...L&&{alignmentOffset:B}},reset:L}}}),L7e=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=fm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=jf(i),v=jf(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[vO(a)]:N7e(a));!d&&p!=="none"&&w.push(...D7e(a,m,p,b));const E=[a,...w],S=await gW(t,g),T=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&T.push(S[y]),f){const O=R7e(i,o,b);T.push(S[O[0]],S[O[1]])}if(A=[...A,{placement:i,overflows:T}],!T.every(O=>O<=0)){var C,I;const O=(((C=s.flip)==null?void 0:C.index)||0)+1,P=E[O];if(P)return{data:{index:O,overflows:A},reset:{placement:P}};let $=(I=A.filter(F=>F.overflows[0]<=0).sort((F,L)=>F.overflows[1]-L.overflows[1])[0])==null?void 0:I.placement;if(!$)switch(h){case"bestFit":{var R;const F=(R=A.map(L=>[L.placement,L.overflows.filter(B=>B>0).reduce((B,z)=>B+z,0)]).sort((L,B)=>L[1]-B[1])[0])==null?void 0:R[0];F&&($=F);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function A1e(e){const t=bl(...e.map(s=>s.left)),n=bl(...e.map(s=>s.top)),r=oa(...e.map(s=>s.right)),i=oa(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function F7e(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>fE(A1e(i)))}const j7e=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=fm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=F7e(c),d=fE(A1e(c)),h=mW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(_b(n)==="y"){const I=f[0],R=f[f.length-1],O=jf(n)==="top",P=I.top,$=R.bottom,F=O?I.left:R.left,L=O?I.right:R.right,B=L-F,z=$-P;return{top:P,bottom:$,left:F,right:L,width:B,height:z,x:F,y:P}}const g=jf(n)==="left",y=oa(...f.map(I=>I.right)),v=bl(...f.map(I=>I.left)),b=f.filter(I=>g?I.left===v:I.right===y),w=b[0].top,E=b[b.length-1].bottom,S=v,T=y,A=T-S,C=E-w;return{top:w,bottom:E,left:S,right:T,width:A,height:C,x:S,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function B7e(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=jf(n),a=Ix(n),u=_b(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=fm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const U7e=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await B7e(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},z7e=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=fm(e,t),l={x:n,y:r},c=await gW(t,u),f=_b(jf(i)),d=dW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=gU(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=gU(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},V7e=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=fm(e,t),c={x:n,y:r},f=_b(i),d=dW(f);let h=c[d],p=c[f];const m=fm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(jf(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[d]:h,[f]:p}}}},H7e=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=fm(e,t),u=await gW(t,a),l=jf(n),c=Ix(n),f=_b(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=bl(h-u[p],g),b=bl(d-u[m],y),w=!t.middlewareData.shift;let E=v,S=b;if(f?S=c||w?bl(b,y):y:E=c||w?bl(v,g):g,w&&!c){const A=oa(u.left,0),C=oa(u.right,0),I=oa(u.top,0),R=oa(u.bottom,0);f?S=d-2*(A!==0||C!==0?A+C:oa(u.left,u.right)):E=h-2*(I!==0||R!==0?I+R:oa(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:E});const T=await i.getDimensions(s.floating);return d!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function C1e(e){const t=Cc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Nl(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=yO(n)!==s||yO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function yW(e){return wi(e)?e:e.contextElement}function Tw(e){const t=yW(e);if(!Nl(t))return R0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=C1e(t);let o=(s?yO(n.width):n.width)/r,a=(s?yO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const q7e=R0(0);function I1e(e){const t=Fu(e);return!fW()||!t.visualViewport?q7e:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function W7e(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Fu(e)?!1:t}function C1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=yW(e);let o=R0(1);t&&(r?wi(r)&&(o=Tw(r)):o=Tw(e));const a=W7e(s,n,r)?I1e(s):R0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Fu(s),h=r&&wi(r)?Fu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Tw(m),y=m.getBoundingClientRect(),v=Cc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=Fu(m),m=p.frameElement}}return fE({width:c,height:f,x:u,y:l})}const G7e=[":popover-open",":modal"];function vW(e){return G7e.some(t=>{try{return e.matches(t)}catch{return!1}})}function Y7e(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Fm(r),a=t?vW(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=R0(1);const c=R0(0),f=Nl(r);if((f||!f&&!s)&&((Cx(r)!=="body"||NI(o))&&(u=GM(r)),Nl(r))){const d=C1(r);l=Tw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function K7e(e){return Array.from(e.getClientRects())}function k1e(e){return C1(Fm(e)).left+GM(e).scrollLeft}function X7e(e){const t=Fm(e),n=GM(e),r=e.ownerDocument.body,i=oa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=oa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+k1e(e);const a=-n.scrollTop;return Cc(r).direction==="rtl"&&(o+=oa(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Q7e(e,t){const n=Fu(e),r=Fm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=fW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function J7e(e,t){const n=C1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Nl(e)?Tw(e):R0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function kse(e,t,n){let r;if(t==="viewport")r=Q7e(e,n);else if(t==="document")r=X7e(Fm(e));else if(wi(t))r=J7e(t,n);else{const i=I1e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return fE(r)}function R1e(e,t){const n=cm(e);return n===t||!wi(n)||k0(n)?!1:Cc(n).position==="fixed"||R1e(n,t)}function Z7e(e,t){const n=t.get(e);if(n)return n;let r=Gp(e,[],!1).filter(a=>wi(a)&&Cx(a)!=="body"),i=null;const s=Cc(e).position==="fixed";let o=s?cm(e):e;for(;wi(o)&&!k0(o);){const a=Cc(o),u=cW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||NI(o)&&!u&&R1e(e,o))?r=r.filter(c=>c!==o):i=a,o=cm(o)}return t.set(e,r),r}function eze(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?vW(t)?[]:Z7e(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=kse(t,c,i);return l.top=oa(f.top,l.top),l.right=bl(f.right,l.right),l.bottom=bl(f.bottom,l.bottom),l.left=oa(f.left,l.left),l},kse(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function tze(e){const{width:t,height:n}=C1e(e);return{width:t,height:n}}function nze(e,t,n){const r=Nl(t),i=Fm(t),s=n==="fixed",o=C1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=R0(0);if(r||!r&&!s)if((Cx(t)!=="body"||NI(i))&&(a=GM(t)),r){const f=C1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=k1e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function u8(e){return Cc(e).position==="static"}function Rse(e,t){return!Nl(e)||Cc(e).position==="fixed"?null:t?t(e):e.offsetParent}function N1e(e,t){const n=Fu(e);if(vW(e))return n;if(!Nl(e)){let i=cm(e);for(;i&&!k0(i);){if(wi(i)&&!u8(i))return i;i=cm(i)}return n}let r=Rse(e,t);for(;r&&v7e(r)&&u8(r);)r=Rse(r,t);return r&&k0(r)&&u8(r)&&!cW(r)?n:r||b7e(e)||n}const rze=async function(e){const t=this.getOffsetParent||N1e,n=this.getDimensions,r=await n(e.floating);return{reference:nze(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ize(e){return Cc(e).direction==="rtl"}const sze={convertOffsetParentRelativeRectToViewportRelativeRect:Y7e,getDocumentElement:Fm,getClippingRect:eze,getOffsetParent:N1e,getElementRects:rze,getClientRects:K7e,getDimensions:tze,getScale:Tw,isElement:wi,isRTL:ize};function oze(e,t){let n=null,r;const i=Fm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=ZR(c),p=ZR(i.clientWidth-(l+f)),m=ZR(i.clientHeight-(c+d)),g=ZR(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:oa(0,bl(1,u))||1};let b=!0;function w(E){const S=E[0].intersectionRatio;if(S!==u){if(!b)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function aze(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=yW(e),c=i||s?[...l?Gp(l):[],...Gp(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?oze(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?C1(e):null;u&&g();function g(){const y=C1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const uze=U7e,lze=z7e,cze=L7e,fze=H7e,Nse=M7e,dze=j7e,hze=V7e,pze=(e,t,n)=>{const r=new Map,i={platform:sze,...n},s={...i.platform,_c:r};return $7e(e,t,{...i,platform:s})};var $P=typeof document<"u"?N.useLayoutEffect:N.useEffect;function bO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!bO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!bO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function P1e(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Pse(e,t){const n=P1e(e);return Math.round(t*n)/n}function Dse(e){const t=N.useRef(e);return $P(()=>{t.current=e}),t}function mze(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=N.useState(r);bO(d,r)||h(r);const[p,m]=N.useState(null),[g,y]=N.useState(null),v=N.useCallback(B=>{B!==S.current&&(S.current=B,m(B))},[]),b=N.useCallback(B=>{B!==T.current&&(T.current=B,y(B))},[]),w=s||p,E=o||g,S=N.useRef(null),T=N.useRef(null),A=N.useRef(c),C=u!=null,I=Dse(u),R=Dse(i),O=N.useCallback(()=>{if(!S.current||!T.current)return;const B={placement:t,strategy:n,middleware:d};R.current&&(B.platform=R.current),pze(S.current,T.current,B).then(z=>{const q={...z,isPositioned:!0};P.current&&!bO(A.current,q)&&(A.current=q,II.flushSync(()=>{f(q)}))})},[d,t,n,R]);$P(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const P=N.useRef(!1);$P(()=>(P.current=!0,()=>{P.current=!1}),[]),$P(()=>{if(w&&(S.current=w),E&&(T.current=E),w&&E){if(I.current)return I.current(w,E,O);O()}},[w,E,O,I,C]);const $=N.useMemo(()=>({reference:S,floating:T,setReference:v,setFloating:b}),[v,b]),F=N.useMemo(()=>({reference:w,floating:E}),[w,E]),L=N.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const z=Pse(F.floating,c.x),q=Pse(F.floating,c.y);return a?{...B,transform:"translate("+z+"px, "+q+"px)",...P1e(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:q}},[n,a,F.floating,c.x,c.y]);return N.useMemo(()=>({...c,update:O,refs:$,elements:F,floatingStyles:L}),[c,O,$,F,L])}const gze=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Nse({element:r.current,padding:i}).fn(n):{}:r?Nse({element:r,padding:i}).fn(n):{}}}},D1e=(e,t)=>({...uze(e),options:[e,t]}),bW=(e,t)=>({...lze(e),options:[e,t]}),Ose=(e,t)=>({...hze(e),options:[e,t]}),vU=(e,t)=>({...cze(e),options:[e,t]}),yze=(e,t)=>({...fze(e),options:[e,t]}),bU=(e,t)=>({...dze(e),options:[e,t]}),O1e=(e,t)=>({...gze(e),options:[e,t]}),$1e={...BD},vze=$1e.useInsertionEffect,bze=vze||(e=>e());function Dg(e){const t=N.useRef(()=>{});return bze(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var eh=typeof document<"u"?N.useLayoutEffect:N.useEffect;let $se=!1,_ze=0;const Mse=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+_ze++;function wze(){const[e,t]=N.useState(()=>$se?Mse():void 0);return eh(()=>{e==null&&t(Mse())},[]),N.useEffect(()=>{$se=!0},[]),e}const Eze=$1e.useId,M1e=Eze||wze;function xze(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Sze=N.createContext(null),Tze=N.createContext(null),_W=()=>{var e;return((e=N.useContext(Sze))==null?void 0:e.id)||null},wW=()=>N.useContext(Tze);function EW(e){return"data-floating-ui-"+e}function Lse(e){const t=N.useRef(e);return eh(()=>{t.current=e}),t}const Fse=EW("safe-polygon");function MP(e,t,n){return n&&!mU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Aze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=wW(),m=_W(),g=Lse(c),y=Lse(l),v=N.useRef(),b=N.useRef(-1),w=N.useRef(),E=N.useRef(-1),S=N.useRef(!0),T=N.useRef(!1),A=N.useRef(()=>{}),C=N.useCallback(()=>{var P;const $=(P=i.current.openEvent)==null?void 0:P.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);N.useEffect(()=>{if(!u)return;function P($){let{open:F}=$;F||(clearTimeout(b.current),clearTimeout(E.current),S.current=!0)}return s.on("openchange",P),()=>{s.off("openchange",P)}},[u,s]),N.useEffect(()=>{if(!u||!g.current||!n)return;function P(F){C()&&r(!1,F,"hover")}const $=Vv(a).documentElement;return $.addEventListener("mouseleave",P),()=>{$.removeEventListener("mouseleave",P)}},[a,n,r,u,g,C]);const I=N.useCallback(function(P,$,F){$===void 0&&($=!0),F===void 0&&(F="hover");const L=MP(y.current,"close",v.current);L&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,P,F),L)):$&&(clearTimeout(b.current),r(!1,P,F))},[y,r]),R=Dg(()=>{A.current(),w.current=void 0}),O=Dg(()=>{if(T.current){const P=Vv(a).body;P.style.pointerEvents="",P.removeAttribute(Fse),T.current=!1}});return N.useEffect(()=>{if(!u)return;function P(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(B){if(clearTimeout(b.current),S.current=!1,f&&!mU(v.current)||d>0&&!MP(y.current,"open"))return;const z=MP(y.current,"open",v.current);z?b.current=window.setTimeout(()=>{r(!0,B,"hover")},z):r(!0,B,"hover")}function F(B){if(P())return;A.current();const z=Vv(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),R(),I(B,!0,"safe-polygon")}});const D=w.current;z.addEventListener("mousemove",D),A.current=()=>{z.removeEventListener("mousemove",D)};return}(v.current==="touch"?!ZC(a,B.relatedTarget):!0)&&I(B)}function L(B){P()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),R(),I(B)}})(B))}if(wi(o)){const B=o;return n&&B.addEventListener("mouseleave",L),a==null||a.addEventListener("mouseleave",L),h&&B.addEventListener("mousemove",$,{once:!0}),B.addEventListener("mouseenter",$),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",L),a==null||a.removeEventListener("mouseleave",L),h&&B.removeEventListener("mousemove",$),B.removeEventListener("mouseenter",$),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,I,R,O,r,n,p,y,g,i]),eh(()=>{var P;if(u&&n&&(P=g.current)!=null&&P.__options.blockPointerEvents&&C()){const F=Vv(a).body;if(F.setAttribute(Fse,""),F.style.pointerEvents="none",T.current=!0,wi(o)&&a){var $;const L=o,B=p==null||($=p.nodesRef.current.find(z=>z.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return B&&(B.style.pointerEvents=""),L.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{L.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,C]),eh(()=>{n||(v.current=void 0,R(),O())},[n,R,O]),N.useEffect(()=>()=>{R(),clearTimeout(b.current),clearTimeout(E.current),O()},[u,o,R,O]),N.useMemo(()=>{if(!u)return{};function P($){v.current=$.pointerType}return{reference:{onPointerDown:P,onPointerEnter:P,onMouseMove($){function F(){S.current||r(!0,$.nativeEvent,"hover")}f&&!mU(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave($){I($.nativeEvent,!1)}}}},[u,f,n,d,r,I])}const _U=()=>{},L1e=N.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:_U,setState:_U,isInstantPhase:!1}),F1e=()=>N.useContext(L1e);function Cze(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=N.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=N.useRef(null),a=N.useCallback(u=>{s({currentId:u})},[]);return eh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),N.createElement(L1e.Provider,{value:N.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function Ize(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=F1e(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return eh(()=>{u&&(f({delay:{open:1,close:MP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),eh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),eh(()=>{l===_U||!n||l(o)},[n,l,o]),a}function l8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const kze={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Rze={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},jse=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Nze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=wW(),v=Dg(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=N.useRef(!1),E=N.useRef(!1),{escapeKey:S,outsidePress:T}=jse(m),{escapeKey:A,outsidePress:C}=jse(g),I=Dg($=>{var F;if(!n||!u||!l||$.key!=="Escape")return;const L=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?l8(y.nodesRef.current,L):[];if(!S&&($.stopPropagation(),B.length>0)){let z=!0;if(B.forEach(q=>{var D;if((D=q.context)!=null&&D.open&&!q.context.dataRef.current.__escapeKeyBubbles){z=!1;return}}),!z)return}r(!1,S7e($)?$.nativeEvent:$,"escape-key")}),R=Dg($=>{var F;const L=()=>{var B;I($),(B=N_($))==null||B.removeEventListener("keydown",L)};(F=N_($))==null||F.addEventListener("keydown",L)}),O=Dg($=>{var F;const L=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||L||typeof b=="function"&&!b($))return;const z=N_($),q="["+EW("inert")+"]",D=Vv(o).querySelectorAll(q);let U=wi(z)?z:null;for(;U&&!k0(U);){const G=cm(U);if(k0(G)||!wi(G))break;U=G}if(D.length&&wi(z)&&!T7e(z)&&!ZC(z,o)&&Array.from(D).every(G=>!ZC(U,G)))return;if(Nl(z)&&o){const G=z.clientWidth>0&&z.scrollWidth>z.clientWidth,ne=z.clientHeight>0&&z.scrollHeight>z.clientHeight;let ce=ne&&$.offsetX>z.clientWidth;if(ne&&Cc(z).direction==="rtl"&&(ce=$.offsetX<=z.offsetWidth-z.clientWidth),ce||G&&$.offsetY>z.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&l8(y.nodesRef.current,W).some(G=>{var ne;return a8($,(ne=G.context)==null?void 0:ne.elements.floating)});if(a8($,o)||a8($,s)||j)return;const H=y?l8(y.nodesRef.current,W):[];if(H.length>0){let G=!0;if(H.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),P=Dg($=>{var F;const L=()=>{var B;O($),(B=N_($))==null||B.removeEventListener(f,L)};(F=N_($))==null||F.addEventListener(f,L)});return N.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=S,a.current.__outsidePressBubbles=T;function $(B){r(!1,B,"ancestor-scroll")}const F=Vv(o);l&&F.addEventListener("keydown",A?R:I,A),b&&F.addEventListener(f,C?P:O,C);let L=[];return p&&(wi(s)&&(L=Gp(s)),wi(o)&&(L=L.concat(Gp(o))),!wi(i)&&i&&i.contextElement&&(L=L.concat(Gp(i.contextElement)))),L=L.filter(B=>{var z;return B!==((z=F.defaultView)==null?void 0:z.visualViewport)}),L.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",A?R:I,A),b&&F.removeEventListener(f,C?P:O,C),L.forEach(B=>{B.removeEventListener("scroll",$)})}},[a,o,s,i,l,b,f,n,r,p,u,S,T,I,A,R,O,C,P]),N.useEffect(()=>{w.current=!1},[b,f]),N.useMemo(()=>u?{reference:{onKeyDown:I,[kze[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:I,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[Rze[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,I])}function Pze(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=M1e(),s=N.useRef({}),[o]=N.useState(()=>xze()),a=_W()!=null,[u,l]=N.useState(r.reference),c=Dg((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=N.useMemo(()=>({setPositionReference:l}),[]),d=N.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return N.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function xW(e){e===void 0&&(e={});const{nodeId:t}=e,n=Pze({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=N.useState(null),[a,u]=N.useState(null),c=(i==null?void 0:i.reference)||s,f=N.useRef(null),d=wW();eh(()=>{c&&(f.current=c)},[c]);const h=mze({...e,elements:{...i,...a&&{reference:a}}}),p=N.useCallback(b=>{const w=wi(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=N.useCallback(b=>{(wi(b)||b===null)&&(f.current=b,o(b)),(wi(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!wi(b))&&h.refs.setReference(b)},[h.refs]),g=N.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=N.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=N.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return eh(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),N.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function Dze(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=N.useRef(!1),c=N.useRef(),f=N.useRef(!0);return N.useEffect(()=>{if(!a)return;const d=Fu(o);function h(){!n&&Nl(o)&&o===Ase(Vv(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),N.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),N.useEffect(()=>()=>{clearTimeout(c.current)},[]),N.useMemo(()=>a?{reference:{onPointerDown(d){_7e(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=N_(d.nativeEvent);if(u&&wi(h))try{if(w7e()&&E7e())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!C7e(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=wi(h)&&h.hasAttribute(EW("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=Ase(o?o.ownerDocument:document);!h&&g===o||ZC((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||ZC(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Bse="active",Use="selected";function c8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Bse]:o,[Use]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Bse,Use].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function Oze(e){e===void 0&&(e=[]);const t=e,n=N.useCallback(s=>c8(s,e,"reference"),t),r=N.useCallback(s=>c8(s,e,"floating"),t),i=N.useCallback(s=>c8(s,e,"item"),e.map(s=>s==null?void 0:s.item));return N.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const $ze=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Mze(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=$ze.get(o))!=null?n:o,u=M1e(),c=_W()!=null;return N.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function j1e(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function zse(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Vse(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Lze={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Fze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Ae(t),height:Ae(t),transform:"rotate(45deg)",position:"absolute",[Lze[u]]:Ae(r)},f=Ae(-t/2);return u==="left"?{...c,...zse(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...zse(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Vse(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Vse(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const SW=N.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Oh();return s?_.jsx("div",{...l,ref:c,style:{...u,...Fze({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});SW.displayName="@mantine/core/FloatingArrow";const[jze,B1e]=fo("Popover component was not found in the tree");function YM({children:e,active:t=!0,refProp:n="ref"}){const r=ABe(t),i=cs(r,e==null?void 0:e.ref);return yy(e)?N.cloneElement(e,{[n]:i}):e}function U1e(e){return _.jsx(lW,{tabIndex:-1,"data-autofocus":!0,...e})}YM.displayName="@mantine/core/FocusTrap";U1e.displayName="@mantine/core/FocusTrapInitialFocus";YM.InitialFocus=U1e;function Bze(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Uze={},z1e=N.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",Uze,e),[s,o]=N.useState(!1),a=N.useRef(null);return yb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Bze(i),Qq(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:II.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});z1e.displayName="@mantine/core/Portal";function PI({withinPortal:e=!0,children:t,...n}){return e?_.jsx(z1e,{...n,children:t}):_.jsx(_.Fragment,{children:t})}PI.displayName="@mantine/core/OptionalPortal";const ZS=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Ae(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),eN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ae(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Ae(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ae(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Ae(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ae(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Ae(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ae(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Ae(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...ZS("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...ZS("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...ZS("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...ZS("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...ZS("top"),common:{transformOrigin:"top right"}}},Hse={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function zze({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in eN?{transitionProperty:eN[e].transitionProperty,...i,...eN[e].common,...eN[e][Hse[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Hse[t]]}}function Vze({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Bs(),l=Jq(),c=u.respectReducedMotion?l:!1,[f,d]=N.useState(c?0:e),[h,p]=N.useState(r?"entered":"exited"),m=N.useRef(-1),g=N.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{x9e.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return lm(()=>{y(r)},[r]),N.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function jm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=Vze({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(zze({transition:t,duration:f,state:d,timingFunction:h}))})}jm.displayName="@mantine/core/Transition";var V1e={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const Hze={},TW=Le((e,t)=>{var g,y,v,b;const n=xe("PopoverDropdown",Hze,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=B1e(),h=qve({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=cs(t,d.floating);return d.disabled?null:_.jsx(PI,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(jm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(YM,{active:d.trapFocus,children:_.jsxs(_e,{...p,...f,variant:u,ref:m,onKeyDownCapture:hBe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ae(d.width)},i]}),children:[o,_.jsx(SW,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});TW.classes=V1e;TW.displayName="@mantine/core/PopoverDropdown";const qze={refProp:"ref",popupType:"dialog"},H1e=Le((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",qze,e);if(!yy(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=B1e(),u=cs(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return N.cloneElement(n,{...o,...l,...a.targetProps,className:Ki(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});H1e.displayName="@mantine/core/PopoverTarget";function q1e({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=N.useState(0);N.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return aze(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),lm(()=>{t.update()},r),lm(()=>{s(o=>o+1)},[e])}function Wze(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function Gze(e,t){const n=Wze(e.middlewares),r=[D1e(e.offset)];return n.shift&&r.push(bW(typeof n.shift=="boolean"?{limiter:Ose(),padding:5}:{limiter:Ose(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?vU():vU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?bU():bU(n.inline)),r.push(O1e({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(yze({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function Yze(e){const[t,n]=ws({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=xW({strategy:e.strategy,placement:e.position,middleware:Gze(e,()=>s)});return q1e({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),lm(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),lm(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const Kze={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Lc("popover"),__staticSelector:"Popover",width:"max-content"},Xze=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Yr(t),"--popover-shadow":Kq(n)}});function Zr(e){var be,ke,ze,ct,Dt,We;const t=xe("Popover",Kze,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:S,clickOutsideEvents:T,trapFocus:A,onClose:C,onOpen:I,onChange:R,zIndex:O,radius:P,shadow:$,id:F,defaultOpened:L,__staticSelector:B,withRoles:z,disabled:q,returnFocus:D,variant:U,keepMounted:W,vars:j,floatingStrategy:H,...G}=t,ne=yt({name:B,props:t,classes:V1e,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:Xze}),ce=N.useRef(null),[de,he]=N.useState(null),[ye,Ie]=N.useState(null),{dir:ve}=Oh(),Ke=Ea(F),Ue=Yze({middlewares:c,width:l,position:j1e(ve,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ce,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:L,onChange:R,onOpen:I,onClose:C,strategy:H});gBe(()=>b&&Ue.onClose(),T,[de,ye]);const gt=N.useCallback(me=>{he(me),Ue.floating.refs.setReference(me)},[Ue.floating.refs.setReference]),rt=N.useCallback(me=>{Ie(me),Ue.floating.refs.setFloating(me)},[Ue.floating.refs.setFloating]);return _.jsx(jze,{value:{returnFocus:D,disabled:q,controlled:Ue.controlled,reference:gt,floating:rt,x:Ue.floating.x,y:Ue.floating.y,arrowX:(ze=(ke=(be=Ue.floating)==null?void 0:be.middlewareData)==null?void 0:ke.arrow)==null?void 0:ze.x,arrowY:(We=(Dt=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Dt.arrow)==null?void 0:We.y,opened:Ue.opened,arrowRef:ce,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:A,withinPortal:w,portalProps:E,zIndex:O,radius:P,shadow:$,closeOnEscape:S,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Ke}-target`,getDropdownId:()=>`${Ke}-dropdown`,withRoles:z,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:U,keepMounted:W,getStyles:ne},children:n})}Zr.Target=H1e;Zr.Dropdown=TW;Zr.displayName="@mantine/core/Popover";Zr.extend=e=>e;var Ef={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Qze=N.forwardRef(({className:e,...t},n)=>_.jsxs(_e,{component:"span",className:Ki(Ef.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Ef.bar}),_.jsx("span",{className:Ef.bar}),_.jsx("span",{className:Ef.bar})]})),Jze=N.forwardRef(({className:e,...t},n)=>_.jsxs(_e,{component:"span",className:Ki(Ef.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Ef.dot}),_.jsx("span",{className:Ef.dot}),_.jsx("span",{className:Ef.dot})]})),Zze=N.forwardRef(({className:e,...t},n)=>_.jsx(_e,{component:"span",className:Ki(Ef.ovalLoader,e),...t,ref:n})),W1e={bars:Qze,oval:Zze,dots:Jze},eVe={loaders:W1e,type:"oval"},tVe=(e,{size:t,color:n})=>({root:{"--loader-size":en(t,"loader-size"),"--loader-color":n?Gr(n,e):void 0}}),Bm=Le((e,t)=>{const n=xe("Loader",eVe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=yt({name:"Loader",props:n,classes:Ef,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:tVe});return p?_.jsx(_e,{...g("root"),ref:t,...m,children:p}):_.jsx(_e,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Bm.defaultLoaders=W1e;Bm.classes=Ef;Bm.displayName="@mantine/core/Loader";var KM={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const qse={orientation:"horizontal"},nVe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ae(t)}}),AW=Le((e,t)=>{const n=xe("ActionIconGroup",qse,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",qse,e),p=yt({name:"ActionIconGroup",props:n,classes:KM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:nVe,rootSelector:"group"});return _.jsx(_e,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});AW.classes=KM;AW.displayName="@mantine/core/ActionIconGroup";const rVe={},iVe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":en(t,"ai-size"),"--ai-radius":n===void 0?void 0:Yr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},N0=Us((e,t)=>{const n=xe("ActionIcon",rVe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...S}=n,T=yt({name:["ActionIcon",p],props:n,className:r,style:u,classes:KM,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:iVe});return _.jsxs(bs,{...T("root",{active:!v&&!l&&!b}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(jm,{mounted:!!l,transition:"slide-down",duration:150,children:A=>_.jsx(_e,{component:"span",...T("loader",{style:A}),"aria-hidden":!0,children:_.jsx(Bm,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(_e,{component:"span",mod:{loading:l},...T("icon"),children:y})]})});N0.classes=KM;N0.displayName="@mantine/core/ActionIcon";N0.Group=AW;const G1e=N.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));G1e.displayName="@mantine/core/CloseIcon";var Y1e={root:"m_86a44da5","root--subtle":"m_220c80f2"};const sVe={variant:"subtle"},oVe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":en(t,"cb-size"),"--cb-radius":n===void 0?void 0:Yr(n),"--cb-icon-size":Ae(r)}}),_y=Us((e,t)=>{const n=xe("CloseButton",sVe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=yt({name:"CloseButton",props:n,className:a,style:l,classes:Y1e,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:oVe});return _.jsxs(bs,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(G1e,{}),i]})});_y.classes=Y1e;_y.displayName="@mantine/core/CloseButton";function aVe(e){return N.Children.toArray(e).filter(Boolean)}var K1e={root:"m_4081bf90"};const uVe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},lVe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Rl(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Fs=Le((e,t)=>{const n=xe("Group",uVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=aVe(u),E=w.length,S=Rl(l??"md"),A={childWidth:`calc(${100/E}% - (${S} - ${S} / ${E}))`},C=yt({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:K1e,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:lVe});return _.jsx(_e,{...C("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});Fs.classes=K1e;Fs.displayName="@mantine/core/Group";var X1e={root:"m_9814e45f"};const cVe={zIndex:Lc("modal")},fVe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&wd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ae(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Yr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),e2=Us((e,t)=>{const n=xe("Overlay",cVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=yt({name:"Overlay",props:n,classes:X1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fVe});return _.jsx(_e,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});e2.classes=X1e;e2.displayName="@mantine/core/Overlay";const[dVe,Um]=fo("ModalBase component was not found in tree");function hVe({opened:e,transitionDuration:t}){const[n,r]=N.useState(e),i=N.useRef(),o=Jq()?0:t;return N.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function pVe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Ea(e),[u,l]=N.useState(!1),[c,f]=N.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=hVe({opened:n,transitionDuration:d});return Kve("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),qve({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Q1e=N.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:S,bodyMounted:T,shouldLockScroll:A,setTitleMounted:C,setBodyMounted:I}=pVe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(PI,{...c,withinPortal:l,children:_.jsx(dVe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:S,bodyMounted:T,setTitleMounted:C,setBodyMounted:I,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(UM,{enabled:A&&f,...v,children:_.jsx(_e,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||Lc("modal")).toString(),"--mb-shadow":Kq(p),"--mb-padding":Rl(m)},children:d})})})})});function mVe(){const e=Um();return N.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var dE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const CW=N.forwardRef(({className:e,...t},n)=>{const r=mVe(),i=Um();return _.jsx(_e,{ref:n,...t,id:r,className:Ki({[dE.body]:!i.unstyled},e)})});CW.displayName="@mantine/core/ModalBaseBody";const IW=N.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Um();return _.jsx(_y,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Ki({[dE.close]:!i.unstyled},e),unstyled:i.unstyled})});IW.displayName="@mantine/core/ModalBaseCloseButton";const J1e=N.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Um();return _.jsx(jm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Ki({[dE.inner]:!a.unstyled},n.className),children:_.jsx(YM,{active:a.opened&&a.trapFocus,children:_.jsx(WM,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Ki({[dE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),kW=N.forwardRef(({className:e,...t},n)=>{const r=Um();return _.jsx(_e,{component:"header",ref:n,className:Ki({[dE.header]:!r.unstyled},e),...t})});kW.displayName="@mantine/core/ModalBaseHeader";const gVe={duration:200,timingFunction:"ease",transition:"fade"};function yVe(e){const t=Um();return{...gVe,...t.transitionProps,...e}}const RW=N.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Um(),o=yVe(t);return _.jsx(jm,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(e2,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});RW.displayName="@mantine/core/ModalBaseOverlay";function vVe(){const e=Um();return N.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const NW=N.forwardRef(({className:e,...t},n)=>{const r=vVe(),i=Um();return _.jsx(_e,{component:"h2",ref:n,className:Ki({[dE.title]:!i.unstyled},e),...t,id:r})});NW.displayName="@mantine/core/ModalBaseTitle";function Z1e({children:e}){return _.jsx(_.Fragment,{children:e})}const[bVe,kx]=Tx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var jc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Wse={},_Ve=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${uo(t)} - ${Ae(2)})`}}),XM=Le((e,t)=>{const n=xe("InputDescription",Wse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",Wse,n),p=kx(),m=yt({name:["InputWrapper",c],props:n,classes:jc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:_Ve}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(_e,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});XM.classes=jc;XM.displayName="@mantine/core/InputDescription";const wVe={},EVe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${uo(t)} - ${Ae(2)})`}}),QM=Le((e,t)=>{const n=xe("InputError",wVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=yt({name:["InputWrapper",c],props:n,classes:jc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:EVe}),m=kx(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(_e,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});QM.classes=jc;QM.displayName="@mantine/core/InputError";const Gse={labelElement:"label"},xVe=(e,{size:t})=>({label:{"--input-label-size":uo(t),"--input-asterisk-color":void 0}}),JM=Le((e,t)=>{const n=xe("InputLabel",Gse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",Gse,n),b=yt({name:["InputWrapper",m],props:n,classes:jc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:xVe}),w=kx(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(_e,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});JM.classes=jc;JM.displayName="@mantine/core/InputLabel";const Yse={},PW=Le((e,t)=>{const n=xe("InputPlaceholder",Yse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",Yse,n),p=yt({name:["InputPlaceholder",l],props:n,classes:jc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(_e,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});PW.classes=jc;PW.displayName="@mantine/core/InputPlaceholder";function SVe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const TVe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},AVe=(e,{size:t})=>({label:{"--input-label-size":uo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${uo(t)} - ${Ae(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${uo(t)} - ${Ae(2)})`}}),DW=Le((e,t)=>{const n=xe("InputWrapper",TVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:S,id:T,required:A,__stylesApiProps:C,mod:I,...R}=n,O=yt({name:["InputWrapper",f],props:C||n,classes:jc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AVe}),P={size:l,variant:c,__staticSelector:f},$=Ea(T),F=typeof S=="boolean"?S:A,L=(b==null?void 0:b.id)||`${$}-error`,B=(v==null?void 0:v.id)||`${$}-description`,z=$,q=!!m&&typeof m!="boolean",D=!!g,U=`${q?L:""} ${D?B:""}`,W=U.trim().length>0?U.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,H=p&&_.jsx(JM,{labelElement:w,id:j,htmlFor:z,required:F,...P,...y,children:p},"label"),G=D&&_.jsx(XM,{...v,...P,size:(v==null?void 0:v.size)||P.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=_.jsx(N.Fragment,{children:d(E)},"input"),ce=q&&N.createElement(QM,{...b,...P,size:(b==null?void 0:b.size)||P.size,key:"error",id:(b==null?void 0:b.id)||L},m),de=h.map(he=>{switch(he){case"label":return H;case"input":return ne;case"description":return G;case"error":return ce;default:return null}});return _.jsx(bVe,{value:{getStyles:O,describedBy:W,inputId:z,labelId:j,...SVe(h,{hasDescription:D,hasError:q})},children:_.jsx(_e,{ref:t,variant:c,size:l,mod:[{error:!!m},I],...O("root"),...R,children:de})})});DW.classes=jc;DW.displayName="@mantine/core/InputWrapper";const CVe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},IVe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":en(t.size,"input-height"),"--input-fz":uo(t.size),"--input-radius":t.radius===void 0?void 0:Yr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ae(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ae(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?en(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),di=Us((e,t)=>{const n=xe("Input",CVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:S,variant:T,vars:A,pointer:C,multiline:I,radius:R,id:O,withAria:P,withErrorStyles:$,mod:F,inputSize:L,...B}=n,{styleProps:z,rest:q}=vb(B),D=kx(),U={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},W=yt({name:["Input",l],props:c||n,classes:jc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:U,rootSelector:"wrapper",vars:A,varsResolver:IVe}),j=P?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||O}:{};return _.jsxs(_e,{...W("wrapper"),...z,...d,mod:[{error:!!h&&$,pointer:C,disabled:p,multiline:I,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:T,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(_e,{component:"input",...q,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:T,__size:L,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});di.classes=jc;di.Wrapper=DW;di.Label=JM;di.Error=QM;di.Description=XM;di.Placeholder=PW;di.displayName="@mantine/core/Input";function ebe(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:A,vars:C,mod:I,...R}=r,{styleProps:O,rest:P}=vb(R),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:A,id:v,mod:I,...y};return{...P,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const kVe={__staticSelector:"InputBase",withAria:!0},Bc=Us((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=ebe("InputBase",kVe,e);return _.jsx(di.Wrapper,{...r,children:_.jsx(di,{...n,...i,ref:t})})});Bc.classes={...di.classes,...di.Wrapper.classes};Bc.displayName="@mantine/core/InputBase";const RVe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var tbe={root:"m_8bffd616"};const NVe={},qt=Us((e,t)=>{const n=xe("Flex",NVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=yt({name:"Flex",classes:tbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Bs(),b=HM(),w=s1e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:RVe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(RI,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(_e,{ref:t,...y("root",{className:b,style:Sx(w.inlineStyles)}),...g})]})});qt.classes=tbe;qt.displayName="@mantine/core/Flex";function PVe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function DVe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=N.useRef(),[s,o]=N.useState(!1),[a,u]=N.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=N.useRef(),d=N.useRef();return N.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),N.useEffect(()=>{if(t){const h=p=>{PVe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),$Be(()=>{Jve()!=="test"&&o(!0)},20,{autoInvoke:!0}),MBe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var nbe={root:"m_96b553a6"};const OVe={},$Ve=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),OW=Le((e,t)=>{const n=xe("FloatingIndicator",OVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=yt({name:"FloatingIndicator",classes:nbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$Ve}),g=N.useRef(null),{initialized:y,hidden:v}=DVe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=cs(t,g);return!l||!c?null:_.jsx(_e,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});OW.displayName="@mantine/core/FloatingIndicator";OW.classes=nbe;const[MVe,$W]=fo("Accordion component was not found in the tree");function hE({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ae(t),height:Ae(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}hE.displayName="@mantine/core/AccordionChevron";const[LVe,rbe]=fo("Accordion.Item component was not found in the tree");var DI={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const FVe={},MW=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=xe("AccordionControl",FVe,e),{value:m}=rbe(),g=$W(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,w=_.jsxs(bs,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:Yq({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(_e,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(_e,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?_.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});MW.displayName="@mantine/core/AccordionControl";MW.classes=DI;const jVe={},LW=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=xe("AccordionItem",jVe,e),c=$W();return _.jsx(LVe,{value:{value:a},children:_.jsx(_e,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});LW.displayName="@mantine/core/AccordionItem";LW.classes=DI;const BVe={},FW=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=xe("AccordionPanel",BVe,e),{value:l}=rbe(),c=$W();return _.jsx(sW,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});FW.displayName="@mantine/core/AccordionPanel";FW.classes=DI;const UVe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(hE,{})},zVe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ae(n),"--accordion-radius":r===void 0?void 0:Yr(r)}});function yu(e){const t=xe("Accordion",UVe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:w,variant:E,radius:S,...T}=t,A=Ea(h),[C,I]=ws({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),R=$=>Array.isArray(C)?C.includes($):$===C,O=$=>{const F=Array.isArray(C)?C.includes($)?C.filter(L=>L!==$):[...C,$]:$===C?null:$;I(F)},P=yt({name:"Accordion",classes:DI,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:zVe});return _.jsx(MVe,{value:{isItemActive:R,onChange:O,getControlId:dO(`${A}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:dO(`${A}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:w,loop:p,getStyles:P,variant:E,unstyled:o},children:_.jsx(_e,{...P("root"),id:A,...T,variant:E,"data-accordion":!0,children:u})})}const VVe=e=>e;yu.extend=VVe;yu.classes=DI;yu.displayName="@mantine/core/Accordion";yu.Item=LW;yu.Panel=FW;yu.Control=MW;yu.Chevron=hE;var ibe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const HVe={},qVe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Yr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},OI=Le((e,t)=>{const n=xe("Alert",HVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=yt({name:"Alert",classes:ibe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qVe}),S=Ea(h),T=f&&`${S}-title`||void 0,A=`${S}-body`;return _.jsx(_e,{id:S,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":A,"aria-labelledby":T,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:T,...E("label"),children:f})}),d&&_.jsx("div",{id:A,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(_y,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});OI.classes=ibe;OI.displayName="@mantine/core/Alert";var sbe={root:"m_b6d8b162"};function WVe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const GVe={inherit:!1},YVe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":uo(i),"--text-lh":Hve(i),"--text-gradient":t==="gradient"?fU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Gr(s,e):void 0}}),ot=Us((e,t)=>{const n=xe("Text",GVe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=yt({name:["Text",l],props:n,classes:sbe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:YVe});return _.jsx(_e,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":WVe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});ot.classes=sbe;ot.displayName="@mantine/core/Text";var obe={root:"m_849cf0da"};const KVe={underline:"hover"},Rx=Us((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",KVe,e);return _.jsx(ot,{component:"a",ref:t,className:Ki({[obe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Rx.classes=obe;Rx.displayName="@mantine/core/Anchor";const[XVe,Nx]=fo("AppShell was not found in tree");var wy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const QVe={},jW=Le((e,t)=>{const n=xe("AppShellAside",QVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Nx();return h.disabled?null:_.jsx(_e,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});jW.classes=wy;jW.displayName="@mantine/core/AppShellAside";const JVe={},BW=Le((e,t)=>{var p;const n=xe("AppShellFooter",JVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Nx();return h.disabled?null:_.jsx(_e,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Ki({[UM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});BW.classes=wy;BW.displayName="@mantine/core/AppShellFooter";const ZVe={},UW=Le((e,t)=>{var p;const n=xe("AppShellHeader",ZVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Nx();return h.disabled?null:_.jsx(_e,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Ki({[UM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});UW.classes=wy;UW.displayName="@mantine/core/AppShellHeader";const eHe={},zW=Le((e,t)=>{const n=xe("AppShellMain",eHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nx();return _.jsx(_e,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});zW.classes=wy;zW.displayName="@mantine/core/AppShellMain";function $I(e){return typeof e=="object"?e.base:e}function MI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function LI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function tHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),MI(s)){const f=Ae($I(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(LI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ae(s.base),e["--app-shell-aside-offset"]=Ae(s.base)),Ni(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ae(s[f]),t[f]["--app-shell-aside-offset"]=Ae(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Xq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function nHe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(MI(r)){const o=Ae($I(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}LI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ae(r.base),s&&(e["--app-shell-footer-offset"]=Ae(r.base))),Ni(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ae(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ae(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function rHe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(MI(r)){const o=Ae($I(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}LI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ae(r.base),s&&(e["--app-shell-header-offset"]=Ae(r.base))),Ni(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ae(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ae(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function iHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),MI(s)){const f=Ae($I(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(LI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ae(s.base),e["--app-shell-navbar-offset"]=Ae(s.base)),Ni(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ae(s[f]),t[f]["--app-shell-navbar-offset"]=Ae(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Xq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function f8(e){return Number(e)===0?"0px":Rl(e)}function sHe({padding:e,baseStyles:t,minMediaStyles:n}){MI(e)&&(t["--app-shell-padding"]=f8($I(e))),LI(e)&&(e.base&&(t["--app-shell-padding"]=f8(e.base)),Ni(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=f8(e[r]))}))}function oHe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};iHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),tHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),rHe({baseStyles:u,minMediaStyles:o,header:t}),nHe({baseStyles:u,minMediaStyles:o,footer:n}),sHe({baseStyles:u,minMediaStyles:o,padding:i});const l=pO(Ni(o),s).map(d=>({query:`(min-width: ${fO(d.px)})`,styles:o[d.value]})),c=pO(Ni(a),s).map(d=>({query:`(max-width: ${fO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function aHe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Bs(),o=vy(),{media:a,baseStyles:u}=oHe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(RI,{media:a,styles:u,selector:o.cssVariablesSelector})}const uHe={},VW=Le((e,t)=>{const n=xe("AppShellNavbar",uHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Nx();return h.disabled?null:_.jsx(_e,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});VW.classes=wy;VW.displayName="@mantine/core/AppShellNavbar";const lHe={},HW=Us((e,t)=>{const n=xe("AppShellSection",lHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Nx();return _.jsx(_e,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});HW.classes=wy;HW.displayName="@mantine/core/AppShellSection";function cHe({transitionDuration:e,disabled:t}){const[n,r]=N.useState(!0),i=N.useRef(),s=N.useRef();return Kve("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),yb(()=>{N.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const fHe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Lc("app")},dHe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),fi=Le((e,t)=>{const n=xe("AppShell",fHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...S}=n,T=yt({name:"AppShell",classes:wy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dHe}),A=cHe({disabled:y,transitionDuration:d});return _.jsxs(XVe,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(aHe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(_e,{ref:t,...T("root"),mod:[{resizing:A,layout:g,disabled:y},E],...S})]})});fi.classes=wy;fi.displayName="@mantine/core/AppShell";fi.Navbar=VW;fi.Header=UW;fi.Main=zW;fi.Aside=jW;fi.Footer=BW;fi.Section=HW;function abe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>abe(t))}:e}function ube(e){return e?e.map(t=>abe(t)):[]}function qW(e){return e.reduce((t,n)=>"group"in n?{...t,...qW(n.items)}:(t[n.value]=n,t),{})}var qu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const hHe={error:null},pHe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":en(t,"combobox-chevron-size")}}),WW=Le((e,t)=>{const n=xe("ComboboxChevron",hHe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=yt({name:"ComboboxChevron",classes:qu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:pHe,rootSelector:"chevron"});return _.jsx(_e,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});WW.classes=qu;WW.displayName="@mantine/core/ComboboxChevron";const[mHe,Uc]=fo("Combobox component was not found in tree"),lbe=N.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(_y,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));lbe.displayName="@mantine/core/ComboboxClearButton";const gHe={},GW=Le((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",gHe,e),u=Uc();return _.jsx(Zr.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});GW.classes=qu;GW.displayName="@mantine/core/ComboboxDropdown";const yHe={refProp:"ref"},cbe=Le((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",yHe,e);if(Uc(),!yy(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(Zr.Target,{ref:t,refProp:r,children:n})});cbe.displayName="@mantine/core/ComboboxDropdownTarget";const vHe={},YW=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",vHe,e),u=Uc();return _.jsx(_e,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});YW.classes=qu;YW.displayName="@mantine/core/ComboboxEmpty";function KW({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Uc(),[a,u]=N.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const bHe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},fbe=Le((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",bHe,e);if(!yy(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Uc(),f=KW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return N.cloneElement(n,{...f,...l,[r]:cs(t,c.store.targetRef,n==null?void 0:n.ref)})});fbe.displayName="@mantine/core/ComboboxEventsTarget";const _He={},XW=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",_He,e),u=Uc();return _.jsx(_e,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});XW.classes=qu;XW.displayName="@mantine/core/ComboboxFooter";const wHe={},QW=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",wHe,e),c=Uc();return _.jsxs(_e,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});QW.classes=qu;QW.displayName="@mantine/core/ComboboxGroup";const EHe={},JW=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",EHe,e),u=Uc();return _.jsx(_e,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});JW.classes=qu;JW.displayName="@mantine/core/ComboboxHeader";function dbe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}dbe.displayName="@mantine/core/ComboboxHiddenInput";const xHe={},ZW=Le((e,t)=>{const n=xe("ComboboxOption",xHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Uc(),v=N.useId(),b=l||v;return _.jsx(_e,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});ZW.classes=qu;ZW.displayName="@mantine/core/ComboboxOption";const SHe={},eG=Le((e,t)=>{const n=xe("ComboboxOptions",SHe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Uc(),d=Ea(a);return N.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(_e,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});eG.classes=qu;eG.displayName="@mantine/core/ComboboxOptions";const THe={withAriaAttributes:!0,withKeyboardNavigation:!0},tG=Le((e,t)=>{const n=xe("ComboboxSearch",THe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Uc(),h=d.getStyles("search"),p=KW({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(di,{ref:cs(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});tG.classes=qu;tG.displayName="@mantine/core/ComboboxSearch";const AHe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},hbe=Le((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",AHe,e);if(!yy(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Uc(),f=KW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=N.cloneElement(n,{...f,...l});return _.jsx(Zr.Target,{ref:cs(t,c.store.targetRef),children:d})});hbe.displayName="@mantine/core/ComboboxTarget";function CHe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function IHe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function kHe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function nG({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ws({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=N.useRef(null),c=N.useRef(-1),f=N.useRef(null),d=N.useRef(null),h=N.useRef(-1),p=N.useRef(-1),m=N.useRef(-1),g=N.useCallback((L="unknown")=>{a||(u(!0),i==null||i(L))},[u,i,a]),y=N.useCallback((L="unknown")=>{a&&(u(!1),r==null||r(L))},[u,r,a]),v=N.useCallback((L="unknown")=>{a?y(L):g(L)},[y,g,a]),b=N.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-selected]`);L==null||L.removeAttribute("data-combobox-selected"),L==null||L.removeAttribute("aria-selected")},[]),w=N.useCallback(L=>{const B=document.getElementById(l.current),z=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!z)return null;const q=L>=z.length?0:L<0?z.length-1:L;return c.current=q,z!=null&&z[q]&&!z[q].hasAttribute("data-combobox-disabled")?(b(),z[q].setAttribute("data-combobox-selected","true"),z[q].setAttribute("aria-selected","true"),z[q].scrollIntoView({block:"nearest",behavior:o}),z[q].id):null},[o,b]),E=N.useCallback(()=>{const L=document.querySelector(`#${l.current} [data-combobox-active]`);if(L){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),z=Array.from(B).findIndex(q=>q===L);return w(z)}return w(0)},[w]),S=N.useCallback(()=>w(IHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),T=N.useCallback(()=>w(CHe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),A=N.useCallback(()=>w(kHe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),C=N.useCallback((L="selected",B)=>{m.current=window.setTimeout(()=>{var D;const z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),q=Array.from(z).findIndex(U=>U.hasAttribute(`data-combobox-${L}`));c.current=q,B!=null&&B.scrollIntoView&&((D=z[q])==null||D.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),I=N.useCallback(()=>{c.current=-1,b()},[b]),R=N.useCallback(()=>{const L=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=L==null?void 0:L[c.current];B==null||B.click()},[]),O=N.useCallback(L=>{l.current=L},[]),P=N.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=N.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=N.useCallback(()=>c.current,[]);return N.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:A,selectActiveOption:E,selectNextOption:S,selectPreviousOption:T,resetSelectedOption:I,updateSelectedOptionIndex:C,listId:l.current,setListId:O,clickSelectedOption:R,searchRef:f,focusSearchInput:P,targetRef:d,focusTarget:$}}const RHe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},NHe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":uo(t),"--combobox-option-padding":en(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ae(n),"--combobox-option-fz":uo(t),"--combobox-option-padding":en(t,"combobox-option-padding")}});function Yn(e){const t=xe("Combobox",RHe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=nG(),y=o||g,v=yt({name:h||"Combobox",classes:qu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:NHe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(mHe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(Zr,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const PHe=e=>e;Yn.extend=PHe;Yn.classes=qu;Yn.displayName="@mantine/core/Combobox";Yn.Target=hbe;Yn.Dropdown=GW;Yn.Options=eG;Yn.Option=ZW;Yn.Search=tG;Yn.Empty=YW;Yn.Chevron=WW;Yn.Footer=XW;Yn.Header=JW;Yn.EventsTarget=fbe;Yn.DropdownTarget=cbe;Yn.Group=QW;Yn.ClearButton=lbe;Yn.HiddenInput=dbe;var pbe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const mbe=pbe,ZM=N.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const S=yt({name:e,props:t,className:n,style:y,classes:pbe,classNames:r,styles:i,unstyled:s});return _.jsx(_e,{...S("root"),ref:E,__vars:{"--label-fz":uo(d),"--label-lh":en(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(_e,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,_.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(_e,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(di.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(di.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});ZM.displayName="@mantine/core/InlineInput";const gbe=N.createContext(null),DHe=gbe.Provider,ybe=()=>N.useContext(gbe),[OHe,$He]=Tx();var vbe={card:"m_26775b0a"};const MHe={withBorder:!0},LHe=(e,{radius:t})=>({card:{"--card-radius":Yr(t)}}),rG=Le((e,t)=>{const n=xe("CheckboxCard",MHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=yt({name:"CheckboxCard",classes:vbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:LHe,rootSelector:"card"}),g=ybe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(OHe,{value:{checked:y},children:_.jsx(bs,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});rG.displayName="@mantine/core/CheckboxCard";rG.classes=vbe;function iG({children:e,role:t}){const n=kx();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const FHe={},sG=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",FHe,e),[c,f]=ws({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(DHe,{value:{value:c,onChange:d,size:s},children:_.jsx(di.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(iG,{role:"group",children:a})})})});sG.classes=di.Wrapper.classes;sG.displayName="@mantine/core/CheckboxGroup";function bbe({size:e,style:t,...n}){const r=e!==void 0?{width:Ae(e),height:Ae(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function _be({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(bbe,{...t})}var wbe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const jHe={icon:_be},BHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Dh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":en(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Yr(t),"--checkbox-color":s==="outline"?u:Gr(n,e),"--checkbox-icon-color":i?Gr(i,e):Ax(o,e)?by({color:n,theme:e,autoContrast:o}):void 0}}},oG=Le((e,t)=>{const n=xe("CheckboxIndicator",jHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=yt({name:"CheckboxIndicator",classes:wbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:BHe,rootSelector:"indicator"}),S=$He(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return _.jsx(_e,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});oG.displayName="@mantine/core/CheckboxIndicator";oG.classes=wbe;var Ebe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const UHe={labelPosition:"right",icon:_be},zHe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Dh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":en(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Yr(t),"--checkbox-color":s==="outline"?u:Gr(n,e),"--checkbox-icon-color":i?Gr(i,e):Ax(o,e)?by({color:n,theme:e,autoContrast:o}):void 0}}},dm=Le((e,t)=>{const n=xe("Checkbox",UHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:S,icon:T,rootRef:A,iconColor:C,onChange:I,autoContrast:R,mod:O,...P}=n,$=ybe(),F=d||($==null?void 0:$.size),L=T,B=yt({name:"Checkbox",props:n,classes:Ebe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zHe}),{styleProps:z,rest:q}=vb(P),D=Ea(f),U=$?{checked:$.value.includes(q.value),onChange:W=>{$.onChange(W),I==null||I(W)}}:{};return _.jsx(ZM,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:D,size:F,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||g||void 0,variant:E,ref:A,mod:O,...z,...p,children:_.jsxs(_e,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(_e,{component:"input",id:D,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:S},...B("input",{focusable:!0,variant:E}),onChange:I,...q,...U,type:"checkbox"}),_.jsx(L,{indeterminate:S,...B("icon")})]})})});dm.classes={...Ebe,...mbe};dm.displayName="@mantine/core/Checkbox";dm.Group=sG;dm.Indicator=oG;dm.Card=rG;function pE(e){return"group"in e}function xbe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;pE(o)&&i.push({group:o.group,items:xbe({options:o.items,search:t,limit:n-i.length})}),pE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function VHe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Sbe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(pE(n))Sbe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function HHe(e,t){return Array.isArray(e)?e.includes(t):e===t}function Tbe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!pE(e)){const a=HHe(n,e.value),u=t&&a&&_.jsx(bbe,{className:qu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Yn.Option,{value:e.value,disabled:e.disabled,className:Ki({[qu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(Tbe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Yn.Group,{label:e.group,children:o})}function Abe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){Sbe(e);const b=typeof i=="string"?(r||xbe)({options:e,search:u?i:"",limit:s??1/0}):e,w=VHe(b),E=b.map(S=>_.jsx(Tbe,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},pE(S)?S.group:S.value));return _.jsx(Yn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Yn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(bb.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(Yn.Empty,{children:d})]})})}var Cbe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const qHe={},WHe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":en(s,"badge-height"),"--badge-padding-x":en(s,"badge-padding-x"),"--badge-fz":en(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Yr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Gr(n,e):void 0}}},Yp=Us((e,t)=>{const n=xe("Badge",qHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=yt({name:"Badge",props:n,classes:Cbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:WHe});return _.jsxs(_e,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});Yp.classes=Cbe;Yp.displayName="@mantine/core/Badge";var Ibe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const GHe={},YHe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Gr(t,e):void 0,"--burger-size":en(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),aG=Le((e,t)=>{const n=xe("Burger",GHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=yt({name:"Burger",classes:Ibe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YHe});return _.jsxs(bs,{...p("root"),ref:t,...h,children:[_.jsx(_e,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});aG.classes=Ibe;aG.displayName="@mantine/core/Burger";var eL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Kse={orientation:"horizontal"},KHe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ae(t)}}),uG=Le((e,t)=>{const n=xe("ButtonGroup",Kse,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",Kse,e),p=yt({name:"ButtonGroup",props:n,classes:eL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:KHe,rootSelector:"group"});return _.jsx(_e,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});uG.classes=eL;uG.displayName="@mantine/core/ButtonGroup";const XHe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ae(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},QHe={},JHe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":en(s,"button-height"),"--button-padding-x":en(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?uo(s.replace("compact-","")):uo(s),"--button-radius":t===void 0?void 0:Yr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},Rn=Us((e,t)=>{const n=xe("Button",QHe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:S,...T}=n,A=yt({name:"Button",props:n,classes:eL,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:JHe}),C=!!l,I=!!c;return _.jsxs(bs,{ref:t,...A("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":C,"with-right-section":I},S],...T,children:[_.jsx(jm,{mounted:!!p,transition:XHe,duration:150,children:R=>_.jsx(_e,{component:"span",...A("loader",{style:R}),"aria-hidden":!0,children:_.jsx(Bm,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...A("inner"),children:[l&&_.jsx(_e,{component:"span",...A("section"),mod:{position:"left"},children:l}),_.jsx(_e,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&_.jsx(_e,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});Rn.classes=eL;Rn.displayName="@mantine/core/Button";Rn.Group=uG;const[ZHe,eqe]=fo("Card component was not found in tree");var lG={root:"m_e615b15f",section:"m_599a2148"};const tqe={},tL=Us((e,t)=>{const n=xe("CardSection",tqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=eqe();return _.jsx(_e,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});tL.classes=lG;tL.displayName="@mantine/core/CardSection";const nqe={},rqe=(e,{padding:t})=>({root:{"--card-padding":Rl(t)}}),wb=Us((e,t)=>{const n=xe("Card",nqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=yt({name:"Card",props:n,classes:lG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rqe}),h=N.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===tL?N.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(ZHe,{value:{getStyles:d},children:_.jsx(WM,{ref:t,unstyled:a,...d("root"),...f,children:p})})});wb.classes=lG;wb.displayName="@mantine/core/Card";wb.Section=tL;var kbe={root:"m_4451eb3a"};const iqe={},hm=Us((e,t)=>{const n=xe("Center",iqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=yt({name:"Center",props:n,classes:kbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(_e,{ref:t,mod:[{inline:l},c],...d("root"),...f})});hm.classes=kbe;hm.displayName="@mantine/core/Center";var Rbe={root:"m_7485cace"};const sqe={},oqe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:en(t,"container-size")}}),Ic=Le((e,t)=>{const n=xe("Container",sqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=yt({name:"Container",classes:Rbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oqe});return _.jsx(_e,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Ic.classes=Rbe;Ic.displayName="@mantine/core/Container";var Nbe={root:"m_3eebeb36",label:"m_9e365f20"};const aqe={orientation:"horizontal"},uqe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Gr(t,e):void 0,"--divider-border-style":n,"--divider-size":en(r,"divider-size")}}),cG=Le((e,t)=>{const n=xe("Divider",aqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=yt({name:"Divider",classes:Nbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uqe});return _.jsx(_e,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(_e,{component:"span",mod:{position:d},...m("label"),children:f})})});cG.classes=Nbe;cG.displayName="@mantine/core/Divider";const[lqe,Px]=fo("Drawer component was not found in tree");var zm={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const cqe={},nL=Le((e,t)=>{const n=xe("DrawerBody",cqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Px();return _.jsx(CW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});nL.classes=zm;nL.displayName="@mantine/core/DrawerBody";const fqe={},rL=Le((e,t)=>{const n=xe("DrawerCloseButton",fqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Px();return _.jsx(IW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});rL.classes=zm;rL.displayName="@mantine/core/DrawerCloseButton";const dqe={},iL=Le((e,t)=>{const n=xe("DrawerContent",dqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Px(),d=f.scrollAreaComponent||Z1e;return _.jsx(J1e,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});iL.classes=zm;iL.displayName="@mantine/core/DrawerContent";const hqe={},sL=Le((e,t)=>{const n=xe("DrawerHeader",hqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Px();return _.jsx(kW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});sL.classes=zm;sL.displayName="@mantine/core/DrawerHeader";const pqe={},oL=Le((e,t)=>{const n=xe("DrawerOverlay",pqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Px();return _.jsx(RW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});oL.classes=zm;oL.displayName="@mantine/core/DrawerOverlay";function mqe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function gqe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const yqe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},vqe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},bqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Lc("modal"),position:"left"},_qe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":en(n,"drawer-size"),"--drawer-flex":gqe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":mqe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Ae(r)}}),aL=Le((e,t)=>{const n=xe("DrawerRoot",bqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Oh(),m=yt({name:"Drawer",classes:zm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_qe}),g=(p==="rtl"?vqe:yqe)[c];return _.jsx(lqe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(Q1e,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});aL.classes=zm;aL.displayName="@mantine/core/DrawerRoot";const wqe={},uL=Le((e,t)=>{const n=xe("DrawerTitle",wqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Px();return _.jsx(NW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});uL.classes=zm;uL.displayName="@mantine/core/DrawerTitle";const Eqe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Lc("modal"),withOverlay:!0,withCloseButton:!0},$h=Le((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",Eqe,e),l=!!n||s;return _.jsxs(aL,{ref:t,...u,children:[r&&_.jsx(oL,{...i}),_.jsxs(iL,{children:[l&&_.jsxs(sL,{children:[n&&_.jsx(uL,{children:n}),s&&_.jsx(rL,{...o})]}),_.jsx(nL,{children:a})]})]})});$h.classes=zm;$h.displayName="@mantine/core/Drawer";$h.Root=aL;$h.Overlay=oL;$h.Content=iL;$h.Body=nL;$h.Header=sL;$h.Title=uL;$h.CloseButton=rL;function xqe({open:e,close:t,openDelay:n,closeDelay:r}){const i=N.useRef(-1),s=N.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return N.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[Sqe,Pbe]=fo("Grid component was not found in tree"),wU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Xse=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":wU(e,t),Qse=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Jse=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function Tqe({span:e,order:t,offset:n,selector:r}){var d;const i=Bs(),s=Pbe(),a=YT(e)===void 0?12:YT(e),u=Sx({"--col-order":(d=YT(t))==null?void 0:d.toString(),"--col-flex-grow":Qse(a,s.grow),"--col-flex-basis":wU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Xse(a,s.columns,s.grow),"--col-offset":Jse(YT(n),s.columns)}),l=Ni(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Qse(e[p],s.grow),h[p]["--col-flex-basis"]=wU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Xse(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Jse(n[p],s.columns)),h},{}),f=pO(Ni(l),i).filter(h=>Ni(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(RI,{styles:u,media:f,selector:r})}var fG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Aqe={span:12},dG=Le((e,t)=>{const n=xe("GridCol",Aqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=Pbe(),h=HM();return _.jsxs(_.Fragment,{children:[_.jsx(Tqe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(_e,{ref:t,...d.getStyles("col",{className:Ki(i,h),style:s,classNames:r,styles:o}),...f})]})});dG.classes=fG;dG.displayName="@mantine/core/GridCol";function Cqe({gutter:e,selector:t}){const n=Bs(),r=Sx({"--grid-gutter":Rl(YT(e))}),i=Ni(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Rl(e[u])),a),{}),o=pO(Ni(i),n).filter(a=>Ni(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(RI,{styles:r,media:o,selector:t})}const Iqe={gutter:"md",grow:!1,columns:12},kqe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Ua=Le((e,t)=>{const n=xe("Grid",Iqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=yt({name:"Grid",classes:fG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kqe}),y=HM();return _.jsxs(Sqe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(Cqe,{selector:`.${y}`,...n}),_.jsx(_e,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});Ua.classes=fG;Ua.displayName="@mantine/core/Grid";Ua.Col=dG;var Dbe={root:"m_9e117634"};const Rqe={},Nqe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Yr(t),"--image-object-fit":n}}),Ey=Us((e,t)=>{const n=xe("Image",Rqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=N.useState(!c);N.useEffect(()=>y(!c),[c]);const v=yt({name:"Image",classes:Dbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nqe});return g&&h?_.jsx(_e,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(_e,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Ey.classes=Dbe;Ey.displayName="@mantine/core/Image";function EU(){return EU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EU.apply(null,arguments)}function Pqe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Dqe=N.useLayoutEffect,Oqe=function(t){var n=N.useRef(t);return Dqe(function(){n.current=t}),n},Zse=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},$qe=function(t,n){var r=N.useRef();return N.useCallback(function(i){t.current=i,r.current&&Zse(r.current,null),r.current=n,n&&Zse(n,i)},[n])},eoe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Mqe=function(t){Object.keys(eoe).forEach(function(n){t.style.setProperty(n,eoe[n],"important")})},toe=Mqe,Ia=null,noe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Lqe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ia||(Ia=document.createElement("textarea"),Ia.setAttribute("tabindex","-1"),Ia.setAttribute("aria-hidden","true"),toe(Ia)),Ia.parentNode===null&&document.body.appendChild(Ia);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Ia.style[h]=o[h]}),toe(Ia),Ia.value=t;var u=noe(Ia,e);Ia.value=t,u=noe(Ia,e),Ia.value="x";var l=Ia.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var roe=function(){},Fqe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},jqe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Bqe=!!document.documentElement.currentStyle,Uqe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Fqe(jqe,n),i=r.boxSizing;if(i==="")return null;Bqe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},zqe=Uqe;function Obe(e,t,n){var r=Oqe(n);N.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var Vqe=function(t){Obe(window,"resize",t)},Hqe=function(t){Obe(document.fonts,"loadingdone",t)},qqe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Wqe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?roe:o,u=t.onHeightChange,l=u===void 0?roe:u,c=Pqe(t,qqe),f=c.value!==void 0,d=N.useRef(null),h=$qe(d,n),p=N.useRef(0),m=N.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:zqe(b);if(w){m.current=w;var E=Lqe(w,b.value||b.placeholder||"x",s,i),S=E[0],T=E[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),l(S,{rowHeight:T}))}},y=function(b){f||g(),a(b)};return N.useLayoutEffect(g),Vqe(g),Hqe(g),N.createElement("textarea",EU({},c,{onChange:y,ref:h}))},Gqe=N.forwardRef(Wqe);const Yqe={},hG=Le((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",Yqe,e),u=n&&Jve()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(Bc,{component:u?Gqe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});hG.classes=Bc.classes;hG.displayName="@mantine/core/Textarea";const[Kqe,Xqe]=fo("List component was not found in tree");var pG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const Qqe={},mG=Le((e,t)=>{const n=xe("ListItem",Qqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=Xqe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(_e,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});mG.classes=pG;mG.displayName="@mantine/core/ListItem";const Jqe={type:"unordered"},Zqe=(e,{size:t,spacing:n})=>({root:{"--list-fz":uo(t),"--list-lh":Hve(t),"--list-spacing":Rl(n)}}),Nf=Le((e,t)=>{const n=xe("List",Jqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=yt({name:"List",classes:pG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Zqe});return _.jsx(Kqe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(_e,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Nf.classes=pG;Nf.displayName="@mantine/core/List";Nf.Item=mG;var $be={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const ioe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Lc("overlay")},eWe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Pl=Le((e,t)=>{const n=xe("LoadingOverlay",ioe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Bs(),g=yt({name:"LoadingOverlay",classes:$be,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eWe}),y={...ioe.overlayProps,...f};return _.jsx(jm,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(_e,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(Bm,{...g("loader"),unstyled:a,...c}),_.jsx(e2,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(e2,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Pl.classes=$be;Pl.displayName="@mantine/core/LoadingOverlay";const[tWe,FI]=fo("Menu component was not found in the tree");var Dx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const nWe={},gG=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",nWe,e),u=FI();return _.jsx(_e,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});gG.classes=Dx;gG.displayName="@mantine/core/MenuDivider";const rWe={},yG=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",rWe,e),f=N.useRef(null),d=FI(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Mp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Mp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(Zr.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:cs(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});yG.classes=Dx;yG.displayName="@mantine/core/MenuDropdown";const iWe={},vG=Us((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",iWe,e),p=FI(),m=Bs(),{dir:g}=Oh(),y=N.useRef(),v=p.getItemIndex(y.current),b=h,w=Mp(b.onMouseLeave,()=>p.setHovered(-1)),E=Mp(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=Mp(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),T=Mp(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,C=a?Dh({color:a,theme:m}):null;return _.jsxs(bs,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:T,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:cs(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:S,onKeyDown:Yq({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":C!=null&&C.isThemeColor&&(C==null?void 0:C.shade)===void 0?`var(--mantine-color-${C.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});vG.classes=Dx;vG.displayName="@mantine/core/MenuItem";const sWe={},bG=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",sWe,e),u=FI();return _.jsx(_e,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});bG.classes=Dx;bG.displayName="@mantine/core/MenuLabel";const oWe={refProp:"ref"},Mbe=N.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",oWe,e);if(!yy(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=FI(),o=Mp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Mp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Mp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(Zr.Target,{refProp:r,popupType:"menu",ref:t,...i,children:N.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});Mbe.displayName="@mantine/core/MenuTarget";const aWe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Eu(e){const t=xe("Menu",aWe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...S}=t,T=yt({name:"Menu",classes:Dx,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:C,resetHovered:I}]=mBe(),[R,O]=ws({value:s,defaultValue:o,finalValue:!1,onChange:u}),[P,$]=N.useState(!1),F=()=>{O(!1),$(!1),R&&(i==null||i())},L=()=>{O(!0),!R&&(r==null||r())},B=()=>{R?F():L()},{openDropdown:z,closeDropdown:q}=xqe({open:L,close:F,closeDelay:p,openDelay:h}),D=j=>pBe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:U,resolvedStyles:W}=Lm({classNames:m,styles:g,props:t});return lm(()=>{I()},[R]),_.jsx(tWe,{value:{getStyles:T,opened:R,toggleDropdown:B,getItemIndex:D,hovered:A,setHovered:C,openedViaClick:P,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?F:q,openDropdown:d==="click"?L:z,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(Zr,{...S,opened:R,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Eu.extend=e=>e;Eu.classes=Dx;Eu.displayName="@mantine/core/Menu";Eu.Item=vG;Eu.Label=bG;Eu.Dropdown=yG;Eu.Target=Mbe;Eu.Divider=gG;const[uWe,Ox]=fo("Modal component was not found in tree");var Vm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const lWe={},lL=Le((e,t)=>{const n=xe("ModalBody",lWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(CW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});lL.classes=Vm;lL.displayName="@mantine/core/ModalBody";const cWe={},cL=Le((e,t)=>{const n=xe("ModalCloseButton",cWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(IW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});cL.classes=Vm;cL.displayName="@mantine/core/ModalCloseButton";const fWe={},fL=Le((e,t)=>{const n=xe("ModalContent",fWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Ox(),f=c.scrollAreaComponent||Z1e;return _.jsx(J1e,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Ae(c.yOffset)} * 2))`},children:u})})});fL.classes=Vm;fL.displayName="@mantine/core/ModalContent";const dWe={},dL=Le((e,t)=>{const n=xe("ModalHeader",dWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(kW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});dL.classes=Vm;dL.displayName="@mantine/core/ModalHeader";const hWe={},hL=Le((e,t)=>{const n=xe("ModalOverlay",hWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(RW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});hL.classes=Vm;hL.displayName="@mantine/core/ModalOverlay";const pWe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Lc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},mWe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Yr(t),"--modal-size":en(n,"modal-size"),"--modal-y-offset":Ae(r),"--modal-x-offset":Ae(i)}}),pL=Le((e,t)=>{const n=xe("ModalRoot",pWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=yt({name:m,classes:Vm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mWe});return _.jsx(uWe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(Q1e,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});pL.classes=Vm;pL.displayName="@mantine/core/ModalRoot";const gWe={},mL=Le((e,t)=>{const n=xe("ModalTitle",gWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(NW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});mL.classes=Vm;mL.displayName="@mantine/core/ModalTitle";const yWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Lc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},_s=Le((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",yWe,e),c=!!n||s;return _.jsxs(pL,{ref:t,radius:u,...l,children:[r&&_.jsx(hL,{...i}),_.jsxs(fL,{radius:u,children:[c&&_.jsxs(dL,{children:[n&&_.jsx(mL,{children:n}),s&&_.jsx(cL,{...o})]}),_.jsx(lL,{children:a})]})]})});_s.classes=Vm;_s.displayName="@mantine/core/Modal";_s.Root=pL;_s.Overlay=hL;_s.Content=fL;_s.Body=lL;_s.Header=dL;_s.Title=mL;_s.CloseButton=cL;const[vWe,_G]=Tx(),[bWe,_We]=Tx();var gL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const wWe={},EWe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?en(t):en(n,"pg-gap")}}),wG=Le((e,t)=>{const n=xe("PillGroup",wWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=_G(),h=(d==null?void 0:d.size)||l||void 0,p=yt({name:"PillGroup",classes:gL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EWe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(bWe,{value:{size:h,disabled:c},children:_.jsx(_e,{ref:t,size:h,...p("group"),...f})})});wG.classes=gL;wG.displayName="@mantine/core/PillGroup";const xWe={variant:"default"},SWe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":en(n,"pill-fz"),"--pill-height":en(n,"pill-height"),"--pill-radius":t===void 0?void 0:Yr(t)}}),t2=Le((e,t)=>{const n=xe("Pill",xWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=_We(),w=_G(),E=m||(b==null?void 0:b.size)||void 0,S=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",T=yt({name:"Pill",classes:gL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:SWe,stylesCtx:{size:E}});return _.jsxs(_e,{component:"span",ref:t,variant:S,size:E,...T("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...T("label"),children:c}),f&&_.jsx(_y,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var C;A.preventDefault(),A.stopPropagation(),(C=h==null?void 0:h.onMouseDown)==null||C.call(h,A)},onClick:A=>{var C;A.stopPropagation(),d==null||d(),(C=h==null?void 0:h.onClick)==null||C.call(h,A)}})]})});t2.classes=gL;t2.displayName="@mantine/core/Pill";t2.Group=wG;var Lbe={field:"m_45c4369d"};const TWe={type:"visible"},EG=Le((e,t)=>{const n=xe("PillsInputField",TWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=_G(),g=kx(),y=yt({name:"PillsInputField",classes:Lbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(_e,{component:"input",ref:cs(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});EG.classes=Lbe;EG.displayName="@mantine/core/PillsInputField";const AWe={},_O=Le((e,t)=>{const n=xe("PillsInput",AWe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=N.useRef();return _.jsx(vWe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(Bc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});_O.displayName="@mantine/core/PillsInput";_O.Field=EG;function CWe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(pE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const IWe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},xG=Le((e,t)=>{const n=xe("MultiSelect",IWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:S,filter:T,limit:A,withScrollArea:C,maxDropdownHeight:I,searchValue:R,defaultSearchValue:O,onSearchChange:P,readOnly:$,disabled:F,onFocus:L,onBlur:B,onPaste:z,radius:q,rightSection:D,rightSectionWidth:U,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ie,descriptionProps:ve,errorProps:Ke,wrapperProps:Ue,description:gt,label:rt,error:be,maxValues:ke,searchable:ze,nothingFoundMessage:ct,withCheckIcon:Dt,checkIconPosition:We,hidePickedOptions:me,withErrorStyles:dt,name:vt,form:pe,id:Ce,clearable:He,clearButtonProps:ut,hiddenInputProps:_t,placeholder:Mn,hiddenInputValuesDivider:Sr,required:Ln,mod:lr,renderOption:pn,onRemove:Sn,onClear:tr,scrollAreaProps:nr,...Bo}=n,Oi=Ea(Ce),Tn=ube(m),$i=qW(Tn),Tr=nG({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Tr.resetSelectedOption()}}),{styleProps:ds,rest:{type:rp,autoComplete:sl,...ld}}=vb(Bo),[wr,Ti]=ws({value:c,defaultValue:f,finalValue:[],onChange:d}),[Kr,au]=ws({value:R,defaultValue:O,finalValue:"",onChange:P}),Ta=yt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Aa,resolvedStyles:oe}=Lm({props:n,styles:o,classNames:r}),ee=st=>{h==null||h(st),st.key===" "&&!ze&&(st.preventDefault(),Tr.toggleDropdown()),st.key==="Backspace"&&Kr.length===0&&wr.length>0&&(Sn==null||Sn(wr[wr.length-1]),Ti(wr.slice(0,wr.length-1)))},ae=wr.map((st,St)=>{var Vt,Dn;return _.jsx(t2,{withRemoveButton:!$&&!((Vt=$i[st])!=null&&Vt.disabled),onRemove:()=>{Ti(wr.filter(Fn=>st!==Fn)),Sn==null||Sn(st)},unstyled:a,disabled:F,...Ta("pill"),children:((Dn=$i[st])==null?void 0:Dn.label)||st},`${st}-${St}`)});N.useEffect(()=>{w&&Tr.selectFirstOption()},[w,wr]);const Te=He&&wr.length>0&&!F&&!$&&_.jsx(Yn.ClearButton,{size:l,...ut,onClear:()=>{tr==null||tr(),Ti([]),au("")}}),Se=CWe({data:Tn,value:wr});return _.jsxs(_.Fragment,{children:[_.jsxs(Yn,{store:Tr,classNames:Aa,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:st=>{E==null||E(st),au(""),Tr.updateSelectedOptionIndex("selected"),wr.includes($i[st].value)?(Ti(wr.filter(St=>St!==$i[st].value)),Sn==null||Sn($i[st].value)):wr.length<ke&&Ti([...wr,$i[st].value])},...S,children:[_.jsx(Yn.DropdownTarget,{children:_.jsx(_O,{...ds,__staticSelector:"MultiSelect",classNames:Aa,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:q,rightSection:D||Te||_.jsx(Yn.Chevron,{size:l,error:be,unstyled:a}),rightSectionPointerEvents:W||(Te?"all":"none"),rightSectionWidth:U,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ye,labelProps:Ie,descriptionProps:ve,errorProps:Ke,wrapperProps:Ue,description:gt,label:rt,error:be,multiline:!0,withErrorStyles:dt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Te?"all":"none"),multiline:!0},pointer:!ze,onClick:()=>ze?Tr.openDropdown():Tr.toggleDropdown(),"data-expanded":Tr.dropdownOpened||void 0,id:Oi,required:Ln,mod:lr,children:_.jsxs(t2.Group,{disabled:F,unstyled:a,...Ta("pillsList"),children:[ae,_.jsx(Yn.EventsTarget,{autoComplete:sl,children:_.jsx(_O.Field,{...ld,ref:t,id:Oi,placeholder:Mn,type:!ze&&!Mn?"hidden":"visible",...Ta("inputField"),unstyled:a,onFocus:st=>{L==null||L(st),ze&&Tr.openDropdown()},onBlur:st=>{B==null||B(st),Tr.closeDropdown(),au("")},onKeyDown:ee,value:Kr,onChange:st=>{au(st.currentTarget.value),ze&&Tr.openDropdown(),w&&Tr.selectFirstOption()},disabled:F,readOnly:$||!ze,pointer:!ze})})]})})}),_.jsx(Abe,{data:me?Se:Tn,hidden:$||F,filter:T,search:Kr,limit:A,hiddenWhenEmpty:!ze||!ct||me&&Se.length===0&&Kr.trim().length===0,withScrollArea:C,maxDropdownHeight:I,filterOptions:ze,value:wr,checkIconPosition:We,withCheckIcon:Dt,nothingFoundMessage:ct,unstyled:a,labelId:rt?`${Oi}-label`:void 0,"aria-label":rt?void 0:Bo["aria-label"],renderOption:pn,scrollAreaProps:nr})]}),_.jsx(Yn.HiddenInput,{name:vt,valuesDivider:Sr,value:wr,form:pe,disabled:F,..._t})]})});xG.classes={...Bc.classes,...Yn.classes};xG.displayName="@mantine/core/MultiSelect";var Fbe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const kWe={},RWe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Rl(r)}}},yL=Us((e,t)=>{const n=xe("NavLink",kWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:S,onKeyDown:T,autoContrast:A,mod:C,...I}=n,R=yt({name:"NavLink",props:n,classes:Fbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:RWe}),[O,P]=ws({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,F=L=>{h==null||h(L),$&&(L.preventDefault(),P(!O))};return _.jsxs(_.Fragment,{children:[_.jsxs(bs,{...R("root"),component:"a",ref:t,onClick:F,onKeyDown:L=>{T==null||T(L),L.nativeEvent.code==="Space"&&$&&(L.preventDefault(),P(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},C],...I,children:[g&&_.jsx(_e,{component:"span",...R("section"),mod:{position:"left"},children:g}),_.jsxs(_e,{...R("body"),mod:{"no-wrap":E},children:[_.jsx(_e,{component:"span",...R("label"),children:v}),_.jsx(_e,{component:"span",mod:{active:p},...R("description"),children:b})]}),($||y)&&_.jsx(_e,{...R("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:$?y||_.jsx(hE,{...R("chevron")}):y})]}),_.jsx(sW,{in:O,...R("collapse"),children:_.jsx("div",{...R("children"),children:d})})]})});yL.classes=Fbe;yL.displayName="@mantine/core/NavLink";function jbe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var n2;(function(e){e.event="event",e.props="prop"})(n2||(n2={}));function Og(){}function NWe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function r2(e){return!!(e||"").match(/\d/)}function Aw(e){return e==null}function PWe(e){return typeof e=="number"&&isNaN(e)}function Bbe(e){return Aw(e)||PWe(e)||typeof e=="number"&&!isFinite(e)}function Ube(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function DWe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function OWe(e,t,n){var r=DWe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function $We(e){var t=N.useRef(e);t.current=e;var n=N.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function SG(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function MWe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function zbe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function soe(e,t){return Array(t+1).join(e)}function Vbe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+soe("0",Math.abs(o))+i:o>=a?i=i+soe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function ooe(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=SG(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=zbe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Av(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Hbe=NWe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),LWe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function FWe(e,t,n){return Math.min(Math.max(e,t),n)}function d8(e){return Math.max(e.selectionStart,e.selectionEnd)}function jWe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function BWe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function UWe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function zWe(e,t,n,r,i,s,o){o===void 0&&(o=UWe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function aoe(e,t,n,r){var i=e.length;if(t=FWe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function VWe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(r2(e[n])||r2(e[n-1]));return t}function qbe(e,t,n,r,i,s){s===void 0&&(s=Og);var o=$We(function(p,m){var g,y;return Bbe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?Vbe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=N.useState(function(){return o(Aw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;Aw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return N.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function HWe(e){return e.replace(/[^0-9]/g,"")}function qWe(e){return e}function WWe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=qWe);var a=e.removeFormatting;a===void 0&&(a=HWe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Og);var h=e.onKeyDown;h===void 0&&(h=Og);var p=e.onMouseUp;p===void 0&&(p=Og);var m=e.onFocus;m===void 0&&(m=Og);var g=e.onBlur;g===void 0&&(g=Og);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=VWe);var b=e.isValidInputCharacter;b===void 0&&(b=r2);var w=e.isCharacterSame,E=jbe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=qbe(y,u,!!l,o,a,c),T=S[0],A=T.formattedValue,C=T.numAsString,I=S[1],R=N.useRef(),O=N.useRef({formattedValue:A,numAsString:C}),P=function(be,ke){O.current={formattedValue:be.formattedValue,numAsString:be.value},I(be,ke)},$=N.useState(!1),F=$[0],L=$[1],B=N.useRef(null),z=N.useRef({setCaretTimeout:null,focusTimeout:null});N.useEffect(function(){return L(!0),function(){clearTimeout(z.current.setCaretTimeout),clearTimeout(z.current.focusTimeout)}},[]);var q=o,D=function(be,ke){var ze=parseFloat(ke);return{formattedValue:be,value:ke,floatValue:isNaN(ze)?void 0:ze}},U=function(be,ke,ze){be.selectionStart===0&&be.selectionEnd===be.value.length||(Av(be,ke),z.current.setCaretTimeout=setTimeout(function(){be.value===ze&&be.selectionStart!==ke&&Av(be,ke)},0))},W=function(be,ke,ze){return aoe(be,ke,v(be),ze)},j=function(be,ke,ze){var ct=v(ke),Dt=zWe(ke,A,be,ze,ct,b,w);return Dt=aoe(ke,Dt,ct),Dt},H=function(be){var ke=be.formattedValue;ke===void 0&&(ke="");var ze=be.input,ct=be.source,Dt=be.event,We=be.numAsString,me;if(ze){var dt=be.inputValue||ze.value,vt=d8(ze);ze.value=ke,me=j(dt,ke,vt),me!==void 0&&U(ze,me,ke)}ke!==A&&P(D(ke,We),{event:Dt,source:ct})};N.useEffect(function(){var be=O.current,ke=be.formattedValue,ze=be.numAsString;(A!==ke||C!==ze)&&P(D(A,C),{event:void 0,source:n2.props})},[A,C]);var G=B.current?d8(B.current):void 0,ne=typeof window<"u"?N.useLayoutEffect:N.useEffect;ne(function(){var be=B.current;if(A!==O.current.formattedValue&&be){var ke=j(O.current.formattedValue,A,G);be.value=A,U(be,ke,A)}},[A]);var ce=function(be,ke,ze){var ct=ke.target,Dt=R.current?LWe(R.current,ct.selectionEnd):Hbe(A,be),We=Object.assign(Object.assign({},Dt),{lastValue:A}),me=a(be,We),dt=q(me);if(me=a(dt,void 0),f&&!f(D(dt,me))){var vt=ke.target,pe=d8(vt),Ce=j(be,A,pe);return vt.value=A,U(vt,Ce,A),!1}return H({formattedValue:dt,numAsString:me,inputValue:be,event:ke,source:ze,input:ke.target}),!0},de=function(be,ke){ke===void 0&&(ke=0);var ze=be.selectionStart,ct=be.selectionEnd;R.current={selectionStart:ze,selectionEnd:ct+ke}},he=function(be){var ke=be.target,ze=ke.value,ct=ce(ze,be,n2.event);ct&&d(be),R.current=void 0},ye=function(be){var ke=be.target,ze=be.key,ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var me;ze==="ArrowLeft"||ze==="Backspace"?me=Math.max(ct-1,0):ze==="ArrowRight"?me=Math.min(ct+1,We.length):ze==="Delete"&&(me=ct);var dt=0;ze==="Delete"&&ct===Dt&&(dt=1);var vt=ze==="ArrowLeft"||ze==="ArrowRight";if(me===void 0||ct!==Dt&&!vt){h(be),de(ke,dt);return}var pe=me;if(vt){var Ce=ze==="ArrowLeft"?"left":"right";pe=W(We,me,Ce),pe!==me&&be.preventDefault()}else ze==="Delete"&&!b(We[me])?pe=W(We,me,"right"):ze==="Backspace"&&!b(We[me])&&(pe=W(We,me,"left"));pe!==me&&U(ke,pe,We),h(be),de(ke,dt)},Ie=function(be){var ke=be.target,ze=function(){var ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;if(We===void 0&&(We=""),ct===Dt){var me=W(We,ct);me!==ct&&U(ke,me,We)}};ze(),requestAnimationFrame(function(){ze()}),p(be),de(ke)},ve=function(be){be.persist&&be.persist();var ke=be.target,ze=be.currentTarget;B.current=ke,z.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Dt=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var me=W(We,ct);me!==ct&&!(ct===0&&Dt===We.length)&&U(ke,me,We),m(Object.assign(Object.assign({},be),{currentTarget:ze}))},0)},Ke=function(be){B.current=null,clearTimeout(z.current.focusTimeout),clearTimeout(z.current.setCaretTimeout),g(be)},Ue=F&&jWe()?"numeric":void 0,gt=Object.assign({inputMode:Ue},E,{type:t,value:A,onChange:he,onKeyDown:ye,onMouseUp:Ie,onFocus:ve,onBlur:Ke});if(n==="text")return i?Wi.createElement(Wi.Fragment,null,i(A,E)||null):Wi.createElement("span",Object.assign({},E,{ref:s}),A);if(r){var rt=r;return Wi.createElement(rt,Object.assign({},gt,{ref:s}))}return Wi.createElement("input",Object.assign({},gt,{ref:s}))}function uoe(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=vL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=SG(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=zbe(p,n,!!r)),l&&(h=OWe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function vL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function GWe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function YWe(e,t){return new RegExp("(^-)|[0-9]|"+Ube(e),"g")}function KWe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function XWe(e,t,n){var r;t===void 0&&(t=BWe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=vL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(r2(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,z,q){var D=!1,U=!1;s.startsWith("-")?D=!1:B.startsWith("--")?(D=!1,U=!0):o.startsWith("-")&&B.length===o.length?D=!1:B[0]==="-"&&(D=!0);var W=D?1:0;return U&&(W=2),W&&(B=B.substring(W),z-=W,q-=W),{value:B,start:z,end:q,hasNegation:D}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,S=w.end,T=w.value,A=e.substring(c,f);e.length&&T.length&&(E>T.length-o.length||S<s.length)&&!(A&&o.startsWith(A))&&(e=T);var C=0;e.startsWith(s)?C+=s.length:c<s.length&&(C=c),e=e.substring(C),f-=C;var I=e.length,R=e.length-o.length;e.endsWith(o)?I=R:(f>R||f>e.length-o.length)&&(I=f),e=e.substring(0,I),e=GWe(b?"-"+e:e,i),e=(e.match(YWe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(Ube(p),"g"),function(B,z){return z===O?".":""});var P=SG(e,i),$=P.beforeDecimal,F=P.afterDecimal,L=P.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(F)&&(e=L?"-":""),e}function QWe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function JWe(e){var t=vL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function ZWe(e){e=JWe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Og);var s=e.onBlur;s===void 0&&(s=Og);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=jbe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=vL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(L){return uoe(L,e)},b=function(L,B){return XWe(L,B,e)},w=Aw(f)?c:f,E=d??KWe(w,l,t);Aw(f)?Aw(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var S=function(L){return Bbe(L)?L:(typeof L=="number"&&(L=Vbe(L)),E&&typeof a=="number"?ooe(L,a,!!u):L)},T=qbe(S(f),S(c),!!E,v,b,h),A=T[0],C=A.numAsString,I=A.formattedValue,R=T[1],O=function(L){var B=L.target,z=L.key,q=B.selectionStart,D=B.selectionEnd,U=B.value;if(U===void 0&&(U=""),(z==="Backspace"||z==="Delete")&&D<l.length){L.preventDefault();return}if(q!==D){i(L);return}z==="Backspace"&&U[0]==="-"&&q===l.length+1&&n&&Av(B,1),a&&u&&(z==="Backspace"&&U[q-1]===g?(Av(B,q-1),L.preventDefault()):z==="Delete"&&U[q]===g&&L.preventDefault()),y!=null&&y.includes(z)&&U[q]===g&&Av(B,q+1);var W=o===!0?",":o;z==="Backspace"&&U[q-1]===W&&Av(B,q-1),z==="Delete"&&U[q]===W&&Av(B,q+1),i(L)},P=function(L){var B=C;if(B.match(/\d/g)||(B=""),r||(B=MWe(B)),u&&a&&(B=ooe(B,a,u)),B!==C){var z=uoe(B,e);R({formattedValue:z,value:B,floatValue:parseFloat(B)},{event:L,source:n2.event})}s(L)},$=function(L){return L===g?!0:r2(L)},F=function(L){var B=L.currentValue,z=L.lastValue,q=L.formattedValue,D=L.currentValueIndex,U=L.formattedValueIndex,W=B[D],j=q[U],H=Hbe(z,B),G=H.to;return D>=G.start&&D<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:I,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:F,onValueChange:R,format:v,removeFormatting:b,getCaretBoundary:function(L){return QWe(L,e)},onKeyDown:O,onBlur:P})}function eGe(e){var t=ZWe(e);return Wi.createElement(WWe,Object.assign({},t))}function loe({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var xU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const tGe=/^(0\.0*|-0(\.0*)?)$/,nGe=/^-?0\d+(\.\d+)?\.?$/;function rGe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function coe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const iGe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},sGe=(e,{size:t})=>({controls:{"--ni-chevron-size":en(t,"ni-chevron-size")}}),TG=Le((e,t)=>{const n=xe("NumberInput",iGe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:S,onKeyDownCapture:T,handlersRef:A,startValue:C,disabled:I,rightSectionPointerEvents:R,allowNegative:O,readOnly:P,size:$,rightSectionWidth:F,stepHoldInterval:L,stepHoldDelay:B,allowLeadingZeros:z,withKeyboardEvents:q,trimLeadingZeroesOnBlur:D,...U}=n,W=yt({name:"NumberInput",classes:xU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:sGe}),{resolvedClassNames:j,resolvedStyles:H}=Lm({classNames:i,styles:s,props:n}),[G,ne]=ws({value:c,defaultValue:f,onChange:u}),ce=B!==void 0&&L!==void 0,de=N.useRef(null),he=N.useRef(null),ye=N.useRef(0),Ie=(me,dt)=>{dt.source==="event"&&ne(rGe(me.floatValue)&&!tGe.test(me.value)&&!(z&&nGe.test(me.value))?me.floatValue:me.value),l==null||l(me,dt)},ve=me=>{const dt=String(me).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return dt?Math.max(0,(dt[1]?dt[1].length:0)-(dt[2]?+dt[2]:0)):0},Ke=me=>{de.current&&typeof me<"u"&&de.current.setSelectionRange(me,me)},Ue=N.useRef();Ue.current=()=>{let me;const dt=ve(G),vt=ve(p),pe=Math.max(dt,vt),Ce=10**pe;if(typeof G!="number"||Number.isNaN(G))me=Hd(C,h,d);else if(d!==void 0){const ut=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;me=ut<=d?ut:d}else me=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;const He=me.toFixed(pe);ne(parseFloat(He)),l==null||l({floatValue:parseFloat(He),formattedValue:He,value:He},{source:"increment"}),setTimeout(()=>{var ut;return Ke((ut=de.current)==null?void 0:ut.value.length)},0)};const gt=N.useRef();gt.current=()=>{let me;const dt=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,vt=ve(G),pe=ve(p),Ce=Math.max(vt,pe),He=10**Ce;if(typeof G!="number"||Number.isNaN(G))me=Hd(C,dt,d);else{const _t=(Math.round(G*He)-Math.round(p*He))/He;me=dt!==void 0&&_t<dt?dt:_t}const ut=me.toFixed(Ce);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return Ke((_t=de.current)==null?void 0:_t.value.length)},0)};const rt=me=>{S==null||S(me),!(P||!q)&&(me.key==="ArrowUp"&&(me.preventDefault(),Ue.current()),me.key==="ArrowDown"&&(me.preventDefault(),gt.current()))},be=me=>{if(T==null||T(me),me.key==="Backspace"){const dt=de.current;dt.selectionStart===0&&dt.selectionStart===dt.selectionEnd&&(me.preventDefault(),window.setTimeout(()=>Ke(0),0))}};Qq(A,{increment:Ue.current,decrement:gt.current});const ke=me=>{me?Ue.current():gt.current(),ye.current+=1},ze=me=>{if(ke(me),ce){const dt=typeof L=="number"?L:L(ye.current);he.current=window.setTimeout(()=>ze(me),dt)}},ct=(me,dt)=>{var vt;me.preventDefault(),(vt=de.current)==null||vt.focus(),ke(dt),ce&&(he.current=window.setTimeout(()=>ze(dt),B))},Dt=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ye.current=0},We=_.jsxs("div",{...W("controls"),children:[_.jsx(bs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ct(me,!0)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(loe,{direction:"up"})}),_.jsx(bs,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:I||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{ct(me,!1)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(loe,{direction:"down"})})]});return _.jsx(Bc,{component:eGe,allowNegative:O,className:Ki(xU.root,r),size:$,...U,readOnly:P,disabled:I,value:G,getInputRef:cs(t,de),onValueChange:Ie,rightSection:m||P?g:g||We,classNames:j,styles:H,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:rt,onKeyDownCapture:be,rightSectionPointerEvents:R??(I?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:z,onBlur:me=>{if(b==null||b(me),v==="blur"&&typeof G=="number"&&Hd(G,h,d)!==G&&ne(Hd(G,h,d)),D&&typeof G=="string"){const dt=G.replace(/^0+/,""),vt=parseFloat(dt);ne(Number.isNaN(vt)?dt:vt)}},isAllowed:me=>v==="strict"?y?y(me)&&coe(me.floatValue,h,d):coe(me.floatValue,h,d):y?y(me):!0})});TG.classes={...Bc.classes,...xU};TG.displayName="@mantine/core/NumberInput";const[oGe,Wbe]=fo("Progress.Root component was not found in tree");var jI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const aGe={},AG=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",aGe,e),u=Wbe();return _.jsx(_e,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});AG.classes=jI;AG.displayName="@mantine/core/ProgressLabel";const uGe={},lGe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":en(t,"progress-size"),"--progress-radius":n===void 0?void 0:Yr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),bL=Le((e,t)=>{const n=xe("ProgressRoot",uGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=yt({name:"Progress",classes:jI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lGe});return _.jsx(oGe,{value:{getStyles:d,autoContrast:l},children:_.jsx(_e,{ref:t,...d("root"),...f})})});bL.classes=jI;bL.displayName="@mantine/core/ProgressRoot";const cGe={withAria:!0},_L=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",cGe,e),p=Wbe(),m=Bs(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(_e,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Gr(l,m),"--progress-label-color":Ax(p.autoContrast,m)?by({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});_L.classes=jI;_L.displayName="@mantine/core/ProgressSection";const fGe={},$x=Le((e,t)=>{const n=xe("Progress",fGe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Lm({classNames:i,styles:s,props:n});return _.jsx(bL,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(_L,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});$x.classes=jI;$x.displayName="@mantine/core/Progress";$x.Section=_L;$x.Root=bL;$x.Label=AG;const[dGe,Gbe]=Tx(),[hGe,pGe]=Tx();var Ybe={card:"m_9dc8ae12"};const mGe={withBorder:!0},gGe=(e,{radius:t})=>({card:{"--card-radius":Yr(t)}}),CG=Le((e,t)=>{const n=xe("RadioCard",mGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=yt({name:"RadioCard",classes:Ybe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gGe,rootSelector:"card"}),{dir:v}=Oh(),b=Gbe(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),S=T=>{if(m==null||m(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),C=A.findIndex(O=>O===T.target),I=C+1>=A.length?0:C+1,R=C-1<0?A.length-1:C-1;T.nativeEvent.code==="ArrowDown"&&(A[I].focus(),A[I].click()),T.nativeEvent.code==="ArrowUp"&&(A[R].focus(),A[R].click()),T.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?R:I].focus(),A[v==="ltr"?R:I].click()),T.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?I:R].focus(),A[v==="ltr"?I:R].click())}};return _.jsx(hGe,{value:{checked:w},children:_.jsx(bs,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:T=>{h==null||h(T),b==null||b.onChange(d||"")},onKeyDown:S})})});CG.displayName="@mantine/core/RadioCard";CG.classes=Ybe;const yGe={},IG=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",yGe,e),f=Ea(u),[d,h]=ws({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(dGe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(di.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(iG,{role:"radiogroup",children:a})})})});IG.classes=di.Wrapper.classes;IG.displayName="@mantine/core/RadioGroup";function Kbe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ae(e),height:Ae(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var Xbe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const vGe={icon:Kbe},bGe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Dh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":en(r,"radio-size"),"--radio-radius":t===void 0?void 0:Yr(t),"--radio-color":s==="outline"?u:Gr(n,e),"--radio-icon-size":en(r,"radio-icon-size"),"--radio-icon-color":i?Gr(i,e):Ax(o,e)?by({color:n,theme:e,autoContrast:o}):void 0}}},kG=Le((e,t)=>{const n=xe("RadioIndicator",vGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=yt({name:"RadioIndicator",classes:Xbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bGe,rootSelector:"indicator"}),E=pGe(),S=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(_e,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});kG.displayName="@mantine/core/RadioIndicator";kG.classes=Xbe;var Qbe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const _Ge={labelPosition:"right"},wGe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Dh({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":en(t,"radio-size"),"--radio-radius":n===void 0?void 0:Yr(n),"--radio-color":s==="outline"?u:Gr(r,e),"--radio-icon-color":i?Gr(i,e):Ax(o,e)?by({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":en(t,"radio-icon-size")}}},I1=Le((e,t)=>{const n=xe("Radio",_Ge,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=Kbe,rootRef:E,iconColor:S,onChange:T,mod:A,...C}=n,I=yt({name:"Radio",classes:Qbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wGe}),R=Gbe(),O=(R==null?void 0:R.size)??c,P=n.size?c:O,{styleProps:$,rest:F}=vb(C),L=Ea(l),B=R?{checked:R.value===F.value,name:F.name??R.name,onChange:z=>{R.onChange(z),T==null||T(z)}}:{};return _.jsx(ZM,{...I("root"),__staticSelector:"Radio",__stylesApiProps:n,id:L,size:P,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:A,...$,...b,children:_.jsxs(_e,{...I("inner"),mod:{"label-position":d},children:[_.jsx(_e,{...I("radio",{focusable:!0,variant:y}),onChange:T,...F,...B,component:"input",mod:{error:!!p},ref:t,id:L,disabled:v,type:"radio"}),_.jsx(w,{...I("icon"),"aria-hidden":!0})]})})});I1.classes=Qbe;I1.displayName="@mantine/core/Radio";I1.Group=IG;I1.Card=CG;I1.Indicator=kG;const EGe={duration:100,transition:"fade"};function xGe(e,t){return{...EGe,...t,...e}}function SGe({offset:e,position:t}){const[n,r]=N.useState(!1),i=N.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=xW({placement:t,middleware:[bW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=N.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return N.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Gp(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var wL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const TGe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Lc("popover")},AGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Yr(t),"--tooltip-bg":n?Gr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),RG=Le((e,t)=>{const n=xe("TooltipFloating",TGe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:E,...S}=n,T=Bs(),A=yt({name:"TooltipFloating",props:n,classes:wL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:AGe}),{handleMouseMove:C,x:I,y:R,opened:O,boundaryRef:P,floating:$,setOpened:F}=SGe({offset:p,position:m});if(!yy(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const L=cs(P,r.ref,t),B=q=>{var D,U;(U=(D=r.props).onMouseEnter)==null||U.call(D,q),C(q),F(!0)},z=q=>{var D,U;(U=(D=r.props).onMouseLeave)==null||U.call(D,q),F(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(PI,{...E,withinPortal:s,children:_.jsx(_e,{...S,...A("tooltip",{style:{...iW(o,T),zIndex:y,display:!v&&O?"block":"none",top:(R&&Math.round(R))??"",left:(I&&Math.round(I))??""}}),variant:b,ref:$,mod:{multiline:g},children:h})}),N.cloneElement(r,{...r.props,[i]:L,onMouseEnter:B,onMouseLeave:z})]})});RG.classes=wL;RG.displayName="@mantine/core/TooltipFloating";const Jbe=N.createContext(!1),CGe=Jbe.Provider,IGe=()=>N.useContext(Jbe),kGe={openDelay:0,closeDelay:0};function Zbe(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",kGe,e);return _.jsx(CGe,{value:!0,children:_.jsx(Cze,{delay:{open:t,close:n},children:r})})}Zbe.displayName="@mantine/core/TooltipGroup";function RGe(e){var S,T,A;const[t,n]=N.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=IGe(),o=Ea(),{delay:a,currentId:u,setCurrentId:l}=F1e(),c=N.useCallback(C=>{n(C),C&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=xW({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[D1e(e.offset),bW({padding:8}),vU(),O1e({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[bU()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=Oze([Aze(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((T=e.events)!=null&&T.touch)}),Dze(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),Mze(h,{role:"tooltip"}),Nze(h,{enabled:typeof e.opened>"u"}),Ize(h,{id:o})]);q1e({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),lm(()=>{var C;(C=e.onPositionChange)==null||C.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const foe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Lc("popover"),positionDependencies:[]},NGe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Yr(t),"--tooltip-bg":n?Gr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),is=Le((e,t)=>{const n=xe("Tooltip",foe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,offset:A,transitionProps:C,multiline:I,events:R,zIndex:O,disabled:P,positionDependencies:$,onClick:F,onMouseEnter:L,onMouseLeave:B,inline:z,variant:q,keepMounted:D,vars:U,portalProps:W,mod:j,floatingStrategy:H,...G}=xe("Tooltip",foe,n),{dir:ne}=Oh(),ce=N.useRef(null),de=RGe({position:j1e(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:R,arrowRef:ce,arrowOffset:E,offset:typeof A=="number"?A+(b?w/2:0):A,positionDependencies:[...$,r],inline:z,strategy:H}),he=yt({name:"Tooltip",props:n,classes:wL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:U,varsResolver:NGe});if(!yy(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=cs(de.reference,r.ref,t),Ie=xGe(C,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(PI,{...W,withinPortal:f,children:_.jsx(jm,{...Ie,keepMounted:D,mounted:!P&&!!de.opened,duration:de.isGroupPhase?10:Ie.duration,children:ve=>_.jsxs(_e,{...G,variant:q,mod:[{multiline:I},j],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...ve,zIndex:O,top:de.y??0,left:de.x??0}}),children:[o,_.jsx(SW,{ref:ce,arrowX:de.arrowX,arrowY:de.arrowY,visible:b,position:de.placement,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:T,...he("arrow")})]})})}),N.cloneElement(r,de.getReferenceProps({onClick:F,onMouseEnter:L,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ye,className:Ki(v,r.props.className),...r.props}))]})});is.classes=wL;is.displayName="@mantine/core/Tooltip";is.Floating=RG;is.Group=Zbe;var e_e={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const PGe={withItemsBorders:!0},DGe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Yr(t),"--sc-color":n?Gr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":en(i,"sc-padding"),"--sc-font-size":uo(i)}}),NG=Le((e,t)=>{var ne,ce;const n=xe("SegmentedControl",PGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:S,variant:T,autoContrast:A,withItemsBorders:C,mod:I,...R}=n,O=yt({name:"SegmentedControl",props:n,classes:e_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DGe}),P=Bs(),$=l.map(de=>typeof de=="string"?{label:de,value:de}:de),F=LBe(),[L,B]=N.useState(null),[z,q]=N.useState({}),D=(de,he)=>{z[he]=de,q(z)},[U,W]=ws({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=$.find(de=>!de.disabled))==null?void 0:ne.value)??((ce=l[0])==null?void 0:ce.value)??null:null,onChange:d}),j=Ea(p),H=$.map(de=>N.createElement(_e,{...O("control"),mod:{active:U===de.value,orientation:v},key:de.value},N.createElement("input",{...O("input"),disabled:m||de.disabled,type:"radio",name:j,value:de.value,id:`${j}-${de.value}`,checked:U===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":P.focusRing,key:`${de.value}-input`}),N.createElement(_e,{component:"label",...O("label"),mod:{active:U===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${j}-${de.value}`,ref:he=>D(he,de.value),__vars:{"--sc-label-color":w!==void 0?by({color:w,theme:P,autoContrast:A}):void 0},key:`${de.value}-label`},_.jsx("span",{...O("innerLabel"),children:de.label})))),G=cs(t,de=>B(de));return l.length===0?null:_.jsxs(_e,{...O("root"),variant:T,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":C},I],...R,role:"radiogroup",children:[typeof U=="string"&&_.jsx(OW,{target:z[U],parent:L,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),H]})});NG.classes=e_e;NG.displayName="@mantine/core/SegmentedControl";const OGe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},BI=Le((e,t)=>{const n=xe("Select",OGe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:S,filter:T,limit:A,withScrollArea:C,maxDropdownHeight:I,size:R,searchable:O,rightSection:P,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:L,name:B,form:z,searchValue:q,defaultSearchValue:D,onSearchChange:U,allowDeselect:W,error:j,rightSectionPointerEvents:H,id:G,clearable:ne,clearButtonProps:ce,hiddenInputProps:de,renderOption:he,onClear:ye,autoComplete:Ie,scrollAreaProps:ve,...Ke}=n,Ue=N.useMemo(()=>ube(m),[m]),gt=N.useMemo(()=>qW(Ue),[Ue]),rt=Ea(G),[be,ke,ze]=ws({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof be=="string"?gt[be]:void 0,[Dt,We]=ws({value:q,defaultValue:D,finalValue:ct?ct.label:"",onChange:U}),me=nG({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),me.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),me.resetSelectedOption()}}),{resolvedClassNames:dt,resolvedStyles:vt}=Lm({props:n,styles:i,classNames:r});N.useEffect(()=>{v&&me.selectFirstOption()},[v,be]),N.useEffect(()=>{g===null&&We(""),typeof g=="string"&&ct&&We(ct.label)},[g,ct]);const pe=ne&&!!be&&!S&&!E&&_.jsx(Yn.ClearButton,{size:R,...ce,onClear:()=>{ke(null,null),We(""),ye==null||ye()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Yn,{store:me,__staticSelector:"Select",classNames:dt,styles:vt,unstyled:s,readOnly:E,onOptionSubmit:Ce=>{b==null||b(Ce);const He=W&&gt[Ce].value===be?null:gt[Ce],ut=He?He.value:null;ke(ut,He),!ze&&We(typeof ut=="string"&&(He==null?void 0:He.label)||""),me.closeDropdown()},size:R,...w,children:[_.jsx(Yn.Target,{targetType:O?"input":"button",autoComplete:Ie,children:_.jsx(Bc,{id:rt,ref:t,rightSection:P||pe||_.jsx(Yn.Chevron,{size:R,error:j,unstyled:s}),rightSectionPointerEvents:H||(pe?"all":"none"),...Ke,size:R,__staticSelector:"Select",disabled:S,readOnly:E||!O,value:Dt,onChange:Ce=>{We(Ce.currentTarget.value),me.openDropdown(),v&&me.selectFirstOption()},onFocus:Ce=>{O&&me.openDropdown(),f==null||f(Ce)},onBlur:Ce=>{var He;O&&me.closeDropdown(),We(be!=null&&((He=gt[be])==null?void 0:He.label)||""),d==null||d(Ce)},onClick:Ce=>{O?me.openDropdown():me.toggleDropdown(),h==null||h(Ce)},classNames:dt,styles:vt,unstyled:s,pointer:!O,error:j})}),_.jsx(Abe,{data:Ue,hidden:E||S,filter:T,search:Dt,limit:A,hiddenWhenEmpty:!O||!L,withScrollArea:C,maxDropdownHeight:I,filterOptions:O&&(ct==null?void 0:ct.label)!==Dt,value:be,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:L,unstyled:s,labelId:Ke.label?`${rt}-label`:void 0,"aria-label":Ke.label?void 0:Ke["aria-label"],renderOption:he,scrollAreaProps:ve})]}),_.jsx(Yn.HiddenInput,{value:be,name:B,form:z,disabled:S,...de})]})});BI.classes={...Bc.classes,...Yn.classes};BI.displayName="@mantine/core/Select";const[t_e,EL]=fo("SliderProvider was not found in tree"),PG=N.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=EL();return _.jsx(_e,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});PG.displayName="@mantine/core/SliderRoot";const wO=N.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=EL(),[b,w]=N.useState(!1),E=l||s||b||h&&p;return _.jsxs(_e,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,_.jsx(jm,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:S=>_.jsx("div",{...v("label",{style:S}),children:i})})]})});wO.displayName="@mantine/core/SliderThumb";function EO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function $Ge({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function n_e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=EL();if(!e)return null;const u=e.map((l,c)=>N.createElement(_e,{...a("markWrapper"),__vars:{"--mark-offset":`${EO({value:l.value,min:t,max:n})}%`},key:c},_.jsx(_e,{...a("mark"),mod:{filled:$Ge({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}n_e.displayName="@mantine/core/SliderMarks";function DG({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=EL();return _.jsx(_.Fragment,{children:_.jsx(_e,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(_e,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(_e,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(n_e,{...a,offset:i,disabled:r,inverted:s})]})})})}DG.displayName="@mantine/core/SliderTrack";function SU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function sc(e,t){return parseFloat(e.toFixed(t))}function r_e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var xL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const MGe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},LGe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":en(t,"slider-size"),"--slider-color":n?Gr(n,e):void 0,"--slider-radius":i===void 0?void 0:Yr(i),"--slider-thumb-size":r!==void 0?Ae(r):"calc(var(--slider-size) * 2)"}}),SL=Le((e,t)=>{const n=xe("Slider",MGe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:S,unstyled:T,scale:A,inverted:C,className:I,style:R,vars:O,hiddenInputProps:P,...$}=n,F=yt({name:"Slider",props:n,classes:xL,classNames:r,className:I,styles:i,style:R,vars:O,varsResolver:LGe,unstyled:T}),{dir:L}=Oh(),[B,z]=N.useState(!1),[q,D]=ws({value:typeof s=="number"?Hd(s,l,c):s,defaultValue:typeof h=="number"?Hd(h,l,c):h,finalValue:Hd(0,l,c),onChange:o}),U=N.useRef(q),W=N.useRef(),j=N.useRef(),H=EO({value:q,min:l,max:c}),G=A(q),ne=typeof g=="function"?g(G):g,ce=d??r_e(f),de=N.useCallback(({x:ve})=>{if(!S){const Ke=SU({value:ve,min:l,max:c,step:f,precision:ce});D(Ke),U.current=Ke}},[S,l,c,f,ce,D]),{ref:he,active:ye}=Qve(de,{onScrubEnd:()=>a==null?void 0:a(U.current)},L),Ie=ve=>{var Ke,Ue,gt,rt,be,ke;if(!S)switch(ve.key){case"ArrowUp":{ve.preventDefault(),(Ke=j.current)==null||Ke.focus();const ze=sc(Math.min(Math.max(q+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowRight":{ve.preventDefault(),(Ue=j.current)==null||Ue.focus();const ze=sc(Math.min(Math.max(L==="rtl"?q-f:q+f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowDown":{ve.preventDefault(),(gt=j.current)==null||gt.focus();const ze=sc(Math.min(Math.max(q-f,l),c),ce);D(ze),a==null||a(ze);break}case"ArrowLeft":{ve.preventDefault(),(rt=j.current)==null||rt.focus();const ze=sc(Math.min(Math.max(L==="rtl"?q+f:q-f,l),c),ce);D(ze),a==null||a(ze);break}case"Home":{ve.preventDefault(),(be=j.current)==null||be.focus(),D(l),a==null||a(l);break}case"End":{ve.preventDefault(),(ke=j.current)==null||ke.focus(),D(c),a==null||a(c);break}}};return _.jsx(t_e,{value:{getStyles:F},children:_.jsxs(PG,{...$,ref:cs(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var ve;return(ve=W.current)==null?void 0:ve.focus()},size:u,disabled:S,children:[_.jsx(DG,{inverted:C,offset:0,filled:H,marks:m,min:l,max:c,value:G,disabled:S,containerProps:{ref:he,onMouseEnter:w?()=>z(!0):void 0,onMouseLeave:w?()=>z(!1):void 0},children:_.jsx(wO,{max:c,min:l,value:G,position:H,dragging:ye,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:S,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...P})]})})});SL.classes=xL;SL.displayName="@mantine/core/Slider";function FGe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const jGe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":en(t,"slider-size"),"--slider-color":n?Gr(n,e):void 0,"--slider-radius":i===void 0?void 0:Yr(i),"--slider-thumb-size":r!==void 0?Ae(r):"calc(var(--slider-size) * 2)"}}),BGe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},xO=Le((e,t)=>{const n=xe("RangeSlider",BGe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:S,showLabelOnHover:T,thumbChildren:A,disabled:C,unstyled:I,scale:R,inverted:O,className:P,style:$,vars:F,hiddenInputProps:L,...B}=n,z=yt({name:"Slider",props:n,classes:xL,classNames:r,className:P,styles:i,style:$,vars:F,varsResolver:jGe,unstyled:I}),{dir:q}=Oh(),[D,U]=N.useState(-1),[W,j]=N.useState(!1),[H,G]=ws({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=N.useRef(H),ce=N.useRef([]),de=N.useRef(void 0),he=[EO({value:H[0],min:l,max:c}),EO({value:H[1],min:l,max:c})],ye=p??r_e(h),Ie=We=>{G(We),ne.current=We};N.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const ve=(We,me,dt)=>{const vt=[...ne.current];vt[me]=We,me===0&&(We>vt[1]-(f-1e-9)&&(vt[1]=Math.min(We+f,c)),We>(c-(f-1e-9)||l)&&(vt[me]=ne.current[me]),vt[1]-We>d&&(vt[1]=We+d)),me===1&&(We<vt[0]+f&&(vt[0]=Math.max(We-f,l)),We<vt[0]+f&&(vt[me]=ne.current[me]),We-vt[0]>d&&(vt[0]=We-d)),vt[0]=sc(vt[0],ye),vt[1]=sc(vt[1],ye),Ie(vt),dt&&(a==null||a(ne.current))},Ke=We=>{if(!C){const me=SU({value:We,min:l,max:c,step:h,precision:ye});ve(me,de.current,!1)}},{ref:Ue,active:gt}=Qve(({x:We})=>Ke(We),{onScrubEnd:()=>a==null?void 0:a(ne.current)},q);function rt(We){de.current=We}const be=We=>{Ue.current.focus();const me=Ue.current.getBoundingClientRect(),dt=FGe(We.nativeEvent),vt=SU({value:dt-me.left,max:c,min:l,step:h,containerWidth:me.width}),pe=Math.abs(H[0]-vt)>Math.abs(H[1]-vt)?1:0,Ce=q==="ltr"?pe:pe===1?0:1;de.current=Ce},ke=()=>D!==1&&D!==0?(U(0),0):D,ze=We=>{if(!C)switch(We.key){case"ArrowUp":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(sc(Math.min(Math.max(ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowRight":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(sc(Math.min(Math.max(q==="rtl"?ne.current[me]-h:ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowDown":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(sc(Math.min(Math.max(ne.current[me]-h,l),c),ye),me,!0);break}case"ArrowLeft":{We.preventDefault();const me=ke();ce.current[me].focus(),ve(sc(Math.min(Math.max(q==="rtl"?ne.current[me]+h:ne.current[me]-h,l),c),ye),me,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>U(-1)},Dt=Array.isArray(A);return _.jsx(t_e,{value:{getStyles:z},children:_.jsxs(PG,{...B,size:u,ref:t,disabled:C,children:[_.jsxs(DG,{offset:he[0],marksOffset:H[0],filled:he[1]-he[0],marks:y,inverted:O,min:l,max:c,value:H[1],disabled:C,containerProps:{ref:Ue,onMouseEnter:T?()=>j(!0):void 0,onMouseLeave:T?()=>j(!1):void 0,onTouchStartCapture:be,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:be,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:ze},children:[_.jsx(wO,{...ct,value:R(H[0]),position:he[0],dragging:gt,label:typeof v=="function"?v(sc(R(H[0]),ye)):v,ref:We=>{ce.current[0]=We},thumbLabel:E,onMouseDown:()=>rt(0),onFocus:()=>U(0),showLabelOnHover:T,isHovered:W,disabled:C,children:Dt?A[0]:A}),_.jsx(wO,{...ct,thumbLabel:S,value:R(H[1]),position:he[1],dragging:gt,label:typeof v=="function"?v(sc(R(H[1]),ye)):v,ref:We=>{ce.current[1]=We},onMouseDown:()=>rt(1),onFocus:()=>U(1),showLabelOnHover:T,isHovered:W,disabled:C,children:Dt?A[1]:A})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:H[0],...L}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:H[1],...L})]})})});xO.classes=xL;xO.displayName="@mantine/core/RangeSlider";const UGe={},Ec=Le((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",UGe,e);return _.jsx(_e,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Ec.displayName="@mantine/core/Space";var i_e={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const zGe={maxHeight:100,initialState:!1},VGe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),OG=Le((e,t)=>{const n=xe("Spoiler",zGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=yt({name:"Spoiler",classes:i_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:VGe}),b=Ea(g),w=`${b}-region`,[E,S]=N.useState(l),{ref:T,height:A}=RBe(),C=E?f:d,I=C!==null&&c<A;return _.jsxs(_e,{...v("root"),id:b,ref:t,"data-has-spoiler":I||void 0,...y,children:[I&&_.jsx(Rx,{component:"button",type:"button",ref:p,onClick:()=>S(R=>!R),"aria-expanded":E,"aria-controls":w,...v("control"),children:C}),_.jsx("div",{...v("content",{style:{maxHeight:E?A?Ae(A):void 0:Ae(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:T,children:h})})]})});OG.classes=i_e;OG.displayName="@mantine/core/Spoiler";var s_e={root:"m_6d731127"};const HGe={gap:"md",align:"stretch",justify:"flex-start"},qGe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Rl(t),"--stack-align":n,"--stack-justify":r}}),qd=Le((e,t)=>{const n=xe("Stack",HGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=yt({name:"Stack",props:n,classes:s_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qGe});return _.jsx(_e,{ref:t,...p("root"),variant:d,...h})});qd.classes=s_e;qd.displayName="@mantine/core/Stack";const o_e=N.createContext(null),WGe=o_e.Provider,GGe=()=>N.useContext(o_e),YGe={},$G=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("SwitchGroup",YGe,e),[c,f]=ws({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(WGe,{value:{value:c,onChange:d,size:s},children:_.jsx(di.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(iG,{role:"group",children:a})})})});$G.classes=di.Wrapper.classes;$G.displayName="@mantine/core/SwitchGroup";var a_e={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const KGe={labelPosition:"right"},XGe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Yr(t),"--switch-height":en(r,"switch-height"),"--switch-width":en(r,"switch-width"),"--switch-thumb-size":en(r,"switch-thumb-size"),"--switch-label-font-size":en(r,"switch-label-font-size"),"--switch-track-label-padding":en(r,"switch-track-label-padding"),"--switch-color":n?Gr(n,e):void 0}}),Cw=Le((e,t)=>{const n=xe("Switch",KGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:S,description:T,error:A,disabled:C,variant:I,rootRef:R,mod:O,...P}=n,$=GGe(),F=p||($==null?void 0:$.size),L=yt({name:"Switch",props:n,classes:a_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XGe}),{styleProps:B,rest:z}=vb(P),q=Ea(h),D=$?{checked:$.value.includes(z.value),onChange:$.onChange}:{},[U,W]=ws({value:D.checked??b,defaultValue:w,finalValue:!1});return _.jsxs(ZM,{...L("root"),__staticSelector:"Switch",__stylesApiProps:n,id:q,size:F,labelPosition:S,label:c,description:T,error:A,disabled:C,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":D.checked||void 0,variant:I,ref:R,mod:O,...B,...g,children:[_.jsx("input",{...z,disabled:C,checked:U,onChange:j=>{var H;$?(H=D.onChange)==null||H.call(D,j):E==null||E(j),W(j.currentTarget.checked)},id:q,ref:t,type:"checkbox",role:"switch",...L("input")}),_.jsxs(_e,{"aria-hidden":"true",mod:{error:A,"label-position":S},...L("track"),children:[_.jsx(_e,{component:"span",mod:"reduce-motion",...L("thumb"),children:v}),_.jsx("span",{...L("trackLabel"),children:U?d:f})]})]})});Cw.classes={...a_e,...mbe};Cw.displayName="@mantine/core/Switch";Cw.Group=$G;const[QGe,JGe]=fo("Table component was not found in the tree");var UI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function ZGe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Eb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Le((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=JGe();return _.jsx(_e,{component:e,ref:s,...ZGe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=UI,r}const TU=Eb("th",{columnBorder:!0}),u_e=Eb("td",{columnBorder:!0}),LP=Eb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),l_e=Eb("thead",{stickyHeader:!0}),c_e=Eb("tbody"),f_e=Eb("tfoot"),d_e=Eb("caption",{captionSide:!0});function MG({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(d_e,{children:e.caption}),e.head&&_.jsx(l_e,{children:_.jsx(LP,{children:e.head.map((t,n)=>_.jsx(TU,{children:t},n))})}),e.body&&_.jsx(c_e,{children:e.body.map((t,n)=>_.jsx(LP,{children:t.map((r,i)=>_.jsx(u_e,{children:r},i))},n))}),e.foot&&_.jsx(f_e,{children:_.jsx(LP,{children:e.foot.map((t,n)=>_.jsx(TU,{children:t},n))})})]})}MG.displayName="@mantine/core/TableDataRenderer";const eYe={type:"scrollarea"},tYe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ae(t),"--table-overflow":n==="native"?"auto":void 0}}),LG=Le((e,t)=>{const n=xe("TableScrollContainer",eYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=yt({name:"TableScrollContainer",classes:UI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tYe,rootSelector:"scrollContainer"});return _.jsx(_e,{component:f==="scrollarea"?bb:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});LG.classes=UI;LG.displayName="@mantine/core/TableScrollContainer";const nYe={withRowBorders:!0,verticalSpacing:7},rYe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Rl(r),"--table-vertical-spacing":Rl(i),"--table-border-color":s?Gr(s,e):void 0,"--table-striped-color":u&&o?Gr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Gr(a,e):void 0,"--table-sticky-header-offset":f?Ae(c):void 0}}),An=Le((e,t)=>{const n=xe("Table",nYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:S,children:T,stickyHeader:A,stickyHeaderOffset:C,mod:I,...R}=n,O=yt({name:"Table",props:n,className:i,style:s,classes:UI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:rYe});return _.jsx(QGe,{value:{getStyles:O,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(_e,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},I],...O("table"),...R,children:T||!!S&&_.jsx(MG,{data:S})})})});An.classes=UI;An.displayName="@mantine/core/Table";An.Td=u_e;An.Th=TU;An.Tr=LP;An.Thead=l_e;An.Tbody=c_e;An.Tfoot=f_e;An.Caption=d_e;An.ScrollContainer=LG;An.DataRenderer=MG;const[iYe,FG]=fo("Tabs component was not found in the tree");var zI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const sYe={},jG=Le((e,t)=>{const n=xe("TabsList",sYe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=FG();return _.jsx(_e,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});jG.classes=zI;jG.displayName="@mantine/core/TabsList";const oYe={},BG=Le((e,t)=>{const n=xe("TabsPanel",oYe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=FG(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(_e,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});BG.classes=zI;BG.displayName="@mantine/core/TabsPanel";const aYe={},UG=Le((e,t)=>{const n=xe("TabsTab",aYe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Bs(),{dir:b}=Oh(),w=FG(),E=a===w.value,S=A=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(A)},T={classNames:h,styles:p,props:n};return _.jsxs(bs,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...T}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?Gr(f,v):void 0},onKeyDown:Yq({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",T),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"right",children:s})]})});UG.classes=zI;UG.displayName="@mantine/core/TabsTab";const doe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",uYe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},lYe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Yr(t),"--tabs-color":Gr(n,e),"--tabs-text-color":Ax(r,e)?by({color:n,theme:e,autoContrast:r}):void 0}}),ts=Le((e,t)=>{const n=xe("Tabs",uYe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:S,vars:T,autoContrast:A,mod:C,...I}=n,R=Ea(l),[O,P]=ws({value:i,defaultValue:r,finalValue:null,onChange:s}),$=yt({name:"Tabs",props:n,classes:zI,className:E,style:S,classNames:v,styles:b,unstyled:w,vars:T,varsResolver:lYe});return _.jsx(iYe,{value:{placement:g,value:O,orientation:o,id:R,loop:u,activateTabWithKeyboard:c,getTabId:dO(`${R}-tab`,doe),getPanelId:dO(`${R}-panel`,doe),onChange:P,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:_.jsx(_e,{ref:t,id:R,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},C],...$("root"),...I,children:a})})});ts.classes=zI;ts.displayName="@mantine/core/Tabs";ts.Tab=UG;ts.Panel=BG;ts.List=jG;const cYe={},u1=Le((e,t)=>{const n=xe("TextInput",cYe,e);return _.jsx(Bc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});u1.classes=Bc.classes;u1.displayName="@mantine/core/TextInput";const fYe=["h1","h2","h3","h4","h5","h6"];function dYe(e,t){const n=t!==void 0?t:`h${e}`;return fYe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Ae(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var h_e={root:"m_8a5d1357"};const hYe={order:1},pYe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=dYe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},ki=Le((e,t)=>{const n=xe("Title",hYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=yt({name:"Title",props:n,classes:h_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:pYe});return[1,2,3,4,5,6].includes(u)?_.jsx(_e,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});ki.classes=h_e;ki.displayName="@mantine/core/Title";const p_e=N.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),xs=()=>N.useContext(p_e);function mYe({children:e}){const[t,n]=Wi.useState(void 0),r=Wi.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(p_e.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function i2(){return i2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i2.apply(this,arguments)}var Vg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Vg||(Vg={}));const hoe="popstate";function gYe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return AU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:g_e(i)}return vYe(t,n,null,e)}function os(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function m_e(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yYe(){return Math.random().toString(36).substr(2,8)}function poe(e,t){return{usr:e.state,key:e.key,idx:t}}function AU(e,t,n,r){return n===void 0&&(n=null),i2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Mx(t):t,{state:n,key:t&&t.key||r||yYe()})}function g_e(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Mx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function vYe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Vg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(i2({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Vg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Vg.Push;let v=AU(m.location,g,y);l=c()+1;let b=poe(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Vg.Replace;let v=AU(m.location,g,y);l=c();let b=poe(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:g_e(g);return v=v.replace(/ $/,"%20"),os(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(hoe,f),u=g,()=>{i.removeEventListener(hoe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var moe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(moe||(moe={}));function bYe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Mx(t):t,i=b_e(r.pathname||"/",n);if(i==null)return null;let s=y_e(e);_Ye(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=PYe(i);o=kYe(s[a],u)}return o}function y_e(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(os(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=c0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(os(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),y_e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:CYe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of v_e(s.path))i(s,o,u)}),t}function v_e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=v_e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function _Ye(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:IYe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const wYe=/^:[\w-]+$/,EYe=3,xYe=2,SYe=1,TYe=10,AYe=-2,goe=e=>e==="*";function CYe(e,t){let n=e.split("/"),r=n.length;return n.some(goe)&&(r+=AYe),t&&(r+=xYe),n.filter(i=>!goe(i)).reduce((i,s)=>i+(wYe.test(s)?EYe:s===""?SYe:TYe),r)}function IYe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function kYe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=RYe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:c0([i,c.pathname]),pathnameBase:MYe(c0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=c0([i,c.pathnameBase]))}return s}function RYe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=NYe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function NYe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),m_e(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function PYe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return m_e(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function b_e(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function DYe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Mx(e):e;return{pathname:n?n.startsWith("/")?n:OYe(n,t):t,search:LYe(r),hash:FYe(i)}}function OYe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function h8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $Ye(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function zG(e,t){let n=$Ye(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function VG(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Mx(e):(i=i2({},e),os(!i.pathname||!i.pathname.includes("?"),h8("?","pathname","search",i)),os(!i.pathname||!i.pathname.includes("#"),h8("#","pathname","hash",i)),os(!i.search||!i.search.includes("#"),h8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=DYe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const c0=e=>e.join("/").replace(/\/\/+/g,"/"),MYe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),LYe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,FYe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jYe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const __e=["post","put","patch","delete"];new Set(__e);const BYe=["get",...__e];new Set(BYe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function s2(){return s2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s2.apply(this,arguments)}const HG=N.createContext(null),UYe=N.createContext(null),xb=N.createContext(null),TL=N.createContext(null),Mh=N.createContext({outlet:null,matches:[],isDataRoute:!1}),w_e=N.createContext(null);function E_e(e,t){let{relative:n}={};Lx()||os(!1);let{basename:r,navigator:i}=N.useContext(xb),{hash:s,pathname:o,search:a}=qYe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:c0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Lx(){return N.useContext(TL)!=null}function Sb(){return Lx()||os(!1),N.useContext(TL).location}function x_e(e){N.useContext(xb).static||N.useLayoutEffect(e)}function Hm(){let{isDataRoute:e}=N.useContext(Mh);return e?nKe():zYe()}function zYe(){Lx()||os(!1);let e=N.useContext(HG),{basename:t,future:n,navigator:r}=N.useContext(xb),{matches:i}=N.useContext(Mh),{pathname:s}=Sb(),o=JSON.stringify(zG(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return x_e(()=>{a.current=!0}),N.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=VG(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:c0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const VYe=N.createContext(null);function HYe(e){let t=N.useContext(Mh).outlet;return t&&N.createElement(VYe.Provider,{value:e},t)}function k1(){let{matches:e}=N.useContext(Mh),t=e[e.length-1];return t?t.params:{}}function qYe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(xb),{matches:i}=N.useContext(Mh),{pathname:s}=Sb(),o=JSON.stringify(zG(i,r.v7_relativeSplatPath));return N.useMemo(()=>VG(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function S_e(e,t){return WYe(e,t)}function WYe(e,t,n,r){Lx()||os(!1);let{navigator:i}=N.useContext(xb),{matches:s}=N.useContext(Mh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Sb(),c;if(t){var f;let g=typeof t=="string"?Mx(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||os(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=bYe(e,{pathname:h}),m=QYe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:c0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:c0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?N.createElement(TL.Provider,{value:{location:s2({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Vg.Pop}},m):m}function GYe(){let e=tKe(),t=jYe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:i},n):null,null)}const YYe=N.createElement(GYe,null);class KYe extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(Mh.Provider,{value:this.props.routeContext},N.createElement(w_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XYe(e){let{routeContext:t,match:n,children:r}=e,i=N.useContext(HG);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Mh.Provider,{value:t},r)}function QYe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||os(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||YYe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=N.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,N.createElement(XYe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?N.createElement(KYe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var T_e=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(T_e||{}),SO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(SO||{});function JYe(e){let t=N.useContext(HG);return t||os(!1),t}function ZYe(e){let t=N.useContext(UYe);return t||os(!1),t}function eKe(e){let t=N.useContext(Mh);return t||os(!1),t}function A_e(e){let t=eKe(),n=t.matches[t.matches.length-1];return n.route.id||os(!1),n.route.id}function tKe(){var e;let t=N.useContext(w_e),n=ZYe(SO.UseRouteError),r=A_e(SO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function nKe(){let{router:e}=JYe(T_e.UseNavigateStable),t=A_e(SO.UseNavigateStable),n=N.useRef(!1);return x_e(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,s2({fromRouteId:t},s)))},[e,t])}function qG(e){let{to:t,replace:n,state:r,relative:i}=e;Lx()||os(!1);let{future:s,static:o}=N.useContext(xb),{matches:a}=N.useContext(Mh),{pathname:u}=Sb(),l=Hm(),c=VG(t,zG(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return N.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function rKe(e){return HYe(e.context)}function mp(e){os(!1)}function iKe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Vg.Pop,navigator:s,static:o=!1,future:a}=e;Lx()&&os(!1);let u=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:u,navigator:s,static:o,future:s2({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Mx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=N.useMemo(()=>{let g=b_e(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:N.createElement(xb.Provider,{value:l},N.createElement(TL.Provider,{children:n,value:m}))}function sKe(e){let{children:t,location:n}=e;return S_e(CU(t),n)}new Promise(()=>{});function CU(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,i)=>{if(!N.isValidElement(r))return;let s=[...t,i];if(r.type===N.Fragment){n.push.apply(n,CU(r.props.children,s));return}r.type!==mp&&os(!1),!r.props.index||!r.props.children||os(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=CU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function IU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function oKe(e,t){let n=IU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const aKe="6";try{window.__reactRouterVersion=aKe}catch{}const uKe="startTransition",yoe=BD[uKe];function lKe(e){let{basename:t,children:n,future:r,window:i}=e,s=N.useRef();s.current==null&&(s.current=gYe({window:i,v5Compat:!0}));let o=s.current,[a,u]=N.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=N.useCallback(f=>{l&&yoe?yoe(()=>u(f)):u(f)},[u,l]);return N.useLayoutEffect(()=>o.listen(c),[o,c]),N.createElement(iKe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var voe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(voe||(voe={}));var boe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(boe||(boe={}));function WG(e){let t=N.useRef(IU(e)),n=N.useRef(!1),r=Sb(),i=N.useMemo(()=>oKe(r.search,n.current?null:t.current),[r.search]),s=Hm(),o=N.useCallback((a,u)=>{const l=IU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const GG=N.createContext(null);GG.displayName="@mantine/modals/ModalsContext";function cKe(){const e=N.useContext(GG);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function fKe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=cKe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(_e,{mb:"md",children:l}),_.jsxs(Fs,{justify:"flex-end",...o,children:[_.jsx(Rn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(Rn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[dKe,AL]=jBe("mantine-modals");AL("openModal");AL("closeModal");AL("closeAllModals");const kU=AL("openConfirmModal");function _oe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function hKe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;_oe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{_oe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function pKe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function mKe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=N.useReducer(hKe,{modals:[],current:null}),o=N.useRef(i);o.current=i;const a=N.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=N.useCallback(({modalId:g,...y})=>{const v=g||qA();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=N.useCallback(({modalId:g,...y})=>{const v=g||qA();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=N.useCallback((g,{modalId:y,...v})=>{const b=y||qA();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=N.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);dKe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=pKe(g.props);return{modalProps:y,content:_.jsx(fKe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(GG.Provider,{value:d,children:[_.jsx(_s,{zIndex:Lc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gKe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=(e,t,n,r)=>{const i=N.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>N.createElement("svg",{ref:f,...gKe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>N.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yKe=Fr("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var woe=Fr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vKe=Fr("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bKe=Fr("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Ke=Fr("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wKe=Fr("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EKe=Fr("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xKe=Fr("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var C_e=Fr("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Eoe=Fr("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SKe=Fr("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TKe=Fr("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AKe=Fr("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var I_e=Fr("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CKe=Fr("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IKe=Fr("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kKe=Fr("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var k_e=Fr("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RKe=Fr("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NKe=Fr("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PKe=Fr("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R_e=Fr("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var N_e=Fr("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DKe=Fr("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var P_e=Fr("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YG=Fr("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KG=Fr("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OKe=Fr("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function D_e(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Lh="/study/";function xoe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function O_e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const $Ke=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,MKe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,LKe={};function Soe(e,t){return(LKe.jsx?MKe:$Ke).test(e)}const FKe=/[ \t\n\f\r]/g;function jKe(e){return typeof e=="object"?e.type==="text"?Toe(e.value):!1:Toe(e)}function Toe(e){return e.replace(FKe,"")===""}let VI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};VI.prototype.property={};VI.prototype.normal={};VI.prototype.space=null;function $_e(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new VI(n,r,t)}function o2(e){return e.toLowerCase()}let zc=class{constructor(t,n){this.property=t,this.attribute=n}};zc.prototype.space=null;zc.prototype.boolean=!1;zc.prototype.booleanish=!1;zc.prototype.overloadedBoolean=!1;zc.prototype.number=!1;zc.prototype.commaSeparated=!1;zc.prototype.spaceSeparated=!1;zc.prototype.commaOrSpaceSeparated=!1;zc.prototype.mustUseProperty=!1;zc.prototype.defined=!1;let BKe=0;const mn=Tb(),ps=Tb(),M_e=Tb(),tt=Tb(),Jr=Tb(),Iw=Tb(),ul=Tb();function Tb(){return 2**++BKe}const RU=Object.freeze(Object.defineProperty({__proto__:null,boolean:mn,booleanish:ps,commaOrSpaceSeparated:ul,commaSeparated:Iw,number:tt,overloadedBoolean:M_e,spaceSeparated:Jr},Symbol.toStringTag,{value:"Module"})),p8=Object.keys(RU);class XG extends zc{constructor(t,n,r,i){let s=-1;if(super(t,n),Aoe(this,"space",i),typeof r=="number")for(;++s<p8.length;){const o=p8[s];Aoe(this,p8[s],(r&RU[o])===RU[o])}}}XG.prototype.defined=!0;function Aoe(e,t,n){n&&(e[t]=n)}const UKe={}.hasOwnProperty;function Fx(e){const t={},n={};let r;for(r in e.properties)if(UKe.call(e.properties,r)){const i=e.properties[r],s=new XG(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[o2(r)]=r,n[o2(s.attribute)]=r}return new VI(t,n,e.space)}const L_e=Fx({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),F_e=Fx({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function j_e(e,t){return t in e?e[t]:t}function B_e(e,t){return j_e(e,t.toLowerCase())}const U_e=Fx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:B_e,properties:{xmlns:null,xmlnsXLink:null}}),z_e=Fx({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ps,ariaAutoComplete:null,ariaBusy:ps,ariaChecked:ps,ariaColCount:tt,ariaColIndex:tt,ariaColSpan:tt,ariaControls:Jr,ariaCurrent:null,ariaDescribedBy:Jr,ariaDetails:null,ariaDisabled:ps,ariaDropEffect:Jr,ariaErrorMessage:null,ariaExpanded:ps,ariaFlowTo:Jr,ariaGrabbed:ps,ariaHasPopup:null,ariaHidden:ps,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Jr,ariaLevel:tt,ariaLive:null,ariaModal:ps,ariaMultiLine:ps,ariaMultiSelectable:ps,ariaOrientation:null,ariaOwns:Jr,ariaPlaceholder:null,ariaPosInSet:tt,ariaPressed:ps,ariaReadOnly:ps,ariaRelevant:null,ariaRequired:ps,ariaRoleDescription:Jr,ariaRowCount:tt,ariaRowIndex:tt,ariaRowSpan:tt,ariaSelected:ps,ariaSetSize:tt,ariaSort:null,ariaValueMax:tt,ariaValueMin:tt,ariaValueNow:tt,ariaValueText:null,role:null}}),zKe=Fx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:B_e,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Iw,acceptCharset:Jr,accessKey:Jr,action:null,allow:null,allowFullScreen:mn,allowPaymentRequest:mn,allowUserMedia:mn,alt:null,as:null,async:mn,autoCapitalize:null,autoComplete:Jr,autoFocus:mn,autoPlay:mn,blocking:Jr,capture:null,charSet:null,checked:mn,cite:null,className:Jr,cols:tt,colSpan:null,content:null,contentEditable:ps,controls:mn,controlsList:Jr,coords:tt|Iw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:mn,defer:mn,dir:null,dirName:null,disabled:mn,download:M_e,draggable:ps,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:mn,formTarget:null,headers:Jr,height:tt,hidden:mn,high:tt,href:null,hrefLang:null,htmlFor:Jr,httpEquiv:Jr,id:null,imageSizes:null,imageSrcSet:null,inert:mn,inputMode:null,integrity:null,is:null,isMap:mn,itemId:null,itemProp:Jr,itemRef:Jr,itemScope:mn,itemType:Jr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:mn,low:tt,manifest:null,max:null,maxLength:tt,media:null,method:null,min:null,minLength:tt,multiple:mn,muted:mn,name:null,nonce:null,noModule:mn,noValidate:mn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:mn,optimum:tt,pattern:null,ping:Jr,placeholder:null,playsInline:mn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:mn,referrerPolicy:null,rel:Jr,required:mn,reversed:mn,rows:tt,rowSpan:tt,sandbox:Jr,scope:null,scoped:mn,seamless:mn,selected:mn,shadowRootClonable:mn,shadowRootDelegatesFocus:mn,shadowRootMode:null,shape:null,size:tt,sizes:null,slot:null,span:tt,spellCheck:ps,src:null,srcDoc:null,srcLang:null,srcSet:null,start:tt,step:null,style:null,tabIndex:tt,target:null,title:null,translate:null,type:null,typeMustMatch:mn,useMap:null,value:ps,width:tt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Jr,axis:null,background:null,bgColor:null,border:tt,borderColor:null,bottomMargin:tt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:mn,declare:mn,event:null,face:null,frame:null,frameBorder:null,hSpace:tt,leftMargin:tt,link:null,longDesc:null,lowSrc:null,marginHeight:tt,marginWidth:tt,noResize:mn,noHref:mn,noShade:mn,noWrap:mn,object:null,profile:null,prompt:null,rev:null,rightMargin:tt,rules:null,scheme:null,scrolling:ps,standby:null,summary:null,text:null,topMargin:tt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:tt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:mn,disableRemotePlayback:mn,prefix:null,property:null,results:tt,security:null,unselectable:null}}),VKe=Fx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:j_e,properties:{about:ul,accentHeight:tt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:tt,amplitude:tt,arabicForm:null,ascent:tt,attributeName:null,attributeType:null,azimuth:tt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:tt,by:null,calcMode:null,capHeight:tt,className:Jr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:tt,diffuseConstant:tt,direction:null,display:null,dur:null,divisor:tt,dominantBaseline:null,download:mn,dx:null,dy:null,edgeMode:null,editable:null,elevation:tt,enableBackground:null,end:null,event:null,exponent:tt,externalResourcesRequired:null,fill:null,fillOpacity:tt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Iw,g2:Iw,glyphName:Iw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:tt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:tt,horizOriginX:tt,horizOriginY:tt,id:null,ideographic:tt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:tt,k:tt,k1:tt,k2:tt,k3:tt,k4:tt,kernelMatrix:ul,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:tt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:tt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:tt,overlineThickness:tt,paintOrder:null,panose1:null,path:null,pathLength:tt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Jr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:tt,pointsAtY:tt,pointsAtZ:tt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ul,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ul,rev:ul,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ul,requiredFeatures:ul,requiredFonts:ul,requiredFormats:ul,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:tt,specularExponent:tt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:tt,strikethroughThickness:tt,string:null,stroke:null,strokeDashArray:ul,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:tt,strokeOpacity:tt,strokeWidth:null,style:null,surfaceScale:tt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ul,tabIndex:tt,tableValues:null,target:null,targetX:tt,targetY:tt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ul,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:tt,underlineThickness:tt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:tt,values:null,vAlphabetic:tt,vMathematical:tt,vectorEffect:null,vHanging:tt,vIdeographic:tt,version:null,vertAdvY:tt,vertOriginX:tt,vertOriginY:tt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:tt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),HKe=/^data[-\w.:]+$/i,Coe=/-[a-z]/g,qKe=/[A-Z]/g;function CL(e,t){const n=o2(t);let r=t,i=zc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&HKe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Coe,GKe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Coe.test(s)){let o=s.replace(qKe,WKe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=XG}return new i(r,t)}function WKe(e){return"-"+e.toLowerCase()}function GKe(e){return e.charAt(1).toUpperCase()}const YKe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},HI=$_e([F_e,L_e,U_e,z_e,zKe],"html"),xy=$_e([F_e,L_e,U_e,z_e,VKe],"svg");function Ioe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function V_e(e){return e.join(" ").trim()}var H_e={},koe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,KKe=/\n/g,XKe=/^\s*/,QKe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,JKe=/^:\s*/,ZKe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,eXe=/^[;\s]*/,tXe=/^\s+|\s+$/g,nXe=`
`,Roe="/",Noe="*",Cv="",rXe="comment",iXe="declaration",sXe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(KKe);m&&(n+=m.length);var g=p.lastIndexOf(nXe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(XKe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Roe!=e.charAt(0)||Noe!=e.charAt(1))){for(var m=2;Cv!=e.charAt(m)&&(Noe!=e.charAt(m)||Roe!=e.charAt(m+1));)++m;if(m+=2,Cv===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:rXe,comment:g})}}function d(){var p=s(),m=u(QKe);if(m){if(f(),!u(JKe))return a("property missing ':'");var g=u(ZKe),y=p({type:iXe,property:Poe(m[0].replace(koe,Cv)),value:g?Poe(g[0].replace(koe,Cv)):Cv});return u(eXe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Poe(e){return e?e.replace(tXe,Cv):Cv}var oXe=to&&to.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(H_e,"__esModule",{value:!0});var aXe=oXe(sXe);function uXe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,aXe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Doe=H_e.default=uXe;const lXe=Doe.default||Doe,IL=q_e("end"),Fh=q_e("start");function q_e(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function cXe(e){const t=Fh(e),n=IL(e);if(t&&n)return{start:t,end:n}}function WA(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Ooe(e.position):"start"in e||"end"in e?Ooe(e):"line"in e||"column"in e?NU(e):""}function NU(e){return $oe(e&&e.line)+":"+$oe(e&&e.column)}function Ooe(e){return NU(e&&e.start)+"-"+NU(e&&e.end)}function $oe(e){return e&&typeof e=="number"?e:1}class xa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=WA(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}xa.prototype.file="";xa.prototype.name="";xa.prototype.reason="";xa.prototype.message="";xa.prototype.stack="";xa.prototype.column=void 0;xa.prototype.line=void 0;xa.prototype.ancestors=void 0;xa.prototype.cause=void 0;xa.prototype.fatal=void 0;xa.prototype.place=void 0;xa.prototype.ruleId=void 0;xa.prototype.source=void 0;const QG={}.hasOwnProperty,fXe=new Map,dXe=/[A-Z]/g,hXe=/-([a-z])/g,pXe=new Set(["table","tbody","thead","tfoot","tr"]),mXe=new Set(["td","th"]),W_e="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function gXe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=SXe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=xXe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?xy:HI,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=G_e(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function G_e(e,t,n){if(t.type==="element")return yXe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return vXe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return _Xe(e,t,n);if(t.type==="mdxjsEsm")return bXe(e,t);if(t.type==="root")return wXe(e,t,n);if(t.type==="text")return EXe(e,t)}function yXe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=xy,e.schema=i),e.ancestors.push(t);const s=K_e(e,t.tagName,!1),o=TXe(e,t);let a=ZG(e,t);return pXe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!jKe(u):!0})),Y_e(e,o,s,t),JG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function vXe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}a2(e,t.position)}function bXe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);a2(e,t.position)}function _Xe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=xy,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:K_e(e,t.name,!0),o=AXe(e,t),a=ZG(e,t);return Y_e(e,o,s,t),JG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function wXe(e,t,n){const r={};return JG(r,ZG(e,t)),e.create(t,e.Fragment,r,n)}function EXe(e,t){return t.value}function Y_e(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function JG(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function xXe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function SXe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Fh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function TXe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&QG.call(t.properties,i)){const s=CXe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&mXe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function AXe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else a2(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else a2(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function ZG(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:fXe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=G_e(e,s,o);a!==void 0&&n.push(a)}return n}function CXe(e,t,n){const r=CL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?O_e(n):V_e(n)),r.property==="style"){let i=typeof n=="object"?n:IXe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=kXe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?YKe[r.property]||r.property:r.attribute,n]}}function IXe(e,t){const n={};try{lXe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new xa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=W_e+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(hXe,NXe)),n[o]=s}}function K_e(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Soe(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Soe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return QG.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);a2(e)}function a2(e,t){const n=new xa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=W_e+"#cannot-handle-mdx-estrees-without-createevaluater",n}function kXe(e){const t={};let n;for(n in e)QG.call(e,n)&&(t[RXe(n)]=e[n]);return t}function RXe(e){let t=e.replace(dXe,PXe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function NXe(e,t){return t.toUpperCase()}function PXe(e){return"-"+e.toLowerCase()}const m8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},DXe={};function OXe(e,t){const n=DXe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return X_e(e,r,i)}function X_e(e,t,n){if($Xe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Moe(e.children,t,n)}return Array.isArray(e)?Moe(e,t,n):""}function Moe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=X_e(e[i],t,n);return r.join("")}function $Xe(e){return!!(e&&typeof e=="object")}const Loe=document.createElement("i");function eY(e){const t="&"+e+";";Loe.innerHTML=t;const n=Loe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function pm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function lc(e,t){return e.length>0?(pm(e,e.length,0,t),e):t}const Foe={}.hasOwnProperty;function MXe(e){const t={};let n=-1;for(;++n<e.length;)LXe(t,e[n]);return t}function LXe(e,t){let n;for(n in t){const i=(Foe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Foe.call(i,o)||(i[o]=[]);const a=s[o];FXe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function FXe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);pm(e,0,0,r)}function Q_e(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function kw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Pd=Sy(/[A-Za-z]/),_l=Sy(/[\dA-Za-z]/),jXe=Sy(/[#-'*+\--9=?A-Z^-~]/);function PU(e){return e!==null&&(e<32||e===127)}const DU=Sy(/\d/),BXe=Sy(/[\dA-Fa-f]/),UXe=Sy(/[!-/:-@[-`{-~]/);function Zt(e){return e!==null&&e<-2}function ju(e){return e!==null&&(e<0||e===32)}function vr(e){return e===-2||e===-1||e===32}const zXe=Sy(new RegExp("\\p{P}|\\p{S}","u")),VXe=Sy(/\s/);function Sy(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function jx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&_l(e.charCodeAt(n+1))&&_l(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ti(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return vr(u)?(e.enter(n),a(u)):t(u)}function a(u){return vr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const HXe={tokenize:qXe};function qXe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ti(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Zt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const WXe={tokenize:GXe},joe={tokenize:YXe};function GXe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let T=w;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},S),T++;return pm(t.events,E+1,0,t.events.slice(w)),t.events.length=T,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(joe,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(joe,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Zt(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const T=t.events.length;let A=T,C,I;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(C){I=t.events[A][1].end;break}C=!0}for(y(r),S=T;S<t.events.length;)t.events[S][1].end=Object.assign({},I),S++;pm(t.events,A+1,0,t.events.slice(T)),t.events.length=S}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function YXe(e,t,n){return ti(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Boe(e){if(e===null||ju(e)||VXe(e))return 1;if(zXe(e))return 2}function tY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const OU={name:"attention",tokenize:XXe,resolveAll:KXe};function KXe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Uoe(f,-u),Uoe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=lc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=lc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=lc(l,tY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=lc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=lc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,pm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function XXe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Boe(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Boe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Uoe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const QXe={name:"autolink",tokenize:JXe};function JXe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Pd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||_l(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||_l(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||PU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):jXe(h)?(e.consume(h),l):n(h)}function c(h){return _l(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||_l(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const kL={tokenize:ZXe,partial:!0};function ZXe(e,t,n){return r;function r(s){return vr(s)?ti(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Zt(s)?t(s):n(s)}}const J_e={name:"blockQuote",tokenize:eQe,continuation:{tokenize:tQe},exit:nQe};function eQe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return vr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function tQe(e,t,n){const r=this;return i;function i(o){return vr(o)?ti(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(J_e,t,n)(o)}}function nQe(e){e.exit("blockQuote")}const Z_e={name:"characterEscape",tokenize:rQe};function rQe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return UXe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const ewe={name:"characterReference",tokenize:iQe};function iQe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=_l,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=BXe,c):(e.enter("characterReferenceValue"),s=7,o=DU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===_l&&!eY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const zoe={tokenize:oQe,partial:!0},Voe={name:"codeFenced",tokenize:sQe,concrete:!0};function sQe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),vr(S)?ti(e,f,"whitespace")(S):f(S))}function f(S){return S===null||Zt(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(zoe,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||Zt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):vr(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ti(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||Zt(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||Zt(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&vr(S)?ti(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||Zt(S)?e.check(zoe,m,w)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||Zt(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function w(S){return e.exit("codeFenced"),t(S)}function E(S,T,A){let C=0;return I;function I(F){return S.enter("lineEnding"),S.consume(F),S.exit("lineEnding"),R}function R(F){return S.enter("codeFencedFence"),vr(F)?ti(S,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(S.enter("codeFencedFenceSequence"),P(F)):A(F)}function P(F){return F===a?(C++,S.consume(F),P):C>=o?(S.exit("codeFencedFenceSequence"),vr(F)?ti(S,$,"whitespace")(F):$(F)):A(F)}function $(F){return F===null||Zt(F)?(S.exit("codeFencedFence"),T(F)):A(F)}}}function oQe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const g8={name:"codeIndented",tokenize:uQe},aQe={tokenize:lQe,partial:!0};function uQe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ti(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Zt(l)?e.attempt(aQe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Zt(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function lQe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ti(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Zt(o)?i(o):n(o)}}const cQe={name:"codeText",tokenize:hQe,resolve:fQe,previous:dQe};function fQe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function dQe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function hQe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Zt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Zt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class pQe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&eT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),eT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),eT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);eT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);eT(this.left,n.reverse())}}}function eT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function twe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new pQe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,mQe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return pm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function mQe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const gQe={tokenize:bQe,resolve:vQe},yQe={tokenize:_Qe,partial:!0};function vQe(e){return twe(e),e}function bQe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Zt(a)?e.check(yQe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function _Qe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ti(e,s,"linePrefix")}function s(o){if(o===null||Zt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function nwe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||PU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Zt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||ju(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||PU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function rwe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Zt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Zt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!vr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function iwe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Zt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ti(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Zt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function GA(e,t){let n;return r;function r(i){return Zt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):vr(i)?ti(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const wQe={name:"definition",tokenize:xQe},EQe={tokenize:SQe,partial:!0};function xQe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return rwe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=kw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return ju(h)?GA(e,l)(h):l(h)}function l(h){return nwe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(EQe,f,f)(h)}function f(h){return vr(h)?ti(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Zt(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function SQe(e,t,n){return r;function r(a){return ju(a)?GA(e,i)(a):n(a)}function i(a){return iwe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return vr(a)?ti(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Zt(a)?t(a):n(a)}}const TQe={name:"hardBreakEscape",tokenize:AQe};function AQe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Zt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const CQe={name:"headingAtx",tokenize:kQe,resolve:IQe};function IQe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},pm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function kQe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||ju(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Zt(c)?(e.exit("atxHeading"),t(c)):vr(c)?ti(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||ju(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const RQe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Hoe=["pre","script","style","textarea"],NQe={name:"htmlFlow",tokenize:$Qe,resolveTo:OQe,concrete:!0},PQe={tokenize:LQe,partial:!0},DQe={tokenize:MQe,partial:!0};function OQe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function $Qe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:D):Pd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):Pd(j)?(e.consume(j),i=4,r.interrupt?t:D):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:D):n(j)}function p(j){const H="CDATA[";return j===H.charCodeAt(a++)?(e.consume(j),a===H.length?r.interrupt?t:O:p):n(j)}function m(j){return Pd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||ju(j)){const H=j===47,G=o.toLowerCase();return!H&&!s&&Hoe.includes(G)?(i=1,r.interrupt?t(j):O(j)):RQe.includes(o.toLowerCase())?(i=6,H?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||_l(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return vr(j)?(e.consume(j),v):I(j)}function b(j){return j===47?(e.consume(j),I):j===58||j===95||Pd(j)?(e.consume(j),w):vr(j)?(e.consume(j),b):I(j)}function w(j){return j===45||j===46||j===58||j===95||_l(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),S):vr(j)?(e.consume(j),E):b(j)}function S(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,T):vr(j)?(e.consume(j),S):A(j)}function T(j){return j===u?(e.consume(j),u=null,C):j===null||Zt(j)?n(j):(e.consume(j),T)}function A(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||ju(j)?E(j):(e.consume(j),A)}function C(j){return j===47||j===62||vr(j)?b(j):n(j)}function I(j){return j===62?(e.consume(j),R):n(j)}function R(j){return j===null||Zt(j)?O(j):vr(j)?(e.consume(j),R):n(j)}function O(j){return j===45&&i===2?(e.consume(j),L):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),U):j===63&&i===3?(e.consume(j),D):j===93&&i===5?(e.consume(j),q):Zt(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(PQe,W,P)(j)):j===null||Zt(j)?(e.exit("htmlFlowData"),P(j)):(e.consume(j),O)}function P(j){return e.check(DQe,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||Zt(j)?P(j):(e.enter("htmlFlowData"),O(j))}function L(j){return j===45?(e.consume(j),D):O(j)}function B(j){return j===47?(e.consume(j),o="",z):O(j)}function z(j){if(j===62){const H=o.toLowerCase();return Hoe.includes(H)?(e.consume(j),U):O(j)}return Pd(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),z):O(j)}function q(j){return j===93?(e.consume(j),D):O(j)}function D(j){return j===62?(e.consume(j),U):j===45&&i===2?(e.consume(j),D):O(j)}function U(j){return j===null||Zt(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),U)}function W(j){return e.exit("htmlFlow"),t(j)}}function MQe(e,t,n){const r=this;return i;function i(o){return Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function LQe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(kL,t,n)}}const FQe={name:"htmlText",tokenize:jQe};function jQe(e,t,n){const r=this;let i,s,o;return a;function a(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),u}function u(D){return D===33?(e.consume(D),l):D===47?(e.consume(D),E):D===63?(e.consume(D),b):Pd(D)?(e.consume(D),A):n(D)}function l(D){return D===45?(e.consume(D),c):D===91?(e.consume(D),s=0,p):Pd(D)?(e.consume(D),v):n(D)}function c(D){return D===45?(e.consume(D),h):n(D)}function f(D){return D===null?n(D):D===45?(e.consume(D),d):Zt(D)?(o=f,B(D)):(e.consume(D),f)}function d(D){return D===45?(e.consume(D),h):f(D)}function h(D){return D===62?L(D):D===45?d(D):f(D)}function p(D){const U="CDATA[";return D===U.charCodeAt(s++)?(e.consume(D),s===U.length?m:p):n(D)}function m(D){return D===null?n(D):D===93?(e.consume(D),g):Zt(D)?(o=m,B(D)):(e.consume(D),m)}function g(D){return D===93?(e.consume(D),y):m(D)}function y(D){return D===62?L(D):D===93?(e.consume(D),y):m(D)}function v(D){return D===null||D===62?L(D):Zt(D)?(o=v,B(D)):(e.consume(D),v)}function b(D){return D===null?n(D):D===63?(e.consume(D),w):Zt(D)?(o=b,B(D)):(e.consume(D),b)}function w(D){return D===62?L(D):b(D)}function E(D){return Pd(D)?(e.consume(D),S):n(D)}function S(D){return D===45||_l(D)?(e.consume(D),S):T(D)}function T(D){return Zt(D)?(o=T,B(D)):vr(D)?(e.consume(D),T):L(D)}function A(D){return D===45||_l(D)?(e.consume(D),A):D===47||D===62||ju(D)?C(D):n(D)}function C(D){return D===47?(e.consume(D),L):D===58||D===95||Pd(D)?(e.consume(D),I):Zt(D)?(o=C,B(D)):vr(D)?(e.consume(D),C):L(D)}function I(D){return D===45||D===46||D===58||D===95||_l(D)?(e.consume(D),I):R(D)}function R(D){return D===61?(e.consume(D),O):Zt(D)?(o=R,B(D)):vr(D)?(e.consume(D),R):C(D)}function O(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,P):Zt(D)?(o=O,B(D)):vr(D)?(e.consume(D),O):(e.consume(D),$)}function P(D){return D===i?(e.consume(D),i=void 0,F):D===null?n(D):Zt(D)?(o=P,B(D)):(e.consume(D),P)}function $(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||ju(D)?C(D):(e.consume(D),$)}function F(D){return D===47||D===62||ju(D)?C(D):n(D)}function L(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}function B(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),z}function z(D){return vr(D)?ti(e,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):q(D)}function q(D){return e.enter("htmlTextData"),o(D)}}const nY={name:"labelEnd",tokenize:qQe,resolveTo:HQe,resolveAll:VQe},BQe={tokenize:WQe},UQe={tokenize:GQe},zQe={tokenize:YQe};function VQe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function HQe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=lc(a,e.slice(s+1,s+r+3)),a=lc(a,[["enter",c,t]]),a=lc(a,tY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=lc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=lc(a,e.slice(o+1)),a=lc(a,[["exit",u,t]]),pm(e,s,e.length,a),e}function qQe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(kw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(BQe,c,o?c:f)(d):d===91?e.attempt(UQe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(zQe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function WQe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return ju(f)?GA(e,s)(f):s(f)}function s(f){return f===41?c(f):nwe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return ju(f)?GA(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?iwe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return ju(f)?GA(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function GQe(e,t,n){const r=this;return i;function i(a){return rwe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(kw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function YQe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const KQe={name:"labelStartImage",tokenize:XQe,resolveAll:nY.resolveAll};function XQe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const QQe={name:"labelStartLink",tokenize:JQe,resolveAll:nY.resolveAll};function JQe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const y8={name:"lineEnding",tokenize:ZQe};function ZQe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ti(e,t,"linePrefix")}}const FP={name:"thematicBreak",tokenize:eJe};function eJe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Zt(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),vr(l)?ti(e,a,"whitespace")(l):a(l))}}const hu={name:"list",tokenize:rJe,continuation:{tokenize:iJe},exit:oJe},tJe={tokenize:aJe,partial:!0},nJe={tokenize:sJe,partial:!0};function rJe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:DU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(FP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return DU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(kL,r.interrupt?n:c,e.attempt(tJe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return vr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function iJe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(kL,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ti(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!vr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(nJe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ti(e,e.attempt(hu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function sJe(e,t,n){const r=this;return ti(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function oJe(e){e.exit(this.containerState.type)}function aJe(e,t,n){const r=this;return ti(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!vr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const qoe={name:"setextUnderline",tokenize:lJe,resolveTo:uJe};function uJe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function lJe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),vr(l)?ti(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Zt(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const cJe={tokenize:fJe};function fJe(e){const t=this,n=e.attempt(kL,r,e.attempt(this.parser.constructs.flowInitial,i,ti(e,e.attempt(this.parser.constructs.flow,i,e.attempt(gQe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const dJe={resolveAll:owe()},hJe=swe("string"),pJe=swe("text");function swe(e){return{tokenize:t,resolveAll:owe(e==="text"?mJe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function owe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function mJe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function gJe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:T(E),check:T(S),interrupt:T(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(R){return o=lc(o,R),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=tY(s,l.events,l),l.events)}function d(R,O){return vJe(h(R),O)}function h(R){return yJe(o,R)}function p(){const{line:R,column:O,offset:P,_index:$,_bufferIndex:F}=r;return{line:R,column:O,offset:P,_index:$,_bufferIndex:F}}function m(R){i[R.line]=R.column,I()}function g(){let R;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(R=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===R&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(R){c=c(R)}function v(R){Zt(R)?(r.line++,r.column=1,r.offset+=R===-3?2:1,I()):R!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=R}function b(R,O){const P=O||{};return P.type=R,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(R){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function E(R,O){A(R,O.from)}function S(R,O){O.restore()}function T(R,O){return P;function P($,F,L){let B,z,q,D;return Array.isArray($)?W($):"tokenize"in $?W([$]):U($);function U(ne){return ce;function ce(de){const he=de!==null&&ne[de],ye=de!==null&&ne.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return W(Ie)(de)}}function W(ne){return B=ne,z=0,ne.length===0?L:j(ne[z])}function j(ne){return ce;function ce(de){return D=C(),q=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(O?Object.assign(Object.create(l),O):l,u,H,G)(de)}}function H(ne){return R(q,D),F}function G(ne){return D.restore(),++z<B.length?j(B[z]):L}}}function A(R,O){R.resolveAll&&!s.includes(R)&&s.push(R),R.resolve&&pm(l.events,O,l.events.length-O,R.resolve(l.events.slice(O),l)),R.resolveTo&&(l.events=R.resolveTo(l.events,l))}function C(){const R=p(),O=l.previous,P=l.currentConstruct,$=l.events.length,F=Array.from(a);return{restore:L,from:$};function L(){r=R,l.previous=O,l.currentConstruct=P,l.events.length=$,a=F,I()}}function I(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function yJe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function vJe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const bJe={42:hu,43:hu,45:hu,48:hu,49:hu,50:hu,51:hu,52:hu,53:hu,54:hu,55:hu,56:hu,57:hu,62:J_e},_Je={91:wQe},wJe={[-2]:g8,[-1]:g8,32:g8},EJe={35:CQe,42:FP,45:[qoe,FP],60:NQe,61:qoe,95:FP,96:Voe,126:Voe},xJe={38:ewe,92:Z_e},SJe={[-5]:y8,[-4]:y8,[-3]:y8,33:KQe,38:ewe,42:OU,60:[QXe,FQe],91:QQe,92:[TQe,Z_e],93:nY,95:OU,96:cQe},TJe={null:[OU,dJe]},AJe={null:[42,95]},CJe={null:[]},IJe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:AJe,contentInitial:_Je,disable:CJe,document:bJe,flow:EJe,flowInitial:wJe,insideSpan:TJe,string:xJe,text:SJe},Symbol.toStringTag,{value:"Module"}));function kJe(e){const n=MXe([IJe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(HXe),document:i(WXe),flow:i(cJe),string:i(hJe),text:i(pJe)};return r;function i(s){return o;function o(a){return gJe(r,s,a)}}}function RJe(e){for(;!twe(e););return e}const Woe=/[\0\t\n\r]/g;function NJe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Woe.lastIndex=f,l=Woe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const PJe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function DJe(e){return e.replace(PJe,OJe)}function OJe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Q_e(n.slice(s?2:1),s?16:10)}return eY(n)||e}const awe={}.hasOwnProperty;function $Je(e,t,n){return typeof t!="string"&&(n=t,t=void 0),MJe(n)(RJe(kJe(n).document().write(NJe()(e,t,!0))))}function MJe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ze),autolinkProtocol:C,autolinkEmail:C,atxHeading:s(gt),blockQuote:s(ye),characterEscape:C,characterReference:C,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(ve,o),codeTextData:C,data:C,codeFlowValue:C,definition:s(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(rt),hardBreakTrailing:s(rt),htmlFlow:s(be,o),htmlFlowData:C,htmlText:s(be,o),htmlTextData:C,image:s(ke),label:o,link:s(ze),listItem:s(Dt),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(We),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(gt),strong:s(me),thematicBreak:s(vt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:he,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:I,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:I,codeIndented:u(y),codeText:u(F),codeTextData:I,data:I,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(P),htmlFlowData:I,htmlText:u($),htmlTextData:I,image:u(B),label:q,labelText:z,lineEnding:R,link:u(L),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:H,resourceDestinationString:D,resourceTitleString:U,resource:W,setextHeading:u(A),setextHeadingLineSequence:T,setextHeadingText:S,strong:u(),thematicBreak:u()}};uwe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(pe){let Ce={type:"root",children:[]};const He={stack:[Ce],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<pe.length;)if(pe[_t][1].type==="listOrdered"||pe[_t][1].type==="listUnordered")if(pe[_t][0]==="enter")ut.push(_t);else{const Mn=ut.pop();_t=i(pe,Mn,_t)}for(_t=-1;++_t<pe.length;){const Mn=t[pe[_t][0]];awe.call(Mn,pe[_t][1].type)&&Mn[pe[_t][1].type].call(Object.assign({sliceSerialize:pe[_t][2].sliceSerialize},He),pe[_t][1])}if(He.tokenStack.length>0){const Mn=He.tokenStack[He.tokenStack.length-1];(Mn[1]||Goe).call(He,void 0,Mn[0])}for(Ce.position={start:cg(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:cg(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ce=t.transforms[_t](Ce)||Ce;return Ce}function i(pe,Ce,He){let ut=Ce-1,_t=-1,Mn=!1,Sr,Ln,lr,pn;for(;++ut<=He;){const Sn=pe[ut];switch(Sn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Sn[0]==="enter"?_t++:_t--,pn=void 0;break}case"lineEndingBlank":{Sn[0]==="enter"&&(Sr&&!pn&&!_t&&!lr&&(lr=ut),pn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:pn=void 0}if(!_t&&Sn[0]==="enter"&&Sn[1].type==="listItemPrefix"||_t===-1&&Sn[0]==="exit"&&(Sn[1].type==="listUnordered"||Sn[1].type==="listOrdered")){if(Sr){let tr=ut;for(Ln=void 0;tr--;){const nr=pe[tr];if(nr[1].type==="lineEnding"||nr[1].type==="lineEndingBlank"){if(nr[0]==="exit")continue;Ln&&(pe[Ln][1].type="lineEndingBlank",Mn=!0),nr[1].type="lineEnding",Ln=tr}else if(!(nr[1].type==="linePrefix"||nr[1].type==="blockQuotePrefix"||nr[1].type==="blockQuotePrefixWhitespace"||nr[1].type==="blockQuoteMarker"||nr[1].type==="listItemIndent"))break}lr&&(!Ln||lr<Ln)&&(Sr._spread=!0),Sr.end=Object.assign({},Ln?pe[Ln][1].start:Sn[1].end),pe.splice(Ln||ut,0,["exit",Sr,Sn[2]]),ut++,He++}if(Sn[1].type==="listItemPrefix"){const tr={type:"listItem",_spread:!1,start:Object.assign({},Sn[1].start),end:void 0};Sr=tr,pe.splice(ut,0,["enter",tr,Sn[2]]),ut++,He++,lr=void 0,pn=!0}}}return pe[Ce][1]._spread=Mn,He}function s(pe,Ce){return He;function He(ut){a.call(this,pe(ut),ut),Ce&&Ce.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(pe,Ce,He){this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([Ce,He]),pe.position={start:cg(Ce.start),end:void 0}}function u(pe){return Ce;function Ce(He){pe&&pe.call(this,He),l.call(this,He)}}function l(pe,Ce){const He=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==pe.type&&(Ce?Ce.call(this,pe,ut[0]):(ut[1]||Goe).call(this,pe,ut[0]));else throw new Error("Cannot close `"+pe.type+"` ("+WA({start:pe.start,end:pe.end})+"): its not open");He.position.end=cg(pe.end)}function c(){return OXe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(pe){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(pe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=pe}function p(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=pe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/(\r?\n|\r)$/g,"")}function v(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=kw(this.sliceSerialize(pe)).toLowerCase()}function b(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function w(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function E(pe){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const He=this.sliceSerialize(pe).length;Ce.depth=He}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function T(pe){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(pe).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function C(pe){const He=this.stack[this.stack.length-1].children;let ut=He[He.length-1];(!ut||ut.type!=="text")&&(ut=dt(),ut.position={start:cg(pe.start),end:void 0},He.push(ut)),this.stack.push(ut)}function I(pe){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(pe),Ce.position.end=cg(pe.end)}function R(pe){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=Ce.children[Ce.children.length-1];He.position.end=cg(pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ce.type)&&(C.call(this,pe),I.call(this,pe))}function O(){this.data.atHardBreak=!0}function P(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function $(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function F(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function L(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function B(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function z(pe){const Ce=this.sliceSerialize(pe),He=this.stack[this.stack.length-2];He.label=DJe(Ce),He.identifier=kw(Ce).toLowerCase()}function q(){const pe=this.stack[this.stack.length-1],Ce=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const ut=pe.children;He.children=ut}else He.alt=Ce}function D(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function U(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function H(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=kw(this.sliceSerialize(pe)).toLowerCase(),this.data.referenceType="full"}function G(pe){this.data.characterReferenceType=pe.type}function ne(pe){const Ce=this.sliceSerialize(pe),He=this.data.characterReferenceType;let ut;He?(ut=Q_e(Ce,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=eY(Ce);const _t=this.stack[this.stack.length-1];_t.value+=ut}function ce(pe){const Ce=this.stack.pop();Ce.position.end=cg(pe.end)}function de(pe){I.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(pe)}function he(pe){I.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(pe)}function ye(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function ve(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function gt(){return{type:"heading",depth:0,children:[]}}function rt(){return{type:"break"}}function be(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function ct(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function Dt(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function me(){return{type:"strong",children:[]}}function dt(){return{type:"text",value:""}}function vt(){return{type:"thematicBreak"}}}function cg(e){return{line:e.line,column:e.column,offset:e.offset}}function uwe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?uwe(e,r):LJe(e,r)}}function LJe(e,t){let n;for(n in t)if(awe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Goe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+WA({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+WA({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+WA({start:t.start,end:t.end})+") is still open")}function FJe(e){const t=this;t.parser=n;function n(r){return $Je(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function jJe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function BJe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function UJe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function zJe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function VJe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function HJe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=jx(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function qJe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function WJe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function lwe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function GJe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return lwe(e,t);const i={src:jx(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function YJe(e,t){const n={src:jx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function KJe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function XJe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return lwe(e,t);const i={href:jx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function QJe(e,t){const n={href:jx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function JJe(e,t,n){const r=e.all(t),i=n?ZJe(n):cwe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function ZJe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=cwe(n[r])}return t}function cwe(e){const t=e.spread;return t??e.children.length>1}function eZe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function tZe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function nZe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function rZe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function iZe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Fh(t.children[1]),u=IL(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function sZe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function oZe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Yoe=9,Koe=32;function aZe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Xoe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Xoe(t.slice(i),i>0,!1)),s.join("")}function Xoe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Yoe||s===Koe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Yoe||s===Koe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function uZe(e,t){const n={type:"text",value:aZe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function lZe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const cZe={blockquote:jJe,break:BJe,code:UJe,delete:zJe,emphasis:VJe,footnoteReference:HJe,heading:qJe,html:WJe,imageReference:GJe,image:YJe,inlineCode:KJe,linkReference:XJe,link:QJe,listItem:JJe,list:eZe,paragraph:tZe,root:nZe,strong:rZe,table:iZe,tableCell:oZe,tableRow:sZe,text:uZe,thematicBreak:lZe,toml:tN,yaml:tN,definition:tN,footnoteDefinition:tN};function tN(){}const fwe=-1,RL=0,TO=1,AO=2,rY=3,iY=4,sY=5,oY=6,dwe=7,hwe=8,Qoe=typeof self=="object"?self:globalThis,fZe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case RL:case fwe:return n(o,i);case TO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case AO:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case rY:return n(new Date(o),i);case iY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case sY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case oY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case dwe:{const{name:a,message:u}=o;return n(new Qoe[a](u),i)}case hwe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Qoe[s](o),i)};return r},Joe=e=>fZe(new Map,e)(0),c_="",{toString:dZe}={},{keys:hZe}=Object,tT=e=>{const t=typeof e;if(t!=="object"||!e)return[RL,t];const n=dZe.call(e).slice(8,-1);switch(n){case"Array":return[TO,c_];case"Object":return[AO,c_];case"Date":return[rY,c_];case"RegExp":return[iY,c_];case"Map":return[sY,c_];case"Set":return[oY,c_]}return n.includes("Array")?[TO,n]:n.includes("Error")?[dwe,n]:[AO,n]},nN=([e,t])=>e===RL&&(t==="function"||t==="symbol"),pZe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=tT(o);switch(a){case RL:{let c=o;switch(u){case"bigint":a=hwe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([fwe],o)}return i([a,c],o)}case TO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case AO:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of hZe(o))(e||!nN(tT(o[d])))&&c.push([s(d),s(o[d])]);return f}case rY:return i([a,o.toISOString()],o);case iY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case sY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(nN(tT(d))||nN(tT(h))))&&c.push([s(d),s(h)]);return f}case oY:{const c=[],f=i([a,c],o);for(const d of o)(e||!nN(tT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Zoe=(e,{json:t,lossy:n}={})=>{const r=[];return pZe(!(t||n),!!t,new Map,r)(e),r},mE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Joe(Zoe(e,t)):structuredClone(e):(e,t)=>Joe(Zoe(e,t));function mZe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function gZe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function yZe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||mZe,r=e.options.footnoteBackLabel||gZe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=jx(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...mE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const pwe=function(e){if(e==null)return wZe;if(typeof e=="function")return NL(e);if(typeof e=="object")return Array.isArray(e)?vZe(e):bZe(e);if(typeof e=="string")return _Ze(e);throw new Error("Expected function, string, or object as test")};function vZe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=pwe(e[n]);return NL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function bZe(e){const t=e;return NL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function _Ze(e){return NL(t);function t(n){return n&&n.type===e}}function NL(e){return t;function t(n,r,i){return!!(EZe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function wZe(){return!0}function EZe(e){return e!==null&&typeof e=="object"&&"type"in e}const mwe=[],xZe=!0,eae=!1,SZe="skip";function TZe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=pwe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=mwe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=AZe(n(u,c)),h[0]===eae))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==SZe)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===eae)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function AZe(e){return Array.isArray(e)?e:typeof e=="number"?[xZe,e]:e==null?mwe:[e]}function aY(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),TZe(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const $U={}.hasOwnProperty,CZe={};function IZe(e,t){const n=t||CZe,r=new Map,i=new Map,s=new Map,o={...cZe,...n.handlers},a={all:l,applyData:RZe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:kZe,wrap:PZe};return aY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if($U.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=mE(g);return y.children=a.all(c),y}return mE(c)}return(a.options.unknownHandler||NZe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=tae(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=tae(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function kZe(e,t){e.position&&(t.position=cXe(e))}function RZe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,mE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function NZe(e,t){const n=t.data||{},r="value"in t&&!($U.call(n,"hProperties")||$U.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function PZe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function tae(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function nae(e,t){const n=IZe(e,t),r=n.one(e,void 0),i=yZe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function DZe(e,t){return e&&"run"in e?async function(n,r){const i=nae(n,{file:r,...t});await e.run(i,r)}:function(n,r){return nae(n,{file:r,...t||e})}}function rae(e){if(e)throw e}var jP=Object.prototype.hasOwnProperty,gwe=Object.prototype.toString,iae=Object.defineProperty,sae=Object.getOwnPropertyDescriptor,oae=function(t){return typeof Array.isArray=="function"?Array.isArray(t):gwe.call(t)==="[object Array]"},aae=function(t){if(!t||gwe.call(t)!=="[object Object]")return!1;var n=jP.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&jP.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||jP.call(t,i)},uae=function(t,n){iae&&n.name==="__proto__"?iae(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},lae=function(t,n){if(n==="__proto__")if(jP.call(t,n)){if(sae)return sae(t,n).value}else return;return t[n]},OZe=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=lae(a,n),i=lae(t,n),a!==i&&(c&&i&&(aae(i)||(s=oae(i)))?(s?(s=!1,o=r&&oae(r)?r:[]):o=r&&aae(r)?r:{},uae(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&uae(a,{name:n,newValue:i}));return a};const v8=Hl(OZe);function MU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function $Ze(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?MZe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function MZe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Ed={basename:LZe,dirname:FZe,extname:jZe,join:BZe,sep:"/"};function LZe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');qI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function FZe(e){if(qI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function jZe(e){qI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function BZe(...e){let t=-1,n;for(;++t<e.length;)qI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":UZe(n)}function UZe(e){qI(e);const t=e.codePointAt(0)===47;let n=zZe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function zZe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function qI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const VZe={cwd:HZe};function HZe(){return"/"}function LU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function qZe(e){if(typeof e=="string")e=new URL(e);else if(!LU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return WZe(e)}function WZe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const b8=["history","path","basename","stem","extname","dirname"];class ywe{constructor(t){let n;t?LU(t)?n={path:t}:typeof t=="string"||GZe(t)?n={value:t}:n=t:n={},this.cwd=VZe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<b8.length;){const s=b8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)b8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Ed.basename(this.path):void 0}set basename(t){w8(t,"basename"),_8(t,"basename"),this.path=Ed.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Ed.dirname(this.path):void 0}set dirname(t){cae(this.basename,"dirname"),this.path=Ed.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Ed.extname(this.path):void 0}set extname(t){if(_8(t,"extname"),cae(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Ed.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){LU(t)&&(t=qZe(t)),w8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Ed.basename(this.path,this.extname):void 0}set stem(t){w8(t,"stem"),_8(t,"stem"),this.path=Ed.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new xa(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function _8(e,t){if(e&&e.includes(Ed.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Ed.sep+"`")}function w8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function cae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function GZe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const YZe=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},KZe={}.hasOwnProperty;class uY extends YZe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=$Ze()}copy(){const t=new uY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(v8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(S8("data",this.frozen),this.namespace[t]=n,this):KZe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(S8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=rN(t),r=this.parser||this.Parser;return E8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),E8("process",this.parser||this.Parser),x8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=rN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);JZe(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),E8("processSync",this.parser||this.Parser),x8("processSync",this.compiler||this.Compiler),this.process(t,i),dae("processSync","process",n),r;function i(s,o){n=!0,rae(s),r=o}}run(t,n,r){fae(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=rN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),dae("runSync","run",r),i;function s(o,a){rae(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=rN(n),i=this.compiler||this.Compiler;return x8("stringify",i),fae(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(S8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=v8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];MU(m)&&MU(h)&&(h=v8(!0,m,h)),r[d]=[l,h,...p]}}}}const XZe=new uY().freeze();function E8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function x8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function S8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function fae(e){if(!MU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function dae(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function rN(e){return QZe(e)?e:new ywe(e)}function QZe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function JZe(e){return typeof e=="string"||ZZe(e)}function ZZe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const eet="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",hae=[],pae={allowDangerousHtml:!0},tet=/^(https?|ircs?|mailto|xmpp)$/i,net=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function ret(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||hae,u=e.remarkPlugins||hae,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...pae}:pae,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||iet,h=XZe().use(FJe).use(u).use(DZe,l).use(a),p=new ywe;typeof r=="string"&&(p.value=r);for(const v of net)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+eet+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),aY(g,y),gXe(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in m8)if(Object.hasOwn(m8,E)&&Object.hasOwn(v.properties,E)){const S=v.properties[E],T=m8[E];(T===null||T.includes(v.tagName))&&(v.properties[E]=d(String(S||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function iet(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||tet.test(e.slice(0,t))?e:""}const mae=/[#.]/g;function set(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){mae.lastIndex=i;const a=mae.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const oet=new Set(["button","menu","reset","submit"]),FU={}.hasOwnProperty;function vwe(e,t,n){const r=n&&fet(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=set(s,t),l.tagName=l.tagName.toLowerCase(),r&&FU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),aet(o,l.tagName)){let c;for(c in o)FU.call(o,c)&&uet(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)jU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function aet(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?oet.has(e.type.toLowerCase()):!("value"in e)}function uet(e,t,n,r){const i=CL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Ioe(r):i.commaSeparated?o=xoe(r):i.commaOrSpaceSeparated?o=Ioe(xoe(r).join(" ")):o=gae(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?cet(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=gae(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function jU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)jU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?jU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function gae(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||o2(n)===o2(t)))return!0}return n}function cet(e){const t=[];let n;for(n in e)FU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function fet(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const det=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],het=vwe(HI,"div"),pet=vwe(xy,"g",det),T8=/\r?\n|\r/g;function met(e){const t=String(e),n=[];for(T8.lastIndex=0;T8.test(t);)n.push(T8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Hv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bwe={}.hasOwnProperty,get=Object.prototype;function yet(e,t){const n=t||{};return lY({file:n.file||void 0,location:!1,schema:n.space==="svg"?xy:HI,verbose:n.verbose||!1},e)}function lY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},BP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:_we(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=met(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},BP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},BP(e,r,n),n}default:return n=vet(e,t),n}}function _we(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=lY(e,t[n]);r.push(i)}return r}function vet(e,t){const n=e.schema;e.schema=t.namespaceURI===Hv.svg?xy:HI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;bwe.call(get,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?pet:het)(t.tagName,i,_we(e,t.childNodes));if(BP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&nw(u.startTag),c=u&&u.endTag&&nw(u.endTag),f=lY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function BP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=bet(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function bet(e,t,n){const r=nw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)bwe.call(n.attrs,o)&&(s[CL(e.schema,o).property]=nw(n.attrs[o]));n.startTag;const a=nw(n.startTag),u=n.endTag?nw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function nw(e){const t=yae({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=yae({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function yae(e){return e.line&&e.column?e:void 0}const vae={}.hasOwnProperty;function wwe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&vae.call(i,e)){const u=String(i[e]);o=vae.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const _et={},wet={}.hasOwnProperty,Ewe=wwe("type",{handlers:{root:xet,element:ket,text:Cet,comment:Iet,doctype:Aet}});function Eet(e,t){const r=(t||_et).space;return Ewe(e,r==="svg"?xy:HI)}function xet(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=cY(e.children,n,t),Bx(e,n),n}function Tet(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=cY(e.children,n,t),Bx(e,n),n}function Aet(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Bx(e,t),t}function Cet(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Bx(e,t),t}function Iet(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Bx(e,t),t}function ket(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=xy);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&wet.call(e.properties,s)){const u=Ret(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Hv[o],childNodes:[],parentNode:null};return a.childNodes=cY(e.children,a,r),Bx(e,a),e.tagName==="template"&&e.content&&(a.content=Tet(e.content,r)),a}function Ret(e,t,n){const r=CL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?O_e(n):V_e(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Hv[r.space]}return i}function cY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=Ewe(e[r],n);s.parentNode=t,i.push(s)}return i}function Bx(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Net=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Pet=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),mi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const fu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function xwe(e){return e>=55296&&e<=57343}function Det(e){return e>=56320&&e<=57343}function Oet(e,t){return(e-55296)*1024+9216+t}function Swe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Twe(e){return e>=64976&&e<=65007||Pet.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const $et=65536;class Met{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=$et,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Det(n))return this.pos++,this._addGap(),Oet(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,xwe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Swe(t)?this._err(Ne.controlCharacterInInputStream):Twe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Cn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Cn=Cn||(Cn={}));function Awe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const gg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Let=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var A8;const Fet=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),jet=(A8=String.fromCodePoint)!==null&&A8!==void 0?A8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Bet(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Fet.get(e))!==null&&t!==void 0?t:e}var Zs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Zs||(Zs={}));const Uet=32;var Wd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Wd||(Wd={}));function BU(e){return e>=Zs.ZERO&&e<=Zs.NINE}function zet(e){return e>=Zs.UPPER_A&&e<=Zs.UPPER_F||e>=Zs.LOWER_A&&e<=Zs.LOWER_F}function Vet(e){return e>=Zs.UPPER_A&&e<=Zs.UPPER_Z||e>=Zs.LOWER_A&&e<=Zs.LOWER_Z||BU(e)}function Het(e){return e===Zs.EQUALS||Vet(e)}var Ws;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ws||(Ws={}));var Iv;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Iv||(Iv={}));class qet{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ws.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Iv.Strict}startEntity(t){this.decodeMode=t,this.state=Ws.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ws.EntityStart:return t.charCodeAt(n)===Zs.NUM?(this.state=Ws.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ws.NamedEntity,this.stateNamedEntity(t,n));case Ws.NumericStart:return this.stateNumericStart(t,n);case Ws.NumericDecimal:return this.stateNumericDecimal(t,n);case Ws.NumericHex:return this.stateNumericHex(t,n);case Ws.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Uet)===Zs.LOWER_X?(this.state=Ws.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ws.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(BU(i)||zet(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(BU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Zs.SEMI)this.consumed+=1;else if(this.decodeMode===Iv.Strict)return 0;return this.emitCodePoint(Bet(this.result),this.consumed),this.errors&&(t!==Zs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Wd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=Iwe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Iv.Attribute&&(s===0||Het(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Wd.VALUE_LENGTH)>>14,s!==0){if(o===Zs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Iv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Wd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Wd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ws.NamedEntity:return this.result!==0&&(this.decodeMode!==Iv.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ws.NumericDecimal:return this.emitNumericEntity(0,2);case Ws.NumericHex:return this.emitNumericEntity(0,3);case Ws.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ws.EntityStart:return 0}}}function Cwe(e){let t="";const n=new qet(e,r=>t+=jet(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function Iwe(e,t,n,r){const i=(t&Wd.BRANCH_LENGTH)>>7,s=t&Wd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}Cwe(gg);Cwe(Let);var Fe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Fe=Fe||(Fe={}));var f0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(f0=f0||(f0={}));var hl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(hl=hl||(hl={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var k;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(k=k||(k={}));const Wet=new Map([[Ee.A,k.A],[Ee.ADDRESS,k.ADDRESS],[Ee.ANNOTATION_XML,k.ANNOTATION_XML],[Ee.APPLET,k.APPLET],[Ee.AREA,k.AREA],[Ee.ARTICLE,k.ARTICLE],[Ee.ASIDE,k.ASIDE],[Ee.B,k.B],[Ee.BASE,k.BASE],[Ee.BASEFONT,k.BASEFONT],[Ee.BGSOUND,k.BGSOUND],[Ee.BIG,k.BIG],[Ee.BLOCKQUOTE,k.BLOCKQUOTE],[Ee.BODY,k.BODY],[Ee.BR,k.BR],[Ee.BUTTON,k.BUTTON],[Ee.CAPTION,k.CAPTION],[Ee.CENTER,k.CENTER],[Ee.CODE,k.CODE],[Ee.COL,k.COL],[Ee.COLGROUP,k.COLGROUP],[Ee.DD,k.DD],[Ee.DESC,k.DESC],[Ee.DETAILS,k.DETAILS],[Ee.DIALOG,k.DIALOG],[Ee.DIR,k.DIR],[Ee.DIV,k.DIV],[Ee.DL,k.DL],[Ee.DT,k.DT],[Ee.EM,k.EM],[Ee.EMBED,k.EMBED],[Ee.FIELDSET,k.FIELDSET],[Ee.FIGCAPTION,k.FIGCAPTION],[Ee.FIGURE,k.FIGURE],[Ee.FONT,k.FONT],[Ee.FOOTER,k.FOOTER],[Ee.FOREIGN_OBJECT,k.FOREIGN_OBJECT],[Ee.FORM,k.FORM],[Ee.FRAME,k.FRAME],[Ee.FRAMESET,k.FRAMESET],[Ee.H1,k.H1],[Ee.H2,k.H2],[Ee.H3,k.H3],[Ee.H4,k.H4],[Ee.H5,k.H5],[Ee.H6,k.H6],[Ee.HEAD,k.HEAD],[Ee.HEADER,k.HEADER],[Ee.HGROUP,k.HGROUP],[Ee.HR,k.HR],[Ee.HTML,k.HTML],[Ee.I,k.I],[Ee.IMG,k.IMG],[Ee.IMAGE,k.IMAGE],[Ee.INPUT,k.INPUT],[Ee.IFRAME,k.IFRAME],[Ee.KEYGEN,k.KEYGEN],[Ee.LABEL,k.LABEL],[Ee.LI,k.LI],[Ee.LINK,k.LINK],[Ee.LISTING,k.LISTING],[Ee.MAIN,k.MAIN],[Ee.MALIGNMARK,k.MALIGNMARK],[Ee.MARQUEE,k.MARQUEE],[Ee.MATH,k.MATH],[Ee.MENU,k.MENU],[Ee.META,k.META],[Ee.MGLYPH,k.MGLYPH],[Ee.MI,k.MI],[Ee.MO,k.MO],[Ee.MN,k.MN],[Ee.MS,k.MS],[Ee.MTEXT,k.MTEXT],[Ee.NAV,k.NAV],[Ee.NOBR,k.NOBR],[Ee.NOFRAMES,k.NOFRAMES],[Ee.NOEMBED,k.NOEMBED],[Ee.NOSCRIPT,k.NOSCRIPT],[Ee.OBJECT,k.OBJECT],[Ee.OL,k.OL],[Ee.OPTGROUP,k.OPTGROUP],[Ee.OPTION,k.OPTION],[Ee.P,k.P],[Ee.PARAM,k.PARAM],[Ee.PLAINTEXT,k.PLAINTEXT],[Ee.PRE,k.PRE],[Ee.RB,k.RB],[Ee.RP,k.RP],[Ee.RT,k.RT],[Ee.RTC,k.RTC],[Ee.RUBY,k.RUBY],[Ee.S,k.S],[Ee.SCRIPT,k.SCRIPT],[Ee.SECTION,k.SECTION],[Ee.SELECT,k.SELECT],[Ee.SOURCE,k.SOURCE],[Ee.SMALL,k.SMALL],[Ee.SPAN,k.SPAN],[Ee.STRIKE,k.STRIKE],[Ee.STRONG,k.STRONG],[Ee.STYLE,k.STYLE],[Ee.SUB,k.SUB],[Ee.SUMMARY,k.SUMMARY],[Ee.SUP,k.SUP],[Ee.TABLE,k.TABLE],[Ee.TBODY,k.TBODY],[Ee.TEMPLATE,k.TEMPLATE],[Ee.TEXTAREA,k.TEXTAREA],[Ee.TFOOT,k.TFOOT],[Ee.TD,k.TD],[Ee.TH,k.TH],[Ee.THEAD,k.THEAD],[Ee.TITLE,k.TITLE],[Ee.TR,k.TR],[Ee.TRACK,k.TRACK],[Ee.TT,k.TT],[Ee.U,k.U],[Ee.UL,k.UL],[Ee.SVG,k.SVG],[Ee.VAR,k.VAR],[Ee.WBR,k.WBR],[Ee.XMP,k.XMP]]);function Ux(e){var t;return(t=Wet.get(e))!==null&&t!==void 0?t:k.UNKNOWN}const Qe=k,Get={[Fe.HTML]:new Set([Qe.ADDRESS,Qe.APPLET,Qe.AREA,Qe.ARTICLE,Qe.ASIDE,Qe.BASE,Qe.BASEFONT,Qe.BGSOUND,Qe.BLOCKQUOTE,Qe.BODY,Qe.BR,Qe.BUTTON,Qe.CAPTION,Qe.CENTER,Qe.COL,Qe.COLGROUP,Qe.DD,Qe.DETAILS,Qe.DIR,Qe.DIV,Qe.DL,Qe.DT,Qe.EMBED,Qe.FIELDSET,Qe.FIGCAPTION,Qe.FIGURE,Qe.FOOTER,Qe.FORM,Qe.FRAME,Qe.FRAMESET,Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6,Qe.HEAD,Qe.HEADER,Qe.HGROUP,Qe.HR,Qe.HTML,Qe.IFRAME,Qe.IMG,Qe.INPUT,Qe.LI,Qe.LINK,Qe.LISTING,Qe.MAIN,Qe.MARQUEE,Qe.MENU,Qe.META,Qe.NAV,Qe.NOEMBED,Qe.NOFRAMES,Qe.NOSCRIPT,Qe.OBJECT,Qe.OL,Qe.P,Qe.PARAM,Qe.PLAINTEXT,Qe.PRE,Qe.SCRIPT,Qe.SECTION,Qe.SELECT,Qe.SOURCE,Qe.STYLE,Qe.SUMMARY,Qe.TABLE,Qe.TBODY,Qe.TD,Qe.TEMPLATE,Qe.TEXTAREA,Qe.TFOOT,Qe.TH,Qe.THEAD,Qe.TITLE,Qe.TR,Qe.TRACK,Qe.UL,Qe.WBR,Qe.XMP]),[Fe.MATHML]:new Set([Qe.MI,Qe.MO,Qe.MN,Qe.MS,Qe.MTEXT,Qe.ANNOTATION_XML]),[Fe.SVG]:new Set([Qe.TITLE,Qe.FOREIGN_OBJECT,Qe.DESC]),[Fe.XLINK]:new Set,[Fe.XML]:new Set,[Fe.XMLNS]:new Set};function kwe(e){return e===Qe.H1||e===Qe.H2||e===Qe.H3||e===Qe.H4||e===Qe.H5||e===Qe.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const Yet=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const ss={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function YA(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function KT(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Ket(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function yg(e){return Ket(e)||KT(e)}function UU(e){return yg(e)||YA(e)}function Rwe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function Nwe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function Xet(e){return YA(e)||Rwe(e)||Nwe(e)}function iN(e){return e+32}function Pwe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Qet(e){return e===X.EQUALS_SIGN||UU(e)}function bae(e){return Pwe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Jet{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Met(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Cn.START_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Cn.END_TAG,tagName:"",tagID:k.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Cn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Cn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(Awe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Ux(t.tagName),t.type===Cn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Cn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Cn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Cn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Cn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=Pwe(t)?Cn.WHITESPACE_CHARACTER:t===X.NULL?Cn.NULL_CHARACTER:Cn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Cn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=gg[0];s>=0&&(s=Iwe(gg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=gg[s];const a=o&Wd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Qet(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[gg[s]&~Wd.VALUE_LENGTH]:u===1?[gg[++s]]:[gg[++s],gg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(yg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(yg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=mi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(KT(t)?iN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){yg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){yg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){yg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:yg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){yg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(fu.SCRIPT,!1)&&bae(this.preprocessor.peek(fu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<fu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(mi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(fu.SCRIPT,!1)&&bae(this.preprocessor.peek(fu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<fu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=mi;break}default:this.currentAttr.name+=String.fromCodePoint(KT(t)?iN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=mi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=mi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=mi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=mi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(fu.DASH_DASH,!0)?(this._createCommentToken(fu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(fu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(fu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(fu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(fu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=mi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(KT(t))this._createDoctypeToken(String.fromCharCode(iN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(mi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=mi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(KT(t)?iN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(fu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(fu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=mi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=mi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=mi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=mi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:UU(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){UU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:YA(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Xet(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){Rwe(t)?this.charRefCode=this.charRefCode*16+t-55:Nwe(t)?this.charRefCode=this.charRefCode*16+t-87:YA(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){YA(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(xwe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(Twe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(Swe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=Yet.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const Dwe=new Set([k.DD,k.DT,k.LI,k.OPTGROUP,k.OPTION,k.P,k.RB,k.RP,k.RT,k.RTC]),_ae=new Set([...Dwe,k.CAPTION,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]),sN=new Map([[k.APPLET,Fe.HTML],[k.CAPTION,Fe.HTML],[k.HTML,Fe.HTML],[k.MARQUEE,Fe.HTML],[k.OBJECT,Fe.HTML],[k.TABLE,Fe.HTML],[k.TD,Fe.HTML],[k.TEMPLATE,Fe.HTML],[k.TH,Fe.HTML],[k.ANNOTATION_XML,Fe.MATHML],[k.MI,Fe.MATHML],[k.MN,Fe.MATHML],[k.MO,Fe.MATHML],[k.MS,Fe.MATHML],[k.MTEXT,Fe.MATHML],[k.DESC,Fe.SVG],[k.FOREIGN_OBJECT,Fe.SVG],[k.TITLE,Fe.SVG]]),Zet=[k.H1,k.H2,k.H3,k.H4,k.H5,k.H6],ett=[k.TR,k.TEMPLATE,k.HTML],ttt=[k.TBODY,k.TFOOT,k.THEAD,k.TEMPLATE,k.HTML],ntt=[k.TABLE,k.TEMPLATE,k.HTML],rtt=[k.TD,k.TH];class itt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=k.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===k.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Zet,Fe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(rtt,Fe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(ntt,Fe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(ttt,Fe.HTML)}clearBackToTableRowContext(){this.clearBackTo(ett,Fe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===k.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===k.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(sN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(kwe(n)&&r===Fe.HTML)return!0;if(sN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if((r===k.UL||r===k.OL)&&i===Fe.HTML||sN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(r===k.BUTTON&&i===Fe.HTML||sN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r===k.TABLE||r===k.TEMPLATE||r===k.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Fe.HTML){if(n===k.TBODY||n===k.THEAD||n===k.TFOOT)return!0;if(n===k.TABLE||n===k.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r!==k.OPTION&&r!==k.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;Dwe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;_ae.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&_ae.has(this.currentTagId);)this.pop()}}const C8=3;var pf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(pf=pf||(pf={}));const wae={type:pf.Marker};class stt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===pf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<C8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<C8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=C8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(wae)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:pf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:pf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(wae);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===pf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===pf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===pf.Element&&n.element===t)}}function Eae(e){return{nodeName:"#text",value:e,parentNode:null}}const P_={createDocument(){return{nodeName:"#document",mode:hl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};P_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(P_.isTextNode(n)){n.value+=t;return}}P_.appendChild(e,Eae(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&P_.isTextNode(r)?r.value+=t:P_.insertBefore(e,Eae(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},Owe="html",ott="about:legacy-compat",att="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",$we=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],utt=[...$we,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],ltt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Mwe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],ctt=[...Mwe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function xae(e,t){return t.some(n=>e.startsWith(n))}function ftt(e){return e.name===Owe&&e.publicId===null&&(e.systemId===null||e.systemId===ott)}function dtt(e){if(e.name!==Owe)return hl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===att)return hl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),ltt.has(n))return hl.QUIRKS;let r=t===null?utt:$we;if(xae(n,r))return hl.QUIRKS;if(r=t===null?Mwe:ctt,xae(n,r))return hl.LIMITED_QUIRKS}return hl.NO_QUIRKS}const Sae={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},htt="definitionurl",ptt="definitionURL",mtt=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),gtt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Fe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fe.XMLNS}]]),ytt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),vtt=new Set([k.B,k.BIG,k.BLOCKQUOTE,k.BODY,k.BR,k.CENTER,k.CODE,k.DD,k.DIV,k.DL,k.DT,k.EM,k.EMBED,k.H1,k.H2,k.H3,k.H4,k.H5,k.H6,k.HEAD,k.HR,k.I,k.IMG,k.LI,k.LISTING,k.MENU,k.META,k.NOBR,k.OL,k.P,k.PRE,k.RUBY,k.S,k.SMALL,k.SPAN,k.STRONG,k.STRIKE,k.SUB,k.SUP,k.TABLE,k.TT,k.U,k.UL,k.VAR]);function btt(e){const t=e.tagID;return t===k.FONT&&e.attrs.some(({name:r})=>r===f0.COLOR||r===f0.SIZE||r===f0.FACE)||vtt.has(t)}function Lwe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===htt){e.attrs[t].name=ptt;break}}function Fwe(e){for(let t=0;t<e.attrs.length;t++){const n=mtt.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function fY(e){for(let t=0;t<e.attrs.length;t++){const n=gtt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function _tt(e){const t=ytt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Ux(e.tagName))}function wtt(e,t){return t===Fe.MATHML&&(e===k.MI||e===k.MO||e===k.MN||e===k.MS||e===k.MTEXT)}function Ett(e,t,n){if(t===Fe.MATHML&&e===k.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===f0.ENCODING){const i=n[r].value.toLowerCase();return i===Sae.TEXT_HTML||i===Sae.APPLICATION_XML}}return t===Fe.SVG&&(e===k.FOREIGN_OBJECT||e===k.DESC||e===k.TITLE)}function xtt(e,t,n,r){return(!r||r===Fe.HTML)&&Ett(e,t,n)||(!r||r===Fe.MATHML)&&wtt(e,t)}const Stt="hidden",Ttt=8,Att=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Ctt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},jwe=new Set([k.TABLE,k.TBODY,k.TFOOT,k.THEAD,k.TR]),Tae={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:P_,onParseError:null};let Aae=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Tae,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Jet(this.options,this),this.activeFormattingElements=new stt(this.treeAdapter),this.fragmentContextID=r?Ux(this.treeAdapter.getTagName(r)):k.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new itt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Tae,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,Fe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Fe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===k.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Ctt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Fe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Fe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=ss.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Fe.HTML))switch(this.fragmentContextID){case k.TITLE:case k.TEXTAREA:{this.tokenizer.state=ss.RCDATA;break}case k.STYLE:case k.XMP:case k.IFRAME:case k.NOEMBED:case k.NOFRAMES:case k.NOSCRIPT:{this.tokenizer.state=ss.RAWTEXT;break}case k.SCRIPT:{this.tokenizer.state=ss.SCRIPT_DATA;break}case k.PLAINTEXT:{this.tokenizer.state=ss.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Fe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Fe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,Fe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,k.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Cn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===k.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Fe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===k.MGLYPH||t.tagID===k.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Fe.HTML)}_processToken(t){switch(t.type){case Cn.CHARACTER:{this.onCharacter(t);break}case Cn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Cn.COMMENT:{this.onComment(t);break}case Cn.DOCTYPE:{this.onDoctype(t);break}case Cn.START_TAG:{this._processStartTag(t);break}case Cn.END_TAG:{this.onEndTag(t);break}case Cn.EOF:{this.onEof(t);break}case Cn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return xtt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===pf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(k.P),this.openElements.popUntilTagNamePopped(k.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case k.TR:{this.insertionMode=ie.IN_ROW;return}case k.TBODY:case k.THEAD:case k.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case k.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case k.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case k.TABLE:{this.insertionMode=ie.IN_TABLE;return}case k.BODY:{this.insertionMode=ie.IN_BODY;return}case k.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case k.SELECT:{this._resetInsertionModeForSelect(t);return}case k.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case k.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case k.TD:case k.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case k.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===k.TEMPLATE)break;if(r===k.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return jwe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case k.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Fe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case k.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Get[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){rrt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{nT(this,t);break}case ie.BEFORE_HTML:{KA(this,t);break}case ie.BEFORE_HEAD:{XA(this,t);break}case ie.IN_HEAD:{QA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{JA(this,t);break}case ie.AFTER_HEAD:{ZA(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{Uwe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{I8(this,t);break}case ie.IN_TABLE_TEXT:{Gwe(this,t);break}case ie.IN_COLUMN_GROUP:{CO(this,t);break}case ie.AFTER_BODY:{IO(this,t);break}case ie.AFTER_AFTER_BODY:{UP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){nrt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{nT(this,t);break}case ie.BEFORE_HTML:{KA(this,t);break}case ie.BEFORE_HEAD:{XA(this,t);break}case ie.IN_HEAD:{QA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{JA(this,t);break}case ie.AFTER_HEAD:{ZA(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{I8(this,t);break}case ie.IN_COLUMN_GROUP:{CO(this,t);break}case ie.AFTER_BODY:{IO(this,t);break}case ie.AFTER_AFTER_BODY:{UP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){zU(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{zU(this,t);break}case ie.IN_TABLE_TEXT:{rT(this,t);break}case ie.AFTER_BODY:{Ott(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{$tt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{Mtt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{rT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?irt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{nT(this,t);break}case ie.BEFORE_HTML:{Ltt(this,t);break}case ie.BEFORE_HEAD:{jtt(this,t);break}case ie.IN_HEAD:{Xf(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{ztt(this,t);break}case ie.AFTER_HEAD:{Htt(this,t);break}case ie.IN_BODY:{Sa(this,t);break}case ie.IN_TABLE:{gE(this,t);break}case ie.IN_TABLE_TEXT:{rT(this,t);break}case ie.IN_CAPTION:{Bnt(this,t);break}case ie.IN_COLUMN_GROUP:{pY(this,t);break}case ie.IN_TABLE_BODY:{OL(this,t);break}case ie.IN_ROW:{$L(this,t);break}case ie.IN_CELL:{Vnt(this,t);break}case ie.IN_SELECT:{Xwe(this,t);break}case ie.IN_SELECT_IN_TABLE:{qnt(this,t);break}case ie.IN_TEMPLATE:{Gnt(this,t);break}case ie.AFTER_BODY:{Knt(this,t);break}case ie.IN_FRAMESET:{Xnt(this,t);break}case ie.AFTER_FRAMESET:{Jnt(this,t);break}case ie.AFTER_AFTER_BODY:{ert(this,t);break}case ie.AFTER_AFTER_FRAMESET:{trt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?srt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{nT(this,t);break}case ie.BEFORE_HTML:{Ftt(this,t);break}case ie.BEFORE_HEAD:{Btt(this,t);break}case ie.IN_HEAD:{Utt(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Vtt(this,t);break}case ie.AFTER_HEAD:{qtt(this,t);break}case ie.IN_BODY:{DL(this,t);break}case ie.TEXT:{Rnt(this,t);break}case ie.IN_TABLE:{u2(this,t);break}case ie.IN_TABLE_TEXT:{rT(this,t);break}case ie.IN_CAPTION:{Unt(this,t);break}case ie.IN_COLUMN_GROUP:{znt(this,t);break}case ie.IN_TABLE_BODY:{VU(this,t);break}case ie.IN_ROW:{Kwe(this,t);break}case ie.IN_CELL:{Hnt(this,t);break}case ie.IN_SELECT:{Qwe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Wnt(this,t);break}case ie.IN_TEMPLATE:{Ynt(this,t);break}case ie.AFTER_BODY:{Zwe(this,t);break}case ie.IN_FRAMESET:{Qnt(this,t);break}case ie.AFTER_FRAMESET:{Znt(this,t);break}case ie.AFTER_AFTER_BODY:{UP(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{nT(this,t);break}case ie.BEFORE_HTML:{KA(this,t);break}case ie.BEFORE_HEAD:{XA(this,t);break}case ie.IN_HEAD:{QA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{JA(this,t);break}case ie.AFTER_HEAD:{ZA(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{qwe(this,t);break}case ie.TEXT:{Nnt(this,t);break}case ie.IN_TABLE_TEXT:{rT(this,t);break}case ie.IN_TEMPLATE:{Jwe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{hY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Bwe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{I8(this,t);break}case ie.IN_TABLE_TEXT:{Wwe(this,t);break}}}};function Itt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Hwe(e,t),n}function ktt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Rtt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Att;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Ntt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Ntt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Ptt(e,t,n){const r=e.treeAdapter.getTagName(t),i=Ux(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===k.TEMPLATE&&s===Fe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Dtt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function dY(e,t){for(let n=0;n<Ttt;n++){const r=Itt(e,t);if(!r)break;const i=ktt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Rtt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Ptt(e,o,s),Dtt(e,i,r)}}function zU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Ott(e,t){e._appendCommentNode(t,e.openElements.items[0])}function $tt(e,t){e._appendCommentNode(t,e.document)}function hY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Mtt(e,t){e._setDocumentType(t);const n=t.forceQuirks?hl.QUIRKS:dtt(t);ftt(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function nT(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,hl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function Ltt(e,t){t.tagID===k.HTML?(e._insertElement(t,Fe.HTML),e.insertionMode=ie.BEFORE_HEAD):KA(e,t)}function Ftt(e,t){const n=t.tagID;(n===k.HTML||n===k.HEAD||n===k.BODY||n===k.BR)&&KA(e,t)}function KA(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function jtt(e,t){switch(t.tagID){case k.HTML:{Sa(e,t);break}case k.HEAD:{e._insertElement(t,Fe.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:XA(e,t)}}function Btt(e,t){const n=t.tagID;n===k.HEAD||n===k.BODY||n===k.HTML||n===k.BR?XA(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function XA(e,t){e._insertFakeElement(Ee.HEAD,k.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Xf(e,t){switch(t.tagID){case k.HTML:{Sa(e,t);break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case k.TITLE:{e._switchToTextParsing(t,ss.RCDATA);break}case k.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ss.RAWTEXT):(e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case k.NOFRAMES:case k.STYLE:{e._switchToTextParsing(t,ss.RAWTEXT);break}case k.SCRIPT:{e._switchToTextParsing(t,ss.SCRIPT_DATA);break}case k.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case k.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:QA(e,t)}}function Utt(e,t){switch(t.tagID){case k.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case k.BODY:case k.BR:case k.HTML:{QA(e,t);break}case k.TEMPLATE:{Ab(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function Ab(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==k.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(k.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function QA(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function ztt(e,t){switch(t.tagID){case k.HTML:{Sa(e,t);break}case k.BASEFONT:case k.BGSOUND:case k.HEAD:case k.LINK:case k.META:case k.NOFRAMES:case k.STYLE:{Xf(e,t);break}case k.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:JA(e,t)}}function Vtt(e,t){switch(t.tagID){case k.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case k.BR:{JA(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function JA(e,t){const n=t.type===Cn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Htt(e,t){switch(t.tagID){case k.HTML:{Sa(e,t);break}case k.BODY:{e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case k.FRAMESET:{e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET;break}case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,k.HEAD),Xf(e,t),e.openElements.remove(e.headElement);break}case k.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:ZA(e,t)}}function qtt(e,t){switch(t.tagID){case k.BODY:case k.HTML:case k.BR:{ZA(e,t);break}case k.TEMPLATE:{Ab(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function ZA(e,t){e._insertFakeElement(Ee.BODY,k.BODY),e.insertionMode=ie.IN_BODY,PL(e,t)}function PL(e,t){switch(t.type){case Cn.CHARACTER:{Uwe(e,t);break}case Cn.WHITESPACE_CHARACTER:{Bwe(e,t);break}case Cn.COMMENT:{zU(e,t);break}case Cn.START_TAG:{Sa(e,t);break}case Cn.END_TAG:{DL(e,t);break}case Cn.EOF:{qwe(e,t);break}}}function Bwe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function Uwe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Wtt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Gtt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Ytt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET)}function Ktt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function Xtt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),kwe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Fe.HTML)}function Qtt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Jtt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),n||(e.formElement=e.openElements.current))}function Ztt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===k.LI&&i===k.LI||(n===k.DD||n===k.DT)&&(i===k.DD||i===k.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==k.ADDRESS&&i!==k.DIV&&i!==k.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function ent(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.tokenizer.state=ss.PLAINTEXT}function tnt(e,t){e.openElements.hasInScope(k.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1}function nnt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&(dY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function rnt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function int(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(k.NOBR)&&(dY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function snt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function ont(e,t){e.treeAdapter.getDocumentMode(e.document)!==hl.QUIRKS&&e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function zwe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Vwe(e){const t=Awe(e,f0.TYPE);return t!=null&&t.toLowerCase()===Stt}function ant(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),Vwe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function unt(e,t){e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0}function lnt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function cnt(e,t){t.tagName=Ee.IMG,t.tagID=k.IMG,zwe(e,t)}function fnt(e,t){e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ss.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function dnt(e,t){e.openElements.hasInButtonScope(k.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ss.RAWTEXT)}function hnt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ss.RAWTEXT)}function Cae(e,t){e._switchToTextParsing(t,ss.RAWTEXT)}function pnt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function mnt(e,t){e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function gnt(e,t){e.openElements.hasInScope(k.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Fe.HTML)}function ynt(e,t){e.openElements.hasInScope(k.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(k.RTC),e._insertElement(t,Fe.HTML)}function vnt(e,t){e._reconstructActiveFormattingElements(),Lwe(t),fY(t),t.selfClosing?e._appendElement(t,Fe.MATHML):e._insertElement(t,Fe.MATHML),t.ackSelfClosing=!0}function bnt(e,t){e._reconstructActiveFormattingElements(),Fwe(t),fY(t),t.selfClosing?e._appendElement(t,Fe.SVG):e._insertElement(t,Fe.SVG),t.ackSelfClosing=!0}function Iae(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function Sa(e,t){switch(t.tagID){case k.I:case k.S:case k.B:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.SMALL:case k.STRIKE:case k.STRONG:{rnt(e,t);break}case k.A:{nnt(e,t);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{Xtt(e,t);break}case k.P:case k.DL:case k.OL:case k.UL:case k.DIV:case k.DIR:case k.NAV:case k.MAIN:case k.MENU:case k.ASIDE:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.DETAILS:case k.ADDRESS:case k.ARTICLE:case k.SECTION:case k.SUMMARY:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{Ktt(e,t);break}case k.LI:case k.DD:case k.DT:{Ztt(e,t);break}case k.BR:case k.IMG:case k.WBR:case k.AREA:case k.EMBED:case k.KEYGEN:{zwe(e,t);break}case k.HR:{lnt(e,t);break}case k.RB:case k.RTC:{gnt(e,t);break}case k.RT:case k.RP:{ynt(e,t);break}case k.PRE:case k.LISTING:{Qtt(e,t);break}case k.XMP:{dnt(e,t);break}case k.SVG:{bnt(e,t);break}case k.HTML:{Wtt(e,t);break}case k.BASE:case k.LINK:case k.META:case k.STYLE:case k.TITLE:case k.SCRIPT:case k.BGSOUND:case k.BASEFONT:case k.TEMPLATE:{Xf(e,t);break}case k.BODY:{Gtt(e,t);break}case k.FORM:{Jtt(e,t);break}case k.NOBR:{int(e,t);break}case k.MATH:{vnt(e,t);break}case k.TABLE:{ont(e,t);break}case k.INPUT:{ant(e,t);break}case k.PARAM:case k.TRACK:case k.SOURCE:{unt(e,t);break}case k.IMAGE:{cnt(e,t);break}case k.BUTTON:{tnt(e,t);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{snt(e,t);break}case k.IFRAME:{hnt(e,t);break}case k.SELECT:{pnt(e,t);break}case k.OPTION:case k.OPTGROUP:{mnt(e,t);break}case k.NOEMBED:{Cae(e,t);break}case k.FRAMESET:{Ytt(e,t);break}case k.TEXTAREA:{fnt(e,t);break}case k.NOSCRIPT:{e.options.scriptingEnabled?Cae(e,t):Iae(e,t);break}case k.PLAINTEXT:{ent(e,t);break}case k.COL:case k.TH:case k.TD:case k.TR:case k.HEAD:case k.FRAME:case k.TBODY:case k.TFOOT:case k.THEAD:case k.CAPTION:case k.COLGROUP:break;default:Iae(e,t)}}function _nt(e,t){if(e.openElements.hasInScope(k.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function wnt(e,t){e.openElements.hasInScope(k.BODY)&&(e.insertionMode=ie.AFTER_BODY,Zwe(e,t))}function Ent(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function xnt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(k.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(k.FORM):n&&e.openElements.remove(n))}function Snt(e){e.openElements.hasInButtonScope(k.P)||e._insertFakeElement(Ee.P,k.P),e._closePElement()}function Tnt(e){e.openElements.hasInListItemScope(k.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(k.LI),e.openElements.popUntilTagNamePopped(k.LI))}function Ant(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Cnt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Int(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function knt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,k.BR),e.openElements.pop(),e.framesetOk=!1}function Hwe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==k.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function DL(e,t){switch(t.tagID){case k.A:case k.B:case k.I:case k.S:case k.U:case k.EM:case k.TT:case k.BIG:case k.CODE:case k.FONT:case k.NOBR:case k.SMALL:case k.STRIKE:case k.STRONG:{dY(e,t);break}case k.P:{Snt(e);break}case k.DL:case k.UL:case k.OL:case k.DIR:case k.DIV:case k.NAV:case k.PRE:case k.MAIN:case k.MENU:case k.ASIDE:case k.BUTTON:case k.CENTER:case k.FIGURE:case k.FOOTER:case k.HEADER:case k.HGROUP:case k.DIALOG:case k.ADDRESS:case k.ARTICLE:case k.DETAILS:case k.SECTION:case k.SUMMARY:case k.LISTING:case k.FIELDSET:case k.BLOCKQUOTE:case k.FIGCAPTION:{Ent(e,t);break}case k.LI:{Tnt(e);break}case k.DD:case k.DT:{Ant(e,t);break}case k.H1:case k.H2:case k.H3:case k.H4:case k.H5:case k.H6:{Cnt(e);break}case k.BR:{knt(e);break}case k.BODY:{_nt(e,t);break}case k.HTML:{wnt(e,t);break}case k.FORM:{xnt(e);break}case k.APPLET:case k.OBJECT:case k.MARQUEE:{Int(e,t);break}case k.TEMPLATE:{Ab(e,t);break}default:Hwe(e,t)}}function qwe(e,t){e.tmplInsertionModeStack.length>0?Jwe(e,t):hY(e,t)}function Rnt(e,t){var n;t.tagID===k.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Nnt(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function I8(e,t){if(jwe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case Cn.CHARACTER:{Gwe(e,t);break}case Cn.WHITESPACE_CHARACTER:{Wwe(e,t);break}}else WI(e,t)}function Pnt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CAPTION}function Dnt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function Ont(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,k.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,pY(e,t)}function $nt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_TABLE_BODY}function Mnt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,k.TBODY),e.insertionMode=ie.IN_TABLE_BODY,OL(e,t)}function Lnt(e,t){e.openElements.hasInTableScope(k.TABLE)&&(e.openElements.popUntilTagNamePopped(k.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Fnt(e,t){Vwe(t)?e._appendElement(t,Fe.HTML):WI(e,t),t.ackSelfClosing=!0}function jnt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Fe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function gE(e,t){switch(t.tagID){case k.TD:case k.TH:case k.TR:{Mnt(e,t);break}case k.STYLE:case k.SCRIPT:case k.TEMPLATE:{Xf(e,t);break}case k.COL:{Ont(e,t);break}case k.FORM:{jnt(e,t);break}case k.TABLE:{Lnt(e,t);break}case k.TBODY:case k.TFOOT:case k.THEAD:{$nt(e,t);break}case k.INPUT:{Fnt(e,t);break}case k.CAPTION:{Pnt(e,t);break}case k.COLGROUP:{Dnt(e,t);break}default:WI(e,t)}}function u2(e,t){switch(t.tagID){case k.TABLE:{e.openElements.hasInTableScope(k.TABLE)&&(e.openElements.popUntilTagNamePopped(k.TABLE),e._resetInsertionMode());break}case k.TEMPLATE:{Ab(e,t);break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:WI(e,t)}}function WI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,PL(e,t),e.fosterParentingEnabled=n}function Wwe(e,t){e.pendingCharacterTokens.push(t)}function Gwe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function rT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)WI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Ywe=new Set([k.CAPTION,k.COL,k.COLGROUP,k.TBODY,k.TD,k.TFOOT,k.TH,k.THEAD,k.TR]);function Bnt(e,t){const n=t.tagID;Ywe.has(n)?e.openElements.hasInTableScope(k.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,gE(e,t)):Sa(e,t)}function Unt(e,t){const n=t.tagID;switch(n){case k.CAPTION:case k.TABLE:{e.openElements.hasInTableScope(k.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(k.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===k.TABLE&&u2(e,t));break}case k.BODY:case k.COL:case k.COLGROUP:case k.HTML:case k.TBODY:case k.TD:case k.TFOOT:case k.TH:case k.THEAD:case k.TR:break;default:DL(e,t)}}function pY(e,t){switch(t.tagID){case k.HTML:{Sa(e,t);break}case k.COL:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case k.TEMPLATE:{Xf(e,t);break}default:CO(e,t)}}function znt(e,t){switch(t.tagID){case k.COLGROUP:{e.openElements.currentTagId===k.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case k.TEMPLATE:{Ab(e,t);break}case k.COL:break;default:CO(e,t)}}function CO(e,t){e.openElements.currentTagId===k.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function OL(e,t){switch(t.tagID){case k.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_ROW;break}case k.TH:case k.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,k.TR),e.insertionMode=ie.IN_ROW,$L(e,t);break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,gE(e,t));break}default:gE(e,t)}}function VU(e,t){const n=t.tagID;switch(t.tagID){case k.TBODY:case k.TFOOT:case k.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case k.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,u2(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:case k.TR:break;default:u2(e,t)}}function $L(e,t){switch(t.tagID){case k.TH:case k.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case k.CAPTION:case k.COL:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,OL(e,t));break}default:gE(e,t)}}function Kwe(e,t){switch(t.tagID){case k.TR:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case k.TABLE:{e.openElements.hasInTableScope(k.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,VU(e,t));break}case k.TBODY:case k.TFOOT:case k.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(k.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,VU(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:case k.TD:case k.TH:break;default:u2(e,t)}}function Vnt(e,t){const n=t.tagID;Ywe.has(n)?(e.openElements.hasInTableScope(k.TD)||e.openElements.hasInTableScope(k.TH))&&(e._closeTableCell(),$L(e,t)):Sa(e,t)}function Hnt(e,t){const n=t.tagID;switch(n){case k.TD:case k.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case k.TABLE:case k.TBODY:case k.TFOOT:case k.THEAD:case k.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),Kwe(e,t));break}case k.BODY:case k.CAPTION:case k.COL:case k.COLGROUP:case k.HTML:break;default:DL(e,t)}}function Xwe(e,t){switch(t.tagID){case k.HTML:{Sa(e,t);break}case k.OPTION:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case k.OPTGROUP:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop(),e.openElements.currentTagId===k.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case k.INPUT:case k.KEYGEN:case k.TEXTAREA:case k.SELECT:{e.openElements.hasInSelectScope(k.SELECT)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),t.tagID!==k.SELECT&&e._processStartTag(t));break}case k.SCRIPT:case k.TEMPLATE:{Xf(e,t);break}}}function Qwe(e,t){switch(t.tagID){case k.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===k.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===k.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===k.OPTGROUP&&e.openElements.pop();break}case k.OPTION:{e.openElements.currentTagId===k.OPTION&&e.openElements.pop();break}case k.SELECT:{e.openElements.hasInSelectScope(k.SELECT)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode());break}case k.TEMPLATE:{Ab(e,t);break}}}function qnt(e,t){const n=t.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Xwe(e,t)}function Wnt(e,t){const n=t.tagID;n===k.CAPTION||n===k.TABLE||n===k.TBODY||n===k.TFOOT||n===k.THEAD||n===k.TR||n===k.TD||n===k.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(k.SELECT),e._resetInsertionMode(),e.onEndTag(t)):Qwe(e,t)}function Gnt(e,t){switch(t.tagID){case k.BASE:case k.BASEFONT:case k.BGSOUND:case k.LINK:case k.META:case k.NOFRAMES:case k.SCRIPT:case k.STYLE:case k.TEMPLATE:case k.TITLE:{Xf(e,t);break}case k.CAPTION:case k.COLGROUP:case k.TBODY:case k.TFOOT:case k.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,gE(e,t);break}case k.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,pY(e,t);break}case k.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,OL(e,t);break}case k.TD:case k.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,$L(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Sa(e,t)}}function Ynt(e,t){t.tagID===k.TEMPLATE&&Ab(e,t)}function Jwe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(k.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):hY(e,t)}function Knt(e,t){t.tagID===k.HTML?Sa(e,t):IO(e,t)}function Zwe(e,t){var n;if(t.tagID===k.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===k.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else IO(e,t)}function IO(e,t){e.insertionMode=ie.IN_BODY,PL(e,t)}function Xnt(e,t){switch(t.tagID){case k.HTML:{Sa(e,t);break}case k.FRAMESET:{e._insertElement(t,Fe.HTML);break}case k.FRAME:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case k.NOFRAMES:{Xf(e,t);break}}}function Qnt(e,t){t.tagID===k.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==k.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function Jnt(e,t){switch(t.tagID){case k.HTML:{Sa(e,t);break}case k.NOFRAMES:{Xf(e,t);break}}}function Znt(e,t){t.tagID===k.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function ert(e,t){t.tagID===k.HTML?Sa(e,t):UP(e,t)}function UP(e,t){e.insertionMode=ie.IN_BODY,PL(e,t)}function trt(e,t){switch(t.tagID){case k.HTML:{Sa(e,t);break}case k.NOFRAMES:{Xf(e,t);break}}}function nrt(e,t){t.chars=mi,e._insertCharacters(t)}function rrt(e,t){e._insertCharacters(t),e.framesetOk=!1}function eEe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Fe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function irt(e,t){if(btt(t))eEe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Fe.MATHML?Lwe(t):r===Fe.SVG&&(_tt(t),Fwe(t)),fY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function srt(e,t){if(t.tagID===k.P||t.tagID===k.BR){eEe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Fe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const ort=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),kae={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function tEe(e,t){const n=grt(e),r=wwe("type",{handlers:{root:art,element:urt,text:lrt,comment:rEe,doctype:crt,raw:drt},unknown:hrt}),i={parser:n?new Aae(kae):Aae.getFragmentParser(void 0,kae),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),zx(i,Fh());const s=n?i.parser.document:i.parser.getFragment(),o=yet(s,{file:i.options.file});return i.stitches&&aY(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function nEe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function art(e,t){nEe(e.children,t)}function urt(e,t){prt(e,t),nEe(e.children,t),mrt(e,t)}function lrt(e,t){const n={type:Cn.CHARACTER,chars:e.value,location:GI(e)};zx(t,Fh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function crt(e,t){const n={type:Cn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:GI(e)};zx(t,Fh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function frt(e,t){t.stitches=!0;const n=yrt(e);if("children"in e&&"children"in n){const r=tEe({type:"root",children:e.children},t.options);n.children=r.children}rEe({type:"comment",value:{stitch:n}},t)}function rEe(e,t){const n=e.value,r={type:Cn.COMMENT,data:n,location:GI(e)};zx(t,Fh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function drt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,iEe(t,Fh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function hrt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))frt(n,t);else{let r="";throw ort.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function zx(e,t){iEe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ss.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function iEe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function prt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ss.PLAINTEXT)return;zx(t,Fh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Hv.html;i===Hv.html&&n==="svg"&&(i=Hv.svg);const s=Eet({...e,children:[]},{space:i===Hv.svg?"svg":"html"}),o={type:Cn.START_TAG,tagName:n,tagID:Ux(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:GI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function mrt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Net.includes(n)||t.parser.tokenizer.state===ss.PLAINTEXT)return;zx(t,IL(e));const r={type:Cn.END_TAG,tagName:n,tagID:Ux(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:GI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ss.RCDATA||t.parser.tokenizer.state===ss.RAWTEXT||t.parser.tokenizer.state===ss.SCRIPT_DATA)&&(t.parser.tokenizer.state=ss.DATA)}function grt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function GI(e){const t=Fh(e)||{line:void 0,column:void 0,offset:void 0},n=IL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function yrt(e){return"children"in e?mE({...e,children:[]}):mE(e)}function vrt(e){return function(t,n){return tEe(t,{...e,file:n})}}function Ya({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Ey,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(ot,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(ki,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(ki,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(ki,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(ki,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(ki,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(ki,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Rx,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(Nf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(Nf,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(ret,{components:n,rehypePlugins:[vrt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function HU({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Ya,{text:n})}const brt="https://github.com/revisit-studies/study/tree/main/public/";function _rt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Hm();return _.jsx(fi.Main,{children:_.jsxs(Ic,{size:"xs",px:"xs",children:[_.jsx(Ey,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Lh}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(ot,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=D_e(i);return _.jsx(bs,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(wb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ot,{fw:"bold",children:i}),_.jsxs(qt,{align:"center",direction:"row",children:[_.jsx(woe,{color:"red"}),_.jsx(ot,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(HU,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsx(ot,{fw:"bold",children:s.studyMetadata.title}),_.jsxs(ot,{c:"dimmed",children:[_.jsx(ot,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(ot,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(ot,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Rx,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${brt}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(qt,{align:"center",direction:"row",children:[_.jsx(woe,{color:"orange"}),_.jsx(ot,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(HU,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var sEe={exports:{}},oEe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YI=N;function wrt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ert=typeof Object.is=="function"?Object.is:wrt,xrt=YI.useSyncExternalStore,Srt=YI.useRef,Trt=YI.useEffect,Art=YI.useMemo,Crt=YI.useDebugValue;oEe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Srt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Art(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Ert(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=xrt(e,s[0],s[1]);return Trt(function(){o.hasValue=!0,o.value=a},[a]),Crt(a),a};sEe.exports=oEe;var Irt=sEe.exports,wl="default"in BD?Wi:BD,Rae=Symbol.for("react-redux-context"),Nae=typeof globalThis<"u"?globalThis:{};function krt(){if(!wl.createContext)return{};const e=Nae[Rae]??(Nae[Rae]=new Map);let t=e.get(wl.createContext);return t||(t=wl.createContext(null),e.set(wl.createContext,t)),t}var P0=krt(),Rrt=()=>{throw new Error("uSES not initialized!")};function mY(e=P0){return function(){return wl.useContext(e)}}var aEe=mY(),uEe=Rrt,Nrt=e=>{uEe=e},Prt=(e,t)=>e===t;function Drt(e=P0){const t=e===P0?aEe:mY(e),n=(r,i={})=>{const{equalityFn:s=Prt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();wl.useRef(!0);const d=wl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=uEe(u.addNestedSub,a.getState,l||a.getState,d,s);return wl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Ort=Drt();function $rt(e){e()}function Mrt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){$rt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Pae={notify(){},get:()=>[]};function Lrt(e,t){let n,r=Pae,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Mrt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Pae)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Frt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jrt=typeof navigator<"u"&&navigator.product==="ReactNative",Brt=Frt||jrt?wl.useLayoutEffect:wl.useEffect;function Urt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=wl.useMemo(()=>{const l=Lrt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=wl.useMemo(()=>e.getState(),[e]);Brt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||P0;return wl.createElement(u.Provider,{value:o},n)}var zrt=Urt;function lEe(e=P0){const t=e===P0?aEe:mY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Vrt=lEe();function Hrt(e=P0){const t=e===P0?Vrt:lEe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var cEe=Hrt();Nrt(Irt.useSyncExternalStoreWithSelector);function wo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var qrt=typeof Symbol=="function"&&Symbol.observable||"@@observable",Dae=qrt,k8=()=>Math.random().toString(36).substring(7).split("").join("."),Wrt={INIT:`@@redux/INIT${k8()}`,REPLACE:`@@redux/REPLACE${k8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${k8()}`},kO=Wrt;function gY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function fEe(e,t,n){if(typeof e!="function")throw new Error(wo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(wo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(wo(1));return n(fEe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(wo(3));return i}function f(g){if(typeof g!="function")throw new Error(wo(4));if(u)throw new Error(wo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(wo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!gY(g))throw new Error(wo(7));if(typeof g.type>"u")throw new Error(wo(8));if(typeof g.type!="string")throw new Error(wo(17));if(u)throw new Error(wo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(wo(10));r=g,d({type:kO.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(wo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Dae](){return this}}}return d({type:kO.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Dae]:p}}function Grt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:kO.INIT})>"u")throw new Error(wo(12));if(typeof n(void 0,{type:kO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(wo(13))})}function Yrt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Grt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(wo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function RO(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Krt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(wo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=RO(...a)(i.dispatch),{...i,dispatch:s}}}function Xrt(e){return gY(e)&&"type"in e&&typeof e.type=="string"}var dEe=Symbol.for("immer-nothing"),Oae=Symbol.for("immer-draftable"),Dl=Symbol.for("immer-state");function gf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var yE=Object.getPrototypeOf;function D0(e){return!!e&&!!e[Dl]}function mm(e){var t;return e?hEe(e)||Array.isArray(e)||!!e[Oae]||!!((t=e.constructor)!=null&&t[Oae])||LL(e)||FL(e):!1}var Qrt=Object.prototype.constructor.toString();function hEe(e){if(!e||typeof e!="object")return!1;const t=yE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Qrt}function NO(e,t){ML(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function ML(e){const t=e[Dl];return t?t.type_:Array.isArray(e)?1:LL(e)?2:FL(e)?3:0}function qU(e,t){return ML(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function pEe(e,t,n){const r=ML(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Jrt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function LL(e){return e instanceof Map}function FL(e){return e instanceof Set}function hv(e){return e.copy_||e.base_}function WU(e,t){if(LL(e))return new Map(e);if(FL(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=hEe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Dl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(yE(e),r)}else{const r=yE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function yY(e,t=!1){return jL(e)||D0(e)||!mm(e)||(ML(e)>1&&(e.set=e.add=e.clear=e.delete=Zrt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>yY(r,!0))),e}function Zrt(){gf(2)}function jL(e){return Object.isFrozen(e)}var eit={};function R1(e){const t=eit[e];return t||gf(0,e),t}var l2;function mEe(){return l2}function tit(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $ae(e,t){t&&(R1("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function GU(e){YU(e),e.drafts_.forEach(nit),e.drafts_=null}function YU(e){e===l2&&(l2=e.parent_)}function Mae(e){return l2=tit(l2,e)}function nit(e){const t=e[Dl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Lae(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Dl].modified_&&(GU(t),gf(4)),mm(e)&&(e=PO(t,e),t.parent_||DO(t,e)),t.patches_&&R1("Patches").generateReplacementPatches_(n[Dl].base_,e,t.patches_,t.inversePatches_)):e=PO(t,n,[]),GU(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==dEe?e:void 0}function PO(e,t,n){if(jL(t))return t;const r=t[Dl];if(!r)return NO(t,(i,s)=>Fae(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return DO(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),NO(s,(a,u)=>Fae(e,r,i,a,u,n,o)),DO(e,i,!1),n&&e.patches_&&R1("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Fae(e,t,n,r,i,s,o){if(D0(i)){const a=s&&t&&t.type_!==3&&!qU(t.assigned_,r)?s.concat(r):void 0,u=PO(e,i,a);if(pEe(n,r,u),D0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(mm(i)&&!jL(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;PO(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&DO(e,i)}}function DO(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&yY(t,n)}function rit(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:mEe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=vY;n&&(i=[r],s=c2);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var vY={get(e,t){if(t===Dl)return e;const n=hv(e);if(!qU(n,t))return iit(e,n,t);const r=n[t];return e.finalized_||!mm(r)?r:r===R8(e.base_,t)?(N8(e),e.copy_[t]=XU(r,e)):r},has(e,t){return t in hv(e)},ownKeys(e){return Reflect.ownKeys(hv(e))},set(e,t,n){const r=gEe(hv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=R8(hv(e),t),s=i==null?void 0:i[Dl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Jrt(n,i)&&(n!==void 0||qU(e.base_,t)))return!0;N8(e),KU(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return R8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,N8(e),KU(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=hv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){gf(11)},getPrototypeOf(e){return yE(e.base_)},setPrototypeOf(){gf(12)}},c2={};NO(vY,(e,t)=>{c2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});c2.deleteProperty=function(e,t){return c2.set.call(this,e,t,void 0)};c2.set=function(e,t,n){return vY.set.call(this,e[0],t,n,e[0])};function R8(e,t){const n=e[Dl];return(n?hv(n):e)[t]}function iit(e,t,n){var i;const r=gEe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function gEe(e,t){if(!(t in e))return;let n=yE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=yE(n)}}function KU(e){e.modified_||(e.modified_=!0,e.parent_&&KU(e.parent_))}function N8(e){e.copy_||(e.copy_=WU(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var sit=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&gf(6),r!==void 0&&typeof r!="function"&&gf(7);let i;if(mm(t)){const s=Mae(this),o=XU(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?GU(s):YU(s)}return $ae(s,r),Lae(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===dEe&&(i=void 0),this.autoFreeze_&&yY(i,!0),r){const s=[],o=[];R1("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else gf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){mm(e)||gf(8),D0(e)&&(e=yEe(e));const t=Mae(this),n=XU(e,void 0);return n[Dl].isManual_=!0,YU(t),n}finishDraft(e,t){const n=e&&e[Dl];(!n||!n.isManual_)&&gf(9);const{scope_:r}=n;return $ae(r,t),Lae(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=R1("Patches").applyPatches_;return D0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function XU(e,t){const n=LL(e)?R1("MapSet").proxyMap_(e,t):FL(e)?R1("MapSet").proxySet_(e,t):rit(e,t);return(t?t.scope_:mEe()).drafts_.push(n),n}function yEe(e){return D0(e)||gf(10,e),vEe(e)}function vEe(e){if(!mm(e)||jL(e))return e;const t=e[Dl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=WU(e,t.scope_.immer_.useStrictShallowCopy_)}else n=WU(e,!0);return NO(n,(r,i)=>{pEe(n,r,vEe(i))}),t&&(t.finalized_=!1),n}var Ol=new sit,bEe=Ol.produce;Ol.produceWithPatches.bind(Ol);Ol.setAutoFreeze.bind(Ol);Ol.setUseStrictShallowCopy.bind(Ol);Ol.applyPatches.bind(Ol);Ol.createDraft.bind(Ol);Ol.finishDraft.bind(Ol);function oit(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function ait(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function uit(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var jae=e=>Array.isArray(e)?e:[e];function lit(e){const t=Array.isArray(e[0])?e[0]:e;return uit(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function cit(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var fit=class{constructor(e){this.value=e}deref(){return this.value}},dit=typeof WeakRef<"u"?WeakRef:fit,hit=0,Bae=1;function oN(){return{s:hit,v:void 0,o:null,p:null}}function bY(e,t={}){let n=oN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=oN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=oN(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Bae)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new dit(c):c}return l.s=Bae,l.v=c,c}return o.clearCache=()=>{n=oN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function _Ee(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),oit(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=bY,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=jae(d),y=jae(p),v=lit(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const S=cit(v,arguments);return a=b.apply(null,S),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var pit=_Ee(bY),mit=Object.assign((e,t=pit)=>{ait(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>mit});function wEe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var git=wEe(),yit=wEe,vit=(...e)=>{const t=_Ee(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(D0(o)?yEe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};vit(bY);var bit=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?RO:RO.apply(null,arguments)};function vE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Bu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>Xrt(r)&&r.type===e,n}var EEe=class XT extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,XT.prototype)}static get[Symbol.species](){return XT}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new XT(...t[0].concat(this)):new XT(...t.concat(this))}};function Uae(e){return mm(e)?bEe(e,()=>{}):e}function zae(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Bu(10));const r=n.insert(t,e);return e.set(t,r),r}function _it(e){return typeof e=="boolean"}var wit=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new EEe;return n&&(_it(n)?o.push(git):o.push(yit(n.extraArgument))),o},Eit="RTK_autoBatch",xEe=e=>t=>{setTimeout(t,e)},xit=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:xEe(10),Sit=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?xit:e.type==="callback"?e.queueNotification:xEe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Eit]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Tit=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new EEe(e);return r&&i.push(Sit(typeof r=="object"?r:void 0)),i},Ait=!0;function Cit(e){const t=wit(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(gY(n))a=Yrt(n);else throw new Error(Bu(1));let u;typeof r=="function"?u=r(t):u=t();let l=RO;i&&(l=bit({trace:!Ait,...typeof i=="object"&&i}));const c=Krt(...u),f=Tit(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return fEe(a,s,h)}function SEe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Bu(28));if(a in t)throw new Error(Bu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Iit(e){return typeof e=="function"}function kit(e,t){let[n,r,i]=SEe(t),s;if(Iit(e))s=()=>Uae(e());else{const a=Uae(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(D0(c)){const h=f(c,u);return h===void 0?c:h}else{if(mm(c))return bEe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Bu(9))}return d}}return c},a)}return o.getInitialState=s,o}var Rit="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Nit=(e=21)=>{let t="",n=e;for(;n--;)t+=Rit[Math.random()*64|0];return t},Pit=Symbol.for("rtk-slice-createasyncthunk");function Dit(e,t){return`${e}/${t}`}function Oit({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Pit];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Bu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Lit()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Bu(12));if(E in l.sliceCaseReducersByType)throw new Error(Bu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:Dit(s,b),createNotation:typeof i.reducers=="function"};jit(w)?Uit(E,w,c,t):Fit(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?SEe(i.extraReducers):[i.extraReducers],S={...b,...l.sliceCaseReducersByType};return kit(i.initialState,T=>{for(let A in S)T.addCase(A,S[A]);for(let A of l.sliceMatchers)T.addMatcher(A.matcher,A.reducer);for(let A of w)T.addMatcher(A.matcher,A.reducer);E&&T.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(T){let A=T[b];return typeof A>"u"&&w&&(A=g()),A}function S(T=d){const A=zae(h,w,{insert:()=>new WeakMap});return zae(A,T,{insert:()=>{const C={};for(const[I,R]of Object.entries(i.selectors??{}))C[I]=$it(R,T,g,w);return C}})}return{reducerPath:b,getSelectors:S,get selectors(){return S(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const S=w??o;return b.inject({reducerPath:S,reducer:m},E),{...v,...y(S,!0)}}};return v}}function $it(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Mit=Oit();function Lit(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Fit({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Bit(r))throw new Error(Bu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?vE(e,o):vE(e))}function jit(e){return e._reducerDefinitionType==="asyncThunk"}function Bit(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Uit({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Bu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||aN,pending:a||aN,rejected:u||aN,settled:l||aN})}function aN(){}var zit=(e,t)=>{if(typeof e!="function")throw new Error(Bu(32))},_Y="listenerMiddleware",Vit=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=vE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Bu(21));return zit(s),{predicate:i,type:t,effect:s}},Hit=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Vit(e);return{id:Nit(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Bu(22))}}},{withTypes:()=>Hit}),qit=Object.assign(vE(`${_Y}/add`),{withTypes:()=>qit});vE(`${_Y}/removeAll`);var Wit=Object.assign(vE(`${_Y}/remove`),{withTypes:()=>Wit});function Bu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function gm(e){return e.components.flatMap(t=>typeof t=="string"?t:gm(t))}function TEe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:TEe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function AEe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+gm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+gm(e).length-1}];r+=1}else{const o=AEe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function CEe(e,t){const n=AEe(e,t,0);return typeof n=="number"?null:n}function IEe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=IEe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Git(e,t){const n=IEe(e,t,0);return n.found?n.distance:-1}function kEe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...kEe(i,`${t}-${s}`))}),n}async function Yit(e,t,n,r,i){const s=gm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=Mit({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}}}});return{store:Cit({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const REe=N.createContext(null);function jh(){return N.useContext(REe).actions}const Bh=cEe,Vc=Ort;function Kit(e){return Vc(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function wY(){return Vc(e=>gm(e.sequence))}function Cb(){const{studyId:e}=k1();return`${e}`}function qm(){const{index:e}=k1(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Ty(){const e=qm(),t=wY();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var OO={exports:{}};OO.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",S="[object String]",T="[object Undefined]",A="[object WeakMap]",C="[object ArrayBuffer]",I="[object DataView]",R="[object Float32Array]",O="[object Float64Array]",P="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",L="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",q="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[R]=j[O]=j[P]=j[$]=j[F]=j[L]=j[B]=j[z]=j[q]=!0,j[a]=j[u]=j[C]=j[c]=j[I]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[S]=j[A]=!1;var H=typeof to=="object"&&to&&to.Object===Object&&to,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=H||G||Function("return this")(),ce=t&&!t.nodeType&&t,de=ce&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===ce,ye=he&&H.process,Ie=function(){try{var te=de&&de.require&&de.require("util").types;return te||ye&&ye.binding&&ye.binding("util")}catch{}}(),ve=Ie&&Ie.isTypedArray;function Ke(te,ue,Re){switch(Re.length){case 0:return te.call(ue);case 1:return te.call(ue,Re[0]);case 2:return te.call(ue,Re[0],Re[1]);case 3:return te.call(ue,Re[0],Re[1],Re[2])}return te.apply(ue,Re)}function Ue(te,ue){for(var Re=-1,Ct=Array(te);++Re<te;)Ct[Re]=ue(Re);return Ct}function gt(te){return function(ue){return te(ue)}}function rt(te,ue){return te==null?void 0:te[ue]}function be(te,ue){return function(Re){return te(ue(Re))}}var ke=Array.prototype,ze=Function.prototype,ct=Object.prototype,Dt=ne["__core-js_shared__"],We=ze.toString,me=ct.hasOwnProperty,dt=function(){var te=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),vt=ct.toString,pe=We.call(Object),Ce=RegExp("^"+We.call(me).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=he?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;He&&He.allocUnsafe;var Mn=be(Object.getPrototypeOf,Object),Sr=Object.create,Ln=ct.propertyIsEnumerable,lr=ke.splice,pn=ut?ut.toStringTag:void 0,Sn=function(){try{var te=qe(Object,"defineProperty");return te({},"",{}),te}catch{}}(),tr=He?He.isBuffer:void 0,nr=Math.max,Bo=Date.now,Oi=qe(ne,"Map"),Tn=qe(Object,"create"),$i=function(){function te(){}return function(ue){if(!ap(ue))return{};if(Sr)return Sr(ue);te.prototype=ue;var Re=new te;return te.prototype=void 0,Re}}();function Tr(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function ds(){this.__data__=Tn?Tn(null):{},this.size=0}function rp(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function sl(te){var ue=this.__data__;if(Tn){var Re=ue[te];return Re===r?void 0:Re}return me.call(ue,te)?ue[te]:void 0}function ld(te){var ue=this.__data__;return Tn?ue[te]!==void 0:me.call(ue,te)}function wr(te,ue){var Re=this.__data__;return this.size+=this.has(te)?0:1,Re[te]=Tn&&ue===void 0?r:ue,this}Tr.prototype.clear=ds,Tr.prototype.delete=rp,Tr.prototype.get=sl,Tr.prototype.has=ld,Tr.prototype.set=wr;function Ti(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function Kr(){this.__data__=[],this.size=0}function au(te){var ue=this.__data__,Re=Qn(ue,te);if(Re<0)return!1;var Ct=ue.length-1;return Re==Ct?ue.pop():lr.call(ue,Re,1),--this.size,!0}function Ta(te){var ue=this.__data__,Re=Qn(ue,te);return Re<0?void 0:ue[Re][1]}function Aa(te){return Qn(this.__data__,te)>-1}function oe(te,ue){var Re=this.__data__,Ct=Qn(Re,te);return Ct<0?(++this.size,Re.push([te,ue])):Re[Ct][1]=ue,this}Ti.prototype.clear=Kr,Ti.prototype.delete=au,Ti.prototype.get=Ta,Ti.prototype.has=Aa,Ti.prototype.set=oe;function ee(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function ae(){this.size=0,this.__data__={hash:new Tr,map:new(Oi||Ti),string:new Tr}}function Te(te){var ue=Ve(this,te).delete(te);return this.size-=ue?1:0,ue}function Se(te){return Ve(this,te).get(te)}function st(te){return Ve(this,te).has(te)}function St(te,ue){var Re=Ve(this,te),Ct=Re.size;return Re.set(te,ue),this.size+=Re.size==Ct?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Te,ee.prototype.get=Se,ee.prototype.has=st,ee.prototype.set=St;function Vt(te){var ue=this.__data__=new Ti(te);this.size=ue.size}function Dn(){this.__data__=new Ti,this.size=0}function Fn(te){var ue=this.__data__,Re=ue.delete(te);return this.size=ue.size,Re}function dn(te){return this.__data__.get(te)}function rr(te){return this.__data__.has(te)}function Ar(te,ue){var Re=this.__data__;if(Re instanceof Ti){var Ct=Re.__data__;if(!Oi||Ct.length<n-1)return Ct.push([te,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(Ct)}return Re.set(te,ue),this.size=Re.size,this}Vt.prototype.clear=Dn,Vt.prototype.delete=Fn,Vt.prototype.get=dn,Vt.prototype.has=rr,Vt.prototype.set=Ar;function zt(te,ue){var Re=sp(te),Ct=!Re&&uu(te),On=!Re&&!Ct&&op(te),Er=!Re&&!Ct&&!On&&SR(te),zr=Re||Ct||On||Er,Bn=zr?Ue(te.length,String):[],Vr=Bn.length;for(var Ji in te)zr&&(Ji=="length"||On&&(Ji=="offset"||Ji=="parent")||Er&&(Ji=="buffer"||Ji=="byteLength"||Ji=="byteOffset")||Et(Ji,Vr))||Bn.push(Ji);return Bn}function ir(te,ue,Re){(Re!==void 0&&!Xl(te[ue],Re)||Re===void 0&&!(ue in te))&&Ai(te,ue,Re)}function Ur(te,ue,Re){var Ct=te[ue];(!(me.call(te,ue)&&Xl(Ct,Re))||Re===void 0&&!(ue in te))&&Ai(te,ue,Re)}function Qn(te,ue){for(var Re=te.length;Re--;)if(Xl(te[Re][0],ue))return Re;return-1}function Ai(te,ue,Re){ue=="__proto__"&&Sn?Sn(te,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):te[ue]=Re}var Hs=Oe();function Xr(te){return te==null?te===void 0?T:y:pn&&pn in Object(te)?Ge(te):zo(te)}function mo(te){return lu(te)&&Xr(te)==a}function Mi(te){if(!ap(te)||jn(te))return!1;var ue=US(te)?Ce:U;return ue.test(wR(te))}function Li(te){return lu(te)&&xR(te.length)&&!!j[Xr(te)]}function Uo(te){if(!ap(te))return Ir(te);var ue=Cr(te),Re=[];for(var Ct in te)Ct=="constructor"&&(ue||!me.call(te,Ct))||Re.push(Ct);return Re}function Ca(te,ue,Re,Ct,On){te!==ue&&Hs(ue,function(Er,zr){if(On||(On=new Vt),ap(Er))qs(te,ue,zr,Re,Ca,Ct,On);else{var Bn=Ct?Ct(ip(te,zr),Er,zr+"",te,ue,On):void 0;Bn===void 0&&(Bn=Er),ir(te,zr,Bn)}},Ky)}function qs(te,ue,Re,Ct,On,Er,zr){var Bn=ip(te,Re),Vr=ip(ue,Re),Ji=zr.get(Vr);if(Ji){ir(te,Re,Ji);return}var Vo=Er?Er(Bn,Vr,Re+"",te,ue,zr):void 0,Qy=Vo===void 0;if(Qy){var up=sp(Vr),e_=!up&&op(Vr),t_=!up&&!e_&&SR(Vr);Vo=Vr,up||e_||t_?sp(Bn)?Vo=Bn:ER(Bn)?Vo=fe(Bn):e_?(Qy=!1,Vo=Y(Vr)):t_?(Qy=!1,Vo=Z(Vr)):Vo=[]:y5(Vr)||uu(Vr)?(Vo=Bn,uu(Bn)?Vo=Yy(Bn):(!ap(Bn)||US(Bn))&&(Vo=it(Vr))):Qy=!1}Qy&&(zr.set(Vr,Vo),On(Vo,Vr,Ct,Er,zr),zr.delete(Vr)),ir(te,Re,Vo)}function Kl(te,ue){return BS(fd(te,ue,ug),te+"")}var cd=Sn?function(te,ue){return Sn(te,"toString",{configurable:!0,enumerable:!1,value:Xy(ue),writable:!0})}:ug;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Re=se(te.buffer);return new te.constructor(Re,te.byteOffset,te.length)}function fe(te,ue){var Re=-1,Ct=te.length;for(ue||(ue=Array(Ct));++Re<Ct;)ue[Re]=te[Re];return ue}function ge(te,ue,Re,Ct){var On=!Re;Re||(Re={});for(var Er=-1,zr=ue.length;++Er<zr;){var Bn=ue[Er],Vr=void 0;Vr===void 0&&(Vr=te[Bn]),On?Ai(Re,Bn,Vr):Ur(Re,Bn,Vr)}return Re}function le(te){return Kl(function(ue,Re){var Ct=-1,On=Re.length,Er=On>1?Re[On-1]:void 0,zr=On>2?Re[2]:void 0;for(Er=te.length>3&&typeof Er=="function"?(On--,Er):void 0,zr&&hn(Re[0],Re[1],zr)&&(Er=On<3?void 0:Er,On=1),ue=Object(ue);++Ct<On;){var Bn=Re[Ct];Bn&&te(ue,Bn,Ct,Er)}return ue})}function Oe(te){return function(ue,Re,Ct){for(var On=-1,Er=Object(ue),zr=Ct(ue),Bn=zr.length;Bn--;){var Vr=zr[++On];if(Re(Er[Vr],Vr,Er)===!1)break}return ue}}function Ve(te,ue){var Re=te.__data__;return Nt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function qe(te,ue){var Re=rt(te,ue);return Mi(Re)?Re:void 0}function Ge(te){var ue=me.call(te,pn),Re=te[pn];try{te[pn]=void 0;var Ct=!0}catch{}var On=vt.call(te);return Ct&&(ue?te[pn]=Re:delete te[pn]),On}function it(te){return typeof te.constructor=="function"&&!Cr(te)?$i(Mn(te)):{}}function Et(te,ue){var Re=typeof te;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function hn(te,ue,Re){if(!ap(Re))return!1;var Ct=typeof ue;return(Ct=="number"?Zb(Re)&&Et(ue,Re.length):Ct=="string"&&ue in Re)?Xl(Re[ue],te):!1}function Nt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function jn(te){return!!dt&&dt in te}function Cr(te){var ue=te&&te.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return te===Re}function Ir(te){var ue=[];if(te!=null)for(var Re in Object(te))ue.push(Re);return ue}function zo(te){return vt.call(te)}function fd(te,ue,Re){return ue=nr(ue===void 0?te.length-1:ue,0),function(){for(var Ct=arguments,On=-1,Er=nr(Ct.length-ue,0),zr=Array(Er);++On<Er;)zr[On]=Ct[ue+On];On=-1;for(var Bn=Array(ue+1);++On<ue;)Bn[On]=Ct[On];return Bn[ue]=Re(zr),Ke(te,this,Bn)}}function ip(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var BS=Gy(cd);function Gy(te){var ue=0,Re=0;return function(){var Ct=Bo(),On=s-(Ct-Re);if(Re=Ct,On>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function wR(te){if(te!=null){try{return We.call(te)}catch{}try{return te+""}catch{}}return""}function Xl(te,ue){return te===ue||te!==te&&ue!==ue}var uu=mo(function(){return arguments}())?mo:function(te){return lu(te)&&me.call(te,"callee")&&!Ln.call(te,"callee")},sp=Array.isArray;function Zb(te){return te!=null&&xR(te.length)&&!US(te)}function ER(te){return lu(te)&&Zb(te)}var op=tr||AR;function US(te){if(!ap(te))return!1;var ue=Xr(te);return ue==h||ue==p||ue==l||ue==b}function xR(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function ap(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function lu(te){return te!=null&&typeof te=="object"}function y5(te){if(!lu(te)||Xr(te)!=v)return!1;var ue=Mn(te);if(ue===null)return!0;var Re=me.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&We.call(Re)==pe}var SR=ve?gt(ve):Li;function Yy(te){return ge(te,Ky(te))}function Ky(te){return Zb(te)?zt(te):Uo(te)}var TR=le(function(te,ue,Re){Ca(te,ue,Re)});function Xy(te){return function(){return te}}function ug(te){return te}function AR(){return!1}e.exports=TR})(OO,OO.exports);var Xit=OO.exports;const EY=Hl(Xit);function l1(e){return structuredClone(e)}function xY(){const{answers:e}=Vc(i=>i),t=qm(),r=`${Ty()}_${t}`;return e[r]}const NEe=N.createContext(null);function Qit(){const e=N.useContext(NEe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function ym(){return Vc(e=>e.config)}function Vae(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function PEe(){const e=qm(),t=wY(),r=`${Ty()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Vc(S=>S),a=Bh(),{saveTrialAnswer:u,setIframeAnswers:l}=jh(),{storageEngine:c}=xs(),f=Cb(),[d,h]=N.useState(!0);N.useEffect(()=>{(async()=>{if(c){const T=await c.getModes(f);h(T.dataCollectionEnabled)}})()},[c,f]);const p=Kit(r),m=typeof e!="number"||!p,g=xY(),y=Hm(),v=ym(),b=N.useMemo(()=>Date.now(),[]),w=Qit(),E=N.useCallback(()=>{if(typeof e!="number")return;const S=l1(i[r]),T=Object.values(S).reduce((F,L)=>Object.hasOwn(L,"values")?{...F,...L.values}:F,{}),{provenanceGraph:A}=S,C=Date.now(),I=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:T,startTime:b,endTime:C,provenanceGraph:A,windowEvents:I})),c&&c.saveAnswers({...o,[r]:{answer:T,startTime:b,endTime:C,provenanceGraph:A,windowEvents:I}}),a(l({})));let R=e+1;const O=CEe(s,e),P=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),$={...o,[r]:{answer:T,startTime:b,endTime:C,provenanceGraph:A,windowEvents:I}};P&&[...O.flatMap(L=>L.currentBlock.skip?L.currentBlock.skip.map(B=>({...B,firstIndex:L.firstIndex,lastIndex:L.lastIndex})):[])].some(L=>{let B=!1;const z=Object.fromEntries(Object.entries($).filter(([D])=>{const U=parseInt(D.slice(D.lastIndexOf("_")+1),10);return U>=L.firstIndex&&U<=e})),q=L.check!=="block"?Object.entries(z).filter(([D])=>D.slice(0,D.lastIndexOf("_"))===L.name):Object.entries(z);if(q.length===0)return!1;if(q.some(([D,U])=>!U))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(L,null,2)}`);if(L.check==="response"||L.check==="responses"){const[D,U]=q[0];L.check==="response"?B=L.value!==U.answer[L.responseId]:B=!Vae(U.answer,D,v.components[D.slice(0,D.lastIndexOf("_"))],v)}else if(L.check==="block"||L.check==="repeatedComponent"){if(q.length<L.value)return!1;const D=q.map(([j,H])=>Vae(H.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),U=D.filter(j=>j).length,W=D.length-U;B=L.condition==="numCorrect"&&U===L.value||L.condition==="numIncorrect"&&W===L.value}if(B){const D=t.indexOf(L.to),U=D===-1?Git(s,L.to):-1;return R=D===-1?U:D,!0}return!1}),y(`/${f}/${R}${window.location.search}`)},[i,r,w,g,e,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function Jit({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=PEe(),o=N.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return _.jsx(Rn,{type:"submit",disabled:t||i,onClick:o,children:e})}function Zit(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const est=typeof window<"u"?N.useLayoutEffect:N.useEffect;function yo(e,t){est(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function tst(e,t){e&&Zit(e),yo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),yo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),yo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),yo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),yo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),yo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),yo(`mantine-form:${e}:clear-errors`,t.clearErrors),yo(`mantine-form:${e}:reset`,t.reset),yo(`mantine-form:${e}:validate`,t.validate),yo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),yo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),yo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),yo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),yo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),yo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),yo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),yo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function nst(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function QU(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function rst(e){const[t,n]=N.useState(QU(e)),r=N.useRef(t),i=N.useCallback(u=>{n(l=>{const c=QU(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=N.useCallback(()=>i({}),[]),o=N.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=N.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function DEe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Hae(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function qae(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=DEe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Hae(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Hae(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function ist(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Wae(e,t,n){typeof n.value=="object"&&(n.value=rw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function rw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(rw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(rw(a),rw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(rw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Wae(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Wae(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function OEe(e){return typeof e!="string"?[]:e.split(".")}function Ru(e,t){const n=OEe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function BL(e,t,n){const r=OEe(e);if(r.length===0)return n;const i=rw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function sst(e,{from:t,to:n},r){const i=Ru(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),BL(e,s,r)}function ost(e,t,n,r){const i=Ru(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),BL(e,s,r)}function ast(e,t,n){const r=Ru(e,n);return Array.isArray(r)?BL(e,r.filter((i,s)=>s!==t),n):n}function ust({$values:e,$errors:t,$status:n}){const r=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>ist(o,a,u)),e.setValues({values:sst(o,a,e.refValues.current),updateState:!0})},[]),i=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>qae(o,a,u,-1)),e.setValues({values:ast(o,a,e.refValues.current),updateState:!0})},[]),s=N.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>qae(o,u,l,1)),e.setValues({values:ost(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var SY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const zP=Hl(SY);function uN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function lst({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=N.useState(t),[o,a]=N.useState(e),u=N.useRef(t),l=N.useRef(e),c=N.useCallback(E=>{const S=typeof E=="function"?E(u.current):E;u.current=S,n==="controlled"&&s(S)},[]),f=N.useCallback(E=>{const S=typeof E=="function"?E(l.current):E;l.current=S,n==="controlled"&&a(S)},[]),d=N.useCallback(()=>c({}),[]),h=E=>{const S=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=N.useCallback((E,S)=>{c(T=>uN(T,E)===S?T:{...T,[E]:S})},[]),m=N.useCallback((E,S)=>{f(T=>uN(T,E)===S?T:{...T,[E]:S})},[]),g=N.useCallback(E=>uN(u.current,E),[]),y=N.useCallback(E=>f(S=>{if(typeof E!="string")return S;const T=DEe(E,S);return delete T[E],zP(T,S)?S:T}),[]),v=N.useCallback(E=>{if(E){const T=Ru(E,l.current);if(typeof T=="boolean")return T;const A=Ru(E,r.refValues.current),C=Ru(E,r.valuesSnapshot.current);return!zP(A,C)}return Object.keys(l.current).length>0?uN(l.current):!zP(r.refValues.current,r.valuesSnapshot.current)},[]),b=N.useCallback(()=>l.current,[]),w=N.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function cst({initialValues:e,onValuesChange:t,mode:n}){const r=N.useRef(!1),[i,s]=N.useState(e||{}),o=N.useRef(i),a=N.useRef(i),u=N.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=N.useCallback(p=>{var y;const m=Ru(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=BL(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=N.useCallback(p=>{a.current=p},[]),f=N.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=N.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=N.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function fst({$status:e}){const t=N.useRef({}),n=N.useCallback((i,s)=>{N.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=N.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Ru(i,o.previousValues),value:Ru(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Gae(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Yae(e){const t=QU(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function JU(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Ru(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>JU(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||JU(o,t,a,i)),i},r)}function ZU(e,t){return Yae(typeof e=="function"?e(t):JU(e,t))}function lN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=ZU(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const dst="__MANTINE_FORM_INDEX__";function Kae(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${dst}`)):!1:!1}function $Ee({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=rst(r),p=cst({initialValues:n,onValuesChange:l,mode:t}),m=lst({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=ust({$values:p,$errors:h,$status:m}),y=fst({$status:m}),[v,b]=N.useState(0),[w,E]=N.useState({}),S=N.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(D=>D+1)},[]),T=N.useCallback(D=>{p.initialize(D,()=>t==="uncontrolled"&&b(U=>U+1))},[]),A=N.useCallback((D,U,W)=>{const j=Kae(D,a);m.clearFieldDirty(D),m.setFieldTouched(D,!0),!j&&o&&h.clearFieldError(D),p.setFieldValue({path:D,value:U,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(D),j?H=>{const G=lN(D,d,H.updatedValues);G.hasError?h.setFieldError(D,G.error):h.clearFieldError(D)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(H=>({...H,[D]:(H[D]||0)+1})):null]})},[l,d]),C=N.useCallback(D=>{const U=p.refValues.current;p.setValues({values:D,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Ru(W,p.refValues.current),H=Ru(W,U);j!==H&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:U,updatedValues:p.refValues.current}))})},[l,o]),I=N.useCallback(()=>{const D=ZU(d,p.refValues.current);return h.setErrors(D.errors),D},[d]),R=N.useCallback(D=>{const U=lN(D,d,p.refValues.current);return U.hasError?h.setFieldError(D,U.error):h.clearFieldError(D),U},[d]),O=(D,{type:U="input",withError:W=!0,withFocus:j=!0,...H}={})=>{const ne={onChange:nst(ce=>A(D,ce,{forceUpdate:!1})),"data-path":Gae(e,D)};return W&&(ne.error=h.errorsState[D]),U==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=Ru(D,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=Ru(D,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(D,!0),ne.onBlur=()=>{if(Kae(D,u)){const ce=lN(D,d,p.refValues.current);ce.hasError?h.setFieldError(D,ce.error):h.clearFieldError(D)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:D,options:{type:U,withError:W,withFocus:j,...H},form:q}))},P=(D,U)=>W=>{W==null||W.preventDefault();const j=I();j.hasErrors?U==null||U(j.errors,p.refValues.current,W):D==null||D(c(p.refValues.current),W)},$=D=>c(D||p.refValues.current),F=N.useCallback(D=>{D.preventDefault(),S()},[]),L=N.useCallback(D=>D?!lN(D,d,p.refValues.current).hasError:!ZU(d,p.refValues.current).hasErrors,[d]),B=D=>`${v}-${D}-${w[D]||0}`,z=N.useCallback(D=>document.querySelector(`[data-path="${Gae(e,D)}"]`),[]),q={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:C,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:I,validateField:R,getInputProps:O,onSubmit:P,onReset:F,isValid:L,getTransformedValues:$,key:B,getInputNode:z};return tst(e,q),q}function hst(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function pst(e){return hst(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const mst=new URLSearchParams(window.location.search),gst=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?mst.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},yst=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function vst(e,t,n){const[r,i]=N.useState(null),s=$Ee({initialValues:gst(e,n),validate:yst(e)});return N.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Ib(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function bst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return _.jsx(dm.Group,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ya,{text:s,required:o})})]}),description:u,...n,error:Ib(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Fs,{mt:"xs",children:a.map(l=>_.jsx(dm,{disabled:t,value:l.value,label:l.label},l.value))})})}function _st({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return _.jsx(BI,{disabled:t,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ya,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:Ib(e,n,u)})}function wst({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(di.Wrapper,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ya,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(Nf,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(Nf.Item,{children:a},a)):_.jsx(Nf.Item,{children:t.value})})})}function MEe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return _.jsx(I1.Group,{name:`radioInput${e.id}`,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ya,{text:s,required:o})})]}),description:c,...n,error:Ib(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(Fs,{mt:"xs",children:[u?_.jsx(ot,{style:{textAlign:"center"},children:u}):null,a.map(f=>_.jsx(I1,{disabled:t,value:f.value,label:f.label},f.label)),_.jsx(ot,{children:l})]})},e.id)}function Est({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(MEe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function xst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(TG,{disabled:t,placeholder:l,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ya,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Ib(e,n)})}function Sst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Ib(e,n);return _.jsx(di.Wrapper,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ya,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(SL,{disabled:t,marks:a,...n,h:40})})}function Tst({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(u1,{disabled:t,placeholder:s,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ya,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Ib(e,n)})}function Ast({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(hG,{disabled:t,placeholder:s,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ya,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Ib(e,n)})}function Cst({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=WG(),u=ym().uiConfig.enumerateQuestions??!1,l=N.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(_e,{mb:"md",children:[e.type==="numerical"&&_.jsx(xst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(Tst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(Ast,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(Est,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(_st,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(Sst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(MEe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(bst,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(wst,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function $O({config:e,location:t,status:n,style:r}){var w;const i=qm(),s=Ty(),o=n==null?void 0:n.answer,a=e,u=N.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(S=>S.location?S.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Bh(),{updateResponseBlockValidation:c}=jh(),f=vst(u,i,o||{}),[d,h]=N.useState(void 0),[p,m]=N.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Vc(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return N.useEffect(()=>{const E=u.find(S=>S.type==="iframe");if(g&&E){const S=E.id;f.setValues({...f.values,[S]:g[S]})}},[g]),N.useEffect(()=>{y&&h(y)},[y]),N.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:l1(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),_.jsxs("div",{style:r,children:[u.map((E,S)=>{var T,A;return _.jsx(Wi.Fragment,{children:E.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(Cst,{storedAnswer:o?o[E.id]:void 0,answer:{...f.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E,index:S+1}),v&&p&&_.jsx(ot,{children:`The correct answer is: ${(A=(T=a.correctAnswer)==null?void 0:T.find(C=>C.id===E.id))==null?void 0:A.answer}`})]})},`${E.id}-${i}`)}),_.jsxs(Fs,{justify:"right",gap:"xs",children:[v&&b&&_.jsx(Rn,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&_.jsx(Jit,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const iT="@REVISIT_COMMS",Ist={minHeight:"500px",width:"100%",border:0};function kst({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=jh(),r=Bh(),i=cEe(),s=N.useRef(null),o=N.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Ty(),u=Hm(),l=N.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${iT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return N.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${iT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${iT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${iT}/ANSWERS`:r(t(d.message));break;case`${iT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${Lh}${e.path}?trialid=${a}&id=${o}`,style:Ist})}async function TY(e){const n=await(await fetch(`${Lh}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function N1({email:e,path:t}){const n=Sb();return _.jsxs(Ic,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(ki,{order:2,children:_.jsx(ot,{span:!0,c:"orange",children:"404"})}),_.jsxs(ot,{children:[_.jsx(ot,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(Ec,{h:"lg"}),_.jsxs(Nf,{children:[_.jsx(Nf.Item,{children:_.jsx(ot,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(Nf.Item,{children:_.jsxs(ot,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Rx,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Rst={maxWidth:"100%"};function Nst({currentConfig:e}){const t={...Rst,...e.style},[n,r]=N.useState(!0),[i,s]=N.useState(!1);return N.useEffect(()=>{async function o(){const a=await TY(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Ey,{mx:"auto",src:`${Lh}${e.path}`,style:t}):_.jsx(N1,{path:e.path})}function Kp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Pst(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vx(e){let t,n,r;e.length!==2?(t=Kp,n=(a,u)=>Kp(e(a),u),r=(a,u)=>e(a)-u):(t=e===Kp||e===Pst?e:Dst,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Dst(){return 0}function LEe(e){return e===null?NaN:+e}function*Ost(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const FEe=Vx(Kp),O0=FEe.right,$st=FEe.left;Vx(LEe).center;function Mst(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Lst(e,t){const n=Mst(e,t);return n&&Math.sqrt(n)}function Xae(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class qa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Qae extends Map{constructor(t,n=UEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(e7(this,t))}has(t){return super.has(e7(this,t))}set(t,n){return super.set(jEe(this,t),n)}delete(t){return super.delete(BEe(this,t))}}class MO extends Set{constructor(t,n=UEe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(e7(this,t))}add(t){return super.add(jEe(this,t))}delete(t){return super.delete(BEe(this,t))}}function e7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function jEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function BEe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function UEe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Fst(e,t){return Array.from(t,n=>e[n])}function jst(e=Kp){if(e===Kp)return zEe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function zEe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Bst=Math.sqrt(50),Ust=Math.sqrt(10),zst=Math.sqrt(2);function LO(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Bst?10:s>=Ust?5:s>=zst?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?LO(e,t,n*2):[a,u,l]}function t7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?LO(t,e,n):LO(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function n7(e,t,n){return t=+t,e=+e,n=+n,LO(e,t,n)[2]}function $0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?n7(t,e,n):n7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function d0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function r7(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function VEe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?zEe:jst(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));VEe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(sT(e,n,t),i(e[r],s)>0&&sT(e,n,r);o<a;){for(sT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?sT(e,n,a):(++a,sT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function sT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function i7(e,t,n){if(e=Float64Array.from(Ost(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return r7(e);if(t>=1)return d0(e);var r,i=(r-1)*t,s=Math.floor(i),o=d0(VEe(e,s).subarray(0,s+1)),a=r7(e.subarray(s+1));return o+(a-o)*(i-s)}}function HEe(e,t,n=LEe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Vst(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function qEe(e,t){return i7(e,.5,t)}function*Hst(e){for(const t of e)yield*t}function WEe(e){return Array.from(Hst(e))}function Nu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function GEe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function qst(e,...t){e=new MO(e),t=t.map(Wst);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Wst(e){return e instanceof MO?e:new MO(e)}function Gst(...e){const t=new MO;for(const n of e)for(const r of n)t.add(r);return t}var Yst={value:()=>{}};function UL(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new VP(n)}function VP(e){this._=e}function Kst(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}VP.prototype=UL.prototype={constructor:VP,on:function(e,t){var n=this._,r=Kst(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Xst(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Jae(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Jae(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new VP(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Xst(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Jae(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Yst,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var s7="http://www.w3.org/1999/xhtml";const Zae={svg:"http://www.w3.org/2000/svg",xhtml:s7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function zL(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Zae.hasOwnProperty(t)?{space:Zae[t],local:e}:e}function Qst(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===s7&&t.documentElement.namespaceURI===s7?t.createElement(e):t.createElementNS(n,e)}}function Jst(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function YEe(e){var t=zL(e);return(t.local?Jst:Qst)(t)}function Zst(){}function AY(e){return e==null?Zst:function(){return this.querySelector(e)}}function eot(e){typeof e!="function"&&(e=AY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Ka(r,this._parents)}function KEe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function tot(){return[]}function XEe(e){return e==null?tot:function(){return this.querySelectorAll(e)}}function not(e){return function(){return KEe(e.apply(this,arguments))}}function rot(e){typeof e=="function"?e=not(e):e=XEe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Ka(r,i)}function QEe(e){return function(){return this.matches(e)}}function JEe(e){return function(t){return t.matches(e)}}var iot=Array.prototype.find;function sot(e){return function(){return iot.call(this.children,e)}}function oot(){return this.firstElementChild}function aot(e){return this.select(e==null?oot:sot(typeof e=="function"?e:JEe(e)))}var uot=Array.prototype.filter;function lot(){return Array.from(this.children)}function cot(e){return function(){return uot.call(this.children,e)}}function fot(e){return this.selectAll(e==null?lot:cot(typeof e=="function"?e:JEe(e)))}function dot(e){typeof e!="function"&&(e=QEe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Ka(r,this._parents)}function ZEe(e){return new Array(e.length)}function hot(){return new Ka(this._enter||this._groups.map(ZEe),this._parents)}function FO(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}FO.prototype={constructor:FO,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function pot(e){return function(){return e}}function mot(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new FO(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function got(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new FO(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function yot(e){return e.__data__}function vot(e,t){if(!arguments.length)return Array.from(this,yot);var n=t?got:mot,r=this._parents,i=this._groups;typeof e!="function"&&(e=pot(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=bot(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new Ka(o,r),o._enter=a,o._exit=u,o}function bot(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _ot(){return new Ka(this._exit||this._groups.map(ZEe),this._parents)}function wot(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Eot(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Ka(a,this._parents)}function xot(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Sot(e){e||(e=Tot);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Ka(i,this._parents).order()}function Tot(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Aot(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Cot(){return Array.from(this)}function Iot(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function kot(){let e=0;for(const t of this)++e;return e}function Rot(){return!this.node()}function Not(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Pot(e){return function(){this.removeAttribute(e)}}function Dot(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Oot(e,t){return function(){this.setAttribute(e,t)}}function $ot(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Mot(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Lot(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Fot(e,t){var n=zL(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Dot:Pot:typeof t=="function"?n.local?Lot:Mot:n.local?$ot:Oot)(n,t))}function exe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function jot(e){return function(){this.style.removeProperty(e)}}function Bot(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Uot(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function zot(e,t,n){return arguments.length>1?this.each((t==null?jot:typeof t=="function"?Uot:Bot)(e,t,n??"")):bE(this.node(),e)}function bE(e,t){return e.style.getPropertyValue(t)||exe(e).getComputedStyle(e,null).getPropertyValue(t)}function Vot(e){return function(){delete this[e]}}function Hot(e,t){return function(){this[e]=t}}function qot(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Wot(e,t){return arguments.length>1?this.each((t==null?Vot:typeof t=="function"?qot:Hot)(e,t)):this.node()[e]}function txe(e){return e.trim().split(/^|\s+/)}function CY(e){return e.classList||new nxe(e)}function nxe(e){this._node=e,this._names=txe(e.getAttribute("class")||"")}nxe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function rxe(e,t){for(var n=CY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ixe(e,t){for(var n=CY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Got(e){return function(){rxe(this,e)}}function Yot(e){return function(){ixe(this,e)}}function Kot(e,t){return function(){(t.apply(this,arguments)?rxe:ixe)(this,e)}}function Xot(e,t){var n=txe(e+"");if(arguments.length<2){for(var r=CY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Kot:t?Got:Yot)(n,t))}function Qot(){this.textContent=""}function Jot(e){return function(){this.textContent=e}}function Zot(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function eat(e){return arguments.length?this.each(e==null?Qot:(typeof e=="function"?Zot:Jot)(e)):this.node().textContent}function tat(){this.innerHTML=""}function nat(e){return function(){this.innerHTML=e}}function rat(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function iat(e){return arguments.length?this.each(e==null?tat:(typeof e=="function"?rat:nat)(e)):this.node().innerHTML}function sat(){this.nextSibling&&this.parentNode.appendChild(this)}function oat(){return this.each(sat)}function aat(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uat(){return this.each(aat)}function lat(e){var t=typeof e=="function"?e:YEe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function cat(){return null}function fat(e,t){var n=typeof e=="function"?e:YEe(e),r=t==null?cat:typeof t=="function"?t:AY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function dat(){var e=this.parentNode;e&&e.removeChild(this)}function hat(){return this.each(dat)}function pat(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mat(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gat(e){return this.select(e?mat:pat)}function yat(e){return arguments.length?this.property("__data__",e):this.node().__data__}function vat(e){return function(t){e.call(this,t,this.__data__)}}function bat(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function _at(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function wat(e,t,n){return function(){var r=this.__on,i,s=vat(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Eat(e,t,n){var r=bat(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?wat:_at,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function sxe(e,t,n){var r=exe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xat(e,t){return function(){return sxe(this,e,t)}}function Sat(e,t){return function(){return sxe(this,e,t.apply(this,arguments))}}function Tat(e,t){return this.each((typeof t=="function"?Sat:xat)(e,t))}function*Aat(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var IY=[null];function Ka(e,t){this._groups=e,this._parents=t}function KI(){return new Ka([[document.documentElement]],IY)}function Cat(){return this}Ka.prototype=KI.prototype={constructor:Ka,select:eot,selectAll:rot,selectChild:aot,selectChildren:fot,filter:dot,data:vot,enter:hot,exit:_ot,join:wot,merge:Eot,selection:Cat,order:xot,sort:Sot,call:Aot,nodes:Cot,node:Iot,size:kot,empty:Rot,each:Not,attr:Fot,style:zot,property:Wot,classed:Xot,text:eat,html:iat,raise:oat,lower:uat,append:lat,insert:fat,remove:hat,clone:gat,datum:yat,on:Eat,dispatch:Tat,[Symbol.iterator]:Aat};function ms(e){return typeof e=="string"?new Ka([[document.querySelector(e)]],[document.documentElement]):new Ka([[e]],IY)}function Iat(e){let t;for(;t=e.sourceEvent;)e=t;return e}function o7(e,t){if(e=Iat(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function kat(e){return typeof e=="string"?new Ka([document.querySelectorAll(e)],[document.documentElement]):new Ka([KEe(e)],IY)}const a7={capture:!0,passive:!1};function u7(e){e.preventDefault(),e.stopImmediatePropagation()}function Rat(e){var t=e.document.documentElement,n=ms(e).on("dragstart.drag",u7,a7);"onselectstart"in t?n.on("selectstart.drag",u7,a7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Nat(e,t){var n=e.document.documentElement,r=ms(e).on("dragstart.drag",null);t&&(r.on("click.drag",u7,a7),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Hx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function XI(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ay(){}var P1=.7,_E=1/P1,Rw="\\s*([+-]?\\d+)\\s*",f2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",th="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Pat=/^#([0-9a-f]{3,8})$/,Dat=new RegExp(`^rgb\\(${Rw},${Rw},${Rw}\\)$`),Oat=new RegExp(`^rgb\\(${th},${th},${th}\\)$`),$at=new RegExp(`^rgba\\(${Rw},${Rw},${Rw},${f2}\\)$`),Mat=new RegExp(`^rgba\\(${th},${th},${th},${f2}\\)$`),Lat=new RegExp(`^hsl\\(${f2},${th},${th}\\)$`),Fat=new RegExp(`^hsla\\(${f2},${th},${th},${f2}\\)$`),eue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hx(Ay,D1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tue,formatHex:tue,formatHex8:jat,formatHsl:Bat,formatRgb:nue,toString:nue});function tue(){return this.rgb().formatHex()}function jat(){return this.rgb().formatHex8()}function Bat(){return oxe(this).formatHsl()}function nue(){return this.rgb().formatRgb()}function D1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Pat.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?rue(t):n===3?new no(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?cN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?cN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Dat.exec(e))?new no(t[1],t[2],t[3],1):(t=Oat.exec(e))?new no(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$at.exec(e))?cN(t[1],t[2],t[3],t[4]):(t=Mat.exec(e))?cN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Lat.exec(e))?oue(t[1],t[2]/100,t[3]/100,1):(t=Fat.exec(e))?oue(t[1],t[2]/100,t[3]/100,t[4]):eue.hasOwnProperty(e)?rue(eue[e]):e==="transparent"?new no(NaN,NaN,NaN,0):null}function rue(e){return new no(e>>16&255,e>>8&255,e&255,1)}function cN(e,t,n,r){return r<=0&&(e=t=n=NaN),new no(e,t,n,r)}function kY(e){return e instanceof Ay||(e=D1(e)),e?(e=e.rgb(),new no(e.r,e.g,e.b,e.opacity)):new no}function M0(e,t,n,r){return arguments.length===1?kY(e):new no(e,t,n,r??1)}function no(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Hx(no,M0,XI(Ay,{brighter(e){return e=e==null?_E:Math.pow(_E,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?P1:Math.pow(P1,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new no(c1(this.r),c1(this.g),c1(this.b),jO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:iue,formatHex:iue,formatHex8:Uat,formatRgb:sue,toString:sue}));function iue(){return`#${qv(this.r)}${qv(this.g)}${qv(this.b)}`}function Uat(){return`#${qv(this.r)}${qv(this.g)}${qv(this.b)}${qv((isNaN(this.opacity)?1:this.opacity)*255)}`}function sue(){const e=jO(this.opacity);return`${e===1?"rgb(":"rgba("}${c1(this.r)}, ${c1(this.g)}, ${c1(this.b)}${e===1?")":`, ${e})`}`}function jO(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function c1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function qv(e){return e=c1(e),(e<16?"0":"")+e.toString(16)}function oue(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yf(e,t,n,r)}function oxe(e){if(e instanceof yf)return new yf(e.h,e.s,e.l,e.opacity);if(e instanceof Ay||(e=D1(e)),!e)return new yf;if(e instanceof yf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new yf(o,a,u,e.opacity)}function BO(e,t,n,r){return arguments.length===1?oxe(e):new yf(e,t,n,r??1)}function yf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hx(yf,BO,XI(Ay,{brighter(e){return e=e==null?_E:Math.pow(_E,e),new yf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?P1:Math.pow(P1,e),new yf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new no(P8(e>=240?e-240:e+120,i,r),P8(e,i,r),P8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new yf(aue(this.h),fN(this.s),fN(this.l),jO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=jO(this.opacity);return`${e===1?"hsl(":"hsla("}${aue(this.h)}, ${fN(this.s)*100}%, ${fN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function aue(e){return e=(e||0)%360,e<0?e+360:e}function fN(e){return Math.max(0,Math.min(1,e||0))}function P8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const axe=Math.PI/180,uxe=180/Math.PI,UO=18,lxe=.96422,cxe=1,fxe=.82521,dxe=4/29,Nw=6/29,hxe=3*Nw*Nw,zat=Nw*Nw*Nw;function pxe(e){if(e instanceof nh)return new nh(e.l,e.a,e.b,e.opacity);if(e instanceof Lp)return mxe(e);e instanceof no||(e=kY(e));var t=M8(e.r),n=M8(e.g),r=M8(e.b),i=D8((.2225045*t+.7168786*n+.0606169*r)/cxe),s,o;return t===n&&n===r?s=o=i:(s=D8((.4360747*t+.3850649*n+.1430804*r)/lxe),o=D8((.0139322*t+.0971045*n+.7141733*r)/fxe)),new nh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function zO(e,t,n,r){return arguments.length===1?pxe(e):new nh(e,t,n,r??1)}function nh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Hx(nh,zO,XI(Ay,{brighter(e){return new nh(this.l+UO*(e??1),this.a,this.b,this.opacity)},darker(e){return new nh(this.l-UO*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=lxe*O8(t),e=cxe*O8(e),n=fxe*O8(n),new no($8(3.1338561*t-1.6168667*e-.4906146*n),$8(-.9787684*t+1.9161415*e+.033454*n),$8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function D8(e){return e>zat?Math.pow(e,1/3):e/hxe+dxe}function O8(e){return e>Nw?e*e*e:hxe*(e-dxe)}function $8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function M8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Vat(e){if(e instanceof Lp)return new Lp(e.h,e.c,e.l,e.opacity);if(e instanceof nh||(e=pxe(e)),e.a===0&&e.b===0)return new Lp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*uxe;return new Lp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function VO(e,t,n,r){return arguments.length===1?Vat(e):new Lp(e,t,n,r??1)}function Lp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function mxe(e){if(isNaN(e.h))return new nh(e.l,0,0,e.opacity);var t=e.h*axe;return new nh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Hx(Lp,VO,XI(Ay,{brighter(e){return new Lp(this.h,this.c,this.l+UO*(e??1),this.opacity)},darker(e){return new Lp(this.h,this.c,this.l-UO*(e??1),this.opacity)},rgb(){return mxe(this).rgb()}}));var gxe=-.14861,RY=1.78277,NY=-.29227,VL=-.90649,d2=1.97294,uue=d2*VL,lue=d2*RY,cue=RY*NY-VL*gxe;function Hat(e){if(e instanceof f1)return new f1(e.h,e.s,e.l,e.opacity);e instanceof no||(e=kY(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(cue*r+uue*t-lue*n)/(cue+uue-lue),s=r-i,o=(d2*(n-i)-NY*s)/VL,a=Math.sqrt(o*o+s*s)/(d2*i*(1-i)),u=a?Math.atan2(o,s)*uxe-120:NaN;return new f1(u<0?u+360:u,a,i,e.opacity)}function l7(e,t,n,r){return arguments.length===1?Hat(e):new f1(e,t,n,r??1)}function f1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Hx(f1,l7,XI(Ay,{brighter(e){return e=e==null?_E:Math.pow(_E,e),new f1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?P1:Math.pow(P1,e),new f1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*axe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new no(255*(t+n*(gxe*r+RY*i)),255*(t+n*(NY*r+VL*i)),255*(t+n*(d2*r)),this.opacity)}}));function yxe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function vxe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return yxe((n-r/t)*t,o,i,s,a)}}function bxe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return yxe((n-r/t)*t,i,s,o,a)}}const HL=e=>()=>e;function _xe(e,t){return function(n){return e+n*t}}function qat(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function qL(e,t){var n=t-e;return n?_xe(e,n>180||n<-180?n-360*Math.round(n/360):n):HL(isNaN(e)?t:e)}function Wat(e){return(e=+e)==1?ro:function(t,n){return n-t?qat(t,n,e):HL(isNaN(t)?n:t)}}function ro(e,t){var n=t-e;return n?_xe(e,n):HL(isNaN(e)?t:e)}const h2=function e(t){var n=Wat(t);function r(i,s){var o=n((i=M0(i)).r,(s=M0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=ro(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function wxe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=M0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Gat=wxe(vxe),Yat=wxe(bxe);function PY(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Exe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Kat(e,t){return(Exe(t)?PY:xxe)(e,t)}function xxe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Wm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function Sxe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function cc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Txe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Wm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var c7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L8=new RegExp(c7.source,"g");function Xat(e){return function(){return e}}function Qat(e){return function(t){return e(t)+""}}function DY(e,t){var n=c7.lastIndex=L8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=c7.exec(e))&&(i=L8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:cc(r,i)})),n=L8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Qat(u[0].x):Xat(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Wm(e,t){var n=typeof t,r;return t==null||n==="boolean"?HL(t):(n==="number"?cc:n==="string"?(r=D1(t))?(t=r,h2):DY:t instanceof D1?h2:t instanceof Date?Sxe:Exe(t)?PY:Array.isArray(t)?xxe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Txe:cc)(e,t)}function Jat(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Zat(e,t){var n=qL(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function QI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var fue=180/Math.PI,f7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Axe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*fue,skewX:Math.atan(u)*fue,scaleX:o,scaleY:a}}var dN;function eut(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?f7:Axe(t.a,t.b,t.c,t.d,t.e,t.f)}function tut(e){return e==null||(dN||(dN=document.createElementNS("http://www.w3.org/2000/svg","g")),dN.setAttribute("transform",e),!(e=dN.transform.baseVal.consolidate()))?f7:(e=e.matrix,Axe(e.a,e.b,e.c,e.d,e.e,e.f))}function Cxe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:cc(l,f)},{i:m-2,x:cc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:cc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:cc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:cc(l,f)},{i:m-2,x:cc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var Ixe=Cxe(eut,"px, ","px)","deg)"),kxe=Cxe(tut,", ",")",")"),nut=1e-12;function due(e){return((e=Math.exp(e))+1/e)/2}function rut(e){return((e=Math.exp(e))-1/e)/2}function iut(e){return((e=Math.exp(2*e))-1)/(e+1)}const sut=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<nut)y=Math.log(d/l)/t,g=function(T){return[a+T*h,u+T*p,l*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-E)/t,g=function(T){var A=T*y,C=due(E),I=l/(n*v)*(C*iut(t*A+E)-rut(E));return[a+I*h,u+I*p,l*C/due(t*A+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function Rxe(e){return function(t,n){var r=e((t=BO(t)).h,(n=BO(n)).h),i=ro(t.s,n.s),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const out=Rxe(qL);var aut=Rxe(ro);function uut(e,t){var n=ro((e=zO(e)).l,(t=zO(t)).l),r=ro(e.a,t.a),i=ro(e.b,t.b),s=ro(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function Nxe(e){return function(t,n){var r=e((t=VO(t)).h,(n=VO(n)).h),i=ro(t.c,n.c),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const lut=Nxe(qL);var cut=Nxe(ro);function Pxe(e){return function t(n){n=+n;function r(i,s){var o=e((i=l7(i)).h,(s=l7(s)).h),a=ro(i.s,s.s),u=ro(i.l,s.l),l=ro(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const fut=Pxe(qL);var dut=Pxe(ro);function OY(e,t){t===void 0&&(t=e,e=Wm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function hut(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const put=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Wm,interpolateArray:Kat,interpolateBasis:vxe,interpolateBasisClosed:bxe,interpolateCubehelix:fut,interpolateCubehelixLong:dut,interpolateDate:Sxe,interpolateDiscrete:Jat,interpolateHcl:lut,interpolateHclLong:cut,interpolateHsl:out,interpolateHslLong:aut,interpolateHue:Zat,interpolateLab:uut,interpolateNumber:cc,interpolateNumberArray:PY,interpolateObject:Txe,interpolateRgb:h2,interpolateRgbBasis:Gat,interpolateRgbBasisClosed:Yat,interpolateRound:QI,interpolateString:DY,interpolateTransformCss:Ixe,interpolateTransformSvg:kxe,interpolateZoom:sut,piecewise:OY,quantize:hut},Symbol.toStringTag,{value:"Module"}));var wE=0,QT=0,oT=0,Dxe=1e3,HO,JT,qO=0,O1=0,WL=0,p2=typeof performance=="object"&&performance.now?performance:Date,Oxe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function GL(){return O1||(Oxe(mut),O1=p2.now()+WL)}function mut(){O1=0}function m2(){this._call=this._time=this._next=null}m2.prototype=$Y.prototype={constructor:m2,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?GL():+n)+(t==null?0:+t),!this._next&&JT!==this&&(JT?JT._next=this:HO=this,JT=this),this._call=e,this._time=n,d7()},stop:function(){this._call&&(this._call=null,this._time=1/0,d7())}};function $Y(e,t,n){var r=new m2;return r.restart(e,t,n),r}function gut(){GL(),++wE;for(var e=HO,t;e;)(t=O1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--wE}function hue(){O1=(qO=p2.now())+WL,wE=QT=0;try{gut()}finally{wE=0,vut(),O1=0}}function yut(){var e=p2.now(),t=e-qO;t>Dxe&&(WL-=t,qO=e)}function vut(){for(var e,t=HO,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:HO=n);JT=e,d7(r)}function d7(e){if(!wE){QT&&(QT=clearTimeout(QT));var t=e-O1;t>24?(e<1/0&&(QT=setTimeout(hue,e-p2.now()-WL)),oT&&(oT=clearInterval(oT))):(oT||(qO=p2.now(),oT=setInterval(yut,Dxe)),wE=1,Oxe(hue))}}function pue(e,t,n){var r=new m2;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function but(e,t,n){var r=new m2,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?GL():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var _ut=UL("start","end","cancel","interrupt"),wut=[],$xe=0,mue=1,h7=2,HP=3,gue=4,p7=5,qP=6;function YL(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Eut(e,n,{name:t,index:r,group:i,on:_ut,tween:wut,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:$xe})}function MY(e,t){var n=Qf(e,t);if(n.state>$xe)throw new Error("too late; already scheduled");return n}function Uh(e,t){var n=Qf(e,t);if(n.state>HP)throw new Error("too late; already running");return n}function Qf(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Eut(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=$Y(s,0,n.time);function s(l){n.state=mue,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==mue)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===HP)return pue(o);h.state===gue?(h.state=qP,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=qP,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(pue(function(){n.state===HP&&(n.state=gue,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=h7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===h7){for(n.state=HP,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=p7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===p7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=qP,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function m7(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>h7&&r.state<p7,r.state=qP,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function xut(e){return this.each(function(){m7(this,e)})}function Sut(e,t){var n,r;return function(){var i=Uh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Tut(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Uh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Aut(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Qf(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Sut:Tut)(n,e,t))}function LY(e,t,n){var r=e._id;return e.each(function(){var i=Uh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Qf(i,r).value[t]}}function Mxe(e,t){var n;return(typeof t=="number"?cc:t instanceof D1?h2:(n=D1(t))?(t=n,h2):DY)(e,t)}function Cut(e){return function(){this.removeAttribute(e)}}function Iut(e){return function(){this.removeAttributeNS(e.space,e.local)}}function kut(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Rut(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Nut(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Put(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function Dut(e,t){var n=zL(e),r=n==="transform"?kxe:Mxe;return this.attrTween(e,typeof t=="function"?(n.local?Put:Nut)(n,r,LY(this,"attr."+e,t)):t==null?(n.local?Iut:Cut)(n):(n.local?Rut:kut)(n,r,t))}function Out(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function $ut(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Mut(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&$ut(e,s)),n}return i._value=t,i}function Lut(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Out(e,s)),n}return i._value=t,i}function Fut(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=zL(e);return this.tween(n,(r.local?Mut:Lut)(r,t))}function jut(e,t){return function(){MY(this,e).delay=+t.apply(this,arguments)}}function But(e,t){return t=+t,function(){MY(this,e).delay=t}}function Uut(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?jut:But)(t,e)):Qf(this.node(),t).delay}function zut(e,t){return function(){Uh(this,e).duration=+t.apply(this,arguments)}}function Vut(e,t){return t=+t,function(){Uh(this,e).duration=t}}function Hut(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zut:Vut)(t,e)):Qf(this.node(),t).duration}function qut(e,t){if(typeof t!="function")throw new Error;return function(){Uh(this,e).ease=t}}function Wut(e){var t=this._id;return arguments.length?this.each(qut(t,e)):Qf(this.node(),t).ease}function Gut(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Uh(this,e).ease=n}}function Yut(e){if(typeof e!="function")throw new Error;return this.each(Gut(this._id,e))}function Kut(e){typeof e!="function"&&(e=QEe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new vm(r,this._parents,this._name,this._id)}function Xut(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new vm(o,this._parents,this._name,this._id)}function Qut(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Jut(e,t,n){var r,i,s=Qut(t)?MY:Uh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Zut(e,t){var n=this._id;return arguments.length<2?Qf(this.node(),n).on.on(e):this.each(Jut(n,e,t))}function elt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function tlt(){return this.on("end.remove",elt(this._id))}function nlt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=AY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,YL(l[d],t,n,d,l,Qf(c,n)));return new vm(s,this._parents,t,n)}function rlt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=XEe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=Qf(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&YL(h,t,n,m,d,p);s.push(d),o.push(c)}return new vm(s,o,t,n)}var ilt=KI.prototype.constructor;function slt(){return new ilt(this._groups,this._parents)}function olt(e,t){var n,r,i;return function(){var s=bE(this,e),o=(this.style.removeProperty(e),bE(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Lxe(e){return function(){this.style.removeProperty(e)}}function alt(e,t,n){var r,i=n+"",s;return function(){var o=bE(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function ult(e,t,n){var r,i,s;return function(){var o=bE(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),bE(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function llt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Uh(this,e),l=u.on,c=u.value[s]==null?a||(a=Lxe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function clt(e,t,n){var r=(e+="")=="transform"?Ixe:Mxe;return t==null?this.styleTween(e,olt(e,r)).on("end.style."+e,Lxe(e)):typeof t=="function"?this.styleTween(e,ult(e,r,LY(this,"style."+e,t))).each(llt(this._id,e)):this.styleTween(e,alt(e,r,t),n).on("end.style."+e,null)}function flt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function dlt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&flt(e,o,n)),r}return s._value=t,s}function hlt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,dlt(e,t,n??""))}function plt(e){return function(){this.textContent=e}}function mlt(e){return function(){var t=e(this);this.textContent=t??""}}function glt(e){return this.tween("text",typeof e=="function"?mlt(LY(this,"text",e)):plt(e==null?"":e+""))}function ylt(e){return function(t){this.textContent=e.call(this,t)}}function vlt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&ylt(i)),t}return r._value=e,r}function blt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,vlt(e))}function _lt(){for(var e=this._name,t=this._id,n=Fxe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=Qf(u,t);YL(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new vm(r,this._parents,e,n)}function wlt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Uh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Elt=0;function vm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Fxe(){return++Elt}var lp=KI.prototype;vm.prototype={constructor:vm,select:nlt,selectAll:rlt,selectChild:lp.selectChild,selectChildren:lp.selectChildren,filter:Kut,merge:Xut,selection:slt,transition:_lt,call:lp.call,nodes:lp.nodes,node:lp.node,size:lp.size,empty:lp.empty,each:lp.each,on:Zut,attr:Dut,attrTween:Fut,style:clt,styleTween:hlt,text:glt,textTween:blt,remove:tlt,tween:Aut,delay:Uut,duration:Hut,ease:Wut,easeVarying:Yut,end:wlt,[Symbol.iterator]:lp[Symbol.iterator]};const xlt=e=>+e;function Slt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Tlt={time:null,delay:0,duration:250,ease:Slt};function Alt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Clt(e){var t,n;e instanceof vm?(t=e._id,e=e._name):(t=Fxe(),(n=Tlt).time=GL(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&YL(u,e,t,l,o,n||Alt(u,t));return new vm(r,this._parents,e,t)}KI.prototype.interrupt=xut;KI.prototype.transition=Clt;const F8=e=>()=>e;function Ilt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function klt(e){e.stopImmediatePropagation()}function j8(e){e.preventDefault(),e.stopImmediatePropagation()}var yue={name:"drag"},B8={name:"space"},f_={name:"handle"},d_={name:"center"};const{abs:vue,max:Yo,min:Ko}=Math;function bue(e){return[+e[0],+e[1]]}function g7(e){return[bue(e[0]),bue(e[1])]}var WP={name:"x",handles:["w","e"].map(g2),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},GP={name:"y",handles:["n","s"].map(g2),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Rlt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(g2),input:function(e){return e==null?null:g7(e)},output:function(e){return e}},cp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},_ue={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},wue={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Nlt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Plt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function g2(e){return{type:e}}function Dlt(e){return!e.ctrlKey&&!e.button}function Olt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function $lt(){return navigator.maxTouchPoints||"ontouchstart"in this}function U8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function Mlt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Llt(){return FY(WP)}function Flt(){return FY(GP)}function jlt(){return FY(Rlt)}function FY(e){var t=Olt,n=Dlt,r=$lt,i=!0,s=UL("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([g2("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cp.overlay).merge(y).each(function(){var b=U8(this).extent;ms(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([g2("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return cp[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),S=w.selection,T=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),A=Wm(S,T);function C(I){w.selection=I===1&&T===null?null:A(I),l.call(b),E.brush()}return S!==null&&T!==null?C:C(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,S=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),T=c(b,w).beforestart();m7(b),E.selection=S===null?null:S,l.call(b),T.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=ms(this),y=U8(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=ms(this.that).datum();s.call(g,this.that,new Ilt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?yue:i&&g.altKey?d_:f_,w=e===GP?null:Nlt[v],E=e===WP?null:Plt[v],S=U8(y),T=S.extent,A=S.selection,C=T[0][0],I,R,O=T[0][1],P,$,F=T[1][0],L,B,z=T[1][1],q,D,U=0,W=0,j,H=w&&E&&i&&g.shiftKey,G,ne,ce=Array.from(g.touches||[g],be=>{const ke=be.identifier;return be=o7(be,y),be.point0=be.slice(),be.identifier=ke,be});m7(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(j=!0);const be=[ce[0],ce[1]||ce[0]];S.selection=A=[[I=e===GP?C:Ko(be[0][0],be[1][0]),P=e===WP?O:Ko(be[0][1],be[1][1])],[L=e===GP?F:Yo(be[0][0],be[1][0]),q=e===WP?z:Yo(be[0][1],be[1][1])]],ce.length>1&&Ke(g)}else I=A[0][0],P=A[0][1],L=A[1][0],q=A[1][1];R=I,$=P,B=L,D=q;var he=ms(y).attr("pointer-events","none"),ye=he.selectAll(".overlay").attr("cursor",cp[v]);if(g.touches)de.moved=ve,de.ended=Ue;else{var Ie=ms(g.view).on("mousemove.brush",ve,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",gt,!0).on("keyup.brush",rt,!0),Rat(g.view)}l.call(y),de.start(g,b.name);function ve(be){for(const ke of be.changedTouches||[be])for(const ze of ce)ze.identifier===ke.identifier&&(ze.cur=o7(ke,y));if(H&&!G&&!ne&&ce.length===1){const ke=ce[0];vue(ke.cur[0]-ke[0])>vue(ke.cur[1]-ke[1])?ne=!0:G=!0}for(const ke of ce)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,j8(be),Ke(be)}function Ke(be){const ke=ce[0],ze=ke.point0;var ct;switch(U=ke[0]-ze[0],W=ke[1]-ze[1],b){case B8:case yue:{w&&(U=Yo(C-I,Ko(F-L,U)),R=I+U,B=L+U),E&&(W=Yo(O-P,Ko(z-q,W)),$=P+W,D=q+W);break}case f_:{ce[1]?(w&&(R=Yo(C,Ko(F,ce[0][0])),B=Yo(C,Ko(F,ce[1][0])),w=1),E&&($=Yo(O,Ko(z,ce[0][1])),D=Yo(O,Ko(z,ce[1][1])),E=1)):(w<0?(U=Yo(C-I,Ko(F-I,U)),R=I+U,B=L):w>0&&(U=Yo(C-L,Ko(F-L,U)),R=I,B=L+U),E<0?(W=Yo(O-P,Ko(z-P,W)),$=P+W,D=q):E>0&&(W=Yo(O-q,Ko(z-q,W)),$=P,D=q+W));break}case d_:{w&&(R=Yo(C,Ko(F,I-U*w)),B=Yo(C,Ko(F,L+U*w))),E&&($=Yo(O,Ko(z,P-W*E)),D=Yo(O,Ko(z,q+W*E)));break}}B<R&&(w*=-1,ct=I,I=L,L=ct,ct=R,R=B,B=ct,v in _ue&&ye.attr("cursor",cp[v=_ue[v]])),D<$&&(E*=-1,ct=P,P=q,q=ct,ct=$,$=D,D=ct,v in wue&&ye.attr("cursor",cp[v=wue[v]])),S.selection&&(A=S.selection),G&&(R=A[0][0],B=A[1][0]),ne&&($=A[0][1],D=A[1][1]),(A[0][0]!==R||A[0][1]!==$||A[1][0]!==B||A[1][1]!==D)&&(S.selection=[[R,$],[B,D]],l.call(y),de.brush(be,b.name))}function Ue(be){if(klt(be),be.touches){if(be.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else Nat(be.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ye.attr("cursor",cp.overlay),S.selection&&(A=S.selection),Mlt(A)&&(S.selection=null,l.call(y)),de.end(be,b.name)}function gt(be){switch(be.keyCode){case 16:{H=w&&E;break}case 18:{b===f_&&(w&&(L=B-U*w,I=R+U*w),E&&(q=D-W*E,P=$+W*E),b=d_,Ke(be));break}case 32:{(b===f_||b===d_)&&(w<0?L=B-U:w>0&&(I=R-U),E<0?q=D-W:E>0&&(P=$-W),b=B8,ye.attr("cursor",cp.selection),Ke(be));break}default:return}j8(be)}function rt(be){switch(be.keyCode){case 16:{H&&(G=ne=H=!1,Ke(be));break}case 18:{b===d_&&(w<0?L=B:w>0&&(I=R),E<0?q=D:E>0&&(P=$),b=f_,Ke(be));break}case 32:{b===B8&&(be.altKey?(w&&(L=B-U*w,I=R+U*w),E&&(q=D-W*E,P=$+W*E),b=d_):(w<0?L=B:w>0&&(I=R),E<0?q=D:E>0&&(P=$),b=f_),ye.attr("cursor",cp[v]),Ke(be));break}default:return}j8(be)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=g7(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:F8(g7(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:F8(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:F8(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const y7=Math.PI,v7=2*y7,pv=1e-6,Blt=v7-pv;function jxe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ult(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return jxe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let jY=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?jxe:Ult(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>pv)if(!(Math.abs(f*u-l*c)>pv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((y7-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>pv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>pv||Math.abs(this._y1-c)>pv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%v7+v7),d>Blt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>pv&&this._append`A${r},${r},0,${+(d>=y7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function KL(){return new jY}KL.prototype=jY.prototype;const Xp=11102230246251565e-32,Xo=134217729,zlt=(3+8*Xp)*Xp;function z8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Vlt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function JI(e){return new Float64Array(e)}const Hlt=(3+16*Xp)*Xp,qlt=(2+12*Xp)*Xp,Wlt=(9+64*Xp)*Xp*Xp,h_=JI(4),Eue=JI(8),xue=JI(12),Sue=JI(16),ka=JI(4);function Glt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,S,T,A;const C=e-i,I=n-i,R=t-s,O=r-s;w=C*O,d=Xo*C,h=d-(d-C),p=C-h,d=Xo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),S=R*I,d=Xo*R,h=d-(d-R),p=R-h,d=Xo*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,h_[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,h_[1]=b-(y+f)+(f-S),A=v+y,f=A-v,h_[2]=v-(A-f)+(y-f),h_[3]=A;let P=Vlt(4,h_),$=qlt*o;if(P>=$||-P>=$||(f=e-C,a=e-(C+f)+(f-i),f=n-I,l=n-(I+f)+(f-i),f=t-R,u=t-(R+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=Wlt*o+zlt*Math.abs(P),P+=C*c+O*a-(R*l+I*u),P>=$||-P>=$))return P;w=a*O,d=Xo*a,h=d-(d-a),p=a-h,d=Xo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),S=u*I,d=Xo*u,h=d-(d-u),p=u-h,d=Xo*I,m=d-(d-I),g=I-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,ka[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,ka[1]=b-(y+f)+(f-S),A=v+y,f=A-v,ka[2]=v-(A-f)+(y-f),ka[3]=A;const F=z8(4,h_,4,ka,Eue);w=C*c,d=Xo*C,h=d-(d-C),p=C-h,d=Xo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=R*l,d=Xo*R,h=d-(d-R),p=R-h,d=Xo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,ka[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,ka[1]=b-(y+f)+(f-S),A=v+y,f=A-v,ka[2]=v-(A-f)+(y-f),ka[3]=A;const L=z8(F,Eue,4,ka,xue);w=a*c,d=Xo*a,h=d-(d-a),p=a-h,d=Xo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=u*l,d=Xo*u,h=d-(d-u),p=u-h,d=Xo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,ka[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,ka[1]=b-(y+f)+(f-S),A=v+y,f=A-v,ka[2]=v-(A-f)+(y-f),ka[3]=A;const B=z8(L,xue,4,ka,Sue);return Sue[B-1]}function hN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=Hlt*l?u:-Glt(e,t,n,r,i,s,l)}const Tue=Math.pow(2,-52),pN=new Uint32Array(512);class WO{static from(t,n=Jlt,r=Zlt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new WO(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const I=t[2*C],R=t[2*C+1];I<a&&(a=I),R<u&&(u=R),I>l&&(l=I),R>c&&(c=R),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let C=0,I=1/0;C<o;C++){const R=V8(f,d,t[2*C],t[2*C+1]);R<I&&(h=C,I=R)}const g=t[2*h],y=t[2*h+1];for(let C=0,I=1/0;C<o;C++){if(C===h)continue;const R=V8(g,y,t[2*C],t[2*C+1]);R<I&&R>0&&(p=C,I=R)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let C=0;C<o;C++){if(C===h||C===p)continue;const I=Xlt(g,y,v,b,t[2*C],t[2*C+1]);I<w&&(m=C,w=I)}let E=t[2*m],S=t[2*m+1];if(w===1/0){for(let R=0;R<o;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];iw(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let I=0;for(let R=0,O=-1/0;R<o;R++){const P=this._ids[R],$=this._dists[P];$>O&&(C[I++]=P,O=$)}this.hull=C.subarray(0,I),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(hN(g,y,v,b,E,S)<0){const C=p,I=v,R=b;p=m,v=E,b=S,m=C,E=I,S=R}const T=Qlt(g,y,v,b,E,S);this._cx=T.x,this._cy=T.y;for(let C=0;C<o;C++)this._dists[C]=V8(t[2*C],t[2*C+1],T.x,T.y);iw(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let C=0,I,R;C<this._ids.length;C++){const O=this._ids[C],P=t[2*O],$=t[2*O+1];if(C>0&&Math.abs(P-I)<=Tue&&Math.abs($-R)<=Tue||(I=P,R=$,O===h||O===p||O===m))continue;let F=0;for(let D=0,U=this._hashKey(P,$);D<this._hashSize&&(F=s[(U+D)%this._hashSize],!(F!==-1&&F!==r[F]));D++);F=n[F];let L=F,B;for(;B=r[L],hN(P,$,t[2*L],t[2*L+1],t[2*B],t[2*B+1])>=0;)if(L=B,L===F){L=-1;break}if(L===-1)continue;let z=this._addTriangle(L,O,r[L],-1,-1,i[L]);i[O]=this._legalize(z+2),i[L]=z,A++;let q=r[L];for(;B=r[q],hN(P,$,t[2*q],t[2*q+1],t[2*B],t[2*B+1])<0;)z=this._addTriangle(q,O,B,i[O],-1,i[q]),i[O]=this._legalize(z+2),r[q]=q,A--,q=B;if(L===F)for(;B=n[L],hN(P,$,t[2*B],t[2*B+1],t[2*L],t[2*L+1])<0;)z=this._addTriangle(B,O,L,-1,i[L],i[B]),this._legalize(z+2),i[B]=z,r[L]=L,A--,L=B;this._hullStart=n[O]=L,r[L]=n[q]=O,r[O]=q,s[this._hashKey(P,$)]=O,s[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(A);for(let C=0,I=this._hullStart;C<A;C++)this.hull[C]=I,I=r[I];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Ylt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=pN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(Klt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<pN.length&&(pN[s++]=v)}else{if(s===0)break;t=pN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Ylt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function V8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Klt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function Xlt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function Qlt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function iw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;aT(e,i,s),t[e[n]]>t[e[r]]&&aT(e,n,r),t[e[s]]>t[e[r]]&&aT(e,s,r),t[e[n]]>t[e[s]]&&aT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;aT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(iw(e,t,s,r),iw(e,t,n,o-1)):(iw(e,t,n,o-1),iw(e,t,s,r))}}function aT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Jlt(e){return e[0]}function Zlt(e){return e[1]}const Aue=1e-6;class Wv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Aue||Math.abs(this._y1-s)>Aue)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class b7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let ect=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,T=t[w],A=t[w+1],C=t[E],I=t[E+1],R=t[S],O=t[S+1],P=C-T,$=I-A,F=R-T,L=O-A,B=(P*L-$*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const q of n)s+=t[q*2],o+=t[q*2+1];s/=n.length,o/=n.length}const z=1e9*Math.sign((s-T)*L-(o-A)*F);v=(T+R)/2-z*L,b=(A+O)/2+z*F}else{const z=1/B,q=P*P+$*$,D=F*F+L*L;v=T+(L*q-$*D)*z,b=A+(P*D-F*q)*z}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Wv:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Wv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Wv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new b7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const tct=2*Math.PI,p_=Math.pow;function nct(e){return e[0]}function rct(e){return e[1]}function ict(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function sct(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class BY{static from(t,n=nct,r=rct,i){return new BY("length"in t?oct(t,n,r,i):Float64Array.from(act(t,n,r,i)))}constructor(t){this._delaunator=new WO(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&ict(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=sct(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new WO(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new ect(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=p_(n-l[t*2],2)+p_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=p_(n-l[p*2],2)+p_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&p_(n-l[h*2],2)+p_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Wv:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Wv:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,tct)}return r&&r.value()}renderHull(t){const n=t==null?t=new Wv:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new b7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Wv:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new b7;return this.renderTriangle(t,n),n.value()}}function oct(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*act(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Cue={},H8={},q8=34,uT=10,W8=13;function Bxe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function uct(e,t){var n=Bxe(e);return function(r,i){return t(n(r),i,e)}}function Iue(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function pu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function lct(e){return e<0?"-"+pu(-e,6):e>9999?"+"+pu(e,6):pu(e,4)}function cct(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":lct(e.getUTCFullYear())+"-"+pu(e.getUTCMonth()+1,2)+"-"+pu(e.getUTCDate(),2)+(i?"T"+pu(t,2)+":"+pu(n,2)+":"+pu(r,2)+"."+pu(i,3)+"Z":r?"T"+pu(t,2)+":"+pu(n,2)+":"+pu(r,2)+"Z":n||t?"T"+pu(t,2)+":"+pu(n,2)+"Z":"")}function Uxe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?uct(g,d):Bxe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===uT&&--p,f.charCodeAt(p-1)===W8&&--p;function w(){if(v)return H8;if(b)return b=!1,Cue;var S,T=m,A;if(f.charCodeAt(T)===q8){for(;m++<p&&f.charCodeAt(m)!==q8||f.charCodeAt(++m)===q8;);return(S=m)>=p?v=!0:(A=f.charCodeAt(m++))===uT?b=!0:A===W8&&(b=!0,f.charCodeAt(m)===uT&&++m),f.slice(T+1,S-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(S=m++))===uT)b=!0;else if(A===W8)b=!0,f.charCodeAt(m)===uT&&++m;else if(A!==n)continue;return f.slice(T,S)}return v=!0,f.slice(T,p)}for(;(y=w())!==H8;){for(var E=[];y!==Cue&&y!==H8;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Iue(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Iue(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?cct(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var fct=Uxe(","),dct=fct.parse;function hct(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function pct(e,t){return fetch(e,t).then(hct)}function mct(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),pct(t,n).then(function(i){return e(i,r)})}}var gct=mct(dct);function yct(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function vct(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return zxe(this.cover(t,n),t,n,e)}function zxe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function bct(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)zxe(this,o[n],a[n],e[n]);return this}function _ct(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function wct(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Ect(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ja(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function xct(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new ja(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new ja(h[3],g,y,u,l),new ja(h[2],o,y,g,l),new ja(h[1],g,a,u,y),new ja(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function Sct(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Tct(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Act(){return this._root}function Cct(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Ict(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new ja(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new ja(i,l,c,a,u)),(i=r[2])&&t.push(new ja(i,s,c,l,u)),(i=r[1])&&t.push(new ja(i,l,o,a,c)),(i=r[0])&&t.push(new ja(i,s,o,l,c))}return this}function kct(e){var t=[],n=[],r;for(this._root&&t.push(new ja(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new ja(s,o,a,c,f)),(s=i[1])&&t.push(new ja(s,c,a,u,f)),(s=i[2])&&t.push(new ja(s,o,f,c,l)),(s=i[3])&&t.push(new ja(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Rct(e){return e[0]}function Nct(e){return arguments.length?(this._x=e,this):this._x}function Pct(e){return e[1]}function Dct(e){return arguments.length?(this._y=e,this):this._y}function UY(e,t,n){var r=new zY(t??Rct,n??Pct,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function zY(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function kue(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ru=UY.prototype=zY.prototype;ru.copy=function(){var e=new zY(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=kue(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=kue(r));return e};ru.add=vct;ru.addAll=bct;ru.cover=_ct;ru.data=wct;ru.extent=Ect;ru.find=xct;ru.remove=Sct;ru.removeAll=Tct;ru.root=Act;ru.size=Cct;ru.visit=Ict;ru.visitAfter=kct;ru.x=Nct;ru.y=Dct;function za(e){return function(){return e}}function Hg(e){return(e()-.5)*1e-6}function Oct(e){return e.x+e.vx}function $ct(e){return e.y+e.vy}function Mct(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=za(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=UY(t,Oct,$ct).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,S,T){var A=b.data,C=b.r,I=m+C;if(A){if(A.index>d.index){var R=h-A.x-A.vx,O=p-A.y-A.vy,P=R*R+O*O;P<I*I&&(R===0&&(R=Hg(r),P+=R*R),O===0&&(O=Hg(r),P+=O*O),P=(I-(P=Math.sqrt(P)))/P*i,d.vx+=(R*=P)*(I=(C*=C)/(g+C)),d.vy+=(O*=P)*I,A.vx-=R*(I=1-I),A.vy-=O*I)}return}return w>h+I||S<h-I||E>p+I||T<p-I}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:za(+l),u(),o):e},o}function Lct(e){return e.index}function Rue(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Fct(e){var t=Lct,n=f,r,i=za(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,S,T,A,C,I;b<v;++b)w=e[b],E=w.source,S=w.target,T=S.x+S.vx-E.x-E.vx||Hg(l),A=S.y+S.vy-E.y-E.vy||Hg(l),C=Math.sqrt(T*T+A*A),C=(C-s[b])/C*g*r[b],T*=C,A*=C,S.vx-=T*(I=u[b]),S.vy-=A*I,E.vx+=T*(I=1-I),E.vy+=A*I}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,S)=>[t(E,S,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Rue(b,w.source)),typeof w.target!="object"&&(w.target=Rue(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:za(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:za(+g),m(),d):i},d}const jct=1664525,Bct=1013904223,Nue=4294967296;function Uct(){let e=1;return()=>(e=(jct*e+Bct)%Nue)/Nue}function zct(e){return e.x}function Vct(e){return e.y}var Hct=10,qct=Math.PI*(3-Math.sqrt(5));function Wct(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=$Y(f),l=UL("tick","end"),c=Uct();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Hct*Math.sqrt(.5+m),b=m*qct;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,S,T,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)T=e[v],w=m-T.x,E=g-T.y,S=w*w+E*E,S<y&&(A=T,y=S);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function Gct(){var e,t,n,r,i=za(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=UY(e,zct,Vct).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=Hg(n),w+=y*y),v===0&&(v=Hg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Hg(n),w+=y*y),v===0&&(v=Hg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:za(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Yct(e){var t=za(.1),n,r,i;typeof e!="function"&&(e=za(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:za(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:za(+a),o(),s):e},s}function Kct(e){var t=za(.1),n,r,i;typeof e!="function"&&(e=za(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:za(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:za(+a),o(),s):e},s}function Xct(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function GO(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function EE(e){return e=GO(Math.abs(e)),e?e[1]:NaN}function Qct(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Jct(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Zct=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $1(e){if(!(t=Zct.exec(e)))throw new Error("invalid format: "+e);var t;return new VY({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$1.prototype=VY.prototype;function VY(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}VY.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eft(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var Vxe;function tft(e,t){var n=GO(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Vxe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+GO(e,Math.max(0,t+s-1))[0]}function Pue(e,t){var n=GO(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Due={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Xct,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Pue(e*100,t),r:Pue,s:tft,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Oue(e){return e}var $ue=Array.prototype.map,Mue=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Hxe(e){var t=e.grouping===void 0||e.thousands===void 0?Oue:Qct($ue.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Oue:Jct($ue.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=$1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):Due[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=m==="$"?r:/[%p]/.test(E)?o:"",A=Due[E],C=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function I(R){var O=S,P=T,$,F,L;if(E==="c")P=A(R)+P,R="";else{R=+R;var B=R<0||1/R<0;if(R=isNaN(R)?u:A(Math.abs(R),b),w&&(R=eft(R)),B&&+R==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,P=(E==="s"?Mue[8+Vxe/3]:"")+P+(B&&p==="("?")":""),C){for($=-1,F=R.length;++$<F;)if(L=R.charCodeAt($),48>L||L>57){P=(L===46?i+R.slice($+1):R.slice($))+P,R=R.slice(0,$);break}}}v&&!g&&(R=t(R,1/0));var z=O.length+R.length+P.length,q=z<y?new Array(y-z+1).join(d):"";switch(v&&g&&(R=t(q+R,q.length?y-P.length:1/0),q=""),h){case"<":R=O+R+P+q;break;case"=":R=O+q+R+P;break;case"^":R=q.slice(0,z=q.length>>1)+O+R+P+q.slice(z);break;default:R=q+O+R+P;break}return s(R)}return I.toString=function(){return f+""},I}function c(f,d){var h=l((f=$1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(EE(d)/3)))*3,m=Math.pow(10,-p),g=Mue[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var mN,qx,HY;nft({thousands:",",grouping:[3],currency:["$",""]});function nft(e){return mN=Hxe(e),qx=mN.format,HY=mN.formatPrefix,mN}function qxe(e){return Math.max(0,-EE(Math.abs(e)))}function Wxe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(EE(t)/3)))*3-EE(Math.abs(e)))}function Gxe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,EE(t)-EE(e))+1}var jt=1e-6,YO=1e-12,Nn=Math.PI,Gi=Nn/2,KO=Nn/4,Xa=Nn*2,ns=180/Nn,In=Nn/180,Kn=Math.abs,Wx=Math.atan,kc=Math.atan2,Ut=Math.cos,gN=Math.ceil,Yxe=Math.exp,_7=Math.hypot,XO=Math.log,G8=Math.pow,Lt=Math.sin,yc=Math.sign||function(e){return e>0?1:e<0?-1:0},Qa=Math.sqrt,qY=Math.tan;function Kxe(e){return e>1?0:e<-1?Nn:Math.acos(e)}function Wu(e){return e>1?Gi:e<-1?-Gi:Math.asin(e)}function Io(){}function QO(e,t){e&&Fue.hasOwnProperty(e.type)&&Fue[e.type](e,t)}var Lue={Feature:function(e,t){QO(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)QO(n[r].geometry,t)}},Fue={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){w7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)w7(n[r],t,0)},Polygon:function(e,t){jue(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)jue(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)QO(n[r],t)}};function w7(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function jue(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)w7(e[n],t,1);t.polygonEnd()}function Ip(e,t){e&&Lue.hasOwnProperty(e.type)?Lue[e.type](e,t):QO(e,t)}var JO=new qa,ZO=new qa,Xxe,Qxe,E7,x7,S7,mh={point:Io,lineStart:Io,lineEnd:Io,polygonStart:function(){JO=new qa,mh.lineStart=rft,mh.lineEnd=ift},polygonEnd:function(){var e=+JO;ZO.add(e<0?Xa+e:e),this.lineStart=this.lineEnd=this.point=Io},sphere:function(){ZO.add(Xa)}};function rft(){mh.point=sft}function ift(){Jxe(Xxe,Qxe)}function sft(e,t){mh.point=Jxe,Xxe=e,Qxe=t,e*=In,t*=In,E7=e,x7=Ut(t=t/2+KO),S7=Lt(t)}function Jxe(e,t){e*=In,t*=In,t=t/2+KO;var n=e-E7,r=n>=0?1:-1,i=r*n,s=Ut(t),o=Lt(t),a=S7*o,u=x7*s+a*Ut(i),l=a*r*Lt(i);JO.add(kc(l,u)),E7=e,x7=s,S7=o}function oft(e){return ZO=new qa,Ip(e,mh),ZO*2}function e3(e){return[kc(e[1],e[0]),Wu(e[2])]}function M1(e){var t=e[0],n=e[1],r=Ut(n);return[r*Ut(t),r*Lt(t),Lt(n)]}function yN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function xE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Y8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function vN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function t3(e){var t=Qa(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ci,xu,Fi,pl,mv,Zxe,eSe,Pw,eC,Sg,bm,xp={point:T7,lineStart:Bue,lineEnd:Uue,polygonStart:function(){xp.point=nSe,xp.lineStart=aft,xp.lineEnd=uft,eC=new qa,mh.polygonStart()},polygonEnd:function(){mh.polygonEnd(),xp.point=T7,xp.lineStart=Bue,xp.lineEnd=Uue,JO<0?(Ci=-(Fi=180),xu=-(pl=90)):eC>jt?pl=90:eC<-jt&&(xu=-90),bm[0]=Ci,bm[1]=Fi},sphere:function(){Ci=-(Fi=180),xu=-(pl=90)}};function T7(e,t){Sg.push(bm=[Ci=e,Fi=e]),t<xu&&(xu=t),t>pl&&(pl=t)}function tSe(e,t){var n=M1([e*In,t*In]);if(Pw){var r=xE(Pw,n),i=[r[1],-r[0],0],s=xE(i,r);t3(s),s=e3(s);var o=e-mv,a=o>0?1:-1,u=s[0]*ns*a,l,c=Kn(o)>180;c^(a*mv<u&&u<a*e)?(l=s[1]*ns,l>pl&&(pl=l)):(u=(u+360)%360-180,c^(a*mv<u&&u<a*e)?(l=-s[1]*ns,l<xu&&(xu=l)):(t<xu&&(xu=t),t>pl&&(pl=t))),c?e<mv?dl(Ci,e)>dl(Ci,Fi)&&(Fi=e):dl(e,Fi)>dl(Ci,Fi)&&(Ci=e):Fi>=Ci?(e<Ci&&(Ci=e),e>Fi&&(Fi=e)):e>mv?dl(Ci,e)>dl(Ci,Fi)&&(Fi=e):dl(e,Fi)>dl(Ci,Fi)&&(Ci=e)}else Sg.push(bm=[Ci=e,Fi=e]);t<xu&&(xu=t),t>pl&&(pl=t),Pw=n,mv=e}function Bue(){xp.point=tSe}function Uue(){bm[0]=Ci,bm[1]=Fi,xp.point=T7,Pw=null}function nSe(e,t){if(Pw){var n=e-mv;eC.add(Kn(n)>180?n+(n>0?360:-360):n)}else Zxe=e,eSe=t;mh.point(e,t),tSe(e,t)}function aft(){mh.lineStart()}function uft(){nSe(Zxe,eSe),mh.lineEnd(),Kn(eC)>jt&&(Ci=-(Fi=180)),bm[0]=Ci,bm[1]=Fi,Pw=null}function dl(e,t){return(t-=e)<0?t+360:t}function lft(e,t){return e[0]-t[0]}function zue(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function cft(e){var t,n,r,i,s,o,a;if(pl=Fi=-(Ci=xu=1/0),Sg=[],Ip(e,xp),n=Sg.length){for(Sg.sort(lft),t=1,r=Sg[0],s=[r];t<n;++t)i=Sg[t],zue(r,i[0])||zue(r,i[1])?(dl(r[0],i[1])>dl(r[0],r[1])&&(r[1]=i[1]),dl(i[0],r[1])>dl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=dl(r[1],i[0]))>o&&(o=a,Ci=i[0],Fi=r[1])}return Sg=bm=null,Ci===1/0||xu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ci,xu],[Fi,pl]]}var ZT,n3,r3,i3,s3,o3,a3,u3,A7,C7,I7,rSe,iSe,Ma,La,Fa,xf={sphere:Io,point:WY,lineStart:Vue,lineEnd:Hue,polygonStart:function(){xf.lineStart=hft,xf.lineEnd=pft},polygonEnd:function(){xf.lineStart=Vue,xf.lineEnd=Hue}};function WY(e,t){e*=In,t*=In;var n=Ut(t);ZI(n*Ut(e),n*Lt(e),Lt(t))}function ZI(e,t,n){++ZT,r3+=(e-r3)/ZT,i3+=(t-i3)/ZT,s3+=(n-s3)/ZT}function Vue(){xf.point=fft}function fft(e,t){e*=In,t*=In;var n=Ut(t);Ma=n*Ut(e),La=n*Lt(e),Fa=Lt(t),xf.point=dft,ZI(Ma,La,Fa)}function dft(e,t){e*=In,t*=In;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=kc(Qa((o=La*s-Fa*i)*o+(o=Fa*r-Ma*s)*o+(o=Ma*i-La*r)*o),Ma*r+La*i+Fa*s);n3+=o,o3+=o*(Ma+(Ma=r)),a3+=o*(La+(La=i)),u3+=o*(Fa+(Fa=s)),ZI(Ma,La,Fa)}function Hue(){xf.point=WY}function hft(){xf.point=mft}function pft(){sSe(rSe,iSe),xf.point=WY}function mft(e,t){rSe=e,iSe=t,e*=In,t*=In,xf.point=sSe;var n=Ut(t);Ma=n*Ut(e),La=n*Lt(e),Fa=Lt(t),ZI(Ma,La,Fa)}function sSe(e,t){e*=In,t*=In;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=La*s-Fa*i,a=Fa*r-Ma*s,u=Ma*i-La*r,l=_7(o,a,u),c=Wu(l),f=l&&-c/l;A7.add(f*o),C7.add(f*a),I7.add(f*u),n3+=c,o3+=c*(Ma+(Ma=r)),a3+=c*(La+(La=i)),u3+=c*(Fa+(Fa=s)),ZI(Ma,La,Fa)}function gft(e){ZT=n3=r3=i3=s3=o3=a3=u3=0,A7=new qa,C7=new qa,I7=new qa,Ip(e,xf);var t=+A7,n=+C7,r=+I7,i=_7(t,n,r);return i<YO&&(t=o3,n=a3,r=u3,n3<jt&&(t=r3,n=i3,r=s3),i=_7(t,n,r),i<YO)?[NaN,NaN]:[kc(n,t)*ns,Wu(r/i)*ns]}function k7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function R7(e,t){return Kn(e)>Nn&&(e-=Math.round(e/Xa)*Xa),[e,t]}R7.invert=R7;function oSe(e,t,n){return(e%=Xa)?t||n?k7(Wue(e),Gue(t,n)):Wue(e):t||n?Gue(t,n):R7}function que(e){return function(t,n){return t+=e,Kn(t)>Nn&&(t-=Math.round(t/Xa)*Xa),[t,n]}}function Wue(e){var t=que(e);return t.invert=que(-e),t}function Gue(e,t){var n=Ut(e),r=Lt(e),i=Ut(t),s=Lt(t);function o(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*n+c*r;return[kc(f*i-h*s,c*n-d*r),Wu(h*i+f*s)]}return o.invert=function(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*i-f*s;return[kc(f*i+d*s,c*n+h*r),Wu(h*n-c*r)]},o}function yft(e){e=oSe(e[0]*In,e[1]*In,e.length>2?e[2]*In:0);function t(n){return n=e(n[0]*In,n[1]*In),n[0]*=ns,n[1]*=ns,n}return t.invert=function(n){return n=e.invert(n[0]*In,n[1]*In),n[0]*=ns,n[1]*=ns,n},t}function vft(e,t,n,r,i,s){if(n){var o=Ut(t),a=Lt(t),u=r*n;i==null?(i=t+r*Xa,s=t-u/2):(i=Yue(o,i),s=Yue(o,s),(r>0?i<s:i>s)&&(i+=r*Xa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=e3([o,-a*Ut(c),-a*Lt(c)]),e.point(l[0],l[1])}}function Yue(e,t){t=M1(t),t[0]-=e,t3(t);var n=Kxe(-t[1]);return((-t[2]<0?-n:n)+Xa-jt)%Xa}function aSe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Io,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function YP(e,t){return Kn(e[0]-t[0])<jt&&Kn(e[1]-t[1])<jt}function bN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function uSe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(YP(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*jt}s.push(v=new bN(g,p,null,!0)),o.push(v.o=new bN(g,null,v,!1)),s.push(v=new bN(y,p,null,!1)),o.push(v.o=new bN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Kue(s),Kue(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Kue(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function K8(e){return Kn(e[0])<=Nn?e[0]:yc(e[0])*((Kn(e[0])+Nn)%Xa-Nn)}function bft(e,t){var n=K8(t),r=t[1],i=Lt(r),s=[Lt(n),-Ut(n),0],o=0,a=0,u=new qa;i===1?r=Gi+jt:i===-1&&(r=-Gi-jt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=K8(h),m=h[1]/2+KO,g=Lt(m),y=Ut(m),v=0;v<d;++v,p=w,g=S,y=T,h=b){var b=f[v],w=K8(b),E=b[1]/2+KO,S=Lt(E),T=Ut(E),A=w-p,C=A>=0?1:-1,I=C*A,R=I>Nn,O=g*S;if(u.add(kc(O*C*Lt(I),y*T+O*Ut(I))),o+=R?A+C*Xa:A,R^p>=n^w>=n){var P=xE(M1(h),M1(b));t3(P);var $=xE(s,P);t3($);var F=(R^A>=0?-1:1)*Wu($[2]);(r>F||r===F&&(P[0]||P[1]))&&(a+=R^A>=0?1:-1)}}return(o<-jt||o<jt&&u<-YO)^a&1}function lSe(e,t,n,r){return function(i){var s=t(i),o=aSe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=WEe(c);var w=bft(l,r);c.length?(u||(i.polygonStart(),u=!0),uSe(c,wft,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),S,T=E.length,A,C,I;if(f.pop(),l.push(f),f=null,!!T){if(w&1){if(C=E[0],(A=C.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<A;++S)i.point((I=C[S])[0],I[1]);i.lineEnd()}return}T>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(_ft))}}return d}}function _ft(e){return e.length>1}function wft(e,t){return((e=e.x)[0]<0?e[1]-Gi-jt:Gi-e[1])-((t=t.x)[0]<0?t[1]-Gi-jt:Gi-t[1])}const Xue=lSe(function(){return!0},Eft,Sft,[-Nn,-Gi]);function Eft(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Nn:-Nn,u=Kn(s-t);Kn(u-Nn)<jt?(e.point(t,n=(n+o)/2>0?Gi:-Gi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Nn&&(Kn(t-r)<jt&&(t-=r*jt),Kn(s-a)<jt&&(s-=a*jt),n=xft(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function xft(e,t,n,r){var i,s,o=Lt(e-n);return Kn(o)>jt?Wx((Lt(t)*(s=Ut(r))*Lt(n)-Lt(r)*(i=Ut(t))*Lt(e))/(i*s*o)):(t+r)/2}function Sft(e,t,n,r){var i;if(e==null)i=n*Gi,r.point(-Nn,i),r.point(0,i),r.point(Nn,i),r.point(Nn,0),r.point(Nn,-i),r.point(0,-i),r.point(-Nn,-i),r.point(-Nn,0),r.point(-Nn,i);else if(Kn(e[0]-t[0])>jt){var s=e[0]<t[0]?Nn:-Nn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Tft(e){var t=Ut(e),n=2*In,r=t>0,i=Kn(t)>jt;function s(c,f,d,h){vft(h,e,n,d,c,f)}function o(c,f){return Ut(c)*Ut(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Nn:-Nn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||YP(f,b)||YP(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var S;!(E&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!f||!YP(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=M1(c),p=M1(f),m=[1,0,0],g=xE(h,p),y=yN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,S=xE(m,g),T=vN(m,w),A=vN(g,E);Y8(T,A);var C=S,I=yN(T,C),R=yN(C,C),O=I*I-R*(yN(T,T)-1);if(!(O<0)){var P=Qa(O),$=vN(C,(-I-P)/R);if(Y8($,T),$=e3($),!d)return $;var F=c[0],L=f[0],B=c[1],z=f[1],q;L<F&&(q=F,F=L,L=q);var D=L-F,U=Kn(D-Nn)<jt,W=U||D<jt;if(!U&&z<B&&(q=B,B=z,z=q),W?U?B+z>0^$[1]<(Kn($[0]-F)<jt?B:z):B<=$[1]&&$[1]<=z:D>Nn^(F<=$[0]&&$[0]<=L)){var j=vN(C,(-I+P)/R);return Y8(j,T),[$,e3(j)]}}}function l(c,f){var d=r?e:Nn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return lSe(o,a,s,r?[0,-e]:[-Nn,e-Nn])}function Aft(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var eA=1e9,_N=-eA;function cSe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Kn(l[0]-e)<jt?c>0?0:3:Kn(l[0]-n)<jt?c>0?2:1:Kn(l[1]-t)<jt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=aSe(),d,h,p,m,g,y,v,b,w,E,S,T={point:A,lineStart:O,lineEnd:P,polygonStart:I,polygonEnd:R};function A(F,L){i(F,L)&&c.point(F,L)}function C(){for(var F=0,L=0,B=h.length;L<B;++L)for(var z=h[L],q=1,D=z.length,U=z[0],W,j,H=U[0],G=U[1];q<D;++q)W=H,j=G,U=z[q],H=U[0],G=U[1],j<=r?G>r&&(H-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(H-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function I(){c=f,d=[],h=[],S=!0}function R(){var F=C(),L=S&&F,B=(d=WEe(d)).length;(L||B)&&(l.polygonStart(),L&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&uSe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){T.point=$,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function P(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),T.point=A,w&&c.lineEnd()}function $(F,L){var B=i(F,L);if(h&&p.push([F,L]),E)m=F,g=L,y=B,E=!1,B&&(c.lineStart(),c.point(F,L));else if(B&&w)c.point(F,L);else{var z=[v=Math.max(_N,Math.min(eA,v)),b=Math.max(_N,Math.min(eA,b))],q=[F=Math.max(_N,Math.min(eA,F)),L=Math.max(_N,Math.min(eA,L))];Aft(z,q,e,t,n,r)?(w||(c.lineStart(),c.point(z[0],z[1])),c.point(q[0],q[1]),B||c.lineEnd(),S=!1):B&&(c.lineStart(),c.point(F,L),S=!1)}v=F,b=L,w=B}return T}}function Que(e,t,n){var r=Nu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Jue(e,t,n){var r=Nu(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Cft(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Nu(gN(r/c)*c,n,c).map(p).concat(Nu(gN(a/f)*f,o,f).map(m)).concat(Nu(gN(t/u)*u,e,u).filter(function(b){return Kn(b%c)>jt}).map(d)).concat(Nu(gN(s/l)*l,i,l).filter(function(b){return Kn(b%f)>jt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Que(s,i,90),h=Jue(t,e,g),p=Que(a,o,90),m=Jue(r,n,g),y):g},y.extentMajor([[-180,-90+jt],[180,90-jt]]).extentMinor([[-180,-80-jt],[180,80+jt]])}const y2=e=>e;var X8=new qa,N7=new qa,fSe,dSe,P7,D7,kp={point:Io,lineStart:Io,lineEnd:Io,polygonStart:function(){kp.lineStart=Ift,kp.lineEnd=Rft},polygonEnd:function(){kp.lineStart=kp.lineEnd=kp.point=Io,X8.add(Kn(N7)),N7=new qa},result:function(){var e=X8/2;return X8=new qa,e}};function Ift(){kp.point=kft}function kft(e,t){kp.point=hSe,fSe=P7=e,dSe=D7=t}function hSe(e,t){N7.add(D7*e-P7*t),P7=e,D7=t}function Rft(){hSe(fSe,dSe)}var SE=1/0,l3=SE,v2=-SE,c3=v2,f3={point:Nft,lineStart:Io,lineEnd:Io,polygonStart:Io,polygonEnd:Io,result:function(){var e=[[SE,l3],[v2,c3]];return v2=c3=-(l3=SE=1/0),e}};function Nft(e,t){e<SE&&(SE=e),e>v2&&(v2=e),t<l3&&(l3=t),t>c3&&(c3=t)}var O7=0,$7=0,tA=0,d3=0,h3=0,sw=0,M7=0,L7=0,nA=0,pSe,mSe,Dd,Od,pc={point:L1,lineStart:Zue,lineEnd:ele,polygonStart:function(){pc.lineStart=Oft,pc.lineEnd=$ft},polygonEnd:function(){pc.point=L1,pc.lineStart=Zue,pc.lineEnd=ele},result:function(){var e=nA?[M7/nA,L7/nA]:sw?[d3/sw,h3/sw]:tA?[O7/tA,$7/tA]:[NaN,NaN];return O7=$7=tA=d3=h3=sw=M7=L7=nA=0,e}};function L1(e,t){O7+=e,$7+=t,++tA}function Zue(){pc.point=Pft}function Pft(e,t){pc.point=Dft,L1(Dd=e,Od=t)}function Dft(e,t){var n=e-Dd,r=t-Od,i=Qa(n*n+r*r);d3+=i*(Dd+e)/2,h3+=i*(Od+t)/2,sw+=i,L1(Dd=e,Od=t)}function ele(){pc.point=L1}function Oft(){pc.point=Mft}function $ft(){gSe(pSe,mSe)}function Mft(e,t){pc.point=gSe,L1(pSe=Dd=e,mSe=Od=t)}function gSe(e,t){var n=e-Dd,r=t-Od,i=Qa(n*n+r*r);d3+=i*(Dd+e)/2,h3+=i*(Od+t)/2,sw+=i,i=Od*e-Dd*t,M7+=i*(Dd+e),L7+=i*(Od+t),nA+=i*3,L1(Dd=e,Od=t)}function ySe(e){this._context=e}ySe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Xa);break}}},result:Io};var F7=new qa,Q8,vSe,bSe,rA,iA,b2={point:Io,lineStart:function(){b2.point=Lft},lineEnd:function(){Q8&&_Se(vSe,bSe),b2.point=Io},polygonStart:function(){Q8=!0},polygonEnd:function(){Q8=null},result:function(){var e=+F7;return F7=new qa,e}};function Lft(e,t){b2.point=_Se,vSe=rA=e,bSe=iA=t}function _Se(e,t){rA-=e,iA-=t,F7.add(Qa(rA*rA+iA*iA)),rA=e,iA=t}let tle,p3,nle,rle;class ile{constructor(t){this._append=t==null?wSe:Fft(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==nle||this._append!==p3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,nle=r,p3=this._append,rle=this._,this._=i}this._+=rle;break}}}result(){const t=this._;return this._="",t.length?t:null}}function wSe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Fft(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return wSe;if(t!==tle){const n=10**t;tle=t,p3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return p3}function ESe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Ip(a,i(s))),s.result()}return o.area=function(a){return Ip(a,i(kp)),kp.result()},o.measure=function(a){return Ip(a,i(b2)),b2.result()},o.bounds=function(a){return Ip(a,i(f3)),f3.result()},o.centroid=function(a){return Ip(a,i(pc)),pc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,y2):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new ile(n)):new ySe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new ile(n)),o},o.projection(e).digits(n).context(t)}function XL(e){return function(t){var n=new j7;for(var r in e)n[r]=e[r];return n.stream=t,n}}function j7(){}j7.prototype={constructor:j7,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function GY(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Ip(n,e.stream(f3)),t(f3.result()),r!=null&&e.clipExtent(r),e}function QL(e,t,n){return GY(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function YY(e,t,n){return QL(e,[[0,0],t],n)}function KY(e,t,n){return GY(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function XY(e,t,n){return GY(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var sle=16,jft=Ut(30*In);function ole(e,t){return+t?Uft(e,t):Bft(e)}function Bft(e){return XL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Uft(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,S=u+p,T=Qa(w*w+E*E+S*S),A=Wu(S/=T),C=Kn(Kn(S)-1)<jt||Kn(s-f)<jt?(s+f)/2:kc(E,w),I=e(C,A),R=I[0],O=I[1],P=R-r,$=O-i,F=v*P-y*$;(F*F/b>t||Kn((y*P+v*$)/b-.5)>.3||o*d+a*h+u*p<jft)&&(n(r,i,s,o,a,u,R,O,C,w/=T,E/=T,S,m,g),g.point(R,O),n(R,O,C,w,E,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,C){A=e(A,C),r.point(A[0],A[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(A,C){var I=M1([A,C]),R=e(A,C);n(f,d,c,h,p,m,f=R[0],d=R[1],c=A,h=I[0],p=I[1],m=I[2],sle,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=T}function S(A,C){b(i=A,C),s=f,o=d,a=h,u=p,l=m,g.point=b}function T(){n(f,d,c,h,p,m,s,o,i,a,u,l,sle,r),g.lineEnd=w,w()}return g}}var zft=XL({point:function(e,t){this.stream.point(e*In,t*In)}});function Vft(e){return XL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Hft(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function ale(e,t,n,r,i,s){if(!s)return Hft(e,t,n,r,i);var o=Ut(s),a=Lt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function zh(e){return xSe(function(){return e})()}function xSe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Xue,g=null,y,v,b,w=y2,E=.5,S,T,A,C,I;function R(F){return A(F[0]*In,F[1]*In)}function O(F){return F=A.invert(F[0],F[1]),F&&[F[0]*ns,F[1]*ns]}R.stream=function(F){return C&&I===F?C:C=zft(Vft(c)(m(S(w(I=F)))))},R.preclip=function(F){return arguments.length?(m=F,p=void 0,$()):m},R.postclip=function(F){return arguments.length?(w=F,g=y=v=b=null,$()):w},R.clipAngle=function(F){return arguments.length?(m=+F?Tft(p=F*In):(p=null,Xue),$()):p*ns},R.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=b=null,y2):cSe(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),$()):g==null?null:[[g,y],[v,b]]},R.scale=function(F){return arguments.length?(n=+F,P()):n},R.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],P()):[r,i]},R.center=function(F){return arguments.length?(s=F[0]%360*In,o=F[1]%360*In,P()):[s*ns,o*ns]},R.rotate=function(F){return arguments.length?(a=F[0]%360*In,u=F[1]%360*In,l=F.length>2?F[2]%360*In:0,P()):[a*ns,u*ns,l*ns]},R.angle=function(F){return arguments.length?(f=F%360*In,P()):f*ns},R.reflectX=function(F){return arguments.length?(d=F?-1:1,P()):d<0},R.reflectY=function(F){return arguments.length?(h=F?-1:1,P()):h<0},R.precision=function(F){return arguments.length?(S=ole(T,E=F*F),$()):Qa(E)},R.fitExtent=function(F,L){return QL(R,F,L)},R.fitSize=function(F,L){return YY(R,F,L)},R.fitWidth=function(F,L){return KY(R,F,L)},R.fitHeight=function(F,L){return XY(R,F,L)};function P(){var F=ale(n,0,0,d,h,f).apply(null,t(s,o)),L=ale(n,r-F[0],i-F[1],d,h,f);return c=oSe(a,u,l),T=k7(t,L),A=k7(c,T),S=ole(T,E),$()}function $(){return C=I=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&O,P()}}function QY(e){var t=0,n=Nn/3,r=xSe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*In,n=s[1]*In):[t*ns,n*ns]},i}function qft(e){var t=Ut(e);function n(r,i){return[r*t,Lt(i)/t]}return n.invert=function(r,i){return[r/t,Wu(i*t)]},n}function Wft(e,t){var n=Lt(e),r=(n+Lt(t))/2;if(Kn(r)<jt)return qft(e);var i=1+n*(2*r-n),s=Qa(i)/r;function o(a,u){var l=Qa(i-2*r*Lt(u))/r;return[l*Lt(a*=r),s-l*Ut(a)]}return o.invert=function(a,u){var l=s-u,c=kc(a,Kn(l))*yc(l);return l*r<0&&(c-=Nn*yc(a)*yc(l)),[c/r,Wu((i-(a*a+l*l)*r*r)/(2*r))]},o}function m3(){return QY(Wft).scale(155.424).center([0,33.6442])}function SSe(){return m3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Gft(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Yft(){var e,t,n=SSe(),r,i=m3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=m3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Gft([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+jt,m+.12*h+jt],[p-.214*h-jt,m+.234*h-jt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+jt,m+.166*h+jt],[p-.115*h-jt,m+.234*h-jt]]).stream(l),f()},c.fitExtent=function(d,h){return QL(c,d,h)},c.fitSize=function(d,h){return YY(c,d,h)},c.fitWidth=function(d,h){return KY(c,d,h)},c.fitHeight=function(d,h){return XY(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function TSe(e){return function(t,n){var r=Ut(t),i=Ut(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Lt(t),s*Lt(n)]}}function ek(e){return function(t,n){var r=Qa(t*t+n*n),i=e(r),s=Lt(i),o=Ut(i);return[kc(t*s,r*o),Wu(r&&n*s/r)]}}var ASe=TSe(function(e){return Qa(2/(1+e))});ASe.invert=ek(function(e){return 2*Wu(e/2)});function Kft(){return zh(ASe).scale(124.75).clipAngle(180-.001)}var CSe=TSe(function(e){return(e=Kxe(e))&&e/Lt(e)});CSe.invert=ek(function(e){return e});function Xft(){return zh(CSe).scale(79.4188).clipAngle(180-.001)}function JL(e,t){return[e,XO(qY((Gi+t)/2))]}JL.invert=function(e,t){return[e,2*Wx(Yxe(t))-Gi]};function Qft(){return ISe(JL).scale(961/Xa)}function ISe(e){var t=zh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Nn*r(),d=t(yft(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===JL?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function wN(e){return qY((Gi+e)/2)}function Jft(e,t){var n=Ut(e),r=e===t?Lt(e):XO(n/Ut(t))/XO(wN(t)/wN(e)),i=n*G8(wN(e),r)/r;if(!r)return JL;function s(o,a){i>0?a<-Gi+jt&&(a=-Gi+jt):a>Gi-jt&&(a=Gi-jt);var u=i/G8(wN(a),r);return[u*Lt(r*o),i-u*Ut(r*o)]}return s.invert=function(o,a){var u=i-a,l=yc(r)*Qa(o*o+u*u),c=kc(o,Kn(u))*yc(u);return u*r<0&&(c-=Nn*yc(o)*yc(u)),[c/r,2*Wx(G8(i/l,1/r))-Gi]},s}function Zft(){return QY(Jft).scale(109.5).parallels([30,30])}function g3(e,t){return[e,t]}g3.invert=g3;function edt(){return zh(g3).scale(152.63)}function tdt(e,t){var n=Ut(e),r=e===t?Lt(e):(n-Ut(t))/(t-e),i=n/r+e;if(Kn(r)<jt)return g3;function s(o,a){var u=i-a,l=r*o;return[u*Lt(l),i-u*Ut(l)]}return s.invert=function(o,a){var u=i-a,l=kc(o,Kn(u))*yc(u);return u*r<0&&(l-=Nn*yc(o)*yc(u)),[l/r,i-yc(r)*Qa(o*o+u*u)]},s}function ndt(){return QY(tdt).scale(131.154).center([0,13.9389])}var tC=1.340264,nC=-.081106,rC=893e-6,iC=.003796,y3=Qa(3)/2,rdt=12;function kSe(e,t){var n=Wu(y3*Lt(t)),r=n*n,i=r*r*r;return[e*Ut(n)/(y3*(tC+3*nC*r+i*(7*rC+9*iC*r))),n*(tC+nC*r+i*(rC+iC*r))]}kSe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<rdt&&(a=n*(tC+nC*r+i*(rC+iC*r))-t,u=tC+3*nC*r+i*(7*rC+9*iC*r),n-=o=a/u,r=n*n,i=r*r*r,!(Kn(o)<YO));++s);return[y3*e*(tC+3*nC*r+i*(7*rC+9*iC*r))/Ut(n),Wu(Lt(n)/y3)]};function idt(){return zh(kSe).scale(177.158)}function RSe(e,t){var n=Ut(t),r=Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}RSe.invert=ek(Wx);function sdt(){return zh(RSe).scale(144.049).clipAngle(60)}function odt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=XL({point:function(w,E){var S=b([w,E]);this.stream.point(S[0],S[1])}}),m=y2,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,S=w[1]*h;if(s){var T=S*o-E*a;E=E*o+S*a,S=T}return[E+t,S+n]}return b.invert=function(w){var E=w[0]-t,S=w[1]-n;if(s){var T=S*o+E*a;E=E*o-S*a,S=T}return[E/d,S/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,y2):cSe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*In,a=Lt(s),o=Ut(s),v()):s*ns},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return QL(b,w,E)},b.fitSize=function(w,E){return YY(b,w,E)},b.fitWidth=function(w,E){return KY(b,w,E)},b.fitHeight=function(w,E){return XY(b,w,E)},b}function NSe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}NSe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Kn(i)>jt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function adt(){return zh(NSe).scale(175.295)}function PSe(e,t){return[Ut(t)*Lt(e),Lt(t)]}PSe.invert=ek(Wu);function udt(){return zh(PSe).scale(249.5).clipAngle(90+jt)}function DSe(e,t){var n=Ut(t),r=1+Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}DSe.invert=ek(function(e){return 2*Wx(e)});function ldt(){return zh(DSe).scale(250).clipAngle(142)}function OSe(e,t){return[XO(qY((Gi+t)/2)),-e]}OSe.invert=function(e,t){return[-t,2*Wx(Yxe(e))-Gi]};function cdt(){var e=ISe(OSe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function fdt(e,t){return e.parent===t.parent?1:2}function ddt(e){return e.reduce(hdt,0)/e.length}function hdt(e,t){return e+t.x}function pdt(e){return 1+e.reduce(mdt,0)}function mdt(e,t){return Math.max(e,t.y)}function gdt(e){for(var t;t=e.children;)e=t[0];return e}function ydt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function vdt(){var e=fdt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=ddt(h),d.y=pdt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=gdt(s),l=ydt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function bdt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function _dt(){return this.eachAfter(bdt)}function wdt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Edt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function xdt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Sdt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Tdt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Adt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Cdt(e){for(var t=this,n=Idt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Idt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function kdt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Rdt(){return Array.from(this)}function Ndt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Pdt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Ddt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function ZL(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Mdt)):t===void 0&&(t=$dt);for(var n=new TE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new TE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore($Se)}function Odt(){return ZL(this).eachBefore(Ldt)}function $dt(e){return e.children}function Mdt(e){return Array.isArray(e)?e[1]:null}function Ldt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function $Se(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function TE(e){this.data=e,this.depth=this.height=0,this.parent=null}TE.prototype=ZL.prototype={constructor:TE,count:_dt,each:wdt,eachAfter:xdt,eachBefore:Edt,find:Sdt,sum:Tdt,sort:Adt,path:Cdt,ancestors:kdt,descendants:Rdt,leaves:Ndt,links:Pdt,copy:Odt,[Symbol.iterator]:Ddt};function KP(e){return e==null?null:MSe(e)}function MSe(e){if(typeof e!="function")throw new Error;return e}function kv(){return 0}function D_(e){return function(){return e}}const Fdt=1664525,jdt=1013904223,ule=4294967296;function Bdt(){let e=1;return()=>(e=(Fdt*e+jdt)%ule)/ule}function Udt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zdt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Vdt(e,t){for(var n=0,r=(e=zdt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&LSe(o,s)?++n:(o=qdt(i=Hdt(i,s)),n=0);return o}function Hdt(e,t){var n,r;if(J8(t,e))return[t];for(n=0;n<e.length;++n)if(EN(t,e[n])&&J8(sA(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(EN(sA(e[n],e[r]),t)&&EN(sA(e[n],t),e[r])&&EN(sA(e[r],t),e[n])&&J8(FSe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function EN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function LSe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function J8(e,t){for(var n=0;n<t.length;++n)if(!LSe(e,t[n]))return!1;return!0}function qdt(e){switch(e.length){case 1:return Wdt(e[0]);case 2:return sA(e[0],e[1]);case 3:return FSe(e[0],e[1],e[2])}}function Wdt(e){return{x:e.x,y:e.y,r:e.r}}function sA(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function FSe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,S=(p*w-m*b)/(E*2)-r,T=(m*g-p*y)/E,A=(h*b-d*w)/(E*2)-i,C=(d*y-h*g)/E,I=T*T+C*C-1,R=2*(s+S*T+A*C),O=S*S+A*A-s*s,P=-(Math.abs(I)>1e-6?(R+Math.sqrt(R*R-4*I*O))/(2*I):O/R);return{x:r+S+T*P,y:i+A+C*P,r:P}}function lle(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function cle(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function fle(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function xN(e){this._=e,this.next=null,this.previous=null}function Gdt(e,t){if(!(s=(e=Udt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;lle(r,n,i=e[2]),n=new xN(n),r=new xN(r),i=new xN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){lle(n._,r._,i=e[u]),i=new xN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(cle(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(cle(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=fle(n);(i=i.next)!==r;)(a=fle(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Vdt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Ydt(e){return Math.sqrt(e.value)}function jSe(){var e=null,t=1,n=1,r=kv;function i(s){const o=Bdt();return s.x=t/2,s.y=n/2,e?s.eachBefore(dle(e)).eachAfter(Z8(r,.5,o)).eachBefore(hle(1)):s.eachBefore(dle(Ydt)).eachAfter(Z8(kv,1,o)).eachAfter(Z8(r,s.r/Math.min(t,n),o)).eachBefore(hle(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=KP(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:D_(+s),i):r},i}function dle(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Z8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Gdt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function hle(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function BSe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function tk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function Kdt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(BSe),o}function s(o,a){return function(u){u.children&&tk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Xdt={depth:-1},ple={},ej={};function Qdt(e){return e.id}function Jdt(e){return e.parentId}function mle(){var e=Qdt,t=Jdt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>Zdt(n(w,E,i))),v=y.map(gle),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(gle(w)),s.push(ej));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new TE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?ple:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===ple)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===ej&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===ej);--y)h.data=null}if(f.parent=Xdt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore($Se),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=KP(i),r):e},r.parentId=function(i){return arguments.length?(t=KP(i),r):t},r.path=function(i){return arguments.length?(n=KP(i),r):n},r}function Zdt(e){e=`${e}`;let t=e.length;return B7(e,t-1)&&!B7(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function gle(e){let t=e.length;if(t<2)return"";for(;--t>1&&!B7(e,t););return e.slice(0,t)}function B7(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function eht(e,t){return e.parent===t.parent?1:2}function tj(e){var t=e.children;return t?t[0]:e.t}function nj(e){var t=e.children;return t?t[t.length-1]:e.t}function tht(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function nht(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function rht(e,t,n){return e.a.parent===t.parent?e.a:n}function XP(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}XP.prototype=Object.create(TE.prototype);function iht(e){for(var t=new XP(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new XP(s[o],o)),i.parent=n;return(t.parent=new XP(null,0)).children=[t],t}function sht(){var e=eht,t=1,n=1,r=null;function i(l){var c=iht(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){nht(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=nj(p),d=tj(d),p&&d;)m=tj(m),h=nj(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(tht(rht(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!nj(h)&&(h.t=p,h.m+=v-y),d&&!tj(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function e6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var USe=(1+Math.sqrt(5))/2;function zSe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,w=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*E,b=Math.max(v/S,S/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?tk(u,n,r,i,m?r+=p*g/m:s):e6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const VSe=function e(t){function n(r,i,s,o,a){zSe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(USe);function oht(){var e=VSe,t=!1,n=1,r=1,i=[0],s=kv,o=kv,a=kv,u=kv,l=kv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(BSe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=MSe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:D_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:D_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:D_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:D_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:D_(+d),c):l},c}function aht(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,S=d-1;E<S;){var T=E+S>>>1;l[T]<w?E=T+1:S=T}w-l[E-1]<l[E]-w&&f+1<E&&--E;var A=l[E]-b,C=h-A;if(g-p>y-m){var I=h?(p*C+g*A)/h:g;c(f,E,A,p,m,I,y),c(E,d,C,I,m,g,y)}else{var R=h?(m*C+y*A)/h:y;c(f,E,A,p,m,g,R),c(E,d,C,p,R,g,y)}}}function uht(e,t,n,r,i){(e.depth&1?e6:tk)(e,t,n,r,i)}const lht=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?tk(l,i,s,o,m?s+=(a-s)*l.value/m:a):e6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=zSe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(USe);function Jf(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Cy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const U7=Symbol("implicit");function Gx(){var e=new Qae,t=[],n=[],r=U7;function i(s){let o=e.get(s);if(o===void 0){if(r!==U7)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Qae;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Gx(t,n).unknown(r)},Jf.apply(i,arguments),i}function nk(){var e=Gx().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Nu(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return nk(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Jf.apply(f(),arguments)}function cht(e){return function(){return e}}function z7(e){return+e}var yle=[0,1];function Pu(e){return e}function V7(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:cht(isNaN(t)?NaN:.5)}function fht(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function dht(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=V7(i,r),s=n(o,s)):(r=V7(r,i),s=n(s,o)),function(a){return s(r(a))}}function hht(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=V7(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=O0(e,a,1,r)-1;return s[u](i[u](a))}}function rk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function t6(){var e=yle,t=yle,n=Wm,r,i,s,o=Pu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Pu&&(o=fht(e[0],e[d-1])),a=d>2?hht:dht,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),cc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,z7),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=QI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Pu,c()):o!==Pu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function HSe(){return t6()(Pu,Pu)}function qSe(e,t,n,r){var i=$0(e,t,n),s;switch(r=$1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=Wxe(i,o))&&(r.precision=s),HY(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Gxe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=qxe(i))&&(r.precision=s-(r.type==="%")*2);break}}return qx(r)}function kb(e){var t=e.domain;return e.ticks=function(n){var r=t();return t7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return qSe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=n7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function _m(){var e=HSe();return e.copy=function(){return rk(e,_m())},Jf.apply(e,arguments),kb(e)}function WSe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,z7),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return WSe(e).unknown(t)},e=arguments.length?Array.from(e,z7):[0,1],kb(n)}function GSe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function vle(e){return Math.log(e)}function ble(e){return Math.exp(e)}function pht(e){return-Math.log(-e)}function mht(e){return-Math.exp(-e)}function ght(e){return isFinite(e)?+("1e"+e):e<0?0:e}function yht(e){return e===10?ght:e===Math.E?Math.exp:t=>Math.pow(e,t)}function vht(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function _le(e){return(t,n)=>-e(-t,n)}function JY(e){const t=e(vle,ble),n=t.domain;let r=10,i,s;function o(){return i=vht(r),s=yht(r),n()[0]<0?(i=_le(i),s=_le(s),e(pht,mht)):e(vle,ble),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=t7(l,c,g))}else y=t7(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=$1(u)).precision==null&&(u.trim=!0),u=qx(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(GSe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function YSe(){const e=JY(t6()).domain([1,10]);return e.copy=()=>rk(e,YSe()).base(e.base()),Jf.apply(e,arguments),e}function wle(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ele(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ZY(e){var t=1,n=e(wle(t),Ele(t));return n.constant=function(r){return arguments.length?e(wle(t=+r),Ele(t)):t},kb(n)}function KSe(){var e=ZY(t6());return e.copy=function(){return rk(e,KSe()).constant(e.constant())},Jf.apply(e,arguments)}function xle(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function bht(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function _ht(e){return e<0?-e*e:e*e}function eK(e){var t=e(Pu,Pu),n=1;function r(){return n===1?e(Pu,Pu):n===.5?e(bht,_ht):e(xle(n),xle(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},kb(t)}function tK(){var e=eK(t6());return e.copy=function(){return rk(e,tK()).exponent(e.exponent())},Jf.apply(e,arguments),e}function wht(){return tK.apply(null,arguments).exponent(.5)}function XSe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=HEe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[O0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Kp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return XSe().domain(e).range(t).unknown(r)},Jf.apply(s,arguments)}function QSe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[O0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return QSe().domain([e,t]).range(i).unknown(s)},Jf.apply(kb(o),arguments)}function JSe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[O0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return JSe().domain(e).range(t).unknown(n)},Jf.apply(i,arguments)}const rj=new Date,ij=new Date;function zs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>zs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(rj.setTime(+s),ij.setTime(+o),e(rj),e(ij),Math.floor(n(rj,ij))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const AE=zs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);AE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):AE);AE.range;const Fp=1e3,vc=Fp*60,jp=vc*60,wm=jp*24,nK=wm*7,Sle=wm*30,sj=wm*365,Bp=zs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Fp)},(e,t)=>(t-e)/Fp,e=>e.getUTCSeconds());Bp.range;const n6=zs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fp)},(e,t)=>{e.setTime(+e+t*vc)},(e,t)=>(t-e)/vc,e=>e.getMinutes());n6.range;const r6=zs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*vc)},(e,t)=>(t-e)/vc,e=>e.getUTCMinutes());r6.range;const i6=zs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Fp-e.getMinutes()*vc)},(e,t)=>{e.setTime(+e+t*jp)},(e,t)=>(t-e)/jp,e=>e.getHours());i6.range;const s6=zs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*jp)},(e,t)=>(t-e)/jp,e=>e.getUTCHours());s6.range;const Qp=zs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vc)/wm,e=>e.getDate()-1);Qp.range;const h0=zs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wm,e=>e.getUTCDate()-1);h0.range;const ZSe=zs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/wm,e=>Math.floor(e/wm));ZSe.range;function Rb(e){return zs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*vc)/nK)}const Yx=Rb(0),v3=Rb(1),Eht=Rb(2),xht=Rb(3),CE=Rb(4),Sht=Rb(5),Tht=Rb(6);Yx.range;v3.range;Eht.range;xht.range;CE.range;Sht.range;Tht.range;function Nb(e){return zs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/nK)}const Kx=Nb(0),b3=Nb(1),Aht=Nb(2),Cht=Nb(3),IE=Nb(4),Iht=Nb(5),kht=Nb(6);Kx.range;b3.range;Aht.range;Cht.range;IE.range;Iht.range;kht.range;const _2=zs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());_2.range;const w2=zs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());w2.range;const gh=zs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());gh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});gh.range;const yh=zs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());yh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});yh.range;function eTe(e,t,n,r,i,s){const o=[[Bp,1,Fp],[Bp,5,5*Fp],[Bp,15,15*Fp],[Bp,30,30*Fp],[s,1,vc],[s,5,5*vc],[s,15,15*vc],[s,30,30*vc],[i,1,jp],[i,3,3*jp],[i,6,6*jp],[i,12,12*jp],[r,1,wm],[r,2,2*wm],[n,1,nK],[t,1,Sle],[t,3,3*Sle],[e,1,sj]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Vx(([,,g])=>g).right(o,d);if(h===o.length)return e.every($0(l/sj,c/sj,f));if(h===0)return AE.every(Math.max($0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Rht,Nht]=eTe(yh,w2,Kx,ZSe,s6,r6),[Pht,Dht]=eTe(gh,_2,Yx,Qp,i6,n6);function oj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function aj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function lT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function tTe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=cT(i),c=fT(i),f=cT(s),d=fT(s),h=cT(o),p=fT(o),m=cT(a),g=fT(a),y=cT(u),v=fT(u),b={a:B,A:z,b:q,B:D,c:null,d:Rle,e:Rle,f:npt,g:dpt,G:ppt,H:Zht,I:ept,j:tpt,L:nTe,m:rpt,M:ipt,p:U,q:W,Q:Dle,s:Ole,S:spt,u:opt,U:apt,V:upt,w:lpt,W:cpt,x:null,X:null,y:fpt,Y:hpt,Z:mpt,"%":Ple},w={a:j,A:H,b:G,B:ne,c:null,d:Nle,e:Nle,f:bpt,g:kpt,G:Npt,H:gpt,I:ypt,j:vpt,L:iTe,m:_pt,M:wpt,p:ce,q:de,Q:Dle,s:Ole,S:Ept,u:xpt,U:Spt,V:Tpt,w:Apt,W:Cpt,x:null,X:null,y:Ipt,Y:Rpt,Z:Ppt,"%":Ple},E={a:I,A:R,b:O,B:P,c:$,d:Ile,e:Ile,f:Kht,g:Cle,G:Ale,H:kle,I:kle,j:qht,L:Yht,m:Hht,M:Wht,p:C,q:Vht,Q:Qht,s:Jht,S:Ght,u:Fht,U:jht,V:Bht,w:Lht,W:Uht,x:F,X:L,y:Cle,Y:Ale,Z:zht,"%":Xht};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(he,ye){return function(Ie){var ve=[],Ke=-1,Ue=0,gt=he.length,rt,be,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ke<gt;)he.charCodeAt(Ke)===37&&(ve.push(he.slice(Ue,Ke)),(be=Tle[rt=he.charAt(++Ke)])!=null?rt=he.charAt(++Ke):be=rt==="e"?" ":"0",(ke=ye[rt])&&(rt=ke(Ie,be)),ve.push(rt),Ue=Ke+1);return ve.push(he.slice(Ue,Ke)),ve.join("")}}function T(he,ye){return function(Ie){var ve=lT(1900,void 0,1),Ke=A(ve,he,Ie+="",0),Ue,gt;if(Ke!=Ie.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(ye&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(Ue=aj(lT(ve.y,0,1)),gt=Ue.getUTCDay(),Ue=gt>4||gt===0?b3.ceil(Ue):b3(Ue),Ue=h0.offset(Ue,(ve.V-1)*7),ve.y=Ue.getUTCFullYear(),ve.m=Ue.getUTCMonth(),ve.d=Ue.getUTCDate()+(ve.w+6)%7):(Ue=oj(lT(ve.y,0,1)),gt=Ue.getDay(),Ue=gt>4||gt===0?v3.ceil(Ue):v3(Ue),Ue=Qp.offset(Ue,(ve.V-1)*7),ve.y=Ue.getFullYear(),ve.m=Ue.getMonth(),ve.d=Ue.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),gt="Z"in ve?aj(lT(ve.y,0,1)).getUTCDay():oj(lT(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(gt+5)%7:ve.w+ve.U*7-(gt+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,aj(ve)):oj(ve)}}function A(he,ye,Ie,ve){for(var Ke=0,Ue=ye.length,gt=Ie.length,rt,be;Ke<Ue;){if(ve>=gt)return-1;if(rt=ye.charCodeAt(Ke++),rt===37){if(rt=ye.charAt(Ke++),be=E[rt in Tle?ye.charAt(Ke++):rt],!be||(ve=be(he,Ie,ve))<0)return-1}else if(rt!=Ie.charCodeAt(ve++))return-1}return ve}function C(he,ye,Ie){var ve=l.exec(ye.slice(Ie));return ve?(he.p=c.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function I(he,ye,Ie){var ve=h.exec(ye.slice(Ie));return ve?(he.w=p.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function R(he,ye,Ie){var ve=f.exec(ye.slice(Ie));return ve?(he.w=d.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function O(he,ye,Ie){var ve=y.exec(ye.slice(Ie));return ve?(he.m=v.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function P(he,ye,Ie){var ve=m.exec(ye.slice(Ie));return ve?(he.m=g.get(ve[0].toLowerCase()),Ie+ve[0].length):-1}function $(he,ye,Ie){return A(he,t,ye,Ie)}function F(he,ye,Ie){return A(he,n,ye,Ie)}function L(he,ye,Ie){return A(he,r,ye,Ie)}function B(he){return o[he.getDay()]}function z(he){return s[he.getDay()]}function q(he){return u[he.getMonth()]}function D(he){return a[he.getMonth()]}function U(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function j(he){return o[he.getUTCDay()]}function H(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ne(he){return a[he.getUTCMonth()]}function ce(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ye=S(he+="",b);return ye.toString=function(){return he},ye},parse:function(he){var ye=T(he+="",!1);return ye.toString=function(){return he},ye},utcFormat:function(he){var ye=S(he+="",w);return ye.toString=function(){return he},ye},utcParse:function(he){var ye=T(he+="",!0);return ye.toString=function(){return he},ye}}}var Tle={"-":"",_:" ",0:"0"},ho=/^\s*\d+/,Oht=/^%/,$ht=/[\\^$*+?|[\]().{}]/g;function pr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Mht(e){return e.replace($ht,"\\$&")}function cT(e){return new RegExp("^(?:"+e.map(Mht).join("|")+")","i")}function fT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Lht(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Fht(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function jht(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Bht(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Uht(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ale(e,t,n){var r=ho.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Cle(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function zht(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Vht(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Hht(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ile(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function qht(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function kle(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Wht(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Ght(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Yht(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Kht(e,t,n){var r=ho.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Xht(e,t,n){var r=Oht.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Qht(e,t,n){var r=ho.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Jht(e,t,n){var r=ho.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Rle(e,t){return pr(e.getDate(),t,2)}function Zht(e,t){return pr(e.getHours(),t,2)}function ept(e,t){return pr(e.getHours()%12||12,t,2)}function tpt(e,t){return pr(1+Qp.count(gh(e),e),t,3)}function nTe(e,t){return pr(e.getMilliseconds(),t,3)}function npt(e,t){return nTe(e,t)+"000"}function rpt(e,t){return pr(e.getMonth()+1,t,2)}function ipt(e,t){return pr(e.getMinutes(),t,2)}function spt(e,t){return pr(e.getSeconds(),t,2)}function opt(e){var t=e.getDay();return t===0?7:t}function apt(e,t){return pr(Yx.count(gh(e)-1,e),t,2)}function rTe(e){var t=e.getDay();return t>=4||t===0?CE(e):CE.ceil(e)}function upt(e,t){return e=rTe(e),pr(CE.count(gh(e),e)+(gh(e).getDay()===4),t,2)}function lpt(e){return e.getDay()}function cpt(e,t){return pr(v3.count(gh(e)-1,e),t,2)}function fpt(e,t){return pr(e.getFullYear()%100,t,2)}function dpt(e,t){return e=rTe(e),pr(e.getFullYear()%100,t,2)}function hpt(e,t){return pr(e.getFullYear()%1e4,t,4)}function ppt(e,t){var n=e.getDay();return e=n>=4||n===0?CE(e):CE.ceil(e),pr(e.getFullYear()%1e4,t,4)}function mpt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pr(t/60|0,"0",2)+pr(t%60,"0",2)}function Nle(e,t){return pr(e.getUTCDate(),t,2)}function gpt(e,t){return pr(e.getUTCHours(),t,2)}function ypt(e,t){return pr(e.getUTCHours()%12||12,t,2)}function vpt(e,t){return pr(1+h0.count(yh(e),e),t,3)}function iTe(e,t){return pr(e.getUTCMilliseconds(),t,3)}function bpt(e,t){return iTe(e,t)+"000"}function _pt(e,t){return pr(e.getUTCMonth()+1,t,2)}function wpt(e,t){return pr(e.getUTCMinutes(),t,2)}function Ept(e,t){return pr(e.getUTCSeconds(),t,2)}function xpt(e){var t=e.getUTCDay();return t===0?7:t}function Spt(e,t){return pr(Kx.count(yh(e)-1,e),t,2)}function sTe(e){var t=e.getUTCDay();return t>=4||t===0?IE(e):IE.ceil(e)}function Tpt(e,t){return e=sTe(e),pr(IE.count(yh(e),e)+(yh(e).getUTCDay()===4),t,2)}function Apt(e){return e.getUTCDay()}function Cpt(e,t){return pr(b3.count(yh(e)-1,e),t,2)}function Ipt(e,t){return pr(e.getUTCFullYear()%100,t,2)}function kpt(e,t){return e=sTe(e),pr(e.getUTCFullYear()%100,t,2)}function Rpt(e,t){return pr(e.getUTCFullYear()%1e4,t,4)}function Npt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?IE(e):IE.ceil(e),pr(e.getUTCFullYear()%1e4,t,4)}function Ppt(){return"+0000"}function Ple(){return"%"}function Dle(e){return+e}function Ole(e){return Math.floor(+e/1e3)}var m_,rK,oTe,o6,aTe;Dpt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Dpt(e){return m_=tTe(e),rK=m_.format,oTe=m_.parse,o6=m_.utcFormat,aTe=m_.utcParse,m_}function Opt(e){return new Date(e)}function $pt(e){return e instanceof Date?+e:+new Date(+e)}function iK(e,t,n,r,i,s,o,a,u,l){var c=HSe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:w)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,$pt)):d().map(Opt)},c.ticks=function(S){var T=d();return e(T[0],T[T.length-1],S??10)},c.tickFormat=function(S,T){return T==null?E:l(T)},c.nice=function(S){var T=d();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?d(GSe(T,S)):c},c.copy=function(){return rk(c,iK(e,t,n,r,i,s,o,a,u,l))},c}function uTe(){return Jf.apply(iK(Pht,Dht,gh,_2,Yx,Qp,i6,n6,Bp,rK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Mpt(){return Jf.apply(iK(Rht,Nht,yh,w2,Kx,h0,s6,r6,Bp,o6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function a6(){var e=0,t=1,n,r,i,s,o=Pu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Wm),l.rangeRound=c(QI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Iy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function sK(){var e=kb(a6()(Pu));return e.copy=function(){return Iy(e,sK())},Cy.apply(e,arguments)}function lTe(){var e=JY(a6()).domain([1,10]);return e.copy=function(){return Iy(e,lTe()).base(e.base())},Cy.apply(e,arguments)}function cTe(){var e=ZY(a6());return e.copy=function(){return Iy(e,cTe()).constant(e.constant())},Cy.apply(e,arguments)}function oK(){var e=eK(a6());return e.copy=function(){return Iy(e,oK()).exponent(e.exponent())},Cy.apply(e,arguments)}function Lpt(){return oK.apply(null,arguments).exponent(.5)}function u6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Pu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=OY(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Wm),h.rangeRound=p(QI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function fTe(){var e=kb(u6()(Pu));return e.copy=function(){return Iy(e,fTe())},Cy.apply(e,arguments)}function dTe(){var e=JY(u6()).domain([.1,1,10]);return e.copy=function(){return Iy(e,dTe()).base(e.base())},Cy.apply(e,arguments)}function hTe(){var e=ZY(u6());return e.copy=function(){return Iy(e,hTe()).constant(e.constant())},Cy.apply(e,arguments)}function aK(){var e=eK(u6());return e.copy=function(){return Iy(e,aK()).exponent(e.exponent())},Cy.apply(e,arguments)}function Fpt(){return aK.apply(null,arguments).exponent(.5)}function Zf(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const jpt=Zf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Bpt=Zf("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Upt=Zf("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),zpt=Zf("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Vpt=Zf("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Hpt=Zf("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),qpt=Zf("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Wpt=Zf("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Gpt=Zf("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ypt=Zf("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),pTe=Zf("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function _n(e){return function(){return e}}const $le=Math.abs,Qo=Math.atan2,Zy=Math.cos,Kpt=Math.max,uj=Math.min,hd=Math.sin,Gv=Math.sqrt,ea=1e-12,kE=Math.PI,_3=kE/2,sC=2*kE;function Xpt(e){return e>1?0:e<-1?kE:Math.acos(e)}function Mle(e){return e>=1?_3:e<=-1?-_3:Math.asin(e)}function l6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new jY(t)}function Qpt(e){return e.innerRadius}function Jpt(e){return e.outerRadius}function Zpt(e){return e.startAngle}function emt(e){return e.endAngle}function tmt(e){return e&&e.padAngle}function nmt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ea))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function SN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Gv(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,S=d*m-p*h,T=(b<0?-1:1)*Gv(Kpt(0,E*E*w-S*S)),A=(S*b-v*T)/w,C=(-S*v-b*T)/w,I=(S*b+v*T)/w,R=(-S*v+b*T)/w,O=A-g,P=C-y,$=I-g,F=R-y;return O*O+P*P>$*$+F*F&&(A=I,C=R),{cx:A,cy:C,x01:-c,y01:-f,x11:A*(i/E-1),y11:C*(i/E-1)}}function H7(){var e=Qpt,t=Jpt,n=_n(0),r=null,i=Zpt,s=emt,o=tmt,a=null,u=l6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-_3,m=s.apply(this,arguments)-_3,g=$le(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ea))a.moveTo(0,0);else if(g>sC-ea)a.moveTo(h*Zy(p),h*hd(p)),a.arc(0,0,h,p,m,!y),d>ea&&(a.moveTo(d*Zy(m),d*hd(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,S=g,T=g,A=o.apply(this,arguments)/2,C=A>ea&&(r?+r.apply(this,arguments):Gv(d*d+h*h)),I=uj($le(h-d)/2,+n.apply(this,arguments)),R=I,O=I,P,$;if(C>ea){var F=Mle(C/d*hd(A)),L=Mle(C/h*hd(A));(S-=F*2)>ea?(F*=y?1:-1,w+=F,E-=F):(S=0,w=E=(p+m)/2),(T-=L*2)>ea?(L*=y?1:-1,v+=L,b-=L):(T=0,v=b=(p+m)/2)}var B=h*Zy(v),z=h*hd(v),q=d*Zy(E),D=d*hd(E);if(I>ea){var U=h*Zy(b),W=h*hd(b),j=d*Zy(w),H=d*hd(w),G;if(g<kE)if(G=nmt(B,z,j,H,U,W,q,D)){var ne=B-G[0],ce=z-G[1],de=U-G[0],he=W-G[1],ye=1/hd(Xpt((ne*de+ce*he)/(Gv(ne*ne+ce*ce)*Gv(de*de+he*he)))/2),Ie=Gv(G[0]*G[0]+G[1]*G[1]);R=uj(I,(d-Ie)/(ye-1)),O=uj(I,(h-Ie)/(ye+1))}else R=O=0}T>ea?O>ea?(P=SN(j,H,B,z,h,O,y),$=SN(U,W,q,D,h,O,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),O<I?a.arc(P.cx,P.cy,O,Qo(P.y01,P.x01),Qo($.y01,$.x01),!y):(a.arc(P.cx,P.cy,O,Qo(P.y01,P.x01),Qo(P.y11,P.x11),!y),a.arc(0,0,h,Qo(P.cy+P.y11,P.cx+P.x11),Qo($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,Qo($.y11,$.x11),Qo($.y01,$.x01),!y))):(a.moveTo(B,z),a.arc(0,0,h,v,b,!y)):a.moveTo(B,z),!(d>ea)||!(S>ea)?a.lineTo(q,D):R>ea?(P=SN(q,D,U,W,d,-R,y),$=SN(B,z,j,H,d,-R,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),R<I?a.arc(P.cx,P.cy,R,Qo(P.y01,P.x01),Qo($.y01,$.x01),!y):(a.arc(P.cx,P.cy,R,Qo(P.y01,P.x01),Qo(P.y11,P.x11),!y),a.arc(0,0,d,Qo(P.cy+P.y11,P.cx+P.x11),Qo($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,R,Qo($.y11,$.x11),Qo($.y01,$.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-kE/2;return[Zy(f)*c,hd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:_n(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:_n(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:_n(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:_n(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:_n(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:_n(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:_n(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function c6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mTe(e){this._context=e}mTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function uK(e){return new mTe(e)}function gTe(e){return e[0]}function yTe(e){return e[1]}function vTe(e,t){var n=_n(!0),r=null,i=uK,s=null,o=l6(a);e=typeof e=="function"?e:e===void 0?gTe:_n(e),t=typeof t=="function"?t:t===void 0?yTe:_n(t);function a(u){var l,c=(u=c6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:_n(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:_n(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:_n(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function bTe(e,t,n){var r=null,i=_n(!0),s=null,o=uK,a=null,u=l6(l);e=typeof e=="function"?e:e===void 0?gTe:_n(+e),t=typeof t=="function"?t:_n(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?yTe:_n(+n);function l(f){var d,h,p,m=(f=c6(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return vTe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:_n(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:_n(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:_n(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:_n(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:_n(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:_n(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:_n(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function rmt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function imt(e){return e}function smt(){var e=imt,t=rmt,n=null,r=_n(0),i=_n(sC),s=_n(0);function o(a){var u,l=(a=c6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(sC,Math.max(-sC,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,S){return t(p[E],p[S])}):n!=null&&h.sort(function(E,S){return n(a[E],a[S])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:_n(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:_n(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:_n(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:_n(+a),o):s},o}const omt={draw(e,t){const n=Gv(t/kE);e.moveTo(n,0),e.arc(0,0,n,0,sC)}};function amt(e,t){let n=null,r=l6(i);e=typeof e=="function"?e:_n(e||omt),t=typeof t=="function"?t:_n(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:_n(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:_n(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function L0(){}function w3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function f6(e){this._context=e}f6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:w3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:w3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function umt(e){return new f6(e)}function _Te(e){this._context=e}_Te.prototype={areaStart:L0,areaEnd:L0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:w3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lmt(e){return new _Te(e)}function wTe(e){this._context=e}wTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:w3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cmt(e){return new wTe(e)}function ETe(e,t){this._basis=new f6(e),this._beta=t}ETe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const fmt=function e(t){function n(r){return t===1?new f6(r):new ETe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function E3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function lK(e,t){this._context=e,this._k=(1-t)/6}lK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:E3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:E3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const dmt=function e(t){function n(r){return new lK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function cK(e,t){this._context=e,this._k=(1-t)/6}cK.prototype={areaStart:L0,areaEnd:L0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:E3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const hmt=function e(t){function n(r){return new cK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function fK(e,t){this._context=e,this._k=(1-t)/6}fK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:E3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const pmt=function e(t){function n(r){return new fK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function dK(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ea){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ea){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function xTe(e,t){this._context=e,this._alpha=t}xTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:dK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const mmt=function e(t){function n(r){return t?new xTe(r,t):new lK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function STe(e,t){this._context=e,this._alpha=t}STe.prototype={areaStart:L0,areaEnd:L0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:dK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const gmt=function e(t){function n(r){return t?new STe(r,t):new cK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function TTe(e,t){this._context=e,this._alpha=t}TTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ymt=function e(t){function n(r){return t?new TTe(r,t):new fK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function ATe(e){this._context=e}ATe.prototype={areaStart:L0,areaEnd:L0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function vmt(e){return new ATe(e)}function Lle(e){return e<0?-1:1}function Fle(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Lle(s)+Lle(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function jle(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function lj(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function x3(e){this._context=e}x3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:lj(this,this._t0,jle(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,lj(this,jle(this,n=Fle(this,e,t)),n);break;default:lj(this,this._t0,n=Fle(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function CTe(e){this._context=new ITe(e)}(CTe.prototype=Object.create(x3.prototype)).point=function(e,t){x3.prototype.point.call(this,t,e)};function ITe(e){this._context=e}ITe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function bmt(e){return new x3(e)}function _mt(e){return new CTe(e)}function kTe(e){this._context=e}kTe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Ble(e),i=Ble(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ble(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function wmt(e){return new kTe(e)}function d6(e,t){this._context=e,this._t=t}d6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Emt(e){return new d6(e,.5)}function xmt(e){return new d6(e,0)}function Smt(e){return new d6(e,1)}function Ule(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function zle(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Tmt(e,t){return e[t]}function Amt(e){const t=[];return t.key=e,t}function Cmt(){var e=_n([]),t=zle,n=Ule,r=Tmt;function i(s){var o=Array.from(e.apply(this,arguments),Amt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=c6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:_n(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:_n(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?zle:typeof s=="function"?s:_n(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Ule,i):n},i}function oA(e,t,n){this.k=e,this.x=t,this.y=n}oA.prototype={constructor:oA,scale:function(e){return e===1?this:new oA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new oA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};oA.prototype;function hK({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?o6("%B"):qx(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(hm,{children:_.jsx(Fs,{gap:3,children:_.jsx(ot,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(hm,{children:_.jsx(is,{withinPortal:!0,label:c,children:_.jsx(ot,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const Imt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:hK},Symbol.toStringTag,{value:"Module"}));function RTe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(hm,{children:_.jsx(Fs,{gap:3,children:_.jsx(ot,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(Fs,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(ot,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const kmt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:RTe},Symbol.toStringTag,{value:"Module"})),Ql={top:15,left:100,right:50,bottom:50};function q7({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=xw(),o=N.useMemo(()=>s-Ql.left-Ql.right,[s]),a=N.useMemo(()=>i-Ql.top-Ql.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Gx(pTe).domain(d)},[n,t.category]),l=N.useMemo(()=>e?_m([Ql.left,o+Ql.left]).domain([0,d0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?nk([Ql.top,a+Ql.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:Ql.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Ql.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(hK,{xScale:l,yRange:c.range(),vertPosition:a+Ql.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(RTe,{yScale:c,horizontalPosition:Ql.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(Bm,{})}const Rmt=Object.freeze(Object.defineProperty({__proto__:null,Bar:q7,default:q7},Symbol.toStringTag,{value:"Module"})),fr=Array.isArray;function Gu(e){return e!=null?fr(e)?e:[e]:[]}function Nmt(e=0,t=1/0){return`${Vle(e)} < row_number() && row_number() <= ${Vle(t)}`}function Vle(e){return e<0?`count() + ${e}`:e}class NTe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(Nmt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Gu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function wn(e){throw Error(e)}function Ja(e){return typeof e=="number"}function hi(e){return typeof e=="function"}function h6(e,t){const n=Array(e);if(hi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let Pmt=class extends NTe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){wn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){wn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){wn("Not implemented")}getter(t){wn("Not implemented")}objects(t){wn("Not implemented")}object(t){wn("Not implemented")}[Symbol.iterator](){wn("Not implemented")}print(t={}){Ja(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=h6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},Dmt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},Omt=function(e){return e&&hi(e.get)?e:new Dmt(e)};function Em(e){return e instanceof Date}function va(e){return e===Object(e)}function S3(e){return e instanceof RegExp}function Fo(e){return typeof e=="string"}function $mt(e,t){const n=r=>wn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Hle(e.entries(),t):Em(e)?n("Date"):S3(e)?n("RegExp"):Fo(e)?n():fr(e)?Mmt(e,t):hi(e[Symbol.iterator])?Lmt(e,t):va(e)?Hle(Object.entries(e),t):n()}function Hle(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function Mmt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function Lmt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:Fmt}=Object.prototype;function Bf(e,t){return Fmt.call(e,t)}function Gl(e){return e?new qle({...e.data()},e.columnNames()):new qle}class qle{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Bf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const or=void 0,jmt=Object.getPrototypeOf(Int8Array);function ik(e){return e instanceof jmt}function Yv(e){return fr(e)||ik(e)}function Sf(e){return e!=null&&e===e}const dT=e=>Yv(e)||Fo(e),Bmt={compact:e=>Yv(e)?e.filter(t=>Sf(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>dT(e)?e.includes(t,n):!1,indexof:(e,t)=>dT(e)?e.indexOf(t):-1,join:(e,t)=>Yv(e)?e.join(t):or,lastindexof:(e,t)=>dT(e)?e.lastIndexOf(t):-1,length:e=>dT(e)?e.length:0,pluck:(e,t)=>Yv(e)?e.map(n=>Sf(n)?n[t]:or):or,reverse:e=>Yv(e)?e.slice().reverse():Fo(e)?e.split("").reverse().join(""):or,slice:(e,t,n)=>dT(e)?e.slice(t,n):or};function Umt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function QP(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const pd=e=>(e<10?"0":"")+e,zmt=e=>e<0?"-"+QP(-e,6):e>9999?"+"+QP(e,6):QP(e,4);function PTe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return zmt(e)+"-"+pd(t+1)+"-"+pd(n)+(!u||o?"T"+pd(r)+":"+pd(i)+":"+pd(s)+"."+QP(o,3)+l:s?"T"+pd(r)+":"+pd(i)+":"+pd(s)+l:i||r||!a?"T"+pd(r)+":"+pd(i)+l:"")}function DTe(e,t){return isNaN(e)?"Invalid Date":PTe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function p6(e,t){return isNaN(e)?"Invalid Date":PTe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const Vmt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function Hmt(e){return e.match(Vmt)&&!isNaN(Date.parse(e))}function qmt(e,t=Date.parse){return Hmt(e)?t(e):e}const OTe=6e4,$Te=864e5,MTe=6048e5,zi=new Date,Vi=new Date,Zi=e=>(zi.setTime(typeof e=="string"?qmt(e):e),zi);function Wmt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function Gmt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function Ymt(e){Vi.setTime(+e),Vi.setHours(0,0,0,0),zi.setTime(+Vi),zi.setMonth(0),zi.setDate(1);const t=(Vi.getTimezoneOffset()-zi.getTimezoneOffset())*OTe;return Math.floor(1+(Vi-zi-t)/$Te)}function Kmt(e){Vi.setTime(+e),Vi.setUTCHours(0,0,0,0);const t=Date.UTC(Vi.getUTCFullYear(),0,1);return Math.floor(1+(Vi-t)/$Te)}function Xmt(e,t){const n=t||0;Vi.setTime(+e),Vi.setDate(Vi.getDate()-(Vi.getDay()+7-n)%7),Vi.setHours(0,0,0,0),zi.setTime(+e),zi.setMonth(0),zi.setDate(1),zi.setDate(1-(zi.getDay()+7-n)%7),zi.setHours(0,0,0,0);const r=(Vi.getTimezoneOffset()-zi.getTimezoneOffset())*OTe;return Math.floor((1+(Vi-zi)-r)/MTe)}function Qmt(e,t){const n=t||0;return Vi.setTime(+e),Vi.setUTCDate(Vi.getUTCDate()-(Vi.getUTCDay()+7-n)%7),Vi.setUTCHours(0,0,0,0),zi.setTime(+e),zi.setUTCMonth(0),zi.setUTCDate(1),zi.setUTCDate(1-(zi.getUTCDay()+7-n)%7),zi.setUTCHours(0,0,0,0),Math.floor((1+(Vi-zi))/MTe)}const Jmt={format_date:(e,t)=>DTe(Zi(e),!t),format_utcdate:(e,t)=>p6(Zi(e),!t),timestamp:e=>+Zi(e),year:e=>Zi(e).getFullYear(),quarter:e=>Math.floor(Zi(e).getMonth()/3),month:e=>Zi(e).getMonth(),date:e=>Zi(e).getDate(),dayofweek:e=>Zi(e).getDay(),hours:e=>Zi(e).getHours(),minutes:e=>Zi(e).getMinutes(),seconds:e=>Zi(e).getSeconds(),milliseconds:e=>Zi(e).getMilliseconds(),utcyear:e=>Zi(e).getUTCFullYear(),utcquarter:e=>Math.floor(Zi(e).getUTCMonth()/3),utcmonth:e=>Zi(e).getUTCMonth(),utcdate:e=>Zi(e).getUTCDate(),utcdayofweek:e=>Zi(e).getUTCDay(),utchours:e=>Zi(e).getUTCHours(),utcminutes:e=>Zi(e).getUTCMinutes(),utcseconds:e=>Zi(e).getUTCSeconds(),utcmilliseconds:e=>Zi(e).getUTCMilliseconds(),datetime:Wmt,dayofyear:Ymt,week:Xmt,utcdatetime:Gmt,utcdayofyear:Kmt,utcweek:Qmt,now:Date.now};function pK(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Em(e)||Em(t)?+e==+t:S3(e)&&S3(t)?e+""==t+"":va(e)&&va(t)?Zmt(e,t):!1}function Zmt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Wle(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Wle(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!pK(e[o],t[o]))return!1}return!0}function Wle(e,t,n=pK){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const egt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let tgt=Math.random;function Xx(){return tgt()}const ngt={random:Xx,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function mK(e){return e instanceof Map}function rgt(e){return e instanceof Set}function JP(e){return mK(e)||rgt(e)}function cj(e){return Array.from(e)}const igt={has:(e,t)=>JP(e)?e.has(t):e!=null?Bf(e,t):!1,keys:e=>mK(e)?cj(e.keys()):e!=null?Object.keys(e):[],values:e=>JP(e)?cj(e.values()):e!=null?Object.values(e):[],entries:e=>JP(e)?cj(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):or};function sgt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Bf(t,e))return t[e];return n!==void 0?n:e}function ogt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const agt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},ow={bin:Umt,equal:pK,recode:sgt,sequence:ogt,...Bmt,...Jmt,...egt,...ngt,...igt,...agt};function E2(e){return typeof e=="bigint"}function vh(e){return e===void 0?e+"":E2(e)?e+"n":JSON.stringify(e)}function gn(e,t=[],n=[]){return new ugt(e,Gu(t),Gu(n))}let ugt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${vh(n)}]`),...this.params.map(vh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const LTe=e=>gn("any",e),FTe=()=>gn("count"),jTe=e=>gn("array_agg",e),BTe=e=>gn("array_agg_distinct",e),UTe=(e,t)=>gn("map_agg",[e,t]),zTe=(e,t)=>gn("object_agg",[e,t]),VTe=(e,t)=>gn("entries_agg",[e,t]);({...ow});function lgt(e,t){e=JP(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function cgt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function fgt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function dgt(e,t,n,r){const i=r==="map"||r===!0?UTe:r==="entries"?VTe:r==="object"?zTe:wn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=lgt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:jTe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const hgt="ArrayPattern",pgt="ArrowFunctionExpression",mgt="FunctionExpression",p0="Identifier",Qx="Literal",HTe="MemberExpression",ggt="ObjectExpression",qTe="ObjectPattern",WTe="Property",sk="Column",ygt="Constant",vgt="Dictionary",bgt="Function",_gt="Parameter",GTe="Op",Qr=(e,t)=>{const n=wgt[e.type];return n?n(e,t):wn(`Unsupported expression construct: ${e.type}`)},fj=(e,t)=>"("+Qr(e.left,t)+" "+e.operator+" "+Qr(e.right,t)+")",dj=(e,t)=>"("+xd(e.params,t)+")=>"+Qr(e.body,t),Gle=(e,t)=>Qr(e.callee,t)+"("+xd(e.arguments,t)+")",xd=(e,t,n=",")=>e.map(r=>Qr(r,t)).join(n),YTe=e=>e.computed?`[${vh(e.name)}]`:`.${e.name}`,Yle=(e,t,n)=>{const r=e.table||"";return`data${r}${YTe(e)}.${n}(${t.index}${r})`},wgt={Constant:e=>e.raw,Column:(e,t)=>Yle(e,t,"get"),Dictionary:(e,t)=>Yle(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${YTe(e)}`,Op:(e,t)=>`op(${vh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Qr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Qr(e.object,t),i=Qr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Gle,NewExpression:(e,t)=>"new "+Gle(e,t),ArrayExpression:(e,t)=>"["+xd(e.elements,t)+"]",AssignmentExpression:fj,BinaryExpression:fj,LogicalExpression:fj,UnaryExpression:(e,t)=>"("+e.operator+Qr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Qr(e.test,t)+"?"+Qr(e.consequent,t)+":"+Qr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+xd(e.properties,t)+"})",Property:(e,t)=>{const n=Qr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Qr(e.value,t)},ArrowFunctionExpression:dj,FunctionExpression:dj,FunctionDeclaration:dj,ArrayPattern:(e,t)=>"["+xd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+xd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+xd(e.declarations,t,","),VariableDeclarator:(e,t)=>Qr(e.id,t)+"="+Qr(e.init,t),SpreadElement:(e,t)=>"..."+Qr(e.argument,t),BlockStatement:(e,t)=>"{"+xd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Qr(e.expression,t),IfStatement:(e,t)=>"if ("+Qr(e.test,t)+")"+Qr(e.consequent,t)+(e.alternate?" else "+Qr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Qr(e.discriminant,t)+") {"+xd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Qr(e.test,t):"default")+": "+xd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Qr(e.argument,t),Program:(e,t)=>Qr(e.body[0],t)};function T3(e,t={index:"row"}){return Qr(e,t)}function Egt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function RE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Em(e)?+e:fr(e)||ik(e)?`[${e.map(RE)}]`:S3(e)?e+"":xgt(e)}function xgt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${RE(e[r])}`;return t+="}",t}function A3(e,t){const n=e.length;return n===1?(r,i)=>RE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=RE(a)}return s}}function Sgt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=RE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=RE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Sp(){}function Tgt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Ss(e){return e.init=e.init||Sp,e.add=e.add||Sp,e.rem=e.rem||Sp,e}function Kle(e,t){return e.product_v=!1,e.product=t}const KTe={count:{create:()=>Ss({value:e=>e.count}),param:[]},array_agg:{create:()=>Ss({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Ss({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Ss({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Ss({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Ss({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:or}),param:[1]},valid:{create:()=>Ss({value:e=>e.valid}),param:[1]},invalid:{create:()=>Ss({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Sgt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Ss({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Ss({value:e=>{let t=or,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:or,add:(e,t)=>E2(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Kle(e,1),value:e=>e.valid?e.product_v?Kle(e,Tgt(e.list.values())):e.product:void 0,add:(e,t)=>E2(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:or,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Ss({value:e=>e.valid?e.mean:or}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):or,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Ss({value:e=>e.valid>1?e.dev/e.valid:or}),param:[1],req:["variance"]},stdev:{create:()=>Ss({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):or}),param:[1],req:["variance"]},stdevp:{create:()=>Ss({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):or}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=or,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===or)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=or,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===or)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Ss({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Ss({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):or,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Ss({value:e=>e.valid>1?e.cov/e.valid:or}),param:[2],req:["covariance"]},corr:{create:()=>Ss({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):or}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Ss({value:i=>Egt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Xle={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Qle={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},XTe={row_number:{create(){return{init:Sp,value:e=>e.index+1}},param:[]},rank:Xle,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Xle.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Qle,ntile:{create(e){e=+e,e>0||wn("ntile num must be greater than zero.");const{init:t,value:n}=Qle.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=or){return e=+e||1,{init:Sp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=or){return e=+e||1,{init:Sp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Sp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Sp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||wn("nth_value nth must be greater than zero."),{init:Sp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):or}}},param:[1,1]},fill_down:{create(e=or){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Sf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=or){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Agt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Agt(e,t,n){for(const r=e.size;n<r;++n)if(Sf(e.value(n,t)))return n;return-1}function gK(e){return Bf(KTe,e)}function yK(e){return Bf(XTe,e)}function QTe(e){return Bf(ow,e)||e==="row_object"}function JTe(e){return gK(e)&&KTe[e]}function ZTe(e){return yK(e)&&XTe[e]}function hT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const vK={escape:(e,t,n)=>hT(e,t,n),expr:(e,t)=>hT(`(row,data,op)=>${e}`,ow,t),expr2:(e,t)=>hT(`(row0,data0,row,data)=>${e}`,ow,t),join:(e,t)=>hT(`(row1,data1,row2,data2)=>${e}`,ow,t),param:(e,t)=>hT(e,ow,t)},Cgt={"==":1,"!=":1,"===":1,"!==":1};function eAe(e,t,n=0,r,i){if(e.type=sk,e.name=t,e.table=n,i&&r&&hi(r.keyFor)){const s=Cgt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===Qx&&Igt(i,e,s,r.keyFor(s.value))}return e}function Igt(e,t,n,r){return r<0?(e.type=Qx,e.value=!1,e.raw="false"):(t.type=vgt,n.value=r,n.raw=r+""),!0}function m6(e){return fr(e)?e:mK(e)?e.entries():e?Object.entries(e):[]}const tAe="row_object";function nAe(e,t){e.type=ggt;const n=e.properties=[];for(const r of m6(t)){const[i,s]=fr(r)?r:[r,r];n.push({type:WTe,key:{type:Qx,raw:vh(s)},value:eAe({computed:!0},i)})}return e}function rAe(e){return T3(nAe({},e))}function iAe(e){return vK.expr(rAe(e))}const kgt=new TextDecoder("utf-8"),W7=e=>kgt.decode(e),Rgt=new TextEncoder,bK=e=>Rgt.encode(e),Ngt=e=>typeof e=="boolean",vu=e=>typeof e=="function",ky=e=>e!=null&&Object(e)===e,g6=e=>ky(e)&&vu(e.then),_K=e=>ky(e)&&vu(e[Symbol.iterator]),y6=e=>ky(e)&&vu(e[Symbol.asyncIterator]),Pgt=e=>ky(e)&&"done"in e&&"value"in e,sAe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Dgt=e=>ky(e)&&vu(e.abort)&&vu(e.getWriter)&&!sAe(e),Ogt=e=>ky(e)&&vu(e.end)&&vu(e.write)&&Ngt(e.writable)&&!sAe(e),$gt=e=>ky(e)&&vu(e.clear)&&vu(e.bytes)&&vu(e.position)&&vu(e.setPosition)&&vu(e.capacity)&&vu(e.getBufferIdentifier)&&vu(e.createLong),wK=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Mgt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function C3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function bh(e,t){const n=Mgt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?C3(o,s,a):o=s;break}C3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Ys(e,t){let n=Pgt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=bK(n)),n instanceof ArrayBuffer?new e(n):n instanceof wK?new e(n):$gt(n)?Ys(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const pT=e=>Ys(Int32Array,e),Rr=e=>Ys(Uint8Array,e),G7=e=>(e.next(),e);function*Lgt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof wK?n(t):_K(t)?t:n(t);return yield*G7(function*(i){let s=null;do s=i.next(yield Ys(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Fgt=e=>Lgt(Uint8Array,e);function oAe(e,t){return zv(this,arguments,function*(){if(g6(t))return yield Gn(yield Gn(yield*G5(HA(oAe(e,yield Gn(t))))));const r=function(o){return zv(this,arguments,function*(){yield yield Gn(yield Gn(o))})},i=function(o){return zv(this,arguments,function*(){yield Gn(yield*G5(HA(G7(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof wK?r(t):_K(t)?i(t):y6(t)?t:r(t);return yield Gn(yield*G5(HA(G7(function(o){return zv(this,arguments,function*(){let a=null;do a=yield Gn(o.next(yield yield Gn(Ys(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Gn(new e)})}const jgt=e=>oAe(Uint8Array,e);function aAe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function Bgt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Jle={fromIterable(e){return TN(Ugt(e))},fromAsyncIterable(e){return TN(zgt(e))},fromDOMStream(e){return TN(Vgt(e))},fromNodeStream(e){return TN(qgt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},TN=e=>(e.next(),e);function*Ugt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?bh(r,o)[0]:([i,r,a]=bh(r,o),i)}({cmd:s,size:o}=yield null);const l=Fgt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function zgt(e){return zv(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?bh(i,a)[0]:([s,i,u]=bh(i,a),s)}({cmd:o,size:a}=yield yield Gn(null));const c=jgt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gn(c.next()):yield Gn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Gn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Gn(c.return(new Uint8Array(0))))}return yield Gn(null)})}function Vgt(e){return zv(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?bh(i,a)[0]:([s,i,u]=bh(i,a),s)}({cmd:o,size:a}=yield yield Gn(null));const c=new Hgt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gn(c.read()):yield Gn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Rr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Gn(c.cancel(f)))}finally{r===!1?yield Gn(c.cancel()):e.locked&&c.releaseLock()}return yield Gn(null)})}class Hgt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Cp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Cp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Rr(n)),n})}}const hj=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function qgt(e){return zv(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?bh(l,a)[0]:([c,l,u]=bh(l,a),c)}if({cmd:o,size:a}=yield yield Gn(null),e.isTTY)return yield yield Gn(new Uint8Array(0)),yield Gn(null);try{n[0]=hj(e,"end"),n[1]=hj(e,"error");do{if(n[2]=hj(e,"readable"),[r,s]=yield Gn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Rr(e.read(a-u)),c.byteLength<a-u&&(c=Rr(e.read()))):c=Rr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Gn(f()));while(a<u)}while(!i)}finally{yield Gn(d(n,r==="error"?s:null))}return yield Gn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ba;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ba||(Ba={}));var Yu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Yu||(Yu={}));var No;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(No||(No={}));var _h;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(_h||(_h={}));var Ht;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Ht||(Ht={}));var wh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(wh||(wh={}));var Qs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Qs||(Qs={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var vp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(vp||(vp={}));const Wgt=void 0;function F1(e){if(e===null)return"null";if(e===Wgt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>F1(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Ggt=Symbol.for("isArrowBigNum");function ed(e,...t){return t.length===0?Object.setPrototypeOf(Ys(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}ed.prototype[Ggt]=!0;ed.prototype.toJSON=function(){return`"${S2(this)}"`};ed.prototype.valueOf=function(){return uAe(this)};ed.prototype.toString=function(){return S2(this)};ed.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return uAe(this);case"string":return S2(this);case"default":return Ygt(this)}return S2(this)};function Dw(...e){return ed.apply(this,e)}function Ow(...e){return ed.apply(this,e)}function x2(...e){return ed.apply(this,e)}Object.setPrototypeOf(Dw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Ow.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(x2.prototype,Object.create(Uint32Array.prototype));Object.assign(Dw.prototype,ed.prototype,{constructor:Dw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Ow.prototype,ed.prototype,{constructor:Ow,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(x2.prototype,ed.prototype,{constructor:x2,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function uAe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const S2=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return pj(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return pj(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${pj(t)}`},Ygt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:S2(e);function pj(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class EK{static new(t,n){switch(n){case!0:return new Dw(t);case!1:return new Ow(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Dw(t)}return t.byteLength===16?new x2(t):new Ow(t)}static signed(t){return new Dw(t)}static unsigned(t){return new Ow(t)}static decimal(t){return new x2(t)}constructor(t,n){return EK.new(t,n)}}function Uf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var lAe,cAe,fAe,dAe,hAe,pAe,mAe,gAe,yAe,vAe,bAe,_Ae,wAe,EAe,xAe,SAe,TAe,AAe,CAe,IAe;let En=class Y7{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return Y7.isUnion(t)&&t.mode===Yu.Dense}static isSparseUnion(t){return Y7.isUnion(t)&&t.mode===Yu.Sparse}get typeId(){return re.NONE}};lAe=Symbol.toStringTag;En[lAe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(En.prototype);let xm=class extends En{toString(){return"Null"}get typeId(){return re.Null}};cAe=Symbol.toStringTag;xm[cAe]=(e=>e[Symbol.toStringTag]="Null")(xm.prototype);class Za extends En{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}fAe=Symbol.toStringTag;Za[fAe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Za.prototype);class xK extends Za{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class SK extends Za{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class F0 extends Za{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class TK extends Za{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class AK extends Za{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class CK extends Za{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class IK extends Za{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class kK extends Za{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(xK.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(SK.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(F0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(TK.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(AK.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(CK.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(IK.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(kK.prototype,"ArrayType",{value:BigUint64Array});class j0 extends En{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case No.HALF:return Uint16Array;case No.SINGLE:return Float32Array;case No.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}dAe=Symbol.toStringTag;j0[dAe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(j0.prototype);class kAe extends j0{constructor(){super(No.HALF)}}class RK extends j0{constructor(){super(No.SINGLE)}}class NK extends j0{constructor(){super(No.DOUBLE)}}Object.defineProperty(kAe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(RK.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(NK.prototype,"ArrayType",{value:Float64Array});let T2=class extends En{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};hAe=Symbol.toStringTag;T2[hAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(T2.prototype);let NE=class extends En{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};pAe=Symbol.toStringTag;NE[pAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(NE.prototype);let A2=class extends En{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};mAe=Symbol.toStringTag;A2[mAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(A2.prototype);let I3=class extends En{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};gAe=Symbol.toStringTag;I3[gAe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(I3.prototype);class PE extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${_h[this.unit]}>`}}yAe=Symbol.toStringTag;PE[yAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(PE.prototype);class Kgt extends PE{constructor(){super(_h.DAY)}}class Xgt extends PE{constructor(){super(_h.MILLISECOND)}}class Sm extends En{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Ht[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}vAe=Symbol.toStringTag;Sm[vAe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Sm.prototype);class Qgt extends Sm{constructor(){super(Ht.SECOND,32)}}class Jgt extends Sm{constructor(){super(Ht.MILLISECOND,32)}}class Zgt extends Sm{constructor(){super(Ht.MICROSECOND,64)}}class e0t extends Sm{constructor(){super(Ht.NANOSECOND,64)}}class k3 extends En{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Ht[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}bAe=Symbol.toStringTag;k3[bAe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(k3.prototype);class DE extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${wh[this.unit]}>`}}_Ae=Symbol.toStringTag;DE[_Ae]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(DE.prototype);class t0t extends DE{constructor(){super(wh.DAY_TIME)}}class n0t extends DE{constructor(){super(wh.YEAR_MONTH)}}let R3=class extends En{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Ht[this.unit]}>`}};wAe=Symbol.toStringTag;R3[wAe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(R3.prototype);let OE=class extends En{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};EAe=Symbol.toStringTag;OE[EAe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(OE.prototype);class ua extends En{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}xAe=Symbol.toStringTag;ua[xAe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(ua.prototype);class C2 extends En{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}SAe=Symbol.toStringTag;C2[SAe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(C2.prototype);let N3=class extends En{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};TAe=Symbol.toStringTag;N3[TAe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(N3.prototype);let $E=class extends En{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};AAe=Symbol.toStringTag;$E[AAe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))($E.prototype);class I2 extends En{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}CAe=Symbol.toStringTag;I2[CAe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(I2.prototype);const r0t=(e=>()=>++e)(-1);class B0 extends En{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?r0t():Uf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}IAe=Symbol.toStringTag;B0[IAe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(B0.prototype);function Ad(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class xn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return i0t(this,t,n)}getVisitFnByTypeId(t,n=!0){return O_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function i0t(e,t,n=!0){return typeof t=="number"?O_(e,t,n):typeof t=="string"&&t in re?O_(e,re[t],n):t&&t instanceof En?O_(e,Zle(t),n):t!=null&&t.type&&t.type instanceof En?O_(e,Zle(t.type),n):O_(e,re.NONE,n)}function O_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Zle(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case No.HALF:return re.Float16;case No.SINGLE:return re.Float32;case No.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Ht.SECOND:return re.TimeSecond;case Ht.MILLISECOND:return re.TimeMillisecond;case Ht.MICROSECOND:return re.TimeMicrosecond;case Ht.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Ht.SECOND:return re.TimestampSecond;case Ht.MILLISECOND:return re.TimestampMillisecond;case Ht.MICROSECOND:return re.TimestampMicrosecond;case Ht.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case _h.DAY:return re.DateDay;case _h.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case wh.DAY_TIME:return re.IntervalDayTime;case wh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Ht.SECOND:return re.DurationSecond;case Ht.MILLISECOND:return re.DurationMillisecond;case Ht.MICROSECOND:return re.DurationMicrosecond;case Ht.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case Yu.Dense:return re.DenseUnion;case Yu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}xn.prototype.visitInt8=null;xn.prototype.visitInt16=null;xn.prototype.visitInt32=null;xn.prototype.visitInt64=null;xn.prototype.visitUint8=null;xn.prototype.visitUint16=null;xn.prototype.visitUint32=null;xn.prototype.visitUint64=null;xn.prototype.visitFloat16=null;xn.prototype.visitFloat32=null;xn.prototype.visitFloat64=null;xn.prototype.visitDateDay=null;xn.prototype.visitDateMillisecond=null;xn.prototype.visitTimestampSecond=null;xn.prototype.visitTimestampMillisecond=null;xn.prototype.visitTimestampMicrosecond=null;xn.prototype.visitTimestampNanosecond=null;xn.prototype.visitTimeSecond=null;xn.prototype.visitTimeMillisecond=null;xn.prototype.visitTimeMicrosecond=null;xn.prototype.visitTimeNanosecond=null;xn.prototype.visitDenseUnion=null;xn.prototype.visitSparseUnion=null;xn.prototype.visitIntervalDayTime=null;xn.prototype.visitIntervalYearMonth=null;xn.prototype.visitDuration=null;xn.prototype.visitDurationSecond=null;xn.prototype.visitDurationMillisecond=null;xn.prototype.visitDurationMicrosecond=null;xn.prototype.visitDurationNanosecond=null;const RAe=new Float64Array(1),g_=new Uint32Array(RAe.buffer);function NAe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function PAe(e){if(e!==e)return 32256;RAe[0]=e;const t=(g_[1]&2147483648)>>16&65535;let n=g_[1]&2146435072,r=0;return n>=1089470464?g_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(g_[1]&1048575)>>10):n<=1056964608?(r=1048576+(g_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(g_[1]&1048575)+512>>10),t|n|r&65535}class Xt extends xn{}function nn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const s0t=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},PK=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},o0t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},a0t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},DAe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},u0t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Gm=({values:e},t,n)=>{e[t]=n},DK=({values:e},t,n)=>{e[t]=n},OAe=({values:e},t,n)=>{e[t]=PAe(n)},l0t=(e,t,n)=>{switch(e.type.precision){case No.HALF:return OAe(e,t,n);case No.SINGLE:case No.DOUBLE:return DK(e,t,n)}},OK=({values:e},t,n)=>{s0t(e,t,n.valueOf())},$K=({values:e},t,n)=>{PK(e,t*2,n.valueOf())},$Ae=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},c0t=({values:e,valueOffsets:t},n,r)=>DAe(e,t,n,r),f0t=({values:e,valueOffsets:t},n,r)=>{DAe(e,t,n,bK(r))},MAe=(e,t,n)=>{e.type.unit===_h.DAY?OK(e,t,n):$K(e,t,n)},MK=({values:e},t,n)=>PK(e,t*2,n/1e3),LK=({values:e},t,n)=>PK(e,t*2,n),FK=({values:e},t,n)=>o0t(e,t*2,n),jK=({values:e},t,n)=>a0t(e,t*2,n),LAe=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return MK(e,t,n);case Ht.MILLISECOND:return LK(e,t,n);case Ht.MICROSECOND:return FK(e,t,n);case Ht.NANOSECOND:return jK(e,t,n)}},BK=({values:e},t,n)=>{e[t]=n},UK=({values:e},t,n)=>{e[t]=n},zK=({values:e},t,n)=>{e[t]=n},VK=({values:e},t,n)=>{e[t]=n},FAe=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return BK(e,t,n);case Ht.MILLISECOND:return UK(e,t,n);case Ht.MICROSECOND:return zK(e,t,n);case Ht.NANOSECOND:return VK(e,t,n)}},jAe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},d0t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Rc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},h0t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Rc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},p0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),m0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),g0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),y0t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),v0t=(e,t,n)=>{const r=e.type.children.map(s=>Rc.getVisitFn(s.type)),i=n instanceof Map?g0t(t,n):n instanceof dr?m0t(t,n):Array.isArray(n)?p0t(t,n):y0t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},b0t=(e,t,n)=>{e.type.mode===Yu.Dense?BAe(e,t,n):UAe(e,t,n)},BAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Rc.visit(i,e.valueOffsets[t],n)},UAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Rc.visit(i,t,n)},_0t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},zAe=(e,t,n)=>{e.type.unit===wh.DAY_TIME?HK(e,t,n):qK(e,t,n)},HK=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},qK=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},WK=({values:e},t,n)=>{e[t]=n},GK=({values:e},t,n)=>{e[t]=n},YK=({values:e},t,n)=>{e[t]=n},KK=({values:e},t,n)=>{e[t]=n},VAe=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return WK(e,t,n);case Ht.MILLISECOND:return GK(e,t,n);case Ht.MICROSECOND:return YK(e,t,n);case Ht.NANOSECOND:return KK(e,t,n)}},w0t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Rc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Xt.prototype.visitBool=nn(u0t);Xt.prototype.visitInt=nn(Gm);Xt.prototype.visitInt8=nn(Gm);Xt.prototype.visitInt16=nn(Gm);Xt.prototype.visitInt32=nn(Gm);Xt.prototype.visitInt64=nn(Gm);Xt.prototype.visitUint8=nn(Gm);Xt.prototype.visitUint16=nn(Gm);Xt.prototype.visitUint32=nn(Gm);Xt.prototype.visitUint64=nn(Gm);Xt.prototype.visitFloat=nn(l0t);Xt.prototype.visitFloat16=nn(OAe);Xt.prototype.visitFloat32=nn(DK);Xt.prototype.visitFloat64=nn(DK);Xt.prototype.visitUtf8=nn(f0t);Xt.prototype.visitBinary=nn(c0t);Xt.prototype.visitFixedSizeBinary=nn($Ae);Xt.prototype.visitDate=nn(MAe);Xt.prototype.visitDateDay=nn(OK);Xt.prototype.visitDateMillisecond=nn($K);Xt.prototype.visitTimestamp=nn(LAe);Xt.prototype.visitTimestampSecond=nn(MK);Xt.prototype.visitTimestampMillisecond=nn(LK);Xt.prototype.visitTimestampMicrosecond=nn(FK);Xt.prototype.visitTimestampNanosecond=nn(jK);Xt.prototype.visitTime=nn(FAe);Xt.prototype.visitTimeSecond=nn(BK);Xt.prototype.visitTimeMillisecond=nn(UK);Xt.prototype.visitTimeMicrosecond=nn(zK);Xt.prototype.visitTimeNanosecond=nn(VK);Xt.prototype.visitDecimal=nn(jAe);Xt.prototype.visitList=nn(d0t);Xt.prototype.visitStruct=nn(v0t);Xt.prototype.visitUnion=nn(b0t);Xt.prototype.visitDenseUnion=nn(BAe);Xt.prototype.visitSparseUnion=nn(UAe);Xt.prototype.visitDictionary=nn(_0t);Xt.prototype.visitInterval=nn(zAe);Xt.prototype.visitIntervalDayTime=nn(HK);Xt.prototype.visitIntervalYearMonth=nn(qK);Xt.prototype.visitDuration=nn(VAe);Xt.prototype.visitDurationSecond=nn(WK);Xt.prototype.visitDurationMillisecond=nn(GK);Xt.prototype.visitDurationMicrosecond=nn(YK);Xt.prototype.visitDurationNanosecond=nn(KK);Xt.prototype.visitFixedSizeList=nn(w0t);Xt.prototype.visitMap=nn(h0t);const Rc=new Xt,cf=Symbol.for("parent"),$w=Symbol.for("rowIndex");class XK{constructor(t,n){return this[cf]=t,this[$w]=n,new Proxy(this,new x0t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[$w],n=this[cf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Ku.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${F1(t)}: ${F1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new E0t(this[cf],this[$w])}}class E0t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Ku.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(XK.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[cf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[$w]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class x0t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[cf].type.children.map(n=>n.name)}has(t,n){return t[cf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[cf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[cf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Ku.visit(t[cf].children[r],t[$w]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[cf].type.children.findIndex(s=>s.name===n);return i!==-1?(Rc.visit(t[cf].children[i],t[$w],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Wt extends xn{}function Qt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const S0t=(e,t)=>864e5*e[t],QK=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),T0t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,A0t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,HAe=e=>new Date(e),C0t=(e,t)=>HAe(S0t(e,t)),I0t=(e,t)=>HAe(QK(e,t)),k0t=(e,t)=>null,qAe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},R0t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},WAe=({values:e},t)=>C0t(e,t),GAe=({values:e},t)=>I0t(e,t*2),Ry=({stride:e,values:t},n)=>t[e*n],N0t=({stride:e,values:t},n)=>NAe(t[e*n]),YAe=({values:e},t)=>e[t],P0t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),D0t=({values:e,valueOffsets:t},n)=>qAe(e,t,n),O0t=({values:e,valueOffsets:t},n)=>{const r=qAe(e,t,n);return r!==null?W7(r):null},$0t=({values:e},t)=>e[t],M0t=({type:e,values:t},n)=>e.precision!==No.HALF?t[n]:NAe(t[n]),L0t=(e,t)=>e.type.unit===_h.DAY?WAe(e,t):GAe(e,t),KAe=({values:e},t)=>1e3*QK(e,t*2),XAe=({values:e},t)=>QK(e,t*2),QAe=({values:e},t)=>T0t(e,t*2),JAe=({values:e},t)=>A0t(e,t*2),F0t=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return KAe(e,t);case Ht.MILLISECOND:return XAe(e,t);case Ht.MICROSECOND:return QAe(e,t);case Ht.NANOSECOND:return JAe(e,t)}},ZAe=({values:e},t)=>e[t],eCe=({values:e},t)=>e[t],tCe=({values:e},t)=>e[t],nCe=({values:e},t)=>e[t],j0t=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return ZAe(e,t);case Ht.MILLISECOND:return eCe(e,t);case Ht.MICROSECOND:return tCe(e,t);case Ht.NANOSECOND:return nCe(e,t)}},B0t=({values:e,stride:t},n)=>EK.decimal(e.subarray(t*n,t*(n+1))),U0t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new dr([u])},z0t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new v6(o.slice(i,s-i))},V0t=(e,t)=>new XK(e,t),H0t=(e,t)=>e.type.mode===Yu.Dense?rCe(e,t):iCe(e,t),rCe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ku.visit(r,e.valueOffsets[t])},iCe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ku.visit(r,t)},q0t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},W0t=(e,t)=>e.type.unit===wh.DAY_TIME?sCe(e,t):oCe(e,t),sCe=({values:e},t)=>e.subarray(2*t,2*(t+1)),oCe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},aCe=({values:e},t)=>e[t],uCe=({values:e},t)=>e[t],lCe=({values:e},t)=>e[t],cCe=({values:e},t)=>e[t],G0t=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return aCe(e,t);case Ht.MILLISECOND:return uCe(e,t);case Ht.MICROSECOND:return lCe(e,t);case Ht.NANOSECOND:return cCe(e,t)}},Y0t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new dr([s])};Wt.prototype.visitNull=Qt(k0t);Wt.prototype.visitBool=Qt(R0t);Wt.prototype.visitInt=Qt($0t);Wt.prototype.visitInt8=Qt(Ry);Wt.prototype.visitInt16=Qt(Ry);Wt.prototype.visitInt32=Qt(Ry);Wt.prototype.visitInt64=Qt(YAe);Wt.prototype.visitUint8=Qt(Ry);Wt.prototype.visitUint16=Qt(Ry);Wt.prototype.visitUint32=Qt(Ry);Wt.prototype.visitUint64=Qt(YAe);Wt.prototype.visitFloat=Qt(M0t);Wt.prototype.visitFloat16=Qt(N0t);Wt.prototype.visitFloat32=Qt(Ry);Wt.prototype.visitFloat64=Qt(Ry);Wt.prototype.visitUtf8=Qt(O0t);Wt.prototype.visitBinary=Qt(D0t);Wt.prototype.visitFixedSizeBinary=Qt(P0t);Wt.prototype.visitDate=Qt(L0t);Wt.prototype.visitDateDay=Qt(WAe);Wt.prototype.visitDateMillisecond=Qt(GAe);Wt.prototype.visitTimestamp=Qt(F0t);Wt.prototype.visitTimestampSecond=Qt(KAe);Wt.prototype.visitTimestampMillisecond=Qt(XAe);Wt.prototype.visitTimestampMicrosecond=Qt(QAe);Wt.prototype.visitTimestampNanosecond=Qt(JAe);Wt.prototype.visitTime=Qt(j0t);Wt.prototype.visitTimeSecond=Qt(ZAe);Wt.prototype.visitTimeMillisecond=Qt(eCe);Wt.prototype.visitTimeMicrosecond=Qt(tCe);Wt.prototype.visitTimeNanosecond=Qt(nCe);Wt.prototype.visitDecimal=Qt(B0t);Wt.prototype.visitList=Qt(U0t);Wt.prototype.visitStruct=Qt(V0t);Wt.prototype.visitUnion=Qt(H0t);Wt.prototype.visitDenseUnion=Qt(rCe);Wt.prototype.visitSparseUnion=Qt(iCe);Wt.prototype.visitDictionary=Qt(q0t);Wt.prototype.visitInterval=Qt(W0t);Wt.prototype.visitIntervalDayTime=Qt(sCe);Wt.prototype.visitIntervalYearMonth=Qt(oCe);Wt.prototype.visitDuration=Qt(G0t);Wt.prototype.visitDurationSecond=Qt(aCe);Wt.prototype.visitDurationMillisecond=Qt(uCe);Wt.prototype.visitDurationMicrosecond=Qt(lCe);Wt.prototype.visitDurationNanosecond=Qt(cCe);Wt.prototype.visitFixedSizeList=Qt(Y0t);Wt.prototype.visitMap=Qt(z0t);const Ku=new Wt,vf=Symbol.for("keys"),Mw=Symbol.for("vals");class v6{constructor(t){return this[vf]=new dr([t.children[0]]).memoize(),this[Mw]=t.children[1],new Proxy(this,new X0t)}[Symbol.iterator](){return new K0t(this[vf],this[Mw])}get size(){return this[vf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[vf],n=this[Mw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Ku.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${F1(t)}: ${F1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class K0t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Ku.visit(this.vals,t)]})}}class X0t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[vf].toArray().map(String)}has(t,n){return t[vf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[vf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[vf].indexOf(n);if(r!==-1){const i=Ku.visit(Reflect.get(t,Mw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[vf].indexOf(n);return i!==-1?(Rc.visit(Reflect.get(t,Mw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(v6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[vf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Mw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let ece;function fCe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(ece=s,s=o,o=ece),o>i&&(o=i),r?r(e,s,o):[s,o]}const tce=e=>e!==e;function Jx(e){if(typeof e!=="object"||e===null)return tce(e)?tce:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Bgt(e,n):!1:e instanceof Map?J0t(e):Array.isArray(e)?Q0t(e):e instanceof dr?Z0t(e):eyt(e,!0)}function Q0t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Jx(e[n]);return b6(t)}function J0t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Jx(r);return b6(n)}function Z0t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Jx(e.get(n));return b6(t)}function eyt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Jx(e[n[i]]);return b6(r,n)}function b6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return tyt(e,n);case Map:return nce(e,n,n.keys());case v6:case XK:case Object:case void 0:return nce(e,n,t||Object.keys(n))}return n instanceof dr?nyt(e,n):!1}}function tyt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function nyt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function nce(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function dCe(e,t,n,r){return(n&1<<r)!==0}function ryt(e,t,n,r){return(n&1<<r)>>r}function P3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):hCe(new JK(n,e,t,null,dCe)).subarray(0,r)),i}return n}function hCe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class JK{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function K7(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new JK(e,t,n-t,e,ryt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return K7(e,t,i)+K7(e,r,n)+iyt(e,i>>3,r-i>>3)}function iyt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=mj(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=mj(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=mj(s.getUint8(i)),i+=1;return r}function mj(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const syt=-1;class kr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return En.isSparseUnion(t)?this.children.some(n=>n.nullable):En.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(En.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=syt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-K7(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof kr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Ad(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(En.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Yu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(En.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Yu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(P3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new kr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(P3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[vp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[vp.TYPE])&&(o[vp.TYPE]=s.subarray(t,t+n)),(s=o[vp.OFFSET])&&(o[vp.OFFSET]=s.subarray(t,t+n+1))||(s=o[vp.DATA])&&(o[vp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}kr.prototype.children=Object.freeze([]);class oC extends xn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new kr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.data),s=Rr(t.nullBitmap),o=pT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.data),s=Rr(t.nullBitmap),o=pT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Rr(t.nullBitmap),o=pT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Rr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ys(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(En.isSparseUnion(n))return new kr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=pT(t.valueOffsets);return new kr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ys(n.indices.ArrayType,t.data),{["dictionary"]:o=new dr([new oC().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new oC().visit({type:n.valueType})}=t,s=Rr(t.nullBitmap),{["length"]:o=i.length/Ad(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new oC().visit({type:n.childType})}=t,s=Rr(t.nullBitmap),o=pT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,void 0,s],[i])}}const oyt=new oC;function ia(e){return oyt.visit(e)}class rce{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function pCe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function mCe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function gCe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function ZK(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function eX(e,t){return e.getValid(t)}function Lw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return ZK(r,this._offsets,n,t)}}function yCe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=ZK(s,this._offsets,r,n);return t=void 0,o}}function vCe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):ZK(s,this._offsets,i,n);return t=void 0,o}}class Gt extends xn{}function ayt(e,t){return t===null&&e.length>0?0:-1}function uyt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new JK(n,e.offset+(t||0),e.length,n,dCe)){if(!i)return r;++r}return-1}function ln(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return uyt(e,n)}const r=Ku.getVisitFn(e),i=Jx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function bCe(e,t,n){const r=Ku.getVisitFn(e),i=Jx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Gt.prototype.visitNull=ayt;Gt.prototype.visitBool=ln;Gt.prototype.visitInt=ln;Gt.prototype.visitInt8=ln;Gt.prototype.visitInt16=ln;Gt.prototype.visitInt32=ln;Gt.prototype.visitInt64=ln;Gt.prototype.visitUint8=ln;Gt.prototype.visitUint16=ln;Gt.prototype.visitUint32=ln;Gt.prototype.visitUint64=ln;Gt.prototype.visitFloat=ln;Gt.prototype.visitFloat16=ln;Gt.prototype.visitFloat32=ln;Gt.prototype.visitFloat64=ln;Gt.prototype.visitUtf8=ln;Gt.prototype.visitBinary=ln;Gt.prototype.visitFixedSizeBinary=ln;Gt.prototype.visitDate=ln;Gt.prototype.visitDateDay=ln;Gt.prototype.visitDateMillisecond=ln;Gt.prototype.visitTimestamp=ln;Gt.prototype.visitTimestampSecond=ln;Gt.prototype.visitTimestampMillisecond=ln;Gt.prototype.visitTimestampMicrosecond=ln;Gt.prototype.visitTimestampNanosecond=ln;Gt.prototype.visitTime=ln;Gt.prototype.visitTimeSecond=ln;Gt.prototype.visitTimeMillisecond=ln;Gt.prototype.visitTimeMicrosecond=ln;Gt.prototype.visitTimeNanosecond=ln;Gt.prototype.visitDecimal=ln;Gt.prototype.visitList=ln;Gt.prototype.visitStruct=ln;Gt.prototype.visitUnion=ln;Gt.prototype.visitDenseUnion=bCe;Gt.prototype.visitSparseUnion=bCe;Gt.prototype.visitDictionary=ln;Gt.prototype.visitInterval=ln;Gt.prototype.visitIntervalDayTime=ln;Gt.prototype.visitIntervalYearMonth=ln;Gt.prototype.visitDuration=ln;Gt.prototype.visitDurationSecond=ln;Gt.prototype.visitDurationMillisecond=ln;Gt.prototype.visitDurationMicrosecond=ln;Gt.prototype.visitDurationNanosecond=ln;Gt.prototype.visitFixedSizeList=ln;Gt.prototype.visitMap=ln;const D3=new Gt;class Yt extends xn{}function Jt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof Za&&t.bitWidth!==64||t instanceof Sm&&t.bitWidth!==64||t instanceof j0&&t.precision!==No.HALF))return new rce(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new rce(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new lyt(o)})}class lyt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Yt.prototype.visitNull=Jt;Yt.prototype.visitBool=Jt;Yt.prototype.visitInt=Jt;Yt.prototype.visitInt8=Jt;Yt.prototype.visitInt16=Jt;Yt.prototype.visitInt32=Jt;Yt.prototype.visitInt64=Jt;Yt.prototype.visitUint8=Jt;Yt.prototype.visitUint16=Jt;Yt.prototype.visitUint32=Jt;Yt.prototype.visitUint64=Jt;Yt.prototype.visitFloat=Jt;Yt.prototype.visitFloat16=Jt;Yt.prototype.visitFloat32=Jt;Yt.prototype.visitFloat64=Jt;Yt.prototype.visitUtf8=Jt;Yt.prototype.visitBinary=Jt;Yt.prototype.visitFixedSizeBinary=Jt;Yt.prototype.visitDate=Jt;Yt.prototype.visitDateDay=Jt;Yt.prototype.visitDateMillisecond=Jt;Yt.prototype.visitTimestamp=Jt;Yt.prototype.visitTimestampSecond=Jt;Yt.prototype.visitTimestampMillisecond=Jt;Yt.prototype.visitTimestampMicrosecond=Jt;Yt.prototype.visitTimestampNanosecond=Jt;Yt.prototype.visitTime=Jt;Yt.prototype.visitTimeSecond=Jt;Yt.prototype.visitTimeMillisecond=Jt;Yt.prototype.visitTimeMicrosecond=Jt;Yt.prototype.visitTimeNanosecond=Jt;Yt.prototype.visitDecimal=Jt;Yt.prototype.visitList=Jt;Yt.prototype.visitStruct=Jt;Yt.prototype.visitUnion=Jt;Yt.prototype.visitDenseUnion=Jt;Yt.prototype.visitSparseUnion=Jt;Yt.prototype.visitDictionary=Jt;Yt.prototype.visitInterval=Jt;Yt.prototype.visitIntervalDayTime=Jt;Yt.prototype.visitIntervalYearMonth=Jt;Yt.prototype.visitDuration=Jt;Yt.prototype.visitDurationSecond=Jt;Yt.prototype.visitDurationMillisecond=Jt;Yt.prototype.visitDurationMicrosecond=Jt;Yt.prototype.visitDurationNanosecond=Jt;Yt.prototype.visitFixedSizeList=Jt;Yt.prototype.visitMap=Jt;const tX=new Yt,cyt=(e,t)=>e+t;class Ny extends xn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Ht.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Eh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Eh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const fyt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),dyt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),hyt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Eh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},pyt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Eh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},myt=(e,t)=>e.type.mode===Yu.Dense?_Ce(e,t):wCe(e,t),_Ce=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Eh.visit(t[s],r[i])},wCe=({children:e},t)=>4+Eh.visitMany(e,e.map(()=>t)).reduce(cyt,0);Ny.prototype.visitUtf8=fyt;Ny.prototype.visitBinary=dyt;Ny.prototype.visitList=hyt;Ny.prototype.visitFixedSizeList=pyt;Ny.prototype.visitUnion=myt;Ny.prototype.visitDenseUnion=_Ce;Ny.prototype.visitSparseUnion=wCe;const Eh=new Ny;var ECe;const xCe={},SCe={};class dr{constructor(t){var n,r,i;const s=t[0]instanceof dr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof kr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=xCe[o.typeId],f=s[0];this.isValid=d=>eX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,SCe[o.typeId]),this._offsets=mCe(s);break}this.data=s,this.type=o,this.stride=Ad(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return pCe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return tX.visit(this)}concat(...t){return new dr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new dr(fCe(this,t,n,({data:r,_offsets:i},s,o)=>gCe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new dr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return En.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(En.isDictionary(this.type)){const t=new O3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new dr(n)}return new O3(this)}unmemoize(){if(En.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new dr(n)}return this}}ECe=Symbol.toStringTag;dr[ECe]=(e=>{e.type=En.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=Ku.getVisitFnByTypeId(n),i=Rc.getVisitFnByTypeId(n),s=D3.getVisitFnByTypeId(n),o=Eh.getVisitFnByTypeId(n);xCe[n]={get:r,set:i,indexOf:s,byteLength:o},SCe[n]=Object.create(e,{isValid:{value:Lw(eX)},get:{value:Lw(Ku.getVisitFnByTypeId(n))},set:{value:yCe(Rc.getVisitFnByTypeId(n))},indexOf:{value:vCe(D3.getVisitFnByTypeId(n))},getByteLength:{value:Lw(Eh.getVisitFnByTypeId(n))}})}return"Vector"})(dr.prototype);class O3 extends dr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new O3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new dr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function gyt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${yyt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function yyt(e){return typeof e!="bigint"?F1(e):`${F1(e)}n`}const gj=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,vyt=(e,t=0)=>e.length>=t?e.subarray(0,t):C3(new e.constructor(t),e,0);class _6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?gj(r*1,this.BYTES_PER_ELEMENT):gj(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=gj(t*this.stride,this.BYTES_PER_ELEMENT);const n=vyt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=C3(new this.ArrayType(t),this.buffer)}}_6.prototype.offset=0;class ok extends _6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class TCe extends ok{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class ACe extends ok{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let nl=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Ad(t),this._nulls=new TCe,n&&n.length>0&&(this._isValid=gyt(n))}toVector(){return new dr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),ia({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};nl.prototype.length=1;nl.prototype.stride=1;nl.prototype.children=null;nl.prototype.finished=!1;nl.prototype.nullValues=null;nl.prototype._isValid=()=>!0;class Ym extends nl{constructor(t){super(t),this._values=new ok(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class w6 extends nl{constructor(t){super(t),this._pendingLength=0,this._offsets=new ACe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof v6?n[vf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class X7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const yj=2,$d=4,Rp=4,jr=4,Tg=new Int32Array(2),ice=new Float32Array(Tg.buffer),sce=new Float64Array(Tg.buffer),AN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Q7;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Q7||(Q7={}));let $3=class CCe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new CCe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Tg[0]=this.readInt32(t),ice[0]}readFloat64(t){return Tg[AN?0:1]=this.readInt32(t),Tg[AN?1:0]=this.readInt32(t+4),sce[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){ice[0]=n,this.writeInt32(t,Tg[0])}writeFloat64(t,n){sce[0]=n,this.writeInt32(t,Tg[AN?0:1]),this.writeInt32(t+4,Tg[AN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+$d+Rp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Rp;n++)t+=String.fromCharCode(this.readInt8(this.position_+$d+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=$d;const i=this.bytes_.subarray(t,t+r);return n===Q7.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+$d}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Rp)throw new Error("FlatBuffers: file identifier must be length "+Rp);for(let n=0;n<Rp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+$d+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},ICe=class kCe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=$3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=kCe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=$3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep($d,0),this.writeInt32(this.offset()-t+$d)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*yj;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=yj;l<s;l+=yj)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?jr:0;if(n){const s=n;if(this.prep(this.minalign,$d+Rp+i),s.length!=Rp)throw new TypeError("FlatBuffers: file identifier must be length "+Rp);for(let o=Rp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,$d+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep($d,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Is{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+jr),(n||new Is).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Is.startKeyValue(t),Is.addKey(t,n),Is.addValue(t,r),Is.endKeyValue(t)}}var ME;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ME||(ME={}));var LE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(LE||(LE={}));var M3;(function(e){e[e.DenseArray=0]="DenseArray"})(M3||(M3={}));class ml{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new ml).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+jr),(n||new ml).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return ml.startInt(t),ml.addBitWidth(t,n),ml.addIsSigned(t,r),ml.endInt(t)}}class Np{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Np).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+jr),(n||new Np).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ml).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):M3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,M3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Kv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Kv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+jr),(n||new Kv).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Kv.startBinary(t),Kv.endBinary(t)}}class Xv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Xv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+jr),(n||new Xv).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Xv.startBool(t),Xv.endBool(t)}}var L3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(L3||(L3={}));let ZP=class $_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new $_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+jr),(n||new $_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):L3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,L3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return $_.startDate(t),$_.addUnit(t,n),$_.endDate(t)}};class bu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new bu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+jr),(n||new bu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return bu.startDecimal(t),bu.addPrecision(t,n),bu.addScale(t,r),bu.addBitWidth(t,i),bu.endDecimal(t)}}var U0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(U0||(U0={}));class Md{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+jr),(n||new Md).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):U0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,U0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Md.startDuration(t),Md.addUnit(t,n),Md.endDuration(t)}}class Ld{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+jr),(n||new Ld).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Ld.startFixedSizeBinary(t),Ld.addByteWidth(t,n),Ld.endFixedSizeBinary(t)}}class Fd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+jr),(n||new Fd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Fd.startFixedSizeList(t),Fd.addListSize(t,n),Fd.endFixedSizeList(t)}}var F3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(F3||(F3={}));class jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+jr),(n||new jd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):F3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,F3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return jd.startFloatingPoint(t),jd.addPrecision(t,n),jd.endFloatingPoint(t)}}var j3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(j3||(j3={}));class Bd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+jr),(n||new Bd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):j3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,j3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Bd.startInterval(t),Bd.addUnit(t,n),Bd.endInterval(t)}}class Qv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Qv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+jr),(n||new Qv).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Qv.startList(t),Qv.endList(t)}}let eD=class M_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new M_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+jr),(n||new M_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return M_.startMap(t),M_.addKeysSorted(t,n),M_.endMap(t)}};class Jv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Jv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+jr),(n||new Jv).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Jv.startNull(t),Jv.endNull(t)}}class Zv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Zv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+jr),(n||new Zv).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Zv.startStruct_(t),Zv.endStruct_(t)}}let aA=class gv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new gv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+jr),(n||new gv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):U0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,U0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return gv.startTime(t),gv.addUnit(t,n),gv.addBitWidth(t,r),gv.endTime(t)}},uA=class yv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new yv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+jr),(n||new yv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):U0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,U0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return yv.startTimestamp(t),yv.addUnit(t,n),yv.addTimezone(t,r),yv.endTimestamp(t)}};var B3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(B3||(B3={}));let vv=class bv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new bv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+jr),(n||new bv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):B3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,B3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return bv.startUnion(t),bv.addMode(t,n),bv.addTypeIds(t,r),bv.endUnion(t)}};class e1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new e1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+jr),(n||new e1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return e1.startUtf8(t),e1.endUtf8(t)}}var gi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(gi||(gi={}));let rc=class tD{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new tD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+jr),(n||new tD).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):gi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Np).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new tD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,gi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Sd=class gp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new gp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+jr),(n||new gp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):LE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new rc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,LE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return gp.startSchema(t),gp.addEndianness(t,n),gp.addFields(t,r),gp.addCustomMetadata(t,i),gp.addFeatures(t,s),gp.endSchema(t)}};class cl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new cl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+jr),(n||new cl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ME.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Sd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new X7).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new X7).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ME.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class xr{constructor(t=[],n,r,i=Ba.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Z7(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new xr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new xr(n,this.metadata)}assign(...t){const n=t[0]instanceof xr?t[0]:Array.isArray(t[0])?new xr(t[0]):new xr(t),r=[...this.fields],i=CN(CN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:CN(CN(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=Z7(s,new Map);return new xr([...r,...s],i,new Map([...this.dictionaries,...o]))}}xr.prototype.fields=null;xr.prototype.metadata=null;xr.prototype.dictionaries=null;let $r=class J7{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new J7(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],J7.new(n,r,i,s)}};$r.prototype.type=null;$r.prototype.name=null;$r.prototype.nullable=null;$r.prototype.metadata=null;function CN(e,t){return new Map([...e||new Map,...t||new Map])}function Z7(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(En.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Z7(s.children,t)}return t}var byt=ICe,_yt=$3;class ez{static decode(t){t=new _yt(Rr(t));const n=cl.getRootAsFooter(t),r=xr.decode(n.schema(),new Map,n.version());return new wyt(r,n)}static encode(t){const n=new byt,r=xr.encode(n,t.schema);cl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())z0.encode(n,o);const i=n.endVector();cl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())z0.encode(n,o);const s=n.endVector();return cl.startFooter(n),cl.addSchema(n,r),cl.addVersion(n,Ba.V5),cl.addRecordBatches(n,i),cl.addDictionaries(n,s),cl.finishFooterBuffer(n,cl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ba.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class wyt extends ez{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return z0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return z0.decode(n)}return null}}class z0{static decode(t){return new z0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return X7.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Uf(r),this.bodyLength=Uf(n)}}const IN=Object.freeze({done:!0,value:void 0});class RCe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Eyt extends RCe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Cp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(IN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Jle.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Jle.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Cp(this,void 0,void 0,function*(){return yield this.abort(t),IN})}return(t){return Cp(this,void 0,void 0,function*(){return yield this.close(),IN})}read(t){return Cp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Cp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(IN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class vj extends Eyt{write(t){if((t=Rr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?W7(this.toUint8Array(!0)):this.toUint8Array(!1).then(W7)}toUint8Array(t=!1){return t?bh(this._values)[0]:Cp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=HA(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return bh(o,a)[0]})}}class NCe extends w6{constructor(t){super(t),this._values=new _6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Rr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class xyt extends nl{constructor(t){super(t),this._values=new TCe}setValue(t,n){this._values.set(t,+n)}}class E6 extends Ym{}E6.prototype._setValue=MAe;class PCe extends E6{}PCe.prototype._setValue=OK;class DCe extends E6{}DCe.prototype._setValue=$K;class OCe extends Ym{}OCe.prototype._setValue=jAe;class Syt extends nl{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new B0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=U3({type:this.type.indices,nullValues:n}),this.dictionary=U3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class $Ce extends Ym{}$Ce.prototype._setValue=$Ae;class Tyt extends nl{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new $E(this.type.listSize,new $r(n,t.type,!0)),r}}class x6 extends Ym{setValue(t,n){this._values.set(t,n)}}class Ayt extends x6{setValue(t,n){super.setValue(t,PAe(n))}}class Cyt extends x6{}class Iyt extends x6{}class S6 extends Ym{}S6.prototype._setValue=zAe;class MCe extends S6{}MCe.prototype._setValue=HK;class LCe extends S6{}LCe.prototype._setValue=qK;class Zx extends Ym{}Zx.prototype._setValue=VAe;class FCe extends Zx{}FCe.prototype._setValue=WK;class jCe extends Zx{}jCe.prototype._setValue=GK;class BCe extends Zx{}BCe.prototype._setValue=YK;class UCe extends Zx{}UCe.prototype._setValue=KK;class Km extends Ym{setValue(t,n){this._values.set(t,n)}}class kyt extends Km{}class Ryt extends Km{}class Nyt extends Km{}class Pyt extends Km{}class Dyt extends Km{}class Oyt extends Km{}class $yt extends Km{}class Myt extends Km{}class Lyt extends w6{constructor(t){super(t),this._offsets=new ACe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new OE(new $r(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class Fyt extends w6{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new I2(new $r(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class jyt extends nl{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class Byt extends nl{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new ua([...this.type.children,new $r(n,t.type,!0)]),r}}class eS extends Ym{}eS.prototype._setValue=LAe;class zCe extends eS{}zCe.prototype._setValue=MK;class VCe extends eS{}VCe.prototype._setValue=LK;class HCe extends eS{}HCe.prototype._setValue=FK;class qCe extends eS{}qCe.prototype._setValue=jK;class tS extends Ym{}tS.prototype._setValue=FAe;class WCe extends tS{}WCe.prototype._setValue=BK;class GCe extends tS{}GCe.prototype._setValue=UK;class YCe extends tS{}YCe.prototype._setValue=zK;class KCe extends tS{}KCe.prototype._setValue=VK;class nX extends nl{constructor(t){super(t),this._typeIds=new ok(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new $r(n,t.type)];return this.type=new C2(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Uyt extends nX{}class zyt extends nX{constructor(t){super(t),this._offsets=new ok(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class XCe extends w6{constructor(t){super(t),this._values=new _6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,bK(n))}_flushPending(t,n){}}XCe.prototype._flushPending=NCe.prototype._flushPending;class Vyt extends xn{visitNull(){return jyt}visitBool(){return xyt}visitInt(){return Km}visitInt8(){return kyt}visitInt16(){return Ryt}visitInt32(){return Nyt}visitInt64(){return Pyt}visitUint8(){return Dyt}visitUint16(){return Oyt}visitUint32(){return $yt}visitUint64(){return Myt}visitFloat(){return x6}visitFloat16(){return Ayt}visitFloat32(){return Cyt}visitFloat64(){return Iyt}visitUtf8(){return XCe}visitBinary(){return NCe}visitFixedSizeBinary(){return $Ce}visitDate(){return E6}visitDateDay(){return PCe}visitDateMillisecond(){return DCe}visitTimestamp(){return eS}visitTimestampSecond(){return zCe}visitTimestampMillisecond(){return VCe}visitTimestampMicrosecond(){return HCe}visitTimestampNanosecond(){return qCe}visitTime(){return tS}visitTimeSecond(){return WCe}visitTimeMillisecond(){return GCe}visitTimeMicrosecond(){return YCe}visitTimeNanosecond(){return KCe}visitDecimal(){return OCe}visitList(){return Lyt}visitStruct(){return Byt}visitUnion(){return nX}visitDenseUnion(){return zyt}visitSparseUnion(){return Uyt}visitDictionary(){return Syt}visitInterval(){return S6}visitIntervalDayTime(){return MCe}visitIntervalYearMonth(){return LCe}visitDuration(){return Zx}visitDurationSecond(){return FCe}visitDurationMillisecond(){return jCe}visitDurationMicrosecond(){return BCe}visistDurationNanosecond(){return UCe}visitFixedSizeList(){return Tyt}visitMap(){return Fyt}}const Hyt=new Vyt;class Kt extends xn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function iu(e,t){return t instanceof e.constructor}function ak(e,t){return e===t||iu(e,t)}function Xm(e,t){return e===t||iu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function T6(e,t){return e===t||iu(e,t)&&e.precision===t.precision}function qyt(e,t){return e===t||iu(e,t)&&e.byteWidth===t.byteWidth}function rX(e,t){return e===t||iu(e,t)&&e.unit===t.unit}function uk(e,t){return e===t||iu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function lk(e,t){return e===t||iu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Wyt(e,t){return e===t||iu(e,t)&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}function Gyt(e,t){return e===t||iu(e,t)&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}function iX(e,t){return e===t||iu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&V0.compareManyFields(e.children,t.children)}function Yyt(e,t){return e===t||iu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&V0.visit(e.indices,t.indices)&&V0.visit(e.dictionary,t.dictionary)}function sX(e,t){return e===t||iu(e,t)&&e.unit===t.unit}function ck(e,t){return e===t||iu(e,t)&&e.unit===t.unit}function Kyt(e,t){return e===t||iu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}function Xyt(e,t){return e===t||iu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}Kt.prototype.visitNull=ak;Kt.prototype.visitBool=ak;Kt.prototype.visitInt=Xm;Kt.prototype.visitInt8=Xm;Kt.prototype.visitInt16=Xm;Kt.prototype.visitInt32=Xm;Kt.prototype.visitInt64=Xm;Kt.prototype.visitUint8=Xm;Kt.prototype.visitUint16=Xm;Kt.prototype.visitUint32=Xm;Kt.prototype.visitUint64=Xm;Kt.prototype.visitFloat=T6;Kt.prototype.visitFloat16=T6;Kt.prototype.visitFloat32=T6;Kt.prototype.visitFloat64=T6;Kt.prototype.visitUtf8=ak;Kt.prototype.visitBinary=ak;Kt.prototype.visitFixedSizeBinary=qyt;Kt.prototype.visitDate=rX;Kt.prototype.visitDateDay=rX;Kt.prototype.visitDateMillisecond=rX;Kt.prototype.visitTimestamp=uk;Kt.prototype.visitTimestampSecond=uk;Kt.prototype.visitTimestampMillisecond=uk;Kt.prototype.visitTimestampMicrosecond=uk;Kt.prototype.visitTimestampNanosecond=uk;Kt.prototype.visitTime=lk;Kt.prototype.visitTimeSecond=lk;Kt.prototype.visitTimeMillisecond=lk;Kt.prototype.visitTimeMicrosecond=lk;Kt.prototype.visitTimeNanosecond=lk;Kt.prototype.visitDecimal=ak;Kt.prototype.visitList=Wyt;Kt.prototype.visitStruct=Gyt;Kt.prototype.visitUnion=iX;Kt.prototype.visitDenseUnion=iX;Kt.prototype.visitSparseUnion=iX;Kt.prototype.visitDictionary=Yyt;Kt.prototype.visitInterval=sX;Kt.prototype.visitIntervalDayTime=sX;Kt.prototype.visitIntervalYearMonth=sX;Kt.prototype.visitDuration=ck;Kt.prototype.visitDurationSecond=ck;Kt.prototype.visitDurationMillisecond=ck;Kt.prototype.visitDurationMicrosecond=ck;Kt.prototype.visitDurationNanosecond=ck;Kt.prototype.visitFixedSizeList=Kyt;Kt.prototype.visitMap=Xyt;const V0=new Kt;function tz(e,t){return V0.compareSchemas(e,t)}function U3(e){const t=e.type,n=new(Hyt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(U3(Object.assign(Object.assign({},l),{type:u})))}}return n}function bj(e,t){return Qyt(e,t.map(n=>n.data.concat()))}function Qyt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=Jyt(n,o,c,t,i),o>0&&(r[s++]=ia({type:new ua(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new gl(e,f))]}function Jyt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ia({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var QCe;class Su{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new xr([]),this._offsets=[0],this;let i,s;t[0]instanceof xr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof gl)return[u];if(u instanceof Su)return u.batches;if(u instanceof kr){if(u.type instanceof ua)return[new gl(new xr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new dr([u[h]])),f=new xr(l.map((h,p)=>new $r(String(h),c[p].type))),[,d]=bj(f,c);return d.length===0?[new gl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new xr([]),!(i instanceof xr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof gl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!tz(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??mCe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=pCe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?tX.visit(new dr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Su(n,r.map(i=>new gl(n,i)))}slice(t,n){const r=this.schema;[t,n]=fCe({length:this.numRows},t,n);const i=gCe(this.data,this._offsets,t,n);return new Su(r,i.map(s=>new gl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=ia({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new dr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new dr([ia({type:new xm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=bj(r,a)}return new Su(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Su(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Su(...bj(s,o))}}QCe=Symbol.toStringTag;Su[QCe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Lw(eX),e.get=Lw(Ku.getVisitFn(re.Struct)),e.set=yCe(Rc.getVisitFn(re.Struct)),e.indexOf=vCe(D3.getVisitFn(re.Struct)),e.getByteLength=Lw(Eh.getVisitFn(re.Struct)),"Table"))(Su.prototype);var JCe;let gl=class lA{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof xr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ia({nullCount:0,type:new ua(this.schema.fields),children:this.schema.fields.map(n=>ia({type:n.type,nullCount:0}))})]=t,!(this.data instanceof kr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=oce(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=$r.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new xr(r),a=ia({type:new ua(r),length:s,children:i,nullCount:0});[this.schema,this.data]=oce(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=ZCe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Ku.visit(this.data,t)}set(t,n){return Rc.visit(this.data,t,n)}indexOf(t,n){return D3.visit(this.data,t,n)}getByteLength(t){return Eh.visit(this.data,t)}[Symbol.iterator](){return tX.visit(new dr([this.data]))}toArray(){return[...this]}concat(...t){return new Su(this.schema,[this,...t])}slice(t,n){const[r]=new dr([this.data]).slice(t,n).data;return new lA(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new dr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new dr([ia({type:new xm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new xr(s,new Map(this.schema.metadata)),i=ia({type:new ua(s),children:o})}return new lA(r,i)}select(t){const n=this.schema.select(t),r=new ua(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new lA(n,ia({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=ia({type:new ua(n.fields),length:this.numRows,children:r});return new lA(n,i)}};JCe=Symbol.toStringTag;gl[JCe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(gl.prototype);function oce(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:ia({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),ia({type:new ua(i),length:n,children:s})]}function ZCe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])ZCe(a.children,l==null?void 0:l.children,n);if(En.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class Zyt extends gl{constructor(t){const n=t.fields.map(i=>ia({type:i.type})),r=ia({type:new ua(t.fields),nullCount:0,children:n});super(t,r)}}var z3;(function(e){e[e.BUFFER=0]="BUFFER"})(z3||(z3={}));var V3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(V3||(V3={}));class Ag{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Ag).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+jr),(n||new Ag).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):V3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):z3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,V3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,z3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Ag.startBodyCompression(t),Ag.addCodec(t,n),Ag.addMethod(t,r),Ag.endBodyCompression(t)}}let e2e=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},t2e=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},bp=class nz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new nz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+jr),(n||new nz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new t2e).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new e2e).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Ag).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},L_=class rz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new rz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+jr),(n||new rz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new bp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var H3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(H3||(H3={}));let fg=class gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+jr),(n||new gd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ME.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):H3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Is).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ME.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,H3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return gd.startMessage(t),gd.addVersion(t,n),gd.addHeaderType(t,r),gd.addHeader(t,i),gd.addBodyLength(t,s),gd.addCustomMetadata(t,o),gd.endMessage(t)}};class evt extends xn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Jv.startNull(n),Jv.endNull(n)}visitInt(t,n){return ml.startInt(n),ml.addBitWidth(n,t.bitWidth),ml.addIsSigned(n,t.isSigned),ml.endInt(n)}visitFloat(t,n){return jd.startFloatingPoint(n),jd.addPrecision(n,t.precision),jd.endFloatingPoint(n)}visitBinary(t,n){return Kv.startBinary(n),Kv.endBinary(n)}visitBool(t,n){return Xv.startBool(n),Xv.endBool(n)}visitUtf8(t,n){return e1.startUtf8(n),e1.endUtf8(n)}visitDecimal(t,n){return bu.startDecimal(n),bu.addScale(n,t.scale),bu.addPrecision(n,t.precision),bu.addBitWidth(n,t.bitWidth),bu.endDecimal(n)}visitDate(t,n){return ZP.startDate(n),ZP.addUnit(n,t.unit),ZP.endDate(n)}visitTime(t,n){return aA.startTime(n),aA.addUnit(n,t.unit),aA.addBitWidth(n,t.bitWidth),aA.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return uA.startTimestamp(n),uA.addUnit(n,t.unit),r!==void 0&&uA.addTimezone(n,r),uA.endTimestamp(n)}visitInterval(t,n){return Bd.startInterval(n),Bd.addUnit(n,t.unit),Bd.endInterval(n)}visitDuration(t,n){return Md.startDuration(n),Md.addUnit(n,t.unit),Md.endDuration(n)}visitList(t,n){return Qv.startList(n),Qv.endList(n)}visitStruct(t,n){return Zv.startStruct_(n),Zv.endStruct_(n)}visitUnion(t,n){vv.startTypeIdsVector(n,t.typeIds.length);const r=vv.createTypeIdsVector(n,t.typeIds);return vv.startUnion(n),vv.addMode(n,t.mode),vv.addTypeIds(n,r),vv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Np.startDictionaryEncoding(n),Np.addId(n,BigInt(t.id)),Np.addIsOrdered(n,t.isOrdered),r!==void 0&&Np.addIndexType(n,r),Np.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Ld.startFixedSizeBinary(n),Ld.addByteWidth(n,t.byteWidth),Ld.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Fd.startFixedSizeList(n),Fd.addListSize(n,t.listSize),Fd.endFixedSizeList(n)}visitMap(t,n){return eD.startMap(n),eD.addKeysSorted(n,t.keysSorted),eD.endMap(n)}}const _j=new evt;function tvt(e,t=new Map){return new xr(rvt(e,t),nD(e.metadata),t)}function n2e(e){return new $l(e.count,r2e(e.columns),i2e(e.columns))}function nvt(e){return new xh(n2e(e.data),e.id,e.isDelta)}function rvt(e,t){return(e.fields||[]).filter(Boolean).map(n=>$r.fromJSON(n,t))}function ace(e,t){return(e.children||[]).filter(Boolean).map(n=>$r.fromJSON(n,t))}function r2e(e){return(e||[]).reduce((t,n)=>[...t,new H0(n.count,ivt(n.VALIDITY)),...r2e(n.children)],[])}function i2e(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Gd(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Gd(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Gd(t.length,i.OFFSET.length)),i.DATA&&t.push(new Gd(t.length,i.DATA.length)),t=i2e(i.children,t)}return t}function ivt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function svt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=lce(e,ace(e,t)),i=new $r(e.name,o,e.nullable,nD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?uce(r):new F0,a=new B0(t.get(n),r,n,s.isOrdered),i=new $r(e.name,a,e.nullable,nD(e.metadata))):(r=(r=s.indexType)?uce(r):new F0,t.set(n,o=lce(e,ace(e,t))),a=new B0(o,r,n,s.isOrdered),i=new $r(e.name,a,e.nullable,nD(e.metadata))),i||null}function nD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function uce(e){return new Za(e.isSigned,e.bitWidth)}function lce(e,t){const n=e.type.name;switch(n){case"NONE":return new xm;case"null":return new xm;case"binary":return new T2;case"utf8":return new NE;case"bool":return new A2;case"list":return new OE((t||[])[0]);case"struct":return new ua(t||[]);case"struct_":return new ua(t||[])}switch(n){case"int":{const r=e.type;return new Za(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new j0(No[r.precision])}case"decimal":{const r=e.type;return new I3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new PE(_h[r.unit])}case"time":{const r=e.type;return new Sm(Ht[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new k3(Ht[r.unit],r.timezone)}case"interval":{const r=e.type;return new DE(wh[r.unit])}case"duration":{const r=e.type;return new R3(Ht[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new C2(Yu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new N3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new $E(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new I2((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var ovt=ICe,avt=$3;class Ud{static fromJSON(t,n){const r=new Ud(0,Ba.V5,n);return r._createHeader=uvt(t,n),r}static decode(t){t=new avt(Rr(t));const n=fg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Ud(r,i,s);return o._createHeader=lvt(n,s),o}static encode(t){const n=new ovt;let r=-1;return t.isSchema()?r=xr.encode(n,t.header()):t.isRecordBatch()?r=$l.encode(n,t.header()):t.isDictionaryBatch()&&(r=xh.encode(n,t.header())),fg.startMessage(n),fg.addVersion(n,Ba.V5),fg.addHeader(n,r),fg.addHeaderType(n,t.headerType),fg.addBodyLength(n,BigInt(t.bodyLength)),fg.finishMessageBuffer(n,fg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof xr)return new Ud(0,Ba.V5,Qs.Schema,t);if(t instanceof $l)return new Ud(n,Ba.V5,Qs.RecordBatch,t);if(t instanceof xh)return new Ud(n,Ba.V5,Qs.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Qs.Schema}isRecordBatch(){return this.headerType===Qs.RecordBatch}isDictionaryBatch(){return this.headerType===Qs.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Uf(t)}}class $l{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Uf(t)}}class xh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Uf(n)}}class Gd{constructor(t,n){this.offset=Uf(t),this.length=Uf(n)}}class H0{constructor(t,n){this.length=Uf(t),this.nullCount=Uf(n)}}function uvt(e,t){return()=>{switch(t){case Qs.Schema:return xr.fromJSON(e);case Qs.RecordBatch:return $l.fromJSON(e);case Qs.DictionaryBatch:return xh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Qs[t]}, type: ${t} }`)}}function lvt(e,t){return()=>{switch(t){case Qs.Schema:return xr.decode(e.header(new Sd),new Map,e.version());case Qs.RecordBatch:return $l.decode(e.header(new bp),e.version());case Qs.DictionaryBatch:return xh.decode(e.header(new L_),e.version())}throw new Error(`Unrecognized Message type: { name: ${Qs[t]}, type: ${t} }`)}}$r.encode=_vt;$r.decode=vvt;$r.fromJSON=svt;xr.encode=bvt;xr.decode=cvt;xr.fromJSON=tvt;$l.encode=wvt;$l.decode=fvt;$l.fromJSON=n2e;xh.encode=Evt;xh.decode=dvt;xh.fromJSON=nvt;H0.encode=xvt;H0.decode=pvt;Gd.encode=Svt;Gd.decode=hvt;function cvt(e,t=new Map,n=Ba.V5){const r=yvt(e,t);return new xr(r,rD(e),t,n)}function fvt(e,t=Ba.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new $l(e.length(),mvt(e),gvt(e,t))}function dvt(e,t=Ba.V5){return new xh($l.decode(e.data(),t),e.id(),e.isDelta())}function hvt(e){return new Gd(e.offset(),e.length())}function pvt(e){return new H0(e.length(),e.nullCount())}function mvt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=H0.decode(n));return t}function gvt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ba.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Gd.decode(r));return n}function yvt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=$r.decode(r,t));return n}function cce(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=$r.decode(r,t));return n}function vvt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=dce(e,cce(e,t)),r=new $r(e.name(),i,e.nullable(),rD(e))):t.has(n=Uf(a.id()))?(s=(s=a.indexType())?fce(s):new F0,o=new B0(t.get(n),s,n,a.isOrdered()),r=new $r(e.name(),o,e.nullable(),rD(e))):(s=(s=a.indexType())?fce(s):new F0,t.set(n,i=dce(e,cce(e,t))),o=new B0(i,s,n,a.isOrdered()),r=new $r(e.name(),o,e.nullable(),rD(e))),r||null}function rD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function fce(e){return new Za(e.isSigned(),e.bitWidth())}function dce(e,t){const n=e.typeType();switch(n){case gi.NONE:return new xm;case gi.Null:return new xm;case gi.Binary:return new T2;case gi.Utf8:return new NE;case gi.Bool:return new A2;case gi.List:return new OE((t||[])[0]);case gi.Struct_:return new ua(t||[])}switch(n){case gi.Int:{const r=e.type(new ml);return new Za(r.isSigned(),r.bitWidth())}case gi.FloatingPoint:{const r=e.type(new jd);return new j0(r.precision())}case gi.Decimal:{const r=e.type(new bu);return new I3(r.scale(),r.precision(),r.bitWidth())}case gi.Date:{const r=e.type(new ZP);return new PE(r.unit())}case gi.Time:{const r=e.type(new aA);return new Sm(r.unit(),r.bitWidth())}case gi.Timestamp:{const r=e.type(new uA);return new k3(r.unit(),r.timezone())}case gi.Interval:{const r=e.type(new Bd);return new DE(r.unit())}case gi.Duration:{const r=e.type(new Md);return new R3(r.unit())}case gi.Union:{const r=e.type(new vv);return new C2(r.mode(),r.typeIdsArray()||[],t||[])}case gi.FixedSizeBinary:{const r=e.type(new Ld);return new N3(r.byteWidth())}case gi.FixedSizeList:{const r=e.type(new Fd);return new $E(r.listSize(),(t||[])[0])}case gi.Map:{const r=e.type(new eD);return new I2((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${gi[n]}" (${n})`)}function bvt(e,t){const n=t.fields.map(s=>$r.encode(e,s));Sd.startFieldsVector(e,n.length);const r=Sd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Sd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Is.startKeyValue(e),Is.addKey(e,a),Is.addValue(e,u),Is.endKeyValue(e)})):-1;return Sd.startSchema(e),Sd.addFields(e,r),Sd.addEndianness(e,Tvt?LE.Little:LE.Big),i!==-1&&Sd.addCustomMetadata(e,i),Sd.endSchema(e)}function _vt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;En.isDictionary(s)?(o=s.dictionary.typeId,i=_j.visit(s,e),r=_j.visit(s.dictionary,e)):r=_j.visit(s,e);const a=(s.children||[]).map(c=>$r.encode(e,c)),u=rc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?rc.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Is.startKeyValue(e),Is.addKey(e,d),Is.addValue(e,h),Is.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),rc.startField(e),rc.addType(e,r),rc.addTypeType(e,o),rc.addChildren(e,u),rc.addNullable(e,!!t.nullable),n!==-1&&rc.addName(e,n),i!==-1&&rc.addDictionary(e,i),l!==-1&&rc.addCustomMetadata(e,l),rc.endField(e)}function wvt(e,t){const n=t.nodes||[],r=t.buffers||[];bp.startNodesVector(e,n.length);for(const o of n.slice().reverse())H0.encode(e,o);const i=e.endVector();bp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Gd.encode(e,o);const s=e.endVector();return bp.startRecordBatch(e),bp.addLength(e,BigInt(t.length)),bp.addNodes(e,i),bp.addBuffers(e,s),bp.endRecordBatch(e)}function Evt(e,t){const n=$l.encode(e,t.data);return L_.startDictionaryBatch(e),L_.addId(e,BigInt(t.id)),L_.addIsDelta(e,t.isDelta),L_.addData(e,n),L_.endDictionaryBatch(e)}function xvt(e,t){return t2e.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function Svt(e,t){return e2e.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Tvt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),iz="ARROW1",oX=new Uint8Array(iz.length);for(let e=0;e<iz.length;e+=1)oX[e]=iz.codePointAt(e);oX.length;class as extends xn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof gl?s.data.children:s.data),r=new as;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof dr)return this.visitMany(t.data),this;const{type:n}=t;if(!En.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(En.isUnion(n))this.nodes.push(new H0(r,0));else{const{nullCount:i}=t;En.isNull(n)||Pf.call(this,i<=0?new Uint8Array(0):P3(t.offset,r,t.nullBitmap)),this.nodes.push(new H0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Pf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Gd(this._byteLength,t)),this._byteLength+=t,this}function Avt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Pf.call(this,i),n.mode===Yu.Sparse)return sz.call(this,e);if(n.mode===Yu.Dense){if(e.offset<=0)return Pf.call(this,s),sz.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Pf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function Cvt(e){let t;return e.nullCount>=e.length?Pf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Pf.call(this,P3(e.offset,e.length,t)):Pf.call(this,hCe(e.values))}function Qm(e){return Pf.call(this,e.values.subarray(0,e.length*e.stride))}function s2e(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Pf.call(this,aAe(-i,t+1,r)),Pf.call(this,n.subarray(i,i+o)),this}function aX(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Pf.call(this,aAe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function sz(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}as.prototype.visitBool=Cvt;as.prototype.visitInt=Qm;as.prototype.visitFloat=Qm;as.prototype.visitUtf8=s2e;as.prototype.visitBinary=s2e;as.prototype.visitFixedSizeBinary=Qm;as.prototype.visitDate=Qm;as.prototype.visitTimestamp=Qm;as.prototype.visitTime=Qm;as.prototype.visitDecimal=Qm;as.prototype.visitList=aX;as.prototype.visitStruct=sz;as.prototype.visitUnion=Avt;as.prototype.visitInterval=Qm;as.prototype.visitDuration=Qm;as.prototype.visitFixedSizeList=aX;as.prototype.visitMap=aX;class o2e extends RCe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new vj,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ky(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return g6(t)?t.then(n=>this.writeAll(n)):y6(t)?fX(this,t):cX(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof vj?this._sink=t:(this._sink=new vj,t&&Dgt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Ogt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!tz(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Su&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof gl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!tz(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof gl?t instanceof Zyt||this._writeRecordBatch(t):t instanceof Su?this.writeAll(t.batches):_K(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Ud.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Qs.RecordBatch?this._recordBatchBlocks.push(new z0(a,t.bodyLength,this._position)):t.headerType===Qs.DictionaryBatch&&this._dictionaryBlocks.push(new z0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Rr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Ud.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(oX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=as.assemble(t),o=new $l(t.numRows,r,i),a=Ud.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=as.assemble(new dr([t])),u=new $l(t.length,s,o),l=new xh(u,n,r),c=Ud.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class uX extends o2e{static writeAll(t,n){const r=new uX(n);return g6(t)?t.then(i=>r.writeAll(i)):y6(t)?fX(r,t):cX(r,t)}}class lX extends o2e{static writeAll(t){const n=new lX;return g6(t)?t.then(r=>n.writeAll(r)):y6(t)?fX(n,t):cX(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=ez.encode(new ez(t,Ba.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function cX(e,t){let n=t;t instanceof Su&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function fX(e,t){var n,r,i,s,o,a,u;return Cp(this,void 0,void 0,function*(){try{for(n=!0,r=HA(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function Ivt(e,t="stream"){return(t==="stream"?uX:lX).writeAll(e).toUint8Array(!0)}function dX(e,t=1){return(e*t+63&-64||64)/t}function q0(e,t,n=e.BYTES_PER_ELEMENT){return new e(dX(t,n))}function hX(e){return e instanceof kr?e:new kr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function kvt(e){return new dr([hX(e)])}const pX=new TextEncoder;function Rvt(e,t,n){const r=pX.encode(n);return e.set(r,t),r.length}function Nvt(e,t,n){return pX.encodeInto(n,e.subarray(t)).written}const Pvt=pX.encodeInto?Nvt:Rvt;function hce(e,t){const n=q0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function Dvt(e,t){const n=q0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function Ovt(e,t){const n=q0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function $vt(e,t){const n=q0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Mvt(e){const t=U3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function Lvt(e,t,n){const r=q0(Int32Array,t+1),i=q0(Uint8Array,3*n);let s=0;return{set(o,a){s+=Pvt(i,s,o),r[a+1]=s},data:()=>{const o=dX(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function Fvt(e,t){const n=[],r=q0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:jvt(e.dictionary,n,o)})}}function jvt(e,t,n){const r=Lvt(e,t.length,n);return t.forEach(r.set),kvt(r.data())}function Bvt(e,t){const n=q0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function Uvt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?hce:null;break;case re.Float:r=e.precision>0?hce:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?Fvt:null;break;case re.Bool:r=Dvt;break;case re.Date:r=e.unit?$vt:Ovt;break}return r==null?Mvt(e):n?Bvt(r(e,t),t):r(e,t)}function zvt(e,t){const n=e.length,r=dX(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),hX({type:t,length:n,buffers:[null,i]})}function a2e(e,t,n,r,i=!0){const s=Uvt(r,e,i);return t(n,s.set),hX(s.data())}function mX(e){if(e instanceof En||e==null)return e;switch(e){case re.Binary:return new T2;case re.Bool:return new A2;case re.DateDay:return new Kgt;case re.DateMillisecond:case re.Date:return new Xgt;case re.Dictionary:return new B0(new NE,new F0);case re.Float16:return new kAe;case re.Float32:return new RK;case re.Float64:case re.Float:return new NK;case re.Int8:return new xK;case re.Int16:return new SK;case re.Int32:case re.Int:return new F0;case re.Int64:return new TK;case re.IntervalDayTime:return new t0t;case re.Interval:case re.IntervalYearMonth:return new n0t;case re.Null:return new xm;case re.TimeMicrosecond:return new Zgt;case re.TimeMillisecond:case re.Time:return new Jgt;case re.TimeNanosecond:return new e0t;case re.TimeSecond:return new Qgt;case re.Uint8:return new AK;case re.Uint16:return new CK;case re.Uint32:return new IK;case re.Uint64:return new kK;case re.Utf8:return new NE;default:wn(`Unsupported type code: ${vh(e)}. Use a data type constructor instead?`)}}function Vvt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function u2e(e,t){const n=oz();return e(t,n.add),n}function oz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Em(t))++e.dates,Vvt(t)&&++e.utcdays;else if(Yv(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=oz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=oz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return mX(Hvt(e))}};return e}function Hvt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:wn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:wn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=$r.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new $E(e.minlen,n):new OE(n)}else if(e.structs===t){const n=e.struct_prof;return new ua(Object.keys(n).map(r=>$r.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;wn("Type inference failure")}}}}function qvt(e,t,n,r,i,s=!0){if(i=mX(i),!i){const o=u2e(r,t);s=o.nulls>0,i=o.type()}return a2e(n,r,t,i,s)}function Wvt(e,t,n,r,i,s=!0){i=mX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=Gvt(o);if(u&&a&&pce(u.type,i))return u;const l=o.data;if(ik(l)){const c=Yvt(l);if(a&&c&&pce(c,i))return zvt(l,c);i=i||c,s=!1}if(!i){const c=u2e(r,o);s=c.nulls>0,i=c.type()}return a2e(n,r,o,i,s)}function Gvt(e){return e instanceof dr?e:e.vector instanceof dr?e.vector:null}function Yvt(e){const n={Float32Array:RK,Float64Array:NK,Int8Array:xK,Int16Array:SK,Int32Array:F0,Uint8Array:AK,Uint16Array:CK,Uint32Array:IK,BigInt64Array:TK,BigUint64Array:kK}[e.constructor.name];return n?new n:null}function pce(e,t){return!e||!t?!0:e.compareTo(t)}function Kvt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function Xvt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&Yv(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const Qvt=()=>wn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function Jvt(){try{return Su}catch{Qvt()}}function l2e(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=Zvt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&wn("Column length mismatch"),a[l]=c});const u=Jvt();return new u(a)}function Zvt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=hi(n)?n(e):fr(n)?n:null;if(fr(e))return{dataFrom:qvt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:Kvt(e,r,i)};if(e1t(e))return{dataFrom:Wvt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:Xvt(e,r,i)};wn("Unsupported input data type")}function e1t(e){return e&&hi(e.reify)}function t1t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return Ivt(l2e(e,r),n)}function n1t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function r1t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Em(u))++i,n1t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function A6(e,t){return hi(t)?t(e):t||e.columnNames()}function c2e(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=r1t(i1t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function i1t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function gX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function s1t(e,t={}){const n=A6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Em(l)?p6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return gX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function f2e(e,t={}){if(hi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Em(e))return t.utc?p6(e):DTe(e);{const r=JSON.stringify(e,(s,o)=>ik(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function C6(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function o1t(e,t={}){const n=A6(e,t.columns),{align:r,format:i}=c2e(e,n,t),s=a1t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(f2e(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return gX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function a1t(e){return C6(e.style,t=>hi(t)?t:()=>t)}function u1t(e,t=!0,n=!1){return e===void 0||e?t:n}const l1t=e=>Em(e)?p6(e,!0):e;function c1t(e,t={}){const n=u1t(t.schema),r=t.format||{},i=A6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||l1t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function f1t(e,t={}){const n=A6(e,t.columns),{align:r,format:i}=c2e(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return gX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(f2e(u,i[l]))+"|"}}),a+`
`}function d2e(e,t){for(const[n,r]of m6(t))e.set(n,r);return e}function d1t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Tm(e,t,n=new Map){return t=Ja(t)?e.columnName(t):t,Fo(t)?n.set(t,t):fr(t)?t.forEach(r=>Tm(e,r,n)):hi(t)?Tm(e,t(e),n):va(t)?d2e(n,t):wn(`Invalid column selection: ${vh(t)}`),n}function I6(e,t){return e.toObject=t,e}function h2e(e){return fr(e)?e.map(h2e):e&&e.toObject?e.toObject():e}function FE(){return I6(e=>e.columnNames(),()=>({all:[]}))}function p2e(...e){return e=e.flat(),I6(t=>{const n=Tm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:h2e(e)}))}function h1t(e,t){return I6(n=>{let r=Ja(e)?e:n.columnIndex(e),i=Ja(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function p1t(e){return Fo(e)&&(e=RegExp(d1t(e))),I6(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function m1t(e){return ik(e.data)?e.data.constructor:Array}class Pp extends Pmt{static from(t,n){return new Pp($mt(t,n),n)}static new(t,n){if(t instanceof Pp)return t;const r={},i=[];for(const[s,o]of m6(t))r[s]=o,i.push(s);return new Pp(r,n||i)}constructor(t,n,r,i,s,o){C6(t,Omt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Pp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:cgt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Gl(r).groupby(r.groups());return t.forEach(s=>{s=Pp.new(s),s.numRows()!==n&&wn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):wn(`Unrecognized column: ${t}`)}object(t=0){return mce(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Tm(this,t.columns||FE()),o=iAe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),dgt(this,u,a,n)}return a}*[Symbol.iterator](){const t=mce(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(m1t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=fgt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return l2e(this,t)}toArrowBuffer(t){return t1t(this,t)}toCSV(t){return s1t(this,t)}toHTML(t){return o1t(this,t)}toJSON(t){return c1t(this,t)}toMarkdown(t){return f1t(this,t)}}function mce(e){let t=e._builder;if(!t){const n=iAe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class g1t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Zn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=y1t[e.type];s&&s(e,t,n)}const kN=(e,t,n)=>{Zn(e.argument,t,n,e)},wj=(e,t,n)=>{Zn(e.left,t,n,e),Zn(e.right,t,n,e)},gce=(e,t,n)=>{Zn(e.test,t,n,e),Zn(e.consequent,t,n,e),e.alternate&&Zn(e.alternate,t,n,e)},Ej=(e,t,n)=>{Td(e.params,t,n,e),Zn(e.body,t,n,e)},yce=(e,t,n)=>{Zn(e.callee,t,n,e),Td(e.arguments,t,n,e)},Td=(e,t,n,r)=>{e.forEach(i=>Zn(i,t,n,r))},y1t={TemplateLiteral:(e,t,n)=>{Td(e.expressions,t,n,e),Td(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Zn(e.object,t,n,e),Zn(e.property,t,n,e)},CallExpression:yce,NewExpression:yce,ArrayExpression:(e,t,n)=>{Td(e.elements,t,n,e)},AssignmentExpression:wj,AwaitExpression:kN,BinaryExpression:wj,LogicalExpression:wj,UnaryExpression:kN,UpdateExpression:kN,ConditionalExpression:gce,ObjectExpression:(e,t,n)=>{Td(e.properties,t,n,e)},Property:(e,t,n)=>{Zn(e.key,t,n,e),Zn(e.value,t,n,e)},ArrowFunctionExpression:Ej,FunctionExpression:Ej,FunctionDeclaration:Ej,VariableDeclaration:(e,t,n)=>{Td(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Zn(e.id,t,n,e),Zn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Zn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Td(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Zn(e.expression,t,n,e)},IfStatement:gce,ForStatement:(e,t,n)=>{Zn(e.init,t,n,e),Zn(e.test,t,n,e),Zn(e.update,t,n,e),Zn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Zn(e.test,t,n,e),Zn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Zn(e.body,t,n,e),Zn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Zn(e.discriminant,t,n,e),Td(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Zn(e.test,t,n,e),Td(e.consequent,t,n,e)},ReturnStatement:kN,Program:(e,t,n)=>{Zn(e.body[0],t,n,e)}};function m2e(e){delete e.start,delete e.end,delete e.optional}function vce(e){m2e(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function v1t(e){return Zn(e,null,{Column:vce,Constant:vce,Default:m2e}),e}function Rs(e,t){return t&&t.type===e}function b1t(e){return Rs(mgt,e)||Rs(pgt,e)}function _1t(e){return hi(e)?e:()=>e}const w1t="Escaped functions are not valid as rollup or pivot values.";function E1t(e,t,n){e.aggronly&&wn(w1t);const r="(row,data)=>fn("+rAe(e.table.columnNames())+",$)";return{escape:vK.escape(r,_1t(t.expr),n)}}var x1t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],g2e=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],S1t="-----------------------------------------------------------------------------------------------------------------------------------------------------",y2e="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",xj={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Sj="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",T1t={5:Sj,"5module":Sj+" export import",6:Sj+" const class extends export import super"},A1t=/^in(stanceof)?$/,C1t=new RegExp("["+y2e+"]"),I1t=new RegExp("["+y2e+S1t+"]");function az(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Am(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&C1t.test(String.fromCharCode(e)):t===!1?!1:az(e,g2e)}function jE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&I1t.test(String.fromCharCode(e)):t===!1?!1:az(e,g2e)||az(e,x1t)}var sr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Jl(e,t){return new sr(e,{beforeExpr:!0,binop:t})}var Zl={beforeExpr:!0},du={startsExpr:!0},yX={};function qn(e,t){return t===void 0&&(t={}),t.keyword=e,yX[e]=new sr(e,t)}var K={num:new sr("num",du),regexp:new sr("regexp",du),string:new sr("string",du),name:new sr("name",du),privateId:new sr("privateId",du),eof:new sr("eof"),bracketL:new sr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new sr("]"),braceL:new sr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new sr("}"),parenL:new sr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new sr(")"),comma:new sr(",",Zl),semi:new sr(";",Zl),colon:new sr(":",Zl),dot:new sr("."),question:new sr("?",Zl),questionDot:new sr("?."),arrow:new sr("=>",Zl),template:new sr("template"),invalidTemplate:new sr("invalidTemplate"),ellipsis:new sr("...",Zl),backQuote:new sr("`",du),dollarBraceL:new sr("${",{beforeExpr:!0,startsExpr:!0}),eq:new sr("=",{beforeExpr:!0,isAssign:!0}),assign:new sr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new sr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new sr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Jl("||",1),logicalAND:Jl("&&",2),bitwiseOR:Jl("|",3),bitwiseXOR:Jl("^",4),bitwiseAND:Jl("&",5),equality:Jl("==/!=/===/!==",6),relational:Jl("</>/<=/>=",7),bitShift:Jl("<</>>/>>>",8),plusMin:new sr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Jl("%",10),star:Jl("*",10),slash:Jl("/",10),starstar:new sr("**",{beforeExpr:!0}),coalesce:Jl("??",1),_break:qn("break"),_case:qn("case",Zl),_catch:qn("catch"),_continue:qn("continue"),_debugger:qn("debugger"),_default:qn("default",Zl),_do:qn("do",{isLoop:!0,beforeExpr:!0}),_else:qn("else",Zl),_finally:qn("finally"),_for:qn("for",{isLoop:!0}),_function:qn("function",du),_if:qn("if"),_return:qn("return",Zl),_switch:qn("switch"),_throw:qn("throw",Zl),_try:qn("try"),_var:qn("var"),_const:qn("const"),_while:qn("while",{isLoop:!0}),_with:qn("with"),_new:qn("new",{beforeExpr:!0,startsExpr:!0}),_this:qn("this",du),_super:qn("super",du),_class:qn("class",du),_extends:qn("extends",Zl),_export:qn("export"),_import:qn("import",du),_null:qn("null",du),_true:qn("true",du),_false:qn("false",du),_in:qn("in",{beforeExpr:!0,binop:7}),_instanceof:qn("instanceof",{beforeExpr:!0,binop:7}),_typeof:qn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:qn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:qn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Hc=/\r\n?|\n|\u2028|\u2029/,k1t=new RegExp(Hc.source,"g");function nS(e){return e===10||e===13||e===8232||e===8233}function v2e(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(nS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var b2e=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,fc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,_2e=Object.prototype,R1t=_2e.hasOwnProperty,N1t=_2e.toString,fk=Object.hasOwn||function(e,t){return R1t.call(e,t)},bce=Array.isArray||function(e){return N1t.call(e)==="[object Array]"},_ce=Object.create(null);function qg(e){return _ce[e]||(_ce[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function W0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var P1t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,k2=function(t,n){this.line=t,this.column=n};k2.prototype.offset=function(t){return new k2(this.line,this.column+t)};var k6=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function w2e(e,t){for(var n=1,r=0;;){var i=v2e(e,r,t);if(i<0)return new k2(n,t-r);++n,r=i}}var uz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},wce=!1;function D1t(e){var t={};for(var n in uz)t[n]=e&&fk(e,n)?e[n]:uz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!wce&&typeof console=="object"&&console.warn&&(wce=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),bce(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return bce(t.onComment)&&(t.onComment=O1t(t,t.onComment)),t}function O1t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new k6(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var R2=1,rS=2,vX=4,E2e=8,x2e=16,S2e=32,bX=64,T2e=128,dk=256,_X=R2|rS|dk;function wX(e,t){return rS|(e?vX:0)|(t?E2e:0)}var q3=0,EX=1,Jm=2,A2e=3,C2e=4,I2e=5,js=function(t,n,r){this.options=t=D1t(t),this.sourceFile=t.sourceFile,this.keywords=qg(T1t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=xj[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=qg(i);var s=(i?i+" ":"")+xj.strict;this.reservedWordsStrict=qg(s),this.reservedWordsStrictBind=qg(s+" "+xj.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Hc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(R2),this.regexpState=null,this.privateNameStack=[]},Vh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};js.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Vh.inFunction.get=function(){return(this.currentVarScope().flags&rS)>0};Vh.inGenerator.get=function(){return(this.currentVarScope().flags&E2e)>0&&!this.currentVarScope().inClassFieldInit};Vh.inAsync.get=function(){return(this.currentVarScope().flags&vX)>0&&!this.currentVarScope().inClassFieldInit};Vh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&dk)return!1;if(t.flags&rS)return(t.flags&vX)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Vh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&bX)>0||n||this.options.allowSuperOutsideMethod};Vh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&T2e)>0};Vh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Vh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(rS|dk))>0||n};Vh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&dk)>0};js.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};js.parse=function(t,n){return new this(n,t).parse()};js.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};js.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(js.prototype,Vh);var su=js.prototype,$1t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;su.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){fc.lastIndex=e,e+=fc.exec(this.input)[0].length;var t=$1t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){fc.lastIndex=e+t[0].length;var n=fc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Hc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,fc.lastIndex=e,e+=fc.exec(this.input)[0].length,this.input[e]===";"&&e++}};su.eat=function(e){return this.type===e?(this.next(),!0):!1};su.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};su.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};su.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};su.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||Hc.test(this.input.slice(this.lastTokEnd,this.start))};su.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};su.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};su.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};su.expect=function(e){this.eat(e)||this.unexpected()};su.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var R6=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};su.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};su.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};su.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};su.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Ot=js.prototype;Ot.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var xX={kind:"loop"},M1t={kind:"switch"};Ot.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;fc.lastIndex=this.pos;var t=fc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Am(r,!0)){for(var i=n+1;jE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!A1t.test(s))return!0}return!1};Ot.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;fc.lastIndex=this.pos;var e=fc.exec(this.input),t=this.pos+e[0].length,n;return!Hc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(jE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Ot.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){fc.lastIndex=this.pos;var o=fc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Ot.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Ot.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Ot.parseDoStatement=function(e){return this.next(),this.labels.push(xX),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Ot.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(xX),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new R6,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Ot.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,aC|(n?0:lz),!1,t)};Ot.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Ot.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Ot.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(M1t),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Ot.parseThrowStatement=function(e){return this.next(),Hc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var L1t=[];Ot.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?S2e:0),this.checkLValPattern(e,t?C2e:Jm),this.expect(K.parenR),e};Ot.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Ot.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Ot.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(xX),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Ot.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Ot.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Ot.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Ot.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Ot.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Ot.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Ot.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Ot.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Ot.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?EX:Jm,!1)};var aC=1,lz=2,k2e=4;Ot.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&lz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&aC&&(e.id=t&k2e&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&lz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?EX:Jm:A2e));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(wX(e.async,e.generator)),t&aC||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&aC?"FunctionDeclaration":"FunctionExpression")};Ot.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ot.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&F1t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Ot.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&W3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Ot.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Ot.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Ot.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&W3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Ot.parseClassField=function(e){if(W3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&W3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Ot.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(dk|bX);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Ot.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Jm,!1)):(t===!0&&this.unexpected(),e.id=null)};Ot.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Ot.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Ot.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];fk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function F1t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function W3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Ot.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Ot.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Ot.parseExportDeclaration=function(e){return this.parseStatement(null)};Ot.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,aC|k2e,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Ot.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),fk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Ot.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Ot.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Ot.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ot.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Ot.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Ot.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=L1t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Ot.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Jm),this.finishNode(e,"ImportSpecifier")};Ot.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Jm),this.finishNode(e,"ImportDefaultSpecifier")};Ot.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Jm),this.finishNode(e,"ImportNamespaceSpecifier")};Ot.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Ot.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return P1t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Ot.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Ot.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var qc=js.prototype;qc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};qc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};qc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};qc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};qc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};qc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};qc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};qc.parseBindingListItem=function(e){return e};qc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};qc.checkLValSimple=function(e,t,n){t===void 0&&(t=q3);var r=t!==q3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Jm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(fk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==I2e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};qc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=q3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};qc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=q3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var ef=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ei={b_stat:new ef("{",!1),b_expr:new ef("{",!0),b_tmpl:new ef("${",!1),p_stat:new ef("(",!1),p_expr:new ef("(",!0),q_tmpl:new ef("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new ef("function",!1),f_expr:new ef("function",!0),f_expr_gen:new ef("function",!0,!1,null,!0),f_gen:new ef("function",!1,!1,null,!0)},iS=js.prototype;iS.initialContext=function(){return[Ei.b_stat]};iS.curContext=function(){return this.context[this.context.length-1]};iS.braceIsBlock=function(e){var t=this.curContext();return t===Ei.f_expr||t===Ei.f_stat?!0:e===K.colon&&(t===Ei.b_stat||t===Ei.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?Hc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Ei.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};iS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};iS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};iS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ei.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ei.b_stat:Ei.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Ei.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Ei.p_stat:Ei.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Ei.p_stat)&&!(e===K._return&&Hc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Ei.b_stat)?this.context.push(Ei.f_expr):this.context.push(Ei.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Ei.q_tmpl?this.context.pop():this.context.push(Ei.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Ei.f_expr?this.context[t]=Ei.f_expr_gen:this.context[t]=Ei.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var an=js.prototype;an.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};an.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};an.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new R6,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};an.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};an.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};an.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};an.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};an.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&R2e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function R2e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&R2e(e.expression)}an.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};an.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};an.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};an.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};an.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new R6,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};an.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Ei.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Ei.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};an.parseExprAtomDefault=function(){this.unexpected()};an.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};an.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};an.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};an.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};an.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};an.shouldParseArrow=function(e){return!this.canInsertSemicolon()};an.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new R6,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};an.parseParenItem=function(e){return e};an.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var j1t=[];an.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=j1t,this.finishNode(e,"NewExpression")};an.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};an.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};an.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!Hc.test(this.input.slice(this.lastTokEnd,this.start))};an.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};an.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};an.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};an.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};an.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};an.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};an.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(wX(t,r.generator)|bX|(n?T2e:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};an.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(wX(n,!1)|x2e),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};an.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,I2e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};an.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};an.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,EX,t?null:n)}};an.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};an.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};an.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};an.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};an.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};an.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};an.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var G3=js.prototype;G3.raise=function(e,t){var n=w2e(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};G3.raiseRecoverable=G3.raise;G3.curPosition=function(){if(this.options.locations)return new k2(this.curLine,this.pos-this.lineStart)};var Py=js.prototype,B1t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Py.enterScope=function(e){this.scopeStack.push(new B1t(e))};Py.exitScope=function(){this.scopeStack.pop()};Py.treatFunctionsAsVarInScope=function(e){return e.flags&rS||!this.inModule&&e.flags&R2};Py.declareName=function(e,t,n){var r=!1;if(t===Jm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&R2&&delete this.undefinedExports[e]}else if(t===C2e){var s=this.currentScope();s.lexical.push(e)}else if(t===A2e){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&S2e&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&R2&&delete this.undefinedExports[e],u.flags&_X)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Py.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Py.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Py.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&_X)return t}};Py.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&_X&&!(t.flags&x2e))return t}};var N6=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new k6(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},hk=js.prototype;hk.startNode=function(){return new N6(this,this.start,this.startLoc)};hk.startNodeAt=function(e,t){return new N6(this,e,t)};function N2e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}hk.finishNode=function(e,t){return N2e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};hk.finishNodeAt=function(e,t,n,r){return N2e.call(this,e,t,n,r)};hk.copyNode=function(e){var t=new N6(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var P2e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",D2e=P2e+" Extended_Pictographic",O2e=D2e,$2e=O2e+" EBase EComp EMod EPres ExtPict",M2e=$2e,U1t=M2e,z1t={9:P2e,10:D2e,11:O2e,12:$2e,13:M2e,14:U1t},V1t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",H1t={9:"",10:"",11:"",12:"",13:"",14:V1t},Ece="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",L2e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",F2e=L2e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",j2e=F2e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",B2e=j2e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",U2e=B2e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",q1t=U2e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",W1t={9:L2e,10:F2e,11:j2e,12:B2e,13:U2e,14:q1t},z2e={};function G1t(e){var t=z2e[e]={binary:qg(z1t[e]+" "+Ece),binaryOfStrings:qg(H1t[e]),nonBinary:{General_Category:qg(Ece),Script:qg(W1t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var Tj=0,xce=[9,10,11,12,13,14];Tj<xce.length;Tj+=1){var Y1t=xce[Tj];G1t(Y1t)}var At=js.prototype,Hh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=z2e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Hh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Hh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Hh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Hh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Hh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Hh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Hh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Hh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Hh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};At.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};At.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};At.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};At.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};At.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};At.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};At.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};At.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};At.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};At.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};At.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};At.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};At.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};At.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};At.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};At.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};At.regexp_eatSyntaxCharacter=function(e){var t=e.current();return V2e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function V2e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}At.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!V2e(n);)e.advance();return e.pos!==t};At.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};At.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};At.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};At.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=W0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=W0(e.lastIntValue);return!0}return!1};At.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),K1t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function K1t(e){return Am(e,!0)||e===36||e===95}At.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),X1t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function X1t(e){return jE(e,!0)||e===36||e===95||e===8204||e===8205}At.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};At.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};At.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};At.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};At.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};At.regexp_eatZero=function(e){return e.current()===48&&!P6(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};At.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};At.regexp_eatControlLetter=function(e){var t=e.current();return H2e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function H2e(e){return e>=65&&e<=90||e>=97&&e<=122}At.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&Q1t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function Q1t(e){return e>=0&&e<=1114111}At.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};At.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var q2e=0,Cm=1,mc=2;At.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(J1t(t))return e.lastIntValue=-1,e.advance(),Cm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===mc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return q2e};function J1t(e){return e===100||e===68||e===115||e===83||e===119||e===87}At.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Cm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return q2e};At.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){fk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};At.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Cm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return mc;e.raise("Invalid property name")};At.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";W2e(t=e.current());)e.lastStringValue+=W0(t),e.advance();return e.lastStringValue!==""};function W2e(e){return H2e(e)||e===95}At.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Z1t(t=e.current());)e.lastStringValue+=W0(t),e.advance();return e.lastStringValue!==""};function Z1t(e){return W2e(e)||P6(e)}At.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};At.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===mc&&e.raise("Negated character class may contain strings"),!0}return!1};At.regexp_classContents=function(e){return e.current()===93?Cm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Cm)};At.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};At.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||K2e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};At.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};At.regexp_classSetExpression=function(e){var t=Cm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===mc&&(t=mc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==mc&&(t=Cm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===mc&&(t=mc)}};At.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};At.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Cm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};At.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===mc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};At.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};At.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===mc&&(t=mc);return t};At.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Cm:mc};At.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&ebt(n)||tbt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function ebt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function tbt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}At.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return nbt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function nbt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}At.regexp_eatClassControlLetter=function(e){var t=e.current();return P6(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};At.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};At.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;P6(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function P6(e){return e>=48&&e<=57}At.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;G2e(n=e.current());)e.lastIntValue=16*e.lastIntValue+Y2e(n),e.advance();return e.pos!==t};function G2e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Y2e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}At.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};At.regexp_eatOctalDigit=function(e){var t=e.current();return K2e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function K2e(e){return e>=48&&e<=55}At.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!G2e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+Y2e(i),e.advance()}return!0};var SX=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new k6(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Hn=js.prototype;Hn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new SX(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Hn.getToken=function(){return this.next(),new SX(this)};typeof Symbol<"u"&&(Hn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});Hn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Hn.readToken=function(e){return Am(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Hn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Hn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=v2e(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Hn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!nS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Hn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&b2e.test(String.fromCharCode(e)))++this.pos;else break e}}};Hn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Hn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};Hn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};Hn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};Hn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};Hn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};Hn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Hc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};Hn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};Hn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};Hn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};Hn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Am(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+W0(t)+"'")};Hn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+W0(e)+"'")};Hn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Hn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Hc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Hh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};Hn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function rbt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function X2e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Hn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=X2e(this.input.slice(t,this.pos)),++this.pos):Am(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};Hn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=X2e(this.input.slice(t,this.pos));return++this.pos,Am(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Am(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=rbt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};Hn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Hn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(nS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var Q2e={};Hn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===Q2e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Hn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Q2e;this.raise(e,t)};Hn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(nS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Hn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Hn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return W0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return nS(t)?"":String.fromCharCode(t)}};Hn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Hn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(jE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Am:jE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=W0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Hn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=yX[e]),this.finishToken(t,e)};var ibt="8.11.3";js.acorn={Parser:js,version:ibt,defaultOptions:uz,Position:k2,SourceLocation:k6,getLineInfo:w2e,Node:N6,TokenType:sr,tokTypes:K,keywordTypes:yX,TokContext:ef,tokContexts:Ei,isIdentifierChar:jE,isIdentifierStart:Am,Token:SX,isNewLine:nS,lineBreak:Hc,lineBreakG:k1t,nonASCIIwhitespace:b2e};function sbt(e,t){return js.parse(e,t)}const TX={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},obt={ecmaVersion:11},Sce="$",abt="d",ubt="d1",lbt="d2",xo=e=>(t,n)=>n.error(t,e+" not allowed"),cbt=xo("Aggregate function"),fbt=xo("Window function"),dbt="Invalid argument",AX="Invalid column reference",hbt=AX+" (must be input to an aggregate function)",J2e="Invalid function call",pbt="Invalid member expression",mbt="Invalid operator parameter",gbt="Invalid param reference",ybt="Invalid variable reference",vbt="Variable not accessible in operator call",bbt="Unsupported variable declaration",_bt="Unsupported destructuring pattern",Z2e="Table expressions do not support closures",eIe="Use aq.escape(fn) to use a function as-is (including closures)",wbt="use table.params({ name: value }) to define dynamic parameters",Ebt="use aq.addFunction(name, fn) to add new op functions",xbt=`
Note: ${Z2e}. ${eIe}, or ${wbt}.`,tIe=`
Note: ${Z2e}. ${eIe}, or ${Ebt}.`,Sbt=`The ${tAe} method is not valid in multi-table expressions.`;function Tbt(e,t){const n=Abt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,b1t(r)?(Ibt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=ubt),e.scope.add(e.tuple2=lbt),e.scope.add(e.$param=Sce)):(e.scope.add(e.tuple=abt),e.scope.add(e.$param=Sce)),Zn(r,e,CX),e.root}function Abt(e){try{const t=e.field?Cbt(e):fr(e)?vh(e):e;return sbt(`expr=(${t})`,obt).body[0].expression.right}catch{wn(`Expression parse error: ${e+""}`)}}function Cbt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const CX={FunctionDeclaration:xo("Function definitions"),ForStatement:xo("For loops"),ForOfStatement:xo("For-of loops"),ForInStatement:xo("For-in loops"),WhileStatement:xo("While loops"),DoWhileStatement:xo("Do-while loops"),AwaitExpression:xo("Await expressions"),ArrowFunctionExpression:xo("Function definitions"),AssignmentExpression:xo("Assignments"),FunctionExpression:xo("Function definitions"),NewExpression:xo('Use of "new"'),UpdateExpression:xo("Update expressions"),VariableDeclarator(e,t){dz(e.id,t)},Identifier(e,t,n){iIe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,ybt,xbt)},CallExpression(e,t){const n=nIe(e.callee),r=JTe(n)||ZTe(n);if(r){if((t.join||t.aggregate===!1)&&gK(n)&&cbt(e,t),(t.join||t.window===!1)&&yK(n)&&fbt(e,t),t.$op=1,t.ast)fz(e,n,t),e.arguments.forEach(i=>Zn(i,t,cz));else{const i=t.op(kbt(t,r,n,e.arguments));Object.assign(e,{type:GTe,name:i.id})}return t.$op=0,!1}else QTe(n)?fz(e,n,t):t.error(e,J2e,tIe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Rs(p0,r))return;const{name:s}=r;if(rIe(e)&&Rs(p0,i)&&Bf(TX,i.name)){aIe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Tce(e,o,t,sIe,n);if(s===t.$param)return Tce(e,o,t,Nbt);t.paramsRef.has(s)?N2(e,t.paramsRef.get(s)):t.columnRef.has(s)?oIe(r,s,t,e):Bf(t.params,s)&&N2(r,s)}};function Tce(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Rs(Qx,s))a=s.value;else try{Zn(s,n,CX,e),a=n.param(s)}catch{n.error(e,pbt)}return r(e,a,t,n,i),!1}const cz={...CX,VariableDeclarator:xo("Variable declaration in operator call"),Identifier(e,t,n){iIe(e,t,n)&&t.error(e,vbt)},CallExpression(e,t){const n=nIe(e.callee);QTe(n)?fz(e,n,t):t.error(e,J2e,tIe)}};function Ibt(e,t){e.generator&&xo("Generator functions")(e,t),e.async&&xo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(mT(t,n[0],"tuple1",i(1)),r>1&&mT(t,n[1],"tuple2",i(2)),r>2&&mT(t,n[2],"$param",s)):(mT(t,n[0],"tuple",i(0)),r>1&&mT(t,n[1],"$param",s))),t.root=e.body}function mT(e,t,n,r){Rs(p0,t)?(e.scope.add(t.name),e[n]=t.name):Rs(qTe,t)&&t.properties.forEach(i=>{const s=Rs(p0,i.key)?i.key.name:Rs(Qx,i.key)?i.key.value:e.error(i,dbt);Rs(p0,i.value)||e.error(i.value,_bt),r(i.value.name,s)})}function kbt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Zn(u,e,cz),i.push(e.field(u))):l<a?(Zn(u,e,cz),s.push(e.param(u))):e.error(u,mbt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function nIe(e){return Rs(p0,e)?e.name:Rs(HTe,e)?rIe(e)?Rbt(e.property.name):e.property.name:null}function rIe(e){return Rs(p0,e.object)&&e.object.name==="Math"}function Rbt(e){return e==="max"?"greatest":e==="min"?"least":e}function iIe(e,t,n){const{name:r}=e;if(!(Rs(HTe,n)&&n.property===e)){if(!(Rs(WTe,n)&&n.key===e))if(t.paramsRef.has(r))N2(e,t.paramsRef.get(r));else if(t.columnRef.has(r))oIe(e,r,t,n);else if(Bf(t.params,r))N2(e,r);else if(Bf(TX,r))aIe(e,r);else return!0}}function sIe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,AX),r.aggronly&&!r.$op&&r.error(e,hbt),eAe(e,t,n,o,i)}function oIe(e,t,n,r){const[i,s]=n.columnRef.get(t);sIe(e,i,s,n,r)}function Nbt(e,t,n,r){r.params&&!Bf(r.params,t)&&r.error(e,gbt),N2(e,t)}function N2(e,t){e.type=_gt,e.name=t}function aIe(e,t){e.type=ygt,e.name=t,e.raw=TX[t]}function fz(e,t,n){if(t===tAe){const r=n.table;r||n.error(e,Sbt),nAe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Ja(s)?r.columnName(s):s;return r.column(o)||n.error(i,AX),o}):r.columnNames())}else e.callee={type:bgt,name:t}}function dz(e,t){Rs(p0,e)?t.scope.add(e.name):Rs(hgt,e)?e.elements.forEach(n=>dz(n,t)):Rs(qTe,e)?e.properties.forEach(n=>dz(n.value,t)):t.error(e.id,bbt)}const Pbt={[sk]:1,[GTe]:1};function Xu(e,t={}){const n=t.generate||T3,r=t.compiler||vK,i=Obt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=Dbt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Rs(Qx,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?v1t(g):f(n(g),i));u.push(y),Pbt[g.type]&&y!==g&&va(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);wn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of m6(e))d.value(m+"",g.escape?E1t(d,g,i):Tbt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function Dbt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function Obt(e){return(e.table?Aj(e.table):e.join?{...Aj(e.join[1]),...Aj(e.join[0])}:{})||{}}function Aj(e){return e&&hi(e.params)?e.params():{}}const uIe="Expr",tf="ExprList",lIe="ExprNumber",cA="ExprObject",aw="JoinKeys",Y3="JoinValues",ic="Options",IX="OrderKeys",vg="SelectionList",Rv="TableRef",uw="TableRefList",$bt="Descending",Mbt="Query",Lbt="Selection",Fbt="Verb",jbt="Window";function D6(e,t){return e&&e.expr?new Ace({...e,...t}):new Ace(t,e)}class Ace{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...hi(this.expr)?{func:!0}:{}}}}function Bbt(e){return D6(e,{desc:!0})}function j1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return D6(e,t?{expr:t,...r}:r)}function Ubt(e,t,n){return D6(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function zbt(e){const t=n=>n;return t.toString=()=>e,t}function Cce(e,t){return t=t&&hi(t.query)?t.query():t,t&&hi(t.evaluate)?t.evaluate(null,e):e(t)}function cIe(e){return va(e)&&(fr(e.all)||fr(e.matches)||fr(e.not)||fr(e.range))}function P2(e){return e&&hi(e.toObject)?e.toObject():hi(e)?{expr:String(e),func:!0}:fr(e)?e.map(P2):va(e)?C6(e,t=>P2(t)):e}function kX(e){return fr(e)?e.map(kX):va(e)?fr(e.verbs)?NX.from(e):fr(e.all)?FE():fr(e.range)?h1t(...e.range):fr(e.match)?p1t(RegExp(...e.match)):fr(e.not)?p2e(e.not.map(P2)):Vbt(e):e}function Vbt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=j1(n):e.func===!0&&(t=n=zbt(n)),va(e.window)){const{frame:r,peers:i}=e.window;t=n=Ubt(n,r,i)}e.desc===!0&&(t=Bbt(n))}return e===t?C6(e,r=>kX(r)):t}function Hbt(e){return fr(e)?e.map(qbt):e}function qbt(e){const t=[];return Gu(e).forEach(n=>{Ja(n)?t.push(n):Fo(n)?t.push(j1(n,null)):va(n)&&n.expr||hi(n)?t.push(n):wn(`Invalid key value: ${n+""}`)}),t}function Wbt(e){return fr(e)?e.map(Gbt):e}function Gbt(e,t){return t<2?Gu(e):e}function Ybt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(va(r)&&!hi(r))for(const i in r)t.push(r[i]);else n=Ja(r)?r:Fo(r)?j1(n):hi(r)?n:wn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const Kbt={[uIe]:pIe,[tf]:BE,[lIe]:t_t,[cA]:G0,[aw]:n_t,[Y3]:r_t,[IX]:BE,[vg]:Zbt};function Xbt(e,t,n){return t===Rv?Ice(e):t===uw?e.map(Ice):fIe(P2(e),t,n)}function fIe(e,t,n){return t===ic?e&&Qbt(e,n):Kbt[t](e)}function Qbt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?fIe(i,t[r]):i}return n}function Jbt(e,t){return Xu({expr:e},{...t,ast:!0}).exprs[0]}function RX(e){return{type:sk,name:e}}function dIe(e){return{type:sk,index:e}}function G0(e,t){if(Fo(e))return Jbt(e,t);if(e.expr){let n;if(e.field===!0?n=RX(e.expr):e.func===!0&&(n=G0(e.expr,t)),n)return e.desc&&(n={type:$bt,expr:n}),e.window&&(n={type:jbt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...G0(e[n],t),as:n}))}function hIe(e){const t=Lbt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:BE(e.not)}:e.range?{type:t,operator:"range",arguments:BE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:wn("Invalid input")}function Zbt(e){return Gu(e).map(e_t).flat()}function e_t(e){return cIe(e)?hIe(e):Ja(e)?dIe(e):Fo(e)?RX(e):va(e)?Object.keys(e).map(t=>({type:sk,name:t,as:e[t]})):wn("Invalid input")}function pIe(e){return cIe(e)?hIe(e):Ja(e)?dIe(e):Fo(e)?RX(e):va(e)?G0(e):wn("Invalid input")}function BE(e){return Gu(e).map(pIe).flat()}function t_t(e){return Ja(e)?e:G0(e)}function n_t(e){return fr(e)?e.map(BE):G0(e,{join:!0})}function r_t(e){return fr(e)?e.map((t,n)=>n<2?BE(t):G0(t,{join:!0})):G0(e,{join:!0})}function Ice(e){return e&&hi(e.toAST)?e.toAST():e}class mIe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===aw?Hbt(a):o===Y3?Wbt(a):o===IX?Ybt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=hz[t.verb],r=(n.schema||[]).map(({name:i})=>kX(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Rv?Cce(n,o):s===uw?o.map(a=>Cce(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=P2(this[n])}),t}toAST(){const t={type:Fbt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=Xbt(this[n],r,i)}),t}}function Or(e,t){return Object.assign((...n)=>new mIe(e,t,n),{schema:t})}const hz={count:Or("count",[{name:"options",type:ic}]),derive:Or("derive",[{name:"values",type:cA},{name:"options",type:ic,props:{before:vg,after:vg}}]),filter:Or("filter",[{name:"criteria",type:cA}]),groupby:Or("groupby",[{name:"keys",type:tf}]),orderby:Or("orderby",[{name:"keys",type:IX}]),relocate:Or("relocate",[{name:"columns",type:vg},{name:"options",type:ic,props:{before:vg,after:vg}}]),rename:Or("rename",[{name:"columns",type:vg}]),rollup:Or("rollup",[{name:"values",type:cA}]),sample:Or("sample",[{name:"size",type:lIe},{name:"options",type:ic,props:{weight:uIe}}]),select:Or("select",[{name:"columns",type:vg}]),ungroup:Or("ungroup"),unorder:Or("unorder"),reify:Or("reify"),dedupe:Or("dedupe",[{name:"keys",type:tf,default:[]}]),impute:Or("impute",[{name:"values",type:cA},{name:"options",type:ic,props:{expand:tf}}]),fold:Or("fold",[{name:"values",type:tf},{name:"options",type:ic}]),pivot:Or("pivot",[{name:"keys",type:tf},{name:"values",type:tf},{name:"options",type:ic}]),spread:Or("spread",[{name:"values",type:tf},{name:"options",type:ic}]),unroll:Or("unroll",[{name:"values",type:tf},{name:"options",type:ic,props:{drop:tf}}]),lookup:Or("lookup",[{name:"table",type:Rv},{name:"on",type:aw},{name:"values",type:tf}]),join:Or("join",[{name:"table",type:Rv},{name:"on",type:aw},{name:"values",type:Y3},{name:"options",type:ic}]),cross:Or("cross",[{name:"table",type:Rv},{name:"values",type:Y3},{name:"options",type:ic}]),semijoin:Or("semijoin",[{name:"table",type:Rv},{name:"on",type:aw}]),antijoin:Or("antijoin",[{name:"table",type:Rv},{name:"on",type:aw}]),concat:Or("concat",[{name:"tables",type:uw}]),union:Or("union",[{name:"tables",type:uw}]),intersect:Or("intersect",[{name:"tables",type:uw}]),except:Or("except",[{name:"tables",type:uw}])};let NX=class gIe extends NTe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new gIe(t.map(mIe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return kce(this,"toObject")}toJSON(){return this.toObject()}toAST(){return kce(this,"toAST",{type:Mbt})}};function kce(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function i_t(e,t){return new NX(e._verbs.concat(t),e._params,e._table)}for(const e in hz){const t=hz[e];NX.prototype["__"+e]=function(n,...r){return i_t(n,t(...r))}}function sS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function s_t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function PX(e,t){const n=Gl();return t.forEach((r,i)=>{const s=Fo(r)?r:i;if(s){const o=e.column(i)||wn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function yIe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||wn("relocate requires a before or after option."),i&&s&&wn("relocate accepts only one of the before or after options."),t=Tm(e,t);const o=[...Tm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),PX(e,u)}function pk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function DX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function o_t(e,t=0,n=e.length){let r=n?e[t++]:or;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function a_t(e,t=0,n=e.length){let r=n?e[t++]:or;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function RN(e){return E2(e)?e:+e}function u_t(e,t){const n=e.length;if(!n)return or;if((t=+t)<=0||n<2)return RN(e[0]);if(t>=1)return RN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=RN(e[i]);return E2(s)?s:s+(RN(e[i+1])-s)*(r-i)}class l_t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:o_t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:a_t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(DX)),u_t(this._sorted,t)}}const K3=(e,t,n)=>sS(t,"{"+pk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function c_t(e,t){const{ops:n,output:r}=f_t(e,t),i=e[0].fields,s=i.length,o=s===0?OX:s===1?d_t:s===2?h_t:wn("Unsupported field count: "+s);return new o(i,n,r,t)}function f_t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=JTe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class OX extends g1t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new l_t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class d_t extends OX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=K3(n,s,"add"),this._rem=K3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Sf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Sf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class h_t extends OX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=K3(n,s,"add"),this._rem=K3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Sf(i)&&Sf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Sf(i)&&Sf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Pb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=oS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function oS(e,t,n){if(!t.length)return n;const r=vIe(t),i=e.groups(),s=i?i.size:1;return n=n||h6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=_Ie(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=bIe(e,o);o.write(a,n,0)}),n}function vIe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(c_t(r[i],t));return n}function bIe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function _Ie(e,t,n){const{keys:r,size:i}=n,s=h6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function wIe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function EIe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Rce=EIe(DX);function p_t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?sS(["w","r","k"],"{"+pk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Rce.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Rce.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const S=i[E],T=a[E];for(let A=b;A<p.i0;++A)S.rem(T,s[A],e);for(let A=w;A<p.i1;++A)S.add(T,s[A],e);S.write(T,u,l)}return h(p,u,l),u}};return p}const m_t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),g_t=e=>!!e.peers;function y_t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=ZTe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function v_t(e,t,n,r={},i){const s=e.data(),o=b_t(i,s),a=o.length,u=sS(["r","d","op"],"{"+pk(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=__t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function b_t(e,t){const n={};return e.forEach(r=>{const i=m_t(r),s=g_t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});gK(r.name)?a.push(r):u.push(y_t(r))}),Object.values(n).map(r=>p_t(t,r.frame,r.peers,r.winOps,vIe(r.aggOps,r.frame[0]!=null?-1:1)))}function __t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function w_t(e){return yK(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function $X(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Gl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=E_t(r),c=e.isGrouped()?e.groups().size:1,f=oS(e,u,h6(r.length,()=>Array(c)));return l.length?v_t(e,a,n,f,l):x_t(e,a,n,f),e.create(o)}function E_t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(w_t(s)?n:t).push(s)}return[t,n]}function x_t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function S_t(e,t,n={}){const r=$X(e,Xu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:yIe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function T_t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const NN=2147483648,A_t=4294967295;class xIe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&NN>>>t}set(t){this._bits[t>>5]|=NN>>>t}clear(t){this._bits[t>>5]&=~(NN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&A_t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=NN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function C_t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new xIe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function I_t(e,t){const n=Xu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=$X(e,n,{drop:!0}).column("p");r=s=>i[s]}return C_t(e,r)}function SIe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Pb(e,r,n),l=Gl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let S=0;S<g;++S)d[S].length=m+E,d[S].fill(f[S].get(w),m,m+E)},b=p?(w,E)=>{for(let S=0;S<E;++S)p[w+S]=S}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((S,T)=>{const A=Gu(w(S,T)),C=Math.min(A.length,s);v(S,C);for(let I=0;I<C;++I)E[m+I]=A[I];b(m,C),m+=C})}else e.scan((w,E)=>{let S=0;const T=u.map(A=>{const C=Gu(A(w,E));return S=Math.min(Math.max(S,C.length),s),C});v(w,S);for(let A=0;A<y;++A){const C=h[A],I=T[A];for(let R=0;R<S;++R)C[m+R]=I[R]}b(m,S),m+=S});return e.create(l.new())}function k_t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Pb(e,r,n);return SIe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function zf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Ja(o)?t.columnName(o):o,Fo(o)?i.set(o,j1(o)):hi(o)?Tm(t,o).forEach(s):va(o)?d2e(i,o):wn(`Invalid ${e} value: ${o+""}`)};return Gu(n).forEach(s),r.preparse&&r.preparse(i),Xu(i,{table:t,...r})}function R_t(e,t,n){return k_t(e,zf("fold",e,t),n)}function Nce(e,t,n,r){const i=n&&n.length;return N_t(i?P_t(e,n,r):e,t,i)}function N_t(e,{names:t,exprs:n,ops:r},i){const s=Pb(e,r,n),o=i?null:Gl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Sf(p)?p:d(h)})}),i?e:e.create(o)}function P_t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=A3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Gl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=A3(o.map((p,m)=>g=>g[m])),h=sS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Pce(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Pce(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Pce(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function MX(e,{names:t,exprs:n,ops:r}){const i=Gl(),s=e.groups();return s&&wIe(i,s),D_t(t,n,s,oS(e,r),i),e.create(i.new())}function D_t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function O_t(e,t,n={}){if(t=Xu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:wn(`Invalid impute column ${vh(r)}`)),n.expand){const r={preparse:$_t,aggronly:!0},i=zf("impute",e,n.expand,r),s=MX(e.ungroup(),i);return Nce(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Nce(e,t)}function $_t(e){e.forEach((t,n)=>t.field?e.set(n,BTe(t+"")):0)}function M_t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function TIe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function L_t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function F_t(e,t){const n=["i","a","j","b"];return sS(n,"{"+pk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function j_t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Gl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=F_t(g,y);if((fr(n)?U_t:B_t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function B_t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function U_t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(S,T,A,C)=>e(A,C,S,T));const w=L_t(v,m,g),E=p.length;for(let S=0;S<E;++S){const T=p[S],A=w.get(d(T,f));if(A){const C=A.length;for(let I=0;I<C;++I){const R=A[I];b(T,f,v[R],m),y[R]=1}h[S]=1}}}function X3(e,t,n){const r=new Map;Gu(n).forEach((s,o)=>{s=Ja(s)?t.columnName(s):s,Fo(s)?r.set(o,j1(s)):hi(s)||va(s)&&s.expr?r.set(o,s):wn(`Invalid ${e} key value: ${s+""}`)});const i=Xu(r,{table:t,aggregate:!1,window:!1});return A3(i.exprs,!0)}function z_t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function LX(e,t,n){if(n)Fo(n)?n=[n,n]:fr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=z_t(e.columnNames(),t.columnNames());r.length||wn("Natural join requires shared column names."),n=[r,r]}return n}function AIe(e,t,n,r){return n.length!==r.length&&wn("Mismatched number of join keys"),[X3("join",e,n),X3("join",t,r)]}const V_t={aggregate:!1,window:!1},H_t={...V_t,index:1};function Dce(e,t,n,r,i={}){n=LX(e,t,n);const s={join:[e,t]};let o;if(fr(n)){const[a,u]=n.map(Gu);o=AIe(e,t,a,u),r||(r=q_t(e,a,u,i))}else o=Xu({on:n},s).exprs[0],r||(r=[FE(),FE()]);return j_t(e,t,o,W_t(e,t,r,s,i&&i.suffix),i)}function q_t(e,t,n,r){const i=[];t.forEach((o,a)=>Fo(o)&&o===n[a]?i.push(o):0);const s=p2e(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${vh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,FE()]:[FE(),s]}function W_t(e,t,n,r,i=[]){if(fr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=zf("join",e,n[0],r)),u--&&(o=zf("join",t,n[1],H_t)),u--&&(a=Xu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Oce(s.names,l,i[0]||"_1"),i[1]!==""&&Oce(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Xu(n,r)}function Oce(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function G_t(e,t,n,r={}){const i=new xIe(e.totalRows());return(fr(n)?Y_t:K_t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function Y_t(e,t,n,[r,i]){const s=TIe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function K_t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function $ce(e,t,n,r){n=LX(e,t,n);const i=fr(n)?AIe(e,t,...n.map(Gu)):Xu({on:n},{join:[e,t]}).exprs[0];return G_t(e,t,i,r)}function X_t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Gl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(or)));const l=TIe(t,r),c=sS(["lr","rr","data"],"{"+pk(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Pb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function Q_t(e,t,n,r){return n=LX(e,t,n),X_t(e,t,[X3("lookup",e,n[0]),X3("lookup",t,n[1])],zf("lookup",t,r))}const pz=(e,t)=>e??t;function J_t(e,t,n,r={}){const{keys:i,keyColumn:s}=Z_t(e,t,r),o=pz(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>oS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(ewt(n,a,e.groups(),u))}function Z_t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=pz(n.sort,!0),s=pz(n.keySeparator,"_"),o=Pb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=oS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function ewt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Gl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&wIe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function twt(e,t,n,r){return J_t(e,zf("fold",e,t),zf("fold",e,n,{preparse:nwt,aggronly:!0}),r)}function nwt(e){e.forEach((t,n)=>t.field?e.set(n,LTe(t+"")):0)}function rwt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),PX(e,Tm(e,t,n))}function Mce(e,t){return MX(e,Xu(t,{table:e,aggronly:!0,window:!1}))}function iwt(e,t,n,r){return(t?r?owt:swt:r?uwt:awt)(e.length,e,n,r)}function swt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*Xx()|0];return t}function owt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=EIe(DX).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*Xx())];return t}function awt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*Xx();s<e&&(t[s|0]=n[i])}return t}function uwt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(Xx())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function lwt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=Xx()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function cwt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):iwt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&lwt(u),e.reify(u)}function fwt(e,t,n={}){return cwt(e,dwt(e,t),hwt(e,n.weight),n)}const CIe=e=>t=>e.get(t)||0;function dwt(e,t){return Ja(t)?()=>t:CIe(MX(e,Xu({size:t},{table:e,window:!1})).column("size"))}function hwt(e,t){return t==null?null:(t=Ja(t)?e.columnName(t):t,CIe(Fo(t)?e.column(t):$X(e,Xu({w:t},{table:e}),{drop:!0}).column("w")))}function pwt(e,t){return PX(e,Tm(e,t))}function mwt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Pb(e,r,n),l=Gl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=gwt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function gwt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Gu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(or));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function ywt(e,t,n){return mwt(e,zf("spread",e,t),n)}function vwt(e,t){return e.concat(t).dedupe()}function bwt(e,t,n){return SIe(e,zf("unroll",e,t),n&&n.drop?{...n,drop:zf("unroll",e,n.drop).names}:n)}function _wt(e,t){return e.create({groups:wwt(e,t)})}function wwt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Pb(e,r,n);const o=A3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function Ewt(e,t){return _wt(e,zf("groupby",e,t))}function xwt(e,t){return e.create({order:t})}const Swt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function Twt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Xu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([T3(p,{index:"a",op:o}),T3(p,{index:"b",op:a})])},window:!1}),l=oS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=Swt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function Awt(e,t){return xwt(e,Cwt(e,t))}function Cwt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(va(o)&&!hi(o))for(const a in o)i(o[a]);else i(Ja(o)?j1(s,e.columnName(o)):Fo(o)?j1(s):hi(o)?s:wn(`Invalid orderby field: ${s+""}`))}),Twt(e,r)}function Iwt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Gl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>or};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function kwt(e,t){const n=Gl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?_Ie(e,t,r):[bIe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function Rwt(e){return e.isGrouped()?e.create({groups:null}):e}function Nwt(e){return e.isOrdered()?e.create({order:null}):e}const Pwt={__antijoin:(e,t,n)=>$ce(e,t,n,{anti:!0}),__count:(e,t={})=>Mce(e,{[t.as||"count"]:FTe()}),__cross:(e,t,n,r)=>Dce(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:Iwt,__dedupe:s_t,__derive:S_t,__except:T_t,__filter:I_t,__fold:R_t,__impute:O_t,__intersect:M_t,__join:Dce,__lookup:Q_t,__pivot:twt,__relocate:yIe,__rename:rwt,__rollup:Mce,__sample:fwt,__select:pwt,__semijoin:$ce,__spread:ywt,__union:vwt,__unroll:bwt,__groupby:Ewt,__orderby:Awt,__ungroup:Rwt,__unorder:Nwt,__reduce:kwt};Object.assign(Pp.prototype,Pwt);function Dwt(e,t){return Pp.from(e,t)}function Cj(e){return D6(e,{escape:!0,toString(){wn("Escaped values can not be serialized.")}})}Pp.prototype;function bf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Y0(e){return!!e&&!!e[vi]}function Im(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===zwt}(e)||Array.isArray(e)||!!e[Vce]||!!(!((t=e.constructor)===null||t===void 0)&&t[Vce])||FX(e)||jX(e))}function B1(e,t,n){n===void 0&&(n=!1),aS(e)===0?(n?Object.keys:jw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function aS(e){var t=e[vi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:FX(e)?2:jX(e)?3:0}function Fw(e,t){return aS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Owt(e,t){return aS(e)===2?e.get(t):e[t]}function IIe(e,t,n){var r=aS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function kIe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function FX(e){return Bwt&&e instanceof Map}function jX(e){return Uwt&&e instanceof Set}function _v(e){return e.o||e.t}function BX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=NIe(e);delete t[vi];for(var n=jw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function UX(e,t){return t===void 0&&(t=!1),zX(e)||Y0(e)||!Im(e)||(aS(e)>1&&(e.set=e.add=e.clear=e.delete=$wt),Object.freeze(e),t&&B1(e,function(n,r){return UX(r,!0)},!0)),e}function $wt(){bf(2)}function zX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function rh(e){var t=vz[e];return t||bf(18,e),t}function Mwt(e,t){vz[e]||(vz[e]=t)}function mz(){return D2}function Ij(e,t){t&&(rh("Patches"),e.u=[],e.s=[],e.v=t)}function Q3(e){gz(e),e.p.forEach(Lwt),e.p=null}function gz(e){e===D2&&(D2=e.l)}function Lce(e){return D2={p:[],l:D2,h:e,m:!0,_:0}}function Lwt(e){var t=e[vi];t.i===0||t.i===1?t.j():t.g=!0}function kj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||rh("ES5").S(t,e,r),r?(n[vi].P&&(Q3(t),bf(4)),Im(e)&&(e=J3(t,e),t.l||Z3(t,e)),t.u&&rh("Patches").M(n[vi].t,e,t.u,t.s)):e=J3(t,n,[]),Q3(t),t.u&&t.v(t.u,t.s),e!==RIe?e:void 0}function J3(e,t,n){if(zX(t))return t;var r=t[vi];if(!r)return B1(t,function(a,u){return Fce(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return Z3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=BX(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),B1(s,function(a,u){return Fce(e,r,i,a,u,n,o)}),Z3(e,i,!1),n&&e.u&&rh("Patches").N(r,n,e.u,e.s)}return r.o}function Fce(e,t,n,r,i,s,o){if(Y0(i)){var a=J3(e,i,s&&t&&t.i!==3&&!Fw(t.R,r)?s.concat(r):void 0);if(IIe(n,r,a),!Y0(a))return;e.m=!1}else o&&n.add(i);if(Im(i)&&!zX(i)){if(!e.h.D&&e._<1)return;J3(e,i),t&&t.A.l||Z3(e,i)}}function Z3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&UX(t,n)}function Rj(e,t){var n=e[vi];return(n?_v(n):e)[t]}function jce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function $g(e){e.P||(e.P=!0,e.l&&$g(e.l))}function Nj(e){e.o||(e.o=BX(e.t))}function yz(e,t,n){var r=FX(t)?rh("MapSet").F(t,n):jX(t)?rh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:mz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=O2;o&&(u=[a],l=fA);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):rh("ES5").J(t,n);return(n?n.A:mz()).p.push(r),r}function Fwt(e){return Y0(e)||bf(22,e),function t(n){if(!Im(n))return n;var r,i=n[vi],s=aS(n);if(i){if(!i.P&&(i.i<4||!rh("ES5").K(i)))return i.t;i.I=!0,r=Bce(n,s),i.I=!1}else r=Bce(n,s);return B1(r,function(o,a){i&&Owt(i.t,o)===a||IIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Bce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return BX(e)}function jwt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[vi];return O2.get(u,s)},set:function(u){var l=this[vi];O2.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][vi];if(!a.P)switch(a.i){case 5:r(a)&&$g(a);break;case 4:n(a)&&$g(a)}}}function n(s){for(var o=s.t,a=s.k,u=jw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==vi){var f=o[c];if(f===void 0&&!Fw(o,c))return!0;var d=a[c],h=d&&d[vi];if(h?h.t!==f:!kIe(d,f))return!0}}var p=!!o[vi];return u.length!==jw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Mwt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=NIe(f);delete p[vi];for(var m=jw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:mz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,vi,{value:l,writable:!0}),u},S:function(s,o,a){a?Y0(o)&&o[vi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[vi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)B1(d,function(b){b!==vi&&(f[b]!==void 0||Fw(f,b)?h[b]||u(d[b]):(h[b]=!0,$g(c)))}),B1(f,function(b){d[b]!==void 0||Fw(d,b)||(h[b]=!1,$g(c))});else if(p===5){if(r(c)&&($g(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Uce,D2,VX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Bwt=typeof Map<"u",Uwt=typeof Set<"u",zce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",RIe=VX?Symbol.for("immer-nothing"):((Uce={})["immer-nothing"]=!0,Uce),Vce=VX?Symbol.for("immer-draftable"):"__$immer_draftable",vi=VX?Symbol.for("immer-state"):"__$immer_state",zwt=""+Object.prototype.constructor,jw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,NIe=Object.getOwnPropertyDescriptors||function(e){var t={};return jw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},vz={},O2={get:function(e,t){if(t===vi)return e;var n=_v(e);if(!Fw(n,t))return function(i,s,o){var a,u=jce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Im(r)?r:r===Rj(e.t,t)?(Nj(e),e.o[t]=yz(e.A.h,r,e)):r},has:function(e,t){return t in _v(e)},ownKeys:function(e){return Reflect.ownKeys(_v(e))},set:function(e,t,n){var r=jce(_v(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Rj(_v(e),t),s=i==null?void 0:i[vi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(kIe(n,i)&&(n!==void 0||Fw(e.t,t)))return!0;Nj(e),$g(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return Rj(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Nj(e),$g(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=_v(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){bf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){bf(12)}},fA={};B1(O2,function(e,t){fA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),fA.deleteProperty=function(e,t){return fA.set.call(this,e,t,void 0)},fA.set=function(e,t,n){return O2.set.call(this,e[0],t,n,e[0])};var Vwt=function(){function e(n){var r=this;this.O=zce,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&bf(6),o!==void 0&&typeof o!="function"&&bf(7),Im(i)){var c=Lce(r),f=yz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?Q3(c):gz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Ij(c,o),kj(m,c)},function(m){throw Q3(c),m}):(Ij(c,o),kj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===RIe&&(l=void 0),r.D&&UX(l,!0),o){var h=[],p=[];rh("Patches").M(i,l,h,p),o(h,p)}return l}bf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Im(n)||bf(8),Y0(n)&&(n=Fwt(n));var r=Lce(this),i=yz(this,n,void 0);return i[vi].C=!0,gz(r),i},t.finishDraft=function(n,r){var i=n&&n[vi],s=i.A;return Ij(s,r),kj(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!zce&&bf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=rh("Patches").$;return Y0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Ml=new Vwt,Hwt=Ml.produce;Ml.produceWithPatches.bind(Ml);Ml.setAutoFreeze.bind(Ml);Ml.setUseProxies.bind(Ml);Ml.applyPatches.bind(Ml);Ml.createDraft.bind(Ml);Ml.finishDraft.bind(Ml);const PIe=Hwt;function $2(e){"@babel/helpers - typeof";return $2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$2(e)}function qwt(e,t){if($2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if($2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Wwt(e){var t=qwt(e,"string");return $2(t)=="symbol"?t:t+""}function Gwt(e,t,n){return(t=Wwt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function qce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Hce(Object(n),!0).forEach(function(r){Gwt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hce(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function na(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Wce=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Pj=function(){return Math.random().toString(36).substring(7).split("").join(".")},e$={INIT:"@@redux/INIT"+Pj(),REPLACE:"@@redux/REPLACE"+Pj(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Pj()}};function Ywt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function DIe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(na(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(na(1));return n(DIe)(e,t)}if(typeof e!="function")throw new Error(na(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(na(3));return s}function f(m){if(typeof m!="function")throw new Error(na(4));if(u)throw new Error(na(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(na(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!Ywt(m))throw new Error(na(7));if(typeof m.type>"u")throw new Error(na(8));if(u)throw new Error(na(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(na(10));i=m,d({type:e$.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(na(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Wce]=function(){return this},m}return d({type:e$.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Wce]=p,r}function Kwt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:e$.INIT});if(typeof r>"u")throw new Error(na(12));if(typeof n(void 0,{type:e$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(na(13))})}function Xwt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Kwt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(na(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function t$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Qwt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(na(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=t$.apply(void 0,a)(i.dispatch),qce(qce({},i),{},{dispatch:s})}}}function OIe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var bz=OIe();bz.withExtraArgument=OIe;var $Ie=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mk=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},U1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Jwt=Object.defineProperty,Zwt=Object.defineProperties,eEt=Object.getOwnPropertyDescriptors,Gce=Object.getOwnPropertySymbols,tEt=Object.prototype.hasOwnProperty,nEt=Object.prototype.propertyIsEnumerable,Yce=function(e,t,n){return t in e?Jwt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},m0=function(e,t){for(var n in t||(t={}))tEt.call(t,n)&&Yce(e,n,t[n]);if(Gce)for(var r=0,i=Gce(t);r<i.length;r++){var n=i[r];nEt.call(t,n)&&Yce(e,n,t[n])}return e},Dj=function(e,t){return Zwt(e,eEt(t))},gk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},rEt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?t$:t$.apply(null,arguments)};function MIe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var iEt=function(e){return e&&typeof e.match=="function"};function ih(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return m0(m0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function sEt(e){return MIe(e)&&"type"in e}var oEt=function(e){$Ie(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,U1([void 0],n[0].concat(this)))):new(t.bind.apply(t,U1([void 0],n.concat(this))))},t}(Array),aEt=function(e){$Ie(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,U1([void 0],n[0].concat(this)))):new(t.bind.apply(t,U1([void 0],n.concat(this))))},t}(Array);function _z(e){return Im(e)?PIe(e,function(){}):e}function uEt(e){return typeof e=="boolean"}function lEt(){return function(t){return cEt(t)}}function cEt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new oEt;return n&&(uEt(n)?r.push(bz):r.push(bz.withExtraArgument(n.extraArgument))),r}var fEt=!0;function dEt(e){var t=lEt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(MIe(i))h=Xwt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=Qwt.apply(void 0,p),g=t$;u&&(g=rEt(m0({trace:!fEt},typeof u=="object"&&u)));var y=new aEt(m),v=y;Array.isArray(d)?v=U1([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return DIe(h,c,b)}function LIe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function hEt(e){return typeof e=="function"}function pEt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?LIe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(hEt(e))u=function(){return _z(e())};else{var l=_z(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=U1([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Y0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Im(p))return PIe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function mEt(e,t){return e+"/"+t}function gEt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:_z(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=mEt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?ih(d,p):ih(d)});function u(){var c=typeof e.extraReducers=="function"?LIe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=m0(m0({},d),o);return pEt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var S=E[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var yEt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",FIe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=yEt[Math.random()*64|0];return t},vEt=["name","message","stack","code"],Oj=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Kce=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),bEt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=vEt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=ih(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:Dj(m0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=ih(t+"/pending",function(l,c,f){return{payload:void 0,meta:Dj(m0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=ih(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||bEt)(l||"Rejected"),meta:Dj(m0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):FIe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return gk(this,null,function(){var v,b,w,E,S,T,A;return mk(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),wEt(E)?[4,E]:[3,2];case 1:E=C.sent(),C.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(I,R){return p.signal.addEventListener("abort",function(){return R({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(I,R){return new Oj(I,R)},fulfillWithValue:function(I,R){return new Kce(I,R)}})).then(function(I){if(I instanceof Oj)throw I;return I instanceof Kce?i(I.payload,h,l,I.meta):i(I,h,l)})])];case 3:return w=C.sent(),[3,5];case 4:return T=C.sent(),w=T instanceof Oj?o(null,h,l,T.payload,T.meta):o(T,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,A||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(_Et)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function _Et(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function wEt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var EEt=function(e,t){return iEt(e)?e.match(t):e(t)};function Xce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return EEt(r,n)})}}var HX=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},wz=function(){},jIe=function(e,t){return t===void 0&&(t=wz),e.catch(t),e},BIe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Bw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},xEt="task",UIe="listener",zIe="completed",qX="cancelled",SEt="task-"+qX,TEt="task-"+zIe,VIe=UIe+"-"+qX,AEt=UIe+"-"+zIe,O6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=xEt+" "+qX+" (reason: "+t+")"}return e}(),Uw=function(e){if(e.aborted)throw new O6(e.reason)};function HIe(e,t){var n=wz;return new Promise(function(r,i){var s=function(){return i(new O6(e.reason))};if(e.aborted){s();return}n=BIe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=wz})}var CEt=function(e,t){return gk(void 0,null,function(){var n,r;return mk(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof O6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},n$=function(e){return function(t){return jIe(HIe(e,t).then(function(n){return Uw(e),n}))}},qIe=function(e){var t=n$(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},IEt=Object.assign,Qce={},yk="listenerMiddleware",kEt=function(e,t){var n=function(r){return BIe(e,function(){return Bw(r,e.reason)})};return function(r,i){HX(r,"taskExecutor");var s=new AbortController;n(s);var o=CEt(function(){return gk(void 0,null,function(){var a;return mk(this,function(u){switch(u.label){case 0:return Uw(e),Uw(s.signal),[4,r({pause:n$(s.signal),delay:qIe(s.signal),signal:s.signal})];case 1:return a=u.sent(),Uw(s.signal),[2,a]}})})},function(){return Bw(s,TEt)});return i!=null&&i.autoJoin&&t.push(o),{result:n$(e)(o),cancel:function(){Bw(s,SEt)}}}},REt=function(e,t){var n=function(r,i){return gk(void 0,null,function(){var s,o,a,u;return mk(this,function(l){switch(l.label){case 0:Uw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,HIe(t,Promise.race(a))];case 2:return u=l.sent(),Uw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return jIe(n(r,i))}},WIe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=ih(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return HX(s,"options.listener"),{predicate:i,type:t,effect:s}},NEt=function(e){var t=WIe(e),n=t.type,r=t.predicate,i=t.effect,s=FIe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},Ez=function(e){e.pending.forEach(function(t){Bw(t,VIe)})},PEt=function(e){return function(){e.forEach(Ez),e.clear()}},Jce=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},DEt=ih(yk+"/add"),OEt=ih(yk+"/removeAll"),$Et=ih(yk+"/remove"),MEt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,U1([yk+"/error"],e))};function LEt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?MEt:i;HX(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&Ez(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=NEt(h)),o(p)},l=function(h){var p=WIe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&Ez(v)),!!v},c=function(h,p,m,g){return gk(t,null,function(){var y,v,b,w;return mk(this,function(E){switch(E.label){case 0:y=new AbortController,v=REt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,IEt({},m,{getOriginalState:g,condition:function(S,T){return v(S,T).then(Boolean)},take:v,delay:qIe(y.signal),pause:n$(y.signal),extra:r,signal:y.signal,fork:kEt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,T,A){S!==y&&(Bw(S,VIe),A.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof O6||Jce(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),Bw(y,AEt),h.pending.delete(y),[7];case 6:return[2]}})})},f=PEt(n),d=function(h){return function(p){return function(m){if(!sEt(m))return p(m);if(DEt.match(m))return u(m.payload);if(OEt.match(m)){f();return}if($Et.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Qce)throw new Error(yk+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,S=w;E<S.length;E++){var T=S[E],A=!1;try{A=T.predicate(m,b,g)}catch(C){A=!1,Jce(s,C,{raisedBy:"predicate"})}A&&c(T,m,h,y)}}finally{g=Qce}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Zce;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);jwt();function FEt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let PN;const jEt=new Uint8Array(16);function BEt(){if(!PN&&(PN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!PN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return PN(jEt)}const vo=[];for(let e=0;e<256;++e)vo.push((e+256).toString(16).slice(1));function UEt(e,t=0){return(vo[e[t+0]]+vo[e[t+1]]+vo[e[t+2]]+vo[e[t+3]]+"-"+vo[e[t+4]]+vo[e[t+5]]+"-"+vo[e[t+6]]+vo[e[t+7]]+"-"+vo[e[t+8]]+vo[e[t+9]]+"-"+vo[e[t+10]]+vo[e[t+11]]+vo[e[t+12]]+vo[e[t+13]]+vo[e[t+14]]+vo[e[t+15]]).toLowerCase()}const zEt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),efe={randomUUID:zEt};function tfe(e,t,n){if(efe.randomUUID&&!t&&!e)return efe.randomUUID();e=e||{};const r=e.random||(e.rng||BEt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,UEt(r)}class sh{static get(){let t=tfe();for(;this.ids.has(t);)t=tfe();return this.ids.set(t,!0),t}}sh.ids=new Map;function oh(e){return"parent"in e}function VEt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:sh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:sh.get(),createdOn:Date.now(),val:r}]:[];return{id:sh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function HEt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:sh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:sh.get(),createdOn:Date.now(),val:s}]:[];return{id:sh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Hi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=ZEt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function z1(e){return!!e&&!!e[Ll]}function K0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===ext}(e)||Array.isArray(e)||!!e[uC]||!!(!((t=e.constructor)===null||t===void 0)&&t[uC])||$6(e)||M6(e))}function UE(e,t,n){n===void 0&&(n=!1),X0(e)===0?(n?Object.keys:QX)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function X0(e){var t=e[Ll];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:$6(e)?2:M6(e)?3:0}function M2(e,t){return X0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function iD(e,t){return X0(e)===2?e.get(t):e[t]}function GIe(e,t,n){var r=X0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function qEt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function $6(e){return QEt&&e instanceof Map}function M6(e){return JEt&&e instanceof Set}function wv(e){return e.o||e.t}function WX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=txt(e);delete t[Ll];for(var n=QX(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function GX(e,t){return t===void 0&&(t=!1),YX(e)||z1(e)||!K0(e)||(X0(e)>1&&(e.set=e.add=e.clear=e.delete=WEt),Object.freeze(e),t&&UE(e,function(n,r){return GX(r,!0)},!0)),e}function WEt(){Hi(2)}function YX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function ah(e){var t=Az[e];return t||Hi(18,e),t}function GEt(e,t){Az[e]||(Az[e]=t)}function nfe(){return{}.NODE_ENV==="production"||zE||Hi(0),zE}function $j(e,t){t&&(ah("Patches"),e.u=[],e.s=[],e.v=t)}function r$(e){xz(e),e.p.forEach(YEt),e.p=null}function xz(e){e===zE&&(zE=e.l)}function rfe(e){return zE={p:[],l:zE,h:e,m:!0,_:0}}function YEt(e){var t=e[Ll];t.i===0||t.i===1?t.j():t.O=!0}function Mj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||ah("ES5").S(t,e,r),r?(n[Ll].P&&(r$(t),Hi(4)),K0(e)&&(e=i$(t,e),t.l||s$(t,e)),t.u&&ah("Patches").M(n[Ll].t,e,t.u,t.s)):e=i$(t,n,[]),r$(t),t.u&&t.v(t.u,t.s),e!==XX?e:void 0}function i$(e,t,n){if(YX(t))return t;var r=t[Ll];if(!r)return UE(t,function(s,o){return ife(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return s$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=WX(r.k):r.o;UE(r.i===3?new Set(i):i,function(s,o){return ife(e,r,i,s,o,n)}),s$(e,i,!1),n&&e.u&&ah("Patches").R(r,n,e.u,e.s)}return r.o}function ife(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Hi(5),z1(i)){var o=i$(e,i,s&&t&&t.i!==3&&!M2(t.D,r)?s.concat(r):void 0);if(GIe(n,r,o),!z1(o))return;e.m=!1}if(K0(i)&&!YX(i)){if(!e.h.F&&e._<1)return;i$(e,i),t&&t.A.l||s$(e,i)}}function s$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&GX(t,n)}function Lj(e,t){var n=e[Ll];return(n?wv(n):e)[t]}function sfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Sz(e){e.P||(e.P=!0,e.l&&Sz(e.l))}function Fj(e){e.o||(e.o=WX(e.t))}function Tz(e,t,n){var r=$6(t)?ah("MapSet").N(t,n):M6(t)?ah("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:nfe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=Cz;o&&(u=[a],l=dA);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):ah("ES5").J(t,n);return(n?n.A:nfe()).p.push(r),r}function KEt(e){return z1(e)||Hi(22,e),function t(n){if(!K0(n))return n;var r,i=n[Ll],s=X0(n);if(i){if(!i.P&&(i.i<4||!ah("ES5").K(i)))return i.t;i.I=!0,r=ofe(n,s),i.I=!1}else r=ofe(n,s);return UE(r,function(o,a){i&&iD(i.t,o)===a||GIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function ofe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return WX(e)}function XEt(){function e(r){if(!K0(r))return r;if(Array.isArray(r))return r.map(e);if($6(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(M6(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return M2(r,uC)&&(i[uC]=r[uC]),i}function t(r){return z1(r)?e(r):r}var n="add";GEt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=X0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Hi(24),typeof u=="function"&&f==="prototype"&&Hi(24),typeof(u=iD(u,f))!="object"&&Hi(15,o.join("/"))}var d=X0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Hi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Hi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;UE(a.D,function(h,p){var m=iD(f,h),g=iD(d,h),y=p?M2(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===XX?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var afe,zE,KX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",QEt=typeof Map<"u",JEt=typeof Set<"u",ufe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",XX=KX?Symbol.for("immer-nothing"):((afe={})["immer-nothing"]=!0,afe),uC=KX?Symbol.for("immer-draftable"):"__$immer_draftable",Ll=KX?Symbol.for("immer-state"):"__$immer_state",ZEt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},ext=""+Object.prototype.constructor,QX=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,txt=Object.getOwnPropertyDescriptors||function(e){var t={};return QX(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Az={},Cz={get:function(e,t){if(t===Ll)return e;var n=wv(e);if(!M2(n,t))return function(i,s,o){var a,u=sfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!K0(r)?r:r===Lj(e.t,t)?(Fj(e),e.o[t]=Tz(e.A.h,r,e)):r},has:function(e,t){return t in wv(e)},ownKeys:function(e){return Reflect.ownKeys(wv(e))},set:function(e,t,n){var r=sfe(wv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Lj(wv(e),t),s=i==null?void 0:i[Ll];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(qEt(n,i)&&(n!==void 0||M2(e.t,t)))return!0;Fj(e),Sz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Lj(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Fj(e),Sz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=wv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Hi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Hi(12)}},dA={};UE(Cz,function(e,t){dA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),dA.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Hi(13),dA.set.call(this,e,t,void 0)},dA.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Hi(14),Cz.set.call(this,e[0],t,n,e[0])};var nxt=function(){function e(n){var r=this;this.g=ufe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Hi(6),o!==void 0&&typeof o!="function"&&Hi(7),K0(i)){var c=rfe(r),f=Tz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?r$(c):xz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return $j(c,o),Mj(m,c)},function(m){throw r$(c),m}):($j(c,o),Mj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===XX&&(l=void 0),r.F&&GX(l,!0),o){var h=[],p=[];ah("Patches").M(i,l,h,p),o(h,p)}return l}Hi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){K0(n)||Hi(8),z1(n)&&(n=KEt(n));var r=rfe(this),i=Tz(this,n,void 0);return i[Ll].C=!0,xz(r),i},t.finishDraft=function(n,r){var i=n&&n[Ll];({}).NODE_ENV!=="production"&&(i&&i.C||Hi(9),i.I&&Hi(10));var s=i.A;return $j(s,r),Mj(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!ufe&&Hi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=ah("Patches").$;return z1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Fl=new nxt,rxt=Fl.produce;Fl.produceWithPatches.bind(Fl);Fl.setAutoFreeze.bind(Fl);Fl.setUseProxies.bind(Fl);Fl.applyPatches.bind(Fl);Fl.createDraft.bind(Fl);Fl.finishDraft.bind(Fl);function ixt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=VEt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return gEt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:sh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:sh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function sxt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=ixt(e),s=LEt();s.startListening({matcher:Xce(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Xce(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=dEt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:sh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var oxt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),axt=Object.prototype.hasOwnProperty;function Iz(e,t){return axt.call(e,t)}function kz(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Iz(e,i)&&r.push(i);return r}function Du(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Rz(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Ev(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function YIe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Nz(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Nz(e[t]))return!0}else if(typeof e=="object"){for(var r=kz(e),i=r.length,s=0;s<i;s++)if(Nz(e[r[s]]))return!0}}return!1}function lfe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var KIe=function(e){oxt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,lfe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=lfe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),ji=KIe,uxt=Du,lw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=o$(n,this.path);r&&(r=Du(r));var i=d1(n,{op:"remove",path:this.from}).removed;return d1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=o$(n,this.from);return d1(n,{op:"add",path:this.path,value:Du(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:L2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},lxt={add:function(e,t,n){return Rz(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:lw.move,copy:lw.copy,test:lw.test,_get:lw._get};function o$(e,t){if(t=="")return e;var n={op:"_get",path:t};return d1(e,n),n.value}function d1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):a$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=o$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=L2(e,t.value),o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ji("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Du(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=a$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=YIe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Rz(h))throw new ji("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Rz(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new ji("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=lxt[t.op].call(t,l,h,e);if(o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=lw[t.op].call(t,l,h,e);if(o.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new ji("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function L6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ji("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Du(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=d1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function cxt(e,t,n){var r=d1(e,t);if(r.test===!1)throw new ji("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function a$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ji("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(lw[e.op]){if(typeof e.path!="string")throw new ji("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ji('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ji("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ji("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Nz(e.value))throw new ji("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ji("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ji("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=XIe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ji("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ji("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function XIe(e,t,n){try{if(!Array.isArray(e))throw new ji("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)L6(Du(t),Du(e),n||!0);else{n=n||a$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ji)return i;throw i}}function L2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!L2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!L2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const fxt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ji,_areEquals:L2,applyOperation:d1,applyPatch:L6,applyReducer:cxt,deepClone:uxt,getValueByPointer:o$,validate:XIe,validator:a$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var JX=new WeakMap,dxt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),hxt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function pxt(e){return JX.get(e)}function mxt(e,t){return e.observers.get(t)}function gxt(e,t){e.observers.delete(t.callback)}function yxt(e,t){t.unobserve()}function vxt(e,t){var n=[],r,i=pxt(e);if(!i)i=new dxt(e),JX.set(e,i);else{var s=mxt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Du(e),t){r.callback=t,r.next=null;var o=function(){Pz(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){Pz(r),clearTimeout(r.next),gxt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new hxt(t,r)),r}function Pz(e,t){t===void 0&&(t=!1);var n=JX.get(e.object);ZX(n.value,e.object,e.patches,"",t),e.patches.length&&L6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function ZX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=kz(t),o=kz(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Iz(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?ZX(c,f,n,r+"/"+Ev(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Ev(l),value:Du(c)}),n.push({op:"replace",path:r+"/"+Ev(l),value:Du(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Ev(l),value:Du(c)}),n.push({op:"remove",path:r+"/"+Ev(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Iz(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Ev(l),value:Du(t[l])})}}}function QIe(e,t,n){n===void 0&&(n=!1);var r=[];return ZX(e,t,r,"",n),r}const bxt=Object.freeze(Object.defineProperty({__proto__:null,compare:QIe,generate:Pz,observe:vxt,unobserve:yxt},Symbol.toStringTag,{value:"Module"}));Object.assign({},fxt,bxt,{JsonPatchError:KIe,deepClone:Du,escapePathComponent:Ev,unescapePathComponent:YIe});var hA=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(hA||{});function sD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=ZIe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=sD(i,t);return L6(a,Du(o),!0,!1).newDocument}function _xt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function JIe({registry:e,initialState:t}){let n=!1;const r=FEt(),i=sxt(t);function s(c){return i.backend.nodes[c]}r.listen(hA.TRAVERSAL_START,()=>{n=!0}),r.listen(hA.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return sD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=sD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=QIe(y,f);if(_xt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=HEt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=sD(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(hA.TRAVERSAL_START);const f=ZIe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);Ext(p,m)?oh(p)&&d.push(...p.sideEffects.undo):oh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(hA.TRAVERSAL_END)},undo(){const{current:c}=i;return oh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return eke(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function wxt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;oh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)oh(r)&&(r=n[r.parent]),oh(i)&&(i=n[i.parent]);return r.id}function ZIe(e,t,n){const r=wxt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),oh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),oh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function Ext(e,t){if(oh(e)&&e.parent===t.id)return!0;if(oh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function eke(e,t){return{...e,children:e.children.map(n=>eke(t[n],t)),name:`${e.label}`}}XEt();function xxt(e){return e.length===2?rxt(e):e}class F6{static create(){return new F6}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:xxt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),ih(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var Sxt="Expected a function",cfe=NaN,Txt="[object Symbol]",Axt=/^\s+|\s+$/g,Cxt=/^[-+]0x[0-9a-f]+$/i,Ixt=/^0b[01]+$/i,kxt=/^0o[0-7]+$/i,Rxt=parseInt,Nxt=typeof to=="object"&&to&&to.Object===Object&&to,Pxt=typeof self=="object"&&self&&self.Object===Object&&self,Dxt=Nxt||Pxt||Function("return this")(),Oxt=Object.prototype,$xt=Oxt.toString,Mxt=Math.max,Lxt=Math.min,jj=function(){return Dxt.Date.now()};function Fxt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(Sxt);t=ffe(t)||0,Dz(n)&&(c=!!n.leading,f="maxWait"in n,s=f?Mxt(ffe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var T=r,A=i;return r=i=void 0,l=S,o=e.apply(A,T),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var T=S-u,A=S-l,C=t-T;return f?Lxt(C,s-A):C}function g(S){var T=S-u,A=S-l;return u===void 0||T>=t||T<0||f&&A>=s}function y(){var S=jj();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(jj())}function E(){var S=jj(),T=g(S);if(r=arguments,i=this,u=S,T){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function Dz(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function jxt(e){return!!e&&typeof e=="object"}function Bxt(e){return typeof e=="symbol"||jxt(e)&&$xt.call(e)==Txt}function ffe(e){if(typeof e=="number")return e;if(Bxt(e))return cfe;if(Dz(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Dz(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Axt,"");var n=Ixt.test(e);return n||kxt.test(e)?Rxt(e.slice(2),n?2:8):Cxt.test(e)?cfe:+e}var Uxt=Fxt;const yd=Hl(Uxt);function tke({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>qx(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(hm,{children:_.jsx(Fs,{gap:3,children:_.jsx(ot,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const zxt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:tke},Symbol.toStringTag,{value:"Module"})),Bj=15;function nke({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=ms("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<Bj&&Math.abs(t(g[r.y])-p[1])<Bj);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:Bj,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const Vxt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:nke},Symbol.toStringTag,{value:"Module"})),pi={top:15,left:100,right:15,bottom:70};function Oz({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=xw(),[c]=xw(),[f]=xw(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-pi.left-pi.right,[l]),m=N.useMemo(()=>u-pi.top-pi.bottom,[u]),g=N.useMemo(()=>{const I=Array.from(new Set(s.map(R=>R[i.category])));return Gx(pTe).domain(I)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=N.useMemo(()=>{const I=s.map(L=>+L[i.x]).filter(L=>L!==null),[R,O]=Xae(I),P=s.map(L=>+L[i.y]).filter(L=>L!==null),[$,F]=Xae(P);return{xMin:R,xMax:O,yMin:$,yMax:F}},[s,i.x,i.y]),E=N.useMemo(()=>{const I=b-y;return p<=0?null:i.dataType==="date"?uTe([pi.left,p+pi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):_m([pi.left,p+pi.left]).domain([y-I/10,b+I/10]).nice()},[i.dataType,p,b,y]),S=N.useMemo(()=>{const I=w-v;return m<=0?null:_m([m+pi.top,pi.top]).domain([v-I/10,w+I/10]).nice()},[m,w,v]),T=N.useMemo(()=>{if(!E||!S)return()=>null;if(r==="Axis Selection"){const I=Llt().extent([[pi.left,pi.top+m-5],[pi.left+p,pi.top+m+5]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[O.selection[0],null],[O.selection[1],null]],E,S,O.mode)}),R=Flt().extent([[pi.left-5,pi.top],[pi.left+5,pi.top+m]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[null,O.selection[0]],[null,O.selection[1]]],E,S,O.mode)});return c.current&&f.current&&(ms(f.current).call(R),ms(c.current).call(I),t.hasBrush||(ms(f.current).call(R.move,[S(w),S(v)]),ms(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(w)],[E(new Date("2015-12-31")),S(v)]],E,S,"drag"))),()=>{ms(f.current).call(R.move,[S(w),S(v)]),ms(c.current).call(I.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),S(w)],[E(new Date("2015-12-31")),S(v)]],E,S,"clear")}}if(r==="Rectangular Selection"){const I=jlt().extent([[pi.left,pi.top],[pi.left+p,pi.top+m]]).on("brush",R=>{R.sourceEvent!==void 0&&n([[R.selection[0][0],R.selection[0][1]],[R.selection[1][0],R.selection[1][1]]],E,S,R.mode)}).on("end",R=>{R.selection===null&&R.sourceEvent!==void 0&&(ms(a.current).call(I.move,null),e(null))});return ms(a.current).call(I),()=>{ms(a.current).call(I.move,null),n([[null,null],[null,null]],E,S,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),S(w)],[E(b),S(v)]],E,S,null),()=>n([[E(y),S(w)],[E(b),S(v)]],E,S,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),S(w)],[E(b),S(v)]],E,S,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,w,v,S]),A=N.useMemo(()=>o.length===0?null:new Set(o),[o]),C=N.useMemo(()=>!E||!S?null:s.map((I,R)=>{if(I[i.x]===null||I[i.y]===null)return null;const O=i.dataType==="date"?E(new Date(I[i.x])):E(I[i.x]);return _.jsx("circle",{opacity:A&&!A.has(I[i.ids])?.3:1,r:3,fill:A&&!A.has(I[i.ids])?"lightgray":g(I[i.category]),cx:O,cy:S(I[i.y])},R)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,S]);return N.useEffect(()=>{r==="Axis Selection"&&kat(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(qd,{children:[_.jsxs(Fs,{children:[_.jsx(Rn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),T==null||T()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(NG,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:I=>h(I==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(Fs,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&S?_.jsxs("g",{children:[_.jsx(tke,{yScale:S,label:i.y,horizontalPosition:pi.left,xRange:E.range()}),_.jsx(hK,{xScale:E,yRange:S.range(),isDate:i.dataType==="date",vertPosition:m+pi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(I=>({value:I.toString(),offset:E(I)}))})]}):null,C,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&S&&r==="Paintbrush Selection"?_.jsx(nke,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:S}):null]}),r==="Slider Selection"&&E&&S?_.jsxs(qd,{style:{flexGrow:1},gap:50,children:[_.jsxs(qd,{gap:0,children:[_.jsx(ot,{children:i.x}),_.jsx(xO,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:I=>{n([[E(I[0]),t.y1],[E(I[1]),t.y2]],E,S,"drag")},style:{width:"300px"},marks:E.ticks(5).map(I=>({value:I,label:I})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(qd,{gap:0,children:[_.jsx(ot,{children:i.y}),_.jsx(xO,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],onChange:I=>{n([[t.x1,S(I[1])],[t.x2,S(I[0])]],E,S,"drag")},style:{width:"300px"},marks:S.ticks(5).map(I=>({value:I,label:I})),value:[S.invert(t.y2),S.invert(t.y1)]})]})]}):null]})]})}const Hxt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:Oz,default:Oz},Symbol.toStringTag,{value:"Module"}));function dfe({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=N.useState(null);N.useEffect(()=>{gct(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=N.useMemo(()=>o?Dwt(o):null,[o]),{actions:l,trrack:c}=N.useMemo(()=>{const g=F6.create(),y=g.register("brush",(S,T)=>(S.all={brush:T},S)),v=g.register("brushMove",(S,T)=>(S.all={brush:T},S)),b=g.register("brushResize",(S,T)=>(S.all={brush:T},S)),w=g.register("brushClear",(S,T)=>(S.all={brush:T},S)),E=JIe({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:E}},[]),f=N.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=N.useMemo(()=>yd(f,100,{maxWait:100}),[f]),h=N.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),S=y.invert(g[1][0]||i.x2),T=v.invert(g[1][1]||i.y2),A=v.invert(g[0][1]||i.y1);let C=null;if(b==="clear")C=u;else if(w){const R=new Set(w);C=u.filter(Cj(O=>R.has(O[e.ids])))}else e.brushType==="Axis Selection"?C=u.filter(Cj(R=>new Date(R[e.x])>=new Date(E)&&new Date(R[e.x])<=new Date(S)&&R[e.y]>=T&&R[e.y]<=A)):C=u.filter(Cj(R=>R[e.x]>=E&&R[e.x]<=S&&R[e.y]>=T&&R[e.y]<=A));const I={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?C==null?void 0:C.array("id"):[]};s(I),b==="drag"||b==="handle"?d(b,I):b==="clear"&&c.apply("Clear Brush",l.clearBrush(I)),r(C),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=N.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=N.useCallback(g=>{r(g)},[]);return o?_.jsxs(qd,{gap:"xs",children:[_.jsx(Oz,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(q7,{data:o,parameters:e,barsTable:p})]}):_.jsx(Bm,{})}const qxt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:dfe,default:dfe},Symbol.toStringTag,{value:"Module"})),Wxt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),hfe=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},uS=e=>{const t=N.useRef(null),n=hfe(e),[r,i]=N.useState(0),[s,o]=N.useState(0);N.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=hfe({...n,width:n.width||r,height:n.height||s});return[t,a]},Gxt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:uS},Symbol.toStringTag,{value:"Module"}));function rke({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const Yxt=Object.freeze(Object.defineProperty({__proto__:null,Bars:rke},Symbol.toStringTag,{value:"Module"}));function eQ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=_m().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const Kxt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:eQ},Symbol.toStringTag,{value:"Module"}));function ike({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=nk().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const Xxt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:ike},Symbol.toStringTag,{value:"Module"})),Qxt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function Jxt({parameters:e}){const[n,r]=uS(Qxt),i=nk().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=_m().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(ike,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(eQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(rke,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const Zxt=Object.freeze(Object.defineProperty({__proto__:null,default:Jxt},Symbol.toStringTag,{value:"Module"}));function ske({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const eSt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:ske},Symbol.toStringTag,{value:"Module"}));function tQ({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const tSt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:tQ},Symbol.toStringTag,{value:"Module"})),nSt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},rSt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=jSe().size([t-10,n-10]).padding(1.5),o=ZL(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},iSt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function sSt({parameters:e}){const[t,n]=uS(nSt),r=rSt(e,n.width,n.height),i=iSt(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(ske,{data:r}),_.jsx(tQ,{positions:i})]})})})}const oSt=Object.freeze(Object.defineProperty({__proto__:null,default:sSt},Symbol.toStringTag,{value:"Module"}));function oke({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const aSt=Object.freeze(Object.defineProperty({__proto__:null,Slices:oke},Symbol.toStringTag,{value:"Module"}));function ake({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const uSt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:ake},Symbol.toStringTag,{value:"Module"})),lSt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},cSt=smt().value(e=>e.value),gT=150;function fSt({parameters:e}){const[t,n]=uS(lSt),r=cSt(e.data),i=r.map(o=>H7().innerRadius(0).outerRadius(gT).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>H7().outerRadius(gT+10).innerRadius(gT+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+gT,n.marginTop+gT].join(",")})`,children:[_.jsx(oke,{arcs:i}),_.jsx(ake,{positions:s})]})})})}const dSt=Object.freeze(Object.defineProperty({__proto__:null,default:fSt},Symbol.toStringTag,{value:"Module"}));function uke({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=_m().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const hSt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:uke},Symbol.toStringTag,{value:"Module"}));function lke({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const pSt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:lke},Symbol.toStringTag,{value:"Module"})),mSt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function gSt({parameters:e}){const[n,r]=uS(mSt),i=nk().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=_m().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return Cmt().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(uke,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(eQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(lke,{data:c,barWidth:f,yScale:s}),_.jsx(tQ,{positions:d})]})]})})})}const ySt=Object.freeze(Object.defineProperty({__proto__:null,default:gSt},Symbol.toStringTag,{value:"Module"})),vSt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function bSt({parameters:e,setAnswer:t}){const[n,r]=uS(vSt),[i,s]=N.useState(100),[o,a]=N.useState(100),[u,l]=N.useState(300),{taskid:c}=e,{actions:f,trrack:d}=N.useMemo(()=>{const p=F6.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=JIe({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=N.useCallback(p=>{const m=ms("#movingCircle"),g=ms("#clickAccuracySvg"),y=o7(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return N.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;ms(n.current).select("circle").transition().duration(y).ease(xlt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(_e,{children:["Adjust speed (px/s):",_.jsx(SL,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const _St=Object.freeze(Object.defineProperty({__proto__:null,default:bSt},Symbol.toStringTag,{value:"Module"}));function pfe({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function wSt({parameters:e,setAnswer:t}){const n=Ty(),[r,i]=N.useState(""),{goToNextStep:s,isNextDisabled:o}=PEe(),a=N.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=N.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=N.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=N.useCallback(()=>{o||s()},[o,s]);N.useEffect(()=>{const h=OBe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(Ua,{children:[_.jsxs(Ua.Col,{span:2,children:[_.jsx(pfe,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(Rn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(Eoe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(Ua.Col,{span:2,children:[_.jsx(pfe,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(Rn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(Eoe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const ESt=Object.freeze(Object.defineProperty({__proto__:null,default:wSt},Symbol.toStringTag,{value:"Module"})),mfe=Object.assign({"../public/demo-brush-interactions/assets/Bar.tsx":Rmt,"../public/demo-brush-interactions/assets/BrushPlot.tsx":qxt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":Vxt,"../public/demo-brush-interactions/assets/Scatter.tsx":Hxt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":Imt,"../public/demo-brush-interactions/assets/YAxis.tsx":zxt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":kmt,"../public/demo-brush-interactions/assets/types.ts":Wxt,"../public/demo-cleveland/assets/BarChart.tsx":Zxt,"../public/demo-cleveland/assets/BubbleChart.tsx":oSt,"../public/demo-cleveland/assets/PieChart.tsx":dSt,"../public/demo-cleveland/assets/StackedBarChart.tsx":ySt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":Yxt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":eSt,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":tSt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":hSt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":Kxt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":Xxt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":aSt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":uSt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":pSt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":Gxt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":_St,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":ESt});function xSt({currentConfig:e}){const t=qm(),n=Ty(),r=`../public/${e.path}`,i=r in mfe?mfe[r].default:null,s=Bh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=jh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(N1,{path:e.path})})}function SSt({currentConfig:e}){const[t,n]=N.useState(""),[r,i]=N.useState(!0);return N.useEffect(()=>{async function s(){const o=await TY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Ya,{text:t}):_.jsx(N1,{path:e.path})}const TSt={},ASt=Object.freeze(Object.defineProperty({__proto__:null,default:TSt},Symbol.toStringTag,{value:"Module"})),CSt=Q5e(ASt);var ISt=CSt;function kSt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function RSt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function NSt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function PSt(e){return e.__COMMENTS__}function DSt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var j6={EOL:ISt.EOL||`
`,tryParseNumber:kSt,createComment:RSt,removeComment:NSt,getComment:PSt,forceComment:DSt},OSt="3.2.1";function $St(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return gfe}else if(e.length===0)return gfe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return LSt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),MSt.bind(null,n)}function MSt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function gfe(){}function LSt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function cke(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}cke.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function fke(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}fke.description="parse hexadecimal numbers prefixed with 0x";function dke(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}dke.description="support ISO dates";var nQ={loadDsf:$St,std:{math:cke,hex:fke,date:dke}},FSt=function(e,t){var n=j6,r=nQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var F,L=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,L++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error($+" at line "+B+","+L+" >>>"+i.substr(s-L,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var F="",L=o;h();){if(o===L)return h(),$&&L==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,z=0;z<4;z++){h();var q=o.charCodeAt(0),D;o>="0"&&o<="9"?D=q-48:o>="a"&&o<="f"?D=q-97+10:o>="A"&&o<="F"?D=q-65+10:d("Bad \\u char "+o),B=B*16+D}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var $="",F=0,L=0;;){var B=p(-L-5);if(!B||B===`
`)break;L++}function z(){for(var q=L;o&&o<=" "&&o!==`
`&&q-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),z());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;F>0;)$+="'",F--;o===`
`?($+=`
`,h(),z()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",F=s,L=-1;;){if(o===":")return $?L>=0&&L!==$.length&&(s=F+L,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?L<0&&(L=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var L=$[0];switch(L){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(L==="-"||L>="0"&&L<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(F){$=$.trim();var z=l($);return z!==void 0?z:$}}$+=o}}function w($,F){var L;for($--,L=s-2;L>$&&i[L]<=" "&&i[L]!==`
`;L--);i[L]===`
`&&L--,i[L]==="\r"&&L--;var B=i.substr($,L-$+1);for(L=0;L<B.length;L++)if(B[L]>" "){var z=B.indexOf(`
`);if(z>=0){var q=[B.substr(0,z),B.substr(z+1)];return F&&q[0].trim().length===0&&q.shift(),q}else return[B]}return[]}function E($){function F(B,z){var q,D,U,W;switch(typeof B){case"string":B.indexOf(z)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(q=0,U=B.length;q<U;q++)W=F(B[q],z)||W;else for(D in B)Object.prototype.hasOwnProperty.call(B,D)&&(W=F(B[D],z)||W)}return W}function L(B){var z=F($,B);return z?"found '"+B+`' in a string value, your mistake could be with:
  > `+z+`
  (unquoted strings contain everything up to the next line!)`:""}return L("}")||L("]")}function S(){var $=[],F,L,B;try{if(u&&(F=n.createComment($,{a:[]})),h(),L=s,v(),F&&(B=w(L,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),$;for(;o;){if($.push(A()),L=s,v(),o===","&&(h(),L=s,v()),F){var z=w(L);F.a.push([B||"",z[0]||""]),B=z[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(q){throw q.hint=q.hint||E($),q}}function T($){var F="",L={},B,z,q;try{if(u&&(B=n.createComment(L,{c:{},o:[]})),$?z=1:(h(),z=s),v(),B&&(q=w(z,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[q]),h(),L;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),L[F]=A(),z=s,v(),o===","&&(h(),z=s,v()),B){var D=w(z);B.c[F]=[q||"",D[0]||""],q=D[1],B.o.push(F)}if(o==="}"&&!$)return h(),B&&(B.c[F][1]+=q||""),L;v()}if($)return L;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||E(L),U}}function A(){switch(v(),o){case"{":return T();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function C($,F){var L=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),z=w(L).join(`
`);if(z||B){var q=n.createComment($,n.getComment($));q.r=[B,z]}}return $}function I(){v();var $=u?w(1):null;switch(o){case"{":return C(T(),$);case"[":return C(S(),$);default:return C(A(),$)}}function R(){v();var $=u?w(1):null;switch(o){case"{":return C(T(),$);case"[":return C(S(),$)}try{return C(T(!0),$)}catch(F){c();try{return C(A(),$)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),P?R():I()},jSt=function(e,t){var n=j6,r=nQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),C=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),I={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},R=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",P=0;function $(W,j){return P+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(S,function(j){var H=I[j];return typeof H=="string"?$(g.esc,H):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function L(W,j,H,G){return W?(T.lastIndex=0,C.lastIndex=0,c||H||T.test(W)||n.tryParseNumber(W,!0)!==void 0||C.test(W)?(S.lastIndex=0,A.lastIndex=0,S.test(W)?!A.test(W)&&!G&&d?B(W,j):$(g.qstr,F(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var H,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(H=0;H<G.length;H++)ne+=s,G[H]&&(ne+=j+G[H]);return ne+s+j+g.mstr[1]}function z(W){return W?l||R.test(W)?(S.lastIndex=0,$(g.qkey,S.test(W)?F(W):W)):$(g.key,W):'""'}function q(W,j,H,G){function ne(pn){return pn&&pn[pn[0]==="\r"?1:0]===`
`}function ce(pn){return pn&&!ne(pn)}function de(pn,Sn,tr){if(!pn)return"";pn=n.forceComment(pn);var nr,Bo=pn.length;for(nr=0;nr<Bo&&pn[nr]<=" ";nr++);return tr&&nr>0&&(pn=pn.substr(nr)),nr<Bo?Sn+$(g.rem,pn):pn}var he=w(W);if(he!==void 0)return $(g.dsf,he);switch(typeof W){case"string":return L(W,O,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ye;a&&(ye=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",ve=O;O+=o;var Ke=s+ve,Ue=s+O,gt=H||u?"":Ke,rt=[],be,ke=f?[]:null,ze=c,ct=d,Dt=h?"":g.com[0],We=0,me,dt,vt,pe,Ce,He,ut,_t,Mn;if(Ie){for(me=0,dt=W.length;me<dt;me++){if(be=me<dt-1,ye?(He=ye.a[me]||[],ut=ce(He[1]),rt.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):rt.push(Ue),P=0,pe=W[me],rt.push(q(pe,ye?ut:!1,!0)+(be?h:"")),ke){switch(typeof pe){case"string":P=0,c=!0,d=0,ke.push(q(pe,!1,!0)+(be?g.com[0]:"")),c=ze,d=ct;break;case"object":if(pe){ke=null;break}default:ke.push(rt[rt.length-1]+(be?Dt:""));break}be&&(P+=g.com[0].length-g.com[2]),We+=P}ye&&He[1]&&rt.push(de(He[1],ut?" ":`
`,ut))}dt===0?ye&&ye.e&&rt.push(de(ye.e[0],`
`)+Ke):rt.push(Ke),rt.length===0?_t=$(g.arr,""):(_t=gt+$(g.arr,rt.join("")),ke&&(Mn=ke.join(" "),Mn.length-We<=f&&(_t=$(g.arr,Mn))))}else{var Sr=ye?ye.o.slice():[],Ln=[];for(vt in W)Object.prototype.hasOwnProperty.call(W,vt)&&Sr.indexOf(vt)<0&&Ln.push(vt);m&&Ln.sort();var lr=Sr.concat(Ln);for(me=0,dt=lr.length;me<dt;me++)if(be=me<dt-1,vt=lr[me],ye?(He=ye.c[vt]||[],ut=ce(He[1]),rt.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):rt.push(Ue),P=0,pe=W[vt],Ce=q(pe,ye&&ut),rt.push(z(vt)+g.col[0]+(ne(Ce)?"":" ")+Ce+(be?h:"")),ye&&He[1]&&rt.push(de(He[1],ut?" ":`
`,ut)),ke){switch(typeof pe){case"string":P=0,c=!0,d=0,Ce=q(pe,!1),c=ze,d=ct,ke.push(z(vt)+g.col[0]+" "+Ce+(be?g.com[0]:""));break;case"object":if(pe){ke=null;break}default:ke.push(rt[rt.length-1]+(be?Dt:""));break}P+=g.col[0].length-g.col[2],be&&(P+=g.com[0].length-g.com[2]),We+=P}dt===0?ye&&ye.e&&rt.push(de(ye.e[0],`
`)+Ke):rt.push(Ke),rt.length===0?_t=$(g.obj,""):(_t=gt+$(g.obj,rt.join("")),ke&&(Mn=ke.join(" "),Mn.length-We<=f&&(_t=$(g.obj,Mn))))}return O=ve,_t}}w=r.loadDsf(p,"stringify");var D="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&(D=U[0]+`
`),D+=q(e,null,!0,!0),U&&(D+=U[1]||""),D},zw=j6;function lC(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function $z(e,t){if(!(e===null||typeof e!="object")){var n=zw.getComment(e);n&&zw.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)yfe(o.a,r,n.a[r],$z(e[r]))&&(s=!0);!s&&n.e&&(o.e=lC(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];yfe(o.s,l,n.c[l],$z(e[l]))&&(s=!0)}!s&&n.e&&(o.e=lC(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=lC(n.r[0],n.r[1])),s?o:void 0}}function BSt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function USt(e,t){var n=[];if(Mz(e,t,n,[]),n.length>0){var r=u$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+BSt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),u$(t,r,1)}}function yfe(e,t,n,r){var i=lC(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function cC(e,t){var n=lC(t.b,t.a);return n.path=e,n}function fC(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(cC(s,o)),fC(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(cC(u,l)),fC(l.x,t,u))});e.e&&t.push(cC(n,e.e))}}function Mz(e,t,n,r){if(e){if(t===null||typeof t!="object"){fC(e,n,r);return}var i,s=zw.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],Mz(u.x,t[i],n,l)):(n.push(cC(l,u)),fC(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],Mz(d.x,t[c],n,f))):d&&(n.push(cC(f,d)),fC(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function u$(e,t,n){var r=zw.createComment(e,zw.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=zw.forceComment(t)),r.r[n]||""}var zSt={extract:function(e){return $z(e,!0)},merge:USt,header:function(e,t){return u$(e,t,0)},footer:function(e,t){return u$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var vfe=j6,VSt=OSt,bfe=FSt,_fe=jSt,HSt=zSt,qSt=nQ,rQ={parse:bfe,stringify:_fe,endOfLine:function(){return vfe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(vfe.EOL=e)},version:VSt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,bfe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,_fe(e,t)}},comments:HSt,dsf:qSt.std},Lz={exports:{}},hke={},Df={},VE={},vk={},Pn={},F2={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(F2);var Fz={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=F2;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(Fz);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=F2,n=Fz;var r=F2;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Fz;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(H,G){return this}}class o extends s{constructor(H,G,ne){super(),this.varKind=H,this.name=G,this.rhs=ne}render({es5:H,_n:G}){const ne=H?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ce};`+G}optimizeNames(H,G){if(H[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,H,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(H,G,ne){super(),this.lhs=H,this.rhs=G,this.sideEffects=ne}render({_n:H}){return`${this.lhs} = ${this.rhs};`+H}optimizeNames(H,G){if(!(this.lhs instanceof t.Name&&!H[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,H,G),this}get names(){const H=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(H,this.rhs)}}class u extends a{constructor(H,G,ne,ce){super(H,ne,ce),this.op=G}render({_n:H}){return`${this.lhs} ${this.op}= ${this.rhs};`+H}}class l extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`${this.label}:`+H}}class c extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`break${this.label?` ${this.label}`:""};`+H}}class f extends s{constructor(H){super(),this.error=H}render({_n:H}){return`throw ${this.error};`+H}get names(){return this.error.names}}class d extends s{constructor(H){super(),this.code=H}render({_n:H}){return`${this.code};`+H}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(H,G){return this.code=$(this.code,H,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(H=[]){super(),this.nodes=H}render(H){return this.nodes.reduce((G,ne)=>G+ne.render(H),"")}optimizeNodes(){const{nodes:H}=this;let G=H.length;for(;G--;){const ne=H[G].optimizeNodes();Array.isArray(ne)?H.splice(G,1,...ne):ne?H[G]=ne:H.splice(G,1)}return H.length>0?this:void 0}optimizeNames(H,G){const{nodes:ne}=this;let ce=ne.length;for(;ce--;){const de=ne[ce];de.optimizeNames(H,G)||(F(H,de.names),ne.splice(ce,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((H,G)=>O(H,G.names),{})}}class p extends h{render(H){return"{"+H._n+super.render(H)+"}"+H._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(H,G){super(G),this.condition=H}render(H){let G=`if(${this.condition})`+super.render(H);return this.else&&(G+="else "+this.else.render(H)),G}optimizeNodes(){super.optimizeNodes();const H=this.condition;if(H===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return H===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(L(H),G instanceof y?[G]:G.nodes);if(!(H===!1||!this.nodes.length))return this}optimizeNames(H,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(H,G),!!(super.optimizeNames(H,G)||this.else))return this.condition=$(this.condition,H,G),this}get names(){const H=super.names;return P(H,this.condition),this.else&&O(H,this.else.names),H}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(H){super(),this.iteration=H}render(H){return`for(${this.iteration})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iteration=$(this.iteration,H,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(H,G,ne,ce){super(),this.varKind=H,this.name=G,this.from=ne,this.to=ce}render(H){const G=H.es5?n.varKinds.var:this.varKind,{name:ne,from:ce,to:de}=this;return`for(${G} ${ne}=${ce}; ${ne}<${de}; ${ne}++)`+super.render(H)}get names(){const H=P(super.names,this.from);return P(H,this.to)}}class E extends v{constructor(H,G,ne,ce){super(),this.loop=H,this.varKind=G,this.name=ne,this.iterable=ce}render(H){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iterable=$(this.iterable,H,G),this}get names(){return O(super.names,this.iterable.names)}}class S extends p{constructor(H,G,ne){super(),this.name=H,this.args=G,this.async=ne}render(H){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(H)}}S.kind="func";class T extends h{render(H){return"return "+super.render(H)}}T.kind="return";class A extends p{render(H){let G="try"+super.render(H);return this.catch&&(G+=this.catch.render(H)),this.finally&&(G+=this.finally.render(H)),G}optimizeNodes(){var H,G;return super.optimizeNodes(),(H=this.catch)===null||H===void 0||H.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(H,G){var ne,ce;return super.optimizeNames(H,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(H,G),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(H,G),this}get names(){const H=super.names;return this.catch&&O(H,this.catch.names),this.finally&&O(H,this.finally.names),H}}class C extends p{constructor(H){super(),this.error=H}render(H){return`catch(${this.error})`+super.render(H)}}C.kind="catch";class I extends p{render(H){return"finally"+super.render(H)}}I.kind="finally";class R{constructor(H,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=H,this._scope=new n.Scope({parent:H}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(H){return this._scope.name(H)}scopeName(H){return this._extScope.name(H)}scopeValue(H,G){const ne=this._extScope.value(H,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(H,G){return this._extScope.getValue(H,G)}scopeRefs(H){return this._extScope.scopeRefs(H,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(H,G,ne,ce){const de=this._scope.toName(G);return ne!==void 0&&ce&&(this._constants[de.str]=ne),this._leafNode(new o(H,de,ne)),de}const(H,G,ne){return this._def(n.varKinds.const,H,G,ne)}let(H,G,ne){return this._def(n.varKinds.let,H,G,ne)}var(H,G,ne){return this._def(n.varKinds.var,H,G,ne)}assign(H,G,ne){return this._leafNode(new a(H,G,ne))}add(H,G){return this._leafNode(new u(H,e.operators.ADD,G))}code(H){return typeof H=="function"?H():H!==t.nil&&this._leafNode(new d(H)),this}object(...H){const G=["{"];for(const[ne,ce]of H)G.length>1&&G.push(","),G.push(ne),(ne!==ce||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ce));return G.push("}"),new t._Code(G)}if(H,G,ne){if(this._blockNode(new y(H)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(H){return this._elseNode(new y(H))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(H,G){return this._blockNode(H),G&&this.code(G).endFor(),this}for(H,G){return this._for(new b(H),G)}forRange(H,G,ne,ce,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(H);return this._for(new w(de,he,G,ne),()=>ce(he))}forOf(H,G,ne,ce=n.varKinds.const){const de=this._scope.toName(H);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ye=>{this.var(de,(0,t._)`${he}[${ye}]`),ne(de)})}return this._for(new E("of",ce,de,G),()=>ne(de))}forIn(H,G,ne,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(H,(0,t._)`Object.keys(${G})`,ne);const de=this._scope.toName(H);return this._for(new E("in",ce,de,G),()=>ne(de))}endFor(){return this._endBlockNode(v)}label(H){return this._leafNode(new l(H))}break(H){return this._leafNode(new c(H))}return(H){const G=new T;if(this._blockNode(G),this.code(H),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(H,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new A;if(this._blockNode(ce),this.code(H),G){const de=this.name("e");this._currNode=ce.catch=new C(de),G(de)}return ne&&(this._currNode=ce.finally=new I,this.code(ne)),this._endBlockNode(C,I)}throw(H){return this._leafNode(new f(H))}block(H,G){return this._blockStarts.push(this._nodes.length),H&&this.code(H).endBlock(G),this}endBlock(H){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||H!==void 0&&ne!==H)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${H} expected`);return this._nodes.length=G,this}func(H,G=t.nil,ne,ce){return this._blockNode(new S(H,G,ne)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(H=1){for(;H-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(H){return this._currNode.nodes.push(H),this}_blockNode(H){this._currNode.nodes.push(H),this._nodes.push(H)}_endBlockNode(H,G){const ne=this._currNode;if(ne instanceof H||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${H.kind}/${G.kind}`:H.kind}"`)}_elseNode(H){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=H,this}get _root(){return this._nodes[0]}get _currNode(){const H=this._nodes;return H[H.length-1]}set _currNode(H){const G=this._nodes;G[G.length-1]=H}}e.CodeGen=R;function O(j,H){for(const G in H)j[G]=(j[G]||0)+(H[G]||0);return j}function P(j,H){return H instanceof t._CodeOrName?O(j,H.names):j}function $(j,H,G){if(j instanceof t.Name)return ne(j);if(!ce(j))return j;return new t._Code(j._items.reduce((de,he)=>(he instanceof t.Name&&(he=ne(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ne(de){const he=G[de.str];return he===void 0||H[de.str]!==1?de:(delete H[de.str],he)}function ce(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&H[he.str]===1&&G[he.str]!==void 0)}}function F(j,H){for(const G in H)j[G]=(j[G]||0)-(H[G]||0)}function L(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=L;const B=U(e.operators.AND);function z(...j){return j.reduce(B)}e.and=z;const q=U(e.operators.OR);function D(...j){return j.reduce(q)}e.or=D;function U(j){return(H,G)=>H===t.nil?G:G===t.nil?H:(0,t._)`${W(H)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Pn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const qr=Pn,WSt=F2;function GSt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=GSt;function YSt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(pke(e,t),!mke(t,e.self.RULES.all))}wt.alwaysValidSchema=YSt;function pke(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||vke(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=pke;function mke(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=mke;function KSt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=KSt;function XSt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,qr._)`${n}`}return(0,qr._)`${e}${t}${(0,qr.getProperty)(r)}`}wt.schemaRefOrVal=XSt;function QSt(e){return gke(decodeURIComponent(e))}wt.unescapeFragment=QSt;function JSt(e){return encodeURIComponent(iQ(e))}wt.escapeFragment=JSt;function iQ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=iQ;function gke(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=gke;function ZSt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=ZSt;function wfe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof qr.Name?(s instanceof qr.Name?e(i,s,o):t(i,s,o),o):s instanceof qr.Name?(t(i,o,s),s):n(s,o);return a===qr.Name&&!(u instanceof qr.Name)?r(i,u):u}}wt.mergeEvaluated={props:wfe({mergeNames:(e,t,n)=>e.if((0,qr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,qr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,qr._)`${n} || {}`).code((0,qr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,qr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,qr._)`${n} || {}`),sQ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:yke}),items:wfe({mergeNames:(e,t,n)=>e.if((0,qr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,qr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,qr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,qr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function yke(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,qr._)`{}`);return t!==void 0&&sQ(e,n,t),n}wt.evaluatedPropsToName=yke;function sQ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,qr._)`${t}${(0,qr.getProperty)(r)}`,!0))}wt.setEvaluated=sQ;const Efe={};function eTt(e,t){return e.scopeValue("func",{ref:t,code:Efe[t.code]||(Efe[t.code]=new WSt._Code(t.code))})}wt.useFunc=eTt;var jz;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(jz||(wt.Type=jz={}));function tTt(e,t,n){if(e instanceof qr.Name){const r=t===jz.Num;return n?r?(0,qr._)`"[" + ${e} + "]"`:(0,qr._)`"['" + ${e} + "']"`:r?(0,qr._)`"/" + ${e}`:(0,qr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,qr.getProperty)(e).toString():"/"+iQ(e)}wt.getErrorPath=tTt;function vke(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=vke;var qh={};Object.defineProperty(qh,"__esModule",{value:!0});const Jo=Pn,nTt={data:new Jo.Name("data"),valCxt:new Jo.Name("valCxt"),instancePath:new Jo.Name("instancePath"),parentData:new Jo.Name("parentData"),parentDataProperty:new Jo.Name("parentDataProperty"),rootData:new Jo.Name("rootData"),dynamicAnchors:new Jo.Name("dynamicAnchors"),vErrors:new Jo.Name("vErrors"),errors:new Jo.Name("errors"),this:new Jo.Name("this"),self:new Jo.Name("self"),scope:new Jo.Name("scope"),json:new Jo.Name("json"),jsonPos:new Jo.Name("jsonPos"),jsonLen:new Jo.Name("jsonLen"),jsonPart:new Jo.Name("jsonPart")};qh.default=nTt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Pn,n=wt,r=qh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:S,allErrors:T}=w,A=f(g,y,v);b??(S||T)?u(E,A):l(w,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:S}=b,T=f(g,y,v);u(w,T),E||S||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,T=>{g.const(S,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:S,it:T}=g,{opts:A,propertyName:C,topSchemaRef:I,schemaPath:R}=T;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${I}${R}`],[r.default.data,E]),C&&b.push([c.propertyName,C])}})(vk);Object.defineProperty(VE,"__esModule",{value:!0});VE.boolOrEmptySchema=VE.topBoolOrEmptySchema=void 0;const rTt=vk,iTt=Pn,sTt=qh,oTt={message:"boolean schema is false"};function aTt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?bke(e,!1):typeof n=="object"&&n.$async===!0?t.return(sTt.default.data):(t.assign((0,iTt._)`${r}.errors`,null),t.return(!0))}VE.topBoolOrEmptySchema=aTt;function uTt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),bke(e)):n.var(t,!0)}VE.boolOrEmptySchema=uTt;function bke(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,rTt.reportError)(i,oTt,void 0,t)}var Cs={},V1={};Object.defineProperty(V1,"__esModule",{value:!0});V1.getRules=V1.isJSONType=void 0;const lTt=["string","number","integer","boolean","null","object","array"],cTt=new Set(lTt);function fTt(e){return typeof e=="string"&&cTt.has(e)}V1.isJSONType=fTt;function dTt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}V1.getRules=dTt;var Jp={};Object.defineProperty(Jp,"__esModule",{value:!0});Jp.shouldUseRule=Jp.shouldUseGroup=Jp.schemaHasRulesForType=void 0;function hTt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&_ke(e,r)}Jp.schemaHasRulesForType=hTt;function _ke(e,t){return t.rules.some(n=>wke(e,n))}Jp.shouldUseGroup=_ke;function wke(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Jp.shouldUseRule=wke;Object.defineProperty(Cs,"__esModule",{value:!0});Cs.reportTypeError=Cs.checkDataTypes=Cs.checkDataType=Cs.coerceAndCheckDataType=Cs.getJSONTypes=Cs.getSchemaTypes=Cs.DataType=void 0;const pTt=V1,mTt=Jp,gTt=vk,bn=Pn,Eke=wt;var Vw;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Vw||(Cs.DataType=Vw={}));function yTt(e){const t=xke(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Cs.getSchemaTypes=yTt;function xke(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(pTt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Cs.getJSONTypes=xke;function vTt(e,t){const{gen:n,data:r,opts:i}=e,s=bTt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,mTt.schemaHasRulesForType)(e,t[0]));if(o){const a=oQ(t,r,i.strictNumbers,Vw.Wrong);n.if(a,()=>{s.length?_Tt(e,t,s):aQ(e)})}return o}Cs.coerceAndCheckDataType=vTt;const Ske=new Set(["string","number","integer","boolean","null"]);function bTt(e,t){return t?e.filter(n=>Ske.has(n)||t==="array"&&n==="array"):[]}function _Tt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,bn._)`typeof ${i}`),a=r.let("coerced",(0,bn._)`undefined`);s.coerceTypes==="array"&&r.if((0,bn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,bn._)`${i}[0]`).assign(o,(0,bn._)`typeof ${i}`).if(oQ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,bn._)`${a} !== undefined`);for(const l of n)(Ske.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),aQ(e),r.endIf(),r.if((0,bn._)`${a} !== undefined`,()=>{r.assign(i,a),wTt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,bn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,bn._)`"" + ${i}`).elseIf((0,bn._)`${i} === null`).assign(a,(0,bn._)`""`);return;case"number":r.elseIf((0,bn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,bn._)`+${i}`);return;case"integer":r.elseIf((0,bn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,bn._)`+${i}`);return;case"boolean":r.elseIf((0,bn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,bn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,bn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,bn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,bn._)`[${i}]`)}}}function wTt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,bn._)`${t} !== undefined`,()=>e.assign((0,bn._)`${t}[${n}]`,r))}function Bz(e,t,n,r=Vw.Correct){const i=r===Vw.Correct?bn.operators.EQ:bn.operators.NEQ;let s;switch(e){case"null":return(0,bn._)`${t} ${i} null`;case"array":s=(0,bn._)`Array.isArray(${t})`;break;case"object":s=(0,bn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,bn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,bn._)`typeof ${t} ${i} ${e}`}return r===Vw.Correct?s:(0,bn.not)(s);function o(a=bn.nil){return(0,bn.and)((0,bn._)`typeof ${t} == "number"`,a,n?(0,bn._)`isFinite(${t})`:bn.nil)}}Cs.checkDataType=Bz;function oQ(e,t,n,r){if(e.length===1)return Bz(e[0],t,n,r);let i;const s=(0,Eke.toHash)(e);if(s.array&&s.object){const o=(0,bn._)`typeof ${t} != "object"`;i=s.null?o:(0,bn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=bn.nil;s.number&&delete s.integer;for(const o in s)i=(0,bn.and)(i,Bz(o,t,n,r));return i}Cs.checkDataTypes=oQ;const ETt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,bn._)`{type: ${e}}`:(0,bn._)`{type: ${t}}`};function aQ(e){const t=xTt(e);(0,gTt.reportError)(t,ETt)}Cs.reportTypeError=aQ;function xTt(e){const{gen:t,data:n,schema:r}=e,i=(0,Eke.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var B6={};Object.defineProperty(B6,"__esModule",{value:!0});B6.assignDefaults=void 0;const y_=Pn,STt=wt;function TTt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)xfe(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>xfe(e,s,i.default))}B6.assignDefaults=TTt;function xfe(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,y_._)`${s}${(0,y_.getProperty)(t)}`;if(i){(0,STt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,y_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,y_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,y_._)`${a} = ${(0,y_.stringify)(n)}`)}var Yd={},kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.validateUnion=kn.validateArray=kn.usePattern=kn.callValidateCode=kn.schemaProperties=kn.allSchemaProperties=kn.noPropertyInData=kn.propertyInData=kn.isOwnProperty=kn.hasPropFunc=kn.reportMissingProp=kn.checkMissingProp=kn.checkReportMissingProp=void 0;const oi=Pn,uQ=wt,dg=qh,ATt=wt;function CTt(e,t){const{gen:n,data:r,it:i}=e;n.if(cQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,oi._)`${t}`},!0),e.error()})}kn.checkReportMissingProp=CTt;function ITt({gen:e,data:t,it:{opts:n}},r,i){return(0,oi.or)(...r.map(s=>(0,oi.and)(cQ(e,t,s,n.ownProperties),(0,oi._)`${i} = ${s}`)))}kn.checkMissingProp=ITt;function kTt(e,t){e.setParams({missingProperty:t},!0),e.error()}kn.reportMissingProp=kTt;function Tke(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,oi._)`Object.prototype.hasOwnProperty`})}kn.hasPropFunc=Tke;function lQ(e,t,n){return(0,oi._)`${Tke(e)}.call(${t}, ${n})`}kn.isOwnProperty=lQ;function RTt(e,t,n,r){const i=(0,oi._)`${t}${(0,oi.getProperty)(n)} !== undefined`;return r?(0,oi._)`${i} && ${lQ(e,t,n)}`:i}kn.propertyInData=RTt;function cQ(e,t,n,r){const i=(0,oi._)`${t}${(0,oi.getProperty)(n)} === undefined`;return r?(0,oi.or)(i,(0,oi.not)(lQ(e,t,n))):i}kn.noPropertyInData=cQ;function Ake(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}kn.allSchemaProperties=Ake;function NTt(e,t){return Ake(t).filter(n=>!(0,uQ.alwaysValidSchema)(e,t[n]))}kn.schemaProperties=NTt;function PTt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,oi._)`${e}, ${t}, ${r}${i}`:t,f=[[dg.default.instancePath,(0,oi.strConcat)(dg.default.instancePath,s)],[dg.default.parentData,o.parentData],[dg.default.parentDataProperty,o.parentDataProperty],[dg.default.rootData,dg.default.rootData]];o.opts.dynamicRef&&f.push([dg.default.dynamicAnchors,dg.default.dynamicAnchors]);const d=(0,oi._)`${c}, ${n.object(...f)}`;return u!==oi.nil?(0,oi._)`${a}.call(${u}, ${d})`:(0,oi._)`${a}(${d})`}kn.callValidateCode=PTt;const DTt=(0,oi._)`new RegExp`;function OTt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,oi._)`${i.code==="new RegExp"?DTt:(0,ATt.useFunc)(e,i)}(${n}, ${r})`})}kn.usePattern=OTt;function $Tt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,oi._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:uQ.Type.Num},s),t.if((0,oi.not)(s),a)})}}kn.validateArray=$Tt;function MTt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,uQ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,oi._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,oi.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}kn.validateUnion=MTt;Object.defineProperty(Yd,"__esModule",{value:!0});Yd.validateKeywordUsage=Yd.validSchemaType=Yd.funcKeywordCode=Yd.macroKeywordCode=void 0;const Oa=Pn,Nv=qh,LTt=kn,FTt=vk;function jTt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=Cke(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Oa.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Yd.macroKeywordCode=jTt;function BTt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;zTt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=Cke(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Sfe(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Sfe(e),g(()=>UTt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Oa._)`await `),v=>r.assign(f,!1).if((0,Oa._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Oa._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Oa._)`${c}.errors`;return r.assign(y,null),m(Oa.nil),y}function m(y=t.async?(0,Oa._)`await `:Oa.nil){const v=u.opts.passContext?Nv.default.this:Nv.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Oa._)`${y}${(0,LTt.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Oa.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Yd.funcKeywordCode=BTt;function Sfe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Oa._)`${r.parentData}[${r.parentDataProperty}]`))}function UTt(e,t){const{gen:n}=e;n.if((0,Oa._)`Array.isArray(${t})`,()=>{n.assign(Nv.default.vErrors,(0,Oa._)`${Nv.default.vErrors} === null ? ${t} : ${Nv.default.vErrors}.concat(${t})`).assign(Nv.default.errors,(0,Oa._)`${Nv.default.vErrors}.length`),(0,FTt.extendErrors)(e)},()=>e.error())}function zTt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Cke(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Oa.stringify)(n)})}function VTt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Yd.validSchemaType=VTt;function HTt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Yd.validateKeywordUsage=HTt;var g0={};Object.defineProperty(g0,"__esModule",{value:!0});g0.extendSubschemaMode=g0.extendSubschemaData=g0.getSubschema=void 0;const zd=Pn,Ike=wt;function qTt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,zd._)`${e.schemaPath}${(0,zd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,zd._)`${e.schemaPath}${(0,zd.getProperty)(t)}${(0,zd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Ike.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}g0.getSubschema=qTt;function WTt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,zd._)`${t.data}${(0,zd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,zd.str)`${l}${(0,Ike.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,zd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof zd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}g0.extendSubschemaData=WTt;function GTt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}g0.extendSubschemaMode=GTt;var Ao={},kke={exports:{}},Wg=kke.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};oD(t,r,i,e,"",e)};Wg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Wg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Wg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Wg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function oD(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Wg.arrayKeywords)for(var d=0;d<f.length;d++)oD(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Wg.propsKeywords){if(f&&typeof f=="object")for(var h in f)oD(e,t,n,f[h],i+"/"+c+"/"+YTt(h),s,i,c,r,h)}else(c in Wg.keywords||e.allKeys&&!(c in Wg.skipKeywords))&&oD(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function YTt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var KTt=kke.exports;Object.defineProperty(Ao,"__esModule",{value:!0});Ao.getSchemaRefs=Ao.resolveUrl=Ao.normalizeId=Ao._getFullPath=Ao.getFullPath=Ao.inlineRef=void 0;const XTt=wt,QTt=SY,JTt=KTt,ZTt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function eAt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Uz(e):t?Rke(e)<=t:!1}Ao.inlineRef=eAt;const tAt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Uz(e){for(const t in e){if(tAt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(Uz)||typeof n=="object"&&Uz(n))return!0}return!1}function Rke(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!ZTt.has(n)&&(typeof e[n]=="object"&&(0,XTt.eachItem)(e[n],r=>t+=Rke(r)),t===1/0))return 1/0}return t}function Nke(e,t="",n){n!==!1&&(t=Hw(t));const r=e.parse(t);return Pke(e,r)}Ao.getFullPath=Nke;function Pke(e,t){return e.serialize(t).split("#")[0]+"#"}Ao._getFullPath=Pke;const nAt=/#\/?$/;function Hw(e){return e?e.replace(nAt,""):""}Ao.normalizeId=Hw;function rAt(e,t,n){return n=Hw(n),e.resolve(t,n)}Ao.resolveUrl=rAt;const iAt=/^[a-z_][-a-z0-9._]*$/i;function sAt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Hw(e[n]||t),s={"":i},o=Nke(r,i,!1),a={},u=new Set;return JTt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=Hw(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==Hw(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!iAt.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!QTt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ao.getSchemaRefs=sAt;Object.defineProperty(Df,"__esModule",{value:!0});Df.getData=Df.KeywordCxt=Df.validateFunctionCode=void 0;const Dke=VE,Tfe=Cs,fQ=Jp,l$=Cs,oAt=B6,dC=Yd,Uj=g0,Pt=Pn,rn=qh,aAt=Ao,Zp=wt,yT=vk;function uAt(e){if(Mke(e)&&(Lke(e),$ke(e))){fAt(e);return}Oke(e,()=>(0,Dke.topBoolOrEmptySchema)(e))}Df.validateFunctionCode=uAt;function Oke({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Pt._)`${rn.default.data}, ${rn.default.valCxt}`,r.$async,()=>{e.code((0,Pt._)`"use strict"; ${Afe(n,i)}`),cAt(e,i),e.code(s)}):e.func(t,(0,Pt._)`${rn.default.data}, ${lAt(i)}`,r.$async,()=>e.code(Afe(n,i)).code(s))}function lAt(e){return(0,Pt._)`{${rn.default.instancePath}="", ${rn.default.parentData}, ${rn.default.parentDataProperty}, ${rn.default.rootData}=${rn.default.data}${e.dynamicRef?(0,Pt._)`, ${rn.default.dynamicAnchors}={}`:Pt.nil}}={}`}function cAt(e,t){e.if(rn.default.valCxt,()=>{e.var(rn.default.instancePath,(0,Pt._)`${rn.default.valCxt}.${rn.default.instancePath}`),e.var(rn.default.parentData,(0,Pt._)`${rn.default.valCxt}.${rn.default.parentData}`),e.var(rn.default.parentDataProperty,(0,Pt._)`${rn.default.valCxt}.${rn.default.parentDataProperty}`),e.var(rn.default.rootData,(0,Pt._)`${rn.default.valCxt}.${rn.default.rootData}`),t.dynamicRef&&e.var(rn.default.dynamicAnchors,(0,Pt._)`${rn.default.valCxt}.${rn.default.dynamicAnchors}`)},()=>{e.var(rn.default.instancePath,(0,Pt._)`""`),e.var(rn.default.parentData,(0,Pt._)`undefined`),e.var(rn.default.parentDataProperty,(0,Pt._)`undefined`),e.var(rn.default.rootData,rn.default.data),t.dynamicRef&&e.var(rn.default.dynamicAnchors,(0,Pt._)`{}`)})}function fAt(e){const{schema:t,opts:n,gen:r}=e;Oke(e,()=>{n.$comment&&t.$comment&&jke(e),gAt(e),r.let(rn.default.vErrors,null),r.let(rn.default.errors,0),n.unevaluated&&dAt(e),Fke(e),bAt(e)})}function dAt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Pt._)`${n}.evaluated`),t.if((0,Pt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Pt._)`${e.evaluated}.props`,(0,Pt._)`undefined`)),t.if((0,Pt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Pt._)`${e.evaluated}.items`,(0,Pt._)`undefined`))}function Afe(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Pt._)`/*# sourceURL=${n} */`:Pt.nil}function hAt(e,t){if(Mke(e)&&(Lke(e),$ke(e))){pAt(e,t);return}(0,Dke.boolOrEmptySchema)(e,t)}function $ke({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function Mke(e){return typeof e.schema!="boolean"}function pAt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&jke(e),yAt(e),vAt(e);const s=r.const("_errs",rn.default.errors);Fke(e,s),r.var(t,(0,Pt._)`${s} === ${rn.default.errors}`)}function Lke(e){(0,Zp.checkUnknownRules)(e),mAt(e)}function Fke(e,t){if(e.opts.jtd)return Cfe(e,[],!1,t);const n=(0,Tfe.getSchemaTypes)(e.schema),r=(0,Tfe.coerceAndCheckDataType)(e,n);Cfe(e,n,!r,t)}function mAt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Zp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function gAt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Zp.checkStrictMode)(e,"default is ignored in the schema root")}function yAt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,aAt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function vAt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function jke({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Pt._)`${rn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Pt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Pt._)`${rn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function bAt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Pt._)`${rn.default.errors} === 0`,()=>t.return(rn.default.data),()=>t.throw((0,Pt._)`new ${i}(${rn.default.vErrors})`)):(t.assign((0,Pt._)`${r}.errors`,rn.default.vErrors),s.unevaluated&&_At(e),t.return((0,Pt._)`${rn.default.errors} === 0`))}function _At({gen:e,evaluated:t,props:n,items:r}){n instanceof Pt.Name&&e.assign((0,Pt._)`${t}.props`,n),r instanceof Pt.Name&&e.assign((0,Pt._)`${t}.items`,r)}function Cfe(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Zp.schemaHasRulesButRef)(s,c))){i.block(()=>zke(e,"$ref",c.all.$ref.definition));return}u.jtd||wAt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,fQ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,l$.checkDataType)(d.type,o,u.strictNumbers)),Ife(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,l$.reportTypeError)(e)),i.endIf()):Ife(e,d),a||i.if((0,Pt._)`${rn.default.errors} === ${r||0}`))}}function Ife(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,oAt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,fQ.shouldUseRule)(r,s)&&zke(e,s.keyword,s.definition,t.type)})}function wAt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(EAt(e,t),e.opts.allowUnionTypes||xAt(e,t),SAt(e,e.dataTypes))}function EAt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{Bke(e.dataTypes,n)||dQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),AAt(e,t)}}function xAt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&dQ(e,"use allowUnionTypes to allow union type keyword")}function SAt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,fQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>TAt(t,o))&&dQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function TAt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Bke(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function AAt(e,t){const n=[];for(const r of e.dataTypes)Bke(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function dQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Zp.checkStrictMode)(e,t,e.opts.strictTypes)}class Uke{constructor(t,n,r){if((0,dC.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Zp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",Vke(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,dC.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",rn.default.errors))}result(t,n,r){this.failResult((0,Pt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Pt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Pt._)`${n} !== undefined && (${(0,Pt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?yT.reportExtraError:yT.reportError)(this,this.def.error,n)}$dataError(){(0,yT.reportError)(this,this.def.$dataError||yT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,yT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Pt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Pt.nil,n=Pt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Pt.or)((0,Pt._)`${i} === undefined`,n)),t!==Pt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Pt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Pt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Pt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Pt._)`${(0,l$.checkDataTypes)(u,n,s.opts.strictNumbers,l$.DataType.Wrong)}`}return Pt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Pt._)`!${u}(${n})`}return Pt.nil}}subschema(t,n){const r=(0,Uj.getSubschema)(this.it,t);(0,Uj.extendSubschemaData)(r,this.it,t),(0,Uj.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return hAt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Zp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Zp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Pt.Name)),!0}}Df.KeywordCxt=Uke;function zke(e,t,n,r){const i=new Uke(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,dC.funcKeywordCode)(i,n):"macro"in n?(0,dC.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,dC.funcKeywordCode)(i,n)}const CAt=/^\/(?:[^~]|~0|~1)*$/,IAt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Vke(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return rn.default.rootData;if(e[0]==="/"){if(!CAt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=rn.default.rootData}else{const l=IAt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Pt._)`${s}${(0,Pt.getProperty)((0,Zp.unescapeJsonPointer)(l))}`,o=(0,Pt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Df.getData=Vke;var bk={};Object.defineProperty(bk,"__esModule",{value:!0});class kAt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}bk.default=kAt;var lS={};Object.defineProperty(lS,"__esModule",{value:!0});const zj=Ao;class RAt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,zj.resolveUrl)(t,n,r),this.missingSchema=(0,zj.normalizeId)((0,zj.getFullPath)(t,this.missingRef))}}lS.default=RAt;var Au={};Object.defineProperty(Au,"__esModule",{value:!0});Au.resolveSchema=Au.getCompilingSchema=Au.resolveRef=Au.compileSchema=Au.SchemaEnv=void 0;const Qc=Pn,NAt=bk,ev=qh,_f=Ao,kfe=wt,PAt=Df;class U6{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,_f.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Au.SchemaEnv=U6;function hQ(e){const t=Hke.call(this,e);if(t)return t;const n=(0,_f.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Qc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:NAt.default,code:(0,Qc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:ev.default.data,parentData:ev.default.parentData,parentDataProperty:ev.default.parentDataProperty,dataNames:[ev.default.data],dataPathArr:[Qc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Qc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Qc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Qc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,PAt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(ev.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${ev.default.self}`,`${ev.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Qc.Name?void 0:p,items:m instanceof Qc.Name?void 0:m,dynamicProps:p instanceof Qc.Name,dynamicItems:m instanceof Qc.Name},h.source&&(h.source.evaluated=(0,Qc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Au.compileSchema=hQ;function DAt(e,t,n){var r;n=(0,_f.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=MAt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new U6({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=OAt.call(this,s)}Au.resolveRef=DAt;function OAt(e){return(0,_f.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:hQ.call(this,e)}function Hke(e){for(const t of this._compilations)if($At(t,e))return t}Au.getCompilingSchema=Hke;function $At(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function MAt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||z6.call(this,e,t)}function z6(e,t){const n=this.opts.uriResolver.parse(t),r=(0,_f._getFullPath)(this.opts.uriResolver,n);let i=(0,_f.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return Vj.call(this,n,e);const s=(0,_f.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=z6.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:Vj.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||hQ.call(this,o),s===(0,_f.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,_f.resolveUrl)(this.opts.uriResolver,i,l)),new U6({schema:a,schemaId:u,root:e,baseId:i})}return Vj.call(this,n,o)}}Au.resolveSchema=z6;const LAt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Vj(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,kfe.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!LAt.has(a)&&l&&(t=(0,_f.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,kfe.schemaHasRulesButRef)(n,this.RULES)){const a=(0,_f.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=z6.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new U6({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const FAt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",jAt="Meta-schema for $data reference (JSON AnySchema extension proposal)",BAt="object",UAt=["$data"],zAt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},VAt=!1,HAt={$id:FAt,description:jAt,type:BAt,required:UAt,properties:zAt,additionalProperties:VAt};var pQ={},zz={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(to,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Te=ee.length-1,Se=1;Se<Te;++Se)ee[Se]=ee[Se].slice(1,-1);return ee[Te]=ee[Te].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Te in ee)ae[Te]=ee[Te];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Te=r(ae,"[A-Fa-f]"),Se=i(i("%[EFef]"+Te+"%"+Te+Te+"%"+Te+Te)+"|"+i("%[89A-Fa-f]"+Te+"%"+Te+Te)+"|"+i("%"+Te+Te)),st="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Vt=r(st,St),Dn=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Fn=oe?"[\\uE000-\\uF8FF]":"[]",dn=r(ee,ae,"[\\-\\.\\_\\~]",Dn);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(dn,St,"[\\:]"))+"*");var rr=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Ar=i(rr+"\\."+rr+"\\."+rr+"\\."+rr),zt=i(Te+"{1,4}"),ir=i(i(zt+"\\:"+zt)+"|"+Ar),Ur=i(i(zt+"\\:")+"{6}"+ir),Qn=i("\\:\\:"+i(zt+"\\:")+"{5}"+ir),Ai=i(i(zt)+"?\\:\\:"+i(zt+"\\:")+"{4}"+ir),Hs=i(i(i(zt+"\\:")+"{0,1}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{3}"+ir),Xr=i(i(i(zt+"\\:")+"{0,2}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{2}"+ir),mo=i(i(i(zt+"\\:")+"{0,3}"+zt)+"?\\:\\:"+zt+"\\:"+ir),Mi=i(i(i(zt+"\\:")+"{0,4}"+zt)+"?\\:\\:"+ir),Li=i(i(i(zt+"\\:")+"{0,5}"+zt)+"?\\:\\:"+zt),Uo=i(i(i(zt+"\\:")+"{0,6}"+zt)+"?\\:\\:"),Ca=i([Ur,Qn,Ai,Hs,Xr,mo,Mi,Li,Uo].join("|")),qs=i(i(dn+"|"+Se)+"+");i("[vV]"+Te+"+\\."+r(dn,St,"[\\:]")+"+"),i(i(Se+"|"+r(dn,St))+"*");var Kl=i(Se+"|"+r(dn,St,"[\\:\\@]"));return i(i(Se+"|"+r(dn,St,"[\\@]"))+"+"),i(i(Kl+"|"+r("[\\/\\?]",Fn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",dn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",dn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",dn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",dn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",dn,St,"[\\:\\@\\/\\?]",Fn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",dn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",dn,St),"g"),UNRESERVED:new RegExp(dn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",dn,Vt),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+Ar+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ca+")"+i(i("\\%25|\\%(?!"+Te+"{2})")+"("+qs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Te=[],Se=!0,st=!1,St=void 0;try{for(var Vt=ee[Symbol.iterator](),Dn;!(Se=(Dn=Vt.next()).done)&&(Te.push(Dn.value),!(ae&&Te.length===ae));Se=!0);}catch(Fn){st=!0,St=Fn}finally{try{!Se&&Vt.return&&Vt.return()}finally{if(st)throw St}}return Te}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,S="-",T=/^xn--/,A=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=m-g,O=Math.floor,P=String.fromCharCode;function $(oe){throw new RangeError(I[oe])}function F(oe,ee){for(var ae=[],Te=oe.length;Te--;)ae[Te]=ee(oe[Te]);return ae}function L(oe,ee){var ae=oe.split("@"),Te="";ae.length>1&&(Te=ae[0]+"@",oe=ae[1]),oe=oe.replace(C,".");var Se=oe.split("."),st=F(Se,ee).join(".");return Te+st}function B(oe){for(var ee=[],ae=0,Te=oe.length;ae<Te;){var Se=oe.charCodeAt(ae++);if(Se>=55296&&Se<=56319&&ae<Te){var st=oe.charCodeAt(ae++);(st&64512)==56320?ee.push(((Se&1023)<<10)+(st&1023)+65536):(ee.push(Se),ae--)}else ee.push(Se)}return ee}var z=function(ee){return String.fromCodePoint.apply(String,h(ee))},q=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},D=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},U=function(ee,ae,Te){var Se=0;for(ee=Te?O(ee/b):ee>>1,ee+=O(ee/ae);ee>R*y>>1;Se+=m)ee=O(ee/R);return O(Se+(R+1)*ee/(ee+v))},W=function(ee){var ae=[],Te=ee.length,Se=0,st=E,St=w,Vt=ee.lastIndexOf(S);Vt<0&&(Vt=0);for(var Dn=0;Dn<Vt;++Dn)ee.charCodeAt(Dn)>=128&&$("not-basic"),ae.push(ee.charCodeAt(Dn));for(var Fn=Vt>0?Vt+1:0;Fn<Te;){for(var dn=Se,rr=1,Ar=m;;Ar+=m){Fn>=Te&&$("invalid-input");var zt=q(ee.charCodeAt(Fn++));(zt>=m||zt>O((p-Se)/rr))&&$("overflow"),Se+=zt*rr;var ir=Ar<=St?g:Ar>=St+y?y:Ar-St;if(zt<ir)break;var Ur=m-ir;rr>O(p/Ur)&&$("overflow"),rr*=Ur}var Qn=ae.length+1;St=U(Se-dn,Qn,dn==0),O(Se/Qn)>p-st&&$("overflow"),st+=O(Se/Qn),Se%=Qn,ae.splice(Se++,0,st)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Te=ee.length,Se=E,st=0,St=w,Vt=!0,Dn=!1,Fn=void 0;try{for(var dn=ee[Symbol.iterator](),rr;!(Vt=(rr=dn.next()).done);Vt=!0){var Ar=rr.value;Ar<128&&ae.push(P(Ar))}}catch(Oe){Dn=!0,Fn=Oe}finally{try{!Vt&&dn.return&&dn.return()}finally{if(Dn)throw Fn}}var zt=ae.length,ir=zt;for(zt&&ae.push(S);ir<Te;){var Ur=p,Qn=!0,Ai=!1,Hs=void 0;try{for(var Xr=ee[Symbol.iterator](),mo;!(Qn=(mo=Xr.next()).done);Qn=!0){var Mi=mo.value;Mi>=Se&&Mi<Ur&&(Ur=Mi)}}catch(Oe){Ai=!0,Hs=Oe}finally{try{!Qn&&Xr.return&&Xr.return()}finally{if(Ai)throw Hs}}var Li=ir+1;Ur-Se>O((p-st)/Li)&&$("overflow"),st+=(Ur-Se)*Li,Se=Ur;var Uo=!0,Ca=!1,qs=void 0;try{for(var Kl=ee[Symbol.iterator](),cd;!(Uo=(cd=Kl.next()).done);Uo=!0){var Y=cd.value;if(Y<Se&&++st>p&&$("overflow"),Y==Se){for(var se=st,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ge=se-fe,le=m-fe;ae.push(P(D(fe+ge%le,0))),se=O(ge/le)}ae.push(P(D(se,0))),St=U(st,Li,ir==zt),st=0,++ir}}}catch(Oe){Ca=!0,qs=Oe}finally{try{!Uo&&Kl.return&&Kl.return()}finally{if(Ca)throw qs}}++st,++Se}return ae.join("")},H=function(ee){return L(ee,function(ae){return T.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return L(ee,function(ae){return A.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:z},decode:W,encode:j,toASCII:G,toUnicode:H},ce={};function de(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var ee="",ae=0,Te=oe.length;ae<Te;){var Se=parseInt(oe.substr(ae+1,2),16);if(Se<128)ee+=String.fromCharCode(Se),ae+=3;else if(Se>=194&&Se<224){if(Te-ae>=6){var st=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Se&31)<<6|st&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Se>=224){if(Te-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),Vt=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Se&15)<<12|(St&63)<<6|Vt&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ye(oe,ee){function ae(Te){var Se=he(Te);return Se.match(ee.UNRESERVED)?Se:Te}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,de).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,de).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,de).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,de).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,de).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function ve(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Te=d(ae,2),Se=Te[1];return Se?Se.split(".").map(Ie).join("."):oe}function Ke(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Te=d(ae,3),Se=Te[1],st=Te[2];if(Se){for(var St=Se.toLowerCase().split("::").reverse(),Vt=d(St,2),Dn=Vt[0],Fn=Vt[1],dn=Fn?Fn.split(":").map(Ie):[],rr=Dn.split(":").map(Ie),Ar=ee.IPV4ADDRESS.test(rr[rr.length-1]),zt=Ar?7:8,ir=rr.length-zt,Ur=Array(zt),Qn=0;Qn<zt;++Qn)Ur[Qn]=dn[Qn]||rr[ir+Qn]||"";Ar&&(Ur[zt-1]=ve(Ur[zt-1],ee));var Ai=Ur.reduce(function(Li,Uo,Ca){if(!Uo||Uo==="0"){var qs=Li[Li.length-1];qs&&qs.index+qs.length===Ca?qs.length++:Li.push({index:Ca,length:1})}return Li},[]),Hs=Ai.sort(function(Li,Uo){return Uo.length-Li.length})[0],Xr=void 0;if(Hs&&Hs.length>1){var mo=Ur.slice(0,Hs.index),Mi=Ur.slice(Hs.index+Hs.length);Xr=mo.join(":")+"::"+Mi.join(":")}else Xr=Ur.join(":");return st&&(Xr+="%"+st),Xr}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,gt="".match(/(){0}/)[1]===void 0;function rt(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Te=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Se=oe.match(Ue);if(Se){gt?(ae.scheme=Se[1],ae.userinfo=Se[3],ae.host=Se[4],ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=Se[7],ae.fragment=Se[8],isNaN(ae.port)&&(ae.port=Se[5])):(ae.scheme=Se[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ae.host=oe.indexOf("//")!==-1?Se[4]:void 0,ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=oe.indexOf("?")!==-1?Se[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ae.host&&(ae.host=Ke(ve(ae.host,Te),Te)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var st=ce[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!st||!st.unicodeSupport)){if(ae.host&&(ee.domainHost||st&&st.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Te.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ye(ae,c)}else ye(ae,Te);st&&st.parse&&st.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function be(oe,ee){var ae=ee.iri!==!1?f:c,Te=[];return oe.userinfo!==void 0&&(Te.push(oe.userinfo),Te.push("@")),oe.host!==void 0&&Te.push(Ke(ve(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Se,st,St){return"["+st+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Te.push(":"),Te.push(String(oe.port))),Te.length?Te.join(""):void 0}var ke=/^\.\.?\//,ze=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Dt=/^\/?(?:.|\n)*?(?=\/|$)/;function We(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(ze))oe=oe.replace(ze,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Dt);if(ae){var Te=ae[0];oe=oe.slice(Te.length),ee.push(Te)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function me(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Te=[],Se=ce[(ee.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Se&&Se.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(Vt){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Vt}}ye(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Te.push(oe.scheme),Te.push(":"));var st=be(oe,ee);if(st!==void 0&&(ee.reference!=="suffix"&&Te.push("//"),Te.push(st),oe.path&&oe.path.charAt(0)!=="/"&&Te.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!Se||!Se.absolutePath)&&(St=We(St)),st===void 0&&(St=St.replace(/^\/\//,"/%2F")),Te.push(St)}return oe.query!==void 0&&(Te.push("?"),Te.push(oe.query)),oe.fragment!==void 0&&(Te.push("#"),Te.push(oe.fragment)),Te.join("")}function dt(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Te=arguments[3],Se={};return Te||(oe=rt(me(oe,ae),ae),ee=rt(me(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Se.scheme=ee.scheme,Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Se.path=We(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+ee.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Se.path=ee.path,Se.path=We(Se.path)),Se.query=ee.query):(Se.path=oe.path,ee.query!==void 0?Se.query=ee.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=ee.fragment,Se}function vt(oe,ee,ae){var Te=u({scheme:"null"},ae);return me(dt(rt(oe,Te),rt(ee,Te),Te,!0),Te)}function pe(oe,ee){return typeof oe=="string"?oe=me(rt(oe,ee),ee):s(oe)==="object"&&(oe=rt(me(oe,ee),ee)),oe}function Ce(oe,ee,ae){return typeof oe=="string"?oe=me(rt(oe,ae),ae):s(oe)==="object"&&(oe=me(oe,ae)),typeof ee=="string"?ee=me(rt(ee,ae),ae):s(ee)==="object"&&(ee=me(ee,ae)),oe===ee}function He(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,de)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Te=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Te?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Mn={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Sr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Ln={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Te=ee;return Te.secure=Sr(Te),Te.resourceName=(Te.path||"/")+(Te.query?"?"+Te.query:""),Te.path=void 0,Te.query=void 0,Te},serialize:function(ee,ae){if((ee.port===(Sr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Te=ee.resourceName.split("?"),Se=d(Te,2),st=Se[0],St=Se[1];ee.path=st&&st!=="/"?st:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},lr={scheme:"wss",domainHost:Ln.domainHost,parse:Ln.parse,serialize:Ln.serialize},pn={},Sn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",tr="[0-9A-Fa-f]",nr=i(i("%[EFef]"+tr+"%"+tr+tr+"%"+tr+tr)+"|"+i("%[89A-Fa-f]"+tr+"%"+tr+tr)+"|"+i("%"+tr+tr)),Bo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Oi="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Tn=r(Oi,'[\\"\\\\]'),$i="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Tr=new RegExp(Sn,"g"),ds=new RegExp(nr,"g"),rp=new RegExp(r("[^]",Bo,"[\\.]",'[\\"]',Tn),"g"),sl=new RegExp(r("[^]",Sn,$i),"g"),ld=sl;function wr(oe){var ee=he(oe);return ee.match(Tr)?ee:oe}var Ti={scheme:"mailto",parse:function(ee,ae){var Te=ee,Se=Te.to=Te.path?Te.path.split(","):[];if(Te.path=void 0,Te.query){for(var st=!1,St={},Vt=Te.query.split("&"),Dn=0,Fn=Vt.length;Dn<Fn;++Dn){var dn=Vt[Dn].split("=");switch(dn[0]){case"to":for(var rr=dn[1].split(","),Ar=0,zt=rr.length;Ar<zt;++Ar)Se.push(rr[Ar]);break;case"subject":Te.subject=ut(dn[1],ae);break;case"body":Te.body=ut(dn[1],ae);break;default:st=!0,St[ut(dn[0],ae)]=ut(dn[1],ae);break}}st&&(Te.headers=St)}Te.query=void 0;for(var ir=0,Ur=Se.length;ir<Ur;++ir){var Qn=Se[ir].split("@");if(Qn[0]=ut(Qn[0]),ae.unicodeSupport)Qn[1]=ut(Qn[1],ae).toLowerCase();else try{Qn[1]=ne.toASCII(ut(Qn[1],ae).toLowerCase())}catch(Ai){Te.error=Te.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ai}Se[ir]=Qn.join("@")}return Te},serialize:function(ee,ae){var Te=ee,Se=a(ee.to);if(Se){for(var st=0,St=Se.length;st<St;++st){var Vt=String(Se[st]),Dn=Vt.lastIndexOf("@"),Fn=Vt.slice(0,Dn).replace(ds,wr).replace(ds,o).replace(rp,de),dn=Vt.slice(Dn+1);try{dn=ae.iri?ne.toUnicode(dn):ne.toASCII(ut(dn,ae).toLowerCase())}catch(ir){Te.error=Te.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+ir}Se[st]=Fn+"@"+dn}Te.path=Se.join(",")}var rr=ee.headers=ee.headers||{};ee.subject&&(rr.subject=ee.subject),ee.body&&(rr.body=ee.body);var Ar=[];for(var zt in rr)rr[zt]!==pn[zt]&&Ar.push(zt.replace(ds,wr).replace(ds,o).replace(sl,de)+"="+rr[zt].replace(ds,wr).replace(ds,o).replace(ld,de));return Ar.length&&(Te.query=Ar.join("&")),Te}},Kr=/^([^\:]+)\:(.*)/,au={scheme:"urn",parse:function(ee,ae){var Te=ee.path&&ee.path.match(Kr),Se=ee;if(Te){var st=ae.scheme||Se.scheme||"urn",St=Te[1].toLowerCase(),Vt=Te[2],Dn=st+":"+(ae.nid||St),Fn=ce[Dn];Se.nid=St,Se.nss=Vt,Se.path=void 0,Fn&&(Se=Fn.parse(Se,ae))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(ee,ae){var Te=ae.scheme||ee.scheme||"urn",Se=ee.nid,st=Te+":"+(ae.nid||Se),St=ce[st];St&&(ee=St.serialize(ee,ae));var Vt=ee,Dn=ee.nss;return Vt.path=(Se||ae.nid)+":"+Dn,Vt}},Ta=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Aa={scheme:"urn:uuid",parse:function(ee,ae){var Te=ee;return Te.uuid=Te.nss,Te.nss=void 0,!ae.tolerant&&(!Te.uuid||!Te.uuid.match(Ta))&&(Te.error=Te.error||"UUID is not valid."),Te},serialize:function(ee,ae){var Te=ee;return Te.nss=(ee.uuid||"").toLowerCase(),Te}};ce[_t.scheme]=_t,ce[Mn.scheme]=Mn,ce[Ln.scheme]=Ln,ce[lr.scheme]=lr,ce[Ti.scheme]=Ti,ce[au.scheme]=au,ce[Aa.scheme]=Aa,n.SCHEMES=ce,n.pctEncChar=de,n.pctDecChars=he,n.parse=rt,n.removeDotSegments=We,n.serialize=me,n.resolveComponents=dt,n.resolve=vt,n.normalize=pe,n.equal=Ce,n.escapeComponent=He,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(zz,zz.exports);var qAt=zz.exports;Object.defineProperty(pQ,"__esModule",{value:!0});const qke=qAt;qke.code='require("ajv/dist/runtime/uri").default';pQ.default=qke;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Df;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Pn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=bk,i=lS,s=V1,o=Au,a=Pn,u=Ao,l=Cs,c=wt,f=HAt,d=pQ,h=(D,U)=>new RegExp(D,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(D){var U,W,j,H,G,ne,ce,de,he,ye,Ie,ve,Ke,Ue,gt,rt,be,ke,ze,ct,Dt,We,me,dt,vt;const pe=D.strict,Ce=(U=D.code)===null||U===void 0?void 0:U.optimize,He=Ce===!0||Ce===void 0?1:Ce||0,ut=(j=(W=D.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(H=D.uriResolver)!==null&&H!==void 0?H:d.default;return{strictSchema:(ne=(G=D.strictSchema)!==null&&G!==void 0?G:pe)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(ce=D.strictNumbers)!==null&&ce!==void 0?ce:pe)!==null&&de!==void 0?de:!0,strictTypes:(ye=(he=D.strictTypes)!==null&&he!==void 0?he:pe)!==null&&ye!==void 0?ye:"log",strictTuples:(ve=(Ie=D.strictTuples)!==null&&Ie!==void 0?Ie:pe)!==null&&ve!==void 0?ve:"log",strictRequired:(Ue=(Ke=D.strictRequired)!==null&&Ke!==void 0?Ke:pe)!==null&&Ue!==void 0?Ue:!1,code:D.code?{...D.code,optimize:He,regExp:ut}:{optimize:He,regExp:ut},loopRequired:(gt=D.loopRequired)!==null&&gt!==void 0?gt:v,loopEnum:(rt=D.loopEnum)!==null&&rt!==void 0?rt:v,meta:(be=D.meta)!==null&&be!==void 0?be:!0,messages:(ke=D.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(ze=D.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(ct=D.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Dt=D.addUsedSchema)!==null&&Dt!==void 0?Dt:!0,validateSchema:(We=D.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(me=D.validateFormats)!==null&&me!==void 0?me:!0,unicodeRegExp:(dt=D.unicodeRegExp)!==null&&dt!==void 0?dt:!0,int32range:(vt=D.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:_t}}class w{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,...b(U)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(U.logger);const H=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,U,"NOT SUPPORTED"),E.call(this,y,U,"DEPRECATED","warn"),this._metaOpts=I.call(this),U.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&C.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),T.call(this),U.validateFormats=H}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:W,schemaId:j}=this.opts;let H=f;j==="id"&&(H={...f},H.id=H.$id,delete H.$id),W&&U&&this.addMetaSchema(H,H[j],!1)}defaultMeta(){const{meta:U,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[W]||U:void 0}validate(U,W){let j;if(typeof U=="string"){if(j=this.getSchema(U),!j)throw new Error(`no schema with key or ref "${U}"`)}else j=this.compile(U);const H=j(W);return"$async"in j||(this.errors=j.errors),H}compile(U,W){const j=this._addSchema(U,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(U,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return H.call(this,U,W);async function H(ye,Ie){await G.call(this,ye.$schema);const ve=this._addSchema(ye,Ie);return ve.validate||ne.call(this,ve)}async function G(ye){ye&&!this.getSchema(ye)&&await H.call(this,{$ref:ye},!0)}async function ne(ye){try{return this._compileSchemaEnv(ye)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return ce.call(this,Ie),await de.call(this,Ie.missingSchema),ne.call(this,ye)}}function ce({missingSchema:ye,missingRef:Ie}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ie} cannot be resolved`)}async function de(ye){const Ie=await he.call(this,ye);this.refs[ye]||await G.call(this,Ie.$schema),this.refs[ye]||this.addSchema(Ie,ye,W)}async function he(ye){const Ie=this._loading[ye];if(Ie)return Ie;try{return await(this._loading[ye]=j(ye))}finally{delete this._loading[ye]}}}addSchema(U,W,j,H=this.opts.validateSchema){if(Array.isArray(U)){for(const ne of U)this.addSchema(ne,void 0,j,H);return this}let G;if(typeof U=="object"){const{schemaId:ne}=this.opts;if(G=U[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(U,j,W,H,!0),this}addMetaSchema(U,W,j=this.opts.validateSchema){return this.addSchema(U,W,!0,j),this}validateSchema(U,W){if(typeof U=="boolean")return!0;let j;if(j=U.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const H=this.validate(j,U);if(!H&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return H}getSchema(U){let W;for(;typeof(W=S.call(this,U))=="string";)U=W;if(W===void 0){const{schemaId:j}=this.opts,H=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,H,U),!W)return;this.refs[U]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,U);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const W=U;this._cache.delete(W);let j=U[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const W of U)this.addKeyword(W);return this}addKeyword(U,W){let j;if(typeof U=="string")j=U,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof U=="object"&&W===void 0){if(W=U,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const H={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,H.type.length===0?G=>F.call(this,G,H):G=>H.type.forEach(ne=>F.call(this,G,H,ne))),this}getKeyword(U){const W=this.RULES.all[U];return typeof W=="object"?W.definition:!!W}removeKeyword(U){const{RULES:W}=this;delete W.keywords[U],delete W.all[U];for(const j of W.rules){const H=j.rules.findIndex(G=>G.keyword===U);H>=0&&j.rules.splice(H,1)}return this}addFormat(U,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[U]=W,this}errorsText(U=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!U||U.length===0?"No errors":U.map(H=>`${j}${H.instancePath} ${H.message}`).reduce((H,G)=>H+W+G)}$dataMetaSchema(U,W){const j=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const H of W){const G=H.split("/").slice(1);let ne=U;for(const ce of G)ne=ne[ce];for(const ce in j){const de=j[ce];if(typeof de!="object")continue;const{$data:he}=de.definition,ye=ne[ce];he&&ye&&(ne[ce]=q(ye))}}return U}_removeAllSchemas(U,W){for(const j in U){const H=U[j];(!W||W.test(j))&&(typeof H=="string"?delete U[j]:H&&!H.meta&&(this._cache.delete(H.schema),delete U[j]))}}_addSchema(U,W,j,H=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:ce}=this.opts;if(typeof U=="object")ne=U[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(U);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const he=u.getSchemaRefs.call(this,U,j);return de=new o.SchemaEnv({schema:U,schemaId:ce,meta:W,baseId:j,localRefs:he}),this._cache.set(de.schema,de),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),H&&this.validateSchema(U,!0),de}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(D,U,W,j="error"){for(const H in D){const G=H;G in U&&this.logger[j](`${W}: option ${H}. ${D[G]}`)}}function S(D){return D=(0,u.normalizeId)(D),this.schemas[D]||this.refs[D]}function T(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const U in D)this.addSchema(D[U],U)}function A(){for(const D in this.opts.formats){const U=this.opts.formats[D];U&&this.addFormat(D,U)}}function C(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in D){const W=D[U];W.keyword||(W.keyword=U),this.addKeyword(W)}}function I(){const D={...this.opts};for(const U of p)delete D[U];return D}const R={log(){},warn(){},error(){}};function O(D){if(D===!1)return R;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function $(D,U){const{RULES:W}=this;if((0,c.eachItem)(D,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!P.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function F(D,U,W){var j;const H=U==null?void 0:U.post;if(W&&H)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=H?G.post:G.rules.find(({type:de})=>de===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[D]=!0,!U)return;const ce={keyword:D,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?L.call(this,ne,ce,U.before):ne.rules.push(ce),G.all[D]=ce,(j=U.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function L(D,U,W){const j=D.rules.findIndex(H=>H.keyword===W);j>=0?D.rules.splice(j,0,U):(D.rules.push(U),this.logger.warn(`rule ${W} is not defined`))}function B(D){let{metaSchema:U}=D;U!==void 0&&(D.$data&&this.opts.$data&&(U=q(U)),D.validateSchema=this.compile(U,!0))}const z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function q(D){return{anyOf:[D,z]}}})(hke);var mQ={},gQ={},yQ={};Object.defineProperty(yQ,"__esModule",{value:!0});const WAt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};yQ.default=WAt;var H1={};Object.defineProperty(H1,"__esModule",{value:!0});H1.callRef=H1.getValidate=void 0;const GAt=lS,Rfe=kn,mu=Pn,v_=qh,Nfe=Au,DN=wt,YAt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Nfe.resolveRef.call(u,l,i,n);if(c===void 0)throw new GAt.default(r.opts.uriResolver,i,n);if(c instanceof Nfe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return aD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return aD(e,(0,mu._)`${p}.validate`,l,l.$async)}function d(p){const m=Wke(e,p);aD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,mu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:mu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function Wke(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,mu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}H1.getValidate=Wke;function aD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?v_.default.this:mu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,mu._)`await ${(0,Rfe.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,mu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Rfe.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,mu._)`${p}.errors`;i.assign(v_.default.vErrors,(0,mu._)`${v_.default.vErrors} === null ? ${m} : ${v_.default.vErrors}.concat(${m})`),i.assign(v_.default.errors,(0,mu._)`${v_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=DN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,mu._)`${p}.evaluated.props`);s.props=DN.mergeEvaluated.props(i,y,s.props,mu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=DN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,mu._)`${p}.evaluated.items`);s.items=DN.mergeEvaluated.items(i,y,s.items,mu.Name)}}}H1.callRef=aD;H1.default=YAt;Object.defineProperty(gQ,"__esModule",{value:!0});const KAt=yQ,XAt=H1,QAt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",KAt.default,XAt.default];gQ.default=QAt;var vQ={},bQ={};Object.defineProperty(bQ,"__esModule",{value:!0});const c$=Pn,hg=c$.operators,f$={maximum:{okStr:"<=",ok:hg.LTE,fail:hg.GT},minimum:{okStr:">=",ok:hg.GTE,fail:hg.LT},exclusiveMaximum:{okStr:"<",ok:hg.LT,fail:hg.GTE},exclusiveMinimum:{okStr:">",ok:hg.GT,fail:hg.LTE}},JAt={message:({keyword:e,schemaCode:t})=>(0,c$.str)`must be ${f$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,c$._)`{comparison: ${f$[e].okStr}, limit: ${t}}`},ZAt={keyword:Object.keys(f$),type:"number",schemaType:"number",$data:!0,error:JAt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,c$._)`${n} ${f$[t].fail} ${r} || isNaN(${n})`)}};bQ.default=ZAt;var _Q={};Object.defineProperty(_Q,"__esModule",{value:!0});const hC=Pn,eCt={message:({schemaCode:e})=>(0,hC.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,hC._)`{multipleOf: ${e}}`},tCt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:eCt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,hC._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,hC._)`${o} !== parseInt(${o})`;e.fail$data((0,hC._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};_Q.default=tCt;var wQ={},EQ={};Object.defineProperty(EQ,"__esModule",{value:!0});function Gke(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}EQ.default=Gke;Gke.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(wQ,"__esModule",{value:!0});const Pv=Pn,nCt=wt,rCt=EQ,iCt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Pv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Pv._)`{limit: ${e}}`},sCt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:iCt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Pv.operators.GT:Pv.operators.LT,o=i.opts.unicode===!1?(0,Pv._)`${n}.length`:(0,Pv._)`${(0,nCt.useFunc)(e.gen,rCt.default)}(${n})`;e.fail$data((0,Pv._)`${o} ${s} ${r}`)}};wQ.default=sCt;var xQ={};Object.defineProperty(xQ,"__esModule",{value:!0});const oCt=kn,d$=Pn,aCt={message:({schemaCode:e})=>(0,d$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,d$._)`{pattern: ${e}}`},uCt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:aCt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,d$._)`(new RegExp(${i}, ${o}))`:(0,oCt.usePattern)(e,r);e.fail$data((0,d$._)`!${a}.test(${t})`)}};xQ.default=uCt;var SQ={};Object.defineProperty(SQ,"__esModule",{value:!0});const pC=Pn,lCt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,pC.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,pC._)`{limit: ${e}}`},cCt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:lCt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?pC.operators.GT:pC.operators.LT;e.fail$data((0,pC._)`Object.keys(${n}).length ${i} ${r}`)}};SQ.default=cCt;var TQ={};Object.defineProperty(TQ,"__esModule",{value:!0});const vT=kn,mC=Pn,fCt=wt,dCt={message:({params:{missingProperty:e}})=>(0,mC.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,mC._)`{missingProperty: ${e}}`},hCt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:dCt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,fCt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(mC.nil,f);else for(const h of n)(0,vT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,vT.checkMissingProp)(e,n,h)),(0,vT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,vT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,vT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,mC.not)(p),()=>{e.error(),t.break()})},mC.nil)}}};TQ.default=hCt;var AQ={};Object.defineProperty(AQ,"__esModule",{value:!0});const gC=Pn,pCt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,gC.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,gC._)`{limit: ${e}}`},mCt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:pCt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?gC.operators.GT:gC.operators.LT;e.fail$data((0,gC._)`${n}.length ${i} ${r}`)}};AQ.default=mCt;var CQ={},_k={};Object.defineProperty(_k,"__esModule",{value:!0});const Yke=SY;Yke.code='require("ajv/dist/runtime/equal").default';_k.default=Yke;Object.defineProperty(CQ,"__esModule",{value:!0});const Hj=Cs,_o=Pn,gCt=wt,yCt=_k,vCt={message:({params:{i:e,j:t}})=>(0,_o.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,_o._)`{i: ${e}, j: ${t}}`},bCt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:vCt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,Hj.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,_o._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,_o._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,_o._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,Hj.checkDataTypes)(l,g,a.opts.strictNumbers,Hj.DataType.Wrong),v=t.const("indices",(0,_o._)`{}`);t.for((0,_o._)`;${p}--;`,()=>{t.let(g,(0,_o._)`${n}[${p}]`),t.if(y,(0,_o._)`continue`),l.length>1&&t.if((0,_o._)`typeof ${g} == "string"`,(0,_o._)`${g} += "_"`),t.if((0,_o._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,_o._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,_o._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,gCt.useFunc)(t,yCt.default),y=t.name("outer");t.label(y).for((0,_o._)`;${p}--;`,()=>t.for((0,_o._)`${m} = ${p}; ${m}--;`,()=>t.if((0,_o._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};CQ.default=bCt;var IQ={};Object.defineProperty(IQ,"__esModule",{value:!0});const Vz=Pn,_Ct=wt,wCt=_k,ECt={message:"must be equal to constant",params:({schemaCode:e})=>(0,Vz._)`{allowedValue: ${e}}`},xCt={keyword:"const",$data:!0,error:ECt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,Vz._)`!${(0,_Ct.useFunc)(t,wCt.default)}(${n}, ${i})`):e.fail((0,Vz._)`${s} !== ${n}`)}};IQ.default=xCt;var kQ={};Object.defineProperty(kQ,"__esModule",{value:!0});const pA=Pn,SCt=wt,TCt=_k,ACt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,pA._)`{allowedValues: ${e}}`},CCt={keyword:"enum",schemaType:"array",$data:!0,error:ACt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,SCt.useFunc)(t,TCt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,pA.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,pA._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,pA._)`${l()}(${n}, ${h}[${p}])`:(0,pA._)`${n} === ${m}`}}};kQ.default=CCt;Object.defineProperty(vQ,"__esModule",{value:!0});const ICt=bQ,kCt=_Q,RCt=wQ,NCt=xQ,PCt=SQ,DCt=TQ,OCt=AQ,$Ct=CQ,MCt=IQ,LCt=kQ,FCt=[ICt.default,kCt.default,RCt.default,NCt.default,PCt.default,DCt.default,OCt.default,$Ct.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},MCt.default,LCt.default];vQ.default=FCt;var RQ={},cS={};Object.defineProperty(cS,"__esModule",{value:!0});cS.validateAdditionalItems=void 0;const Dv=Pn,Hz=wt,jCt={message:({params:{len:e}})=>(0,Dv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Dv._)`{limit: ${e}}`},BCt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:jCt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,Hz.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}Kke(e,r)}};function Kke(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Dv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Dv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,Hz.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Dv._)`${a} <= ${t.length}`);n.if((0,Dv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:Hz.Type.Num},l),o.allErrors||n.if((0,Dv.not)(l),()=>n.break())})}}cS.validateAdditionalItems=Kke;cS.default=BCt;var NQ={},fS={};Object.defineProperty(fS,"__esModule",{value:!0});fS.validateTuple=void 0;const Pfe=Pn,uD=wt,UCt=kn,zCt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return Xke(e,"additionalItems",t);n.items=!0,!(0,uD.alwaysValidSchema)(n,t)&&e.ok((0,UCt.validateArray)(e))}};function Xke(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=uD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Pfe._)`${s}.length`);n.forEach((f,d)=>{(0,uD.alwaysValidSchema)(a,f)||(r.if((0,Pfe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,uD.checkStrictMode)(a,g,d.strictTuples)}}}fS.validateTuple=Xke;fS.default=zCt;Object.defineProperty(NQ,"__esModule",{value:!0});const VCt=fS,HCt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,VCt.validateTuple)(e,"items")};NQ.default=HCt;var PQ={};Object.defineProperty(PQ,"__esModule",{value:!0});const Dfe=Pn,qCt=wt,WCt=kn,GCt=cS,YCt={message:({params:{len:e}})=>(0,Dfe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Dfe._)`{limit: ${e}}`},KCt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:YCt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,qCt.alwaysValidSchema)(r,t)&&(i?(0,GCt.validateAdditionalItems)(e,i):e.ok((0,WCt.validateArray)(e)))}};PQ.default=KCt;var DQ={};Object.defineProperty(DQ,"__esModule",{value:!0});const oc=Pn,ON=wt,XCt={message:({params:{min:e,max:t}})=>t===void 0?(0,oc.str)`must contain at least ${e} valid item(s)`:(0,oc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,oc._)`{minContains: ${e}}`:(0,oc._)`{minContains: ${e}, maxContains: ${t}}`},QCt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:XCt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,oc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,ON.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,ON.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,ON.alwaysValidSchema)(s,n)){let m=(0,oc._)`${c} >= ${o}`;a!==void 0&&(m=(0,oc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,oc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:ON.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,oc._)`${m}++`),a===void 0?t.if((0,oc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,oc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,oc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};DQ.default=QCt;var Qke={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Pn,n=wt,r=kn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(Qke);var OQ={};Object.defineProperty(OQ,"__esModule",{value:!0});const Jke=Pn,JCt=wt,ZCt={message:"property name must be valid",params:({params:e})=>(0,Jke._)`{propertyName: ${e.propertyName}}`},e2t={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:ZCt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,JCt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,Jke.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};OQ.default=e2t;var V6={};Object.defineProperty(V6,"__esModule",{value:!0});const $N=kn,nf=Pn,t2t=qh,MN=wt,n2t={message:"must NOT have additional properties",params:({params:e})=>(0,nf._)`{additionalProperty: ${e.additionalProperty}}`},r2t={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:n2t,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,MN.alwaysValidSchema)(o,n))return;const l=(0,$N.allSchemaProperties)(r.properties),c=(0,$N.allSchemaProperties)(r.patternProperties);f(),e.ok((0,nf._)`${s} === ${t2t.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,MN.schemaRefOrVal)(o,r.properties,"properties");y=(0,$N.isOwnProperty)(t,v,g)}else l.length?y=(0,nf.or)(...l.map(v=>(0,nf._)`${g} === ${v}`)):y=nf.nil;return c.length&&(y=(0,nf.or)(y,...c.map(v=>(0,nf._)`${(0,$N.usePattern)(e,v)}.test(${g})`))),(0,nf.not)(y)}function h(g){t.code((0,nf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,MN.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,nf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,nf.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:MN.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};V6.default=r2t;var $Q={};Object.defineProperty($Q,"__esModule",{value:!0});const i2t=Df,Ofe=kn,qj=wt,$fe=V6,s2t={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&$fe.default.code(new i2t.KeywordCxt(s,$fe.default,"additionalProperties"));const o=(0,Ofe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=qj.mergeEvaluated.props(t,(0,qj.toHash)(o),s.props));const a=o.filter(f=>!(0,qj.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Ofe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};$Q.default=s2t;var MQ={};Object.defineProperty(MQ,"__esModule",{value:!0});const Mfe=kn,LN=Pn,Lfe=wt,Ffe=wt,o2t={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Mfe.allSchemaProperties)(n),u=a.filter(m=>(0,Lfe.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof LN.Name)&&(s.props=(0,Ffe.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Lfe.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,LN._)`${(0,Mfe.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Ffe.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,LN._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,LN.not)(c),()=>t.break())})})}}};MQ.default=o2t;var LQ={};Object.defineProperty(LQ,"__esModule",{value:!0});const a2t=wt,u2t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,a2t.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};LQ.default=u2t;var FQ={};Object.defineProperty(FQ,"__esModule",{value:!0});const l2t=kn,c2t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:l2t.validateUnion,error:{message:"must match a schema in anyOf"}};FQ.default=c2t;var jQ={};Object.defineProperty(jQ,"__esModule",{value:!0});const lD=Pn,f2t=wt,d2t={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,lD._)`{passingSchemas: ${e.passing}}`},h2t={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:d2t,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,f2t.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,lD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,lD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,lD.Name)})})}}};jQ.default=h2t;var BQ={};Object.defineProperty(BQ,"__esModule",{value:!0});const p2t=wt,m2t={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,p2t.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};BQ.default=m2t;var UQ={};Object.defineProperty(UQ,"__esModule",{value:!0});const h$=Pn,Zke=wt,g2t={message:({params:e})=>(0,h$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,h$._)`{failingKeyword: ${e.ifClause}}`},y2t={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:g2t,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,Zke.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=jfe(r,"then"),s=jfe(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,h$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,h$._)`${c}`):e.setParams({ifClause:c})}}}};function jfe(e,t){const n=e.schema[t];return n!==void 0&&!(0,Zke.alwaysValidSchema)(e,n)}UQ.default=y2t;var zQ={};Object.defineProperty(zQ,"__esModule",{value:!0});const v2t=wt,b2t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,v2t.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};zQ.default=b2t;Object.defineProperty(RQ,"__esModule",{value:!0});const _2t=cS,w2t=NQ,E2t=fS,x2t=PQ,S2t=DQ,T2t=Qke,A2t=OQ,C2t=V6,I2t=$Q,k2t=MQ,R2t=LQ,N2t=FQ,P2t=jQ,D2t=BQ,O2t=UQ,$2t=zQ;function M2t(e=!1){const t=[R2t.default,N2t.default,P2t.default,D2t.default,O2t.default,$2t.default,A2t.default,C2t.default,T2t.default,I2t.default,k2t.default];return e?t.push(w2t.default,x2t.default):t.push(_2t.default,E2t.default),t.push(S2t.default),t}RQ.default=M2t;var VQ={},HQ={};Object.defineProperty(HQ,"__esModule",{value:!0});const es=Pn,L2t={message:({schemaCode:e})=>(0,es.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,es._)`{format: ${e}}`},F2t={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:L2t,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,es._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,es._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,es._)`${m}.type || "string"`).assign(y,(0,es._)`${m}.validate`),()=>n.assign(g,(0,es._)`"string"`).assign(y,m)),e.fail$data((0,es.or)(v(),b()));function v(){return u.strictSchema===!1?es.nil:(0,es._)`${o} && !${y}`}function b(){const w=c.$async?(0,es._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,es._)`${y}(${r})`,E=(0,es._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,es._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const S=E instanceof RegExp?(0,es.regexpCode)(E):u.code.formats?(0,es._)`${u.code.formats}${(0,es.getProperty)(s)}`:void 0,T=n.scopeValue("formats",{key:s,ref:E,code:S});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,es._)`${T}.validate`]:["string",E,T]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,es._)`await ${y}(${r})`}return typeof g=="function"?(0,es._)`${y}(${r})`:(0,es._)`${y}.test(${r})`}}}};HQ.default=F2t;Object.defineProperty(VQ,"__esModule",{value:!0});const j2t=HQ,B2t=[j2t.default];VQ.default=B2t;var HE={};Object.defineProperty(HE,"__esModule",{value:!0});HE.contentVocabulary=HE.metadataVocabulary=void 0;HE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];HE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(mQ,"__esModule",{value:!0});const U2t=gQ,z2t=vQ,V2t=RQ,H2t=VQ,Bfe=HE,q2t=[U2t.default,z2t.default,(0,V2t.default)(),H2t.default,Bfe.metadataVocabulary,Bfe.contentVocabulary];mQ.default=q2t;var qQ={},H6={};Object.defineProperty(H6,"__esModule",{value:!0});H6.DiscrError=void 0;var Ufe;(function(e){e.Tag="tag",e.Mapping="mapping"})(Ufe||(H6.DiscrError=Ufe={}));Object.defineProperty(qQ,"__esModule",{value:!0});const F_=Pn,qz=H6,zfe=Au,W2t=lS,G2t=wt,Y2t={message:({params:{discrError:e,tagName:t}})=>e===qz.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,F_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},K2t={keyword:"discriminator",type:"object",schemaType:"object",error:Y2t,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,F_._)`${n}${(0,F_.getProperty)(a)}`);t.if((0,F_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:qz.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,F_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:qz.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,F_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,G2t.schemaHasRulesButRef)(E,s.self.RULES)){const T=E.$ref;if(E=zfe.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,T),E instanceof zfe.SchemaEnv&&(E=E.schema),E===void 0)throw new W2t.default(s.opts.uriResolver,s.baseId,T)}const S=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const S of w.enum)b(S,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};qQ.default=K2t;const X2t="http://json-schema.org/draft-07/schema#",Q2t="http://json-schema.org/draft-07/schema#",J2t="Core schema meta-schema",Z2t={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},eIt=["object","boolean"],tIt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},nIt={$schema:X2t,$id:Q2t,title:J2t,definitions:Z2t,type:eIt,properties:tIt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=hke,r=mQ,i=qQ,s=nIt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Df;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Pn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=bk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=lS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(Lz,Lz.exports);var rIt=Lz.exports;const eRe=Hl(rIt),iIt="#/definitions/StudyConfig",sIt="http://json-schema.org/draft-07/schema#",oIt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": [       {         "label": "Europe",         "value": "Europe"       },       {         "label": "Japan",         "value": "Japan"       },       {         "label": "USA",         "value": "USA"       }     ],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  },  {    "label": "Option 3",    "value": "opt-3"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": [  {    "label": "Red",    "value": "red"  },  {    "label": "Blue",    "value": "blue"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": [      {        "label": "Man",        "value": "Man"      },      {        "label": "Woman",        "value": "Woman"      },      {        "label": "Genderqueer",        "value": "Genderqueer"      },      {        "label": "Third-gender",        "value": "Third-gender"      },      ... etc.    ]  } ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},aIt={$ref:iIt,$schema:sIt,definitions:oIt},uIt="#/definitions/GlobalConfig",lIt="http://json-schema.org/draft-07/schema#",cIt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},fIt={$ref:uIt,$schema:lIt,definitions:cIt},tRe=new eRe;tRe.addSchema(fIt);const Vfe=tRe.getSchema("#/definitions/GlobalConfig"),nRe=new eRe;nRe.addSchema(aIt);const Wj=nRe.getSchema("#/definitions/StudyConfig");function dIt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function q6(e){return e.baseComponent!==void 0}function hIt(e){const t=rQ.parse(e),n=Vfe(t),r=dIt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Vfe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function rRe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):rRe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function pIt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;q6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=TEe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return rRe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function mIt(e){let t=!1,n;try{n=rQ.parse(e),t=Wj(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=pIt(n);r=[...Wj.errors||[],...s],i=o}else r=Wj.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function iRe(){const e=qm(),{setAlertModal:t}=jh(),n=Bh();N.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Hfe=Object.prototype.hasOwnProperty;function qfe(e,t,n){for(n of e.keys())if(yC(n,t))return n}function yC(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&yC(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=qfe(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=qfe(t,i),!i)||!yC(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Hfe.call(e,n)&&++r&&!Hfe.call(t,n)||!(n in t)||!yC(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function gIt(e){var t=N.useRef(e),n=N.useRef(0);return yC(e,t.current)||(t.current=e,n.current+=1),N.useMemo(function(){return t.current},[n.current])}function yIt(e,t){return N.useEffect(e,gIt(t))}const vIt=(e,t=null)=>{const[n,r]=N.useState("idle"),[i,s]=N.useState(null),[o,a]=N.useState(null),u=N.useRef(),l=N.useRef(!1);N.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=N.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return yIt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Wfe=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],sRe=["participantId","trialId","trialOrder","responseId"];function WQ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function bIt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(gm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=q6(u)&&u.baseComponent&&n.baseComponents?EY({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function _It(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...sRe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await bIt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function wIt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=N.useState([...Wfe].filter(h=>h!=="meta")),a=xs(),{value:u,status:l,error:c}=vIt(_It,[s,r,a.storageEngine,i]),f=N.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>p[m]).join(","))].join(`
`);WQ(h,n)},[n,u]),d=N.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(_s,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(xG,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Wfe],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(CKe,{}),variant:"filled"}),_.jsx(Ec,{h:"md"}),_.jsxs(_e,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(An,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(An.Thead,{children:_.jsx(An.Tr,{children:u.header.map(h=>_.jsx(An.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(qt,{direction:"row",justify:"space-between",align:"center",children:[h,!sRe.includes(h)&&_.jsx(N0,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(KG,{size:16})})]})},h))})}),_.jsx(An.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(An.Tr,{children:u.header.map(m=>_.jsx(An.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(OI,{variant:"light",children:c.message}):null,_.jsx(Pl,{visible:l==="pending"||l==="idle"})]}),_.jsx(Ec,{h:"sm"}),_.jsx(qt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(ot,{children:d})}),_.jsx(Ec,{h:"md"}),_.jsxs(Fs,{justify:"right",children:[_.jsx(Rn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(Rn,{leftSection:_.jsx(N_e,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function EIt(){const e=ym(),{storageEngine:t}=xs(),{answers:n}=Vc(v=>v),[r,i]=N.useState(!1);N.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),iRe();const[s,o]=N.useState(),[a,u]=N.useState(""),l=e.studyMetadata.title.replace(" ","_");N.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(b),o(w)}}v()},[t]);const c=N.useCallback(async()=>{WQ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=N.useState(Math.floor(d/1e3));N.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=Cb(),[g,y]=N.useState(!1);return N.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),_.jsx(hm,{style:{height:"100%"},children:_.jsx(qt,{direction:"column",children:r||!g?_.jsx(ot,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Ya,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(ot,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(Ec,{h:"lg"}),_.jsx(hm,{children:_.jsx(Bm,{color:"blue"})})]})})})}function xIt(){var d;const e=ym(),t=qm(),n=Ty()||"Notfound",r=e.components[n],i=xY();iRe();const{storageEngine:s}=xs(),o=Bh(),{setAlertModal:a}=jh();if(N.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return _.jsx(EIt,{});if(n==="Notfound")return _.jsx(N1,{email:e.uiConfig.contactEmail});const u=q6(r)&&e.baseComponents?EY({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(Ya,{text:l}),_.jsx($O,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(SSt,{currentConfig:u}),u.type==="website"&&_.jsx(kst,{currentConfig:u}),u.type==="image"&&_.jsx(Nst,{currentConfig:u}),u.type==="react-component"&&_.jsx(xSt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(Ya,{text:l}),_.jsx($O,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function Wz(e){const[t]=WG();return _.jsx(qG,{...e,to:{pathname:e.to,search:t.toString()}})}function oRe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=oRe(o,t,n,r),r.includes(o.orderPath))break}return i}function aRe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=aRe(s,r)}}),n}function SIt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function TIt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=Cb(),u=Hm(),l=qm(),c=ym(),[f,{close:d,open:h}]=Sw(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?oRe(n,e,r,s.orderPath):-1,g=o?l===m:l===`reviewer-${e}`;return _.jsxs(Zr,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:f,offset:20,children:[_.jsx(Zr.Target,{children:_.jsx(_e,{onMouseEnter:h,onMouseLeave:d,children:_.jsx(yL,{active:g,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(_e,{children:[i&&_.jsx(_Ke,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),g?_.jsx(ot,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(ot,{size:"sm",display:"inline",children:e})]}),onClick:()=>u(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&_.jsx(Zr.Dropdown,{onMouseLeave:d,children:_.jsx(ot,{size:"sm",children:_.jsxs(_e,{children:[p.description&&_.jsxs(_e,{children:[_.jsx(ot,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(ot,{fw:400,component:"span",children:p.description})]}),p.meta&&_.jsxs(ot,{children:[_.jsx(ot,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(ot,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})})]})}function Gz({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=l1(e.components);return n&&r&&(i=SIt(l1(e.components),l1(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),_.jsx(_.Fragment,{children:i.map((o,a)=>{if(typeof o=="string")return _.jsx(TIt,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(f=>f.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const u=n==null?void 0:n.components.find(f=>typeof f!="string"&&f.orderPath===o.orderPath),l=u?gm(u).length-aRe(o,u):0,c=gm(o);return _.jsx(yL,{label:_.jsxs(_e,{style:{opacity:l>0?1:.5},children:[_.jsx(ot,{size:"sm",display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?_.jsx(vKe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(Yp,{ml:5,variant:"light",children:[l,"/",c.length]}),r&&o.interruptions&&_.jsx(Yp,{ml:5,color:"orange",variant:"light",children:(u==null?void 0:u.components.filter(f=>{var d;return typeof f=="string"&&((d=o.interruptions)==null?void 0:d.flatMap(h=>h.components).includes(f))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(_e,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(Gz,{configSequence:o,participantSequence:u,fullSequence:t,participantView:r})})},a)})})}function uRe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function lRe(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>lRe(n,`${t}-${r}`))}}function Gfe({text:e}){return _.jsx(is,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(I_e,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function AIt(){const{sequence:e,metadata:t}=Vc(f=>f),{toggleStudyBrowser:n}=jh(),r=ym(),i=Bh(),s=Cb(),o=E_e(`/${s}`),{storageEngine:a}=xs(),u=N.useMemo(()=>{let f=l1(r.sequence);return f=lRe(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=N.useState("participant");return _.jsxs(fi.Aside,{p:"0",children:[_.jsx(fi.Section,{children:_.jsxs(qt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(ot,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(Rn,{variant:"light",leftSection:_.jsx(YG,{size:14}),onClick:()=>uRe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(_y,{onClick:()=>i(n()),mt:1})]})}),_.jsx(fi.Section,{grow:!0,component:bb,p:"xs",pt:0,children:_.jsxs(ts,{value:l,onChange:c,children:[_.jsx(_e,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(ts.List,{grow:!0,children:[_.jsxs(ts.Tab,{value:"participant",children:["Participant View",_.jsx(Gfe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(ts.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Gfe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(ts.Panel,{value:"participant",children:_.jsx(Gz,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0})}),_.jsx(ts.Panel,{value:"allTrials",children:_.jsx(Gz,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1})})]})})]})}function CIt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Vc(E=>E),i=wY(),s=Bh(),{toggleShowHelpText:o,toggleStudyBrowser:a}=jh(),{storageEngine:u}=xs(),l=qm(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=N.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=Cb(),y=E_e(`/${g}`),v=N.useRef(null),[b,w]=N.useState(!1);return N.useEffect(()=>{const E=v.current;E&&w(E.scrollWidth>E.offsetWidth)},[n]),_.jsx(fi.Header,{p:"md",children:_.jsxs(Ua,{mt:-7,align:"center",children:[_.jsx(Ua.Col,{span:4,children:_.jsxs(qt,{align:"center",children:[_.jsx(Ey,{w:40,src:`${Lh}${p}`,alt:"Study Logo"}),_.jsx(Ec,{w:"md"}),_.jsx(ki,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:b?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(Ua.Col,{span:4,children:m&&_.jsx($x,{radius:"md",size:"lg",value:f})}),_.jsx(Ua.Col,{span:4,children:_.jsxs(Fs,{wrap:"nowrap",justify:"right",children:[!t&&_.jsx(is,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(Yp,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(Rn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(Eu,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[_.jsx(Eu.Target,{children:_.jsx(N0,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(TKe,{})})}),_.jsxs(Eu.Dropdown,{children:[e&&_.jsx(Eu.Item,{leftSection:_.jsx(NKe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Eu.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(IKe,{size:14}),children:"Contact"}),e&&_.jsx(Eu.Item,{leftSection:_.jsx(YG,{size:14}),onClick:()=>uRe(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function IIt(){var u;const e=(u=ym())==null?void 0:u.uiConfig.sidebar,t=ym(),n=Ty(),r=t.components[n],i=N.useMemo(()=>{var l;return r?q6(r)&&t.baseComponents?EY({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=xY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(fi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(fi.Section,{bg:"gray.3",p:"md",children:_.jsxs(ot,{c:"gray.9",children:[_.jsx(ot,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Ya,{text:o})]})}),_.jsx(fi.Section,{p:"md",children:_.jsx($O,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(fi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx($O,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function kIt(){const{showHelpText:e,config:t}=Vc(u=>u),n=Bh(),{toggleShowHelpText:r}=jh(),[i,s]=N.useState(""),[o,a]=N.useState(!0);return N.useEffect(()=>{async function u(){const l=await TY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(_s,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Ya,{text:i}):_.jsx(N1,{path:t.uiConfig.helpTextPath})})}function RIt(){const{alertModal:e}=Vc(o=>o),{setAlertModal:t}=jh(),n=Bh(),[r,i]=N.useState(e.show),s=N.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return N.useEffect(()=>i(e.show),[e.show]),_.jsx(_s,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(OI,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(yKe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(ot,{my:"md",children:e.message}),_.jsx(Fs,{w:"100%",justify:"end",children:_.jsx(Rn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function NIt(){const e=N.useRef([]),t=ym(),n=t.uiConfig.windowEventDebounceTime??100,r=Vc(d=>d.showStudyBrowser);N.useEffect(()=>{const d=yd(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=yd(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=yd(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=yd(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=yd(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=yd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=yd(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),b=yd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=yd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=xs(),o=Cb(),[a,u]=N.useState(!1),[l,c]=N.useState(!1);N.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=N.useMemo(()=>a&&r,[a,r]);return _.jsx(NEe.Provider,{value:e,children:_.jsxs(fi,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[_.jsx(IIt,{}),_.jsx(AIt,{}),_.jsx(CIt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),_.jsx(kIt,{}),_.jsx(RIt,{}),_.jsx(fi.Main,{children:_.jsx(rKe,{})})]})})}function PIt(e,t=!1){return typeof e=="number"?Yfe(e,t):Yfe(e.length,t).map(r=>r.map(i=>e[i]))}function Yfe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function cRe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=cRe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function DIt(e,t){const n=l1(e);return cRe(n,t,"root")}function fRe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&fRe(s,t,i,o)})}function OIt(e){const t=[];return fRe(e,t,"",0),t}function Kfe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return PIt(i.sort(()=>.5-Math.random()),!0)}function $It(e){const n=OIt(e.sequence).map(s=>({[s]:Kfe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=DIt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Kfe(e,o))})}),i}var MIt={VITE_BASE_PATH:"/study/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth",BASE_URL:"/study/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function LIt(e){const t=await(await fetch(`${Lh}${e}`)).text();return mIt(t)}async function W6(e,t){const n=t.configsList.find(r=>D_e(r)===e);if(n){const r=t.configs[n];return await LIt(`${r.path}`)}return null}async function FIt(e){const t={},n=e.configsList.filter(i=>MIt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>W6(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function jIt({globalConfig:e}){const t=Cb(),[n,r]=N.useState(null),i=e.configsList.includes(t);N.useEffect(()=>{W6(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=N.useState([]),[a,u]=N.useState(null),{storageEngine:l}=xs(),[c]=WG();N.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await $It(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(S=>""),v=y instanceof Response?await y.json():{ip:""},b={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},w=await l.initializeParticipantSession(t,g,n,b,m),E=await Yit(t,n,w.sequence,b,w.answers);u(E),o([{element:_.jsx(NIt,{}),children:[{path:"/",element:_.jsx(Wz,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ki,{order:2,mb:8,children:"Error loading config"}),_.jsx(HU,{issues:n.errors,type:"error"})]}):_.jsx(xIt,{})}]}])}h()},[l,n,t,c]);const f=S_e(s);let d=null;return i?s.length===0?d=_.jsx(Pl,{visible:!0}):d=f&&a?_.jsx(REe.Provider,{value:a,children:_.jsx(zrt,{store:a.store,children:f})}):_.jsx(N1,{}):d=_.jsx(N1,{}),d}var Xfe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dRe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},BIt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},GQ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(dRe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):BIt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new UIt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class UIt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zIt=function(e){const t=dRe(e);return GQ.encodeByteArray(t,!0)},p$=function(e){return zIt(e).replace(/\./g,"")},hRe=function(e){try{return GQ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pRe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VIt=()=>pRe().__FIREBASE_DEFAULTS__,HIt=()=>{if(typeof process>"u"||typeof Xfe>"u")return;const e=Xfe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},qIt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&hRe(e[1]);return t&&JSON.parse(t)},G6=()=>{try{return VIt()||HIt()||qIt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},mRe=e=>{var t,n;return(n=(t=G6())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},WIt=e=>{const t=mRe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},gRe=()=>{var e;return(e=G6())===null||e===void 0?void 0:e.config},yRe=e=>{var t;return(t=G6())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GIt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[p$(JSON.stringify(n)),p$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YIt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mo())}function KIt(){var e;const t=(e=G6())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function XIt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function QIt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JIt(){const e=Mo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ZIt(){return!KIt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YQ(){try{return typeof indexedDB=="object"}catch{return!1}}function ekt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tkt="FirebaseError";class Wh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=tkt,Object.setPrototypeOf(this,Wh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dS.prototype.create)}}class dS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?nkt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Wh(i,a,r)}}function nkt(e,t){return e.replace(rkt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const rkt=/\{\$([^}]+)}/g;function ikt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function B2(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Qfe(s)&&Qfe(o)){if(!B2(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qfe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function skt(e,t){const n=new okt(e,t);return n.subscribe.bind(n)}class okt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");akt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Gj),i.error===void 0&&(i.error=Gj),i.complete===void 0&&(i.complete=Gj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function akt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Gj(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ukt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lkt=1e3,ckt=2,fkt=4*60*60*1e3,dkt=.5;function hkt(e,t=lkt,n=ckt){const r=t*Math.pow(n,e),i=Math.round(dkt*r*(Math.random()-.5)*2);return Math.min(fkt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(e){return e&&e._delegate?e._delegate:e}class Sh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pkt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new j2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(gkt(t))try{this.getOrInitializeService({instanceIdentifier:xv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=xv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xv){return this.instances.has(t)}getOptions(t=xv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:mkt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=xv){return this.component?this.component.multipleInstances?t:xv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mkt(e){return e===xv?void 0:e}function gkt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ykt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new pkt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Wn||(Wn={}));const vkt={debug:Wn.DEBUG,verbose:Wn.VERBOSE,info:Wn.INFO,warn:Wn.WARN,error:Wn.ERROR,silent:Wn.SILENT},bkt=Wn.INFO,_kt={[Wn.DEBUG]:"log",[Wn.VERBOSE]:"log",[Wn.INFO]:"info",[Wn.WARN]:"warn",[Wn.ERROR]:"error"},wkt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=_kt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Y6{constructor(t){this.name=t,this._logLevel=bkt,this._logHandler=wkt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Wn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?vkt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Wn.DEBUG,...t),this._logHandler(this,Wn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Wn.VERBOSE,...t),this._logHandler(this,Wn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Wn.INFO,...t),this._logHandler(this,Wn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Wn.WARN,...t),this._logHandler(this,Wn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Wn.ERROR,...t),this._logHandler(this,Wn.ERROR,...t)}}const Ekt=(e,t)=>t.some(n=>e instanceof n);let Jfe,Zfe;function xkt(){return Jfe||(Jfe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Skt(){return Zfe||(Zfe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vRe=new WeakMap,Yz=new WeakMap,bRe=new WeakMap,Yj=new WeakMap,KQ=new WeakMap;function Tkt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(y0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&vRe.set(n,e)}).catch(()=>{}),KQ.set(t,e),t}function Akt(e){if(Yz.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Yz.set(e,t)}let Kz={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Yz.get(e);if(t==="objectStoreNames")return e.objectStoreNames||bRe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return y0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Ckt(e){Kz=e(Kz)}function Ikt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Kj(this),t,...n);return bRe.set(r,t.sort?t.sort():[t]),y0(r)}:Skt().includes(e)?function(...t){return e.apply(Kj(this),t),y0(vRe.get(this))}:function(...t){return y0(e.apply(Kj(this),t))}}function kkt(e){return typeof e=="function"?Ikt(e):(e instanceof IDBTransaction&&Akt(e),Ekt(e,xkt())?new Proxy(e,Kz):e)}function y0(e){if(e instanceof IDBRequest)return Tkt(e);if(Yj.has(e))return Yj.get(e);const t=kkt(e);return t!==e&&(Yj.set(e,t),KQ.set(t,e)),t}const Kj=e=>KQ.get(e);function Rkt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=y0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(y0(o.result),u.oldVersion,u.newVersion,y0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const Nkt=["get","getKey","getAll","getAllKeys","count"],Pkt=["put","add","delete","clear"],Xj=new Map;function ede(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Xj.get(t))return Xj.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Pkt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Nkt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Xj.set(t,s),s}Ckt(e=>({...e,get:(t,n,r)=>ede(t,n)||e.get(t,n,r),has:(t,n)=>!!ede(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dkt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Okt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Okt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Xz="@firebase/app",tde="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=new Y6("@firebase/app"),$kt="@firebase/app-compat",Mkt="@firebase/analytics-compat",Lkt="@firebase/analytics",Fkt="@firebase/app-check-compat",jkt="@firebase/app-check",Bkt="@firebase/auth",Ukt="@firebase/auth-compat",zkt="@firebase/database",Vkt="@firebase/database-compat",Hkt="@firebase/functions",qkt="@firebase/functions-compat",Wkt="@firebase/installations",Gkt="@firebase/installations-compat",Ykt="@firebase/messaging",Kkt="@firebase/messaging-compat",Xkt="@firebase/performance",Qkt="@firebase/performance-compat",Jkt="@firebase/remote-config",Zkt="@firebase/remote-config-compat",eRt="@firebase/storage",tRt="@firebase/storage-compat",nRt="@firebase/firestore",rRt="@firebase/vertexai-preview",iRt="@firebase/firestore-compat",sRt="firebase",oRt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz="[DEFAULT]",aRt={[Xz]:"fire-core",[$kt]:"fire-core-compat",[Lkt]:"fire-analytics",[Mkt]:"fire-analytics-compat",[jkt]:"fire-app-check",[Fkt]:"fire-app-check-compat",[Bkt]:"fire-auth",[Ukt]:"fire-auth-compat",[zkt]:"fire-rtdb",[Vkt]:"fire-rtdb-compat",[Hkt]:"fire-fn",[qkt]:"fire-fn-compat",[Wkt]:"fire-iid",[Gkt]:"fire-iid-compat",[Ykt]:"fire-fcm",[Kkt]:"fire-fcm-compat",[Xkt]:"fire-perf",[Qkt]:"fire-perf-compat",[Jkt]:"fire-rc",[Zkt]:"fire-rc-compat",[eRt]:"fire-gcs",[tRt]:"fire-gcs-compat",[nRt]:"fire-fst",[iRt]:"fire-fst-compat",[rRt]:"fire-vertex","fire-js":"fire-js",[sRt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m$=new Map,uRt=new Map,Jz=new Map;function nde(e,t){try{e.container.addComponent(t)}catch(n){q1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function km(e){const t=e.name;if(Jz.has(t))return q1.debug(`There were multiple attempts to register component ${t}.`),!1;Jz.set(t,e);for(const n of m$.values())nde(n,e);for(const n of uRt.values())nde(n,e);return!0}function hS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Kd(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lRt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},v0=new dS("app","Firebase",lRt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cRt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Sh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw v0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db=oRt;function _Re(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Qz,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw v0.create("bad-app-name",{appName:String(i)});if(n||(n=gRe()),!n)throw v0.create("no-options");const s=m$.get(i);if(s){if(B2(n,s.options)&&B2(r,s.config))return s;throw v0.create("duplicate-app",{appName:i})}const o=new ykt(i);for(const u of Jz.values())o.addComponent(u);const a=new cRt(n,r,o);return m$.set(i,a),a}function XQ(e=Qz){const t=m$.get(e);if(!t&&e===Qz&&gRe())return _Re();if(!t)throw v0.create("no-app",{appName:e});return t}function Of(e,t,n){var r;let i=(r=aRt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),q1.warn(a.join(" "));return}km(new Sh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fRt="firebase-heartbeat-database",dRt=1,U2="firebase-heartbeat-store";let Qj=null;function wRe(){return Qj||(Qj=Rkt(fRt,dRt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(U2)}catch(n){console.warn(n)}}}}).catch(e=>{throw v0.create("idb-open",{originalErrorMessage:e.message})})),Qj}async function hRt(e){try{const n=(await wRe()).transaction(U2),r=await n.objectStore(U2).get(ERe(e));return await n.done,r}catch(t){if(t instanceof Wh)q1.warn(t.message);else{const n=v0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});q1.warn(n.message)}}}async function rde(e,t){try{const r=(await wRe()).transaction(U2,"readwrite");await r.objectStore(U2).put(t,ERe(e)),await r.done}catch(n){if(n instanceof Wh)q1.warn(n.message);else{const r=v0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});q1.warn(r.message)}}}function ERe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pRt=1024,mRt=30*24*60*60*1e3;class gRt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vRt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ide();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=mRt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ide(),{heartbeatsToSend:r,unsentEntries:i}=yRt(this._heartbeatsCache.heartbeats),s=p$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function ide(){return new Date().toISOString().substring(0,10)}function yRt(e,t=pRt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),sde(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),sde(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vRt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YQ()?ekt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hRt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return rde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return rde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function sde(e){return p$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bRt(e){km(new Sh("platform-logger",t=>new Dkt(t),"PRIVATE")),km(new Sh("heartbeat",t=>new gRt(t),"PRIVATE")),Of(Xz,tde,e),Of(Xz,tde,"esm2017"),Of("fire-js","")}bRt("");function xRe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const _Rt=xRe,SRe=new dS("auth","Firebase",xRe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g$=new Y6("@firebase/auth");function wRt(e,...t){g$.logLevel<=Wn.WARN&&g$.warn(`Auth (${Db}): ${e}`,...t)}function cD(e,...t){g$.logLevel<=Wn.ERROR&&g$.error(`Auth (${Db}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(e,...t){throw JQ(e,...t)}function $f(e,...t){return JQ(e,...t)}function QQ(e,t,n){const r=Object.assign(Object.assign({},_Rt()),{[t]:n});return new dS("auth","Firebase",r).create(t,{appName:e.name})}function b0(e){return QQ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ERt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Th(e,"argument-error"),QQ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function JQ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return SRe.create(e,...t)}function sn(e,t,...n){if(!e)throw JQ(t,...n)}function Up(e){const t="INTERNAL ASSERTION FAILED: "+e;throw cD(t),new Error(t)}function Rm(e,t){e||Up(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zz(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function xRt(){return ode()==="http:"||ode()==="https:"}function ode(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SRt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xRt()||XIt()||"connection"in navigator)?navigator.onLine:!0}function TRt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(t,n){this.shortDelay=t,this.longDelay=n,Rm(n>t,"Short delay should be less than long delay!"),this.isMobile=YIt()||QIt()}get(){return SRt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZQ(e,t){Rm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TRe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Up("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Up("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Up("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ARt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CRt=new Ek(3e4,6e4);function K6(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function pS(e,t,n,r,i={}){return ARe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=wk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),TRe.fetch()(IRe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function ARe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},ARt),t);try{const i=new IRt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw FN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw FN(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw FN(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw FN(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw QQ(e,c,l);Th(e,c)}}catch(i){if(i instanceof Wh)throw i;Th(e,"network-request-failed",{message:String(i)})}}async function CRe(e,t,n,r,i={}){const s=await pS(e,t,n,r,i);return"mfaPendingCredential"in s&&Th(e,"multi-factor-auth-required",{_serverResponse:s}),s}function IRe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?ZQ(e.config,i):`${e.config.apiScheme}://${i}`}class IRt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($f(this.auth,"network-request-failed")),CRt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function FN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$f(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kRt(e,t){return pS(e,"POST","/v1/accounts:delete",t)}async function kRe(e,t){return pS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function RRt(e,t=!1){const n=ri(e),r=await n.getIdToken(t),i=eJ(r);sn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:vC(Jj(i.auth_time)),issuedAtTime:vC(Jj(i.iat)),expirationTime:vC(Jj(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Jj(e){return Number(e)*1e3}function eJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return cD("JWT malformed, contained fewer than 3 sections"),null;try{const i=hRe(n);return i?JSON.parse(i):(cD("Failed to decode base64 JWT payload"),null)}catch(i){return cD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ade(e){const t=eJ(e);return sn(t,"internal-error"),sn(typeof t.exp<"u","internal-error"),sn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z2(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Wh&&NRt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function NRt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PRt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vC(this.lastLoginAt),this.creationTime=vC(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await z2(e,kRe(n,{idToken:r}));sn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?RRe(s.providerUserInfo):[],a=ORt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new eV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function DRt(e){const t=ri(e);await y$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ORt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function RRe(e){return e.map(t=>{var{providerId:n}=t,r=kI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Rt(e,t){const n=await ARe(e,{},async()=>{const r=wk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=IRe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",TRe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function MRt(e,t){return pS(e,"POST","/v2/accounts:revokeToken",K6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){sn(t.idToken,"internal-error"),sn(typeof t.idToken<"u","internal-error"),sn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):ade(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){sn(t.length!==0,"internal-error");const n=ade(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(sn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await $Rt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new qw;return r&&(sn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(sn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(sn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qw,this.toJSON())}_performRefresh(){return Up("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(e,t){sn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class zp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=kI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new PRt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new eV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await z2(this,this.stsTokenManager.getToken(this.auth,t));return sn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return RRt(this,t)}reload(){return DRt(this)}_assign(t){this!==t&&(sn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new zp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){sn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await y$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kd(this.auth.app))return Promise.reject(b0(this.auth));const t=await this.getIdToken();return await z2(this,kRt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:T}=n;sn(b&&T,t,"internal-error");const A=qw.fromJSON(this.name,T);sn(typeof b=="string",t,"internal-error"),pg(f,t.name),pg(d,t.name),sn(typeof w=="boolean",t,"internal-error"),sn(typeof E=="boolean",t,"internal-error"),pg(h,t.name),pg(p,t.name),pg(m,t.name),pg(g,t.name),pg(y,t.name),pg(v,t.name);const C=new zp({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(C.providerData=S.map(I=>Object.assign({},I))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,r=!1){const i=new qw;i.updateFromServerResponse(n);const s=new zp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await y$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];sn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?RRe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new qw;a.updateFromIdToken(r);const u=new zp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new eV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ude=new Map;function Vp(e){Rm(e instanceof Function,"Expected a class definition");let t=ude.get(e);return t?(Rm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ude.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NRe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}NRe.type="NONE";const lde=NRe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(e,t,n){return`firebase:${e}:${t}:${n}`}class Ww{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=fD(this.userKey,i.apiKey,s),this.fullPersistenceKey=fD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?zp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Ww(Vp(lde),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Vp(lde);const o=fD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=zp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Ww(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Ww(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cde(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ORe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(PRe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(MRe(t))return"Blackberry";if(LRe(t))return"Webos";if(tJ(t))return"Safari";if((t.includes("chrome/")||DRe(t))&&!t.includes("edge/"))return"Chrome";if($Re(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function PRe(e=Mo()){return/firefox\//i.test(e)}function tJ(e=Mo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function DRe(e=Mo()){return/crios\//i.test(e)}function ORe(e=Mo()){return/iemobile/i.test(e)}function $Re(e=Mo()){return/android/i.test(e)}function MRe(e=Mo()){return/blackberry/i.test(e)}function LRe(e=Mo()){return/webos/i.test(e)}function X6(e=Mo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function LRt(e=Mo()){var t;return X6(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function FRt(){return JIt()&&document.documentMode===10}function FRe(e=Mo()){return X6(e)||$Re(e)||LRe(e)||MRe(e)||/windows phone/i.test(e)||ORe(e)}function jRt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jRe(e,t=[]){let n;switch(e){case"Browser":n=cde(Mo());break;case"Worker":n=`${cde(Mo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Db}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BRt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function URt(e,t={}){return pS(e,"GET","/v2/passwordPolicy",K6(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zRt=6;class VRt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:zRt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HRt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fde(this),this.idTokenSubscription=new fde(this),this.beforeStateQueue=new BRt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=SRe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Vp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ww.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await kRe(this,{idToken:t}),r=await zp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Kd(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return sn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await y$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=TRt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Kd(this.app))return Promise.reject(b0(this));const n=t?ri(t):null;return n&&sn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&sn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Kd(this.app)?Promise.reject(b0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Kd(this.app)?Promise.reject(b0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await URt(this),n=new VRt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new dS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await MRt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Vp(t)||this._popupRedirectResolver;sn(n,this,"argument-error"),this.redirectPersistenceManager=await Ww.create(this,[Vp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(sn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return sn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=jRe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&wRt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function xk(e){return ri(e)}class fde{constructor(t){this.auth=t,this.observer=null,this.addObserver=skt(n=>this.observer=n)}get next(){return sn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function qRt(e){nJ=e}function WRt(e){return nJ.loadJS(e)}function GRt(){return nJ.gapiScript}function YRt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KRt(e,t){const n=hS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(B2(s,t??{}))return i;Th(i,"already-initialized")}return n.initialize({options:t})}function XRt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function QRt(e,t,n){const r=xk(e);sn(r._canInitEmulator,r,"emulator-config-failed"),sn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=BRe(t),{host:o,port:a}=JRt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),ZRt()}function BRe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function JRt(e){const t=BRe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:dde(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:dde(o)}}}function dde(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function ZRt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class URe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Up("not implemented")}_getIdTokenResponse(t){return Up("not implemented")}_linkToIdToken(t,n){return Up("not implemented")}_getReauthenticationResolver(t){return Up("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gw(e,t){return CRe(e,"POST","/v1/accounts:signInWithIdp",K6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eNt="http://localhost";class W1 extends URe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new W1(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Th("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=kI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new W1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Gw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Gw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Gw(t,n)}buildRequest(){const t={requestUri:eNt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=wk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk extends rJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends Sk{constructor(){super("facebook.com")}static credential(t){return W1._fromParams({providerId:Mg.PROVIDER_ID,signInMethod:Mg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Mg.credentialFromTaggedObject(t)}static credentialFromError(t){return Mg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Mg.credential(t.oauthAccessToken)}catch{return null}}}Mg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp extends Sk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return W1._fromParams({providerId:Dp.PROVIDER_ID,signInMethod:Dp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Dp.credentialFromTaggedObject(t)}static credentialFromError(t){return Dp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Dp.credential(n,r)}catch{return null}}}Dp.GOOGLE_SIGN_IN_METHOD="google.com";Dp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends Sk{constructor(){super("github.com")}static credential(t){return W1._fromParams({providerId:Lg.PROVIDER_ID,signInMethod:Lg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Lg.credentialFromTaggedObject(t)}static credentialFromError(t){return Lg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Lg.credential(t.oauthAccessToken)}catch{return null}}}Lg.GITHUB_SIGN_IN_METHOD="github.com";Lg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg extends Sk{constructor(){super("twitter.com")}static credential(t,n){return W1._fromParams({providerId:Fg.PROVIDER_ID,signInMethod:Fg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Fg.credentialFromTaggedObject(t)}static credentialFromError(t){return Fg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Fg.credential(n,r)}catch{return null}}}Fg.TWITTER_SIGN_IN_METHOD="twitter.com";Fg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tNt(e,t){return CRe(e,"POST","/v1/accounts:signUp",K6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await zp._fromIdTokenResponse(t,r,i),o=hde(r);return new Q0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=hde(r);return new Q0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function hde(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nNt(e){var t;if(Kd(e.app))return Promise.reject(b0(e));const n=xk(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Q0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await tNt(n,{returnSecureToken:!0}),i=await Q0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v$ extends Wh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,v$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new v$(t,n,r,i)}}function zRe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?v$._fromErrorAndOperation(e,s,t,r):s})}async function rNt(e,t,n=!1){const r=await z2(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Q0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iNt(e,t,n=!1){const{auth:r}=e;if(Kd(r.app))return Promise.reject(b0(r));const i="reauthenticate";try{const s=await z2(e,zRe(r,i,t,e),n);sn(s.idToken,r,"internal-error");const o=eJ(s.idToken);sn(o,r,"internal-error");const{sub:a}=o;return sn(e.uid===a,r,"user-mismatch"),Q0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Th(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sNt(e,t,n=!1){if(Kd(e.app))return Promise.reject(b0(e));const r="signIn",i=await zRe(e,r,t),s=await Q0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function oNt(e,t,n,r){return ri(e).onIdTokenChanged(t,n,r)}function aNt(e,t,n){return ri(e).beforeAuthStateChanged(t,n)}function uNt(e,t,n,r){return ri(e).onAuthStateChanged(t,n,r)}function lNt(e){return ri(e).signOut()}const b$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VRe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(b$,"1"),this.storage.removeItem(b$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cNt(){const e=Mo();return tJ(e)||X6(e)}const fNt=1e3,dNt=10;class HRe extends VRe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=cNt()&&jRt(),this.fallbackToPolling=FRe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);FRt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,dNt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},fNt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}HRe.type="LOCAL";const hNt=HRe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qRe extends VRe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}qRe.type="SESSION";const WRe=qRe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pNt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new Q6(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await pNt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Q6.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mNt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=iJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(){return window}function gNt(e){uh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GRe(){return typeof uh().WorkerGlobalScope<"u"&&typeof uh().importScripts=="function"}async function yNt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vNt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function bNt(){return GRe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YRe="firebaseLocalStorageDb",_Nt=1,_$="firebaseLocalStorage",KRe="fbase_key";class Tk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function J6(e,t){return e.transaction([_$],t?"readwrite":"readonly").objectStore(_$)}function wNt(){const e=indexedDB.deleteDatabase(YRe);return new Tk(e).toPromise()}function tV(){const e=indexedDB.open(YRe,_Nt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(_$,{keyPath:KRe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(_$)?t(r):(r.close(),await wNt(),t(await tV()))})})}async function pde(e,t,n){const r=J6(e,!0).put({[KRe]:t,value:n});return new Tk(r).toPromise()}async function ENt(e,t){const n=J6(e,!1).get(t),r=await new Tk(n).toPromise();return r===void 0?null:r.value}function mde(e,t){const n=J6(e,!0).delete(t);return new Tk(n).toPromise()}const xNt=800,SNt=3;class XRe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await tV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>SNt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return GRe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Q6._getInstance(bNt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await yNt(),!this.activeServiceWorker)return;this.sender=new mNt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||vNt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await tV();return await pde(t,b$,"1"),await mde(t,b$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>pde(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>ENt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>mde(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=J6(i,!1).getAll();return new Tk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xNt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}XRe.type="LOCAL";const TNt=XRe;new Ek(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QRe(e,t){return t?Vp(t):(sn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sJ extends URe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Gw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Gw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Gw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function ANt(e){return sNt(e.auth,new sJ(e),e.bypassAuthState)}function CNt(e){const{auth:t,user:n}=e;return sn(n,t,"internal-error"),iNt(n,new sJ(e),e.bypassAuthState)}async function INt(e){const{auth:t,user:n}=e;return sn(n,t,"internal-error"),rNt(n,new sJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JRe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return ANt;case"linkViaPopup":case"linkViaRedirect":return INt;case"reauthViaPopup":case"reauthViaRedirect":return CNt;default:Th(this.auth,"internal-error")}}resolve(t){Rm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Rm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kNt=new Ek(2e3,1e4);async function RNt(e,t,n){if(Kd(e.app))return Promise.reject($f(e,"operation-not-supported-in-this-environment"));const r=xk(e);ERt(e,t,rJ);const i=QRe(r,n);return new t1(r,"signInViaPopup",t,i).executeNotNull()}class t1 extends JRe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,t1.currentPopupAction&&t1.currentPopupAction.cancel(),t1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return sn(t,this.auth,"internal-error"),t}async onExecution(){Rm(this.filter.length===1,"Popup operations only handle one event");const t=iJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($f(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject($f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,t1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($f(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,kNt.get())};t()}}t1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NNt="pendingRedirect",dD=new Map;class PNt extends JRe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=dD.get(this.auth._key());if(!t){try{const r=await DNt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}dD.set(this.auth._key(),t)}return this.bypassAuthState||dD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function DNt(e,t){const n=MNt(t),r=$Nt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function ONt(e,t){dD.set(e._key(),t)}function $Nt(e){return Vp(e._redirectPersistence)}function MNt(e){return fD(NNt,e.config.apiKey,e.name)}async function LNt(e,t,n=!1){if(Kd(e.app))return Promise.reject(b0(e));const r=xk(e),i=QRe(r,t),o=await new PNt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FNt=10*60*1e3;class jNt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!BNt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!ZRe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($f(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=FNt&&this.cachedEventUids.clear(),this.cachedEventUids.has(gde(t))}saveEventToCache(t){this.cachedEventUids.add(gde(t)),this.lastProcessedEventTime=Date.now()}}function gde(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function ZRe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function BNt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ZRe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UNt(e,t={}){return pS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zNt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,VNt=/^https?/;async function HNt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await UNt(e);for(const n of t)try{if(qNt(n))return}catch{}Th(e,"unauthorized-domain")}function qNt(e){const t=Zz(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!VNt.test(n))return!1;if(zNt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WNt=new Ek(3e4,6e4);function yde(){const e=uh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function GNt(e){return new Promise((t,n)=>{var r,i,s;function o(){yde(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{yde(),n($f(e,"network-request-failed"))},timeout:WNt.get()})}if(!((i=(r=uh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=uh().gapi)===null||s===void 0)&&s.load)o();else{const a=YRt("iframefcb");return uh()[a]=()=>{gapi.load?o():n($f(e,"network-request-failed"))},WRt(`${GRt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw hD=null,t})}let hD=null;function YNt(e){return hD=hD||GNt(e),hD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KNt=new Ek(5e3,15e3),XNt="__/auth/iframe",QNt="emulator/auth/iframe",JNt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZNt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ePt(e){const t=e.config;sn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ZQ(t,QNt):`https://${e.config.authDomain}/${XNt}`,r={apiKey:t.apiKey,appName:e.name,v:Db},i=ZNt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${wk(r).slice(1)}`}async function tPt(e){const t=await YNt(e),n=uh().gapi;return sn(n,e,"internal-error"),t.open({where:document.body,url:ePt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:JNt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=$f(e,"network-request-failed"),a=uh().setTimeout(()=>{s(o)},KNt.get());function u(){uh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nPt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},rPt=500,iPt=600,sPt="_blank",oPt="http://localhost";class vde{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aPt(e,t,n,r=rPt,i=iPt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},nPt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Mo().toLowerCase();n&&(a=DRe(l)?sPt:n),PRe(l)&&(t=t||oPt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(LRt(l)&&a!=="_self")return uPt(t||"",a),new vde(null);const f=window.open(t||"",a,c);sn(f,e,"popup-blocked");try{f.focus()}catch{}return new vde(f)}function uPt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lPt="__/auth/handler",cPt="emulator/auth/handler",fPt=encodeURIComponent("fac");async function bde(e,t,n,r,i,s){sn(e.config.authDomain,e,"auth-domain-config-required"),sn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Db,eventId:i};if(t instanceof rJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ikt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof Sk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${fPt}=${encodeURIComponent(u)}`:"";return`${dPt(e)}?${wk(a).slice(1)}${l}`}function dPt({config:e}){return e.emulator?ZQ(e,cPt):`https://${e.authDomain}/${lPt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="webStorageSupport";class hPt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=WRe,this._completeRedirectFn=LNt,this._overrideRedirectResult=ONt}async _openPopup(t,n,r,i){var s;Rm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await bde(t,n,r,Zz(),i);return aPt(t,o,iJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await bde(t,n,r,Zz(),i);return gNt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Rm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await tPt(t),r=new jNt(t);return n.register("authEvent",i=>(sn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Zj,{type:Zj},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Zj];o!==void 0&&n(!!o),Th(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=HNt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return FRe()||tJ()||X6()}}const eNe=hPt;var _de="@firebase/auth",wde="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pPt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){sn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mPt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gPt(e){km(new Sh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;sn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jRe(e)},l=new HRt(r,i,s,u);return XRt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),km(new Sh("auth-internal",t=>{const n=xk(t.getProvider("auth").getImmediate());return(r=>new pPt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Of(_de,wde,mPt(e)),Of(_de,wde,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yPt=5*60,vPt=yRe("authIdTokenMaxAge")||yPt;let Ede=null;const bPt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>vPt)return;const i=n==null?void 0:n.token;Ede!==i&&(Ede=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function w$(e=XQ()){const t=hS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=KRt(e,{popupRedirectResolver:eNe,persistence:[TNt,hNt,WRe]}),r=yRe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=bPt(s.toString());aNt(n,o,()=>o(n.currentUser)),oNt(n,a=>o(a))}}const i=mRe("auth");return i&&QRt(n,`http://${i}`),n}function _Pt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}qRt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=$f("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",_Pt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gPt("Browser");var wPt="firebase",EPt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Of(wPt,EPt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tNe="firebasestorage.googleapis.com",nNe="storageBucket",xPt=2*60*1e3,SPt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Wh{constructor(t,n,r=0){super(e9(t),`Firebase Storage: ${n} (${e9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Qi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return e9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xi||(Xi={}));function e9(e){return"storage/"+e}function oJ(){const e="An unknown error occurred, please check the error payload for server response.";return new Qi(Xi.UNKNOWN,e)}function TPt(e){return new Qi(Xi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function APt(e){return new Qi(Xi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function CPt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qi(Xi.UNAUTHENTICATED,e)}function IPt(){return new Qi(Xi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function kPt(e){return new Qi(Xi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function RPt(){return new Qi(Xi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NPt(){return new Qi(Xi.CANCELED,"User canceled the upload/download.")}function PPt(e){return new Qi(Xi.INVALID_URL,"Invalid URL '"+e+"'.")}function DPt(e){return new Qi(Xi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function OPt(){return new Qi(Xi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nNe+"' property when initializing the app?")}function $Pt(){return new Qi(Xi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function MPt(){return new Qi(Xi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function LPt(e){return new Qi(Xi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function nV(e){return new Qi(Xi.INVALID_ARGUMENT,e)}function rNe(){return new Qi(Xi.APP_DELETED,"The Firebase app was deleted.")}function FPt(e){return new Qi(Xi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function bC(e,t){return new Qi(Xi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function bT(e){throw new Qi(Xi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Va.makeFromUrl(t,n)}catch{return new Va(t,"")}if(r.path==="")return r;throw DPt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===tNe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],S=E.regex.exec(t);if(S){const T=S[E.indices.bucket];let A=S[E.indices.path];A||(A=""),r=new Va(T,A),E.postModify(r);break}}if(r==null)throw PPt(t);return r}}class jPt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BPt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function UPt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zPt(e){return e!==void 0}function VPt(e){return typeof e=="object"&&!Array.isArray(e)}function aJ(e){return typeof e=="string"||e instanceof String}function xde(e){return uJ()&&e instanceof Blob}function uJ(){return typeof Blob<"u"}function rV(e,t,n,r){if(r<t)throw nV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw nV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function iNe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(h1||(h1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HPt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qPt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new jN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===h1.NO_ERROR,u=s.getStatus();if(!a||HPt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===h1.ABORT;r(!1,new jN(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new jN(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());zPt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=oJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?rNe():NPt();o(u)}else{const u=RPt();o(u)}};this.canceled_?n(!1,new jN(!1,null,!0)):this.backoffId_=BPt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&UPt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function WPt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function GPt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function YPt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function KPt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function XPt(e,t,n,r,i,s,o=!0){const a=iNe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return YPt(l,t),WPt(l,n),GPt(l,s),KPt(l,r),new qPt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QPt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function JPt(...e){const t=QPt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(uJ())return new Blob(e);throw new Qi(Xi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ZPt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eDt(e){if(typeof atob>"u")throw LPt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class t9{constructor(t,n){this.data=t,this.contentType=n||null}}function tDt(e,t){switch(e){case Xd.RAW:return new t9(sNe(t));case Xd.BASE64:case Xd.BASE64URL:return new t9(oNe(e,t));case Xd.DATA_URL:return new t9(rDt(t),iDt(t))}throw oJ()}function sNe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function nDt(e){let t;try{t=decodeURIComponent(e)}catch{throw bC(Xd.DATA_URL,"Malformed data URL.")}return sNe(t)}function oNe(e,t){switch(e){case Xd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw bC(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Xd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw bC(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=eDt(t)}catch(i){throw i.message.includes("polyfill")?i:bC(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class aNe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw bC(Xd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=sDt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function rDt(e){const t=new aNe(e);return t.base64?oNe(Xd.BASE64,t.rest):nDt(t.rest)}function iDt(e){return new aNe(e).contentType}function sDt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(t,n){let r=0,i="";xde(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(xde(this.data_)){const r=this.data_,i=ZPt(r,t,n);return i===null?null:new jg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new jg(r,!0)}}static getBlob(...t){if(uJ()){const n=t.map(r=>r instanceof jg?r.data_:r);return new jg(JPt.apply(null,n))}else{const n=t.map(o=>aJ(o)?tDt(Xd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new jg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lJ(e){let t;try{t=JSON.parse(e)}catch{return null}return VPt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oDt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function aDt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function uNe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uDt(e,t){return t}class Ra{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||uDt}}let BN=null;function lDt(e){return!aJ(e)||e.length<2?e:uNe(e)}function lNe(){if(BN)return BN;const e=[];e.push(new Ra("bucket")),e.push(new Ra("generation")),e.push(new Ra("metageneration")),e.push(new Ra("name","fullPath",!0));function t(s,o){return lDt(o)}const n=new Ra("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ra("size");return i.xform=r,e.push(i),e.push(new Ra("timeCreated")),e.push(new Ra("updated")),e.push(new Ra("md5Hash",null,!0)),e.push(new Ra("cacheControl",null,!0)),e.push(new Ra("contentDisposition",null,!0)),e.push(new Ra("contentEncoding",null,!0)),e.push(new Ra("contentLanguage",null,!0)),e.push(new Ra("contentType",null,!0)),e.push(new Ra("metadata","customMetadata",!0)),BN=e,BN}function cDt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Va(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function fDt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return cDt(r,e),r}function cNe(e,t,n){const r=lJ(t);return r===null?null:fDt(e,r,n)}function dDt(e,t,n,r){const i=lJ(t);if(i===null||!aJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=Ak(d,n,r),p=iNe({alt:"media",token:l});return h+p})[0]}function hDt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sde="prefixes",Tde="items";function pDt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Sde])for(const i of n[Sde]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Va(t,s));r.prefixes.push(o)}if(n[Tde])for(const i of n[Tde]){const s=e._makeStorageReference(new Va(t,i.name));r.items.push(s)}return r}function mDt(e,t,n){const r=lJ(n);return r===null?null:pDt(e,t,r)}class Z6{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cJ(e){if(!e)throw oJ()}function gDt(e,t){function n(r,i){const s=cNe(e,i,t);return cJ(s!==null),s}return n}function yDt(e,t){function n(r,i){const s=mDt(e,t,i);return cJ(s!==null),s}return n}function vDt(e,t){function n(r,i){const s=cNe(e,i,t);return cJ(s!==null),dDt(s,i,e.host,e._protocol)}return n}function fJ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=IPt():i=CPt():n.getStatus()===402?i=APt(e.bucket):n.getStatus()===403?i=kPt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function fNe(e){const t=fJ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=TPt(e.path)),s.serverResponse=i.serverResponse,s}return n}function bDt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=Ak(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new Z6(a,u,yDt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=fJ(t),c}function _Dt(e,t,n){const r=t.fullServerUrl(),i=Ak(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new Z6(i,s,vDt(e,n),o);return a.errorHandler=fNe(t),a}function wDt(e,t){const n=t.fullServerUrl(),r=Ak(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new Z6(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=fNe(t),a}function EDt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function xDt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=EDt(null,t)),r}function SDt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=xDt(t,r,i),c=hDt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=jg.getBlob(f,r,d);if(h===null)throw $Pt();const p={name:l.fullPath},m=Ak(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new Z6(m,g,gDt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=fJ(t),v}class TDt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=h1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=h1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=h1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw bT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class ADt extends TDt{initXhr(){this.xhr_.responseType="text"}}function eF(){return new ADt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(t,n){this._service=t,n instanceof Va?this._location=n:this._location=Va.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new G1(t,n)}get root(){const t=new Va(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uNe(this._location.path)}get storage(){return this._service}get parent(){const t=oDt(this._location.path);if(t===null)return null;const n=new Va(this._location.bucket,t);return new G1(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw FPt(t)}}function CDt(e,t,n){e._throwIfRoot("uploadBytes");const r=SDt(e.storage,e._location,lNe(),new jg(t,!0),n);return e.storage.makeRequestWithTokens(r,eF).then(i=>({metadata:i,ref:e}))}function IDt(e){const t={prefixes:[],items:[]};return dNe(e,t).then(()=>t)}async function dNe(e,t,n){const i=await kDt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await dNe(e,t,i.nextPageToken)}function kDt(e,t){t!=null&&typeof t.maxResults=="number"&&rV("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=bDt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,eF)}function RDt(e){e._throwIfRoot("getDownloadURL");const t=_Dt(e.storage,e._location,lNe());return e.storage.makeRequestWithTokens(t,eF).then(n=>{if(n===null)throw MPt();return n})}function NDt(e){e._throwIfRoot("deleteObject");const t=wDt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,eF)}function PDt(e,t){const n=aDt(e._location.path,t),r=new Va(e._location.bucket,n);return new G1(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DDt(e){return/^[A-Za-z]+:\/\//.test(e)}function ODt(e,t){return new G1(e,t)}function hNe(e,t){if(e instanceof dJ){const n=e;if(n._bucket==null)throw OPt();const r=new G1(n,n._bucket);return t!=null?hNe(r,t):r}else return t!==void 0?PDt(e,t):e}function $Dt(e,t){if(t&&DDt(t)){if(e instanceof dJ)return ODt(e,t);throw nV("To use ref(service, url), the first argument must be a Storage instance.")}else return hNe(e,t)}function Ade(e,t){const n=t==null?void 0:t[nNe];return n==null?null:Va.makeFromBucketSpec(n,e)}function MDt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:GIt(i,e.app.options.projectId))}class dJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=tNe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xPt,this._maxUploadRetryTime=SPt,this._requests=new Set,i!=null?this._bucket=Va.makeFromBucketSpec(i,this._host):this._bucket=Ade(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Va.makeFromBucketSpec(this._url,t):this._bucket=Ade(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){rV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){rV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new G1(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new jPt(rNe());{const o=XPt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Cde="@firebase/storage",Ide="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pNe="storage";function n9(e,t,n){return e=ri(e),CDt(e,t,n)}function _T(e){return e=ri(e),IDt(e)}function r9(e){return e=ri(e),RDt(e)}function kde(e){return e=ri(e),NDt(e)}function ec(e,t){return e=ri(e),$Dt(e,t)}function LDt(e=XQ(),t){e=ri(e);const r=hS(e,pNe).getImmediate({identifier:t}),i=WIt("storage");return i&&FDt(r,...i),r}function FDt(e,t,n,r={}){MDt(e,t,n,r)}function jDt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new dJ(n,r,i,t,Db)}function BDt(){km(new Sh(pNe,jDt,"PUBLIC").setMultipleInstances(!0)),Of(Cde,Ide,""),Of(Cde,Ide,"esm2017")}BDt();var Rde=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var p1,mNe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,A){function C(){}C.prototype=A.prototype,T.D=A.prototype,T.prototype=new C,T.prototype.constructor=T,T.C=function(I,R,O){for(var P=Array(arguments.length-2),$=2;$<arguments.length;$++)P[$-2]=arguments[$];return A.prototype[R].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,A,C){C||(C=0);var I=Array(16);if(typeof A=="string")for(var R=0;16>R;++R)I[R]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(R=0;16>R;++R)I[R]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=T.g[0],C=T.g[1],R=T.g[2];var O=T.g[3],P=A+(O^C&(R^O))+I[0]+3614090360&4294967295;A=C+(P<<7&4294967295|P>>>25),P=O+(R^A&(C^R))+I[1]+3905402710&4294967295,O=A+(P<<12&4294967295|P>>>20),P=R+(C^O&(A^C))+I[2]+606105819&4294967295,R=O+(P<<17&4294967295|P>>>15),P=C+(A^R&(O^A))+I[3]+3250441966&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(O^C&(R^O))+I[4]+4118548399&4294967295,A=C+(P<<7&4294967295|P>>>25),P=O+(R^A&(C^R))+I[5]+1200080426&4294967295,O=A+(P<<12&4294967295|P>>>20),P=R+(C^O&(A^C))+I[6]+2821735955&4294967295,R=O+(P<<17&4294967295|P>>>15),P=C+(A^R&(O^A))+I[7]+4249261313&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(O^C&(R^O))+I[8]+1770035416&4294967295,A=C+(P<<7&4294967295|P>>>25),P=O+(R^A&(C^R))+I[9]+2336552879&4294967295,O=A+(P<<12&4294967295|P>>>20),P=R+(C^O&(A^C))+I[10]+4294925233&4294967295,R=O+(P<<17&4294967295|P>>>15),P=C+(A^R&(O^A))+I[11]+2304563134&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(O^C&(R^O))+I[12]+1804603682&4294967295,A=C+(P<<7&4294967295|P>>>25),P=O+(R^A&(C^R))+I[13]+4254626195&4294967295,O=A+(P<<12&4294967295|P>>>20),P=R+(C^O&(A^C))+I[14]+2792965006&4294967295,R=O+(P<<17&4294967295|P>>>15),P=C+(A^R&(O^A))+I[15]+1236535329&4294967295,C=R+(P<<22&4294967295|P>>>10),P=A+(R^O&(C^R))+I[1]+4129170786&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^R&(A^C))+I[6]+3225465664&4294967295,O=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(O^A))+I[11]+643717713&4294967295,R=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(R^O))+I[0]+3921069994&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^O&(C^R))+I[5]+3593408605&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^R&(A^C))+I[10]+38016083&4294967295,O=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(O^A))+I[15]+3634488961&4294967295,R=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(R^O))+I[4]+3889429448&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^O&(C^R))+I[9]+568446438&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^R&(A^C))+I[14]+3275163606&4294967295,O=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(O^A))+I[3]+4107603335&4294967295,R=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(R^O))+I[8]+1163531501&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(R^O&(C^R))+I[13]+2850285829&4294967295,A=C+(P<<5&4294967295|P>>>27),P=O+(C^R&(A^C))+I[2]+4243563512&4294967295,O=A+(P<<9&4294967295|P>>>23),P=R+(A^C&(O^A))+I[7]+1735328473&4294967295,R=O+(P<<14&4294967295|P>>>18),P=C+(O^A&(R^O))+I[12]+2368359562&4294967295,C=R+(P<<20&4294967295|P>>>12),P=A+(C^R^O)+I[5]+4294588738&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^R)+I[8]+2272392833&4294967295,O=A+(P<<11&4294967295|P>>>21),P=R+(O^A^C)+I[11]+1839030562&4294967295,R=O+(P<<16&4294967295|P>>>16),P=C+(R^O^A)+I[14]+4259657740&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^O)+I[1]+2763975236&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^R)+I[4]+1272893353&4294967295,O=A+(P<<11&4294967295|P>>>21),P=R+(O^A^C)+I[7]+4139469664&4294967295,R=O+(P<<16&4294967295|P>>>16),P=C+(R^O^A)+I[10]+3200236656&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^O)+I[13]+681279174&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^R)+I[0]+3936430074&4294967295,O=A+(P<<11&4294967295|P>>>21),P=R+(O^A^C)+I[3]+3572445317&4294967295,R=O+(P<<16&4294967295|P>>>16),P=C+(R^O^A)+I[6]+76029189&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(C^R^O)+I[9]+3654602809&4294967295,A=C+(P<<4&4294967295|P>>>28),P=O+(A^C^R)+I[12]+3873151461&4294967295,O=A+(P<<11&4294967295|P>>>21),P=R+(O^A^C)+I[15]+530742520&4294967295,R=O+(P<<16&4294967295|P>>>16),P=C+(R^O^A)+I[2]+3299628645&4294967295,C=R+(P<<23&4294967295|P>>>9),P=A+(R^(C|~O))+I[0]+4096336452&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~R))+I[7]+1126891415&4294967295,O=A+(P<<10&4294967295|P>>>22),P=R+(A^(O|~C))+I[14]+2878612391&4294967295,R=O+(P<<15&4294967295|P>>>17),P=C+(O^(R|~A))+I[5]+4237533241&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~O))+I[12]+1700485571&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~R))+I[3]+2399980690&4294967295,O=A+(P<<10&4294967295|P>>>22),P=R+(A^(O|~C))+I[10]+4293915773&4294967295,R=O+(P<<15&4294967295|P>>>17),P=C+(O^(R|~A))+I[1]+2240044497&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~O))+I[8]+1873313359&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~R))+I[15]+4264355552&4294967295,O=A+(P<<10&4294967295|P>>>22),P=R+(A^(O|~C))+I[6]+2734768916&4294967295,R=O+(P<<15&4294967295|P>>>17),P=C+(O^(R|~A))+I[13]+1309151649&4294967295,C=R+(P<<21&4294967295|P>>>11),P=A+(R^(C|~O))+I[4]+4149444226&4294967295,A=C+(P<<6&4294967295|P>>>26),P=O+(C^(A|~R))+I[11]+3174756917&4294967295,O=A+(P<<10&4294967295|P>>>22),P=R+(A^(O|~C))+I[2]+718787259&4294967295,R=O+(P<<15&4294967295|P>>>17),P=C+(O^(R|~A))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+A&4294967295,T.g[1]=T.g[1]+(R+(P<<21&4294967295|P>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+O&4294967295}r.prototype.u=function(T,A){A===void 0&&(A=T.length);for(var C=A-this.blockSize,I=this.B,R=this.h,O=0;O<A;){if(R==0)for(;O<=C;)i(this,T,O),O+=this.blockSize;if(typeof T=="string"){for(;O<A;)if(I[R++]=T.charCodeAt(O++),R==this.blockSize){i(this,I),R=0;break}}else for(;O<A;)if(I[R++]=T[O++],R==this.blockSize){i(this,I),R=0;break}}this.h=R,this.o+=A},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var A=1;A<T.length-8;++A)T[A]=0;var C=8*this.o;for(A=T.length-8;A<T.length;++A)T[A]=C&255,C/=256;for(this.u(T),T=Array(16),A=C=0;4>A;++A)for(var I=0;32>I;I+=8)T[C++]=this.g[A]>>>I&255;return T};function s(T,A){var C=a;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=A(T)}function o(T,A){this.h=A;for(var C=[],I=!0,R=T.length-1;0<=R;R--){var O=T[R]|0;I&&O==A||(C[R]=O,I=!1)}this.g=C}var a={};function u(T){return-128<=T&&128>T?s(T,function(A){return new o([A|0],0>A?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return g(l(-T));for(var A=[],C=1,I=0;T>=C;I++)A[I]=T/C|0,C*=4294967296;return new o(A,0)}function c(T,A){if(T.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(T.charAt(0)=="-")return g(c(T.substring(1),A));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(A,8)),I=f,R=0;R<T.length;R+=8){var O=Math.min(8,T.length-R),P=parseInt(T.substring(R,R+O),A);8>O?(O=l(Math.pow(A,O)),I=I.j(O).add(l(P))):(I=I.j(C),I=I.add(l(P)))}return I}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,A=1,C=0;C<this.g.length;C++){var I=this.i(C);T+=(0<=I?I:4294967296+I)*A,A*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var A=l(Math.pow(T,6)),C=this,I="";;){var R=w(C,A).g;C=y(C,R.j(A));var O=((0<C.g.length?C.g[0]:C.h)>>>0).toString(T);if(C=R,p(C))return O+I;for(;6>O.length;)O="0"+O;I=O+I}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var A=0;A<T.g.length;A++)if(T.g[A]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var A=T.g.length,C=[],I=0;I<A;I++)C[I]=~T.g[I];return new o(C,~T.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0,R=0;R<=A;R++){var O=I+(this.i(R)&65535)+(T.i(R)&65535),P=(O>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);I=P>>>16,O&=65535,P&=65535,C[R]=P<<16|O}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(T,A){return T.add(g(A))}e.j=function(T){if(p(this)||p(T))return f;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return l(this.m()*T.m());for(var A=this.g.length+T.g.length,C=[],I=0;I<2*A;I++)C[I]=0;for(I=0;I<this.g.length;I++)for(var R=0;R<T.g.length;R++){var O=this.i(I)>>>16,P=this.i(I)&65535,$=T.i(R)>>>16,F=T.i(R)&65535;C[2*I+2*R]+=P*F,v(C,2*I+2*R),C[2*I+2*R+1]+=O*F,v(C,2*I+2*R+1),C[2*I+2*R+1]+=P*$,v(C,2*I+2*R+1),C[2*I+2*R+2]+=O*$,v(C,2*I+2*R+2)}for(I=0;I<A;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=A;I<2*A;I++)C[I]=0;return new o(C,0)};function v(T,A){for(;(T[A]&65535)!=T[A];)T[A+1]+=T[A]>>>16,T[A]&=65535,A++}function b(T,A){this.g=T,this.h=A}function w(T,A){if(p(A))throw Error("division by zero");if(p(T))return new b(f,f);if(m(T))return A=w(g(T),A),new b(g(A.g),g(A.h));if(m(A))return A=w(T,g(A)),new b(g(A.g),A.h);if(30<T.g.length){if(m(T)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var C=d,I=A;0>=I.l(T);)C=E(C),I=E(I);var R=S(C,1),O=S(I,1);for(I=S(I,2),C=S(C,2);!p(I);){var P=O.add(I);0>=P.l(T)&&(R=R.add(C),O=P),I=S(I,1),C=S(C,1)}return A=y(T,R.j(A)),new b(R,A)}for(R=f;0<=T.l(A);){for(C=Math.max(1,Math.floor(T.m()/A.m())),I=Math.ceil(Math.log(C)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),O=l(C),P=O.j(A);m(P)||0<P.l(T);)C-=I,O=l(C),P=O.j(A);p(O)&&(O=d),R=R.add(O),T=y(T,P)}return new b(R,T)}e.A=function(T){return w(this,T).h},e.and=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)&T.i(I);return new o(C,this.h&T.h)},e.or=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)|T.i(I);return new o(C,this.h|T.h)},e.xor=function(T){for(var A=Math.max(this.g.length,T.g.length),C=[],I=0;I<A;I++)C[I]=this.i(I)^T.i(I);return new o(C,this.h^T.h)};function E(T){for(var A=T.g.length+1,C=[],I=0;I<A;I++)C[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(C,T.h)}function S(T,A){var C=A>>5;A%=32;for(var I=T.g.length-C,R=[],O=0;O<I;O++)R[O]=0<A?T.i(O+C)>>>A|T.i(O+C+1)<<32-A:T.i(O+C);return new o(R,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mNe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,p1=o}).apply(typeof Rde<"u"?Rde:typeof self<"u"?self:typeof window<"u"?window:{});var UN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gNe,yNe,mA,vNe,pD,iV,bNe,_Ne,wNe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,M,V){return x==Array.prototype||x==Object.prototype||(x[M]=V.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof UN=="object"&&UN];for(var M=0;M<x.length;++M){var V=x[M];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(x,M){if(M)e:{var V=r;x=x.split(".");for(var Q=0;Q<x.length-1;Q++){var we=x[Q];if(!(we in V))break e;V=V[we]}x=x[x.length-1],Q=V[x],M=M(Q),M!=Q&&M!=null&&t(V,x,{configurable:!0,writable:!0,value:M})}}function s(x,M){x instanceof String&&(x+="");var V=0,Q=!1,we={next:function(){if(!Q&&V<x.length){var De=V++;return{value:M(De,x[De]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(x){return x||function(){return s(this,function(M,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var M=typeof x;return M=M!="object"?M:x?Array.isArray(x)?"array":M:"null",M=="array"||M=="object"&&typeof x.length=="number"}function l(x){var M=typeof x;return M=="object"&&x!=null||M=="function"}function c(x,M,V){return x.call.apply(x.bind,arguments)}function f(x,M,V){if(!x)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),x.apply(M,we)}}return function(){return x.apply(M,arguments)}}function d(x,M,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,M){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),x.apply(this,Q)}}function p(x,M){function V(){}V.prototype=M.prototype,x.aa=M.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(Q,we,De){for(var ft=Array(arguments.length-2),Hr=2;Hr<arguments.length;Hr++)ft[Hr-2]=arguments[Hr];return M.prototype[we].apply(Q,ft)}}function m(x){const M=x.length;if(0<M){const V=Array(M);for(let Q=0;Q<M;Q++)V[Q]=x[Q];return V}return[]}function g(x,M){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const we=x.length||0,De=Q.length||0;x.length=we+De;for(let ft=0;ft<De;ft++)x[we+ft]=Q[ft]}else x.push(Q)}}class y{constructor(M,V){this.i=M,this.j=V,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function v(x){return/^[\s\xa0]*$/.test(x)}function b(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S(x,M,V){for(const Q in x)M.call(V,x[Q],Q,x)}function T(x,M){for(const V in x)M.call(void 0,x[V],V,x)}function A(x){const M={};for(const V in x)M[V]=x[V];return M}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(x,M){let V,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(V in Q)x[V]=Q[V];for(let De=0;De<C.length;De++)V=C[De],Object.prototype.hasOwnProperty.call(Q,V)&&(x[V]=Q[V])}}function R(x){var M=1;x=x.split(":");const V=[];for(;0<M&&x.length;)V.push(x.shift()),M--;return x.length&&V.push(x.join(":")),V}function O(x){a.setTimeout(()=>{throw x},0)}function P(){var x=q;let M=null;return x.g&&(M=x.g,x.g=x.g.next,x.g||(x.h=null),M.next=null),M}class ${constructor(){this.h=this.g=null}add(M,V){const Q=F.get();Q.set(M,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new L,x=>x.reset());class L{constructor(){this.next=this.g=this.h=null}set(M,V){this.h=M,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,z=!1,q=new $,D=()=>{const x=a.Promise.resolve(void 0);B=()=>{x.then(U)}};var U=()=>{for(var x;x=P();){try{x.h.call(x.g)}catch(V){O(V)}var M=F;M.j(x),100>M.h&&(M.h++,x.next=M.g,M.g=x)}z=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,M){this.type=x,this.g=this.target=M,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,M=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};a.addEventListener("test",V,M),a.removeEventListener("test",V,M)}catch{}return x}();function G(x,M){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,Q=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=M,M=x.relatedTarget){if(E){e:{try{w(M.nodeName);var we=!0;break e}catch{}we=!1}we||(M=null)}}else V=="mouseover"?M=x.fromElement:V=="mouseout"&&(M=x.toElement);this.relatedTarget=M,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:ne[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(x,M,V,Q,we){this.listener=x,this.proxy=null,this.src=M,this.type=V,this.capture=!!Q,this.ha=we,this.key=++de,this.da=this.fa=!1}function ye(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ie(x){this.src=x,this.g={},this.h=0}Ie.prototype.add=function(x,M,V,Q,we){var De=x.toString();x=this.g[De],x||(x=this.g[De]=[],this.h++);var ft=Ke(x,M,Q,we);return-1<ft?(M=x[ft],V||(M.fa=!1)):(M=new he(M,this.src,De,!!Q,we),M.fa=V,x.push(M)),M};function ve(x,M){var V=M.type;if(V in x.g){var Q=x.g[V],we=Array.prototype.indexOf.call(Q,M,void 0),De;(De=0<=we)&&Array.prototype.splice.call(Q,we,1),De&&(ye(M),x.g[V].length==0&&(delete x.g[V],x.h--))}}function Ke(x,M,V,Q){for(var we=0;we<x.length;++we){var De=x[we];if(!De.da&&De.listener==M&&De.capture==!!V&&De.ha==Q)return we}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),gt={};function rt(x,M,V,Q,we){if(Array.isArray(M)){for(var De=0;De<M.length;De++)rt(x,M[De],V,Q,we);return null}return V=vt(V),x&&x[ce]?x.K(M,V,l(Q)?!!Q.capture:!!Q,we):be(x,M,V,!1,Q,we)}function be(x,M,V,Q,we,De){if(!M)throw Error("Invalid event type");var ft=l(we)?!!we.capture:!!we,Hr=me(x);if(Hr||(x[Ue]=Hr=new Ie(x)),V=Hr.add(M,V,Q,ft,De),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=x,Q.listener=V,x.addEventListener)H||(we=ft),we===void 0&&(we=!1),x.addEventListener(M.toString(),Q,we);else if(x.attachEvent)x.attachEvent(Dt(M.toString()),Q);else if(x.addListener&&x.removeListener)x.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function x(V){return M.call(x.src,x.listener,V)}const M=We;return x}function ze(x,M,V,Q,we){if(Array.isArray(M))for(var De=0;De<M.length;De++)ze(x,M[De],V,Q,we);else Q=l(Q)?!!Q.capture:!!Q,V=vt(V),x&&x[ce]?(x=x.i,M=String(M).toString(),M in x.g&&(De=x.g[M],V=Ke(De,V,Q,we),-1<V&&(ye(De[V]),Array.prototype.splice.call(De,V,1),De.length==0&&(delete x.g[M],x.h--)))):x&&(x=me(x))&&(M=x.g[M.toString()],x=-1,M&&(x=Ke(M,V,Q,we)),(V=-1<x?M[x]:null)&&ct(V))}function ct(x){if(typeof x!="number"&&x&&!x.da){var M=x.src;if(M&&M[ce])ve(M.i,x);else{var V=x.type,Q=x.proxy;M.removeEventListener?M.removeEventListener(V,Q,x.capture):M.detachEvent?M.detachEvent(Dt(V),Q):M.addListener&&M.removeListener&&M.removeListener(Q),(V=me(M))?(ve(V,x),V.h==0&&(V.src=null,M[Ue]=null)):ye(x)}}}function Dt(x){return x in gt?gt[x]:gt[x]="on"+x}function We(x,M){if(x.da)x=!0;else{M=new G(M,this);var V=x.listener,Q=x.ha||x.src;x.fa&&ct(x),x=V.call(Q,M)}return x}function me(x){return x=x[Ue],x instanceof Ie?x:null}var dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(x){return typeof x=="function"?x:(x[dt]||(x[dt]=function(M){return x.handleEvent(M)}),x[dt])}function pe(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(pe,W),pe.prototype[ce]=!0,pe.prototype.removeEventListener=function(x,M,V,Q){ze(this,x,M,V,Q)};function Ce(x,M){var V,Q=x.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(x=x.M,Q=M.type||M,typeof M=="string")M=new j(M,x);else if(M instanceof j)M.target=M.target||x;else{var we=M;M=new j(Q,x),I(M,we)}if(we=!0,V)for(var De=V.length-1;0<=De;De--){var ft=M.g=V[De];we=He(ft,Q,!0,M)&&we}if(ft=M.g=x,we=He(ft,Q,!0,M)&&we,we=He(ft,Q,!1,M)&&we,V)for(De=0;De<V.length;De++)ft=M.g=V[De],we=He(ft,Q,!1,M)&&we}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var x=this.i,M;for(M in x.g){for(var V=x.g[M],Q=0;Q<V.length;Q++)ye(V[Q]);delete x.g[M],x.h--}}this.F=null},pe.prototype.K=function(x,M,V,Q){return this.i.add(String(x),M,!1,V,Q)},pe.prototype.L=function(x,M,V,Q){return this.i.add(String(x),M,!0,V,Q)};function He(x,M,V,Q){if(M=x.i.g[String(M)],!M)return!0;M=M.concat();for(var we=!0,De=0;De<M.length;++De){var ft=M[De];if(ft&&!ft.da&&ft.capture==V){var Hr=ft.listener,go=ft.ha||ft.src;ft.fa&&ve(x.i,ft),we=Hr.call(go,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function ut(x,M,V){if(typeof x=="function")V&&(x=d(x,V));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:a.setTimeout(x,M||0)}function _t(x){x.g=ut(()=>{x.g=null,x.i&&(x.i=!1,_t(x))},x.l);const M=x.h;x.h=null,x.m.apply(null,M)}class Mn extends W{constructor(M,V){super(),this.m=M,this.l=V,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(x){W.call(this),this.h=x,this.g={}}p(Sr,W);var Ln=[];function lr(x){S(x.g,function(M,V){this.g.hasOwnProperty(V)&&ct(M)},x),x.g={}}Sr.prototype.N=function(){Sr.aa.N.call(this),lr(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pn=a.JSON.stringify,Sn=a.JSON.parse,tr=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function nr(){}nr.prototype.h=null;function Bo(x){return x.h||(x.h=x.i())}function Oi(){}var Tn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $i(){j.call(this,"d")}p($i,j);function Tr(){j.call(this,"c")}p(Tr,j);var ds={},rp=null;function sl(){return rp=rp||new pe}ds.La="serverreachability";function ld(x){j.call(this,ds.La,x)}p(ld,j);function wr(x){const M=sl();Ce(M,new ld(M))}ds.STAT_EVENT="statevent";function Ti(x,M){j.call(this,ds.STAT_EVENT,x),this.stat=M}p(Ti,j);function Kr(x){const M=sl();Ce(M,new Ti(M,x))}ds.Ma="timingevent";function au(x,M){j.call(this,ds.Ma,x),this.size=M}p(au,j);function Ta(x,M){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},M)}function Aa(){this.g=!0}Aa.prototype.xa=function(){this.g=!1};function oe(x,M,V,Q,we,De){x.info(function(){if(x.g)if(De)for(var ft="",Hr=De.split("&"),go=0;go<Hr.length;go++){var cr=Hr[go].split("=");if(1<cr.length){var Ho=cr[0];cr=cr[1];var qo=Ho.split("_");ft=2<=qo.length&&qo[1]=="type"?ft+(Ho+"="+cr+"&"):ft+(Ho+"=redacted&")}}else ft=null;else ft=De;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+M+`
`+V+`
`+ft})}function ee(x,M,V,Q,we,De,ft){x.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+M+`
`+V+`
`+De+" "+ft})}function ae(x,M,V,Q){x.info(function(){return"XMLHTTP TEXT ("+M+"): "+Se(x,V)+(Q?" "+Q:"")})}function Te(x,M){x.info(function(){return"TIMEOUT: "+M})}Aa.prototype.info=function(){};function Se(x,M){if(!x.g)return M;if(!M)return null;try{var V=JSON.parse(M);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var Q=V[x];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var De=we[0];if(De!="noop"&&De!="stop"&&De!="close")for(var ft=1;ft<we.length;ft++)we[ft]=""}}}}return pn(V)}catch{return M}}var st={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vt;function Dn(){}p(Dn,nr),Dn.prototype.g=function(){return new XMLHttpRequest},Dn.prototype.i=function(){return{}},Vt=new Dn;function Fn(x,M,V,Q){this.j=x,this.i=M,this.l=V,this.R=Q||1,this.U=new Sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dn}function dn(){this.i=null,this.g="",this.h=!1}var rr={},Ar={};function zt(x,M,V){x.L=1,x.v=jn(Ge(M)),x.m=V,x.P=!0,ir(x,null)}function ir(x,M){x.F=Date.now(),Ai(x),x.A=Ge(x.v);var V=x.A,Q=x.R;Array.isArray(Q)||(Q=[String(Q)]),ER(V.i,"t",Q),x.C=0,V=x.j.J,x.h=new dn,x.g=Kre(x.j,V?M:null,!x.m),0<x.O&&(x.M=new Mn(d(x.Y,x,x.g),x.O)),M=x.U,V=x.g,Q=x.ca;var we="readystatechange";Array.isArray(we)||(we&&(Ln[0]=we.toString()),we=Ln);for(var De=0;De<we.length;De++){var ft=rt(V,we[De],Q||M.handleEvent,!1,M.h||M);if(!ft)break;M.g[ft.key]=ft}M=x.H?A(x.H):{},x.m?(x.u||(x.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,M)):(x.u="GET",x.g.ea(x.A,x.u,null,M)),wr(),oe(x.i,x.u,x.A,x.l,x.R,x.m)}Fn.prototype.ca=function(x){x=x.target;const M=this.M;M&&Ji(x)==3?M.j():this.Y(x)},Fn.prototype.Y=function(x){try{if(x==this.g)e:{const qo=Ji(this.g);var M=this.g.Ba();const r_=this.g.Z();if(!(3>qo)&&(qo!=3||this.g&&(this.h.h||this.g.oa()||Vo(this.g)))){this.J||qo!=4||M==7||(M==8||0>=r_?wr(3):wr(2)),Xr(this);var V=this.g.Z();this.X=V;t:if(Ur(this)){var Q=Vo(this.g);x="";var we=Q.length,De=Ji(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mi(this),mo(this);var ft="";break t}this.h.i=new a.TextDecoder}for(M=0;M<we;M++)this.h.h=!0,x+=this.h.i.decode(Q[M],{stream:!(De&&M==we-1)});Q.length=0,this.h.g+=x,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,qo,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Hr,go=this.g;if((Hr=go.g?go.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Hr)){var cr=Hr;break t}}cr=null}if(V=cr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Li(this,V);else{this.o=!1,this.s=3,Kr(12),Mi(this),mo(this);break e}}if(this.P){V=!0;let Kc;for(;!this.J&&this.C<ft.length;)if(Kc=Qn(this,ft),Kc==Ar){qo==4&&(this.s=4,Kr(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(Kc==rr){this.s=4,Kr(15),ae(this.i,this.l,ft,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,Kc,null),Li(this,Kc);if(Ur(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),qo!=4||ft.length!=0||this.h.h||(this.s=1,Kr(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,ft,"[Invalid Chunked Response]"),Mi(this),mo(this);else if(0<ft.length&&!this.W){this.W=!0;var Ho=this.j;Ho.g==this&&Ho.ba&&!Ho.M&&(Ho.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),b5(Ho),Ho.M=!0,Kr(11))}}else ae(this.i,this.l,ft,null),Li(this,ft);qo==4&&Mi(this),this.o&&!this.J&&(qo==4?qre(this.j,this):(this.o=!1,Ai(this)))}else Qy(this.g),V==400&&0<ft.indexOf("Unknown SID")?(this.s=3,Kr(12)):(this.s=0,Kr(13)),Mi(this),mo(this)}}}catch{}finally{}};function Ur(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Qn(x,M){var V=x.C,Q=M.indexOf(`
`,V);return Q==-1?Ar:(V=Number(M.substring(V,Q)),isNaN(V)?rr:(Q+=1,Q+V>M.length?Ar:(M=M.slice(Q,Q+V),x.C=Q+V,M)))}Fn.prototype.cancel=function(){this.J=!0,Mi(this)};function Ai(x){x.S=Date.now()+x.I,Hs(x,x.I)}function Hs(x,M){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Ta(d(x.ba,x),M)}function Xr(x){x.B&&(a.clearTimeout(x.B),x.B=null)}Fn.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Te(this.i,this.A),this.L!=2&&(wr(),Kr(17)),Mi(this),this.s=2,mo(this)):Hs(this,this.S-x)};function mo(x){x.j.G==0||x.J||qre(x.j,x)}function Mi(x){Xr(x);var M=x.M;M&&typeof M.ma=="function"&&M.ma(),x.M=null,lr(x.U),x.g&&(M=x.g,x.g=null,M.abort(),M.ma())}function Li(x,M){try{var V=x.j;if(V.G!=0&&(V.g==x||cd(V.h,x))){if(!x.K&&cd(V.h,x)&&V.G==3){try{var Q=V.Da.g.parse(M)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)kR(V),CR(V);else break e;v5(V),Kr(18)}}else V.za=we[1],0<V.za-V.T&&37500>we[2]&&V.F&&V.v==0&&!V.C&&(V.C=Ta(d(V.Za,V),6e3));if(1>=Kl(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Jy(V,11)}else if((x.K||V.g==x)&&kR(V),!v(M))for(we=V.Da.g.parse(M),M=0;M<we.length;M++){let cr=we[M];if(V.T=cr[0],cr=cr[1],V.G==2)if(cr[0]=="c"){V.K=cr[1],V.ia=cr[2];const Ho=cr[3];Ho!=null&&(V.la=Ho,V.j.info("VER="+V.la));const qo=cr[4];qo!=null&&(V.Aa=qo,V.j.info("SVER="+V.Aa));const r_=cr[5];r_!=null&&typeof r_=="number"&&0<r_&&(Q=1.5*r_,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const Kc=x.g;if(Kc){const NR=Kc.g?Kc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(NR){var De=Q.h;De.g||NR.indexOf("spdy")==-1&&NR.indexOf("quic")==-1&&NR.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(Y(De,De.h),De.h=null))}if(Q.D){const _5=Kc.g?Kc.g.getResponseHeader("X-HTTP-Session-Id"):null;_5&&(Q.ya=_5,Nt(Q.I,Q.D,_5))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var ft=x;if(Q.qa=Yre(Q,Q.J?Q.ia:null,Q.W),ft.K){se(Q.h,ft);var Hr=ft,go=Q.L;go&&(Hr.I=go),Hr.B&&(Xr(Hr),Ai(Hr)),Q.g=ft}else Vre(Q);0<V.i.length&&IR(V)}else cr[0]!="stop"&&cr[0]!="close"||Jy(V,7);else V.G==3&&(cr[0]=="stop"||cr[0]=="close"?cr[0]=="stop"?Jy(V,7):t_(V):cr[0]!="noop"&&V.l&&V.l.ta(cr),V.v=0)}}wr(4)}catch{}}var Uo=class{constructor(x,M){this.g=x,this.map=M}};function Ca(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qs(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Kl(x){return x.h?1:x.g?x.g.size:0}function cd(x,M){return x.h?x.h==M:x.g?x.g.has(M):!1}function Y(x,M){x.g?x.g.add(M):x.h=M}function se(x,M){x.h&&x.h==M?x.h=null:x.g&&x.g.has(M)&&x.g.delete(M)}Ca.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Z(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let M=x.i;for(const V of x.g.values())M=M.concat(V.D);return M}return m(x.i)}function fe(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var M=[],V=x.length,Q=0;Q<V;Q++)M.push(x[Q]);return M}M=[],V=0;for(Q in x)M[V++]=x[Q];return M}function ge(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var M=[];x=x.length;for(var V=0;V<x;V++)M.push(V);return M}M=[],V=0;for(const Q in x)M[V++]=Q;return M}}}function le(x,M){if(x.forEach&&typeof x.forEach=="function")x.forEach(M,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,M,void 0);else for(var V=ge(x),Q=fe(x),we=Q.length,De=0;De<we;De++)M.call(void 0,Q[De],V&&V[De],x)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(x,M){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var Q=x[V].indexOf("="),we=null;if(0<=Q){var De=x[V].substring(0,Q);we=x[V].substring(Q+1)}else De=x[V];M(De,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function qe(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof qe){this.h=x.h,it(this,x.j),this.o=x.o,this.g=x.g,Et(this,x.s),this.l=x.l;var M=x.i,V=new Xl;V.i=M.i,M.g&&(V.g=new Map(M.g),V.h=M.h),hn(this,V),this.m=x.m}else x&&(M=String(x).match(Oe))?(this.h=!1,it(this,M[1]||"",!0),this.o=Cr(M[2]||""),this.g=Cr(M[3]||"",!0),Et(this,M[4]),this.l=Cr(M[5]||"",!0),hn(this,M[6]||"",!0),this.m=Cr(M[7]||"")):(this.h=!1,this.i=new Xl(null,this.h))}qe.prototype.toString=function(){var x=[],M=this.j;M&&x.push(Ir(M,fd,!0),":");var V=this.g;return(V||M=="file")&&(x.push("//"),(M=this.o)&&x.push(Ir(M,fd,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(Ir(V,V.charAt(0)=="/"?BS:ip,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",Ir(V,wR)),x.join("")};function Ge(x){return new qe(x)}function it(x,M,V){x.j=V?Cr(M,!0):M,x.j&&(x.j=x.j.replace(/:$/,""))}function Et(x,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);x.s=M}else x.s=null}function hn(x,M,V){M instanceof Xl?(x.i=M,US(x.i,x.h)):(V||(M=Ir(M,Gy)),x.i=new Xl(M,x.h))}function Nt(x,M,V){x.i.set(M,V)}function jn(x){return Nt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function Cr(x,M){return x?M?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Ir(x,M,V){return typeof x=="string"?(x=encodeURI(x).replace(M,zo),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function zo(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var fd=/[#\/\?@]/g,ip=/[#\?:]/g,BS=/[#\?]/g,Gy=/[#\?@]/g,wR=/#/g;function Xl(x,M){this.h=this.g=null,this.i=x||null,this.j=!!M}function uu(x){x.g||(x.g=new Map,x.h=0,x.i&&Ve(x.i,function(M,V){x.add(decodeURIComponent(M.replace(/\+/g," ")),V)}))}e=Xl.prototype,e.add=function(x,M){uu(this),this.i=null,x=op(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push(M),this.h+=1,this};function sp(x,M){uu(x),M=op(x,M),x.g.has(M)&&(x.i=null,x.h-=x.g.get(M).length,x.g.delete(M))}function Zb(x,M){return uu(x),M=op(x,M),x.g.has(M)}e.forEach=function(x,M){uu(this),this.g.forEach(function(V,Q){V.forEach(function(we){x.call(M,we,Q,this)},this)},this)},e.na=function(){uu(this);const x=Array.from(this.g.values()),M=Array.from(this.g.keys()),V=[];for(let Q=0;Q<M.length;Q++){const we=x[Q];for(let De=0;De<we.length;De++)V.push(M[Q])}return V},e.V=function(x){uu(this);let M=[];if(typeof x=="string")Zb(this,x)&&(M=M.concat(this.g.get(op(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)M=M.concat(x[V])}return M},e.set=function(x,M){return uu(this),this.i=null,x=op(this,x),Zb(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[M]),this.h+=1,this},e.get=function(x,M){return x?(x=this.V(x),0<x.length?String(x[0]):M):M};function ER(x,M,V){sp(x,M),0<V.length&&(x.i=null,x.g.set(op(x,M),m(V)),x.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],M=Array.from(this.g.keys());for(var V=0;V<M.length;V++){var Q=M[V];const De=encodeURIComponent(String(Q)),ft=this.V(Q);for(Q=0;Q<ft.length;Q++){var we=De;ft[Q]!==""&&(we+="="+encodeURIComponent(String(ft[Q]))),x.push(we)}}return this.i=x.join("&")};function op(x,M){return M=String(M),x.j&&(M=M.toLowerCase()),M}function US(x,M){M&&!x.j&&(uu(x),x.i=null,x.g.forEach(function(V,Q){var we=Q.toLowerCase();Q!=we&&(sp(this,Q),ER(this,we,V))},x)),x.j=M}function xR(x,M){const V=new Aa;if(a.Image){const Q=new Image;Q.onload=h(lu,V,"TestLoadImage: loaded",!0,M,Q),Q.onerror=h(lu,V,"TestLoadImage: error",!1,M,Q),Q.onabort=h(lu,V,"TestLoadImage: abort",!1,M,Q),Q.ontimeout=h(lu,V,"TestLoadImage: timeout",!1,M,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=x}else M(!1)}function ap(x,M){const V=new Aa,Q=new AbortController,we=setTimeout(()=>{Q.abort(),lu(V,"TestPingServer: timeout",!1,M)},1e4);fetch(x,{signal:Q.signal}).then(De=>{clearTimeout(we),De.ok?lu(V,"TestPingServer: ok",!0,M):lu(V,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(we),lu(V,"TestPingServer: error",!1,M)})}function lu(x,M,V,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(V)}catch{}}function y5(){this.g=new tr}function SR(x,M,V){const Q=V||"";try{le(x,function(we,De){let ft=we;l(we)&&(ft=pn(we)),M.push(Q+De+"="+encodeURIComponent(ft))})}catch(we){throw M.push(Q+"type="+encodeURIComponent("_badmap")),we}}function Yy(x){this.l=x.Ub||null,this.j=x.eb||!1}p(Yy,nr),Yy.prototype.g=function(){return new Ky(this.l,this.j)},Yy.prototype.i=function(x){return function(){return x}}({});function Ky(x,M){pe.call(this),this.D=x,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Ky,pe),e=Ky.prototype,e.open=function(x,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=M,this.readyState=1,ug(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(M.body=x),(this.D||a).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xy(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,ug(this)),this.g&&(this.readyState=3,ug(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;TR(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function TR(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var M=x.value?x.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!x.done}))&&(this.response=this.responseText+=M)}x.done?Xy(this):ug(this),this.readyState==3&&TR(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,Xy(this))},e.Qa=function(x){this.g&&(this.response=x,Xy(this))},e.ga=function(){this.g&&Xy(this)};function Xy(x){x.readyState=4,x.l=null,x.j=null,x.v=null,ug(x)}e.setRequestHeader=function(x,M){this.u.append(x,M)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],M=this.h.entries();for(var V=M.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=M.next();return x.join(`\r
`)};function ug(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Ky.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function AR(x){let M="";return S(x,function(V,Q){M+=Q,M+=":",M+=V,M+=`\r
`}),M}function te(x,M,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=AR(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):Nt(x,M,V))}function ue(x){pe.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,pe);var Re=/^https?$/i,Ct=["POST","PUT"];e=ue.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,M,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);M=M?M.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vt.g(),this.v=this.o?Bo(this.o):Bo(Vt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(M,String(x),!0),this.B=!1}catch(De){On(this,De);return}if(x=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)V.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const De of Q.keys())V.set(De,Q.get(De));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(De=>De.toLowerCase()=="content-type"),we=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ct,M,void 0))||Q||we||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,ft]of V)this.g.setRequestHeader(De,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vr(this),this.u=!0,this.g.send(x),this.u=!1}catch(De){On(this,De)}};function On(x,M){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=M,x.m=5,Er(x),Bn(x)}function Er(x){x.A||(x.A=!0,Ce(x,"complete"),Ce(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ce(this,"complete"),Ce(this,"abort"),Bn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zr(this):this.bb())},e.bb=function(){zr(this)};function zr(x){if(x.h&&typeof o<"u"&&(!x.v[1]||Ji(x)!=4||x.Z()!=2)){if(x.u&&Ji(x)==4)ut(x.Ea,0,x);else if(Ce(x,"readystatechange"),Ji(x)==4){x.h=!1;try{const ft=x.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var V;if(!(V=M)){var Q;if(Q=ft===0){var we=String(x.D).match(Oe)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Re.test(we?we.toLowerCase():"")}V=Q}if(V)Ce(x,"complete"),Ce(x,"success");else{x.m=6;try{var De=2<Ji(x)?x.g.statusText:""}catch{De=""}x.l=De+" ["+x.Z()+"]",Er(x)}}finally{Bn(x)}}}}function Bn(x,M){if(x.g){Vr(x);const V=x.g,Q=x.v[0]?()=>{}:null;x.g=null,x.v=null,M||Ce(x,"ready");try{V.onreadystatechange=Q}catch{}}}function Vr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function Ji(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<Ji(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var M=this.g.responseText;return x&&M.indexOf(x)==0&&(M=M.substring(x.length)),Sn(M)}};function Vo(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Qy(x){const M={};x=(x.g&&2<=Ji(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<x.length;Q++){if(v(x[Q]))continue;var V=R(x[Q]);const we=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const De=M[we]||[];M[we]=De,De.push(V)}T(M,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function up(x,M,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||M}function e_(x){this.Aa=0,this.i=[],this.j=new Aa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=up("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=up("baseRetryDelayMs",5e3,x),this.cb=up("retryDelaySeedMs",1e4,x),this.Wa=up("forwardChannelMaxRetries",2,x),this.wa=up("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Ca(x&&x.concurrentRequestLimit),this.Da=new y5,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=e_.prototype,e.la=8,e.G=1,e.connect=function(x,M,V,Q){Kr(0),this.W=x,this.H=M||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=Yre(this,null,this.W),IR(this)};function t_(x){if(Bre(x),x.G==3){var M=x.U++,V=Ge(x.I);if(Nt(V,"SID",x.K),Nt(V,"RID",M),Nt(V,"TYPE","terminate"),zS(x,V),M=new Fn(x,x.j,M),M.L=2,M.v=jn(Ge(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(M.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=M.v,V=!0),V||(M.g=Kre(M.j,null),M.g.ea(M.v)),M.F=Date.now(),Ai(M)}Gre(x)}function CR(x){x.g&&(b5(x),x.g.cancel(),x.g=null)}function Bre(x){CR(x),x.u&&(a.clearTimeout(x.u),x.u=null),kR(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function IR(x){if(!qs(x.h)&&!x.s){x.s=!0;var M=x.Ga;B||D(),z||(B(),z=!0),q.add(M,x),x.B=0}}function W5e(x,M){return Kl(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=M.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Ta(d(x.Ga,x,M),Wre(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const we=new Fn(this,this.j,x);let De=this.o;if(this.S&&(De?(De=A(De),I(De,this.S)):De=this.S),this.m!==null||this.O||(we.H=De,De=null),this.P)e:{for(var M=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(M+=Q,4096<M){M=V;break e}if(M===4096||V===this.i.length-1){M=V+1;break e}}M=1e3}else M=1e3;M=zre(this,we,M),V=Ge(this.I),Nt(V,"RID",x),Nt(V,"CVER",22),this.D&&Nt(V,"X-HTTP-Session-Id",this.D),zS(this,V),De&&(this.O?M="headers="+encodeURIComponent(String(AR(De)))+"&"+M:this.m&&te(V,this.m,De)),Y(this.h,we),this.Ua&&Nt(V,"TYPE","init"),this.P?(Nt(V,"$req",M),Nt(V,"SID","null"),we.T=!0,zt(we,V,null)):zt(we,V,M),this.G=2}}else this.G==3&&(x?Ure(this,x):this.i.length==0||qs(this.h)||Ure(this))};function Ure(x,M){var V;M?V=M.l:V=x.U++;const Q=Ge(x.I);Nt(Q,"SID",x.K),Nt(Q,"RID",V),Nt(Q,"AID",x.T),zS(x,Q),x.m&&x.o&&te(Q,x.m,x.o),V=new Fn(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),M&&(x.i=M.D.concat(x.i)),M=zre(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,V),zt(V,Q,M)}function zS(x,M){x.H&&S(x.H,function(V,Q){Nt(M,Q,V)}),x.l&&le({},function(V,Q){Nt(M,Q,V)})}function zre(x,M,V){V=Math.min(x.i.length,V);var Q=x.l?d(x.l.Na,x.l,x):null;e:{var we=x.i;let De=-1;for(;;){const ft=["count="+V];De==-1?0<V?(De=we[0].g,ft.push("ofs="+De)):De=0:ft.push("ofs="+De);let Hr=!0;for(let go=0;go<V;go++){let cr=we[go].g;const Ho=we[go].map;if(cr-=De,0>cr)De=Math.max(0,we[go].g-100),Hr=!1;else try{SR(Ho,ft,"req"+cr+"_")}catch{Q&&Q(Ho)}}if(Hr){Q=ft.join("&");break e}}}return x=x.i.splice(0,V),M.D=x,Q}function Vre(x){if(!x.g&&!x.u){x.Y=1;var M=x.Fa;B||D(),z||(B(),z=!0),q.add(M,x),x.v=0}}function v5(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Ta(d(x.Fa,x),Wre(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,Hre(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Ta(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kr(10),CR(this),Hre(this))};function b5(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function Hre(x){x.g=new Fn(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var M=Ge(x.qa);Nt(M,"RID","rpc"),Nt(M,"SID",x.K),Nt(M,"AID",x.T),Nt(M,"CI",x.F?"0":"1"),!x.F&&x.ja&&Nt(M,"TO",x.ja),Nt(M,"TYPE","xmlhttp"),zS(x,M),x.m&&x.o&&te(M,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=jn(Ge(M)),V.m=null,V.P=!0,ir(V,x)}e.Za=function(){this.C!=null&&(this.C=null,CR(this),v5(this),Kr(19))};function kR(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function qre(x,M){var V=null;if(x.g==M){kR(x),b5(x),x.g=null;var Q=2}else if(cd(x.h,M))V=M.D,se(x.h,M),Q=1;else return;if(x.G!=0){if(M.o)if(Q==1){V=M.m?M.m.length:0,M=Date.now()-M.F;var we=x.B;Q=sl(),Ce(Q,new au(Q,V)),IR(x)}else Vre(x);else if(we=M.s,we==3||we==0&&0<M.X||!(Q==1&&W5e(x,M)||Q==2&&v5(x)))switch(V&&0<V.length&&(M=x.h,M.i=M.i.concat(V)),we){case 1:Jy(x,5);break;case 4:Jy(x,10);break;case 3:Jy(x,6);break;default:Jy(x,2)}}}function Wre(x,M){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*M}function Jy(x,M){if(x.j.info("Error code "+M),M==2){var V=d(x.fb,x),Q=x.Xa;const we=!Q;Q=new qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||it(Q,"https"),jn(Q),we?xR(Q.toString(),V):ap(Q.toString(),V)}else Kr(2);x.G=0,x.l&&x.l.sa(M),Gre(x),Bre(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Kr(2)):(this.j.info("Failed to ping google.com"),Kr(1))};function Gre(x){if(x.G=0,x.ka=[],x.l){const M=Z(x.h);(M.length!=0||x.i.length!=0)&&(g(x.ka,M),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function Yre(x,M,V){var Q=V instanceof qe?Ge(V):new qe(V);if(Q.g!="")M&&(Q.g=M+"."+Q.g),Et(Q,Q.s);else{var we=a.location;Q=we.protocol,M=M?M+"."+we.hostname:we.hostname,we=+we.port;var De=new qe(null);Q&&it(De,Q),M&&(De.g=M),we&&Et(De,we),V&&(De.l=V),Q=De}return V=x.D,M=x.ya,V&&M&&Nt(Q,V,M),Nt(Q,"VER",x.la),zS(x,Q),Q}function Kre(x,M,V){if(M&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=x.Ca&&!x.pa?new ue(new Yy({eb:V})):new ue(x.pa),M.Ha(x.J),M}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xre(){}e=Xre.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function RR(){}RR.prototype.g=function(x,M){return new ol(x,M)};function ol(x,M){pe.call(this),this.g=new e_(M),this.l=x,this.h=M&&M.messageUrlParams||null,x=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(x?x["X-WebChannel-Content-Type"]=M.messageContentType:x={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(x?x["X-WebChannel-Client-Profile"]=M.va:x={"X-WebChannel-Client-Profile":M.va}),this.g.S=x,(x=M&&M.Sb)&&!v(x)&&(this.g.m=x),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!v(M)&&(this.g.D=M,x=this.h,x!==null&&M in x&&(x=this.h,M in x&&delete x[M])),this.j=new n_(this)}p(ol,pe),ol.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ol.prototype.close=function(){t_(this.g)},ol.prototype.o=function(x){var M=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=pn(x),x=V);M.i.push(new Uo(M.Ya++,x)),M.G==3&&IR(M)},ol.prototype.N=function(){this.g.l=null,delete this.j,t_(this.g),delete this.g,ol.aa.N.call(this)};function Qre(x){$i.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var M=x.__sm__;if(M){e:{for(const V in M){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,M=M!==null&&x in M?M[x]:void 0),this.data=M}else this.data=x}p(Qre,$i);function Jre(){Tr.call(this),this.status=1}p(Jre,Tr);function n_(x){this.g=x}p(n_,Xre),n_.prototype.ua=function(){Ce(this.g,"a")},n_.prototype.ta=function(x){Ce(this.g,new Qre(x))},n_.prototype.sa=function(x){Ce(this.g,new Jre)},n_.prototype.ra=function(){Ce(this.g,"b")},RR.prototype.createWebChannel=RR.prototype.g,ol.prototype.send=ol.prototype.o,ol.prototype.open=ol.prototype.m,ol.prototype.close=ol.prototype.close,wNe=function(){return new RR},_Ne=function(){return sl()},bNe=ds,iV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,pD=st,St.COMPLETE="complete",vNe=St,Oi.EventType=Tn,Tn.OPEN="a",Tn.CLOSE="b",Tn.ERROR="c",Tn.MESSAGE="d",pe.prototype.listen=pe.prototype.K,mA=Oi,yNe=Yy,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,gNe=ue}).apply(typeof UN<"u"?UN:typeof self<"u"?self:typeof window<"u"?window:{});const Nde="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}gu.UNAUTHENTICATED=new gu(null),gu.GOOGLE_CREDENTIALS=new gu("google-credentials-uid"),gu.FIRST_PARTY=new gu("first-party-uid"),gu.MOCK_USER=new gu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=new Y6("@firebase/firestore");function wT(){return Y1.logLevel}function It(e,...t){if(Y1.logLevel<=Wn.DEBUG){const n=t.map(hJ);Y1.debug(`Firestore (${mS}): ${e}`,...n)}}function Nm(e,...t){if(Y1.logLevel<=Wn.ERROR){const n=t.map(hJ);Y1.error(`Firestore (${mS}): ${e}`,...n)}}function V2(e,...t){if(Y1.logLevel<=Wn.WARN){const n=t.map(hJ);Y1.warn(`Firestore (${mS}): ${e}`,...n)}}function hJ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(e="Unexpected state"){const t=`FIRESTORE (${mS}) INTERNAL ASSERTION FAILED: `+e;throw Nm(t),new Error(t)}function ni(e,t){e||on()}function fn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Wh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UDt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class zDt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(gu.UNAUTHENTICATED))}shutdown(){}}class VDt{constructor(t){this.t=t,this.currentUser=gu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new em;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new em,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new em)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ni(typeof r.accessToken=="string"),new UDt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ni(t===null||typeof t=="string"),new gu(t)}}class HDt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=gu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qDt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new HDt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(gu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WDt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class GDt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ni(typeof n.token=="string"),this.R=n.token,new WDt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YDt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ENe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=YDt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function yr(e,t){return e<t?-1:e>t?1:0}function qE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return $s.fromMillis(Date.now())}static fromDate(t){return $s.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new $s(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?yr(this.nanoseconds,t.nanoseconds):yr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new cn(t)}static min(){return new cn(new $s(0,0))}static max(){return new cn(new $s(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(t,n,r){n===void 0?n=0:n>t.length&&on(),r===void 0?r=t.length-n:r>t.length-n&&on(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return H2.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof H2?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ai extends H2{construct(t,n,r){return new ai(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ai(n)}static emptyPath(){return new ai([])}}const KDt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Co extends H2{construct(t,n,r){return new Co(t,n,r)}static isValidIdentifier(t){return KDt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Co.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Co(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Co(n)}static emptyPath(){return new Co([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.path=t}static fromPath(t){return new Bt(ai.fromString(t))}static fromName(t){return new Bt(ai.fromString(t).popFirst(5))}static empty(){return new Bt(ai.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ai.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ai.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Bt(new ai(t.slice()))}}function XDt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=cn.fromTimestamp(r===1e9?new $s(n+1,0):new $s(n,r));return new J0(i,Bt.empty(),t)}function QDt(e){return new J0(e.readTime,e.key,-1)}class J0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new J0(cn.min(),Bt.empty(),-1)}static max(){return new J0(cn.max(),Bt.empty(),-1)}}function JDt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Bt.comparator(e.documentKey,t.documentKey),n!==0?n:yr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZDt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eOt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ck(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==ZDt)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&on(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Xe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Xe?n:Xe.resolve(n)}catch(n){return Xe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.reject(n)}static resolve(t){return new Xe((n,r)=>{n(t)})}static reject(t){return new Xe((n,r)=>{r(t)})}static waitFor(t){return new Xe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Xe.resolve(!1);for(const r of t)n=n.next(i=>i?Xe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Xe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Xe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function tOt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ik(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}pJ.oe=-1;function tF(e){return e==null}function E$(e){return e===0&&1/e==-1/0}function nOt(e){return typeof e=="number"&&Number.isInteger(e)&&!E$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pde(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ob(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xNe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t,n){this.comparator=t,this.root=n||So.EMPTY}insert(t,n){return new Di(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,So.BLACK,null,null))}remove(t){return new Di(this.comparator,this.root.remove(t,this.comparator).copy(null,null,So.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new zN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new zN(this.root,t,this.comparator,!1)}getReverseIterator(){return new zN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new zN(this.root,t,this.comparator,!0)}}class zN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class So{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??So.RED,this.left=i??So.EMPTY,this.right=s??So.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new So(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return So.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return So.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,So.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,So.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw on();const t=this.left.check();if(t!==this.right.check())throw on();return t+(this.isRed()?0:1)}}So.EMPTY=null,So.RED=!0,So.BLACK=!1;So.EMPTY=new class{constructor(){this.size=0}get key(){throw on()}get value(){throw on()}get color(){throw on()}get left(){throw on()}get right(){throw on()}copy(t,n,r,i,s){return this}insert(t,n,r){return new So(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t){this.comparator=t,this.data=new Di(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dde(this.data.getIterator())}getIteratorFrom(t){return new Dde(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Po)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Po(this.comparator);return n.data=t,n}}class Dde{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t){this.fields=t,t.sort(Co.comparator)}static empty(){return new El([])}unionWith(t){let n=new Po(Co.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new El(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return qE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SNe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new SNe("Invalid base64 string: "+s):s}}(t);return new ba(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ba(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return yr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ba.EMPTY_BYTE_STRING=new ba("");const rOt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Z0(e){if(ni(!!e),typeof e=="string"){let t=0;const n=rOt.exec(e);if(ni(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:gs(e.seconds),nanos:gs(e.nanos)}}function gs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function K1(e){return typeof e=="string"?ba.fromBase64String(e):ba.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gJ(e){const t=e.mapValue.fields.__previous_value__;return mJ(t)?gJ(t):t}function q2(e){const t=Z0(e.mapValue.fields.__local_write_time__.timestampValue);return new $s(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iOt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class W2{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new W2("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof W2&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function X1(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?mJ(e)?4:sOt(e)?9007199254740991:10:on()}function Ah(e,t){if(e===t)return!0;const n=X1(e);if(n!==X1(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return q2(e).isEqual(q2(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Z0(i.timestampValue),a=Z0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return K1(i.bytesValue).isEqual(K1(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return gs(i.geoPointValue.latitude)===gs(s.geoPointValue.latitude)&&gs(i.geoPointValue.longitude)===gs(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return gs(i.integerValue)===gs(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=gs(i.doubleValue),a=gs(s.doubleValue);return o===a?E$(o)===E$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return qE(e.arrayValue.values||[],t.arrayValue.values||[],Ah);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Pde(o)!==Pde(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Ah(o[u],a[u])))return!1;return!0}(e,t);default:return on()}}function G2(e,t){return(e.values||[]).find(n=>Ah(n,t))!==void 0}function WE(e,t){if(e===t)return 0;const n=X1(e),r=X1(t);if(n!==r)return yr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return yr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=gs(s.integerValue||s.doubleValue),u=gs(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Ode(e.timestampValue,t.timestampValue);case 4:return Ode(q2(e),q2(t));case 5:return yr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=K1(s),u=K1(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=yr(a[l],u[l]);if(c!==0)return c}return yr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=yr(gs(s.latitude),gs(o.latitude));return a!==0?a:yr(gs(s.longitude),gs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=WE(a[l],u[l]);if(c)return c}return yr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===VN.mapValue&&o===VN.mapValue)return 0;if(s===VN.mapValue)return 1;if(o===VN.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=yr(u[f],c[f]);if(d!==0)return d;const h=WE(a[u[f]],l[c[f]]);if(h!==0)return h}return yr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw on()}}function Ode(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return yr(e,t);const n=Z0(e),r=Z0(t),i=yr(n.seconds,r.seconds);return i!==0?i:yr(n.nanos,r.nanos)}function GE(e){return sV(e)}function sV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Z0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return K1(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Bt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=sV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${sV(n.fields[o])}`;return i+"}"}(e.mapValue):on()}function $de(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function oV(e){return!!e&&"integerValue"in e}function yJ(e){return!!e&&"arrayValue"in e}function Mde(e){return!!e&&"nullValue"in e}function Lde(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function mD(e){return!!e&&"mapValue"in e}function _C(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ob(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=_C(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=_C(e.arrayValue.values[n]);return t}return Object.assign({},e)}function sOt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(t){this.value=t}static empty(){return new Cu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!mD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=_C(n)}setAll(t){let n=Co.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=_C(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());mD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ah(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];mD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Ob(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Cu(_C(this.value))}}function TNe(e){const t=[];return Ob(e.fields,(n,r)=>{const i=new Co([n]);if(mD(r)){const s=TNe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new El(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new aa(t,0,cn.min(),cn.min(),cn.min(),Cu.empty(),0)}static newFoundDocument(t,n,r,i){return new aa(t,1,n,cn.min(),r,i,0)}static newNoDocument(t,n){return new aa(t,2,n,cn.min(),cn.min(),Cu.empty(),0)}static newUnknownDocument(t,n){return new aa(t,3,n,cn.min(),cn.min(),Cu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(cn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Cu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Cu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=cn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof aa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new aa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x$=class{constructor(t,n){this.position=t,this.inclusive=n}};function Fde(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Bt.comparator(Bt.fromName(o.referenceValue),n.key):r=WE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jde(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ah(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(t,n="asc"){this.field=t,this.dir=n}}function oOt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ANe=class{};class vs extends ANe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new uOt(t,n,r):n==="array-contains"?new fOt(t,r):n==="in"?new dOt(t,r):n==="not-in"?new hOt(t,r):n==="array-contains-any"?new pOt(t,r):new vs(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new lOt(t,r):new cOt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(WE(n,this.value)):n!==null&&X1(this.value)===X1(n)&&this.matchesComparison(WE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return on()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vf extends ANe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Vf(t,n)}matches(t){return CNe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function CNe(e){return e.op==="and"}function INe(e){return aOt(e)&&CNe(e)}function aOt(e){for(const t of e.filters)if(t instanceof Vf)return!1;return!0}function aV(e){if(e instanceof vs)return e.field.canonicalString()+e.op.toString()+GE(e.value);if(INe(e))return e.filters.map(t=>aV(t)).join(",");{const t=e.filters.map(n=>aV(n)).join(",");return`${e.op}(${t})`}}function kNe(e,t){return e instanceof vs?function(r,i){return i instanceof vs&&r.op===i.op&&r.field.isEqual(i.field)&&Ah(r.value,i.value)}(e,t):e instanceof Vf?function(r,i){return i instanceof Vf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&kNe(o,i.filters[a]),!0):!1}(e,t):void on()}function RNe(e){return e instanceof vs?function(n){return`${n.field.canonicalString()} ${n.op} ${GE(n.value)}`}(e):e instanceof Vf?function(n){return n.op.toString()+" {"+n.getFilters().map(RNe).join(" ,")+"}"}(e):"Filter"}class uOt extends vs{constructor(t,n,r){super(t,n,r),this.key=Bt.fromName(r.referenceValue)}matches(t){const n=Bt.comparator(t.key,this.key);return this.matchesComparison(n)}}class lOt extends vs{constructor(t,n){super(t,"in",n),this.keys=NNe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class cOt extends vs{constructor(t,n){super(t,"not-in",n),this.keys=NNe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function NNe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Bt.fromName(r.referenceValue))}class fOt extends vs{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return yJ(n)&&G2(n.arrayValue,this.value)}}class dOt extends vs{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&G2(this.value.arrayValue,n)}}class hOt extends vs{constructor(t,n){super(t,"not-in",n)}matches(t){if(G2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!G2(this.value.arrayValue,n)}}class pOt extends vs{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!yJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>G2(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mOt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Bde(e,t=null,n=[],r=[],i=null,s=null,o=null){return new mOt(e,t,n,r,i,s,o)}function vJ(e){const t=fn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>aV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),tF(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>GE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>GE(r)).join(",")),t.ue=n}return t.ue}function bJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!oOt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!kNe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!jde(e.startAt,t.startAt)&&jde(e.endAt,t.endAt)}function uV(e){return Bt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gOt(e,t,n,r,i,s,o,a){return new gS(e,t,n,r,i,s,o,a)}function _J(e){return new gS(e)}function Ude(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function PNe(e){return e.collectionGroup!==null}function wC(e){const t=fn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Po(Co.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new Y2(s,r))}),n.has(Co.keyField().canonicalString())||t.ce.push(new Y2(Co.keyField(),r))}return t.ce}function lh(e){const t=fn(e);return t.le||(t.le=yOt(t,wC(e))),t.le}function yOt(e,t){if(e.limitType==="F")return Bde(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Y2(i.field,s)});const n=e.endAt?new x$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new x$(e.startAt.position,e.startAt.inclusive):null;return Bde(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function lV(e,t){const n=e.filters.concat([t]);return new gS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function cV(e,t,n){return new gS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function nF(e,t){return bJ(lh(e),lh(t))&&e.limitType===t.limitType}function DNe(e){return`${vJ(lh(e))}|lt:${e.limitType}`}function j_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>RNe(i)).join(", ")}]`),tF(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>GE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>GE(i)).join(",")),`Target(${r})`}(lh(e))}; limitType=${e.limitType})`}function rF(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Bt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of wC(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Fde(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,wC(r),i)||r.endAt&&!function(o,a,u){const l=Fde(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,wC(r),i))}(e,t)}function vOt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ONe(e){return(t,n)=>{let r=!1;for(const i of wC(e)){const s=bOt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bOt(e,t,n){const r=e.field.isKeyField()?Bt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?WE(u,l):on()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return on()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ob(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return xNe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ot=new Di(Bt.comparator);function Pm(){return _Ot}const $Ne=new Di(Bt.comparator);function gA(...e){let t=$Ne;for(const n of e)t=t.insert(n.key,n);return t}function MNe(e){let t=$Ne;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function n1(){return EC()}function LNe(){return EC()}function EC(){return new yS(e=>e.toString(),(e,t)=>e.isEqual(t))}const wOt=new Di(Bt.comparator),EOt=new Po(Bt.comparator);function Un(...e){let t=EOt;for(const n of e)t=t.add(n);return t}const xOt=new Po(yr);function SOt(){return xOt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FNe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:E$(t)?"-0":t}}function jNe(e){return{integerValue:""+e}}function TOt(e,t){return nOt(t)?jNe(t):FNe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(){this._=void 0}}function AOt(e,t,n){return e instanceof K2?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&mJ(s)&&(s=gJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof X2?UNe(e,t):e instanceof Q2?zNe(e,t):function(i,s){const o=BNe(i,s),a=zde(o)+zde(i.Pe);return oV(o)&&oV(i.Pe)?jNe(a):FNe(i.serializer,a)}(e,t)}function COt(e,t,n){return e instanceof X2?UNe(e,t):e instanceof Q2?zNe(e,t):n}function BNe(e,t){return e instanceof S$?function(r){return oV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class K2 extends iF{}class X2 extends iF{constructor(t){super(),this.elements=t}}function UNe(e,t){const n=VNe(t);for(const r of e.elements)n.some(i=>Ah(i,r))||n.push(r);return{arrayValue:{values:n}}}class Q2 extends iF{constructor(t){super(),this.elements=t}}function zNe(e,t){let n=VNe(t);for(const r of e.elements)n=n.filter(i=>!Ah(i,r));return{arrayValue:{values:n}}}class S$ extends iF{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function zde(e){return gs(e.integerValue||e.doubleValue)}function VNe(e){return yJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IOt{constructor(t,n){this.field=t,this.transform=n}}function kOt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof X2&&i instanceof X2||r instanceof Q2&&i instanceof Q2?qE(r.elements,i.elements,Ah):r instanceof S$&&i instanceof S$?Ah(r.Pe,i.Pe):r instanceof K2&&i instanceof K2}(e.transform,t.transform)}class ROt{constructor(t,n){this.version=t,this.transformResults=n}}class Uu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Uu}static exists(t){return new Uu(void 0,t)}static updateTime(t){return new Uu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function gD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class sF{}function HNe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new oF(e.key,Uu.none()):new kk(e.key,e.data,Uu.none());{const n=e.data,r=Cu.empty();let i=new Po(Co.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Dy(e.key,r,new El(i.toArray()),Uu.none())}}function NOt(e,t,n){e instanceof kk?function(i,s,o){const a=i.value.clone(),u=Hde(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Dy?function(i,s,o){if(!gD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Hde(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(qNe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function xC(e,t,n,r){return e instanceof kk?function(s,o,a,u){if(!gD(s.precondition,o))return a;const l=s.value.clone(),c=qde(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Dy?function(s,o,a,u){if(!gD(s.precondition,o))return a;const l=qde(s.fieldTransforms,u,o),c=o.data;return c.setAll(qNe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return gD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function POt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=BNe(r.transform,i||null);s!=null&&(n===null&&(n=Cu.empty()),n.set(r.field,s))}return n||null}function Vde(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qE(r,i,(s,o)=>kOt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class kk extends sF{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Dy extends sF{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function qNe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Hde(e,t,n){const r=new Map;ni(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,COt(o,a,n[i]))}return r}function qde(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,AOt(s,o,t))}return r}class oF extends sF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class DOt extends sF{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OOt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&NOt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=xC(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=xC(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=LNe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=HNe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(cn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Un())}isEqual(t){return this.batchId===t.batchId&&qE(this.mutations,t.mutations,(n,r)=>Vde(n,r))&&qE(this.baseMutations,t.baseMutations,(n,r)=>Vde(n,r))}}class wJ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ni(t.mutations.length===r.length);let i=function(){return wOt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new wJ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Ot{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MOt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hs,Jn;function LOt(e){switch(e){default:return on();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function WNe(e){if(e===void 0)return Nm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case hs.OK:return Be.OK;case hs.CANCELLED:return Be.CANCELLED;case hs.UNKNOWN:return Be.UNKNOWN;case hs.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case hs.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case hs.INTERNAL:return Be.INTERNAL;case hs.UNAVAILABLE:return Be.UNAVAILABLE;case hs.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case hs.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case hs.NOT_FOUND:return Be.NOT_FOUND;case hs.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case hs.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case hs.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case hs.ABORTED:return Be.ABORTED;case hs.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case hs.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case hs.DATA_LOSS:return Be.DATA_LOSS;default:return on()}}(Jn=hs||(hs={}))[Jn.OK=0]="OK",Jn[Jn.CANCELLED=1]="CANCELLED",Jn[Jn.UNKNOWN=2]="UNKNOWN",Jn[Jn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jn[Jn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jn[Jn.NOT_FOUND=5]="NOT_FOUND",Jn[Jn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jn[Jn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jn[Jn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jn[Jn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jn[Jn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jn[Jn.ABORTED=10]="ABORTED",Jn[Jn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jn[Jn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jn[Jn.INTERNAL=13]="INTERNAL",Jn[Jn.UNAVAILABLE=14]="UNAVAILABLE",Jn[Jn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FOt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jOt=new p1([4294967295,4294967295],0);function Wde(e){const t=FOt().encode(e),n=new mNe;return n.update(t),new Uint8Array(n.digest())}function Gde(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new p1([n,r],0),new p1([i,s],0)]}class EJ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new yA(`Invalid padding: ${n}`);if(r<0)throw new yA(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new yA(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new yA(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=p1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(p1.fromNumber(r)));return i.compare(jOt)===1&&(i=new p1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Wde(t),[r,i]=Gde(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new EJ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Wde(t),[r,i]=Gde(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class yA extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Rk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new aF(cn.min(),i,new Di(yr),Pm(),Un())}}class Rk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Rk(r,n,Un(),Un(),Un())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class GNe{constructor(t,n){this.targetId=t,this.me=n}}class YNe{constructor(t,n,r=ba.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Yde{constructor(){this.fe=0,this.ge=Xde(),this.pe=ba.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Un(),n=Un(),r=Un();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:on()}}),new Rk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Xde()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ni(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class BOt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Pm(),this.qe=Kde(),this.Qe=new Di(yr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:on()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(uV(s))if(r===0){const o=new Bt(s.path);this.Ue(n,o,aa.newNoDocument(o,cn.min()))}else ni(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=K1(r).toUint8Array()}catch(u){if(u instanceof SNe)return V2("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new EJ(o,i,s)}catch(u){return V2(u instanceof yA?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&uV(a.target)){const u=new Bt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,aa.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Un();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new aF(t,n,this.Qe,this.ke,r);return this.ke=Pm(),this.qe=Kde(),this.Qe=new Di(yr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Yde,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Po(yr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Yde),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Kde(){return new Di(Bt.comparator)}function Xde(){return new Di(Bt.comparator)}const UOt={asc:"ASCENDING",desc:"DESCENDING"},zOt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},VOt={and:"AND",or:"OR"};class HOt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function fV(e,t){return e.useProto3Json||tF(t)?t:{value:t}}function T$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function KNe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function qOt(e,t){return T$(e,t.toTimestamp())}function ch(e){return ni(!!e),cn.fromTimestamp(function(n){const r=Z0(n);return new $s(r.seconds,r.nanos)}(e))}function xJ(e,t){return dV(e,t).canonicalString()}function dV(e,t){const n=function(i){return new ai(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function XNe(e){const t=ai.fromString(e);return ni(tPe(t)),t}function hV(e,t){return xJ(e.databaseId,t.path)}function i9(e,t){const n=XNe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bt(JNe(n))}function QNe(e,t){return xJ(e.databaseId,t)}function WOt(e){const t=XNe(e);return t.length===4?ai.emptyPath():JNe(t)}function pV(e){return new ai(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function JNe(e){return ni(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Qde(e,t,n){return{name:hV(e,t),fields:n.value.mapValue.fields}}function GOt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:on()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ni(c===void 0||typeof c=="string"),ba.fromBase64String(c||"")):(ni(c===void 0||c instanceof Buffer||c instanceof Uint8Array),ba.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:WNe(l.code);return new bt(c,l.message||"")}(o);n=new YNe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=i9(e,r.document.name),s=ch(r.document.updateTime),o=r.document.createTime?ch(r.document.createTime):cn.min(),a=new Cu({mapValue:{fields:r.document.fields}}),u=aa.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new yD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=i9(e,r.document),s=r.readTime?ch(r.readTime):cn.min(),o=aa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new yD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=i9(e,r.document),s=r.removedTargetIds||[];n=new yD([],s,i,null)}else{if(!("filter"in t))return on();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new MOt(i,s),a=r.targetId;n=new GNe(a,o)}}return n}function YOt(e,t){let n;if(t instanceof kk)n={update:Qde(e,t.key,t.value)};else if(t instanceof oF)n={delete:hV(e,t.key)};else if(t instanceof Dy)n={update:Qde(e,t.key,t.data),updateMask:r3t(t.fieldMask)};else{if(!(t instanceof DOt))return on();n={verify:hV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof K2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof X2)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Q2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof S$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw on()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:qOt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:on()}(e,t.precondition)),n}function KOt(e,t){return e&&e.length>0?(ni(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?ch(i.updateTime):ch(s);return o.isEqual(cn.min())&&(o=ch(s)),new ROt(o,i.transformResults||[])}(n,t))):[]}function XOt(e,t){return{documents:[QNe(e,t.path)]}}function QOt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=QNe(e,i);const s=function(l){if(l.length!==0)return ePe(Vf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:B_(d.field),direction:e3t(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function JOt(e){let t=WOt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ni(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=ZNe(f);return d instanceof Vf&&INe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new Y2(U_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,tF(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new x$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new x$(h,d)}(n.endAt)),gOt(t,i,o,s,a,"F",u,l)}function ZOt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return on()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function ZNe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=U_(n.unaryFilter.field);return vs.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=U_(n.unaryFilter.field);return vs.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=U_(n.unaryFilter.field);return vs.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=U_(n.unaryFilter.field);return vs.create(o,"!=",{nullValue:"NULL_VALUE"});default:return on()}}(e):e.fieldFilter!==void 0?function(n){return vs.create(U_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return on()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Vf.create(n.compositeFilter.filters.map(r=>ZNe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return on()}}(n.compositeFilter.op))}(e):on()}function e3t(e){return UOt[e]}function t3t(e){return zOt[e]}function n3t(e){return VOt[e]}function B_(e){return{fieldPath:e.canonicalString()}}function U_(e){return Co.fromServerFormat(e.fieldPath)}function ePe(e){return e instanceof vs?function(n){if(n.op==="=="){if(Lde(n.value))return{unaryFilter:{field:B_(n.field),op:"IS_NAN"}};if(Mde(n.value))return{unaryFilter:{field:B_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lde(n.value))return{unaryFilter:{field:B_(n.field),op:"IS_NOT_NAN"}};if(Mde(n.value))return{unaryFilter:{field:B_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:B_(n.field),op:t3t(n.op),value:n.value}}}(e):e instanceof Vf?function(n){const r=n.getFilters().map(i=>ePe(i));return r.length===1?r[0]:{compositeFilter:{op:n3t(n.op),filters:r}}}(e):on()}function r3t(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function tPe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(t,n,r,i,s=cn.min(),o=cn.min(),a=ba.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Gg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Gg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Gg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Gg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3t{constructor(t){this.ct=t}}function s3t(e){const t=JOt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?cV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3t{constructor(){this._n=new a3t}addToCollectionParentIndex(t,n){return this._n.add(n),Xe.resolve()}getCollectionParents(t,n){return Xe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Xe.resolve()}deleteFieldIndex(t,n){return Xe.resolve()}deleteAllFieldIndexes(t){return Xe.resolve()}createTargetIndexes(t,n){return Xe.resolve()}getDocumentsMatchingTarget(t,n){return Xe.resolve(null)}getIndexType(t,n){return Xe.resolve(0)}getFieldIndexes(t,n){return Xe.resolve([])}getNextCollectionGroupToUpdate(t){return Xe.resolve(null)}getMinOffset(t,n){return Xe.resolve(J0.min())}getMinOffsetFromCollectionGroup(t,n){return Xe.resolve(J0.min())}updateCollectionGroup(t,n,r){return Xe.resolve()}updateIndexEntries(t,n){return Xe.resolve()}}class a3t{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Po(ai.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Po(ai.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new YE(0)}static Ln(){return new YE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3t{constructor(){this.changes=new yS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,aa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Xe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3t{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3t{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&xC(r.mutation,i,El.empty(),$s.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Un()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Un()){const i=n1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=gA();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=n1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Un()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Pm();const o=EC(),a=function(){return EC()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Dy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),xC(c.mutation,l,c.mutation.getFieldMask(),$s.now())):o.set(l.key,El.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new l3t(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=EC();let i=new Di((o,a)=>o-a),s=Un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||El.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Un()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=LNe();c.forEach(d=>{if(!s.has(d)){const h=HNe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):PNe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Xe.resolve(n1());let a=-1,u=s;return o.next(l=>Xe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Xe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Un())).next(c=>({batchId:a,changes:MNe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Bt(n)).next(r=>{let i=gA();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=gA();return this.indexManager.getCollectionParents(t,s).next(a=>Xe.forEach(a,u=>{const l=function(f,d){return new gS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,aa.newInvalidDocument(c)))});let a=gA();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&xC(c.mutation,l,El.empty(),$s.now()),rF(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3t{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Xe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ch(i.createTime)}}(n)),Xe.resolve()}getNamedQuery(t,n){return Xe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:s3t(i.bundledQuery),readTime:ch(i.readTime)}}(n)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3t{constructor(){this.overlays=new Di(Bt.comparator),this.hr=new Map}getOverlay(t,n){return Xe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=n1();return Xe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Xe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Xe.resolve()}getOverlaysForCollection(t,n,r){const i=n1(),s=n.length+1,o=new Bt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Xe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Di((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=n1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=n1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Xe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $Ot(n,r));let s=this.hr.get(n);s===void 0&&(s=Un(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SJ{constructor(){this.Pr=new Po(Ks.Ir),this.Tr=new Po(Ks.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ks(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ks(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Bt(new ai([])),r=new Ks(n,t),i=new Ks(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Bt(new ai([])),r=new Ks(n,t),i=new Ks(n,t+1);let s=Un();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ks(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ks{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Bt.comparator(t.key,n.key)||yr(t.pr,n.pr)}static Er(t,n){return yr(t.pr,n.pr)||Bt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3t{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Po(Ks.Ir)}checkEmpty(t){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new OOt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ks(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Xe.resolve(o)}lookupMutationBatch(t,n){return Xe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ks(n,0),i=new Ks(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Po(yr);return n.forEach(i=>{const s=new Ks(i,0),o=new Ks(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Xe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Bt.isDocumentKey(s)||(s=s.child(""));const o=new Ks(new Bt(s),0);let a=new Po(yr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Xe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ni(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Xe.forEach(n.mutations,i=>{const s=new Ks(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ks(n,0),i=this.wr.firstAfterOrEqual(r);return Xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Xe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3t{constructor(t){this.vr=t,this.docs=function(){return new Di(Bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Xe.resolve(r?r.document.mutableCopy():aa.newInvalidDocument(n))}getEntries(t,n){let r=Pm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():aa.newInvalidDocument(i))}),Xe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Pm();const o=n.path,a=new Bt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||JDt(QDt(c),r)<=0||(i.has(c.key)||rF(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Xe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){on()}Fr(t,n){return Xe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new m3t(this)}getSize(t){return Xe.resolve(this.size)}}class m3t extends u3t{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Xe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3t{constructor(t){this.persistence=t,this.Mr=new yS(n=>vJ(n),bJ),this.lastRemoteSnapshotVersion=cn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new SJ,this.targetCount=0,this.Lr=YE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Xe.resolve()}getLastRemoteSnapshotVersion(t){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Xe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Xe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new YE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Xe.resolve()}updateTargetData(t,n){return this.qn(n),Xe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Xe.waitFor(s).next(()=>i)}getTargetCount(t){return Xe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Xe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Xe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Xe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Xe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Xe.resolve(r)}containsKey(t,n){return Xe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3t{constructor(t,n){this.Br={},this.overlays={},this.kr=new pJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new g3t(this),this.indexManager=new o3t,this.remoteDocumentCache=function(i){return new p3t(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new i3t(n),this.$r=new f3t(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new d3t,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new h3t(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new v3t(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Xe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class v3t extends eOt{constructor(t){super(),this.currentSequenceNumber=t}}class TJ{constructor(t){this.persistence=t,this.zr=new SJ,this.jr=null}static Hr(t){return new TJ(t)}get Jr(){if(this.jr)return this.jr;throw on()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Xe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Xe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Xe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Jr,r=>{const i=Bt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,cn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Xe.or([()=>Xe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AJ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Un(),i=Un();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new AJ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b3t{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3t{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ZIt()?8:tOt(Mo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new b3t;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(wT()<=Wn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",j_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Xe.resolve()):(wT()<=Wn.DEBUG&&It("QueryEngine","Query:",j_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(wT()<=Wn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",j_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,lh(n))):Xe.resolve())}ji(t,n){if(Ude(n))return Xe.resolve(null);let r=lh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=cV(n,null,"F"),r=lh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Un(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,cV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Ude(n)||i.isEqual(cn.min())?Xe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Xe.resolve(null):(wT()<=Wn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),j_(n)),this.es(t,o,n,XDt(i,-1)).next(a=>a))})}Zi(t,n){let r=new Po(ONe(t));return n.forEach((i,s)=>{rF(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return wT()<=Wn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",j_(n)),this.zi.getDocumentsMatchingQuery(t,n,J0.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3t{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Di(yr),this.rs=new yS(s=>vJ(s),bJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new c3t(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function E3t(e,t,n,r){return new w3t(e,t,n,r)}async function nPe(e,t){const n=fn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Un();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function x3t(e,t){const n=fn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Xe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ni(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Un();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function rPe(e){const t=fn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function S3t(e,t){const n=fn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ba.EMPTY_BYTE_STRING,cn.min()).withLastLimboFreeSnapshotVersion(cn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Pm(),l=Un();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(T3t(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(cn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Xe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function T3t(e,t,n){let r=Un(),i=Un();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Pm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(cn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function A3t(e,t){const n=fn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function C3t(e,t){const n=fn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Xe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Gg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function mV(e,t,n){const r=fn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ik(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Jde(e,t,n){const r=fn(e);let i=cn.min(),s=Un();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=fn(u),d=f.rs.get(c);return d!==void 0?Xe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,lh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:cn.min(),n?s:Un())).next(a=>(I3t(r,vOt(t),a),{documents:a,hs:s})))}function I3t(e,t,n){let r=e.ss.get(t)||cn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Zde{constructor(){this.activeTargetIds=SOt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class k3t{constructor(){this.no=new Zde,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Zde,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3t{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ehe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HN=null;function s9(){return HN===null?HN=function(){return 268435456+Math.round(2147483648*Math.random())}():HN++,"0x"+HN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3t={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3t{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="WebChannelConnection";class D3t extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=s9(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw V2("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=N3t[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=s9();return new Promise((o,a)=>{const u=new gNe;u.setWithCredentials(!0),u.listenOnce(vNe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case pD.NO_ERROR:const c=u.getResponseJson();It(Zo,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case pD.TIMEOUT:It(Zo,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case pD.HTTP_ERROR:const f=u.getStatus();if(It(Zo,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:on()}}finally{It(Zo,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(Zo,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=s9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=wNe(),a=_Ne(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new yNe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(Zo,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new P3t({lo:g=>{h?It(Zo,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(Zo,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(Zo,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,mA.EventType.OPEN,()=>{h||(It(Zo,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,mA.EventType.CLOSE,()=>{h||(h=!0,It(Zo,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,mA.EventType.ERROR,g=>{h||(h=!0,V2(Zo,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,mA.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ni(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){It(Zo,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let S=function(C){const I=hs[C];if(I!==void 0)return WNe(I)}(E),T=w.message;S===void 0&&(S=Be.INTERNAL,T="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new bt(S,T)),f.close()}else It(Zo,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,bNe.STAT_EVENT,g=>{g.stat===iV.PROXY?It(Zo,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===iV.NOPROXY&&It(Zo,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function o9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(e){return new HOt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iPe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sPe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new iPe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Nm(n.toString()),Nm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O3t extends sPe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=GOt(this.serializer,t),r=function(s){if(!("targetChange"in s))return cn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?cn.min():o.readTime?ch(o.readTime):cn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=pV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=uV(u)?{documents:XOt(s,u)}:{query:QOt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=KNe(s,o.resumeToken);const l=fV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(cn.min())>0){a.readTime=T$(s,o.snapshotVersion.toTimestamp());const l=fV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=ZOt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=pV(this.serializer),n.removeTarget=t,this.i_(n)}}class $3t extends sPe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ni(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=KOt(t.writeResults,t.commitTime),r=ch(t.commitTime);return this.listener.A_(r,n)}return ni(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=pV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>YOt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3t extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,dV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,dV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class L3t{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Nm(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3t{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{$b(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=fn(u);l.M_.add(4),await Pk(l),l.N_.set("Unknown"),l.M_.delete(4),await Nk(l)}(this))})}),this.N_=new L3t(r,i)}}async function Nk(e){if($b(e))for(const t of e.x_)await t(!0)}async function Pk(e){for(const t of e.x_)await t(!1)}function oPe(e,t){const n=fn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),RJ(n)?kJ(n):vS(n).Xo()&&IJ(n,t))}function CJ(e,t){const n=fn(e),r=vS(n);n.F_.delete(t),r.Xo()&&aPe(n,t),n.F_.size===0&&(r.Xo()?r.n_():$b(n)&&n.N_.set("Unknown"))}function IJ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(cn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}vS(e).P_(t)}function aPe(e,t){e.L_.xe(t),vS(e).I_(t)}function kJ(e){e.L_=new BOt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),vS(e).start(),e.N_.w_()}function RJ(e){return $b(e)&&!vS(e).Zo()&&e.F_.size>0}function $b(e){return fn(e).M_.size===0}function uPe(e){e.L_=void 0}async function j3t(e){e.N_.set("Online")}async function B3t(e){e.F_.forEach((t,n)=>{IJ(e,t)})}async function U3t(e,t){uPe(e),RJ(e)?(e.N_.D_(t),kJ(e)):e.N_.set("Unknown")}async function z3t(e,t,n){if(e.N_.set("Online"),t instanceof YNe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await A$(e,r)}else if(t instanceof yD?e.L_.Ke(t):t instanceof GNe?e.L_.He(t):e.L_.We(t),!n.isEqual(cn.min()))try{const r=await rPe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(ba.EMPTY_BYTE_STRING,c.snapshotVersion)),aPe(s,u);const f=new Gg(c.target,u,l,c.sequenceNumber);IJ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await A$(e,r)}}async function A$(e,t,n){if(!Ik(t))throw t;e.M_.add(1),await Pk(e),e.N_.set("Offline"),n||(n=()=>rPe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Nk(e)})}function lPe(e,t){return t().catch(n=>A$(e,n,t))}async function lF(e){const t=fn(e),n=ey(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;V3t(t);)try{const i=await A3t(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,H3t(t,i)}catch(i){await A$(t,i)}cPe(t)&&fPe(t)}function V3t(e){return $b(e)&&e.v_.length<10}function H3t(e,t){e.v_.push(t);const n=ey(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function cPe(e){return $b(e)&&!ey(e).Zo()&&e.v_.length>0}function fPe(e){ey(e).start()}async function q3t(e){ey(e).V_()}async function W3t(e){const t=ey(e);for(const n of e.v_)t.d_(n.mutations)}async function G3t(e,t,n){const r=e.v_.shift(),i=wJ.from(r,t,n);await lPe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await lF(e)}async function Y3t(e,t){t&&ey(e).E_&&await async function(r,i){if(function(o){return LOt(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();ey(r).t_(),await lPe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await lF(r)}}(e,t),cPe(e)&&fPe(e)}async function the(e,t){const n=fn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=$b(n);n.M_.add(3),await Pk(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Nk(n)}async function K3t(e,t){const n=fn(e);t?(n.M_.delete(2),await Nk(n)):t||(n.M_.add(2),await Pk(n),n.N_.set("Unknown"))}function vS(e){return e.B_||(e.B_=function(n,r,i){const s=fn(n);return s.f_(),new O3t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:j3t.bind(null,e),To:B3t.bind(null,e),Ao:U3t.bind(null,e),h_:z3t.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),RJ(e)?kJ(e):e.N_.set("Unknown")):(await e.B_.stop(),uPe(e))})),e.B_}function ey(e){return e.k_||(e.k_=function(n,r,i){const s=fn(n);return s.f_(),new $3t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:q3t.bind(null,e),Ao:Y3t.bind(null,e),R_:W3t.bind(null,e),A_:G3t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await lF(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NJ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new em,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new NJ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function PJ(e,t){if(Nm("AsyncQueue",`${t}: ${e}`),Ik(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Bt.comparator(n.key,r.key):(n,r)=>Bt.comparator(n.key,r.key),this.keyedMap=gA(),this.sortedSet=new Di(this.comparator)}static emptySet(t){return new Yw(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Yw)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Yw;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nhe{constructor(){this.q_=new Di(Bt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):on():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class KE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new KE(t,n,Yw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&nF(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class Q3t{constructor(){this.queries=new yS(t=>DNe(t),nF),this.onlineState="Unknown",this.z_=new Set}}async function dPe(e,t){const n=fn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new X3t,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=PJ(o,`Initialization of query '${j_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&DJ(n)}async function hPe(e,t){const n=fn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function J3t(e,t){const n=fn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&DJ(n)}function Z3t(e,t,n){const r=fn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function DJ(e){e.z_.forEach(t=>{t.next()})}var gV,rhe;(rhe=gV||(gV={})).J_="default",rhe.Cache="cache";class pPe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new KE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=KE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==gV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mPe{constructor(t){this.key=t}}class gPe{constructor(t){this.key=t}}class e$t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Un(),this.mutatedKeys=Un(),this.Ia=ONe(t),this.Ta=new Yw(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new nhe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=rF(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return on()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new KE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new nhe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Un(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new gPe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new mPe(r))}),n}pa(t){this.la=t.hs,this.Pa=Un();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return KE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class t$t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class n$t{constructor(t){this.key=t,this.wa=!1}}class r$t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new yS(a=>DNe(a),nF),this.Da=new Map,this.Ca=new Set,this.va=new Di(Bt.comparator),this.Fa=new Map,this.Ma=new SJ,this.xa={},this.Oa=new Map,this.Na=YE.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function i$t(e,t,n=!0){const r=EPe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await yPe(r,t,n,!0),i}async function s$t(e,t){const n=EPe(e);await yPe(n,t,!0,!1)}async function yPe(e,t,n,r){const i=await C3t(e.localStore,lh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await o$t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&oPe(e.remoteStore,i),a}async function o$t(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await Jde(m.localStore,g.query,!1).then(({documents:T})=>g.view.da(T,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,w,E);return she(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await Jde(e.localStore,t,!0),o=new e$t(t,s.hs),a=o.da(s.documents),u=Rk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);she(e,n,l.fa);const c=new t$t(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function a$t(e,t,n){const r=fn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!nF(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await mV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&CJ(r.remoteStore,i.targetId),yV(r,i.targetId)}).catch(Ck)):(yV(r,i.targetId),await mV(r.localStore,i.targetId,!0))}async function u$t(e,t){const n=fn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),CJ(n.remoteStore,r.targetId))}async function l$t(e,t,n){const r=g$t(e);try{const i=await function(o,a){const u=fn(o),l=$s.now(),c=a.reduce((h,p)=>h.add(p.key),Un());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Pm(),m=Un();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=POt(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Dy(v.key,b,TNe(b.value.mapValue),Uu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:MNe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Di(yr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await Dk(r,i.changes),await lF(r.remoteStore)}catch(i){const s=PJ(i,"Failed to persist write");n.reject(s)}}async function vPe(e,t){const n=fn(e);try{const r=await S3t(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ni(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ni(o.wa):i.removedDocuments.size>0&&(ni(o.wa),o.wa=!1))}),await Dk(n,r,t)}catch(r){await Ck(r)}}function ihe(e,t,n){const r=fn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=fn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&DJ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function c$t(e,t,n){const r=fn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Di(Bt.comparator);o=o.insert(s,aa.newNoDocument(s,cn.min()));const a=Un().add(s),u=new aF(cn.min(),new Map,new Di(yr),o,a);await vPe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),OJ(r)}else await mV(r.localStore,t,!1).then(()=>yV(r,t,n)).catch(Ck)}async function f$t(e,t){const n=fn(e),r=t.batch.batchId;try{const i=await x3t(n.localStore,t);_Pe(n,r,null),bPe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Dk(n,i)}catch(i){await Ck(i)}}async function d$t(e,t,n){const r=fn(e);try{const i=await function(o,a){const u=fn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ni(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);_Pe(r,t,n),bPe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Dk(r,i)}catch(i){await Ck(i)}}function bPe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function _Pe(e,t,n){const r=fn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function yV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||wPe(e,r)})}function wPe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(CJ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),OJ(e))}function she(e,t,n){for(const r of n)r instanceof mPe?(e.Ma.addReference(r.key,t),h$t(e,r)):r instanceof gPe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||wPe(e,r.key)):on()}function h$t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),OJ(e))}function OJ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Bt(ai.fromString(t)),r=e.Na.next();e.Fa.set(r,new n$t(n)),e.va=e.va.insert(n,r),oPe(e.remoteStore,new Gg(lh(_J(n.path)),r,"TargetPurposeLimboResolution",pJ.oe))}}async function Dk(e,t,n){const r=fn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=AJ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=fn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(l,d=>Xe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Xe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!Ik(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function p$t(e,t){const n=fn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await nPe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Dk(n,r.us)}}function m$t(e,t){const n=fn(e),r=n.Fa.get(t);if(r&&r.wa)return Un().add(r.key);{let i=Un();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function EPe(e){const t=fn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=vPe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=m$t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=c$t.bind(null,t),t.Sa.h_=J3t.bind(null,t.eventManager),t.Sa.ka=Z3t.bind(null,t.eventManager),t}function g$t(e){const t=fn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=f$t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=d$t.bind(null,t),t}class ohe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=uF(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return E3t(this.persistence,new _3t,t.initialUser,this.serializer)}createPersistence(t){return new y3t(TJ.Hr,this.serializer)}createSharedClientState(t){return new k3t}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class y$t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ihe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=p$t.bind(null,this.syncEngine),await K3t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Q3t}()}createDatastore(t){const n=uF(t.databaseInfo.databaseId),r=function(s){return new D3t(s)}(t.databaseInfo);return function(s,o,a,u){return new M3t(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new F3t(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>ihe(this.syncEngine,n,0),function(){return ehe.D()?new ehe:new R3t}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new r$t(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=fn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Pk(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xPe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Nm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v$t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=gu.UNAUTHENTICATED,this.clientId=ENe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new em;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=PJ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function a9(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await nPe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function ahe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await SPe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>the(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>the(t.remoteStore,i)),e._onlineComponents=t}function b$t(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function SPe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await a9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!b$t(n))throw n;V2("Error using user provided cache. Falling back to memory cache: "+n),await a9(e,new ohe)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await a9(e,new ohe);return e._offlineComponents}async function $J(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await ahe(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await ahe(e,new y$t))),e._onlineComponents}function _$t(e){return SPe(e).then(t=>t.persistence)}function w$t(e){return $J(e).then(t=>t.remoteStore)}function E$t(e){return $J(e).then(t=>t.syncEngine)}async function TPe(e){const t=await $J(e),n=t.eventManager;return n.onListen=i$t.bind(null,t.syncEngine),n.onUnlisten=a$t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=s$t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=u$t.bind(null,t.syncEngine),n}function x$t(e){return e.asyncQueue.enqueue(async()=>{const t=await _$t(e),n=await w$t(e);return t.setNetworkEnabled(!0),function(i){const s=fn(i);return s.M_.delete(0),Nk(s)}(n)})}function S$t(e,t,n={}){const r=new em;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new xPe({next:d=>{o.enqueueAndForget(()=>hPe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new pPe(_J(a.path),c,{includeMetadataChanges:!0,ra:!0});return dPe(s,f)}(await TPe(e),e.asyncQueue,t,n,r)),r.promise}function T$t(e,t,n={}){const r=new em;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new xPe({next:d=>{o.enqueueAndForget(()=>hPe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new pPe(a,c,{includeMetadataChanges:!0,ra:!0});return dPe(s,f)}(await TPe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function APe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uhe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CPe(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function A$t(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function lhe(e){if(!Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function che(e){if(Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function cF(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":on()}function Hf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=cF(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fhe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}A$t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=APe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class MJ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fhe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fhe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zDt;switch(r.type){case"firstParty":return new qDt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=uhe.get(n);r&&(It("ComponentProvider","Removing Datastore"),uhe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Mb(this.firestore,t,this._query)}}class Wa{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Wa(this.firestore,t,this._key)}}class _0 extends Mb{constructor(t,n,r){super(t,n,_J(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Wa(this.firestore,null,new Bt(t))}withConverter(t){return new _0(this.firestore,t,this._path)}}function Jc(e,t,...n){if(e=ri(e),CPe("collection","path",t),e instanceof MJ){const r=ai.fromString(t,...n);return che(r),new _0(e,null,r)}{if(!(e instanceof Wa||e instanceof _0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ai.fromString(t,...n));return che(r),new _0(e.firestore,null,r)}}function Ts(e,t,...n){if(e=ri(e),arguments.length===1&&(t=ENe.newId()),CPe("doc","path",t),e instanceof MJ){const r=ai.fromString(t,...n);return lhe(r),new Wa(e,null,new Bt(r))}{if(!(e instanceof Wa||e instanceof _0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ai.fromString(t,...n));return lhe(r),new Wa(e.firestore,e instanceof _0?e.converter:null,new Bt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C$t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new iPe(this,"async_queue_retry"),this.hu=()=>{const n=o9();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=o9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=o9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new em;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Ik(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Nm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=NJ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&on()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Oy extends MJ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new C$t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||IPe(this),this._firestoreClient.terminate()}}function I$t(e,t,n){n||(n="(default)");const r=hS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(B2(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function Ok(e){return e._firestoreClient||IPe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function IPe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new iOt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,APe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new v$t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function k$t(e){return x$t(Ok(e=Hf(e,Oy)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new XE(ba.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new XE(ba.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Co(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let LJ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return yr(this._lat,t._lat)||yr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$t=/^__.*__$/;class N$t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Dy(t,this.data,this.fieldMask,n,this.fieldTransforms):new kk(t,this.data,n,this.fieldTransforms)}}class kPe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Dy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function RPe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw on()}}class FJ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new FJ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return C$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(RPe(this.fu)&&R$t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class P$t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||uF(t)}Fu(t,n,r,i=!1){return new FJ({fu:t,methodName:n,vu:r,path:Co.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function dF(e){const t=e._freezeSettings(),n=uF(e._databaseId);return new P$t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function NPe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);BJ("Data must be an object, but it was:",o,r);const a=OPe(r,o);let u,l;if(s.merge)u=new El(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=vV(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);MPe(c,d)||c.push(d)}u=new El(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new N$t(new Cu(a),u,l)}class hF extends fF{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof hF}}class jJ extends fF{_toFieldTransform(t){return new IOt(t.path,new K2)}isEqual(t){return t instanceof jJ}}function PPe(e,t,n,r){const i=e.Fu(1,t,n);BJ("Data must be an object, but it was:",i,r);const s=[],o=Cu.empty();Ob(r,(u,l)=>{const c=UJ(t,u,n);l=ri(l);const f=i.Su(c);if(l instanceof hF)s.push(c);else{const d=Mk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new El(s);return new kPe(o,a,i.fieldTransforms)}function DPe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[vV(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(vV(t,s[d])),u.push(s[d+1]);const l=[],c=Cu.empty();for(let d=a.length-1;d>=0;--d)if(!MPe(l,a[d])){const h=a[d];let p=u[d];p=ri(p);const m=o.Su(h);if(p instanceof hF)l.push(h);else{const g=Mk(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new El(l);return new kPe(c,f,o.fieldTransforms)}function D$t(e,t,n,r=!1){return Mk(n,e.Fu(r?4:3,t))}function Mk(e,t){if($Pe(e=ri(e)))return BJ("Unsupported field value:",t,e),OPe(e,t);if(e instanceof fF)return function(r,i){if(!RPe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Mk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ri(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TOt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=$s.fromDate(r);return{timestampValue:T$(i.serializer,s)}}if(r instanceof $s){const s=new $s(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:T$(i.serializer,s)}}if(r instanceof LJ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof XE)return{bytesValue:KNe(i.serializer,r._byteString)};if(r instanceof Wa){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:xJ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${cF(r)}`)}(e,t)}function OPe(e,t){const n={};return xNe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ob(e,(r,i)=>{const s=Mk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function $Pe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof $s||e instanceof LJ||e instanceof XE||e instanceof Wa||e instanceof fF)}function BJ(e,t,n){if(!$Pe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=cF(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function vV(e,t,n){if((t=ri(t))instanceof $k)return t._internalPath;if(typeof t=="string")return UJ(e,t);throw C$("Field path arguments must be of type string or ",e,!1,void 0,n)}const O$t=new RegExp("[~\\*/\\[\\]]");function UJ(e,t,n){if(t.search(O$t)>=0)throw C$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new $k(...t.split("."))._internalPath}catch{throw C$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function C$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function MPe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LPe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Wa(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new $$t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(pF("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class $$t extends LPe{data(){return super.data()}}function pF(e,t){return typeof t=="string"?UJ(e,t):t instanceof $k?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M$t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zJ{}class FPe extends zJ{}function dhe(e,t,...n){let r=[];t instanceof zJ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof VJ).length,a=s.filter(u=>u instanceof mF).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class mF extends FPe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new mF(t,n,r)}_apply(t){const n=this._parse(t);return jPe(t._query,n),new Mb(t.firestore,t.converter,lV(t._query,n))}_parse(t){const n=dF(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){phe(f,c);const h=[];for(const p of f)h.push(hhe(u,s,p));d={arrayValue:{values:h}}}else d=hhe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||phe(f,c),d=D$t(a,o,f,c==="in"||c==="not-in");return vs.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function L$t(e,t,n){const r=t,i=pF("where",e);return mF._create(i,r,n)}class VJ extends zJ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new VJ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Vf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)jPe(o,u),o=lV(o,u)}(t._query,n),new Mb(t.firestore,t.converter,lV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class HJ extends FPe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new HJ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Y2(s,o)}(t._query,this._field,this._direction);return new Mb(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new gS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function F$t(e,t="asc"){const n=t,r=pF("orderBy",e);return HJ._create(r,n)}function hhe(e,t,n){if(typeof(n=ri(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!PNe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ai.fromString(n));if(!Bt.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $de(e,new Bt(r))}if(n instanceof Wa)return $de(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cF(n)}.`)}function phe(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function jPe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class j$t{convertValue(t,n="none"){switch(X1(t)){case 0:return null;case 1:return t.booleanValue;case 2:return gs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(K1(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw on()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Ob(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new LJ(gs(t.latitude),gs(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=gJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(q2(t));default:return null}}convertTimestamp(t){const n=Z0(t);return new $s(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ai.fromString(t);ni(tPe(r));const i=new W2(r.get(1),r.get(3)),s=new Bt(r.popFirst(5));return i.isEqual(n)||Nm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BPe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class UPe extends LPe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new vD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(pF("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class vD extends UPe{data(t={}){return super.data(t)}}class B$t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new vA(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new vD(this._firestore,this._userDataWriter,r.key,r,new vA(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new vD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new vD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new vA(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:U$t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function U$t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return on()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u9(e){e=Hf(e,Wa);const t=Hf(e.firestore,Oy);return S$t(Ok(t),e._key).then(n=>H$t(t,e,n))}class zPe extends j$t{constructor(t){super(),this.firestore=t}convertBytes(t){return new XE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Wa(this.firestore,null,n)}}function ET(e){e=Hf(e,Mb);const t=Hf(e.firestore,Oy),n=Ok(t),r=new zPe(t);return M$t(e._query),T$t(n,e._query).then(i=>new B$t(t,r,e,i))}function al(e,t,n){e=Hf(e,Wa);const r=Hf(e.firestore,Oy),i=BPe(e.converter,t,n);return gF(r,[NPe(dF(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Uu.none())])}function z$t(e,t,n,...r){e=Hf(e,Wa);const i=Hf(e.firestore,Oy),s=dF(i);let o;return o=typeof(t=ri(t))=="string"||t instanceof $k?DPe(s,"updateDoc",e._key,t,n,r):PPe(s,"updateDoc",e._key,t),gF(i,[o.toMutation(e._key,Uu.exists(!0))])}function V$t(e){return gF(Hf(e.firestore,Oy),[new oF(e._key,Uu.none())])}function gF(e,t){return function(r,i){const s=new em;return r.asyncQueue.enqueueAndForget(async()=>l$t(await E$t(r),i,s)),s.promise}(Ok(e),t)}function H$t(e,t,n){const r=n.docs.get(t._key),i=new zPe(e);return new UPe(e,i,t._key,r,new vA(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q$t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=dF(t)}set(t,n,r){this._verifyNotCommitted();const i=l9(t,this._firestore),s=BPe(i.converter,n,r),o=NPe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Uu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=l9(t,this._firestore);let o;return o=typeof(n=ri(n))=="string"||n instanceof $k?DPe(this._dataReader,"WriteBatch.update",s._key,n,r,i):PPe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Uu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=l9(t,this._firestore);return this._mutations=this._mutations.concat(new oF(n._key,Uu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function l9(e,t){if((e=ri(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function W$t(){return new jJ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mhe(e){return Ok(e=Hf(e,Oy)),new q$t(e,t=>gF(e,t))}(function(t,n=!0){(function(i){mS=i})(Db),km(new Sh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Oy(new VDt(r.getProvider("auth-internal")),new GDt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new W2(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Of(Nde,"4.6.3",t),Of(Nde,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bV=new Map,VPe={activated:!1,tokenObservers:[]},G$t={initialized:!1,enabled:!1};function Ms(e){return bV.get(e)||Object.assign({},VPe)}function Y$t(e,t){return bV.set(e,t),bV.get(e)}function yF(){return G$t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HPe="https://content-firebaseappcheck.googleapis.com/v1",K$t="exchangeRecaptchaV3Token",X$t="exchangeDebugToken",ghe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Q$t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J$t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new j2,this.pending.promise.catch(n=>{}),await Z$t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new j2,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function Z$t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eMt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ou=new dS("appCheck","AppCheck",eMt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yhe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function qJ(e){if(!Ms(e).activated)throw Ou.create("use-before-activation",{appName:e.name})}function qPe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=qN(n)+"d:"),r&&(o+=qN(r)+"h:"),o+=qN(i)+"m:"+qN(s)+"s",o}function qN(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WJ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Ou.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Ou.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Ou.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Ou.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function tMt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${HPe}/projects/${n}/apps/${r}:${K$t}?key=${i}`,body:{recaptcha_v3_token:t}}}function WPe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${HPe}/projects/${n}/apps/${r}:${X$t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nMt="firebase-app-check-database",rMt=1,J2="firebase-app-check-store",GPe="debug-token";let WN=null;function YPe(){return WN||(WN=new Promise((e,t)=>{try{const n=indexedDB.open(nMt,rMt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Ou.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(J2,{keyPath:"compositeKey"})}}}catch(n){t(Ou.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),WN)}function iMt(e){return XPe(QPe(e))}function sMt(e,t){return KPe(QPe(e),t)}function oMt(e){return KPe(GPe,e)}function aMt(){return XPe(GPe)}async function KPe(e,t){const r=(await YPe()).transaction(J2,"readwrite"),s=r.objectStore(J2).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Ou.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function XPe(e){const n=(await YPe()).transaction(J2,"readonly"),i=n.objectStore(J2).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Ou.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function QPe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=new Y6("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uMt(e){if(YQ()){let t;try{t=await iMt(e)}catch(n){Z2.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function c9(e,t){return YQ()?sMt(e,t).catch(n=>{Z2.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function lMt(){let e;try{e=await aMt()}catch{}if(e)return e;{const t=ukt();return oMt(t).catch(n=>Z2.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GJ(){return yF().enabled}async function YJ(){const e=yF();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function cMt(){const e=pRe(),t=yF();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new j2;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(lMt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fMt={error:"UNKNOWN_ERROR"};function dMt(e){return GQ.encodeString(JSON.stringify(e),!1)}async function _V(e,t=!1){const n=e.app;qJ(n);const r=Ms(n);let i=r.token,s;if(i&&!cw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(cw(u)?i=u:await c9(n,void 0))}if(!t&&i&&cw(i))return{token:i.token};let o=!1;if(GJ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=WJ(WPe(n,await YJ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await c9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Ms(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?Z2.warn(u.message):Z2.error(u),s=u}let a;return i?s?cw(i)?a={token:i.token,internalError:s}:a=bhe(s):(a={token:i.token},r.token=i,await c9(n,i)):a=bhe(s),o&&eDe(n,a),a}async function hMt(e){const t=e.app;qJ(t);const{provider:n}=Ms(t);if(GJ()){const r=await YJ(),{token:i}=await WJ(WPe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function JPe(e,t,n,r){const{app:i}=e,s=Ms(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&cw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),vhe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>vhe(e))}function ZPe(e,t){const n=Ms(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function vhe(e){const{app:t}=e,n=Ms(t);let r=n.tokenRefresher;r||(r=pMt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function pMt(e){const{app:t}=e;return new J$t(async()=>{const n=Ms(t);let r;if(n.token?r=await _V(e,!0):r=await _V(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Ms(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},ghe.RETRIAL_MIN_WAIT,ghe.RETRIAL_MAX_WAIT)}function eDe(e,t){const n=Ms(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function cw(e){return e.expireTimeMillis-Date.now()>0}function bhe(e){return{token:dMt(fMt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mMt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Ms(this.app);for(const n of t)ZPe(this.app,n.next);return Promise.resolve()}}function gMt(e,t){return new mMt(e,t)}function yMt(e){return{getToken:t=>_V(e,t),getLimitedUseToken:()=>hMt(e),addTokenListener:t=>JPe(e,"INTERNAL",t),removeTokenListener:t=>ZPe(e.app,t)}}const vMt="@firebase/app-check",bMt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Mt="https://www.google.com/recaptcha/api.js";function wMt(e,t){const n=new j2,r=Ms(e);r.reCAPTCHAState={initialized:n};const i=EMt(e),s=yhe(!1);return s?_he(e,t,s,i,n):TMt(()=>{const o=yhe(!1);if(!o)throw new Error("no recaptcha");_he(e,t,o,i,n)}),n.promise}function _he(e,t,n,r,i){n.ready(()=>{SMt(e,t,n,r),i.resolve(n)})}function EMt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function xMt(e){qJ(e);const n=await Ms(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Ms(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function SMt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Ms(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Ms(e).reCAPTCHAState.succeeded=!1}}),s=Ms(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function TMt(e){const t=document.createElement("script");t.src=_Mt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KJ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;CMt(this._throttleData);const i=await xMt(this._app).catch(o=>{throw Ou.create("recaptcha-error")});if(!(!((t=Ms(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Ou.create("recaptcha-error");let s;try{s=await WJ(tMt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=AMt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Ou.create("throttled",{time:qPe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=hS(t,"heartbeat"),wMt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof KJ?this._siteKey===t._siteKey:!1}}function AMt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Q$t,httpStatus:e};{const n=t?t.backoffCount:0,r=hkt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function CMt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Ou.create("throttled",{time:qPe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IMt(e=XQ(),t){e=ri(e);const n=hS(e,"app-check");if(yF().initialized||cMt(),GJ()&&YJ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Ou.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return kMt(e,t.provider,t.isTokenAutoRefreshEnabled),Ms(e).isTokenAutoRefreshEnabled&&JPe(r,"INTERNAL",()=>{}),r}function kMt(e,t,n){const r=Y$t(e,Object.assign({},VPe));r.activated=!0,r.provider=t,r.cachedTokenPromise=uMt(e).then(i=>(i&&cw(i)&&(r.token=i,eDe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const RMt="app-check",whe="app-check-internal";function NMt(){km(new Sh(RMt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return gMt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(whe).initialize()})),km(new Sh(whe,e=>{const t=e.getProvider("app-check").getImmediate();return yMt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Of(vMt,bMt)}NMt();function GN(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var tDe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof GN=="function"&&GN;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof GN=="function"&&GN,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,S){if(typeof E!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var T=new this.constructor(o);if(this.state!==c){var A=this.state===l?E:S;h(T,A,this.outcome)}else this.queue.push(new d(T,E,S));return T};function d(E,S,T){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,T){s(function(){var A;try{A=S(T)}catch(C){return a.reject(E,C)}A===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,A)})}a.resolve=function(E,S){var T=g(p,S);if(T.status==="error")return a.reject(E,T.value);var A=T.value;if(A)m(E,A);else{E.state=l,E.outcome=S;for(var C=-1,I=E.queue.length;++C<I;)E.queue[C].callFulfilled(S)}return E},a.reject=function(E,S){E.state=u,E.outcome=S;for(var T=-1,A=E.queue.length;++T<A;)E.queue[T].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var T=!1;function A(O){T||(T=!0,a.reject(E,O))}function C(O){T||(T=!0,a.resolve(E,O))}function I(){S(C,A)}var R=g(I);R.status==="error"&&A(R.value)}function g(E,S){var T={};try{T.value=E(S),T.status="success"}catch(A){T.status="error",T.value=A}return T}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var S=new this(o);return a.reject(S,E)}f.all=b;function b(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,A=!1;if(!T)return this.resolve([]);for(var C=new Array(T),I=0,R=-1,O=new this(o);++R<T;)P(E[R],R);return O;function P($,F){S.resolve($).then(L,function(B){A||(A=!0,a.reject(O,B))});function L(B){C[F]=B,++I===T&&!A&&(A=!0,a.resolve(O,C))}}}f.race=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,A=!1;if(!T)return this.resolve([]);for(var C=-1,I=new this(o);++C<T;)R(E[C]);return I;function R(O){S.resolve(O).then(function(P){A||(A=!0,a.resolve(I,P))},function(P){A||(A=!0,a.reject(I,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ge=0;ge<Y.length;ge+=1)fe.append(Y[ge]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function S(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ge=0;ge<se;ge++)fe[ge]=Y.charCodeAt(ge);return Z}function T(Y){return new f(function(se){var Z=Y.transaction(g,E),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ge){ge.preventDefault(),ge.stopPropagation(),se(!1)},Z.oncomplete=function(){var ge=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ge||parseInt(ge[1],10)>=43)}}).catch(function(){return!1})}function A(Y){return typeof y=="boolean"?f.resolve(y):T(Y).then(function(se){return y=se,y})}function C(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ge){Z.resolve=fe,Z.reject=ge}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function I(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function R(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function O(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)C(Y),Y.db.close();else return Z(Y.db);var ge=[Y.name];se&&ge.push(Y.version);var le=u.open.apply(u,ge);se&&(le.onupgradeneeded=function(Oe){var Ve=le.result;try{Ve.createObjectStore(Y.storeName),Oe.oldVersion<=1&&Ve.createObjectStore(g)}catch(qe){if(qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw qe}}),le.onerror=function(Oe){Oe.preventDefault(),fe(le.error)},le.onsuccess=function(){var Oe=le.result;Oe.onversionchange=function(Ve){Ve.target.close()},Z(Oe),I(Y)}})}function P(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ge=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ge||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function L(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ge){var le=btoa(ge.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=S(atob(Y.data));return c([se],{type:Y.type})}function z(Y){return Y&&Y.__local_forage_encoded_blob}function q(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function D(Y){C(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ge=Z[fe];ge._dbInfo.db&&(ge._dbInfo.db.close(),ge._dbInfo.db=null)}return Y.db=null,P(Y).then(function(le){return Y.db=le,F(Y)?$(Y):le}).then(function(le){Y.db=se.db=le;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=le}).catch(function(le){throw R(Y,le),le})}function U(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ge=Y.db.transaction(Y.storeName,se);Z(null,ge)}catch(le){if(fe>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return D(Y).then(function(){U(Y,se,Z,fe-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ge=v[Z.name];ge||(ge=W(),v[Z.name]=ge),ge.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=q);var le=[];function Oe(){return f.resolve()}for(var Ve=0;Ve<ge.forages.length;Ve++){var qe=ge.forages[Ve];qe!==se&&le.push(qe._initReady().catch(Oe))}var Ge=ge.forages.slice(0);return f.all(le).then(function(){return Z.db=ge.db,P(Z)}).then(function(it){return Z.db=it,F(Z,se._defaultConfig.version)?$(Z):it}).then(function(it){Z.db=ge.db=it,se._dbInfo=Z;for(var Et=0;Et<Ge.length;Et++){var hn=Ge[Et];hn!==se&&(hn._dbInfo.db=Z.db,hn._dbInfo.version=Z.version)}})}function H(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){U(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.get(Y);Ge.onsuccess=function(){var it=Ge.result;it===void 0&&(it=null),z(it)&&(it=B(it)),ge(it)},Ge.onerror=function(){le(Ge.error)}}catch(it){le(it)}})}).catch(le)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){U(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.openCursor(),it=1;Ge.onsuccess=function(){var Et=Ge.result;if(Et){var hn=Et.value;z(hn)&&(hn=B(hn));var Nt=Y(hn,Et.key,it++);Nt!==void 0?ge(Nt):Et.continue()}else ge()},Ge.onerror=function(){le(Ge.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function ne(Y,se,Z){var fe=this;Y=p(Y);var ge=new f(function(le,Oe){var Ve;fe.ready().then(function(){return Ve=fe._dbInfo,b.call(se)==="[object Blob]"?A(Ve.db).then(function(qe){return qe?se:L(se)}):se}).then(function(qe){U(fe._dbInfo,E,function(Ge,it){if(Ge)return Oe(Ge);try{var Et=it.objectStore(fe._dbInfo.storeName);qe===null&&(qe=void 0);var hn=Et.put(qe,Y);it.oncomplete=function(){qe===void 0&&(qe=null),le(qe)},it.onabort=it.onerror=function(){var Nt=hn.error?hn.error:hn.transaction.error;Oe(Nt)}}catch(Nt){Oe(Nt)}})}).catch(Oe)});return d(ge,Z),ge}function ce(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){U(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.delete(Y);Ve.oncomplete=function(){ge()},Ve.onerror=function(){le(Ge.error)},Ve.onabort=function(){var it=Ge.error?Ge.error:Ge.transaction.error;le(it)}}catch(it){le(it)}})}).catch(le)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){U(se._dbInfo,E,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.clear();Oe.oncomplete=function(){fe()},Oe.onabort=Oe.onerror=function(){var Ge=qe.error?qe.error:qe.transaction.error;ge(Ge)}}catch(Ge){ge(Ge)}})}).catch(ge)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){U(se._dbInfo,w,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.count();qe.onsuccess=function(){fe(qe.result)},qe.onerror=function(){ge(qe.error)}}catch(Ge){ge(Ge)}})}).catch(ge)});return d(Z,Y),Z}function ye(Y,se){var Z=this,fe=new f(function(ge,le){if(Y<0){ge(null);return}Z.ready().then(function(){U(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=!1,it=qe.openKeyCursor();it.onsuccess=function(){var Et=it.result;if(!Et){ge(null);return}Y===0||Ge?ge(Et.key):(Ge=!0,Et.advance(Y))},it.onerror=function(){le(it.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function Ie(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){U(se._dbInfo,w,function(le,Oe){if(le)return ge(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.openKeyCursor(),Ge=[];qe.onsuccess=function(){var it=qe.result;if(!it){fe(Ge);return}Ge.push(it.key),it.continue()},qe.onerror=function(){ge(qe.error)}}catch(it){ge(it)}})}).catch(ge)});return d(Z,Y),Z}function ve(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;if(!Y.name)ge=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&fe._dbInfo.db,Oe=le?f.resolve(fe._dbInfo.db):P(Y).then(function(Ve){var qe=v[Y.name],Ge=qe.forages;qe.db=Ve;for(var it=0;it<Ge.length;it++)Ge[it]._dbInfo.db=Ve;return Ve});Y.storeName?ge=Oe.then(function(Ve){if(Ve.objectStoreNames.contains(Y.storeName)){var qe=Ve.version+1;C(Y);var Ge=v[Y.name],it=Ge.forages;Ve.close();for(var Et=0;Et<it.length;Et++){var hn=it[Et];hn._dbInfo.db=null,hn._dbInfo.version=qe}var Nt=new f(function(jn,Cr){var Ir=u.open(Y.name,qe);Ir.onerror=function(zo){var fd=Ir.result;fd.close(),Cr(zo)},Ir.onupgradeneeded=function(){var zo=Ir.result;zo.deleteObjectStore(Y.storeName)},Ir.onsuccess=function(){var zo=Ir.result;zo.close(),jn(zo)}});return Nt.then(function(jn){Ge.db=jn;for(var Cr=0;Cr<it.length;Cr++){var Ir=it[Cr];Ir._dbInfo.db=jn,I(Ir._dbInfo)}}).catch(function(jn){throw(R(Y,jn)||f.resolve()).catch(function(){}),jn})}}):ge=Oe.then(function(Ve){C(Y);var qe=v[Y.name],Ge=qe.forages;Ve.close();for(var it=0;it<Ge.length;it++){var Et=Ge[it];Et._dbInfo.db=null}var hn=new f(function(Nt,jn){var Cr=u.deleteDatabase(Y.name);Cr.onerror=function(){var Ir=Cr.result;Ir&&Ir.close(),jn(Cr.error)},Cr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Cr.onsuccess=function(){var Ir=Cr.result;Ir&&Ir.close(),Nt(Ir)}});return hn.then(function(Nt){qe.db=Nt;for(var jn=0;jn<Ge.length;jn++){var Cr=Ge[jn];I(Cr._dbInfo)}}).catch(function(Nt){throw(R(Y,Nt)||f.resolve()).catch(function(){}),Nt})})}return d(ge,se),ge}var Ke={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:H,setItem:ne,removeItem:ce,clear:de,length:he,key:ye,keys:Ie,dropInstance:ve};function Ue(){return typeof openDatabase=="function"}var gt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rt="~~local_forage_type~",be=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",ze=ke.length,ct="arbf",Dt="blob",We="si08",me="ui08",dt="uic8",vt="si16",pe="si32",Ce="ur16",He="ui32",ut="fl32",_t="fl64",Mn=ze+ct.length,Sr=Object.prototype.toString;function Ln(Y){var se=Y.length*.75,Z=Y.length,fe,ge=0,le,Oe,Ve,qe;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ge=new ArrayBuffer(se),it=new Uint8Array(Ge);for(fe=0;fe<Z;fe+=4)le=gt.indexOf(Y[fe]),Oe=gt.indexOf(Y[fe+1]),Ve=gt.indexOf(Y[fe+2]),qe=gt.indexOf(Y[fe+3]),it[ge++]=le<<2|Oe>>4,it[ge++]=(Oe&15)<<4|Ve>>2,it[ge++]=(Ve&3)<<6|qe&63;return Ge}function lr(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=gt[se[fe]>>2],Z+=gt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=gt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=gt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function pn(Y,se){var Z="";if(Y&&(Z=Sr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Sr.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ge=ke;Y instanceof ArrayBuffer?(fe=Y,ge+=ct):(fe=Y.buffer,Z==="[object Int8Array]"?ge+=We:Z==="[object Uint8Array]"?ge+=me:Z==="[object Uint8ClampedArray]"?ge+=dt:Z==="[object Int16Array]"?ge+=vt:Z==="[object Uint16Array]"?ge+=Ce:Z==="[object Int32Array]"?ge+=pe:Z==="[object Uint32Array]"?ge+=He:Z==="[object Float32Array]"?ge+=ut:Z==="[object Float64Array]"?ge+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ge+lr(fe))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var Oe=rt+Y.type+"~"+lr(this.result);se(ke+Dt+Oe)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function Sn(Y){if(Y.substring(0,ze)!==ke)return JSON.parse(Y);var se=Y.substring(Mn),Z=Y.substring(ze,Mn),fe;if(Z===Dt&&be.test(se)){var ge=se.match(be);fe=ge[1],se=se.substring(ge[0].length)}var le=Ln(se);switch(Z){case ct:return le;case Dt:return c([le],{type:fe});case We:return new Int8Array(le);case me:return new Uint8Array(le);case dt:return new Uint8ClampedArray(le);case vt:return new Int16Array(le);case Ce:return new Uint16Array(le);case pe:return new Int32Array(le);case He:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var tr={serialize:pn,deserialize:Sn,stringToBuffer:Ln,bufferToString:lr};function nr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function Bo(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ge=new f(function(le,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ve){return Oe(Ve)}Z.db.transaction(function(Ve){nr(Ve,Z,function(){se._dbInfo=Z,le()},function(qe,Ge){Oe(Ge)})},Oe)});return Z.serializer=tr,ge}function Oi(Y,se,Z,fe,ge,le){Y.executeSql(Z,fe,ge,function(Oe,Ve){Ve.code===Ve.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(qe,Ge){Ge.rows.length?le(qe,Ve):nr(qe,se,function(){qe.executeSql(Z,fe,ge,le)},le)},le):le(Oe,Ve)},le)}function Tn(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Oi(Ve,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(qe,Ge){var it=Ge.rows.length?Ge.rows.item(0).value:null;it&&(it=Oe.serializer.deserialize(it)),ge(it)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function $i(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Oi(Ve,Oe,"SELECT * FROM "+Oe.storeName,[],function(qe,Ge){for(var it=Ge.rows,Et=it.length,hn=0;hn<Et;hn++){var Nt=it.item(hn),jn=Nt.value;if(jn&&(jn=Oe.serializer.deserialize(jn)),jn=Y(jn,Nt.key,hn+1),jn!==void 0){ge(jn);return}}ge()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Tr(Y,se,Z,fe){var ge=this;Y=p(Y);var le=new f(function(Oe,Ve){ge.ready().then(function(){se===void 0&&(se=null);var qe=se,Ge=ge._dbInfo;Ge.serializer.serialize(se,function(it,Et){Et?Ve(Et):Ge.db.transaction(function(hn){Oi(hn,Ge,"INSERT OR REPLACE INTO "+Ge.storeName+" (key, value) VALUES (?, ?)",[Y,it],function(){Oe(qe)},function(Nt,jn){Ve(jn)})},function(hn){if(hn.code===hn.QUOTA_ERR){if(fe>0){Oe(Tr.apply(ge,[Y,qe,Z,fe-1]));return}Ve(hn)}})})}).catch(Ve)});return d(le,Z),le}function ds(Y,se,Z){return Tr.apply(this,[Y,se,Z,1])}function rp(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Oi(Ve,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ge()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function sl(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){Oi(Oe,le,"DELETE FROM "+le.storeName,[],function(){fe()},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function ld(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){Oi(Oe,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(Ve,qe){var Ge=qe.rows.item(0).c;fe(Ge)},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function wr(Y,se){var Z=this,fe=new f(function(ge,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){Oi(Ve,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(qe,Ge){var it=Ge.rows.length?Ge.rows.item(0).key:null;ge(it)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ti(Y){var se=this,Z=new f(function(fe,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){Oi(Oe,le,"SELECT key FROM "+le.storeName,[],function(Ve,qe){for(var Ge=[],it=0;it<qe.rows.length;it++)Ge.push(qe.rows.item(it).key);fe(Ge)},function(Ve,qe){ge(qe)})})}).catch(ge)});return d(Z,Y),Z}function Kr(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ge,le){for(var Oe=[],Ve=0;Ve<le.rows.length;Ve++)Oe.push(le.rows.item(Ve).name);se({db:Y,storeNames:Oe})},function(ge,le){Z(le)})},function(fe){Z(fe)})})}function au(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ge;return Y.name?ge=new f(function(le){var Oe;Y.name===Z.name?Oe=fe._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?le({db:Oe,storeNames:[Y.storeName]}):le(Kr(Oe))}).then(function(le){return new f(function(Oe,Ve){le.db.transaction(function(qe){function Ge(Nt){return new f(function(jn,Cr){qe.executeSql("DROP TABLE IF EXISTS "+Nt,[],function(){jn()},function(Ir,zo){Cr(zo)})})}for(var it=[],Et=0,hn=le.storeNames.length;Et<hn;Et++)it.push(Ge(le.storeNames[Et]));f.all(it).then(function(){Oe()}).catch(function(Nt){Ve(Nt)})},function(qe){Ve(qe)})})}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var Ta={_driver:"webSQLStorage",_initStorage:Bo,_support:Ue(),iterate:$i,getItem:Tn,setItem:ds,removeItem:rp,clear:sl,length:ld,key:wr,keys:Ti,dropInstance:au};function Aa(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Te(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=tr,f.resolve()):f.reject()}function Se(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ge=localStorage.length-1;ge>=0;ge--){var le=localStorage.key(ge);le.indexOf(fe)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function st(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo,le=localStorage.getItem(ge.keyPrefix+Y);return le&&(le=ge.serializer.deserialize(le)),le});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ge=Z._dbInfo,le=ge.keyPrefix,Oe=le.length,Ve=localStorage.length,qe=1,Ge=0;Ge<Ve;Ge++){var it=localStorage.key(Ge);if(it.indexOf(le)===0){var Et=localStorage.getItem(it);if(Et&&(Et=ge.serializer.deserialize(Et)),Et=Y(Et,it.substring(Oe),qe++),Et!==void 0)return Et}}});return d(fe,se),fe}function Vt(Y,se){var Z=this,fe=Z.ready().then(function(){var ge=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ge.keyPrefix.length)),le});return d(fe,se),fe}function Dn(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ge=localStorage.length,le=[],Oe=0;Oe<ge;Oe++){var Ve=localStorage.key(Oe);Ve.indexOf(fe.keyPrefix)===0&&le.push(Ve.substring(fe.keyPrefix.length))}return le});return d(Z,Y),Z}function Fn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function dn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ge=Z._dbInfo;localStorage.removeItem(ge.keyPrefix+Y)});return d(fe,se),fe}function rr(Y,se,Z){var fe=this;Y=p(Y);var ge=fe.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(Oe,Ve){var qe=fe._dbInfo;qe.serializer.serialize(se,function(Ge,it){if(it)Ve(it);else try{localStorage.setItem(qe.keyPrefix+Y,Ge),Oe(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(Et),Ve(Et)}})})});return d(ge,Z),ge}function Ar(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ge;return Y.name?ge=new f(function(le){Y.storeName?le(oe(Y,fe._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Ve=localStorage.key(Oe);Ve.indexOf(le)===0&&localStorage.removeItem(Ve)}}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var zt={_driver:"localStorageWrapper",_initStorage:Te,_support:Aa(),iterate:St,getItem:st,setItem:rr,removeItem:dn,clear:Se,length:Fn,key:Vt,keys:Dn,dropInstance:Ar},ir=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Ur=function(se,Z){for(var fe=se.length,ge=0;ge<fe;){if(ir(se[ge],Z))return!0;ge++}return!1},Qn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ai={},Hs={},Xr={INDEXEDDB:Ke,WEBSQL:Ta,LOCALSTORAGE:zt},mo=[Xr.INDEXEDDB._driver,Xr.WEBSQL._driver,Xr.LOCALSTORAGE._driver],Mi=["dropInstance"],Li=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Mi),Uo={description:"",driver:mo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ca(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function qs(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Qn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var Kl=function(){function Y(se){o(this,Y);for(var Z in Xr)if(Xr.hasOwnProperty(Z)){var fe=Xr[Z],ge=fe._driver;this[Z]=ge,Ai[ge]||this.defineDriver(fe)}this._defaultConfig=qs({},Uo),this._config=qs({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ge){var le=new f(function(Oe,Ve){try{var qe=Z._driver,Ge=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ve(Ge);return}for(var it=Li.concat("_initStorage"),Et=0,hn=it.length;Et<hn;Et++){var Nt=it[Et],jn=!Ur(Mi,Nt);if((jn||Z[Nt])&&typeof Z[Nt]!="function"){Ve(Ge);return}}var Cr=function(){for(var fd=function(Xl){return function(){var uu=new Error("Method "+Xl+" is not implemented by the current driver"),sp=f.reject(uu);return d(sp,arguments[arguments.length-1]),sp}},ip=0,BS=Mi.length;ip<BS;ip++){var Gy=Mi[ip];Z[Gy]||(Z[Gy]=fd(Gy))}};Cr();var Ir=function(fd){Ai[qe]&&console.info("Redefining LocalForage driver: "+qe),Ai[qe]=Z,Hs[qe]=fd,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Ir,Ve):Ir(!!Z._support):Ir(!0)}catch(zo){Ve(zo)}});return h(le,fe,ge),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ge){var le=Ai[Z]?f.resolve(Ai[Z]):f.reject(new Error("Driver not found."));return h(le,fe,ge),le},Y.prototype.getSerializer=function(Z){var fe=f.resolve(tr);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ge=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ge,Z,Z),ge},Y.prototype.setDriver=function(Z,fe,ge){var le=this;Qn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Ve(){le._config.driver=le.driver()}function qe(Et){return le._extend(Et),Ve(),le._ready=le._initStorage(le._config),le._ready}function Ge(Et){return function(){var hn=0;function Nt(){for(;hn<Et.length;){var jn=Et[hn];return hn++,le._dbInfo=null,le._ready=null,le.getDriver(jn).then(qe).catch(Nt)}Ve();var Cr=new Error("No available storage method found.");return le._driverSet=f.reject(Cr),le._driverSet}return Nt()}}var it=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=it.then(function(){var Et=Oe[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(hn){le._driver=hn._driver,Ve(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ge(Oe)})}).catch(function(){Ve();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,fe,ge),this._driverSet},Y.prototype.supports=function(Z){return!!Hs[Z]},Y.prototype._extend=function(Z){qs(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ge=0,le=Z.length;ge<le;ge++){var Oe=Z[ge];this.supports(Oe)&&fe.push(Oe)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=Li.length;Z<fe;Z++)Ca(this,Li[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),cd=new Kl;r.exports=cd},{3:3}]},{},[4])(4)})})(tDe);var PMt=tDe.exports;const z_=Hl(PMt);var bo=[];for(var f9=0;f9<256;++f9)bo.push((f9+256).toString(16).slice(1));function DMt(e,t=0){return(bo[e[t+0]]+bo[e[t+1]]+bo[e[t+2]]+bo[e[t+3]]+"-"+bo[e[t+4]]+bo[e[t+5]]+"-"+bo[e[t+6]]+bo[e[t+7]]+"-"+bo[e[t+8]]+bo[e[t+9]]+"-"+bo[e[t+10]]+bo[e[t+11]]+bo[e[t+12]]+bo[e[t+13]]+bo[e[t+14]]+bo[e[t+15]]).toLowerCase()}var YN,OMt=new Uint8Array(16);function $Mt(){if(!YN&&(YN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!YN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return YN(OMt)}var MMt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Ehe={randomUUID:MMt};function I$(e,t,n){if(Ehe.randomUUID&&!t&&!e)return Ehe.randomUUID();e=e||{};var r=e.random||(e.rng||$Mt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,DMt(r)}class nDe{constructor(t){cu(this,"engine");cu(this,"connected",!1);cu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function k$(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function xT(e){return e.participantId!==void 0}class dc extends nDe{constructor(){super("firebase");cu(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");cu(this,"firestore");cu(this,"collectionPrefix","prod-");cu(this,"studyCollection");cu(this,"storage");cu(this,"studyId","");cu(this,"localForage",z_.createInstance({name:"currentParticipantId"}));cu(this,"participantData",null);const n=rQ.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=_Re(n);this.firestore=I$t(r,{}),this.storage=LDt();try{IMt(r,{provider:new KJ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await k$t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=w$();if(!i.currentUser&&(await nNt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await k$(JSON.stringify(r));if(this.studyCollection=Jc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(xT(a))return this.participantData=a,a;const l=await k$(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=ec(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=I$(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=Ts(this.studyCollection,"sequenceAssignment");await al(i,{});const s=Jc(i,"sequenceAssignment"),o=Ts(s,this.currentParticipantId),a=dhe(s,L$t("participantId","==","")),u=await ET(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await V$t(m.ref),await al(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await al(o,{participantId:this.currentParticipantId,timestamp:W$t()});const l=dhe(s,F$t("timestamp","asc")),d=(await ET(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=ec(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await _T(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");xT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return xT(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=I$();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Jc(this.firestore,"user-management"),i=await ET(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await al(Ts(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await al(Ts(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await al(Ts(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await al(Ts(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await al(Ts(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=ec(this.storage,`${this.collectionPrefix}${n}/participants`),i=await _T(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");xT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Jc(this.firestore,`${this.collectionPrefix}${n}`),s=ec(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!xT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=Ts(i,"sequenceAssignment"),u=Jc(a,"sequenceAssignment"),l=Ts(u,r);await z$t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=Ts(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await al(s,{[r]:i},{merge:!0})}async getModes(n){const r=Ts(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await u9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await al(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=Ts(this.firestore,"metadata","collections"),i=await u9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=Ts(this.firestore,"metadata","collections");await al(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=Ts(this.firestore,"metadata","collections"),i=await u9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await al(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=ec(this.storage,n),s=(await _T(r)).items.map(o=>kde(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=ec(this.storage,n),o=(await _T(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=ec(this.storage,n),s=ec(this.storage,r),o=await r9(i),u=await(await fetch(o)).blob();await n9(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Jc(this.firestore,n),s=Ts(i,"sequenceAssignment"),o=Jc(s,"sequenceAssignment"),a=Jc(this.firestore,r),u=Ts(a,"sequenceAssignment");await al(u,{});const l=Jc(u,"sequenceAssignment"),c=await ET(o),f=mhe(this.firestore);c.docs.forEach(d=>{const h=Ts(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Jc(this.firestore,n),i=Ts(r,"sequenceAssignment"),s=Jc(i,"sequenceAssignment"),o=await ET(s),a=mhe(this.firestore);o.forEach(u=>{const l=Ts(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=ec(this.storage,n);return(await _T(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=ec(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await r9(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await r9(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=ec(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await n9(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await n9(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=ec(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await kde(i)}}const rDe=N.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Lb=()=>N.useContext(rDe);function LMt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=N.useState(t),[o,a]=N.useState(!1),{storageEngine:u}=xs(),l=async()=>{const h=w$();try{await lNt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;N.useEffect(()=>{s(t);let h;if(u instanceof dc)try{h=w$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof dc){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=uNt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=N.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(rDe.Provider,{value:d,children:i.determiningStatus?_.jsx(Pl,{visible:!0}):e})}function SC({studyIds:e}){const t=Hm(),{studyId:n}=k1(),r=Sb(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=xs(),{user:o,logout:a}=Lb(),[u,l]=N.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(AKe,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(wKe,{}),href:"/analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(R_e,{}),href:"/settings",needAdmin:!0}];return _.jsx(fi.Header,{p:"md",children:_.jsxs(Ua,{mt:-7,align:"center",children:[_.jsx(Ua.Col,{span:6,children:_.jsxs(qt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(Ey,{w:40,src:`${Lh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(Ec,{w:"md"}),_.jsx(ki,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(Ua.Col,{span:6,children:_.jsxs(qt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(BI,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(aG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx($h,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(qt,{direction:"column",mt:20,children:[_.jsx(ot,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(Rn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:_.jsx(Rn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),_.jsxs(_e,{ml:10,children:[_.jsx(cG,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(ot,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(ot,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function iDe({allParticipants:e,studyId:t}){const[n,{close:r,open:i}]=Sw(!1),[s,{close:o,open:a}]=Sw(!1),[u,{open:l,close:c}]=Sw(!1);return _.jsxs(_.Fragment,{children:[_.jsxs(Fs,{children:[_.jsxs(Zr,{opened:n,children:[_.jsx(Zr.Target,{children:_.jsx(Rn,{variant:"light",disabled:e.length===0,onClick:()=>{WQ(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:i,onMouseLeave:r,px:4,children:_.jsx(SKe,{})})}),_.jsx(Zr.Dropdown,{children:_.jsx(ot,{children:"Download all participants data as JSON"})})]}),_.jsxs(Zr,{opened:s,children:[_.jsx(Zr.Target,{children:_.jsx(Rn,{variant:"light",disabled:e.length===0,onClick:l,onMouseEnter:a,onMouseLeave:o,px:4,children:_.jsx(N_e,{})})}),_.jsx(Zr.Dropdown,{children:_.jsx(ot,{children:"Download all participants data as a tidy CSV"})})]})]}),u&&_.jsx(wIt,{opened:u,close:c,filename:`${t}_all_tidy.csv`,data:e,studyId:t})]})}function FMt({cellData:e}){return _.jsx(An.Td,{children:_.jsx(qd,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(_e,{children:[_.jsxs(ot,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(ot,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function xhe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(An.Td,{children:[t.toFixed(1)," ","s"]})}function jMt(e){const{metaData:t}=e;return _.jsx(An.Td,{children:_.jsx(OG,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(qd,{gap:"xs",children:[_.jsxs(_e,{children:["IP:"," ",t.ip]}),_.jsxs(_e,{children:["Language:"," ",t.language]}),_.jsxs(_e,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(_e,{children:["User Agent:"," ",t.userAgent]})]})})})}function BMt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=xs(),{studyId:s}=k1(),{user:o}=Lb(),a=async y=>{i&&s&&(o.isAdmin?(await i.rejectParticipant(s,y),await r()):console.warn("You are not authorized to perform this action."))},[u,l]=N.useState([]),[c,f]=N.useState(!1),d=()=>kU({title:"Confirm rejecting participants",children:_.jsxs(ot,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(ot,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{f(!0);const y=u.map(async v=>await a(v));await Promise.all(y),l([]),await r(),f(!1)}});function h(y){y==="all"?u.length===[...e,...t].length?l([]):l([...e,...t].map(v=>v.participantId)):u.includes(y)?l(u.filter(v=>v!==y)):l([...u,y])}const p=kEe(n.sequence),m=[_.jsx(An.Th,{children:_.jsx(qt,{justify:"center",children:_.jsx(dm,{mb:-4,checked:u.length===[...e,...t].length,onChange:()=>h("all")})})},"action"),_.jsx(An.Th,{children:"ID"},"ID"),_.jsx(An.Th,{children:"Status"},"status"),_.jsx(An.Th,{children:"Meta"},"meta"),...p.flatMap(y=>[_.jsx(An.Th,{children:y.componentName},`header-${y.componentName}-${y.timesSeenInBlock}`),_.jsxs(An.Th,{children:[y.componentName," ","Duration"]},`header-${y.componentName}-${y.timesSeenInBlock}-duration`)]),_.jsx(An.Th,{children:"Total Duration"},"total-duration")],g=[...e,...t].map(y=>_.jsxs(An.Tr,{children:[_.jsx(An.Td,{children:_.jsx(qt,{justify:"center",children:_.jsx(dm,{mb:-4,checked:u.includes(y.participantId),onChange:()=>h(y.participantId)})})}),_.jsx(An.Td,{style:{whiteSpace:"nowrap"},children:y.participantId}),_.jsx(An.Td,{children:_.jsxs(qt,{direction:"row",align:"center",children:[y.rejected?_.jsx(is,{label:"Rejected",children:_.jsx(KG,{size:16,color:"red",style:{marginBottom:-3}})}):y.completed?_.jsx(is,{label:"Completed",children:_.jsx(C_e,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(is,{label:"In Progress",children:_.jsx(k_e,{size:16,color:"orange",style:{marginBottom:-3}})}),!y.completed&&_.jsxs(ot,{size:"sm",mb:-1,ml:4,children:[(Object.entries(y.answers).filter(([v,b])=>b.endTime!==void 0).length/(gm(y.sequence).length-1)*100).toFixed(2),"%"]})]})}),y.metadata?_.jsx(jMt,{metaData:y.metadata}):_.jsx(An.Td,{children:"N/A"}),p.map(v=>{const b=CEe(y.sequence,v.orderPath),w=b&&Object.entries(y.answers).sort((E,S)=>{const T=parseInt(E[0].slice(E[0].lastIndexOf("_")+1),10),A=parseInt(S[0].slice(S[0].lastIndexOf("_")+1),10);return T-A}).filter(([E])=>{const S=E.slice(0,E.lastIndexOf("_")),T=parseInt(E.slice(E.lastIndexOf("_")+1),10);return S===v.componentName&&T<=b[0].lastIndex&&T>=b[0].firstIndex});return w!==null&&w.length>=v.timesSeenInBlock+1?_.jsxs(Wi.Fragment,{children:[_.jsx(FMt,{cellData:w[v.timesSeenInBlock][1]}),_.jsx(xhe,{cellData:w[v.timesSeenInBlock][1]})]},`cellgroup-${y.participantId}-${v.componentName}-${v.timesSeenInBlock}`):_.jsxs(Wi.Fragment,{children:[_.jsx(An.Td,{children:"N/A"}),_.jsx(An.Td,{children:"N/A"})]},`cellgroup-${y.participantId}-${v.componentName}-${v.timesSeenInBlock}`)}),_.jsx(xhe,{cellData:{startTime:Math.min(...Object.values(y.answers).map(v=>v.startTime)),endTime:Math.max(...Object.values(y.answers).map(v=>v.endTime)),answer:{},windowEvents:[]}},`cell-${y.participantId}-total-duration`)]},y.participantId));return[...e,...t].length>0?_.jsxs(_.Fragment,{children:[_.jsx(Pl,{visible:c,overlayProps:{blur:2}}),_.jsxs(qt,{justify:"space-between",mb:8,p:8,children:[_.jsx(Fs,{children:_.jsx(BI,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(y=>({value:y.participantId,label:y.participantId})),searchable:!0,value:null,leftSection:_.jsx(PKe,{size:14}),onChange:y=>y&&h(y)})}),_.jsxs(Fs,{children:[_.jsx(iDe,{allParticipants:[...e,...t],studyId:s||""}),_.jsx(Rn,{disabled:u.length===0||!o.isAdmin,onClick:d,color:"red",children:"Reject Participants"})]})]}),_.jsx(qt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(An,{striped:!0,withTableBorder:!0,children:[_.jsx(An.Thead,{children:_.jsx(An.Tr,{children:m})}),_.jsx(An.Tbody,{children:g})]})})]}):_.jsx(qt,{justify:"center",align:"center",style:{height:"100%"},children:_.jsx(ot,{children:"No data available"})})}const b_=14;function sDe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(qt,{ml:4,gap:4,children:[_.jsx(is,{label:"Completed",children:_.jsx(Yp,{variant:"light",color:"green",leftSection:_.jsx(C_e,{width:b_,height:b_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(is,{label:"In Progress",children:_.jsx(Yp,{variant:"light",color:"orange",leftSection:_.jsx(k_e,{width:b_,height:b_,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(is,{label:"Rejected",children:_.jsx(Yp,{variant:"light",color:"red",leftSection:_.jsx(KG,{width:b_,height:b_,style:{paddingTop:1}}),pb:1,children:n})})]})}function UMt({studyId:e,refresh:t}){const[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(""),[c,f]=N.useState([]),[d,h]=N.useState(""),[p,m]=N.useState(!1),[g,y]=N.useState(!1),{storageEngine:v}=xs(),b=v,w=N.useCallback(async()=>{y(!0);const O=await b.getSnapshots(e);f(O),y(!1)},[b,e]);N.useEffect(()=>{w()},[w]);const E=async()=>{m(!0),await b.createSnapshot(e,!1),w(),m(!1),await t()},S=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),w(),m(!1),await t()},T=async O=>{m(!0),await b.restoreSnapshot(e,O),w(),m(!1),await t()},A=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),w(),m(!1),await t()},C=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},I=()=>kU({title:"Create a Snapshot",children:_.jsx(ot,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E()}),R=O=>kU({title:"Restore Snapshot",children:_.jsx(ot,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>T(O)});return _.jsxs(_.Fragment,{children:[_.jsx(Pl,{visible:p}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(_e,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Create a Snapshot"}),_.jsxs(ot,{children:["This will create a snapshot of the live"," ",_.jsx(ot,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(ot,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(is,{label:"Create a snapshot",children:_.jsx(Rn,{onClick:I,children:"Snapshot"})})]}),_.jsx(Ec,{h:"lg"}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(_e,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Archive Data"}),_.jsxs(ot,{children:["This will create a snapshot of the live"," ",_.jsx(ot,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(is,{label:"Snapshot and Delete Data",children:_.jsx(Rn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(Ec,{h:"lg"}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(_e,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Delete Data"}),_.jsxs(ot,{children:["This will delete the live"," ",_.jsx(ot,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(is,{label:"Delete Data",children:_.jsx(Rn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),_.jsx(Ec,{h:"xl"}),_.jsxs(qt,{direction:"column",children:[_.jsx(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(ki,{order:5,children:"Snapshots"})}),_.jsxs(_e,{style:{position:"relative"},children:[_.jsx(Pl,{visible:g}),c.length>0?c.map(O=>_.jsxs(qt,{justify:"space-between",mb:"xs",children:[_.jsx(ot,{children:O}),_.jsxs(qt,{direction:"row",gap:"xs",children:[_.jsx(is,{label:"Restore Snapshot",children:_.jsx(N0,{color:"blue",variant:"subtle",onClick:()=>{R(O)},children:_.jsx(RKe,{})})}),_.jsx(is,{label:"Delete Snapshot",children:_.jsx(N0,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(O)},children:_.jsx(P_e,{})})})]})]},O)):_.jsx(ot,{children:"No snapshots."})]})]}),_.jsxs(_s,{opened:n,onClose:()=>{r(!1),h("")},title:_.jsx(ot,{children:"Archive Data"}),children:[_.jsx(ot,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(u1,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:S,disabled:d!==e,children:"Archive"})]})]}),_.jsxs(_s,{opened:i,onClose:()=>{s(!1),h("")},title:_.jsx(ot,{children:"Delete Snapshot"}),children:[_.jsxs(ot,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(ot,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(u1,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]}),_.jsxs(_s,{opened:o,onClose:()=>{a(!1),h("")},title:_.jsx(ot,{children:"Delete Live Data"}),children:[_.jsxs(ot,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(ot,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(ot,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(u1,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),_.jsx(Rn,{color:"red",onClick:C,disabled:d!==e,children:"Delete"})]})]})]})}function zMt({studyId:e}){const{storageEngine:t}=xs(),[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(!1);N.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(qd,{children:[_.jsx(Cw,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(Cw,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(Cw,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function VMt({studyId:e,refresh:t}){const{storageEngine:n}=xs();return _.jsx(Ic,{children:_.jsxs(yu,{multiple:!0,variant:"contained",children:[_.jsxs(yu.Item,{value:"ReVISit Modes",children:[_.jsx(yu.Control,{children:_.jsx(ki,{order:5,children:"ReVISit Modes"})}),_.jsx(yu.Panel,{children:_.jsx(zMt,{studyId:e})})]},"modes"),_.jsxs(yu.Item,{value:"Data Management",children:[_.jsx(yu.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(ki,{order:5,children:"Data Management"})}),_.jsx(yu.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(UMt,{studyId:e,refresh:t})})]},"dataManagement")]})})}function HMt(e){const{globalConfig:t}=e,{studyId:n}=k1(),[r,i]=N.useState([]),[s,o]=N.useState(void 0),[a,u]=N.useState(!1),{storageEngine:l}=xs(),c=Hm(),{tab:f}=k1(),{user:d}=Lb(),h=N.useCallback(async()=>{if(u(!0),n){const y=await W6(n,t);if(!y||!l)return;await l.initializeStudyDb(n,y);const v=await l.getAllParticipantsData();i(v),o(y),u(!1)}},[t,l,n]);N.useEffect(()=>{h()},[t,l,n,h]);const[p,m,g]=N.useMemo(()=>{const y=r.filter(w=>!w.rejected&&w.completed),v=r.filter(w=>!w.rejected&&!w.completed),b=r.filter(w=>w.rejected);return[y,v,b]},[r]);return _.jsxs(_.Fragment,{children:[_.jsx(SC,{studyIds:e.globalConfig.configsList}),_.jsx(fi.Main,{children:_.jsxs(Ic,{fluid:!0,style:{height:"100%"},children:[_.jsx(Pl,{visible:a}),_.jsxs(qt,{direction:"row",align:"center",children:[_.jsx(ki,{order:5,children:n}),_.jsx(sDe,{completed:p.length,inProgress:m.length,rejected:g.length})]}),_.jsx(Ec,{h:"xs"}),_.jsxs(ts,{variant:"outline",value:f,onChange:y=>c(`./../${y}`),style:{height:"100%"},children:[_.jsxs(ts.List,{children:[_.jsx(ts.Tab,{value:"table",leftSection:_.jsx(DKe,{size:16}),children:"Table View"}),_.jsx(is,{label:"Coming soon",position:"bottom",children:_.jsx(ts.Tab,{value:"stats",leftSection:_.jsx(EKe,{size:16}),disabled:!0,children:"Trial Stats"})}),_.jsx(is,{label:"Coming soon",position:"bottom",children:_.jsx(ts.Tab,{value:"replay",leftSection:_.jsx(kKe,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(ts.Tab,{value:"manage",leftSection:_.jsx(R_e,{size:16}),disabled:!d.isAdmin,children:"Manage"})]}),_.jsx(ts.Panel,{value:"table",pt:"xs",children:s&&_.jsx(BMt,{completed:p,inProgress:m,studyConfig:s,refresh:h})}),_.jsx(ts.Panel,{value:"stats",pt:"xs",children:"statsboard"}),_.jsx(ts.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(ts.Panel,{value:"manage",pt:"xs",children:n&&d.isAdmin?_.jsx(VMt,{studyId:n,refresh:h}):_.jsx(Ic,{mt:20,children:_.jsx(OI,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(I_e,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function She({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=Lb(),{storageEngine:o}=xs(),[a,u]=N.useState(!1),l=k1();return N.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(Pl,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(qG,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function oDe(e,t,n){if(e instanceof dc){t(!0);const r=new Dp,i=w$();try{await RNt(i,r,eNe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function qMt(){const{user:e}=Lb(),[t,n]=N.useState(null),[r,i]=N.useState(!1),{storageEngine:s}=xs();return N.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(qG,{to:"/"}):_.jsx(Ic,{children:_.jsx(wb,{padding:"lg",children:_.jsxs(qt,{align:"center",direction:"column",justify:"center",children:[_.jsx(Ey,{maw:200,mt:50,mb:100,src:`${Lh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(ot,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(Rn,{onClick:()=>oDe(s,i,n),leftSection:_.jsx(OKe,{}),variant:"filled",children:"Sign In With Google"})]}),t?_.jsx(Yp,{size:"lg",color:"red",mt:30,children:t}):null,_.jsx(Pl,{visible:r})]})})})}var aDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],L=$%100;return"["+$+(F[(L-20)%10]||F[L]||F[0])+"]"}},b=function($,F,L){var B=String($);return!B||B.length>=F?$:""+Array(F+1-B.length).join(L)+$},w={s:b,z:function($){var F=-$.utcOffset(),L=Math.abs(F),B=Math.floor(L/60),z=L%60;return(F<=0?"+":"-")+b(B,2,"0")+":"+b(z,2,"0")},m:function $(F,L){if(F.date()<L.date())return-$(L,F);var B=12*(L.year()-F.year())+(L.month()-F.month()),z=F.clone().add(B,f),q=L-z<0,D=F.clone().add(B+(q?-1:1),f);return+(-(B+(L-z)/(q?z-D:D-z))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",S={};S[E]=v;var T="$isDayjsObject",A=function($){return $ instanceof O||!(!$||!$[T])},C=function $(F,L,B){var z;if(!F)return E;if(typeof F=="string"){var q=F.toLowerCase();S[q]&&(z=q),L&&(S[q]=L,z=q);var D=F.split("-");if(!z&&D.length>1)return $(D[0])}else{var U=F.name;S[U]=F,z=U}return!B&&z&&(E=z),z||!B&&E},I=function($,F){if(A($))return $.clone();var L=typeof F=="object"?F:{};return L.date=$,L.args=arguments,new O(L)},R=w;R.l=C,R.i=A,R.w=function($,F){return I($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function $(L){this.$L=C(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[T]=!0}var F=$.prototype;return F.parse=function(L){this.$d=function(B){var z=B.date,q=B.utc;if(z===null)return new Date(NaN);if(R.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var D=z.match(g);if(D){var U=D[2]-1||0,W=(D[7]||"0").substring(0,3);return q?new Date(Date.UTC(D[1],U,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)):new Date(D[1],U,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)}}return new Date(z)}(L),this.init()},F.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},F.$utils=function(){return R},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(L,B){var z=I(L);return this.startOf(B)<=z&&z<=this.endOf(B)},F.isAfter=function(L,B){return I(L)<this.startOf(B)},F.isBefore=function(L,B){return this.endOf(B)<I(L)},F.$g=function(L,B,z){return R.u(L)?this[B]:this.set(z,L)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(L,B){var z=this,q=!!R.u(B)||B,D=R.p(L),U=function(he,ye){var Ie=R.w(z.$u?Date.UTC(z.$y,ye,he):new Date(z.$y,ye,he),z);return q?Ie:Ie.endOf(l)},W=function(he,ye){return R.w(z.toDate()[he].apply(z.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(ye)),z)},j=this.$W,H=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(D){case h:return q?U(1,0):U(31,11);case f:return q?U(1,H):U(0,H+1);case c:var ce=this.$locale().weekStart||0,de=(j<ce?j+7:j)-ce;return U(q?G-de:G+(6-de),H);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(L){return this.startOf(L,!1)},F.$set=function(L,B){var z,q=R.p(L),D="set"+(this.$u?"UTC":""),U=(z={},z[l]=D+"Date",z[p]=D+"Date",z[f]=D+"Month",z[h]=D+"FullYear",z[u]=D+"Hours",z[a]=D+"Minutes",z[o]=D+"Seconds",z[s]=D+"Milliseconds",z)[q],W=q===l?this.$D+(B-this.$W):B;if(q===f||q===h){var j=this.clone().set(p,1);j.$d[U](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else U&&this.$d[U](W);return this.init(),this},F.set=function(L,B){return this.clone().$set(L,B)},F.get=function(L){return this[R.p(L)]()},F.add=function(L,B){var z,q=this;L=Number(L);var D=R.p(B),U=function(H){var G=I(q);return R.w(G.date(G.date()+Math.round(H*L)),q)};if(D===f)return this.set(f,this.$M+L);if(D===h)return this.set(h,this.$y+L);if(D===l)return U(1);if(D===c)return U(7);var W=(z={},z[a]=r,z[u]=i,z[o]=n,z)[D]||1,j=this.$d.getTime()+L*W;return R.w(j,this)},F.subtract=function(L,B){return this.add(-1*L,B)},F.format=function(L){var B=this,z=this.$locale();if(!this.isValid())return z.invalidDate||m;var q=L||"YYYY-MM-DDTHH:mm:ssZ",D=R.z(this),U=this.$H,W=this.$m,j=this.$M,H=z.weekdays,G=z.months,ne=z.meridiem,ce=function(ye,Ie,ve,Ke){return ye&&(ye[Ie]||ye(B,q))||ve[Ie].slice(0,Ke)},de=function(ye){return R.s(U%12||12,ye,"0")},he=ne||function(ye,Ie,ve){var Ke=ye<12?"AM":"PM";return ve?Ke.toLowerCase():Ke};return q.replace(y,function(ye,Ie){return Ie||function(ve){switch(ve){case"YY":return String(B.$y).slice(-2);case"YYYY":return R.s(B.$y,4,"0");case"M":return j+1;case"MM":return R.s(j+1,2,"0");case"MMM":return ce(z.monthsShort,j,G,3);case"MMMM":return ce(G,j);case"D":return B.$D;case"DD":return R.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ce(z.weekdaysMin,B.$W,H,2);case"ddd":return ce(z.weekdaysShort,B.$W,H,3);case"dddd":return H[B.$W];case"H":return String(U);case"HH":return R.s(U,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(U,W,!0);case"A":return he(U,W,!1);case"m":return String(W);case"mm":return R.s(W,2,"0");case"s":return String(B.$s);case"ss":return R.s(B.$s,2,"0");case"SSS":return R.s(B.$ms,3,"0");case"Z":return D}return null}(ye)||D.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(L,B,z){var q,D=this,U=R.p(B),W=I(L),j=(W.utcOffset()-this.utcOffset())*r,H=this-W,G=function(){return R.m(D,W)};switch(U){case h:q=G()/12;break;case f:q=G();break;case d:q=G()/3;break;case c:q=(H-j)/6048e5;break;case l:q=(H-j)/864e5;break;case u:q=H/i;break;case a:q=H/r;break;case o:q=H/n;break;default:q=H}return z?q:R.a(q)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return S[this.$L]},F.locale=function(L,B){if(!L)return this.$L;var z=this.clone(),q=C(L,B,!0);return q&&(z.$L=q),z},F.clone=function(){return R.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),P=O.prototype;return I.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){P[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),I.extend=function($,F){return $.$i||($(F,O,I),$.$i=!0),I},I.locale=C,I.isDayjs=A,I.unix=function($){return I(1e3*$)},I.en=S[E],I.Ls=S,I.p={},I})})(aDe);var WMt=aDe.exports;const Tt=Hl(WMt);function GMt({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function YMt({formatter:e,...t}){return(e||GMt)(t)}function KMt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function uDe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=KMt({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?uDe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function XMt(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function QMt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function XJ({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=XMt(i.key);if(s){i.preventDefault();const o=QMt(e);uDe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var lDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],S=E===24?0:E,T=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",A=+d;return(o.utc(T).valueOf()-(A-=A%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(S,T,A){var C=S-60*T*1e3,I=l(C,A);if(T===I)return[C,T];var R=l(C-=60*(I-T)*1e3,A);return I===R?[C,I]:[S-60*Math.min(I,R)*1e3,Math.max(I,R)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(lDe);var JMt=lDe.exports;const ZMt=Hl(JMt);var cDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var S=E.match(r);if(!S)return null;var T=(""+S[0]).match(i)||["-",0,0],A=T[0],C=60*+T[1]+ +T[2];return C===0?0:A==="+"?C:-C}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(cDe);var eLt=cDe.exports;const tLt=Hl(eLt);Tt.extend(tLt);Tt.extend(ZMt);function nLt(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const The=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=nLt(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function w0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>The(i,n,e)):The(t,n,e)}function rLt({minDate:e,maxDate:t,timezone:n}){const r=w0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const iLt={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},sLt=N.createContext(iLt);function Yl(){const e=N.useContext(sLt),t=N.useCallback(o=>o||e.locale,[e.locale]),n=N.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=N.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=N.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=N.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function oLt(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function fDe({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:oLt(e,t),name:n,form:r})}fDe.displayName="@mantine/dates/HiddenDatesInput";var dDe={day:"m_396ce5cb"};const aLt={},uLt=(e,{size:t})=>({day:{"--day-size":en(t,"day-size")}}),QJ=Le((e,t)=>{const n=xe("Day",aLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...E}=n,S=yt({name:f||"Day",classes:dDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uLt,rootSelector:"day"}),T=Yl();return _.jsx(bs,{...S("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(w0("add",new Date,T.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});QJ.classes=dDe;QJ.displayName="@mantine/dates/Day";function lLt({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var hDe={weekday:"m_18a3eca"};const cLt={},fLt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":uo(t),"--wr-spacing":Rl(t)}}),JJ=Le((e,t)=>{const n=xe("WeekdaysRow",cLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=yt({name:h||"WeekdaysRow",classes:hDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fLt,rootSelector:"weekdaysRow"}),g=Yl(),y=lLt({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(_e,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});JJ.classes=hDe;JJ.displayName="@mantine/dates/WeekdaysRow";function dLt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function hLt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function pLt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=dLt(s,t),a=hLt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function pDe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function mDe(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function gDe(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function mLt(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return gDe(c,n)&&mDe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||pDe(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var yDe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const gLt={withCellSpacing:!0},vF=Le((e,t)=>{const n=xe("Month",gLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:S,static:T,__getDayRef:A,__onDayKeyDown:C,__onDayClick:I,__onDayMouseEnter:R,__preventFocus:O,__stopPropagation:P,withCellSpacing:$,size:F,...L}=n,B=yt({name:l||"Month",classes:yDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),z=Yl(),q=pLt({month:h,firstDayOfWeek:z.getFirstDayOfWeek(f),consistentWeeks:z.consistentWeeks}),D=mLt(q,y,v,m,g,w,h),{resolvedClassNames:U,resolvedStyles:W}=Lm({classNames:r,styles:o,props:n}),j=q.map((H,G)=>{const ne=H.map((ce,de)=>{const he=!pDe(ce,h),ye=(S==null?void 0:S(ce))||Tt(ce).locale(c||z.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(ce),ve=Tt(ce).isSame(D,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:_.jsx(QJ,{__staticSelector:l||"Month",classNames:U,styles:W,unstyled:a,"data-mantine-stop-propagation":P||void 0,renderDay:b,date:ce,size:F,weekend:z.getWeekendDays(p).includes(ce.getDay()),outside:he,hidden:w?he:!1,"aria-label":ye,static:T,disabled:(g==null?void 0:g(ce))||!gDe(ce,v)||!mDe(ce,y),ref:Ke=>A==null?void 0:A(G,de,Ke),...Ie,onKeyDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,Ke),C==null||C(Ke,{rowIndex:G,cellIndex:de,date:ce})},onMouseEnter:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,Ke),R==null||R(Ke,ce)},onClick:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,Ke),I==null||I(Ke,ce)},onMouseDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,Ke),O&&Ke.preventDefault()},tabIndex:O||!ve?-1:0})},ce.toString())});return _.jsx("tr",{...B("monthRow"),children:ne},G)});return _.jsxs(_e,{component:"table",...B("month"),size:F,ref:t,...L,children:[!E&&_.jsx("thead",{...B("monthThead"),children:_.jsx(JJ,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:U,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:j})]})});vF.classes=yDe;vF.displayName="@mantine/dates/Month";var vDe={pickerControl:"m_dc6a3c71"};const yLt={},vLt=(e,{size:t})=>({pickerControl:{"--dpc-fz":uo(t),"--dpc-size":en(t,"dpc-size")}}),bF=Le((e,t)=>{const n=xe("PickerControl",yLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=yt({name:d||"PickerControl",classes:vDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vLt,rootSelector:"pickerControl"});return _.jsx(bs,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});bF.classes=vDe;bF.displayName="@mantine/dates/PickerControl";function bDe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function bLt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!bDe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function _De(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var wDe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const _Lt={yearsListFormat:"YYYY",withCellSpacing:!0},_F=Le((e,t)=>{const n=xe("YearsList",_Lt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...A}=n,C=yt({name:m||"YearsList",classes:wDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),I=Yl(),R=_De(l),O=bLt(R,d,h,p),P=R.map(($,F)=>{const L=$.map((B,z)=>{const q=p==null?void 0:p(B),D=Tt(B).isSame(O,"year");return _.jsx("td",{...C("yearsListCell"),"data-with-spacing":S||void 0,children:_.jsx(bF,{...C("yearsListControl"),size:T,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:bDe(B,d,h),ref:U=>g==null?void 0:g(F,z,U),...q,onKeyDown:U=>{var W;(W=q==null?void 0:q.onKeyDown)==null||W.call(q,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:B})},onClick:U=>{var W;(W=q==null?void 0:q.onClick)==null||W.call(q,U),v==null||v(U,B)},onMouseEnter:U=>{var W;(W=q==null?void 0:q.onMouseEnter)==null||W.call(q,U),b==null||b(U,B)},onMouseDown:U=>{var W;(W=q==null?void 0:q.onMouseDown)==null||W.call(q,U),w&&U.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(I.getLocale(f)).format(c)})},z)});return _.jsx("tr",{...C("yearsListRow"),children:L},F)});return _.jsx(_e,{component:"table",ref:t,size:T,...C("yearsList"),...A,children:_.jsx("tbody",{children:P})})});_F.classes=wDe;_F.displayName="@mantine/dates/YearsList";function EDe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function wLt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!EDe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function ELt(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var xDe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const xLt={monthsListFormat:"MMM",withCellSpacing:!0},wF=Le((e,t)=>{const n=xe("MonthsList",xLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...A}=n,C=yt({name:l||"MonthsList",classes:xDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),I=Yl(),R=ELt(c),O=wLt(R,h,p,m),P=R.map(($,F)=>{const L=$.map((B,z)=>{const q=m==null?void 0:m(B),D=Tt(B).isSame(O,"month");return _.jsx("td",{...C("monthsListCell"),"data-with-spacing":S||void 0,children:_.jsx(bF,{...C("monthsListControl"),size:T,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:EDe(B,h,p),ref:U=>g==null?void 0:g(F,z,U),...q,onKeyDown:U=>{var W;(W=q==null?void 0:q.onKeyDown)==null||W.call(q,U),y==null||y(U,{rowIndex:F,cellIndex:z,date:B})},onClick:U=>{var W;(W=q==null?void 0:q.onClick)==null||W.call(q,U),v==null||v(U,B)},onMouseEnter:U=>{var W;(W=q==null?void 0:q.onMouseEnter)==null||W.call(q,U),b==null||b(U,B)},onMouseDown:U=>{var W;(W=q==null?void 0:q.onMouseDown)==null||W.call(q,U),w&&U.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(B).locale(I.getLocale(d)).format(f)})},z)});return _.jsx("tr",{...C("monthsListRow"),children:L},F)});return _.jsx(_e,{component:"table",ref:t,size:T,...C("monthsList"),...A,children:_.jsx("tbody",{children:P})})});wF.classes=xDe;wF.displayName="@mantine/dates/MonthsList";var SDe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const SLt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},TLt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":en(t,"dch-control-size"),"--dch-fz":uo(t)}}),$y=Le((e,t)=>{const n=xe("CalendarHeader",SLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:S,__staticSelector:T,__preventFocus:A,__stopPropagation:C,...I}=n,R=yt({name:T||"CalendarHeader",classes:SDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TLt,rootSelector:"calendarHeader"}),O=A?P=>P.preventDefault():void 0;return _.jsxs(_e,{...R("calendarHeader"),ref:t,...I,children:[S&&_.jsx(bs,{...R("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:A||v?-1:0,"data-mantine-stop-propagation":C||void 0,children:c||_.jsx(hE,{...R("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(bs,{component:b?"button":"div",...R("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?O:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:A||!b?-1:0,"data-mantine-stop-propagation":C||void 0,children:g}),E&&_.jsx(bs,{...R("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:A||y?-1:0,"data-mantine-stop-propagation":C||void 0,children:l||_.jsx(hE,{...R("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});$y.classes=SDe;$y.displayName="@mantine/dates/CalendarHeader";function ALt(e){const t=_De(e);return[t[0][0],t[3][0]]}const CLt={decadeLabelFormat:"YYYY"},EF=Le((e,t)=>{const n=xe("DecadeLevel",CLt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:S,levelControlAriaLabel:T,withNext:A,withPrevious:C,decadeLabelFormat:I,classNames:R,styles:O,unstyled:P,__staticSelector:$,__stopPropagation:F,size:L,...B}=n,z=Yl(),[q,D]=ALt(r),U={__staticSelector:$||"DecadeLevel",classNames:R,styles:O,unstyled:P,size:L},W=typeof E=="boolean"?E:o?!Tt(D).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(q).startOf("year").isAfter(s):!1,H=(G,ne)=>Tt(G).locale(i||z.locale).format(ne);return _.jsxs(_e,{"data-decade-level":!0,size:L,ref:t,...B,children:[_.jsx($y,{label:typeof I=="function"?I(q,D):`${H(q,I)}  ${H(D,I)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:T,withNext:A,withPrevious:C,...U}),_.jsx(_F,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...U})]})});EF.classes={..._F.classes,...$y.classes};EF.displayName="@mantine/dates/DecadeLevel";const ILt={yearLabelFormat:"YYYY"},xF=Le((e,t)=>{const n=xe("YearLevel",ILt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:S,previousDisabled:T,hasNextLevel:A,levelControlAriaLabel:C,withNext:I,withPrevious:R,yearLabelFormat:O,__staticSelector:P,__stopPropagation:$,size:F,classNames:L,styles:B,unstyled:z,...q}=n,D=Yl(),U={__staticSelector:P||"YearLevel",classNames:L,styles:B,unstyled:z,size:F},W=typeof S=="boolean"?S:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!Tt(r).startOf("year").isAfter(s):!1;return _.jsxs(_e,{"data-year-level":!0,size:F,ref:t,...q,children:[_.jsx($y,{label:typeof O=="function"?O(r):Tt(r).locale(i||D.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:A,levelControlAriaLabel:C,withNext:I,withPrevious:R,...U}),_.jsx(wF,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...U})]})});xF.classes={...$y.classes,...wF.classes};xF.displayName="@mantine/dates/YearLevel";const kLt={monthLabelFormat:"MMMM YYYY"},SF=Le((e,t)=>{const n=xe("MonthLevel",kLt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:A,nextLabel:C,previousLabel:I,onNext:R,onPrevious:O,onLevelClick:P,nextDisabled:$,previousDisabled:F,hasNextLevel:L,levelControlAriaLabel:B,withNext:z,withPrevious:q,monthLabelFormat:D,classNames:U,styles:W,unstyled:j,__staticSelector:H,size:G,static:ne,...ce}=n,de=Yl(),he={__staticSelector:H||"MonthLevel",classNames:U,styles:W,unstyled:j,size:G},ye=typeof $=="boolean"?$:f?!Tt(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!Tt(r).startOf("month").isAfter(c):!1;return _.jsxs(_e,{"data-month-level":!0,size:G,ref:t,...ce,children:[_.jsx($y,{label:typeof D=="function"?D(r):Tt(r).locale(i||de.locale).format(D),__preventFocus:E,__stopPropagation:S,nextIcon:T,previousIcon:A,nextLabel:C,previousLabel:I,onNext:R,onPrevious:O,onLevelClick:P,nextDisabled:ye,previousDisabled:Ie,hasNextLevel:L,levelControlAriaLabel:B,withNext:z,withPrevious:q,...he}),_.jsx(vF,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:E,__stopPropagation:S,static:ne,withCellSpacing:w,...he})]})});SF.classes={...vF.classes,...$y.classes};SF.displayName="@mantine/dates/MonthLevel";var TDe={levelsGroup:"m_30b26e33"};const RLt={},My=Le((e,t)=>{const n=xe("LevelsGroup",RLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=yt({name:l||"LevelsGroup",classes:TDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(_e,{ref:t,...f("levelsGroup"),...c})});My.classes=TDe;My.displayName="@mantine/dates/LevelsGroup";const NLt={numberOfColumns:1},TF=Le((e,t)=>{const n=xe("DecadeLevelGroup",NLt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:S,unstyled:T,__staticSelector:A,__stopPropagation:C,numberOfColumns:I,levelControlAriaLabel:R,decadeLabelFormat:O,size:P,vars:$,...F}=n,L=N.useRef([]),B=Array(I).fill(0).map((z,q)=>{const D=Tt(r).add(q*10,"years").toDate();return _.jsx(EF,{size:P,yearsListFormat:a,decade:D,withNext:q===I-1,withPrevious:q===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(U,W)=>XJ({levelIndex:q,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:U,controlsRef:L}),__getControlRef:(U,W,j)=>{Array.isArray(L.current[q])||(L.current[q]=[]),Array.isArray(L.current[q][U])||(L.current[q][U]=[]),L.current[q][U][W]=j},levelControlAriaLabel:typeof R=="function"?R(D):R,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:C,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:A||"DecadeLevelGroup",classNames:E,styles:S,unstyled:T,withCellSpacing:f},q)});return _.jsx(My,{classNames:E,styles:S,__staticSelector:A||"DecadeLevelGroup",ref:t,size:P,unstyled:T,...F,children:B})});TF.classes={...My.classes,...EF.classes};TF.displayName="@mantine/dates/DecadeLevelGroup";const PLt={numberOfColumns:1},AF=Le((e,t)=>{const n=xe("YearLevelGroup",PLt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,classNames:T,styles:A,unstyled:C,__staticSelector:I,__stopPropagation:R,numberOfColumns:O,levelControlAriaLabel:P,yearLabelFormat:$,size:F,vars:L,...B}=n,z=N.useRef([]),q=Array(O).fill(0).map((D,U)=>{const W=Tt(r).add(U,"years").toDate();return _.jsx(xF,{size:F,monthsListFormat:a,year:W,withNext:U===O-1,withPrevious:U===0,yearLabelFormat:$,__stopPropagation:R,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,H)=>XJ({levelIndex:U,rowIndex:H.rowIndex,cellIndex:H.cellIndex,event:j,controlsRef:z}),__getControlRef:(j,H,G)=>{Array.isArray(z.current[U])||(z.current[U]=[]),Array.isArray(z.current[U][j])||(z.current[U][j]=[]),z.current[U][j][H]=G},levelControlAriaLabel:typeof P=="function"?P(W):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,getMonthControlProps:u,classNames:T,styles:A,unstyled:C,__staticSelector:I||"YearLevelGroup",withCellSpacing:f},U)});return _.jsx(My,{classNames:T,styles:A,__staticSelector:I||"YearLevelGroup",ref:t,size:F,unstyled:C,...B,children:q})});AF.classes={...xF.classes,...My.classes};AF.displayName="@mantine/dates/YearLevelGroup";const DLt={numberOfColumns:1},CF=Le((e,t)=>{const n=xe("MonthLevelGroup",DLt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:A,onPrevious:C,onLevelClick:I,nextDisabled:R,previousDisabled:O,hasNextLevel:P,classNames:$,styles:F,unstyled:L,numberOfColumns:B,levelControlAriaLabel:z,monthLabelFormat:q,__staticSelector:D,__stopPropagation:U,size:W,static:j,vars:H,...G}=n,ne=N.useRef([]),ce=Array(B).fill(0).map((de,he)=>{const ye=Tt(r).add(he,"months").toDate();return _.jsx(SF,{month:ye,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:q,__stopPropagation:U,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,ve)=>XJ({levelIndex:he,rowIndex:ve.rowIndex,cellIndex:ve.cellIndex,event:Ie,controlsRef:ne}),__getDayRef:(Ie,ve,Ke)=>{Array.isArray(ne.current[he])||(ne.current[he]=[]),Array.isArray(ne.current[he][Ie])||(ne.current[he][Ie]=[]),ne.current[he][Ie][ve]=Ke},levelControlAriaLabel:typeof z=="function"?z(ye):z,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:S,previousLabel:T,onNext:A,onPrevious:C,onLevelClick:I,nextDisabled:R,previousDisabled:O,hasNextLevel:P,classNames:$,styles:F,unstyled:L,__staticSelector:D||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},he)});return _.jsx(My,{classNames:$,styles:F,__staticSelector:D||"MonthLevelGroup",ref:t,size:W,...G,children:ce})});CF.classes={...My.classes,...SF.classes};CF.displayName="@mantine/dates/MonthLevelGroup";var ADe={input:"m_6fa5e2aa"};const OLt={},IF=Le((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:S,value:T,name:A,form:C,type:I,...R}=ebe("PickerInputBase",OLt,e),O=b||(g&&w&&!E&&!S?_.jsx(_y,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),P=()=>{I==="range"&&Array.isArray(T)&&T[0]&&!T[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(_s,{opened:p,onClose:P,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(di.Wrapper,{...r,children:_.jsxs(Zr,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),P()},children:[_.jsx(Zr.Target,{children:_.jsx(di,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Ki(ADe.input,s==null?void 0:s.input)},...R,children:d||_.jsx(di.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(Zr.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(fDe,{value:T,name:A,form:C,type:I})]})});IF.classes=ADe;IF.displayName="@mantine/dates/PickerInputBase";const Ahe=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function ZJ({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=N.useRef(e),o=Yl(),[a,u,l]=ws({value:w0("add",t,o.getTimezone(),!i),defaultValue:w0("add",n,o.getTimezone(),!i),finalValue:Ahe(e),onChange:f=>{r==null||r(w0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:Ahe(e),u(c))),[c,u,l]}function d9(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function $Lt(e){return e===0?"month":e===1?"year":"decade"}function ST(e,t,n){return $Lt(Hd(d9(e,0),d9(t,0),d9(n,2)))}const MLt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},kF=Le((e,t)=>{const n=xe("Calendar",MLt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:A,excludeDate:C,renderDay:I,hideOutsideDates:R,hideWeekdays:O,getDayAriaLabel:P,monthLabelFormat:$,nextIcon:F,previousIcon:L,__onDayClick:B,__onDayMouseEnter:z,withCellSpacing:q,monthsListFormat:D,getMonthControlProps:U,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:H,decadeLabelFormat:G,classNames:ne,styles:ce,unstyled:de,minDate:he,maxDate:ye,locale:Ie,__staticSelector:ve,size:Ke,__preventFocus:Ue,__stopPropagation:gt,onNextDecade:rt,onPreviousDecade:be,onNextYear:ke,onPreviousYear:ze,onNextMonth:ct,onPreviousMonth:Dt,static:We,__timezoneApplied:me,...dt}=n,{resolvedClassNames:vt,resolvedStyles:pe}=Lm({classNames:ne,styles:ce,props:n}),[Ce,He]=ws({value:a?ST(a,s,i):void 0,defaultValue:o?ST(o,s,i):void 0,finalValue:ST(void 0,s,i),onChange:u}),[ut,_t]=ZJ({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!me}),Mn={__staticSelector:ve||"Calendar",styles:pe,classNames:vt,unstyled:de,size:Ke},Sr=Yl(),Ln=h||d||1,lr=ut||w0("add",new Date,Sr.getTimezone()),pn=()=>{const Tn=Tt(lr).add(Ln,"month").toDate();ct==null||ct(Tn),_t(Tn)},Sn=()=>{const Tn=Tt(lr).subtract(Ln,"month").toDate();Dt==null||Dt(Tn),_t(Tn)},tr=()=>{const Tn=Tt(lr).add(Ln,"year").toDate();ke==null||ke(Tn),_t(Tn)},nr=()=>{const Tn=Tt(lr).subtract(Ln,"year").toDate();ze==null||ze(Tn),_t(Tn)},Bo=()=>{const Tn=Tt(lr).add(10*Ln,"year").toDate();rt==null||rt(Tn),_t(Tn)},Oi=()=>{const Tn=Tt(lr).subtract(10*Ln,"year").toDate();be==null||be(Tn),_t(Tn)};return _.jsxs(_e,{ref:t,size:Ke,"data-calendar":!0,...dt,children:[Ce==="month"&&_.jsx(CF,{month:lr,minDate:he,maxDate:ye,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:A,excludeDate:C,renderDay:I,hideOutsideDates:R,hideWeekdays:O,getDayAriaLabel:P,onNext:pn,onPrevious:Sn,hasNextLevel:i!=="month",onLevelClick:()=>He("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:L,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:z,__preventFocus:Ue,__stopPropagation:gt,static:We,withCellSpacing:q,...Mn}),Ce==="year"&&_.jsx(AF,{year:lr,numberOfColumns:d,minDate:he,maxDate:ye,monthsListFormat:D,getMonthControlProps:U,locale:Ie,onNext:tr,onPrevious:nr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>He("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:L,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(Tn,$i)=>{w&&_t($i),He(ST("month",s,i)),g==null||g($i)},__preventFocus:Ue,__stopPropagation:gt,withCellSpacing:q,...Mn}),Ce==="decade"&&_.jsx(TF,{decade:lr,minDate:he,maxDate:ye,yearsListFormat:j,getYearControlProps:H,locale:Ie,onNext:Bo,onPrevious:Oi,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:L,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(Tn,$i)=>{b&&_t($i),He(ST("year",s,i)),m==null||m($i)},__preventFocus:Ue,__stopPropagation:gt,withCellSpacing:q,...Mn})]})});kF.classes={...TF.classes,...AF.classes,...CF.classes};kF.displayName="@mantine/dates/Calendar";function LLt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:I,firstDayOfWeek:R,weekdayFormat:O,weekendDays:P,getDayProps:$,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:z,getDayAriaLabel:q,monthLabelFormat:D,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ye,locale:Ie,...ve}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:I,firstDayOfWeek:R,weekdayFormat:O,weekendDays:P,getDayProps:$,excludeDate:F,renderDay:L,hideOutsideDates:B,hideWeekdays:z,getDayAriaLabel:q,monthLabelFormat:D,monthsListFormat:U,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ye,locale:Ie},others:ve}}function Che(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function FLt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=ZJ({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=N.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=N.useState(null),m=S=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(S).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const T=[S,f];T.sort((A,C)=>A.getTime()-C.getTime()),c(T),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(S).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([S,null]),p(null),d(S);return}if(e==="multiple"){l.some(T=>Tt(T).isSame(S,t))?c(l.filter(T=>!Tt(T).isSame(S,t))):c([...l,S]);return}l&&o&&Tt(S).isSame(l,t)?c(null):c(S)},g=S=>f instanceof Date&&h instanceof Date?Che(S,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?Che(S,l):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>l[0]instanceof Date&&Tt(S).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,b=S=>l[1]instanceof Date?Tt(S).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(S).isSame(l[0],t),w=S=>{if(e==="range")return{selected:l.some(A=>A&&Tt(A).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:b(S),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:l.some(A=>A&&Tt(A).isSame(S,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};const T=Tt(l).isSame(S,t);return{selected:T,"data-autofocus":T||void 0}},E=e==="range"&&f?p:()=>{};return N.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const jLt={type:"default",defaultLevel:"month",numberOfColumns:1},RF=Le((e,t)=>{const n=xe("DatePicker",jLt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:S,onHoveredDateChange:T,getControlProps:A}=FLt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:C,resolvedStyles:I}=Lm({classNames:r,styles:i,props:n}),R=Yl();return _.jsx(kF,{ref:t,minLevel:"month",classNames:C,styles:I,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,P)=>{T(P),y==null||y(O,P)},__onDayClick:(O,P)=>{E(P),v==null||v(O,P)},getDayProps:O=>({...A(O),...f==null?void 0:f(O)}),...w,date:w0("add",w.date,R.getTimezone(),b),__timezoneApplied:!0})});RF.classes=kF.classes;RF.displayName="@mantine/dates/DatePicker";function BLt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Yl(),[f,d]=Sw(!1),[h,p]=ZJ({type:e,value:t,defaultValue:n,onChange:r}),m=YMt({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const ULt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},eZ=Le((e,t)=>{const n=xe("DatePickerInput",ULt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:S,...T}=n,{resolvedClassNames:A,resolvedStyles:C}=Lm({classNames:c,styles:f,props:n}),{calendarProps:I,others:R}=LLt(T),{_value:O,setValue:P,formattedValue:$,dropdownHandlers:F,dropdownOpened:L,onClear:B,shouldClear:z}=BLt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:S}),q=Array.isArray(O)?O[0]||E:O||E,D=Yl();return _.jsx(IF,{formattedValue:$,dropdownOpened:L,dropdownHandlers:F,classNames:A,styles:C,unstyled:d,ref:t,onClear:B,shouldClear:z,value:O,size:p,variant:m,dropdownType:g,...R,type:r,__staticSelector:"DatePickerInput",children:_.jsx(RF,{...I,size:p,variant:m,type:r,value:O,defaultDate:q||rLt({maxDate:b,minDate:v,timezone:D.getTimezone()}),onChange:P,locale:l,classNames:A,styles:C,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:w0("add",I.date,D.getTimezone()),__timezoneApplied:!0})})});eZ.classes={...IF.classes,...RF.classes};eZ.displayName="@mantine/dates/DatePickerInput";var CDe={exports:{}},zLt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",VLt=zLt,HLt=VLt;function IDe(){}function kDe(){}kDe.resetWarningCache=IDe;var qLt=function(){function e(r,i,s,o,a,u){if(u!==HLt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:kDe,resetWarningCache:IDe};return n.PropTypes=n,n};CDe.exports=qLt();var WLt=CDe.exports;const Ihe=Hl(WLt),khe={};function wV(e,t){e===void 0&&(e=khe),t===void 0&&(t=khe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var GLt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),YLt=Object.prototype.hasOwnProperty;function EV(e,t){return YLt.call(e,t)}function xV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)EV(e,i)&&r.push(i);return r}function xl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function SV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Sv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function RDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function TV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(TV(e[t]))return!0}else if(typeof e=="object"){for(var r=xV(e),i=r.length,s=0;s<i;s++)if(TV(e[r[s]]))return!0}}return!1}function Rhe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var NDe=function(e){GLt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Rhe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Rhe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Bi=NDe,KLt=xl,fw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=R$(n,this.path);r&&(r=xl(r));var i=m1(n,{op:"remove",path:this.from}).removed;return m1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=R$(n,this.from);return m1(n,{op:"add",path:this.path,value:xl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:eI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},XLt={add:function(e,t,n){return SV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:fw.move,copy:fw.copy,test:fw.test,_get:fw._get};function R$(e,t){if(t=="")return e;var n={op:"_get",path:t};return m1(e,n),n.value}function m1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):N$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=R$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=eI(e,t.value),o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=xl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=N$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=RDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!SV(h))throw new Bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);SV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=XLt[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=fw[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function NF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=xl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=m1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function QLt(e,t,n){var r=m1(e,t);if(r.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function N$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(fw[e.op]){if(typeof e.path!="string")throw new Bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&TV(e.value))throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=PDe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function PDe(e,t,n){try{if(!Array.isArray(e))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)NF(xl(t),xl(e),n||!0);else{n=n||N$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Bi)return i;throw i}}function eI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!eI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!eI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const JLt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bi,_areEquals:eI,applyOperation:m1,applyPatch:NF,applyReducer:QLt,deepClone:KLt,getValueByPointer:R$,validate:PDe,validator:N$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var tZ=new WeakMap,ZLt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),e6t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function t6t(e){return tZ.get(e)}function n6t(e,t){return e.observers.get(t)}function r6t(e,t){e.observers.delete(t.callback)}function i6t(e,t){t.unobserve()}function s6t(e,t){var n=[],r,i=t6t(e);if(!i)i=new ZLt(e),tZ.set(e,i);else{var s=n6t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=xl(e),t){r.callback=t,r.next=null;var o=function(){AV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){AV(r),clearTimeout(r.next),r6t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new e6t(t,r)),r}function AV(e,t){t===void 0&&(t=!1);var n=tZ.get(e.object);nZ(n.value,e.object,e.patches,"",t),e.patches.length&&NF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function nZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=xV(t),o=xV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(EV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?nZ(c,f,n,r+"/"+Sv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Sv(l),value:xl(c)}),n.push({op:"replace",path:r+"/"+Sv(l),value:xl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Sv(l),value:xl(c)}),n.push({op:"remove",path:r+"/"+Sv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!EV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Sv(l),value:xl(t[l])})}}}function o6t(e,t,n){n===void 0&&(n=!1);var r=[];return nZ(e,t,r,"",n),r}const a6t=Object.freeze(Object.defineProperty({__proto__:null,compare:o6t,generate:AV,observe:s6t,unobserve:i6t},Symbol.toStringTag,{value:"Module"}));Object.assign({},JLt,a6t,{JsonPatchError:NDe,deepClone:xl,escapePathComponent:Sv,unescapePathComponent:RDe});var u6t=/("(?:[^\\"]|\\.)*")|[:,]/g,l6t=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(u6t,function(S,T){return T||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const h9=Hl(l6t);function rl(e,t,n){return e.fields=t||[],e.fname=n,e}function Yi(e){return e==null?null:e.fname}function ha(e){return e==null?null:e.fields}function DDe(e){return e.length===1?c6t(e[0]):f6t(e)}const c6t=e=>function(t){return t[e]},f6t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Me(e){throw Error(e)}function Gh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Me("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Me("Access path missing closing bracket: "+e),r&&Me("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Nc(e,t,n){const r=Gh(e);return e=r.length===1?r[0]:e,rl((n&&n.get||DDe)(r),[e],t||e)}const Lk=Nc("id"),_a=rl(e=>e,[],"identity"),Bg=rl(()=>0,[],"zero"),bS=rl(()=>1,[],"one"),Pc=rl(()=>!0,[],"true"),bg=rl(()=>!1,[],"false");function d6t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const ODe=0,rZ=1,iZ=2,$De=3,MDe=4;function sZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d6t,r=e||ODe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=rZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=iZ&&n(t||"warn","WARN",arguments),this},info(){return r>=$De&&n(t||"log","INFO",arguments),this},debug(){return r>=MDe&&n(t||"log","DEBUG",arguments),this}}}var je=Array.isArray;function mt(e){return e===Object(e)}const Nhe=e=>e!=="__proto__";function _S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=h6t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;wS(r,s,i[s],o)}return r},{})}function wS(e,t,n,r){if(!Nhe(t))return;let i,s;if(mt(n)&&!je(n)){s=mt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?wS(s,i,n[i]):Nhe(i)&&(s[i]=n[i])}else e[t]=n}function h6t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Xn(e){return e[e.length-1]}function ca(e){return e==null||e===""?null:+e}const LDe=e=>t=>e*Math.exp(t),FDe=e=>t=>Math.log(e*t),jDe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),BDe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,P$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function PF(e,t,n,r){const i=n(e[0]),s=n(Xn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function UDe(e,t){return PF(e,t,ca,_a)}function zDe(e,t){var n=Math.sign(e[0]);return PF(e,t,FDe(n),LDe(n))}function VDe(e,t,n){return PF(e,t,P$(n),P$(1/n))}function HDe(e,t,n){return PF(e,t,jDe(n),BDe(n))}function DF(e,t,n,r,i){const s=r(e[0]),o=r(Xn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function oZ(e,t,n){return DF(e,t,n,ca,_a)}function aZ(e,t,n){const r=Math.sign(e[0]);return DF(e,t,n,FDe(r),LDe(r))}function D$(e,t,n,r){return DF(e,t,n,P$(r),P$(1/r))}function uZ(e,t,n,r){return DF(e,t,n,jDe(r),BDe(r))}function qDe(e){return 1+~~(new Date(e).getMonth()/3)}function WDe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ht(e){return e!=null?je(e)?e:[e]:[]}function GDe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function vn(e){return typeof e=="function"}const p6t="descending";function lZ(e,t,n){n=n||{},t=ht(t)||[];const r=[],i=[],s={},o=n.comparator||m6t;return ht(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===p6t?-1:1),i.push(a=vn(a)?a:Nc(a,null,n)),(ha(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:rl(o(i,r),Object.keys(s))}const OF=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),m6t=(e,t)=>e.length===1?g6t(e[0],t[0]):y6t(e,t,e.length),g6t=(e,t)=>function(n,r){return OF(e(n),e(r))*t},y6t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=OF(s(r),s(i));return o*t[a]});function wa(e){return vn(e)?e:()=>e}function cZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function yn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Ch(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function YDe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const v6t=Object.prototype.hasOwnProperty;function Ft(e,t){return v6t.call(e,t)}const KN={};function ES(e){let t={},n;function r(s){return Ft(t,s)&&t[s]!==KN}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===KN&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=KN),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==KN&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function KDe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Xn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),yn(r,n)}function dw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Ly(e){return typeof e=="boolean"}function E0(e){return Object.prototype.toString.call(e)==="[object Date]"}function XDe(e){return e&&vn(e[Symbol.iterator])}function ur(e){return typeof e=="number"}function QDe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function pt(e){return typeof e=="string"}function fZ(e,t,n){e&&(e=t?ht(e).map(a=>a.replace(/\\(.)/g,"$1")):ht(e));const r=e&&e.length,i=n&&n.get||DDe,s=a=>i(t?[a]:Gh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return rl(o,e,"key")}function JDe(e,t){const n=e[0],r=Xn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const b6t=1e4;function ZDe(e){e=+e||b6t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ft(t,o)||Ft(n,o),get:o=>Ft(t,o)?t[o]:Ft(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ft(t,o)?t[o]=a:s(o,a)}}function eOe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function bA(e,t){let n="";for(;--t>=0;)n+=e;return n}function tOe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?bA(i,o)+s:r==="center"?bA(i,~~(o/2))+s+bA(i,Math.ceil(o/2)):s+bA(i,o)}function Fk(e){return e&&Xn(e)-e[0]||0}function nt(e){return je(e)?"["+e.map(nt)+"]":mt(e)||pt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function dZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const _6t=e=>ur(e)||E0(e)?e:Date.parse(e);function hZ(e,t){return t=t||_6t,e==null||e===""?null:t(e)}function pZ(e){return e==null||e===""?null:e+""}function qf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function nOe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Cg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function w6t(e){return e}function E6t(e){if(e==null)return w6t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function x6t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function S6t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Phe(e,n)})}:Phe(e,t)}function Phe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=rOe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function rOe(e,t){var n=E6t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&x6t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function T6t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function A6t(e){return rOe(e,C6t.apply(this,arguments))}function C6t(e,t,n){var r,i,s;if(arguments.length>1)r=I6t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:T6t(e,r)}}function I6t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Do="year",Qu="quarter",pa="month",Ds="week",Ju="date",la="day",Ih="dayofyear",jl="hours",Bl="minutes",Dc="seconds",Wf="milliseconds",mZ=[Do,Qu,pa,Ds,Ju,la,Ih,jl,Bl,Dc,Wf],p9=mZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function gZ(e){const t=ht(e).slice(),n={};return t.length||Me("Missing time unit."),t.forEach(i=>{Ft(p9,i)?n[i]=1:Me(`Invalid time unit: ${i}.`)}),(n[Ds]||n[la]?1:0)+(n[Qu]||n[pa]||n[Ju]?1:0)+(n[Ih]?1:0)>1&&Me(`Incompatible time units: ${e}`),t.sort((i,s)=>p9[i]-p9[s]),t}const k6t={[Do]:"%Y ",[Qu]:"Q%q ",[pa]:"%b ",[Ju]:"%d ",[Ds]:"W%U ",[la]:"%a ",[Ih]:"%j ",[jl]:"%H:00",[Bl]:"00:%M",[Dc]:":%S",[Wf]:".%L",[`${Do}-${pa}`]:"%Y-%m ",[`${Do}-${pa}-${Ju}`]:"%Y-%m-%d ",[`${jl}-${Bl}`]:"%H:%M"};function iOe(e,t){const n=yn({},k6t,t),r=gZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Ov=new Date;function yZ(e){return Ov.setFullYear(e),Ov.setMonth(0),Ov.setDate(1),Ov.setHours(0,0,0,0),Ov}function sOe(e){return aOe(new Date(e))}function oOe(e){return CV(new Date(e))}function aOe(e){return Qp.count(yZ(e.getFullYear())-1,e)}function CV(e){return Yx.count(yZ(e.getFullYear())-1,e)}function IV(e){return yZ(e).getDay()}function R6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function uOe(e){return cOe(new Date(e))}function lOe(e){return kV(new Date(e))}function cOe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return h0.count(t-1,e)}function kV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Kx.count(t-1,e)}function RV(e){return Ov.setTime(Date.UTC(e,0,1)),Ov.getUTCDay()}function N6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function fOe(e,t,n,r,i){const s=t||1,o=Xn(e),a=(y,v,b)=>(b=b||y,P6t(n[b],r[b],y===o&&s,v)),u=new Date,l=qf(e),c=l[Do]?a(Do):wa(2012),f=l[pa]?a(pa):l[Qu]?a(Qu):Bg,d=l[Ds]&&l[la]?a(la,1,Ds+la):l[Ds]?a(Ds,1):l[la]?a(la,1):l[Ju]?a(Ju,1):l[Ih]?a(Ih,1):bS,h=l[jl]?a(jl):Bg,p=l[Bl]?a(Bl):Bg,m=l[Dc]?a(Dc):Bg,g=l[Wf]?a(Wf):Bg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function P6t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function QE(e,t,n){return t+e*7-(n+6)%7}const D6t={[Do]:e=>e.getFullYear(),[Qu]:e=>Math.floor(e.getMonth()/3),[pa]:e=>e.getMonth(),[Ju]:e=>e.getDate(),[jl]:e=>e.getHours(),[Bl]:e=>e.getMinutes(),[Dc]:e=>e.getSeconds(),[Wf]:e=>e.getMilliseconds(),[Ih]:e=>aOe(e),[Ds]:e=>CV(e),[Ds+la]:(e,t)=>QE(CV(e),e.getDay(),IV(t)),[la]:(e,t)=>QE(1,e.getDay(),IV(t))},O6t={[Qu]:e=>3*e,[Ds]:(e,t)=>QE(e,0,IV(t))};function dOe(e,t){return fOe(e,t||1,D6t,O6t,R6t)}const $6t={[Do]:e=>e.getUTCFullYear(),[Qu]:e=>Math.floor(e.getUTCMonth()/3),[pa]:e=>e.getUTCMonth(),[Ju]:e=>e.getUTCDate(),[jl]:e=>e.getUTCHours(),[Bl]:e=>e.getUTCMinutes(),[Dc]:e=>e.getUTCSeconds(),[Wf]:e=>e.getUTCMilliseconds(),[Ih]:e=>cOe(e),[Ds]:e=>kV(e),[la]:(e,t)=>QE(1,e.getUTCDay(),RV(t)),[Ds+la]:(e,t)=>QE(kV(e),e.getUTCDay(),RV(t))},M6t={[Qu]:e=>3*e,[Ds]:(e,t)=>QE(e,0,RV(t))};function hOe(e,t){return fOe(e,t||1,$6t,M6t,N6t)}const L6t={[Do]:gh,[Qu]:_2.every(3),[pa]:_2,[Ds]:Yx,[Ju]:Qp,[la]:Qp,[Ih]:Qp,[jl]:i6,[Bl]:n6,[Dc]:Bp,[Wf]:AE},F6t={[Do]:yh,[Qu]:w2.every(3),[pa]:w2,[Ds]:Kx,[Ju]:h0,[la]:h0,[Ih]:h0,[jl]:s6,[Bl]:r6,[Dc]:Bp,[Wf]:AE};function xS(e){return L6t[e]}function SS(e){return F6t[e]}function pOe(e,t,n){return e?e.offset(t,n):void 0}function mOe(e,t,n){return pOe(xS(e),t,n)}function gOe(e,t,n){return pOe(SS(e),t,n)}function yOe(e,t,n,r){return e?e.range(t,n,r):void 0}function vOe(e,t,n,r){return yOe(xS(e),t,n,r)}function bOe(e,t,n,r){return yOe(SS(e),t,n,r)}const _A=1e3,wA=_A*60,EA=wA*60,$F=EA*24,j6t=$F*7,Dhe=$F*30,NV=$F*365,_Oe=[Do,pa,Ju,jl,Bl,Dc,Wf],xA=_Oe.slice(0,-1),SA=xA.slice(0,-1),TA=SA.slice(0,-1),B6t=TA.slice(0,-1),U6t=[Do,Ds],Ohe=[Do,pa],wOe=[Do],TT=[[xA,1,_A],[xA,5,5*_A],[xA,15,15*_A],[xA,30,30*_A],[SA,1,wA],[SA,5,5*wA],[SA,15,15*wA],[SA,30,30*wA],[TA,1,EA],[TA,3,3*EA],[TA,6,6*EA],[TA,12,12*EA],[B6t,1,$F],[U6t,1,j6t],[Ohe,1,Dhe],[Ohe,3,3*Dhe],[wOe,1,NV]];function EOe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Fk(t))/n;let i=Vx(a=>a[2]).right(TT,r),s,o;return i===TT.length?(s=wOe,o=$0(t[0]/NV,t[1]/NV,n)):i?(i=TT[r/TT[i-1][2]<TT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=_Oe,o=Math.max($0(t[0],t[1],n),1)),{units:s,step:o}}function AA(e){const t={};return n=>t[n]||(t[n]=e(n))}function z6t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=V6t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function V6t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function xOe(e){const t=AA(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=$1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return z6t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=$1(o??",f");const a=$0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=Wxe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=Gxe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=qxe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let PV;SOe();function SOe(){return PV=xOe({format:qx,formatPrefix:HY})}function TOe(e){return xOe(Hxe(e))}function O$(e){return arguments.length?PV=TOe(e):PV}function $he(e,t,n){n=n||{},mt(n)||Me(`Invalid time multi-format specifier: ${n}`);const r=t(Dc),i=t(Bl),s=t(jl),o=t(Ju),a=t(Ds),u=t(pa),l=t(Qu),c=t(Do),f=e(n[Wf]||".%L"),d=e(n[Dc]||":%S"),h=e(n[Bl]||"%I:%M"),p=e(n[jl]||"%I %p"),m=e(n[Ju]||n[la]||"%a %d"),g=e(n[Ds]||"%b %d"),y=e(n[pa]||"%B"),v=e(n[Qu]||"%B"),b=e(n[Do]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function AOe(e){const t=AA(e.format),n=AA(e.utcFormat);return{timeFormat:r=>pt(r)?t(r):$he(t,xS,r),utcFormat:r=>pt(r)?n(r):$he(n,SS,r),timeParse:AA(e.parse),utcParse:AA(e.utcParse)}}let DV;COe();function COe(){return DV=AOe({format:rK,parse:oTe,utcFormat:o6,utcParse:aTe})}function IOe(e){return AOe(tTe(e))}function tI(e){return arguments.length?DV=IOe(e):DV}const OV=(e,t)=>yn({},e,t);function kOe(e,t){const n=e?TOe(e):O$(),r=t?IOe(t):tI();return OV(n,r)}function vZ(e,t){const n=arguments.length;return n&&n!==2&&Me("defaultLocale expects either zero or two arguments."),n?OV(O$(e),tI(t)):OV(O$(),tI())}function H6t(){return SOe(),COe(),vZ()}const q6t=/^(data:|([A-Za-z]+:)?\/\/)/,W6t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,G6t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Mhe="file://";function Y6t(e,t){return n=>({options:n||{},sanitize:X6t,load:K6t,fileAccess:!!t,file:Q6t(t),http:Z6t(e)})}async function K6t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function X6t(e,t){t=yn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=W6t.test(e.replace(G6t,""));(e==null||typeof e!="string"||!a)&&Me("Sanitize failure, invalid URI: "+nt(e));const u=q6t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Mhe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Mhe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function Q6t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):J6t}async function J6t(){Me("No file system access.")}function Z6t(e){return e?async function(t,n){const r=yn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?vn(s[i])?s[i]():s.text():Me(s.status+""+s.statusText)}:eFt}async function eFt(){Me("No HTTP fetch method available.")}const tFt=e=>e!=null&&e===e,nFt=e=>e==="true"||e==="false"||e===!0||e===!1,rFt=e=>!Number.isNaN(Date.parse(e)),ROe=e=>!Number.isNaN(+e)&&!(e instanceof Date),iFt=e=>ROe(e)&&Number.isInteger(+e),$V={boolean:dZ,integer:ca,number:ca,date:hZ,string:pZ,unknown:_a},XN=[nFt,iFt,ROe,rFt],sFt=["boolean","integer","number","date"];function NOe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=XN.length,i=XN.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&tFt(u)&&!XN[a](u)&&(i[a]=0,++o,o===XN.length))return"string";return sFt[i.reduce((s,o)=>s===0?o:s,0)-1]}function POe(e,t){return t.reduce((n,r)=>(n[r]=NOe(e,r),n),{})}function Lhe(e){const t=function(n,r){const i={delimiter:e};return bZ(n,r?yn(r,i):i)};return t.responseType="text",t}function bZ(e,t){return t.header&&(e=t.header.map(nt).join(t.delimiter)+`
`+e),Uxe(t.delimiter).parse(e+"")}bZ.responseType="text";function oFt(e){return typeof Buffer=="function"&&vn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function _Z(e,t){const n=t&&t.property?Nc(t.property):_a;return mt(e)&&!oFt(e)?aFt(n(e),t):n(JSON.parse(e))}_Z.responseType="json";function aFt(e,t){return!je(e)&&XDe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const uFt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function DOe(e,t){let n,r,i,s;return e=_Z(e,t),t&&t.feature?(n=S6t,i=t.feature):t&&t.mesh?(n=A6t,i=t.mesh,s=uFt[t.filter]):Me("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Me("Invalid TopoJSON object: "+i),r&&r.features||[r]}DOe.responseType="json";const bD={dsv:bZ,csv:Lhe(","),tsv:Lhe("	"),json:_Z,topojson:DOe};function wZ(e,t){return arguments.length>1?(bD[e]=t,this):Ft(bD,e)?bD[e]:null}function OOe(e){const t=wZ(e);return t&&t.responseType||"text"}function $Oe(e,t,n,r){t=t||{};const i=wZ(t.type||"json");return i||Me("Unknown data format type: "+t.type),e=i(e,t),t.parse&&lFt(e,t.parse,n,r),Ft(e,"columns")&&delete e.columns,e}function lFt(e,t,n,r){if(!e.length)return;const i=tI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=POe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!$V[p])throw Error("Illegal format pattern: "+h+":"+p);return $V[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const MF=Y6t(typeof fetch<"u"&&fetch,null);function LF(e){const t=e||_a,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function _D(e,t){try{await t(e)}catch(n){e.error(n)}}const MOe=Symbol("vega_id");let cFt=1;function FF(e){return!!(e&&Mt(e))}function Mt(e){return e[MOe]}function LOe(e,t){return e[MOe]=t,e}function _r(e){const t=e===Object(e)?e:{data:e};return Mt(t)?t:LOe(t,cFt++)}function EZ(e){return jF(e,_r({}))}function jF(e,t){for(const n in e)t[n]=e[n];return t}function FOe(e,t){return LOe(t,Mt(e))}function Fb(e,t){return e?t?(n,r)=>e(n,r)||Mt(t(n))-Mt(t(r)):(n,r)=>e(n,r)||Mt(n)-Mt(r):null}function jOe(e){return e&&e.constructor===jb}function jb(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:jb,insert(a){const u=ht(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=vn(a)?r:t,l=ht(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:wa(l)};return vn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return vn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Mt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Mt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Mt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Mt(m),l[g]?l[g]=1:a.add.push(_r(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Mt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Mt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Mt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Mt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Mt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const wD="_:mod:_";function BF(){Object.defineProperty(this,wD,{writable:!0,value:{}})}BF.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[wD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=je(n)?1+n.length:-1),i},modified(e,t){const n=this[wD];if(arguments.length){if(je(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[wD]={},this}};let fFt=0;const dFt="pulse",hFt=new BF,pFt=1,mFt=2;function Wr(e,t,n,r){this.id=++fFt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Fhe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Wr.prototype={targets(){return this._targets||(this._targets=LF(Lk))},set(e){return this.value!==e?(this.value=e,1):0},skip:Fhe(pFt),modified:Fhe(mFt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new BF,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Wr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===dFt)ht(a).forEach(f=>{f instanceof Wr?f!==this&&(f.targets().add(this),s.push(f)):Me("Pulse parameters must be operator instances.")}),this.source=a;else if(je(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||hFt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function gFt(e,t,n,r){let i=1,s;return e instanceof Wr?s=e:e&&e.prototype instanceof Wr?s=new e:vn(e)?s=new Wr(null,e):(i=0,s=new Wr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function yFt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let vFt=0;function UF(e,t,n){this.id=++vFt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function _g(e,t,n){return new UF(e,t,n)}UF.prototype={_filter:Pc,_apply:_a,targets(){return this._targets||(this._targets=LF(Lk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=_g(e);return this.targets().add(t),t},apply(e){const t=_g(null,e);return this.targets().add(t),t},merge(){const e=_g();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=_g();return this.targets().add(_g(null,null,cZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(_g(null,null,()=>n=!0)),t.targets().add(_g(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Pc,this._targets=null}};function bFt(e,t,n,r){const i=this,s=_g(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=ht(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function _Ft(e,t){const n=this.locale();return $Oe(e,t,n.timeParse,n.utcParse)}function wFt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function EFt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:OOe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function xFt(e,t,n){const r=this,i=r._pending||SFt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Pc).insert(s.data||[])),i.done(),s}function SFt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const TFt={skip:!0};function AFt(e,t,n,r,i){return(e instanceof Wr?IFt:CFt)(this,e,t,n,r,i),this}function CFt(e,t,n,r,i,s){const o=yn({},s,TFt);let a,u;vn(n)||(n=wa(n)),r===void 0?a=l=>e.touch(n(l)):vn(r)?(u=new Wr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;jOe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function IFt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Wr(null,kFt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function kFt(e,t){return t=vn(t)?t:wa(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function RFt(e){e.rank=++this._rank}function NFt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Me("Cycle detected in dataflow graph.")}const $$={},Cd=1,Ig=2,_p=4,PFt=Cd|Ig,jhe=Cd|_p,__=Cd|Ig|_p,Bhe=8,AT=16,Uhe=32,zhe=64;function x0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function m9(e,t){const n=[];return Cg(e,t,r=>n.push(r)),n}function Vhe(e,t){const n={};return e.visit(t,r=>{n[Mt(r)]=1}),r=>n[Mt(r)]?null:r}function QN(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}x0.prototype={StopPropagation:$$,ADD:Cd,REM:Ig,MOD:_p,ADD_REM:PFt,ADD_MOD:jhe,ALL:__,REFLOW:Bhe,SOURCE:AT,NO_SOURCE:Uhe,NO_FIELDS:zhe,fork(e){return new x0(this.dataflow).init(this,e)},clone(){const e=this.fork(__);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(__|AT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new x0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&zhe)&&(n.fields=e.fields),t&Cd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Ig?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&_p?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Uhe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||__;return t&Cd&&this.add.length||t&Ig&&this.rem.length||t&_p&&this.mod.length},reflow(e){if(e)return this.fork(__).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(_p,Vhe(this,Cd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return je(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?je(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Cd&&(n.addF=QN(n.addF,t)),e&Ig&&(n.remF=QN(n.remF,t)),e&_p&&(n.modF=QN(n.modF,t)),e&AT&&(n.srcF=QN(n.srcF,t)),n},materialize(e){e=e||__;const t=this;return e&Cd&&t.addF&&(t.add=m9(t.add,t.addF),t.addF=null),e&Ig&&t.remF&&(t.rem=m9(t.rem,t.remF),t.remF=null),e&_p&&t.modF&&(t.mod=m9(t.mod,t.modF),t.modF=null),e&AT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&AT)return Cg(n.source,n.srcF,r),n;e&Cd&&Cg(n.add,n.addF,r),e&Ig&&Cg(n.rem,n.remF,r),e&_p&&Cg(n.mod,n.modF,r);const i=n.source;if(e&Bhe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Cg(i,Vhe(n,jhe),r):Cg(i,n.srcF,r))}return n}};function xZ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(xZ,x0,{fork(e){const t=new x0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?je(e)?e.some(r=>n[r]):n[e]:0},filter(){Me("MultiPulse does not support filtering.")},materialize(){Me("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function DFt(e,t,n){const r=this,i=[];if(r._pulse)return BOe(r);if(r._pending&&await r._pending,t&&await _D(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new x0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=LF(Lk);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=$$),u!==$$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await _D(r,c[f].callback)}return n&&await _D(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function OFt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function $Ft(e,t,n){return this._pulse?BOe(this):(this.evaluate(e,t,n),this)}function MFt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function BOe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function LFt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function FFt(e,t){const n=e.source,r=this._clock;return n&&je(n)?new xZ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||jFt(this._pulse,n&&n.pulse)}function jFt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==$$&&(e.source=t.source),e)}const SZ={skip:!1,force:!1};function BFt(e,t){const n=t||SZ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function UFt(e,t,n){const r=n||SZ;return(e.set(t)||r.force)&&this.touch(e,r),this}function zFt(e,t,n){this.touch(e,n||SZ);const r=new x0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function VFt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),UOe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,HFt(t,0,e)):r=n,r}}}function UOe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function HFt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,UOe(e,r,t,n)}function Kw(){this.logger(sZ()),this.logLevel(rZ),this._clock=0,this._rank=0,this._locale=vZ();try{this._loader=MF()}catch{}this._touched=LF(Lk),this._input={},this._pulse=null,this._heap=VFt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function CT(e){return function(){return this._log[e].apply(this,arguments)}}Kw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:CT("error"),warn:CT("warn"),info:CT("info"),debug:CT("debug"),logLevel:CT("level"),cleanThreshold:1e4,add:gFt,connect:yFt,rank:RFt,rerank:NFt,pulse:zFt,touch:BFt,update:UFt,changeset:jb,ingest:wFt,parse:_Ft,preload:xFt,request:EFt,events:bFt,on:AFt,evaluate:DFt,run:$Ft,runAsync:OFt,runAfter:MFt,_enqueue:LFt,_getPulse:FFt};function Pe(e,t){Wr.call(this,e,null,t)}lt(Pe,Wr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const JE={};function zOe(e){const t=VOe(e);return t&&t.Definition||null}function VOe(e){return e=e&&e.toLowerCase(),Ft(JE,e)?JE[e]:null}function*HOe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function TZ(e,t,n){const r=Float64Array.from(HOe(e,n));return r.sort(Kp),t.map(i=>HEe(r,i))}function AZ(e,t){return TZ(e,[.25,.5,.75],t)}function CZ(e,t){const n=e.length,r=Lst(e,t),i=AZ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function qOe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Oc=Math.random;function qFt(e){Oc=e}function WOe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(HOe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Oc()*s)];c[l]=a/s}return c.sort(Kp),[i7(c,n/2),i7(c,1-n/2)]}function GOe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?WFt(s,t+t/4):s}function WFt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function GFt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function YFt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Oc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const YOe=Math.sqrt(2*Math.PI),KFt=Math.SQRT2;let IT=NaN;function zF(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(IT===IT)n=IT,IT=NaN;else{do n=Oc()*2-1,r=Oc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,IT=r*s}return e+n*t}function IZ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*YOe)}function VF(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function HF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*KFt*XFt(2*e-1)}function XFt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function kZ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>zF(n,r),pdf:s=>IZ(s,n,r),cdf:s=>VF(s,n,r),icdf:s=>HF(s,n,r)};return i.mean(e).stdev(t)}function RZ(e,t){const n=kZ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=CZ(e)),i):t},sample(){return e[~~(Oc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function NZ(e,t){return e=e||0,t=t??1,Math.exp(e+zF()*t)}function PZ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*YOe*e)}function DZ(e,t,n){return VF(Math.log(e),t,n)}function OZ(e,t,n){return Math.exp(HF(e,t,n))}function KOe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>NZ(n,r),pdf:s=>PZ(s,n,r),cdf:s=>DZ(s,n,r),icdf:s=>OZ(s,n,r)};return i.mean(e).stdev(t)}function XOe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Oc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function $Z(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Oc()}function MZ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function LZ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function FZ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function QOe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>$Z(n,r),pdf:s=>MZ(s,n,r),cdf:s=>LZ(s,n,r),icdf:s=>FZ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function jZ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function jk(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function qF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function Bk(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function TS(e,t,n,r,i){let s=0,o=0;return Bk(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function BZ(e,t,n){let r=0,i=0,s=0,o=0,a=0;Bk(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=jk(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:TS(e,t,n,i,l)}}function JOe(e,t,n){let r=0,i=0,s=0,o=0,a=0;Bk(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=jk(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:TS(e,t,n,i,l)}}function ZOe(e,t,n){const[r,i,s,o]=qF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Bk(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=jk(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:TS(e,t,n,o,y)}}function e3e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;Bk(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=jk(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:TS(e,t,n,a,c)}}function UZ(e,t,n){const[r,i,s,o]=qF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,S=T=>(T=T-s,b*T*T+w*T+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:S,rSquared:TS(e,t,n,o,S)}}function t3e(e,t,n,r){if(r===0)return jZ(e,t,n);if(r===1)return BZ(e,t,n);if(r===2)return UZ(e,t,n);const[i,s,o,a]=qF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=JFt(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:QFt(f,y,-o,a),predict:v,rSquared:TS(e,t,n,a,v)}}function QFt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function JFt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Hhe=2,qhe=1e-12;function n3e(e,t,n,r){const[i,s,o,a]=qF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Hhe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,S=0,T=0,A=0,C=0;const I=1/Math.abs(i[w]-y||1);for(let P=v;P<=b;++P){const $=i[P],F=s[P],L=ZFt(Math.abs(y-$)*I)*d[P],B=$*L;E+=L,S+=B,T+=F*L,A+=F*B,C+=$*B}const[R,O]=jk(S/E,T/E,A/E,C/E);c[g]=R+O*y,f[g]=Math.abs(s[g]-c[g]),e4t(i,g+1,p)}if(h===Hhe)break;const m=qEe(f);if(Math.abs(m)<qhe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?qhe:(v=1-y*y)*v}return t4t(i,c,o,a)}function ZFt(e){return(e=1-e*e*e)*e*e}function e4t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function t4t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const n4t=.5*Math.PI/180;function WF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=r4t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&i4t(f,m,d,h,p)>n4t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function r4t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function i4t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function s4t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function MV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:s4t(e)}function r3e(e,t,n){return n||e+(t?"_"+t:"")}const g9=()=>{},o4t={init:g9,add:g9,rem:g9,idx:0},nI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Uk=Object.keys(nI).filter(e=>e!=="__count__");function a4t(e,t){return(n,r)=>yn({name:e,aggregate_param:r,out:n||e},o4t,t)}[...Uk,"__count__"].forEach(e=>{nI[e]=a4t(e,nI[e])});function i3e(e,t,n){return nI[e](n,t)}function s3e(e,t){return e.idx-t.idx}function u4t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=nI[i]())})};return e.forEach(n),Object.values(t).sort(s3e)}function l4t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function c4t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function f4t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function d4t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function o3e(e,t){const n=t||_a,r=u4t(e),i=e.slice().sort(s3e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=l4t,s.prototype.add=c4t,s.prototype.rem=f4t,s.prototype.set=d4t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function zZ(e){this._key=e?Nc(e):Mt,this.reset()}const jo=zZ.prototype;jo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};jo.add=function(e){this._add.push(e)};jo.rem=function(e){this._rem.push(e)};jo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};jo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ft(n,s)||(n[s]=1,++i);return i};jo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=YDe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};jo.argmin=function(e){return this.extent(e)[0]||{}};jo.argmax=function(e){return this.extent(e)[1]||{}};jo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};jo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};jo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=AZ(this.values(),e),this._get=e),this._q};jo.q1=function(e){return this.quartile(e)[0]};jo.q2=function(e){return this.quartile(e)[1]};jo.q3=function(e){return this.quartile(e)[2]};jo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=WOe(this.values(),1e3,.05,e),this._get=e),this._ci};jo.ci0=function(e){return this.ci(e)[0]};jo.ci1=function(e){return this.ci(e)[1]};function ty(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ty.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Uk},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(ty,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=ht(ha(v)),w=b.length;let E=0,S;for(;E<w;++E)r[S=b[E]]||(r[S]=1,t.push(S))}this._dims=ht(e.groupby),this._dnames=this._dims.map(v=>{const b=Yi(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:MV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Me("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Me("Null aggregate field specified."),m=Yi(f),g=r3e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(i3e(d,h,g))}return this._measures=this._measures.map(v=>o3e(v,v.field)),Object.create(null)},cellkey:MV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new zZ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?FOe(t.tuple,s):_r(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const h4t=1e-14;function VZ(e){Pe.call(this,null,e)}VZ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(VZ,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ha(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=qOe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ca(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(h4t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=rl(u,ha(t),e.name||"bin_"+Yi(t))}});function a3e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?eOe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function HZ(e){Pe.call(this,[],e)}HZ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(HZ,Pe,{transform(e,t){const n=t.fork(t.ALL),r=a3e(Mt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Fb(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function u3e(e){Wr.call(this,null,p4t,e)}lt(u3e,Wr);function p4t(e){return this.value&&!e.modified()?this.value:lZ(e.fields,e.orders)}function qZ(e){Pe.call(this,null,e)}qZ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function m4t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(qZ,Pe,{transform(e,t){const n=f=>d=>{for(var h=m4t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=_r({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function WZ(e){Pe.call(this,null,e)}WZ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(WZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=g4t(a,i,s,e.filter||Pc)):n.mod=a,n.source=this.value,n.modifies(r)}});function g4t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(_r(s)),s={},s[t]=l);return i}const Whe={kde:RZ,mixture:XOe,normal:kZ,lognormal:KOe,uniform:QOe},y4t="distributions",Ghe="function",v4t="field";function l3e(e,t){const n=e[Ghe];Ft(Whe,n)||Me("Unknown distribution function: "+n);const r=Whe[n]();for(const i in e)i===v4t?r.data((e.from||t()).map(e[i])):i===y4t?r[i](e[i].map(s=>l3e(s,t))):typeof r[i]===Ghe&&r[i](e[i]);return r}function GZ(e){Pe.call(this,null,e)}const c3e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],b4t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:c3e},{name:"weights",type:"number",array:!0}]};GZ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:c3e.concat(b4t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(GZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=l3e(e.distribution,_4t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Me("Invalid density method: "+o),!e.extent&&!r.data&&Me("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Ch(r.data()),l=WF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],_r(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function _4t(e){return()=>e.materialize(e.SOURCE).source}function f3e(e,t){return e?e.map((n,r)=>t[r]||Yi(n)):null}function YZ(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const d3e="bin";function KZ(e){Pe.call(this,null,e)}KZ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:d3e}]};const w4t=(e,t)=>Fk(Ch(e,t))/30;lt(KZ,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=YZ(t.source,e.groupby,_a),i=e.smooth||!1,s=e.field,o=e.step||w4t(n,s),a=Fb((p,m)=>s(p)-s(m)),u=e.as||d3e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of GOe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function h3e(e){Wr.call(this,null,E4t,e),this.modified(!0)}lt(h3e,Wr);function E4t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:rl(n=>t(n,e),ha(t),Yi(t))}function XZ(e){Pe.call(this,[void 0,void 0],e)}XZ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(XZ,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ca(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Yi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function QZ(e,t){Wr.call(this,e),this.parent=t,this.count=0}lt(QZ,Wr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function GF(e){Pe.call(this,{},e),this._keys=ES();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(GF,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ft(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new QZ(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Mt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Mt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Mt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Mt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Mt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function p3e(e){Wr.call(this,null,x4t,e)}lt(p3e,Wr);function x4t(e){return this.value&&!e.modified()?this.value:je(e.name)?ht(e.name).map(t=>Nc(t)):Nc(e.name,e.as)}function JZ(e){Pe.call(this,ES(),e)}JZ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(JZ,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Mt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Mt(f),1)});function c(f){const d=Mt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function ZZ(e){Pe.call(this,[],e)}ZZ.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(ZZ,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=f3e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=EZ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function eee(e){Pe.call(this,[],e)}eee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(eee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Yi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=EZ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function tee(e){Pe.call(this,null,e)}tee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(tee,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function m3e(e){Pe.call(this,[],e)}lt(m3e,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=_r(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const JN={value:"value",median:qEe,mean:Vst,min:r7,max:d0},S4t=[];function nee(e){Pe.call(this,[],e)}nee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function T4t(e){var t=e.method||JN.value,n;if(JN[t]==null)Me("Unrecognized imputation method: "+t);else return t===JN.value?(n=e.value!==void 0?e.value:0,()=>n):JN[t]}function A4t(e){const t=e.field;return n=>n?t(n):NaN}lt(nee,Pe,{transform(e,t){var n=t.fork(t.ALL),r=T4t(e),i=A4t(e),s=Yi(e.field),o=Yi(e.key),a=(e.groupby||[]).map(Yi),u=C4t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(_r(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function C4t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):S4t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function ree(e){ty.call(this,e)}ree.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Uk},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(ree,ty,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{yn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function iee(e){Pe.call(this,null,e)}iee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(iee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=YZ(r,e.groupby,e.field),s=(e.groupby||[]).map(Yi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Me("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Ch(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=RZ(h,o)[a],m=e.counts?h.length:1,g=c||Ch(h);WF(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(_r(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function g3e(e){Wr.call(this,null,I4t,e)}lt(g3e,Wr);function I4t(e){return this.value&&!e.modified()?this.value:fZ(e.fields,e.flat)}function y3e(e){Pe.call(this,[],e),this._pending=null}lt(y3e,Pe,{transform(e,t){const n=t.dataflow;return this._pending?y9(this,t,this._pending):k4t(e)?t.StopPropagation:e.values?y9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=ht(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>y9(this,t,ht(r.data)))}});function k4t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function y9(e,t,n){n.forEach(_r);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function see(e){Pe.call(this,{},e)}see.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(see,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Me('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Me('The "as" parameter has too few output field names.'),c=c||i.map(Yi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Me("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function v3e(e){Wr.call(this,null,R4t,e)}lt(v3e,Wr);function R4t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function b3e(e){Wr.call(this,null,N4t,e)}lt(b3e,Wr);function N4t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function _3e(e){Pe.call(this,null,e)}lt(_3e,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function oee(e){ty.call(this,e)}oee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Uk,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(oee,ty,{_transform:ty.prototype.transform,transform(e,t){return this._transform(P4t(e,t),t)}});function P4t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ha(n).concat(ha(r)),o=O4t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>D4t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function D4t(e,t,n,r){return rl(i=>t(i)===e?n(i):NaN,r,e+"")}function O4t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(OF),t?i.slice(0,t):i}function w3e(e){GF.call(this,e)}lt(w3e,GF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Mt(s),n,t,s);return(e.modified("field")||r&&t.modified(ha(r)))&&Me("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(_r(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function aee(e){Pe.call(this,null,e)}aee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(aee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=f3e(e.fields,e.as||[]),s=r?(a,u)=>$4t(a,u,r,i):jF;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Mt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,_r({}));o[Mt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Mt(a)]))}),n}});function $4t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function E3e(e){Pe.call(this,null,e)}lt(E3e,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function uee(e){Pe.call(this,null,e)}uee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const M4t=1e-14;lt(uee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=YZ(i,e.groupby,e.field),o=(e.groupby||[]).map(Yi),a=[],u=e.step||.01,l=e.probs||Nu(u/2,1-M4t,u),c=l.length;return s.forEach(f=>{const d=TZ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(_r(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function x3e(e){Pe.call(this,null,e)}lt(x3e,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Mt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=EZ(i);r[Mt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Mt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function lee(e){Pe.call(this,[],e),this.count=0}lee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(lee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Mt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Oc()),d<o.length&&d>=u&&(f=o[d],s[Mt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Mt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Mt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Mt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Mt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Mt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Mt(c)])),this.count=a,this.value=n.source=o,n}});function cee(e){Pe.call(this,null,e)}cee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(cee,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Nu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,_r(s)}),n.add=t.add.concat(this.value),n}});function S3e(e){Pe.call(this,null,e),this.modified(!0)}lt(S3e,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function fee(e){Pe.call(this,null,e)}const T3e=["unit0","unit1"];fee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:mZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:T3e}]};lt(fee,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?SS:xS)(s.unit).offset,a=e.as||T3e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ha(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:EOe({extent:e.extent||Ch(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=gZ(r),o=this.value||{},a=(n?hOe:dOe)(s,i);return a.unit=Xn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function A3e(e){Pe.call(this,ES(),e)}lt(A3e,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function C3e(e){Pe.call(this,null,e)}lt(C3e,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Fb(e.sort)):t.source).map(e.field))}});function L4t(e,t,n,r){const i=rI[e](t,n);return{init:i.init||Bg,update:function(s,o){o[r]=i.next(s)}}}const rI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=rI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Me("ntile num must be greater than zero.");const n=rI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Me("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=F4t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function F4t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const j4t=Object.keys(rI);function I3e(e){const t=ht(e.ops),n=ht(e.fields),r=ht(e.params),i=ht(e.aggregate_params),s=ht(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){ht(ha(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Yi(g),w=r3e(p,b,s[m]);if(h(g),o.push(w),Ft(rI,p))a.push(L4t(p,g,y,w));else{if(g==null&&p!=="count"&&Me("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(i3e(p,v,w))}}),(c.length||f.length)&&(this.cell=B4t(f,c,d)),this.inputs=Object.keys(u)}const k3e=I3e.prototype;k3e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};k3e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function B4t(e,t,n){e=e.map(u=>o3e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new zZ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function dee(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}dee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:j4t.concat(Uk)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(dee,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Fb(e.sort),i=MV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new I3e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)U4t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=a3e(Mt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function U4t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?Vx(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||wa(-1)};t.init();for(let f=0;f<u;++f)z4t(c,o,f,u),s&&V4t(c,l),t.update(c,a[f])}function z4t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function V4t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const H4t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ty,bin:VZ,collect:HZ,compare:u3e,countpattern:qZ,cross:WZ,density:GZ,dotbin:KZ,expression:h3e,extent:XZ,facet:GF,field:p3e,filter:JZ,flatten:ZZ,fold:eee,formula:tee,generate:m3e,impute:nee,joinaggregate:ree,kde:iee,key:g3e,load:y3e,lookup:see,multiextent:v3e,multivalues:b3e,params:_3e,pivot:oee,prefacet:w3e,project:aee,proxy:E3e,quantile:uee,relay:x3e,sample:lee,sequence:cee,sieve:S3e,subflow:QZ,timeunit:fee,tupleindex:A3e,values:C3e,window:dee},Symbol.toStringTag,{value:"Module"}));function S0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const q4t=()=>typeof Image<"u"?Image:null;function hee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const W4t="identity",ZE="linear",Dm="log",zk="pow",Vk="sqrt",YF="symlog",Q1="time",J1="utc",fh="sequential",AS="diverging",ex="quantile",KF="quantize",XF="threshold",pee="ordinal",LV="point",R3e="band",mee="bin-ordinal",Vs="continuous",Hk="discrete",qk="discretizing",Wc="interpolating",gee="temporal";function G4t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Y4t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function yee(){const e=Gx().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=hee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Nu(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,O0(h,m)-1),v=m===g?y:O0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return yee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function N3e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return N3e(t())},e}function K4t(){return N3e(yee().paddingInner(1))}var X4t=Array.prototype.map;function Q4t(e){return X4t.call(e,ca)}const J4t=Array.prototype.slice;function P3e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(O0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=Q4t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=J4t.call(r),n):t.slice()},n.tickFormat=function(r,i){return qSe(e[0],Xn(e),r??10,i)},n.copy=function(){return P3e().domain(n.domain()).range(n.range())},n}const M$=new Map,D3e=Symbol("vega_scale");function O3e(e){return e[D3e]=!0,e}function Z4t(e){return e&&e[D3e]===!0}function e5t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?G4t(s):s.invertExtent?Y4t(s):void 0),s.type=e,O3e(s)};return r.metadata=qf(ht(n)),r}function mr(e,t,n){return arguments.length>1?(M$.set(e,e5t(e,t,n)),this):$3e(e)?M$.get(e):void 0}mr(W4t,WSe);mr(ZE,_m,Vs);mr(Dm,YSe,[Vs,Dm]);mr(zk,tK,Vs);mr(Vk,wht,Vs);mr(YF,KSe,Vs);mr(Q1,uTe,[Vs,gee]);mr(J1,Mpt,[Vs,gee]);mr(fh,sK,[Vs,Wc]);mr(`${fh}-${ZE}`,sK,[Vs,Wc]);mr(`${fh}-${Dm}`,lTe,[Vs,Wc,Dm]);mr(`${fh}-${zk}`,oK,[Vs,Wc]);mr(`${fh}-${Vk}`,Lpt,[Vs,Wc]);mr(`${fh}-${YF}`,cTe,[Vs,Wc]);mr(`${AS}-${ZE}`,fTe,[Vs,Wc]);mr(`${AS}-${Dm}`,dTe,[Vs,Wc,Dm]);mr(`${AS}-${zk}`,aK,[Vs,Wc]);mr(`${AS}-${Vk}`,Fpt,[Vs,Wc]);mr(`${AS}-${YF}`,hTe,[Vs,Wc]);mr(ex,XSe,[qk,ex]);mr(KF,QSe,qk);mr(XF,JSe,qk);mr(mee,P3e,[Hk,qk]);mr(pee,Gx,Hk);mr(R3e,yee,Hk);mr(LV,K4t,Hk);function $3e(e){return M$.has(e)}function Bb(e,t){const n=M$.get(e);return n&&n.metadata[t]}function vee(e){return Bb(e,Vs)}function tx(e){return Bb(e,Hk)}function FV(e){return Bb(e,qk)}function M3e(e){return Bb(e,Dm)}function t5t(e){return Bb(e,gee)}function L3e(e){return Bb(e,Wc)}function F3e(e){return Bb(e,ex)}const n5t=["clamp","base","constant","exponent"];function j3e(e,t){const n=t[0],r=Xn(t)-n;return function(i){return e(n+i*r)}}function QF(e,t,n){return OY(bee(t||"rgb",n),e)}function B3e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function U3e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?wa(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=mr(s)().domain([t,n]).range([0,1]),n5t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function bee(e,t){const n=put[r5t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function r5t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const i5t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},s5t={accent:Bpt,category10:jpt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Upt,observable10:zpt,paired:Vpt,pastel1:Hpt,pastel2:qpt,set1:Wpt,set2:Gpt,set3:Ypt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function z3e(e){if(je(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function V3e(e,t){for(const n in e)_ee(n,t(e[n]))}const Yhe={};V3e(s5t,z3e);V3e(i5t,e=>QF(z3e(e)));function _ee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Yhe[e]=t,this):Yhe[e]}const ED="symbol",o5t="discrete",a5t="gradient",u5t=e=>je(e)?e.map(t=>String(t)):String(e),l5t=(e,t)=>e[1]-t[1],c5t=(e,t)=>t[1]-e[1];function wee(e,t,n){let r;return ur(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Fk(e.domain())/n||1)+1))),mt(t)&&(r=t.step,t=t.interval),pt(t)&&(t=e.type===Q1?xS(t):e.type==J1?SS(t):Me("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function H3e(e,t,n){let r=e.range(),i=r[0],s=Xn(r),o=l5t;if(i>s&&(r=s,s=i,i=r,o=c5t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Xn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Eee(e,t){return e.bins?H3e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function q3e(e,t,n,r,i,s){const o=t.type;let a=u5t;if(o===Q1||i===Q1)a=e.timeFormat(r);else if(o===J1||i===J1)a=e.utcFormat(r);else if(M3e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=W3e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function W3e(e,t,n){const r=Eee(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const jV={[ex]:"quantiles",[KF]:"thresholds",[XF]:"domain"},G3e={[ex]:"quantiles",[KF]:"domain"};function Y3e(e,t){return e.bins?h5t(e.bins):e.type===Dm?W3e(e,t,!0):jV[e.type]?d5t(e[jV[e.type]]()):Eee(e,t)}function f5t(e,t,n){const r=t[G3e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function d5t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function h5t(e){const t=e.slice(0,-1);return t.max=Xn(e),t}const p5t=e=>jV[e.type]||e.bins;function K3e(e,t,n,r,i,s,o){const a=G3e[t.type]&&s!==Q1&&s!==J1?f5t(e,t,i):q3e(e,t,n,i,s,o);return r===ED&&p5t(t)?m5t(a):r===o5t?g5t(a):y5t(a)}const m5t=e=>(t,n,r)=>{const i=Khe(r[n+1],Khe(r.max,1/0)),s=Xhe(t,e),o=Xhe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Khe=(e,t)=>e??t,g5t=e=>(t,n)=>n?e(t):null,y5t=e=>t=>e(t),Xhe=(e,t)=>Number.isFinite(e)?t(e):null;function v5t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Xn(t),s=i-r;if(e.type===XF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function b5t(e,t,n,r){const i=r||t.type;return pt(n)&&t5t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===Q1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===J1?e.utcFormat("%A, %d %B %Y, %X UTC"):K3e(e,t,5,null,n,r,!0)}function X3e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=b5t(e,t,n.format,n.formatType);if(FV(t.type)){const s=Y3e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(tx(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Xn(s))}`}}let Q3e=0;function _5t(){Q3e=0}const L$="p_";function xee(e){return e&&e.gradient}function J3e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?L$:"";return i||(i=e.id="gradient_"+Q3e++,r==="radial"?(e.x1=md(e.x1,.5),e.y1=md(e.y1,.5),e.r1=md(e.r1,0),e.x2=md(e.x2,.5),e.y2=md(e.y2,.5),e.r2=md(e.r2,.5),s=L$):(e.x1=md(e.x1,0),e.y1=md(e.y1,0),e.x2=md(e.x2,1),e.y2=md(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function md(e,t){return e??t}function Z3e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Qhe={basis:{curve:umt},"basis-closed":{curve:lmt},"basis-open":{curve:cmt},bundle:{curve:fmt,tension:"beta",value:.85},cardinal:{curve:dmt,tension:"tension",value:0},"cardinal-open":{curve:pmt,tension:"tension",value:0},"cardinal-closed":{curve:hmt,tension:"tension",value:0},"catmull-rom":{curve:mmt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:gmt,tension:"alpha",value:.5},"catmull-rom-open":{curve:ymt,tension:"alpha",value:.5},linear:{curve:uK},"linear-closed":{curve:vmt},monotone:{horizontal:_mt,vertical:bmt},natural:{curve:wmt},step:{curve:Emt},"step-after":{curve:Smt},"step-before":{curve:xmt}};function See(e,t,n){var r=Ft(Qhe,e)&&Qhe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const w5t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},E5t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,x5t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,S5t=/^((\s+,?\s*)|(,\s*))/,T5t=/^[01]/;function nx(e){const t=[];return(e.match(E5t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=w5t[s],a=A5t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function A5t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?T5t:x5t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(S5t);u!==null&&(i+=u[0].length)}return r}const ny=Math.PI/180,C5t=1e-14,$v=Math.PI/2,Vd=Math.PI*2,w_=Math.sqrt(3)/2;var v9={},b9={},e$e=[].join;function I5t(e,t,n,r,i,s,o,a,u){const l=e$e.call(arguments);if(v9[l])return v9[l];const c=o*ny,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,S=g*e+y*t,T=v*e+b*t;let C=1/((S-w)*(S-w)+(T-E)*(T-E))-.25;C<0&&(C=0);let I=Math.sqrt(C);s==i&&(I=-I);const R=.5*(w+S)-I*(T-E),O=.5*(E+T)+I*(S-w),P=Math.atan2(E-O,w-R);let F=Math.atan2(T-O,S-R)-P;F<0&&s===1?F+=Vd:F>0&&s===0&&(F-=Vd);const L=Math.ceil(Math.abs(F/($v+.001))),B=[];for(let z=0;z<L;++z){const q=P+z*F/L,D=P+(z+1)*F/L;B[z]=[R,O,q,D,n,r,f,d]}return v9[l]=B}function k5t(e){const t=e$e.call(e);if(b9[t])return b9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,S=r+m+w*p,T=n+g,A=r+y,C=T+w*y,I=A-w*g;return b9[t]=[c*E+f*S,d*E+h*S,c*C+f*I,d*C+h*I,c*T+f*A,d*T+h*A]}const tc=["l",0,0,0,0,0,0,0];function R5t(e,t,n){const r=tc[0]=e[0];if(r==="a"||r==="A")tc[1]=t*e[1],tc[2]=n*e[2],tc[3]=e[3],tc[4]=e[4],tc[5]=e[5],tc[6]=t*e[6],tc[7]=n*e[7];else if(r==="h"||r==="H")tc[1]=t*e[1];else if(r==="v"||r==="V")tc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)tc[i]=(i%2==1?t:n)*e[i];return tc}function iI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=R5t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Jhe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Jhe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Jhe(e,t,n,r){const i=I5t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=k5t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Zhe=.5773502691896257,epe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Vd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=w_*n,i=r-n*Zhe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=w_*n,i=r-n*Zhe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=w_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function t$e(e){return Ft(epe,e)?epe[e]:N5t(e)}var _9={};function N5t(e){if(!Ft(_9,e)){const t=nx(e);_9[e]={draw:function(n,r){iI(n,t,0,0,Math.sqrt(r)/2)}}}return _9[e]}const mg=.448084975506;function P5t(e){return e.x}function D5t(e){return e.y}function O5t(e){return e.width}function $5t(e){return e.height}function fp(e){return typeof e=="function"?e:()=>+e}function ZN(e,t,n){return Math.max(t,Math.min(e,n))}function n$e(){var e=P5t,t=D5t,n=O5t,r=$5t,i=fp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=ZN(+i.call(this,c),0,v),w=ZN(+s.call(this,c),0,v),E=ZN(+o.call(this,c),0,v),S=ZN(+a.call(this,c),0,v);if(u||(u=h=KL()),b<=0&&w<=0&&E<=0&&S<=0)u.rect(p,m,g,y);else{var T=p+g,A=m+y;u.moveTo(p+b,m),u.lineTo(T-w,m),u.bezierCurveTo(T-mg*w,m,T,m+mg*w,T,m+w),u.lineTo(T,A-S),u.bezierCurveTo(T,A-mg*S,T-mg*S,A,T-S,A),u.lineTo(p+E,A),u.bezierCurveTo(p+mg*E,A,p,A-mg*E,p,A-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+mg*b,p+mg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=fp(c),l):e},l.y=function(c){return arguments.length?(t=fp(c),l):t},l.width=function(c){return arguments.length?(n=fp(c),l):n},l.height=function(c){return arguments.length?(r=fp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=fp(c),s=f!=null?fp(f):i,a=d!=null?fp(d):i,o=h!=null?fp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function r$e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Vd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=KL()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Wk(e,t){return e??t}const Gk=e=>e.x||0,Yk=e=>e.y||0,M5t=e=>e.width||0,L5t=e=>e.height||0,F5t=e=>(e.x||0)+(e.width||0),j5t=e=>(e.y||0)+(e.height||0),B5t=e=>e.startAngle||0,U5t=e=>e.endAngle||0,z5t=e=>e.padAngle||0,V5t=e=>e.innerRadius||0,H5t=e=>e.outerRadius||0,q5t=e=>e.cornerRadius||0,W5t=e=>Wk(e.cornerRadiusTopLeft,e.cornerRadius)||0,G5t=e=>Wk(e.cornerRadiusTopRight,e.cornerRadius)||0,Y5t=e=>Wk(e.cornerRadiusBottomRight,e.cornerRadius)||0,K5t=e=>Wk(e.cornerRadiusBottomLeft,e.cornerRadius)||0,X5t=e=>Wk(e.size,64),Q5t=e=>e.size||1,JF=e=>e.defined!==!1,J5t=e=>t$e(e.shape||"circle"),Z5t=H7().startAngle(B5t).endAngle(U5t).padAngle(z5t).innerRadius(V5t).outerRadius(H5t).cornerRadius(q5t),e8t=bTe().x(Gk).y1(Yk).y0(j5t).defined(JF),t8t=bTe().y(Yk).x1(Gk).x0(F5t).defined(JF),n8t=vTe().x(Gk).y(Yk).defined(JF),r8t=n$e().x(Gk).y(Yk).width(M5t).height(L5t).cornerRadius(W5t,G5t,Y5t,K5t),i8t=amt().type(J5t).size(X5t),s8t=r$e().x(Gk).y(Yk).defined(JF).size(Q5t);function Tee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function o8t(e,t){return Z5t.context(e)(t)}function a8t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?t8t:e8t).curve(See(r,n.orient,n.tension)).context(e)(t)}function u8t(e,t){const n=t[0],r=n.interpolate||"linear";return n8t.curve(See(r,n.orient,n.tension)).context(e)(t)}function CS(e,t,n,r){return r8t.context(e)(t,n,r)}function l8t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function c8t(e,t){return i8t.context(e)(t)}function f8t(e,t){return s8t.context(e)(t)}var i$e=1;function s$e(){i$e=1}function Aee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+i$e++),o=i.clipping[s]||(i.clipping[s]={id:s});return vn(r)?o.path=r(null):Tee(n)?o.path=CS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Es(e){this.clear(),e&&this.union(e)}Es.prototype={clone(){return new Es(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function ZF(e){this.mark=e,this.bounds=this.bounds||new Es}function e4(e){ZF.call(this,e),this.items=this.items||[]}lt(e4,ZF);class o$e{constructor(t){this._pending=0,this._loader=t||MF()}pending(){return this._pending}sanitizeURL(t){const n=this;return tpe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(kT(n),r)).catch(()=>(kT(n),null))}loadImage(t){const n=this,r=q4t();return tpe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ft(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>kT(n),o.onerror=()=>kT(n),o.src=s,o}).catch(i=>(kT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function tpe(e){e._pending+=1}function kT(e){e._pending-=1}function Zm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?d8t(t,r):0))}return e}function d8t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const h8t=Vd-1e-8;let t4,xD,SD,r1,BV,TD,UV,zV;const Yg=(e,t)=>t4.add(e,t),AD=(e,t)=>Yg(xD=e,SD=t),npe=e=>Yg(e,t4.y1),rpe=e=>Yg(t4.x1,e),Mv=(e,t)=>BV*e+UV*t,Lv=(e,t)=>TD*e+zV*t,w9=(e,t)=>Yg(Mv(e,t),Lv(e,t)),E9=(e,t)=>AD(Mv(e,t),Lv(e,t));function Kk(e,t){return t4=e,t?(r1=t*ny,BV=zV=Math.cos(r1),TD=Math.sin(r1),UV=-TD):(BV=zV=1,r1=TD=UV=0),p8t}const p8t={beginPath(){},closePath(){},moveTo:E9,lineTo:E9,rect(e,t,n,r){r1?(w9(e+n,t),w9(e+n,t+r),w9(e,t+r),E9(e,t)):(Yg(e+n,t+r),AD(e,t))},quadraticCurveTo(e,t,n,r){const i=Mv(e,t),s=Lv(e,t),o=Mv(n,r),a=Lv(n,r);ipe(xD,i,o,npe),ipe(SD,s,a,rpe),AD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Mv(e,t),a=Lv(e,t),u=Mv(n,r),l=Lv(n,r),c=Mv(i,s),f=Lv(i,s);spe(xD,o,u,c,npe),spe(SD,a,l,f,rpe),AD(c,f)},arc(e,t,n,r,i,s){if(r+=r1,i+=r1,xD=n*Math.cos(i)+e,SD=n*Math.sin(i)+t,Math.abs(i-r)>h8t)Yg(e-n,t-n),Yg(e+n,t+n);else{const o=l=>Yg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Vd,r<0&&(r+=Vd),i=i%Vd,i<0&&(i+=Vd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Vd,a=r-r%$v,u=0;u<4&&a>i;++u,a-=$v)o(a);else for(a=r-r%$v+$v,u=0;u<4&&a<i;++u,a=a+$v)o(a)}}};function ipe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function spe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>C5t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(ope(u,e,t,n,r)),0<l&&l<1&&i(ope(l,e,t,n,r))}function ope(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var T0=(T0=S0(1,1))?T0.getContext("2d"):null;const VV=new Es;function Cee(e){return function(t,n){if(!T0)return!0;e(T0,t),VV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=VV;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(T0.isPointInPath(u,a))return!0;return!1}}function Iee(e,t){return t.contains(e.x||0,e.y||0)}function a$e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(VV.set(n,r,n+i,r+s))}function u$e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return hw(t,n,r,i,s)}function hw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function rx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function rf(e,t){return e??t}function ape(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function m8t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+rf(t.x1,.5)*r,n.y1+rf(t.y1,.5)*i,Math.max(r,i)*rf(t.r1,0),n.x1+rf(t.x2,.5)*r,n.y1+rf(t.y2,.5)*i,Math.max(r,i)*rf(t.r2,.5));else{const o=rf(t.x1,0),a=rf(t.y1,0),u=rf(t.x2,1),l=rf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=S0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=ape(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return ape(s,t.stops)}function l$e(e,t,n){return xee(n)?m8t(e,n,t.bounds):n}function F$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=l$e(e,t,t.fill),!0):!1}var g8t=[];function ix(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=l$e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||g8t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function y8t(e,t){return e.zindex-t.zindex||e.index-t.index}function kee(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(y8t)}function Gf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=kee(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function j$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=kee(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Ree(e){return function(t,n,r){Gf(n,i=>{(!r||r.intersects(i.bounds))&&c$e(e,t,i,i)})}}function v8t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&c$e(e,t,n.items[0],n.items)}}function c$e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(rx(t,n),n.fill&&F$(t,n,i)&&t.fill(),n.stroke&&ix(t,n,i)&&t.stroke()))}function n4(e){return e=e||Pc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,j$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function Xk(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Nee(e){return n4(Xk(e))}function g1(e,t){return"translate("+e+","+t+")"}function Pee(e){return"rotate("+e+")"}function b8t(e,t){return"scale("+e+","+t+")"}function f$e(e){return g1(e.x||0,e.y||0)}function _8t(e){return g1(e.x||0,e.y||0)+(e.angle?" "+Pee(e.angle):"")}function w8t(e){return g1(e.x||0,e.y||0)+(e.angle?" "+Pee(e.angle):"")+(e.scaleX||e.scaleY?" "+b8t(e.scaleX||1,e.scaleY||1):"")}function Dee(e,t,n){function r(o,a){o("transform",_8t(a)),o("d",t(null,a))}function i(o,a){return t(Kk(o,a.angle),a),Zm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=ny),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Ree(s),pick:Nee(s),isect:n||Cee(s)}}var E8t=Dee("arc",o8t);function x8t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function S8t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function T8t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Oee(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(Kk(u),c),Zm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=Xk(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:v8t(s),pick:a,isect:Iee,tip:n}}var A8t=Oee("area",a8t,x8t);function C8t(e,t){var n=t.clip;e.save(),vn(n)?(e.beginPath(),n(e),e.clip()):d$e(e,t.group)}function d$e(e,t){e.beginPath(),Tee(t)?CS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function h$e(e){const t=rf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function I8t(e,t){e("transform",f$e(t))}function p$e(e,t){const n=h$e(t);e("d",CS(null,t,n,n))}function k8t(e,t){e("class","background"),e("aria-hidden",!0),p$e(e,t)}function R8t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?p$e(e,t):e("d","")}function N8t(e,t,n){const r=t.clip?Aee(n,t,t):null;e("clip-path",r)}function P8t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Zm(e,t),e.translate(t.x||0,t.y||0)}function sI(e,t,n,r){const i=h$e(t);e.beginPath(),CS(e,t,(n||0)+i,(r||0)+i)}const D8t=Xk(sI),O8t=Xk(sI,!1),$8t=Xk(sI,!0);function M8t(e,t,n,r){Gf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(sI(e,i,s,o),rx(e,i),i.fill&&F$(e,i,u)&&e.fill(),i.stroke&&!a&&ix(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&d$e(e,i),n&&n.translate(-s,-o),Gf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(sI(e,i,s,o),rx(e,i),ix(e,i,u)&&e.stroke())})}function L8t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return j$(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Tee(u)&&!$8t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&O8t(e,u,o,a)?(e.restore(),u):(l=j$(u,v=>F8t(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&D8t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function F8t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var j8t={type:"group",tag:"g",nested:!1,attr:I8t,bound:P8t,draw:M8t,pick:L8t,isect:a$e,content:N8t,background:k8t,foreground:R8t},oI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function $ee(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Mee(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Lee(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function r4(e,t){return e==="center"?t/2:e==="right"?t:0}function i4(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function B8t(e,t,n){const r=$ee(t,n),i=Mee(t,r),s=Lee(t,r),o=(t.x||0)-r4(t.align,i),a=(t.y||0)-i4(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,oI["xmlns:xlink"],"xlink:href"),e("transform",g1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function U8t(e,t){const n=t.image,r=Mee(t,n),i=Lee(t,n),s=(t.x||0)-r4(t.align,r),o=(t.y||0)-i4(t.baseline,i);return e.set(s,o,s+r,o+i)}function z8t(e,t,n){Gf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=$ee(r,this);let s=Mee(r,i),o=Lee(r,i);if(s===0||o===0)return;let a=(r.x||0)-r4(r.align,s),u=(r.y||0)-i4(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(rx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var V8t={type:"image",tag:"image",nested:!1,attr:B8t,bound:U8t,draw:z8t,pick:n4(),isect:Pc,get:$ee,xOffset:r4,yOffset:i4},H8t=Oee("line",u8t,S8t);function q8t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",w8t(t)),e("d",t.path)}function CD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*ny,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=nx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),iI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):iI(e,u,r,i,s,o)}function W8t(e,t){return CD(Kk(e,t.angle),t)?e.set(0,0,0,0):Zm(e,t,!0)}var G8t={type:"path",tag:"path",nested:!1,attr:q8t,bound:W8t,draw:Ree(CD),pick:Nee(CD),isect:Cee(CD)};function Y8t(e,t){e("d",CS(null,t))}function K8t(e,t){var n,r;return Zm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function upe(e,t){e.beginPath(),CS(e,t)}var X8t={type:"rect",tag:"path",nested:!1,attr:Y8t,bound:K8t,draw:Ree(upe),pick:Nee(upe),isect:a$e};function Q8t(e,t){e("transform",f$e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function J8t(e,t){var n,r;return Zm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function m$e(e,t,n){var r,i,s,o;return t.stroke&&ix(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function Z8t(e,t,n){Gf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&m$e(e,r,i)&&(rx(e,r),e.stroke())}})}function ejt(e,t,n,r){return e.isPointInStroke?m$e(e,t,1)&&e.isPointInStroke(n,r):!1}var tjt={type:"rule",tag:"line",nested:!1,attr:Q8t,bound:J8t,draw:Z8t,pick:n4(ejt),isect:u$e},njt=Dee("shape",l8t),rjt=Dee("symbol",c8t,Iee);const lpe=ZDe();var Al={height:Yh,measureWidth:Fee,estimateWidth:B$,width:B$,canvas:g$e};g$e(!0);function g$e(e){Al.width=e&&T0?Fee:B$}function B$(e,t){return y$e(iy(e,t),Yh(e))}function y$e(e,t){return~~(.8*e.length*t)}function Fee(e,t){return Yh(e)<=0||!(t=iy(e,t))?0:v$e(t,s4(e))}function v$e(e,t){const n=`(${t}) ${e}`;let r=lpe.get(n);return r===void 0&&(T0.font=t,r=T0.measureText(e).width,lpe.set(n,r)),r}function Yh(e){return e.fontSize!=null?+e.fontSize||0:11}function ry(e){return e.lineHeight!=null?e.lineHeight:Yh(e)+2}function ijt(e){return je(e)?e.length>1?e:e[0]:e}function Qk(e){return ijt(e.lineBreak&&e.text&&!je(e.text)?e.text.split(e.lineBreak):e.text)}function jee(e){const t=Qk(e);return(je(t)?t.length-1:0)*ry(e)}function iy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?ojt(e,n):n}function sjt(e){if(Al.width===Fee){const t=s4(e);return n=>v$e(n,t)}else if(Al.width===B$){const t=Yh(e);return n=>y$e(n,t)}else return t=>Al.width(e,t)}function ojt(e,t){var n=+e.limit,r=sjt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function Jk(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function s4(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Yh(e)+"px "+Jk(e,t)}function Bee(e){var t=e.baseline,n=Yh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*ry(e):t==="line-bottom"?.29*n-.5*ry(e):0)}const ajt={left:"start",center:"middle",right:"end"},TC=new Es;function o4(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-$v,t+=r*Math.cos(i),n+=r*Math.sin(i)),TC.x1=t,TC.y1=n,TC}function ujt(e,t){var n=t.dx||0,r=(t.dy||0)+Bee(t),i=o4(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",ajt[t.align]||"start"),a?(u=g1(s,o)+" "+Pee(a),(n||r)&&(u+=" "+g1(n,r))):u=g1(s+n,o+r),e("transform",u)}function Uee(e,t,n){var r=Al.height(t),i=t.align,s=o4(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Bee(t)-Math.round(.8*r),c=Qk(t),f;if(je(c)?(r+=ry(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Al.width(t,h)),0)):f=Al.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*ny,o,a);else if(n===2)return e.rotatedPoints(t.angle*ny,o,a);return e}function ljt(e,t,n){Gf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=s4(r),e.textAlign=r.align||"left",s=o4(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*ny),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Bee(r),c=Qk(r),rx(e,r),je(c))for(l=ry(r),u=0;u<c.length;++u)f=iy(r,c[u]),r.fill&&F$(e,r,i)&&e.fillText(f,o,a),r.stroke&&ix(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=iy(r,c),r.fill&&F$(e,r,i)&&e.fillText(f,o,a),r.stroke&&ix(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function cjt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=o4(t),a=o.x1,u=o.y1,l=Uee(TC,t,1),c=-t.angle*ny,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function fjt(e,t){const n=Uee(TC,e,2);return hw(t,n[0],n[1],n[2],n[3])||hw(t,n[0],n[1],n[4],n[5])||hw(t,n[4],n[5],n[6],n[7])||hw(t,n[2],n[3],n[6],n[7])}var djt={type:"text",tag:"text",nested:!1,attr:ujt,bound:Uee,draw:ljt,pick:n4(cjt),isect:fjt},hjt=Oee("trail",f8t,T8t),Ul={arc:E8t,area:A8t,group:j8t,image:V8t,line:H8t,path:G8t,rect:X8t,rule:tjt,shape:njt,symbol:rjt,text:djt,trail:hjt};function HV(e,t,n){var r=Ul[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Es),e,n)}var cpe={mark:null};function b$e(e,t,n){var r=Ul[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(cpe.mark=e,l=cpe),c=HV(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Es,o)for(a=0,u=s.length;a<u;++a)t.union(HV(s[a],i,n));return e.bounds=t}const pjt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function _$e(e,t){return JSON.stringify(e,pjt,t)}function w$e(e){const t=typeof e=="string"?JSON.parse(e):e;return E$e(t)}function E$e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&E$e(n[i]);return t&&b$e(e),e}class x$e{constructor(t){arguments.length?this.root=w$e(t):(this.root=fpe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new e4(this.root)])}toJSON(t){return _$e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=fpe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function fpe(e,t){const n={bounds:new Es,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Kg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function zee(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ns(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Kg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function hc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function S$e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function a4(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function mjt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Ul[i.marktype]).tip){for(o=a4(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Vee=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||MF(),this._tooltip=n||gjt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Kg(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=mjt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function gjt(e,t,n,r){e.element().setAttribute("title",r||"")}class Zk{constructor(t){this._el=null,this._bgcolor=null,this._loader=new o$e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const yjt="keydown",vjt="keypress",bjt="keyup",T$e="dragenter",ID="dragleave",A$e="dragover",qV="pointerdown",_jt="pointerup",U$="pointermove",kD="pointerout",C$e="pointerover",WV="mousedown",wjt="mouseup",I$e="mousemove",z$="mouseout",k$e="mouseover",V$="click",Ejt="dblclick",xjt="wheel",R$e="mousewheel",H$="touchstart",q$="touchmove",W$="touchend",Sjt=[yjt,vjt,bjt,T$e,ID,A$e,qV,_jt,U$,kD,C$e,WV,wjt,I$e,z$,k$e,V$,Ejt,xjt,R$e,H$,q$,W$],GV=U$,AC=z$,YV=V$;class eR extends Vee{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Sjt,this.pointermove=hpe([U$,I$e],[C$e,k$e],[kD,z$]),this.dragover=hpe([A$e],[T$e],[ID]),this.pointerout=ppe([kD,z$]),this.dragleave=ppe([ID])}initialize(t,n,r){return this._canvas=t&&zee(t,"canvas"),[V$,WV,qV,U$,kD,ID].forEach(i=>dpe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(R$e,t)}pointerdown(t){this._down=this._active,this.fire(qV,t)}mousedown(t){this._down=this._active,this.fire(WV,t)}click(t){this._down===this._active&&(this.fire(V$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(H$,t,!0)}touchmove(t){this.fire(q$,t,!0)}touchend(t){this.fire(W$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===YV&&i&&i.href?this.handleHref(n,i,i.href):(t===GV||t===AC)&&this.handleTooltip(n,i,t!==AC),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(dpe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=a4(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Ul[t.marktype].pick.call(this,o,t,n,r,i,s)}}const Tjt=e=>e===H$||e===q$||e===W$?[H$,q$,W$]:[e];function dpe(e,t){Tjt(t).forEach(n=>Ajt(e,n))}function Ajt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function CA(e,t,n){t.forEach(r=>e.fire(r,n))}function hpe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?CA(this,e,r):((!i||!i.exit)&&CA(this,n,r),this._active=s,CA(this,t,r),CA(this,e,r))}}function ppe(e){return function(t){CA(this,e,t),this._active=null}}function Cjt(){return typeof window<"u"&&window.devicePixelRatio||1}function Ijt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?Cjt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class G$ extends Zk{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Es,this._tempb=new Es}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:S0(1,1,this._options.type),t&&this._canvas&&(hc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Ijt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Me("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=kjt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):Rjt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Ul[n.marktype];n.clip&&C8t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const kjt=(e,t,n)=>new Es().set(0,0,t,n).translate(-e[0],-e[1]);function Rjt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class N$e extends Vee{constructor(t,n){super(t,n);const r=this;r._hrefHandler=x9(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=x9(r,(i,s)=>{r.handleTooltip(i,s,i.type!==AC)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(YV,this._hrefHandler),i.removeEventListener(GV,this._tooltipHandler),i.removeEventListener(AC,this._tooltipHandler)),this._svg=i=t&&zee(t,"svg"),i&&(i.addEventListener(YV,this._hrefHandler),i.addEventListener(GV,this._tooltipHandler),i.addEventListener(AC,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:x9(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const x9=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},P$e="aria-hidden",Hee="aria-label",qee="role",Wee="aria-roledescription",D$e="graphics-object",Gee="graphics-symbol",O$e=(e,t,n)=>({[qee]:e,[Wee]:t,[Hee]:n||void 0}),Njt=qf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),mpe={axis:{desc:"axis",caption:Ojt},legend:{desc:"legend",caption:$jt},"title-text":{desc:"title",caption:e=>`Title text '${ype(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${ype(e)}'`}},gpe={ariaRole:qee,ariaRoleDescription:Wee,description:Hee};function $$e(e,t){const n=t.aria===!1;if(e(P$e,n||void 0),n||t.description==null)for(const r in gpe)e(gpe[r],void 0);else{const r=t.mark.marktype;e(Hee,t.description),e(qee,t.ariaRole||(r==="group"?D$e:Gee)),e(Wee,t.ariaRoleDescription||`${r} mark`)}}function M$e(e){return e.aria===!1?{[P$e]:!0}:Njt[e.role]?null:mpe[e.role]?Djt(e,mpe[e.role]):Pjt(e)}function Pjt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return O$e(n?D$e:Gee,`${t} mark container`,e.description)}function Djt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return O$e(t.role||Gee,t.desc,n.description||r(n))}catch{return null}}function ype(e){return ht(e.text).join(" ")}function Ojt(e){const t=e.datum,n=e.orient,r=t.title?L$e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${tx(a)?"discrete":a} scale with ${X3e(o,s,e)}`}function $jt(e){const t=e.datum,n=t.title?L$e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Ljt(r)+(n?` titled '${n}'`:"")+` for ${Mjt(s)} with ${X3e(u,a,e)}`}function L$e(e){try{return ht(Xn(e.items).items[0].text).join(" ")}catch{return null}}function Mjt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Xn(e)}function Ljt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const F$e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Fjt=e=>F$e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Yee(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${Fjt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=F$e(u),a),toString:()=>e};return a}const j$e=e=>B$e(Yee(),e)+"";function B$e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):B$e(e,r)}return e.close()}const Y$={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},K$={blend:"mix-blend-mode"},U$e={fill:"none","stroke-miterlimit":10},RT=0,vpe="http://www.w3.org/2000/xmlns/",ks=oI.xmlns;class Kee extends Zk{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ns(t,0,"svg",ks),this._svg.setAttributeNS(vpe,"xmlns",ks),this._svg.setAttributeNS(vpe,"xmlns:xlink",oI["xmlns:xlink"]),this._svg.setAttribute("version",oI.version),this._svg.setAttribute("class","marks"),hc(t,1),this._root=Ns(this._svg,RT,"g",ks),Xg(this._root,U$e),hc(this._svg,RT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Xg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ns(t,RT,"rect",ks),Xg(r,{width:this._width,height:this._height,fill:n}));const i=j$e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),hc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Ul[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,bpe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,bpe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Ul[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=_pe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return hc(c,0),n._svg;c.setAttribute("class",S$e(n));const f=M$e(n);for(const m in f)Pa(c,m,f[m]);l||Pa(c,"pointer-events",u),Pa(c,"clip-path",n.clip?Aee(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=_pe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&Ujt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Gf(n,p),hc(c,h),c}_update(t,n,r){Hp=n,ra=n.__values__,$$e(CC,r),t.attr(CC,r,this);const i=Vjt[t.type];i&&i.call(this,t,n,r),Hp&&this.style(Hp,r)}style(t,n){if(n!=null){for(const r in Y$){let i=r==="font"?Jk(n):n[r];if(i===ra[r])continue;const s=Y$[r];i==null?t.removeAttribute(s):(xee(i)&&(i=J3e(i,this._defs.gradient,z$e())),t.setAttribute(s,i+"")),ra[r]=i}for(const r in K$)RD(t,K$[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ns(t,RT+1,"defs",ks)),i=jjt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ns(t,RT+1,"defs",ks)),i=Bjt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):hc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function bpe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function jjt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ns(e,n++,"pattern",ks);Xg(o,{id:L$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ns(o,0,"rect",ks),Xg(o,{width:1,height:1,fill:`url(${z$e()}#${t.id})`}),e=Ns(e,n++,"radialGradient",ks),Xg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ns(e,n++,"linearGradient",ks),Xg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ns(e,r,"stop",ks),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return hc(e,r),n}function Bjt(e,t,n){let r;return e=Ns(e,n,"clipPath",ks),e.setAttribute("id",t.id),t.path?(r=Ns(e,0,"path",ks),r.setAttribute("d",t.path)):(r=Ns(e,0,"rect",ks),Xg(r,{x:0,y:0,width:t.width,height:t.height})),hc(e,1),n+1}function Ujt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Gf(n,o=>{i=e.mark(t,o,i,r),++s}),hc(t,1+s)}function _pe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Kg(o,r,ks),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Kg(o,"path",ks);s.appendChild(a),a.__data__=e;const u=Kg(o,"g",ks);s.appendChild(u),u.__data__=e;const l=Kg(o,"path",ks);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||zjt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function zjt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Hp=null,ra=null;const Vjt={group(e,t,n){const r=Hp=t.childNodes[2];ra=r.__values__,e.foreground(CC,n,this),ra=t.__values__,Hp=t.childNodes[1],e.content(CC,n,this);const i=Hp=t.childNodes[0];e.background(CC,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ra.events&&(Pa(r,"pointer-events",s),Pa(i,"pointer-events",s),ra.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Pa(r,"display",null),this.style(i,n),Pa(i,"stroke",null),o&&(n.fill=null),ra=r.__values__,this.style(r,n),o&&(n.fill=o),Hp=null}else Pa(r,"display","none")},image(e,t,n){n.smooth===!1?(RD(t,"image-rendering","optimizeSpeed"),RD(t,"image-rendering","pixelated")):RD(t,"image-rendering",null)},text(e,t,n){const r=Qk(n);let i,s,o,a;je(r)?(s=r.map(u=>iy(n,u)),i=s.join(`
`),i!==ra.text&&(hc(t,0),o=t.ownerDocument,a=ry(n),s.forEach((u,l)=>{const c=Kg(o,"tspan",ks);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ra.text=i)):(s=iy(n,r),s!==ra.text&&(t.textContent=s,ra.text=s)),Pa(t,"font-family",Jk(n)),Pa(t,"font-size",Yh(n)+"px"),Pa(t,"font-style",n.fontStyle),Pa(t,"font-variant",n.fontVariant),Pa(t,"font-weight",n.fontWeight)}};function CC(e,t,n){t!==ra[e]&&(n?Hjt(Hp,e,t,n):Pa(Hp,e,t),ra[e]=t)}function RD(e,t,n){n!==ra[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ra[t]=n)}function Xg(e,t){for(const n in t)Pa(e,n,t[n])}function Pa(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Hjt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function z$e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class V$e extends Zk{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Yee();n.open("svg",yn({},oI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",U$e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Ul[n.marktype],i=r.tag,s=[$$e,r.attr];t.open("g",{class:S$e(n),"clip-path":n.clip?Aee(this,n,n.group):null},M$e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=Qk(a);if(je(l)){const c={x:0,dy:ry(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(iy(a,l[f])).close()}else t.text(iy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Gf(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Gf(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&qjt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:L$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function qjt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=Jk(t),e["font-size"]=Yh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in Y$){let a=t[o];const u=Y$[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(xee(a)&&(a=J3e(a,i.gradient,"")),e[u]=a)}for(const o in K$){const a=t[o];a!=null&&(s=s||[],s.push(`${K$[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const ff={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Wjt(e){ff.svgMarkTypes=e.svgMarkTypes??["text"],ff.svgOnTop=e.svgOnTop??!0,ff.debug=e.debug??!1}class KV extends Zk{constructor(t){super(t),this._svgRenderer=new Kee(t),this._canvasRenderer=new G$(t)}initialize(t,n,r,i,s){this._root_el=Ns(t,0,"div");const o=Ns(this._root_el,0,"div"),a=Ns(this._root_el,1,"div");return this._root_el.style.position="relative",ff.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=ff.svgOnTop?a:o,this._canvasEl=ff.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return ff.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!ff.svgMarkTypes.includes(s));this._svgRenderer.render(t,ff.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return ff.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class H$e extends eR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ns(Ns(t,0,"div"),ff.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const q$e="canvas",W$e="hybrid",G$e="png",Y$e="svg",K$e="none",Qg={Canvas:q$e,PNG:G$e,SVG:Y$e,Hybrid:W$e,None:K$e},Z1={};Z1[q$e]=Z1[G$e]={renderer:G$,headless:G$,handler:eR};Z1[Y$e]={renderer:Kee,headless:V$e,handler:N$e};Z1[W$e]={renderer:KV,headless:KV,handler:H$e};Z1[K$e]={};function u4(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Z1[e]=t,this):Z1[e]}function X$e(e,t,n){const r=[],i=new Es().union(t),s=e.marktype;return s?Q$e(e,i,n,r):s==="group"?J$e(e,i,n,r):Me("Intersect scene must be mark node or group item.")}function Q$e(e,t,n,r){if(Gjt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)J$e(i[a],t,n,r);else for(const u=Ul[s].isect;a<o;++a){const l=i[a];Z$e(l,t,u)&&r.push(l)}}return r}function Gjt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function J$e(e,t,n,r){n&&n(e.mark)&&Z$e(e,t,Ul.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)Q$e(i[u],t,n,r);t.translate(o,a)}return r}function Z$e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const S9=new Es;function eMe(e){const t=e.clip;if(vn(t))t(Kk(S9.clear()));else if(t)S9.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(S9)}const Yjt=1e-9;function Xee(e,t,n){return e===t?!0:n==="path"?tMe(e,t):e instanceof Date&&t instanceof Date?+e==+t:ur(e)&&ur(t)?Math.abs(e-t)<=Yjt:!e||!t||!mt(e)&&!mt(t)?e==t:Kjt(e,t)}function tMe(e,t){return Xee(nx(e),nx(t))}function Kjt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Xee(e[i],t[i],i))return!1;return typeof e==typeof t}function Xjt(){s$e(),_5t()}const sx="top",wf="left",Tf="right",sy="bottom",Qjt="top-left",Jjt="top-right",Zjt="bottom-left",e9t="bottom-right",Qee="start",XV="middle",$a="end",t9t="x",n9t="y",l4="group",Jee="axis",Zee="title",r9t="frame",i9t="scope",ete="legend",nMe="row-header",rMe="row-footer",iMe="row-title",sMe="column-header",oMe="column-footer",aMe="column-title",s9t="padding",o9t="symbol",uMe="fit",lMe="fit-x",cMe="fit-y",a9t="pad",tte="none",eP="all",QV="each",nte="flush",Jg="column",Zg="row";function fMe(e){Pe.call(this,null,e)}lt(fMe,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Ul[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=tP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===l4||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(tP(l,o))),r.role){case Jee:case ete:case Zee:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(tP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(tP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return eMe(r),t.modifies("bounds")}});function tP(e,t,n){return t(e.bounds.clear(),e,n)}const wpe=":vega_identifier:";function rte(e){Pe.call(this,0,e)}rte.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(rte,Pe,{transform(e,t){const n=u9t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function u9t(e){return e._signals[wpe]||(e._signals[wpe]=e.add(0))}function dMe(e){Pe.call(this,null,e)}lt(dMe,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,l9t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===l4?e4:ZF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function l9t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function hMe(e){Pe.call(this,null,e)}const Epe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!pMe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},pMe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),xpe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(pMe(i,s=e[n].bounds,t))return!0},c9t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},f9t=(e,t,n)=>{var r=e.range(),i=new Es;return t===sx||t===sy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Spe=e=>(e.forEach(t=>t.opacity=1),e),Tpe=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(hMe,Pe,{transform(e,t){const n=Epe[e.method]||Epe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Spe(i),t=Tpe(t,e)),t;if(i=i.filter(c9t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Spe(i),t=Tpe(t,e),s.length>=3&&xpe(s,r)){do s=n(s,r);while(s.length>=3&&xpe(s,r));s.length<3&&!Xn(i).opacity&&(s.length>1&&(Xn(s).opacity=0),Xn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=f9t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function mMe(e){Pe.call(this,null,e)}lt(mMe,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ta=new Es;function pw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function d9t(e){var t=e.items[0].orient;return t===wf||t===Tf}function h9t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function p9t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=h9t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&jee(p),v=0,b=0,w,E;switch(ta.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case sx:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&nP(e,p,E,m,y,0,-1,g);break;case wf:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&nP(e,p,E,m,y,1,-1,g);break;case Tf:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&nP(e,p,E,m,y,1,1,g);break;case sy:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&nP(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return Zm(g.translate(v,b),i),pw(i,"x",v+o)|pw(i,"y",b+o)&&(i.bounds=ta,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function nP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Ape=(e,t)=>Math.floor(Math.min(e,t)),Cpe=(e,t)=>Math.ceil(Math.max(e,t));function m9t(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===l4)switch(i.role){case Jee:case ete:case Zee:break;case nMe:o.rowheaders.push(...s);break;case rMe:o.rowfooters.push(...s);break;case sMe:o.colheaders.push(...s);break;case oMe:o.colfooters.push(...s);break;case iMe:o.rowtitle=s[0];break;case aMe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function g9t(e){return new Es().set(0,0,e.width||0,e.height||0)}function y9t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function yi(e,t,n){const r=mt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Ipe(e){return e<0?Math.ceil(-e):0}function gMe(e,t,n){var r=!n.nodirty,i=n.bounds===nte?g9t:y9t,s=ta.set(0,0,0,0),o=yi(n.align,Jg),a=yi(n.align,Zg),u=yi(n.padding,Jg),l=yi(n.padding,Zg),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),S,T,A,C,I,R,O,P,$,F,L;for(T=0;T<c;++T)p[T]=0;for(T=0;T<f;++T)y[T]=0;for(T=0;T<d;++T)R=t[T],I=E[T]=i(R),R.x=R.x||0,b[T]=0,R.y=R.y||0,w[T]=0,A=T%c,C=~~(T/c),m=Math.max(m,O=Math.ceil(I.x2)),v=Math.max(v,P=Math.ceil(I.y2)),p[A]=Math.max(p[A],O),y[C]=Math.max(y[C],P),h[T]=u+Ipe(I.x1),g[T]=l+Ipe(I.y1),r&&e.dirty(t[T]);for(T=0;T<d;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(o===QV)for(A=1;A<c;++A){for(L=0,T=A;T<d;T+=c)L<h[T]&&(L=h[T]);for(T=A;T<d;T+=c)h[T]=L+p[A-1]}else if(o===eP){for(L=0,T=0;T<d;++T)T%c&&L<h[T]&&(L=h[T]);for(T=0;T<d;++T)T%c&&(h[T]=L+m)}else for(o=!1,A=1;A<c;++A)for(T=A;T<d;T+=c)h[T]+=p[A-1];if(a===QV)for(C=1;C<f;++C){for(L=0,T=C*c,S=T+c;T<S;++T)L<g[T]&&(L=g[T]);for(T=C*c;T<S;++T)g[T]=L+y[C-1]}else if(a===eP){for(L=0,T=c;T<d;++T)L<g[T]&&(L=g[T]);for(T=c;T<d;++T)g[T]=L+v}else for(a=!1,C=1;C<f;++C)for(T=C*c,S=T+c;T<S;++T)g[T]+=y[C-1];for($=0,T=0;T<d;++T)$=h[T]+(T%c?$:0),b[T]+=$-t[T].x;for(A=0;A<c;++A)for(F=0,T=A;T<d;T+=c)F+=g[T],w[T]+=F-t[T].y;if(o&&yi(n.center,Jg)&&f>1)for(T=0;T<d;++T)I=o===eP?m:p[T%c],$=I-E[T].x2-t[T].x-b[T],$>0&&(b[T]+=$/2);if(a&&yi(n.center,Zg)&&c!==1)for(T=0;T<d;++T)I=a===eP?v:y[~~(T/c)],F=I-E[T].y2-t[T].y-w[T],F>0&&(w[T]+=F/2);for(T=0;T<d;++T)s.union(E[T].translate(b[T],w[T]));switch($=yi(n.anchor,t9t),F=yi(n.anchor,n9t),yi(n.anchor,Jg)){case $a:$-=s.width();break;case XV:$-=s.width()/2}switch(yi(n.anchor,Zg)){case $a:F-=s.height();break;case XV:F-=s.height()/2}for($=Math.round($),F=Math.round(F),s.clear(),T=0;T<d;++T)t[T].mark.bounds.clear();for(T=0;T<d;++T)R=t[T],R.x+=b[T]+=$,R.y+=w[T]+=F,s.union(R.mark.bounds.union(R.bounds.translate(b[T],w[T]))),r&&e.dirty(R);return s}function v9t(e,t,n){var r=m9t(t),i=r.marks,s=n.bounds===nte?b9t:_9t,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=gMe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=yi(n.headerBand,Zg,null),c=rP(e,r.rowheaders,i,a,u,-yi(o,"rowHeader"),Ape,0,s,"x1",0,a,1,m)),r.colheaders&&(m=yi(n.headerBand,Jg,null),f=rP(e,r.colheaders,i,a,a,-yi(o,"columnHeader"),Ape,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=yi(n.footerBand,Zg,null),d=rP(e,r.rowfooters,i,a,u,yi(o,"rowFooter"),Cpe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=yi(n.footerBand,Jg,null),h=rP(e,r.colfooters,i,a,a,yi(o,"columnFooter"),Cpe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=yi(n.titleAnchor,Zg),g=yi(o,"rowTitle"),g=p===$a?d+g:c-g,m=yi(n.titleBand,Zg,.5),kpe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=yi(n.titleAnchor,Jg),g=yi(o,"columnTitle"),g=p===$a?h+g:f-g,m=yi(n.titleBand,Jg,.5),kpe(e,r.coltitle,g,1,y,m))}function b9t(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function _9t(e,t){return e.bounds[t]}function rP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,S,T,A,C;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(S=t[v],E=S.mark.bounds,b=y;b>=0&&(T=n[b])==null;b-=d);a?(A=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),C=m):(A=m,C=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),E.union(S.bounds.translate(A-(S.x||0),C-(S.y||0))),S.x=A,S.y=C,e.dirty(S),g=o(g,E[l])}return g}function kpe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function w9t(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function E9t(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function x9t(e,t,n,r,i,s,o){const a=w9t(n,t),u=E9t(e,a("offset",0)),l=a("anchor",Qee),c=l===$a?1:l===XV?.5:0,f={align:QV,bounds:a("bounds",nte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case wf:f.anchor={x:Math.floor(r.x1)-u,column:$a,y:c*(o||r.height()+2*r.y1),row:l};break;case Tf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case sx:f.anchor={y:Math.floor(i.y1)-u,row:$a,x:c*(s||i.width()+2*i.x1),column:l};break;case sy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case Qjt:f.anchor={x:u,y:u};break;case Jjt:f.anchor={x:s-u,y:u,column:$a};break;case Zjt:f.anchor={x:u,y:o-u,row:$a};break;case e9t:f.anchor={x:s-u,y:o-u,column:$a,row:$a};break}return f}function S9t(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),A9t(e,n,n.items[0].items[0]),s=T9t(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===o9t&&C9t(n.items[0].items[0].items[0].items),i!==tte&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Zm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function T9t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function A9t(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&NT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case wf:i+=Math.ceil(o.bounds.width())+u;break;case Tf:case sy:break;default:s+=o.bounds.height()+u}switch((i||s)&&NT(e,n,i,s),o.orient){case wf:c+=E_(t,n,o,a,1,1);break;case Tf:l+=E_(t,n,o,$a,0,0)+u,c+=E_(t,n,o,a,1,1);break;case sy:l+=E_(t,n,o,a,0,0),c+=E_(t,n,o,$a,-1,0,1)+u;break;default:l+=E_(t,n,o,a,0,0)}(l||c)&&NT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(NT(e,n,-l,0),NT(e,o,-l,0))}}function E_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:jee(n);return Math.round(r===Qee?f:r===$a?d-h:.5*(c-h))}function NT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function C9t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function I9t(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===wf||a===Tf?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==l4?a===wf?(p=i.y2,h=i.y1):a===Tf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===wf&&(p=r,h=0),b=u===Qee?p:u===$a?h:(p+h)/2,d&&d.text){switch(a){case sx:case sy:v=f.bounds.height()+c;break;case wf:y=f.bounds.width()+c;break;case Tf:y=-f.bounds.width()-c;break}ta.clear().union(d.bounds),ta.translate(y-(d.x||0),v-(d.y||0)),pw(d,"x",y)|pw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(ta),d.mark.bounds.clear().union(ta),e.dirty(d)),ta.clear().union(d.bounds)}else ta.clear();switch(ta.union(f.bounds),a){case sx:m=b,g=i.y1-ta.height()-l;break;case wf:m=i.x1-ta.width()-l,g=b;break;case Tf:m=i.x2+ta.width()+l,g=b;break;case sy:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return pw(s,"x",m)|pw(s,"y",g)&&(ta.translate(m,g),e.dirty(s),s.bounds.clear().union(ta),t.bounds.clear().union(ta),e.dirty(s)),s.bounds}function yMe(e){Pe.call(this,null,e)}lt(yMe,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&v9t(n,r,e.layout),R9t(n,r,e)}),k9t(e.mark.group)?t.reflow():t}});function k9t(e){return e&&e.mark.role!=="legend-entry"}function R9t(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Es().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case Jee:h=d9t(f)?a:u,h.union(p9t(e,f,i,s));break;case Zee:c=f;break;case ete:l.push(S9t(e,f));break;case r9t:case i9t:case nMe:case rMe:case iMe:case sMe:case oMe:case aMe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Tf,d!==tte&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];gMe(e,v,x9t(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===uMe||n.autosize.type===lMe||n.autosize.type===cMe))switch(y.orient){case wf:case Tf:o.add(v.x1,0).add(v.x2,0);break;case sx:case sy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(I9t(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),N9t(e,t,o,n)}function N9t(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===s9t){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===tte?(l=0,f=0,u=o,c=a):s===uMe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===lMe?(u=Math.max(0,o-l-d),a=c+f+h):s===cMe?(o=u+l+d,c=Math.max(0,a-f-h)):s===a9t&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const P9t=Object.freeze(Object.defineProperty({__proto__:null,bound:fMe,identifier:rte,mark:dMe,overlap:hMe,render:mMe,viewlayout:yMe},Symbol.toStringTag,{value:"Module"}));function vMe(e){Pe.call(this,null,e)}lt(vMe,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=wee(s,o,e.minstep),u=e.format||q3e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?H3e(s,e.values,a):Eee(s,a);return i&&(r.rem=i),i=l.map((c,f)=>_r({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(_r({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function bMe(e){Pe.call(this,null,e)}function D9t(){return _r({})}function O9t(e){const t=ES().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(bMe,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||D9t,s=e.key||Mt,o=this.value;return je(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Me("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=O9t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function _Me(e){Pe.call(this,null,e)}lt(_Me,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(je(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||bg,u=i.enter||bg,l=i.exit||bg,c=(s&&!o?i[s]:a)||bg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==bg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==bg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==bg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function wMe(e){Pe.call(this,[],e)}lt(wMe,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||ED,o=e.scale,a=+e.limit,u=wee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===ED,c=e.format||K3e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||Y3e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===ED?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,vn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=wa(m=p||8),i=i.map((y,v)=>_r({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(_r({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===a5t?(d=o.domain(),h=U3e(o,d[0],Xn(d)),f.length<3&&!e.values&&d[0]!==Xn(d)&&(f=[d[0],Xn(d)]),i=f.map((y,v)=>_r({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=v5t(o),i=f.map((y,v)=>_r({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const $9t=e=>e.source.x,M9t=e=>e.source.y,L9t=e=>e.target.x,F9t=e=>e.target.y;function ite(e){Pe.call(this,{},e)}ite.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(ite,Pe,{transform(e,t){var n=e.sourceX||$9t,r=e.sourceY||M9t,i=e.targetX||L9t,s=e.targetY||F9t,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Rpe.get(u+"-"+a)||Rpe.get(u);return l||Me("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const EMe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,j9t=(e,t,n,r)=>EMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),xMe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},B9t=(e,t,n,r)=>xMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),SMe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},U9t=(e,t,n,r)=>SMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),z9t=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,V9t=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,H9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},q9t=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},W9t=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},G9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Rpe=ES({line:EMe,"line-radial":j9t,arc:xMe,"arc-radial":B9t,curve:SMe,"curve-radial":U9t,"orthogonal-horizontal":z9t,"orthogonal-vertical":V9t,"orthogonal-radial":H9t,"diagonal-horizontal":q9t,"diagonal-vertical":W9t,"diagonal-radial":G9t});function ste(e){Pe.call(this,null,e)}ste.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(ste,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||bS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/GEe(l),h=Nu(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const Y9t=5;function K9t(e){const t=e.type;return!e.bins&&(t===ZE||t===zk||t===Vk)}function TMe(e){return vee(e)&&e!==fh}const X9t=qf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function AMe(e){Pe.call(this,null,e),this.modified(!0)}lt(AMe,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=Q9t(e);(!r||i!==r.type)&&(this.value=r=mr(i)());for(i in e)if(!X9t[i]){if(i==="padding"&&TMe(r.type))continue;vn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return rBt(r,e,nBt(r,e,Z9t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Q9t(e){var t=e.type,n="",r;return t===fh?fh+"-"+ZE:(J9t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?fh+"-":r===3?AS+"-":""),(n+t||ZE).toLowerCase())}function J9t(e){const t=e.type;return vee(t)&&t!==Q1&&t!==J1&&(e.scheme||e.range&&e.range.length&&e.range.every(pt))}function Z9t(e,t,n){const r=eBt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&K9t(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return TMe(s)&&t.padding&&i[0]!==Xn(i)&&(i=tBt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(CMe(s,i,n)),s===pee&&e.unknown(t.domainImplicit?U7:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&wee(e,t.nice)||null),i.length}function eBt(e,t,n){return t?(e.domain(CMe(e.type,t,n)),t.length):-1}function tBt(e,t,n,r,i,s){var o=Math.abs(Xn(n)-n[0]),a=o/(o-2*r),u=e===Dm?aZ(t,null,a):e===Vk?D$(t,null,a,.5):e===zk?D$(t,null,a,i||1):e===YF?uZ(t,null,a,s||1):oZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function CMe(e,t,n){if(M3e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+nt(t))}return t}function nBt(e,t,n){let r=t.bins;if(r&&!je(r)){const i=e.domain(),s=i[0],o=Xn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Me("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Nu(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===mee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function rBt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=iBt(r,t,n);else if(t.scheme&&(s=sBt(r,t,n),vn(s))){if(e.interpolator)return e.interpolator(s);Me(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&L3e(r))return e.interpolator(QF(JV(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(bee(t.interpolate,t.interpolateGamma)):vn(e.round)?e.round(i):vn(e.rangeRound)&&e.interpolate(i?QI:Wm),s&&e.range(JV(s,t.reverse))}function iBt(e,t,n){e!==R3e&&e!==LV&&Me("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===LV?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*hee(n,i,r)]}function sBt(e,t,n){var r=t.schemeExtent,i,s;return je(t.scheme)?s=QF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=_ee(i),s||Me(`Unrecognized scheme name: ${t.scheme}`)),n=e===XF?n+1:e===mee?n-1:e===ex||e===KF?+t.schemeCount||Y9t:n,L3e(e)?Npe(s,r,t.reverse):vn(s)?B3e(Npe(s,r),n):e===pee?s:s.slice(0,n)}function Npe(e,t,n){return vn(e)&&(t||n)?j3e(e,JV(t||[0,1],n)):e}function JV(e,t){return t?e.slice().reverse():e}function IMe(e){Pe.call(this,null,e)}lt(IMe,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Fb(e.sort)),this.modified(n),t}});const Ppe="zero",kMe="center",RMe="normalize",NMe=["y0","y1"];function ote(e){Pe.call(this,null,e)}ote.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Ppe,values:[Ppe,kMe,RMe]},{name:"as",type:"string",array:!0,length:2,default:NMe}]};lt(ote,Pe,{transform(e,t){var n=e.as||NMe,r=n[0],i=n[1],s=Fb(e.sort),o=e.field||bS,a=e.offset===kMe?oBt:e.offset===RMe?aBt:uBt,u,l,c,f;for(u=lBt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function oBt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function aBt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function uBt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function lBt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const cBt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:vMe,datajoin:bMe,encode:_Me,legendentries:wMe,linkpath:ite,pie:ste,scale:AMe,sortitems:IMe,stack:ote},Symbol.toStringTag,{value:"Module"}));var fBt=Math.abs,ZV=Math.cos,X$=Math.sin,dBt=1e-6,PMe=Math.PI,eH=PMe/2,Dpe=hBt(2);function Ope(e){return e>1?eH:e<-1?-eH:Math.asin(e)}function hBt(e){return e>0?Math.sqrt(e):0}function pBt(e,t){var n=e*X$(t),r=30,i;do t-=i=(t+X$(t)-n)/(1+ZV(t));while(fBt(i)>dBt&&--r>0);return t/2}function mBt(e,t,n){function r(i,s){return[e*i*ZV(s=pBt(n,s)),t*X$(s)]}return r.invert=function(i,s){return s=Ope(s/t),[i/(e*ZV(s)),Ope((2*s+X$(2*s))/n)]},r}var gBt=mBt(Dpe/eH,Dpe,PMe);function yBt(){return zh(gBt).scale(169.529)}const vBt=ESe(),tH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function bBt(e,t){return function n(){const r=t();return r.type=e,r.path=ESe().projection(r),r.copy=r.copy||function(){const i=n();return tH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},O3e(r)}}function ate(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Q$[e]=bBt(e,t),this):Q$[e]||null}function DMe(e){return e&&e.path||vBt}const Q$={albers:SSe,albersusa:Yft,azimuthalequalarea:Kft,azimuthalequidistant:Xft,conicconformal:Zft,conicequalarea:m3,conicequidistant:ndt,equalEarth:idt,equirectangular:edt,gnomonic:sdt,identity:odt,mercator:Qft,mollweide:yBt,naturalEarth1:adt,orthographic:udt,stereographic:ldt,transversemercator:cdt};for(const e in Q$)ate(e,Q$[e]);function _Bt(){}const dp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function OMe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),wBt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(EBt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,dp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,dp[m|g<<1].forEach(b);for(dp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,dp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,dp[m|g<<1|y<<2|v<<3].forEach(b);dp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,dp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,dp[y<<2|v<<3].forEach(b);dp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],T=o(E),A=o(S),C,I;(C=d[T])?(I=f[A])?(delete d[C.end],delete f[I.start],C===I?(C.ring.push(S),c(C.ring)):f[C.start]=d[I.end]={start:C.start,end:I.end,ring:C.ring.concat(I.ring)}):(delete d[C.end],C.ring.push(S),d[C.end=A]=C):(C=f[A])?(I=d[T])?(delete f[C.start],delete d[I.end],C===I?(C.ring.push(S),c(C.ring)):f[I.start]=d[C.end]={start:I.start,end:C.end,ring:I.ring.concat(C.ring)}):(delete f[C.start],C.ring.unshift(E),f[C.start=T]=C):f[T]=d[A]={start:T,end:A,ring:[E,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Me("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:_Bt,r):n===a},r}function wBt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function EBt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=xBt(e,t[n]))return i;return 0}function xBt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(SBt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function SBt(e,t,n){var r;return TBt(e,t,n)&&ABt(e[r=+(e[0]===t[0])],n[r],t[r])}function TBt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function ABt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function $Me(e,t,n){return function(r){var i=Ch(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?$0(s,o,e):a/(e+1);return Nu(s+u,o,u)}}function ute(e){Pe.call(this,null,e)}ute.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(ute,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||_a,s=OMe().smooth(e.smooth!==!1),o=e.thresholds||CBt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,je(o)?o:o(c.values));IBt(f,c,l,e),f.forEach(d=>{u.push(jF(l,_r(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function CBt(e,t,n){const r=$Me(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>d0(t(i).values)))}function IBt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(vn(i)&&(i=i(n,r)),vn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(ur(i)?i:i[0])||1,a=(ur(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(MMe(t,o,a,u,l))}function MMe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function $pe(e,t,n){const r=e>=0?e:CZ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function T9(e){return vn(e)?e:wa(+e)}function LMe(){var e=u=>u[0],t=u=>u[1],n=bS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=$pe(r[0],u,e)>>o,f=$pe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),S=h+(+t(w)>>o);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(w))}),c>0&&f>0?(x_(p,m,g,y,c),S_(p,m,y,g,f),x_(p,m,g,y,c),S_(p,m,y,g,f),x_(p,m,g,y,c),S_(p,m,y,g,f)):c>0?(x_(p,m,g,y,c),x_(p,m,y,g,c),x_(p,m,g,y,c),v=y):f>0&&(S_(p,m,g,y,f),S_(p,m,y,g,f),S_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/GEe(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=T9(u),a):e},a.y=function(u){return arguments.length?(t=T9(u),a):t},a.weight=function(u){return arguments.length?(n=T9(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Me("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Me("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=ht(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Me("invalid bandwidth"),r=u,a):r},a}function x_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function S_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function lte(e){Pe.call(this,null,e)}lte.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const kBt=["x","y","weight","size","cellSize","bandwidth"];function FMe(e,t){return kBt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(lte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=RBt(r,e.groupby),s=(e.groupby||[]).map(Yi),o=FMe(LMe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>_r(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function RBt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function cte(e){Pe.call(this,null,e)}cte.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(cte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=OMe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||$Me(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=FMe(LMe(),e)(i,!0),u=MMe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=je(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(_r),n}});const nH="Feature",fte="FeatureCollection",NBt="MultiPoint";function dte(e){Pe.call(this,null,e)}dte.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(dte,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&_a,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ha(a))||s&&t.modified(ha(s))||o&&t.modified(ha(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:nH,geometry:{type:NBt,coordinates:r}})),this.value={type:fte,features:n}}});function hte(e){Pe.call(this,null,e)}hte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(hte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||_a,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=DMe(e.projection),n.materialize().reflow()):o=i===_a||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=PBt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function PBt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function pte(e){Pe.call(this,null,e)}pte.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(pte,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function mte(e){Pe.call(this,null,e)}mte.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(mte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=DBt(DMe(e.projection),e.field||Nc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function DBt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function gte(e){Pe.call(this,[],e),this.generator=Cft()}gte.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(gte,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)vn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(FOe(n[0],i)):t.add.push(_r(i)),n[0]=i,t}});function yte(e){Pe.call(this,null,e)}yte.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(yte,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||_a,s=$Bt(e.opacity,e),o=OBt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?d0(n.map(l=>d0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=yn({},l,u);r||(f.$max=d0(c.values||[])),l[a]=MBt(c,f,o.dep?o:wa(o(f)),s.dep?s:wa(s(f)))}),t.reflow(!0).modifies(a)}});function OBt(e,t){let n;return vn(e)?(n=r=>M0(e(r,t)),n.dep=jMe(e)):n=wa(M0(e||"#888")),n}function $Bt(e,t){let n;return vn(e)?(n=r=>e(r,t),n.dep=jMe(e)):e?n=wa(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function jMe(e){if(!vn(e))return!1;const t=qf(ha(e));return t.$x||t.$y||t.$value||t.$max}function MBt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Bg,d=S0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function BMe(e){Pe.call(this,null,e),this.modified(!0)}lt(BMe,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=FBt(e.type),tH.forEach(r=>{e[r]!=null&&Mpe(n,r,e[r])})):tH.forEach(r=>{e.modified(r)&&Mpe(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&LBt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function LBt(e,t){const n=jBt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function FBt(e){const t=ate((e||"mercator").toLowerCase());return t||Me("Unrecognized projection type: "+e),t()}function Mpe(e,t,n){vn(e[t])&&e[t](n)}function jBt(e){return e=ht(e),e.length===1?e[0]:{type:fte,features:e.reduce((t,n)=>t.concat(BBt(n)),[])}}function BBt(e){return e.type===fte?e.features:ht(e).filter(t=>t!=null).map(t=>t.type===nH?t:{type:nH,geometry:t})}const UBt=Object.freeze(Object.defineProperty({__proto__:null,contour:cte,geojson:dte,geopath:hte,geopoint:pte,geoshape:mte,graticule:gte,heatmap:yte,isocontour:ute,kde2d:lte,projection:BMe},Symbol.toStringTag,{value:"Module"})),Lpe={center:yct,collide:Mct,nbody:Gct,link:Fct,x:Yct,y:Kct},IA="forces",rH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],zBt=["static","iterations"],UMe=["x","y","vx","vy"];function vte(e){Pe.call(this,null,e)}vte.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:UMe}]};lt(vte,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(rH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&zMe(n,e,0,t)):(this.value=n=HBt(t.source,e),n.on("tick",VBt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(zBt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==IA||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(UMe)}});function VBt(e,t){return()=>e.touch(t).run()}function HBt(e,t){const n=Wct(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),zMe(n,t,!0).on("end",()=>s=!0)}function zMe(e,t,n,r){var i=ht(t.forces),s,o,a,u;for(s=0,o=rH.length;s<o;++s)a=rH[s],a!==IA&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=IA+s,a=n||t.modified(IA,s)?WBt(i[s]):r&&qBt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(IA+s,null);return e.numForces=i.length,e}function qBt(e,t){var n,r;for(n in e)if(vn(r=e[n])&&t.modified(ha(r)))return 1;return 0}function WBt(e){var t,n;Ft(Lpe,e.force)||Me("Unrecognized force: "+e.force),t=Lpe[e.force]();for(n in e)vn(t[n])&&GBt(t[n],e[n],e);return t}function GBt(e,t,n){e(vn(t)?r=>t(r,n):t)}const YBt=Object.freeze(Object.defineProperty({__proto__:null,force:vte},Symbol.toStringTag,{value:"Module"}));function iH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function bte(e){Pe.call(this,null,e)}bte.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const KBt=e=>e.values;lt(bte,Pe,{transform(e,t){t.source||Me("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&FF(o.data)&&i.rem.push(o.data)}),this.value=s=ZL({values:ht(e.keys).reduce((o,a)=>(o.key(a),o),XBt()).entries(i.source)},KBt),n&&s.each(o=>{o.children&&(o=_r(o.data),i.add.push(o),i.source.push(o))}),iH(s,Mt,Mt)),i.source.root=s,i}});function XBt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function eg(e){Pe.call(this,null,e)}const QBt=(e,t)=>e.parent===t.parent?1:2;lt(eg,Pe,{transform(e,t){(!t.source||!t.source.root)&&Me(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Fb(e.sort,o=>o.data)),JBt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?QBt:bS);try{this.value=n(i)}catch(o){Me(o)}return i.each(o=>ZBt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function JBt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function ZBt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const sH=["x","y","r","depth","children"];function _te(e){eg.call(this,e)}_te.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:sH.length,default:sH}]};lt(_te,eg,{layout:jSe,params:["radius","size","padding"],fields:sH});const oH=["x0","y0","x1","y1","depth","children"];function wte(e){eg.call(this,e)}wte.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:oH.length,default:oH}]};lt(wte,eg,{layout:Kdt,params:["size","round","padding"],fields:oH});function Ete(e){Pe.call(this,null,e)}Ete.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(Ete,Pe,{transform(e,t){t.source||Me("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?iH(mle().id(e.key).parentId(e.parentKey)(i.source),e.key,Pc):iH(mle()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Fpe={tidy:sht,cluster:vdt},aH=["x","y","depth","children"];function xte(e){eg.call(this,e)}xte.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:aH.length,default:aH}]};lt(xte,eg,{layout(e){const t=e||"tidy";if(Ft(Fpe,t))return Fpe[t]();Me("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:aH});function Ste(e){Pe.call(this,[],e)}Ste.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(Ste,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Me("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Mt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Mt(a)]&&s[Mt(u)]&&i.add.push(_r({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Mt(o)]=1),n.forEach(o=>{(s[Mt(o.source)]||s[Mt(o.target)])&&i.mod.push(o)})),i}});const jpe={binary:aht,dice:tk,slice:e6,slicedice:uht,squarify:VSe,resquarify:lht},uH=["x0","y0","x1","y1","depth","children"];function Tte(e){eg.call(this,e)}Tte.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:uH.length,default:uH}]};lt(Tte,eg,{layout(){const e=oht();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ft(jpe,t)?e.tile(jpe[t]):Me("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:uH});const eUt=Object.freeze(Object.defineProperty({__proto__:null,nest:bte,pack:_te,partition:wte,stratify:Ete,tree:xte,treelinks:Ste,treemap:Tte},Symbol.toStringTag,{value:"Module"})),A9=4278190080;function tUt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function nUt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=S0(s,o).getContext("2d"),l=S0(s,o).getContext("2d"),c=a&&S0(s,o).getContext("2d");n.forEach(A=>ND(u,A,!1)),ND(l,t,!1),a&&ND(c,t,!0);const f=C9(u,s,o),d=C9(l,s,o),h=a&&C9(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,S,T;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&A9,T=d[w]&A9,S=a&&h[w]&A9,(E||S||T)&&(v=e(g),b=e(y),!i&&(E||T)&&p.set(v,b),a&&(E||S)&&m.set(v,b));return[p,m]}function C9(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function ND(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>ND(e,s.items,n))}):Ul[r].draw(e,{items:n?t.map(rUt):t})}function rUt(e){const t=jF(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const hp=5,Na=31,aI=32,kg=new Uint32Array(aI+1),mf=new Uint32Array(aI+1);mf[0]=0;kg[0]=~mf[0];for(let e=1;e<=aI;++e)mf[e]=mf[e-1]<<1|1,kg[e]=~mf[e];function iUt(e,t){const n=new Uint32Array(~~((e*t+aI)/aI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>hp]&1<<(a&Na)},set:(s,o)=>{const a=o*e+s;r(a>>>hp,1<<(a&Na))},clear:(s,o)=>{const a=o*e+s;i(a>>>hp,~(1<<(a&Na)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>hp,h=f>>>hp,d===h){if(n[d]&kg[c&Na]&mf[(f&Na)+1])return!0}else{if(n[d]&kg[c&Na]||n[h]&mf[(f&Na)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>hp,d=c>>>hp,f===d)r(f,kg[l&Na]&mf[(c&Na)+1]);else for(r(f,kg[l&Na]),r(d,mf[(c&Na)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>hp,d=c>>>hp,f===d)i(f,mf[l&Na]|kg[(c&Na)+1]);else for(i(f,mf[l&Na]),i(d,kg[(c&Na)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function sUt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>iUt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function oUt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Al.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function J$(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function e0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function aUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!J$(p,m,d,h,i,s)&&!e0(e,p,m,h,d,g,o,a)&&!e0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,e0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Al.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,S,T,A,C,I,R,O,P,$,F,L,B,z;for(let q=0;q<f;++q){for(v=c[q].x,w=c[q].y,b=c[q].x2===void 0?v:c[q].x2,E=c[q].y2===void 0?w:c[q].y2,v>b&&(z=v,v=b,b=z),w>E&&(z=w,w=E,E=z),I=e(v),O=e(b),R=~~((I+O)/2),P=e(w),F=e(E),$=~~((P+F)/2),A=R;A>=I;--A)for(C=$;C>=P;--C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);for(A=R;A<=O;++A)for(C=$;C<=F;++C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(L=Math.abs(b-v+E-w),S=(v+b)/2,T=(w+E)/2,L>=y&&!J$(S,T,h,d,i,s)&&!e0(e,S,T,d,h,d,o,null)&&(y=L,l.x=S,l.y=T,g=!0))}return m||g?(S=h/2,T=d/2,o.setRange(e(l.x-S),e(l.y-T),e(l.x+S),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const uUt=[-1,-1,1,1],lUt=[-1,1,-1,1];function cUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Al.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,S,T,A,C,I,R,O,P,$;for(let F=0;F<f;++F){for(b=c[F].x,E=c[F].y,w=c[F].x2===void 0?b:c[F].x2,S=c[F].y2===void 0?E:c[F].y2,p.push([e((b+w)/2),e((E+S)/2)]);p.length;)if([C,I]=p.pop(),!(o.get(C,I)||a.get(C,I)||u.get(C,I))){u.set(C,I);for(let L=0;L<4;++L)T=C+uUt[L],A=I+lUt[L],u.outOfBounds(T,A,T,A)||p.push([T,A]);if(T=e.invert(C),A=e.invert(I),R=m,O=s,!J$(T,A,h,d,i,s)&&!e0(e,T,A,d,h,R,o,a)&&!e0(e,T,A,d,h,d,o,null)){for(;O-R>=1;)P=(R+O)/2,e0(e,T,A,d,h,P,o,a)?O=P:R=P;R>m&&(l.x=T,l.y=A,m=R,g=!0)}}!g&&!n&&($=Math.abs(w-b+S-E),T=(b+w)/2,A=(E+S)/2,$>=v&&!J$(T,A,h,d,i,s)&&!e0(e,T,A,d,h,d,o,null)&&(v=$,l.x=T,l.y=A,y=!0))}return g||y?(T=h/2,A=d/2,o.setRange(e(l.x-T),e(l.y-A),e(l.x+T),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const fUt=["right","center","left"],dUt=["bottom","middle","top"];function hUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,S,T,A,C,I,R;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,T=c[4+p]+y*f*p/2+r[O]*p*g,w=T-f/2,E=T+f/2,A=e(v),I=e(w),R=e(E),!d)if(Bpe(A,A,I,R,o,a,v,v,w,E,c,m))d=Al.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,b=S+d/2,A=e(v),C=e(b),Bpe(A,C,I,R,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:S,l.y=p?p*y<0?E:w:T,l.align=fUt[h*y+1],l.baseline=dUt[p*y+1],o.setRange(A,I,C,R),!0}return!1}}function Bpe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const I9=0,k9=4,R9=8,N9=0,P9=1,D9=2,pUt={"top-left":I9+N9,top:I9+P9,"top-right":I9+D9,left:k9+N9,middle:k9+P9,right:k9+D9,"bottom-left":R9+N9,bottom:R9+P9,"bottom-right":R9+D9},mUt={naive:oUt,"reduced-search":aUt,floodfill:cUt};function gUt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=yUt(r,f),h=vUt(i,f),p=bUt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=_Ut(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const S=e.map(I=>{const R=v?Al.width(I,I.text):void 0;return w=Math.max(w,R),E=Math.max(E,I.fontSize),{datum:I,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(I),textWidth:R}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const T=sUt(t[0],t[1],l);let A;if(!b){n&&S.sort((O,P)=>n(O.datum,P.datum));let I=!1;for(let O=0;O<h.length&&!I;++O)I=h[O]===5||d[O]<0;const R=(p&&o||g)&&e.map(O=>O.datum);A=s.length||R?nUt(T,R||[],s,I,g):tUt(T,o&&S)}const C=g?mUt[c](T,A,o,u):hUt(T,A,h,d);return S.forEach(I=>I.opacity=+C(I)),S}function yUt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function vUt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=pUt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function bUt(e){return e&&e.mark&&e.mark.marktype}function _Ut(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const lH=["x","y","opacity","align","baseline"],VMe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Ate(e){Pe.call(this,null,e)}Ate.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:VMe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:lH.length,default:lH}]};lt(Ate,Pe,{transform(e,t){function n(s){const o=e[s];return vn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Me("Size parameter should be specified as a [width, height] array.");const i=e.as||lH;return gUt(t.materialize(t.SOURCE).source||[],e.size,e.sort,ht(e.offset==null?1:e.offset),ht(e.anchor||VMe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const wUt=Object.freeze(Object.defineProperty({__proto__:null,label:Ate},Symbol.toStringTag,{value:"Module"}));function HMe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Cte(e){Pe.call(this,null,e)}Cte.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(Cte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=HMe(r,e.groupby),s=(e.groupby||[]).map(Yi),o=s.length,a=e.as||[Yi(e.x),Yi(e.y)],u=[];i.forEach(l=>{n3e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(_r(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const cH={constant:jZ,linear:BZ,log:JOe,exp:ZOe,pow:e3e,quad:UZ,poly:t3e},EUt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Ite(e){Pe.call(this,null,e)}Ite.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(cH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(Ite,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=HMe(r,e.groupby),s=(e.groupby||[]).map(Yi),o=e.method||"linear",a=e.order==null?3:e.order,u=EUt(o,a),l=e.as||[Yi(e.x),Yi(e.y)],c=cH[o],f=[];let d=e.extent;Ft(cH,o)||Me("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(_r({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Ch(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(_r(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):WF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const xUt=Object.freeze(Object.defineProperty({__proto__:null,loess:Cte,regression:Ite},Symbol.toStringTag,{value:"Module"}));function kte(e){Pe.call(this,null,e)}kte.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const SUt=[-1e5,-1e5,1e5,1e5];lt(kte,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:SUt;const s=this.value=BY.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!AUt(u)?TUt(u):null}return t.reflow(e.modified()).modifies(n)}});function TUt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function AUt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const CUt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:kte},Symbol.toStringTag,{value:"Module"}));var O9=Math.PI/180,kA=64,PD=2048;function IUt(){var e=[256,256],t,n,r,i,s,o,a,u=qMe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(S0()),m=OUt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,T)=>T.size-S.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,kUt(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?NUt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(kA<<5)/m,p.height=PD/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,S=-E,T,A,C;(T=w(S+=E))&&(A=~~T[0],C=~~T[1],!(Math.min(Math.abs(A),Math.abs(C))>=b));)if(m.x=y+A,m.y=v+C,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!RUt(m,p,e[0]))&&(!g||PUt(m,g))){for(var I=m.sprite,R=m.width>>5,O=e[0]>>5,P=m.x-(R<<4),$=P&127,F=32-$,L=m.y1-m.y0,B=(m.y+m.y0)*O+(P>>5),z,q=0;q<L;q++){z=0;for(var D=0;D<=R;D++)p[B+D]|=z<<F|(D<R?(z=I[q*R+D])>>>$:0);B+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=tv(p),f):n},f.fontStyle=function(p){return arguments.length?(i=tv(p),f):i},f.fontWeight=function(p){return arguments.length?(s=tv(p),f):s},f.rotate=function(p){return arguments.length?(o=tv(p),f):o},f.text=function(p){return arguments.length?(t=tv(p),f):t},f.spiral=function(p){return arguments.length?(u=$Ut[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=tv(p),f):r},f.padding=function(p){return arguments.length?(a=tv(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function kUt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(kA<<5)/s,PD/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*O9),g=Math.cos(t.rotate*O9),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=kA<<5&&(o=0,a+=u,u=0),a+d>=PD)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*O9),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(kA<<5)/s,PD/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var T=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var C=f*p+(h>>5),I=E[(a+p)*(kA<<5)+(o+h)<<2]?1<<31-h%32:0;S[C]|=I,T|=I}T?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function RUt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function NUt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function PUt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function qMe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function DUt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function OUt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function tv(e){return typeof e=="function"?e:function(){return e}}var $Ut={archimedean:qMe,rectangular:DUt};const WMe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],MUt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Rte(e){Pe.call(this,IUt(),e)}Rte.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:WMe}]};lt(Rte,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Me("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return vn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||MUt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||WMe;let a=e.fontSize||14,u;if(vn(a)?u=e.fontSizeRange:a=wa(a),u){const p=a,m=mr("sqrt")().domain(Ch(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Oc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const LUt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Rte},Symbol.toStringTag,{value:"Module"})),FUt=e=>new Uint8Array(e),jUt=e=>new Uint16Array(e),IC=e=>new Uint32Array(e);function BUt(){let e=8,t=[],n=IC(0),r=iP(0,e),i=iP(0,e);return{data:()=>t,seen:()=>n=UUt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=iP(s,e,r),i=iP(s,e))}}}function UUt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function iP(e,t,n){const r=(t<257?FUt:t<65537?jUt:IC)(e);return n&&r.set(n),r}function Upe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function zpe(){let e=IC(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=IC(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=zUt(h,d),c)p=t,m=e,t=Array(c+f),e=IC(c+f),VUt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[$st(u,a[0],0,l),O0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function zUt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),Fst(e,t)}function VUt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Nte(e){Pe.call(this,BUt(),e),this._indices=null,this._dims=null}Nte.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(Nte,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=zpe()),s.push(Upe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,S,T;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,S=v.length;E<S;++E)w[v[E]._index]=1;for(E=0;E<h;++E)T=r[E],(!o[E]||e.modified("fields",E)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(s[y]=g=zpe(),p[y]=m=g.insert(T,t.source,0)),o[E]=Upe(g,E,i[E]).onAdd(m,u));for(E=0,S=a.data().length;E<S;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Pte(e){Pe.call(this,null,e)}Pte.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(Pte,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const HUt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Nte,resolvefilter:Pte},Symbol.toStringTag,{value:"Module"})),qUt="RawCode",eb="Literal",WUt="Property",GUt="Identifier",YUt="ArrayExpression",KUt="BinaryExpression",GMe="CallExpression",XUt="ConditionalExpression",QUt="LogicalExpression",JUt="MemberExpression",ZUt="ObjectExpression",e7t="UnaryExpression";function td(e){this.type=e}td.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=t7t(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function t7t(e){switch(e.type){case YUt:return e.elements;case KUt:case QUt:return[e.left,e.right];case GMe:return[e.callee].concat(e.arguments);case XUt:return[e.test,e.consequent,e.alternate];case JUt:return[e.object,e.property];case ZUt:return e.properties;case WUt:return[e.key,e.value];case e7t:return[e.argument];case GUt:case eb:case qUt:default:return[]}}var Kh,kt,$e,ma,Nr,c4=1,tR=2,tb=3,Fy=4,f4=5,Ub=6,_u=7,nR=8,n7t=9;Kh={};Kh[c4]="Boolean";Kh[tR]="<end>";Kh[tb]="Identifier";Kh[Fy]="Keyword";Kh[f4]="Null";Kh[Ub]="Numeric";Kh[_u]="Punctuator";Kh[nR]="String";Kh[n7t]="RegularExpression";var r7t="ArrayExpression",i7t="BinaryExpression",s7t="CallExpression",o7t="ConditionalExpression",YMe="Identifier",a7t="Literal",u7t="LogicalExpression",l7t="MemberExpression",c7t="ObjectExpression",f7t="Property",d7t="UnaryExpression",io="Unexpected token %0",h7t="Unexpected number",p7t="Unexpected string",m7t="Unexpected identifier",g7t="Unexpected reserved word",y7t="Unexpected end of input",fH="Invalid regular expression",$9="Invalid regular expression: missing /",KMe="Octal literals are not allowed in strict mode.",v7t="Duplicate data property in object literal not allowed in strict mode",ko="ILLEGAL",uI="Disabled.",b7t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),_7t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function d4(e,t){if(!e)throw new Error("ASSERT: "+t)}function Tp(e){return e>=48&&e<=57}function Dte(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function kC(e){return"01234567".indexOf(e)>=0}function w7t(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function lI(e){return e===10||e===13||e===8232||e===8233}function rR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&b7t.test(String.fromCharCode(e))}function Z$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&_7t.test(String.fromCharCode(e))}const E7t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function XMe(){for(;$e<ma;){const e=kt.charCodeAt($e);if(w7t(e)||lI(e))++$e;else break}}function dH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<ma&&Dte(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):hr({},io,ko);return String.fromCharCode(i)}function x7t(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&hr({},io,ko);$e<ma&&(e=kt[$e++],!!Dte(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&hr({},io,ko),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function QMe(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&hr({},io,ko),++$e,e=dH("u"),(!e||e==="\\"||!rR(e.charCodeAt(0)))&&hr({},io,ko),t=e);$e<ma&&(e=kt.charCodeAt($e),!!Z$(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&hr({},io,ko),++$e,e=dH("u"),(!e||e==="\\"||!Z$(e.charCodeAt(0)))&&hr({},io,ko),t+=e);return t}function S7t(){var e,t;for(e=$e++;$e<ma;){if(t=kt.charCodeAt($e),t===92)return $e=e,QMe();if(Z$(t))++$e;else break}return kt.slice(e,$e)}function T7t(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?QMe():S7t(),t.length===1?n=tb:E7t.hasOwnProperty(t)?n=Fy:t==="null"?n=f4:t==="true"||t==="false"?n=c4:n=tb,{type:n,value:t,start:e,end:$e}}function M9(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:_u,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:_u,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:_u,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:_u,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:_u,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:_u,value:i,start:e,end:$e};if(i==="//"&&hr({},io,ko),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:_u,value:r,start:e,end:$e};hr({},io,ko)}function A7t(e){let t="";for(;$e<ma&&Dte(kt[$e]);)t+=kt[$e++];return t.length===0&&hr({},io,ko),rR(kt.charCodeAt($e))&&hr({},io,ko),{type:Ub,value:parseInt("0x"+t,16),start:e,end:$e}}function C7t(e){let t="0"+kt[$e++];for(;$e<ma&&kC(kt[$e]);)t+=kt[$e++];return(rR(kt.charCodeAt($e))||Tp(kt.charCodeAt($e)))&&hr({},io,ko),{type:Ub,value:parseInt(t,8),octal:!0,start:e,end:$e}}function Vpe(){var e,t,n;if(n=kt[$e],d4(Tp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,A7t(t);if(kC(n))return C7t(t);n&&Tp(n.charCodeAt(0))&&hr({},io,ko)}for(;Tp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];Tp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),Tp(kt.charCodeAt($e)))for(;Tp(kt.charCodeAt($e));)e+=kt[$e++];else hr({},io,ko);return rR(kt.charCodeAt($e))&&hr({},io,ko),{type:Ub,value:parseFloat(e),start:t,end:$e}}function I7t(){var e="",t,n,r,i,s=!1;for(t=kt[$e],d4(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<ma;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!lI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=x7t()):e+=dH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:kC(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<ma&&kC(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<ma&&kC(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(lI(r.charCodeAt(0)))break;e+=r}return t!==""&&hr({},io,ko),{type:nR,value:e,octal:s,start:n,end:$e}}function k7t(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";hr({},fH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{hr({},fH)}try{return new RegExp(e,t)}catch{return null}}function R7t(){var e,t,n,r,i;for(e=kt[$e],d4(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<ma;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],lI(e.charCodeAt(0))&&hr({},$9),t+=e;else if(lI(e.charCodeAt(0)))hr({},$9);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||hr({},$9),i=t.substr(1,t.length-2),{value:i,literal:t}}function N7t(){var e,t,n;for(t="",n="";$e<ma&&(e=kt[$e],!!Z$(e.charCodeAt(0)));)++$e,e==="\\"&&$e<ma?hr({},io,ko):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&hr({},fH,n),{value:n,literal:t}}function P7t(){var e,t,n,r;return Nr=null,XMe(),e=$e,t=R7t(),n=N7t(),r=k7t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function D7t(e){return e.type===tb||e.type===Fy||e.type===c4||e.type===f4}function JMe(){if(XMe(),$e>=ma)return{type:tR,start:$e,end:$e};const e=kt.charCodeAt($e);return rR(e)?T7t():e===40||e===41||e===59?M9():e===39||e===34?I7t():e===46?Tp(kt.charCodeAt($e+1))?Vpe():M9():Tp(e)?Vpe():M9()}function Iu(){const e=Nr;return $e=e.end,Nr=JMe(),$e=e.end,e}function ZMe(){const e=$e;Nr=JMe(),$e=e}function O7t(e){const t=new td(r7t);return t.elements=e,t}function Hpe(e,t,n){const r=new td(e==="||"||e==="&&"?u7t:i7t);return r.operator=e,r.left=t,r.right=n,r}function $7t(e,t){const n=new td(s7t);return n.callee=e,n.arguments=t,n}function M7t(e,t,n){const r=new td(o7t);return r.test=e,r.consequent=t,r.alternate=n,r}function Ote(e){const t=new td(YMe);return t.name=e,t}function RA(e){const t=new td(a7t);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function qpe(e,t,n){const r=new td(l7t);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function L7t(e){const t=new td(c7t);return t.properties=e,t}function Wpe(e,t,n){const r=new td(f7t);return r.key=t,r.value=n,r.kind=e,r}function F7t(e,t){const n=new td(d7t);return n.operator=e,n.argument=t,n.prefix=!0,n}function hr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(d4(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function h4(e){e.type===tR&&hr(e,y7t),e.type===Ub&&hr(e,h7t),e.type===nR&&hr(e,p7t),e.type===tb&&hr(e,m7t),e.type===Fy&&hr(e,g7t),hr(e,io,e.value)}function ga(e){const t=Iu();(t.type!==_u||t.value!==e)&&h4(t)}function ui(e){return Nr.type===_u&&Nr.value===e}function L9(e){return Nr.type===Fy&&Nr.value===e}function j7t(){const e=[];for($e=Nr.start,ga("[");!ui("]");)ui(",")?(Iu(),e.push(null)):(e.push(nb()),ui("]")||ga(","));return Iu(),O7t(e)}function Gpe(){$e=Nr.start;const e=Iu();return e.type===nR||e.type===Ub?(e.octal&&hr(e,KMe),RA(e)):Ote(e.value)}function B7t(){var e,t,n,r;if($e=Nr.start,e=Nr,e.type===tb)return n=Gpe(),ga(":"),r=nb(),Wpe("init",n,r);if(e.type===tR||e.type===_u)h4(e);else return t=Gpe(),ga(":"),r=nb(),Wpe("init",t,r)}function U7t(){var e=[],t,n,r,i={},s=String;for($e=Nr.start,ga("{");!ui("}");)t=B7t(),t.key.type===YMe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?hr({},v7t):i[r]=!0,e.push(t),ui("}")||ga(",");return ga("}"),L7t(e)}function z7t(){ga("(");const e=$te();return ga(")"),e}const V7t={if:1};function H7t(){var e,t,n;if(ui("("))return z7t();if(ui("["))return j7t();if(ui("{"))return U7t();if(e=Nr.type,$e=Nr.start,e===tb||V7t[Nr.value])n=Ote(Iu().value);else if(e===nR||e===Ub)Nr.octal&&hr(Nr,KMe),n=RA(Iu());else{if(e===Fy)throw new Error(uI);e===c4?(t=Iu(),t.value=t.value==="true",n=RA(t)):e===f4?(t=Iu(),t.value=null,n=RA(t)):ui("/")||ui("/=")?(n=RA(P7t()),ZMe()):h4(Iu())}return n}function q7t(){const e=[];if(ga("("),!ui(")"))for(;$e<ma&&(e.push(nb()),!ui(")"));)ga(",");return ga(")"),e}function W7t(){$e=Nr.start;const e=Iu();return D7t(e)||h4(e),Ote(e.value)}function G7t(){return ga("."),W7t()}function Y7t(){ga("[");const e=$te();return ga("]"),e}function K7t(){var e,t,n;for(e=H7t();;)if(ui("."))n=G7t(),e=qpe(".",e,n);else if(ui("("))t=q7t(),e=$7t(e,t);else if(ui("["))n=Y7t(),e=qpe("[",e,n);else break;return e}function Ype(){const e=K7t();if(Nr.type===_u&&(ui("++")||ui("--")))throw new Error(uI);return e}function DD(){var e,t;if(Nr.type!==_u&&Nr.type!==Fy)t=Ype();else{if(ui("++")||ui("--"))throw new Error(uI);if(ui("+")||ui("-")||ui("~")||ui("!"))e=Iu(),t=DD(),t=F7t(e.value,t);else{if(L9("delete")||L9("void")||L9("typeof"))throw new Error(uI);t=Ype()}}return t}function Kpe(e){let t=0;if(e.type!==_u&&e.type!==Fy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function X7t(){var e,t,n,r,i,s,o,a,u,l;if(e=Nr,u=DD(),r=Nr,i=Kpe(r),i===0)return u;for(r.prec=i,Iu(),t=[e,Nr],o=DD(),s=[u,r,o];(i=Kpe(Nr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Hpe(a,u,o),s.push(n);r=Iu(),r.prec=i,s.push(r),t.push(Nr),n=DD(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Hpe(s[l-1].value,s[l-2],n),l-=2;return n}function nb(){var e,t,n;return e=X7t(),ui("?")&&(Iu(),t=nb(),ga(":"),n=nb(),e=M7t(e,t,n)),e}function $te(){const e=nb();if(ui(","))throw new Error(uI);return e}function Mte(e){kt=e,$e=0,ma=kt.length,Nr=null,ZMe();const t=$te();if(Nr.type!==tR)throw new Error("Unexpect token after expression.");return t}var eLe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function tLe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Me("Missing arguments to clamp function."),o.length>3&&Me("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Me("Missing arguments to if function."),o.length>3&&Me("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function Q7t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function nLe(e){e=e||{};const t=e.allowed?qf(e.allowed):{},n=e.forbidden?qf(e.forbidden):{},r=e.constants||eLe,i=(e.functions||tLe)(f),s=e.globalvar,o=e.fieldvar,a=vn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(pt(p))return p;const m=d[p.type];return m==null&&Me("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ft(n,m)?Me("Illegal identifier: "+m):Ft(r,m)?r[m]:Ft(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[Q7t(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Me("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ft(i,m)&&i[m];return y||Me("Unrecognized function: "+m),vn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Xpe=Symbol("vega_selection_getter");function rLe(e){return(!e.getter||!e.getter[Xpe])&&(e.getter=Nc(e.field),e.getter[Xpe]=!0),e.getter}const Lte="intersect",Qpe="union",J7t="vlMulti",Z7t="vlPoint",Jpe="or",ezt="and",kd="_vgsid_",cI=Nc(kd),tzt="E",nzt="R",rzt="R-E",izt="R-LE",szt="R-RE",eM="index:unit";function Zpe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=rLe(a)(e),E0(o)&&(o=ca(o)),E0(r[s])&&(r[s]=ca(r[s])),je(r[s])&&E0(r[s][0])&&(r[s]=r[s].map(ca)),a.type===tzt){if(je(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===nzt){if(!dw(o,r[s]))return!1}else if(a.type===szt){if(!dw(o,r[s],!0,!1))return!1}else if(a.type===rzt){if(!dw(o,r[s],!1,!1))return!1}else if(a.type===izt&&!dw(o,r[s],!1,!0))return!1;return!0}function ozt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[eM]&&r[eM].value:void 0,o=n===Lte,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Zpe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Zpe(t,l),o^h)return h;return a&&o}const iLe=Vx(cI),azt=iLe.left,uzt=iLe.right;function lzt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[eM]&&r[eM].value:void 0,o=n===Lte,a=cI(t),u=azt(i,a);if(u===i.length||cI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(uzt(i,a)-u<s.size)return!1}return!0}function czt(e,t){return e.map(n=>yn(t.fields?{values:t.fields.map(r=>rLe(r)(n.datum))}:{[kd]:cI(n.datum)},t))}function fzt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,S;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,S=c.length;E<S;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=F9[`${y}_union`],m[d]=v(g,ht(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(ht(f).reduce((T,A,C)=>(T[c[C].field]=A,T),{})))}else h=kd,p=cI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[kd]:p}));if(t=t||Qpe,o[kd]?o[kd]=F9[`${kd}_${t}`](...Object.values(o[kd])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(A=>o[T][A]).reduce((A,C)=>A===void 0?C:F9[`${u[T]}_${t}`](A,C))}),s=Object.keys(a),n&&s.length){const T=r?Z7t:J7t;o[T]=t===Qpe?{[Jpe]:s.reduce((A,C)=>(A.push(...a[C]),A),[])}:{[ezt]:s.map(A=>({[Jpe]:a[A]}))}}return o}var F9={[`${kd}_union`]:Gst,[`${kd}_intersect`]:qst,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ca(t[0]),r=ca(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ca(t[0]),r=ca(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const dzt=":",hzt="@";function Fte(e,t,n,r){t[0].type!==eb&&Me("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Xn(t).value,o="unit",a=hzt+o,u=dzt+i;s===Lte&&!Ft(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ft(r,u)||(r[u]=n.getData(i).tuplesRef())}function sLe(e){const t=this.context.data[e];return t?t.values.value:[]}function pzt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function mzt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Pc).insert(t)),1}function gzt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const iR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},yzt=iR("format"),oLe=iR("timeFormat"),vzt=iR("utcFormat"),bzt=iR("timeParse"),_zt=iR("utcParse"),sP=new Date(2e3,0,1);function p4(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(sP.setYear(2e3),sP.setMonth(e),sP.setDate(t),oLe.call(this,sP,n))}function wzt(e){return p4.call(this,e,1,"%B")}function Ezt(e){return p4.call(this,e,1,"%b")}function xzt(e){return p4.call(this,0,2+e,"%A")}function Szt(e){return p4.call(this,0,2+e,"%a")}const Tzt=":",Azt="@",hH="%",aLe="$";function jte(e,t,n,r){t[0].type!==eb&&Me("First argument to data functions must be a string literal.");const i=t[0].value,s=Tzt+i;if(!Ft(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function Czt(e,t,n,r){t[0].type!==eb&&Me("First argument to indata must be a string literal."),t[1].type!==eb&&Me("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=Azt+s;Ft(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ga(e,t,n,r){if(t[0].type===eb)eme(n,r,t[0].value);else for(e in n.scales)eme(n,r,e)}function eme(e,t,n){const r=hH+n;if(!Ft(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Xh(e,t){if(vn(e))return e;if(pt(e)){const n=t.scales[e];return n&&Z4t(n.value)?n.value:void 0}}function Izt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ga,n._range=Ga,n._scale=Ga;const r=i=>"_["+(i.type===eb?nt(hH+i.value):nt(hH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Bte(e,t){return function(n,r,i){if(n){const s=Xh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const kzt=Bte("area",oft),Rzt=Bte("bounds",cft),Nzt=Bte("centroid",gft);function Pzt(e,t){const n=Xh(e,(t||this).context);return n&&n.scale()}function Dzt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Ute(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Ozt(){return Ute(this.context.dataflow,"warn",arguments)}function $zt(){return Ute(this.context.dataflow,"info",arguments)}function Mzt(){return Ute(this.context.dataflow,"debug",arguments)}function j9(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function pH(e){const t=M0(e),n=j9(t.r),r=j9(t.g),i=j9(t.b);return .2126*n+.7152*r+.0722*i}function Lzt(e,t){const n=pH(e),r=pH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Fzt(){const e=[].slice.call(arguments);return e.unshift({}),yn(...e)}function uLe(e,t){return e===t||e!==e&&t!==t?!0:je(e)?je(t)&&e.length===t.length?jzt(e,t):!1:mt(e)&&mt(t)?lLe(e,t):!1}function jzt(e,t){for(let n=0,r=e.length;n<r;++n)if(!uLe(e[n],t[n]))return!1;return!0}function lLe(e,t){for(const n in e)if(!uLe(e[n],t[n]))return!1;return!0}function tme(e){return t=>lLe(e,t)}function Bzt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Pc:je(n)||FF(n)?n:tme(n),c.remove(f)),t&&c.insert(t),r&&(f=tme(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Uzt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function zzt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const nme={};function Vzt(e,t){const n=nme[t]||(nme[t]=Nc(t));return je(e)?e.map(n):n(e)}function zte(e){return je(e)||ArrayBuffer.isView(e)?e:null}function Vte(e){return zte(e)||(pt(e)?e:null)}function Hzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return zte(e).join(...n)}function qzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vte(e).indexOf(...n)}function Wzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vte(e).lastIndexOf(...n)}function Gzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Vte(e).slice(...n)}function Yzt(e,t,n){return vn(n)&&Me("Function argument passed to replace."),String(e).replace(t,n)}function Kzt(e){return zte(e).slice().reverse()}function Xzt(e,t,n){return hee(e||0,t||0,n||0)}function Qzt(e,t){const n=Xh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Jzt(e,t){const n=Xh(e,(t||this).context);return n?n.copy():void 0}function Zzt(e,t){const n=Xh(e,(t||this).context);return n?n.domain():[]}function eVt(e,t,n){const r=Xh(e,(n||this).context);return r?je(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function tVt(e,t){const n=Xh(e,(t||this).context);return n&&n.range?n.range():[]}function nVt(e,t,n){const r=Xh(e,(n||this).context);return r?r(t):void 0}function rVt(e,t,n,r,i){e=Xh(e,(i||this).context);const s=Z3e(t,n);let o=e.domain(),a=o[0],u=Xn(o),l=_a;return u-a?l=U3e(e,a,u):e=(e.interpolator?mr("sequential")().interpolator(e.interpolator()):mr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Xn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function iVt(e,t,n){const r=Xh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function sVt(e){let t=null;return function(n){return n?iI(n,t=t||nx(e)):e}}const cLe=e=>e.data;function fLe(e,t){const n=sLe.call(t,e);return n.root&&n.root.lookup||{}}function oVt(e,t,n){const r=fLe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(cLe):void 0}function aVt(e,t){const n=fLe(e,this)[t];return n?n.ancestors().map(cLe):void 0}const dLe=()=>typeof window<"u"&&window||null;function uVt(){const e=dLe();return e?e.screen:{}}function lVt(){const e=dLe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function cVt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function hLe(e,t,n){if(!e)return[];const[r,i]=e,s=new Es().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return X$e(o,s,fVt(t))}function fVt(e){let t=null;if(e){const n=ht(e.marktype),r=ht(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function dVt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ht(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function hVt(e){return ht(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function pVt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Es().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),hLe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>mVt(u.x,u.y,t))}function mVt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const fI={random(){return Oc()},cumulativeNormal:VF,cumulativeLogNormal:DZ,cumulativeUniform:LZ,densityNormal:IZ,densityLogNormal:PZ,densityUniform:MZ,quantileNormal:HF,quantileLogNormal:OZ,quantileUniform:FZ,sampleNormal:zF,sampleLogNormal:NZ,sampleUniform:$Z,isArray:je,isBoolean:Ly,isDate:E0,isDefined(e){return e!==void 0},isNumber:ur,isObject:mt,isRegExp:QDe,isString:pt,isTuple:FF,isValid(e){return e!=null&&e===e},toBoolean:dZ,toDate(e){return hZ(e)},toNumber:ca,toString:pZ,indexof:qzt,join:Hzt,lastindexof:Wzt,replace:Yzt,reverse:Kzt,slice:Gzt,flush:KDe,lerp:JDe,merge:Fzt,pad:tOe,peek:Xn,pluck:Vzt,span:Fk,inrange:dw,truncate:nOe,rgb:M0,lab:zO,hcl:VO,hsl:BO,luminance:pH,contrast:Lzt,sequence:Nu,format:yzt,utcFormat:vzt,utcParse:_zt,utcOffset:gOe,utcSequence:bOe,timeFormat:oLe,timeParse:bzt,timeOffset:mOe,timeSequence:vOe,timeUnitSpecifier:iOe,monthFormat:wzt,monthAbbrevFormat:Ezt,dayFormat:xzt,dayAbbrevFormat:Szt,quarter:qDe,utcquarter:WDe,week:oOe,utcweek:lOe,dayofyear:sOe,utcdayofyear:uOe,warn:Ozt,info:$zt,debug:Mzt,extent(e){return Ch(e)},inScope:Dzt,intersect:hLe,clampRange:GDe,pinchDistance:Uzt,pinchAngle:zzt,screen:uVt,containerSize:cVt,windowSize:lVt,bandspace:Xzt,setdata:mzt,pathShape:sVt,panLinear:UDe,panLog:zDe,panPow:VDe,panSymlog:HDe,zoomLinear:oZ,zoomLog:aZ,zoomPow:D$,zoomSymlog:uZ,encode:gzt,modify:Bzt,lassoAppend:dVt,lassoPath:hVt,intersectLasso:pVt},gVt=["view","item","group","xy","x","y"],yVt="event.vega.",pLe="this.",Hte={},mLe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${nt(aLe+e)}]`,functions:vVt,constants:eLe,visitors:Hte},mH=nLe(mLe);function vVt(e){const t=tLe(e);gVt.forEach(n=>t[n]=yVt+n);for(const n in fI)t[n]=pLe+n;return yn(t,Izt(e,fI,Hte)),t}function fs(e,t,n){return arguments.length===1?fI[e]:(fI[e]=t,n&&(Hte[e]=n),mH&&(mH.functions[e]=pLe+e),this)}fs("bandwidth",Qzt,Ga);fs("copy",Jzt,Ga);fs("domain",Zzt,Ga);fs("range",tVt,Ga);fs("invert",eVt,Ga);fs("scale",nVt,Ga);fs("gradient",rVt,Ga);fs("geoArea",kzt,Ga);fs("geoBounds",Rzt,Ga);fs("geoCentroid",Nzt,Ga);fs("geoShape",iVt,Ga);fs("geoScale",Pzt,Ga);fs("indata",pzt,Czt);fs("data",sLe,jte);fs("treePath",oVt,jte);fs("treeAncestors",aVt,jte);fs("vlSelectionTest",ozt,Fte);fs("vlSelectionIdTest",lzt,Fte);fs("vlSelectionResolve",fzt,Fte);fs("vlSelectionTuples",czt);function kh(e,t){const n={};let r;try{e=pt(e)?e:nt(e)+"",r=Mte(e)}catch{Me("Expression parse error: "+e)}r.visit(s=>{if(s.type!==GMe)return;const o=s.callee.name,a=mLe.visitors[o];a&&a(o,s.arguments,t,n)});const i=mH(r);return i.globals.forEach(s=>{const o=aLe+s;!Ft(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:yn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function bVt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const _Vt=qf(["rule"]),rme=qf(["group","image","rect"]);function wVt(e,t){let n="";return _Vt[t]||(e.x2&&(e.x?(rme[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(rme[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function qte(e){return(e+"").toLowerCase()}function EVt(e){return qte(e)==="operator"}function xVt(e){return qte(e)==="collect"}function PT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function SVt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var TVt={operator:(e,t)=>PT(e,["_"],t.code),parameter:(e,t)=>PT(e,["datum","_"],t.code),event:(e,t)=>PT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return PT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+nt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=wVt(r,n),i+="return m;",PT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(nt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),SVt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function AVt(e){const t=this;EVt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function CVt(e){const t=this;if(e.params){const n=t.get(e.id);n||Me("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function IVt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=je(i)?i.map(s=>ime(s,n,t)):ime(i,n,t)}return t}function ime(e,t,n){if(!e||!mt(e))return e;for(let r=0,i=sme.length,s;r<i;++r)if(s=sme[r],Ft(e,s.key))return s.parse(e,t,n);return e}var sme=[{key:"$ref",parse:kVt},{key:"$key",parse:NVt},{key:"$expr",parse:RVt},{key:"$field",parse:PVt},{key:"$encode",parse:OVt},{key:"$compare",parse:DVt},{key:"$context",parse:$Vt},{key:"$subflow",parse:MVt},{key:"$tupleid",parse:LVt}];function kVt(e,t){return t.get(e.$ref)||Me("Operator not defined: "+e.$ref)}function RVt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=rl(t.parameterExpression(e.$expr),e.$fields))}function NVt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=fZ(e.$key,e.$flat,t.expr.codegen))}function PVt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Nc(e.$field,e.$name,t.expr.codegen))}function DVt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ht(e.$compare).map(i=>i&&i.$tupleid?Mt:i);return t.fn[n]||(t.fn[n]=lZ(r,e.$order,t.expr.codegen))}function OVt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=rl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function $Vt(e,t){return t}function MVt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function LVt(){return Mt}function FVt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Me("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function jVt(e){var t=this,n=mt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Me("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const BVt={skip:!0};function UVt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function zVt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],BVt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Pc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function gLe(e,t,n,r){return new yLe(e,t,n,r)}function yLe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||TVt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function ome(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}yLe.prototype=ome.prototype={fork(){const e=new ome(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),xVt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[qte(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:bVt,parseOperator:AVt,parseOperatorParameters:CVt,parseParameters:IVt,parseStream:FVt,parseUpdate:jVt,getState:UVt,setState:zVt};function VVt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),vLe(t,e.description()))}function vLe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function HVt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const B9="default";function qVt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:B9,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?pt(i)?i:i.user:B9,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return pt(r)||(i=r.item,r=r.user),gH(e,r&&r!==B9?r:i||r),i},{cursor:t})}function gH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function tM(e,t){var n=e._runtime.data;return Ft(n,t)||Me("Unrecognized data set: "+t),n[t]}function WVt(e,t){return arguments.length<2?tM(this,e).values.value:m4.call(this,e,jb().remove(Pc).insert(t))}function m4(e,t){jOe(t)||Me("Second argument to changes must be a changeset.");const n=tM(this,e);return n.modified=!0,this.pulse(n.input,t)}function GVt(e,t){return m4.call(this,e,jb().insert(t))}function YVt(e,t){return m4.call(this,e,jb().remove(t))}function bLe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function _Le(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function g4(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function KVt(e){var t=g4(e),n=bLe(e),r=_Le(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function XVt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=g4(e),o=t.changedTouches?t.changedTouches[0]:t,s=a4(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=QVt(e,n,s),t}function QVt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;pt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:wa(e),item:wa(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const ame="view",JVt="timer",ZVt="window",eHt={trap:!1};function tHt(e){const t=yn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{je(r[s])&&(r[s]=qf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function wLe(e,t,n,r){e._eventListeners.push({type:n,sources:ht(t),handler:r})}function nHt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function oP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||mt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function rHt(e,t,n){var r=this,i=new UF(n),s=function(l,c){r.runAsync(null,()=>{e===ame&&nHt(r,t)&&l.preventDefault(),i.receive(XVt(r,l,c))})},o;if(e===JVt)oP(r,"timer",t)&&r.timer(s,t);else if(e===ame)oP(r,"view",t)&&r.addEventListener(t,s,eHt);else if(e===ZVt?oP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&oP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);wLe(r,o,t,s)}return i}function ume(e){return e.item}function lme(e){return e.item.mark.source}function cme(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function iHt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",ume),lme,cme(e)),this.on(this.events("view","pointerout",ume),lme,cme(t)),this}function sHt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Cl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const oHt="vega-bind",aHt="vega-bind-name",uHt="vega-bind-radio";function lHt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=cZ(r.debounce,i.update))),(r.input==null&&r.element?cHt:dHt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function cHt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),wLe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(fHt(i))}}function fHt(e){return typeof Event<"u"?new Event(e):{type:e}}function dHt(e,t,n,r){const i=r.signal(n.signal),s=Cl("div",{class:oHt}),o=n.input==="radio"?s:s.appendChild(Cl("label"));o.appendChild(Cl("span",{class:aHt},n.name||n.signal)),t.appendChild(s);let a=hHt;switch(n.input){case"checkbox":a=pHt;break;case"select":a=mHt;break;case"radio":a=gHt;break;case"range":a=yHt;break}a(e,o,n,i)}function hHt(e,t,n,r){const i=Cl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function pHt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Cl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function mHt(e,t,n,r){const i=Cl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};nM(o,r)&&(u.selected=!0),i.appendChild(Cl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(nM(n.options[a],o)){i.selectedIndex=a;return}}}function gHt(e,t,n,r){const i=Cl("span",{class:uHt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};nM(o,r)&&(u.checked=!0);const l=Cl("input",u);l.addEventListener("change",()=>e.update(o));const c=Cl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)nM(a[l].value,o)&&(a[l].checked=!0)}}function yHt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||$0(s,i,100),a=Cl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Cl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function nM(e,t){return e===t||e+""==t+""}function ELe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,bLe(e),_Le(e),g4(e),i,s).background(e.background())}function Wte(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function vHt(e,t,n,r){const i=new r(e.loader(),Wte(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,g4(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function bHt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=u4(r);e=n._el=e?U9(n,e,!0):null,VVt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||eR,a=e?s.renderer:s.headless;return n._renderer=a?ELe(n,n._renderer,e,a):null,n._handler=vHt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=U9(n,t,!0):e.appendChild(Cl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=U9(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{lHt(n,u.element||t,u)})),n}function U9(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const DT=e=>+e||0,_Ht=e=>({top:e,bottom:e,left:e,right:e});function fme(e){return mt(e)?{top:DT(e.top),bottom:DT(e.bottom),left:DT(e.left),right:DT(e.right)}:_Ht(DT(e))}async function Gte(e,t,n,r){const i=u4(t),s=i&&i.headless;return s||Me("Unrecognized renderer type: "+t),await e.runAsync(),ELe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function wHt(e,t){e!==Qg.Canvas&&e!==Qg.SVG&&e!==Qg.PNG&&Me("Unrecognized image type: "+e);const n=await Gte(this,e,t);return e===Qg.SVG?EHt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function EHt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function xHt(e,t){return(await Gte(this,Qg.Canvas,e,t)).canvas()}async function SHt(e){return(await Gte(this,Qg.SVG,e)).svg()}function THt(e,t,n){return gLe(e,JE,fI,n).parse(t)}function AHt(e){var t=this._runtime.scales;return Ft(t,e)||Me("Unrecognized scale or projection: "+e),t[e].value}var xLe="width",SLe="height",Yte="padding",dme={skip:!0};function TLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Yte?r.left+r.right:0)}function ALe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Yte?r.top+r.bottom:0)}function CHt(e){var t=e._signals,n=t[xLe],r=t[SLe],i=t[Yte];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=TLe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=ALe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function IHt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(xLe,n,dme),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(SLe,r,dme),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function kHt(e){return this._runtime.getState(e||{data:RHt,signals:NHt,recurse:!0})}function RHt(e,t){return t.modified&&je(t.input.value)&&!e.startsWith("_:vega:_")}function NHt(e,t){return!(e==="parent"||t instanceof JE.proxy)}function PHt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function DHt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(but(n,t))}function OHt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",$Ht(r))}function $Ht(e){return e==null?"":je(e)?CLe(e):mt(e)&&!E0(e)?MHt(e):e+""}function MHt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(je(n)?CLe(n):ILe(n))}).join(`
`)}function CLe(e){return"["+e.map(ILe).join(", ")+"]"}function ILe(e){return je(e)?"[]":mt(e)&&!E0(e)?"{}":e}function LHt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function kLe(e,t){const n=this;if(t=t||{},Kw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=yn({},e.locale,t.locale);n.locale(kOe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Qg.Canvas,n._scenegraph=new x$e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||OHt,n._redraw=!0,n._handler=new eR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=tHt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=THt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:yn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=TLe(n,n._width),n._viewHeight=ALe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,CHt(n),HVt(n),qVt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function aP(e,t){return Ft(e._signals,t)?e._signals[t]:Me("Unrecognized signal name: "+nt(t))}function RLe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function hme(e,t,n,r){let i=RLe(n,r);return i||(i=Wte(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function pme(e,t,n){const r=RLe(t,n);return r&&t._targets.remove(r),e}lt(kLe,Kw,{async evaluate(e,t,n){if(await Kw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,KVt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&_D(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&vLe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=aP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",fme(e)):fme(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(u4(e)||Me("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Kw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(aP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:IHt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Wte(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return hme(this,e,aP(this,e),t)},removeSignalListener(e,t){return pme(this,aP(this,e),t)},addDataListener(e,t){return hme(this,e,tM(this,e).values,t)},removeDataListener(e,t){return pme(this,tM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=gH(this,null);this._globalCursor=!!e,t&&gH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:DHt,events:rHt,finalize:sHt,hover:iHt,data:WVt,change:m4,insert:GVt,remove:YVt,scale:AHt,initialize:bHt,toImageURL:wHt,toCanvas:xHt,toSVG:SHt,getState:kHt,setState:PHt,_watchPixelRatio:LHt});const FHt="view",rM="[",iM="]",NLe="{",PLe="}",jHt=":",DLe=",",BHt="@",UHt=">",zHt=/[[\]{}]/,VHt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let OLe,$Le;function jy(e,t,n){return OLe=t||FHt,$Le=n||VHt,MLe(e.trim()).map(yH)}function HHt(e){return $Le[e]}function RC(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function MLe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=RC(e,i,DLe,rM+NLe,iM+PLe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function yH(e){return e[0]==="["?qHt(e):WHt(e)}function qHt(e){const t=e.length;let n=1,r;if(n=RC(e,n,iM,rM,iM),n===t)throw"Empty between selector: "+e;if(r=MLe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==UHt)throw"Expected '>' after between selector: "+e;r=r.map(yH);const i=yH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function WHt(e){const t={source:OLe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===PLe){if(a=e.lastIndexOf(NLe),a>=0){try{r=GHt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===BHt&&(i=++a),u=RC(e,a,jHt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=RC(e,a,rM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=RC(e,a,iM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==rM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||zHt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):HHt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function GHt(e){const t=e.split(DLe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function YHt(e){return mt(e)?e:{type:e||"pad"}}const OT=e=>+e||0,KHt=e=>({top:e,bottom:e,left:e,right:e});function XHt(e){return mt(e)?e.signal?e:{top:OT(e.top),bottom:OT(e.bottom),left:OT(e.left),right:OT(e.right)}:KHt(OT(e))}const so=e=>mt(e)&&!je(e)?yn({},e):{value:e};function mme(e,t,n,r){return n!=null?(mt(n)&&!je(n)||je(n)&&n.length&&mt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Lo(e,t,n){for(const r in t)mme(e,r,t[r]);for(const r in n)mme(e,r,n[r],"update")}function IS(e,t,n){for(const r in t)n&&Ft(n,r)||(e[r]=yn(e[r]||{},t[r]));return e}function V_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Kte="mark",Xte="frame",Qte="scope",QHt="axis",JHt="axis-domain",ZHt="axis-grid",eqt="axis-label",tqt="axis-tick",nqt="axis-title",rqt="legend",iqt="legend-band",sqt="legend-entry",oqt="legend-gradient",LLe="legend-label",aqt="legend-symbol",uqt="legend-title",lqt="title",cqt="title-text",fqt="title-subtitle";function dqt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!V_(u,e)&&z9(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Xte?i.group:n===Kte?yn({},i.mark,i[t]):null;for(u in c)l=V_(u,e)||(u==="fill"||u==="stroke")&&(V_("fill",e)||V_("stroke",e)),l||z9(s,u,c[u]);ht(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)V_(h,e)||z9(s,h,d[h])}),e=yn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=yn(o,e.enter),a&&(e.update=yn(a,e.update)),e}function z9(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const FLe=e=>pt(e)?nt(e):e.signal?`(${e.signal})`:jLe(e);function y4(e){if(e.gradient!=null)return pqt(e);let t=e.signal?`(${e.signal})`:e.color?hqt(e.color):e.field!=null?jLe(e.field):e.value!==void 0?nt(e.value):void 0;return e.scale!=null&&(t=mqt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${OD(e.exponent)})`),e.mult!=null&&(t+=`*${OD(e.mult)}`),e.offset!=null&&(t+=`+${OD(e.offset)}`),e.round&&(t=`round(${t})`),t}const uP=(e,t,n,r)=>`(${e}(${[t,n,r].map(y4).join(",")})+'')`;function hqt(e){return e.c?uP("hcl",e.h,e.c,e.l):e.h||e.s?uP("hsl",e.h,e.s,e.l):e.l||e.a?uP("lab",e.l,e.a,e.b):e.r||e.g||e.b?uP("rgb",e.r,e.g,e.b):null}function pqt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:nt(n));for(;t.length&&Xn(t)==null;)t.pop();return t.unshift(FLe(e.gradient)),`gradient(${t.join(",")})`}function OD(e){return mt(e)?"("+y4(e)+")":e}function jLe(e){return BLe(mt(e)?e:{datum:e})}function BLe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Me("Invalid field reference: "+nt(e));return e.signal||(r=pt(r)?Gh(r).map(nt).join("]["):BLe(r)),t+"["+r+"]"}function mqt(e,t){const n=FLe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+OD(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function gqt(e){let t="";return e.forEach(n=>{const r=y4(n);t+=n.test?`(${n.test})?${r}:`:r}),Xn(t)===":"&&(t+="null"),t}function ULe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=dqt(e,t,n,r,i.config);for(const a in e)o[a]=yqt(e[a],t,s,i);return s}function yqt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=bqt(vqt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function vqt(e){return je(e)?gqt(e):y4(e)}function bqt(e,t,n,r){const i=kh(e,t);return i.$fields.forEach(s=>r[s]=1),yn(n,i.$params),i.$expr}const _qt="outer",wqt=["value","update","init","react","bind"];function gme(e,t){Me(e+' for "outer" push: '+nt(t))}function zLe(e,t){const n=e.name;if(e.push===_qt)t.signals[n]||gme("No prior signal definition",n),wqt.forEach(r=>{e[r]!==void 0&&gme("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function vH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function v4(e,t,n,r){return new vH(e,t,n,r)}function sM(e,t){return v4("operator",e,t)}function $t(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function dI(e,t){return t?{$field:e,$name:t}:{$field:e}}const bH=dI("key");function yme(e,t){return{$compare:e,$order:t}}function Eqt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const xqt="ascending",Sqt="descending";function Tqt(e){return mt(e)?(e.order===Sqt?"-":"+")+b4(e.op,e.field):""}function b4(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const Jte="scope",_H="view";function Ls(e){return e&&e.signal}function Aqt(e){return e&&e.expr}function $D(e){if(Ls(e))return!0;if(mt(e)){for(const t in e)if($D(e[t]))return!0}return!1}function df(e,t){return e??t}function y1(e){return e&&e.signal||e}const vme="timer";function hI(e,t){return(e.merge?Iqt:e.stream?kqt:e.type?Rqt:Me("Invalid stream specification: "+nt(e)))(e,t)}function Cqt(e){return e===Jte?_H:e||_H}function Iqt(e,t){const n=e.merge.map(i=>hI(i,t)),r=Zte({merge:n},e,t);return t.addStream(r).id}function kqt(e,t){const n=hI(e.stream,t),r=Zte({stream:n},e,t);return t.addStream(r).id}function Rqt(e,t){let n;e.type===vme?(n=t.event(vme,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Cqt(e.source),e.type);const r=Zte({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Zte(e,t,n){let r=t.between;return r&&(r.length!==2&&Me('Stream "between" parameter must have 2 entries: '+nt(t)),e.between=[hI(r[0],n),hI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Nqt(t.marktype,t.markname,t.markrole)),t.source===Jte&&r.push("inScope(event.item)"),r.length&&(e.filter=kh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Nqt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Pqt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Dqt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Me("Signal update missing events specification."),pt(s)&&(s=jy(s,t.isSubscope()?Jte:_H)),s=ht(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[$qt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Me("Signal encode and update are mutually exclusive."),o="encode(item(),"+nt(r)+")"),i.update=pt(o)?kh(o,t):o.expr!=null?kh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Pqt,$params:{$value:t.signalRef(o.signal)}}:Me("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(yn(Oqt(u,t),i)))}function Oqt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):hI(e,t)}}function $qt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Mqt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Me("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=kh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Dqt(i,t,n.id))}const Br=e=>(t,n,r)=>v4(e,n,t||void 0,r),VLe=Br("aggregate"),Lqt=Br("axisticks"),HLe=Br("bound"),nd=Br("collect"),bme=Br("compare"),Fqt=Br("datajoin"),qLe=Br("encode"),jqt=Br("expression"),Bqt=Br("facet"),Uqt=Br("field"),zqt=Br("key"),Vqt=Br("legendentries"),Hqt=Br("load"),qqt=Br("mark"),Wqt=Br("multiextent"),Gqt=Br("multivalues"),Yqt=Br("overlap"),Kqt=Br("params"),WLe=Br("prefacet"),Xqt=Br("projection"),Qqt=Br("proxy"),Jqt=Br("relay"),GLe=Br("render"),Zqt=Br("scale"),zb=Br("sieve"),eWt=Br("sortitems"),YLe=Br("viewlayout"),tWt=Br("values");let nWt=0;const KLe={min:"min",max:"max",count:"sum"};function rWt(e,t){const n=e.type||"linear";$3e(n)||Me("Unrecognized scale type: "+nt(n)),t.addScale(e.name,{type:n,domain:void 0})}function iWt(e,t){const n=t.getScale(e.name).params;let r;n.domain=XLe(e.domain,e,t),e.range!=null&&(n.range=JLe(e,t,n)),e.interpolate!=null&&pWt(e.interpolate,n),e.nice!=null&&(n.nice=hWt(e.nice,t)),e.bins!=null&&(n.bins=dWt(e.bins,t));for(r in e)Ft(n,r)||r==="name"||(n[r]=bc(e[r],t))}function bc(e,t){return mt(e)?e.signal?t.signalRef(e.signal):Me("Unsupported object: "+nt(e)):e}function MD(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>bc(n,t))}function _4(e){Me("Can not find data set: "+nt(e))}function XLe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Me("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(je(e)?sWt:e.fields?aWt:oWt)(e,t,n)}function sWt(e,t,n){return e.map(r=>bc(r,n))}function oWt(e,t,n){const r=n.getData(e.data);return r||_4(e.data),tx(t.type)?r.valuesRef(n,e.field,QLe(e.sort,!1)):F3e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function aWt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=pt(o)?{data:r,field:o}:je(o)||o.signal?uWt(o,n):o,s.push(o),s),[]);return(tx(t.type)?lWt:F3e(t.type)?cWt:fWt)(e,n,i)}function uWt(e,t){const n="_:vega:_"+nWt++,r=nd({});if(je(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+nt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,zb({})]),{data:n,field:"data"}}function lWt(e,t,n){const r=QLe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||_4(l.data),c.countsRef(t,l.field,r)}),a={groupby:bH,pulse:o};r&&(i=r.op||"count",s=r.field?b4(i,r.field):"count",a.ops=[KLe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(VLe(a));const u=t.add(nd({pulse:$t(i)}));return s=t.add(tWt({field:bH,sort:t.sortRef(r),pulse:$t(u)})),$t(s)}function QLe(e,t){return e&&(!e.field&&!e.op?mt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Me("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!KLe[e.op]&&Me("Multiple domain scales can not be sorted using "+e.op)),e}function cWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||_4(i.data),s.domainRef(t,i.field)});return $t(t.add(Gqt({values:r})))}function fWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||_4(i.data),s.extentRef(t,i.field)});return $t(t.add(Wqt({extents:r})))}function dWt(e,t){return e.signal||je(e)?MD(e,t):t.objectProperty(e)}function hWt(e,t){return e.signal?t.signalRef(e.signal):mt(e)?{interval:bc(e.interval),step:bc(e.step)}:bc(e)}function pWt(e,t){t.interpolate=bc(e.type||e),e.gamma!=null&&(t.interpolateGamma=bc(e.gamma))}function JLe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(pt(i)){if(r&&Ft(r,i))return e=yn({},e,{range:r[i]}),JLe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=tx(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Me("Unrecognized scale range value: "+nt(i))}else if(i.scheme){n.scheme=je(i.scheme)?MD(i.scheme,t):bc(i.scheme,t),i.extent&&(n.schemeExtent=MD(i.extent,t)),i.count&&(n.schemeCount=bc(i.count,t));return}else if(i.step){n.rangeStep=bc(i.step,t);return}else{if(tx(e.type)&&!je(i))return XLe(i,e,t);je(i)||Me("Unsupported range type: "+nt(i))}return i.map(s=>(je(s)?MD:bc)(s,t))}function mWt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=wH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=wH(n[i],i,t));t.addProjection(e.name,r)}function wH(e,t,n){return je(e)?e.map(r=>wH(r,t,n)):mt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Me("Unsupported parameter object: "+nt(e)):e}const rd="top",kS="left",RS="right",oy="bottom",ZLe="center",gWt="vertical",yWt="start",vWt="middle",bWt="end",EH="index",ene="label",_Wt="offset",ox="perc",wWt="perc2",xc="value",sR="guide-label",tne="guide-title",EWt="group-title",xWt="group-subtitle",_me="symbol",LD="gradient",xH="discrete",SH="size",SWt="shape",TWt="fill",AWt="stroke",CWt="strokeWidth",IWt="strokeDash",kWt="opacity",nne=[SH,SWt,TWt,AWt,CWt,IWt,kWt],oR={name:1,style:1,interactive:1},er={value:0},Sc={value:1},w4="group",e6e="rect",rne="rule",RWt="symbol",Vb="text";function pI(e){return e.type=w4,e.interactive=e.interactive||!1,e}function il(e,t){const n=(r,i)=>df(e[r],df(t[r],i));return n.isVertical=r=>gWt===df(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>df(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>df(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>df(e.columns,df(t.columns,+n.isVertical(!0))),n}function t6e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function NWt(e,t,n){const r=t.config.style[n];return r&&r[e]}function E4(e,t,n){return`item.anchor === '${yWt}' ? ${e} : item.anchor === '${bWt}' ? ${t} : ${n}`}const ine=E4(nt(kS),nt(RS),nt(ZLe));function PWt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},mt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function n6e(e,t){return t?e?mt(e)?Object.assign({},e,{offset:n6e(e.offset,t)}):{value:e,offset:t}:t:e}function zl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=IS(e.encode,t,oR)):e.interactive=!1,e}function DWt(e,t,n,r){const i=il(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:er,x:er,y:er,width:so(f),height:so(d)},update:yn({},u,{opacity:Sc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:er}};return Lo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),zl({type:e6e,role:oqt,encode:h},r)}function OWt(e,t,n,r,i){const s=il(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:er,fill:{scale:t,field:xc}};p[l]={signal:h+"datum."+ox,mult:u},p[c]=er,p[f]={signal:h+"datum."+wWt,mult:u},p[d]=so(a);const m={enter:p,update:yn({},p,{opacity:Sc}),exit:{opacity:er}};return Lo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),zl({type:e6e,role:iqt,key:xc,from:i,encode:m},r)}const $Wt=`datum.${ox}<=0?"${kS}":datum.${ox}>=1?"${RS}":"${ZLe}"`,MWt=`datum.${ox}<=0?"${oy}":datum.${ox}>=1?"${rd}":"${vWt}"`;function wme(e,t,n,r){const i=il(e,t),s=i.isVertical(),o=so(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:er},update:c={opacity:Sc,text:{field:ene}},exit:{opacity:er}};return Lo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:df(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:MWt},f="y",d="x",h="1-"):(l.align=c.align={signal:$Wt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+ox,mult:a},l[d]=c[d]=o,o.offset=df(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+EH}:void 0,zl({type:Vb,role:LLe,style:sR,key:xc,from:r,encode:p,overlap:u},n)}function LWt(e,t,n,r,i){const s=il(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${_Wt} : datum.${SH}`,h=l?so(l):{field:SH},p=`datum.${EH}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:er,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Sc,x:y.x,y:y.y},exit:{opacity:er}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Lo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),nne.forEach(I=>{e[I]&&(v[I]=y[I]={scale:e[I],field:xc})});const T=zl({type:RWt,role:aqt,key:xc,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=so(c);A.offset=s("labelOffset"),g={enter:y={opacity:er,x:{signal:d,offset:A},y:h},update:v={opacity:Sc,text:{field:ene},x:y.x,y:y.y},exit:{opacity:er}},Lo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const C=zl({type:Vb,role:LLe,style:sR,key:xc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:er,height:l?so(l):er,opacity:er},exit:{opacity:er},update:v={opacity:Sc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:EH}},pI({role:Qte,from:r,encode:IS(g,o,oR),marks:[T,C],name:u,interactive:a,sort:w})}function FWt(e,t){const n=il(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const sne='item.orient === "left"',one='item.orient === "right"',x4=`(${sne} || ${one})`,jWt=`datum.vgrad && ${x4}`,BWt=E4('"top"','"bottom"','"middle"'),UWt=E4('"right"','"left"','"center"'),zWt=`datum.vgrad && ${one} ? (${UWt}) : (${x4} && !(datum.vgrad && ${sne})) ? "left" : ${ine}`,VWt=`item._anchor || (${x4} ? "middle" : "start")`,HWt=`${jWt} ? (${sne} ? -90 : 90) : 0`,qWt=`${x4} ? (datum.vgrad ? (${one} ? "bottom" : "top") : ${BWt}) : "top"`;function WWt(e,t,n,r){const i=il(e,t),s={enter:{opacity:er},update:{opacity:Sc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:er}};return Lo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:VWt},angle:{signal:HWt},align:{signal:zWt},baseline:{signal:qWt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),zl({type:Vb,role:uqt,style:tne,from:r,encode:s},n)}function GWt(e,t){let n;return mt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Eme(e.path)+")":e.sphere&&(n="geoShape("+Eme(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Eme(e){return mt(e)&&e.signal?e.signal:nt(e)}function r6e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===w4?Qte:t||Kte}function YWt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||r6e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function KWt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function ane(e,t){const n=zOe(e.type);n||Me("Unrecognized transform type: "+nt(e.type));const r=v4(n.type.toLowerCase(),null,i6e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function i6e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=XWt(o,t,n)}return r}function XWt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return QWt(e,t,n);if(i===void 0){e.required&&Me("Missing required "+nt(t.type)+" parameter: "+nt(e.name));return}else{if(r==="param")return JWt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Ls(i)?i.map(s=>xme(e,s,n)):xme(e,i,n)}function xme(e,t,n){const r=e.type;if(Ls(t))return Tme(r)?Me("Expression references can not be signals."):V9(r)?n.fieldRef(t):Ame(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||V9(r);return i&&ZWt(t)?n.exprRef(t.expr,t.as):i&&eGt(t)?dI(t.field,t.as):Tme(r)?kh(t,n):tGt(r)?$t(n.getData(t).values):V9(r)?dI(t):Ame(r)?n.compareRef(t):t}}function QWt(e,t,n){return pt(t.from)||Me('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function JWt(e,t,n){const r=t[e.name];return e.array?(je(r)||Me("Expected an array of sub-parameters. Instead: "+nt(r)),r.map(i=>Sme(e,i,n))):Sme(e,r,n)}function Sme(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Me("Unsupported parameter: "+nt(t));const s=yn(i6e(i,t,n),i.key);return $t(n.add(Kqt(s)))}const ZWt=e=>e&&e.expr,eGt=e=>e&&e.field,tGt=e=>e==="data",Tme=e=>e==="expr",V9=e=>e==="field",Ame=e=>e==="compare";function nGt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Me("Only group marks can be faceted."),r.field!=null?o=a=FD(r,n):(e.data?a=$t(n.getData(e.data).aggregate):(s=ane(yn({type:"aggregate",groupby:ht(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=FD(r,n),o=a=$t(n.add(s))),i=n.keyRef(r.groupby,!0))):o=$t(n.add(nd(null,[{}]))),o||(o=FD(e,n)),{key:i,pulse:o,parent:a}}function FD(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$t(t.getData(e.data).output)}function rb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}rb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=$t(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new rb(e,s,i,r,o)};function s6e(e){return pt(e)?e:null}function Cme(e,t,n){const r=b4(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function $T(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Tqt(s);let l=s6e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:bH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:$t(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(v4(r,void 0,d)),o&&(t.index[i]=f),c=$t(f),l!=null&&(a[l]=c)}return c}rb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=s6e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Cme(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:$t(r.output)},n&&n.field&&Cme(e,u,n),a=e.add(VLe(u)),o=e.add(nd({pulse:$t(a)})),o={agg:a,ref:$t(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return $t(this.values)},extentRef(e,t){return $T(e,this,"extent","extent",t,!1)},domainRef(e,t){return $T(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return $T(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return $T(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return $T(e,this,"indata","tupleindex",t,!0,!0)}};function rGt(e,t,n){const r=e.from.facet,i=r.name,s=FD(r,t);let o;r.name||Me("Facet must have a name: "+nt(r)),r.data||Me("Facet must reference a data set: "+nt(r)),r.field?o=t.add(WLe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Bqt({key:t.keyRef(r.groupby),group:$t(t.proxy(n.parent)),pulse:s})):Me("Facet must specify groupby or field: "+nt(r));const a=t.fork(),u=a.add(nd()),l=a.add(zb({pulse:$t(u)}));a.addData(i,new rb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function iGt(e,t,n){const r=t.add(WLe({pulse:n.pulse})),i=t.fork();i.add(zb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function o6e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(sM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=kh(l,t);u.update=c.$expr,u.params=c.$params}function S4(e,t){const n=r6e(e),r=e.type===w4,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Qte||n===Xte,a,u,l,c,f,d,h;const p=n===Kte||o||i,m=nGt(e.from,r,t);u=t.add(Fqt({key:m.key||(e.key?dI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=$t(u);u=l=t.add(nd({pulse:g})),u=t.add(qqt({markdef:YWt(e),interactive:KWt(e.interactive,t),clip:GWt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$t(u)}));const y=$t(u);u=c=t.add(qLe(ULe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const T=ane(S,t),A=T.metadata;(A.generates||A.changes)&&Me("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),T.params.pulse=$t(u),t.add(u=T)}),e.sort&&(u=t.add(eWt({sort:t.compareRef(e.sort),pulse:$t(u)})));const v=$t(u);(i||o)&&(o=t.add(YLe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=$t(o));const b=t.add(HLe({mark:y,pulse:d||v}));h=$t(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?rGt(e,t,m):p?iGt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=sGt(s,h,t));const w=t.add(GLe({pulse:h})),E=t.add(zb({pulse:$t(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new rb(t,l,w,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Me("Marks only support modify triggers."),o6e(S,t,f)}))}function sGt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Ls(s)?n.signalRef(s.signal):s,method:Ls(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Ls(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return $t(n.add(Yqt(o)))}function oGt(e,t){const n=t.config.legend,r=e.encode||{},i=il(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;nne.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Me("Missing valid scale for legend.");const p=aGt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=$t(t.add(nd(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=$t(t.add(Vqt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===LD?(h=[DWt(e,c,n,r.gradient),wme(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${y1(i.gradientLength())})/100))`)):p===xH?h=[OWt(e,c,n,r.gradient,v),wme(e,n,r.labels,v)]:(f=FWt(e,n),h=[LWt(e,n,r,v,y1(f.columns))],d.size=cGt(e,t,h[0].marks)),h=[pI({role:sqt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(WWt(e,n,r.title,g)),S4(pI({role:rqt,from:g,encode:IS(lGt(i,e,n),s,oR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function aGt(e,t){let n=e.type||_me;return!e.type&&uGt(e)===1&&(e.fill||e.stroke)&&(n=vee(t)?LD:FV(t)?xH:_me),n!==LD?n:FV(t)?xH:LD}function uGt(e){return nne.reduce((t,n)=>t+(e[n]?1:0),0)}function lGt(e,t,n){const r={enter:{},update:{}};return Lo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function cGt(e,t,n){const r=y1(Ime("size",e,n)),i=y1(Ime("strokeWidth",e,n)),s=y1(fGt(n[1].encode,t,sR));return kh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Ime(e,t,n){return t[e]?`scale("${t[e]}",datum)`:t6e(e,n[0].encode)}function fGt(e,t,n){return t6e("fontSize",e)||NWt("fontSize",t,n)}const dGt=`item.orient==="${kS}"?-90:item.orient==="${RS}"?90:0`;function hGt(e,t){e=pt(e)?{text:e}:e;const n=il(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=$t(t.add(nd(null,[l])));return u.push(gGt(e,n,pGt(e),c)),e.subtitle&&u.push(yGt(e,n,r.subtitle,c)),S4(pI({role:lqt,from:c,encode:mGt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function pGt(e){const t=e.encode;return t&&t.title||yn({name:e.name,interactive:e.interactive,style:e.style},t)}function mGt(e,t){const n={enter:{},update:{}};return Lo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:ine},angle:{signal:dGt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),IS(n,t,oR)}function gGt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Lo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),zl({type:Vb,role:cqt,style:EWt,from:r,encode:o},n)}function yGt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Lo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),zl({type:Vb,role:fqt,style:xWt,from:r,encode:o},n)}function vGt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(ane(r,t))}),e.on&&e.on.forEach(r=>{o6e(r,t,e.name)}),t.addDataPipeline(e.name,bGt(e,t,n))}function bGt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Ls(e.values)||$D(e.format)?(r.push(kme(t,e)),r.push(i=nv())):r.push(i=nv({$ingest:e.values,$format:e.format})):e.url?$D(e.url)||$D(e.format)?(r.push(kme(t,e)),r.push(i=nv())):r.push(i=nv({$request:e.url,$format:e.format})):e.source&&(i=a=ht(e.source).map(d=>$t(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=nv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=Jqt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,nv())),i||r.push(nv()),r.push(zb({})),r}function nv(e){const t=nd({},e);return t.metadata={source:!0},t}function kme(e,t){return Hqt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const a6e=e=>e===oy||e===rd,T4=(e,t,n)=>Ls(e)?xGt(e.signal,t,n):e===kS||e===rd?t:n,oo=(e,t,n)=>Ls(e)?wGt(e.signal,t,n):a6e(e)?t:n,Mf=(e,t,n)=>Ls(e)?EGt(e.signal,t,n):a6e(e)?n:t,u6e=(e,t,n)=>Ls(e)?SGt(e.signal,t,n):e===rd?{value:t}:{value:n},_Gt=(e,t,n)=>Ls(e)?TGt(e.signal,t,n):e===RS?{value:t}:{value:n},wGt=(e,t,n)=>l6e(`${e} === '${rd}' || ${e} === '${oy}'`,t,n),EGt=(e,t,n)=>l6e(`${e} !== '${rd}' && ${e} !== '${oy}'`,t,n),xGt=(e,t,n)=>une(`${e} === '${kS}' || ${e} === '${rd}'`,t,n),SGt=(e,t,n)=>une(`${e} === '${rd}'`,t,n),TGt=(e,t,n)=>une(`${e} === '${RS}'`,t,n),l6e=(e,t,n)=>(t=t!=null?so(t):t,n=n!=null?so(n):n,Rme(t)&&Rme(n)?(t=t?t.signal||nt(t.value):null,n=n?n.signal||nt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[yn({test:e},t)].concat(n||[])),Rme=e=>e==null||Object.keys(e).length===1,une=(e,t,n)=>({signal:`${e} ? (${mw(t)}) : (${mw(n)})`}),AGt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${kS}' ? (${mw(r)}) : `:"")+(n!=null?`${e} === '${oy}' ? (${mw(n)}) : `:"")+(i!=null?`${e} === '${RS}' ? (${mw(i)}) : `:"")+(t!=null?`${e} === '${rd}' ? (${mw(t)}) : `:"")+"(null)"}),mw=e=>Ls(e)?e.signal:e==null?null:nt(e),CGt=(e,t)=>t===0?0:Ls(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Xw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function T_(e,t,n,r){let i;if(t&&Ft(t,e))return t[e];if(Ft(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[tne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[sR][i]}return null}function Nme(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function IGt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Ls(o)){const f=Nme([n.axisX,n.axisY]),d=Nme([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=oo(o,T_(l,n.axisX,i,r),T_(l,n.axisY,i,r));u={};for(l of d)u[l]=AGt(o.signal,T_(l,n.axisTop,i,r),T_(l,n.axisBottom,i,r),T_(l,n.axisLeft,i,r),T_(l,n.axisRight,i,r))}else a=o===rd||o===oy?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?yn({},i,a,u,s):i}function kGt(e,t,n,r){const i=il(e,t),s=e.orient;let o,a;const u={enter:o={opacity:er},update:a={opacity:Sc},exit:{opacity:er}};Lo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Pme(e,0),c=Pme(e,1);return o.x=a.x=oo(s,l,er),o.x2=a.x2=oo(s,c),o.y=a.y=Mf(s,l,er),o.y2=a.y2=Mf(s,c),zl({type:rne,role:JHt,from:r,encode:u},n)}function Pme(e,t){return{scale:e.scale,range:t}}function RGt(e,t,n,r,i){const s=il(e,t),o=e.orient,a=e.gridScale,u=T4(o,1,-1),l=NGt(e.offset,u);let c,f,d;const h={enter:c={opacity:er},update:d={opacity:Sc},exit:f={opacity:er}};Lo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:xc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=oo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:yn(m,{mult:u,offset:l});return c.x=d.x=oo(o,p,g),c.y=d.y=Mf(o,p,g),c.x2=d.x2=Mf(o,y),c.y2=d.y2=oo(o,y),f.x=oo(o,p),f.y=Mf(o,p),zl({type:rne,role:ZHt,key:xc,from:r,encode:h},n)}function NGt(e,t){if(t!==1)if(!mt(e))e=Ls(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=yn({},e);for(;n.mult!=null;)if(mt(n.mult))n=n.mult=yn({},n.mult);else return n.mult=Ls(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function PGt(e,t,n,r,i,s){const o=il(e,t),a=e.orient,u=T4(a,-1,1);let l,c,f;const d={enter:l={opacity:er},update:f={opacity:Sc},exit:c={opacity:er}};Lo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=so(i);h.mult=u;const p={scale:e.scale,field:xc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=oo(a,er,p),f.y2=l.y2=oo(a,h),c.x=oo(a,p),f.x=l.x=Mf(a,er,p),f.x2=l.x2=Mf(a,h),c.y=Mf(a,p),zl({type:rne,role:tqt,key:xc,from:r,encode:d},n)}function H9(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function DGt(e,t,n,r,i,s){const o=il(e,t),a=e.orient,u=e.scale,l=T4(a,-1,1),c=y1(o("labelFlush")),f=y1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=so(i);g.mult=l,g.offset=so(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:xc,band:.5,offset:n6e(s.offset,o("labelOffset"))},v=oo(a,p?H9(u,c,'"left"','"right"','"center"'):{value:"center"},_Gt(a,"left","right")),b=oo(a,u6e(a,"bottom","top"),p?H9(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=H9(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:er,x:oo(a,y,g),y:Mf(a,y,g)},S={enter:E,update:m={opacity:Sc,text:{field:ene},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:er,x:E.x,y:E.y}};Lo(S,{dx:!d&&p?oo(a,w):null,dy:!h&&p?Mf(a,w):null}),Lo(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const T=o("labelBound");let A=o("labelOverlap");return A=A||T?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:T?{scale:u,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=Xw(m.align,v)),m.baseline!==b&&(m.baseline=Xw(m.baseline,b)),zl({type:Vb,role:eqt,style:sR,key:xc,from:r,encode:S,overlap:A},n)}function OGt(e,t,n,r){const i=il(e,t),s=e.orient,o=T4(s,-1,1);let a,u;const l={enter:a={opacity:er,anchor:so(i("titleAnchor",null)),align:{signal:ine}},update:u=yn({},a,{opacity:Sc,text:so(e.title)}),exit:{opacity:er}},c={signal:`lerp(range("${e.scale}"), ${E4(0,1,.5)})`};return u.x=oo(s,c),u.y=Mf(s,c),a.angle=oo(s,er,CGt(o,90)),a.baseline=oo(s,u6e(s,oy,rd),{value:oy}),u.angle=a.angle,u.baseline=a.baseline,Lo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),$Gt(i,s,l,n),l.update.align=Xw(l.update.align,a.align),l.update.angle=Xw(l.update.angle,a.angle),l.update.baseline=Xw(l.update.baseline,a.baseline),zl({type:Vb,role:nqt,style:tne,from:r,encode:l},n)}function $Gt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Xw(so(a),n.update[u]),!1):!V_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?so(o):oo(t,so(o),so(s))}function MGt(e,t){const n=IGt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=il(e,n),l=PWt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=$t(t.add(nd({},[c]))),d=$t(t.add(Lqt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(RGt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(PGt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(DGt(e,n,r.labels,d,p,l))),c.domain&&h.push(kGt(e,n,r.domain,f)),c.title&&h.push(OGt(e,n,r.title,f)),S4(pI({role:QHt,from:f,encode:IS(LGt(u,e),i,oR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function LGt(e,t){const n={enter:{},update:{}};return Lo(n,{orient:e("orient"),offset:e("offset")||0,position:df(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function c6e(e,t,n){const r=ht(e.signals),i=ht(e.scales);return n||r.forEach(s=>zLe(s,t)),ht(e.projections).forEach(s=>mWt(s,t)),i.forEach(s=>rWt(s,t)),ht(e.data).forEach(s=>vGt(s,t)),i.forEach(s=>iWt(s,t)),(n||r).forEach(s=>Mqt(s,t)),ht(e.axes).forEach(s=>MGt(s,t)),ht(e.marks).forEach(s=>S4(s,t)),ht(e.legends).forEach(s=>oGt(s,t)),e.title&&hGt(e.title,t),t.parseLambdas(),t}const FGt=e=>IS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function jGt(e,t){const n=t.config,r=$t(t.root=t.add(sM())),i=BGt(e,n);i.forEach(l=>zLe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(nd()),o=t.add(qLe(ULe(FGt(e.encode),w4,Xte,e.style,t,{pulse:$t(s)}))),a=t.add(YLe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:$t(o)}));t.operators.pop(),t.pushState($t(o),$t(a),null),c6e(e,t,i),t.operators.push(a);let u=t.add(HLe({mark:r,pulse:$t(a)}));return u=t.add(GLe({pulse:$t(u)})),u=t.add(zb({pulse:$t(u)})),t.addData("root",new rb(t,s,s,u)),t}function MT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function BGt(e,t){const n=o=>df(e[o],t[o]),r=[MT("background",n("background")),MT("autosize",YHt(n("autosize"))),MT("padding",XHt(n("padding"))),MT("width",n("width")||0),MT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return ht(e.signals).forEach(o=>{Ft(i,o.name)?o=yn(i[o.name],o):r.push(o),s[o.name]=o}),ht(t.signals).forEach(o=>{!Ft(s,o.name)&&!Ft(i,o.name)&&r.push(o)}),r}function f6e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Dme(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}f6e.prototype=Dme.prototype={parse(e){return c6e(e,this)},fork(){return new Dme(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof vH?$t(e):e;return this.add(Qqt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push($t(this.add(zb({pulse:e})))),this._parent.push(t),this._lookup.push(n?$t(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Xn(this._parent)},encode(){return Xn(this._encode)},lookup(){return Xn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(pt(e))return dI(e,t);e.signal||Me("Unsupported field reference: "+nt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=$t(this.add(Uqt(i)))}return r},compareRef(e){let t=!1;const n=s=>Ls(s)?(t=!0,this.signalRef(s.signal)):Aqt(s)?(t=!0,this.exprRef(s.expr)):s,r=ht(e.field).map(n),i=ht(e.order).map(n);return t?$t(this.add(bme({fields:r,orders:i}))):yme(r,i)},keyRef(e,t){let n=!1;const r=s=>Ls(s)?(n=!0,$t(i[s.signal])):s,i=this.signals;return e=ht(e).map(r),n?$t(this.add(zqt({fields:e,flat:t}))):Eqt(e,t)},sortRef(e){if(!e)return e;const t=b4(e.op,e.field),n=e.order||xqt;return n.signal?$t(this.add(bme({fields:t,orders:this.signalRef(n.signal)}))):yme(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ft(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Me("Duplicate signal name: "+nt(e));const n=t instanceof vH?t:this.add(sM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Me("Unrecognized signal name: "+nt(e)),this.signals[e]},signalRef(e){return this.signals[e]?$t(this.signals[e]):(Ft(this.lambdas,e)||(this.lambdas[e]=this.add(sM(null))),$t(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=kh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!mt(e)?e:this.signalRef(e.signal||lne(e))},exprRef(e,t){const n={expr:kh(e,this)};return t&&(n.expr.$name=t),$t(this.add(jqt(n)))},addBinding(e,t){this.bindings||Me("Nested signals do not support binding: "+nt(e)),this.bindings.push(yn({signal:e},t))},addScaleProj(e,t){Ft(this.scales,e)&&Me("Duplicate scale or projection name: "+nt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Zqt(t))},addProjection(e,t){this.addScaleProj(e,Xqt(t))},getScale(e){return this.scales[e]||Me("Unrecognized scale name: "+nt(e)),this.scales[e]},scaleRef(e){return $t(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+nt(e)),this.data[e]=t},getData(e){return this.data[e]||Me("Undefined data set name: "+nt(e)),this.data[e]},addDataPipeline(e,t){return Ft(this.data,e)&&Me("Duplicate data set name: "+nt(e)),this.addData(e,rb.fromEntries(this,t))}};function lne(e){return(je(e)?UGt:zGt)(e)}function UGt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(mt(i)?i.signal||lne(i):nt(i))}return n+"]"}function zGt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+nt(r)+":"+(mt(i)?i.signal||lne(i):nt(i));return t+"}"}function VGt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function HGt(e,t,n){return mt(e)||Me("Input Vega specification must be an object."),t=_S(VGt(),t,e.config),jGt(e,new f6e(t,n)).toRuntime()}var qGt="5.29.0";yn(JE,H4t,P9t,cBt,UBt,YBt,wUt,eUt,xUt,CUt,LUt,HUt);const WGt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Es,CanvasHandler:eR,CanvasRenderer:G$,DATE:Ju,DAY:la,DAYOFYEAR:Ih,Dataflow:Kw,Debug:MDe,Error:rZ,EventStream:UF,Gradient:Z3e,GroupItem:e4,HOURS:jl,Handler:Vee,HybridHandler:H$e,HybridRenderer:KV,Info:$De,Item:ZF,MILLISECONDS:Wf,MINUTES:Bl,MONTH:pa,Marks:Ul,MultiPulse:xZ,None:ODe,Operator:Wr,Parameters:BF,Pulse:x0,QUARTER:Qu,RenderType:Qg,Renderer:Zk,ResourceLoader:o$e,SECONDS:Dc,SVGHandler:N$e,SVGRenderer:Kee,SVGStringRenderer:V$e,Scenegraph:x$e,TIME_UNITS:mZ,Transform:Pe,View:kLe,WEEK:Ds,Warn:iZ,YEAR:Do,accessor:rl,accessorFields:ha,accessorName:Yi,array:ht,ascending:OF,bandwidthNRD:CZ,bin:qOe,bootstrapCI:WOe,boundClip:eMe,boundContext:Kk,boundItem:HV,boundMark:b$e,boundStroke:Zm,changeset:jb,clampRange:GDe,codegenExpression:nLe,compare:lZ,constant:wa,cumulativeLogNormal:DZ,cumulativeNormal:VF,cumulativeUniform:LZ,dayofyear:sOe,debounce:cZ,defaultLocale:vZ,definition:zOe,densityLogNormal:PZ,densityNormal:IZ,densityUniform:MZ,domChild:Ns,domClear:hc,domCreate:Kg,domFind:zee,dotbin:GOe,error:Me,expressionFunction:fs,extend:yn,extent:Ch,extentIndex:YDe,falsy:bg,fastmap:ES,field:Nc,flush:KDe,font:s4,fontFamily:Jk,fontSize:Yh,format:bD,formatLocale:O$,formats:wZ,hasOwnProperty:Ft,id:Lk,identity:_a,inferType:NOe,inferTypes:POe,ingest:_r,inherits:lt,inrange:dw,interpolate:bee,interpolateColors:QF,interpolateRange:j3e,intersect:X$e,intersectBoxLine:hw,intersectPath:Cee,intersectPoint:Iee,intersectRule:u$e,isArray:je,isBoolean:Ly,isDate:E0,isFunction:vn,isIterable:XDe,isNumber:ur,isObject:mt,isRegExp:QDe,isString:pt,isTuple:FF,key:fZ,lerp:JDe,lineHeight:ry,loader:MF,locale:kOe,logger:sZ,lruCache:ZDe,markup:Yee,merge:eOe,mergeConfig:_S,multiLineOffset:jee,one:bS,pad:tOe,panLinear:UDe,panLog:zDe,panPow:VDe,panSymlog:HDe,parse:HGt,parseExpression:Mte,parseSelector:jy,path:KL,pathCurves:See,pathEqual:tMe,pathParse:nx,pathRectangle:n$e,pathRender:iI,pathSymbols:t$e,pathTrail:r$e,peek:Xn,point:a4,projection:ate,quantileLogNormal:OZ,quantileNormal:HF,quantileUniform:FZ,quantiles:TZ,quantizeInterpolator:B3e,quarter:qDe,quartiles:AZ,get random(){return Oc},randomInteger:YFt,randomKDE:RZ,randomLCG:GFt,randomLogNormal:KOe,randomMixture:XOe,randomNormal:kZ,randomUniform:QOe,read:$Oe,regressionConstant:jZ,regressionExp:ZOe,regressionLinear:BZ,regressionLoess:n3e,regressionLog:JOe,regressionPoly:t3e,regressionPow:e3e,regressionQuad:UZ,renderModule:u4,repeat:bA,resetDefaultLocale:H6t,resetSVGClipId:s$e,resetSVGDefIds:Xjt,responseType:OOe,runtimeContext:gLe,sampleCurve:WF,sampleLogNormal:NZ,sampleNormal:zF,sampleUniform:$Z,scale:mr,sceneEqual:Xee,sceneFromJSON:w$e,scenePickVisit:j$,sceneToJSON:_$e,sceneVisit:Gf,sceneZOrder:kee,scheme:_ee,serializeXML:j$e,setHybridRendererOptions:Wjt,setRandom:qFt,span:Fk,splitAccessPath:Gh,stringValue:nt,textMetrics:Al,timeBin:EOe,timeFloor:dOe,timeFormatLocale:tI,timeInterval:xS,timeOffset:mOe,timeSequence:vOe,timeUnitSpecifier:iOe,timeUnits:gZ,toBoolean:dZ,toDate:hZ,toNumber:ca,toSet:qf,toString:pZ,transform:VOe,transforms:JE,truncate:nOe,truthy:Pc,tupleid:Mt,typeParsers:$V,utcFloor:hOe,utcInterval:SS,utcOffset:gOe,utcSequence:bOe,utcdayofyear:uOe,utcquarter:WDe,utcweek:lOe,version:qGt,visitArray:Cg,week:oOe,writeConfig:wS,zero:Bg,zoomLinear:oZ,zoomLog:aZ,zoomPow:D$,zoomSymlog:uZ},Symbol.toStringTag,{value:"Module"}));function GGt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var YGt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},KGt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},XGt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const QGt=Array.prototype.slice,rv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,QGt.call(t,1))},JGt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var ZGt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:JGt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return rv("join",arguments)},indexof:function(){return rv("indexOf",arguments)},lastindexof:function(){return rv("lastIndexOf",arguments)},slice:function(){return rv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return rv("substring",arguments,String)},split:function(){return rv("split",arguments,String)},replace:function(){return rv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const eYt=["view","item","group","xy","x","y"],TH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&TH.add(setImmediate);const tYt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:YGt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),TH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||ZGt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>KGt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>XGt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,TH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function LT(e,t,n,r,i,s){const o=a=>tYt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,eYt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var nYt={operator(e,t){const n=t.ast,r=e.functions;return i=>LT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>LT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>LT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return LT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=LT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&GGt(o,r,s),l}}};const rYt="vega-lite",iYt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',sYt="5.18.1",oYt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],aYt="https://vega.github.io/vega-lite/",uYt="Vega-Lite is a concise high-level language for interactive visualization.",lYt=["vega","chart","visualization"],cYt="build/vega-lite.js",fYt="build/vega-lite.min.js",dYt="build/vega-lite.min.js",hYt="build/src/index",pYt="build/src/index.d.ts",mYt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},gYt=["bin","build","src","vega-lite*","tsconfig.json"],yYt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},vYt={type:"git",url:"https://github.com/vega/vega-lite.git"},bYt="BSD-3-Clause",_Yt={url:"https://github.com/vega/vega-lite/issues"},wYt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},EYt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},xYt={vega:"^5.24.0"},SYt={node:">=18"},TYt="yarn@1.22.19",AYt={name:rYt,author:iYt,version:sYt,collaborators:oYt,homepage:aYt,description:uYt,keywords:lYt,main:cYt,unpkg:fYt,jsdelivr:dYt,module:hYt,types:pYt,bin:mYt,files:gYt,scripts:yYt,repository:vYt,license:bYt,bugs:_Yt,devDependencies:wYt,dependencies:EYt,peerDependencies:xYt,engines:SYt,packageManager:TYt};function cne(e){return!!e.or}function fne(e){return!!e.and}function dne(e){return!!e.not}function jD(e,t){if(dne(e))jD(e.not,t);else if(fne(e))for(const n of e.and)jD(n,t);else if(cne(e))for(const n of e.or)jD(n,t);else t(e)}function Qw(e,t){return dne(e)?{not:Qw(e.not,t)}:fne(e)?{and:e.and.map(n=>Qw(n,t))}:cne(e)?{or:e.or.map(n=>Qw(n,t))}:t(e)}const tn=structuredClone;function d6e(e){throw new Error(e)}function ax(e,t){const n={};for(const r of t)Ft(e,r)&&(n[r]=e[r]);return n}function zu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Lr(e)).join(",")})`};function zn(e){if(ur(e))return e;const t=pt(e)?e:Lr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function AH(e){return e===!1||e===null}function Vn(e,t){return e.includes(t)}function ib(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function hne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function h6e(e,...t){for(const n of t)CYt(e,n??{});return e}function CYt(e,t){for(const n of Ye(t))wS(e,n,t[n],!0)}function Qd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function IYt(e,t){const n=Ye(e),r=Ye(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function p6e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function pne(e,t){for(const n of e)if(t.has(n))return!0;return!1}function CH(e){const t=new Set;for(const n of e){const i=Gh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function mne(e,t){return e===void 0||t===void 0?!0:pne(CH(e),CH(t))}function Mr(e){return Ye(e).length===0}const Ye=Object.keys,Oo=Object.values,ay=Object.entries;function mI(e){return e===!0||e===!1}function xi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function NC(e,t){return dne(e)?`!(${NC(e.not,t)})`:fne(e)?`(${e.and.map(n=>NC(n,t)).join(") && (")})`:cne(e)?`(${e.or.map(n=>NC(n,t)).join(") || (")})`:t(e)}function oM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&oM(e[n],t)&&delete e[n],Mr(e)}function aR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function gne(e,t="datum"){const n=Gh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(nt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function m6e(e,t="datum"){return`${t}[${nt(Gh(e).join("."))}]`}function kYt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function $c(e){return`${Gh(e).map(kYt).join("\\.")}`}function sb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function NS(e){return`${Gh(e).join(".")}`}function ux(e){return e?Gh(e).length:0}function us(...e){for(const t of e)if(t!==void 0)return t}let g6e=42;function y6e(e){const t=++g6e;return e?String(e)+t:t}function RYt(){g6e=42}function v6e(e){return b6e(e)?e:`__${e}`}function b6e(e){return e.startsWith("__")}function gI(e){if(e!==void 0)return(e%360+360)%360}function A4(e){return ur(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Ome=Object.getPrototypeOf(structuredClone({}));function Sl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Sl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Sl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Ome.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Ome.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Sl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Lr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const tm="row",nm="column",C4="facet",Si="x",po="y",id="x2",Qh="y2",By="xOffset",PS="yOffset",sd="radius",tg="radius2",Gc="theta",ng="theta2",od="latitude",ad="longitude",ud="latitude2",Mc="longitude2",Zu="color",Jh="fill",Zh="stroke",el="shape",rg="size",Hb="angle",ig="opacity",Uy="fillOpacity",zy="strokeOpacity",Vy="strokeWidth",Hy="strokeDash",uR="text",lx="order",lR="detail",I4="key",ob="tooltip",k4="href",R4="url",N4="description",NYt={x:1,y:1,x2:1,y2:1},_6e={theta:1,theta2:1,radius:1,radius2:1};function w6e(e){return e in _6e}const yne={longitude:1,longitude2:1,latitude:1,latitude2:1};function E6e(e){switch(e){case od:return"y";case ud:return"y2";case ad:return"x";case Mc:return"x2"}}function x6e(e){return e in yne}const PYt=Ye(yne),vne={...NYt,..._6e,...yne,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Jw(e){return e===Zu||e===Jh||e===Zh}const S6e={row:1,column:1,facet:1},_c=Ye(S6e),bne={...vne,...S6e},DYt=Ye(bne),{order:fon,detail:don,tooltip:hon,...OYt}=bne,{row:pon,column:mon,facet:gon,...$Yt}=OYt;function MYt(e){return!!$Yt[e]}function T6e(e){return!!bne[e]}const LYt=[id,Qh,ud,Mc,ng,tg];function A6e(e){return qb(e)!==e}function qb(e){switch(e){case id:return Si;case Qh:return po;case ud:return od;case Mc:return ad;case ng:return Gc;case tg:return sd}return e}function uy(e){if(w6e(e))switch(e){case Gc:return"startAngle";case ng:return"endAngle";case sd:return"outerRadius";case tg:return"innerRadius"}return e}function ep(e){switch(e){case Si:return id;case po:return Qh;case od:return ud;case ad:return Mc;case Gc:return ng;case sd:return tg}}function tl(e){switch(e){case Si:case id:return"width";case po:case Qh:return"height"}}function C6e(e){switch(e){case Si:return"xOffset";case po:return"yOffset";case id:return"x2Offset";case Qh:return"y2Offset";case Gc:return"thetaOffset";case sd:return"radiusOffset";case ng:return"theta2Offset";case tg:return"radius2Offset"}}function _ne(e){switch(e){case Si:return"xOffset";case po:return"yOffset"}}function FYt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const jYt=Ye(vne),{x:yon,y:von,x2:bon,y2:_on,xOffset:won,yOffset:Eon,latitude:xon,longitude:Son,latitude2:Ton,longitude2:Aon,theta:Con,theta2:Ion,radius:kon,radius2:Ron,...wne}=vne,BYt=Ye(wne),Ene={x:1,y:1},tp=Ye(Ene);function ls(e){return e in Ene}const xne={theta:1,radius:1},UYt=Ye(xne);function P4(e){return e==="width"?Si:po}const I6e={xOffset:1,yOffset:1};function cR(e){return e in I6e}const{text:Non,tooltip:Pon,href:Don,url:Oon,description:$on,detail:Mon,key:Lon,order:Fon,...k6e}=wne,zYt=Ye(k6e);function VYt(e){return!!wne[e]}function HYt(e){switch(e){case Zu:case Jh:case Zh:case rg:case el:case ig:case Vy:case Hy:return!0;case Uy:case zy:case Hb:return!1}}const R6e={...Ene,...xne,...I6e,...k6e},D4=Ye(R6e);function sg(e){return!!R6e[e]}function qYt(e,t){return GYt(e)[t]}const N6e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:jon,...WYt}=N6e;function GYt(e){switch(e){case Zu:case Jh:case Zh:case N4:case lR:case I4:case ob:case k4:case lx:case ig:case Uy:case zy:case Vy:case C4:case tm:case nm:return N6e;case Si:case po:case By:case PS:case od:case ad:return WYt;case id:case Qh:case ud:case Mc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case rg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Hy:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case el:return{point:"always",geoshape:"always"};case uR:return{text:"always"};case Hb:return{point:"always",square:"always",text:"always"};case R4:return{image:"always"};case Gc:return{text:"always",arc:"always"};case sd:return{text:"always",arc:"always"};case ng:case tg:return{arc:"always"}}}function q9(e){switch(e){case Si:case po:case Gc:case sd:case By:case PS:case rg:case Hb:case Vy:case ig:case Uy:case zy:case id:case Qh:case ng:case tg:return;case C4:case tm:case nm:case el:case Hy:case uR:case ob:case k4:case R4:case N4:return"discrete";case Zu:case Jh:case Zh:return"flexible";case od:case ad:case ud:case Mc:case lR:case I4:case lx:return}}const YYt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},KYt={count:1,min:1,max:1};function Om(e){return!!e&&!!e.argmin}function qy(e){return!!e&&!!e.argmax}function Sne(e){return pt(e)&&!!YYt[e]}const XYt=new Set(["count","valid","missing","distinct"]);function P6e(e){return pt(e)&&XYt.has(e)}function QYt(e){return pt(e)&&Vn(["min","max"],e)}const JYt=new Set(["count","sum","distinct","valid","missing"]),ZYt=new Set(["mean","average","median","q1","q3","min","max"]);function D6e(e){return Ly(e)&&(e=q4(e,void 0)),"bin"+Ye(e).map(t=>O4(e[t])?xi(`_${t}_${ay(e[t])}`):xi(`_${t}_${e[t]}`)).join("")}function ii(e){return e===!0||Wb(e)&&!e.binned}function To(e){return e==="binned"||Wb(e)&&e.binned===!0}function Wb(e){return mt(e)}function O4(e){return e==null?void 0:e.param}function $me(e){switch(e){case tm:case nm:case rg:case Zu:case Jh:case Zh:case Vy:case ig:case Uy:case zy:case el:return 6;case Hy:return 4;default:return 10}}function fR(e){return!!(e!=null&&e.expr)}function Tu(e){const t=Ye(e||{}),n={};for(const r of t)n[r]=yl(e[r]);return n}function O6e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=ax(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Rg(e){return pt(e)||je(e)&&pt(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function Wy(e){return!!e.step}function eKt(e){return je(e)?!1:"fields"in e&&!("data"in e)}function tKt(e){return je(e)?!1:"fields"in e&&"data"in e}function qp(e){return je(e)?!1:"field"in e&&"data"in e}const nKt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},rKt=Ye(nKt),iKt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},IH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function $6e(e){const t=je(e.condition)?e.condition.map(Mme):Mme(e.condition);return{...yl(e),condition:t}}function yl(e){if(fR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Mme(e){if(fR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function li(e){if(fR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function sKt(e){return Rt(e)?e.signal:nt(e)}function Lme(e){return Rt(e)?e.signal:nt(e.value)}function Af(e){return Rt(e)?e.signal:e==null?null:nt(e)}function oKt(e,t,n){for(const r of n){const i=$m(r,t.markDef,t.config);i!==void 0&&(e[r]=li(i))}return e}function M6e(e){return[].concat(e.type,e.style??[])}function br(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:$m(e,t,n,r)}function $m(e,t,n,{vgChannel:r}={}){return us(r?aM(e,t,n.style):void 0,aM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function aM(e,t,n){return L6e(e,M6e(t),n)}function L6e(e,t,n){t=ht(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function F6e(e,t){return ht(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function j6e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Sl(i,r))return;n.push(r)}),n}function B6e(e,t){return Sl(e,t)||!t?e:e?[...ht(e),...ht(t)].join(", "):t}function U6e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Rg(n)||Rt(n))&&(Rg(r)||Rt(r)))return{explicit:e.explicit,value:B6e(n,r)};if(Rg(n)||Rt(n))return{explicit:e.explicit,value:n};if(Rg(r)||Rt(r))return{explicit:e.explicit,value:r};if(!Rg(n)&&!Rt(n)&&!Rg(r)&&!Rt(r))return{explicit:e.explicit,value:j6e(n,r)};throw new Error("It should never reach here")}function Tne(e){return`Invalid specification ${Lr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const aKt='Autosize "fit" only works for single views and layered views.';function Fme(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function jme(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Bme(e){return e?`Dropping "fit-${e}" because spec has discrete ${tl(e)}.`:'Dropping "fit" because spec has discrete size.'}function Ane(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Ume(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function uKt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function lKt(e){return`The "nearest" transform is not supported for ${e} marks.`}function z6e(e){return`Selection not supported for ${e} yet.`}function cKt(e){return`Cannot find a selection named "${e}".`}const fKt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",dKt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",hKt="Legend bindings are only supported for selections over an individual field or encoding channel.";function pKt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function mKt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const gKt="The same selection must be used to override scale domains in a layered view.",yKt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function vKt(e){return`Unknown repeated value "${e}".`}function zme(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const bKt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function _Kt(e){return`Unrecognized parse "${e}".`}function Vme(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const wKt="Attempt to add the same child twice.";function EKt(e){return`Ignoring an invalid transform: ${Lr(e)}.`}const xKt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Hme(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function SKt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Lr(t)} is overridden by a child projection ${Lr(n)}.`}const TKt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function AKt(e){return`${e}Offset dropped because ${e} is continuous`}function CKt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Lr(n)}}.`}function V6e(e){return`Invalid field type "${e}".`}function IKt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function kKt(e){return`Invalid aggregation operator "${e}".`}function H6e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function RKt(e){return`Position range does not support relative band size for ${e}.`}function kH(e,t){return`Dropping ${Lr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const NKt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function $4(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function PKt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function DKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function OKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function $Kt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function W9(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function MKt(e){return`The ${e} for range marks cannot be an expression`}function LKt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function FKt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function jKt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function BKt(e){return`Cannot use the relative band size with ${e} scale.`}function UKt(e){return`Using unaggregated domain with raw field has no effect (${Lr(e)}).`}function zKt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function VKt(e){return`Unaggregated domain is currently unsupported for log scale (${Lr(e)}).`}function HKt(e){return`Cannot apply size to non-oriented mark "${e}".`}function qKt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function WKt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function q6e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function W6e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function GKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Lr(n)} and ${Lr(r)}). Using ${Lr(n)}.`}function YKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Lr(n)} and ${Lr(r)}). Using the union of the two domains.`}function KKt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function XKt(e){return`Dropping sort property ${Lr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const qme="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",QKt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",JKt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",ZKt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function eXt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function tXt(e){return`Stack is applied to a non-linear scale (${e}).`}function nXt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function uM(e,t){return`Invalid ${e}: ${Lr(t)}.`}function rXt(e){return`Dropping day from datetime ${Lr(e)} as day cannot be combined with other units.`}function iXt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function sXt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function oXt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Wme(e){return`1D error band does not support ${e}.`}function G6e(e){return`Channel ${e} is required for "binned" bin.`}function aXt(e){return`Channel ${e} should not be used with "binned" bin.`}function uXt(e){return`Domain for ${e} is required for threshold scale.`}const Y6e=sZ(iZ);let cx=Y6e;function lXt(e){return cx=e,cx}function cXt(){return cx=Y6e,cx}function Je(...e){cx.warn(...e)}function fXt(...e){cx.debug(...e)}function Gb(e){if(e&&mt(e)){for(const t of Ine)if(t in e)return!0}return!1}const K6e=["january","february","march","april","may","june","july","august","september","october","november","december"],dXt=K6e.map(e=>e.substr(0,3)),X6e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],hXt=X6e.map(e=>e.substr(0,3));function pXt(e){if(A4(e)&&(e=+e),ur(e))return e>4&&Je(uM("quarter",e)),e-1;throw new Error(uM("quarter",e))}function mXt(e){if(A4(e)&&(e=+e),ur(e))return e-1;{const t=e.toLowerCase(),n=K6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=dXt.indexOf(r);if(i!==-1)return i;throw new Error(uM("month",e))}}function gXt(e){if(A4(e)&&(e=+e),ur(e))return e%7;{const t=e.toLowerCase(),n=X6e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=hXt.indexOf(r);if(i!==-1)return i;throw new Error(uM("day",e))}}function Cne(e,t){const n=[];if(t&&e.day!==void 0&&Ye(e).length>1&&(Je(rXt(e)),e=tn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?mXt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?pXt(e.quarter):e.quarter;n.push(ur(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?gXt(e.day):e.day;n.push(ur(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function ab(e){const n=Cne(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function yXt(e){const n=Cne(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function vXt(e){const t=Cne(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const Q6e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Ine=Ye(Q6e);function bXt(e){return!!Q6e[e]}function Yb(e){return mt(e)?e.binned:J6e(e)}function J6e(e){return e&&e.startsWith("binned")}function kne(e){return e.startsWith("utc")}function _Xt(e){return e.substring(3)}const wXt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function M4(e){return Ine.filter(t=>eFe(e,t))}function Z6e(e){const t=M4(e);return t[t.length-1]}function eFe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function EXt(e,t,{end:n}={end:!1}){const r=gne(t),i=kne(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Ine)eFe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),yXt(a)}function tFe(e){if(!e)return;const t=M4(e);return`timeUnitSpecifier(${Lr(t)}, ${Lr(wXt)})`}function xXt(e,t,n){if(!e)return;const r=tFe(e);return`${n||kne(e)?"utc":"time"}Format(${t}, ${r})`}function lo(e){if(!e)return;let t;return pt(e)?J6e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:mt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),kne(t.unit)&&(t.utc=!0,t.unit=_Xt(t.unit)),t}function SXt(e){const{utc:t,...n}=lo(e);return n.unit?(t?"utc":"")+Ye(n).map(r=>xi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ye(n).map(r=>xi(`_${r}_${n[r]}`)).join("")}function nFe(e,t=n=>n){const n=lo(e),r=Z6e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=rFe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(ab(a))} - ${t(ab(i))}`}}const TXt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function AXt(e){return!!TXt[e]}function rFe(e,t=1){if(AXt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function CXt(e){return e==null?void 0:e.param}function Rne(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Nne(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Pne(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Dne(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function One(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function $ne(e){if(e!=null&&e.field){if(je(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function Mne(e){return!!(e!=null&&e.field)&&(je(e.oneOf)||je(e.in))}function IXt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function iFe(e){return Mne(e)||Rne(e)||$ne(e)||Nne(e)||Dne(e)||Pne(e)||One(e)}function vd(e,t){return W4(e,{timeUnit:t,wrapTime:!0})}function kXt(e,t){return e.map(n=>vd(n,t))}function sFe(e,t=!0){const{field:n}=e,r=lo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:EXt(i,n)})`:o;if(Rne(e))return`${a}===${vd(e.equal,i)}`;if(Nne(e)){const u=e.lt;return`${a}<${vd(u,i)}`}else if(Dne(e)){const u=e.gt;return`${a}>${vd(u,i)}`}else if(Pne(e)){const u=e.lte;return`${a}<=${vd(u,i)}`}else if(One(e)){const u=e.gte;return`${a}>=${vd(u,i)}`}else{if(Mne(e))return`indexof([${kXt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(IXt(e))return Lne(a,e.valid);if($ne(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+vd(l,i)+", "+vd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${vd(l,i)}`),c!==null&&f.push(`${a} <= ${vd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Lr(e)}`)}function Lne(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function RXt(e){return iFe(e)&&e.timeUnit?{...e,timeUnit:lo(e.timeUnit)}:e}const dR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function NXt(e){return e==="quantitative"||e==="temporal"}function oFe(e){return e==="ordinal"||e==="nominal"}const ub=dR.quantitative,Fne=dR.ordinal,fx=dR.temporal,jne=dR.nominal,DS=dR.geojson;function PXt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case ub:return"quantitative";case"t":case fx:return"temporal";case"o":case Fne:return"ordinal";case"n":case jne:return"nominal";case DS:return"geojson"}}const Vu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},RH={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function DXt(e,t){const n=RH[e],r=RH[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const OXt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Gme(e){return OXt[e]}const aFe=new Set(["linear","log","pow","sqrt","symlog"]),uFe=new Set([...aFe,"time","utc"]);function lFe(e){return aFe.has(e)}const cFe=new Set(["quantile","quantize","threshold"]),$Xt=new Set([...uFe,...cFe,"sequential","identity"]),MXt=new Set(["ordinal","bin-ordinal","point","band"]);function co(e){return MXt.has(e)}function Vl(e){return $Xt.has(e)}function Cf(e){return uFe.has(e)}function dx(e){return cFe.has(e)}const LXt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function FXt(e){return!pt(e)&&!!e.name}function fFe(e){return e==null?void 0:e.param}function jXt(e){return e==null?void 0:e.unionWith}function BXt(e){return mt(e)&&"field"in e}const UXt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Bon,domain:Uon,range:zon,rangeMax:Von,rangeMin:Hon,scheme:qon,...zXt}=UXt,VXt=Ye(zXt);function NH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Cf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Cf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Cf(e);case"nice":return Cf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Vl(e)&&!Vn(["log","time","utc","threshold","quantile"],e)}}function dFe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Jw(e)?void 0:jKt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function HXt(e,t){return Vn([Fne,jne],t)?e===void 0||co(e):t===fx?Vn([Vu.TIME,Vu.UTC,void 0],e):t===ub?lFe(e)||dx(e)||e===void 0:!0}function qXt(e,t,n=!1){if(!sg(e))return!1;switch(e){case Si:case po:case By:case PS:case Gc:case sd:return Cf(t)||t==="band"?!0:t==="point"?!n:!1;case rg:case Vy:case ig:case Uy:case zy:case Hb:return Cf(t)||dx(t)||Vn(["band","point","ordinal"],t);case Zu:case Jh:case Zh:return t!=="band";case Hy:case el:return t==="ordinal"||dx(t)}}function Bne(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=zne(e);return Ze(n)&&!P6e(n.aggregate)&&i&&Cf(i.get("type"))?WXt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function WXt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return br("invalid",n,i)===null?[GXt(e,t),r]:r}function GXt(e,t){const n=Une(e,!0),i=qb(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Une(e,t=!0){return Lne(pt(e)?e:at(e,{expr:"datum"}),!t)}function YXt(e){const{datum:t}=e;return Gb(t)?ab(t):`${Lr(t)}`}function v1(e,t,n,r){const i={};if(t&&(i.scale=t),np(e)){const{datum:s}=e;Gb(s)?i.signal=ab(s):Rt(s)?i.signal=s.signal:fR(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function lM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function KXt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function zne({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(un(t)){const f=o==null?void 0:o.get("type");if(eu(t)){c??(c=ly({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ii(d)||c&&h&&p===fx)return a!=null&&a.impute?v1(t,s,{binSuffix:"mid"},{offset:u}):c&&!co(f)?lM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):v1(t,s,gR(t,e)?{binSuffix:"range"}:{},{offset:u});if(To(d)){if(Ze(n))return lM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Je(G6e(e===Si?id:Qh))}}return v1(t,s,co(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Yf(t)){const f=t.value,d=u?{offset:u}:{};return{...PC(e,f),...d}}}return vn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function PC(e,t){return Vn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Vn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:li(t)}function lb(e){return e&&e!=="number"&&e!=="time"}function hFe(e,t,n){return`${e}(${t}${n?`, ${Lr(n)}`:""})`}const XXt="  ";function Vne({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(lb(n))return If({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=pFe(e,r,i),a=hx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return If({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return If({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return If({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(mx(e)){const c=JXt({field:o,timeUnit:Ze(e)?(u=lo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Xb(e)&&((l=e.scale)==null?void 0:l.type)===Vu.UTC});return c?{signal:c}:void 0}if(t=PH({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&ii(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:hR(o,c,t,n,s)}}else return t||hx(e)==="quantitative"?{signal:`${yFe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function pFe(e,t,n){return Ze(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):YXt(e)}function If({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=pFe(e,r,i)),o!=="datum.value"&&Ze(e)&&ii(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:hR(o,a,t,n,s)}}return{signal:hFe(n,o,t)}}function mFe(e,t,n,r,i,s){var o;if(!(pt(r)&&lb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&hx(e)==="quantitative"&&(i.normalizedNumberFormatType&&px(e)&&e.stack==="normalize"||i.numberFormatType))){if(px(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return PH({type:"quantitative",config:i,normalizeStack:!0});if(mx(e)){const a=Ze(e)?(o=lo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:QXt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return PH({type:t,specifiedFormat:n,config:i})}}function gFe(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(mx(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=lo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function PH({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(pt(t))return t;if(e===ub)return r?n.normalizedNumberFormat:n.numberFormat}function QXt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:tFe(t)}:r?void 0:n.timeFormat)}function yFe(e,t){return`format(${e}, "${t||""}")`}function Yme(e,t,n,r){return lb(n)?hFe(n,e,t):yFe(e,(pt(t)?t:void 0)??r.numberFormat)}function hR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return hR(e,t,i.numberFormat,i.numberFormatType,i);const s=Yme(e,n,r,i),o=Yme(t,n,r,i);return`${Lne(e,!1)} ? "null" : ${s} + "${XXt}" + ${o}`}function JXt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=pt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):xXt(t,e,s)}const ou={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},vFe=ou.arc,L4=ou.area,F4=ou.bar,ZXt=ou.image,j4=ou.line,B4=ou.point,eQt=ou.rect,cM=ou.rule,bFe=ou.text,Hne=ou.tick,tQt=ou.trail,qne=ou.circle,Wne=ou.square,_Fe=ou.geoshape;function Kb(e){return["line","area","trail"].includes(e)}function yI(e){return["rect","bar","image","arc"].includes(e)}const nQt=new Set(Ye(ou));function Rh(e){return e.type}const rQt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],iQt=["fill","fillOpacity"],sQt=[...rQt,...iQt],oQt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Kme=Ye(oQt),aQt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},uQt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},lQt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},wFe=Ye(lQt);function cb(e){return e&&e.band!=null}const cQt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},EFe=5,fQt={binSpacing:1,continuousBandSize:EFe,minBandSize:.25,timeUnitBandPosition:.5},dQt={binSpacing:0,continuousBandSize:EFe,minBandSize:.25,timeUnitBandPosition:.5},hQt={thickness:1};function pQt(e){return Rh(e)?e.type:e}const U4="min",mQt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Xme(e){return e in mQt}function xFe(e){return!!(e!=null&&e.encoding)}function dh(e){return e&&(e.op==="count"||!!e.field)}function SFe(e){return e&&je(e)}function pR(e){return"row"in e||"column"in e}function Gne(e){return!!e&&"header"in e}function z4(e){return"facet"in e}function gQt(e){return e.param}function yQt(e){return e&&!pt(e)&&"repeat"in e}function Qme(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Yne(e){return"sort"in e}function ly({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(un(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return $m("timeUnitBandPosition",n,r);if(ii(s))return .5}}function TFe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=tl(e),u=br(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:$m("timeUnitBandSize",r,i)};if(ii(h)&&!co(s))return{band:1}}if(yI(r.type))return s?co(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function AFe(e,t,n,r){return ii(e.bin)||e.timeUnit&&eu(e)&&e.type==="temporal"?ly({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function CFe(e){return e&&!!e.sort&&!e.field}function V4(e){return e&&"condition"in e}function H4(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&Ze(t)}function mR(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&un(t)}function vQt(e){const t=e==null?void 0:e.condition;return!!t&&(je(t)||Yf(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function hx(e){return e==null?void 0:e.type}function np(e){return e&&"datum"in e}function t0(e){return eu(e)&&!dM(e)||fM(e)}function Jme(e){return eu(e)&&e.type==="quantitative"&&!e.bin||fM(e)}function fM(e){return np(e)&&ur(e.datum)}function un(e){return Ze(e)||np(e)}function eu(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Yf(e){return e&&"value"in e&&"value"in e}function Xb(e){return e&&("scale"in e||"sort"in e)}function px(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function IFe(e){return e&&"legend"in e}function kFe(e){return e&&("format"in e||"formatType"in e)}function bQt(e){return zu(e,["legend","axis","header","scale"])}function _Qt(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(EQt(e))n=v6e("count");else{let o;if(!t.nofn)if(_Qt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ii(a)?(o=D6e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?qy(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Om(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!Yb(l)&&(o=SXt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?NS(n):t.expr?m6e(n,t.expr)+s:$c(n)+s}function dM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(V6e(e.type))}function wQt(e){var t;return Xb(e)&&dx((t=e.scale)==null?void 0:t.type)}function EQt(e){return e.aggregate==="count"}function xQt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ii(r))return`${n} (binned)`;if(i&&!Yb(i)){const a=(o=lo(i))==null?void 0:o.unit;if(a)return`${n} (${M4(a).join("-")})`}else if(s)return qy(s)?`${n} for max ${s.argmax}`:Om(s)?`${n} for min ${s.argmin}`:`${aR(s)} of ${n}`;return n}function SQt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(qy(t))return`${i} for argmax(${t.argmax})`;if(Om(t))return`${i} for argmin(${t.argmin})`;const s=r&&!Yb(r)?lo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ii(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const RFe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return SQt(e);default:return xQt(e,t)}};let NFe=RFe;function PFe(e){NFe=e}function TQt(){PFe(RFe)}function Zw(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Kne(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?Xne(s,t):void 0;return n?us(i,s.title,o):i??s.title??o}function Kne(e){if(px(e)&&e.axis)return e.axis;if(IFe(e)&&e.legend)return e.legend;if(Gne(e)&&e.header)return e.header}function Xne(e,t){return NFe(e,t)}function hM(e){if(kFe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Kne(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function AQt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Yne(e)&&je(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!qy(n)&&!Om(n))return"quantitative";if(Xb(e)&&((s=e.scale)!=null&&s.type))switch(RH[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Nh(e){if(Ze(e))return e;if(H4(e))return e.condition}function Os(e){if(un(e))return e;if(mR(e))return e.condition}function DFe(e,t,n,r={}){if(pt(e)||ur(e)||Ly(e)){const i=pt(e)?"string":ur(e)?"number":"boolean";return Je(CKt(t,i,e)),{value:e}}return un(e)?pM(e,t,n,r):mR(e)?{...e,condition:pM(e.condition,t,n,r)}:e}function pM(e,t,n,r){if(kFe(e)){const{format:i,formatType:s,...o}=e;if(lb(s)&&!n.customFormatTypes)return Je(Hme(t)),pM(o,t,n,r)}else{const i=px(e)?"axis":IFe(e)?"legend":Gne(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(lb(o)&&!n.customFormatTypes)return Je(Hme(t)),pM({...e,[i]:a},t,n,r)}}return Ze(e)?Qne(e,t,r):CQt(e)}function CQt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ur(n)?"quantitative":pt(n)?"nominal":Gb(n)?"temporal":void 0,{...e,type:t}}function Qne(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Sne(r)&&!qy(r)&&!Om(r)&&(Je(kKt(r)),delete a.aggregate),i&&(a.timeUnit=lo(i)),o&&(a.field=`${o}`),ii(s)&&(a.bin=q4(s,t)),To(s)&&!ls(t)&&Je(aXt(t)),eu(a)){const{type:u}=a,l=PXt(u);u!==l&&(a.type=l),u!=="quantitative"&&P6e(r)&&(Je(IKt(u,r)),a.type="quantitative")}else if(!A6e(t)){const u=AQt(a,t);a.type=u}if(eu(a)){const{compatible:u,warning:l}=IQt(a,t)||{};u===!1&&Je(l)}if(Yne(a)&&pt(a.sort)){const{sort:u}=a;if(Xme(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Xme(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Gne(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function q4(e,t){return Ly(e)?{maxbins:$me(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:$me(t)}:e}const A_={compatible:!0};function IQt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case tm:case nm:case C4:return dM(e)?A_:{compatible:!1,warning:DKt(t)};case Si:case po:case By:case PS:case Zu:case Jh:case Zh:case uR:case lR:case I4:case ob:case k4:case R4:case Hb:case Gc:case sd:case N4:return A_;case ad:case Mc:case od:case ud:return n!==ub?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:A_;case ig:case Uy:case zy:case Vy:case rg:case ng:case tg:case id:case Qh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:A_;case el:case Hy:return!dM(e)&&!wQt(e)?{compatible:!1,warning:OKt(t)}:A_;case lx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:A_}}function mx(e){const{formatType:t}=hM(e);return t==="time"||!t&&kQt(e)}function kQt(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function W4(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=lo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return fR(e)?a=e.expr:Rt(e)?a=e.signal:Gb(e)?(o=!0,a=ab(e)):(pt(e)||ur(e))&&o&&(a=`datetime(${Lr(e)})`,bXt(s)&&(ur(e)&&e<1e4||pt(e)&&isNaN(Date.parse(e)))&&(a=ab({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Lr(e)}function OFe(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!Yb(e.timeUnit)?e.timeUnit:void 0,s=W4(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function gR(e,t){return ii(e.bin)?sg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Zme={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function yR(e){return e==null?void 0:e.condition}const $Fe=["domain","grid","labels","ticks","title"],RQt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},MFe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},NQt={...MFe,style:1,labelExpr:1,encoding:1};function ege(e){return!!NQt[e]}const PQt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},LFe=Ye(PQt);function og(e){return"mark"in e}class G4{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return og(t)?pQt(t.mark)===this.name:!1}}function b1(e,t){const n=e&&e[t];return n?je(n)?ib(n,r=>!!r.field):Ze(n)||H4(n):!1}function FFe(e,t){const n=e&&e[t];return n?je(n)?ib(n,r=>!!r.field):Ze(n)||np(n)||mR(n):!1}function jFe(e,t){if(ls(t)){const n=e[t];if((Ze(n)||np(n))&&(oFe(n.type)||Ze(n)&&n.timeUnit)){const r=_ne(t);return FFe(e,r)}}return!1}function Jne(e){return ib(DYt,t=>{if(b1(e,t)){const n=e[t];if(je(n))return ib(n,r=>!!r.aggregate);{const r=Nh(n);return r&&!!r.aggregate}}return!1})}function BFe(e,t){const n=[],r=[],i=[],s=[],o={};return Zne(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Kne(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:Zw(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(qy(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Om(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),eu(a)&&ii(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),gR(a,u)&&n.push(at(a,{binSuffix:"range"})),ls(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",A6e(u)||(y.type=ub)}else if(d&&!Yb(d)){i.push({timeUnit:d,field:l,as:g});const v=eu(a)&&a.type!==fx&&"time";v&&(u===uR||u===ob?y.formatType=v:VYt(u)?y.legend={formatType:v,...y.legend}:ls(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function DQt(e,t,n){const r=qYt(t,n);if(r){if(r==="binned"){const i=e[t===id?Si:po];return!!(Ze(i)&&Ze(e[t])&&To(i.bin))}}else return!1;return!0}function OQt(e,t,n,r){const i={};for(const s of Ye(e))T6e(s)||Je(PKt(s));for(let s of jYt){if(!e[s])continue;const o=e[s];if(cR(s)){const a=FYt(s),u=i[a];if(Ze(u)&&NXt(u.type)&&Ze(o)&&!u.timeUnit){Je(AKt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Je(TKt),s=Gc),!DQt(e,s,t)){Je($4(s,t));continue}if(s===rg&&t==="line"){const a=Nh(e[s]);if(a!=null&&a.aggregate){Je(NKt);continue}}if(s===Zu&&(n?"fill"in e:"stroke"in e)){Je(H6e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===lR||s===lx&&!je(o)&&!Yf(o)||s===ob&&je(o)){if(o){if(s===lx){const a=e[s];if(CFe(a)){i[s]=a;continue}}i[s]=ht(o).reduce((a,u)=>(Ze(u)?a.push(Qne(u,s)):Je(kH(u,s)),a),[])}}else{if(s===ob&&o===null)i[s]=null;else if(!Ze(o)&&!np(o)&&!Yf(o)&&!V4(o)&&!Rt(o)){Je(kH(o,s));continue}i[s]=DFe(o,s,r)}}return i}function Y4(e,t){const n={};for(const r of Ye(e)){const i=DFe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function $Qt(e){const t=[];for(const n of Ye(e))if(b1(e,n)){const r=e[n],i=ht(r);for(const s of i)Ze(s)?t.push(s):H4(s)&&t.push(s.condition)}return t}function Zne(e,t,n){if(e)for(const r of Ye(e)){const i=e[r];if(je(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function MQt(e,t,n,r){return e?Ye(e).reduce((i,s)=>{const o=e[s];return je(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function UFe(e,t){return Ye(t).reduce((n,r)=>{switch(r){case Si:case po:case k4:case N4:case R4:case id:case Qh:case By:case PS:case Gc:case ng:case sd:case tg:case od:case ad:case ud:case Mc:case uR:case el:case Hb:case ob:return n;case lx:if(e==="line"||e==="trail")return n;case lR:case I4:{const i=t[r];if(je(i)||Ze(i))for(const s of ht(i))s.aggregate||n.push(at(s,{}));return n}case rg:if(e==="trail")return n;case Zu:case Jh:case Zh:case ig:case Uy:case zy:case Hy:case Vy:{const i=Nh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function LQt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(je(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return je(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function DH(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${ere(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=$Qt(n).map(bQt);return{tooltip:[...i,...Qd(s,zn)]}}function ere(e){const{title:t,field:n}=e;return us(t,n)}function tre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=ere(n);return zFe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...pt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function zFe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Rh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Ly(e[t])?{}:e[t]}}]:[]}function VFe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:lP(s,n),continuousAxisChannelDef2:lP(o,n),continuousAxisChannelDefError:lP(a,n),continuousAxisChannelDefError2:lP(u,n),continuousAxis:i}}function lP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Je(oXt(n,t)),r}else return e}function HFe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Rh(n)&&n.orient)return n.orient;if(t0(i)){if(t0(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return mx(s)&&!mx(i)?"horizontal":"vertical"}return"horizontal"}else{if(t0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const mM="boxplot",FQt=["box","median","outliers","rule","ticks"],jQt=new G4(mM,WFe);function qFe(e){return ur(e)?"tukey":e}function WFe(e,{config:t}){e={...e,encoding:Y4(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Rh(n)?n:{type:n};i&&Je(z6e("boxplot"));const u=a.extent??t.boxplot.extent,l=br("size",a,t),c=a.invalid,f=qFe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:S}=BQt(e,u,t),T=NS(m.field),{color:A,size:C,...I}=b,R=ke=>tre(a,g,m,ke,t.boxplot),O=R(I),P=R(b),$=(mt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=R({...I,...C?{size:C}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:$}}}}),L=DH([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},z=f==="min-max"?L:DH([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),q=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:z}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:z}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:z}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:z})],D=[...f!=="tukey"?q:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...F({partName:"median",mark:{type:"tick",invalid:c,...mt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:D};const U=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${U})`,H=`${U} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,ce={joinaggregate:GFe(m.field),groupby:y},de={transform:[{filter:`(${H} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:q},{tooltip:he,...ye}=I,{scale:Ie,axis:ve}=m,Ke=ere(m),Ue=zu(ve,["title"]),gt=zFe(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${H}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ke!==void 0?{title:Ke}:{},...Ie!==void 0?{scale:Ie}:{},...Mr(Ue)?{}:{axis:Ue}},...ye,...A?{color:A}:{},...S?{tooltip:S}:{}}})[0];let rt;const be=[...d,...h,ce];return gt?rt={transform:be,layer:[gt,de]}:(rt=de,rt.transform.unshift(...be)),{...o,layer:[rt,{transform:p,layer:D}]}}function GFe(e){const t=NS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function BQt(e,t,n){const r=HFe(e,mM),{continuousAxisChannelDef:i,continuousAxis:s}=VFe(e,r,mM),o=i.field,a=NS(o),u=qFe(t),l=[...GFe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=LQt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=BFe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const nre="errorbar",UQt=["ticks","rule"],zQt=new G4(nre,YFe);function YFe(e,{config:t}){e={...e,encoding:Y4(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=KFe(e,nre,t);delete s.size;const c=tre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function VQt(e,t){const{encoding:n}=e;if(HQt(n))return{orient:HFe(e,t),inputType:"raw"};const r=qQt(n),i=WQt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(un(a)&&un(u))throw new Error(`${t} cannot have both x2 and y2`);if(un(a)){if(t0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(un(u)){if(t0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(un(u)&&!un(a))throw new Error(`${t} cannot have xError2 without xError`);if(un(c)&&!un(l))throw new Error(`${t} cannot have yError2 without yError`);if(un(a)&&un(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(un(a)){if(t0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(un(l)){if(t0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function HQt(e){return(un(e.x)||un(e.y))&&!un(e.x2)&&!un(e.y2)&&!un(e.xError)&&!un(e.xError2)&&!un(e.yError)&&!un(e.yError2)}function qQt(e){return un(e.x2)||un(e.y2)}function WQt(e){return un(e.xError)||un(e.xError2)||un(e.yError)||un(e.yError2)}function KFe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Rh(r)?r:{type:r};s&&Je(z6e(t));const{orient:l,inputType:c}=VQt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=VFe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=GQt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:T,...A}=i,{bins:C,timeUnits:I,aggregate:R,groupby:O,encoding:P}=BFe(A,n),$=[...R,...g],F=c!=="raw"?[]:O,L=DH(v,f,P,b);return{transform:[...a.transform??[],...C,...I,...$.length===0?[]:[{aggregate:$,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:L}}function GQt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Je(sXt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:aR(h)},{fieldPrefix:"upper_",titlePrefix:tge(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:tge(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Zw({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Zw({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Zw({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Je(iXt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:sb(sb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function tge(e,t,n){return`${aR(e)} ${n} ${t}`}const rre="errorband",YQt=["band","borders"],KQt=new G4(rre,XFe);function XFe(e,{config:t}){e={...e,encoding:Y4(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=KFe(e,rre,t),l=o,c=tre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Je(Wme("interpolate")):l.tension&&Je(Wme("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const QFe={};function ire(e,t,n){const r=new G4(e,t);QFe[e]={normalizer:r,parts:n}}function XQt(){return Ye(QFe)}ire(mM,WFe,FQt);ire(nre,YFe,UQt);ire(rre,XFe,YQt);const QQt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],JFe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},ZFe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},JQt=Ye(JFe),ZQt=Ye(ZFe),eJt={header:1,headerRow:1,headerColumn:1,headerFacet:1},e4e=Ye(eJt),t4e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],tJt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},nJt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Kf="_vgsid_",rJt={point:{on:"click",fields:[Kf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function sre(e){return e==="legend"||!!(e!=null&&e.legend)}function G9(e){return sre(e)&&mt(e)}function ore(e){return!!(e!=null&&e.select)}function n4e(e){const t=[];for(const n of e||[]){if(ore(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function iJt(e){return K4(e)||ure(e)||are(e)}function are(e){return"concat"in e}function K4(e){return"vconcat"in e}function ure(e){return"hconcat"in e}function r4e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Ph(e){return mt(e)&&e.step!==void 0}function nge(e){return e.view||e.width||e.height}const rge=20,sJt={align:1,bounds:1,center:1,columns:1,spacing:1},oJt=Ye(sJt);function aJt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(z4(e)&&!pR(e.facet)||are(e))&&(i.columns=o),K4(e)&&(i.columns=1);for(const a of oJt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=ur(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function OH(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function gM(e,t){const n=yM(e,t);return Ph(n)?n.step:i4e}function yM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return us(n,{step:e.step})}const i4e=20,uJt={continuousWidth:200,continuousHeight:200,step:i4e},lJt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:uJt,mark:uQt,arc:{},area:{},bar:fQt,circle:{},geoshape:{},image:{},line:{},point:{},rect:dQt,rule:{color:"black"},square:{},text:{color:"black"},tick:hQt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:LXt,projection:{},legend:tJt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:rJt,style:{},title:{},facet:{spacing:rge},concat:{spacing:rge},normalizedNumberFormat:".0%"},pp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],ige={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},sge={blue:pp[0],orange:pp[1],red:pp[2],teal:pp[3],green:pp[4],yellow:pp[5],purple:pp[6],pink:pp[7],brown:pp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function cJt(e={}){return{signals:[{name:"color",value:mt(e)?{...sge,...e}:sge}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function fJt(e){return{signals:[{name:"fontSize",value:mt(e)?{...ige,...e}:ige}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function dJt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function s4e(e){const t=Ye(e||{}),n={};for(const r of t){const i=e[r];n[r]=yR(i)?$6e(i):yl(i)}return n}function hJt(e){const t=Ye(e),n={};for(const r of t)n[r]=s4e(e[r]);return n}const pJt=[...wFe,...LFe,...e4e,"background","padding","legend","lineBreak","scale","style","title","view"];function o4e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=_S({},tn(lJt),n?dJt(n):{},t?cJt(t):{},r?fJt(r):{},s||{});i&&wS(o,"selection",i,!0);const a=zu(o,pJt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=yl(o[u]));for(const u of wFe)o[u]&&(a[u]=Tu(o[u]));for(const u of LFe)o[u]&&(a[u]=s4e(o[u]));for(const u of e4e)o[u]&&(a[u]=Tu(o[u]));return o.legend&&(a.legend=Tu(o.legend)),o.scale&&(a.scale=Tu(o.scale)),o.style&&(a.style=hJt(o.style)),o.title&&(a.title=Tu(o.title)),o.view&&(a.view=Tu(o.view)),a}const mJt=new Set(["view",...nQt]),gJt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],yJt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...aQt};function vJt(e){e=tn(e);for(const t of gJt)delete e[t];if(e.axis)for(const t in e.axis)yR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of QQt)delete e.legend[t];if(e.mark){for(const t of Kme)delete e.mark[t];e.mark.tooltip&&mt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(n4e(e.params)),delete e.params);for(const t of mJt){for(const r of Kme)delete e[t][r];const n=yJt[t];if(n)for(const r of n)delete e[t][r];_Jt(e,t)}for(const t of XQt())delete e[t];bJt(e);for(const t in e)mt(e[t])&&Mr(e[t])&&delete e[t];return Mr(e)?void 0:e}function bJt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=O6e(e.title);Mr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Mr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Mr(r)?delete e.title:e.title=r}function _Jt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Mr(s)||(e.style[n??t]=s),delete e[t]}function X4(e){return"layer"in e}function wJt(e){return"repeat"in e}function EJt(e){return!je(e.repeat)&&e.repeat.layer}class lre{map(t,n){return z4(t)?this.mapFacet(t,n):wJt(t)?this.mapRepeat(t,n):ure(t)?this.mapHConcat(t,n):K4(t)?this.mapVConcat(t,n):are(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(X4(t))return this.mapLayer(t,n);if(og(t))return this.mapUnit(t,n);throw new Error(Tne(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const xJt={zero:1,center:1,normalize:1};function SJt(e){return e in xJt}const TJt=new Set([vFe,F4,L4,cM,B4,qne,Wne,j4,bFe,Hne]),AJt=new Set([F4,L4,vFe]);function C_(e){return Ze(e)&&hx(e)==="quantitative"&&!e.bin}function oge(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(C_(o)&&C_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(C_(o))return t;if(C_(a))return i}else{if(C_(o))return s&&n==="vertical"?void 0:t;if(C_(a))return s&&n==="horizontal"?void 0:i}}function CJt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function a4e(e,t){var m,g;const n=Rh(e)?e:{type:e},r=n.type;if(!TJt.has(r))return null;const i=oge(t,"x",n)||oge(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?at(s,{}):void 0,a=CJt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=BYt.reduce((y,v)=>{if(v!=="tooltip"&&b1(t,v)){const b=t[v];for(const w of ht(b)){const E=Nh(w);if(E.aggregate)continue;const S=at(E,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Ly(s.stack)?p=s.stack?"zero":null:p=s.stack:AJt.has(r)&&(p="zero"),!p||!SJt(p)||Jne(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Vu.LINEAR&&s!=null&&s.stack&&Je(tXt(s.scale.type)),un(t[ep(i)])?(s.stack!==void 0&&Je(eXt(i)),null):(Ze(s)&&s.aggregate&&!JYt.has(s.aggregate)&&Je(nXt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Kb(r),stackBy:h,offset:p}))}function u4e(e,t,n){const r=Tu(e),i=br("orient",r,n);if(r.orient=NJt(r.type,t,i),i!==void 0&&i!==r.orient&&Je(FKt(r.orient,i)),r.type==="bar"&&r.orient){const u=br("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:cQt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=br("opacity",r,n),o=br("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=kJt(r.type,t)),br("cursor",r,n)===void 0&&(r.cursor=IJt(r,t,n)),r}function IJt(e,t,n){return t.href||e.href||br("href",e,n)?"pointer":e.cursor}function kJt(e,t){if(Vn([B4,Hne,qne,Wne],e)&&!Jne(t))return .7}function RJt(e,t,{graticule:n}){if(n)return!1;const r=$m("filled",e,t),i=e.type;return us(r,i!==B4&&i!==j4&&i!==cM)}function NJt(e,t,n){switch(e){case B4:case qne:case Wne:case bFe:case eQt:case ZXt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case F4:if(Ze(r)&&(To(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(To(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===ub&&!ii(r.bin)||fM(r))&&Ze(i)&&To(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===ub&&!ii(i.bin)||fM(i))&&Ze(r)&&To(r.bin)?"vertical":"horizontal"}case cM:if(s&&!(Ze(r)&&To(r.bin))&&o&&!(Ze(i)&&To(i.bin)))return;case L4:if(o)return Ze(i)&&To(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&To(r.bin)?"vertical":"horizontal";if(e===cM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case j4:case Hne:{const a=Jme(r),u=Jme(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=eu(r)&&r.type===fx,c=eu(i)&&i.type===fx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function PJt(e){const{point:t,line:n,...r}=e;return Ye(r).length>1?r:r.type}function DJt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:zu(e[t],["point","line"])});return e}function Y9(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?mt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?mt(t.point)?t.point:{}:void 0}function age(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class OJt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(og(t)){const{mark:r,encoding:i}=t,s=Rh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!Y9(s,n[s.type],i);case"area":return!!Y9(s,n[s.type],i)||!!age(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=Y4(l,i),d=Rh(a)?a:{type:a},h=Y9(d,i[d.type],f),p=d.type==="area"&&age(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:PJt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:zu(f,["shape"])}],g=a4e(u4e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=zu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...ax(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...ax(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:DJt(i)})}}function $Jt(e,t){return t?pR(e)?c4e(e,t):l4e(e,t):e}function K9(e,t){return t?c4e(e,t):e}function $H(e,t,n){const r=t[e];if(yQt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Je(vKt(r.repeat));return}return t}function l4e(e,t){if(e=$H("field",e,t),e!==void 0){if(e===null)return null;if(Yne(e)&&dh(e.sort)){const n=$H("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function uge(e,t){if(Ze(e))return l4e(e,t);{const n=$H("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function lge(e,t){if(un(e)){const n=uge(e,t);if(n)return n;if(V4(e))return{condition:e.condition}}else{if(mR(e)){const n=uge(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function c4e(e,t){const n={};for(const r in e)if(Ft(e,r)){const i=e[r];if(je(i))n[r]=i.map(s=>lge(s,t)).filter(s=>s);else{const s=lge(i,t);s!==void 0&&(n[r]=s)}}return n}class MJt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(og(t)){const{encoding:n,mark:r}=t;if(r==="line"||Rh(r)&&r.type==="line")for(const i of LYt){const s=qb(i),o=n[s];if(n[i]&&(Ze(o)&&!To(o.bin)||np(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Je(LKt(!!i.x2,!!i.y2)),r({...t,mark:mt(s)?{...s,type:"rule"}:"rule"},n)}}class LJt extends lre{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[jQt,zQt,KQt,new OJt,new MJt]}map(t,n){if(og(t)){const r=b1(t.encoding,tm),i=b1(t.encoding,nm),s=b1(t.encoding,C4);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=K9(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return EJt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${xi(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!je(r)&&t.columns&&(t=zu(t,["columns"]),Je(zme("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!je(r)&&r.row||[u?u.row:null],f=!je(r)&&r.column||[u?u.column:null],d=je(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(je(r)?`${xi(p)}`:(r.row?`row_${xi(m)}`:"")+(r.column?`column_${xi(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(zu(b,["data"]))}const h=je(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return pR(r)&&t.columns&&(t=zu(t,["columns"]),Je(zme("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=fge({parentProjection:o,projection:i}),l=cge({parentEncoding:s,encoding:K9(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=K9(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Je($Kt([...r?[tm]:[],...i?[nm]:[]]));const o={},a={};for(const u of[tm,nm]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:$Jt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:cge({parentEncoding:n,encoding:s,layer:!0}),parentProjection:fge({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function cge({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ye(e),...Ye(t)]);for(const s of i){const o=t[s],a=e[s];if(un(o)){const u={...a,...o};r[s]=u}else mR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Yf(a)||Rt(a)||un(a)||je(a))&&(r[s]=a)}}else r=t;return!r||Mr(r)?void 0:r}function fge(e){const{parentProjection:t,projection:n}=e;return t&&n&&Je(SKt({parentProjection:t,projection:n})),n??t}function cre(e){return"filter"in e}function FJt(e){return(e==null?void 0:e.stop)!==void 0}function f4e(e){return"lookup"in e}function jJt(e){return"data"in e}function BJt(e){return"param"in e}function UJt(e){return"pivot"in e}function zJt(e){return"density"in e}function VJt(e){return"quantile"in e}function HJt(e){return"regression"in e}function qJt(e){return"loess"in e}function WJt(e){return"sample"in e}function GJt(e){return"window"in e}function YJt(e){return"joinaggregate"in e}function KJt(e){return"flatten"in e}function XJt(e){return"calculate"in e}function d4e(e){return"bin"in e}function QJt(e){return"impute"in e}function JJt(e){return"timeUnit"in e}function ZJt(e){return"aggregate"in e}function eZt(e){return"stack"in e}function tZt(e){return"fold"in e}function nZt(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function rZt(e){return e.map(t=>cre(t)?{filter:Qw(t.filter,RXt)}:t)}class iZt extends lre{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=dge(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=dge(t,n),t.encoding){const r={};for(const[i,s]of ay(t.encoding))r[i]=h4e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:ay(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Oo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function dge(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(cre(s))return{filter:MH(s,t)};if(d4e(s)&&Wb(s.bin))return{...s,bin:p4e(s.bin)};if(f4e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function h4e(e,t){var r,i;const n=tn(e);if(Ze(n)&&Wb(n.bin)&&(n.bin=p4e(n.bin)),Xb(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(V4(n))if(je(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:MH(s,t)}});else{const{selection:s,param:o,test:a,...u}=h4e(n.condition,t);n.condition=o?n.condition:{...u,test:MH(n.condition,t)}}return n}function p4e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function MH(e,t){const n=r=>Qw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Qw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class LH extends lre{map(t,n){const r=n.selections??[];if(t.params&&!og(t)){const i=[];for(const s of t.params)ore(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(pt(a)&&(a===t.name||i.includes(a))||je(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=LH.prototype[e];LH.prototype[e]=function(n,r){return t.call(this,n,sZt(n,r))}}function sZt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function m4e(e,t){t===void 0&&(t=o4e(e.config));const n=lZt(e,t),{width:r,height:i}=e,s=cZt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const oZt=new LJt,aZt=new iZt,uZt=new LH;function lZt(e,t={}){const n={config:t};return uZt.map(oZt.map(aZt.map(e,n),n),n)}function hge(e){return pt(e)?{type:e}:e??{}}function cZt(e,t,n){let{width:r,height:i}=t;const s=og(e)||X4(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Je(Fme("width")),r=void 0),i=="container"&&(Je(Fme("height")),i=void 0));const a={type:"pad",...o,...n?hge(n.autosize):{},...hge(e.autosize)};if(a.type==="fit"&&!s&&(Je(aKt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Je(jme("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Je(jme("height")),!Sl(a,{type:"pad"}))return a}function fZt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function dZt(e){return e?`fit-${P4(e)}`:"fit"}const hZt=["background","padding"];function pge(e,t){const n={};for(const r of hZt)e&&e[r]!==void 0&&(n[r]=yl(e[r]));return t&&(n.params=e.params),n}class ag{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ag(tn(this.explicit),tn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return us(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ye(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Id(e){return{explicit:!0,value:e}}function ll(e){return{explicit:!1,value:e}}function g4e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:Q4(t,n,r,i)}}function Q4(e,t,n,r){return e.explicit&&t.explicit&&Je(GKt(n,r,e.value,t.value)),e}function cy(e,t,n,r,i=Q4){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Sl(e.value,t.value)?e:i(e,t,n,r)}class pZt extends ag{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function gx(e){return"url"in e}function vI(e){return"values"in e}function y4e(e){return"name"in e&&!gx(e)&&!vI(e)&&!A0(e)}function A0(e){return e&&(v4e(e)||b4e(e)||fre(e))}function v4e(e){return"sequence"in e}function b4e(e){return"sphere"in e}function fre(e){return"graticule"in e}var bi;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(bi||(bi={}));function _4e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=$c(i.field),i}function fb(e,t=!0,n=_a){if(je(e)){const r=e.map(i=>fb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Gb(e))return n(t?ab(e):vXt(e));return t?n(Lr(e)):e}function mZt(e,t){for(const n of Oo(e.component.selection??{})){const r=n.name;let i=`${r}${dy}, ${n.resolve==="global"?"true":`{unit: ${_1(e)}}`}`;for(const s of t5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+GZt,on:[{events:{signal:n.name+dy},update:`modify(${nt(n.name+db)}, ${i})`}]})}return dre(t)}function gZt(e,t){if(e.component.selection&&Ye(e.component.selection).length){const n=nt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:jy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return dre(t)}function yZt(e,t){let n=!1;for(const r of Oo(e.component.selection??{})){const i=r.name,s=nt(i+db);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${F4e}(${s}, ${nt(a)}${u}`})}n=!0;for(const a of t5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),dre(t)}function vZt(e,t){const n=[...t],r=_1(e,{escape:!1});for(const i of Oo(e.component.selection??{})){const s={name:i.name+db};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Kf}}]),i.init){const a=i.project.items.map(_4e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Kf]:fb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:fb(u,!1)}))}n.filter(a=>a.name===i.name+db).length||n.push(s)}return n}function w4e(e,t){for(const n of Oo(e.component.selection??{}))for(const r of t5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function bZt(e,t){for(const n of e.children)qi(n)&&(t=w4e(n,t));return t}function _Zt(e,t,n,r){const i=V4e(e,t.param,t);return{signal:Vl(n.get("type"))&&je(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function dre(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Dr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Je(wKt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Hu extends Dr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${y6e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function X9(e){return e.as!==void 0}function mge(e){return`${e}_end`}class hh extends Dr{clone(){return new hh(null,tn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(Yb(u)){if(qi(n)){const{mark:c,markDef:f,config:d}=n,h=ly({fieldDef:s,markDef:f,config:d});(yI(c)||h)&&(l={timeUnit:lo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(qi(n)){const{mark:c,markDef:f,config:d}=n,h=ly({fieldDef:s,markDef:f,config:d});yI(c)&&ls(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[zn(l)]=l)}return i},{});return Mr(r)?null:new hh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=lo(r),o={...i,timeUnit:s};return new hh(t,{[zn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of ay(this.timeUnits)){const s=X9(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Oo(this.timeUnits).map(t=>X9(t)?t.as:mge(t.field)))}dependentFields(){return new Set(Oo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${zn(this.timeUnits)}`}assemble(){const t=[];for(const n of Oo(this.timeUnits)){const{rectBandPosition:r}=n,i=lo(n.timeUnit);if(X9(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:$c(s),type:"timeunit",...a?{units:M4(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...gge(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=E4e({timeUnit:i,field:o}),u=mge(o);t.push({type:"formula",expr:a,as:u}),t.push(...gge([o,u],r,i))}}return t}}const J4="offsetted_rect_start",Z4="offsetted_rect_end";function E4e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=Z6e(r),{part:o,step:a}=rFe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function gge([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:yge([E4e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${J4}`},{type:"formula",expr:yge([i,s],n+.5),as:`${e}_${Z4}`}]}return[]}function yge([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const vR="_tuple_fields";class wZt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const EZt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new wZt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=xi(`${r}_${g}`);for(let v=1;a.has(y);v++)y=xi(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?ht(n.value):null;let{fields:d,encodings:h}=mt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(mt(p))for(const m of Ye(p))MYt(m)?(h||(h=[])).push(m):l==="interval"?(Je(yKt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Je(uKt(p,m.aggregate));continue}else if(!g){Je(Ume(p));continue}if(m.timeUnit&&!Yb(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[zn(y)]=y}if(!s[g]){const y=l==="interval"&&sg(p)&&Vl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Kf,x6e(p)?(v.geoChannel=p,v.channel=E6e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Je(Ume(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Kf}f&&(t.init=f.map(p=>i.items.map(m=>mt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Mr(o)||(i.timeUnit=new hh(null,o))},signals:(e,t,n)=>{const r=t.name+vR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(_4e)})}},rm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!sg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Je(dKt),!s||!Vl(o)){Je(fKt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||vge(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(F4e)>=0)i.update=`{${r.map(o=>`${nt($c(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${nt($c(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!vge(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function FH(e,t){return`domain(${nt(e.scaleName(t))})`}function vge(e){return e.parent&&FS(e.parent)&&!e.parent.parent}const eE="_brush",x4e="_scale_trigger",FT="geo_interval_init_tick",S4e="_init",xZt="_center",SZt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...mt(n.select)?n.select:{}};i.fields=[Kf],i.encodings||(i.encodings=n.value?Ye(n.value):[ad,od]),n.select={type:"interval",...i}}if(t.translate&&!rm.defined(t)){const i=`!event.item || event.item.mark.name !== ${nt(t.name+eE)}`;for(const s of t.events){if(!s.between){Je(`${s} is not an ordered event stream for interval selections.`);continue}const o=ht((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+dy,s=Oo(t.project.hasChannel).filter(a=>a.channel===Si||a.channel===po),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(TZt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=nt(e.projectionName()),u=e.projectionName()+xZt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+S4e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${nt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${_1(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:FT}]:[]],update:b}]})}else{if(!rm.defined(t)){const l=r+x4e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=nt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Vl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${_1(e)}, fields: ${r+vR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${fb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(qi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===FT).length||n.unshift({name:FT,value:null,on:[{events:"timer{1}",update:`${FT} === null ? {} : ${FT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${nt(t.name+db)})`;if(rm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ye(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${_1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ye(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+eE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+eE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function TZt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=nt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Si?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=rm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:fb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+x4e},update:Vl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:fb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Si?0:1,h=t.name+S4e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const AZt={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+vR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Oo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+eE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${_1(e)}, `;if(t.project.hasSelectionId)l+=`${Kf}: ${o}[${nt(Kf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${nt(e.vgField(d.channel,{}))}], ${o}[${nt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${nt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+dy,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function OS(e,t,n,r){const i=V4(t)&&t.condition,s=r(t);if(i){const a=ht(i).map(u=>{const l=r(u);if(gQt(u)){const{param:c,empty:f}=u;return{test:z4e(e,{param:c,empty:f}),...l}}else return{test:_M(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function hre(e,t="text"){const n=e.encoding[t];return OS(e,n,t,r=>e5(r,e.config))}function e5(e,t,n="datum"){if(e){if(Yf(e))return li(e.value);if(un(e)){const{format:r,formatType:i}=hM(e);return Vne({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function T4e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(je(o))return{tooltip:bge({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return OS(e,o,"tooltip",u=>{const l=e5(u,i,a);if(l)return l;if(u===null)return;let c=br("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),pt(c))return{value:c};if(mt(c))return Rt(c)?c:c.content==="encoding"?bge(n,s,i,t):{signal:a}})}}function A4e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=qb(f),h=eu(c)?c:{...c,type:e[d].type},p=h.title||Xne(h,i),m=ht(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ls(f)){const y=f==="x"?"x2":"y2",v=Nh(e[y]);if(To(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:S}=hM(h);g=hR(b,w,E,S,i),s[y]=!0}}if((ls(f)||f===Gc||f===sd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=hM(h);g=Vne({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=e5(h,i,o).signal),a.push({channel:f,key:m,value:g})}Zne(e,(c,f)=>{Ze(c)?u(c,f):H4(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function bge(e,t,n,{reactiveGeom:r}={}){const i=A4e(e,t,n,{reactiveGeom:r}),s=ay(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function CZt(e){const{markDef:t,config:n}=e,r=br("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...IZt(e),...kZt(e)}}function IZt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=br("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in iKt?{}:{ariaRoleDescription:{value:t}}}function kZt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return OS(e,s,"description",u=>e5(u,e.config));const o=br("description",n,r);if(o!=null)return{description:li(o)};if(r.aria===!1)return{};const a=A4e(t,i,r);if(!Mr(a))return{description:{signal:ay(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function eo(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=br(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=li(u)));const l=i[e];return OS(t,l,o??e,c=>zne({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function C4e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??br("filled",n,i),a=Vn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=br(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=br(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:li(u)}:{},...l?{stroke:li(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Je(H6e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...eo("color",e,{vgChannel:c,defaultValue:o?u:l}),...eo("fill",e,{defaultValue:r.fill?u:void 0}),...eo("stroke",e,{defaultValue:r.stroke?l:void 0})}}function RZt(e){const{encoding:t,mark:n}=e,r=t.order;return!Kb(n)&&Yf(r)?OS(e,r,"zindex",i=>li(i.value)):{}}function yx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:zne({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:li(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function fa(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[ep(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=yx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=pre({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ls(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:NZt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function NZt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(un(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return lM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return v1(n,r,{suffix:"end"},{offset:s})}return Bne(e)}function pre({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=qb(n),u=uy(n),l=br(n,s,o,{vgChannel:u});if(l!==void 0)return PC(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Vn([Vu.LOG,Vu.TIME,Vu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[tl(n)],mult:.5}}}}const PZt={left:"x",center:"xc",right:"x2"},DZt={top:"y",middle:"yc",bottom:"y2"};function I4e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return uy(e);const i=e==="x"?"align":"baseline",s=br(i,t,n);let o;return Rt(s)?(Je(MKt(i)),o=void 0):o=s,e==="x"?PZt[o||(r==="top"?"left":"center")]:DZt[o||r]}function vM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?k4e(e,t,{defaultPos:n,defaultPos2:r}):fa(e,t,{defaultPos:n})}function k4e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=ep(e),a=tl(e),u=OZt(t,r,o),l=u[a]?I4e(e,i,s):uy(e);return{...fa(e,t,{defaultPos:n,vgChannel:l}),...u}}function OZt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=qb(n),l=tl(n),c=uy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?yx({channel:n,markDef:s,encoding:r,model:e}):yx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=tl(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=$Zt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:cP(n,s)||cP(n,{[n]:aM(n,s,a.style),[l]:aM(l,s,a.style)})||cP(n,a[i])||cP(n,a.mark)||{[c]:pre({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function $Zt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return un(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?v1(t,s,{suffix:"start"},{offset:u}):Bne({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function cP(e,t){const n=tl(e),r=uy(e);if(t[r]!==void 0)return{[r]:PC(e,t[r])};if(t[e]!==void 0)return{[r]:PC(e,t[e])};if(t[n]){const i=t[n];if(cb(i))Je(RKt(n));else return{[n]:PC(e,i)}}}function fy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=ep(t),a=tl(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??br("size",i,n,{vgChannel:a}),p=C6e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(ii(u.bin)||To(u.bin)||u.timeUnit&&!l)&&!(h&&!cb(h))&&!r[p]&&!co(f)?FZt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(un(u)&&co(f)||m)&&!l?LZt(u,t,e):k4e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function MZt(e,t,n,r,i,s,o){if(cb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=$m("minBandSize",{type:o},r);return{signal:c?`max(${Af(c)}, ${l})`:l}}else i.band!==1&&(Je(BKt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Wy(u)&&ur(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=us(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(ur(f))return{signal:`${1-f} * ${e}`}}return{value:gM(r.view,e)-2}}function LZt(e,t,n){var C,I;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=tl(t),f=ep(t),d=C6e(t),h=n.scaleName(d),p=n.getScaleComponent(_ne(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=eo("size",n,{vgChannel:c,defaultRef:li(r.size)}):Je(HKt(r.type)));const y=!!g,v=TFe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(C=l||p)==null?void 0:C.get("type"),useVlSizeChannel:m});g=g||{[c]:MZt(c,h||u,p||l,s,v,!!e,r.type)};const b=((I=l||p)==null?void 0:I.get("type"))==="band"&&cb(v)&&!y?"top":"middle",w=I4e(t,r,s,b),E=w==="xc"||w==="yc",{offset:S,offsetType:T}=yx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),A=Bne({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:pre({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?T==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:cb(v)?(1-v.band)/2:0});if(c)return{[w]:A,...g};{const R=uy(f),O=g[c],P=S?{...O,offset:S}:O;return{[w]:A,[R]:je(A)?[A[0],{...A[1],offset:P}]:{...A,offset:P}}}}function _ge(e,t,n,r,i,s,o){if(w6e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=Af(n),c=Af(i),f=Af(r),d=Af(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function FZt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var I;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=TFe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(I=r.component.axes[n])==null?void 0:I[0],h=(d==null?void 0:d.get("translate"))??.5,p=ls(n)?br("binSpacing",s,i)??0:0,m=ep(n),g=uy(n),y=uy(m),v=$m("minBandSize",s,i),{offset:b}=yx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=yx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=KXt({fieldDef:e,scaleName:u}),S=_ge(n,p,c,h,b,v,E),T=_ge(m,p,c,h,w??b,v,E),A=Rt(f)?{signal:`(1-${f.signal})/2`}:cb(f)?(1-f.band)/2:.5,C=ly({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ii(e.bin)||e.timeUnit){const R=e.timeUnit&&C!==.5;return{[y]:wge({fieldDef:e,scaleName:u,bandPosition:A,offset:T,useRectOffsetField:R}),[g]:wge({fieldDef:e,scaleName:u,bandPosition:Rt(A)?{signal:`1-${A.signal}`}:1-A,offset:S,useRectOffsetField:R})}}else if(To(e.bin)){const R=v1(e,u,{},{offset:T});if(Ze(t))return{[y]:R,[g]:v1(t,u,{},{offset:S})};if(Wb(e.bin)&&e.bin.step)return{[y]:R,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}Je(G6e(m))}function wge({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return lM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:J4,endSuffix:Z4}:{}})}const jZt=new Set(["aria","width","height"]);function Yc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?C4e(e):{};return{...BZt(e.markDef,t),...Ege(e,"fill",n),...Ege(e,"stroke",r),...eo("opacity",e),...eo("fillOpacity",e),...eo("strokeOpacity",e),...eo("strokeWidth",e),...eo("strokeDash",e),...RZt(e),...T4e(e),...hre(e,"href"),...CZt(e)}}function Ege(e,t,n){const{config:r,mark:i,markDef:s}=e;if(br("invalid",s,r)==="hide"&&n&&!Kb(i)){const a=UZt(e,{invalid:!0,channels:D4});if(a)return{[t]:[{test:a,value:null},...ht(n)]}}return n?{[t]:n}:{}}function BZt(e,t){return rKt.reduce((n,r)=>(!jZt.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=li(e[r])),n),{})}function UZt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Vl(u)&&(s[l]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Une(o,t)).join(` ${s} `)}}function mre(e){const{config:t,markDef:n}=e;if(br("invalid",n,t)){const i=zZt(e,{channels:tp});if(i)return{defined:{signal:i}}}return{}}function zZt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Vl(l)&&(s[c]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Une(o,t)).join(` ${s} `)}}function xge(e,t){if(t!==void 0)return{[e]:li(t)}}const Q9="voronoi",R4e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Q9)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Kb(s))return Je(lKt(s)),n;const o={name:e.getName(Q9),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...T4e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(Q9)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},N4e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!sre(e.bind),parse:(e,t,n)=>j4e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=R4e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=xi(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:fb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${nt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+dy)[0],o=r+vR,a=i.items.map(l=>xi(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},bM="_toggle",P4e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+bM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+dy,r=t.name+bM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${_1(e)}}, `)+`${r} ? ${n} : null`}},VZt={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=pt(t.clear)?jy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(N4e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===xi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+dy);r(i,"null"),P4e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+bM),r(i,"false"))}return n}},D4e={defined:e=>{const t=e.resolve==="global"&&e.bind&&sre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Kf;return t&&!n&&Je(hKt),t&&n},parse:(e,t,n)=>{const r=tn(n);if(r.select=pt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},j4e(t,r),mt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=ht(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=G9(t.bind)?t.bind.legend:"click",s=pt(i)?jy(i,"view"):ht(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=G9(t.bind)&&t.bind.legend,s=o=>a=>{const u=tn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${xi(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+dy),o=r+vR,a=i.items.filter(d=>d.hasLegend).map(d=>xi(`${r}_${xi(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+bM),f=G9(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function HZt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Oo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&D4e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const O4e="_translate_anchor",$4e="_translate_delta",qZt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=rm.defined(t),s=r+O4e,{x:o,y:a}=t.project.hasChannel;let u=jy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+eE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?FH(e,Si):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?FH(e,po):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+$4e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Sge(e,t,o,"width",n),a!==void 0&&Sge(e,t,a,"height",n),n}};function Sge(e,t,n,r,i){const s=t.name,o=s+O4e,a=s+$4e,u=n.channel,l=rm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Si?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const M4e="_zoom_anchor",L4e="_zoom_delta",WZt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=rm.defined(t),s=r+L4e,{x:o,y:a}=t.project.hasChannel,u=nt(e.scaleName(Si)),l=nt(e.scaleName(po));let c=jy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+eE,f))),n.push({name:r+M4e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Tge(e,t,o,"width",n),a!==void 0&&Tge(e,t,a,"height",n),n}};function Tge(e,t,n,r,i){const s=t.name,o=n.channel,a=rm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?FH(e,o):u.name,h=s+L4e,p=`${s}${M4e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const db="_store",dy="_tuple",GZt="_modify",F4e="vlSelectionResolve",t5=[AZt,SZt,EZt,P4e,N4e,rm,D4e,VZt,qZt,WZt,R4e];function YZt(e){let t=e.parent;for(;t&&!Il(t);)t=t.parent;return t}function _1(e,{escape:t}={escape:!0}){let n=t?nt(e.name):e.name;const r=YZt(e);if(r){const{facet:i}=r;for(const s of _c)i[s]&&(n+=` + '__facet_${s}_' + (facet[${nt(r.vgField(s))}])`)}return n}function gre(e){return Oo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function j4e(e,t){(pt(t.select)||!t.select.on)&&delete e.events,(pt(t.select)||!t.select.clear)&&delete e.clear,(pt(t.select)||!t.select.toggle)&&delete e.toggle}function jH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...jH(e.object)),t.push(...jH(e.property))),t)}function B4e(e){return e.object.type==="MemberExpression"?B4e(e.object):e.object.name==="datum"}function U4e(e){const t=Mte(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&B4e(r)&&n.add(jH(r).slice(1).join("."))}),n}class $S extends Dr{clone(){return new $S(null,this.model,tn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=_M(this.model,this.filter,this),this._dependentFields=U4e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function KZt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=xi(i.name),o=i.select,a=pt(o)?o:o.type,u=mt(o)?tn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=tn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:pt(u.on)?jy(u.on,"scope"):ht(tn(u.on))},f=tn(i);for(const d of t5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function z4e(e,t,n,r="datum"){const i=pt(t)?t:t.param,s=xi(i),o=nt(s+db);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${nt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function V4e(e,t,n){const r=xi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Je(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${nt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Je((a.length?"Multiple ":"No ")+`matching ${nt(i)} encoding found for selection ${nt(n.param)}. Using "field": ${nt(s)}.`)):s=a[0].field}return`${o.name}[${nt($c(s))}]`}function XZt(e,t){for(const[n,r]of ay(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Hu(new $S(t,e,{param:n}),i,bi.Lookup,e.component.data.outputNodeRefCounts)}}function _M(e,t,n){return NC(t,r=>pt(r)?r:CXt(r)?z4e(e,r,n):sFe(r))}function QZt(e,t){if(e)return je(e)&&!Rg(e)?e.map(n=>Xne(n,t)).join(", "):e}function J9(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function NA(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=RQt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(yR(m)){const{condition:g,...y}=m,v=ht(g),b=Zme[h];if(b){const{vgProp:w,part:E}=b,S=[...v.map(T=>{const{test:A,...C}=T;return{test:_M(null,A),...C}}),y];J9(c,E,w,S),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:S,...T}=E;return`${_M(null,S)} ? ${Lme(T)} : `}).join("")+Lme(y)};c[h]=w}}else if(Rt(m)){const g=Zme[h];if(g){const{vgProp:y,part:v}=g;J9(c,v,y,m),delete c[h]}}Vn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Mr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:us(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=sb(a,"datum.label",c.encode.labels.update.text.signal)),J9(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of $Fe)e.hasAxisPart(p)||delete c.encode[p];Mr(c.encode)&&delete c.encode}const h=QZt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:us(l,0)}}}}function H4e(e){const{axes:t}=e.component,n=[];for(const r of tp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function JZt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>NA(i,"grid",t)),...r.map(i=>NA(i,"grid",t)),...n.map(i=>NA(i,"main",t)),...r.map(i=>NA(i,"main",t))].filter(i=>i)}function Age(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ye(o),...Ye(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Af(o[c])} : ${Af(a[c])}`};return l}return t[i]})])}function ZZt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:lFe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${aR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Age(a,r,e,n),vgAxisConfig:Age(u,r,e,n),axisConfigStyle:een([...u,...a],r)}}function een(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=ht(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function BH(e,t,n,r={}){var s;const i=L6e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Cge={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??ten(n,e),gridScale:({model:e,channel:t})=>nen(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||W4e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||q4e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??ien(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??sen(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??aen({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:uen,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=G4e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return j6e(i?[Qme(i)]:[],Ze(o)?[Qme(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>len(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??cen(n,t)};function ten(e,t){return!co(e)&&Ze(t)&&!ii(t==null?void 0:t.bin)&&!To(t==null?void 0:t.bin)}function nen(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function ren(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:gI(s);{const{configValue:o}=BH("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?gI(o):n===Si&&Vn([jne,Fne],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function UH(e){return`(((${e.signal} % 360) + 360) % 360)`}function q4e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=UH(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=UH(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function W4e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=UH(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function ien(e,t){if(t==="x"&&Vn(["quantitative","temporal"],e))return!0}function sen(e,t,n,r){if(n&&!mt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function oen(e){return e==="x"?"bottom":"left"}function aen({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!co(t)&&t!=="log"){if(Ze(e)){if(ii(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Vn(["month","hours","day","quarter"],(i=lo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function uen({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=nFe(n);if(r)return{signal:r}}}}function G4e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return B6e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function len(e,t){const n=e.values;if(je(n))return OFe(t,n);if(Rt(n))return n}function cen(e,t){return e==="rect"&&dM(t)?1:0}class vx extends Dr{clone(){return new vx(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=U4e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Xb(r)&&SFe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${sFe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new vx(t,{calculate:u,as:bx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${zn(this.transform)}`}}function bx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function n5(e,t){return Vn(["top","bottom"],t)?"column":Vn(["left","right"],t)||e==="row"?"row":"column"}function _x(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return us((t||{})[e],i[e],n.header[e])}function r5(e,t,n,r){const i={};for(const s of e){const o=_x(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const yre=["row","column"],vre=["header","footer"];function fen(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=r5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=n5(t,a),l=gI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...K4e(l,u),...Y4e(u,l,s),...X4e(r,i,t,JQt,JFe)}}}function Y4e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=W4e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function K4e(e,t){const n=q4e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function den(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of vre)if(n[i])for(const s of n[i]){const o=pen(e,t,i,n,s);o!=null&&r.push(o)}return r}function hen(e,t){const{sort:n}=e;return dh(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:je(n)?{field:bx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function zH(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=r5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Vne({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=n5(t,a);return{text:{signal:u?sb(sb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...K4e(s,c),...Y4e(c,s,o),...X4e(n,e,t,ZQt,ZFe)}}function pen(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=r5(["labelOrient"],o.header,a,t);(t==="row"&&!Vn(["top","bottom"],f)||t==="column"&&!Vn(["left","right"],f))&&(s=zH(o,t,a))}const u=Il(e)&&!pR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:hen(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const men={column:{start:0,end:1},row:{start:1,end:0}};function gen(e,t){return men[t][e]}function yen(e,t){const n={};for(const r of _c){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=r5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=n5(r,o),u=gen(s,a);u!==void 0&&(n[a]=u)}}return Mr(n)?void 0:n}function X4e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=_x(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function bre(e){return[...fP(e,"width"),...fP(e,"height"),...fP(e,"childWidth"),...fP(e,"childHeight")]}function fP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(co(o)&&Wy(a)){const u=e.scaleName(n);return Il(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Ige(u,a)]:[Ige(u,a),{name:i,update:Q4e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=OH(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Ige(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function Q4e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=us(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Af(o)}, ${Af(s)}) * ${e}_step`}function J4e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function Z4e(e,t){return Ye(e).reduce((n,r)=>{const i=e[r];return{...n,...OS(t,i,r,s=>li(s.value))}},{})}function e5e(e,t){if(Il(t))return e==="theta"?"independent":"shared";if(FS(t))return"shared";if(Are(t))return ls(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function _re(e,t){const n=e.scale[t],r=ls(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Je(KKt(t)),"independent"):e[r][t]||"shared"}const ven={...nJt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},t5e=Ye(ven);class ben extends ag{}const kge={symbols:_en,gradient:wen,labels:Een,entries:xen};function _en(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...oKt({},n,sQt),...C4e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?n5e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Zu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=li(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=li(m??1));else if(je(f.fill)){const g=VH(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=li(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Zu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(je(f.stroke)){const g=us(VH(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==ig){const g=Ze(t)&&i5e(n,i,t);g?f.opacity=[{test:g,...li(m??1)},li(u.legend.unselectedOpacity)]:m&&(f.opacity=li(m))}return f={...f,...e},Mr(f)?void 0:f}function wen(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?n5e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=li(l)),a={...a,...e},Mr(a)?void 0:a}function Een(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?i5e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;lb(c)?f=If({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=If({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=If({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Mr(d)?void 0:d}function xen(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function n5e(e){return r5e(e,(t,n)=>Math.max(t,n.value))}function VH(e){return r5e(e,(t,n)=>us(t,n.value))}function r5e(e,t){if(vQt(e))return ht(e.condition).reduce(t,e.value);if(Yf(e))return e.value}function i5e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=nt(n.field);return r.map(s=>`(!length(data(${nt(xi(s)+db)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Rge={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return mFe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return gFe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Ren(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Nen(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Ten(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Zw(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Jw(n)&&Cf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Sen(t,e)};function Sen(e,t){const n=e.values;if(je(n))return OFe(t,n);if(Rt(n))return n}function Ten(e,t,n,r){if(t!=="shape"){const i=VH(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Aen(e){const{legend:t}=e;return us(t.type,Cen(e))}function Cen({channel:e,timeUnit:t,scaleType:n}){if(Jw(e)){if(Vn(["quarter","month","day"],t))return"symbol";if(Cf(n))return"gradient"}return"symbol"}function Ien({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??ken(n,t)}function ken(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Ren({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Cf(i))return n==="horizontal"?r==="top"||r==="bottom"?Nge(t,"width",o,s):o:Nge(t,"height",u,a)}function Nge(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Nen(e){if(Vn(["quantile","threshold","log","symlog"],e))return"greedy"}function s5e(e){const t=qi(e)?Pen(e):Men(e);return e.component.legends=t,t}function Pen(e){const{encoding:t}=e,n={};for(const r of[Zu,...t4e]){const i=Os(t[r]);!i||!e.getScaleComponent(r)||r===el&&Ze(i)&&i.type===DS||(n[r]=$en(e,r))}return n}function Den(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Oen(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function $en(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new ben({},Den(e,t));HZt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Os(i[t]),f=Ze(c)?(w=lo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=Aen({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Ien({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of t5e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const S=E in Rge?Rge[E](m):n[E];if(S!==void 0){const T=Oen(S,E,n,e.fieldDef(t));(T||s.legend[E]===void 0)&&a.set(E,S,T)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const S=Z4e(g[E]??{},e),T=E in kge?kge[E](S,b):S;T!==void 0&&!Mr(T)&&(v[E]={...y!=null&&y.length&&Ze(c)?{name:`${xi(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:T})}return Mr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Men(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){s5e(r);for(const i of Ye(r.component.legends))n.legend[i]=_re(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=o5e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ye(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function o5e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of t5e){const c=cy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Len(f,d);case"title":return U6e(f,d);case"type":return i=!0,ll("symbol")}return Q4(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&oM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&oM(e.explicit,["encode","gradient"])),e}function Len(e,t){return t.value==="circle"?t:e}function Fen(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function a5e(e){const t=e.component.legends,n={};for(const i of Ye(t)){const s=e.getScaleComponent(i),o=Lr(s.get("domains"));if(n[o])for(const a of n[o])o5e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Oo(n).flat().map(i=>jen(i,e.config)).filter(i=>i!==void 0)}function jen(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of t4e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=sb(r,"datum.label",s.encode.labels.update.text.signal)),Fen(s,"labels","text",{signal:l})}return s}}function Ben(e){return FS(e)||Are(e)?Uen(e):u5e(e)}function Uen(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),u5e(e))}function u5e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Vn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const zen=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class l5e extends ag{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function c5e(e){e.component.projection=qi(e)?Ven(e):Wen(e)}function Ven(e){if(e.hasProjection){const t=Tu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Hen(e):void 0,s=new l5e(e.projectionName(!0),{...Tu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Hen(e){const t=[],{encoding:n}=e;for(const r of[[ad,od],[Mc,ud]])(Os(n[r[0]])||Os(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(el)&&e.typedFieldDef(el).type===DS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(bi.Main)),t}function qen(e,t){const n=hne(zen,i=>!!(!Ft(e.explicit,i)&&!Ft(t.explicit,i)||Ft(e.explicit,i)&&Ft(t.explicit,i)&&Sl(e.get(i),t.get(i))));if(Sl(e.size,t.size)){if(n)return e;if(Sl(e.explicit,{}))return t;if(Sl(t.explicit,{}))return e}return null}function Wen(e){if(e.children.length===0)return;let t;for(const r of e.children)c5e(r);const n=hne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=qen(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new l5e(r,t.specifiedProjection,t.size,tn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Gen(e,t,n,r){if(gR(t,n)){const i=qi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:hR(s,o,i.format,i.formatType,r)}}return{}}function f5e(e,t){return`${D6e(e)}_${t}`}function Yen(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function wre(e,t,n){const r=q4(n,void 0)??{},i=f5e(r,t);return e.getName(`${i}_bins`)}function Ken(e){return"as"in e}function Pge(e,t,n){let r,i;Ken(e)?r=pt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...q4(t,void 0)},o=f5e(s,e.field),{signal:a,extentSignal:u}=Yen(n,o);if(O4(s.extent)){const c=s.extent;i=V4e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class ph extends Dr{clone(){return new ph(null,tn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(eu(s)&&ii(s.bin)){const{key:a,binComponent:u}=Pge(s,s.bin,n);i[a]={...u,...i[a],...Gen(n,s,o,n.config)}}return i},{});return Mr(r)?null:new ph(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Pge(n,n.bin,r);return new ph(t,{[i]:s})}merge(t,n){for(const r of Ye(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Qd([...this.bins[r].as,...t.bins[r].as],zn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Oo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Oo(this.bins).map(t=>t.field))}hash(){return`Bin ${zn(this.bins)}`}assemble(){return Oo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:$c(t.field),as:r,signal:t.signal,...O4(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:$c(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Xen(e,t,n,r){var s;const i=qi(r)?r.encoding[ep(t)]:void 0;if(eu(n)&&qi(r)&&AFe(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=ly({fieldDef:n,markDef:a,config:u});yI(o)&&l!==.5&&ls(t)&&(e.add(at(n,{suffix:J4})),e.add(at(n,{suffix:Z4}))),n.bin&&gR(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(x6e(t)){const o=E6e(t);e.add(r.getName(o))}else e.add(at(n));return Xb(n)&&BXt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Qen(e,t){for(const n of Ye(t)){const r=t[n];for(const i of Ye(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Lf extends Dr{clone(){return new Lf(null,new Set(this.dimensions),tn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Om(u)||qy(u)){const c=Om(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);sg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else Xen(s,a,o,n)}),s.size+Ye(i).length===0)?null:new Lf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ye(i).length===0?null:new Lf(t,r,i)}merge(t){return p6e(this.dimensions,t.dimensions)?(Qen(this.measures,t.measures),!0):(fXt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ye(this.measures)])}producedFields(){const t=new Set;for(const n of Ye(this.measures))for(const r of Ye(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${zn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ye(this.measures))for(const o of Ye(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:$c(s));return{type:"aggregate",groupby:[...this.dimensions].map($c),ops:t,fields:n,as:r}}}class MS extends Dr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of _c){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...ii(a)?[at(o,{binSuffix:"end"})]:[]],...dh(u)?{sortField:u}:je(u)?{sortIndexField:bx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of _c)this[n]&&(t+=` ${n.charAt(0)}:${zn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of _c)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of _c)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of tp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(co(i)&&Wy(s)){const o=i5(this.childModel,n),a=Tre(o);a?t[n]=a:Je(Ane(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=U4,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of yre){for(const c of vre){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[nm,tm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Dge(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Jen(e,t){const n=gne(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Dge(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Dge(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Je(_Kt(t)),null}function Zen(e){const t={};return jD(e.filter,n=>{if(iFe(n)){let r=null;Rne(n)?r=yl(n.equal):Pne(n)?r=yl(n.lte):Nne(n)?r=yl(n.lt):Dne(n)?r=yl(n.gt):One(n)?r=yl(n.gte):$ne(n)?r=n.range[0]:Mne(n)&&(r=(n.oneOf??n.in)[0]),r&&(Gb(r)?t[n.field]="date":ur(r)?t[n.field]="number":pt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function etn(e){const t={};function n(r){mx(r)?t[r.field]="date":r.type==="quantitative"&&QYt(r.aggregate)?t[r.field]="number":ux(r.field)>1?r.field in t||(t[r.field]="flatten"):Xb(r)&&dh(r.sort)&&ux(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((qi(e)||Il(e))&&e.forEachFieldDef((r,i)=>{if(eu(r))n(r);else{const s=qb(i),o=e.fieldDef(s);n({...r,type:o.type})}}),qi(e)){const{mark:r,markDef:i,encoding:s}=e;if(Kb(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function ttn(e){const t={};if(qi(e)&&e.component.selection)for(const n of Ye(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&ux(i.field)>1&&(t[i.field]="flatten")}return t}class da extends Dr{clone(){return new da(null,tn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${zn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!A0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ye(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Je(Vme(a,r[a],u.value)))}for(const a of Ye(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Je(Vme(a,n[a],u)))}const s=new ag(n,r);i.copyAll(s);const o={};for(const a of Ye(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ye(o).length===0||i.parseNothing?null:new da(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ye(this._parse)){const r=this._parse[n];ux(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ye(this._parse))}dependentFields(){return new Set(Ye(this._parse))}assembleTransforms(t=!1){return Ye(this._parse).filter(n=>t?ux(n)>1:!0).map(n=>{const r=Jen(n,this._parse[n]);return r?{type:"formula",expr:r,as:NS(n)}:null}).filter(n=>n!==null)}}class hy extends Dr{clone(){return new hy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Kf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Kf}}}class bR extends Dr{clone(){return new bR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${zn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class _R extends Dr{clone(){return new _R(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${zn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class hb extends Dr{constructor(t){super(null),t??(t={name:"source"});let n;if(A0(t)||(n=t.format?{...zu(t.format,["parse"])}:{}),vI(t))this._data={values:t.values};else if(gx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Vn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else b4e(t)?this._data={values:[{type:"Sphere"}]}:(y4e(t)||A0(t))&&(this._data={});this._generator=A0(t),t.name&&(this._name=t.name),n&&!Mr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Oge=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ntn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},PA;function Ere(e){return e instanceof hb||e instanceof bR||e instanceof _R}class xre{constructor(){PA.set(this,void 0),Oge(this,PA,!1,"f")}setModified(){Oge(this,PA,!0,"f")}get modifiedFlag(){return ntn(this,PA,"f")}}PA=new WeakMap;class Qb extends xre{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Sre extends xre{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class rtn extends Sre{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ye(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class itn extends Sre{constructor(t){super(),this.requiresSelectionId=t&&gre(t)}run(t){t instanceof hy&&(this.requiresSelectionId&&(Ere(t.parent)||t.parent instanceof Lf||t.parent instanceof da)||(this.setModified(),t.remove()))}}class stn extends xre{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof hh&&(r=t.producedFields(),pne(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class otn extends Sre{constructor(){super()}run(t){t instanceof Hu&&!t.isRequired()&&(this.setModified(),t.remove())}}class atn extends Qb{run(t){if(!Ere(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof da)if(t instanceof da)this.setModified(),t.merge(n);else{if(mne(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class utn extends Qb{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof da);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ye(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Mr(i)){this.setModified();const o=new da(t,i);for(const a of n){if(a instanceof da)for(const u of Ye(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof da&&Ye(a.parse).length===0&&a.remove()}}}}}class ltn extends Qb{run(t){t instanceof Hu||t.numChildren()>0||t instanceof MS||t instanceof hb||(this.setModified(),t.remove())}}class ctn extends Qb{run(t){const n=t.children.filter(i=>i instanceof hh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class ftn extends Qb{run(t){const n=t.children.filter(i=>i instanceof Lf),r={};for(const i of n){const s=zn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ye(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class dtn extends Qb{constructor(t){super(),this.model=t}run(t){const n=!(Ere(t)||t instanceof $S||t instanceof da||t instanceof hy),r=[],i=[];for(const s of t.children)s instanceof ph&&(n&&!mne(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof ph?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class htn extends Qb{run(t){const n=[...t.children];if(!ib(n,o=>o instanceof Hu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Hu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Hu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Jb extends Dr{clone(){return new Jb(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Qd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function ptn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function mtn(e){return je(e)&&e.every(t=>pt(t))&&e.length>1}class im extends Dr{clone(){return new im(null,tn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(us(f.order,"ascending"));const l={field:a,order:u};let c;return mtn(s)?c=s:pt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new im(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Nh(p)}).filter(h=>!!h),c=ptn(n),f=n.encoding.order;let d;if(je(f)||Ze(f))d=F6e(f);else{const h=CFe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new im(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${zn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class LS extends Dr{clone(){return new LS(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Qd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Sne(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function gtn(e){function t(n){if(!(n instanceof MS)){const r=n.clone();if(r instanceof Hu){const i=qH+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Lf||r instanceof im||r instanceof LS||r instanceof Jb)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function HH(e){if(e instanceof MS)if(e.numChildren()===1&&!(e.children[0]instanceof Hu)){const t=e.children[0];(t instanceof Lf||t instanceof im||t instanceof LS||t instanceof Jb)&&t.addDimensions(e.fields),t.swapWithParent(),HH(e)}else{const t=e.model.component.data.main;d5e(t);const n=gtn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(HH)}function d5e(e){if(e instanceof Hu&&e.type===bi.Main&&e.numChildren()===1){const t=e.children[0];t instanceof MS||(t.swapWithParent(),d5e(e))}}const qH="scale_",dP=5;function WH(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!WH(t.children))return!1}return!0}function Zc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function $ge(e,t,n){let r=e.sources,i=!1;return i=Zc(new otn,r)||i,i=Zc(new itn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Zc(new ltn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Zc(new atn,r)||i,i=Zc(new dtn(t),r)||i,i=Zc(new stn,r)||i,i=Zc(new utn,r)||i,i=Zc(new ftn,r)||i,i=Zc(new ctn,r)||i,i=Zc(new rtn,r)||i,i=Zc(new htn,r)||i),e.sources=r,i}function ytn(e,t){WH(e.sources);let n=0,r=0;for(let i=0;i<dP&&$ge(e,t,!0);i++)n++;e.sources.map(HH);for(let i=0;i<dP&&$ge(e,t,!1);i++)r++;WH(e.sources),Math.max(n,r)===dP&&Je(`Maximum optimization runs(${dP}) reached.`)}class Js{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Js(()=>t(n))}}function h5e(e){qi(e)?vtn(e):btn(e)}function vtn(e){const t=e.component.scales;for(const n of Ye(t)){const r=wtn(e,n);if(t[n].setWithExplicit("domains",r),xtn(e,n),e.component.data.isFaceted){let s=e;for(;!Il(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)qp(a)&&(a.data=qH+a.data.replace(qH,""))}}}function btn(e){for(const n of e.children)h5e(n);const t=e.component.scales;for(const n of Ye(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=cy(r,o.getWithExplicit("domains"),"domains","scale",GH);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Je(gKt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function _tn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Mge(t,n);if(!i){Je(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Mge(t,n);if(i)return"unaggregated"}return e}function wtn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=_tn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Os(r.x2)?Os(r.x)?cy(wg(n,i,e,"x"),wg(n,i,e,"x2"),"domain","scale",GH):wg(n,i,e,"x2"):t==="y"&&Os(r.y2)?Os(r.y)?cy(wg(n,i,e,"y"),wg(n,i,e,"y2"),"domain","scale",GH):wg(n,i,e,"y2"):wg(n,i,e,t)}function Etn(e,t,n){return e.map(r=>({signal:`{data: ${W4(r,{timeUnit:n,type:t})}}`}))}function Z9(e,t,n){var i;const r=(i=lo(n))==null?void 0:i.unit;return t==="temporal"||r?Etn(e,t,r):[e]}function wg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Os(i[r]),{type:c}=l,f=l.timeUnit;if(jXt(t)){const p=wg(e,void 0,n,r),m=Z9(t.unionWith,c,f);return Id([...m,...p.value])}else{if(Rt(t))return Id([t]);if(t&&t!=="unaggregated"&&!fFe(t))return Id(Z9(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return ll([[0,1]]);const p=n.requestDataName(bi.Main);return ll([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=sg(r)&&Ze(l)?Stn(n,r,e):void 0;if(np(l)){const p=Z9([l.datum],c,f);return ll(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(bi.Main),{field:m}=l;return ll([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(ii(h.bin)){if(co(e))return ll(e==="bin-ordinal"?[]:[{data:mI(d)?n.requestDataName(bi.Main):n.requestDataName(bi.Raw),field:n.vgField(r,gR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!mt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ii(p)){const m=wre(n,h.field,p);return ll([new Js(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return ll([{data:n.requestDataName(bi.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Vn(["time","utc"],e)){const p=i[ep(r)];if(AFe(h,p,s,a)){const m=n.requestDataName(bi.Main),g=ly({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=yI(o)&&g!==.5&&ls(r);return ll([{data:m,field:n.vgField(r,y?{suffix:J4}:{})},{data:m,field:n.vgField(r,{suffix:y?Z4:"end"})}])}}return ll(d?[{data:mI(d)?n.requestDataName(bi.Main):n.requestDataName(bi.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(bi.Main),field:n.vgField(r)}])}function eB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":U4),...r?{field:$c(r)}:{},...i?{order:i}:{}}}function xtn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=fFe(r)&&r,o=Wb(i)&&O4(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Stn(e,t,n){if(!co(n))return;const r=e.fieldDef(t),i=r.sort;if(SFe(i))return{op:"min",field:bx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(dh(i)){const a=s&&!o.has(i.field);return eB(i,a)}else if(xFe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Om(c)||qy(c))return eB({field:at(l),order:u},d);if(Sne(c)||!c)return eB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Vn(["ascending",void 0],i))return!0}}function Mge(e,t){const{aggregate:n,type:r}=e;return n?pt(n)&&!ZYt.has(n)?{valid:!1,reason:zKt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:VKt(e)}:{valid:!0}:{valid:!1,reason:UKt(e)}}function GH(e,t,n,r){return e.explicit&&t.explicit&&Je(YKt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Ttn(e){const t=Qd(e.map(o=>{if(qp(o)){const{sort:a,...u}=o;return u}return o}),zn),n=Qd(e.map(o=>{if(qp(o)){const a=o.sort;return a!==void 0&&!mI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),zn);if(t.length===0)return;if(t.length===1){const o=e[0];if(qp(o)&&n.length>0){let a=n[0];if(n.length>1){Je(qme);const u=n.filter(l=>mt(l)&&"op"in l&&l.op!=="min");n.every(l=>mt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(mt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Qd(n.map(o=>mI(o)||!("op"in o)||pt(o.op)&&o.op in KYt?o:(Je(XKt(o)),!0)),zn);let i;r.length===1?i=r[0]:r.length>1&&(Je(qme),i=!0);const s=Qd(e.map(o=>qp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Tre(e){if(qp(e)&&pt(e.field))return e.field;if(eKt(e)){let t;for(const n of e.fields)if(qp(n)&&pt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Je(QKt),t}return Je(JKt),t}else if(tKt(e)){Je(ZKt);const t=e.fields[0];return pt(t)?t:void 0}}function i5(e,t){const r=e.component.scales[t].get("domains").map(i=>(qp(i)&&(i.data=e.lookupDataSource(i.data)),i));return Ttn(r)}function p5e(e){return FS(e)||Are(e)?e.children.reduce((t,n)=>t.concat(p5e(n)),Lge(e)):Lge(e)}function Lge(e){return Ye(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Atn(i.range,s,n,e),h=i5(e,n),p=a?_Zt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Atn(e,t,n,r){if(ls(n)){if(Wy(e))return{step:{signal:`${t}_step`}}}else if(mt(e)&&qp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class m5e extends ag{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:ib(this.get("domains"),t=>je(t)&&t.length===2&&ur(t[0])&&t[0]<=0&&ur(t[1])&&t[1]>=0)}}const Ctn=["range","scheme"];function Itn(e){const t=e.component.scales;for(const n of D4){const r=t[n];if(!r)continue;const i=ktn(n,e);r.setWithExplicit("range",i)}}function Fge(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=tl(t),o=e.getName(s);if(mt(r)&&r.binned&&r.step!==void 0)return new Js(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ii(r)){const a=wre(e,i,r);return new Js(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function ktn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Ctn)if(n[f]!==void 0){const d=NH(s,f),h=dFe(e,f);if(!d)Je(q6e(s,f,e));else if(h)Je(h);else switch(f){case"range":{const p=n.range;if(je(p)){if(ls(e))return Id(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Js.fromName(y,g)}return m}))}else if(mt(p))return Id({data:t.requestDataName(bi.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Id(p)}case"scheme":return Id(Rtn(n[f]))}}const o=e===Si||e==="xOffset"?"width":"height",a=r[o];if(Ph(a)){if(ls(e))if(co(s)){const f=y5e(a,t,e);if(f)return Id({step:f})}else Je(W6e(o));else if(cR(e)){const f=e===By?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=v5e(a,s);if(p)return Id(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Ntn(e,t);return(u!==void 0||l!==void 0)&&NH(s,"rangeMin")&&je(c)&&c.length===2?Id([u??c[0],l??c[1]]):ll(c)}function Rtn(e){return FXt(e)?{scheme:e.name,...zu(e,["name"])}:{scheme:e}}function g5e(e,t,n,{center:r}={}){const i=tl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===po&&Vl(n)?r?[Js.fromName(a=>`${o(a)}/2`,s),Js.fromName(a=>`-${o(a)}/2`,s)]:[Js.fromName(o,s),0]:r?[Js.fromName(a=>`-${o(a)}/2`,s),Js.fromName(a=>`${o(a)}/2`,s)]:[0,Js.fromName(o,s)]}function Ntn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Os(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Si:case po:{if(Vn(["point","band"],u)){const f=b5e(e,n,r.view);if(Ph(f))return{step:y5e(f,t,e)}}return g5e(e,t,u)}case By:case PS:return Ptn(e,t,u);case rg:{const f=t.component.scales[e].get("zero"),d=_5e(i,f,r),h=$tn(i,n,t,r);return dx(u)?Otn(d,h,Dtn(u,r,l,e)):[d,h]}case Gc:return[0,Math.PI*2];case Hb:return[0,360];case sd:return[0,new Js(()=>{const f=t.getSignalName(Il(t.parent)?"child_width":"width"),d=t.getSignalName(Il(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Vy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Hy:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case el:return"symbol";case Zu:case Jh:case Zh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ig:case Uy:case zy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function y5e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=_ne(n),o=r[s];if(r4e({step:e,offsetIsDiscrete:un(o)&&oFe(o.type)})==="offset"&&FFe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${sKt(f)})`}}else return e.step}function v5e(e,t){if(r4e({step:e,offsetIsDiscrete:co(t)})==="offset")return{step:e.step}}function Ptn(e,t,n){const r=e===By?"x":"y",i=t.getScaleComponent(r);if(!i)return g5e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=b5e(r,t.size,t.config.view);if(Ph(l)){const c=v5e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=nFe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=ly({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return d6e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function b5e(e,t,n){const r=e===Si?"width":"height",i=t[r];return i||yM(n,r)}function Dtn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&je(n)?n.length+1:(Je(uXt(r)),3)}}function Otn(e,t,n){const r=()=>{const i=Af(t),s=Af(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Js(r):{signal:r()}}function _5e(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${_5e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error($4("size",e))}const jge=.95;function $tn(e,t,n,r){const i={x:Fge(n,"x"),y:Fge(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Bge(t,i,r.view);return ur(s)?s-1:new Js(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Bge(t,i,r.view);return ur(s)?Math.pow(jge*s,2):new Js(()=>`pow(${jge} * ${s.signal}, 2)`)}}throw new Error($4("size",e))}function Bge(e,t,n){const r=Ph(e.width)?e.width.step:gM(n,"width"),i=Ph(e.height)?e.height.step:gM(n,"height");return t.x||t.y?new Js(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function w5e(e,t){qi(e)?Mtn(e,t):x5e(e,t)}function Mtn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ye(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Os(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=NH(h,t),y=dFe(a,t);if(d!==void 0&&(g?y&&Je(y):Je(q6e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":Gb(u[t])||b==="temporal"||v?l.set(t,{signal:W4(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in Uge?Uge[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:jFe(i,a),hasSecondaryRangeChannel:!!i[ep(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const Uge={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?Ltn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Ftn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>jtn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Btn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Utn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>ztn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return Vtn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Htn(e,t,n,r,i,s.scale,o)};function E5e(e){qi(e)?Itn(e):x5e(e,"range")}function x5e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?E5e(r):w5e(r,t);for(const r of Ye(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=cy(i,a,t,"scale",g4e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function Ltn(e,t){const n=t.bin;if(ii(n)){const r=wre(e,t.field,n);return new Js(()=>e.getSignalName(r))}else if(To(n)&&Wb(n)&&n.step!==void 0)return{step:n.step}}function Ftn(e,t){if(Vn([Zu,Jh,Zh],e)&&t!=="nominal")return"hcl"}function jtn(e,t,n,r,i,s){var o;if(!((o=Nh(s))!=null&&o.bin||je(n)||i!=null||r!=null||Vn([Vu.TIME,Vu.UTC],e)))return ls(t)?!0:void 0}function Btn(e,t,n,r,i,s){if(ls(e)){if(Cf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Vu.POINT)return n.pointPadding}}function Utn(e,t,n,r,i,s=!1){if(e===void 0){if(ls(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:us(o,n==="bar"?a:u)}else if(cR(t)&&r===Vu.BAND)return i.offsetBandPaddingInner}}function ztn(e,t,n,r,i,s=!1){if(e===void 0){if(ls(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Vu.BAND)return us(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(cR(t)){if(n===Vu.POINT)return .5;if(n===Vu.BAND)return i.offsetBandPaddingOuter}}}function Vtn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Vl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Vl(e)&&t==="descending")return!0}function Htn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Vl(i)){if(je(n)){const u=n[0],l=n[n.length-1];if(ur(u)&&u<=0&&ur(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!dx(i))return!0;if(!(Ze(t)&&t.bin)&&Vn([...tp,...UYt],e)){const{orient:u,type:l}=r;return Vn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Vn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function qtn(e,t,n,r,i=!1){const s=Wtn(t,n,r,i),{type:o}=e;return sg(t)?o!==void 0?qXt(t,o)?Ze(n)&&!HXt(o,n.type)?(Je(WKt(o,s)),s):o:(Je(qKt(t,o,s)),s):s:null}function Wtn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Jw(e)||q9(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Je(W9(e,"ordinal")),"ordinal";if(ls(e)||cR(e)){if(Vn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in xne)return"band";const s=n[tl(e)];return cb(s)||px(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Jw(e)?"time":q9(e)==="discrete"?(Je(W9(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&lo(t.timeUnit).utc?"utc":"time";case"quantitative":return Jw(e)?Ze(t)&&ii(t.bin)?"bin-ordinal":"linear":q9(e)==="discrete"?(Je(W9(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(V6e(t.type))}function Gtn(e,{ignoreRange:t}={}){S5e(e),h5e(e);for(const n of VXt)w5e(e,n);t||E5e(e)}function S5e(e){qi(e)?e.component.scales=Ytn(e):e.component.scales=Xtn(e)}function Ytn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of D4){const o=Os(t[s]);if(o&&n===_Fe&&s===el&&o.type===DS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=jFe(t,s),l=qtn(a,s,o,r,u);i[s]=new m5e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Ktn=g4e((e,t)=>Gme(e)-Gme(t));function Xtn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){S5e(s);for(const o of Ye(s.component.scales))if((t=i.scale)[o]??(t[o]=e5e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?DXt(a.value,u.value)?r[o]=cy(a,u,"type","scale",Ktn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ye(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new m5e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class tB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function qi(e){return(e==null?void 0:e.type)==="unit"}function Il(e){return(e==null?void 0:e.type)==="facet"}function Are(e){return(e==null?void 0:e.type)==="concat"}function FS(e){return(e==null?void 0:e.type)==="layer"}class Cre{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Tu(a),this.name=t.name??i,this.title=Rg(t.title)?{text:t.title}:t.title?Tu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new tB,this.projectionNameMap=r?r.projectionNameMap:new tB,this.signalNameMap=r?r.signalNameMap:new tB,this.data=t.data,this.description=t.description,this.transforms=rZt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:aJt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:z4(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new ag,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?tn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Gtn(this)}parseProjection(){c5e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){s5e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ye(r)){const o=r[s];o!==void 0&&(i[s]=li(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=li(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Mr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=yen(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of _c)t[r].title&&n.push(fen(this,r));for(const r of yre)n=n.concat(den(this,r));return n}assembleAxes(){return JZt(this.component.axes,this.config)}assembleLegends(){return a5e(this)}assembleProjections(){return Ben(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...O6e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Vn(["unit","layer"],this.type)?Vn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Mr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Il(this.parent)?p5e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return xi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(bi[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Il(this.parent)){const n=J4e(t),r=P4(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(co(s)&&Wy(o)){const a=i.get("name"),u=i5(this,r),l=Tre(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:Q4e(a,i,c)}}else return Je(Ane(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(T6e(t)&&sg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(cKt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class T5e extends Cre{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return MQt(this.getMapping(),(r,i,s)=>{const o=Nh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Zne(this.getMapping(),(r,i)=>{const s=Nh(r);s&&t(s,i)},n)}}class s5 extends Dr{clone(){return new s5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${zn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class o5 extends Dr{clone(){return new o5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${zn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class bI extends Dr{clone(){return new bI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(br("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=sg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Vl(d)&&l.aggregate!=="count"&&!Kb(i)&&(u[l.field]=l)}return u},{});return Ye(a).length?new bI(t,a):null}dependentFields(){return new Set(Ye(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${zn(this.filter)}`}assemble(){const t=Ye(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class a5 extends Dr{clone(){return new a5(this.parent,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${zn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class u5 extends Dr{clone(){return new u5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${zn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class tE extends Dr{clone(){return new tE(null,tn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[ad,od],[Mc,ud]]){const s=i.map(o=>{const a=Os(n.encoding[o]);return Ze(a)?a.field:np(a)?{expr:`${a.datum}`}:Yf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new tE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(el)){const i=n.typedFieldDef(el);i.type===DS&&(t=new tE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(pt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${zn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class _I extends Dr{clone(){return new _I(null,this.projection,tn(this.fields),tn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[ad,od],[Mc,ud]]){const i=r.map(o=>{const a=Os(n.encoding[o]);return Ze(a)?a.field:np(a)?{expr:`${a.datum}`}:Yf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Mc?"2":"";(i[0]||i[1])&&(t=new _I(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(pt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${zn(this.fields)} ${zn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class w1 extends Dr{clone(){return new w1(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new w1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=UFe(n.mark,r);return new w1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${zn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:FJt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class l5 extends Dr{clone(){return new l5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${zn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class wI extends Dr{clone(){return new wI(null,tn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(jJt(o)){let u=I5e(o.data,s);u||(u=new hb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Hu(u,l,bi.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(BJt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(xi(u),u)}catch{throw new Error(pKt(u))}if(a=l.materialized,!a)throw new Error(mKt(u))}return new wI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ht(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${zn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ht(this.transform.as)}:{}};else{let n=this.transform.as;pt(n)||(Je(xKt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class c5 extends Dr{clone(){return new c5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${zn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class f5 extends Dr{clone(){return new f5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=tn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${zn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class d5 extends Dr{clone(){return new d5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Qd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${zn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class h5 extends Dr{clone(){return new h5(null,tn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${zn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function A5e(e){let t=0;function n(r,i){if(r instanceof hb&&!r.isGenerator&&!gx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof da&&(r.parent instanceof hb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof MS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof bR||r instanceof _R||r instanceof bI||r instanceof $S||r instanceof vx||r instanceof _I||r instanceof Lf||r instanceof wI||r instanceof LS||r instanceof Jb||r instanceof u5||r instanceof a5||r instanceof s5||r instanceof l5||r instanceof c5||r instanceof f5||r instanceof hy||r instanceof h5||r instanceof d5||r instanceof o5)&&i.transform.push(r.assemble()),(r instanceof ph||r instanceof hh||r instanceof w1||r instanceof im||r instanceof tE)&&i.transform.push(...r.assemble()),r instanceof Hu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Hu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Hu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Qtn(e){const t=[],n=A5e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Jtn(e,t){const n=[],r=A5e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Ztn(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function enn(e){for(const t of _c)tnn(e,t);zge(e,"x"),zge(e,"y")}function tnn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=_x("title",null,r,t);let l=Zw(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=je(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=_x("labelOrient",a.header,r,t),f=a.header!==null?us((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Vn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[C5e(e,t,f)]}}}function C5e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function zge(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=_re(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=Ztn(a.get("orient"));o[u]??(o[u]=[C5e(e,s,!1)]);const l=NA(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function nnn(e){Ire(e),wM(e,"width"),wM(e,"height")}function rnn(e){Ire(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";wM(e,t),wM(e,n)}function Ire(e){for(const t of e.children)t.parseLayoutSize()}function wM(e,t){const n=J4e(t),r=P4(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??e5e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=cy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function inn(e){const{size:t,component:n}=e;for(const r of tp){const i=tl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Ph(s)?"step":s,!0)}else{const s=snn(e,i);n.layoutSize.set(i,s,!1)}}}function snn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(co(s)){const a=yM(r.view,t);return Wy(o)||Ph(a)?"step":a}else return OH(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return OH(r.view,t);{const s=yM(r.view,t);return Ph(s)?s.step:s}}}function YH(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class DC extends T5e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Dre(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!pR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ye(t),r={};for(const i of n){if(![tm,nm].includes(i)){Je($4(i,"facet"));break}const s=t[i];if(s.field===void 0){Je(kH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Qne(t,n);return r.header?r.header=Tu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=p5(this),this.child.parseData()}parseLayoutSize(){Ire(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),enn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of _c)for(const r of vre){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=_x("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=n5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof DC))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof DC?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof DC){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of tp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(co(o)&&Wy(a)){const u=i5(this.child,i),l=Tre(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Je(Ane(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of _c){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(ii(d)&&u.push(at(f,{binSuffix:"end"})),dh(h)){const{field:p,op:m=U4}=h,g=YH(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(je(h)){const p=bx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?dh(r.sort)?[YH(r,r.sort,{expr:"datum"})]:je(r.sort)?[bx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(dh(i)?i.order:!je(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return zH(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of yre)if(t[s]){const o=_x("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return zH(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Qtn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:_c.map(u=>this.facetSortFields(u)).flat(),order:_c.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(gZt(this,[]))}]}getMapping(){return this.facet}}function onn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(dh(s.sort)){const{field:o,op:a=U4}=s.sort;e=i=new Jb(e,{joinaggregate:[{op:a,field:o,as:YH(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function I5e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(vI(e)&&vI(a)){if(Sl(e.values,a.values))return o}else if(gx(e)&&gx(a)){if(e.url===a.url)return o}else if(y4e(e)&&e.name===o.dataName)return o}}return null}function ann(e,t){if(e.data||!e.parent){if(e.data===null){const r=new hb({values:[]});return t.push(r),r}const n=I5e(e.data,t);if(n)return A0(e.data)||(n.data.format=h6e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new hb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function unn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(XJt(i))o=e=new vx(e,i),s="derived";else if(cre(i)){const a=Zen(i);o=e=da.makeWithAncestors(e,{},a,n)??e,e=new $S(e,t,i.filter)}else if(d4e(i))o=e=ph.makeFromTransform(e,i,t),s="number";else if(JJt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new da(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=hh.makeFromTransform(e,i);else if(ZJt(i))o=e=Lf.makeFromTransform(e,i),s="number",gre(t)&&(e=new hy(e));else if(f4e(i))o=e=wI.make(e,t,i,r++),s="derived";else if(GJt(i))o=e=new LS(e,i),s="number";else if(YJt(i))o=e=new Jb(e,i),s="number";else if(eZt(i))o=e=im.makeFromTransform(e,i),s="derived";else if(tZt(i))o=e=new u5(e,i),s="derived";else if(nZt(i))o=e=new o5(e,i),s="derived";else if(KJt(i))o=e=new a5(e,i),s="derived";else if(UJt(i))o=e=new d5(e,i),s="derived";else if(WJt(i))e=new h5(e,i);else if(QJt(i))o=e=w1.makeFromTransform(e,i),s="derived";else if(zJt(i))o=e=new s5(e,i),s="derived";else if(VJt(i))o=e=new c5(e,i),s="derived";else if(HJt(i))o=e=new f5(e,i),s="derived";else if(qJt(i))o=e=new l5(e,i),s="derived";else{Je(EKt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function p5(e){var h;let t=ann(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(A0(i)||gx(i)||vI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new pZt;A0(i)?(v4e(i)?t=new _R(t,i.sequence):fre(i)&&(t=new bR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=da.makeExplicit(t,e,o)??t,t=new hy(t);const a=e.parent&&FS(e.parent);(qi(e)||Il(e))&&a&&(t=ph.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=unn(t,e,o));const u=ttn(e),l=etn(e);t=da.makeWithAncestors(t,{},{...u,...l},o)??t,qi(e)&&(t=tE.parseAll(t,e),t=_I.parseAll(t,e)),(qi(e)||Il(e))&&(a||(t=ph.makeFromEncoding(t,e)??t),t=hh.makeFromEncoding(t,e)??t,t=vx.parseAllForSortIndex(t,e));const c=t=Vge(bi.Raw,e,t);if(qi(e)){const p=Lf.makeFromEncoding(t,e);p&&(t=p,gre(e)&&(t=new hy(t))),t=w1.makeFromEncoding(t,e)??t,t=im.makeFromEncoding(t,e)??t}qi(e)&&(t=bI.make(t,e)??t);const f=t=Vge(bi.Main,e,t);qi(e)&&XZt(e,f);let d=null;if(Il(e)){const p=e.getName("facet");t=onn(t,e.facet)??t,d=new MS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function Vge(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Hu(n,s,e,i);return r[s]=o,o}class lnn extends Cre{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Je(bKt),this.children=this.getChildren(t).map((l,c)=>Dre(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=p5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return K4(t)?t.vconcat:ure(t)?t.hconcat:t.concat}parseLayoutSize(){rnn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=bre(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function cnn(e){return e===!1||e===null}const fnn={disable:1,gridScale:1,scale:1,...MFe,labelExpr:1,encode:1},k5e=Ye(fnn);class kre extends ag{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new kre(tn(this.explicit),tn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!cnn(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function dnn(e,t,n){const{encoding:r,config:i}=e,s=Os(r[t])??Os(r[ep(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(lb(u))return{text:If({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(hx(s)==="quantitative"){if(px(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:If({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:If({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(hx(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:If({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function hnn(e){return tp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[_nn(n,e)]),t),{})}const pnn={bottom:"top",top:"bottom",left:"right",right:"left"};function mnn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ye(i.component.axes))n.axis[s]=_re(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=gnn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of tp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=pnn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function gnn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=ynn(i,s)}}}else return t.map(n=>n.clone());return e}function ynn(e,t){for(const n of k5e){const r=cy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return U6e(i,s);case"gridScale":return{explicit:i.explicit,value:us(i.value,s.value)}}return Q4(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function vnn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:gI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===G4e(r,i))return!0}return e===n[t]}const bnn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function _nn(e,t){var y,v;let n=t.axis(e);const r=new kre,i=Os(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||oen(e),u=t.getScaleComponent(e).get("type"),l=ZZt(e,u,a,t.config),c=n!==void 0?!n:BH("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=ren(i,n,e,o.style,l),d=gFe(n.formatType,i,u),h=mFe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of k5e){const w=b in Cge?Cge[b](p):ege(b)?n[b]:void 0,E=w!==void 0,S=vnn(w,b,n,t,e);if(E&&S)r.set(b,w,S);else{const{configValue:T=void 0,configFrom:A=void 0}=ege(b)&&b!=="values"?BH(b,o.style,n.style,l):{},C=T!==void 0;E&&!C?r.set(b,w,S):(A!=="vgAxisConfig"||bnn.has(b)&&C||yR(T)||Rt(T))&&r.set(b,T,!1)}}const m=n.encoding??{},g=$Fe.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=Z4e(m[w]??{},t),S=w==="labels"?dnn(t,e,E):E;return S!==void 0&&!Mr(S)&&(b[w]={update:S}),b},{});return Mr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function wnn({encoding:e,size:t}){for(const n of tp){const r=tl(n);Ph(t[r])&&t0(e[n])&&(delete t[r],Je(W6e(r)))}return t}const Enn={vgMark:"arc",encodeEntry:e=>({...Yc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...fa("x",e,{defaultPos:"mid"}),...fa("y",e,{defaultPos:"mid"}),...fy(e,"radius"),...fy(e,"theta")})},xnn={vgMark:"area",encodeEntry:e=>({...Yc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...vM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...vM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...mre(e)})},Snn={vgMark:"rect",encodeEntry:e=>({...Yc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fy(e,"x"),...fy(e,"y")})},Tnn={vgMark:"shape",encodeEntry:e=>({...Yc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===DS?{field:at(n,{expr:"datum"})}:{}}]}},Ann={vgMark:"image",encodeEntry:e=>({...Yc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...fy(e,"x"),...fy(e,"y"),...hre(e,"url")})},Cnn={vgMark:"line",encodeEntry:e=>({...Yc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...fa("x",e,{defaultPos:"mid"}),...fa("y",e,{defaultPos:"mid"}),...eo("size",e,{vgChannel:"strokeWidth"}),...mre(e)})},Inn={vgMark:"trail",encodeEntry:e=>({...Yc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...fa("x",e,{defaultPos:"mid"}),...fa("y",e,{defaultPos:"mid"}),...eo("size",e),...mre(e)})};function Rre(e,t){const{config:n}=e;return{...Yc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...fa("x",e,{defaultPos:"mid"}),...fa("y",e,{defaultPos:"mid"}),...eo("size",e),...eo("angle",e),...knn(e,n,t)}}function knn(e,t,n){return n?{shape:{value:n}}:eo("shape",e)}const Rnn={vgMark:"symbol",encodeEntry:e=>Rre(e)},Nnn={vgMark:"symbol",encodeEntry:e=>Rre(e,"circle")},Pnn={vgMark:"symbol",encodeEntry:e=>Rre(e,"square")},Dnn={vgMark:"rect",encodeEntry:e=>({...Yc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fy(e,"x"),...fy(e,"y")})},Onn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Yc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...vM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...vM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...eo("size",e,{vgChannel:"strokeWidth"})}}},$nn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Yc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...fa("x",e,{defaultPos:"mid"}),...fa("y",e,{defaultPos:"mid"}),...hre(e),...eo("size",e,{vgChannel:"fontSize"}),...eo("angle",e),...xge("align",Mnn(e.markDef,n,t)),...xge("baseline",Lnn(e.markDef,n,t)),...fa("radius",e,{defaultPos:null}),...fa("theta",e,{defaultPos:null})}}};function Mnn(e,t,n){if(br("align",e,n)===void 0)return"center"}function Lnn(e,t,n){if(br("baseline",e,n)===void 0)return"middle"}const Fnn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Yc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fa("x",e,{defaultPos:"mid",vgChannel:"xc"}),...fa("y",e,{defaultPos:"mid",vgChannel:"yc"}),...eo("size",e,{defaultValue:jnn(e),vgChannel:i}),[s]:li(br("thickness",n,t))}}};function jnn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=br("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Wy(a)&&ur(a.step)?a.step*3/4:gM(t.view,i)*3/4}}const hP={arc:Enn,area:xnn,bar:Snn,circle:Nnn,geoshape:Tnn,image:Ann,line:Cnn,point:Rnn,rect:Dnn,rule:Onn,square:Pnn,text:$nn,tick:Fnn,trail:Inn};function Bnn(e){if(Vn([j4,L4,tQt],e.mark)){const t=UFe(e.mark,e.encoding);if(t.length>0)return Unn(e,t)}else if(e.mark===F4){const t=IH.some(n=>br(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return znn(e)}return Nre(e)}const Hge="faceted_path_";function Unn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Hge+e.requestDataName(bi.Main),data:e.requestDataName(bi.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Nre(e,{fromPrefix:Hge})}]}const qge="stack_group_";function znn(e){var l;const[t]=Nre(e,{fromPrefix:qge}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...ax(t.encode.update,["y","yc","y2","height",...IH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...zu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...ax(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...zu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of IH){const f=$m(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=li(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=$m(f,e.markDef,e.config);return d!==void 0?{...c,[f]:li(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(bi.Main),name:qge+e.requestDataName(bi.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Vnn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!je(o)&&Yf(o)&&AH(o.value)||!o&&AH(br("order",i,s)))){if((je(o)||Ze(o))&&!n)return F6e(o,{expr:"datum"});if(Kb(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(je(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(dh(c))return{field:at({aggregate:Jne(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(xFe(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Nre(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=us(r.clip,Hnn(e),qnn(e)),a=M6e(r),u=i.key,l=Vnn(e),c=Wnn(e),f=br("aria",r,s),d=hP[n].postEncodingTransform?hP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:hP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(bi.Main)},encode:{update:hP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Hnn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function qnn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Wnn(e){if(!e.component.selection)return null;const t=Ye(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ye(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class R5e extends T5e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,nge(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Rh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=RJt(o,s,{graticule:t.data&&fre(t.data)}));const u=this.encoding=OQt(t.encoding||{},a,o.filled,s);this.markDef=u4e(o,u,s),this.size=wnn({encoding:u,size:nge(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=a4e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>ore(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===_Fe,r=t&&PYt.some(i=>un(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return D4.reduce((r,i)=>{const s=Os(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Tu(t);return je(n)&&(i.domain=n.map(yl)),je(r)&&(i.range=r.map(yl)),i}initAxes(t){return tp.reduce((n,r)=>{const i=t[r];if(un(i)||r===Si&&un(t.x2)||r===po&&un(t.y2)){const s=un(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ye(t),r={};for(const i of n){const s=t[i];r[i]=yR(s)?$6e(s):yl(s)}return r}initLegends(t){return zYt.reduce((n,r)=>{const i=Os(t[r]);if(i&&HYt(r)){const s=i.legend;n[r]=s&&Tu(s)}return n},{})}parseData(){this.component.data=p5(this)}parseLayoutSize(){inn(this)}parseSelections(){this.component.selection=KZt(this,this.selection)}parseMarkGroup(){this.component.mark=Bnn(this)}parseAxesAndHeaders(){this.component.axes=hnn(this)}assembleSelectionTopLevelSignals(t){return yZt(this,t)}assembleSignals(){return[...H4e(this),...mZt(this,[])]}assembleSelectionData(t){return vZt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return bre(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!FS(this.parent))&&(t=w4e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return b1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Nh(n)}typedFieldDef(t){const n=this.fieldDef(t);return eu(n)?n:null}}class Pre extends Cre{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(X4(a))return new Pre(a,this,this.getName(`layer_${u}`),o,s);if(og(a))return new R5e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Tne(a))})}parseData(){this.component.data=p5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){nnn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){mnn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),H4e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),bre(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of ht(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return bZt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),a5e(this))}}function Dre(e,t,n,r,i){if(z4(e))return new DC(e,t,n,i);if(X4(e))return new Pre(e,t,n,r,i);if(og(e))return new R5e(e,t,n,r,i);if(iJt(e))return new lnn(e,t,n,i);throw new Error(Tne(e))}function Gnn(e,t={}){t.logger&&lXt(t.logger),t.fieldTitle&&PFe(t.fieldTitle);try{const n=o4e(_S(t.config,e.config)),r=m4e(e,n),i=Dre(r,null,"",void 0,n);return i.parse(),ytn(i.component.data,i),{spec:Knn(i,Ynn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&cXt(),t.fieldTitle&&TQt()}}function Ynn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):pt(t)&&(t={type:t}),i&&s&&fZt(t.type)){if(i==="step"&&s==="step")Je(Bme()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Je(Bme(P4(o)));const a=o==="width"?"height":"width";t.type=dZt(a)}}return{...Ye(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...pge(n,!1),...pge(e,!0)}}function Knn(e,t,n={},r){const i=e.config?vJt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Jtn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...n4e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const Xnn=AYt.version,Qnn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:ux,accessPathWithDatum:gne,compile:Gnn,contains:Vn,deepEqual:Sl,deleteNestedProperty:oM,duplicate:tn,entries:ay,every:hne,fieldIntersection:mne,flatAccessWithDatum:m6e,getFirstDefined:us,hasIntersection:pne,hash:zn,internalField:v6e,isBoolean:mI,isEmpty:Mr,isEqual:IYt,isInternalField:b6e,isNullOrFalse:AH,isNumeric:A4,keys:Ye,logicalExpr:NC,mergeDeep:h6e,never:d6e,normalize:m4e,normalizeAngle:gI,omit:zu,pick:ax,prefixGenerator:CH,removePathFromField:NS,replaceAll:sb,replacePathInField:$c,resetIdCounter:RYt,setEqual:p6e,some:ib,stringify:Lr,titleCase:aR,unique:Qd,uniqueId:y6e,vals:Oo,varName:xi,version:Xnn},Symbol.toStringTag,{value:"Module"}));function N5e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Jnn="vega-themes",Znn="2.15.0",ern="Themes for stylized Vega and Vega-Lite visualizations.",trn=["vega","vega-lite","themes","style"],nrn="BSD-3-Clause",rrn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},irn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],srn="build/vega-themes.js",Ore="build/vega-themes.module.js",orn="build/vega-themes.min.js",arn="build/vega-themes.min.js",urn="build/vega-themes.module.d.ts",lrn={type:"git",url:"https://github.com/vega/vega-themes.git"},crn=["src","build"],frn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},drn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},hrn={vega:"*","vega-lite":"*"},prn={},mrn={name:Jnn,version:Znn,description:ern,keywords:trn,license:nrn,author:rrn,contributors:irn,main:srn,module:Ore,unpkg:orn,jsdelivr:arn,types:urn,repository:lrn,files:crn,scripts:frn,devDependencies:drn,peerDependencies:hrn,dependencies:prn};const I_="#fff",Wge="#888",grn={background:"#333",view:{stroke:Wge},title:{color:I_,subtitleColor:I_},style:{"guide-label":{fill:I_},"guide-title":{fill:I_}},axis:{domainColor:I_,gridColor:Wge,tickColor:I_}},iv="#4572a7",yrn={background:"#fff",arc:{fill:iv},area:{fill:iv},line:{stroke:iv,strokeWidth:2},path:{stroke:iv},rect:{fill:iv},shape:{stroke:iv},symbol:{fill:iv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},sv="#30a2da",nB="#cbcbcb",vrn="#999",brn="#333",Gge="#f0f0f0",Yge="#333",_rn={arc:{fill:sv},area:{fill:sv},axis:{domainColor:nB,grid:!0,gridColor:nB,gridWidth:1,labelColor:vrn,labelFontSize:10,titleColor:brn,tickColor:nB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Gge,group:{fill:Gge},legend:{labelColor:Yge,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Yge,titleFontSize:14,titlePadding:10},line:{stroke:sv,strokeWidth:2},path:{stroke:sv,strokeWidth:.5},rect:{fill:sv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:sv},bar:{binSpacing:2,fill:sv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ov="#000",wrn={group:{fill:"#e5e5e5"},arc:{fill:ov},area:{fill:ov},line:{stroke:ov},path:{stroke:ov},rect:{fill:ov},shape:{stroke:ov},symbol:{fill:ov,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Ern=22,xrn="normal",Kge="Benton Gothic, sans-serif",Xge=11.5,Srn="normal",av="#82c6df",rB="Benton Gothic Bold, sans-serif",Qge="normal",Jge=13,jT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Trn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:rB,fontSize:Ern,fontWeight:xrn},arc:{fill:av},area:{fill:av},line:{stroke:av,strokeWidth:2},path:{stroke:av},rect:{fill:av},shape:{stroke:av},symbol:{fill:av,size:30},axis:{labelFont:Kge,labelFontSize:Xge,labelFontWeight:Srn,titleFont:rB,titleFontSize:Jge,titleFontWeight:Qge},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Kge,labelFontSize:Xge,symbolType:"square",titleFont:rB,titleFontSize:Jge,titleFontWeight:Qge},range:{category:jT["category-6"],diverging:jT["fireandice-6"],heatmap:jT["fire-7"],ordinal:jT["fire-7"],ramp:jT["fire-7"]}},uv="#ab5787",pP="#979797",Arn={background:"#f9f9f9",arc:{fill:uv},area:{fill:uv},line:{stroke:uv},path:{stroke:uv},rect:{fill:uv},shape:{stroke:uv},symbol:{fill:uv,size:30},axis:{domainColor:pP,domainWidth:.5,gridWidth:.2,labelColor:pP,tickColor:pP,tickWidth:.2,titleColor:pP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},lv="#3e5c69",Crn={background:"#fff",arc:{fill:lv},area:{fill:lv},line:{stroke:lv},path:{stroke:lv},rect:{fill:lv},shape:{stroke:lv},symbol:{fill:lv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},nc="#1696d2",Zge="#000000",Irn="#FFFFFF",mP="Lato",iB="Lato",krn="Lato",Rrn="#DEDDDD",Nrn=18,BT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Prn={background:Irn,title:{anchor:"start",fontSize:Nrn,font:mP},axisX:{domain:!0,domainColor:Zge,domainWidth:1,grid:!1,labelFontSize:12,labelFont:iB,labelAngle:0,tickColor:Zge,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:mP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Rrn,gridWidth:1,labelFontSize:12,labelFont:iB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:mP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:iB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:mP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:BT["six-groups-cat-1"],diverging:BT["diverging-colors"],heatmap:BT["diverging-colors"],ordinal:BT["six-groups-seq"],ramp:BT["shades-blue"]},area:{fill:nc},rect:{fill:nc},line:{color:nc,stroke:nc,strokeWidth:5},trail:{color:nc,stroke:nc,strokeWidth:0,size:1},path:{stroke:nc,strokeWidth:.5},point:{filled:!0},text:{font:krn,color:nc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:nc,stroke:null}},arc:{fill:nc},shape:{stroke:nc},symbol:{fill:nc,size:30}},cv="#3366CC",e0e="#ccc",gP="Arial, sans-serif",Drn={arc:{fill:cv},area:{fill:cv},path:{stroke:cv},rect:{fill:cv},shape:{stroke:cv},symbol:{stroke:cv},circle:{fill:cv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:gP,fontSize:12},"guide-title":{font:gP,fontSize:12},"group-title":{font:gP,fontSize:12}},title:{font:gP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:e0e,tickColor:e0e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},$re=e=>e*(1/3+1),t0e=$re(9),n0e=$re(10),r0e=$re(12),UT="Segoe UI",i0e="wf_standard-font, helvetica, arial, sans-serif",s0e="#252423",zT="#605E5C",o0e="transparent",Orn="#C8C6C4",sf="#118DFF",$rn="#12239E",Mrn="#E66C37",Lrn="#6B007B",Frn="#E044A7",jrn="#744EC2",Brn="#D9B300",Urn="#D64550",P5e=sf,D5e="#DEEFFF",a0e=[D5e,P5e],zrn=[D5e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",P5e],Vrn={view:{stroke:o0e},background:o0e,font:UT,header:{titleFont:i0e,titleFontSize:r0e,titleColor:s0e,labelFont:UT,labelFontSize:n0e,labelColor:zT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:zT,labelFontSize:t0e,titleFont:i0e,titleColor:s0e,titleFontSize:r0e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Orn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:sf},line:{stroke:sf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:UT,fontSize:t0e,fill:zT},arc:{fill:sf},area:{fill:sf,line:!0,opacity:.6},path:{stroke:sf},rect:{fill:sf},point:{fill:sf,filled:!0,size:75},shape:{stroke:sf},symbol:{fill:sf,strokeWidth:1.5,size:50},legend:{titleFont:UT,titleFontWeight:"bold",titleColor:zT,labelFont:UT,labelFontSize:n0e,labelColor:zT,symbolType:"circle",symbolSize:75},range:{category:[sf,$rn,Mrn,Lrn,Frn,jrn,Brn,Urn],diverging:a0e,heatmap:a0e,ordinal:zrn}},sB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Hrn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',oB=400,yP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},qrn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Wrn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function m5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=yP.gridBg[e],i=yP.textPrimary[e],s=yP.textSecondary[e],o=n==="dark"?qrn:Wrn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:sB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Hrn,labelFontWeight:oB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:yP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:sB,fill:s,fontWeight:oB},"guide-title":{font:sB,fill:s,fontWeight:oB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Grn=m5({theme:"white",background:"#ffffff"}),Yrn=m5({theme:"g10",background:"#f4f4f4"}),Krn=m5({theme:"g90",background:"#262626"}),Xrn=m5({theme:"g100",background:"#161616"}),Qrn=mrn.version,Jrn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Yrn,carbong100:Xrn,carbong90:Krn,carbonwhite:Grn,dark:grn,excel:yrn,fivethirtyeight:_rn,ggplot2:wrn,googlecharts:Drn,latimes:Trn,powerbi:Vrn,quartz:Arn,urbaninstitute:Prn,version:Qrn,vox:Crn},Symbol.toStringTag,{value:"Module"}));function Zrn(e,t,n,r){if(je(e))return`[${e.map(i=>t(pt(i)?i:u0e(i,n))).join(", ")}]`;if(mt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(mt(c)&&(c=u0e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function ein(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function u0e(e,t){return JSON.stringify(e,ein(t))}var tin=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const O5e="vg-tooltip-element",nin={offsetX:10,offsetY:10,id:O5e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:rin,maxDepth:2,formatTooltip:Zrn,baseURL:""};function rin(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function iin(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return tin.toString().replace(O5e,e)}function sin(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class oin{constructor(t){this.options={...nin,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=iin(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=sin(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var aB={};function ain(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var uB,l0e;function uin(){return l0e||(l0e=1,uB=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),uB}var lin=gr;gr.Node=pb;gr.create=gr;function gr(e){var t=this;if(t instanceof gr||(t=new gr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}gr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};gr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};gr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};gr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)fin(this,arguments[e]);return this.length};gr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)din(this,arguments[e]);return this.length};gr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};gr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};gr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};gr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};gr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};gr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};gr.prototype.map=function(e,t){t=t||this;for(var n=new gr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};gr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new gr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};gr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};gr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};gr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};gr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};gr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new gr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};gr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new gr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};gr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=cin(this,i,n[r]);return s};gr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function cin(e,t,n){var r=t===e.head?new pb(n,null,t,e):new pb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function fin(e,t){e.tail=new pb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function din(e,t){e.head=new pb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function pb(e,t,n,r){if(!(this instanceof pb))return new pb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{uin()(gr)}catch{}const hin=lin,Fv=Symbol("max"),Ap=Symbol("length"),k_=Symbol("lengthCalculator"),OC=Symbol("allowStale"),i1=Symbol("maxAge"),wp=Symbol("dispose"),c0e=Symbol("noDisposeOnSet"),Gs=Symbol("lruList"),of=Symbol("cache"),$5e=Symbol("updateAgeOnGet"),lB=()=>1;class pin{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Fv]=t.max||1/0;const n=t.length||lB;if(this[k_]=typeof n!="function"?lB:n,this[OC]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[i1]=t.maxAge||0,this[wp]=t.dispose,this[c0e]=t.noDisposeOnSet||!1,this[$5e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Fv]=t||1/0,VT(this)}get max(){return this[Fv]}set allowStale(t){this[OC]=!!t}get allowStale(){return this[OC]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[i1]=t,VT(this)}get maxAge(){return this[i1]}set lengthCalculator(t){typeof t!="function"&&(t=lB),t!==this[k_]&&(this[k_]=t,this[Ap]=0,this[Gs].forEach(n=>{n.length=this[k_](n.value,n.key),this[Ap]+=n.length})),VT(this)}get lengthCalculator(){return this[k_]}get length(){return this[Ap]}get itemCount(){return this[Gs].length}rforEach(t,n){n=n||this;for(let r=this[Gs].tail;r!==null;){const i=r.prev;f0e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Gs].head;r!==null;){const i=r.next;f0e(this,t,r,n),r=i}}keys(){return this[Gs].toArray().map(t=>t.key)}values(){return this[Gs].toArray().map(t=>t.value)}reset(){this[wp]&&this[Gs]&&this[Gs].length&&this[Gs].forEach(t=>this[wp](t.key,t.value)),this[of]=new Map,this[Gs]=new hin,this[Ap]=0}dump(){return this[Gs].map(t=>EM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Gs]}set(t,n,r){if(r=r||this[i1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[k_](n,t);if(this[of].has(t)){if(s>this[Fv])return nE(this,this[of].get(t)),!1;const u=this[of].get(t).value;return this[wp]&&(this[c0e]||this[wp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Ap]+=s-u.length,u.length=s,this.get(t),VT(this),!0}const o=new min(t,n,s,i,r);return o.length>this[Fv]?(this[wp]&&this[wp](t,n),!1):(this[Ap]+=o.length,this[Gs].unshift(o),this[of].set(t,this[Gs].head),VT(this),!0)}has(t){if(!this[of].has(t))return!1;const n=this[of].get(t).value;return!EM(this,n)}get(t){return cB(this,t,!0)}peek(t){return cB(this,t,!1)}pop(){const t=this[Gs].tail;return t?(nE(this,t),t.value):null}del(t){nE(this,this[of].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[of].forEach((t,n)=>cB(this,n,!1))}}const cB=(e,t,n)=>{const r=e[of].get(t);if(r){const i=r.value;if(EM(e,i)){if(nE(e,r),!e[OC])return}else n&&(e[$5e]&&(r.value.now=Date.now()),e[Gs].unshiftNode(r));return i.value}},EM=(e,t)=>{if(!t||!t.maxAge&&!e[i1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[i1]&&n>e[i1]},VT=e=>{if(e[Ap]>e[Fv])for(let t=e[Gs].tail;e[Ap]>e[Fv]&&t!==null;){const n=t.prev;nE(e,t),t=n}},nE=(e,t)=>{if(t){const n=t.value;e[wp]&&e[wp](n.key,n.value),e[Ap]-=n.length,e[of].delete(n.key),e[Gs].removeNode(t)}};class min{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const f0e=(e,t,n,r)=>{let i=n.value;EM(e,i)&&(nE(e,n),e[OC]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var gin=pin;const yin=Object.freeze({loose:!0}),vin=Object.freeze({}),bin=e=>e?typeof e!="object"?yin:e:vin;var Mre=bin,KH={exports:{}};const _in="2.0.0",M5e=256,win=Number.MAX_SAFE_INTEGER||9007199254740991,Ein=16,xin=M5e-6,Sin=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Lre={MAX_LENGTH:M5e,MAX_SAFE_COMPONENT_LENGTH:Ein,MAX_SAFE_BUILD_LENGTH:xin,MAX_SAFE_INTEGER:win,RELEASE_TYPES:Sin,SEMVER_SPEC_VERSION:_in,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Tin=typeof process=="object"&&aB&&aB.NODE_DEBUG&&/\bsemver\b/i.test(aB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var g5=Tin;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Lre,s=g5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(KH,KH.exports);var Fre=KH.exports;const d0e=/^[0-9]+$/,L5e=(e,t)=>{const n=d0e.test(e),r=d0e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Ain=(e,t)=>L5e(t,e);var Cin={compareIdentifiers:L5e,rcompareIdentifiers:Ain};const vP=g5,{MAX_LENGTH:h0e,MAX_SAFE_INTEGER:bP}=Lre,{safeRe:p0e,t:m0e}=Fre,Iin=Mre,{compareIdentifiers:R_}=Cin;let kin=class bd{constructor(t,n){if(n=Iin(n),t instanceof bd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>h0e)throw new TypeError(`version is longer than ${h0e} characters`);vP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?p0e[m0e.LOOSE]:p0e[m0e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>bP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>bP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>bP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<bP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(vP("SemVer.compare",this.version,this.options,t),!(t instanceof bd)){if(typeof t=="string"&&t===this.version)return 0;t=new bd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof bd||(t=new bd(t,this.options)),R_(this.major,t.major)||R_(this.minor,t.minor)||R_(this.patch,t.patch)}comparePre(t){if(t instanceof bd||(t=new bd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(vP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return R_(r,i)}while(++n)}compareBuild(t){t instanceof bd||(t=new bd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(vP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return R_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),R_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var jre=kin;const g0e=jre,Rin=(e,t,n)=>new g0e(e,n).compare(new g0e(t,n));var jS=Rin;const Nin=jS,Pin=(e,t,n)=>Nin(e,t,n)===0;var Din=Pin;const Oin=jS,$in=(e,t,n)=>Oin(e,t,n)!==0;var Min=$in;const Lin=jS,Fin=(e,t,n)=>Lin(e,t,n)>0;var jin=Fin;const Bin=jS,Uin=(e,t,n)=>Bin(e,t,n)>=0;var zin=Uin;const Vin=jS,Hin=(e,t,n)=>Vin(e,t,n)<0;var qin=Hin;const Win=jS,Gin=(e,t,n)=>Win(e,t,n)<=0;var Yin=Gin;const Kin=Din,Xin=Min,Qin=jin,Jin=zin,Zin=qin,esn=Yin,tsn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Kin(e,n,r);case"!=":return Xin(e,n,r);case">":return Qin(e,n,r);case">=":return Jin(e,n,r);case"<":return Zin(e,n,r);case"<=":return esn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var nsn=tsn,fB,y0e;function rsn(){if(y0e)return fB;y0e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}fB=t;const n=Mre,{safeRe:r,t:i}=Fre,s=nsn,o=g5,a=jre,u=F5e();return fB}var dB,v0e;function F5e(){if(v0e)return dB;v0e=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(L=>this.parseRange(L.trim())).filter(L=>L.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const L=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[L];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const L=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,B=n.get(L);if(B)return B;const z=this.options.loose,q=z?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(q,R(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let D=$.split(" ").map(H=>y(H,this.options)).join(" ").split(/\s+/).map(H=>I(H,this.options));z&&(D=D.filter(H=>(s("loose invalid filter",H,this.options),!!H.match(a[u.COMPARATORLOOSE])))),s("range list",D);const U=new Map,W=D.map(H=>new i(H,this.options));for(const H of W){if(p(H))return[H];U.set(H.value,H)}U.size>1&&U.has("")&&U.delete("");const j=[...U.values()];return n.set(L,j),j}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(L=>g(L,F)&&$.set.some(B=>g(B,F)&&L.every(z=>B.every(q=>z.intersects(q,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],$,this.options))return!0;return!1}}dB=e;const t=gin,n=new t({max:1e3}),r=Mre,i=rsn(),s=g5,o=jre,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Fre,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Lre,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,$)=>{let F=!0;const L=P.slice();let B=L.pop();for(;F&&L.length;)F=L.every(z=>B.intersects(z,$)),B=L.pop();return F},y=(P,$)=>(s("comp",P,$),P=E(P,$),s("caret",P),P=b(P,$),s("tildes",P),P=T(P,$),s("xrange",P),P=C(P,$),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",b=(P,$)=>P.trim().split(/\s+/).map(F=>w(F,$)).join(" "),w=(P,$)=>{const F=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(F,(L,B,z,q,D)=>{s("tilde",P,L,B,z,q,D);let U;return v(B)?U="":v(z)?U=`>=${B}.0.0 <${+B+1}.0.0-0`:v(q)?U=`>=${B}.${z}.0 <${B}.${+z+1}.0-0`:D?(s("replaceTilde pr",D),U=`>=${B}.${z}.${q}-${D} <${B}.${+z+1}.0-0`):U=`>=${B}.${z}.${q} <${B}.${+z+1}.0-0`,s("tilde return",U),U})},E=(P,$)=>P.trim().split(/\s+/).map(F=>S(F,$)).join(" "),S=(P,$)=>{s("caret",P,$);const F=$.loose?a[u.CARETLOOSE]:a[u.CARET],L=$.includePrerelease?"-0":"";return P.replace(F,(B,z,q,D,U)=>{s("caret",P,B,z,q,D,U);let W;return v(z)?W="":v(q)?W=`>=${z}.0.0${L} <${+z+1}.0.0-0`:v(D)?z==="0"?W=`>=${z}.${q}.0${L} <${z}.${+q+1}.0-0`:W=`>=${z}.${q}.0${L} <${+z+1}.0.0-0`:U?(s("replaceCaret pr",U),z==="0"?q==="0"?W=`>=${z}.${q}.${D}-${U} <${z}.${q}.${+D+1}-0`:W=`>=${z}.${q}.${D}-${U} <${z}.${+q+1}.0-0`:W=`>=${z}.${q}.${D}-${U} <${+z+1}.0.0-0`):(s("no pr"),z==="0"?q==="0"?W=`>=${z}.${q}.${D}${L} <${z}.${q}.${+D+1}-0`:W=`>=${z}.${q}.${D}${L} <${z}.${+q+1}.0-0`:W=`>=${z}.${q}.${D} <${+z+1}.0.0-0`),s("caret return",W),W})},T=(P,$)=>(s("replaceXRanges",P,$),P.split(/\s+/).map(F=>A(F,$)).join(" ")),A=(P,$)=>{P=P.trim();const F=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(F,(L,B,z,q,D,U)=>{s("xRange",P,L,B,z,q,D,U);const W=v(z),j=W||v(q),H=j||v(D),G=H;return B==="="&&G&&(B=""),U=$.includePrerelease?"-0":"",W?B===">"||B==="<"?L="<0.0.0-0":L="*":B&&G?(j&&(q=0),D=0,B===">"?(B=">=",j?(z=+z+1,q=0,D=0):(q=+q+1,D=0)):B==="<="&&(B="<",j?z=+z+1:q=+q+1),B==="<"&&(U="-0"),L=`${B+z}.${q}.${D}${U}`):j?L=`>=${z}.0.0${U} <${+z+1}.0.0-0`:H&&(L=`>=${z}.${q}.0${U} <${z}.${+q+1}.0-0`),s("xRange return",L),L})},C=(P,$)=>(s("replaceStars",P,$),P.trim().replace(a[u.STAR],"")),I=(P,$)=>(s("replaceGTE0",P,$),P.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),R=P=>($,F,L,B,z,q,D,U,W,j,H,G,ne)=>(v(L)?F="":v(B)?F=`>=${L}.0.0${P?"-0":""}`:v(z)?F=`>=${L}.${B}.0${P?"-0":""}`:q?F=`>=${F}`:F=`>=${F}${P?"-0":""}`,v(W)?U="":v(j)?U=`<${+W+1}.0.0-0`:v(H)?U=`<${W}.${+j+1}.0-0`:G?U=`<=${W}.${j}.${H}-${G}`:P?U=`<${W}.${j}.${+H+1}-0`:U=`<=${U}`,`${F} ${U}`.trim()),O=(P,$,F)=>{for(let L=0;L<P.length;L++)if(!P[L].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let L=0;L<P.length;L++)if(s(P[L].semver),P[L].semver!==i.ANY&&P[L].semver.prerelease.length>0){const B=P[L].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return dB}const isn=F5e(),ssn=(e,t,n)=>{try{t=new isn(t,n)}catch{return!1}return t.test(e)};var osn=ssn,j5e=ain(osn);function asn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var usn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function B5e(e,...t){for(const n of t)lsn(e,n);return e}function lsn(e,t){for(const n of Object.keys(t))wS(e,n,t[n],!0)}const uf=WGt;let EI=Qnn;const _P=typeof window<"u"?window:void 0;var x0e;EI===void 0&&((x0e=_P==null?void 0:_P.vl)!=null&&x0e.compile)&&(EI=_P.vl);const csn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},fsn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},DA={vega:"Vega","vega-lite":"Vega-Lite"},xM={vega:uf.version,"vega-lite":EI?EI.version:"not available"},dsn={vega:e=>e,"vega-lite":(e,t)=>EI.compile(e,{config:t}).spec},hsn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,psn="chart-wrapper";function msn(e){return typeof e=="function"}function b0e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${DA[r]} JSON Source`}function gsn(e,t){if(e.$schema){const n=N5e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${DA[n.library]}, but mode argument sets ${DA[t]??t}.`);const r=n.library;return j5e(xM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${DA[r]} ${n.version}, but the current version of ${DA[r]} is v${xM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function U5e(e){return!!(e&&"load"in e)}function _0e(e){return U5e(e)?e:uf.loader(e)}function ysn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return pt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function vsn(e,t,n={}){let r,i;pt(t)?(i=_0e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=ysn(r),o=s.loader;(!i||o)&&(i=_0e(n.loader??o));const a=await w0e(s,i),u=await w0e(n,i),l={...B5e(u,a),config:_S(u.config??{},a.config??{})};return await _sn(e,r,l,i)}async function w0e(e,t){const n=pt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=pt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function bsn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function _sn(e,t,n={},r){const i=n.theme?_S(Jrn[n.theme],n.config??{}):n.config,s=Ly(n.actions)?n.actions:B5e({},csn,n.actions??{}),o={...fsn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??uf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:S,rootContainer:T}=bsn(c);if(!S.getElementById(E)){const A=document.createElement("style");A.id=E,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?usn.toString():n.defaultStyle,T.appendChild(A)}}const f=gsn(t,n.mode);let d=dsn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=N5e(d.$schema);j5e(xM.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${xM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(psn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):NF(d,p,!0,!1).newDocument),n.formatLocale&&uf.formatLocale(n.formatLocale),n.timeFormatLocale&&uf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const S=n.expressionFunctions[E];"fn"in S?uf.expressionFunction(E,S.fn,S.visitor):S instanceof Function&&uf.expressionFunction(E,S)}const{ast:m}=n,g=uf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||uf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:uf.expressionInterpreter??n.expr??nYt}:{}});if(y.addSignalListener("autosize",(E,S)=>{const{type:T}=S;T=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):T=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):T=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:S}=n,T=E&&!U5e(E)?E==null?void 0:E.baseURL:void 0,A=msn(S)?S:new oin({baseURL:T,...S===!0?{}:S}).call;y.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(E,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,c.append(T),E=T;const A=document.createElement("summary");A.innerHTML=hsn,T.append(A),b=C=>{T.contains(C.target)||T.removeAttribute("open")},document.addEventListener("click",b)}const S=document.createElement("div");if(E.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const T of["svg","png"])if(s===!0||s.export===!0||s.export[T]){const A=o[`${T.toUpperCase()}_ACTION`],C=document.createElement("a"),I=mt(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;C.text=A,C.href="#",C.target="_blank",C.download=`${l}.${T}`,C.addEventListener("mousedown",async function(R){R.preventDefault();const O=await y.toImageURL(T,I);this.href=O}),S.append(C)}}if(s===!0||s.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(A){b0e(h9(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),S.append(T)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(A){b0e(h9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),S.append(T)}if(s===!0||s.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(C){asn(window,T,{config:i,mode:f,renderer:a,spec:h9(t)}),C.preventDefault()}),S.append(A)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function wsn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Esn(e,t,n){n&&(wsn(n)?n(e.data(t)):e.change(t,uf.changeset().remove(()=>!0).insert(n)))}function xsn(e,t){Object.keys(t).forEach(n=>{Esn(e,n,t[n])})}function z5e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const V5e=()=>{};function hB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Ssn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=z5e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!zP(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function E0e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function pB(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function OA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class H5e extends Wi.PureComponent{constructor(){super(...arguments),OA(this,"containerRef",Wi.createRef()),OA(this,"resultPromise",void 0),OA(this,"handleError",t=>{const{onError:n=V5e}=this.props;n(t,this.containerRef.current),console.warn(t)}),OA(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=z5e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Ssn(pB(this.props),pB(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!wV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&E0e(a,s),i&&hB(a,i)),a.run()})}else wV(i,s)||this.modifyView(o=>{s&&E0e(o,s),i&&hB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=pB(this.props);this.resultPromise=vsn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;hB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Wi.createElement("div",{ref:this.containerRef,className:t,style:n})}}OA(H5e,"propTypes",{className:Ihe.string,onError:Ihe.func});function XH(){return XH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XH.apply(this,arguments)}function QH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Tsn={};class q5e extends Wi.PureComponent{constructor(){super(...arguments),QH(this,"vegaEmbed",Wi.createRef()),QH(this,"handleNewView",t=>{this.update();const{onNewView:n=V5e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){wV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{xsn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Wi.createElement(H5e,XH({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}QH(q5e,"defaultProps",{data:Tsn});function JH(){return JH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JH.apply(this,arguments)}function Asn(e){return Wi.createElement(q5e,JH({},e,{mode:"vega-lite"}))}function Csn(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function Isn(e){const{studyId:t,allParticipants:n,config:r}=e,i=Hm(),[s,o]=xw(),a=n.filter(b=>b.completed).map(b=>Math.max(...Object.values(b.answers).map(w=>w.endTime).filter(w=>w!==void 0))).filter(b=>Number.isFinite(b)),[u,l]=N.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),[c,f,d,h]=N.useMemo(()=>{const b=n.filter(S=>!S.rejected&&S.completed),w=n.filter(S=>!S.rejected&&!S.completed),E=n.filter(S=>S.rejected);return[b,w,E,b.filter(S=>Csn(S.answers,u))]},[n,u]),p=N.useMemo(()=>{var b,w;return h.length>0?[{Date:(b=u[0])==null?void 0:b.getTime(),Participants:0},...h.map(E=>Math.max(...Object.values(E.answers).map(S=>S.endTime).flat())).sort((E,S)=>E-S).map((E,S)=>({Date:E,Participants:S})),{Date:(w=u[1])==null?void 0:w.getTime(),Participants:h.length}]:[]},[h,u]),m=N.useMemo(()=>{var b,w;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(b=u[0])==null?void 0:b.getTime(),(w=u[1])==null?void 0:w.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:p}}},[o.width,u,p]),[g,{close:y,open:v}]=Sw(!1);return _.jsx(Ic,{children:_.jsxs(wb,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(qt,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(qt,{direction:"row",align:"center",children:[_.jsx(ki,{order:5,children:t}),_.jsx(sDe,{completed:c.length,inProgress:f.length,rejected:d.length,filteredCompleted:h.length})]}),_.jsxs(Fs,{children:[_.jsx(iDe,{allParticipants:n,studyId:t}),_.jsxs(Zr,{opened:g,children:[_.jsx(Zr.Target,{children:_.jsx(Rn,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:v,onMouseLeave:y,px:4,children:_.jsx(xKe,{})})}),_.jsx(Zr.Dropdown,{children:_.jsx(ot,{children:"Analyze and manage study data"})})]})]})]}),_.jsx(eZ,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:u,onChange:l}),p.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ot,{mt:16,children:"Finished Participants"}),_.jsx(Asn,{spec:m,actions:!1})]}):_.jsx(_e,{h:293.4,children:_.jsx(hm,{style:{height:"100%"},children:_.jsx(ot,{children:"Not enough participants for chart"})})})]})})}function ksn(e){const{globalConfig:t}=e,[n,r]=N.useState(!1),[i,s]=N.useState({}),[o,a]=N.useState({}),[u,l]=N.useState({}),{storageEngine:c}=xs(),{user:f}=Lb();N.useEffect(()=>{(async()=>{r(!0);const p={},m={},g={},y=async b=>{const w=await W6(b,t);if(c){if(p[b]=await c.getAllParticipantsDataByStudy(b),w===null)return;if(m[b]=w,c instanceof dc){const E=await c.getModes(b);g[b]=E.analyticsInterfacePubliclyAccessible}}};await(async()=>{const b=t.configsList.map(w=>y(w));try{await Promise.all(b),s(p),a(m),l(g)}catch(w){console.error("Error fetching data:",w)}finally{r(!1)}})()})()},[t,c]);const d=t.configsList.map(h=>i[h]&&(u[h]||f.isAdmin?_.jsx(Ua.Col,{span:{md:12,xl:6},children:_.jsx(Isn,{studyId:h,allParticipants:i[h],config:o[h]})},`${h}-panel`):null));return _.jsxs(_e,{children:[_.jsx(ki,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(Ua,{children:[d.length>0?d:_.jsx(Ic,{mt:100,children:_.jsx(ot,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(Pl,{visible:n})]})]})}function Rsn({globalConfig:e}){return _.jsxs(_.Fragment,{children:[_.jsx(SC,{studyIds:e.configsList}),_.jsx(fi.Main,{children:_.jsx(Ic,{fluid:!0,children:_.jsx(ksn,{globalConfig:e})})})]})}function Nsn(){const{user:e,triggerAuth:t}=Lb(),{storageEngine:n}=xs(),[r,i]=N.useState(!1),[s,o]=N.useState([]),[a,u]=N.useState(!1),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(""),[y,v]=N.useState(null),b=$Ee({initialValues:{email:""},validate:{email:pst("Invalid email")}});N.useEffect(()=>{(async()=>{if(u(!0),n instanceof dc){const R=await(n==null?void 0:n.getUserManagementData("authentication"));i(R==null?void 0:R.isEnabled);const O=await(n==null?void 0:n.getUserManagementData("adminUsers"));O&&O.adminUsersList&&o(O==null?void 0:O.adminUsersList.map(P=>P.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof dc){const I=await oDe(n,u);I&&I.email&&v({email:I.email,uid:I.uid}),p(!0)}u(!1)},E=async I=>{u(!0),n instanceof dc&&I&&(await n.changeAuth(!0),await n.addAdminUser(I),o([I.email]),i(!0),t()),p(!1),u(!1)},S=async()=>{if(u(!0),n instanceof dc){await n.addAdminUser({email:b.values.email,uid:null});const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(R=>R.email))}u(!1),c(!1),b.setValues({email:""})},T=I=>{d(!0),g(I)},A=async()=>{if(u(!0),n instanceof dc){await n.removeAdminUser(m);const I=await n.getUserManagementData("adminUsers");o(I==null?void 0:I.adminUsersList.map(R=>R.email))}d(!1),u(!1)},C=N.useMemo(()=>n instanceof dc,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Ic,{children:_.jsxs(wb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(ki,{mb:20,order:3,children:"Authentication"}),r?_.jsx(qt,{children:_.jsx(ot,{children:"Authentication is enabled."})}):_.jsxs(qt,{justify:"space-between",children:[_.jsx(_e,{children:_.jsx(ot,{children:"Authentication is currently disabled."})}),_.jsx(is,{label:"You can only enable auth when using Firebase",disabled:C,children:_.jsx(Rn,{onClick:I=>C?w():I.preventDefault(),color:"green","data-disabled":C?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(qt,{mt:40,direction:"column",children:[_.jsxs(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(ki,{order:6,children:"Enabled Users"}),_.jsx(YG,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(I=>{var R;return _.jsxs(qt,{justify:"space-between",mb:10,children:[_.jsx(ot,{children:I}),I===((R=e.user)==null?void 0:R.email)?_.jsx(ot,{color:"blue",size:"xs",children:"You"}):_.jsx(N0,{variant:"subtle",onClick:()=>T(I),children:_.jsx(P_e,{color:"red"})})]},I)}):null]}):null]})}),_.jsx(_s,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(_e,{component:"form",onSubmit:b.onSubmit(()=>S()),children:[_.jsx(u1,{leftSection:_.jsx(bKe,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),_.jsxs(qt,{mt:30,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(Rn,{type:"submit",children:"Save"})]})]})}),_.jsxs(_s,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(ot,{fw:700,children:["Remove",m,"?"]}),children:[_.jsxs(ot,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:m})," ","as an administrator?"]}),_.jsxs(qt,{mt:40,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(Rn,{onClick:()=>A(),children:"Yes, I'm sure."})]})]}),_.jsxs(_s,{opened:h,size:"md",onClose:()=>d(!1),title:_.jsx(ot,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(ot,{mt:40,children:["User"," ",_.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(qt,{mt:40,justify:"right",children:[_.jsx(Rn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(Rn,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),_.jsx(Pl,{visible:a})]})}class Psn extends nDe{constructor(){super("localStorage");cu(this,"studyDatabase");cu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await z_.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await k$(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await k$(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await z_.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=I$();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=z_.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=I$();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await z_.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await z_.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function Dsn(){let e,t=!1;{const n=new dc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new Psn;await n.connect(),e=n}return e}async function Osn(){const t=await(await fetch(`${Lh}global.json`)).text();return hIt(t)}function $sn(){const[e,t]=N.useState(null),[n,r]=N.useState({});N.useEffect(()=>{async function a(){e&&r(await FIt(e))}a()},[e]),N.useEffect(()=>{e||Osn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=xs();N.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await Dsn();s(u)}a()},[s,i]);const o=async a=>i instanceof dc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(lKe,{basename:Lh,children:_.jsx(LMt,{children:_.jsx(mKe,{children:_.jsx(fi,{padding:"md",header:{height:70},children:_.jsxs(sKe,{children:[_.jsx(mp,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(SC,{studyIds:e.configsList}),_.jsx(_rt,{globalConfig:e,studyConfigs:n})]})}),_.jsx(mp,{path:"/:studyId/*",element:_.jsx(jIt,{globalConfig:e})}),_.jsx(mp,{path:"/analysis/dashboard",element:_.jsx(Rsn,{globalConfig:e})}),_.jsx(mp,{path:"/analysis",element:_.jsx(Wz,{to:"/analysis/dashboard"})}),_.jsx(mp,{path:"/analysis/stats/:studyId/:tab",element:_.jsx(She,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(HMt,{globalConfig:e})})}),_.jsx(mp,{path:"/analysis/stats/:studyId",element:_.jsx(Wz,{to:"./table",replace:!0})}),_.jsx(mp,{path:"/settings",element:_.jsxs(She,{children:[_.jsx(SC,{studyIds:e.configsList}),_.jsx(fi.Main,{children:_.jsx(Nsn,{})})]})}),_.jsx(mp,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(SC,{studyIds:e.configsList}),_.jsx(fi.Main,{children:_.jsx(qMt,{})})]})})]})})})})}):null}mB.createRoot(document.getElementById("root")).render(_.jsx(Wi.StrictMode,{children:_.jsx(mYe,{children:_.jsx(i1e,{children:_.jsx($sn,{})})})}))});export default Msn();
