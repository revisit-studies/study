var tXe=Object.defineProperty;var nXe=(e,t,n)=>t in e?tXe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var rXe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ju=(e,t,n)=>nXe(e,typeof t!="symbol"?t+"":t,n);var qvn=rXe((exn,Uoe)=>{function iXe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Jt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function sXe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var sEe={exports:{}},EF={},oEe={exports:{}},mr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PD=Symbol.for("react.element"),oXe=Symbol.for("react.portal"),aXe=Symbol.for("react.fragment"),uXe=Symbol.for("react.strict_mode"),lXe=Symbol.for("react.profiler"),cXe=Symbol.for("react.provider"),fXe=Symbol.for("react.context"),dXe=Symbol.for("react.forward_ref"),hXe=Symbol.for("react.suspense"),pXe=Symbol.for("react.memo"),mXe=Symbol.for("react.lazy"),Lce=Symbol.iterator;function gXe(e){return e===null||typeof e!="object"?null:(e=Lce&&e[Lce]||e["@@iterator"],typeof e=="function"?e:null)}var aEe={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uEe=Object.assign,lEe={};function l2(e,t,n){this.props=e,this.context=t,this.refs=lEe,this.updater=n||aEe}l2.prototype.isReactComponent={};l2.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};l2.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function cEe(){}cEe.prototype=l2.prototype;function iX(e,t,n){this.props=e,this.context=t,this.refs=lEe,this.updater=n||aEe}var sX=iX.prototype=new cEe;sX.constructor=iX;uEe(sX,l2.prototype);sX.isPureReactComponent=!0;var Fce=Array.isArray,fEe=Object.prototype.hasOwnProperty,oX={current:null},dEe={key:!0,ref:!0,__self:!0,__source:!0};function hEe(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)fEe.call(t,r)&&!dEe.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:PD,type:e,key:s,ref:o,props:i,_owner:oX.current}}function yXe(e,t){return{$$typeof:PD,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function aX(e){return typeof e=="object"&&e!==null&&e.$$typeof===PD}function vXe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Bce=/\/+/g;function qj(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vXe(""+e.key):t.toString(36)}function m4(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case PD:case oXe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+qj(o,0):r,Fce(i)?(n="",e!=null&&(n=e.replace(Bce,"$&/")+"/"),m4(i,t,n,"",function(l){return l})):i!=null&&(aX(i)&&(i=yXe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Bce,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Fce(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+qj(s,a);o+=m4(s,t,n,u,i)}else if(u=gXe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+qj(s,a++),o+=m4(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function x3(e,t,n){if(e==null)return e;var r=[],i=0;return m4(e,r,"","",function(s){return t.call(n,s,i++)}),r}function bXe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gl={current:null},g4={transition:null},xXe={ReactCurrentDispatcher:gl,ReactCurrentBatchConfig:g4,ReactCurrentOwner:oX};function pEe(){throw Error("act(...) is not supported in production builds of React.")}mr.Children={map:x3,forEach:function(e,t,n){x3(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return x3(e,function(){t++}),t},toArray:function(e){return x3(e,function(t){return t})||[]},only:function(e){if(!aX(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mr.Component=l2;mr.Fragment=aXe;mr.Profiler=lXe;mr.PureComponent=iX;mr.StrictMode=uXe;mr.Suspense=hXe;mr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xXe;mr.act=pEe;mr.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=uEe({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=oX.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)fEe.call(t,u)&&!dEe.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:PD,type:e.type,key:i,ref:s,props:r,_owner:o}};mr.createContext=function(e){return e={$$typeof:fXe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:cXe,_context:e},e.Consumer=e};mr.createElement=hEe;mr.createFactory=function(e){var t=hEe.bind(null,e);return t.type=e,t};mr.createRef=function(){return{current:null}};mr.forwardRef=function(e){return{$$typeof:dXe,render:e}};mr.isValidElement=aX;mr.lazy=function(e){return{$$typeof:mXe,_payload:{_status:-1,_result:e},_init:bXe}};mr.memo=function(e,t){return{$$typeof:pXe,type:e,compare:t===void 0?null:t}};mr.startTransition=function(e){var t=g4.transition;g4.transition={};try{e()}finally{g4.transition=t}};mr.unstable_act=pEe;mr.useCallback=function(e,t){return gl.current.useCallback(e,t)};mr.useContext=function(e){return gl.current.useContext(e)};mr.useDebugValue=function(){};mr.useDeferredValue=function(e){return gl.current.useDeferredValue(e)};mr.useEffect=function(e,t){return gl.current.useEffect(e,t)};mr.useId=function(){return gl.current.useId()};mr.useImperativeHandle=function(e,t,n){return gl.current.useImperativeHandle(e,t,n)};mr.useInsertionEffect=function(e,t){return gl.current.useInsertionEffect(e,t)};mr.useLayoutEffect=function(e,t){return gl.current.useLayoutEffect(e,t)};mr.useMemo=function(e,t){return gl.current.useMemo(e,t)};mr.useReducer=function(e,t,n){return gl.current.useReducer(e,t,n)};mr.useRef=function(e){return gl.current.useRef(e)};mr.useState=function(e){return gl.current.useState(e)};mr.useSyncExternalStore=function(e,t,n){return gl.current.useSyncExternalStore(e,t,n)};mr.useTransition=function(){return gl.current.useTransition()};mr.version="18.3.1";oEe.exports=mr;var N=oEe.exports;const ti=Cm(N),M6=iXe({__proto__:null,default:ti},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _Xe=N,wXe=Symbol.for("react.element"),EXe=Symbol.for("react.fragment"),SXe=Object.prototype.hasOwnProperty,TXe=_Xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CXe={key:!0,ref:!0,__self:!0,__source:!0};function mEe(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)SXe.call(t,r)&&!CXe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:wXe,type:e,key:s,ref:o,props:i,_owner:TXe.current}}EF.Fragment=EXe;EF.jsx=mEe;EF.jsxs=mEe;sEe.exports=EF;var _=sEe.exports,xH={},gEe={exports:{}},xf={},yEe={exports:{}},vEe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,Q){var L=K.length;K.push(Q);e:for(;0<L;){var z=L-1>>>1,W=K[z];if(0<i(W,Q))K[z]=Q,K[L]=W,L=z;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var Q=K[0],L=K.pop();if(L!==Q){K[0]=L;e:for(var z=0,W=K.length,F=W>>>1;z<F;){var V=2*(z+1)-1,J=K[V],ue=V+1,we=K[ue];if(0>i(J,L))ue<W&&0>i(we,J)?(K[z]=we,K[ue]=L,z=ue):(K[z]=J,K[V]=L,z=V);else if(ue<W&&0>i(we,L))K[z]=we,K[ue]=L,z=ue;else break e}}return Q}function i(K,Q){var L=K.sortIndex-Q.sortIndex;return L!==0?L:K.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(K){for(var Q=n(l);Q!==null;){if(Q.callback===null)r(l);else if(Q.startTime<=K)r(l),Q.sortIndex=Q.expirationTime,t(u,Q);else break;Q=n(l)}}function w(K){if(m=!1,x(K),!p)if(n(u)!==null)p=!0,H(S);else{var Q=n(l);Q!==null&&Y(w,Q.startTime-K)}}function S(K,Q){p=!1,m&&(m=!1,y(I),I=-1),h=!0;var L=d;try{for(x(Q),f=n(u);f!==null&&(!(f.expirationTime>Q)||K&&!P());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=Q);Q=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),x(Q)}else r(u);f=n(u)}if(f!==null)var F=!0;else{var V=n(l);V!==null&&Y(w,V.startTime-Q),F=!1}return F}finally{f=null,d=L,h=!1}}var T=!1,C=null,I=-1,D=5,k=-1;function P(){return!(e.unstable_now()-k<D)}function M(){if(C!==null){var K=e.unstable_now();k=K;var Q=!0;try{Q=C(!0,K)}finally{Q?$():(T=!1,C=null)}}else T=!1}var $;if(typeof b=="function")$=function(){b(M)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,q=B.port2;B.port1.onmessage=M,$=function(){q.postMessage(null)}}else $=function(){g(M,0)};function H(K){C=K,T||(T=!0,$())}function Y(K,Q){I=g(function(){K(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,H(S))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(K){switch(d){case 1:case 2:case 3:var Q=3;break;default:Q=d}var L=d;d=Q;try{return K()}finally{d=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,Q){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var L=d;d=K;try{return Q()}finally{d=L}},e.unstable_scheduleCallback=function(K,Q,L){var z=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?z+L:z):L=z,K){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=L+W,K={id:c++,callback:Q,priorityLevel:K,startTime:L,expirationTime:W,sortIndex:-1},L>z?(K.sortIndex=L,t(l,K),n(u)===null&&K===n(l)&&(m?(y(I),I=-1):m=!0,Y(w,L-z))):(K.sortIndex=W,t(u,K),p||h||(p=!0,H(S))),K},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(K){var Q=d;return function(){var L=d;d=Q;try{return K.apply(this,arguments)}finally{d=L}}}})(vEe);yEe.exports=vEe;var AXe=yEe.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IXe=N,sf=AXe;function bt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bEe=new Set,Uk={};function O_(e,t){HS(e,t),HS(e+"Capture",t)}function HS(e,t){for(Uk[e]=t,e=0;e<t.length;e++)bEe.add(t[e])}var sg=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_H=Object.prototype.hasOwnProperty,kXe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jce={},Uce={};function RXe(e){return _H.call(Uce,e)?!0:_H.call(jce,e)?!1:kXe.test(e)?Uce[e]=!0:(jce[e]=!0,!1)}function DXe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function NXe(e,t,n,r){if(t===null||typeof t>"u"||DXe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function yl(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var ja={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ja[e]=new yl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ja[t]=new yl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ja[e]=new yl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ja[e]=new yl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ja[e]=new yl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ja[e]=new yl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ja[e]=new yl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ja[e]=new yl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ja[e]=new yl(e,5,!1,e.toLowerCase(),null,!1,!1)});var uX=/[\-:]([a-z])/g;function lX(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(uX,lX);ja[t]=new yl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(uX,lX);ja[t]=new yl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(uX,lX);ja[t]=new yl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ja[e]=new yl(e,1,!1,e.toLowerCase(),null,!1,!1)});ja.xlinkHref=new yl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ja[e]=new yl(e,1,!1,e.toLowerCase(),null,!0,!0)});function cX(e,t,n,r){var i=ja.hasOwnProperty(t)?ja[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(NXe(t,n,i,r)&&(n=null),r||i===null?RXe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Og=IXe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_3=Symbol.for("react.element"),DE=Symbol.for("react.portal"),NE=Symbol.for("react.fragment"),fX=Symbol.for("react.strict_mode"),wH=Symbol.for("react.profiler"),xEe=Symbol.for("react.provider"),_Ee=Symbol.for("react.context"),dX=Symbol.for("react.forward_ref"),EH=Symbol.for("react.suspense"),SH=Symbol.for("react.suspense_list"),hX=Symbol.for("react.memo"),Iy=Symbol.for("react.lazy"),wEe=Symbol.for("react.offscreen"),zce=Symbol.iterator;function YC(e){return e===null||typeof e!="object"?null:(e=zce&&e[zce]||e["@@iterator"],typeof e=="function"?e:null)}var Rs=Object.assign,Wj;function KA(e){if(Wj===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wj=t&&t[1]||""}return`
`+Wj+e}var Gj=!1;function Yj(e,t){if(!e||Gj)return"";Gj=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{Gj=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?KA(e):""}function PXe(e){switch(e.tag){case 5:return KA(e.type);case 16:return KA("Lazy");case 13:return KA("Suspense");case 19:return KA("SuspenseList");case 0:case 2:case 15:return e=Yj(e.type,!1),e;case 11:return e=Yj(e.type.render,!1),e;case 1:return e=Yj(e.type,!0),e;default:return""}}function TH(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case NE:return"Fragment";case DE:return"Portal";case wH:return"Profiler";case fX:return"StrictMode";case EH:return"Suspense";case SH:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case _Ee:return(e.displayName||"Context")+".Consumer";case xEe:return(e._context.displayName||"Context")+".Provider";case dX:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case hX:return t=e.displayName||null,t!==null?t:TH(e.type)||"Memo";case Iy:t=e._payload,e=e._init;try{return TH(e(t))}catch{}}return null}function OXe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return TH(t);case 8:return t===fX?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function O1(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function EEe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $Xe(e){var t=EEe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function w3(e){e._valueTracker||(e._valueTracker=$Xe(e))}function SEe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=EEe(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function L6(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function CH(e,t){var n=t.checked;return Rs({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Vce(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=O1(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function TEe(e,t){t=t.checked,t!=null&&cX(e,"checked",t,!1)}function AH(e,t){TEe(e,t);var n=O1(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?IH(e,t.type,n):t.hasOwnProperty("defaultValue")&&IH(e,t.type,O1(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Hce(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function IH(e,t,n){(t!=="number"||L6(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var XA=Array.isArray;function rS(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+O1(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function kH(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(bt(91));return Rs({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function qce(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(bt(92));if(XA(n)){if(1<n.length)throw Error(bt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:O1(n)}}function CEe(e,t){var n=O1(t.value),r=O1(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Wce(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function AEe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function RH(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?AEe(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var E3,IEe=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(E3=E3||document.createElement("div"),E3.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=E3.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zk(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var UI={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MXe=["Webkit","ms","Moz","O"];Object.keys(UI).forEach(function(e){MXe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),UI[t]=UI[e]})});function kEe(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||UI.hasOwnProperty(e)&&UI[e]?(""+t).trim():t+"px"}function REe(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kEe(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var LXe=Rs({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function DH(e,t){if(t){if(LXe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(bt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(bt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(bt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(bt(62))}}function NH(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PH=null;function pX(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var OH=null,iS=null,sS=null;function Gce(e){if(e=MD(e)){if(typeof OH!="function")throw Error(bt(280));var t=e.stateNode;t&&(t=IF(t),OH(e.stateNode,e.type,t))}}function DEe(e){iS?sS?sS.push(e):sS=[e]:iS=e}function NEe(){if(iS){var e=iS,t=sS;if(sS=iS=null,Gce(e),t)for(e=0;e<t.length;e++)Gce(t[e])}}function PEe(e,t){return e(t)}function OEe(){}var Kj=!1;function $Ee(e,t,n){if(Kj)return e(t,n);Kj=!0;try{return PEe(e,t,n)}finally{Kj=!1,(iS!==null||sS!==null)&&(OEe(),NEe())}}function Vk(e,t){var n=e.stateNode;if(n===null)return null;var r=IF(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(bt(231,t,typeof n));return n}var $H=!1;if(sg)try{var KC={};Object.defineProperty(KC,"passive",{get:function(){$H=!0}}),window.addEventListener("test",KC,KC),window.removeEventListener("test",KC,KC)}catch{$H=!1}function FXe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var zI=!1,F6=null,B6=!1,MH=null,BXe={onError:function(e){zI=!0,F6=e}};function jXe(e,t,n,r,i,s,o,a,u){zI=!1,F6=null,FXe.apply(BXe,arguments)}function UXe(e,t,n,r,i,s,o,a,u){if(jXe.apply(this,arguments),zI){if(zI){var l=F6;zI=!1,F6=null}else throw Error(bt(198));B6||(B6=!0,MH=l)}}function $_(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function MEe(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Yce(e){if($_(e)!==e)throw Error(bt(188))}function zXe(e){var t=e.alternate;if(!t){if(t=$_(e),t===null)throw Error(bt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yce(i),e;if(s===r)return Yce(i),t;s=s.sibling}throw Error(bt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(bt(189))}}if(n.alternate!==r)throw Error(bt(190))}if(n.tag!==3)throw Error(bt(188));return n.stateNode.current===n?e:t}function LEe(e){return e=zXe(e),e!==null?FEe(e):null}function FEe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=FEe(e);if(t!==null)return t;e=e.sibling}return null}var BEe=sf.unstable_scheduleCallback,Kce=sf.unstable_cancelCallback,VXe=sf.unstable_shouldYield,HXe=sf.unstable_requestPaint,no=sf.unstable_now,qXe=sf.unstable_getCurrentPriorityLevel,mX=sf.unstable_ImmediatePriority,jEe=sf.unstable_UserBlockingPriority,j6=sf.unstable_NormalPriority,WXe=sf.unstable_LowPriority,UEe=sf.unstable_IdlePriority,SF=null,zp=null;function GXe(e){if(zp&&typeof zp.onCommitFiberRoot=="function")try{zp.onCommitFiberRoot(SF,e,void 0,(e.current.flags&128)===128)}catch{}}var vh=Math.clz32?Math.clz32:XXe,YXe=Math.log,KXe=Math.LN2;function XXe(e){return e>>>=0,e===0?32:31-(YXe(e)/KXe|0)|0}var S3=64,T3=4194304;function QA(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function U6(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=QA(a):(s&=o,s!==0&&(r=QA(s)))}else o=n&~i,o!==0?r=QA(o):s!==0&&(r=QA(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-vh(t),i=1<<n,r|=e[n],t&=~i;return r}function QXe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function JXe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-vh(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=QXe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function LH(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function zEe(){var e=S3;return S3<<=1,!(S3&4194240)&&(S3=64),e}function Xj(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function OD(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-vh(t),e[t]=n}function ZXe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-vh(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function gX(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-vh(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ai=0;function VEe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var HEe,yX,qEe,WEe,GEe,FH=!1,C3=[],c1=null,f1=null,d1=null,Hk=new Map,qk=new Map,Fy=[],eQe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xce(e,t){switch(e){case"focusin":case"focusout":c1=null;break;case"dragenter":case"dragleave":f1=null;break;case"mouseover":case"mouseout":d1=null;break;case"pointerover":case"pointerout":Hk.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":qk.delete(t.pointerId)}}function XC(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=MD(t),t!==null&&yX(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function tQe(e,t,n,r,i){switch(t){case"focusin":return c1=XC(c1,e,t,n,r,i),!0;case"dragenter":return f1=XC(f1,e,t,n,r,i),!0;case"mouseover":return d1=XC(d1,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Hk.set(s,XC(Hk.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qk.set(s,XC(qk.get(s)||null,e,t,n,r,i)),!0}return!1}function YEe(e){var t=ux(e.target);if(t!==null){var n=$_(t);if(n!==null){if(t=n.tag,t===13){if(t=MEe(n),t!==null){e.blockedOn=t,GEe(e.priority,function(){qEe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function y4(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=BH(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);PH=r,n.target.dispatchEvent(r),PH=null}else return t=MD(n),t!==null&&yX(t),e.blockedOn=n,!1;t.shift()}return!0}function Qce(e,t,n){y4(e)&&n.delete(t)}function nQe(){FH=!1,c1!==null&&y4(c1)&&(c1=null),f1!==null&&y4(f1)&&(f1=null),d1!==null&&y4(d1)&&(d1=null),Hk.forEach(Qce),qk.forEach(Qce)}function QC(e,t){e.blockedOn===t&&(e.blockedOn=null,FH||(FH=!0,sf.unstable_scheduleCallback(sf.unstable_NormalPriority,nQe)))}function Wk(e){function t(i){return QC(i,e)}if(0<C3.length){QC(C3[0],e);for(var n=1;n<C3.length;n++){var r=C3[n];r.blockedOn===e&&(r.blockedOn=null)}}for(c1!==null&&QC(c1,e),f1!==null&&QC(f1,e),d1!==null&&QC(d1,e),Hk.forEach(t),qk.forEach(t),n=0;n<Fy.length;n++)r=Fy[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Fy.length&&(n=Fy[0],n.blockedOn===null);)YEe(n),n.blockedOn===null&&Fy.shift()}var oS=Og.ReactCurrentBatchConfig,z6=!0;function rQe(e,t,n,r){var i=Ai,s=oS.transition;oS.transition=null;try{Ai=1,vX(e,t,n,r)}finally{Ai=i,oS.transition=s}}function iQe(e,t,n,r){var i=Ai,s=oS.transition;oS.transition=null;try{Ai=4,vX(e,t,n,r)}finally{Ai=i,oS.transition=s}}function vX(e,t,n,r){if(z6){var i=BH(e,t,n,r);if(i===null)o7(e,t,r,V6,n),Xce(e,r);else if(tQe(i,e,t,n,r))r.stopPropagation();else if(Xce(e,r),t&4&&-1<eQe.indexOf(e)){for(;i!==null;){var s=MD(i);if(s!==null&&HEe(s),s=BH(e,t,n,r),s===null&&o7(e,t,r,V6,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else o7(e,t,r,null,n)}}var V6=null;function BH(e,t,n,r){if(V6=null,e=pX(r),e=ux(e),e!==null)if(t=$_(e),t===null)e=null;else if(n=t.tag,n===13){if(e=MEe(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return V6=e,null}function KEe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qXe()){case mX:return 1;case jEe:return 4;case j6:case WXe:return 16;case UEe:return 536870912;default:return 16}default:return 16}}var Ky=null,bX=null,v4=null;function XEe(){if(v4)return v4;var e,t=bX,n=t.length,r,i="value"in Ky?Ky.value:Ky.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return v4=i.slice(e,1<r?1-r:void 0)}function b4(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function A3(){return!0}function Jce(){return!1}function _f(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?A3:Jce,this.isPropagationStopped=Jce,this}return Rs(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=A3)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=A3)},persist:function(){},isPersistent:A3}),t}var c2={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xX=_f(c2),$D=Rs({},c2,{view:0,detail:0}),sQe=_f($D),Qj,Jj,JC,TF=Rs({},$D,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_X,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==JC&&(JC&&e.type==="mousemove"?(Qj=e.screenX-JC.screenX,Jj=e.screenY-JC.screenY):Jj=Qj=0,JC=e),Qj)},movementY:function(e){return"movementY"in e?e.movementY:Jj}}),Zce=_f(TF),oQe=Rs({},TF,{dataTransfer:0}),aQe=_f(oQe),uQe=Rs({},$D,{relatedTarget:0}),Zj=_f(uQe),lQe=Rs({},c2,{animationName:0,elapsedTime:0,pseudoElement:0}),cQe=_f(lQe),fQe=Rs({},c2,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dQe=_f(fQe),hQe=Rs({},c2,{data:0}),efe=_f(hQe),pQe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mQe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gQe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yQe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=gQe[e])?!!t[e]:!1}function _X(){return yQe}var vQe=Rs({},$D,{key:function(e){if(e.key){var t=pQe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=b4(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mQe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_X,charCode:function(e){return e.type==="keypress"?b4(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?b4(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),bQe=_f(vQe),xQe=Rs({},TF,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tfe=_f(xQe),_Qe=Rs({},$D,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_X}),wQe=_f(_Qe),EQe=Rs({},c2,{propertyName:0,elapsedTime:0,pseudoElement:0}),SQe=_f(EQe),TQe=Rs({},TF,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CQe=_f(TQe),AQe=[9,13,27,32],wX=sg&&"CompositionEvent"in window,VI=null;sg&&"documentMode"in document&&(VI=document.documentMode);var IQe=sg&&"TextEvent"in window&&!VI,QEe=sg&&(!wX||VI&&8<VI&&11>=VI),nfe=" ",rfe=!1;function JEe(e,t){switch(e){case"keyup":return AQe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ZEe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var PE=!1;function kQe(e,t){switch(e){case"compositionend":return ZEe(t);case"keypress":return t.which!==32?null:(rfe=!0,nfe);case"textInput":return e=t.data,e===nfe&&rfe?null:e;default:return null}}function RQe(e,t){if(PE)return e==="compositionend"||!wX&&JEe(e,t)?(e=XEe(),v4=bX=Ky=null,PE=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return QEe&&t.locale!=="ko"?null:t.data;default:return null}}var DQe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ife(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!DQe[e.type]:t==="textarea"}function eSe(e,t,n,r){DEe(r),t=H6(t,"onChange"),0<t.length&&(n=new xX("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var HI=null,Gk=null;function NQe(e){fSe(e,0)}function CF(e){var t=ME(e);if(SEe(t))return e}function PQe(e,t){if(e==="change")return t}var tSe=!1;if(sg){var e7;if(sg){var t7="oninput"in document;if(!t7){var sfe=document.createElement("div");sfe.setAttribute("oninput","return;"),t7=typeof sfe.oninput=="function"}e7=t7}else e7=!1;tSe=e7&&(!document.documentMode||9<document.documentMode)}function ofe(){HI&&(HI.detachEvent("onpropertychange",nSe),Gk=HI=null)}function nSe(e){if(e.propertyName==="value"&&CF(Gk)){var t=[];eSe(t,Gk,e,pX(e)),$Ee(NQe,t)}}function OQe(e,t,n){e==="focusin"?(ofe(),HI=t,Gk=n,HI.attachEvent("onpropertychange",nSe)):e==="focusout"&&ofe()}function $Qe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return CF(Gk)}function MQe(e,t){if(e==="click")return CF(t)}function LQe(e,t){if(e==="input"||e==="change")return CF(t)}function FQe(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ih=typeof Object.is=="function"?Object.is:FQe;function Yk(e,t){if(Ih(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!_H.call(t,i)||!Ih(e[i],t[i]))return!1}return!0}function afe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ufe(e,t){var n=afe(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=afe(n)}}function rSe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rSe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function iSe(){for(var e=window,t=L6();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=L6(e.document)}return t}function EX(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function BQe(e){var t=iSe(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&rSe(n.ownerDocument.documentElement,n)){if(r!==null&&EX(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ufe(n,s);var o=ufe(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var jQe=sg&&"documentMode"in document&&11>=document.documentMode,OE=null,jH=null,qI=null,UH=!1;function lfe(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;UH||OE==null||OE!==L6(r)||(r=OE,"selectionStart"in r&&EX(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qI&&Yk(qI,r)||(qI=r,r=H6(jH,"onSelect"),0<r.length&&(t=new xX("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=OE)))}function I3(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var $E={animationend:I3("Animation","AnimationEnd"),animationiteration:I3("Animation","AnimationIteration"),animationstart:I3("Animation","AnimationStart"),transitionend:I3("Transition","TransitionEnd")},n7={},sSe={};sg&&(sSe=document.createElement("div").style,"AnimationEvent"in window||(delete $E.animationend.animation,delete $E.animationiteration.animation,delete $E.animationstart.animation),"TransitionEvent"in window||delete $E.transitionend.transition);function AF(e){if(n7[e])return n7[e];if(!$E[e])return e;var t=$E[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in sSe)return n7[e]=t[n];return e}var oSe=AF("animationend"),aSe=AF("animationiteration"),uSe=AF("animationstart"),lSe=AF("transitionend"),cSe=new Map,cfe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _v(e,t){cSe.set(e,t),O_(t,[e])}for(var r7=0;r7<cfe.length;r7++){var i7=cfe[r7],UQe=i7.toLowerCase(),zQe=i7[0].toUpperCase()+i7.slice(1);_v(UQe,"on"+zQe)}_v(oSe,"onAnimationEnd");_v(aSe,"onAnimationIteration");_v(uSe,"onAnimationStart");_v("dblclick","onDoubleClick");_v("focusin","onFocus");_v("focusout","onBlur");_v(lSe,"onTransitionEnd");HS("onMouseEnter",["mouseout","mouseover"]);HS("onMouseLeave",["mouseout","mouseover"]);HS("onPointerEnter",["pointerout","pointerover"]);HS("onPointerLeave",["pointerout","pointerover"]);O_("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));O_("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));O_("onBeforeInput",["compositionend","keypress","textInput","paste"]);O_("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));O_("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));O_("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var JA="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VQe=new Set("cancel close invalid load scroll toggle".split(" ").concat(JA));function ffe(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,UXe(r,t,void 0,e),e.currentTarget=null}function fSe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;ffe(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;ffe(i,a,l),s=u}}}if(B6)throw e=MH,B6=!1,MH=null,e}function is(e,t){var n=t[WH];n===void 0&&(n=t[WH]=new Set);var r=e+"__bubble";n.has(r)||(dSe(t,e,2,!1),n.add(r))}function s7(e,t,n){var r=0;t&&(r|=4),dSe(n,e,r,t)}var k3="_reactListening"+Math.random().toString(36).slice(2);function Kk(e){if(!e[k3]){e[k3]=!0,bEe.forEach(function(n){n!=="selectionchange"&&(VQe.has(n)||s7(n,!1,e),s7(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[k3]||(t[k3]=!0,s7("selectionchange",!1,t))}}function dSe(e,t,n,r){switch(KEe(t)){case 1:var i=rQe;break;case 4:i=iQe;break;default:i=vX}n=i.bind(null,t,n,e),i=void 0,!$H||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function o7(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ux(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}$Ee(function(){var l=s,c=pX(n),f=[];e:{var d=cSe.get(e);if(d!==void 0){var h=xX,p=e;switch(e){case"keypress":if(b4(n)===0)break e;case"keydown":case"keyup":h=bQe;break;case"focusin":p="focus",h=Zj;break;case"focusout":p="blur",h=Zj;break;case"beforeblur":case"afterblur":h=Zj;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Zce;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=aQe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=wQe;break;case oSe:case aSe:case uSe:h=cQe;break;case lSe:h=SQe;break;case"scroll":h=sQe;break;case"wheel":h=CQe;break;case"copy":case"cut":case"paste":h=dQe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=tfe}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var b=l,x;b!==null;){x=b;var w=x.stateNode;if(x.tag===5&&w!==null&&(x=w,y!==null&&(w=Vk(b,y),w!=null&&m.push(Xk(b,w,x)))),g)break;b=b.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==PH&&(p=n.relatedTarget||n.fromElement)&&(ux(p)||p[og]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?ux(p):null,p!==null&&(g=$_(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=Zce,w="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(m=tfe,w="onPointerLeave",y="onPointerEnter",b="pointer"),g=h==null?d:ME(h),x=p==null?d:ME(p),d=new m(w,b+"leave",h,n,c),d.target=g,d.relatedTarget=x,w=null,ux(c)===l&&(m=new m(y,b+"enter",p,n,c),m.target=x,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,b=0,x=m;x;x=Uw(x))b++;for(x=0,w=y;w;w=Uw(w))x++;for(;0<b-x;)m=Uw(m),b--;for(;0<x-b;)y=Uw(y),x--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=Uw(m),y=Uw(y)}m=null}else m=null;h!==null&&dfe(f,d,h,m,!1),p!==null&&g!==null&&dfe(f,g,p,m,!0)}}e:{if(d=l?ME(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var S=PQe;else if(ife(d))if(tSe)S=LQe;else{S=$Qe;var T=OQe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(S=MQe);if(S&&(S=S(e,l))){eSe(f,S,n,c);break e}T&&T(e,d,l),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&IH(d,"number",d.value)}switch(T=l?ME(l):window,e){case"focusin":(ife(T)||T.contentEditable==="true")&&(OE=T,jH=l,qI=null);break;case"focusout":qI=jH=OE=null;break;case"mousedown":UH=!0;break;case"contextmenu":case"mouseup":case"dragend":UH=!1,lfe(f,n,c);break;case"selectionchange":if(jQe)break;case"keydown":case"keyup":lfe(f,n,c)}var C;if(wX)e:{switch(e){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else PE?JEe(e,n)&&(I="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(QEe&&n.locale!=="ko"&&(PE||I!=="onCompositionStart"?I==="onCompositionEnd"&&PE&&(C=XEe()):(Ky=c,bX="value"in Ky?Ky.value:Ky.textContent,PE=!0)),T=H6(l,I),0<T.length&&(I=new efe(I,e,null,n,c),f.push({event:I,listeners:T}),C?I.data=C:(C=ZEe(n),C!==null&&(I.data=C)))),(C=IQe?kQe(e,n):RQe(e,n))&&(l=H6(l,"onBeforeInput"),0<l.length&&(c=new efe("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=C))}fSe(f,t)})}function Xk(e,t,n){return{instance:e,listener:t,currentTarget:n}}function H6(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Vk(e,n),s!=null&&r.unshift(Xk(e,s,i)),s=Vk(e,t),s!=null&&r.push(Xk(e,s,i))),e=e.return}return r}function Uw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dfe(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=Vk(n,s),u!=null&&o.unshift(Xk(n,u,a))):i||(u=Vk(n,s),u!=null&&o.push(Xk(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var HQe=/\r\n?/g,qQe=/\u0000|\uFFFD/g;function hfe(e){return(typeof e=="string"?e:""+e).replace(HQe,`
`).replace(qQe,"")}function R3(e,t,n){if(t=hfe(t),hfe(e)!==t&&n)throw Error(bt(425))}function q6(){}var zH=null,VH=null;function HH(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qH=typeof setTimeout=="function"?setTimeout:void 0,WQe=typeof clearTimeout=="function"?clearTimeout:void 0,pfe=typeof Promise=="function"?Promise:void 0,GQe=typeof queueMicrotask=="function"?queueMicrotask:typeof pfe<"u"?function(e){return pfe.resolve(null).then(e).catch(YQe)}:qH;function YQe(e){setTimeout(function(){throw e})}function a7(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Wk(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Wk(t)}function h1(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mfe(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var f2=Math.random().toString(36).slice(2),_p="__reactFiber$"+f2,Qk="__reactProps$"+f2,og="__reactContainer$"+f2,WH="__reactEvents$"+f2,KQe="__reactListeners$"+f2,XQe="__reactHandles$"+f2;function ux(e){var t=e[_p];if(t)return t;for(var n=e.parentNode;n;){if(t=n[og]||n[_p]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=mfe(e);e!==null;){if(n=e[_p])return n;e=mfe(e)}return t}e=n,n=e.parentNode}return null}function MD(e){return e=e[_p]||e[og],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ME(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(bt(33))}function IF(e){return e[Qk]||null}var GH=[],LE=-1;function wv(e){return{current:e}}function cs(e){0>LE||(e.current=GH[LE],GH[LE]=null,LE--)}function Ki(e,t){LE++,GH[LE]=e.current,e.current=t}var $1={},Tu=wv($1),Zl=wv(!1),Hx=$1;function qS(e,t){var n=e.type.contextTypes;if(!n)return $1;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ec(e){return e=e.childContextTypes,e!=null}function W6(){cs(Zl),cs(Tu)}function gfe(e,t,n){if(Tu.current!==$1)throw Error(bt(168));Ki(Tu,t),Ki(Zl,n)}function hSe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(bt(108,OXe(e)||"Unknown",i));return Rs({},n,r)}function G6(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$1,Hx=Tu.current,Ki(Tu,e),Ki(Zl,Zl.current),!0}function yfe(e,t,n){var r=e.stateNode;if(!r)throw Error(bt(169));n?(e=hSe(e,t,Hx),r.__reactInternalMemoizedMergedChildContext=e,cs(Zl),cs(Tu),Ki(Tu,e)):cs(Zl),Ki(Zl,n)}var v0=null,kF=!1,u7=!1;function pSe(e){v0===null?v0=[e]:v0.push(e)}function QQe(e){kF=!0,pSe(e)}function Ev(){if(!u7&&v0!==null){u7=!0;var e=0,t=Ai;try{var n=v0;for(Ai=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}v0=null,kF=!1}catch(i){throw v0!==null&&(v0=v0.slice(e+1)),BEe(mX,Ev),i}finally{Ai=t,u7=!1}}return null}var FE=[],BE=0,Y6=null,K6=0,zf=[],Vf=0,qx=null,R0=1,D0="";function Nb(e,t){FE[BE++]=K6,FE[BE++]=Y6,Y6=e,K6=t}function mSe(e,t,n){zf[Vf++]=R0,zf[Vf++]=D0,zf[Vf++]=qx,qx=e;var r=R0;e=D0;var i=32-vh(r)-1;r&=~(1<<i),n+=1;var s=32-vh(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,R0=1<<32-vh(t)+i|n<<i|r,D0=s+e}else R0=1<<s|n<<i|r,D0=e}function SX(e){e.return!==null&&(Nb(e,1),mSe(e,1,0))}function TX(e){for(;e===Y6;)Y6=FE[--BE],FE[BE]=null,K6=FE[--BE],FE[BE]=null;for(;e===qx;)qx=zf[--Vf],zf[Vf]=null,D0=zf[--Vf],zf[Vf]=null,R0=zf[--Vf],zf[Vf]=null}var Qc=null,Vc=null,_s=!1,eh=null;function gSe(e,t){var n=Xf(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function vfe(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Qc=e,Vc=h1(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Qc=e,Vc=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qx!==null?{id:R0,overflow:D0}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Xf(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Qc=e,Vc=null,!0):!1;default:return!1}}function YH(e){return(e.mode&1)!==0&&(e.flags&128)===0}function KH(e){if(_s){var t=Vc;if(t){var n=t;if(!vfe(e,t)){if(YH(e))throw Error(bt(418));t=h1(n.nextSibling);var r=Qc;t&&vfe(e,t)?gSe(r,n):(e.flags=e.flags&-4097|2,_s=!1,Qc=e)}}else{if(YH(e))throw Error(bt(418));e.flags=e.flags&-4097|2,_s=!1,Qc=e}}}function bfe(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Qc=e}function D3(e){if(e!==Qc)return!1;if(!_s)return bfe(e),_s=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!HH(e.type,e.memoizedProps)),t&&(t=Vc)){if(YH(e))throw ySe(),Error(bt(418));for(;t;)gSe(e,t),t=h1(t.nextSibling)}if(bfe(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(bt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vc=h1(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vc=null}}else Vc=Qc?h1(e.stateNode.nextSibling):null;return!0}function ySe(){for(var e=Vc;e;)e=h1(e.nextSibling)}function WS(){Vc=Qc=null,_s=!1}function CX(e){eh===null?eh=[e]:eh.push(e)}var JQe=Og.ReactCurrentBatchConfig;function ZC(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(bt(309));var r=n.stateNode}if(!r)throw Error(bt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(bt(284));if(!n._owner)throw Error(bt(290,e))}return e}function N3(e,t){throw e=Object.prototype.toString.call(t),Error(bt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xfe(e){var t=e._init;return t(e._payload)}function vSe(e){function t(y,b){if(e){var x=y.deletions;x===null?(y.deletions=[b],y.flags|=16):x.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=y1(y,b),y.index=0,y.sibling=null,y}function s(y,b,x){return y.index=x,e?(x=y.alternate,x!==null?(x=x.index,x<b?(y.flags|=2,b):x):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,b,x,w){return b===null||b.tag!==6?(b=m7(x,y.mode,w),b.return=y,b):(b=i(b,x),b.return=y,b)}function u(y,b,x,w){var S=x.type;return S===NE?c(y,b,x.props.children,w,x.key):b!==null&&(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Iy&&xfe(S)===b.type)?(w=i(b,x.props),w.ref=ZC(y,b,x),w.return=y,w):(w=C4(x.type,x.key,x.props,null,y.mode,w),w.ref=ZC(y,b,x),w.return=y,w)}function l(y,b,x,w){return b===null||b.tag!==4||b.stateNode.containerInfo!==x.containerInfo||b.stateNode.implementation!==x.implementation?(b=g7(x,y.mode,w),b.return=y,b):(b=i(b,x.children||[]),b.return=y,b)}function c(y,b,x,w,S){return b===null||b.tag!==7?(b=Rx(x,y.mode,w,S),b.return=y,b):(b=i(b,x),b.return=y,b)}function f(y,b,x){if(typeof b=="string"&&b!==""||typeof b=="number")return b=m7(""+b,y.mode,x),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _3:return x=C4(b.type,b.key,b.props,null,y.mode,x),x.ref=ZC(y,null,b),x.return=y,x;case DE:return b=g7(b,y.mode,x),b.return=y,b;case Iy:var w=b._init;return f(y,w(b._payload),x)}if(XA(b)||YC(b))return b=Rx(b,y.mode,x,null),b.return=y,b;N3(y,b)}return null}function d(y,b,x,w){var S=b!==null?b.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return S!==null?null:a(y,b,""+x,w);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _3:return x.key===S?u(y,b,x,w):null;case DE:return x.key===S?l(y,b,x,w):null;case Iy:return S=x._init,d(y,b,S(x._payload),w)}if(XA(x)||YC(x))return S!==null?null:c(y,b,x,w,null);N3(y,x)}return null}function h(y,b,x,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(x)||null,a(b,y,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _3:return y=y.get(w.key===null?x:w.key)||null,u(b,y,w,S);case DE:return y=y.get(w.key===null?x:w.key)||null,l(b,y,w,S);case Iy:var T=w._init;return h(y,b,x,T(w._payload),S)}if(XA(w)||YC(w))return y=y.get(x)||null,c(b,y,w,S,null);N3(b,w)}return null}function p(y,b,x,w){for(var S=null,T=null,C=b,I=b=0,D=null;C!==null&&I<x.length;I++){C.index>I?(D=C,C=null):D=C.sibling;var k=d(y,C,x[I],w);if(k===null){C===null&&(C=D);break}e&&C&&k.alternate===null&&t(y,C),b=s(k,b,I),T===null?S=k:T.sibling=k,T=k,C=D}if(I===x.length)return n(y,C),_s&&Nb(y,I),S;if(C===null){for(;I<x.length;I++)C=f(y,x[I],w),C!==null&&(b=s(C,b,I),T===null?S=C:T.sibling=C,T=C);return _s&&Nb(y,I),S}for(C=r(y,C);I<x.length;I++)D=h(C,y,I,x[I],w),D!==null&&(e&&D.alternate!==null&&C.delete(D.key===null?I:D.key),b=s(D,b,I),T===null?S=D:T.sibling=D,T=D);return e&&C.forEach(function(P){return t(y,P)}),_s&&Nb(y,I),S}function m(y,b,x,w){var S=YC(x);if(typeof S!="function")throw Error(bt(150));if(x=S.call(x),x==null)throw Error(bt(151));for(var T=S=null,C=b,I=b=0,D=null,k=x.next();C!==null&&!k.done;I++,k=x.next()){C.index>I?(D=C,C=null):D=C.sibling;var P=d(y,C,k.value,w);if(P===null){C===null&&(C=D);break}e&&C&&P.alternate===null&&t(y,C),b=s(P,b,I),T===null?S=P:T.sibling=P,T=P,C=D}if(k.done)return n(y,C),_s&&Nb(y,I),S;if(C===null){for(;!k.done;I++,k=x.next())k=f(y,k.value,w),k!==null&&(b=s(k,b,I),T===null?S=k:T.sibling=k,T=k);return _s&&Nb(y,I),S}for(C=r(y,C);!k.done;I++,k=x.next())k=h(C,y,I,k.value,w),k!==null&&(e&&k.alternate!==null&&C.delete(k.key===null?I:k.key),b=s(k,b,I),T===null?S=k:T.sibling=k,T=k);return e&&C.forEach(function(M){return t(y,M)}),_s&&Nb(y,I),S}function g(y,b,x,w){if(typeof x=="object"&&x!==null&&x.type===NE&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case _3:e:{for(var S=x.key,T=b;T!==null;){if(T.key===S){if(S=x.type,S===NE){if(T.tag===7){n(y,T.sibling),b=i(T,x.props.children),b.return=y,y=b;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Iy&&xfe(S)===T.type){n(y,T.sibling),b=i(T,x.props),b.ref=ZC(y,T,x),b.return=y,y=b;break e}n(y,T);break}else t(y,T);T=T.sibling}x.type===NE?(b=Rx(x.props.children,y.mode,w,x.key),b.return=y,y=b):(w=C4(x.type,x.key,x.props,null,y.mode,w),w.ref=ZC(y,b,x),w.return=y,y=w)}return o(y);case DE:e:{for(T=x.key;b!==null;){if(b.key===T)if(b.tag===4&&b.stateNode.containerInfo===x.containerInfo&&b.stateNode.implementation===x.implementation){n(y,b.sibling),b=i(b,x.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=g7(x,y.mode,w),b.return=y,y=b}return o(y);case Iy:return T=x._init,g(y,b,T(x._payload),w)}if(XA(x))return p(y,b,x,w);if(YC(x))return m(y,b,x,w);N3(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,b!==null&&b.tag===6?(n(y,b.sibling),b=i(b,x),b.return=y,y=b):(n(y,b),b=m7(x,y.mode,w),b.return=y,y=b),o(y)):n(y,b)}return g}var GS=vSe(!0),bSe=vSe(!1),X6=wv(null),Q6=null,jE=null,AX=null;function IX(){AX=jE=Q6=null}function kX(e){var t=X6.current;cs(X6),e._currentValue=t}function XH(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function aS(e,t){Q6=e,AX=jE=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wl=!0),e.firstContext=null)}function id(e){var t=e._currentValue;if(AX!==e)if(e={context:e,memoizedValue:t,next:null},jE===null){if(Q6===null)throw Error(bt(308));jE=e,Q6.dependencies={lanes:0,firstContext:e}}else jE=jE.next=e;return t}var lx=null;function RX(e){lx===null?lx=[e]:lx.push(e)}function xSe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,RX(t)):(n.next=i.next,i.next=n),t.interleaved=n,ag(e,r)}function ag(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ky=!1;function DX(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _Se(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function H0(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function p1(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Yr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ag(e,n)}return i=r.interleaved,i===null?(t.next=t,RX(r)):(t.next=i.next,i.next=t),r.interleaved=t,ag(e,n)}function x4(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,gX(e,n)}}function _fe(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function J6(e,t,n,r){var i=e.updateQueue;ky=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Rs({},f,d);break e;case 2:ky=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Gx|=o,e.lanes=o,e.memoizedState=f}}function wfe(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(bt(191,i));i.call(r)}}}var LD={},Vp=wv(LD),Jk=wv(LD),Zk=wv(LD);function cx(e){if(e===LD)throw Error(bt(174));return e}function NX(e,t){switch(Ki(Zk,t),Ki(Jk,e),Ki(Vp,LD),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:RH(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=RH(t,e)}cs(Vp),Ki(Vp,t)}function YS(){cs(Vp),cs(Jk),cs(Zk)}function wSe(e){cx(Zk.current);var t=cx(Vp.current),n=RH(t,e.type);t!==n&&(Ki(Jk,e),Ki(Vp,n))}function PX(e){Jk.current===e&&(cs(Vp),cs(Jk))}var Is=wv(0);function Z6(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var l7=[];function OX(){for(var e=0;e<l7.length;e++)l7[e]._workInProgressVersionPrimary=null;l7.length=0}var _4=Og.ReactCurrentDispatcher,c7=Og.ReactCurrentBatchConfig,Wx=0,ks=null,No=null,na=null,e$=!1,WI=!1,eR=0,ZQe=0;function Ja(){throw Error(bt(321))}function $X(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ih(e[n],t[n]))return!1;return!0}function MX(e,t,n,r,i,s){if(Wx=s,ks=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_4.current=e===null||e.memoizedState===null?rJe:iJe,e=n(r,i),WI){s=0;do{if(WI=!1,eR=0,25<=s)throw Error(bt(301));s+=1,na=No=null,t.updateQueue=null,_4.current=sJe,e=n(r,i)}while(WI)}if(_4.current=t$,t=No!==null&&No.next!==null,Wx=0,na=No=ks=null,e$=!1,t)throw Error(bt(300));return e}function LX(){var e=eR!==0;return eR=0,e}function fp(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return na===null?ks.memoizedState=na=e:na=na.next=e,na}function sd(){if(No===null){var e=ks.alternate;e=e!==null?e.memoizedState:null}else e=No.next;var t=na===null?ks.memoizedState:na.next;if(t!==null)na=t,No=e;else{if(e===null)throw Error(bt(310));No=e,e={memoizedState:No.memoizedState,baseState:No.baseState,baseQueue:No.baseQueue,queue:No.queue,next:null},na===null?ks.memoizedState=na=e:na=na.next=e}return na}function tR(e,t){return typeof t=="function"?t(e):t}function f7(e){var t=sd(),n=t.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=e;var r=No,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((Wx&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,ks.lanes|=c,Gx|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Ih(r,t.memoizedState)||(Wl=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,ks.lanes|=s,Gx|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function d7(e){var t=sd(),n=t.queue;if(n===null)throw Error(bt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Ih(s,t.memoizedState)||(Wl=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function ESe(){}function SSe(e,t){var n=ks,r=sd(),i=t(),s=!Ih(r.memoizedState,i);if(s&&(r.memoizedState=i,Wl=!0),r=r.queue,FX(ASe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||na!==null&&na.memoizedState.tag&1){if(n.flags|=2048,nR(9,CSe.bind(null,n,r,i,t),void 0,null),ha===null)throw Error(bt(349));Wx&30||TSe(n,t,i)}return i}function TSe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ks.updateQueue,t===null?(t={lastEffect:null,stores:null},ks.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function CSe(e,t,n,r){t.value=n,t.getSnapshot=r,ISe(t)&&kSe(e)}function ASe(e,t,n){return n(function(){ISe(t)&&kSe(e)})}function ISe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ih(e,n)}catch{return!0}}function kSe(e){var t=ag(e,1);t!==null&&bh(t,e,1,-1)}function Efe(e){var t=fp();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tR,lastRenderedState:e},t.queue=e,e=e.dispatch=nJe.bind(null,ks,e),[t.memoizedState,e]}function nR(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ks.updateQueue,t===null?(t={lastEffect:null,stores:null},ks.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function RSe(){return sd().memoizedState}function w4(e,t,n,r){var i=fp();ks.flags|=e,i.memoizedState=nR(1|t,n,void 0,r===void 0?null:r)}function RF(e,t,n,r){var i=sd();r=r===void 0?null:r;var s=void 0;if(No!==null){var o=No.memoizedState;if(s=o.destroy,r!==null&&$X(r,o.deps)){i.memoizedState=nR(t,n,s,r);return}}ks.flags|=e,i.memoizedState=nR(1|t,n,s,r)}function Sfe(e,t){return w4(8390656,8,e,t)}function FX(e,t){return RF(2048,8,e,t)}function DSe(e,t){return RF(4,2,e,t)}function NSe(e,t){return RF(4,4,e,t)}function PSe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function OSe(e,t,n){return n=n!=null?n.concat([e]):null,RF(4,4,PSe.bind(null,t,e),n)}function BX(){}function $Se(e,t){var n=sd();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$X(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function MSe(e,t){var n=sd();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&$X(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function LSe(e,t,n){return Wx&21?(Ih(n,t)||(n=zEe(),ks.lanes|=n,Gx|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wl=!0),e.memoizedState=n)}function eJe(e,t){var n=Ai;Ai=n!==0&&4>n?n:4,e(!0);var r=c7.transition;c7.transition={};try{e(!1),t()}finally{Ai=n,c7.transition=r}}function FSe(){return sd().memoizedState}function tJe(e,t,n){var r=g1(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},BSe(e))jSe(t,n);else if(n=xSe(e,t,n,r),n!==null){var i=rl();bh(n,e,r,i),USe(n,t,r)}}function nJe(e,t,n){var r=g1(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(BSe(e))jSe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ih(a,o)){var u=t.interleaved;u===null?(i.next=i,RX(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=xSe(e,t,i,r),n!==null&&(i=rl(),bh(n,e,r,i),USe(n,t,r))}}function BSe(e){var t=e.alternate;return e===ks||t!==null&&t===ks}function jSe(e,t){WI=e$=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function USe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,gX(e,n)}}var t$={readContext:id,useCallback:Ja,useContext:Ja,useEffect:Ja,useImperativeHandle:Ja,useInsertionEffect:Ja,useLayoutEffect:Ja,useMemo:Ja,useReducer:Ja,useRef:Ja,useState:Ja,useDebugValue:Ja,useDeferredValue:Ja,useTransition:Ja,useMutableSource:Ja,useSyncExternalStore:Ja,useId:Ja,unstable_isNewReconciler:!1},rJe={readContext:id,useCallback:function(e,t){return fp().memoizedState=[e,t===void 0?null:t],e},useContext:id,useEffect:Sfe,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,w4(4194308,4,PSe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return w4(4194308,4,e,t)},useInsertionEffect:function(e,t){return w4(4,2,e,t)},useMemo:function(e,t){var n=fp();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=fp();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tJe.bind(null,ks,e),[r.memoizedState,e]},useRef:function(e){var t=fp();return e={current:e},t.memoizedState=e},useState:Efe,useDebugValue:BX,useDeferredValue:function(e){return fp().memoizedState=e},useTransition:function(){var e=Efe(!1),t=e[0];return e=eJe.bind(null,e[1]),fp().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ks,i=fp();if(_s){if(n===void 0)throw Error(bt(407));n=n()}else{if(n=t(),ha===null)throw Error(bt(349));Wx&30||TSe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Sfe(ASe.bind(null,r,s,e),[e]),r.flags|=2048,nR(9,CSe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=fp(),t=ha.identifierPrefix;if(_s){var n=D0,r=R0;n=(r&~(1<<32-vh(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=eR++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=ZQe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iJe={readContext:id,useCallback:$Se,useContext:id,useEffect:FX,useImperativeHandle:OSe,useInsertionEffect:DSe,useLayoutEffect:NSe,useMemo:MSe,useReducer:f7,useRef:RSe,useState:function(){return f7(tR)},useDebugValue:BX,useDeferredValue:function(e){var t=sd();return LSe(t,No.memoizedState,e)},useTransition:function(){var e=f7(tR)[0],t=sd().memoizedState;return[e,t]},useMutableSource:ESe,useSyncExternalStore:SSe,useId:FSe,unstable_isNewReconciler:!1},sJe={readContext:id,useCallback:$Se,useContext:id,useEffect:FX,useImperativeHandle:OSe,useInsertionEffect:DSe,useLayoutEffect:NSe,useMemo:MSe,useReducer:d7,useRef:RSe,useState:function(){return d7(tR)},useDebugValue:BX,useDeferredValue:function(e){var t=sd();return No===null?t.memoizedState=e:LSe(t,No.memoizedState,e)},useTransition:function(){var e=d7(tR)[0],t=sd().memoizedState;return[e,t]},useMutableSource:ESe,useSyncExternalStore:SSe,useId:FSe,unstable_isNewReconciler:!1};function Yd(e,t){if(e&&e.defaultProps){t=Rs({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function QH(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Rs({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var DF={isMounted:function(e){return(e=e._reactInternals)?$_(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=rl(),i=g1(e),s=H0(r,i);s.payload=t,n!=null&&(s.callback=n),t=p1(e,s,i),t!==null&&(bh(t,e,i,r),x4(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=rl(),i=g1(e),s=H0(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=p1(e,s,i),t!==null&&(bh(t,e,i,r),x4(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=rl(),r=g1(e),i=H0(n,r);i.tag=2,t!=null&&(i.callback=t),t=p1(e,i,r),t!==null&&(bh(t,e,r,n),x4(t,e,r))}};function Tfe(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Yk(n,r)||!Yk(i,s):!0}function zSe(e,t,n){var r=!1,i=$1,s=t.contextType;return typeof s=="object"&&s!==null?s=id(s):(i=ec(t)?Hx:Tu.current,r=t.contextTypes,s=(r=r!=null)?qS(e,i):$1),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=DF,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Cfe(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&DF.enqueueReplaceState(t,t.state,null)}function JH(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},DX(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=id(s):(s=ec(t)?Hx:Tu.current,i.context=qS(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(QH(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&DF.enqueueReplaceState(i,i.state,null),J6(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function KS(e,t){try{var n="",r=t;do n+=PXe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function h7(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ZH(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var oJe=typeof WeakMap=="function"?WeakMap:Map;function VSe(e,t,n){n=H0(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){r$||(r$=!0,lq=r),ZH(e,t)},n}function HSe(e,t,n){n=H0(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ZH(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ZH(e,t),typeof r!="function"&&(m1===null?m1=new Set([this]):m1.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Afe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new oJe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=xJe.bind(null,e,t,n),t.then(e,e))}function Ife(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function kfe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=H0(-1,1),t.tag=2,p1(n,t,1))),n.lanes|=1),e)}var aJe=Og.ReactCurrentOwner,Wl=!1;function Wu(e,t,n,r){t.child=e===null?bSe(t,null,n,r):GS(t,e.child,n,r)}function Rfe(e,t,n,r,i){n=n.render;var s=t.ref;return aS(t,i),r=MX(e,t,n,r,s,i),n=LX(),e!==null&&!Wl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ug(e,t,i)):(_s&&n&&SX(t),t.flags|=1,Wu(e,t,r,i),t.child)}function Dfe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!GX(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,qSe(e,t,s,r,i)):(e=C4(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Yk,n(o,r)&&e.ref===t.ref)return ug(e,t,i)}return t.flags|=1,e=y1(s,r),e.ref=t.ref,e.return=t,t.child=e}function qSe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Yk(s,r)&&e.ref===t.ref)if(Wl=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Wl=!0);else return t.lanes=e.lanes,ug(e,t,i)}return eq(e,t,n,r,i)}function WSe(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ki(zE,Mc),Mc|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ki(zE,Mc),Mc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ki(zE,Mc),Mc|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ki(zE,Mc),Mc|=r;return Wu(e,t,i,n),t.child}function GSe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function eq(e,t,n,r,i){var s=ec(n)?Hx:Tu.current;return s=qS(t,s),aS(t,i),n=MX(e,t,n,r,s,i),r=LX(),e!==null&&!Wl?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,ug(e,t,i)):(_s&&r&&SX(t),t.flags|=1,Wu(e,t,n,i),t.child)}function Nfe(e,t,n,r,i){if(ec(n)){var s=!0;G6(t)}else s=!1;if(aS(t,i),t.stateNode===null)E4(e,t),zSe(t,n,r),JH(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=id(l):(l=ec(n)?Hx:Tu.current,l=qS(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Cfe(t,o,r,l),ky=!1;var d=t.memoizedState;o.state=d,J6(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Zl.current||ky?(typeof c=="function"&&(QH(t,n,c,r),u=t.memoizedState),(a=ky||Tfe(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,_Se(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Yd(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=id(u):(u=ec(n)?Hx:Tu.current,u=qS(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Cfe(t,o,r,u),ky=!1,d=t.memoizedState,o.state=d,J6(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Zl.current||ky?(typeof h=="function"&&(QH(t,n,h,r),p=t.memoizedState),(l=ky||Tfe(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return tq(e,t,n,r,s,i)}function tq(e,t,n,r,i,s){GSe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&yfe(t,n,!1),ug(e,t,s);r=t.stateNode,aJe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=GS(t,e.child,null,s),t.child=GS(t,null,a,s)):Wu(e,t,a,s),t.memoizedState=r.state,i&&yfe(t,n,!0),t.child}function YSe(e){var t=e.stateNode;t.pendingContext?gfe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gfe(e,t.context,!1),NX(e,t.containerInfo)}function Pfe(e,t,n,r,i){return WS(),CX(i),t.flags|=256,Wu(e,t,n,r),t.child}var nq={dehydrated:null,treeContext:null,retryLane:0};function rq(e){return{baseLanes:e,cachePool:null,transitions:null}}function KSe(e,t,n){var r=t.pendingProps,i=Is.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Ki(Is,i&1),e===null)return KH(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=OF(o,r,0,null),e=Rx(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=rq(n),t.memoizedState=nq,e):jX(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return uJe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=y1(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=y1(a,s):(s=Rx(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?rq(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=nq,r}return s=e.child,e=s.sibling,r=y1(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function jX(e,t){return t=OF({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function P3(e,t,n,r){return r!==null&&CX(r),GS(t,e.child,null,n),e=jX(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uJe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=h7(Error(bt(422))),P3(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=OF({mode:"visible",children:r.children},i,0,null),s=Rx(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&GS(t,e.child,null,o),t.child.memoizedState=rq(o),t.memoizedState=nq,s);if(!(t.mode&1))return P3(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(bt(419)),r=h7(s,r,void 0),P3(e,t,o,r)}if(a=(o&e.childLanes)!==0,Wl||a){if(r=ha,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ag(e,i),bh(r,e,i,-1))}return WX(),r=h7(Error(bt(421))),P3(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=_Je.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Vc=h1(i.nextSibling),Qc=t,_s=!0,eh=null,e!==null&&(zf[Vf++]=R0,zf[Vf++]=D0,zf[Vf++]=qx,R0=e.id,D0=e.overflow,qx=t),t=jX(t,r.children),t.flags|=4096,t)}function Ofe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),XH(e.return,t,n)}function p7(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function XSe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Wu(e,t,r.children,n),r=Is.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ofe(e,n,t);else if(e.tag===19)Ofe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ki(Is,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Z6(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),p7(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Z6(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}p7(t,!0,n,null,s);break;case"together":p7(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function E4(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ug(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Gx|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(bt(153));if(t.child!==null){for(e=t.child,n=y1(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=y1(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function lJe(e,t,n){switch(t.tag){case 3:YSe(t),WS();break;case 5:wSe(t);break;case 1:ec(t.type)&&G6(t);break;case 4:NX(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ki(X6,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Ki(Is,Is.current&1),t.flags|=128,null):n&t.child.childLanes?KSe(e,t,n):(Ki(Is,Is.current&1),e=ug(e,t,n),e!==null?e.sibling:null);Ki(Is,Is.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return XSe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ki(Is,Is.current),r)break;return null;case 22:case 23:return t.lanes=0,WSe(e,t,n)}return ug(e,t,n)}var QSe,iq,JSe,ZSe;QSe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};iq=function(){};JSe=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,cx(Vp.current);var s=null;switch(n){case"input":i=CH(e,i),r=CH(e,r),s=[];break;case"select":i=Rs({},i,{value:void 0}),r=Rs({},r,{value:void 0}),s=[];break;case"textarea":i=kH(e,i),r=kH(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=q6)}DH(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Uk.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Uk.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&is("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};ZSe=function(e,t,n,r){n!==r&&(t.flags|=4)};function eA(e,t){if(!_s)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Za(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function cJe(e,t,n){var r=t.pendingProps;switch(TX(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Za(t),null;case 1:return ec(t.type)&&W6(),Za(t),null;case 3:return r=t.stateNode,YS(),cs(Zl),cs(Tu),OX(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(D3(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,eh!==null&&(dq(eh),eh=null))),iq(e,t),Za(t),null;case 5:PX(t);var i=cx(Zk.current);if(n=t.type,e!==null&&t.stateNode!=null)JSe(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(bt(166));return Za(t),null}if(e=cx(Vp.current),D3(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[_p]=t,r[Qk]=s,e=(t.mode&1)!==0,n){case"dialog":is("cancel",r),is("close",r);break;case"iframe":case"object":case"embed":is("load",r);break;case"video":case"audio":for(i=0;i<JA.length;i++)is(JA[i],r);break;case"source":is("error",r);break;case"img":case"image":case"link":is("error",r),is("load",r);break;case"details":is("toggle",r);break;case"input":Vce(r,s),is("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},is("invalid",r);break;case"textarea":qce(r,s),is("invalid",r)}DH(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&R3(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&R3(r.textContent,a,e),i=["children",""+a]):Uk.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&is("scroll",r)}switch(n){case"input":w3(r),Hce(r,s,!0);break;case"textarea":w3(r),Wce(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=q6)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=AEe(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[_p]=t,e[Qk]=r,QSe(e,t,!1,!1),t.stateNode=e;e:{switch(o=NH(n,r),n){case"dialog":is("cancel",e),is("close",e),i=r;break;case"iframe":case"object":case"embed":is("load",e),i=r;break;case"video":case"audio":for(i=0;i<JA.length;i++)is(JA[i],e);i=r;break;case"source":is("error",e),i=r;break;case"img":case"image":case"link":is("error",e),is("load",e),i=r;break;case"details":is("toggle",e),i=r;break;case"input":Vce(e,r),i=CH(e,r),is("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Rs({},r,{value:void 0}),is("invalid",e);break;case"textarea":qce(e,r),i=kH(e,r),is("invalid",e);break;default:i=r}DH(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?REe(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&IEe(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&zk(e,u):typeof u=="number"&&zk(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uk.hasOwnProperty(s)?u!=null&&s==="onScroll"&&is("scroll",e):u!=null&&cX(e,s,u,o))}switch(n){case"input":w3(e),Hce(e,r,!1);break;case"textarea":w3(e),Wce(e);break;case"option":r.value!=null&&e.setAttribute("value",""+O1(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?rS(e,!!r.multiple,s,!1):r.defaultValue!=null&&rS(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=q6)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Za(t),null;case 6:if(e&&t.stateNode!=null)ZSe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(bt(166));if(n=cx(Zk.current),cx(Vp.current),D3(t)){if(r=t.stateNode,n=t.memoizedProps,r[_p]=t,(s=r.nodeValue!==n)&&(e=Qc,e!==null))switch(e.tag){case 3:R3(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&R3(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_p]=t,t.stateNode=r}return Za(t),null;case 13:if(cs(Is),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_s&&Vc!==null&&t.mode&1&&!(t.flags&128))ySe(),WS(),t.flags|=98560,s=!1;else if(s=D3(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(bt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(bt(317));s[_p]=t}else WS(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Za(t),s=!1}else eh!==null&&(dq(eh),eh=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Is.current&1?Fo===0&&(Fo=3):WX())),t.updateQueue!==null&&(t.flags|=4),Za(t),null);case 4:return YS(),iq(e,t),e===null&&Kk(t.stateNode.containerInfo),Za(t),null;case 10:return kX(t.type._context),Za(t),null;case 17:return ec(t.type)&&W6(),Za(t),null;case 19:if(cs(Is),s=t.memoizedState,s===null)return Za(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)eA(s,!1);else{if(Fo!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Z6(e),o!==null){for(t.flags|=128,eA(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ki(Is,Is.current&1|2),t.child}e=e.sibling}s.tail!==null&&no()>XS&&(t.flags|=128,r=!0,eA(s,!1),t.lanes=4194304)}else{if(!r)if(e=Z6(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),eA(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!_s)return Za(t),null}else 2*no()-s.renderingStartTime>XS&&n!==1073741824&&(t.flags|=128,r=!0,eA(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=no(),t.sibling=null,n=Is.current,Ki(Is,r?n&1|2:n&1),t):(Za(t),null);case 22:case 23:return qX(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Mc&1073741824&&(Za(t),t.subtreeFlags&6&&(t.flags|=8192)):Za(t),null;case 24:return null;case 25:return null}throw Error(bt(156,t.tag))}function fJe(e,t){switch(TX(t),t.tag){case 1:return ec(t.type)&&W6(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return YS(),cs(Zl),cs(Tu),OX(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return PX(t),null;case 13:if(cs(Is),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(bt(340));WS()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return cs(Is),null;case 4:return YS(),null;case 10:return kX(t.type._context),null;case 22:case 23:return qX(),null;case 24:return null;default:return null}}var O3=!1,du=!1,dJe=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function UE(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Fs(e,t,r)}else n.current=null}function sq(e,t,n){try{n()}catch(r){Fs(e,t,r)}}var $fe=!1;function hJe(e,t){if(zH=z6,e=iSe(),EX(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(VH={focusedElem:e,selectionRange:n},z6=!1,Vt=t;Vt!==null;)if(t=Vt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Vt=e;else for(;Vt!==null;){t=Vt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Yd(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(bt(163))}}catch(w){Fs(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Vt=e;break}Vt=t.return}return p=$fe,$fe=!1,p}function GI(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&sq(t,n,s)}i=i.next}while(i!==r)}}function NF(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function oq(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function eTe(e){var t=e.alternate;t!==null&&(e.alternate=null,eTe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_p],delete t[Qk],delete t[WH],delete t[KQe],delete t[XQe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function tTe(e){return e.tag===5||e.tag===3||e.tag===4}function Mfe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||tTe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function aq(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=q6));else if(r!==4&&(e=e.child,e!==null))for(aq(e,t,n),e=e.sibling;e!==null;)aq(e,t,n),e=e.sibling}function uq(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(uq(e,t,n),e=e.sibling;e!==null;)uq(e,t,n),e=e.sibling}var Aa=null,Xd=!1;function my(e,t,n){for(n=n.child;n!==null;)nTe(e,t,n),n=n.sibling}function nTe(e,t,n){if(zp&&typeof zp.onCommitFiberUnmount=="function")try{zp.onCommitFiberUnmount(SF,n)}catch{}switch(n.tag){case 5:du||UE(n,t);case 6:var r=Aa,i=Xd;Aa=null,my(e,t,n),Aa=r,Xd=i,Aa!==null&&(Xd?(e=Aa,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Aa.removeChild(n.stateNode));break;case 18:Aa!==null&&(Xd?(e=Aa,n=n.stateNode,e.nodeType===8?a7(e.parentNode,n):e.nodeType===1&&a7(e,n),Wk(e)):a7(Aa,n.stateNode));break;case 4:r=Aa,i=Xd,Aa=n.stateNode.containerInfo,Xd=!0,my(e,t,n),Aa=r,Xd=i;break;case 0:case 11:case 14:case 15:if(!du&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&sq(n,t,o),i=i.next}while(i!==r)}my(e,t,n);break;case 1:if(!du&&(UE(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Fs(n,t,a)}my(e,t,n);break;case 21:my(e,t,n);break;case 22:n.mode&1?(du=(r=du)||n.memoizedState!==null,my(e,t,n),du=r):my(e,t,n);break;default:my(e,t,n)}}function Lfe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new dJe),t.forEach(function(r){var i=wJe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Fd(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Aa=a.stateNode,Xd=!1;break e;case 3:Aa=a.stateNode.containerInfo,Xd=!0;break e;case 4:Aa=a.stateNode.containerInfo,Xd=!0;break e}a=a.return}if(Aa===null)throw Error(bt(160));nTe(s,o,i),Aa=null,Xd=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Fs(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)rTe(t,e),t=t.sibling}function rTe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Fd(t,e),ip(e),r&4){try{GI(3,e,e.return),NF(3,e)}catch(m){Fs(e,e.return,m)}try{GI(5,e,e.return)}catch(m){Fs(e,e.return,m)}}break;case 1:Fd(t,e),ip(e),r&512&&n!==null&&UE(n,n.return);break;case 5:if(Fd(t,e),ip(e),r&512&&n!==null&&UE(n,n.return),e.flags&32){var i=e.stateNode;try{zk(i,"")}catch(m){Fs(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TEe(i,s),NH(a,o);var l=NH(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?REe(i,f):c==="dangerouslySetInnerHTML"?IEe(i,f):c==="children"?zk(i,f):cX(i,c,f,l)}switch(a){case"input":AH(i,s);break;case"textarea":CEe(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?rS(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?rS(i,!!s.multiple,s.defaultValue,!0):rS(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qk]=s}catch(m){Fs(e,e.return,m)}}break;case 6:if(Fd(t,e),ip(e),r&4){if(e.stateNode===null)throw Error(bt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Fs(e,e.return,m)}}break;case 3:if(Fd(t,e),ip(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Wk(t.containerInfo)}catch(m){Fs(e,e.return,m)}break;case 4:Fd(t,e),ip(e);break;case 13:Fd(t,e),ip(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(VX=no())),r&4&&Lfe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(du=(l=du)||c,Fd(t,e),du=l):Fd(t,e),ip(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(Vt=e,c=e.child;c!==null;){for(f=Vt=c;Vt!==null;){switch(d=Vt,h=d.child,d.tag){case 0:case 11:case 14:case 15:GI(4,d,d.return);break;case 1:UE(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Fs(r,n,m)}}break;case 5:UE(d,d.return);break;case 22:if(d.memoizedState!==null){Bfe(f);continue}}h!==null?(h.return=d,Vt=h):Bfe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=kEe("display",o))}catch(m){Fs(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Fs(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Fd(t,e),ip(e),r&4&&Lfe(e);break;case 21:break;default:Fd(t,e),ip(e)}}function ip(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(tTe(n)){var r=n;break e}n=n.return}throw Error(bt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(zk(i,""),r.flags&=-33);var s=Mfe(e);uq(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Mfe(e);aq(e,a,o);break;default:throw Error(bt(161))}}catch(u){Fs(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pJe(e,t,n){Vt=e,iTe(e)}function iTe(e,t,n){for(var r=(e.mode&1)!==0;Vt!==null;){var i=Vt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||O3;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||du;a=O3;var l=du;if(O3=o,(du=u)&&!l)for(Vt=i;Vt!==null;)o=Vt,u=o.child,o.tag===22&&o.memoizedState!==null?jfe(i):u!==null?(u.return=o,Vt=u):jfe(i);for(;s!==null;)Vt=s,iTe(s),s=s.sibling;Vt=i,O3=a,du=l}Ffe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Vt=s):Ffe(e)}}function Ffe(e){for(;Vt!==null;){var t=Vt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:du||NF(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!du)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Yd(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&wfe(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}wfe(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Wk(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(bt(163))}du||t.flags&512&&oq(t)}catch(d){Fs(t,t.return,d)}}if(t===e){Vt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function Bfe(e){for(;Vt!==null;){var t=Vt;if(t===e){Vt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Vt=n;break}Vt=t.return}}function jfe(e){for(;Vt!==null;){var t=Vt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{NF(4,t)}catch(u){Fs(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Fs(t,i,u)}}var s=t.return;try{oq(t)}catch(u){Fs(t,s,u)}break;case 5:var o=t.return;try{oq(t)}catch(u){Fs(t,o,u)}}}catch(u){Fs(t,t.return,u)}if(t===e){Vt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,Vt=a;break}Vt=t.return}}var mJe=Math.ceil,n$=Og.ReactCurrentDispatcher,UX=Og.ReactCurrentOwner,td=Og.ReactCurrentBatchConfig,Yr=0,ha=null,xo=null,$a=0,Mc=0,zE=wv(0),Fo=0,rR=null,Gx=0,PF=0,zX=0,YI=null,Bl=null,VX=0,XS=1/0,h0=null,r$=!1,lq=null,m1=null,$3=!1,Xy=null,i$=0,KI=0,cq=null,S4=-1,T4=0;function rl(){return Yr&6?no():S4!==-1?S4:S4=no()}function g1(e){return e.mode&1?Yr&2&&$a!==0?$a&-$a:JQe.transition!==null?(T4===0&&(T4=zEe()),T4):(e=Ai,e!==0||(e=window.event,e=e===void 0?16:KEe(e.type)),e):1}function bh(e,t,n,r){if(50<KI)throw KI=0,cq=null,Error(bt(185));OD(e,n,r),(!(Yr&2)||e!==ha)&&(e===ha&&(!(Yr&2)&&(PF|=n),Fo===4&&By(e,$a)),tc(e,r),n===1&&Yr===0&&!(t.mode&1)&&(XS=no()+500,kF&&Ev()))}function tc(e,t){var n=e.callbackNode;JXe(e,t);var r=U6(e,e===ha?$a:0);if(r===0)n!==null&&Kce(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Kce(n),t===1)e.tag===0?QQe(Ufe.bind(null,e)):pSe(Ufe.bind(null,e)),GQe(function(){!(Yr&6)&&Ev()}),n=null;else{switch(VEe(r)){case 1:n=mX;break;case 4:n=jEe;break;case 16:n=j6;break;case 536870912:n=UEe;break;default:n=j6}n=dTe(n,sTe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sTe(e,t){if(S4=-1,T4=0,Yr&6)throw Error(bt(327));var n=e.callbackNode;if(uS()&&e.callbackNode!==n)return null;var r=U6(e,e===ha?$a:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=s$(e,r);else{t=r;var i=Yr;Yr|=2;var s=aTe();(ha!==e||$a!==t)&&(h0=null,XS=no()+500,kx(e,t));do try{vJe();break}catch(a){oTe(e,a)}while(!0);IX(),n$.current=s,Yr=i,xo!==null?t=0:(ha=null,$a=0,t=Fo)}if(t!==0){if(t===2&&(i=LH(e),i!==0&&(r=i,t=fq(e,i))),t===1)throw n=rR,kx(e,0),By(e,r),tc(e,no()),n;if(t===6)By(e,r);else{if(i=e.current.alternate,!(r&30)&&!gJe(i)&&(t=s$(e,r),t===2&&(s=LH(e),s!==0&&(r=s,t=fq(e,s))),t===1))throw n=rR,kx(e,0),By(e,r),tc(e,no()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(bt(345));case 2:Pb(e,Bl,h0);break;case 3:if(By(e,r),(r&130023424)===r&&(t=VX+500-no(),10<t)){if(U6(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){rl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=qH(Pb.bind(null,e,Bl,h0),t);break}Pb(e,Bl,h0);break;case 4:if(By(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-vh(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=no()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mJe(r/1960))-r,10<r){e.timeoutHandle=qH(Pb.bind(null,e,Bl,h0),r);break}Pb(e,Bl,h0);break;case 5:Pb(e,Bl,h0);break;default:throw Error(bt(329))}}}return tc(e,no()),e.callbackNode===n?sTe.bind(null,e):null}function fq(e,t){var n=YI;return e.current.memoizedState.isDehydrated&&(kx(e,t).flags|=256),e=s$(e,t),e!==2&&(t=Bl,Bl=n,t!==null&&dq(t)),e}function dq(e){Bl===null?Bl=e:Bl.push.apply(Bl,e)}function gJe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ih(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function By(e,t){for(t&=~zX,t&=~PF,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-vh(t),r=1<<n;e[n]=-1,t&=~r}}function Ufe(e){if(Yr&6)throw Error(bt(327));uS();var t=U6(e,0);if(!(t&1))return tc(e,no()),null;var n=s$(e,t);if(e.tag!==0&&n===2){var r=LH(e);r!==0&&(t=r,n=fq(e,r))}if(n===1)throw n=rR,kx(e,0),By(e,t),tc(e,no()),n;if(n===6)throw Error(bt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Pb(e,Bl,h0),tc(e,no()),null}function HX(e,t){var n=Yr;Yr|=1;try{return e(t)}finally{Yr=n,Yr===0&&(XS=no()+500,kF&&Ev())}}function Yx(e){Xy!==null&&Xy.tag===0&&!(Yr&6)&&uS();var t=Yr;Yr|=1;var n=td.transition,r=Ai;try{if(td.transition=null,Ai=1,e)return e()}finally{Ai=r,td.transition=n,Yr=t,!(Yr&6)&&Ev()}}function qX(){Mc=zE.current,cs(zE)}function kx(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,WQe(n)),xo!==null)for(n=xo.return;n!==null;){var r=n;switch(TX(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&W6();break;case 3:YS(),cs(Zl),cs(Tu),OX();break;case 5:PX(r);break;case 4:YS();break;case 13:cs(Is);break;case 19:cs(Is);break;case 10:kX(r.type._context);break;case 22:case 23:qX()}n=n.return}if(ha=e,xo=e=y1(e.current,null),$a=Mc=t,Fo=0,rR=null,zX=PF=Gx=0,Bl=YI=null,lx!==null){for(t=0;t<lx.length;t++)if(n=lx[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}lx=null}return e}function oTe(e,t){do{var n=xo;try{if(IX(),_4.current=t$,e$){for(var r=ks.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}e$=!1}if(Wx=0,na=No=ks=null,WI=!1,eR=0,UX.current=null,n===null||n.return===null){Fo=1,rR=t,xo=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=$a,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Ife(o);if(h!==null){h.flags&=-257,kfe(h,o,a,s,t),h.mode&1&&Afe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Afe(s,l,t),WX();break e}u=Error(bt(426))}}else if(_s&&a.mode&1){var g=Ife(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),kfe(g,o,a,s,t),CX(KS(u,a));break e}}s=u=KS(u,a),Fo!==4&&(Fo=2),YI===null?YI=[s]:YI.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=VSe(s,u,t);_fe(s,y);break e;case 1:a=u;var b=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(m1===null||!m1.has(x)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=HSe(s,a,t);_fe(s,w);break e}}s=s.return}while(s!==null)}lTe(n)}catch(S){t=S,xo===n&&n!==null&&(xo=n=n.return);continue}break}while(!0)}function aTe(){var e=n$.current;return n$.current=t$,e===null?t$:e}function WX(){(Fo===0||Fo===3||Fo===2)&&(Fo=4),ha===null||!(Gx&268435455)&&!(PF&268435455)||By(ha,$a)}function s$(e,t){var n=Yr;Yr|=2;var r=aTe();(ha!==e||$a!==t)&&(h0=null,kx(e,t));do try{yJe();break}catch(i){oTe(e,i)}while(!0);if(IX(),Yr=n,n$.current=r,xo!==null)throw Error(bt(261));return ha=null,$a=0,Fo}function yJe(){for(;xo!==null;)uTe(xo)}function vJe(){for(;xo!==null&&!VXe();)uTe(xo)}function uTe(e){var t=fTe(e.alternate,e,Mc);e.memoizedProps=e.pendingProps,t===null?lTe(e):xo=t,UX.current=null}function lTe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=fJe(n,t),n!==null){n.flags&=32767,xo=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fo=6,xo=null;return}}else if(n=cJe(n,t,Mc),n!==null){xo=n;return}if(t=t.sibling,t!==null){xo=t;return}xo=t=e}while(t!==null);Fo===0&&(Fo=5)}function Pb(e,t,n){var r=Ai,i=td.transition;try{td.transition=null,Ai=1,bJe(e,t,n,r)}finally{td.transition=i,Ai=r}return null}function bJe(e,t,n,r){do uS();while(Xy!==null);if(Yr&6)throw Error(bt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(bt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(ZXe(e,s),e===ha&&(xo=ha=null,$a=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$3||($3=!0,dTe(j6,function(){return uS(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=td.transition,td.transition=null;var o=Ai;Ai=1;var a=Yr;Yr|=4,UX.current=null,hJe(e,n),rTe(n,e),BQe(VH),z6=!!zH,VH=zH=null,e.current=n,pJe(n),HXe(),Yr=a,Ai=o,td.transition=s}else e.current=n;if($3&&($3=!1,Xy=e,i$=i),s=e.pendingLanes,s===0&&(m1=null),GXe(n.stateNode),tc(e,no()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(r$)throw r$=!1,e=lq,lq=null,e;return i$&1&&e.tag!==0&&uS(),s=e.pendingLanes,s&1?e===cq?KI++:(KI=0,cq=e):KI=0,Ev(),null}function uS(){if(Xy!==null){var e=VEe(i$),t=td.transition,n=Ai;try{if(td.transition=null,Ai=16>e?16:e,Xy===null)var r=!1;else{if(e=Xy,Xy=null,i$=0,Yr&6)throw Error(bt(331));var i=Yr;for(Yr|=4,Vt=e.current;Vt!==null;){var s=Vt,o=s.child;if(Vt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(Vt=l;Vt!==null;){var c=Vt;switch(c.tag){case 0:case 11:case 15:GI(8,c,s)}var f=c.child;if(f!==null)f.return=c,Vt=f;else for(;Vt!==null;){c=Vt;var d=c.sibling,h=c.return;if(eTe(c),c===l){Vt=null;break}if(d!==null){d.return=h,Vt=d;break}Vt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Vt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Vt=o;else e:for(;Vt!==null;){if(s=Vt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:GI(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,Vt=y;break e}Vt=s.return}}var b=e.current;for(Vt=b;Vt!==null;){o=Vt;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Vt=x;else e:for(o=b;Vt!==null;){if(a=Vt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:NF(9,a)}}catch(S){Fs(a,a.return,S)}if(a===o){Vt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Vt=w;break e}Vt=a.return}}if(Yr=i,Ev(),zp&&typeof zp.onPostCommitFiberRoot=="function")try{zp.onPostCommitFiberRoot(SF,e)}catch{}r=!0}return r}finally{Ai=n,td.transition=t}}return!1}function zfe(e,t,n){t=KS(n,t),t=VSe(e,t,1),e=p1(e,t,1),t=rl(),e!==null&&(OD(e,1,t),tc(e,t))}function Fs(e,t,n){if(e.tag===3)zfe(e,e,n);else for(;t!==null;){if(t.tag===3){zfe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(m1===null||!m1.has(r))){e=KS(n,e),e=HSe(t,e,1),t=p1(t,e,1),e=rl(),t!==null&&(OD(t,1,e),tc(t,e));break}}t=t.return}}function xJe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=rl(),e.pingedLanes|=e.suspendedLanes&n,ha===e&&($a&n)===n&&(Fo===4||Fo===3&&($a&130023424)===$a&&500>no()-VX?kx(e,0):zX|=n),tc(e,t)}function cTe(e,t){t===0&&(e.mode&1?(t=T3,T3<<=1,!(T3&130023424)&&(T3=4194304)):t=1);var n=rl();e=ag(e,t),e!==null&&(OD(e,t,n),tc(e,n))}function _Je(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),cTe(e,n)}function wJe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(bt(314))}r!==null&&r.delete(t),cTe(e,n)}var fTe;fTe=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Zl.current)Wl=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Wl=!1,lJe(e,t,n);Wl=!!(e.flags&131072)}else Wl=!1,_s&&t.flags&1048576&&mSe(t,K6,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;E4(e,t),e=t.pendingProps;var i=qS(t,Tu.current);aS(t,n),i=MX(null,t,r,e,i,n);var s=LX();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ec(r)?(s=!0,G6(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,DX(t),i.updater=DF,t.stateNode=i,i._reactInternals=t,JH(t,r,e,n),t=tq(null,t,r,!0,s,n)):(t.tag=0,_s&&s&&SX(t),Wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(E4(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=SJe(r),e=Yd(r,e),i){case 0:t=eq(null,t,r,e,n);break e;case 1:t=Nfe(null,t,r,e,n);break e;case 11:t=Rfe(null,t,r,e,n);break e;case 14:t=Dfe(null,t,r,Yd(r.type,e),n);break e}throw Error(bt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yd(r,i),eq(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yd(r,i),Nfe(e,t,r,i,n);case 3:e:{if(YSe(t),e===null)throw Error(bt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,_Se(e,t),J6(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=KS(Error(bt(423)),t),t=Pfe(e,t,r,n,i);break e}else if(r!==i){i=KS(Error(bt(424)),t),t=Pfe(e,t,r,n,i);break e}else for(Vc=h1(t.stateNode.containerInfo.firstChild),Qc=t,_s=!0,eh=null,n=bSe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(WS(),r===i){t=ug(e,t,n);break e}Wu(e,t,r,n)}t=t.child}return t;case 5:return wSe(t),e===null&&KH(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,HH(r,i)?o=null:s!==null&&HH(r,s)&&(t.flags|=32),GSe(e,t),Wu(e,t,o,n),t.child;case 6:return e===null&&KH(t),null;case 13:return KSe(e,t,n);case 4:return NX(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=GS(t,null,r,n):Wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yd(r,i),Rfe(e,t,r,i,n);case 7:return Wu(e,t,t.pendingProps,n),t.child;case 8:return Wu(e,t,t.pendingProps.children,n),t.child;case 12:return Wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Ki(X6,r._currentValue),r._currentValue=o,s!==null)if(Ih(s.value,o)){if(s.children===i.children&&!Zl.current){t=ug(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=H0(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),XH(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(bt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),XH(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,aS(t,n),i=id(i),r=r(i),t.flags|=1,Wu(e,t,r,n),t.child;case 14:return r=t.type,i=Yd(r,t.pendingProps),i=Yd(r.type,i),Dfe(e,t,r,i,n);case 15:return qSe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Yd(r,i),E4(e,t),t.tag=1,ec(r)?(e=!0,G6(t)):e=!1,aS(t,n),zSe(t,r,i),JH(t,r,i,n),tq(null,t,r,!0,e,n);case 19:return XSe(e,t,n);case 22:return WSe(e,t,n)}throw Error(bt(156,t.tag))};function dTe(e,t){return BEe(e,t)}function EJe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xf(e,t,n,r){return new EJe(e,t,n,r)}function GX(e){return e=e.prototype,!(!e||!e.isReactComponent)}function SJe(e){if(typeof e=="function")return GX(e)?1:0;if(e!=null){if(e=e.$$typeof,e===dX)return 11;if(e===hX)return 14}return 2}function y1(e,t){var n=e.alternate;return n===null?(n=Xf(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function C4(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")GX(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case NE:return Rx(n.children,i,s,t);case fX:o=8,i|=8;break;case wH:return e=Xf(12,n,t,i|2),e.elementType=wH,e.lanes=s,e;case EH:return e=Xf(13,n,t,i),e.elementType=EH,e.lanes=s,e;case SH:return e=Xf(19,n,t,i),e.elementType=SH,e.lanes=s,e;case wEe:return OF(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xEe:o=10;break e;case _Ee:o=9;break e;case dX:o=11;break e;case hX:o=14;break e;case Iy:o=16,r=null;break e}throw Error(bt(130,e==null?e:typeof e,""))}return t=Xf(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function Rx(e,t,n,r){return e=Xf(7,e,r,t),e.lanes=n,e}function OF(e,t,n,r){return e=Xf(22,e,r,t),e.elementType=wEe,e.lanes=n,e.stateNode={isHidden:!1},e}function m7(e,t,n){return e=Xf(6,e,null,t),e.lanes=n,e}function g7(e,t,n){return t=Xf(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function TJe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xj(0),this.expirationTimes=Xj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xj(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function YX(e,t,n,r,i,s,o,a,u){return e=new TJe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Xf(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},DX(s),e}function CJe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:DE,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function hTe(e){if(!e)return $1;e=e._reactInternals;e:{if($_(e)!==e||e.tag!==1)throw Error(bt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ec(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(bt(171))}if(e.tag===1){var n=e.type;if(ec(n))return hSe(e,n,t)}return t}function pTe(e,t,n,r,i,s,o,a,u){return e=YX(n,r,!0,e,i,s,o,a,u),e.context=hTe(null),n=e.current,r=rl(),i=g1(n),s=H0(r,i),s.callback=t??null,p1(n,s,i),e.current.lanes=i,OD(e,i,r),tc(e,r),e}function $F(e,t,n,r){var i=t.current,s=rl(),o=g1(i);return n=hTe(n),t.context===null?t.context=n:t.pendingContext=n,t=H0(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=p1(i,t,o),e!==null&&(bh(e,i,o,s),x4(e,i,o)),o}function o$(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vfe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function KX(e,t){Vfe(e,t),(e=e.alternate)&&Vfe(e,t)}var mTe=typeof reportError=="function"?reportError:function(e){console.error(e)};function XX(e){this._internalRoot=e}MF.prototype.render=XX.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(bt(409));$F(e,t,null,null)};MF.prototype.unmount=XX.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Yx(function(){$F(null,e,null,null)}),t[og]=null}};function MF(e){this._internalRoot=e}MF.prototype.unstable_scheduleHydration=function(e){if(e){var t=WEe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fy.length&&t!==0&&t<Fy[n].priority;n++);Fy.splice(n,0,e),n===0&&YEe(e)}};function QX(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function LF(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hfe(){}function AJe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=o$(o);s.call(l)}}var o=pTe(t,r,e,0,null,!1,!1,"",Hfe);return e._reactRootContainer=o,e[og]=o.current,Kk(e.nodeType===8?e.parentNode:e),Yx(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=o$(u);a.call(l)}}var u=YX(e,0,!1,null,null,!1,!1,"",Hfe);return e._reactRootContainer=u,e[og]=u.current,Kk(e.nodeType===8?e.parentNode:e),Yx(function(){$F(t,u,n,r)}),u}function FF(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=o$(o);a.call(u)}}$F(t,o,e,i)}else o=AJe(n,t,e,i,r);return o$(o)}HEe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=QA(t.pendingLanes);n!==0&&(gX(t,n|1),tc(t,no()),!(Yr&6)&&(XS=no()+500,Ev()))}break;case 13:Yx(function(){var r=ag(e,1);if(r!==null){var i=rl();bh(r,e,1,i)}}),KX(e,1)}};yX=function(e){if(e.tag===13){var t=ag(e,134217728);if(t!==null){var n=rl();bh(t,e,134217728,n)}KX(e,134217728)}};qEe=function(e){if(e.tag===13){var t=g1(e),n=ag(e,t);if(n!==null){var r=rl();bh(n,e,t,r)}KX(e,t)}};WEe=function(){return Ai};GEe=function(e,t){var n=Ai;try{return Ai=e,t()}finally{Ai=n}};OH=function(e,t,n){switch(t){case"input":if(AH(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=IF(r);if(!i)throw Error(bt(90));SEe(r),AH(r,i)}}}break;case"textarea":CEe(e,n);break;case"select":t=n.value,t!=null&&rS(e,!!n.multiple,t,!1)}};PEe=HX;OEe=Yx;var IJe={usingClientEntryPoint:!1,Events:[MD,ME,IF,DEe,NEe,HX]},tA={findFiberByHostInstance:ux,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kJe={bundleType:tA.bundleType,version:tA.version,rendererPackageName:tA.rendererPackageName,rendererConfig:tA.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Og.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=LEe(e),e===null?null:e.stateNode},findFiberByHostInstance:tA.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var M3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!M3.isDisabled&&M3.supportsFiber)try{SF=M3.inject(kJe),zp=M3}catch{}}xf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IJe;xf.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!QX(t))throw Error(bt(200));return CJe(e,t,null,n)};xf.createRoot=function(e,t){if(!QX(e))throw Error(bt(299));var n=!1,r="",i=mTe;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=YX(e,1,!1,null,null,n,!1,r,i),e[og]=t.current,Kk(e.nodeType===8?e.parentNode:e),new XX(t)};xf.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(bt(188)):(e=Object.keys(e).join(","),Error(bt(268,e)));return e=LEe(t),e=e===null?null:e.stateNode,e};xf.flushSync=function(e){return Yx(e)};xf.hydrate=function(e,t,n){if(!LF(t))throw Error(bt(200));return FF(null,e,t,!0,n)};xf.hydrateRoot=function(e,t,n){if(!QX(e))throw Error(bt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=mTe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=pTe(t,null,e,1,n??null,i,!1,s,o),e[og]=t.current,Kk(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new MF(t)};xf.render=function(e,t,n){if(!LF(t))throw Error(bt(200));return FF(null,e,t,!1,n)};xf.unmountComponentAtNode=function(e){if(!LF(e))throw Error(bt(40));return e._reactRootContainer?(Yx(function(){FF(null,null,e,!1,function(){e._reactRootContainer=null,e[og]=null})}),!0):!1};xf.unstable_batchedUpdates=HX;xf.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!LF(n))throw Error(bt(200));if(e==null||e._reactInternals===void 0)throw Error(bt(38));return FF(e,t,n,!1,r)};xf.version="18.3.1-next-f1338f8080-20240426";function gTe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gTe)}catch(e){console.error(e)}}gTe(),gEe.exports=xf;var FD=gEe.exports;const ZA=Cm(FD);var qfe=FD;xH.createRoot=qfe.createRoot,xH.hydrateRoot=qfe.hydrateRoot;var wp=function(){return wp=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},wp.apply(this,arguments)};function BD(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function E0(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Wfe(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function RJe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Nr(e){return this instanceof Nr?(this.v=e,this):new Nr(e)}function fx(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Nr?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function y7(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Nr(e[i](o)),done:!1}:s?s(o):o}:s}}function XI(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Wfe=="function"?Wfe(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var A4="right-scroll-bar-position",I4="width-before-scroll-bar",DJe="with-scroll-bars-hidden",NJe="--removed-body-scroll-bar-size";function v7(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function PJe(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var OJe=typeof window<"u"?N.useLayoutEffect:N.useEffect,Gfe=new WeakMap;function $Je(e,t){var n=PJe(null,function(r){return e.forEach(function(i){return v7(i,r)})});return OJe(function(){var r=Gfe.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||v7(a,null)}),s.forEach(function(a){i.has(a)||v7(a,o)})}Gfe.set(n,e)},[e]),n}function MJe(e){return e}function LJe(e,t){t===void 0&&(t=MJe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function FJe(e){e===void 0&&(e={});var t=LJe(null);return t.options=wp({async:!0,ssr:!1},e),t}var yTe=function(e){var t=e.sideCar,n=BD(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,wp({},n))};yTe.isSideCarExport=!0;function BJe(e,t){return e.useMedium(t),yTe}var vTe=FJe(),b7=function(){},BF=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:b7,onWheelCapture:b7,onTouchMoveCapture:b7}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,b=e.gapMode,x=BD(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,S=$Je([n,t]),T=wp(wp({},x),i);return N.createElement(N.Fragment,null,c&&N.createElement(w,{sideCar:vTe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:b}),o?N.cloneElement(N.Children.only(a),wp(wp({},T),{ref:S})):N.createElement(y,wp({},T,{className:u,ref:S}),a))});BF.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};BF.classNames={fullWidth:I4,zeroRight:A4};var jJe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function UJe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=jJe();return t&&e.setAttribute("nonce",t),e}function zJe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function VJe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var HJe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=UJe())&&(zJe(t,n),VJe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},qJe=function(){var e=HJe();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},bTe=function(){var e=qJe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},WJe={left:0,top:0,right:0,gap:0},x7=function(e){return parseInt(e||"",10)||0},GJe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[x7(n),x7(r),x7(i)]},YJe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return WJe;var t=GJe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},KJe=bTe(),lS="data-scroll-locked",XJe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(DJe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(lS,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(A4,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(I4,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(A4," .").concat(A4,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(I4," .").concat(I4,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(lS,`] {
    `).concat(NJe,": ").concat(a,`px;
  }
`)},Yfe=function(){var e=parseInt(document.body.getAttribute(lS)||"0",10);return isFinite(e)?e:0},QJe=function(){N.useEffect(function(){return document.body.setAttribute(lS,(Yfe()+1).toString()),function(){var e=Yfe()-1;e<=0?document.body.removeAttribute(lS):document.body.setAttribute(lS,e.toString())}},[])},JJe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;QJe();var s=N.useMemo(function(){return YJe(i)},[i]);return N.createElement(KJe,{styles:XJe(s,!t,i,n?"":"!important")})},hq=!1;if(typeof window<"u")try{var L3=Object.defineProperty({},"passive",{get:function(){return hq=!0,!0}});window.addEventListener("test",L3,L3),window.removeEventListener("test",L3,L3)}catch{hq=!1}var zw=hq?{passive:!1}:!1,ZJe=function(e){return e.tagName==="TEXTAREA"},xTe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!ZJe(e)&&n[t]==="visible")},eZe=function(e){return xTe(e,"overflowY")},tZe=function(e){return xTe(e,"overflowX")},Kfe=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=_Te(e,r);if(i){var s=wTe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},nZe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},rZe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},_Te=function(e,t){return e==="v"?eZe(t):tZe(t)},wTe=function(e,t){return e==="v"?nZe(t):rZe(t)},iZe=function(e,t){return e==="h"&&t==="rtl"?-1:1},sZe=function(e,t,n,r,i){var s=iZe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=wTe(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&_Te(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},F3=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Xfe=function(e){return[e.deltaX,e.deltaY]},Qfe=function(e){return e&&"current"in e?e.current:e},oZe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},aZe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},uZe=0,Vw=[];function lZe(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(uZe++)[0],s=N.useState(bTe)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=RJe([e.lockRef.current],(e.shards||[]).map(Qfe),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=F3(m),b=n.current,x="deltaX"in m?m.deltaX:b[0]-y[0],w="deltaY"in m?m.deltaY:b[1]-y[1],S,T=m.target,C=Math.abs(x)>Math.abs(w)?"h":"v";if("touches"in m&&C==="h"&&T.type==="range")return!1;var I=Kfe(C,T);if(!I)return!0;if(I?S=C:(S=C==="v"?"h":"v",I=Kfe(C,T)),!I)return!1;if(!r.current&&"changedTouches"in m&&(x||w)&&(r.current=S),!S)return!0;var D=r.current||S;return sZe(D,g,m,D==="h"?x:w)},[]),u=N.useCallback(function(m){var g=m;if(!(!Vw.length||Vw[Vw.length-1]!==s)){var y="deltaY"in g?Xfe(g):F3(g),b=t.current.filter(function(S){return S.name===g.type&&(S.target===g.target||g.target===S.shadowParent)&&oZe(S.delta,y)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var x=(o.current.shards||[]).map(Qfe).filter(Boolean).filter(function(S){return S.contains(g.target)}),w=x.length>0?a(g,x[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=N.useCallback(function(m,g,y,b){var x={name:m,delta:g,target:y,should:b,shadowParent:cZe(y)};t.current.push(x),setTimeout(function(){t.current=t.current.filter(function(w){return w!==x})},1)},[]),c=N.useCallback(function(m){n.current=F3(m),r.current=void 0},[]),f=N.useCallback(function(m){l(m.type,Xfe(m),m.target,a(m,e.lockRef.current))},[]),d=N.useCallback(function(m){l(m.type,F3(m),m.target,a(m,e.lockRef.current))},[]);N.useEffect(function(){return Vw.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,zw),document.addEventListener("touchmove",u,zw),document.addEventListener("touchstart",c,zw),function(){Vw=Vw.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,zw),document.removeEventListener("touchmove",u,zw),document.removeEventListener("touchstart",c,zw)}},[]);var h=e.removeScrollBar,p=e.inert;return N.createElement(N.Fragment,null,p?N.createElement(s,{styles:aZe(i)}):null,h?N.createElement(JJe,{gapMode:e.gapMode}):null)}function cZe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const fZe=BJe(vTe,lZe);var jF=N.forwardRef(function(e,t){return N.createElement(BF,wp({},e,{ref:t,sideCar:fZe}))});jF.classNames=BF.classNames;function Wi(e){return Object.keys(e)}function _7(e){return e&&typeof e=="object"&&!Array.isArray(e)}function JX(e,t){const n={...e},r=t;return _7(e)&&_7(t)&&Object.keys(t).forEach(i=>{_7(r[i])&&i in e?n[i]=JX(n[i],r[i]):n[i]=r[i]}),n}function dZe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function hZe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function iR(e){const t=hZe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function w7(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function ETe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?w7(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?w7(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?w7(s):s}}return r}return n}const $e=ETe("rem",{shouldScale:!0}),a$=ETe("em");function Sv(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function STe(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Tv(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==N.Fragment:!1}function Ha(e){const t=N.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=N.useContext(t);if(i===null)throw new Error(e);return i}]}function d2(e=null){const t=N.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>N.useContext(t)]}function u$(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function l$(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function pZe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function mZe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function gZe(e,t,n){return l$(e,n)===l$(t,n)}function ZX({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=l$(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>gZe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=mZe(l,u,r),f=pZe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const yZe={app:100,modal:200,popover:300,overlay:400,max:9999};function Bh(e){return yZe[e]}const vZe=()=>{};function bZe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||vZe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function qn(e,t="size",n=!0){if(e!==void 0)return STe(e)?n?$e(e):e:`var(--${t}-${e})`}function wo(e){return qn(e,"mantine-spacing")}function Bi(e){return e===void 0?"var(--mantine-radius-default)":qn(e,"mantine-radius")}function il(e){return qn(e,"mantine-font-size")}function TTe(e){return qn(e,"mantine-line-height",!1)}function eQ(e){if(e)return qn(e,"mantine-shadow",!1)}function N0(e,t){return n=>{e==null||e(n),t==null||t(n)}}function tQ(e,t){return e in t.breakpoints?iR(t.breakpoints[e]):iR(e)}function sR(e,t){const n=e.map(r=>({value:r,px:tQ(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function ch(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function xZe(e,t,n){var r;return n?Array.from(((r=l$(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function _Ze(){const[e,t]=N.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function P0(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function cS(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function jy(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function UF(e,t){const n=jy(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const Jfe=["mousedown","touchstart"];function wZe(e,t,n){const r=N.useRef();return N.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Jfe).forEach(s=>document.addEventListener(s,i)),()=>{(t||Jfe).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function EZe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function SZe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function TZe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=N.useState(n?t:SZe(e)),s=N.useRef();return N.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),EZe(s.current,o=>i(o.matches))},[e]),r}const M_=typeof document<"u"?N.useLayoutEffect:N.useEffect;function im(e,t){const n=N.useRef(!1);N.useEffect(()=>()=>{n.current=!1},[]),N.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function CTe({opened:e,shouldReturnFocus:t=!0}){const n=N.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return im(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function CZe(e,t="body > :not(script)"){const n=cS(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const AZe=/input|select|textarea|button|object/,ATe="a, input, select, textarea, button, object, [tabindex]";function IZe(e){return e.style.display==="none"}function kZe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(IZe(n))return!1;n=n.parentNode}return!0}function ITe(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function pq(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(ITe(e));return(AZe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&kZe(e)}function kTe(e){const t=ITe(e);return(Number.isNaN(t)||t>=0)&&pq(e)}function RZe(e){return Array.from(e.querySelectorAll(ATe)).filter(kTe)}function DZe(e,t){const n=RZe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function NZe(e=!0){const t=N.useRef(),n=N.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(ATe));o=a.find(kTe)||a.find(pq)||null,!o&&pq(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=N.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=CZe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return N.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&DZe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const PZe=e=>(e+1)%1e6;function OZe(){const[,e]=N.useReducer(PZe,0);return e}const $Ze=ti.useId||(()=>{});function MZe(){const e=$Ze();return e?`mantine-${e.replace(/:/g,"")}`:""}function Du(e){const t=MZe(),[n,r]=N.useState(t);return M_(()=>{r(cS())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function RTe(e,t,n){N.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function nQ(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function DTe(...e){return t=>{e.forEach(n=>nQ(n,t))}}function lo(...e){return N.useCallback(DTe(...e),e)}function NTe(e,t,n="ltr"){const r=N.useRef(null),i=N.useRef(!1),s=N.useRef(!1),o=N.useRef(0),[a,u]=N.useState(!1);return N.useEffect(()=>{i.current=!0},[]),N.useEffect(()=>{var b,x;const l=({x:w,y:S})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const C=P0((w-T.left)/T.width,0,1);e({x:n==="ltr"?C:1-C,y:P0((S-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(b=r.current)==null||b.addEventListener("mousedown",p),(x=r.current)==null||x.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ma({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=N.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function zF(e,t){return TZe("(prefers-reduced-motion: reduce)",e,t)}const LZe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function Jc(e){const t=N.useRef(0),n=N.useRef(null),[r,i]=N.useState(LZe),s=N.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return N.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function FZe(e){const[t,{width:n,height:r}]=Jc(e);return{ref:t,width:n,height:r}}function BZe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function jZe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function UZe(e){return t=>jZe(BZe(e),t)}function zZe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{UZe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function rQ(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=N.useState(e),o=N.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=N.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=N.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function VZe(e,t,n={autoInvoke:!1}){const r=N.useRef(null),i=N.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=N.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return N.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function HZe(e,t,n){const r=N.useRef(),i=N.useRef(null);return N.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function qZe(){const[e,t]=N.useState(!1);return N.useEffect(()=>t(!0),[]),e}function WZe(e,t){const n=jy(e),r=N.useRef(),i=N.useRef(),s=N.useRef(!0),o=N.useRef(t),a=N.useRef(-1),u=()=>window.clearTimeout(a.current),l=N.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=N.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=N.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return N.useEffect(()=>{o.current=t},[t]),[f,u]}function GZe(e,t){const[n,r]=N.useState(e),[i,s]=WZe(r,t);return N.useEffect(()=>s,[]),[n,i]}function YZe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function KZe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});M_(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>YZe(`${e}:${String(r)}`,i[0])}return[t,n]}var XZe={};function PTe(){return typeof process<"u"&&XZe?"production":"development"}function OTe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=OTe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function so(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=OTe(e))&&(r&&(r+=" "),r+=t);return r}const QZe={};function JZe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=so(t[r],i):t[r]=i})}),t}function VF({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||QZe);return JZe(s)}function c$({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const $Te=N.createContext(null);function Cv(){const e=N.useContext($Te);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function ZZe(){return Cv().cssVariablesResolver}function eet(){return Cv().classNamesPrefix}function iQ(){return Cv().getStyleNonce}function tet(){return Cv().withStaticClasses}function net(){return Cv().headless}function ret(){var e;return(e=Cv().stylesTransform)==null?void 0:e.sx}function iet(){var e;return(e=Cv().stylesTransform)==null?void 0:e.styles}function set(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function oet(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function aet(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function uet(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function sQ(e){return set(e)?oet(e):e.startsWith("rgb")?aet(e):e.startsWith("hsl")?uet(e):{r:0,g:0,b:0,a:1}}function B3(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=sQ(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function oR(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function E7(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function cet(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function fet(e){if(e.startsWith("oklch("))return(cet(e)||0)/100;const{r:t,g:n,b:r}=sQ(e),i=t/255,s=n/255,o=r/255,a=E7(i),u=E7(s),l=E7(o);return .2126*a+.7152*u+.0722*l}function nA(e,t=.179){return e.startsWith("var(")?!1:fet(e)>t}function Am({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:nA(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:nA(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:nA(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][oR(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:nA(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:nA(e,t.luminanceThreshold),shade:s,variable:void 0}}function $i(e,t){const n=Am({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function mq(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=$i(n.from,t),i=$i(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function dp(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=sQ(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const Hw=dp,det=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Am({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${$e(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${$e(1)} solid transparent`}:{background:e,hover:B3(e,.1),color:a,border:`${$e(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:dp(a,.1),hover:dp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}}return{background:dp(e,.1),hover:dp(e,.12),color:e,border:`${$e(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${$e(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:dp(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${$e(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:dp(e,.05),color:e,border:`${$e(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:dp(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}}return{background:"transparent",hover:dp(e,.12),color:e,border:`${$e(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${$e(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${$e(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${$e(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:B3(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${$e(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:B3(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${$e(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:B3(t.white,.01),color:e,border:`${$e(1)} solid transparent`}:n==="gradient"?{background:mq(r,t),hover:mq(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${$e(1)} solid var(--mantine-color-default-border)`}:{}},het={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Zfe="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",oQ={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:het,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:det,autoContrast:!1,luminanceThreshold:.3,fontFamily:Zfe,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Zfe,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:$e(34),lineHeight:"1.3"},h2:{fontSize:$e(26),lineHeight:"1.35"},h3:{fontSize:$e(22),lineHeight:"1.4"},h4:{fontSize:$e(18),lineHeight:"1.45"},h5:{fontSize:$e(16),lineHeight:"1.5"},h6:{fontSize:$e(14),lineHeight:"1.5"}}},fontSizes:{xs:$e(12),sm:$e(14),md:$e(16),lg:$e(18),xl:$e(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:$e(2),sm:$e(4),md:$e(8),lg:$e(16),xl:$e(32)},spacing:{xs:$e(10),sm:$e(12),md:$e(16),lg:$e(20),xl:$e(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), 0 ${$e(1)} ${$e(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(10)} ${$e(15)} ${$e(-5)}, rgba(0, 0, 0, 0.04) 0 ${$e(7)} ${$e(7)} ${$e(-5)}`,md:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(20)} ${$e(25)} ${$e(-5)}, rgba(0, 0, 0, 0.04) 0 ${$e(10)} ${$e(10)} ${$e(-5)}`,lg:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(28)} ${$e(23)} ${$e(-7)}, rgba(0, 0, 0, 0.04) 0 ${$e(12)} ${$e(12)} ${$e(-7)}`,xl:`0 ${$e(1)} ${$e(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${$e(36)} ${$e(28)} ${$e(-7)}, rgba(0, 0, 0, 0.04) 0 ${$e(17)} ${$e(17)} ${$e(-7)}`},other:{},components:{}};function ede(e){return e==="auto"||e==="dark"||e==="light"}function pet({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return ede(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&ede(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const met="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",tde="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function S7(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function nde(e){if(!(e.primaryColor in e.colors))throw new Error(met);if(typeof e.primaryShade=="object"&&(!S7(e.primaryShade.dark)||!S7(e.primaryShade.light)))throw new Error(tde);if(typeof e.primaryShade=="number"&&!S7(e.primaryShade))throw new Error(tde)}function get(e,t){var r;if(!t)return nde(e),e;const n=JX(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),nde(n),n}const aQ=N.createContext(null),yet=()=>N.useContext(aQ)||oQ;function co(){const e=N.useContext(aQ);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function MTe({theme:e,children:t,inherit:n=!0}){const r=yet(),i=N.useMemo(()=>get(n?r:oQ,e),[e,r,n]);return _.jsx(aQ.Provider,{value:i,children:t})}MTe.displayName="@mantine/core/MantineThemeProvider";function vet(){const e=co(),t=iQ(),n=Wi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=iR(e.breakpoints[i]),a=s?`${o-.1}px`:a$(o-.1),u=s?`${o}px`:a$(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function T7(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function C7(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function bet(e,t){const n=T7(e.variables),r=n?C7(t,n):"",i=T7(e.dark),s=i?C7(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=T7(e.light),a=o?C7(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Av({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Am({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function rde(e,t){return Av({color:e.colors[e.primaryColor][oR(e,t)],theme:e,autoContrast:null})}function j3({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=oR(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Hw(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Hw(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Hw(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=oR(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Hw(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Hw(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Hw(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function xet(e){return Array.isArray(e)?e:Array(10).fill(e)}function _et(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function qw(e,t,n){Wi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const LTe=e=>{const t=oR(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:$e(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":rde(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":rde(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};qw(r.variables,e.breakpoints,"breakpoint"),qw(r.variables,e.spacing,"spacing"),qw(r.variables,e.fontSizes,"font-size"),qw(r.variables,e.lineHeights,"line-height"),qw(r.variables,e.shadows,"shadow"),qw(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Wi(e.colors).forEach(s=>{const o=e.colors[s];if(_et(o)){Object.assign(r.light,j3({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,j3({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,j3({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,j3({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Wi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function wet({theme:e,generator:t}){const n=LTe(e),r=t==null?void 0:t(e);return r?JX(n,r):n}const A7=LTe(oQ);function Eet(e){const t={variables:{},light:{},dark:{}};return Wi(e.variables).forEach(n=>{A7.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Wi(e.light).forEach(n=>{A7.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Wi(e.dark).forEach(n=>{A7.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function Tet(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function FTe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=co(),r=iQ(),i=ZZe(),s=wet({theme:n,generator:i}),o=e===":root"&&t,a=o?Eet(s):s,u=bet(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":Tet(e)}`}}):null}FTe.displayName="@mantine/CssVariables";function Cet(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function Ww(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function Aet({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=N.useRef(),[s,o]=N.useState(()=>e.get(t)),a=r||s,u=N.useCallback(c=>{r||(Ww(c,n),o(c),e.set(c))},[e.set,a,r]),l=N.useCallback(()=>{o(t),Ww(t,n),e.clear()},[e.clear,t]);return N.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),M_(()=>{Ww(e.get(t),n)},[]),N.useEffect(()=>{var f;if(r)return Ww(r,n),()=>{};r===void 0&&Ww(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&Ww(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function Iet({respectReducedMotion:e,getRootElement:t}){M_(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}Cet();function BTe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=pet(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=Aet({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return Iet({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx($Te.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(MTe,{theme:e,children:[o&&_.jsx(FTe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(vet,{}),t]})})}BTe.displayName="@mantine/core/MantineProvider";function jD({classNames:e,styles:t,props:n,stylesCtx:r}){const i=co();return{resolvedClassNames:VF({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:c$({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const ket={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function Ret({theme:e,options:t,unstyled:n}){return so((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||ket[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function Det({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return VF({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function ide({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return VF({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function Net({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function Pet({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function Oet({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function $et({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=VF({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function Met({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function Let({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return so(Ret({theme:e,options:t,unstyled:a||h}),$et({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),Met({options:t,classes:o,selector:r,unstyled:a}),ide({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),ide({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),Det({selector:r,stylesCtx:f,options:t,props:c,theme:e}),Net({rootSelector:l,selector:r,className:u}),Pet({selector:r,classes:o,unstyled:a||h}),d&&!h&&Oet({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function Fet({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return c$({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function gq({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...gq({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function Bet(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Sv(n[r])}}),t),{})}function jet({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=Bet([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function Uet({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&Fet({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&c$({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&c$({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...jet({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?gq({style:u,theme:e}):null,...gq({style:r==null?void 0:r.style,theme:e})}}function zet({props:e,stylesCtx:t,themeName:n}){var o;const r=co(),i=(o=iet())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Bt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=co(),h=eet(),p=tet(),m=net(),g=(Array.isArray(e)?e:[e]).filter(x=>x),{withStylesTransform:y,getTransformedStyles:b}=zet({props:n,stylesCtx:r,themeName:g});return(x,w)=>({className:Let({theme:d,options:w,themeName:g,selector:x,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:b([w==null?void 0:w.styles,l])}),style:Uet({theme:d,themeName:g,selector:x,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function h2(e,t){return typeof e=="boolean"?e:t.autoContrast}function qe(e,t,n){var o;const r=co(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Sv(n)}}function I7(e){return Wi(e).reduce((t,n)=>e[n]!==void 0?`${t}${dZe(n)}:${e[n]};`:t,"").trim()}function Vet({selector:e,styles:t,media:n,container:r}){const i=t?I7(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${I7(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${I7(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function L_(e){const t=iQ();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:Vet(e)}})}function F_(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:b,bd:x,bg:w,c:S,opacity:T,ff:C,fz:I,fw:D,lts:k,ta:P,lh:M,fs:$,tt:B,td:q,w:H,miw:Y,maw:K,h:Q,mih:L,mah:z,bgsz:W,bgp:F,bgr:V,bga:J,pos:ue,top:we,left:he,bottom:ke,right:Pe,inset:rt,display:Re,flex:St,hiddenFrom:Je,visibleFrom:It,lightHidden:mt,darkHidden:Te,sx:Fe,...st}=e;return{styleProps:Sv({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:b,bd:x,bg:w,c:S,opacity:T,ff:C,fz:I,fw:D,lts:k,ta:P,lh:M,fs:$,tt:B,td:q,w:H,miw:Y,maw:K,h:Q,mih:L,mah:z,bgsz:W,bgp:F,bgr:V,bga:J,pos:ue,top:we,left:he,bottom:ke,right:Pe,inset:rt,display:Re,flex:St,hiddenFrom:Je,visibleFrom:It,lightHidden:mt,darkHidden:Te,sx:Fe}),rest:st}}const Het={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function uQ(e,t){const n=Am({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function qet(e,t){const n=Am({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:uQ(e,t)}function Wet(e,t){if(typeof e=="number")return $e(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${$e(n)}`;return r&&(s+=` ${r}`),xet.length>0&&(s+=` ${uQ(i.join(" "),t)}`),s.trim()}return e}const sde={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function Get(e){return typeof e=="string"&&e in sde?sde[e]:e}const Yet=["h1","h2","h3","h4","h5","h6"];function Ket(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&Yet.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?$e(e):e}function Xet(e){return e}const Qet=["h1","h2","h3","h4","h5","h6"];function Jet(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&Qet.includes(e)?`var(--mantine-${e}-line-height)`:e}function Zet(e){return typeof e=="number"?$e(e):e}function ett(e,t){if(typeof e=="number")return $e(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return $e(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const k7={color:uQ,textColor:qet,fontSize:Ket,spacing:ett,identity:Xet,size:Zet,lineHeight:Jet,fontFamily:Get,border:Wet};function ode(e){return e.replace("(min-width: ","").replace("em)","")}function ttt({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(ode(i))-Number(ode(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function ntt(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function rtt(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function itt(e){return typeof e=="object"&&e!==null?Wi(e).filter(t=>t!=="base"):[]}function stt(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function jTe({styleProps:e,data:t,theme:n}){return ttt(Wi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=rtt(e[i]);if(!ntt(e[i]))return o.forEach(l=>{r.inlineStyles[l]=k7[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=itt(e[i]);return o.forEach(l=>{a&&(r.styles[l]=k7[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:k7[s.type](stt(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function UD(){return`__m__-${N.useId().replace(/:/g,"")}`}function lQ(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...lQ(r,t)}),{}):typeof e=="function"?e(t):e??{}}function UTe(e){return e.startsWith("data-")?e:`data-${e}`}function ott(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[UTe(n)]=e[n]),t},{})}function zTe(e){return e?typeof e=="string"?{[UTe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...zTe(n)}),{}):ott(e):null}function yq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...yq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function att({theme:e,style:t,vars:n,styleProps:r}){const i=yq(t,e),s=yq(n,e);return{...i,...s,...r}}const VTe=N.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var I;const m=co(),g=e||"div",{styleProps:y,rest:b}=F_(h),x=ret(),w=(I=x==null?void 0:x())==null?void 0:I(y.sx),S=UD(),T=jTe({styleProps:y,theme:m,data:Het}),C={ref:p,style:att({theme:m,style:t,vars:n,styleProps:T.inlineStyles}),className:so(r,w,{[S]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":STe(o)?void 0:o||void 0,size:d,...zTe(s),...b};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(L_,{selector:`.${S}`,styles:T.styles,media:T.media}),typeof f=="function"?f(C):_.jsx(g,{...C})]})});VTe.displayName="@mantine/core/Box";const Ie=VTe;function HTe(e){return e}function ft(e){const t=N.forwardRef(e);return t.extend=HTe,t}function qo(e){const t=N.forwardRef(e);return t.extend=HTe,t}const utt=N.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function $g(){return N.useContext(utt)}function ltt(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function R7(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const rA=typeof window<"u"&&window.requestAnimationFrame;function ctt({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=N.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=N.useState(r?{}:o),l=p=>{FD.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||ltt(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}im(()=>{typeof rA=="function"&&rA(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),rA(()=>{const p=R7(i);c({...f(p),height:p})})}:()=>{const p=R7(i);c({...f(p),willChange:"height",height:p}),rA(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=R7(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:DTe(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const ftt={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},HF=ft((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=qe("Collapse",ftt,e),c=co(),f=zF(),h=(c.respectReducedMotion?f:!1)?0:i,p=ctt({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(Ie,{...l,children:n}):null:_.jsx(Ie,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...lQ(o,c)},ref:t,...l}),children:n})});HF.displayName="@mantine/core/Collapse";const[dtt,md]=Ha("ScrollArea.Root component was not found in tree");function QS(e,t){const n=jy(t);M_(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const htt=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=md(),[s,o]=N.useState(0),[a,u]=N.useState(0),l=!!(s&&a);return QS(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),QS(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),ptt=N.forwardRef((e,t)=>{const n=md(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(htt,{...e,ref:t}):null}),mtt={scrollHideDelay:1e3,type:"hover"},qTe=N.forwardRef((e,t)=>{const n=qe("ScrollAreaRoot",mtt,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=N.useState(null),[l,c]=N.useState(null),[f,d]=N.useState(null),[h,p]=N.useState(null),[m,g]=N.useState(null),[y,b]=N.useState(0),[x,w]=N.useState(0),[S,T]=N.useState(!1),[C,I]=N.useState(!1),D=lo(t,k=>u(k));return _.jsx(dtt,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:S,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:C,onScrollbarYEnabledChange:I,onCornerWidthChange:b,onCornerHeightChange:w},children:_.jsx(Ie,{...o,ref:D,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${x}px`}})})});qTe.displayName="@mantine/core/ScrollAreaRoot";function WTe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function qF(e){const t=WTe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function GTe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function gtt(e,[t,n]){return Math.min(n,Math.max(t,e))}function ade(e,t,n="ltr"){const r=qF(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=gtt(e,u);return GTe([0,o],[0,a])(l)}function ytt(e,t,n,r="ltr"){const i=qF(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return GTe([u,l],f)(e)}function YTe(e,t){return e>0&&e<t}function f$(e){return e?parseInt(e,10):0}function Dx(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[vtt,KTe]=Ha("ScrollAreaScrollbar was not found in tree"),XTe=N.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=md(),[h,p]=N.useState(null),m=lo(t,I=>p(I)),g=N.useRef(null),y=N.useRef(""),{viewport:b}=d,x=n.content-n.viewport,w=jy(l),S=jy(a),T=UF(c,10),C=I=>{if(g.current){const D=I.clientX-g.current.left,k=I.clientY-g.current.top;u({x:D,y:k})}};return N.useEffect(()=>{const I=D=>{const k=D.target;(h==null?void 0:h.contains(k))&&w(D,x)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[b,h,x,w]),N.useEffect(S,[n,S]),QS(h,T),QS(d.content,T),_.jsx(vtt,{value:{scrollbar:h,hasThumb:r,onThumbChange:jy(i),onThumbPointerUp:jy(s),onThumbPositionChange:S,onThumbPointerDown:jy(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:Dx(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",C(I))}),onPointerMove:Dx(e.onPointerMove,C),onPointerUp:Dx(e.onPointerUp,I=>{const D=I.target;D.hasPointerCapture(I.pointerId)&&D.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),btt=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=md(),[a,u]=N.useState(),l=N.useRef(null),c=lo(t,l,o.onScrollbarXChange);return N.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(XTe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${qF(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),YTe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:f$(a.paddingLeft),paddingEnd:f$(a.paddingRight)}})}})}),xtt=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=md(),[a,u]=N.useState(),l=N.useRef(null),c=lo(t,l,o.onScrollbarYChange);return N.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(XTe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${qF(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),YTe(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:f$(a.paddingTop),paddingEnd:f$(a.paddingBottom)}})}})}),cQ=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=$g(),s=md(),o=N.useRef(null),a=N.useRef(0),[u,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=WTe(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>ytt(h,a.current,u,p);return n==="horizontal"?_.jsx(btt,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=ade(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(xtt,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=ade(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),QTe=N.forwardRef((e,t)=>{const n=md(),{forceMount:r,...i}=e,[s,o]=N.useState(!1),a=e.orientation==="horizontal",u=UF(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return QS(n.viewport,u),QS(n.content,u),r||s?_.jsx(cQ,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),_tt=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=md(),[s,o]=N.useState(!1);return N.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(QTe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),wtt=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=md(),s=e.orientation==="horizontal",[o,a]=N.useState("hidden"),u=UF(()=>a("idle"),100);return N.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),N.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(cQ,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Dx(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Dx(e.onPointerLeave,()=>a("idle"))}):null}),ude=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=md(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return N.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(_tt,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(wtt,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(QTe,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(cQ,{...r,ref:t}):null});function Ett(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Stt=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=md(),s=KTe(),{onThumbPositionChange:o}=s,a=lo(t,c=>s.onThumbChange(c)),u=N.useRef(),l=UF(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=Ett(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Dx(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Dx(e.onPointerUp,s.onThumbPointerUp)})}),lde=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=KTe();return n||i.hasThumb?_.jsx(Stt,{ref:t,...r}):null}),JTe=N.forwardRef(({children:e,style:t,...n},r)=>{const i=md(),s=lo(r,i.onViewportChange);return _.jsx(Ie,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});JTe.displayName="@mantine/core/ScrollAreaViewport";var fQ={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const ZTe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Ttt=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":$e(t)}}),lg=ft((e,t)=>{const n=qe("ScrollArea",ZTe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...b}=n,[x,w]=N.useState(!1),S=Bt({name:"ScrollArea",props:n,classes:fQ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Ttt});return _.jsxs(qTe,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...S("root"),...b,children:[_.jsx(JTe,{...d,...S("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:T=>{var C;(C=d==null?void 0:d.onScroll)==null||C.call(d,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(ude,{...S("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(lde,{...S("thumb")})}),(y==="xy"||y==="y")&&_.jsx(ude,{...S("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(lde,{...S("thumb")})}),_.jsx(ptt,{...S("corner"),"data-hovered":x||void 0,"data-hidden":c==="never"||void 0})]})});lg.displayName="@mantine/core/ScrollArea";const dQ=ft((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...b}=qe("ScrollAreaAutosize",ZTe,e);return _.jsx(Ie,{...b,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(Ie,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(lg,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});lg.classes=fQ;dQ.displayName="@mantine/core/ScrollAreaAutosize";dQ.classes=fQ;lg.Autosize=dQ;var e2e={root:"m_87cf2631"};const Ctt={__staticSelector:"UnstyledButton"},of=qo((e,t)=>{const n=qe("UnstyledButton",Ctt,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Bt({name:s,props:n,classes:e2e,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(Ie,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});of.classes=e2e;of.displayName="@mantine/core/UnstyledButton";var t2e={root:"m_515a97f8"};const Att={},hQ=ft((e,t)=>{const n=qe("VisuallyHidden",Att,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Bt({name:"VisuallyHidden",classes:t2e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(Ie,{component:"span",ref:t,...c("root"),...l})});hQ.classes=t2e;hQ.displayName="@mantine/core/VisuallyHidden";var n2e={root:"m_1b7284a3"};const Itt={},ktt=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Bi(t),"--paper-shadow":eQ(n)}}),p2=qo((e,t)=>{const n=qe("Paper",Itt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Bt({name:"Paper",props:n,classes:n2e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:ktt});return _.jsx(Ie,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});p2.classes=n2e;p2.displayName="@mantine/core/Paper";function m2(e){return r2e(e)?(e.nodeName||"").toLowerCase():"#document"}function nc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Mg(e){var t;return(t=(r2e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function r2e(e){return e instanceof Node||e instanceof nc(e).Node}function ws(e){return e instanceof Element||e instanceof nc(e).Element}function af(e){return e instanceof HTMLElement||e instanceof nc(e).HTMLElement}function vq(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof nc(e).ShadowRoot}function zD(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=od(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Rtt(e){return["table","td","th"].includes(m2(e))}function pQ(e){const t=mQ(),n=od(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Dtt(e){let t=cg(e);for(;af(t)&&!M1(t);){if(pQ(t))return t;t=cg(t)}return null}function mQ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function M1(e){return["html","body","#document"].includes(m2(e))}function od(e){return nc(e).getComputedStyle(e)}function WF(e){return ws(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function cg(e){if(m2(e)==="html")return e;const t=e.assignedSlot||e.parentNode||vq(e)&&e.host||Mg(e);return vq(t)?t.host:t}function i2e(e){const t=cg(e);return M1(t)?e.ownerDocument?e.ownerDocument.body:e.body:af(t)&&zD(t)?t:i2e(t)}function q0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=i2e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=nc(i);return s?t.concat(o,o.visualViewport||[],zD(i)?i:[],o.frameElement&&n?q0(o.frameElement):[]):t.concat(i,q0(i,[],n))}function cde(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function aR(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&vq(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function s2e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function o2e(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function Ntt(e){return $tt()?!1:!fde()&&e.width===0&&e.height===0||fde()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Ptt(){return/apple/i.test(navigator.vendor)}function fde(){const e=/android/i;return e.test(s2e())||e.test(o2e())}function Ott(){return s2e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function $tt(){return o2e().includes("jsdom/")}function bq(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Mtt(e){return"nativeEvent"in e}function Ltt(e){return e.matches("html,body")}function dx(e){return(e==null?void 0:e.ownerDocument)||document}function D7(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function yE(e){return"composedPath"in e?e.composedPath()[0]:e.target}const Ftt="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Btt(e){return af(e)&&e.matches(Ftt)}const Hc=Math.min,hu=Math.max,d$=Math.round,U3=Math.floor,L1=e=>({x:e,y:e}),jtt={left:"right",right:"left",bottom:"top",top:"bottom"},Utt={start:"end",end:"start"};function xq(e,t,n){return hu(e,Hc(t,n))}function fg(e,t){return typeof e=="function"?e(t):e}function kh(e){return e.split("-")[0]}function g2(e){return e.split("-")[1]}function gQ(e){return e==="x"?"y":"x"}function yQ(e){return e==="y"?"height":"width"}function B_(e){return["top","bottom"].includes(kh(e))?"y":"x"}function vQ(e){return gQ(B_(e))}function ztt(e,t,n){n===void 0&&(n=!1);const r=g2(e),i=vQ(e),s=yQ(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=h$(o)),[o,h$(o)]}function Vtt(e){const t=h$(e);return[_q(e),t,_q(t)]}function _q(e){return e.replace(/start|end/g,t=>Utt[t])}function Htt(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function qtt(e,t,n,r){const i=g2(e);let s=Htt(kh(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(_q)))),s}function h$(e){return e.replace(/left|right|bottom|top/g,t=>jtt[t])}function Wtt(e){return{top:0,right:0,bottom:0,left:0,...e}}function bQ(e){return typeof e!="number"?Wtt(e):{top:e,right:e,bottom:e,left:e}}function JS(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function dde(e,t,n){let{reference:r,floating:i}=e;const s=B_(t),o=vQ(t),a=yQ(o),u=kh(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(g2(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const Gtt=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=dde(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:b,y:x,data:w,reset:S}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=b??c,f=x??f,h={...h,[g]:{...h[g],...w}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(d=S.placement),S.rects&&(l=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:c,y:f}=dde(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function xQ(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=fg(t,e),p=bQ(h),g=a[d?f==="floating"?"reference":"floating":f],y=JS(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),b=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,x=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(x))?await(s.getScale==null?void 0:s.getScale(x))||{x:1,y:1}:{x:1,y:1},S=JS(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:x,strategy:u}):b);return{top:(y.top-S.top+p.top)/w.y,bottom:(S.bottom-y.bottom+p.bottom)/w.y,left:(y.left-S.left+p.left)/w.x,right:(S.right-y.right+p.right)/w.x}}const Ytt=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=fg(e,t)||{};if(l==null)return{};const f=bQ(c),d={x:n,y:r},h=vQ(i),p=yQ(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",b=g?"bottom":"right",x=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],S=d[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let C=T?T[x]:0;(!C||!await(o.isElement==null?void 0:o.isElement(T)))&&(C=a.floating[x]||s.floating[p]);const I=w/2-S/2,D=C/2-m[p]/2-1,k=Hc(f[y],D),P=Hc(f[b],D),M=k,$=C-m[p]-P,B=C/2-m[p]/2+I,q=xq(M,B,$),H=!u.arrow&&g2(i)!=null&&B!==q&&s.reference[p]/2-(B<M?k:P)-m[p]/2<0,Y=H?B<M?B-M:B-$:0;return{[h]:d[h]+Y,data:{[h]:q,centerOffset:B-q-Y,...H&&{alignmentOffset:Y}},reset:H}}}),Ktt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=fg(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=kh(i),b=kh(a)===a,x=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(b||!m?[h$(a)]:Vtt(a));!d&&p!=="none"&&w.push(...qtt(a,m,p,x));const S=[a,...w],T=await xQ(t,g),C=[];let I=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&C.push(T[y]),f){const M=ztt(i,o,x);C.push(T[M[0]],T[M[1]])}if(I=[...I,{placement:i,overflows:C}],!C.every(M=>M<=0)){var D,k;const M=(((D=s.flip)==null?void 0:D.index)||0)+1,$=S[M];if($)return{data:{index:M,overflows:I},reset:{placement:$}};let B=(k=I.filter(q=>q.overflows[0]<=0).sort((q,H)=>q.overflows[1]-H.overflows[1])[0])==null?void 0:k.placement;if(!B)switch(h){case"bestFit":{var P;const q=(P=I.map(H=>[H.placement,H.overflows.filter(Y=>Y>0).reduce((Y,K)=>Y+K,0)]).sort((H,Y)=>H[1]-Y[1])[0])==null?void 0:P[0];q&&(B=q);break}case"initialPlacement":B=a;break}if(i!==B)return{reset:{placement:B}}}return{}}}};function a2e(e){const t=Hc(...e.map(s=>s.left)),n=Hc(...e.map(s=>s.top)),r=hu(...e.map(s=>s.right)),i=hu(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Xtt(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>JS(a2e(i)))}const Qtt=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=fg(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Xtt(c),d=JS(a2e(c)),h=bQ(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(B_(n)==="y"){const k=f[0],P=f[f.length-1],M=kh(n)==="top",$=k.top,B=P.bottom,q=M?k.left:P.left,H=M?k.right:P.right,Y=H-q,K=B-$;return{top:$,bottom:B,left:q,right:H,width:Y,height:K,x:q,y:$}}const g=kh(n)==="left",y=hu(...f.map(k=>k.right)),b=Hc(...f.map(k=>k.left)),x=f.filter(k=>g?k.left===b:k.right===y),w=x[0].top,S=x[x.length-1].bottom,T=b,C=y,I=C-T,D=S-w;return{top:w,bottom:S,left:T,right:C,width:I,height:D,x:T,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Jtt(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=kh(n),a=g2(n),u=B_(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=fg(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const Ztt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Jtt(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},ent=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:b}=g;return{x:y,y:b}}},...u}=fg(e,t),l={x:n,y:r},c=await xQ(t,u),f=B_(kh(i)),d=gQ(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=h+c[g],x=h-c[y];h=xq(b,h,x)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=p+c[g],x=p-c[y];p=xq(b,p,x)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},tnt=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=fg(e,t),c={x:n,y:r},f=B_(i),d=gQ(f);let h=c[d],p=c[f];const m=fg(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const x=d==="y"?"height":"width",w=s.reference[d]-s.floating[x]+g.mainAxis,S=s.reference[d]+s.reference[x]-g.mainAxis;h<w?h=w:h>S&&(h=S)}if(l){var y,b;const x=d==="y"?"width":"height",w=["top","left"].includes(kh(i)),S=s.reference[f]-s.floating[x]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),T=s.reference[f]+s.reference[x]+(w?0:((b=o.offset)==null?void 0:b[f])||0)-(w?g.crossAxis:0);p<S?p=S:p>T&&(p=T)}return{[d]:h,[f]:p}}}},nnt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=fg(e,t),u=await xQ(t,a),l=kh(n),c=g2(n),f=B_(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,b=Hc(h-u[p],g),x=Hc(d-u[m],y),w=!t.middlewareData.shift;let S=b,T=x;if(f?T=c||w?Hc(x,y):y:S=c||w?Hc(b,g):g,w&&!c){const I=hu(u.left,0),D=hu(u.right,0),k=hu(u.top,0),P=hu(u.bottom,0);f?T=d-2*(I!==0||D!==0?I+D:hu(u.left,u.right)):S=h-2*(k!==0||P!==0?k+P:hu(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:S});const C=await i.getDimensions(s.floating);return d!==C.width||h!==C.height?{reset:{rects:!0}}:{}}}};function u2e(e){const t=od(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=af(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=d$(n)!==s||d$(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function _Q(e){return ws(e)?e:e.contextElement}function fS(e){const t=_Q(e);if(!af(t))return L1(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=u2e(t);let o=(s?d$(n.width):n.width)/r,a=(s?d$(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const rnt=L1(0);function l2e(e){const t=nc(e);return!mQ()||!t.visualViewport?rnt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function int(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==nc(e)?!1:t}function Kx(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=_Q(e);let o=L1(1);t&&(r?ws(r)&&(o=fS(r)):o=fS(e));const a=int(s,n,r)?l2e(s):L1(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=nc(s),h=r&&ws(r)?nc(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=fS(m),y=m.getBoundingClientRect(),b=od(m),x=y.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=x,l+=w,p=nc(m),m=p.frameElement}}return JS({width:c,height:f,x:u,y:l})}const snt=[":popover-open",":modal"];function wQ(e){return snt.some(t=>{try{return e.matches(t)}catch{return!1}})}function ont(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Mg(r),a=t?wQ(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=L1(1);const c=L1(0),f=af(r);if((f||!f&&!s)&&((m2(r)!=="body"||zD(o))&&(u=WF(r)),af(r))){const d=Kx(r);l=fS(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function ant(e){return Array.from(e.getClientRects())}function c2e(e){return Kx(Mg(e)).left+WF(e).scrollLeft}function unt(e){const t=Mg(e),n=WF(e),r=e.ownerDocument.body,i=hu(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=hu(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+c2e(e);const a=-n.scrollTop;return od(r).direction==="rtl"&&(o+=hu(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function lnt(e,t){const n=nc(e),r=Mg(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=mQ();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function cnt(e,t){const n=Kx(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=af(e)?fS(e):L1(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function hde(e,t,n){let r;if(t==="viewport")r=lnt(e,n);else if(t==="document")r=unt(Mg(e));else if(ws(t))r=cnt(t,n);else{const i=l2e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return JS(r)}function f2e(e,t){const n=cg(e);return n===t||!ws(n)||M1(n)?!1:od(n).position==="fixed"||f2e(n,t)}function fnt(e,t){const n=t.get(e);if(n)return n;let r=q0(e,[],!1).filter(a=>ws(a)&&m2(a)!=="body"),i=null;const s=od(e).position==="fixed";let o=s?cg(e):e;for(;ws(o)&&!M1(o);){const a=od(o),u=pQ(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||zD(o)&&!u&&f2e(e,o))?r=r.filter(c=>c!==o):i=a,o=cg(o)}return t.set(e,r),r}function dnt(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?wQ(t)?[]:fnt(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=hde(t,c,i);return l.top=hu(f.top,l.top),l.right=Hc(f.right,l.right),l.bottom=Hc(f.bottom,l.bottom),l.left=hu(f.left,l.left),l},hde(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function hnt(e){const{width:t,height:n}=u2e(e);return{width:t,height:n}}function pnt(e,t,n){const r=af(t),i=Mg(t),s=n==="fixed",o=Kx(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=L1(0);if(r||!r&&!s)if((m2(t)!=="body"||zD(i))&&(a=WF(t)),r){const f=Kx(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=c2e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function N7(e){return od(e).position==="static"}function pde(e,t){return!af(e)||od(e).position==="fixed"?null:t?t(e):e.offsetParent}function d2e(e,t){const n=nc(e);if(wQ(e))return n;if(!af(e)){let i=cg(e);for(;i&&!M1(i);){if(ws(i)&&!N7(i))return i;i=cg(i)}return n}let r=pde(e,t);for(;r&&Rtt(r)&&N7(r);)r=pde(r,t);return r&&M1(r)&&N7(r)&&!pQ(r)?n:r||Dtt(e)||n}const mnt=async function(e){const t=this.getOffsetParent||d2e,n=this.getDimensions,r=await n(e.floating);return{reference:pnt(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gnt(e){return od(e).direction==="rtl"}const ynt={convertOffsetParentRelativeRectToViewportRelativeRect:ont,getDocumentElement:Mg,getClippingRect:dnt,getOffsetParent:d2e,getElementRects:mnt,getClientRects:ant,getDimensions:hnt,getScale:fS,isElement:ws,isRTL:gnt};function vnt(e,t){let n=null,r;const i=Mg(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=U3(c),p=U3(i.clientWidth-(l+f)),m=U3(i.clientHeight-(c+d)),g=U3(l),b={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:hu(0,Hc(1,u))||1};let x=!0;function w(S){const T=S[0].intersectionRatio;if(T!==u){if(!x)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}x=!1}try{n=new IntersectionObserver(w,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,b)}n.observe(e)}return o(!0),s}function bnt(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=_Q(e),c=i||s?[...l?q0(l):[],...q0(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?vnt(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[b]=y;b&&b.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var x;(x=h)==null||x.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Kx(e):null;u&&g();function g(){const y=Kx(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const xnt=Ztt,_nt=ent,wnt=Ktt,Ent=nnt,mde=Ytt,Snt=Qtt,Tnt=tnt,Cnt=(e,t,n)=>{const r=new Map,i={platform:ynt,...n},s={...i.platform,_c:r};return Gtt(e,t,{...i,platform:s})};var k4=typeof document<"u"?N.useLayoutEffect:N.useEffect;function p$(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!p$(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!p$(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function h2e(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function gde(e,t){const n=h2e(e);return Math.round(t*n)/n}function yde(e){const t=N.useRef(e);return k4(()=>{t.current=e}),t}function Ant(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=N.useState(r);p$(d,r)||h(r);const[p,m]=N.useState(null),[g,y]=N.useState(null),b=N.useCallback(Y=>{Y!==T.current&&(T.current=Y,m(Y))},[]),x=N.useCallback(Y=>{Y!==C.current&&(C.current=Y,y(Y))},[]),w=s||p,S=o||g,T=N.useRef(null),C=N.useRef(null),I=N.useRef(c),D=u!=null,k=yde(u),P=yde(i),M=N.useCallback(()=>{if(!T.current||!C.current)return;const Y={placement:t,strategy:n,middleware:d};P.current&&(Y.platform=P.current),Cnt(T.current,C.current,Y).then(K=>{const Q={...K,isPositioned:!0};$.current&&!p$(I.current,Q)&&(I.current=Q,FD.flushSync(()=>{f(Q)}))})},[d,t,n,P]);k4(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(Y=>({...Y,isPositioned:!1})))},[l]);const $=N.useRef(!1);k4(()=>($.current=!0,()=>{$.current=!1}),[]),k4(()=>{if(w&&(T.current=w),S&&(C.current=S),w&&S){if(k.current)return k.current(w,S,M);M()}},[w,S,M,k,D]);const B=N.useMemo(()=>({reference:T,floating:C,setReference:b,setFloating:x}),[b,x]),q=N.useMemo(()=>({reference:w,floating:S}),[w,S]),H=N.useMemo(()=>{const Y={position:n,left:0,top:0};if(!q.floating)return Y;const K=gde(q.floating,c.x),Q=gde(q.floating,c.y);return a?{...Y,transform:"translate("+K+"px, "+Q+"px)",...h2e(q.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:K,top:Q}},[n,a,q.floating,c.x,c.y]);return N.useMemo(()=>({...c,update:M,refs:B,elements:q,floatingStyles:H}),[c,M,B,q,H])}const Int=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?mde({element:r.current,padding:i}).fn(n):{}:r?mde({element:r,padding:i}).fn(n):{}}}},p2e=(e,t)=>({...xnt(e),options:[e,t]}),EQ=(e,t)=>({..._nt(e),options:[e,t]}),vde=(e,t)=>({...Tnt(e),options:[e,t]}),wq=(e,t)=>({...wnt(e),options:[e,t]}),knt=(e,t)=>({...Ent(e),options:[e,t]}),Eq=(e,t)=>({...Snt(e),options:[e,t]}),m2e=(e,t)=>({...Int(e),options:[e,t]}),g2e={...M6},Rnt=g2e.useInsertionEffect,Dnt=Rnt||(e=>e());function Uy(e){const t=N.useRef(()=>{});return Dnt(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Hp=typeof document<"u"?N.useLayoutEffect:N.useEffect;let bde=!1,Nnt=0;const xde=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Nnt++;function Pnt(){const[e,t]=N.useState(()=>bde?xde():void 0);return Hp(()=>{e==null&&t(xde())},[]),N.useEffect(()=>{bde=!0},[]),e}const Ont=g2e.useId,y2e=Ont||Pnt;function $nt(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Mnt=N.createContext(null),Lnt=N.createContext(null),SQ=()=>{var e;return((e=N.useContext(Mnt))==null?void 0:e.id)||null},TQ=()=>N.useContext(Lnt);function CQ(e){return"data-floating-ui-"+e}function _de(e){const t=N.useRef(e);return Hp(()=>{t.current=e}),t}const wde=CQ("safe-polygon");function R4(e,t,n){return n&&!bq(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Fnt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=TQ(),m=SQ(),g=_de(c),y=_de(l),b=N.useRef(),x=N.useRef(-1),w=N.useRef(),S=N.useRef(-1),T=N.useRef(!0),C=N.useRef(!1),I=N.useRef(()=>{}),D=N.useCallback(()=>{var $;const B=($=i.current.openEvent)==null?void 0:$.type;return(B==null?void 0:B.includes("mouse"))&&B!=="mousedown"},[i]);N.useEffect(()=>{if(!u)return;function $(B){let{open:q}=B;q||(clearTimeout(x.current),clearTimeout(S.current),T.current=!0)}return s.on("openchange",$),()=>{s.off("openchange",$)}},[u,s]),N.useEffect(()=>{if(!u||!g.current||!n)return;function $(q){D()&&r(!1,q,"hover")}const B=dx(a).documentElement;return B.addEventListener("mouseleave",$),()=>{B.removeEventListener("mouseleave",$)}},[a,n,r,u,g,D]);const k=N.useCallback(function($,B,q){B===void 0&&(B=!0),q===void 0&&(q="hover");const H=R4(y.current,"close",b.current);H&&!w.current?(clearTimeout(x.current),x.current=window.setTimeout(()=>r(!1,$,q),H)):B&&(clearTimeout(x.current),r(!1,$,q))},[y,r]),P=Uy(()=>{I.current(),w.current=void 0}),M=Uy(()=>{if(C.current){const $=dx(a).body;$.style.pointerEvents="",$.removeAttribute(wde),C.current=!1}});return N.useEffect(()=>{if(!u)return;function $(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function B(Y){if(clearTimeout(x.current),T.current=!1,f&&!bq(b.current)||d>0&&!R4(y.current,"open"))return;const K=R4(y.current,"open",b.current);K?x.current=window.setTimeout(()=>{r(!0,Y,"hover")},K):r(!0,Y,"hover")}function q(Y){if($())return;I.current();const K=dx(a);if(clearTimeout(S.current),g.current&&i.current.floatingContext){n||clearTimeout(x.current),w.current=g.current({...i.current.floatingContext,tree:p,x:Y.clientX,y:Y.clientY,onClose(){M(),P(),k(Y,!0,"safe-polygon")}});const L=w.current;K.addEventListener("mousemove",L),I.current=()=>{K.removeEventListener("mousemove",L)};return}(b.current==="touch"?!aR(a,Y.relatedTarget):!0)&&k(Y)}function H(Y){$()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:Y.clientX,y:Y.clientY,onClose(){M(),P(),k(Y)}})(Y))}if(ws(o)){const Y=o;return n&&Y.addEventListener("mouseleave",H),a==null||a.addEventListener("mouseleave",H),h&&Y.addEventListener("mousemove",B,{once:!0}),Y.addEventListener("mouseenter",B),Y.addEventListener("mouseleave",q),()=>{n&&Y.removeEventListener("mouseleave",H),a==null||a.removeEventListener("mouseleave",H),h&&Y.removeEventListener("mousemove",B),Y.removeEventListener("mouseenter",B),Y.removeEventListener("mouseleave",q)}}},[o,a,u,e,f,d,h,k,P,M,r,n,p,y,g,i]),Hp(()=>{var $;if(u&&n&&($=g.current)!=null&&$.__options.blockPointerEvents&&D()){const q=dx(a).body;if(q.setAttribute(wde,""),q.style.pointerEvents="none",C.current=!0,ws(o)&&a){var B;const H=o,Y=p==null||(B=p.nodesRef.current.find(K=>K.id===m))==null||(B=B.context)==null?void 0:B.elements.floating;return Y&&(Y.style.pointerEvents=""),H.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{H.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,D]),Hp(()=>{n||(b.current=void 0,P(),M())},[n,P,M]),N.useEffect(()=>()=>{P(),clearTimeout(x.current),clearTimeout(S.current),M()},[u,o,P,M]),N.useMemo(()=>{if(!u)return{};function $(B){b.current=B.pointerType}return{reference:{onPointerDown:$,onPointerEnter:$,onMouseMove(B){function q(){T.current||r(!0,B.nativeEvent,"hover")}f&&!bq(b.current)||n||d===0||(clearTimeout(S.current),b.current==="touch"?q():S.current=window.setTimeout(q,d))}},floating:{onMouseEnter(){clearTimeout(x.current)},onMouseLeave(B){k(B.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const Sq=()=>{},v2e=N.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:Sq,setState:Sq,isInstantPhase:!1}),b2e=()=>N.useContext(v2e);function Bnt(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=N.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=N.useRef(null),a=N.useCallback(u=>{s({currentId:u})},[]);return Hp(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),N.createElement(v2e.Provider,{value:N.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function jnt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=b2e(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Hp(()=>{u&&(f({delay:{open:1,close:R4(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Hp(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Hp(()=>{l===Sq||!n||l(o)},[n,l,o]),a}function P7(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Unt={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},znt={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Ede=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function Vnt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=TQ(),b=Uy(typeof c=="function"?c:()=>!1),x=typeof c=="function"?b:c,w=N.useRef(!1),S=N.useRef(!1),{escapeKey:T,outsidePress:C}=Ede(m),{escapeKey:I,outsidePress:D}=Ede(g),k=Uy(B=>{var q;if(!n||!u||!l||B.key!=="Escape")return;const H=(q=a.current.floatingContext)==null?void 0:q.nodeId,Y=y?P7(y.nodesRef.current,H):[];if(!T&&(B.stopPropagation(),Y.length>0)){let K=!0;if(Y.forEach(Q=>{var L;if((L=Q.context)!=null&&L.open&&!Q.context.dataRef.current.__escapeKeyBubbles){K=!1;return}}),!K)return}r(!1,Mtt(B)?B.nativeEvent:B,"escape-key")}),P=Uy(B=>{var q;const H=()=>{var Y;k(B),(Y=yE(B))==null||Y.removeEventListener("keydown",H)};(q=yE(B))==null||q.addEventListener("keydown",H)}),M=Uy(B=>{var q;const H=w.current;w.current=!1;const Y=S.current;if(S.current=!1,f==="click"&&Y||H||typeof x=="function"&&!x(B))return;const K=yE(B),Q="["+CQ("inert")+"]",L=dx(o).querySelectorAll(Q);let z=ws(K)?K:null;for(;z&&!M1(z);){const J=cg(z);if(M1(J)||!ws(J))break;z=J}if(L.length&&ws(K)&&!Ltt(K)&&!aR(K,o)&&Array.from(L).every(J=>!aR(z,J)))return;if(af(K)&&o){const J=K.clientWidth>0&&K.scrollWidth>K.clientWidth,ue=K.clientHeight>0&&K.scrollHeight>K.clientHeight;let we=ue&&B.offsetX>K.clientWidth;if(ue&&od(K).direction==="rtl"&&(we=B.offsetX<=K.offsetWidth-K.clientWidth),we||J&&B.offsetY>K.clientHeight)return}const W=(q=a.current.floatingContext)==null?void 0:q.nodeId,F=y&&P7(y.nodesRef.current,W).some(J=>{var ue;return D7(B,(ue=J.context)==null?void 0:ue.elements.floating)});if(D7(B,o)||D7(B,s)||F)return;const V=y?P7(y.nodesRef.current,W):[];if(V.length>0){let J=!0;if(V.forEach(ue=>{var we;if((we=ue.context)!=null&&we.open&&!ue.context.dataRef.current.__outsidePressBubbles){J=!1;return}}),!J)return}r(!1,B,"outside-press")}),$=Uy(B=>{var q;const H=()=>{var Y;M(B),(Y=yE(B))==null||Y.removeEventListener(f,H)};(q=yE(B))==null||q.addEventListener(f,H)});return N.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=T,a.current.__outsidePressBubbles=C;function B(Y){r(!1,Y,"ancestor-scroll")}const q=dx(o);l&&q.addEventListener("keydown",I?P:k,I),x&&q.addEventListener(f,D?$:M,D);let H=[];return p&&(ws(s)&&(H=q0(s)),ws(o)&&(H=H.concat(q0(o))),!ws(i)&&i&&i.contextElement&&(H=H.concat(q0(i.contextElement)))),H=H.filter(Y=>{var K;return Y!==((K=q.defaultView)==null?void 0:K.visualViewport)}),H.forEach(Y=>{Y.addEventListener("scroll",B,{passive:!0})}),()=>{l&&q.removeEventListener("keydown",I?P:k,I),x&&q.removeEventListener(f,D?$:M,D),H.forEach(Y=>{Y.removeEventListener("scroll",B)})}},[a,o,s,i,l,x,f,n,r,p,u,T,C,k,I,P,M,D,$]),N.useEffect(()=>{w.current=!1},[x,f]),N.useMemo(()=>u?{reference:{onKeyDown:k,[Unt[h]]:B=>{d&&r(!1,B.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){S.current=!0},onMouseUp(){S.current=!0},[znt[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function Hnt(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=y2e(),s=N.useRef({}),[o]=N.useState(()=>$nt()),a=SQ()!=null,[u,l]=N.useState(r.reference),c=Uy((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=N.useMemo(()=>({setPositionReference:l}),[]),d=N.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return N.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function AQ(e){e===void 0&&(e={});const{nodeId:t}=e,n=Hnt({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=N.useState(null),[a,u]=N.useState(null),c=(i==null?void 0:i.reference)||s,f=N.useRef(null),d=TQ();Hp(()=>{c&&(f.current=c)},[c]);const h=Ant({...e,elements:{...i,...a&&{reference:a}}}),p=N.useCallback(x=>{const w=ws(x)?{getBoundingClientRect:()=>x.getBoundingClientRect(),contextElement:x}:x;u(w),h.refs.setReference(w)},[h.refs]),m=N.useCallback(x=>{(ws(x)||x===null)&&(f.current=x,o(x)),(ws(h.refs.reference.current)||h.refs.reference.current===null||x!==null&&!ws(x))&&h.refs.setReference(x)},[h.refs]),g=N.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=N.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),b=N.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Hp(()=>{r.dataRef.current.floatingContext=b;const x=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);x&&(x.context=b)}),N.useMemo(()=>({...h,context:b,refs:g,elements:y}),[h,g,y,b])}function qnt(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=N.useRef(!1),c=N.useRef(),f=N.useRef(!0);return N.useEffect(()=>{if(!a)return;const d=nc(o);function h(){!n&&af(o)&&o===cde(dx(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),N.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),N.useEffect(()=>()=>{clearTimeout(c.current)},[]),N.useMemo(()=>a?{reference:{onPointerDown(d){Ntt(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=yE(d.nativeEvent);if(u&&ws(h))try{if(Ptt()&&Ott())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!Btt(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=ws(h)&&h.hasAttribute(CQ("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=cde(o?o.ownerDocument:document);!h&&g===o||aR((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||aR(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Sde="active",Tde="selected";function O7(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Sde]:o,[Tde]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Sde,Tde].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function Wnt(e){e===void 0&&(e=[]);const t=e,n=N.useCallback(s=>O7(s,e,"reference"),t),r=N.useCallback(s=>O7(s,e,"floating"),t),i=N.useCallback(s=>O7(s,e,"item"),e.map(s=>s==null?void 0:s.item));return N.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const Gnt=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Ynt(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=Gnt.get(o))!=null?n:o,u=y2e(),c=SQ()!=null;return N.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function x2e(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Cde(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Ade(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Knt={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Xnt({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:$e(t),height:$e(t),transform:"rotate(45deg)",position:"absolute",[Knt[u]]:$e(r)},f=$e(-t/2);return u==="left"?{...c,...Cde(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Cde(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Ade(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Ade(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const IQ=N.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=$g();return s?_.jsx("div",{...l,ref:c,style:{...u,...Xnt({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});IQ.displayName="@mantine/core/FloatingArrow";const[Qnt,_2e]=Ha("Popover component was not found in the tree");function GF({children:e,active:t=!0,refProp:n="ref"}){const r=NZe(t),i=lo(r,e==null?void 0:e.ref);return Tv(e)?N.cloneElement(e,{[n]:i}):e}function w2e(e){return _.jsx(hQ,{tabIndex:-1,"data-autofocus":!0,...e})}GF.displayName="@mantine/core/FocusTrap";w2e.displayName="@mantine/core/FocusTrapInitialFocus";GF.InitialFocus=w2e;function Jnt(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Znt={},E2e=N.forwardRef((e,t)=>{const{children:n,target:r,...i}=qe("Portal",Znt,e),[s,o]=N.useState(!1),a=N.useRef(null);return M_(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Jnt(i),nQ(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:FD.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});E2e.displayName="@mantine/core/Portal";function y2({withinPortal:e=!0,children:t,...n}){return e?_.jsx(E2e,{...n,children:t}):_.jsx(_.Fragment,{children:t})}y2.displayName="@mantine/core/OptionalPortal";const iA=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${$e(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),z3={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${$e(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${$e(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${$e(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${$e(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${$e(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${$e(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${$e(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${$e(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...iA("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...iA("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...iA("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...iA("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...iA("top"),common:{transformOrigin:"top right"}}},Ide={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function ert({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in z3?{transitionProperty:z3[e].transitionProperty,...i,...z3[e].common,...z3[e][Ide[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Ide[t]]}}function trt({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=co(),l=zF(),c=u.respectReducedMotion?l:!1,[f,d]=N.useState(c?0:e),[h,p]=N.useState(r?"entered":"exited"),m=N.useRef(-1),g=N.useRef(-1),y=b=>{const x=b?i:s,w=b?o:a;window.clearTimeout(m.current);const S=c?0:b?e:t;d(S),S===0?(typeof x=="function"&&x(),typeof w=="function"&&w(),p(b?"entered":"exited")):g.current=requestAnimationFrame(()=>{ZA.flushSync(()=>{p(b?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof x=="function"&&x(),p(b?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(b?"entered":"exited")},S)})})};return im(()=>{y(r)},[r]),N.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Lg({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=trt({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(ert({transition:t,duration:f,state:d,timingFunction:h}))})}Lg.displayName="@mantine/core/Transition";var S2e={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const nrt={},kQ=ft((e,t)=>{var g,y,b,x;const n=qe("PopoverDropdown",nrt,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=_2e(),h=CTe({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=lo(t,d.floating);return d.disabled?null:_.jsx(y2,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(Lg,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((b=d.transitionProps)==null?void 0:b.exitDuration)=="number"?d.transitionProps.exitDuration:(x=d.transitionProps)==null?void 0:x.duration,children:w=>_.jsx(GF,{active:d.trapFocus,children:_.jsxs(Ie,{...p,...f,variant:u,ref:m,onKeyDownCapture:bZe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:$e(d.width)},i]}),children:[o,_.jsx(IQ,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});kQ.classes=S2e;kQ.displayName="@mantine/core/PopoverDropdown";const rrt={refProp:"ref",popupType:"dialog"},T2e=ft((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=qe("PopoverTarget",rrt,e);if(!Tv(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=_2e(),u=lo(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return N.cloneElement(n,{...o,...l,...a.targetProps,className:so(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});T2e.displayName="@mantine/core/PopoverTarget";function C2e({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=N.useState(0);N.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return bnt(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),im(()=>{t.update()},r),im(()=>{s(o=>o+1)},[e])}function irt(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function srt(e,t){const n=irt(e.middlewares),r=[p2e(e.offset)];return n.shift&&r.push(EQ(typeof n.shift=="boolean"?{limiter:vde(),padding:5}:{limiter:vde(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?wq():wq(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?Eq():Eq(n.inline)),r.push(m2e({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(knt({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function ort(e){const[t,n]=ma({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=AQ({strategy:e.strategy,placement:e.position,middleware:srt(e,()=>s)});return C2e({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),im(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),im(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const art={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Bh("popover"),__staticSelector:"Popover",width:"max-content"},urt=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Bi(t),"--popover-shadow":eQ(n)}});function rc(e){var Te,Fe,st,yt,Dt,Qe;const t=qe("Popover",art,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:b,closeOnClickOutside:x,withinPortal:w,portalProps:S,closeOnEscape:T,clickOutsideEvents:C,trapFocus:I,onClose:D,onOpen:k,onChange:P,zIndex:M,radius:$,shadow:B,id:q,defaultOpened:H,__staticSelector:Y,withRoles:K,disabled:Q,returnFocus:L,variant:z,keepMounted:W,vars:F,floatingStrategy:V,...J}=t,ue=Bt({name:Y,props:t,classes:S2e,classNames:y,styles:b,unstyled:g,rootSelector:"dropdown",vars:F,varsResolver:urt}),we=N.useRef(null),[he,ke]=N.useState(null),[Pe,rt]=N.useState(null),{dir:Re}=$g(),St=Du(q),Je=ort({middlewares:c,width:l,position:x2e(Re,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:we,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:H,onChange:P,onOpen:k,onClose:D,strategy:V});wZe(()=>x&&Je.onClose(),C,[he,Pe]);const It=N.useCallback(_e=>{ke(_e),Je.floating.refs.setReference(_e)},[Je.floating.refs.setReference]),mt=N.useCallback(_e=>{rt(_e),Je.floating.refs.setFloating(_e)},[Je.floating.refs.setFloating]);return _.jsx(Qnt,{value:{returnFocus:L,disabled:Q,controlled:Je.controlled,reference:It,floating:mt,x:Je.floating.x,y:Je.floating.y,arrowX:(st=(Fe=(Te=Je.floating)==null?void 0:Te.middlewareData)==null?void 0:Fe.arrow)==null?void 0:st.x,arrowY:(Qe=(Dt=(yt=Je.floating)==null?void 0:yt.middlewareData)==null?void 0:Dt.arrow)==null?void 0:Qe.y,opened:Je.opened,arrowRef:we,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Je.floating.placement,trapFocus:I,withinPortal:w,portalProps:S,zIndex:M,radius:$,shadow:B,closeOnEscape:T,onClose:Je.onClose,onToggle:Je.onToggle,getTargetId:()=>`${St}-target`,getDropdownId:()=>`${St}-dropdown`,withRoles:K,targetProps:J,__staticSelector:Y,classNames:y,styles:b,unstyled:g,variant:z,keepMounted:W,getStyles:ue},children:n})}rc.Target=T2e;rc.Dropdown=kQ;rc.displayName="@mantine/core/Popover";rc.extend=e=>e;var fh={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const lrt=N.forwardRef(({className:e,...t},n)=>_.jsxs(Ie,{component:"span",className:so(fh.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:fh.bar}),_.jsx("span",{className:fh.bar}),_.jsx("span",{className:fh.bar})]})),crt=N.forwardRef(({className:e,...t},n)=>_.jsxs(Ie,{component:"span",className:so(fh.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:fh.dot}),_.jsx("span",{className:fh.dot}),_.jsx("span",{className:fh.dot})]})),frt=N.forwardRef(({className:e,...t},n)=>_.jsx(Ie,{component:"span",className:so(fh.ovalLoader,e),...t,ref:n})),A2e={bars:lrt,oval:frt,dots:crt},drt={loaders:A2e,type:"oval"},hrt=(e,{size:t,color:n})=>({root:{"--loader-size":qn(t,"loader-size"),"--loader-color":n?$i(n,e):void 0}}),_c=ft((e,t)=>{const n=qe("Loader",drt,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Bt({name:"Loader",props:n,classes:fh,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:hrt});return p?_.jsx(Ie,{...g("root"),ref:t,...m,children:p}):_.jsx(Ie,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});_c.defaultLoaders=A2e;_c.classes=fh;_c.displayName="@mantine/core/Loader";var YF={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const kde={orientation:"horizontal"},prt=(e,{borderWidth:t})=>({group:{"--ai-border-width":$e(t)}}),RQ=ft((e,t)=>{const n=qe("ActionIconGroup",kde,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=qe("ActionIconGroup",kde,e),p=Bt({name:"ActionIconGroup",props:n,classes:YF,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:prt,rootSelector:"group"});return _.jsx(Ie,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});RQ.classes=YF;RQ.displayName="@mantine/core/ActionIconGroup";const mrt={},grt=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":qn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Bi(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},j_=qo((e,t)=>{const n=qe("ActionIcon",mrt,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:b,"data-disabled":x,autoContrast:w,mod:S,...T}=n,C=Bt({name:["ActionIcon",p],props:n,className:r,style:u,classes:YF,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:grt});return _.jsxs(of,{...C("root",{active:!b&&!l&&!x}),...T,unstyled:i,variant:s,size:f,disabled:b||l,ref:t,mod:[{loading:l,disabled:b||x},S],children:[_.jsx(Lg,{mounted:!!l,transition:"slide-down",duration:150,children:I=>_.jsx(Ie,{component:"span",...C("loader",{style:I}),"aria-hidden":!0,children:_.jsx(_c,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(Ie,{component:"span",mod:{loading:l},...C("icon"),children:y})]})});j_.classes=YF;j_.displayName="@mantine/core/ActionIcon";j_.Group=RQ;const I2e=N.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));I2e.displayName="@mantine/core/CloseIcon";var k2e={root:"m_86a44da5","root--subtle":"m_220c80f2"};const yrt={variant:"subtle"},vrt=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":qn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Bi(n),"--cb-icon-size":$e(r)}}),Iv=qo((e,t)=>{const n=qe("CloseButton",yrt,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,b=Bt({name:"CloseButton",props:n,className:a,style:l,classes:k2e,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:vrt});return _.jsxs(of,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...b("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(I2e,{}),i]})});Iv.classes=k2e;Iv.displayName="@mantine/core/CloseButton";function brt(e){return N.Children.toArray(e).filter(Boolean)}var R2e={root:"m_4081bf90"};const xrt={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},_rt=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":wo(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),bi=ft((e,t)=>{const n=qe("Group",xrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:b,...x}=n,w=brt(u),S=w.length,T=wo(l??"md"),I={childWidth:`calc(${100/S}% - (${T} - ${T} / ${S}))`},D=Bt({name:"Group",props:n,stylesCtx:I,className:i,style:s,classes:R2e,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:_rt});return _.jsx(Ie,{...D("root"),ref:t,variant:g,mod:[{grow:h},b],size:y,...x,children:w})});bi.classes=R2e;bi.displayName="@mantine/core/Group";var D2e={root:"m_9814e45f"};const wrt={zIndex:Bh("modal")},Ert=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&dp(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${$e(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Bi(s),"--overlay-z-index":o==null?void 0:o.toString()}}),uR=qo((e,t)=>{const n=qe("Overlay",wrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:b,...x}=n,w=Bt({name:"Overlay",props:n,classes:D2e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Ert});return _.jsx(Ie,{ref:t,...w("root"),mod:[{center:c,fixed:l},b],...x,children:f})});uR.classes=D2e;uR.displayName="@mantine/core/Overlay";const[Srt,Fg]=Ha("ModalBase component was not found in tree");function Trt({opened:e,transitionDuration:t}){const[n,r]=N.useState(e),i=N.useRef(),o=zF()?0:t;return N.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function Crt({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Du(e),[u,l]=N.useState(!1),[c,f]=N.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=Trt({opened:n,transitionDuration:d});return RTe("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),CTe({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Art=N.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:b,...x},w)=>{const{_id:S,titleMounted:T,bodyMounted:C,shouldLockScroll:I,setTitleMounted:D,setBodyMounted:k}=Crt({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(y2,{...c,withinPortal:l,children:_.jsx(Srt,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${S}-title`,getBodyId:()=>`${S}-body`,titleMounted:T,bodyMounted:C,setTitleMounted:D,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(jF,{enabled:I&&f,...b,children:_.jsx(Ie,{ref:w,...x,__vars:{...g,"--mb-z-index":(h||Bh("modal")).toString(),"--mb-shadow":eQ(p),"--mb-padding":wo(m)},children:d})})})})});function Irt(){const e=Fg();return N.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var ZS={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const N2e=N.forwardRef(({className:e,...t},n)=>{const r=Irt(),i=Fg();return _.jsx(Ie,{ref:n,...t,id:r,className:so({[ZS.body]:!i.unstyled},e)})});N2e.displayName="@mantine/core/ModalBaseBody";const P2e=N.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Fg();return _.jsx(Iv,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:so({[ZS.close]:!i.unstyled},e),unstyled:i.unstyled})});P2e.displayName="@mantine/core/ModalBaseCloseButton";const krt=N.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Fg();return _.jsx(Lg,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:so({[ZS.inner]:!a.unstyled},n.className),children:_.jsx(GF,{active:a.opened&&a.trapFocus,children:_.jsx(p2,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:so({[ZS.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),O2e=N.forwardRef(({className:e,...t},n)=>{const r=Fg();return _.jsx(Ie,{component:"header",ref:n,className:so({[ZS.header]:!r.unstyled},e),...t})});O2e.displayName="@mantine/core/ModalBaseHeader";const Rrt={duration:200,timingFunction:"ease",transition:"fade"};function Drt(e){const t=Fg();return{...Rrt,...t.transitionProps,...e}}const $2e=N.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Fg(),o=Drt(t);return _.jsx(Lg,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(uR,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});$2e.displayName="@mantine/core/ModalBaseOverlay";function Nrt(){const e=Fg();return N.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const M2e=N.forwardRef(({className:e,...t},n)=>{const r=Nrt(),i=Fg();return _.jsx(Ie,{component:"h2",ref:n,className:so({[ZS.title]:!i.unstyled},e),...t,id:r})});M2e.displayName="@mantine/core/ModalBaseTitle";function Prt({children:e}){return _.jsx(_.Fragment,{children:e})}const[Ort,v2]=d2({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var gd={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Rde={},$rt=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${il(t)} - ${$e(2)})`}}),KF=ft((e,t)=>{const n=qe("InputDescription",Rde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=qe("InputDescription",Rde,n),p=v2(),m=Bt({name:["InputWrapper",c],props:n,classes:gd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:$rt}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(Ie,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});KF.classes=gd;KF.displayName="@mantine/core/InputDescription";const Mrt={},Lrt=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${il(t)} - ${$e(2)})`}}),XF=ft((e,t)=>{const n=qe("InputError",Mrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Bt({name:["InputWrapper",c],props:n,classes:gd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:Lrt}),m=v2(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(Ie,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});XF.classes=gd;XF.displayName="@mantine/core/InputError";const Dde={labelElement:"label"},Frt=(e,{size:t})=>({label:{"--input-label-size":il(t),"--input-asterisk-color":void 0}}),QF=ft((e,t)=>{const n=qe("InputLabel",Dde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...b}=qe("InputLabel",Dde,n),x=Bt({name:["InputWrapper",m],props:n,classes:gd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:Frt}),w=v2(),S=(w==null?void 0:w.getStyles)||x;return _.jsxs(Ie,{...S("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...b,children:[p,f&&_.jsx("span",{...S("required"),"aria-hidden":!0,children:" *"})]})});QF.classes=gd;QF.displayName="@mantine/core/InputLabel";const Nde={},DQ=ft((e,t)=>{const n=qe("InputPlaceholder",Nde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=qe("InputPlaceholder",Nde,n),p=Bt({name:["InputPlaceholder",l],props:n,classes:gd,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(Ie,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});DQ.classes=gd;DQ.displayName="@mantine/core/InputPlaceholder";function Brt(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const jrt={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},Urt=(e,{size:t})=>({label:{"--input-label-size":il(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${il(t)} - ${$e(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${il(t)} - ${$e(2)})`}}),NQ=ft((e,t)=>{const n=qe("InputWrapper",jrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:b,errorProps:x,labelElement:w,children:S,withAsterisk:T,id:C,required:I,__stylesApiProps:D,mod:k,...P}=n,M=Bt({name:["InputWrapper",f],props:D||n,classes:gd,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Urt}),$={size:l,variant:c,__staticSelector:f},B=Du(C),q=typeof T=="boolean"?T:I,H=(x==null?void 0:x.id)||`${B}-error`,Y=(b==null?void 0:b.id)||`${B}-description`,K=B,Q=!!m&&typeof m!="boolean",L=!!g,z=`${Q?H:""} ${L?Y:""}`,W=z.trim().length>0?z.trim():void 0,F=(y==null?void 0:y.id)||`${B}-label`,V=p&&_.jsx(QF,{labelElement:w,id:F,htmlFor:K,required:q,...$,...y,children:p},"label"),J=L&&_.jsx(KF,{...b,...$,size:(b==null?void 0:b.size)||$.size,id:(b==null?void 0:b.id)||Y,children:g},"description"),ue=_.jsx(N.Fragment,{children:d(S)},"input"),we=Q&&N.createElement(XF,{...x,...$,size:(x==null?void 0:x.size)||$.size,key:"error",id:(x==null?void 0:x.id)||H},m),he=h.map(ke=>{switch(ke){case"label":return V;case"input":return ue;case"description":return J;case"error":return we;default:return null}});return _.jsx(Ort,{value:{getStyles:M,describedBy:W,inputId:K,labelId:F,...Brt(h,{hasDescription:L,hasError:Q})},children:_.jsx(Ie,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...M("root"),...P,children:he})})});NQ.classes=gd;NQ.displayName="@mantine/core/InputWrapper";const zrt={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},Vrt=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":qn(t.size,"input-height"),"--input-fz":il(t.size),"--input-radius":t.radius===void 0?void 0:Bi(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?$e(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?$e(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?qn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Gs=qo((e,t)=>{const n=qe("Input",zrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:b,rightSectionProps:x,rightSectionWidth:w,rightSectionPointerEvents:S,leftSectionPointerEvents:T,variant:C,vars:I,pointer:D,multiline:k,radius:P,id:M,withAria:$,withErrorStyles:B,mod:q,inputSize:H,...Y}=n,{styleProps:K,rest:Q}=F_(Y),L=v2(),z={offsetBottom:L==null?void 0:L.offsetBottom,offsetTop:L==null?void 0:L.offsetTop},W=Bt({name:["Input",l],props:c||n,classes:gd,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:I,varsResolver:Vrt}),F=$?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":L==null?void 0:L.describedBy,id:(L==null?void 0:L.inputId)||M}:{};return _.jsxs(Ie,{...W("wrapper"),...K,...d,mod:[{error:!!h&&B,pointer:D,disabled:p,multiline:k,"data-with-right-section":!!b,"data-with-left-section":!!m},q],variant:C,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(Ie,{component:"input",...Q,...F,ref:t,required:u,mod:{disabled:p,error:!!h&&B},variant:C,__size:H,...W("input")}),b&&_.jsx("div",{...x,"data-position":"right",...W("section",{className:x==null?void 0:x.className,style:x==null?void 0:x.style}),children:b})]})});Gs.classes=gd;Gs.Wrapper=NQ;Gs.Label=QF;Gs.Error=XF;Gs.Description=KF;Gs.Placeholder=DQ;Gs.displayName="@mantine/core/Input";function Hrt(e,t,n){const r=qe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:b,size:x,style:w,inputContainer:S,inputWrapperOrder:T,withAsterisk:C,variant:I,vars:D,mod:k,...P}=r,{styleProps:M,rest:$}=F_(P),B={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:x,style:w,inputContainer:S,inputWrapperOrder:T,withAsterisk:C,variant:I,id:b,mod:k,...y};return{...$,classNames:u,styles:l,unstyled:f,wrapperProps:{...B,...M},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:x,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:I,id:b}}}const qrt={__staticSelector:"InputBase",withAria:!0},yd=qo((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Hrt("InputBase",qrt,e);return _.jsx(Gs.Wrapper,{...r,children:_.jsx(Gs,{...n,...i,ref:t})})});yd.classes={...Gs.classes,...Gs.Wrapper.classes};yd.displayName="@mantine/core/InputBase";const Wrt={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var L2e={root:"m_8bffd616"};const Grt={},qt=qo((e,t)=>{const n=qe("Flex",Grt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=Bt({name:"Flex",classes:L2e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),b=co(),x=UD(),w=jTe({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:b,data:Wrt});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(L_,{selector:`.${x}`,styles:w.styles,media:w.media}),_.jsx(Ie,{ref:t,...y("root",{className:x,style:Sv(w.inlineStyles)}),...g})]})});qt.classes=L2e;qt.displayName="@mantine/core/Flex";function Yrt(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function Krt({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=N.useRef(),[s,o]=N.useState(!1),[a,u]=N.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=N.useRef(),d=N.useRef();return N.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),N.useEffect(()=>{if(t){const h=p=>{Yrt(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),VZe(()=>{PTe()!=="test"&&o(!0)},20,{autoInvoke:!0}),HZe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var F2e={root:"m_96b553a6"};const Xrt={},Qrt=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),PQ=ft((e,t)=>{const n=qe("FloatingIndicator",Xrt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=Bt({name:"FloatingIndicator",classes:F2e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qrt}),g=N.useRef(null),{initialized:y,hidden:b}=Krt({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),x=lo(t,g);return!l||!c?null:_.jsx(Ie,{ref:x,mod:[{initialized:y,hidden:b},d],...m("root"),...p})});PQ.displayName="@mantine/core/FloatingIndicator";PQ.classes=F2e;const[Jrt,OQ]=Ha("Accordion component was not found in the tree");function JF({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:$e(t),height:$e(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}JF.displayName="@mantine/core/AccordionChevron";const[Zrt,B2e]=Ha("Accordion.Item component was not found in the tree");var VD={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const eit={},$Q=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=qe("AccordionControl",eit,e),{value:m}=B2e(),g=OQ(),y=g.isItemActive(m),b=typeof g.order=="number",x=`h${g.order}`,w=_.jsxs(of,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:S=>{l==null||l(S),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:ZX({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(Ie,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(Ie,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return b?_.jsx(x,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});$Q.displayName="@mantine/core/AccordionControl";$Q.classes=VD;const tit={},MQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=qe("AccordionItem",tit,e),c=OQ();return _.jsx(Zrt,{value:{value:a},children:_.jsx(Ie,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});MQ.displayName="@mantine/core/AccordionItem";MQ.classes=VD;const nit={},LQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=qe("AccordionPanel",nit,e),{value:l}=B2e(),c=OQ();return _.jsx(HF,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});LQ.displayName="@mantine/core/AccordionPanel";LQ.classes=VD;const rit={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(JF,{})},iit=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:$e(n),"--accordion-radius":r===void 0?void 0:Bi(r)}});function $l(e){const t=qe("Accordion",rit,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:b,order:x,chevron:w,variant:S,radius:T,...C}=t,I=Du(h),[D,k]=ma({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),P=B=>Array.isArray(D)?D.includes(B):B===D,M=B=>{const q=Array.isArray(D)?D.includes(B)?D.filter(H=>H!==B):[...D,B]:B===D?null:B;k(q)},$=Bt({name:"Accordion",classes:VD,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:iit});return _.jsx(Jrt,{value:{isItemActive:P,onChange:M,getControlId:u$(`${I}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:u$(`${I}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:x,chevron:w,loop:p,getStyles:$,variant:S,unstyled:o},children:_.jsx(Ie,{...$("root"),id:I,...C,variant:S,"data-accordion":!0,children:u})})}const sit=e=>e;$l.extend=sit;$l.classes=VD;$l.displayName="@mantine/core/Accordion";$l.Item=MQ;$l.Panel=LQ;$l.Control=$Q;$l.Chevron=JF;var j2e={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const oit={},ait=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Bi(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},W0=ft((e,t)=>{const n=qe("Alert",oit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:b,autoContrast:x,...w}=n,S=Bt({name:"Alert",classes:j2e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ait}),T=Du(h),C=f&&`${T}-title`||void 0,I=`${T}-body`;return _.jsx(Ie,{id:T,...S("root",{variant:b}),variant:b,ref:t,...w,role:"alert","aria-describedby":I,"aria-labelledby":C,children:_.jsxs("div",{...S("wrapper"),children:[p&&_.jsx("div",{...S("icon"),children:p}),_.jsxs("div",{...S("body"),children:[f&&_.jsx("div",{...S("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:C,...S("label"),children:f})}),d&&_.jsx("div",{id:I,...S("message"),"data-variant":b,children:d})]}),m&&_.jsx(Iv,{...S("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});W0.classes=j2e;W0.displayName="@mantine/core/Alert";var U2e={root:"m_b6d8b162"};function uit(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const lit={inherit:!1},cit=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":il(i),"--text-lh":TTe(i),"--text-gradient":t==="gradient"?mq(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?$i(s,e):void 0}}),nt=qo((e,t)=>{const n=qe("Text",lit,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:b,...x}=n,w=Bt({name:["Text",l],props:n,classes:U2e,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:cit});return _.jsx(Ie,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":uit(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:b,...x})});nt.classes=U2e;nt.displayName="@mantine/core/Text";var z2e={root:"m_849cf0da"};const fit={underline:"hover"},kv=qo((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=qe("Anchor",fit,e);return _.jsx(nt,{component:"a",ref:t,className:so({[z2e.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});kv.classes=z2e;kv.displayName="@mantine/core/Anchor";const[dit,b2]=Ha("AppShell was not found in tree");var Rv={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const hit={},FQ=ft((e,t)=>{const n=qe("AppShellAside",hit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=b2();return h.disabled?null:_.jsx(Ie,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});FQ.classes=Rv;FQ.displayName="@mantine/core/AppShellAside";const pit={},BQ=ft((e,t)=>{var p;const n=qe("AppShellFooter",pit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=b2();return h.disabled?null:_.jsx(Ie,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:so({[jF.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});BQ.classes=Rv;BQ.displayName="@mantine/core/AppShellFooter";const mit={},jQ=ft((e,t)=>{var p;const n=qe("AppShellHeader",mit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=b2();return h.disabled?null:_.jsx(Ie,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:so({[jF.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});jQ.classes=Rv;jQ.displayName="@mantine/core/AppShellHeader";const git={},UQ=ft((e,t)=>{const n=qe("AppShellMain",git,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=b2();return _.jsx(Ie,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});UQ.classes=Rv;UQ.displayName="@mantine/core/AppShellMain";function HD(e){return typeof e=="object"?e.base:e}function qD(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function WD(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function yit({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),qD(s)){const f=$e(HD(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(WD(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=$e(s.base),e["--app-shell-aside-offset"]=$e(s.base)),Wi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=$e(s[f]),t[f]["--app-shell-aside-offset"]=$e(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=tQ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function vit({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(qD(r)){const o=$e(HD(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}WD(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=$e(r.base),s&&(e["--app-shell-footer-offset"]=$e(r.base))),Wi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=$e(r[o]),s&&(t[o]["--app-shell-footer-offset"]=$e(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function bit({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(qD(r)){const o=$e(HD(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}WD(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=$e(r.base),s&&(e["--app-shell-header-offset"]=$e(r.base))),Wi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=$e(r[o]),s&&(t[o]["--app-shell-header-offset"]=$e(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function xit({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),qD(s)){const f=$e(HD(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(WD(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=$e(s.base),e["--app-shell-navbar-offset"]=$e(s.base)),Wi(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=$e(s[f]),t[f]["--app-shell-navbar-offset"]=$e(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=tQ(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function $7(e){return Number(e)===0?"0px":wo(e)}function _it({padding:e,baseStyles:t,minMediaStyles:n}){qD(e)&&(t["--app-shell-padding"]=$7(HD(e))),WD(e)&&(e.base&&(t["--app-shell-padding"]=$7(e.base)),Wi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=$7(e[r]))}))}function wit({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};xit({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),yit({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),bit({baseStyles:u,minMediaStyles:o,header:t}),vit({baseStyles:u,minMediaStyles:o,footer:n}),_it({baseStyles:u,minMediaStyles:o,padding:i});const l=sR(Wi(o),s).map(d=>({query:`(min-width: ${a$(d.px)})`,styles:o[d.value]})),c=sR(Wi(a),s).map(d=>({query:`(max-width: ${a$(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function Eit({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=co(),o=Cv(),{media:a,baseStyles:u}=wit({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(L_,{media:a,styles:u,selector:o.cssVariablesSelector})}const Sit={},zQ=ft((e,t)=>{const n=qe("AppShellNavbar",Sit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=b2();return h.disabled?null:_.jsx(Ie,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});zQ.classes=Rv;zQ.displayName="@mantine/core/AppShellNavbar";const Tit={},VQ=qo((e,t)=>{const n=qe("AppShellSection",Tit,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=b2();return _.jsx(Ie,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});VQ.classes=Rv;VQ.displayName="@mantine/core/AppShellSection";function Cit({transitionDuration:e,disabled:t}){const[n,r]=N.useState(!0),i=N.useRef(),s=N.useRef();return RTe("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),M_(()=>{N.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const Ait={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Bh("app")},Iit=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Oi=ft((e,t)=>{const n=qe("AppShell",Ait,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:b,footer:x,offsetScrollbars:w,mod:S,...T}=n,C=Bt({name:"AppShell",classes:Rv,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Iit}),I=Cit({disabled:y,transitionDuration:d});return _.jsxs(dit,{value:{getStyles:C,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(Eit,{navbar:l,header:p,aside:b,footer:x,padding:f}),_.jsx(Ie,{ref:t,...C("root"),mod:[{resizing:I,layout:g,disabled:y},S],...T})]})});Oi.classes=Rv;Oi.displayName="@mantine/core/AppShell";Oi.Navbar=zQ;Oi.Header=jQ;Oi.Main=UQ;Oi.Aside=FQ;Oi.Footer=BQ;Oi.Section=VQ;function V2e(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>V2e(t))}:e}function H2e(e){return e?e.map(t=>V2e(t)):[]}function HQ(e){return e.reduce((t,n)=>"group"in n?{...t,...HQ(n.items)}:(t[n.value]=n,t),{})}var lc={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const kit={error:null},Rit=(e,{size:t})=>({chevron:{"--combobox-chevron-size":qn(t,"combobox-chevron-size")}}),qQ=ft((e,t)=>{const n=qe("ComboboxChevron",kit,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Bt({name:"ComboboxChevron",classes:lc,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:Rit,rootSelector:"chevron"});return _.jsx(Ie,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});qQ.classes=lc;qQ.displayName="@mantine/core/ComboboxChevron";const[Dit,vd]=Ha("Combobox component was not found in tree"),q2e=N.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(Iv,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));q2e.displayName="@mantine/core/ComboboxClearButton";const Nit={},WQ=ft((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=qe("ComboboxDropdown",Nit,e),u=vd();return _.jsx(rc.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});WQ.classes=lc;WQ.displayName="@mantine/core/ComboboxDropdown";const Pit={refProp:"ref"},W2e=ft((e,t)=>{const{children:n,refProp:r}=qe("ComboboxDropdownTarget",Pit,e);if(vd(),!Tv(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(rc.Target,{ref:t,refProp:r,children:n})});W2e.displayName="@mantine/core/ComboboxDropdownTarget";const Oit={},GQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("ComboboxEmpty",Oit,e),u=vd();return _.jsx(Ie,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});GQ.classes=lc;GQ.displayName="@mantine/core/ComboboxEmpty";function YQ({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=vd(),[a,u]=N.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const $it={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},G2e=ft((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=qe("ComboboxEventsTarget",$it,e);if(!Tv(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=vd(),f=YQ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return N.cloneElement(n,{...f,...l,[r]:lo(t,c.store.targetRef,n==null?void 0:n.ref)})});G2e.displayName="@mantine/core/ComboboxEventsTarget";const Mit={},KQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("ComboboxFooter",Mit,e),u=vd();return _.jsx(Ie,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});KQ.classes=lc;KQ.displayName="@mantine/core/ComboboxFooter";const Lit={},XQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=qe("ComboboxGroup",Lit,e),c=vd();return _.jsxs(Ie,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});XQ.classes=lc;XQ.displayName="@mantine/core/ComboboxGroup";const Fit={},QQ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("ComboboxHeader",Fit,e),u=vd();return _.jsx(Ie,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});QQ.classes=lc;QQ.displayName="@mantine/core/ComboboxHeader";function Y2e({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Y2e.displayName="@mantine/core/ComboboxHiddenInput";const Bit={},JQ=ft((e,t)=>{const n=qe("ComboboxOption",Bit,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=vd(),b=N.useId(),x=l||b;return _.jsx(Ie,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:x,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var S;h?w.preventDefault():((S=y.onOptionSubmit)==null||S.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});JQ.classes=lc;JQ.displayName="@mantine/core/ComboboxOption";const jit={},ZQ=ft((e,t)=>{const n=qe("ComboboxOptions",jit,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=vd(),d=Du(a);return N.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(Ie,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});ZQ.classes=lc;ZQ.displayName="@mantine/core/ComboboxOptions";const Uit={withAriaAttributes:!0,withKeyboardNavigation:!0},eJ=ft((e,t)=>{const n=qe("ComboboxSearch",Uit,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=vd(),h=d.getStyles("search"),p=YQ({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(Gs,{ref:lo(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});eJ.classes=lc;eJ.displayName="@mantine/core/ComboboxSearch";const zit={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},K2e=ft((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=qe("ComboboxTarget",zit,e);if(!Tv(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=vd(),f=YQ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=N.cloneElement(n,{...f,...l});return _.jsx(rc.Target,{ref:lo(t,c.store.targetRef),children:d})});K2e.displayName="@mantine/core/ComboboxTarget";function Vit(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Hit(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function qit(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function tJ({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ma({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=N.useRef(null),c=N.useRef(-1),f=N.useRef(null),d=N.useRef(null),h=N.useRef(-1),p=N.useRef(-1),m=N.useRef(-1),g=N.useCallback((H="unknown")=>{a||(u(!0),i==null||i(H))},[u,i,a]),y=N.useCallback((H="unknown")=>{a&&(u(!1),r==null||r(H))},[u,r,a]),b=N.useCallback((H="unknown")=>{a?y(H):g(H)},[y,g,a]),x=N.useCallback(()=>{const H=document.querySelector(`#${l.current} [data-combobox-selected]`);H==null||H.removeAttribute("data-combobox-selected"),H==null||H.removeAttribute("aria-selected")},[]),w=N.useCallback(H=>{const Y=document.getElementById(l.current),K=Y==null?void 0:Y.querySelectorAll("[data-combobox-option]");if(!K)return null;const Q=H>=K.length?0:H<0?K.length-1:H;return c.current=Q,K!=null&&K[Q]&&!K[Q].hasAttribute("data-combobox-disabled")?(x(),K[Q].setAttribute("data-combobox-selected","true"),K[Q].setAttribute("aria-selected","true"),K[Q].scrollIntoView({block:"nearest",behavior:o}),K[Q].id):null},[o,x]),S=N.useCallback(()=>{const H=document.querySelector(`#${l.current} [data-combobox-active]`);if(H){const Y=document.querySelectorAll(`#${l.current} [data-combobox-option]`),K=Array.from(Y).findIndex(Q=>Q===H);return w(K)}return w(0)},[w]),T=N.useCallback(()=>w(Hit(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),C=N.useCallback(()=>w(Vit(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),I=N.useCallback(()=>w(qit(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),D=N.useCallback((H="selected",Y)=>{m.current=window.setTimeout(()=>{var L;const K=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Q=Array.from(K).findIndex(z=>z.hasAttribute(`data-combobox-${H}`));c.current=Q,Y!=null&&Y.scrollIntoView&&((L=K[Q])==null||L.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=N.useCallback(()=>{c.current=-1,x()},[x]),P=N.useCallback(()=>{const H=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Y=H==null?void 0:H[c.current];Y==null||Y.click()},[]),M=N.useCallback(H=>{l.current=H},[]),$=N.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),B=N.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),q=N.useCallback(()=>c.current,[]);return N.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:b,selectedOptionIndex:c.current,getSelectedOptionIndex:q,selectOption:w,selectFirstOption:I,selectActiveOption:S,selectNextOption:T,selectPreviousOption:C,resetSelectedOption:k,updateSelectedOptionIndex:D,listId:l.current,setListId:M,clickSelectedOption:P,searchRef:f,focusSearchInput:$,targetRef:d,focusTarget:B}}const Wit={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Git=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":il(t),"--combobox-option-padding":qn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:$e(n),"--combobox-option-fz":il(t),"--combobox-option-padding":qn(t,"combobox-option-padding")}});function Pr(e){const t=qe("Combobox",Wit,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=tJ(),y=o||g,b=Bt({name:h||"Combobox",classes:lc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:Git}),x=()=>{l==null||l(),y.closeDropdown()};return _.jsx(Dit,{value:{getStyles:b,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(rc,{opened:y.dropdownOpened,...m,onClose:x,withRoles:!1,unstyled:i,children:s})})}const Yit=e=>e;Pr.extend=Yit;Pr.classes=lc;Pr.displayName="@mantine/core/Combobox";Pr.Target=K2e;Pr.Dropdown=WQ;Pr.Options=ZQ;Pr.Option=JQ;Pr.Search=eJ;Pr.Empty=GQ;Pr.Chevron=qQ;Pr.Footer=KQ;Pr.Header=QQ;Pr.EventsTarget=G2e;Pr.DropdownTarget=W2e;Pr.Group=XQ;Pr.ClearButton=q2e;Pr.HiddenInput=Y2e;var X2e={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Q2e=X2e,ZF=N.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:b,mod:x,...w},S)=>{const T=Bt({name:e,props:t,className:n,style:y,classes:X2e,classNames:r,styles:i,unstyled:s});return _.jsx(Ie,{...T("root"),ref:S,__vars:{"--label-fz":il(d),"--label-lh":qn(d,"label-lh")},mod:[{"label-position":h},x],variant:g,size:d,...w,children:_.jsxs(Ie,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,_.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(Ie,{component:m,htmlFor:m==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(Gs.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(Gs.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});ZF.displayName="@mantine/core/InlineInput";const J2e=N.createContext(null),Kit=J2e.Provider,Z2e=()=>N.useContext(J2e),[Xit,Qit]=d2();var eCe={card:"m_26775b0a"};const Jit={withBorder:!0},Zit=(e,{radius:t})=>({card:{"--card-radius":Bi(t)}}),nJ=ft((e,t)=>{const n=qe("CheckboxCard",Jit,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=Bt({name:"CheckboxCard",classes:eCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Zit,rootSelector:"card"}),g=Z2e(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(Xit,{value:{checked:y},children:_.jsx(of,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:b=>{h==null||h(b),g==null||g.onChange(d||"")}})})});nJ.displayName="@mantine/core/CheckboxCard";nJ.classes=eCe;function rJ({children:e,role:t}){const n=v2();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const est={},iJ=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=qe("CheckboxGroup",est,e),[c,f]=ma({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(Kit,{value:{value:c,onChange:d,size:s},children:_.jsx(Gs.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(rJ,{role:"group",children:a})})})});iJ.classes=Gs.Wrapper.classes;iJ.displayName="@mantine/core/CheckboxGroup";function tCe({size:e,style:t,...n}){const r=e!==void 0?{width:$e(e),height:$e(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function nCe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(tCe,{...t})}var rCe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const tst={icon:nCe},nst=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Am({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":qn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Bi(t),"--checkbox-color":s==="outline"?u:$i(n,e),"--checkbox-icon-color":i?$i(i,e):h2(o,e)?Av({color:n,theme:e,autoContrast:o}):void 0}}},sJ=ft((e,t)=>{const n=qe("CheckboxIndicator",tst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:b,...x}=n,w=l,S=Bt({name:"CheckboxIndicator",classes:rCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nst,rootSelector:"indicator"}),T=Qit(),C=typeof m=="boolean"||typeof c=="boolean"?m||c:(T==null?void 0:T.checked)||!1;return _.jsx(Ie,{ref:t,...S("indicator",{variant:y}),variant:y,mod:[{checked:C,disabled:b},g],...x,children:_.jsx(w,{indeterminate:c,...S("icon")})})});sJ.displayName="@mantine/core/CheckboxIndicator";sJ.classes=rCe;var iCe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const rst={labelPosition:"right",icon:nCe},ist=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Am({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":qn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Bi(t),"--checkbox-color":s==="outline"?u:$i(n,e),"--checkbox-icon-color":i?$i(i,e):h2(o,e)?Av({color:n,theme:e,autoContrast:o}):void 0}}},Gl=ft((e,t)=>{const n=qe("Checkbox",rst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:b,error:x,disabled:w,variant:S,indeterminate:T,icon:C,rootRef:I,iconColor:D,onChange:k,autoContrast:P,mod:M,...$}=n,B=Z2e(),q=d||(B==null?void 0:B.size),H=C,Y=Bt({name:"Checkbox",props:n,classes:iCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ist}),{styleProps:K,rest:Q}=F_($),L=Du(f),z=B?{checked:B.value.includes(Q.value),onChange:W=>{B.onChange(W),k==null||k(W)}}:{};return _.jsx(ZF,{...Y("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:L,size:q,labelPosition:y,label:c,description:b,error:x,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:S,ref:I,mod:M,...K,...p,children:_.jsxs(Ie,{...Y("inner"),mod:{"data-label-position":y},children:[_.jsx(Ie,{component:"input",id:L,ref:t,checked:g,disabled:w,mod:{error:!!x,indeterminate:T},...Y("input",{focusable:!0,variant:S}),onChange:k,...Q,...z,type:"checkbox"}),_.jsx(H,{indeterminate:T,...Y("icon")})]})})});Gl.classes={...iCe,...Q2e};Gl.displayName="@mantine/core/Checkbox";Gl.Group=iJ;Gl.Indicator=sJ;Gl.Card=nJ;function eT(e){return"group"in e}function sCe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;eT(o)&&i.push({group:o.group,items:sCe({options:o.items,search:t,limit:n-i.length})}),eT(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function sst(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function oCe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(eT(n))oCe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function ost(e,t){return Array.isArray(e)?e.includes(t):e===t}function aCe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!eT(e)){const a=ost(n,e.value),u=t&&a&&_.jsx(tCe,{className:lc.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Pr.Option,{value:e.value,disabled:e.disabled,className:so({[lc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(aCe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Pr.Group,{label:e.group,children:o})}function uCe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){oCe(e);const x=typeof i=="string"?(r||sCe)({options:e,search:u?i:"",limit:s??1/0}):e,w=sst(x),S=x.map(T=>_.jsx(aCe,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},eT(T)?T.group:T.value));return _.jsx(Pr.Dropdown,{hidden:t||n&&w,children:_.jsxs(Pr.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(lg.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:S}):S,w&&d&&_.jsx(Pr.Empty,{children:d})]})})}var lCe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const ast={},ust=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":qn(s,"badge-height"),"--badge-padding-x":qn(s,"badge-padding-x"),"--badge-fz":qn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Bi(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?$i(n,e):void 0}}},v1=qo((e,t)=>{const n=qe("Badge",ast,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:b,mod:x,...w}=n,S=Bt({name:"Badge",props:n,classes:lCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ust});return _.jsxs(Ie,{variant:m,mod:[{block:g,circle:b},x],...S("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...S("section"),"data-position":"left",children:d}),_.jsx("span",{...S("label"),children:p}),h&&_.jsx("span",{...S("section"),"data-position":"right",children:h})]})});v1.classes=lCe;v1.displayName="@mantine/core/Badge";var e5={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Pde={orientation:"horizontal"},lst=(e,{borderWidth:t})=>({group:{"--button-border-width":$e(t)}}),oJ=ft((e,t)=>{const n=qe("ButtonGroup",Pde,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=qe("ButtonGroup",Pde,e),p=Bt({name:"ButtonGroup",props:n,classes:e5,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:lst,rootSelector:"group"});return _.jsx(Ie,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});oJ.classes=e5;oJ.displayName="@mantine/core/ButtonGroup";const cst={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${$e(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},fst={},dst=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":qn(s,"button-height"),"--button-padding-x":qn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?il(s.replace("compact-","")):il(s),"--button-radius":t===void 0?void 0:Bi(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},gn=qo((e,t)=>{const n=qe("Button",fst,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:b,unstyled:x,"data-disabled":w,autoContrast:S,mod:T,...C}=n,I=Bt({name:"Button",props:n,classes:e5,className:s,style:r,classNames:y,styles:b,unstyled:x,vars:i,varsResolver:dst}),D=!!l,k=!!c;return _.jsxs(of,{ref:t,...I("root",{active:!a&&!p&&!w}),unstyled:x,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":D,"with-right-section":k},T],...C,children:[_.jsx(Lg,{mounted:!!p,transition:cst,duration:150,children:P=>_.jsx(Ie,{component:"span",...I("loader",{style:P}),"aria-hidden":!0,children:_.jsx(_c,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...I("inner"),children:[l&&_.jsx(Ie,{component:"span",...I("section"),mod:{position:"left"},children:l}),_.jsx(Ie,{component:"span",mod:{loading:p},...I("label"),children:u}),c&&_.jsx(Ie,{component:"span",...I("section"),mod:{position:"right"},children:c})]})]})});gn.classes=e5;gn.displayName="@mantine/core/Button";gn.Group=oJ;const[hst,pst]=Ha("Card component was not found in tree");var aJ={root:"m_e615b15f",section:"m_599a2148"};const mst={},t5=qo((e,t)=>{const n=qe("CardSection",mst,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=pst();return _.jsx(Ie,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});t5.classes=aJ;t5.displayName="@mantine/core/CardSection";const gst={},yst=(e,{padding:t})=>({root:{"--card-padding":wo(t)}}),x2=qo((e,t)=>{const n=qe("Card",gst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Bt({name:"Card",props:n,classes:aJ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yst}),h=N.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===t5?N.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(hst,{value:{getStyles:d},children:_.jsx(p2,{ref:t,unstyled:a,...d("root"),...f,children:p})})});x2.classes=aJ;x2.displayName="@mantine/core/Card";x2.Section=t5;var cCe={root:"m_4451eb3a"};const vst={},Ua=qo((e,t)=>{const n=qe("Center",vst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Bt({name:"Center",props:n,classes:cCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(Ie,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Ua.classes=cCe;Ua.displayName="@mantine/core/Center";var fCe={root:"m_b183c0a2"};const bst={},xst=(e,{color:t})=>({root:{"--code-bg":t?$i(t,e):void 0}}),QI=ft((e,t)=>{const n=qe("Code",bst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Bt({name:"Code",props:n,classes:fCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xst});return _.jsx(Ie,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});QI.classes=fCe;QI.displayName="@mantine/core/Code";var dCe={root:"m_7485cace"};const _st={},wst=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:qn(t,"container-size")}}),dg=ft((e,t)=>{const n=qe("Container",_st,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Bt({name:"Container",classes:dCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wst});return _.jsx(Ie,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});dg.classes=dCe;dg.displayName="@mantine/core/Container";var hCe={root:"m_3eebeb36",label:"m_9e365f20"};const Est={orientation:"horizontal"},Sst=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?$i(t,e):void 0,"--divider-border-style":n,"--divider-size":qn(r,"divider-size")}}),_2=ft((e,t)=>{const n=qe("Divider",Est,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Bt({name:"Divider",classes:hCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Sst});return _.jsx(Ie,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(Ie,{component:"span",mod:{position:d},...m("label"),children:f})})});_2.classes=hCe;_2.displayName="@mantine/core/Divider";function Tst({open:e,close:t,openDelay:n,closeDelay:r}){const i=N.useRef(-1),s=N.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return N.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[Cst,pCe]=Ha("Grid component was not found in tree"),Tq=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Ode=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":Tq(e,t),$de=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Mde=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function Ast({span:e,order:t,offset:n,selector:r}){var d;const i=co(),s=pCe(),a=ch(e)===void 0?12:ch(e),u=Sv({"--col-order":(d=ch(t))==null?void 0:d.toString(),"--col-flex-grow":$de(a,s.grow),"--col-flex-basis":Tq(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Ode(a,s.columns,s.grow),"--col-offset":Mde(ch(n),s.columns)}),l=Wi(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=$de(e[p],s.grow),h[p]["--col-flex-basis"]=Tq(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Ode(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Mde(n[p],s.columns)),h},{}),f=sR(Wi(l),i).filter(h=>Wi(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(L_,{styles:u,media:f,selector:r})}var uJ={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const Ist={span:12},lJ=ft((e,t)=>{const n=qe("GridCol",Ist,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=pCe(),h=UD();return _.jsxs(_.Fragment,{children:[_.jsx(Ast,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(Ie,{ref:t,...d.getStyles("col",{className:so(i,h),style:s,classNames:r,styles:o}),...f})]})});lJ.classes=uJ;lJ.displayName="@mantine/core/GridCol";function kst({gutter:e,selector:t}){const n=co(),r=Sv({"--grid-gutter":wo(ch(e))}),i=Wi(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=wo(e[u])),a),{}),o=sR(Wi(i),n).filter(a=>Wi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(L_,{styles:r,media:o,selector:t})}const Rst={gutter:"md",grow:!1,columns:12},Dst=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),qc=ft((e,t)=>{const n=qe("Grid",Rst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=Bt({name:"Grid",classes:uJ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Dst}),y=UD();return _.jsxs(Cst,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(kst,{selector:`.${y}`,...n}),_.jsx(Ie,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});qc.classes=uJ;qc.displayName="@mantine/core/Grid";qc.Col=lJ;var mCe={root:"m_9e117634"};const Nst={},Pst=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Bi(t),"--image-object-fit":n}}),Dv=qo((e,t)=>{const n=qe("Image",Nst,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=N.useState(!c);N.useEffect(()=>y(!c),[c]);const b=Bt({name:"Image",classes:mCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Pst});return g&&h?_.jsx(Ie,{component:"img",ref:t,src:h,...b("root"),onError:l,mod:["fallback",p],...m}):_.jsx(Ie,{component:"img",ref:t,...b("root"),src:c,onError:x=>{l==null||l(x),y(!0)},mod:p,...m})});Dv.classes=mCe;Dv.displayName="@mantine/core/Image";function Cq(){return Cq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cq.apply(null,arguments)}function Ost(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var $st=N.useLayoutEffect,Mst=function(t){var n=N.useRef(t);return $st(function(){n.current=t}),n},Lde=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Lst=function(t,n){var r=N.useRef();return N.useCallback(function(i){t.current=i,r.current&&Lde(r.current,null),r.current=n,n&&Lde(n,i)},[n])},Fde={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Fst=function(t){Object.keys(Fde).forEach(function(n){t.style.setProperty(n,Fde[n],"important")})},Bde=Fst,Uu=null,jde=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Bst(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Uu||(Uu=document.createElement("textarea"),Uu.setAttribute("tabindex","-1"),Uu.setAttribute("aria-hidden","true"),Bde(Uu)),Uu.parentNode===null&&document.body.appendChild(Uu);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Uu.style[h]=o[h]}),Bde(Uu),Uu.value=t;var u=jde(Uu,e);Uu.value=t,u=jde(Uu,e),Uu.value="x";var l=Uu.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Ude=function(){},jst=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},Ust=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],zst=!!document.documentElement.currentStyle,Vst=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=jst(Ust,n),i=r.boxSizing;if(i==="")return null;zst&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},Hst=Vst;function gCe(e,t,n){var r=Mst(n);N.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var qst=function(t){gCe(window,"resize",t)},Wst=function(t){gCe(document.fonts,"loadingdone",t)},Gst=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Yst=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Ude:o,u=t.onHeightChange,l=u===void 0?Ude:u,c=Ost(t,Gst),f=c.value!==void 0,d=N.useRef(null),h=Lst(d,n),p=N.useRef(0),m=N.useRef(),g=function(){var x=d.current,w=r&&m.current?m.current:Hst(x);if(w){m.current=w;var S=Bst(w,x.value||x.placeholder||"x",s,i),T=S[0],C=S[1];p.current!==T&&(p.current=T,x.style.setProperty("height",T+"px","important"),l(T,{rowHeight:C}))}},y=function(x){f||g(),a(x)};return N.useLayoutEffect(g),qst(g),Wst(g),N.createElement("textarea",Cq({},c,{onChange:y,ref:h}))},Kst=N.forwardRef(Yst);const Xst={},cJ=ft((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=qe("Textarea",Xst,e),u=n&&PTe()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(yd,{component:u?Kst:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});cJ.classes=yd.classes;cJ.displayName="@mantine/core/Textarea";const[Qst,Jst]=Ha("List component was not found in tree");var fJ={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const Zst={},dJ=ft((e,t)=>{const n=qe("ListItem",Zst,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=Jst(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(Ie,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});dJ.classes=fJ;dJ.displayName="@mantine/core/ListItem";const eot={type:"unordered"},tot=(e,{size:t,spacing:n})=>({root:{"--list-fz":il(t),"--list-lh":TTe(t),"--list-spacing":wo(n)}}),xh=ft((e,t)=>{const n=qe("List",eot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,b=Bt({name:"List",classes:fJ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tot});return _.jsx(Qst,{value:{center:p,icon:d,getStyles:b},children:_.jsx(Ie,{...b("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});xh.classes=fJ;xh.displayName="@mantine/core/List";xh.Item=dJ;var yCe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const zde={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Bh("overlay")},not=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),uf=ft((e,t)=>{const n=qe("LoadingOverlay",zde,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=co(),g=Bt({name:"LoadingOverlay",classes:yCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:not}),y={...zde.overlayProps,...f};return _.jsx(Lg,{transition:"fade",...l,mounted:!!d,children:b=>_.jsxs(Ie,{...g("root",{style:b}),ref:t,...p,children:[_.jsx(_c,{...g("loader"),unstyled:a,...c}),_.jsx(uR,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(uR,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});uf.classes=yCe;uf.displayName="@mantine/core/LoadingOverlay";const[rot,GD]=Ha("Menu component was not found in the tree");var w2={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const iot={},hJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("MenuDivider",iot,e),u=GD();return _.jsx(Ie,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});hJ.classes=w2;hJ.displayName="@mantine/core/MenuDivider";const sot={},pJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=qe("MenuDropdown",sot,e),f=N.useRef(null),d=GD(),h=g=>{var y,b;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(b=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||b.focus())},p=N0(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=N0(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(rc.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:lo(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});pJ.classes=w2;pJ.displayName="@mantine/core/MenuDropdown";const oot={},mJ=qo((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=qe("MenuItem",oot,e),p=GD(),m=co(),{dir:g}=$g(),y=N.useRef(),b=p.getItemIndex(y.current),x=h,w=N0(x.onMouseLeave,()=>p.setHovered(-1)),S=N0(x.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),T=N0(x.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),C=N0(x.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),I=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,D=a?Am({color:a,theme:m}):null;return _.jsxs(of,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:C,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:lo(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===b?!0:void 0,onMouseEnter:S,onMouseLeave:w,onClick:T,onKeyDown:ZX({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:x.onKeydown}),__vars:{"--menu-item-color":D!=null&&D.isThemeColor&&(D==null?void 0:D.shade)===void 0?`var(--mantine-color-${D.color}-6)`:I==null?void 0:I.color,"--menu-item-hover":I==null?void 0:I.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});mJ.classes=w2;mJ.displayName="@mantine/core/MenuItem";const aot={},gJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("MenuLabel",aot,e),u=GD();return _.jsx(Ie,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});gJ.classes=w2;gJ.displayName="@mantine/core/MenuLabel";const uot={refProp:"ref"},vCe=N.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=qe("MenuTarget",uot,e);if(!Tv(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=GD(),o=N0(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=N0(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=N0(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(rc.Target,{refProp:r,popupType:"menu",ref:t,...i,children:N.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});vCe.displayName="@mantine/core/MenuTarget";const lot={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Yu(e){const t=qe("Menu",lot,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:b,vars:x,menuItemTabIndex:w,keepMounted:S,...T}=t,C=Bt({name:"Menu",classes:w2,props:t,classNames:m,styles:g,unstyled:y}),[I,{setHovered:D,resetHovered:k}]=_Ze(),[P,M]=ma({value:s,defaultValue:o,finalValue:!1,onChange:u}),[$,B]=N.useState(!1),q=()=>{M(!1),B(!1),P&&(i==null||i())},H=()=>{M(!0),!P&&(r==null||r())},Y=()=>{P?q():H()},{openDropdown:K,closeDropdown:Q}=Tst({open:H,close:q,closeDelay:p,openDelay:h}),L=F=>xZe("[data-menu-item]","[data-menu-dropdown]",F),{resolvedClassNames:z,resolvedStyles:W}=jD({classNames:m,styles:g,props:t});return im(()=>{k()},[P]),_.jsx(rot,{value:{getStyles:C,opened:P,toggleDropdown:Y,getItemIndex:L,hovered:I,setHovered:D,openedViaClick:$,setOpenedViaClick:B,closeOnItemClick:l,closeDropdown:d==="click"?q:Q,openDropdown:d==="click"?H:K,closeDropdownImmediately:q,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(rc,{...T,opened:P,onChange:Y,defaultOpened:o,trapFocus:S?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:b,keepMounted:S,children:n})})}Yu.extend=e=>e;Yu.classes=w2;Yu.displayName="@mantine/core/Menu";Yu.Item=mJ;Yu.Label=gJ;Yu.Dropdown=pJ;Yu.Target=vCe;Yu.Divider=hJ;const[cot,E2]=Ha("Modal component was not found in tree");var Bg={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const fot={},n5=ft((e,t)=>{const n=qe("ModalBody",fot,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=E2();return _.jsx(N2e,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});n5.classes=Bg;n5.displayName="@mantine/core/ModalBody";const dot={},r5=ft((e,t)=>{const n=qe("ModalCloseButton",dot,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=E2();return _.jsx(P2e,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});r5.classes=Bg;r5.displayName="@mantine/core/ModalCloseButton";const hot={},i5=ft((e,t)=>{const n=qe("ModalContent",hot,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=E2(),f=c.scrollAreaComponent||Prt;return _.jsx(krt,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${$e(c.yOffset)} * 2))`},children:u})})});i5.classes=Bg;i5.displayName="@mantine/core/ModalContent";const pot={},s5=ft((e,t)=>{const n=qe("ModalHeader",pot,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=E2();return _.jsx(O2e,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});s5.classes=Bg;s5.displayName="@mantine/core/ModalHeader";const mot={},o5=ft((e,t)=>{const n=qe("ModalOverlay",mot,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=E2();return _.jsx($2e,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});o5.classes=Bg;o5.displayName="@mantine/core/ModalOverlay";const got={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Bh("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},yot=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Bi(t),"--modal-size":qn(n,"modal-size"),"--modal-y-offset":$e(r),"--modal-x-offset":$e(i)}}),a5=ft((e,t)=>{const n=qe("ModalRoot",got,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=Bt({name:m,classes:Bg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yot});return _.jsx(cot,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(Art,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});a5.classes=Bg;a5.displayName="@mantine/core/ModalRoot";const vot={},u5=ft((e,t)=>{const n=qe("ModalTitle",vot,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=E2();return _.jsx(M2e,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});u5.classes=Bg;u5.displayName="@mantine/core/ModalTitle";const bot={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Bh("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},qs=ft((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=qe("Modal",bot,e),c=!!n||s;return _.jsxs(a5,{ref:t,radius:u,...l,children:[r&&_.jsx(o5,{...i}),_.jsxs(i5,{radius:u,children:[c&&_.jsxs(s5,{children:[n&&_.jsx(u5,{children:n}),s&&_.jsx(r5,{...o})]}),_.jsx(n5,{children:a})]})]})});qs.classes=Bg;qs.displayName="@mantine/core/Modal";qs.Root=a5;qs.Overlay=o5;qs.Content=i5;qs.Body=n5;qs.Header=s5;qs.Title=u5;qs.CloseButton=r5;const[xot,yJ]=d2(),[_ot,wot]=d2();var l5={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const Eot={},Sot=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?qn(t):qn(n,"pg-gap")}}),vJ=ft((e,t)=>{const n=qe("PillGroup",Eot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=yJ(),h=(d==null?void 0:d.size)||l||void 0,p=Bt({name:"PillGroup",classes:l5,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Sot,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(_ot,{value:{size:h,disabled:c},children:_.jsx(Ie,{ref:t,size:h,...p("group"),...f})})});vJ.classes=l5;vJ.displayName="@mantine/core/PillGroup";const Tot={variant:"default"},Cot=(e,{radius:t},{size:n})=>({root:{"--pill-fz":qn(n,"pill-fz"),"--pill-height":qn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Bi(t)}}),lR=ft((e,t)=>{const n=qe("Pill",Tot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...b}=n,x=wot(),w=yJ(),S=m||(x==null?void 0:x.size)||void 0,T=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",C=Bt({name:"Pill",classes:l5,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Cot,stylesCtx:{size:S}});return _.jsxs(Ie,{component:"span",ref:t,variant:T,size:S,...C("root",{variant:T}),mod:[{"with-remove":f&&!g,disabled:g||(x==null?void 0:x.disabled)},y],...b,children:[_.jsx("span",{...C("label"),children:c}),f&&_.jsx(Iv,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...C("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:I=>{var D;I.preventDefault(),I.stopPropagation(),(D=h==null?void 0:h.onMouseDown)==null||D.call(h,I)},onClick:I=>{var D;I.stopPropagation(),d==null||d(),(D=h==null?void 0:h.onClick)==null||D.call(h,I)}})]})});lR.classes=l5;lR.displayName="@mantine/core/Pill";lR.Group=vJ;var bCe={field:"m_45c4369d"};const Aot={type:"visible"},bJ=ft((e,t)=>{const n=qe("PillsInputField",Aot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=yJ(),g=v2(),y=Bt({name:"PillsInputField",classes:bCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),b=c||(m==null?void 0:m.disabled);return _.jsx(Ie,{component:"input",ref:lo(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:b,mod:[{disabled:b,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:x=>!d&&x.stopPropagation()})});bJ.classes=bCe;bJ.displayName="@mantine/core/PillsInputField";const Iot={},m$=ft((e,t)=>{const n=qe("PillsInput",Iot,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=N.useRef();return _.jsx(xot,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(yd,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});m$.displayName="@mantine/core/PillsInput";m$.Field=bJ;function kot({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(eT(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const Rot={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},xJ=ft((e,t)=>{const n=qe("MultiSelect",Rot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:b,onDropdownClose:x,selectFirstOptionOnChange:w,onOptionSubmit:S,comboboxProps:T,filter:C,limit:I,withScrollArea:D,maxDropdownHeight:k,searchValue:P,defaultSearchValue:M,onSearchChange:$,readOnly:B,disabled:q,onFocus:H,onBlur:Y,onPaste:K,radius:Q,rightSection:L,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:F,leftSection:V,leftSectionWidth:J,leftSectionPointerEvents:ue,leftSectionProps:we,inputContainer:he,inputWrapperOrder:ke,withAsterisk:Pe,labelProps:rt,descriptionProps:Re,errorProps:St,wrapperProps:Je,description:It,label:mt,error:Te,maxValues:Fe,searchable:st,nothingFoundMessage:yt,withCheckIcon:Dt,checkIconPosition:Qe,hidePickedOptions:_e,withErrorStyles:kt,name:Rt,form:Ee,id:Oe,clearable:ot,clearButtonProps:xt,hiddenInputProps:jt,placeholder:jn,hiddenInputValuesDivider:dr,required:Sr,mod:xi,renderOption:Tn,onRemove:Un,onClear:hr,scrollAreaProps:gr,...Yo}=n,es=Du(Oe),ds=H2e(m),Ns=HQ(ds),Ur=tJ({opened:g,defaultOpened:y,onDropdownOpen:b,onDropdownClose:()=>{x==null||x(),Ur.resetSelectedOption()}}),{styleProps:hs,rest:{type:Cc,autoComplete:Ko,...Ou}}=F_(Yo),[Lr,ki]=ma({value:c,defaultValue:f,finalValue:[],onChange:d}),[pi,Xs]=ma({value:P,defaultValue:M,finalValue:"",onChange:$}),si=Bt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ri,resolvedStyles:me}=jD({props:n,styles:o,classNames:r}),ae=_t=>{h==null||h(_t),_t.key===" "&&!st&&(_t.preventDefault(),Ur.toggleDropdown()),_t.key==="Backspace"&&pi.length===0&&Lr.length>0&&(Un==null||Un(Lr[Lr.length-1]),ki(Lr.slice(0,Lr.length-1)))},ge=Lr.map((_t,Ut)=>{var fn,Zn;return _.jsx(lR,{withRemoveButton:!B&&!((fn=Ns[_t])!=null&&fn.disabled),onRemove:()=>{ki(Lr.filter(ur=>_t!==ur)),Un==null||Un(_t)},unstyled:a,disabled:q,...si("pill"),children:((Zn=Ns[_t])==null?void 0:Zn.label)||_t},`${_t}-${Ut}`)});N.useEffect(()=>{w&&Ur.selectFirstOption()},[w,Lr]);const Le=ot&&Lr.length>0&&!q&&!B&&_.jsx(Pr.ClearButton,{size:l,...xt,onClear:()=>{hr==null||hr(),ki([]),Xs("")}}),Me=kot({data:ds,value:Lr});return _.jsxs(_.Fragment,{children:[_.jsxs(Pr,{store:Ur,classNames:Ri,styles:me,unstyled:a,size:l,readOnly:B,__staticSelector:"MultiSelect",onOptionSubmit:_t=>{S==null||S(_t),Xs(""),Ur.updateSelectedOptionIndex("selected"),Lr.includes(Ns[_t].value)?(ki(Lr.filter(Ut=>Ut!==Ns[_t].value)),Un==null||Un(Ns[_t].value)):Lr.length<Fe&&ki([...Lr,Ns[_t].value])},...T,children:[_.jsx(Pr.DropdownTarget,{children:_.jsx(m$,{...hs,__staticSelector:"MultiSelect",classNames:Ri,styles:me,unstyled:a,size:l,className:i,style:s,variant:p,disabled:q,radius:Q,rightSection:L||Le||_.jsx(Pr.Chevron,{size:l,error:Te,unstyled:a}),rightSectionPointerEvents:W||(Le?"all":"none"),rightSectionWidth:z,rightSectionProps:F,leftSection:V,leftSectionWidth:J,leftSectionPointerEvents:ue,leftSectionProps:we,inputContainer:he,inputWrapperOrder:ke,withAsterisk:Pe,labelProps:rt,descriptionProps:Re,errorProps:St,wrapperProps:Je,description:It,label:mt,error:Te,multiline:!0,withErrorStyles:kt,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Le?"all":"none"),multiline:!0},pointer:!st,onClick:()=>st?Ur.openDropdown():Ur.toggleDropdown(),"data-expanded":Ur.dropdownOpened||void 0,id:es,required:Sr,mod:xi,children:_.jsxs(lR.Group,{disabled:q,unstyled:a,...si("pillsList"),children:[ge,_.jsx(Pr.EventsTarget,{autoComplete:Ko,children:_.jsx(m$.Field,{...Ou,ref:t,id:es,placeholder:jn,type:!st&&!jn?"hidden":"visible",...si("inputField"),unstyled:a,onFocus:_t=>{H==null||H(_t),st&&Ur.openDropdown()},onBlur:_t=>{Y==null||Y(_t),Ur.closeDropdown(),Xs("")},onKeyDown:ae,value:pi,onChange:_t=>{Xs(_t.currentTarget.value),st&&Ur.openDropdown(),w&&Ur.selectFirstOption()},disabled:q,readOnly:B||!st,pointer:!st})})]})})}),_.jsx(uCe,{data:_e?Me:ds,hidden:B||q,filter:C,search:pi,limit:I,hiddenWhenEmpty:!st||!yt||_e&&Me.length===0&&pi.trim().length===0,withScrollArea:D,maxDropdownHeight:k,filterOptions:st,value:Lr,checkIconPosition:Qe,withCheckIcon:Dt,nothingFoundMessage:yt,unstyled:a,labelId:mt?`${es}-label`:void 0,"aria-label":mt?void 0:Yo["aria-label"],renderOption:Tn,scrollAreaProps:gr})]}),_.jsx(Pr.HiddenInput,{name:Rt,valuesDivider:dr,value:Lr,form:Ee,disabled:q,...jt})]})});xJ.classes={...yd.classes,...Pr.classes};xJ.displayName="@mantine/core/MultiSelect";var xCe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const Dot={},Not=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":wo(r)}}},c5=qo((e,t)=>{const n=qe("NavLink",Dot,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:b,description:x,disableRightSectionRotation:w,noWrap:S,childrenOffset:T,onKeyDown:C,autoContrast:I,mod:D,...k}=n,P=Bt({name:"NavLink",props:n,classes:xCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Not}),[M,$]=ma({value:l,defaultValue:c,finalValue:!1,onChange:f}),B=!!d,q=H=>{h==null||h(H),B&&(H.preventDefault(),$(!M))};return _.jsxs(_.Fragment,{children:[_.jsxs(of,{...P("root"),component:"a",ref:t,onClick:q,onKeyDown:H=>{C==null||C(H),H.nativeEvent.code==="Space"&&B&&(H.preventDefault(),$(!M))},unstyled:a,mod:[{disabled:m,active:p,expanded:M},D],...k,children:[g&&_.jsx(Ie,{component:"span",...P("section"),mod:{position:"left"},children:g}),_.jsxs(Ie,{...P("body"),mod:{"no-wrap":S},children:[_.jsx(Ie,{component:"span",...P("label"),children:b}),_.jsx(Ie,{component:"span",mod:{active:p},...P("description"),children:x})]}),(B||y)&&_.jsx(Ie,{...P("section"),component:"span",mod:{rotate:M&&!w,position:"right"},children:B?y||_.jsx(JF,{...P("chevron")}):y})]}),_.jsx(HF,{in:M,...P("collapse"),children:_.jsx("div",{...P("children"),children:d})})]})});c5.classes=xCe;c5.displayName="@mantine/core/NavLink";var _Ce={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const Pot={withCloseButton:!0},Oot=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Bi(t),"--notification-color":n?$i(n,e):void 0}}),_J=ft((e,t)=>{const n=qe("Notification",Pot,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:b,vars:x,mod:w,...S}=n,T=Bt({name:"Notification",classes:_Ce,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:x,varsResolver:Oot});return _.jsxs(Ie,{...T("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:b,...S,role:"alert",children:[c&&!o&&_.jsx("div",{...T("icon"),children:c}),o&&_.jsx(_c,{size:28,color:i,...T("loader")}),_.jsxs("div",{...T("body"),children:[l&&_.jsx("div",{...T("title"),children:l}),_.jsx(Ie,{...T("description"),mod:{"data-with-title":!!l},children:f})]}),a&&_.jsx(Iv,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...T("closeButton")})]})});_J.classes=_Ce;_J.displayName="@mantine/core/Notification";function wCe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var cR;(function(e){e.event="event",e.props="prop"})(cR||(cR={}));function zy(){}function $ot(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function fR(e){return!!(e||"").match(/\d/)}function dS(e){return e==null}function Mot(e){return typeof e=="number"&&isNaN(e)}function ECe(e){return dS(e)||Mot(e)||typeof e=="number"&&!isFinite(e)}function SCe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Lot(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function Fot(e,t,n){var r=Lot(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function Bot(e){var t=N.useRef(e);t.current=e;var n=N.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function wJ(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function jot(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function TCe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Vde(e,t){return Array(t+1).join(e)}function CCe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Vde("0",Math.abs(o))+i:o>=a?i=i+Vde("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Hde(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=wJ(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=TCe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Kb(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var ACe=$ot(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),Uot=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function zot(e,t,n){return Math.min(Math.max(e,t),n)}function M7(e){return Math.max(e.selectionStart,e.selectionEnd)}function Vot(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Hot(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function qot(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function Wot(e,t,n,r,i,s,o){o===void 0&&(o=qot);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var b=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var x=y===-1||d[y]===-1?0:d[y]+1;return x>b?b:r-x<b-r?x:b}function qde(e,t,n,r){var i=e.length;if(t=zot(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function Got(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(fR(e[n])||fR(e[n-1]));return t}function ICe(e,t,n,r,i,s){s===void 0&&(s=zy);var o=Bot(function(p,m){var g,y;return ECe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?CCe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=N.useState(function(){return o(dS(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;dS(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return N.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function Yot(e){return e.replace(/[^0-9]/g,"")}function Kot(e){return e}function Xot(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=Kot);var a=e.removeFormatting;a===void 0&&(a=Yot);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=zy);var h=e.onKeyDown;h===void 0&&(h=zy);var p=e.onMouseUp;p===void 0&&(p=zy);var m=e.onFocus;m===void 0&&(m=zy);var g=e.onBlur;g===void 0&&(g=zy);var y=e.value,b=e.getCaretBoundary;b===void 0&&(b=Got);var x=e.isValidInputCharacter;x===void 0&&(x=fR);var w=e.isCharacterSame,S=wCe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=ICe(y,u,!!l,o,a,c),C=T[0],I=C.formattedValue,D=C.numAsString,k=T[1],P=N.useRef(),M=N.useRef({formattedValue:I,numAsString:D}),$=function(Te,Fe){M.current={formattedValue:Te.formattedValue,numAsString:Te.value},k(Te,Fe)},B=N.useState(!1),q=B[0],H=B[1],Y=N.useRef(null),K=N.useRef({setCaretTimeout:null,focusTimeout:null});N.useEffect(function(){return H(!0),function(){clearTimeout(K.current.setCaretTimeout),clearTimeout(K.current.focusTimeout)}},[]);var Q=o,L=function(Te,Fe){var st=parseFloat(Fe);return{formattedValue:Te,value:Fe,floatValue:isNaN(st)?void 0:st}},z=function(Te,Fe,st){Te.selectionStart===0&&Te.selectionEnd===Te.value.length||(Kb(Te,Fe),K.current.setCaretTimeout=setTimeout(function(){Te.value===st&&Te.selectionStart!==Fe&&Kb(Te,Fe)},0))},W=function(Te,Fe,st){return qde(Te,Fe,b(Te),st)},F=function(Te,Fe,st){var yt=b(Fe),Dt=Wot(Fe,I,Te,st,yt,x,w);return Dt=qde(Fe,Dt,yt),Dt},V=function(Te){var Fe=Te.formattedValue;Fe===void 0&&(Fe="");var st=Te.input,yt=Te.source,Dt=Te.event,Qe=Te.numAsString,_e;if(st){var kt=Te.inputValue||st.value,Rt=M7(st);st.value=Fe,_e=F(kt,Fe,Rt),_e!==void 0&&z(st,_e,Fe)}Fe!==I&&$(L(Fe,Qe),{event:Dt,source:yt})};N.useEffect(function(){var Te=M.current,Fe=Te.formattedValue,st=Te.numAsString;(I!==Fe||D!==st)&&$(L(I,D),{event:void 0,source:cR.props})},[I,D]);var J=Y.current?M7(Y.current):void 0,ue=typeof window<"u"?N.useLayoutEffect:N.useEffect;ue(function(){var Te=Y.current;if(I!==M.current.formattedValue&&Te){var Fe=F(M.current.formattedValue,I,J);Te.value=I,z(Te,Fe,I)}},[I]);var we=function(Te,Fe,st){var yt=Fe.target,Dt=P.current?Uot(P.current,yt.selectionEnd):ACe(I,Te),Qe=Object.assign(Object.assign({},Dt),{lastValue:I}),_e=a(Te,Qe),kt=Q(_e);if(_e=a(kt,void 0),f&&!f(L(kt,_e))){var Rt=Fe.target,Ee=M7(Rt),Oe=F(Te,I,Ee);return Rt.value=I,z(Rt,Oe,I),!1}return V({formattedValue:kt,numAsString:_e,inputValue:Te,event:Fe,source:st,input:Fe.target}),!0},he=function(Te,Fe){Fe===void 0&&(Fe=0);var st=Te.selectionStart,yt=Te.selectionEnd;P.current={selectionStart:st,selectionEnd:yt+Fe}},ke=function(Te){var Fe=Te.target,st=Fe.value,yt=we(st,Te,cR.event);yt&&d(Te),P.current=void 0},Pe=function(Te){var Fe=Te.target,st=Te.key,yt=Fe.selectionStart,Dt=Fe.selectionEnd,Qe=Fe.value;Qe===void 0&&(Qe="");var _e;st==="ArrowLeft"||st==="Backspace"?_e=Math.max(yt-1,0):st==="ArrowRight"?_e=Math.min(yt+1,Qe.length):st==="Delete"&&(_e=yt);var kt=0;st==="Delete"&&yt===Dt&&(kt=1);var Rt=st==="ArrowLeft"||st==="ArrowRight";if(_e===void 0||yt!==Dt&&!Rt){h(Te),he(Fe,kt);return}var Ee=_e;if(Rt){var Oe=st==="ArrowLeft"?"left":"right";Ee=W(Qe,_e,Oe),Ee!==_e&&Te.preventDefault()}else st==="Delete"&&!x(Qe[_e])?Ee=W(Qe,_e,"right"):st==="Backspace"&&!x(Qe[_e])&&(Ee=W(Qe,_e,"left"));Ee!==_e&&z(Fe,Ee,Qe),h(Te),he(Fe,kt)},rt=function(Te){var Fe=Te.target,st=function(){var yt=Fe.selectionStart,Dt=Fe.selectionEnd,Qe=Fe.value;if(Qe===void 0&&(Qe=""),yt===Dt){var _e=W(Qe,yt);_e!==yt&&z(Fe,_e,Qe)}};st(),requestAnimationFrame(function(){st()}),p(Te),he(Fe)},Re=function(Te){Te.persist&&Te.persist();var Fe=Te.target,st=Te.currentTarget;Y.current=Fe,K.current.focusTimeout=setTimeout(function(){var yt=Fe.selectionStart,Dt=Fe.selectionEnd,Qe=Fe.value;Qe===void 0&&(Qe="");var _e=W(Qe,yt);_e!==yt&&!(yt===0&&Dt===Qe.length)&&z(Fe,_e,Qe),m(Object.assign(Object.assign({},Te),{currentTarget:st}))},0)},St=function(Te){Y.current=null,clearTimeout(K.current.focusTimeout),clearTimeout(K.current.setCaretTimeout),g(Te)},Je=q&&Vot()?"numeric":void 0,It=Object.assign({inputMode:Je},S,{type:t,value:I,onChange:ke,onKeyDown:Pe,onMouseUp:rt,onFocus:Re,onBlur:St});if(n==="text")return i?ti.createElement(ti.Fragment,null,i(I,S)||null):ti.createElement("span",Object.assign({},S,{ref:s}),I);if(r){var mt=r;return ti.createElement(mt,Object.assign({},It,{ref:s}))}return ti.createElement("input",Object.assign({},It,{ref:s}))}function Wde(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=f5(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=wJ(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=TCe(p,n,!!r)),l&&(h=Fot(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function f5(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function Qot(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function Jot(e,t){return new RegExp("(^-)|[0-9]|"+SCe(e),"g")}function Zot(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function eat(e,t,n){var r;t===void 0&&(t=Hot(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=f5(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(fR(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(Y,K,Q){var L=!1,z=!1;s.startsWith("-")?L=!1:Y.startsWith("--")?(L=!1,z=!0):o.startsWith("-")&&Y.length===o.length?L=!1:Y[0]==="-"&&(L=!0);var W=L?1:0;return z&&(W=2),W&&(Y=Y.substring(W),K-=W,Q-=W),{value:Y,start:K,end:Q,hasNegation:L}},b=y(e,c,f),x=b.hasNegation;r=b,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),S=w.start,T=w.end,C=w.value,I=e.substring(c,f);e.length&&C.length&&(S>C.length-o.length||T<s.length)&&!(I&&o.startsWith(I))&&(e=C);var D=0;e.startsWith(s)?D+=s.length:c<s.length&&(D=c),e=e.substring(D),f-=D;var k=e.length,P=e.length-o.length;e.endsWith(o)?k=P:(f>P||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=Qot(x?"-"+e:e,i),e=(e.match(Jot(p))||[]).join("");var M=e.indexOf(p);e=e.replace(new RegExp(SCe(p),"g"),function(Y,K){return K===M?".":""});var $=wJ(e,i),B=$.beforeDecimal,q=$.afterDecimal,H=$.addNegation;return l.end-l.start<u.end-u.start&&B===""&&m&&!parseFloat(q)&&(e=H?"-":""),e}function tat(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function nat(e){var t=f5(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function rat(e){e=nat(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=zy);var s=e.onBlur;s===void 0&&(s=zy);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=wCe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=f5(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,b=function(H){return Wde(H,e)},x=function(H,Y){return eat(H,Y,e)},w=dS(f)?c:f,S=d??Zot(w,l,t);dS(f)?dS(c)||(S=S||typeof c=="number"):S=S||typeof f=="number";var T=function(H){return ECe(H)?H:(typeof H=="number"&&(H=CCe(H)),S&&typeof a=="number"?Hde(H,a,!!u):H)},C=ICe(T(f),T(c),!!S,b,x,h),I=C[0],D=I.numAsString,k=I.formattedValue,P=C[1],M=function(H){var Y=H.target,K=H.key,Q=Y.selectionStart,L=Y.selectionEnd,z=Y.value;if(z===void 0&&(z=""),(K==="Backspace"||K==="Delete")&&L<l.length){H.preventDefault();return}if(Q!==L){i(H);return}K==="Backspace"&&z[0]==="-"&&Q===l.length+1&&n&&Kb(Y,1),a&&u&&(K==="Backspace"&&z[Q-1]===g?(Kb(Y,Q-1),H.preventDefault()):K==="Delete"&&z[Q]===g&&H.preventDefault()),y!=null&&y.includes(K)&&z[Q]===g&&Kb(Y,Q+1);var W=o===!0?",":o;K==="Backspace"&&z[Q-1]===W&&Kb(Y,Q-1),K==="Delete"&&z[Q]===W&&Kb(Y,Q+1),i(H)},$=function(H){var Y=D;if(Y.match(/\d/g)||(Y=""),r||(Y=jot(Y)),u&&a&&(Y=Hde(Y,a,u)),Y!==D){var K=Wde(Y,e);P({formattedValue:K,value:Y,floatValue:parseFloat(Y)},{event:H,source:cR.event})}s(H)},B=function(H){return H===g?!0:fR(H)},q=function(H){var Y=H.currentValue,K=H.lastValue,Q=H.formattedValue,L=H.currentValueIndex,z=H.formattedValueIndex,W=Y[L],F=Q[z],V=ACe(K,Y),J=V.to;return L>=J.start&&L<J.end&&y&&y.includes(W)&&F===g?!0:W===F};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:B,isCharacterSame:q,onValueChange:P,format:b,removeFormatting:x,getCaretBoundary:function(H){return tat(H,e)},onKeyDown:M,onBlur:$})}function iat(e){var t=rat(e);return ti.createElement(Xot,Object.assign({},t))}function Gde({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var Aq={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const sat=/^(0\.0*|-0(\.0*)?)$/,oat=/^-?0\d+(\.\d+)?\.?$/;function aat(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Yde(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const uat={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},lat=(e,{size:t})=>({controls:{"--ni-chevron-size":qn(t,"ni-chevron-size")}}),EJ=ft((e,t)=>{const n=qe("NumberInput",uat,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:b,onBlur:x,allowDecimal:w,decimalScale:S,onKeyDown:T,onKeyDownCapture:C,handlersRef:I,startValue:D,disabled:k,rightSectionPointerEvents:P,allowNegative:M,readOnly:$,size:B,rightSectionWidth:q,stepHoldInterval:H,stepHoldDelay:Y,allowLeadingZeros:K,withKeyboardEvents:Q,trimLeadingZeroesOnBlur:L,...z}=n,W=Bt({name:"NumberInput",classes:Aq,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:lat}),{resolvedClassNames:F,resolvedStyles:V}=jD({classNames:i,styles:s,props:n}),[J,ue]=ma({value:c,defaultValue:f,onChange:u}),we=Y!==void 0&&H!==void 0,he=N.useRef(null),ke=N.useRef(null),Pe=N.useRef(0),rt=(_e,kt)=>{kt.source==="event"&&ue(aat(_e.floatValue)&&!sat.test(_e.value)&&!(K&&oat.test(_e.value))?_e.floatValue:_e.value),l==null||l(_e,kt)},Re=_e=>{const kt=String(_e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return kt?Math.max(0,(kt[1]?kt[1].length:0)-(kt[2]?+kt[2]:0)):0},St=_e=>{he.current&&typeof _e<"u"&&he.current.setSelectionRange(_e,_e)},Je=N.useRef();Je.current=()=>{let _e;const kt=Re(J),Rt=Re(p),Ee=Math.max(kt,Rt),Oe=10**Ee;if(typeof J!="number"||Number.isNaN(J))_e=P0(D,h,d);else if(d!==void 0){const xt=(Math.round(J*Oe)+Math.round(p*Oe))/Oe;_e=xt<=d?xt:d}else _e=(Math.round(J*Oe)+Math.round(p*Oe))/Oe;const ot=_e.toFixed(Ee);ue(parseFloat(ot)),l==null||l({floatValue:parseFloat(ot),formattedValue:ot,value:ot},{source:"increment"}),setTimeout(()=>{var xt;return St((xt=he.current)==null?void 0:xt.value.length)},0)};const It=N.useRef();It.current=()=>{let _e;const kt=h!==void 0?h:M?Number.MIN_SAFE_INTEGER:0,Rt=Re(J),Ee=Re(p),Oe=Math.max(Rt,Ee),ot=10**Oe;if(typeof J!="number"||Number.isNaN(J))_e=P0(D,kt,d);else{const jt=(Math.round(J*ot)-Math.round(p*ot))/ot;_e=kt!==void 0&&jt<kt?kt:jt}const xt=_e.toFixed(Oe);ue(parseFloat(xt)),l==null||l({floatValue:parseFloat(xt),formattedValue:xt,value:xt},{source:"decrement"}),setTimeout(()=>{var jt;return St((jt=he.current)==null?void 0:jt.value.length)},0)};const mt=_e=>{T==null||T(_e),!($||!Q)&&(_e.key==="ArrowUp"&&(_e.preventDefault(),Je.current()),_e.key==="ArrowDown"&&(_e.preventDefault(),It.current()))},Te=_e=>{if(C==null||C(_e),_e.key==="Backspace"){const kt=he.current;kt.selectionStart===0&&kt.selectionStart===kt.selectionEnd&&(_e.preventDefault(),window.setTimeout(()=>St(0),0))}};nQ(I,{increment:Je.current,decrement:It.current});const Fe=_e=>{_e?Je.current():It.current(),Pe.current+=1},st=_e=>{if(Fe(_e),we){const kt=typeof H=="number"?H:H(Pe.current);ke.current=window.setTimeout(()=>st(_e),kt)}},yt=(_e,kt)=>{var Rt;_e.preventDefault(),(Rt=he.current)==null||Rt.focus(),Fe(kt),we&&(ke.current=window.setTimeout(()=>st(kt),Y))},Dt=()=>{ke.current&&window.clearTimeout(ke.current),ke.current=null,Pe.current=0},Qe=_.jsxs("div",{...W("controls"),children:[_.jsx(of,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof J=="number"&&d!==void 0&&J>=d,mod:{direction:"up"},onMouseDown:_e=>_e.preventDefault(),onPointerDown:_e=>{yt(_e,!0)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(Gde,{direction:"up"})}),_.jsx(of,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof J=="number"&&h!==void 0&&J<=h,mod:{direction:"down"},onMouseDown:_e=>_e.preventDefault(),onPointerDown:_e=>{yt(_e,!1)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(Gde,{direction:"down"})})]});return _.jsx(yd,{component:iat,allowNegative:M,className:so(Aq.root,r),size:B,...z,readOnly:$,disabled:k,value:J,getInputRef:lo(t,he),onValueChange:rt,rightSection:m||$?g:g||Qe,classNames:F,styles:V,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?S:0,onKeyDown:mt,onKeyDownCapture:Te,rightSectionPointerEvents:P??(k?"none":void 0),rightSectionWidth:q??`var(--ni-right-section-width-${B||"sm"})`,allowLeadingZeros:K,onBlur:_e=>{if(x==null||x(_e),b==="blur"&&typeof J=="number"&&P0(J,h,d)!==J&&ue(P0(J,h,d)),L&&typeof J=="string"){const kt=J.replace(/^0+/,""),Rt=parseFloat(kt);ue(Number.isNaN(Rt)?kt:Rt)}},isAllowed:_e=>b==="strict"?y?y(_e)&&Yde(_e.floatValue,h,d):Yde(_e.floatValue,h,d):y?y(_e):!0})});EJ.classes={...yd.classes,...Aq};EJ.displayName="@mantine/core/NumberInput";const[cat,kCe]=Ha("Progress.Root component was not found in tree");var YD={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const fat={},SJ=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=qe("ProgressLabel",fat,e),u=kCe();return _.jsx(Ie,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});SJ.classes=YD;SJ.displayName="@mantine/core/ProgressLabel";const dat={},hat=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":qn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Bi(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),d5=ft((e,t)=>{const n=qe("ProgressRoot",dat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Bt({name:"Progress",classes:YD,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hat});return _.jsx(cat,{value:{getStyles:d,autoContrast:l},children:_.jsx(Ie,{ref:t,...d("root"),...f})})});d5.classes=YD;d5.displayName="@mantine/core/ProgressRoot";const pat={withAria:!0},h5=ft((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=qe("ProgressSection",pat,e),p=kCe(),m=co(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(Ie,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":$i(l,m),"--progress-label-color":h2(p.autoContrast,m)?Av({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});h5.classes=YD;h5.displayName="@mantine/core/ProgressSection";const mat={},S2=ft((e,t)=>{const n=qe("Progress",mat,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=jD({classNames:i,styles:s,props:n});return _.jsx(d5,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(h5,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});S2.classes=YD;S2.displayName="@mantine/core/Progress";S2.Section=h5;S2.Root=d5;S2.Label=SJ;const[gat,RCe]=d2(),[yat,vat]=d2();var DCe={card:"m_9dc8ae12"};const bat={withBorder:!0},xat=(e,{radius:t})=>({card:{"--card-radius":Bi(t)}}),TJ=ft((e,t)=>{const n=qe("RadioCard",bat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=Bt({name:"RadioCard",classes:DCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xat,rootSelector:"card"}),{dir:b}=$g(),x=RCe(),w=typeof l=="boolean"?l:(x==null?void 0:x.value)===d||!1,S=p||(x==null?void 0:x.name),T=C=>{if(m==null||m(C),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(C.nativeEvent.code)){C.preventDefault();const I=Array.from(document.querySelectorAll(`[role="radio"][name="${S||"__mantine"}"]`)),D=I.findIndex(M=>M===C.target),k=D+1>=I.length?0:D+1,P=D-1<0?I.length-1:D-1;C.nativeEvent.code==="ArrowDown"&&(I[k].focus(),I[k].click()),C.nativeEvent.code==="ArrowUp"&&(I[P].focus(),I[P].click()),C.nativeEvent.code==="ArrowLeft"&&(I[b==="ltr"?P:k].focus(),I[b==="ltr"?P:k].click()),C.nativeEvent.code==="ArrowRight"&&(I[b==="ltr"?k:P].focus(),I[b==="ltr"?k:P].click())}};return _.jsx(yat,{value:{checked:w},children:_.jsx(of,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:S,onClick:C=>{h==null||h(C),x==null||x.onChange(d||"")},onKeyDown:T})})});TJ.displayName="@mantine/core/RadioCard";TJ.classes=DCe;const _at={},CJ=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=qe("RadioGroup",_at,e),f=Du(u),[d,h]=ma({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(gat,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(Gs.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(rJ,{role:"radiogroup",children:a})})})});CJ.classes=Gs.Wrapper.classes;CJ.displayName="@mantine/core/RadioGroup";function NCe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:$e(e),height:$e(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var PCe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const wat={icon:NCe},Eat=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Am({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":qn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Bi(t),"--radio-color":s==="outline"?u:$i(n,e),"--radio-icon-size":qn(r,"radio-icon-size"),"--radio-icon-color":i?$i(i,e):h2(o,e)?Av({color:n,theme:e,autoContrast:o}):void 0}}},AJ=ft((e,t)=>{const n=qe("RadioIndicator",wat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...b}=n,x=l,w=Bt({name:"RadioIndicator",classes:PCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Eat,rootSelector:"indicator"}),S=vat(),T=typeof p=="boolean"?p:(S==null?void 0:S.checked)||!1;return _.jsx(Ie,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:T,disabled:y},m],...b,children:_.jsx(x,{...w("icon")})})});AJ.displayName="@mantine/core/RadioIndicator";AJ.classes=PCe;var OCe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const Sat={labelPosition:"right"},Tat=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Am({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":qn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Bi(n),"--radio-color":s==="outline"?u:$i(r,e),"--radio-icon-color":i?$i(i,e):h2(o,e)?Av({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":qn(t,"radio-icon-size")}}},hg=ft((e,t)=>{const n=qe("Radio",Sat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:b,wrapperProps:x,icon:w=NCe,rootRef:S,iconColor:T,onChange:C,mod:I,...D}=n,k=Bt({name:"Radio",classes:OCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Tat}),P=RCe(),M=(P==null?void 0:P.size)??c,$=n.size?c:M,{styleProps:B,rest:q}=F_(D),H=Du(l),Y=P?{checked:P.value===q.value,name:q.name??P.name,onChange:K=>{P.onChange(K),C==null||C(K)}}:{};return _.jsx(ZF,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:H,size:$,labelPosition:d,label:f,description:h,error:p,disabled:b,classNames:r,styles:o,unstyled:a,"data-checked":Y.checked||void 0,variant:y,ref:S,mod:I,...B,...x,children:_.jsxs(Ie,{...k("inner"),mod:{"label-position":d},children:[_.jsx(Ie,{...k("radio",{focusable:!0,variant:y}),onChange:C,...q,...Y,component:"input",mod:{error:!!p},ref:t,id:H,disabled:b,type:"radio"}),_.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});hg.classes=OCe;hg.displayName="@mantine/core/Radio";hg.Group=CJ;hg.Card=TJ;hg.Indicator=AJ;const Cat={duration:100,transition:"fade"};function Aat(e,t){return{...Cat,...t,...e}}function Iat({offset:e,position:t}){const[n,r]=N.useState(!1),i=N.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=AQ({placement:t,middleware:[EQ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=N.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return N.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=q0(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var p5={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const kat={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Bh("popover")},Rat=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Bi(t),"--tooltip-bg":n?$i(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),IJ=ft((e,t)=>{const n=qe("TooltipFloating",kat,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:b,variant:x,vars:w,portalProps:S,...T}=n,C=co(),I=Bt({name:"TooltipFloating",props:n,classes:p5,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:Rat}),{handleMouseMove:D,x:k,y:P,opened:M,boundaryRef:$,floating:B,setOpened:q}=Iat({offset:p,position:m});if(!Tv(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const H=lo($,r.ref,t),Y=Q=>{var L,z;(z=(L=r.props).onMouseEnter)==null||z.call(L,Q),D(Q),q(!0)},K=Q=>{var L,z;(z=(L=r.props).onMouseLeave)==null||z.call(L,Q),q(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(y2,{...S,withinPortal:s,children:_.jsx(Ie,{...T,...I("tooltip",{style:{...lQ(o,C),zIndex:y,display:!b&&M?"block":"none",top:(P&&Math.round(P))??"",left:(k&&Math.round(k))??""}}),variant:x,ref:B,mod:{multiline:g},children:h})}),N.cloneElement(r,{...r.props,[i]:H,onMouseEnter:Y,onMouseLeave:K})]})});IJ.classes=p5;IJ.displayName="@mantine/core/TooltipFloating";const $Ce=N.createContext(!1),Dat=$Ce.Provider,Nat=()=>N.useContext($Ce),Pat={openDelay:0,closeDelay:0};function MCe(e){const{openDelay:t,closeDelay:n,children:r}=qe("TooltipGroup",Pat,e);return _.jsx(Dat,{value:!0,children:_.jsx(Bnt,{delay:{open:t,close:n},children:r})})}MCe.displayName="@mantine/core/TooltipGroup";function Oat(e){var T,C,I;const[t,n]=N.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=Nat(),o=Du(),{delay:a,currentId:u,setCurrentId:l}=b2e(),c=N.useCallback(D=>{n(D),D&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:b}={}}}=AQ({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[p2e(e.offset),EQ({padding:8}),wq(),m2e({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[Eq()]:[]]}),{getReferenceProps:x,getFloatingProps:w}=Wnt([Fnt(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((C=e.events)!=null&&C.touch)}),qnt(h,{enabled:(I=e.events)==null?void 0:I.focus,visibleOnly:!0}),Ynt(h,{role:"tooltip"}),Vnt(h,{enabled:typeof e.opened>"u"}),jnt(h,{id:o})]);C2e({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),im(()=>{var D;(D=e.onPositionChange)==null||D.call(e,g)},[g]);const S=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:b,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:x,isGroupPhase:S,opened:i,placement:g}}const Kde={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Bh("popover"),positionDependencies:[]},$at=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Bi(t),"--tooltip-bg":n?$i(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ss=ft((e,t)=>{const n=qe("Tooltip",Kde,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:b,withArrow:x,arrowSize:w,arrowOffset:S,arrowRadius:T,arrowPosition:C,offset:I,transitionProps:D,multiline:k,events:P,zIndex:M,disabled:$,positionDependencies:B,onClick:q,onMouseEnter:H,onMouseLeave:Y,inline:K,variant:Q,keepMounted:L,vars:z,portalProps:W,mod:F,floatingStrategy:V,...J}=qe("Tooltip",Kde,n),{dir:ue}=$g(),we=N.useRef(null),he=Oat({position:x2e(ue,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:P,arrowRef:we,arrowOffset:S,offset:typeof I=="number"?I+(x?w/2:0):I,positionDependencies:[...B,r],inline:K,strategy:V}),ke=Bt({name:"Tooltip",props:n,classes:p5,className:b,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:$at});if(!Tv(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Pe=lo(he.reference,r.ref,t),rt=Aat(D,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(y2,{...W,withinPortal:f,children:_.jsx(Lg,{...rt,keepMounted:L,mounted:!$&&!!he.opened,duration:he.isGroupPhase?10:rt.duration,children:Re=>_.jsxs(Ie,{...J,variant:Q,mod:[{multiline:k},F],...he.getFloatingProps({ref:he.floating,className:ke("tooltip").className,style:{...ke("tooltip").style,...Re,zIndex:M,top:he.y??0,left:he.x??0}}),children:[o,_.jsx(IQ,{ref:we,arrowX:he.arrowX,arrowY:he.arrowY,visible:x,position:he.placement,arrowSize:w,arrowOffset:S,arrowRadius:T,arrowPosition:C,...ke("arrow")})]})})}),N.cloneElement(r,he.getReferenceProps({onClick:q,onMouseEnter:H,onMouseLeave:Y,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:Pe,className:so(b,r.props.className),...r.props}))]})});ss.classes=p5;ss.displayName="@mantine/core/Tooltip";ss.Floating=IJ;ss.Group=MCe;var LCe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const Mat={withItemsBorders:!0},Lat=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Bi(t),"--sc-color":n?$i(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":qn(i,"sc-padding"),"--sc-font-size":il(i)}}),m5=ft((e,t)=>{var ue,we;const n=qe("SegmentedControl",Mat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:b,radius:x,color:w,transitionDuration:S,transitionTimingFunction:T,variant:C,autoContrast:I,withItemsBorders:D,mod:k,...P}=n,M=Bt({name:"SegmentedControl",props:n,classes:LCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Lat}),$=co(),B=l.map(he=>typeof he=="string"?{label:he,value:he}:he),q=qZe(),[H,Y]=N.useState(null),[K,Q]=N.useState({}),L=(he,ke)=>{K[ke]=he,Q(K)},[z,W]=ma({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ue=B.find(he=>!he.disabled))==null?void 0:ue.value)??((we=l[0])==null?void 0:we.value)??null:null,onChange:d}),F=Du(p),V=B.map(he=>N.createElement(Ie,{...M("control"),mod:{active:z===he.value,orientation:b},key:he.value},N.createElement("input",{...M("input"),disabled:m||he.disabled,type:"radio",name:F,value:he.value,id:`${F}-${he.value}`,checked:z===he.value,onChange:()=>!g&&W(he.value),"data-focus-ring":$.focusRing,key:`${he.value}-input`}),N.createElement(Ie,{component:"label",...M("label"),mod:{active:z===he.value&&!(m||he.disabled),disabled:m||he.disabled,"read-only":g},htmlFor:`${F}-${he.value}`,ref:ke=>L(ke,he.value),__vars:{"--sc-label-color":w!==void 0?Av({color:w,theme:$,autoContrast:I}):void 0},key:`${he.value}-label`},_.jsx("span",{...M("innerLabel"),children:he.label})))),J=lo(t,he=>Y(he));return l.length===0?null:_.jsxs(Ie,{...M("root"),variant:C,size:h,ref:J,mod:[{"full-width":y,orientation:b,initialized:q,"with-items-borders":D},k],...P,role:"radiogroup",children:[typeof z=="string"&&_.jsx(PQ,{target:K[z],parent:H,component:"span",transitionDuration:"var(--sc-transition-duration)",...M("indicator")}),V]})});m5.classes=LCe;m5.displayName="@mantine/core/SegmentedControl";const Fat={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},T2=ft((e,t)=>{const n=qe("Select",Fat,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:b,onOptionSubmit:x,comboboxProps:w,readOnly:S,disabled:T,filter:C,limit:I,withScrollArea:D,maxDropdownHeight:k,size:P,searchable:M,rightSection:$,checkIconPosition:B,withCheckIcon:q,nothingFoundMessage:H,name:Y,form:K,searchValue:Q,defaultSearchValue:L,onSearchChange:z,allowDeselect:W,error:F,rightSectionPointerEvents:V,id:J,clearable:ue,clearButtonProps:we,hiddenInputProps:he,renderOption:ke,onClear:Pe,autoComplete:rt,scrollAreaProps:Re,...St}=n,Je=N.useMemo(()=>H2e(m),[m]),It=N.useMemo(()=>HQ(Je),[Je]),mt=Du(J),[Te,Fe,st]=ma({value:g,defaultValue:y,finalValue:null,onChange:p}),yt=typeof Te=="string"?It[Te]:void 0,[Dt,Qe]=ma({value:Q,defaultValue:L,finalValue:yt?yt.label:"",onChange:z}),_e=tJ({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),_e.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),_e.resetSelectedOption()}}),{resolvedClassNames:kt,resolvedStyles:Rt}=jD({props:n,styles:i,classNames:r});N.useEffect(()=>{b&&_e.selectFirstOption()},[b,Te]),N.useEffect(()=>{g===null&&Qe(""),typeof g=="string"&&yt&&Qe(yt.label)},[g,yt]);const Ee=ue&&!!Te&&!T&&!S&&_.jsx(Pr.ClearButton,{size:P,...we,onClear:()=>{Fe(null,null),Qe(""),Pe==null||Pe()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Pr,{store:_e,__staticSelector:"Select",classNames:kt,styles:Rt,unstyled:s,readOnly:S,onOptionSubmit:Oe=>{x==null||x(Oe);const ot=W&&It[Oe].value===Te?null:It[Oe],xt=ot?ot.value:null;Fe(xt,ot),!st&&Qe(typeof xt=="string"&&(ot==null?void 0:ot.label)||""),_e.closeDropdown()},size:P,...w,children:[_.jsx(Pr.Target,{targetType:M?"input":"button",autoComplete:rt,children:_.jsx(yd,{id:mt,ref:t,rightSection:$||Ee||_.jsx(Pr.Chevron,{size:P,error:F,unstyled:s}),rightSectionPointerEvents:V||(Ee?"all":"none"),...St,size:P,__staticSelector:"Select",disabled:T,readOnly:S||!M,value:Dt,onChange:Oe=>{Qe(Oe.currentTarget.value),_e.openDropdown(),b&&_e.selectFirstOption()},onFocus:Oe=>{M&&_e.openDropdown(),f==null||f(Oe)},onBlur:Oe=>{var ot;M&&_e.closeDropdown(),Qe(Te!=null&&((ot=It[Te])==null?void 0:ot.label)||""),d==null||d(Oe)},onClick:Oe=>{M?_e.openDropdown():_e.toggleDropdown(),h==null||h(Oe)},classNames:kt,styles:Rt,unstyled:s,pointer:!M,error:F})}),_.jsx(uCe,{data:Je,hidden:S||T,filter:C,search:Dt,limit:I,hiddenWhenEmpty:!M||!H,withScrollArea:D,maxDropdownHeight:k,filterOptions:M&&(yt==null?void 0:yt.label)!==Dt,value:Te,checkIconPosition:B,withCheckIcon:q,nothingFoundMessage:H,unstyled:s,labelId:St.label?`${mt}-label`:void 0,"aria-label":St.label?void 0:St["aria-label"],renderOption:ke,scrollAreaProps:Re})]}),_.jsx(Pr.HiddenInput,{value:Te,name:Y,form:K,disabled:T,...he})]})});T2.classes={...yd.classes,...Pr.classes};T2.displayName="@mantine/core/Select";function Bat({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=co(),s=t===void 0?e:t,o=Sv({"--sg-spacing-x":wo(ch(e)),"--sg-spacing-y":wo(ch(s)),"--sg-cols":(c=ch(n))==null?void 0:c.toString()}),a=Wi(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=wo(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=wo(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=sR(Wi(a),i).filter(f=>Wi(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return _.jsx(L_,{styles:o,media:l,selector:r})}function L7(e){return typeof e=="object"&&e!==null?Wi(e):[]}function jat(e){return e.sort((t,n)=>iR(t)-iR(n))}function Uat({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...L7(e),...L7(t),...L7(n)]));return jat(r)}function zat({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Sv({"--sg-spacing-x":wo(ch(e)),"--sg-spacing-y":wo(ch(i)),"--sg-cols":(l=ch(n))==null?void 0:l.toString()}),o=Uat({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=wo(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=wo(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return _.jsx(L_,{styles:s,container:u,selector:r})}var FCe={container:"m_925c2d2c",root:"m_2415a157"};const Vat={cols:1,spacing:"md",type:"media"},kJ=ft((e,t)=>{const n=qe("SimpleGrid",Vat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Bt({name:"SimpleGrid",classes:FCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=UD();return d==="container"?_.jsxs(_.Fragment,{children:[_.jsx(zat,{...n,selector:`.${m}`}),_.jsx("div",{...p("container"),children:_.jsx(Ie,{ref:t,...p("root",{className:m}),...h})})]}):_.jsxs(_.Fragment,{children:[_.jsx(Bat,{...n,selector:`.${m}`}),_.jsx(Ie,{ref:t,...p("root",{className:m}),...h})]})});kJ.classes=FCe;kJ.displayName="@mantine/core/SimpleGrid";const[BCe,g5]=Ha("SliderProvider was not found in tree"),RJ=N.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=g5();return _.jsx(Ie,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});RJ.displayName="@mantine/core/SliderRoot";const g$=N.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:b}=g5(),[x,w]=N.useState(!1),S=l||s||x||h&&p;return _.jsxs(Ie,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...b("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[m,_.jsx(Lg,{mounted:i!=null&&!!S,transition:"fade",duration:0,...u,children:T=>_.jsx("div",{...b("label",{style:T}),children:i})})]})});g$.displayName="@mantine/core/SliderThumb";function y$({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Hat({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function jCe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=g5();if(!e)return null;const u=e.map((l,c)=>N.createElement(Ie,{...a("markWrapper"),__vars:{"--mark-offset":`${y$({value:l.value,min:t,max:n})}%`},key:c},_.jsx(Ie,{...a("mark"),mod:{filled:Hat({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}jCe.displayName="@mantine/core/SliderMarks";function DJ({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=g5();return _.jsx(_.Fragment,{children:_.jsx(Ie,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(Ie,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(Ie,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(jCe,{...a,offset:i,disabled:r,inverted:s})]})})})}DJ.displayName="@mantine/core/SliderTrack";function Iq({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function jf(e,t){return parseFloat(e.toFixed(t))}function UCe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var y5={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const qat={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},Wat=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":qn(t,"slider-size"),"--slider-color":n?$i(n,e):void 0,"--slider-radius":i===void 0?void 0:Bi(i),"--slider-thumb-size":r!==void 0?$e(r):"calc(var(--slider-size) * 2)"}}),v5=ft((e,t)=>{const n=qe("Slider",qat,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:b,thumbLabel:x,showLabelOnHover:w,thumbChildren:S,disabled:T,unstyled:C,scale:I,inverted:D,className:k,style:P,vars:M,hiddenInputProps:$,...B}=n,q=Bt({name:"Slider",props:n,classes:y5,classNames:r,className:k,styles:i,style:P,vars:M,varsResolver:Wat,unstyled:C}),{dir:H}=$g(),[Y,K]=N.useState(!1),[Q,L]=ma({value:typeof s=="number"?P0(s,l,c):s,defaultValue:typeof h=="number"?P0(h,l,c):h,finalValue:P0(0,l,c),onChange:o}),z=N.useRef(Q),W=N.useRef(),F=N.useRef(),V=y$({value:Q,min:l,max:c}),J=I(Q),ue=typeof g=="function"?g(J):g,we=d??UCe(f),he=N.useCallback(({x:Re})=>{if(!T){const St=Iq({value:Re,min:l,max:c,step:f,precision:we});L(St),z.current=St}},[T,l,c,f,we,L]),{ref:ke,active:Pe}=NTe(he,{onScrubEnd:()=>a==null?void 0:a(z.current)},H),rt=Re=>{var St,Je,It,mt,Te,Fe;if(!T)switch(Re.key){case"ArrowUp":{Re.preventDefault(),(St=F.current)==null||St.focus();const st=jf(Math.min(Math.max(Q+f,l),c),we);L(st),a==null||a(st);break}case"ArrowRight":{Re.preventDefault(),(Je=F.current)==null||Je.focus();const st=jf(Math.min(Math.max(H==="rtl"?Q-f:Q+f,l),c),we);L(st),a==null||a(st);break}case"ArrowDown":{Re.preventDefault(),(It=F.current)==null||It.focus();const st=jf(Math.min(Math.max(Q-f,l),c),we);L(st),a==null||a(st);break}case"ArrowLeft":{Re.preventDefault(),(mt=F.current)==null||mt.focus();const st=jf(Math.min(Math.max(H==="rtl"?Q+f:Q-f,l),c),we);L(st),a==null||a(st);break}case"Home":{Re.preventDefault(),(Te=F.current)==null||Te.focus(),L(l),a==null||a(l);break}case"End":{Re.preventDefault(),(Fe=F.current)==null||Fe.focus(),L(c),a==null||a(c);break}}};return _.jsx(BCe,{value:{getStyles:q},children:_.jsxs(RJ,{...B,ref:lo(t,W),onKeyDownCapture:rt,onMouseDownCapture:()=>{var Re;return(Re=W.current)==null?void 0:Re.focus()},size:u,disabled:T,children:[_.jsx(DJ,{inverted:D,offset:0,filled:V,marks:m,min:l,max:c,value:J,disabled:T,containerProps:{ref:ke,onMouseEnter:w?()=>K(!0):void 0,onMouseLeave:w?()=>K(!1):void 0},children:_.jsx(g$,{max:c,min:l,value:J,position:V,dragging:Pe,label:ue,ref:F,labelTransitionProps:y,labelAlwaysOn:b,thumbLabel:x,showLabelOnHover:w,isHovered:Y,disabled:T,children:S})}),_.jsx("input",{type:"hidden",name:p,value:J,...$})]})})});v5.classes=y5;v5.displayName="@mantine/core/Slider";function Gat(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const Yat=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":qn(t,"slider-size"),"--slider-color":n?$i(n,e):void 0,"--slider-radius":i===void 0?void 0:Bi(i),"--slider-thumb-size":r!==void 0?$e(r):"calc(var(--slider-size) * 2)"}}),Kat={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},tT=ft((e,t)=>{const n=qe("RangeSlider",Kat,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:b,labelTransitionProps:x,labelAlwaysOn:w,thumbFromLabel:S,thumbToLabel:T,showLabelOnHover:C,thumbChildren:I,disabled:D,unstyled:k,scale:P,inverted:M,className:$,style:B,vars:q,hiddenInputProps:H,...Y}=n,K=Bt({name:"Slider",props:n,classes:y5,classNames:r,className:$,styles:i,style:B,vars:q,varsResolver:Yat,unstyled:k}),{dir:Q}=$g(),[L,z]=N.useState(-1),[W,F]=N.useState(!1),[V,J]=ma({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ue=N.useRef(V),we=N.useRef([]),he=N.useRef(void 0),ke=[y$({value:V[0],min:l,max:c}),y$({value:V[1],min:l,max:c})],Pe=p??UCe(h),rt=Qe=>{J(Qe),ue.current=Qe};N.useEffect(()=>{Array.isArray(s)&&(ue.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const Re=(Qe,_e,kt)=>{const Rt=[...ue.current];Rt[_e]=Qe,_e===0&&(Qe>Rt[1]-(f-1e-9)&&(Rt[1]=Math.min(Qe+f,c)),Qe>(c-(f-1e-9)||l)&&(Rt[_e]=ue.current[_e]),Rt[1]-Qe>d&&(Rt[1]=Qe+d)),_e===1&&(Qe<Rt[0]+f&&(Rt[0]=Math.max(Qe-f,l)),Qe<Rt[0]+f&&(Rt[_e]=ue.current[_e]),Qe-Rt[0]>d&&(Rt[0]=Qe-d)),Rt[0]=jf(Rt[0],Pe),Rt[1]=jf(Rt[1],Pe),rt(Rt),kt&&(a==null||a(ue.current))},St=Qe=>{if(!D){const _e=Iq({value:Qe,min:l,max:c,step:h,precision:Pe});Re(_e,he.current,!1)}},{ref:Je,active:It}=NTe(({x:Qe})=>St(Qe),{onScrubEnd:()=>a==null?void 0:a(ue.current)},Q);function mt(Qe){he.current=Qe}const Te=Qe=>{Je.current.focus();const _e=Je.current.getBoundingClientRect(),kt=Gat(Qe.nativeEvent),Rt=Iq({value:kt-_e.left,max:c,min:l,step:h,containerWidth:_e.width}),Ee=Math.abs(V[0]-Rt)>Math.abs(V[1]-Rt)?1:0,Oe=Q==="ltr"?Ee:Ee===1?0:1;he.current=Oe},Fe=()=>L!==1&&L!==0?(z(0),0):L,st=Qe=>{if(!D)switch(Qe.key){case"ArrowUp":{Qe.preventDefault();const _e=Fe();we.current[_e].focus(),Re(jf(Math.min(Math.max(ue.current[_e]+h,l),c),Pe),_e,!0);break}case"ArrowRight":{Qe.preventDefault();const _e=Fe();we.current[_e].focus(),Re(jf(Math.min(Math.max(Q==="rtl"?ue.current[_e]-h:ue.current[_e]+h,l),c),Pe),_e,!0);break}case"ArrowDown":{Qe.preventDefault();const _e=Fe();we.current[_e].focus(),Re(jf(Math.min(Math.max(ue.current[_e]-h,l),c),Pe),_e,!0);break}case"ArrowLeft":{Qe.preventDefault();const _e=Fe();we.current[_e].focus(),Re(jf(Math.min(Math.max(Q==="rtl"?ue.current[_e]+h:ue.current[_e]-h,l),c),Pe),_e,!0);break}}},yt={max:c,min:l,size:u,labelTransitionProps:x,labelAlwaysOn:w,onBlur:()=>z(-1)},Dt=Array.isArray(I);return _.jsx(BCe,{value:{getStyles:K},children:_.jsxs(RJ,{...Y,size:u,ref:t,disabled:D,children:[_.jsxs(DJ,{offset:ke[0],marksOffset:V[0],filled:ke[1]-ke[0],marks:y,inverted:M,min:l,max:c,value:V[1],disabled:D,containerProps:{ref:Je,onMouseEnter:C?()=>F(!0):void 0,onMouseLeave:C?()=>F(!1):void 0,onTouchStartCapture:Te,onTouchEndCapture:()=>{he.current=-1},onMouseDownCapture:Te,onMouseUpCapture:()=>{he.current=-1},onKeyDownCapture:st},children:[_.jsx(g$,{...yt,value:P(V[0]),position:ke[0],dragging:It,label:typeof b=="function"?b(jf(P(V[0]),Pe)):b,ref:Qe=>{we.current[0]=Qe},thumbLabel:S,onMouseDown:()=>mt(0),onFocus:()=>z(0),showLabelOnHover:C,isHovered:W,disabled:D,children:Dt?I[0]:I}),_.jsx(g$,{...yt,thumbLabel:T,value:P(V[1]),position:ke[1],dragging:It,label:typeof b=="function"?b(jf(P(V[1]),Pe)):b,ref:Qe=>{we.current[1]=Qe},onMouseDown:()=>mt(1),onFocus:()=>z(1),showLabelOnHover:C,isHovered:W,disabled:D,children:Dt?I[1]:I})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:V[0],...H}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:V[1],...H})]})})});tT.classes=y5;tT.displayName="@mantine/core/RangeSlider";const Xat={},Zc=ft((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=qe("Space",Xat,e);return _.jsx(Ie,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Zc.displayName="@mantine/core/Space";var zCe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const Qat={maxHeight:100,initialState:!1},Jat=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),NJ=ft((e,t)=>{const n=qe("Spoiler",Qat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,b=Bt({name:"Spoiler",classes:zCe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Jat}),x=Du(g),w=`${x}-region`,[S,T]=N.useState(l),{ref:C,height:I}=FZe(),D=S?f:d,k=D!==null&&c<I;return _.jsxs(Ie,{...b("root"),id:x,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&_.jsx(kv,{component:"button",type:"button",ref:p,onClick:()=>T(P=>!P),"aria-expanded":S,"aria-controls":w,...b("control"),children:D}),_.jsx("div",{...b("content",{style:{maxHeight:S?I?$e(I):void 0:$e(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:C,children:h})})]})});NJ.classes=zCe;NJ.displayName="@mantine/core/Spoiler";var VCe={root:"m_6d731127"};const Zat={gap:"md",align:"stretch",justify:"flex-start"},eut=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":wo(t),"--stack-align":n,"--stack-justify":r}}),aa=ft((e,t)=>{const n=qe("Stack",Zat,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Bt({name:"Stack",props:n,classes:VCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eut});return _.jsx(Ie,{ref:t,...p("root"),variant:d,...h})});aa.classes=VCe;aa.displayName="@mantine/core/Stack";const HCe=N.createContext(null),tut=HCe.Provider,nut=()=>N.useContext(HCe),rut={},PJ=ft((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=qe("SwitchGroup",rut,e),[c,f]=ma({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(tut,{value:{value:c,onChange:d,size:s},children:_.jsx(Gs.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(rJ,{role:"group",children:a})})})});PJ.classes=Gs.Wrapper.classes;PJ.displayName="@mantine/core/SwitchGroup";var qCe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const iut={labelPosition:"right"},sut=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Bi(t),"--switch-height":qn(r,"switch-height"),"--switch-width":qn(r,"switch-width"),"--switch-thumb-size":qn(r,"switch-thumb-size"),"--switch-label-font-size":qn(r,"switch-label-font-size"),"--switch-track-label-padding":qn(r,"switch-track-label-padding"),"--switch-color":n?$i(n,e):void 0}}),hS=ft((e,t)=>{const n=qe("Switch",iut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:b,checked:x,defaultChecked:w,onChange:S,labelPosition:T,description:C,error:I,disabled:D,variant:k,rootRef:P,mod:M,...$}=n,B=nut(),q=p||(B==null?void 0:B.size),H=Bt({name:"Switch",props:n,classes:qCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sut}),{styleProps:Y,rest:K}=F_($),Q=Du(h),L=B?{checked:B.value.includes(K.value),onChange:B.onChange}:{},[z,W]=ma({value:L.checked??x,defaultValue:w,finalValue:!1});return _.jsxs(ZF,{...H("root"),__staticSelector:"Switch",__stylesApiProps:n,id:Q,size:q,labelPosition:T,label:c,description:C,error:I,disabled:D,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":L.checked||void 0,variant:k,ref:P,mod:M,...Y,...g,children:[_.jsx("input",{...K,disabled:D,checked:z,onChange:F=>{var V;B?(V=L.onChange)==null||V.call(L,F):S==null||S(F),W(F.currentTarget.checked)},id:Q,ref:t,type:"checkbox",role:"switch",...H("input")}),_.jsxs(Ie,{"aria-hidden":"true",mod:{error:I,"label-position":T},...H("track"),children:[_.jsx(Ie,{component:"span",mod:"reduce-motion",...H("thumb"),children:b}),_.jsx("span",{...H("trackLabel"),children:z?d:f})]})]})});hS.classes={...qCe,...Q2e};hS.displayName="@mantine/core/Switch";hS.Group=PJ;const[out,aut]=Ha("Table component was not found in the tree");var KD={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function uut(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function U_(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=ft((i,s)=>{const o=qe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=aut();return _.jsx(Ie,{component:e,ref:s,...uut(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=KD,r}const kq=U_("th",{columnBorder:!0}),WCe=U_("td",{columnBorder:!0}),D4=U_("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),GCe=U_("thead",{stickyHeader:!0}),YCe=U_("tbody"),KCe=U_("tfoot"),XCe=U_("caption",{captionSide:!0});function OJ({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(XCe,{children:e.caption}),e.head&&_.jsx(GCe,{children:_.jsx(D4,{children:e.head.map((t,n)=>_.jsx(kq,{children:t},n))})}),e.body&&_.jsx(YCe,{children:e.body.map((t,n)=>_.jsx(D4,{children:t.map((r,i)=>_.jsx(WCe,{children:r},i))},n))}),e.foot&&_.jsx(KCe,{children:_.jsx(D4,{children:e.foot.map((t,n)=>_.jsx(kq,{children:t},n))})})]})}OJ.displayName="@mantine/core/TableDataRenderer";const lut={type:"scrollarea"},cut=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":$e(t),"--table-overflow":n==="native"?"auto":void 0}}),$J=ft((e,t)=>{const n=qe("TableScrollContainer",lut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Bt({name:"TableScrollContainer",classes:KD,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cut,rootSelector:"scrollContainer"});return _.jsx(Ie,{component:f==="scrollarea"?lg:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});$J.classes=KD;$J.displayName="@mantine/core/TableScrollContainer";const fut={withRowBorders:!0,verticalSpacing:7},dut=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":wo(r),"--table-vertical-spacing":wo(i),"--table-border-color":s?$i(s,e):void 0,"--table-striped-color":u&&o?$i(o,e):void 0,"--table-highlight-on-hover-color":l&&a?$i(a,e):void 0,"--table-sticky-header-offset":f?$e(c):void 0}}),un=ft((e,t)=>{const n=qe("Table",fut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:b,borderColor:x,layout:w,variant:S,data:T,children:C,stickyHeader:I,stickyHeaderOffset:D,mod:k,...P}=n,M=Bt({name:"Table",props:n,className:i,style:s,classes:KD,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:dut});return _.jsx(out,{value:{getStyles:M,stickyHeader:I,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(Ie,{component:"table",variant:S,ref:t,mod:[{"data-with-table-border":b},k],...M("table"),...P,children:C||!!T&&_.jsx(OJ,{data:T})})})});un.classes=KD;un.displayName="@mantine/core/Table";un.Td=WCe;un.Th=kq;un.Tr=D4;un.Thead=GCe;un.Tbody=YCe;un.Tfoot=KCe;un.Caption=XCe;un.ScrollContainer=$J;un.DataRenderer=OJ;const[hut,MJ]=Ha("Tabs component was not found in the tree");var XD={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const put={},LJ=ft((e,t)=>{const n=qe("TabsList",put,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=MJ();return _.jsx(Ie,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});LJ.classes=XD;LJ.displayName="@mantine/core/TabsList";const mut={},FJ=ft((e,t)=>{const n=qe("TabsPanel",mut,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=MJ(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(Ie,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});FJ.classes=XD;FJ.displayName="@mantine/core/TabsPanel";const gut={},BJ=ft((e,t)=>{const n=qe("TabsTab",gut,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,b=co(),{dir:x}=$g(),w=MJ(),S=a===w.value,T=I=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(I)},C={classNames:h,styles:p,props:n};return _.jsxs(of,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...C}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:S,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":S,tabIndex:S||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?$i(f,b):void 0},onKeyDown:ZX({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:x,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",C),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",C),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",C),"data-position":"right",children:s})]})});BJ.classes=XD;BJ.displayName="@mantine/core/TabsTab";const Xde="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",yut={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},vut=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Bi(t),"--tabs-color":$i(n,e),"--tabs-text-color":h2(r,e)?Av({color:n,theme:e,autoContrast:r}):void 0}}),Gr=ft((e,t)=>{const n=qe("Tabs",yut,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:b,styles:x,unstyled:w,className:S,style:T,vars:C,autoContrast:I,mod:D,...k}=n,P=Du(l),[M,$]=ma({value:i,defaultValue:r,finalValue:null,onChange:s}),B=Bt({name:"Tabs",props:n,classes:XD,className:S,style:T,classNames:b,styles:x,unstyled:w,vars:C,varsResolver:vut});return _.jsx(hut,{value:{placement:g,value:M,orientation:o,id:P,loop:u,activateTabWithKeyboard:c,getTabId:u$(`${P}-tab`,Xde),getPanelId:u$(`${P}-panel`,Xde),onChange:$,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:B},children:_.jsx(Ie,{ref:t,id:P,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},D],...B("root"),...k,children:a})})});Gr.classes=XD;Gr.displayName="@mantine/core/Tabs";Gr.Tab=BJ;Gr.Panel=FJ;Gr.List=LJ;const but={},O0=ft((e,t)=>{const n=qe("TextInput",but,e);return _.jsx(yd,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});O0.classes=yd.classes;O0.displayName="@mantine/core/TextInput";const xut=["h1","h2","h3","h4","h5","h6"];function _ut(e,t){const n=t!==void 0?t:`h${e}`;return xut.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:$e(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var QCe={root:"m_8a5d1357"};const wut={order:1},Eut=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=_ut(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},zs=ft((e,t)=>{const n=qe("Title",wut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Bt({name:"Title",props:n,classes:QCe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Eut});return[1,2,3,4,5,6].includes(u)?_.jsx(Ie,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});zs.classes=QCe;zs.displayName="@mantine/core/Title";function Sut(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function Tut(e){return N.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function Cut(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const Aut=()=>Sut({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),z_=Aut(),Iut=(e=z_)=>Tut(e);function C2(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=Cut(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function kut(e,t=z_){const n=e.id||cS();return C2(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function JCe(e,t=z_){return C2(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function Rut(e,t=z_){return C2(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function Dut(e=z_){C2(e,()=>[])}function Nut(e=z_){C2(e,t=>t.slice(0,e.getState().limit))}const V_={show:kut,hide:JCe,update:Rut,clean:Dut,cleanQueue:Nut,updateState:C2};function Rq(){return Rq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rq.apply(null,arguments)}function ZCe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Dq(e,t){return Dq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Dq(e,t)}function eAe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Dq(e,t)}var tAe={exports:{}},Put="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Out=Put,$ut=Out;function nAe(){}function rAe(){}rAe.resetWarningCache=nAe;var Mut=function(){function e(r,i,s,o,a,u){if(u!==$ut){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:rAe,resetWarningCache:nAe};return n.PropTypes=n,n};tAe.exports=Mut();var Lut=tAe.exports;const Qde=Cm(Lut),Jde={disabled:!1},v$=ti.createContext(null);var Fut=function(t){return t.scrollTop},eI="unmounted",Ob="exited",$b="entering",vE="entered",Nq="exiting",jg=function(e){eAe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Ob,s.appearStatus=$b):u=vE:r.unmountOnExit||r.mountOnEnter?u=eI:u=Ob,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===eI?{status:Ob}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==$b&&o!==vE&&(s=$b):(o===$b||o===vE)&&(s=Nq)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===$b){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:ZA.findDOMNode(this);o&&Fut(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ob&&this.setState({status:eI})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[ZA.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||Jde.disabled){this.safeSetState({status:vE},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:$b},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:vE},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:ZA.findDOMNode(this);if(!s||Jde.disabled){this.safeSetState({status:Ob},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:Nq},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Ob},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:ZA.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===eI)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=ZCe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ti.createElement(v$.Provider,{value:null},typeof o=="function"?o(i,a):ti.cloneElement(ti.Children.only(o),a))},t}(ti.Component);jg.contextType=v$;jg.propTypes={};function Gw(){}jg.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Gw,onEntering:Gw,onEntered:Gw,onExit:Gw,onExiting:Gw,onExited:Gw};jg.UNMOUNTED=eI;jg.EXITED=Ob;jg.ENTERING=$b;jg.ENTERED=vE;jg.EXITING=Nq;function But(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jJ(e,t){var n=function(s){return t&&N.isValidElement(s)?t(s):s},r=Object.create(null);return e&&N.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function jut(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function hx(e,t,n){return n[t]!=null?n[t]:e.props[t]}function Uut(e,t){return jJ(e.children,function(n){return N.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:hx(n,"appear",e),enter:hx(n,"enter",e),exit:hx(n,"exit",e)})})}function zut(e,t,n){var r=jJ(e.children),i=jut(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(N.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=N.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:hx(o,"exit",e),enter:hx(o,"enter",e)}):!u&&a&&!c?i[s]=N.cloneElement(o,{in:!1}):u&&a&&N.isValidElement(l)&&(i[s]=N.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:hx(o,"exit",e),enter:hx(o,"enter",e)}))}}),i}var Vut=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Hut={component:"div",childFactory:function(t){return t}},Ry=function(e){eAe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(But(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?Uut(i,a):zut(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=jJ(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=Rq({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=ZCe(i,["component","childFactory"]),u=this.state.contextValue,l=Vut(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?ti.createElement(v$.Provider,{value:u},l):ti.createElement(v$.Provider,{value:u},ti.createElement(s,a,l))},t}(ti.Component);Ry.propTypes={};Ry.defaultProps=Hut;const iAe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function qut(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),iAe.reduce((n,r)=>(n[r]=[],n),{}))}const Zde={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},Wut={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function Gut({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Zde[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:Wut[o]},l={opacity:0,maxHeight:0,transform:Zde[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function Yut(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const sAe=N.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=Yut(n,e.autoClose),l=N.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return N.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),N.useEffect(()=>(d(),c),[u]),_.jsx(_J,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});sAe.displayName="@mantine/notifications/NotificationContainer";var oAe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const Kut=jg,Xut={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Bh("overlay"),store:z_,withinPortal:!0},Qut=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":$e(n)}}),Ug=ft((e,t)=>{const n=qe("Notifications",Xut,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:b,...x}=n,w=co(),S=Iut(g),T=OZe(),C=zF(),I=N.useRef({}),D=N.useRef(0),P=(w.respectReducedMotion?C:!1)?1:f,M=Bt({name:"Notifications",classes:oAe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Qut});N.useEffect(()=>{g==null||g.updateState(q=>({...q,limit:p||5,defaultPosition:l}))},[p,l]),im(()=>{S.notifications.length>D.current&&setTimeout(()=>T(),0),D.current=S.notifications.length},[S.notifications]);const $=qut(S.notifications,l),B=iAe.reduce((q,H)=>(q[H]=$[H].map(({style:Y,...K})=>_.jsx(Kut,{timeout:P,onEnter:()=>I.current[K.id].offsetHeight,nodeRef:{current:I.current[K.id]},children:Q=>_.jsx(sAe,{ref:L=>{I.current[K.id]=L},data:K,onHide:L=>JCe(L,g),autoClose:c,...M("notification",{style:{...Gut({state:Q,position:H,transitionDuration:P,maxHeight:h}),...Y}})})},K.id)),q),{});return _.jsxs(y2,{withinPortal:b,...y,children:[_.jsx(Ie,{...M("root"),"data-position":"top-center",ref:t,...x,children:_.jsx(Ry,{children:B["top-center"]})}),_.jsx(Ie,{...M("root"),"data-position":"top-left",...x,children:_.jsx(Ry,{children:B["top-left"]})}),_.jsx(Ie,{...M("root"),"data-position":"top-right",...x,children:_.jsx(Ry,{children:B["top-right"]})}),_.jsx(Ie,{...M("root"),"data-position":"bottom-right",...x,children:_.jsx(Ry,{children:B["bottom-right"]})}),_.jsx(Ie,{...M("root"),"data-position":"bottom-left",...x,children:_.jsx(Ry,{children:B["bottom-left"]})}),_.jsx(Ie,{...M("root"),"data-position":"bottom-center",...x,children:_.jsx(Ry,{children:B["bottom-center"]})})]})});Ug.classes=oAe;Ug.displayName="@mantine/notifications/Notifications";Ug.show=V_.show;Ug.hide=V_.hide;Ug.update=V_.update;Ug.clean=V_.clean;Ug.cleanQueue=V_.cleanQueue;Ug.updateState=V_.updateState;const aAe=N.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),fo=()=>N.useContext(aAe);function Jut({children:e}){const[t,n]=N.useState(void 0),r=N.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(aAe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dR(){return dR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dR.apply(this,arguments)}var Qy;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qy||(Qy={}));const ehe="popstate";function Zut(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return Pq("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:lAe(i)}return tlt(t,n,null,e)}function io(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function uAe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function elt(){return Math.random().toString(36).substr(2,8)}function the(e,t){return{usr:e.state,key:e.key,idx:t}}function Pq(e,t,n,r){return n===void 0&&(n=null),dR({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?A2(t):t,{state:n,key:t&&t.key||r||elt()})}function lAe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function A2(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function tlt(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Qy.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(dR({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Qy.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Qy.Push;let b=Pq(m.location,g,y);l=c()+1;let x=the(b,l),w=m.createHref(b);try{o.pushState(x,"",w)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Qy.Replace;let b=Pq(m.location,g,y);l=c();let x=the(b,l),w=m.createHref(b);o.replaceState(x,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:lAe(g);return b=b.replace(/ $/,"%20"),io(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(ehe,f),u=g,()=>{i.removeEventListener(ehe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var nhe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(nhe||(nhe={}));function nlt(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?A2(t):t,i=dAe(r.pathname||"/",n);if(i==null)return null;let s=cAe(e);rlt(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=mlt(i);o=dlt(s[a],u)}return o}function cAe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(io(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=b1([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(io(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),cAe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:clt(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of fAe(s.path))i(s,o,u)}),t}function fAe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=fAe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function rlt(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:flt(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ilt=/^:[\w-]+$/,slt=3,olt=2,alt=1,ult=10,llt=-2,rhe=e=>e==="*";function clt(e,t){let n=e.split("/"),r=n.length;return n.some(rhe)&&(r+=llt),t&&(r+=olt),n.filter(i=>!rhe(i)).reduce((i,s)=>i+(ilt.test(s)?slt:s===""?alt:ult),r)}function flt(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function dlt(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=hlt({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:b1([i,c.pathname]),pathnameBase:blt(b1([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=b1([i,c.pathnameBase]))}return s}function hlt(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=plt(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function plt(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),uAe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function mlt(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return uAe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function dAe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function glt(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?A2(e):e;return{pathname:n?n.startsWith("/")?n:ylt(n,t):t,search:xlt(r),hash:_lt(i)}}function ylt(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function F7(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function vlt(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function UJ(e,t){let n=vlt(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zJ(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=A2(e):(i=dR({},e),io(!i.pathname||!i.pathname.includes("?"),F7("?","pathname","search",i)),io(!i.pathname||!i.pathname.includes("#"),F7("#","pathname","hash",i)),io(!i.search||!i.search.includes("#"),F7("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=glt(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const b1=e=>e.join("/").replace(/\/\/+/g,"/"),blt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),xlt=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_lt=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wlt(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const hAe=["post","put","patch","delete"];new Set(hAe);const Elt=["get",...hAe];new Set(Elt);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hR(){return hR=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hR.apply(this,arguments)}const VJ=N.createContext(null),Slt=N.createContext(null),H_=N.createContext(null),b5=N.createContext(null),Im=N.createContext({outlet:null,matches:[],isDataRoute:!1}),pAe=N.createContext(null);function mAe(e,t){let{relative:n}={};I2()||io(!1);let{basename:r,navigator:i}=N.useContext(H_),{hash:s,pathname:o,search:a}=Ilt(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:b1([r,o])),i.createHref({pathname:u,search:a,hash:s})}function I2(){return N.useContext(b5)!=null}function Nv(){return I2()||io(!1),N.useContext(b5).location}function gAe(e){N.useContext(H_).static||N.useLayoutEffect(e)}function jh(){let{isDataRoute:e}=N.useContext(Im);return e?Blt():Tlt()}function Tlt(){I2()||io(!1);let e=N.useContext(VJ),{basename:t,future:n,navigator:r}=N.useContext(H_),{matches:i}=N.useContext(Im),{pathname:s}=Nv(),o=JSON.stringify(UJ(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return gAe(()=>{a.current=!0}),N.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=zJ(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:b1([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const Clt=N.createContext(null);function Alt(e){let t=N.useContext(Im).outlet;return t&&N.createElement(Clt.Provider,{value:e},t)}function sm(){let{matches:e}=N.useContext(Im),t=e[e.length-1];return t?t.params:{}}function Ilt(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(H_),{matches:i}=N.useContext(Im),{pathname:s}=Nv(),o=JSON.stringify(UJ(i,r.v7_relativeSplatPath));return N.useMemo(()=>zJ(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function yAe(e,t){return klt(e,t)}function klt(e,t,n,r){I2()||io(!1);let{navigator:i}=N.useContext(H_),{matches:s}=N.useContext(Im),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Nv(),c;if(t){var f;let g=typeof t=="string"?A2(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||io(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=nlt(e,{pathname:h}),m=Olt(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:b1([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:b1([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?N.createElement(b5.Provider,{value:{location:hR({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Qy.Pop}},m):m}function Rlt(){let e=Flt(),t=wlt(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:i},n):null,null)}const Dlt=N.createElement(Rlt,null);class Nlt extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(Im.Provider,{value:this.props.routeContext},N.createElement(pAe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Plt(e){let{routeContext:t,match:n,children:r}=e,i=N.useContext(VJ);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Im.Provider,{value:t},r)}function Olt(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||io(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||Dlt,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),b=()=>{let x;return h?x=m:p?x=g:f.route.Component?x=N.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=c,N.createElement(Plt,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?N.createElement(Nlt,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var vAe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(vAe||{}),b$=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(b$||{});function $lt(e){let t=N.useContext(VJ);return t||io(!1),t}function Mlt(e){let t=N.useContext(Slt);return t||io(!1),t}function Llt(e){let t=N.useContext(Im);return t||io(!1),t}function bAe(e){let t=Llt(),n=t.matches[t.matches.length-1];return n.route.id||io(!1),n.route.id}function Flt(){var e;let t=N.useContext(pAe),n=Mlt(b$.UseRouteError),r=bAe(b$.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function Blt(){let{router:e}=$lt(vAe.UseNavigateStable),t=bAe(b$.UseNavigateStable),n=N.useRef(!1);return gAe(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,hR({fromRouteId:t},s)))},[e,t])}function HJ(e){let{to:t,replace:n,state:r,relative:i}=e;I2()||io(!1);let{future:s,static:o}=N.useContext(H_),{matches:a}=N.useContext(Im),{pathname:u}=Nv(),l=jh(),c=zJ(t,UJ(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return N.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function jlt(e){return Alt(e.context)}function Mb(e){io(!1)}function Ult(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Qy.Pop,navigator:s,static:o=!1,future:a}=e;I2()&&io(!1);let u=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:u,navigator:s,static:o,future:hR({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=A2(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=N.useMemo(()=>{let g=dAe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:N.createElement(H_.Provider,{value:l},N.createElement(b5.Provider,{children:n,value:m}))}function zlt(e){let{children:t,location:n}=e;return yAe(Oq(t),n)}new Promise(()=>{});function Oq(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,i)=>{if(!N.isValidElement(r))return;let s=[...t,i];if(r.type===N.Fragment){n.push.apply(n,Oq(r.props.children,s));return}r.type!==Mb&&io(!1),!r.props.index||!r.props.children||io(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Oq(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $q(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Vlt(e,t){let n=$q(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Hlt="6";try{window.__reactRouterVersion=Hlt}catch{}const qlt="startTransition",ihe=M6[qlt];function Wlt(e){let{basename:t,children:n,future:r,window:i}=e,s=N.useRef();s.current==null&&(s.current=Zut({window:i,v5Compat:!0}));let o=s.current,[a,u]=N.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=N.useCallback(f=>{l&&ihe?ihe(()=>u(f)):u(f)},[u,l]);return N.useLayoutEffect(()=>o.listen(c),[o,c]),N.createElement(Ult,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var she;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(she||(she={}));var ohe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(ohe||(ohe={}));function Pv(e){let t=N.useRef($q(e)),n=N.useRef(!1),r=Nv(),i=N.useMemo(()=>Vlt(r.search,n.current?null:t.current),[r.search]),s=jh(),o=N.useCallback((a,u)=>{const l=$q(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const qJ=N.createContext(null);qJ.displayName="@mantine/modals/ModalsContext";function Glt(){const e=N.useContext(qJ);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Ylt({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=Glt(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(Ie,{mb:"md",children:l}),_.jsxs(bi,{justify:"flex-end",...o,children:[_.jsx(gn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(gn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[Klt,x5]=KZe("mantine-modals");x5("openModal");x5("closeModal");x5("closeAllModals");const ahe=x5("openConfirmModal");function uhe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function Xlt(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;uhe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{uhe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function Qlt(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function Jlt({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=N.useReducer(Xlt,{modals:[],current:null}),o=N.useRef(i);o.current=i;const a=N.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=N.useCallback(({modalId:g,...y})=>{const b=g||cS();return s({type:"OPEN",modal:{id:b,type:"content",props:y}}),b},[s]),l=N.useCallback(({modalId:g,...y})=>{const b=g||cS();return s({type:"OPEN",modal:{id:b,type:"confirm",props:y}}),b},[s]),c=N.useCallback((g,{modalId:y,...b})=>{const x=y||cS();return s({type:"OPEN",modal:{id:x,type:"context",props:b,ctx:g}}),x},[s]),f=N.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);Klt({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...b}=g.props,x=r[g.ctx];return{modalProps:b,content:_.jsx(x,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:b}=Qlt(g.props);return{modalProps:y,content:_.jsx(Ylt,{...b,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...b}=g.props;return{modalProps:b,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(qJ.Provider,{value:d,children:[_.jsx(qs,{zIndex:Bh("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zlt={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=(e,t,n,r)=>{const i=N.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>N.createElement("svg",{ref:f,...Zlt[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>N.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ect=Yn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tct=Yn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JI=Yn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nct=Yn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rct=Yn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ict=Yn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sct=Yn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oct=Yn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xAe=Yn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Ae=Yn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var act=Yn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lhe=Yn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uct=Yn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lct=Yn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cct=Yn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fct=Yn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dct=Yn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hct=Yn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WJ=Yn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pct=Yn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mct=Yn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gct=Yn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yct=Yn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vct=Yn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bct=Yn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xct=Yn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wAe=Yn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _ct=Yn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wct=Yn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ect=Yn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sct=Yn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tct=Yn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EAe=Yn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Cct=Yn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SAe=Yn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Act=Yn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TAe=Yn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GJ=Yn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YJ=Yn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ict=Yn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kct=Yn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rct=Yn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function CAe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const ul="/study/";function che(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function AAe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Dct=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Nct=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Pct={};function fhe(e,t){return(Pct.jsx?Nct:Dct).test(e)}const Oct=/[ \t\n\f\r]/g;function $ct(e){return typeof e=="object"?e.type==="text"?dhe(e.value):!1:dhe(e)}function dhe(e){return e.replace(Oct,"")===""}let QD=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};QD.prototype.property={};QD.prototype.normal={};QD.prototype.space=null;function IAe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new QD(n,r,t)}function pR(e){return e.toLowerCase()}let bd=class{constructor(t,n){this.property=t,this.attribute=n}};bd.prototype.space=null;bd.prototype.boolean=!1;bd.prototype.booleanish=!1;bd.prototype.overloadedBoolean=!1;bd.prototype.number=!1;bd.prototype.commaSeparated=!1;bd.prototype.spaceSeparated=!1;bd.prototype.commaOrSpaceSeparated=!1;bd.prototype.mustUseProperty=!1;bd.prototype.defined=!1;let Mct=0;const Vn=q_(),vo=q_(),kAe=q_(),wt=q_(),Yi=q_(),pS=q_(),Pc=q_();function q_(){return 2**++Mct}const Mq=Object.freeze(Object.defineProperty({__proto__:null,boolean:Vn,booleanish:vo,commaOrSpaceSeparated:Pc,commaSeparated:pS,number:wt,overloadedBoolean:kAe,spaceSeparated:Yi},Symbol.toStringTag,{value:"Module"})),B7=Object.keys(Mq);class KJ extends bd{constructor(t,n,r,i){let s=-1;if(super(t,n),hhe(this,"space",i),typeof r=="number")for(;++s<B7.length;){const o=B7[s];hhe(this,B7[s],(r&Mq[o])===Mq[o])}}}KJ.prototype.defined=!0;function hhe(e,t,n){n&&(e[t]=n)}const Lct={}.hasOwnProperty;function k2(e){const t={},n={};let r;for(r in e.properties)if(Lct.call(e.properties,r)){const i=e.properties[r],s=new KJ(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[pR(r)]=r,n[pR(s.attribute)]=r}return new QD(t,n,e.space)}const RAe=k2({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),DAe=k2({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function NAe(e,t){return t in e?e[t]:t}function PAe(e,t){return NAe(e,t.toLowerCase())}const OAe=k2({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:PAe,properties:{xmlns:null,xmlnsXLink:null}}),$Ae=k2({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:vo,ariaAutoComplete:null,ariaBusy:vo,ariaChecked:vo,ariaColCount:wt,ariaColIndex:wt,ariaColSpan:wt,ariaControls:Yi,ariaCurrent:null,ariaDescribedBy:Yi,ariaDetails:null,ariaDisabled:vo,ariaDropEffect:Yi,ariaErrorMessage:null,ariaExpanded:vo,ariaFlowTo:Yi,ariaGrabbed:vo,ariaHasPopup:null,ariaHidden:vo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Yi,ariaLevel:wt,ariaLive:null,ariaModal:vo,ariaMultiLine:vo,ariaMultiSelectable:vo,ariaOrientation:null,ariaOwns:Yi,ariaPlaceholder:null,ariaPosInSet:wt,ariaPressed:vo,ariaReadOnly:vo,ariaRelevant:null,ariaRequired:vo,ariaRoleDescription:Yi,ariaRowCount:wt,ariaRowIndex:wt,ariaRowSpan:wt,ariaSelected:vo,ariaSetSize:wt,ariaSort:null,ariaValueMax:wt,ariaValueMin:wt,ariaValueNow:wt,ariaValueText:null,role:null}}),Fct=k2({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:PAe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:pS,acceptCharset:Yi,accessKey:Yi,action:null,allow:null,allowFullScreen:Vn,allowPaymentRequest:Vn,allowUserMedia:Vn,alt:null,as:null,async:Vn,autoCapitalize:null,autoComplete:Yi,autoFocus:Vn,autoPlay:Vn,blocking:Yi,capture:null,charSet:null,checked:Vn,cite:null,className:Yi,cols:wt,colSpan:null,content:null,contentEditable:vo,controls:Vn,controlsList:Yi,coords:wt|pS,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Vn,defer:Vn,dir:null,dirName:null,disabled:Vn,download:kAe,draggable:vo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Vn,formTarget:null,headers:Yi,height:wt,hidden:Vn,high:wt,href:null,hrefLang:null,htmlFor:Yi,httpEquiv:Yi,id:null,imageSizes:null,imageSrcSet:null,inert:Vn,inputMode:null,integrity:null,is:null,isMap:Vn,itemId:null,itemProp:Yi,itemRef:Yi,itemScope:Vn,itemType:Yi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Vn,low:wt,manifest:null,max:null,maxLength:wt,media:null,method:null,min:null,minLength:wt,multiple:Vn,muted:Vn,name:null,nonce:null,noModule:Vn,noValidate:Vn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Vn,optimum:wt,pattern:null,ping:Yi,placeholder:null,playsInline:Vn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Vn,referrerPolicy:null,rel:Yi,required:Vn,reversed:Vn,rows:wt,rowSpan:wt,sandbox:Yi,scope:null,scoped:Vn,seamless:Vn,selected:Vn,shadowRootClonable:Vn,shadowRootDelegatesFocus:Vn,shadowRootMode:null,shape:null,size:wt,sizes:null,slot:null,span:wt,spellCheck:vo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:wt,step:null,style:null,tabIndex:wt,target:null,title:null,translate:null,type:null,typeMustMatch:Vn,useMap:null,value:vo,width:wt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Yi,axis:null,background:null,bgColor:null,border:wt,borderColor:null,bottomMargin:wt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Vn,declare:Vn,event:null,face:null,frame:null,frameBorder:null,hSpace:wt,leftMargin:wt,link:null,longDesc:null,lowSrc:null,marginHeight:wt,marginWidth:wt,noResize:Vn,noHref:Vn,noShade:Vn,noWrap:Vn,object:null,profile:null,prompt:null,rev:null,rightMargin:wt,rules:null,scheme:null,scrolling:vo,standby:null,summary:null,text:null,topMargin:wt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:wt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Vn,disableRemotePlayback:Vn,prefix:null,property:null,results:wt,security:null,unselectable:null}}),Bct=k2({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:NAe,properties:{about:Pc,accentHeight:wt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:wt,amplitude:wt,arabicForm:null,ascent:wt,attributeName:null,attributeType:null,azimuth:wt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:wt,by:null,calcMode:null,capHeight:wt,className:Yi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:wt,diffuseConstant:wt,direction:null,display:null,dur:null,divisor:wt,dominantBaseline:null,download:Vn,dx:null,dy:null,edgeMode:null,editable:null,elevation:wt,enableBackground:null,end:null,event:null,exponent:wt,externalResourcesRequired:null,fill:null,fillOpacity:wt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:pS,g2:pS,glyphName:pS,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:wt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:wt,horizOriginX:wt,horizOriginY:wt,id:null,ideographic:wt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:wt,k:wt,k1:wt,k2:wt,k3:wt,k4:wt,kernelMatrix:Pc,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:wt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:wt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:wt,overlineThickness:wt,paintOrder:null,panose1:null,path:null,pathLength:wt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Yi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:wt,pointsAtY:wt,pointsAtZ:wt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Pc,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Pc,rev:Pc,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Pc,requiredFeatures:Pc,requiredFonts:Pc,requiredFormats:Pc,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:wt,specularExponent:wt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:wt,strikethroughThickness:wt,string:null,stroke:null,strokeDashArray:Pc,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:wt,strokeOpacity:wt,strokeWidth:null,style:null,surfaceScale:wt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Pc,tabIndex:wt,tableValues:null,target:null,targetX:wt,targetY:wt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Pc,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:wt,underlineThickness:wt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:wt,values:null,vAlphabetic:wt,vMathematical:wt,vectorEffect:null,vHanging:wt,vIdeographic:wt,version:null,vertAdvY:wt,vertOriginX:wt,vertOriginY:wt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:wt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),jct=/^data[-\w.:]+$/i,phe=/-[a-z]/g,Uct=/[A-Z]/g;function _5(e,t){const n=pR(t);let r=t,i=bd;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&jct.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(phe,Vct);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!phe.test(s)){let o=s.replace(Uct,zct);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=KJ}return new i(r,t)}function zct(e){return"-"+e.toLowerCase()}function Vct(e){return e.charAt(1).toUpperCase()}const Hct={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},JD=IAe([DAe,RAe,OAe,$Ae,Fct],"html"),Ov=IAe([DAe,RAe,OAe,$Ae,Bct],"svg");function mhe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function MAe(e){return e.join(" ").trim()}var LAe={},ghe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,qct=/\n/g,Wct=/^\s*/,Gct=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Yct=/^:\s*/,Kct=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Xct=/^[;\s]*/,Qct=/^\s+|\s+$/g,Jct=`
`,yhe="/",vhe="*",Xb="",Zct="comment",eft="declaration",tft=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(qct);m&&(n+=m.length);var g=p.lastIndexOf(Jct);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(Wct)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(yhe!=e.charAt(0)||vhe!=e.charAt(1))){for(var m=2;Xb!=e.charAt(m)&&(vhe!=e.charAt(m)||yhe!=e.charAt(m+1));)++m;if(m+=2,Xb===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:Zct,comment:g})}}function d(){var p=s(),m=u(Gct);if(m){if(f(),!u(Yct))return a("property missing ':'");var g=u(Kct),y=p({type:eft,property:bhe(m[0].replace(ghe,Xb)),value:g?bhe(g[0].replace(ghe,Xb)):Xb});return u(Xct),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function bhe(e){return e?e.replace(Qct,Xb):Xb}var nft=Jt&&Jt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(LAe,"__esModule",{value:!0});var rft=nft(tft);function ift(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,rft.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var xhe=LAe.default=ift;const sft=xhe.default||xhe,w5=FAe("end"),km=FAe("start");function FAe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function oft(e){const t=km(e),n=w5(e);if(t&&n)return{start:t,end:n}}function ZI(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?_he(e.position):"start"in e||"end"in e?_he(e):"line"in e||"column"in e?Lq(e):""}function Lq(e){return whe(e&&e.line)+":"+whe(e&&e.column)}function _he(e){return Lq(e&&e.start)+"-"+Lq(e&&e.end)}function whe(e){return e&&typeof e=="number"?e:1}class Nu extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=ZI(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Nu.prototype.file="";Nu.prototype.name="";Nu.prototype.reason="";Nu.prototype.message="";Nu.prototype.stack="";Nu.prototype.column=void 0;Nu.prototype.line=void 0;Nu.prototype.ancestors=void 0;Nu.prototype.cause=void 0;Nu.prototype.fatal=void 0;Nu.prototype.place=void 0;Nu.prototype.ruleId=void 0;Nu.prototype.source=void 0;const XJ={}.hasOwnProperty,aft=new Map,uft=/[A-Z]/g,lft=/-([a-z])/g,cft=new Set(["table","tbody","thead","tfoot","tr"]),fft=new Set(["td","th"]),BAe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function dft(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=xft(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=bft(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Ov:JD,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=jAe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function jAe(e,t,n){if(t.type==="element")return hft(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return pft(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return gft(e,t,n);if(t.type==="mdxjsEsm")return mft(e,t);if(t.type==="root")return yft(e,t,n);if(t.type==="text")return vft(e,t)}function hft(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Ov,e.schema=i),e.ancestors.push(t);const s=zAe(e,t.tagName,!1),o=_ft(e,t);let a=JJ(e,t);return cft.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!$ct(u):!0})),UAe(e,o,s,t),QJ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function pft(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}mR(e,t.position)}function mft(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);mR(e,t.position)}function gft(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Ov,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:zAe(e,t.name,!0),o=wft(e,t),a=JJ(e,t);return UAe(e,o,s,t),QJ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function yft(e,t,n){const r={};return QJ(r,JJ(e,t)),e.create(t,e.Fragment,r,n)}function vft(e,t){return t.value}function UAe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function QJ(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function bft(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function xft(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=km(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function _ft(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&XJ.call(t.properties,i)){const s=Eft(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&fft.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function wft(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else mR(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else mR(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function JJ(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:aft;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=jAe(e,s,o);a!==void 0&&n.push(a)}return n}function Eft(e,t,n){const r=_5(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?AAe(n):MAe(n)),r.property==="style"){let i=typeof n=="object"?n:Sft(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Tft(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?Hct[r.property]||r.property:r.attribute,n]}}function Sft(e,t){const n={};try{sft(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Nu("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=BAe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(lft,Aft)),n[o]=s}}function zAe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=fhe(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=fhe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return XJ.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);mR(e)}function mR(e,t){const n=new Nu("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=BAe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Tft(e){const t={};let n;for(n in e)XJ.call(e,n)&&(t[Cft(n)]=e[n]);return t}function Cft(e){let t=e.replace(uft,Ift);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Aft(e,t){return t.toUpperCase()}function Ift(e){return"-"+e.toLowerCase()}const j7={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},kft={};function Rft(e,t){const n=kft,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return VAe(e,r,i)}function VAe(e,t,n){if(Dft(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Ehe(e.children,t,n)}return Array.isArray(e)?Ehe(e,t,n):""}function Ehe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=VAe(e[i],t,n);return r.join("")}function Dft(e){return!!(e&&typeof e=="object")}const She=document.createElement("i");function ZJ(e){const t="&"+e+";";She.innerHTML=t;const n=She.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function pg(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Hf(e,t){return e.length>0?(pg(e,e.length,0,t),e):t}const The={}.hasOwnProperty;function Nft(e){const t={};let n=-1;for(;++n<e.length;)Pft(t,e[n]);return t}function Pft(e,t){let n;for(n in t){const i=(The.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){The.call(i,o)||(i[o]=[]);const a=s[o];Oft(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Oft(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);pg(e,0,0,r)}function HAe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function mS(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ep=$v(/[A-Za-z]/),Wc=$v(/[\dA-Za-z]/),$ft=$v(/[#-'*+\--9=?A-Z^-~]/);function Fq(e){return e!==null&&(e<32||e===127)}const Bq=$v(/\d/),Mft=$v(/[\dA-Fa-f]/),Lft=$v(/[!-/:-@[-`{-~]/);function Cn(e){return e!==null&&e<-2}function ic(e){return e!==null&&(e<0||e===32)}function fi(e){return e===-2||e===-1||e===32}const Fft=$v(new RegExp("\\p{P}|\\p{S}","u")),Bft=$v(/\s/);function $v(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function R2(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Wc(e.charCodeAt(n+1))&&Wc(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function Xi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return fi(u)?(e.enter(n),a(u)):t(u)}function a(u){return fi(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const jft={tokenize:Uft};function Uft(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),Xi(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Cn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const zft={tokenize:Vft},Che={tokenize:Hft};function Vft(e){const t=this,n=[];let r=0,i,s,o;return a;function a(x){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(x)}return l(x)}function u(x){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const w=t.events.length;let S=w,T;for(;S--;)if(t.events[S][0]==="exit"&&t.events[S][1].type==="chunkFlow"){T=t.events[S][1].end;break}y(r);let C=w;for(;C<t.events.length;)t.events[C][1].end=Object.assign({},T),C++;return pg(t.events,S+1,0,t.events.slice(w)),t.events.length=C,l(x)}return a(x)}function l(x){if(r===n.length){if(!i)return d(x);if(i.currentConstruct&&i.currentConstruct.concrete)return p(x);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Che,c,f)(x)}function c(x){return i&&b(),y(r),d(x)}function f(x){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(x)}function d(x){return t.containerState={},e.attempt(Che,h,p)(x)}function h(x){return r++,n.push([t.currentConstruct,t.containerState]),d(x)}function p(x){if(x===null){i&&b(),y(0),e.consume(x);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(x)}function m(x){if(x===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(x);return}return Cn(x)?(e.consume(x),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(x),m)}function g(x,w){const S=t.sliceStream(x);if(w&&S.push(null),x.previous=s,s&&(s.next=x),s=x,i.defineSkip(x.start),i.write(S),t.parser.lazy[x.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const C=t.events.length;let I=C,D,k;for(;I--;)if(t.events[I][0]==="exit"&&t.events[I][1].type==="chunkFlow"){if(D){k=t.events[I][1].end;break}D=!0}for(y(r),T=C;T<t.events.length;)t.events[T][1].end=Object.assign({},k),T++;pg(t.events,I+1,0,t.events.slice(C)),t.events.length=T}}function y(x){let w=n.length;for(;w-- >x;){const S=n[w];t.containerState=S[1],S[0].exit.call(t,e)}n.length=x}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function Hft(e,t,n){return Xi(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Ahe(e){if(e===null||ic(e)||Bft(e))return 1;if(Fft(e))return 2}function eZ(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const jq={name:"attention",tokenize:Wft,resolveAll:qft};function qft(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Ihe(f,-u),Ihe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Hf(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Hf(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Hf(l,eZ(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Hf(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Hf(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,pg(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Wft(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Ahe(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Ahe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Ihe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Gft={name:"autolink",tokenize:Yft};function Yft(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Ep(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Wc(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Wc(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||Fq(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):$ft(h)?(e.consume(h),l):n(h)}function c(h){return Wc(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Wc(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const E5={tokenize:Kft,partial:!0};function Kft(e,t,n){return r;function r(s){return fi(s)?Xi(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Cn(s)?t(s):n(s)}}const qAe={name:"blockQuote",tokenize:Xft,continuation:{tokenize:Qft},exit:Jft};function Xft(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return fi(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Qft(e,t,n){const r=this;return i;function i(o){return fi(o)?Xi(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(qAe,t,n)(o)}}function Jft(e){e.exit("blockQuote")}const WAe={name:"characterEscape",tokenize:Zft};function Zft(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Lft(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const GAe={name:"characterReference",tokenize:edt};function edt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Wc,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Mft,c):(e.enter("characterReferenceValue"),s=7,o=Bq,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Wc&&!ZJ(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const khe={tokenize:ndt,partial:!0},Rhe={name:"codeFenced",tokenize:tdt,concrete:!0};function tdt(e,t,n){const r=this,i={tokenize:S,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const C=r.events[r.events.length-1];return s=C&&C[1].type==="linePrefix"?C[2].sliceSerialize(C[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),fi(T)?Xi(e,f,"whitespace")(T):f(T))}function f(T){return T===null||Cn(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(khe,m,w)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||Cn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):fi(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Xi(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||Cn(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||Cn(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),p)}function m(T){return e.attempt(i,w,g)(T)}function g(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),y}function y(T){return s>0&&fi(T)?Xi(e,b,"linePrefix",s+1)(T):b(T)}function b(T){return T===null||Cn(T)?e.check(khe,m,w)(T):(e.enter("codeFlowValue"),x(T))}function x(T){return T===null||Cn(T)?(e.exit("codeFlowValue"),b(T)):(e.consume(T),x)}function w(T){return e.exit("codeFenced"),t(T)}function S(T,C,I){let D=0;return k;function k(q){return T.enter("lineEnding"),T.consume(q),T.exit("lineEnding"),P}function P(q){return T.enter("codeFencedFence"),fi(q)?Xi(T,M,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):M(q)}function M(q){return q===a?(T.enter("codeFencedFenceSequence"),$(q)):I(q)}function $(q){return q===a?(D++,T.consume(q),$):D>=o?(T.exit("codeFencedFenceSequence"),fi(q)?Xi(T,B,"whitespace")(q):B(q)):I(q)}function B(q){return q===null||Cn(q)?(T.exit("codeFencedFence"),C(q)):I(q)}}}function ndt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const U7={name:"codeIndented",tokenize:idt},rdt={tokenize:sdt,partial:!0};function idt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),Xi(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Cn(l)?e.attempt(rdt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Cn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function sdt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Cn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):Xi(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Cn(o)?i(o):n(o)}}const odt={name:"codeText",tokenize:ldt,resolve:adt,previous:udt};function adt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function udt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function ldt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Cn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Cn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class cdt{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&sA(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),sA(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),sA(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);sA(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);sA(this.left,n.reverse())}}}function sA(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function YAe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new cdt(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,fdt(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return pg(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function fdt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),b=s.pop();u.push([b,b+y.length-1]),e.splice(b,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const ddt={tokenize:mdt,resolve:pdt},hdt={tokenize:gdt,partial:!0};function pdt(e){return YAe(e),e}function mdt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Cn(a)?e.check(hdt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function gdt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),Xi(e,s,"linePrefix")}function s(o){if(o===null||Cn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function KAe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||Fq(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Cn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||ic(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||Fq(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function XAe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Cn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Cn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!fi(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function QAe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Cn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),Xi(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Cn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function ek(e,t){let n;return r;function r(i){return Cn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):fi(i)?Xi(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const ydt={name:"definition",tokenize:bdt},vdt={tokenize:xdt,partial:!0};function bdt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return XAe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=mS(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return ic(h)?ek(e,l)(h):l(h)}function l(h){return KAe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(vdt,f,f)(h)}function f(h){return fi(h)?Xi(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Cn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function xdt(e,t,n){return r;function r(a){return ic(a)?ek(e,i)(a):n(a)}function i(a){return QAe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return fi(a)?Xi(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Cn(a)?t(a):n(a)}}const _dt={name:"hardBreakEscape",tokenize:wdt};function wdt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Cn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Edt={name:"headingAtx",tokenize:Tdt,resolve:Sdt};function Sdt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},pg(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Tdt(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||ic(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Cn(c)?(e.exit("atxHeading"),t(c)):fi(c)?Xi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||ic(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const Cdt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Dhe=["pre","script","style","textarea"],Adt={name:"htmlFlow",tokenize:Ddt,resolveTo:Rdt,concrete:!0},Idt={tokenize:Pdt,partial:!0},kdt={tokenize:Ndt,partial:!0};function Rdt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Ddt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(F){return c(F)}function c(F){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(F),f}function f(F){return F===33?(e.consume(F),d):F===47?(e.consume(F),s=!0,m):F===63?(e.consume(F),i=3,r.interrupt?t:L):Ep(F)?(e.consume(F),o=String.fromCharCode(F),g):n(F)}function d(F){return F===45?(e.consume(F),i=2,h):F===91?(e.consume(F),i=5,a=0,p):Ep(F)?(e.consume(F),i=4,r.interrupt?t:L):n(F)}function h(F){return F===45?(e.consume(F),r.interrupt?t:L):n(F)}function p(F){const V="CDATA[";return F===V.charCodeAt(a++)?(e.consume(F),a===V.length?r.interrupt?t:M:p):n(F)}function m(F){return Ep(F)?(e.consume(F),o=String.fromCharCode(F),g):n(F)}function g(F){if(F===null||F===47||F===62||ic(F)){const V=F===47,J=o.toLowerCase();return!V&&!s&&Dhe.includes(J)?(i=1,r.interrupt?t(F):M(F)):Cdt.includes(o.toLowerCase())?(i=6,V?(e.consume(F),y):r.interrupt?t(F):M(F)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(F):s?b(F):x(F))}return F===45||Wc(F)?(e.consume(F),o+=String.fromCharCode(F),g):n(F)}function y(F){return F===62?(e.consume(F),r.interrupt?t:M):n(F)}function b(F){return fi(F)?(e.consume(F),b):k(F)}function x(F){return F===47?(e.consume(F),k):F===58||F===95||Ep(F)?(e.consume(F),w):fi(F)?(e.consume(F),x):k(F)}function w(F){return F===45||F===46||F===58||F===95||Wc(F)?(e.consume(F),w):S(F)}function S(F){return F===61?(e.consume(F),T):fi(F)?(e.consume(F),S):x(F)}function T(F){return F===null||F===60||F===61||F===62||F===96?n(F):F===34||F===39?(e.consume(F),u=F,C):fi(F)?(e.consume(F),T):I(F)}function C(F){return F===u?(e.consume(F),u=null,D):F===null||Cn(F)?n(F):(e.consume(F),C)}function I(F){return F===null||F===34||F===39||F===47||F===60||F===61||F===62||F===96||ic(F)?S(F):(e.consume(F),I)}function D(F){return F===47||F===62||fi(F)?x(F):n(F)}function k(F){return F===62?(e.consume(F),P):n(F)}function P(F){return F===null||Cn(F)?M(F):fi(F)?(e.consume(F),P):n(F)}function M(F){return F===45&&i===2?(e.consume(F),H):F===60&&i===1?(e.consume(F),Y):F===62&&i===4?(e.consume(F),z):F===63&&i===3?(e.consume(F),L):F===93&&i===5?(e.consume(F),Q):Cn(F)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Idt,W,$)(F)):F===null||Cn(F)?(e.exit("htmlFlowData"),$(F)):(e.consume(F),M)}function $(F){return e.check(kdt,B,W)(F)}function B(F){return e.enter("lineEnding"),e.consume(F),e.exit("lineEnding"),q}function q(F){return F===null||Cn(F)?$(F):(e.enter("htmlFlowData"),M(F))}function H(F){return F===45?(e.consume(F),L):M(F)}function Y(F){return F===47?(e.consume(F),o="",K):M(F)}function K(F){if(F===62){const V=o.toLowerCase();return Dhe.includes(V)?(e.consume(F),z):M(F)}return Ep(F)&&o.length<8?(e.consume(F),o+=String.fromCharCode(F),K):M(F)}function Q(F){return F===93?(e.consume(F),L):M(F)}function L(F){return F===62?(e.consume(F),z):F===45&&i===2?(e.consume(F),L):M(F)}function z(F){return F===null||Cn(F)?(e.exit("htmlFlowData"),W(F)):(e.consume(F),z)}function W(F){return e.exit("htmlFlow"),t(F)}}function Ndt(e,t,n){const r=this;return i;function i(o){return Cn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Pdt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(E5,t,n)}}const Odt={name:"htmlText",tokenize:$dt};function $dt(e,t,n){const r=this;let i,s,o;return a;function a(L){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(L),u}function u(L){return L===33?(e.consume(L),l):L===47?(e.consume(L),S):L===63?(e.consume(L),x):Ep(L)?(e.consume(L),I):n(L)}function l(L){return L===45?(e.consume(L),c):L===91?(e.consume(L),s=0,p):Ep(L)?(e.consume(L),b):n(L)}function c(L){return L===45?(e.consume(L),h):n(L)}function f(L){return L===null?n(L):L===45?(e.consume(L),d):Cn(L)?(o=f,Y(L)):(e.consume(L),f)}function d(L){return L===45?(e.consume(L),h):f(L)}function h(L){return L===62?H(L):L===45?d(L):f(L)}function p(L){const z="CDATA[";return L===z.charCodeAt(s++)?(e.consume(L),s===z.length?m:p):n(L)}function m(L){return L===null?n(L):L===93?(e.consume(L),g):Cn(L)?(o=m,Y(L)):(e.consume(L),m)}function g(L){return L===93?(e.consume(L),y):m(L)}function y(L){return L===62?H(L):L===93?(e.consume(L),y):m(L)}function b(L){return L===null||L===62?H(L):Cn(L)?(o=b,Y(L)):(e.consume(L),b)}function x(L){return L===null?n(L):L===63?(e.consume(L),w):Cn(L)?(o=x,Y(L)):(e.consume(L),x)}function w(L){return L===62?H(L):x(L)}function S(L){return Ep(L)?(e.consume(L),T):n(L)}function T(L){return L===45||Wc(L)?(e.consume(L),T):C(L)}function C(L){return Cn(L)?(o=C,Y(L)):fi(L)?(e.consume(L),C):H(L)}function I(L){return L===45||Wc(L)?(e.consume(L),I):L===47||L===62||ic(L)?D(L):n(L)}function D(L){return L===47?(e.consume(L),H):L===58||L===95||Ep(L)?(e.consume(L),k):Cn(L)?(o=D,Y(L)):fi(L)?(e.consume(L),D):H(L)}function k(L){return L===45||L===46||L===58||L===95||Wc(L)?(e.consume(L),k):P(L)}function P(L){return L===61?(e.consume(L),M):Cn(L)?(o=P,Y(L)):fi(L)?(e.consume(L),P):D(L)}function M(L){return L===null||L===60||L===61||L===62||L===96?n(L):L===34||L===39?(e.consume(L),i=L,$):Cn(L)?(o=M,Y(L)):fi(L)?(e.consume(L),M):(e.consume(L),B)}function $(L){return L===i?(e.consume(L),i=void 0,q):L===null?n(L):Cn(L)?(o=$,Y(L)):(e.consume(L),$)}function B(L){return L===null||L===34||L===39||L===60||L===61||L===96?n(L):L===47||L===62||ic(L)?D(L):(e.consume(L),B)}function q(L){return L===47||L===62||ic(L)?D(L):n(L)}function H(L){return L===62?(e.consume(L),e.exit("htmlTextData"),e.exit("htmlText"),t):n(L)}function Y(L){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(L),e.exit("lineEnding"),K}function K(L){return fi(L)?Xi(e,Q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):Q(L)}function Q(L){return e.enter("htmlTextData"),o(L)}}const tZ={name:"labelEnd",tokenize:Udt,resolveTo:jdt,resolveAll:Bdt},Mdt={tokenize:zdt},Ldt={tokenize:Vdt},Fdt={tokenize:Hdt};function Bdt(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function jdt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Hf(a,e.slice(s+1,s+r+3)),a=Hf(a,[["enter",c,t]]),a=Hf(a,eZ(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Hf(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Hf(a,e.slice(o+1)),a=Hf(a,[["exit",u,t]]),pg(e,s,e.length,a),e}function Udt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(mS(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(Mdt,c,o?c:f)(d):d===91?e.attempt(Ldt,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(Fdt,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function zdt(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return ic(f)?ek(e,s)(f):s(f)}function s(f){return f===41?c(f):KAe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return ic(f)?ek(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?QAe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return ic(f)?ek(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function Vdt(e,t,n){const r=this;return i;function i(a){return XAe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(mS(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function Hdt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const qdt={name:"labelStartImage",tokenize:Wdt,resolveAll:tZ.resolveAll};function Wdt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Gdt={name:"labelStartLink",tokenize:Ydt,resolveAll:tZ.resolveAll};function Ydt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const z7={name:"lineEnding",tokenize:Kdt};function Kdt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Xi(e,t,"linePrefix")}}const N4={name:"thematicBreak",tokenize:Xdt};function Xdt(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Cn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),fi(l)?Xi(e,a,"whitespace")(l):a(l))}}const Dl={name:"list",tokenize:Zdt,continuation:{tokenize:eht},exit:nht},Qdt={tokenize:rht,partial:!0},Jdt={tokenize:tht,partial:!0};function Zdt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:Bq(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(N4,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return Bq(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(E5,r.interrupt?n:c,e.attempt(Qdt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return fi(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function eht(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(E5,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Xi(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!fi(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Jdt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Xi(e,e.attempt(Dl,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function tht(e,t,n){const r=this;return Xi(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function nht(e){e.exit(this.containerState.type)}function rht(e,t,n){const r=this;return Xi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!fi(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Nhe={name:"setextUnderline",tokenize:sht,resolveTo:iht};function iht(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function sht(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),fi(l)?Xi(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Cn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const oht={tokenize:aht};function aht(e){const t=this,n=e.attempt(E5,r,e.attempt(this.parser.constructs.flowInitial,i,Xi(e,e.attempt(this.parser.constructs.flow,i,e.attempt(ddt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const uht={resolveAll:ZAe()},lht=JAe("string"),cht=JAe("text");function JAe(e){return{tokenize:t,resolveAll:ZAe(e==="text"?fht:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function ZAe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function fht(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function dht(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:b,enter:x,exit:w,attempt:C(S),check:C(T),interrupt:C(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(P){return o=Hf(o,P),g(),o[o.length-1]!==null?[]:(I(t,0),l.events=eZ(s,l.events,l),l.events)}function d(P,M){return pht(h(P),M)}function h(P){return hht(o,P)}function p(){const{line:P,column:M,offset:$,_index:B,_bufferIndex:q}=r;return{line:P,column:M,offset:$,_index:B,_bufferIndex:q}}function m(P){i[P.line]=P.column,k()}function g(){let P;for(;r._index<o.length;){const M=o[r._index];if(typeof M=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<M.length;)y(M.charCodeAt(r._bufferIndex));else y(M)}}function y(P){c=c(P)}function b(P){Cn(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,k()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=P}function x(P,M){const $=M||{};return $.type=P,$.start=p(),l.events.push(["enter",$,l]),a.push($),$}function w(P){const M=a.pop();return M.end=p(),l.events.push(["exit",M,l]),M}function S(P,M){I(P,M.from)}function T(P,M){M.restore()}function C(P,M){return $;function $(B,q,H){let Y,K,Q,L;return Array.isArray(B)?W(B):"tokenize"in B?W([B]):z(B);function z(ue){return we;function we(he){const ke=he!==null&&ue[he],Pe=he!==null&&ue.null,rt=[...Array.isArray(ke)?ke:ke?[ke]:[],...Array.isArray(Pe)?Pe:Pe?[Pe]:[]];return W(rt)(he)}}function W(ue){return Y=ue,K=0,ue.length===0?H:F(ue[K])}function F(ue){return we;function we(he){return L=D(),Q=ue,ue.partial||(l.currentConstruct=ue),ue.name&&l.parser.constructs.disable.null.includes(ue.name)?J():ue.tokenize.call(M?Object.assign(Object.create(l),M):l,u,V,J)(he)}}function V(ue){return P(Q,L),q}function J(ue){return L.restore(),++K<Y.length?F(Y[K]):H}}}function I(P,M){P.resolveAll&&!s.includes(P)&&s.push(P),P.resolve&&pg(l.events,M,l.events.length-M,P.resolve(l.events.slice(M),l)),P.resolveTo&&(l.events=P.resolveTo(l.events,l))}function D(){const P=p(),M=l.previous,$=l.currentConstruct,B=l.events.length,q=Array.from(a);return{restore:H,from:B};function H(){r=P,l.previous=M,l.currentConstruct=$,l.events.length=B,a=q,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function hht(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function pht(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const mht={42:Dl,43:Dl,45:Dl,48:Dl,49:Dl,50:Dl,51:Dl,52:Dl,53:Dl,54:Dl,55:Dl,56:Dl,57:Dl,62:qAe},ght={91:ydt},yht={[-2]:U7,[-1]:U7,32:U7},vht={35:Edt,42:N4,45:[Nhe,N4],60:Adt,61:Nhe,95:N4,96:Rhe,126:Rhe},bht={38:GAe,92:WAe},xht={[-5]:z7,[-4]:z7,[-3]:z7,33:qdt,38:GAe,42:jq,60:[Gft,Odt],91:Gdt,92:[_dt,WAe],93:tZ,95:jq,96:odt},_ht={null:[jq,uht]},wht={null:[42,95]},Eht={null:[]},Sht=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:wht,contentInitial:ght,disable:Eht,document:mht,flow:vht,flowInitial:yht,insideSpan:_ht,string:bht,text:xht},Symbol.toStringTag,{value:"Module"}));function Tht(e){const n=Nft([Sht,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(jft),document:i(zft),flow:i(oht),string:i(lht),text:i(cht)};return r;function i(s){return o;function o(a){return dht(r,s,a)}}}function Cht(e){for(;!YAe(e););return e}const Phe=/[\0\t\n\r]/g;function Aht(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Phe.lastIndex=f,l=Phe.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Iht=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function kht(e){return e.replace(Iht,Rht)}function Rht(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return HAe(n.slice(s?2:1),s?16:10)}return ZJ(n)||e}const eIe={}.hasOwnProperty;function Dht(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Nht(n)(Cht(Tht(n).document().write(Aht()(e,t,!0))))}function Nht(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(st),autolinkProtocol:D,autolinkEmail:D,atxHeading:s(It),blockQuote:s(Pe),characterEscape:D,characterReference:D,codeFenced:s(rt),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(rt,o),codeText:s(Re,o),codeTextData:D,data:D,codeFlowValue:D,definition:s(St),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Je),hardBreakEscape:s(mt),hardBreakTrailing:s(mt),htmlFlow:s(Te,o),htmlFlowData:D,htmlText:s(Te,o),htmlTextData:D,image:s(Fe),label:o,link:s(st),listItem:s(Dt),listItemValue:d,listOrdered:s(yt,f),listUnordered:s(yt),paragraph:s(Qe),reference:F,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(It),strong:s(_e),thematicBreak:s(Rt)},exit:{atxHeading:u(),atxHeadingSequence:S,autolink:u(),autolinkEmail:ke,autolinkProtocol:he,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:J,characterReferenceMarkerNumeric:J,characterReferenceValue:ue,characterReference:we,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(q),codeTextData:k,data:k,definition:u(),definitionDestinationString:w,definitionLabelString:b,definitionTitleString:x,emphasis:u(),hardBreakEscape:u(M),hardBreakTrailing:u(M),htmlFlow:u($),htmlFlowData:k,htmlText:u(B),htmlTextData:k,image:u(Y),label:Q,labelText:K,lineEnding:P,link:u(H),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:V,resourceDestinationString:L,resourceTitleString:z,resource:W,setextHeading:u(I),setextHeadingLineSequence:C,setextHeadingText:T,strong:u(),thematicBreak:u()}};tIe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(Ee){let Oe={type:"root",children:[]};const ot={stack:[Oe],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},xt=[];let jt=-1;for(;++jt<Ee.length;)if(Ee[jt][1].type==="listOrdered"||Ee[jt][1].type==="listUnordered")if(Ee[jt][0]==="enter")xt.push(jt);else{const jn=xt.pop();jt=i(Ee,jn,jt)}for(jt=-1;++jt<Ee.length;){const jn=t[Ee[jt][0]];eIe.call(jn,Ee[jt][1].type)&&jn[Ee[jt][1].type].call(Object.assign({sliceSerialize:Ee[jt][2].sliceSerialize},ot),Ee[jt][1])}if(ot.tokenStack.length>0){const jn=ot.tokenStack[ot.tokenStack.length-1];(jn[1]||Ohe).call(ot,void 0,jn[0])}for(Oe.position={start:gy(Ee.length>0?Ee[0][1].start:{line:1,column:1,offset:0}),end:gy(Ee.length>0?Ee[Ee.length-2][1].end:{line:1,column:1,offset:0})},jt=-1;++jt<t.transforms.length;)Oe=t.transforms[jt](Oe)||Oe;return Oe}function i(Ee,Oe,ot){let xt=Oe-1,jt=-1,jn=!1,dr,Sr,xi,Tn;for(;++xt<=ot;){const Un=Ee[xt];switch(Un[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Un[0]==="enter"?jt++:jt--,Tn=void 0;break}case"lineEndingBlank":{Un[0]==="enter"&&(dr&&!Tn&&!jt&&!xi&&(xi=xt),Tn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Tn=void 0}if(!jt&&Un[0]==="enter"&&Un[1].type==="listItemPrefix"||jt===-1&&Un[0]==="exit"&&(Un[1].type==="listUnordered"||Un[1].type==="listOrdered")){if(dr){let hr=xt;for(Sr=void 0;hr--;){const gr=Ee[hr];if(gr[1].type==="lineEnding"||gr[1].type==="lineEndingBlank"){if(gr[0]==="exit")continue;Sr&&(Ee[Sr][1].type="lineEndingBlank",jn=!0),gr[1].type="lineEnding",Sr=hr}else if(!(gr[1].type==="linePrefix"||gr[1].type==="blockQuotePrefix"||gr[1].type==="blockQuotePrefixWhitespace"||gr[1].type==="blockQuoteMarker"||gr[1].type==="listItemIndent"))break}xi&&(!Sr||xi<Sr)&&(dr._spread=!0),dr.end=Object.assign({},Sr?Ee[Sr][1].start:Un[1].end),Ee.splice(Sr||xt,0,["exit",dr,Un[2]]),xt++,ot++}if(Un[1].type==="listItemPrefix"){const hr={type:"listItem",_spread:!1,start:Object.assign({},Un[1].start),end:void 0};dr=hr,Ee.splice(xt,0,["enter",hr,Un[2]]),xt++,ot++,xi=void 0,Tn=!0}}}return Ee[Oe][1]._spread=jn,ot}function s(Ee,Oe){return ot;function ot(xt){a.call(this,Ee(xt),xt),Oe&&Oe.call(this,xt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(Ee,Oe,ot){this.stack[this.stack.length-1].children.push(Ee),this.stack.push(Ee),this.tokenStack.push([Oe,ot]),Ee.position={start:gy(Oe.start),end:void 0}}function u(Ee){return Oe;function Oe(ot){Ee&&Ee.call(this,ot),l.call(this,ot)}}function l(Ee,Oe){const ot=this.stack.pop(),xt=this.tokenStack.pop();if(xt)xt[0].type!==Ee.type&&(Oe?Oe.call(this,Ee,xt[0]):(xt[1]||Ohe).call(this,Ee,xt[0]));else throw new Error("Cannot close `"+Ee.type+"` ("+ZI({start:Ee.start,end:Ee.end})+"): its not open");ot.position.end=gy(Ee.end)}function c(){return Rft(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(Ee){if(this.data.expectingFirstListItemValue){const Oe=this.stack[this.stack.length-2];Oe.start=Number.parseInt(this.sliceSerialize(Ee),10),this.data.expectingFirstListItemValue=void 0}}function h(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.lang=Ee}function p(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.meta=Ee}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee.replace(/(\r?\n|\r)$/g,"")}function b(Ee){const Oe=this.resume(),ot=this.stack[this.stack.length-1];ot.label=Oe,ot.identifier=mS(this.sliceSerialize(Ee)).toLowerCase()}function x(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=Ee}function w(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=Ee}function S(Ee){const Oe=this.stack[this.stack.length-1];if(!Oe.depth){const ot=this.sliceSerialize(Ee).length;Oe.depth=ot}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function C(Ee){const Oe=this.stack[this.stack.length-1];Oe.depth=this.sliceSerialize(Ee).codePointAt(0)===61?1:2}function I(){this.data.setextHeadingSlurpLineEnding=void 0}function D(Ee){const ot=this.stack[this.stack.length-1].children;let xt=ot[ot.length-1];(!xt||xt.type!=="text")&&(xt=kt(),xt.position={start:gy(Ee.start),end:void 0},ot.push(xt)),this.stack.push(xt)}function k(Ee){const Oe=this.stack.pop();Oe.value+=this.sliceSerialize(Ee),Oe.position.end=gy(Ee.end)}function P(Ee){const Oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ot=Oe.children[Oe.children.length-1];ot.position.end=gy(Ee.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Oe.type)&&(D.call(this,Ee),k.call(this,Ee))}function M(){this.data.atHardBreak=!0}function $(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee}function B(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee}function q(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=Ee}function H(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=Oe,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function Y(){const Ee=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";Ee.type+="Reference",Ee.referenceType=Oe,delete Ee.url,delete Ee.title}else delete Ee.identifier,delete Ee.label;this.data.referenceType=void 0}function K(Ee){const Oe=this.sliceSerialize(Ee),ot=this.stack[this.stack.length-2];ot.label=kht(Oe),ot.identifier=mS(Oe).toLowerCase()}function Q(){const Ee=this.stack[this.stack.length-1],Oe=this.resume(),ot=this.stack[this.stack.length-1];if(this.data.inReference=!0,ot.type==="link"){const xt=Ee.children;ot.children=xt}else ot.alt=Oe}function L(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=Ee}function z(){const Ee=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=Ee}function W(){this.data.inReference=void 0}function F(){this.data.referenceType="collapsed"}function V(Ee){const Oe=this.resume(),ot=this.stack[this.stack.length-1];ot.label=Oe,ot.identifier=mS(this.sliceSerialize(Ee)).toLowerCase(),this.data.referenceType="full"}function J(Ee){this.data.characterReferenceType=Ee.type}function ue(Ee){const Oe=this.sliceSerialize(Ee),ot=this.data.characterReferenceType;let xt;ot?(xt=HAe(Oe,ot==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):xt=ZJ(Oe);const jt=this.stack[this.stack.length-1];jt.value+=xt}function we(Ee){const Oe=this.stack.pop();Oe.position.end=gy(Ee.end)}function he(Ee){k.call(this,Ee);const Oe=this.stack[this.stack.length-1];Oe.url=this.sliceSerialize(Ee)}function ke(Ee){k.call(this,Ee);const Oe=this.stack[this.stack.length-1];Oe.url="mailto:"+this.sliceSerialize(Ee)}function Pe(){return{type:"blockquote",children:[]}}function rt(){return{type:"code",lang:null,meta:null,value:""}}function Re(){return{type:"inlineCode",value:""}}function St(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Je(){return{type:"emphasis",children:[]}}function It(){return{type:"heading",depth:0,children:[]}}function mt(){return{type:"break"}}function Te(){return{type:"html",value:""}}function Fe(){return{type:"image",title:null,url:"",alt:null}}function st(){return{type:"link",title:null,url:"",children:[]}}function yt(Ee){return{type:"list",ordered:Ee.type==="listOrdered",start:null,spread:Ee._spread,children:[]}}function Dt(Ee){return{type:"listItem",spread:Ee._spread,checked:null,children:[]}}function Qe(){return{type:"paragraph",children:[]}}function _e(){return{type:"strong",children:[]}}function kt(){return{type:"text",value:""}}function Rt(){return{type:"thematicBreak"}}}function gy(e){return{line:e.line,column:e.column,offset:e.offset}}function tIe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?tIe(e,r):Pht(e,r)}}function Pht(e,t){let n;for(n in t)if(eIe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Ohe(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+ZI({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+ZI({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+ZI({start:t.start,end:t.end})+") is still open")}function Oht(e){const t=this;t.parser=n;function n(r){return Dht(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function $ht(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Mht(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Lht(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Fht(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Bht(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jht(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=R2(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Uht(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function zht(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function nIe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Vht(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return nIe(e,t);const i={src:R2(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function Hht(e,t){const n={src:R2(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function qht(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Wht(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return nIe(e,t);const i={href:R2(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Ght(e,t){const n={href:R2(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Yht(e,t,n){const r=e.all(t),i=n?Kht(n):rIe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function Kht(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=rIe(n[r])}return t}function rIe(e){const t=e.spread;return t??e.children.length>1}function Xht(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Qht(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Jht(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Zht(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ept(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=km(t.children[1]),u=w5(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function tpt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function npt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const $he=9,Mhe=32;function rpt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Lhe(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Lhe(t.slice(i),i>0,!1)),s.join("")}function Lhe(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===$he||s===Mhe;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===$he||s===Mhe;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function ipt(e,t){const n={type:"text",value:rpt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function spt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const opt={blockquote:$ht,break:Mht,code:Lht,delete:Fht,emphasis:Bht,footnoteReference:jht,heading:Uht,html:zht,imageReference:Vht,image:Hht,inlineCode:qht,linkReference:Wht,link:Ght,listItem:Yht,list:Xht,paragraph:Qht,root:Jht,strong:Zht,table:ept,tableCell:npt,tableRow:tpt,text:ipt,thematicBreak:spt,toml:V3,yaml:V3,definition:V3,footnoteDefinition:V3};function V3(){}const iIe=-1,S5=0,x$=1,_$=2,nZ=3,rZ=4,iZ=5,sZ=6,sIe=7,oIe=8,Fhe=typeof self=="object"?self:globalThis,apt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case S5:case iIe:return n(o,i);case x$:{const a=n([],i);for(const u of o)a.push(r(u));return a}case _$:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case nZ:return n(new Date(o),i);case rZ:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case iZ:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case sZ:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case sIe:{const{name:a,message:u}=o;return n(new Fhe[a](u),i)}case oIe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Fhe[s](o),i)};return r},Bhe=e=>apt(new Map,e)(0),Yw="",{toString:upt}={},{keys:lpt}=Object,oA=e=>{const t=typeof e;if(t!=="object"||!e)return[S5,t];const n=upt.call(e).slice(8,-1);switch(n){case"Array":return[x$,Yw];case"Object":return[_$,Yw];case"Date":return[nZ,Yw];case"RegExp":return[rZ,Yw];case"Map":return[iZ,Yw];case"Set":return[sZ,Yw]}return n.includes("Array")?[x$,n]:n.includes("Error")?[sIe,n]:[_$,n]},H3=([e,t])=>e===S5&&(t==="function"||t==="symbol"),cpt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=oA(o);switch(a){case S5:{let c=o;switch(u){case"bigint":a=oIe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([iIe],o)}return i([a,c],o)}case x$:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case _$:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of lpt(o))(e||!H3(oA(o[d])))&&c.push([s(d),s(o[d])]);return f}case nZ:return i([a,o.toISOString()],o);case rZ:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case iZ:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(H3(oA(d))||H3(oA(h))))&&c.push([s(d),s(h)]);return f}case sZ:{const c=[],f=i([a,c],o);for(const d of o)(e||!H3(oA(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},jhe=(e,{json:t,lossy:n}={})=>{const r=[];return cpt(!(t||n),!!t,new Map,r)(e),r},nT=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Bhe(jhe(e,t)):structuredClone(e):(e,t)=>Bhe(jhe(e,t));function fpt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function dpt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function hpt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||fpt,r=e.options.footnoteBackLabel||dpt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=R2(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let b=typeof n=="string"?n:n(u,h);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const b=g.children[g.children.length-1];b&&b.type==="text"?b.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...nT(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const aIe=function(e){if(e==null)return ypt;if(typeof e=="function")return T5(e);if(typeof e=="object")return Array.isArray(e)?ppt(e):mpt(e);if(typeof e=="string")return gpt(e);throw new Error("Expected function, string, or object as test")};function ppt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=aIe(e[n]);return T5(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function mpt(e){const t=e;return T5(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function gpt(e){return T5(t);function t(n){return n&&n.type===e}}function T5(e){return t;function t(n,r,i){return!!(vpt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function ypt(){return!0}function vpt(e){return e!==null&&typeof e=="object"&&"type"in e}const uIe=[],bpt=!0,Uhe=!1,xpt="skip";function _pt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=aIe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=uIe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=wpt(n(u,c)),h[0]===Uhe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==xpt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const b=y.children[m];if(p=a(b,m,g)(),p[0]===Uhe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function wpt(e){return Array.isArray(e)?e:typeof e=="number"?[bpt,e]:e==null?uIe:[e]}function oZ(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),_pt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const Uq={}.hasOwnProperty,Ept={};function Spt(e,t){const n=t||Ept,r=new Map,i=new Map,s=new Map,o={...opt,...n.handlers},a={all:l,applyData:Cpt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Tpt,wrap:Ipt};return oZ(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(Uq.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=nT(g);return y.children=a.all(c),y}return nT(c)}return(a.options.unknownHandler||Apt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=zhe(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=zhe(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Tpt(e,t){e.position&&(t.position=oft(e))}function Cpt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,nT(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Apt(e,t){const n=t.data||{},r="value"in t&&!(Uq.call(n,"hProperties")||Uq.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Ipt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function zhe(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Vhe(e,t){const n=Spt(e,t),r=n.one(e,void 0),i=hpt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function kpt(e,t){return e&&"run"in e?async function(n,r){const i=Vhe(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Vhe(n,{file:r,...t||e})}}function Hhe(e){if(e)throw e}var P4=Object.prototype.hasOwnProperty,lIe=Object.prototype.toString,qhe=Object.defineProperty,Whe=Object.getOwnPropertyDescriptor,Ghe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):lIe.call(t)==="[object Array]"},Yhe=function(t){if(!t||lIe.call(t)!=="[object Object]")return!1;var n=P4.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&P4.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||P4.call(t,i)},Khe=function(t,n){qhe&&n.name==="__proto__"?qhe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Xhe=function(t,n){if(n==="__proto__")if(P4.call(t,n)){if(Whe)return Whe(t,n).value}else return;return t[n]},Rpt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Xhe(a,n),i=Xhe(t,n),a!==i&&(c&&i&&(Yhe(i)||(s=Ghe(i)))?(s?(s=!1,o=r&&Ghe(r)?r:[]):o=r&&Yhe(r)?r:{},Khe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Khe(a,{name:n,newValue:i}));return a};const V7=Cm(Rpt);function zq(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Dpt(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Npt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Npt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const hp={basename:Ppt,dirname:Opt,extname:$pt,join:Mpt,sep:"/"};function Ppt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');ZD(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Opt(e){if(ZD(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function $pt(e){ZD(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Mpt(...e){let t=-1,n;for(;++t<e.length;)ZD(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Lpt(n)}function Lpt(e){ZD(e);const t=e.codePointAt(0)===47;let n=Fpt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Fpt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function ZD(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Bpt={cwd:jpt};function jpt(){return"/"}function Vq(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Upt(e){if(typeof e=="string")e=new URL(e);else if(!Vq(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return zpt(e)}function zpt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const H7=["history","path","basename","stem","extname","dirname"];class cIe{constructor(t){let n;t?Vq(t)?n={path:t}:typeof t=="string"||Vpt(t)?n={value:t}:n=t:n={},this.cwd=Bpt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<H7.length;){const s=H7[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)H7.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?hp.basename(this.path):void 0}set basename(t){W7(t,"basename"),q7(t,"basename"),this.path=hp.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?hp.dirname(this.path):void 0}set dirname(t){Qhe(this.basename,"dirname"),this.path=hp.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?hp.extname(this.path):void 0}set extname(t){if(q7(t,"extname"),Qhe(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=hp.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){Vq(t)&&(t=Upt(t)),W7(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?hp.basename(this.path,this.extname):void 0}set stem(t){W7(t,"stem"),q7(t,"stem"),this.path=hp.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Nu(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function q7(e,t){if(e&&e.includes(hp.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+hp.sep+"`")}function W7(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Qhe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Vpt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Hpt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},qpt={}.hasOwnProperty;class aZ extends Hpt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Dpt()}copy(){const t=new aZ;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(V7(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(K7("data",this.frozen),this.namespace[t]=n,this):qpt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(K7("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=q3(t),r=this.parser||this.Parser;return G7("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),G7("process",this.parser||this.Parser),Y7("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=q3(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);Ypt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),G7("processSync",this.parser||this.Parser),Y7("processSync",this.compiler||this.Compiler),this.process(t,i),Zhe("processSync","process",n),r;function i(s,o){n=!0,Hhe(s),r=o}}run(t,n,r){Jhe(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=q3(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Zhe("runSync","run",r),i;function s(o,a){Hhe(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=q3(n),i=this.compiler||this.Compiler;return Y7("stringify",i),Jhe(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(K7("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=V7(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];zq(m)&&zq(h)&&(h=V7(!0,m,h)),r[d]=[l,h,...p]}}}}const Wpt=new aZ().freeze();function G7(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Y7(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function K7(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Jhe(e){if(!zq(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Zhe(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function q3(e){return Gpt(e)?e:new cIe(e)}function Gpt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function Ypt(e){return typeof e=="string"||Kpt(e)}function Kpt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Xpt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",epe=[],tpe={allowDangerousHtml:!0},Qpt=/^(https?|ircs?|mailto|xmpp)$/i,Jpt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Zpt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||epe,u=e.remarkPlugins||epe,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...tpe}:tpe,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||emt,h=Wpt().use(Oht).use(u).use(kpt,l).use(a),p=new cIe;typeof r=="string"&&(p.value=r);for(const b of Jpt)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+Xpt+b.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),oZ(g,y),dft(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(b,x,w){if(b.type==="raw"&&w&&typeof x=="number")return c?w.children.splice(x,1):w.children[x]={type:"text",value:b.value},x;if(b.type==="element"){let S;for(S in j7)if(Object.hasOwn(j7,S)&&Object.hasOwn(b.properties,S)){const T=b.properties[S],C=j7[S];(C===null||C.includes(b.tagName))&&(b.properties[S]=d(String(T||""),S,b))}}if(b.type==="element"){let S=t?!t.includes(b.tagName):o?o.includes(b.tagName):!1;if(!S&&n&&typeof x=="number"&&(S=!n(b,x,w)),S&&w&&typeof x=="number")return f&&b.children?w.children.splice(x,1,...b.children):w.children.splice(x,1),x}}}function emt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Qpt.test(e.slice(0,t))?e:""}const npe=/[#.]/g;function tmt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){npe.lastIndex=i;const a=npe.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const nmt=new Set(["button","menu","reset","submit"]),Hq={}.hasOwnProperty;function fIe(e,t,n){const r=n&&omt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=tmt(s,t),l.tagName=l.tagName.toLowerCase(),r&&Hq.call(r,l.tagName)&&(l.tagName=r[l.tagName]),rmt(o,l.tagName)){let c;for(c in o)Hq.call(o,c)&&imt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)qq(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function rmt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?nmt.has(e.type.toLowerCase()):!("value"in e)}function imt(e,t,n,r){const i=_5(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=mhe(r):i.commaSeparated?o=che(r):i.commaOrSpaceSeparated?o=mhe(che(r).join(" ")):o=rpe(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?smt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=rpe(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function qq(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)qq(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?qq(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function rpe(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||pR(n)===pR(t)))return!0}return n}function smt(e){const t=[];let n;for(n in e)Hq.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function omt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const amt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],umt=fIe(JD,"div"),lmt=fIe(Ov,"g",amt),X7=/\r?\n|\r/g;function cmt(e){const t=String(e),n=[];for(X7.lastIndex=0;X7.test(t);)n.push(X7.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const px={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},dIe={}.hasOwnProperty,fmt=Object.prototype;function dmt(e,t){const n=t;return uZ({file:n.file||void 0,location:!1,schema:n.space==="svg"?Ov:JD,verbose:n.verbose||!1},e)}function uZ(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},O4(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:hIe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=cmt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},O4(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},O4(e,r,n),n}default:return n=hmt(e,t),n}}function hIe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=uZ(e,t[n]);r.push(i)}return r}function hmt(e,t){const n=e.schema;e.schema=t.namespaceURI===px.svg?Ov:JD;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;dIe.call(fmt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?lmt:umt)(t.tagName,i,hIe(e,t.childNodes));if(O4(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&VE(u.startTag),c=u&&u.endTag&&VE(u.endTag),f=uZ(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function O4(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=pmt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function pmt(e,t,n){const r=VE(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)dIe.call(n.attrs,o)&&(s[_5(e.schema,o).property]=VE(n.attrs[o]));n.startTag;const a=VE(n.startTag),u=n.endTag?VE(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function VE(e){const t=ipe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=ipe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function ipe(e){return e.line&&e.column?e:void 0}const spe={}.hasOwnProperty;function pIe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&spe.call(i,e)){const u=String(i[e]);o=spe.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const mmt={}.hasOwnProperty,mIe=pIe("type",{handlers:{root:ymt,element:wmt,text:xmt,comment:_mt,doctype:bmt}});function gmt(e,t){const r=t.space;return mIe(e,r==="svg"?Ov:JD)}function ymt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=lZ(e.children,n,t),D2(e,n),n}function vmt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=lZ(e.children,n,t),D2(e,n),n}function bmt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return D2(e,t),t}function xmt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return D2(e,t),t}function _mt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return D2(e,t),t}function wmt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Ov);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&mmt.call(e.properties,s)){const u=Emt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:px[o],childNodes:[],parentNode:null};return a.childNodes=lZ(e.children,a,r),D2(e,a),e.tagName==="template"&&e.content&&(a.content=vmt(e.content,r)),a}function Emt(e,t,n){const r=_5(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?AAe(n):MAe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=px[r.space]}return i}function lZ(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=mIe(e[r],n);s.parentNode=t,i.push(s)}return i}function D2(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Smt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Tmt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),gs="";var ie;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(ie=ie||(ie={}));const Il={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function gIe(e){return e>=55296&&e<=57343}function Cmt(e){return e>=56320&&e<=57343}function Amt(e,t){return(e-55296)*1024+9216+t}function yIe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function vIe(e){return e>=64976&&e<=65007||Tmt.has(e)}var Ue;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ue=Ue||(Ue={}));const Imt=65536;class kmt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Imt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Cmt(n))return this.pos++,this._addGap(),Amt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,ie.EOF;return this._err(Ue.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;const r=this.html.charCodeAt(n);return r===ie.CARRIAGE_RETURN?ie.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,ie.EOF;let t=this.html.charCodeAt(this.pos);return t===ie.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,ie.LINE_FEED):t===ie.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,gIe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===ie.LINE_FEED||t===ie.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){yIe(t)?this._err(Ue.controlCharacterInInputStream):vIe(t)&&this._err(Ue.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var or;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(or=or||(or={}));function bIe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const wy=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Rmt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Q7;const Dmt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Nmt=(Q7=String.fromCodePoint)!==null&&Q7!==void 0?Q7:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Pmt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Dmt.get(e))!==null&&t!==void 0?t:e}var sa;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(sa||(sa={}));const Omt=32;var $p;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})($p||($p={}));function Wq(e){return e>=sa.ZERO&&e<=sa.NINE}function $mt(e){return e>=sa.UPPER_A&&e<=sa.UPPER_F||e>=sa.LOWER_A&&e<=sa.LOWER_F}function Mmt(e){return e>=sa.UPPER_A&&e<=sa.UPPER_Z||e>=sa.LOWER_A&&e<=sa.LOWER_Z||Wq(e)}function Lmt(e){return e===sa.EQUALS||Mmt(e)}var Jo;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Jo||(Jo={}));var Qb;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Qb||(Qb={}));class Fmt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Jo.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Qb.Strict}startEntity(t){this.decodeMode=t,this.state=Jo.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Jo.EntityStart:return t.charCodeAt(n)===sa.NUM?(this.state=Jo.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Jo.NamedEntity,this.stateNamedEntity(t,n));case Jo.NumericStart:return this.stateNumericStart(t,n);case Jo.NumericDecimal:return this.stateNumericDecimal(t,n);case Jo.NumericHex:return this.stateNumericHex(t,n);case Jo.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Omt)===sa.LOWER_X?(this.state=Jo.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Jo.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Wq(i)||$mt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(Wq(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===sa.SEMI)this.consumed+=1;else if(this.decodeMode===Qb.Strict)return 0;return this.emitCodePoint(Pmt(this.result),this.consumed),this.errors&&(t!==sa.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&$p.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=_Ie(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Qb.Attribute&&(s===0||Lmt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&$p.VALUE_LENGTH)>>14,s!==0){if(o===sa.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Qb.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&$p.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~$p.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Jo.NamedEntity:return this.result!==0&&(this.decodeMode!==Qb.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Jo.NumericDecimal:return this.emitNumericEntity(0,2);case Jo.NumericHex:return this.emitNumericEntity(0,3);case Jo.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Jo.EntityStart:return 0}}}function xIe(e){let t="";const n=new Fmt(e,r=>t+=Nmt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function _Ie(e,t,n,r){const i=(t&$p.BRANCH_LENGTH)>>7,s=t&$p.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}xIe(wy);xIe(Rmt);var Ke;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Ke=Ke||(Ke={}));var x1;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(x1=x1||(x1={}));var Fc;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Fc=Fc||(Fc={}));var Ne;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ne=Ne||(Ne={}));var O;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(O=O||(O={}));const Bmt=new Map([[Ne.A,O.A],[Ne.ADDRESS,O.ADDRESS],[Ne.ANNOTATION_XML,O.ANNOTATION_XML],[Ne.APPLET,O.APPLET],[Ne.AREA,O.AREA],[Ne.ARTICLE,O.ARTICLE],[Ne.ASIDE,O.ASIDE],[Ne.B,O.B],[Ne.BASE,O.BASE],[Ne.BASEFONT,O.BASEFONT],[Ne.BGSOUND,O.BGSOUND],[Ne.BIG,O.BIG],[Ne.BLOCKQUOTE,O.BLOCKQUOTE],[Ne.BODY,O.BODY],[Ne.BR,O.BR],[Ne.BUTTON,O.BUTTON],[Ne.CAPTION,O.CAPTION],[Ne.CENTER,O.CENTER],[Ne.CODE,O.CODE],[Ne.COL,O.COL],[Ne.COLGROUP,O.COLGROUP],[Ne.DD,O.DD],[Ne.DESC,O.DESC],[Ne.DETAILS,O.DETAILS],[Ne.DIALOG,O.DIALOG],[Ne.DIR,O.DIR],[Ne.DIV,O.DIV],[Ne.DL,O.DL],[Ne.DT,O.DT],[Ne.EM,O.EM],[Ne.EMBED,O.EMBED],[Ne.FIELDSET,O.FIELDSET],[Ne.FIGCAPTION,O.FIGCAPTION],[Ne.FIGURE,O.FIGURE],[Ne.FONT,O.FONT],[Ne.FOOTER,O.FOOTER],[Ne.FOREIGN_OBJECT,O.FOREIGN_OBJECT],[Ne.FORM,O.FORM],[Ne.FRAME,O.FRAME],[Ne.FRAMESET,O.FRAMESET],[Ne.H1,O.H1],[Ne.H2,O.H2],[Ne.H3,O.H3],[Ne.H4,O.H4],[Ne.H5,O.H5],[Ne.H6,O.H6],[Ne.HEAD,O.HEAD],[Ne.HEADER,O.HEADER],[Ne.HGROUP,O.HGROUP],[Ne.HR,O.HR],[Ne.HTML,O.HTML],[Ne.I,O.I],[Ne.IMG,O.IMG],[Ne.IMAGE,O.IMAGE],[Ne.INPUT,O.INPUT],[Ne.IFRAME,O.IFRAME],[Ne.KEYGEN,O.KEYGEN],[Ne.LABEL,O.LABEL],[Ne.LI,O.LI],[Ne.LINK,O.LINK],[Ne.LISTING,O.LISTING],[Ne.MAIN,O.MAIN],[Ne.MALIGNMARK,O.MALIGNMARK],[Ne.MARQUEE,O.MARQUEE],[Ne.MATH,O.MATH],[Ne.MENU,O.MENU],[Ne.META,O.META],[Ne.MGLYPH,O.MGLYPH],[Ne.MI,O.MI],[Ne.MO,O.MO],[Ne.MN,O.MN],[Ne.MS,O.MS],[Ne.MTEXT,O.MTEXT],[Ne.NAV,O.NAV],[Ne.NOBR,O.NOBR],[Ne.NOFRAMES,O.NOFRAMES],[Ne.NOEMBED,O.NOEMBED],[Ne.NOSCRIPT,O.NOSCRIPT],[Ne.OBJECT,O.OBJECT],[Ne.OL,O.OL],[Ne.OPTGROUP,O.OPTGROUP],[Ne.OPTION,O.OPTION],[Ne.P,O.P],[Ne.PARAM,O.PARAM],[Ne.PLAINTEXT,O.PLAINTEXT],[Ne.PRE,O.PRE],[Ne.RB,O.RB],[Ne.RP,O.RP],[Ne.RT,O.RT],[Ne.RTC,O.RTC],[Ne.RUBY,O.RUBY],[Ne.S,O.S],[Ne.SCRIPT,O.SCRIPT],[Ne.SECTION,O.SECTION],[Ne.SELECT,O.SELECT],[Ne.SOURCE,O.SOURCE],[Ne.SMALL,O.SMALL],[Ne.SPAN,O.SPAN],[Ne.STRIKE,O.STRIKE],[Ne.STRONG,O.STRONG],[Ne.STYLE,O.STYLE],[Ne.SUB,O.SUB],[Ne.SUMMARY,O.SUMMARY],[Ne.SUP,O.SUP],[Ne.TABLE,O.TABLE],[Ne.TBODY,O.TBODY],[Ne.TEMPLATE,O.TEMPLATE],[Ne.TEXTAREA,O.TEXTAREA],[Ne.TFOOT,O.TFOOT],[Ne.TD,O.TD],[Ne.TH,O.TH],[Ne.THEAD,O.THEAD],[Ne.TITLE,O.TITLE],[Ne.TR,O.TR],[Ne.TRACK,O.TRACK],[Ne.TT,O.TT],[Ne.U,O.U],[Ne.UL,O.UL],[Ne.SVG,O.SVG],[Ne.VAR,O.VAR],[Ne.WBR,O.WBR],[Ne.XMP,O.XMP]]);function N2(e){var t;return(t=Bmt.get(e))!==null&&t!==void 0?t:O.UNKNOWN}const ht=O,jmt={[Ke.HTML]:new Set([ht.ADDRESS,ht.APPLET,ht.AREA,ht.ARTICLE,ht.ASIDE,ht.BASE,ht.BASEFONT,ht.BGSOUND,ht.BLOCKQUOTE,ht.BODY,ht.BR,ht.BUTTON,ht.CAPTION,ht.CENTER,ht.COL,ht.COLGROUP,ht.DD,ht.DETAILS,ht.DIR,ht.DIV,ht.DL,ht.DT,ht.EMBED,ht.FIELDSET,ht.FIGCAPTION,ht.FIGURE,ht.FOOTER,ht.FORM,ht.FRAME,ht.FRAMESET,ht.H1,ht.H2,ht.H3,ht.H4,ht.H5,ht.H6,ht.HEAD,ht.HEADER,ht.HGROUP,ht.HR,ht.HTML,ht.IFRAME,ht.IMG,ht.INPUT,ht.LI,ht.LINK,ht.LISTING,ht.MAIN,ht.MARQUEE,ht.MENU,ht.META,ht.NAV,ht.NOEMBED,ht.NOFRAMES,ht.NOSCRIPT,ht.OBJECT,ht.OL,ht.P,ht.PARAM,ht.PLAINTEXT,ht.PRE,ht.SCRIPT,ht.SECTION,ht.SELECT,ht.SOURCE,ht.STYLE,ht.SUMMARY,ht.TABLE,ht.TBODY,ht.TD,ht.TEMPLATE,ht.TEXTAREA,ht.TFOOT,ht.TH,ht.THEAD,ht.TITLE,ht.TR,ht.TRACK,ht.UL,ht.WBR,ht.XMP]),[Ke.MATHML]:new Set([ht.MI,ht.MO,ht.MN,ht.MS,ht.MTEXT,ht.ANNOTATION_XML]),[Ke.SVG]:new Set([ht.TITLE,ht.FOREIGN_OBJECT,ht.DESC]),[Ke.XLINK]:new Set,[Ke.XML]:new Set,[Ke.XMLNS]:new Set};function wIe(e){return e===ht.H1||e===ht.H2||e===ht.H3||e===ht.H4||e===ht.H5||e===ht.H6}Ne.STYLE,Ne.SCRIPT,Ne.XMP,Ne.IFRAME,Ne.NOEMBED,Ne.NOFRAMES,Ne.PLAINTEXT;const Umt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var oe;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(oe||(oe={}));const ro={DATA:oe.DATA,RCDATA:oe.RCDATA,RAWTEXT:oe.RAWTEXT,SCRIPT_DATA:oe.SCRIPT_DATA,PLAINTEXT:oe.PLAINTEXT,CDATA_SECTION:oe.CDATA_SECTION};function tk(e){return e>=ie.DIGIT_0&&e<=ie.DIGIT_9}function tI(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_Z}function zmt(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_Z}function Ey(e){return zmt(e)||tI(e)}function Gq(e){return Ey(e)||tk(e)}function EIe(e){return e>=ie.LATIN_CAPITAL_A&&e<=ie.LATIN_CAPITAL_F}function SIe(e){return e>=ie.LATIN_SMALL_A&&e<=ie.LATIN_SMALL_F}function Vmt(e){return tk(e)||EIe(e)||SIe(e)}function W3(e){return e+32}function TIe(e){return e===ie.SPACE||e===ie.LINE_FEED||e===ie.TABULATION||e===ie.FORM_FEED}function Hmt(e){return e===ie.EQUALS_SIGN||Gq(e)}function ope(e){return TIe(e)||e===ie.SOLIDUS||e===ie.GREATER_THAN_SIGN}class qmt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=oe.DATA,this.returnState=oe.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new kmt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:or.START_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:or.END_TAG,tagName:"",tagID:O.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:or.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:or.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(bIe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ue.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=N2(t.tagName),t.type===or.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ue.endTagWithAttributes),t.selfClosing&&this._err(Ue.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case or.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case or.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case or.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:or.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=TIe(t)?or.WHITESPACE_CHARACTER:t===ie.NULL?or.NULL_CHARACTER:or.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(or.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=wy[0];s>=0&&(s=_Ie(wy,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=wy[s];const a=o&$p.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==ie.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Hmt(this.preprocessor.peek(1))?(n=[ie.AMPERSAND],s+=u):(n=u===0?[wy[s]&~$p.VALUE_LENGTH]:u===1?[wy[++s]]:[wy[++s],wy[++s]],r=0,i=t!==ie.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ue.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===oe.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===oe.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case oe.DATA:{this._stateData(t);break}case oe.RCDATA:{this._stateRcdata(t);break}case oe.RAWTEXT:{this._stateRawtext(t);break}case oe.SCRIPT_DATA:{this._stateScriptData(t);break}case oe.PLAINTEXT:{this._statePlaintext(t);break}case oe.TAG_OPEN:{this._stateTagOpen(t);break}case oe.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case oe.TAG_NAME:{this._stateTagName(t);break}case oe.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case oe.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case oe.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case oe.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case oe.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case oe.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case oe.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case oe.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case oe.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case oe.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case oe.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case oe.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case oe.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case oe.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case oe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case oe.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case oe.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case oe.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case oe.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case oe.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case oe.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case oe.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case oe.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case oe.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case oe.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case oe.BOGUS_COMMENT:{this._stateBogusComment(t);break}case oe.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case oe.COMMENT_START:{this._stateCommentStart(t);break}case oe.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case oe.COMMENT:{this._stateComment(t);break}case oe.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case oe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case oe.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case oe.COMMENT_END:{this._stateCommentEnd(t);break}case oe.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case oe.DOCTYPE:{this._stateDoctype(t);break}case oe.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case oe.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case oe.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case oe.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case oe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case oe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case oe.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case oe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case oe.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case oe.CDATA_SECTION:{this._stateCdataSection(t);break}case oe.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case oe.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case oe.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case oe.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case oe.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case oe.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case oe.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case oe.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case oe.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case oe.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=oe.TAG_OPEN;break}case ie.AMPERSAND:{this.returnState=oe.DATA,this.state=oe.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitCodePoint(t);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case ie.AMPERSAND:{this.returnState=oe.RCDATA,this.state=oe.CHARACTER_REFERENCE;break}case ie.LESS_THAN_SIGN:{this.state=oe.RCDATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=oe.RAWTEXT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Ey(t))this._createStartTagToken(),this.state=oe.TAG_NAME,this._stateTagName(t);else switch(t){case ie.EXCLAMATION_MARK:{this.state=oe.MARKUP_DECLARATION_OPEN;break}case ie.SOLIDUS:{this.state=oe.END_TAG_OPEN;break}case ie.QUESTION_MARK:{this._err(Ue.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t);break}case ie.EOF:{this._err(Ue.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ue.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=oe.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Ey(t))this._createEndTagToken(),this.state=oe.TAG_NAME,this._stateTagName(t);else switch(t){case ie.GREATER_THAN_SIGN:{this._err(Ue.missingEndTagName),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ue.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this.state=oe.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.tagName+=gs;break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(tI(t)?W3(t):t)}}_stateRcdataLessThanSign(t){t===ie.SOLIDUS?this.state=oe.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=oe.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Ey(t)?(this.state=oe.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=oe.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=oe.BEFORE_ATTRIBUTE_NAME,!1;case ie.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=oe.SELF_CLOSING_START_TAG,!1;case ie.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=oe.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===ie.SOLIDUS?this.state=oe.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Ey(t)?(this.state=oe.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case ie.SOLIDUS:{this.state=oe.SCRIPT_DATA_END_TAG_OPEN;break}case ie.EXCLAMATION_MARK:{this.state=oe.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Ey(t)?(this.state=oe.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===ie.HYPHEN_MINUS?(this.state=oe.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===ie.HYPHEN_MINUS?(this.state=oe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=oe.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_ESCAPED,this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case ie.GREATER_THAN_SIGN:{this.state=oe.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_ESCAPED,this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===ie.SOLIDUS?this.state=oe.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Ey(t)?(this._emitChars("<"),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Ey(t)?(this.state=oe.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Il.SCRIPT,!1)&&ope(this.preprocessor.peek(Il.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Il.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=oe.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case ie.HYPHEN_MINUS:{this._emitChars("-");break}case ie.LESS_THAN_SIGN:{this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case ie.GREATER_THAN_SIGN:{this.state=oe.SCRIPT_DATA,this._emitChars(">");break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gs);break}case ie.EOF:{this._err(Ue.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===ie.SOLIDUS?(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Il.SCRIPT,!1)&&ope(this.preprocessor.peek(Il.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Il.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=oe.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=oe.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this.state=oe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._err(Ue.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=oe.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=oe.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:case ie.SOLIDUS:case ie.GREATER_THAN_SIGN:case ie.EOF:{this._leaveAttrName(),this.state=oe.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case ie.EQUALS_SIGN:{this._leaveAttrName(),this.state=oe.BEFORE_ATTRIBUTE_VALUE;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:{this._err(Ue.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.name+=gs;break}default:this.currentAttr.name+=String.fromCodePoint(tI(t)?W3(t):t)}}_stateAfterAttributeName(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.SOLIDUS:{this.state=oe.SELF_CLOSING_START_TAG;break}case ie.EQUALS_SIGN:{this.state=oe.BEFORE_ATTRIBUTE_VALUE;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=oe.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{this.state=oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this.state=oe.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingAttributeValue),this.state=oe.DATA,this.emitCurrentTagToken();break}default:this.state=oe.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case ie.QUOTATION_MARK:{this.state=oe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=oe.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.value+=gs;break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case ie.APOSTROPHE:{this.state=oe.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case ie.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=oe.CHARACTER_REFERENCE;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.value+=gs;break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ie.AMPERSAND:{this.returnState=oe.ATTRIBUTE_VALUE_UNQUOTED,this.state=oe.CHARACTER_REFERENCE;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this.currentAttr.value+=gs;break}case ie.QUOTATION_MARK:case ie.APOSTROPHE:case ie.LESS_THAN_SIGN:case ie.EQUALS_SIGN:case ie.GRAVE_ACCENT:{this._err(Ue.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this._leaveAttrValue(),this.state=oe.BEFORE_ATTRIBUTE_NAME;break}case ie.SOLIDUS:{this._leaveAttrValue(),this.state=oe.SELF_CLOSING_START_TAG;break}case ie.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this._err(Ue.missingWhitespaceBetweenAttributes),this.state=oe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case ie.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=oe.DATA,this.emitCurrentTagToken();break}case ie.EOF:{this._err(Ue.eofInTag),this._emitEOFToken();break}default:this._err(Ue.unexpectedSolidusInTag),this.state=oe.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.data+=gs;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Il.DASH_DASH,!0)?(this._createCommentToken(Il.DASH_DASH.length+1),this.state=oe.COMMENT_START):this._consumeSequenceIfMatch(Il.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Il.DOCTYPE.length+1),this.state=oe.DOCTYPE):this._consumeSequenceIfMatch(Il.CDATA_START,!0)?this.inForeignNode?this.state=oe.CDATA_SECTION:(this._err(Ue.cdataInHtmlContent),this._createCommentToken(Il.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=oe.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ue.incorrectlyOpenedComment),this._createCommentToken(2),this.state=oe.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_START_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptClosingOfEmptyComment),this.state=oe.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_END;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptClosingOfEmptyComment),this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=oe.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_END_DASH;break}case ie.LESS_THAN_SIGN:{n.data+="<",this.state=oe.COMMENT_LESS_THAN_SIGN;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.data+=gs;break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case ie.EXCLAMATION_MARK:{n.data+="!",this.state=oe.COMMENT_LESS_THAN_SIGN_BANG;break}case ie.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===ie.HYPHEN_MINUS?this.state=oe.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=oe.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===ie.HYPHEN_MINUS?this.state=oe.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=oe.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==ie.GREATER_THAN_SIGN&&t!==ie.EOF&&this._err(Ue.nestedComment),this.state=oe.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{this.state=oe.COMMENT_END;break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EXCLAMATION_MARK:{this.state=oe.COMMENT_END_BANG;break}case ie.HYPHEN_MINUS:{n.data+="-";break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=oe.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case ie.HYPHEN_MINUS:{n.data+="--!",this.state=oe.COMMENT_END_DASH;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.incorrectlyClosedComment),this.state=oe.DATA,this.emitCurrentComment(n);break}case ie.EOF:{this._err(Ue.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=oe.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=oe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case ie.EOF:{this._err(Ue.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingWhitespaceBeforeDoctypeName),this.state=oe.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(tI(t))this._createDoctypeToken(String.fromCharCode(W3(t))),this.state=oe.DOCTYPE_NAME;else switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.NULL:{this._err(Ue.unexpectedNullCharacter),this._createDoctypeToken(gs),this.state=oe.DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=oe.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.AFTER_DOCTYPE_NAME;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.name+=gs;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(tI(t)?W3(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Il.PUBLIC,!1)?this.state=oe.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Il.SYSTEM,!1)?this.state=oe.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ue.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(Ue.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ue.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.publicId="",this.state=oe.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.publicId+=gs;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=oe.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.publicId+=gs;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case ie.GREATER_THAN_SIGN:{this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.QUOTATION_MARK:{this._err(Ue.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ue.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.QUOTATION_MARK:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:{this.state=oe.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.QUOTATION_MARK:{this._err(Ue.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{this._err(Ue.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.QUOTATION_MARK:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case ie.APOSTROPHE:{n.systemId="",this.state=oe.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.DATA,this.emitCurrentDoctype(n);break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case ie.QUOTATION_MARK:{this.state=oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.systemId+=gs;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case ie.APOSTROPHE:{this.state=oe.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter),n.systemId+=gs;break}case ie.GREATER_THAN_SIGN:{this._err(Ue.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case ie.SPACE:case ie.LINE_FEED:case ie.TABULATION:case ie.FORM_FEED:break;case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.EOF:{this._err(Ue.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ue.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=oe.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case ie.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=oe.DATA;break}case ie.NULL:{this._err(Ue.unexpectedNullCharacter);break}case ie.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case ie.RIGHT_SQUARE_BRACKET:{this.state=oe.CDATA_SECTION_BRACKET;break}case ie.EOF:{this._err(Ue.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===ie.RIGHT_SQUARE_BRACKET?this.state=oe.CDATA_SECTION_END:(this._emitChars("]"),this.state=oe.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case ie.GREATER_THAN_SIGN:{this.state=oe.DATA;break}case ie.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=oe.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===ie.NUMBER_SIGN?this.state=oe.NUMERIC_CHARACTER_REFERENCE:Gq(t)?(this.state=oe.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this.state=oe.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){Gq(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===ie.SEMICOLON&&this._err(Ue.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===ie.LATIN_SMALL_X||t===ie.LATIN_CAPITAL_X?this.state=oe.HEXADEMICAL_CHARACTER_REFERENCE_START:tk(t)?(this.state=oe.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ue.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){Vmt(t)?(this.state=oe.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ue.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(ie.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(ie.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){EIe(t)?this.charRefCode=this.charRefCode*16+t-55:SIe(t)?this.charRefCode=this.charRefCode*16+t-87:tk(t)?this.charRefCode=this.charRefCode*16+t-48:t===ie.SEMICOLON?this.state=oe.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ue.missingSemicolonAfterCharacterReference),this.state=oe.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){tk(t)?this.charRefCode=this.charRefCode*10+t-48:t===ie.SEMICOLON?this.state=oe.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ue.missingSemicolonAfterCharacterReference),this.state=oe.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===ie.NULL)this._err(Ue.nullCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ue.characterReferenceOutsideUnicodeRange),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(gIe(this.charRefCode))this._err(Ue.surrogateCharacterReference),this.charRefCode=ie.REPLACEMENT_CHARACTER;else if(vIe(this.charRefCode))this._err(Ue.noncharacterCharacterReference);else if(yIe(this.charRefCode)||this.charRefCode===ie.CARRIAGE_RETURN){this._err(Ue.controlCharacterReference);const n=Umt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const CIe=new Set([O.DD,O.DT,O.LI,O.OPTGROUP,O.OPTION,O.P,O.RB,O.RP,O.RT,O.RTC]),ape=new Set([...CIe,O.CAPTION,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]),G3=new Map([[O.APPLET,Ke.HTML],[O.CAPTION,Ke.HTML],[O.HTML,Ke.HTML],[O.MARQUEE,Ke.HTML],[O.OBJECT,Ke.HTML],[O.TABLE,Ke.HTML],[O.TD,Ke.HTML],[O.TEMPLATE,Ke.HTML],[O.TH,Ke.HTML],[O.ANNOTATION_XML,Ke.MATHML],[O.MI,Ke.MATHML],[O.MN,Ke.MATHML],[O.MO,Ke.MATHML],[O.MS,Ke.MATHML],[O.MTEXT,Ke.MATHML],[O.DESC,Ke.SVG],[O.FOREIGN_OBJECT,Ke.SVG],[O.TITLE,Ke.SVG]]),Wmt=[O.H1,O.H2,O.H3,O.H4,O.H5,O.H6],Gmt=[O.TR,O.TEMPLATE,O.HTML],Ymt=[O.TBODY,O.TFOOT,O.THEAD,O.TEMPLATE,O.HTML],Kmt=[O.TABLE,O.TEMPLATE,O.HTML],Xmt=[O.TD,O.TH];class Qmt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=O.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===O.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Ke.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Ke.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Wmt,Ke.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Xmt,Ke.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Kmt,Ke.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Ymt,Ke.HTML)}clearBackToTableRowContext(){this.clearBackTo(Gmt,Ke.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===O.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===O.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ke.HTML)return!0;if(G3.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(wIe(n)&&r===Ke.HTML)return!0;if(G3.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ke.HTML)return!0;if((r===O.UL||r===O.OL)&&i===Ke.HTML||G3.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Ke.HTML)return!0;if(r===O.BUTTON&&i===Ke.HTML||G3.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ke.HTML){if(r===t)return!0;if(r===O.TABLE||r===O.TEMPLATE||r===O.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Ke.HTML){if(n===O.TBODY||n===O.THEAD||n===O.TFOOT)return!0;if(n===O.TABLE||n===O.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Ke.HTML){if(r===t)return!0;if(r!==O.OPTION&&r!==O.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;CIe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;ape.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&ape.has(this.currentTagId);)this.pop()}}const J7=3;var th;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(th=th||(th={}));const upe={type:th.Marker};class Jmt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===th.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<J7)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<J7)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=J7&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(upe)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:th.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:th.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(upe);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===th.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===th.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===th.Element&&n.element===t)}}function lpe(e){return{nodeName:"#text",value:e,parentNode:null}}const bE={createDocument(){return{nodeName:"#document",mode:Fc.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};bE.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(bE.isTextNode(n)){n.value+=t;return}}bE.appendChild(e,lpe(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&bE.isTextNode(r)?r.value+=t:bE.insertBefore(e,lpe(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},AIe="html",Zmt="about:legacy-compat",e0t="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",IIe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],t0t=[...IIe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],n0t=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),kIe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],r0t=[...kIe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function cpe(e,t){return t.some(n=>e.startsWith(n))}function i0t(e){return e.name===AIe&&e.publicId===null&&(e.systemId===null||e.systemId===Zmt)}function s0t(e){if(e.name!==AIe)return Fc.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===e0t)return Fc.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),n0t.has(n))return Fc.QUIRKS;let r=t===null?t0t:IIe;if(cpe(n,r))return Fc.QUIRKS;if(r=t===null?kIe:r0t,cpe(n,r))return Fc.LIMITED_QUIRKS}return Fc.NO_QUIRKS}const fpe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},o0t="definitionurl",a0t="definitionURL",u0t=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),l0t=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Ke.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Ke.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Ke.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Ke.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Ke.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Ke.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Ke.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Ke.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Ke.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Ke.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Ke.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Ke.XMLNS}]]),c0t=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),f0t=new Set([O.B,O.BIG,O.BLOCKQUOTE,O.BODY,O.BR,O.CENTER,O.CODE,O.DD,O.DIV,O.DL,O.DT,O.EM,O.EMBED,O.H1,O.H2,O.H3,O.H4,O.H5,O.H6,O.HEAD,O.HR,O.I,O.IMG,O.LI,O.LISTING,O.MENU,O.META,O.NOBR,O.OL,O.P,O.PRE,O.RUBY,O.S,O.SMALL,O.SPAN,O.STRONG,O.STRIKE,O.SUB,O.SUP,O.TABLE,O.TT,O.U,O.UL,O.VAR]);function d0t(e){const t=e.tagID;return t===O.FONT&&e.attrs.some(({name:r})=>r===x1.COLOR||r===x1.SIZE||r===x1.FACE)||f0t.has(t)}function RIe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===o0t){e.attrs[t].name=a0t;break}}function DIe(e){for(let t=0;t<e.attrs.length;t++){const n=u0t.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function cZ(e){for(let t=0;t<e.attrs.length;t++){const n=l0t.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function h0t(e){const t=c0t.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=N2(e.tagName))}function p0t(e,t){return t===Ke.MATHML&&(e===O.MI||e===O.MO||e===O.MN||e===O.MS||e===O.MTEXT)}function m0t(e,t,n){if(t===Ke.MATHML&&e===O.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===x1.ENCODING){const i=n[r].value.toLowerCase();return i===fpe.TEXT_HTML||i===fpe.APPLICATION_XML}}return t===Ke.SVG&&(e===O.FOREIGN_OBJECT||e===O.DESC||e===O.TITLE)}function g0t(e,t,n,r){return(!r||r===Ke.HTML)&&m0t(e,t,n)||(!r||r===Ke.MATHML)&&p0t(e,t)}const y0t="hidden",v0t=8,b0t=3;var de;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(de||(de={}));const x0t={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},NIe=new Set([O.TABLE,O.TBODY,O.TFOOT,O.THEAD,O.TR]),dpe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:bE,onParseError:null};let hpe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=de.INITIAL,this.originalInsertionMode=de.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...dpe,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new qmt(this.options,this),this.activeFormattingElements=new Jmt(this.treeAdapter),this.fragmentContextID=r?N2(this.treeAdapter.getTagName(r)):O.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Qmt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...dpe,...n};t??(t=r.treeAdapter.createElement(Ne.TEMPLATE,Ke.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Ke.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===O.TEMPLATE&&s.tmplInsertionModeStack.unshift(de.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:x0t,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Ke.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Ke.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=de.TEXT}switchToPlaintextParsing(){this.insertionMode=de.TEXT,this.originalInsertionMode=de.IN_BODY,this.tokenizer.state=ro.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ne.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Ke.HTML))switch(this.fragmentContextID){case O.TITLE:case O.TEXTAREA:{this.tokenizer.state=ro.RCDATA;break}case O.STYLE:case O.XMP:case O.IFRAME:case O.NOEMBED:case O.NOFRAMES:case O.NOSCRIPT:{this.tokenizer.state=ro.RAWTEXT;break}case O.SCRIPT:{this.tokenizer.state=ro.SCRIPT_DATA;break}case O.PLAINTEXT:{this.tokenizer.state=ro.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Ke.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Ke.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ne.HTML,Ke.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,O.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===or.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===O.SVG&&this.treeAdapter.getTagName(n)===Ne.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Ke.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===O.MGLYPH||t.tagID===O.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Ke.HTML)}_processToken(t){switch(t.type){case or.CHARACTER:{this.onCharacter(t);break}case or.NULL_CHARACTER:{this.onNullCharacter(t);break}case or.COMMENT:{this.onComment(t);break}case or.DOCTYPE:{this.onDoctype(t);break}case or.START_TAG:{this._processStartTag(t);break}case or.END_TAG:{this.onEndTag(t);break}case or.EOF:{this.onEof(t);break}case or.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return g0t(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===th.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=de.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(O.P),this.openElements.popUntilTagNamePopped(O.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case O.TR:{this.insertionMode=de.IN_ROW;return}case O.TBODY:case O.THEAD:case O.TFOOT:{this.insertionMode=de.IN_TABLE_BODY;return}case O.CAPTION:{this.insertionMode=de.IN_CAPTION;return}case O.COLGROUP:{this.insertionMode=de.IN_COLUMN_GROUP;return}case O.TABLE:{this.insertionMode=de.IN_TABLE;return}case O.BODY:{this.insertionMode=de.IN_BODY;return}case O.FRAMESET:{this.insertionMode=de.IN_FRAMESET;return}case O.SELECT:{this._resetInsertionModeForSelect(t);return}case O.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case O.HTML:{this.insertionMode=this.headElement?de.AFTER_HEAD:de.BEFORE_HEAD;return}case O.TD:case O.TH:{if(t>0){this.insertionMode=de.IN_CELL;return}break}case O.HEAD:{if(t>0){this.insertionMode=de.IN_HEAD;return}break}}this.insertionMode=de.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===O.TEMPLATE)break;if(r===O.TABLE){this.insertionMode=de.IN_SELECT_IN_TABLE;return}}this.insertionMode=de.IN_SELECT}_isElementCausesFosterParenting(t){return NIe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case O.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Ke.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case O.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return jmt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Xgt(this,t);return}switch(this.insertionMode){case de.INITIAL:{aA(this,t);break}case de.BEFORE_HTML:{nk(this,t);break}case de.BEFORE_HEAD:{rk(this,t);break}case de.IN_HEAD:{ik(this,t);break}case de.IN_HEAD_NO_SCRIPT:{sk(this,t);break}case de.AFTER_HEAD:{ok(this,t);break}case de.IN_BODY:case de.IN_CAPTION:case de.IN_CELL:case de.IN_TEMPLATE:{OIe(this,t);break}case de.TEXT:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{Z7(this,t);break}case de.IN_TABLE_TEXT:{jIe(this,t);break}case de.IN_COLUMN_GROUP:{w$(this,t);break}case de.AFTER_BODY:{E$(this,t);break}case de.AFTER_AFTER_BODY:{$4(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Kgt(this,t);return}switch(this.insertionMode){case de.INITIAL:{aA(this,t);break}case de.BEFORE_HTML:{nk(this,t);break}case de.BEFORE_HEAD:{rk(this,t);break}case de.IN_HEAD:{ik(this,t);break}case de.IN_HEAD_NO_SCRIPT:{sk(this,t);break}case de.AFTER_HEAD:{ok(this,t);break}case de.TEXT:{this._insertCharacters(t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{Z7(this,t);break}case de.IN_COLUMN_GROUP:{w$(this,t);break}case de.AFTER_BODY:{E$(this,t);break}case de.AFTER_AFTER_BODY:{$4(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){Yq(this,t);return}switch(this.insertionMode){case de.INITIAL:case de.BEFORE_HTML:case de.BEFORE_HEAD:case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:case de.IN_BODY:case de.IN_TABLE:case de.IN_CAPTION:case de.IN_COLUMN_GROUP:case de.IN_TABLE_BODY:case de.IN_ROW:case de.IN_CELL:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:case de.IN_TEMPLATE:case de.IN_FRAMESET:case de.AFTER_FRAMESET:{Yq(this,t);break}case de.IN_TABLE_TEXT:{uA(this,t);break}case de.AFTER_BODY:{A0t(this,t);break}case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{I0t(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case de.INITIAL:{k0t(this,t);break}case de.BEFORE_HEAD:case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:{this._err(t,Ue.misplacedDoctype);break}case de.IN_TABLE_TEXT:{uA(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ue.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Qgt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case de.INITIAL:{aA(this,t);break}case de.BEFORE_HTML:{R0t(this,t);break}case de.BEFORE_HEAD:{N0t(this,t);break}case de.IN_HEAD:{Uh(this,t);break}case de.IN_HEAD_NO_SCRIPT:{$0t(this,t);break}case de.AFTER_HEAD:{L0t(this,t);break}case de.IN_BODY:{Pu(this,t);break}case de.IN_TABLE:{rT(this,t);break}case de.IN_TABLE_TEXT:{uA(this,t);break}case de.IN_CAPTION:{Pgt(this,t);break}case de.IN_COLUMN_GROUP:{hZ(this,t);break}case de.IN_TABLE_BODY:{I5(this,t);break}case de.IN_ROW:{k5(this,t);break}case de.IN_CELL:{Mgt(this,t);break}case de.IN_SELECT:{VIe(this,t);break}case de.IN_SELECT_IN_TABLE:{Fgt(this,t);break}case de.IN_TEMPLATE:{jgt(this,t);break}case de.AFTER_BODY:{zgt(this,t);break}case de.IN_FRAMESET:{Vgt(this,t);break}case de.AFTER_FRAMESET:{qgt(this,t);break}case de.AFTER_AFTER_BODY:{Ggt(this,t);break}case de.AFTER_AFTER_FRAMESET:{Ygt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Jgt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case de.INITIAL:{aA(this,t);break}case de.BEFORE_HTML:{D0t(this,t);break}case de.BEFORE_HEAD:{P0t(this,t);break}case de.IN_HEAD:{O0t(this,t);break}case de.IN_HEAD_NO_SCRIPT:{M0t(this,t);break}case de.AFTER_HEAD:{F0t(this,t);break}case de.IN_BODY:{A5(this,t);break}case de.TEXT:{Egt(this,t);break}case de.IN_TABLE:{gR(this,t);break}case de.IN_TABLE_TEXT:{uA(this,t);break}case de.IN_CAPTION:{Ogt(this,t);break}case de.IN_COLUMN_GROUP:{$gt(this,t);break}case de.IN_TABLE_BODY:{Kq(this,t);break}case de.IN_ROW:{zIe(this,t);break}case de.IN_CELL:{Lgt(this,t);break}case de.IN_SELECT:{HIe(this,t);break}case de.IN_SELECT_IN_TABLE:{Bgt(this,t);break}case de.IN_TEMPLATE:{Ugt(this,t);break}case de.AFTER_BODY:{WIe(this,t);break}case de.IN_FRAMESET:{Hgt(this,t);break}case de.AFTER_FRAMESET:{Wgt(this,t);break}case de.AFTER_AFTER_BODY:{$4(this,t);break}}}onEof(t){switch(this.insertionMode){case de.INITIAL:{aA(this,t);break}case de.BEFORE_HTML:{nk(this,t);break}case de.BEFORE_HEAD:{rk(this,t);break}case de.IN_HEAD:{ik(this,t);break}case de.IN_HEAD_NO_SCRIPT:{sk(this,t);break}case de.AFTER_HEAD:{ok(this,t);break}case de.IN_BODY:case de.IN_TABLE:case de.IN_CAPTION:case de.IN_COLUMN_GROUP:case de.IN_TABLE_BODY:case de.IN_ROW:case de.IN_CELL:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:{FIe(this,t);break}case de.TEXT:{Sgt(this,t);break}case de.IN_TABLE_TEXT:{uA(this,t);break}case de.IN_TEMPLATE:{qIe(this,t);break}case de.AFTER_BODY:case de.IN_FRAMESET:case de.AFTER_FRAMESET:case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{dZ(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===ie.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case de.IN_HEAD:case de.IN_HEAD_NO_SCRIPT:case de.AFTER_HEAD:case de.TEXT:case de.IN_COLUMN_GROUP:case de.IN_SELECT:case de.IN_SELECT_IN_TABLE:case de.IN_FRAMESET:case de.AFTER_FRAMESET:{this._insertCharacters(t);break}case de.IN_BODY:case de.IN_CAPTION:case de.IN_CELL:case de.IN_TEMPLATE:case de.AFTER_BODY:case de.AFTER_AFTER_BODY:case de.AFTER_AFTER_FRAMESET:{PIe(this,t);break}case de.IN_TABLE:case de.IN_TABLE_BODY:case de.IN_ROW:{Z7(this,t);break}case de.IN_TABLE_TEXT:{BIe(this,t);break}}}};function _0t(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):LIe(e,t),n}function w0t(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function E0t(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=b0t;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=S0t(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function S0t(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function T0t(e,t,n){const r=e.treeAdapter.getTagName(t),i=N2(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===O.TEMPLATE&&s===Ke.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function C0t(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function fZ(e,t){for(let n=0;n<v0t;n++){const r=_0t(e,t);if(!r)break;const i=w0t(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=E0t(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&T0t(e,o,s),C0t(e,i,r)}}function Yq(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function A0t(e,t){e._appendCommentNode(t,e.openElements.items[0])}function I0t(e,t){e._appendCommentNode(t,e.document)}function dZ(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function k0t(e,t){e._setDocumentType(t);const n=t.forceQuirks?Fc.QUIRKS:s0t(t);i0t(t)||e._err(t,Ue.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=de.BEFORE_HTML}function aA(e,t){e._err(t,Ue.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Fc.QUIRKS),e.insertionMode=de.BEFORE_HTML,e._processToken(t)}function R0t(e,t){t.tagID===O.HTML?(e._insertElement(t,Ke.HTML),e.insertionMode=de.BEFORE_HEAD):nk(e,t)}function D0t(e,t){const n=t.tagID;(n===O.HTML||n===O.HEAD||n===O.BODY||n===O.BR)&&nk(e,t)}function nk(e,t){e._insertFakeRootElement(),e.insertionMode=de.BEFORE_HEAD,e._processToken(t)}function N0t(e,t){switch(t.tagID){case O.HTML:{Pu(e,t);break}case O.HEAD:{e._insertElement(t,Ke.HTML),e.headElement=e.openElements.current,e.insertionMode=de.IN_HEAD;break}default:rk(e,t)}}function P0t(e,t){const n=t.tagID;n===O.HEAD||n===O.BODY||n===O.HTML||n===O.BR?rk(e,t):e._err(t,Ue.endTagWithoutMatchingOpenElement)}function rk(e,t){e._insertFakeElement(Ne.HEAD,O.HEAD),e.headElement=e.openElements.current,e.insertionMode=de.IN_HEAD,e._processToken(t)}function Uh(e,t){switch(t.tagID){case O.HTML:{Pu(e,t);break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:{e._appendElement(t,Ke.HTML),t.ackSelfClosing=!0;break}case O.TITLE:{e._switchToTextParsing(t,ro.RCDATA);break}case O.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ro.RAWTEXT):(e._insertElement(t,Ke.HTML),e.insertionMode=de.IN_HEAD_NO_SCRIPT);break}case O.NOFRAMES:case O.STYLE:{e._switchToTextParsing(t,ro.RAWTEXT);break}case O.SCRIPT:{e._switchToTextParsing(t,ro.SCRIPT_DATA);break}case O.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=de.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(de.IN_TEMPLATE);break}case O.HEAD:{e._err(t,Ue.misplacedStartTagForHeadElement);break}default:ik(e,t)}}function O0t(e,t){switch(t.tagID){case O.HEAD:{e.openElements.pop(),e.insertionMode=de.AFTER_HEAD;break}case O.BODY:case O.BR:case O.HTML:{ik(e,t);break}case O.TEMPLATE:{W_(e,t);break}default:e._err(t,Ue.endTagWithoutMatchingOpenElement)}}function W_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==O.TEMPLATE&&e._err(t,Ue.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ue.endTagWithoutMatchingOpenElement)}function ik(e,t){e.openElements.pop(),e.insertionMode=de.AFTER_HEAD,e._processToken(t)}function $0t(e,t){switch(t.tagID){case O.HTML:{Pu(e,t);break}case O.BASEFONT:case O.BGSOUND:case O.HEAD:case O.LINK:case O.META:case O.NOFRAMES:case O.STYLE:{Uh(e,t);break}case O.NOSCRIPT:{e._err(t,Ue.nestedNoscriptInHead);break}default:sk(e,t)}}function M0t(e,t){switch(t.tagID){case O.NOSCRIPT:{e.openElements.pop(),e.insertionMode=de.IN_HEAD;break}case O.BR:{sk(e,t);break}default:e._err(t,Ue.endTagWithoutMatchingOpenElement)}}function sk(e,t){const n=t.type===or.EOF?Ue.openElementsLeftAfterEof:Ue.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=de.IN_HEAD,e._processToken(t)}function L0t(e,t){switch(t.tagID){case O.HTML:{Pu(e,t);break}case O.BODY:{e._insertElement(t,Ke.HTML),e.framesetOk=!1,e.insertionMode=de.IN_BODY;break}case O.FRAMESET:{e._insertElement(t,Ke.HTML),e.insertionMode=de.IN_FRAMESET;break}case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{e._err(t,Ue.abandonedHeadElementChild),e.openElements.push(e.headElement,O.HEAD),Uh(e,t),e.openElements.remove(e.headElement);break}case O.HEAD:{e._err(t,Ue.misplacedStartTagForHeadElement);break}default:ok(e,t)}}function F0t(e,t){switch(t.tagID){case O.BODY:case O.HTML:case O.BR:{ok(e,t);break}case O.TEMPLATE:{W_(e,t);break}default:e._err(t,Ue.endTagWithoutMatchingOpenElement)}}function ok(e,t){e._insertFakeElement(Ne.BODY,O.BODY),e.insertionMode=de.IN_BODY,C5(e,t)}function C5(e,t){switch(t.type){case or.CHARACTER:{OIe(e,t);break}case or.WHITESPACE_CHARACTER:{PIe(e,t);break}case or.COMMENT:{Yq(e,t);break}case or.START_TAG:{Pu(e,t);break}case or.END_TAG:{A5(e,t);break}case or.EOF:{FIe(e,t);break}}}function PIe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function OIe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function B0t(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function j0t(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function U0t(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Ke.HTML),e.insertionMode=de.IN_FRAMESET)}function z0t(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ke.HTML)}function V0t(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),wIe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Ke.HTML)}function H0t(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ke.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function q0t(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ke.HTML),n||(e.formElement=e.openElements.current))}function W0t(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===O.LI&&i===O.LI||(n===O.DD||n===O.DT)&&(i===O.DD||i===O.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==O.ADDRESS&&i!==O.DIV&&i!==O.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ke.HTML)}function G0t(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ke.HTML),e.tokenizer.state=ro.PLAINTEXT}function Y0t(e,t){e.openElements.hasInScope(O.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML),e.framesetOk=!1}function K0t(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ne.A);n&&(fZ(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function X0t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Q0t(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(O.NOBR)&&(fZ(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Ke.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function J0t(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Z0t(e,t){e.treeAdapter.getDocumentMode(e.document)!==Fc.QUIRKS&&e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._insertElement(t,Ke.HTML),e.framesetOk=!1,e.insertionMode=de.IN_TABLE}function $Ie(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ke.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function MIe(e){const t=bIe(e,x1.TYPE);return t!=null&&t.toLowerCase()===y0t}function egt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Ke.HTML),MIe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function tgt(e,t){e._appendElement(t,Ke.HTML),t.ackSelfClosing=!0}function ngt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._appendElement(t,Ke.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function rgt(e,t){t.tagName=Ne.IMG,t.tagID=O.IMG,$Ie(e,t)}function igt(e,t){e._insertElement(t,Ke.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ro.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=de.TEXT}function sgt(e,t){e.openElements.hasInButtonScope(O.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ro.RAWTEXT)}function ogt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ro.RAWTEXT)}function ppe(e,t){e._switchToTextParsing(t,ro.RAWTEXT)}function agt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===de.IN_TABLE||e.insertionMode===de.IN_CAPTION||e.insertionMode===de.IN_TABLE_BODY||e.insertionMode===de.IN_ROW||e.insertionMode===de.IN_CELL?de.IN_SELECT_IN_TABLE:de.IN_SELECT}function ugt(e,t){e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML)}function lgt(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Ke.HTML)}function cgt(e,t){e.openElements.hasInScope(O.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(O.RTC),e._insertElement(t,Ke.HTML)}function fgt(e,t){e._reconstructActiveFormattingElements(),RIe(t),cZ(t),t.selfClosing?e._appendElement(t,Ke.MATHML):e._insertElement(t,Ke.MATHML),t.ackSelfClosing=!0}function dgt(e,t){e._reconstructActiveFormattingElements(),DIe(t),cZ(t),t.selfClosing?e._appendElement(t,Ke.SVG):e._insertElement(t,Ke.SVG),t.ackSelfClosing=!0}function mpe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Ke.HTML)}function Pu(e,t){switch(t.tagID){case O.I:case O.S:case O.B:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.SMALL:case O.STRIKE:case O.STRONG:{X0t(e,t);break}case O.A:{K0t(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{V0t(e,t);break}case O.P:case O.DL:case O.OL:case O.UL:case O.DIV:case O.DIR:case O.NAV:case O.MAIN:case O.MENU:case O.ASIDE:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.DETAILS:case O.ADDRESS:case O.ARTICLE:case O.SECTION:case O.SUMMARY:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{z0t(e,t);break}case O.LI:case O.DD:case O.DT:{W0t(e,t);break}case O.BR:case O.IMG:case O.WBR:case O.AREA:case O.EMBED:case O.KEYGEN:{$Ie(e,t);break}case O.HR:{ngt(e,t);break}case O.RB:case O.RTC:{lgt(e,t);break}case O.RT:case O.RP:{cgt(e,t);break}case O.PRE:case O.LISTING:{H0t(e,t);break}case O.XMP:{sgt(e,t);break}case O.SVG:{dgt(e,t);break}case O.HTML:{B0t(e,t);break}case O.BASE:case O.LINK:case O.META:case O.STYLE:case O.TITLE:case O.SCRIPT:case O.BGSOUND:case O.BASEFONT:case O.TEMPLATE:{Uh(e,t);break}case O.BODY:{j0t(e,t);break}case O.FORM:{q0t(e,t);break}case O.NOBR:{Q0t(e,t);break}case O.MATH:{fgt(e,t);break}case O.TABLE:{Z0t(e,t);break}case O.INPUT:{egt(e,t);break}case O.PARAM:case O.TRACK:case O.SOURCE:{tgt(e,t);break}case O.IMAGE:{rgt(e,t);break}case O.BUTTON:{Y0t(e,t);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{J0t(e,t);break}case O.IFRAME:{ogt(e,t);break}case O.SELECT:{agt(e,t);break}case O.OPTION:case O.OPTGROUP:{ugt(e,t);break}case O.NOEMBED:{ppe(e,t);break}case O.FRAMESET:{U0t(e,t);break}case O.TEXTAREA:{igt(e,t);break}case O.NOSCRIPT:{e.options.scriptingEnabled?ppe(e,t):mpe(e,t);break}case O.PLAINTEXT:{G0t(e,t);break}case O.COL:case O.TH:case O.TD:case O.TR:case O.HEAD:case O.FRAME:case O.TBODY:case O.TFOOT:case O.THEAD:case O.CAPTION:case O.COLGROUP:break;default:mpe(e,t)}}function hgt(e,t){if(e.openElements.hasInScope(O.BODY)&&(e.insertionMode=de.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function pgt(e,t){e.openElements.hasInScope(O.BODY)&&(e.insertionMode=de.AFTER_BODY,WIe(e,t))}function mgt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function ggt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(O.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(O.FORM):n&&e.openElements.remove(n))}function ygt(e){e.openElements.hasInButtonScope(O.P)||e._insertFakeElement(Ne.P,O.P),e._closePElement()}function vgt(e){e.openElements.hasInListItemScope(O.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(O.LI),e.openElements.popUntilTagNamePopped(O.LI))}function bgt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function xgt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function _gt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function wgt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ne.BR,O.BR),e.openElements.pop(),e.framesetOk=!1}function LIe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==O.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function A5(e,t){switch(t.tagID){case O.A:case O.B:case O.I:case O.S:case O.U:case O.EM:case O.TT:case O.BIG:case O.CODE:case O.FONT:case O.NOBR:case O.SMALL:case O.STRIKE:case O.STRONG:{fZ(e,t);break}case O.P:{ygt(e);break}case O.DL:case O.UL:case O.OL:case O.DIR:case O.DIV:case O.NAV:case O.PRE:case O.MAIN:case O.MENU:case O.ASIDE:case O.BUTTON:case O.CENTER:case O.FIGURE:case O.FOOTER:case O.HEADER:case O.HGROUP:case O.DIALOG:case O.ADDRESS:case O.ARTICLE:case O.DETAILS:case O.SECTION:case O.SUMMARY:case O.LISTING:case O.FIELDSET:case O.BLOCKQUOTE:case O.FIGCAPTION:{mgt(e,t);break}case O.LI:{vgt(e);break}case O.DD:case O.DT:{bgt(e,t);break}case O.H1:case O.H2:case O.H3:case O.H4:case O.H5:case O.H6:{xgt(e);break}case O.BR:{wgt(e);break}case O.BODY:{hgt(e,t);break}case O.HTML:{pgt(e,t);break}case O.FORM:{ggt(e);break}case O.APPLET:case O.OBJECT:case O.MARQUEE:{_gt(e,t);break}case O.TEMPLATE:{W_(e,t);break}default:LIe(e,t)}}function FIe(e,t){e.tmplInsertionModeStack.length>0?qIe(e,t):dZ(e,t)}function Egt(e,t){var n;t.tagID===O.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Sgt(e,t){e._err(t,Ue.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Z7(e,t){if(NIe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=de.IN_TABLE_TEXT,t.type){case or.CHARACTER:{jIe(e,t);break}case or.WHITESPACE_CHARACTER:{BIe(e,t);break}}else eN(e,t)}function Tgt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Ke.HTML),e.insertionMode=de.IN_CAPTION}function Cgt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ke.HTML),e.insertionMode=de.IN_COLUMN_GROUP}function Agt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ne.COLGROUP,O.COLGROUP),e.insertionMode=de.IN_COLUMN_GROUP,hZ(e,t)}function Igt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Ke.HTML),e.insertionMode=de.IN_TABLE_BODY}function kgt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ne.TBODY,O.TBODY),e.insertionMode=de.IN_TABLE_BODY,I5(e,t)}function Rgt(e,t){e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Dgt(e,t){MIe(t)?e._appendElement(t,Ke.HTML):eN(e,t),t.ackSelfClosing=!0}function Ngt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Ke.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function rT(e,t){switch(t.tagID){case O.TD:case O.TH:case O.TR:{kgt(e,t);break}case O.STYLE:case O.SCRIPT:case O.TEMPLATE:{Uh(e,t);break}case O.COL:{Agt(e,t);break}case O.FORM:{Ngt(e,t);break}case O.TABLE:{Rgt(e,t);break}case O.TBODY:case O.TFOOT:case O.THEAD:{Igt(e,t);break}case O.INPUT:{Dgt(e,t);break}case O.CAPTION:{Tgt(e,t);break}case O.COLGROUP:{Cgt(e,t);break}default:eN(e,t)}}function gR(e,t){switch(t.tagID){case O.TABLE:{e.openElements.hasInTableScope(O.TABLE)&&(e.openElements.popUntilTagNamePopped(O.TABLE),e._resetInsertionMode());break}case O.TEMPLATE:{W_(e,t);break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:eN(e,t)}}function eN(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,C5(e,t),e.fosterParentingEnabled=n}function BIe(e,t){e.pendingCharacterTokens.push(t)}function jIe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function uA(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)eN(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const UIe=new Set([O.CAPTION,O.COL,O.COLGROUP,O.TBODY,O.TD,O.TFOOT,O.TH,O.THEAD,O.TR]);function Pgt(e,t){const n=t.tagID;UIe.has(n)?e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_TABLE,rT(e,t)):Pu(e,t)}function Ogt(e,t){const n=t.tagID;switch(n){case O.CAPTION:case O.TABLE:{e.openElements.hasInTableScope(O.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(O.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_TABLE,n===O.TABLE&&gR(e,t));break}case O.BODY:case O.COL:case O.COLGROUP:case O.HTML:case O.TBODY:case O.TD:case O.TFOOT:case O.TH:case O.THEAD:case O.TR:break;default:A5(e,t)}}function hZ(e,t){switch(t.tagID){case O.HTML:{Pu(e,t);break}case O.COL:{e._appendElement(t,Ke.HTML),t.ackSelfClosing=!0;break}case O.TEMPLATE:{Uh(e,t);break}default:w$(e,t)}}function $gt(e,t){switch(t.tagID){case O.COLGROUP:{e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=de.IN_TABLE);break}case O.TEMPLATE:{W_(e,t);break}case O.COL:break;default:w$(e,t)}}function w$(e,t){e.openElements.currentTagId===O.COLGROUP&&(e.openElements.pop(),e.insertionMode=de.IN_TABLE,e._processToken(t))}function I5(e,t){switch(t.tagID){case O.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Ke.HTML),e.insertionMode=de.IN_ROW;break}case O.TH:case O.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ne.TR,O.TR),e.insertionMode=de.IN_ROW,k5(e,t);break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE,rT(e,t));break}default:rT(e,t)}}function Kq(e,t){const n=t.tagID;switch(t.tagID){case O.TBODY:case O.TFOOT:case O.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE);break}case O.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE,gR(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:case O.TR:break;default:gR(e,t)}}function k5(e,t){switch(t.tagID){case O.TH:case O.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Ke.HTML),e.insertionMode=de.IN_CELL,e.activeFormattingElements.insertMarker();break}case O.CAPTION:case O.COL:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,I5(e,t));break}default:rT(e,t)}}function zIe(e,t){switch(t.tagID){case O.TR:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY);break}case O.TABLE:{e.openElements.hasInTableScope(O.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,Kq(e,t));break}case O.TBODY:case O.TFOOT:case O.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(O.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=de.IN_TABLE_BODY,Kq(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:case O.TD:case O.TH:break;default:gR(e,t)}}function Mgt(e,t){const n=t.tagID;UIe.has(n)?(e.openElements.hasInTableScope(O.TD)||e.openElements.hasInTableScope(O.TH))&&(e._closeTableCell(),k5(e,t)):Pu(e,t)}function Lgt(e,t){const n=t.tagID;switch(n){case O.TD:case O.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=de.IN_ROW);break}case O.TABLE:case O.TBODY:case O.TFOOT:case O.THEAD:case O.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),zIe(e,t));break}case O.BODY:case O.CAPTION:case O.COL:case O.COLGROUP:case O.HTML:break;default:A5(e,t)}}function VIe(e,t){switch(t.tagID){case O.HTML:{Pu(e,t);break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e._insertElement(t,Ke.HTML);break}case O.OPTGROUP:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Ke.HTML);break}case O.INPUT:case O.KEYGEN:case O.TEXTAREA:case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),t.tagID!==O.SELECT&&e._processStartTag(t));break}case O.SCRIPT:case O.TEMPLATE:{Uh(e,t);break}}}function HIe(e,t){switch(t.tagID){case O.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===O.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===O.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===O.OPTGROUP&&e.openElements.pop();break}case O.OPTION:{e.openElements.currentTagId===O.OPTION&&e.openElements.pop();break}case O.SELECT:{e.openElements.hasInSelectScope(O.SELECT)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode());break}case O.TEMPLATE:{W_(e,t);break}}}function Fgt(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e._processStartTag(t)):VIe(e,t)}function Bgt(e,t){const n=t.tagID;n===O.CAPTION||n===O.TABLE||n===O.TBODY||n===O.TFOOT||n===O.THEAD||n===O.TR||n===O.TD||n===O.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(O.SELECT),e._resetInsertionMode(),e.onEndTag(t)):HIe(e,t)}function jgt(e,t){switch(t.tagID){case O.BASE:case O.BASEFONT:case O.BGSOUND:case O.LINK:case O.META:case O.NOFRAMES:case O.SCRIPT:case O.STYLE:case O.TEMPLATE:case O.TITLE:{Uh(e,t);break}case O.CAPTION:case O.COLGROUP:case O.TBODY:case O.TFOOT:case O.THEAD:{e.tmplInsertionModeStack[0]=de.IN_TABLE,e.insertionMode=de.IN_TABLE,rT(e,t);break}case O.COL:{e.tmplInsertionModeStack[0]=de.IN_COLUMN_GROUP,e.insertionMode=de.IN_COLUMN_GROUP,hZ(e,t);break}case O.TR:{e.tmplInsertionModeStack[0]=de.IN_TABLE_BODY,e.insertionMode=de.IN_TABLE_BODY,I5(e,t);break}case O.TD:case O.TH:{e.tmplInsertionModeStack[0]=de.IN_ROW,e.insertionMode=de.IN_ROW,k5(e,t);break}default:e.tmplInsertionModeStack[0]=de.IN_BODY,e.insertionMode=de.IN_BODY,Pu(e,t)}}function Ugt(e,t){t.tagID===O.TEMPLATE&&W_(e,t)}function qIe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(O.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):dZ(e,t)}function zgt(e,t){t.tagID===O.HTML?Pu(e,t):E$(e,t)}function WIe(e,t){var n;if(t.tagID===O.HTML){if(e.fragmentContext||(e.insertionMode=de.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===O.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else E$(e,t)}function E$(e,t){e.insertionMode=de.IN_BODY,C5(e,t)}function Vgt(e,t){switch(t.tagID){case O.HTML:{Pu(e,t);break}case O.FRAMESET:{e._insertElement(t,Ke.HTML);break}case O.FRAME:{e._appendElement(t,Ke.HTML),t.ackSelfClosing=!0;break}case O.NOFRAMES:{Uh(e,t);break}}}function Hgt(e,t){t.tagID===O.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==O.FRAMESET&&(e.insertionMode=de.AFTER_FRAMESET))}function qgt(e,t){switch(t.tagID){case O.HTML:{Pu(e,t);break}case O.NOFRAMES:{Uh(e,t);break}}}function Wgt(e,t){t.tagID===O.HTML&&(e.insertionMode=de.AFTER_AFTER_FRAMESET)}function Ggt(e,t){t.tagID===O.HTML?Pu(e,t):$4(e,t)}function $4(e,t){e.insertionMode=de.IN_BODY,C5(e,t)}function Ygt(e,t){switch(t.tagID){case O.HTML:{Pu(e,t);break}case O.NOFRAMES:{Uh(e,t);break}}}function Kgt(e,t){t.chars=gs,e._insertCharacters(t)}function Xgt(e,t){e._insertCharacters(t),e.framesetOk=!1}function GIe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Ke.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Qgt(e,t){if(d0t(t))GIe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Ke.MATHML?RIe(t):r===Ke.SVG&&(h0t(t),DIe(t)),cZ(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Jgt(e,t){if(t.tagID===O.P||t.tagID===O.BR){GIe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Ke.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ne.AREA,Ne.BASE,Ne.BASEFONT,Ne.BGSOUND,Ne.BR,Ne.COL,Ne.EMBED,Ne.FRAME,Ne.HR,Ne.IMG,Ne.INPUT,Ne.KEYGEN,Ne.LINK,Ne.META,Ne.PARAM,Ne.SOURCE,Ne.TRACK,Ne.WBR;const Zgt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),gpe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function YIe(e,t){const n=lyt(e),r=pIe("type",{handlers:{root:eyt,element:tyt,text:nyt,comment:XIe,doctype:ryt,raw:syt},unknown:oyt}),i={parser:n?new hpe(gpe):hpe.getFragmentParser(void 0,gpe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),P2(i,km());const s=n?i.parser.document:i.parser.getFragment(),o=dmt(s,{file:i.options.file});return i.stitches&&oZ(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function KIe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function eyt(e,t){KIe(e.children,t)}function tyt(e,t){ayt(e,t),KIe(e.children,t),uyt(e,t)}function nyt(e,t){const n={type:or.CHARACTER,chars:e.value,location:tN(e)};P2(t,km(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function ryt(e,t){const n={type:or.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:tN(e)};P2(t,km(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function iyt(e,t){t.stitches=!0;const n=cyt(e);if("children"in e&&"children"in n){const r=YIe({type:"root",children:e.children},t.options);n.children=r.children}XIe({type:"comment",value:{stitch:n}},t)}function XIe(e,t){const n=e.value,r={type:or.COMMENT,data:n,location:tN(e)};P2(t,km(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function syt(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,QIe(t,km(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function oyt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))iyt(n,t);else{let r="";throw Zgt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function P2(e,t){QIe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ro.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function QIe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function ayt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ro.PLAINTEXT)return;P2(t,km(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:px.html;i===px.html&&n==="svg"&&(i=px.svg);const s=gmt({...e,children:[]},{space:i===px.svg?"svg":"html"}),o={type:or.START_TAG,tagName:n,tagID:N2(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:tN(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function uyt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Smt.includes(n)||t.parser.tokenizer.state===ro.PLAINTEXT)return;P2(t,w5(e));const r={type:or.END_TAG,tagName:n,tagID:N2(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:tN(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ro.RCDATA||t.parser.tokenizer.state===ro.RAWTEXT||t.parser.tokenizer.state===ro.SCRIPT_DATA)&&(t.parser.tokenizer.state=ro.DATA)}function lyt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function tN(e){const t=km(e)||{line:void 0,column:void 0,offset:void 0},n=w5(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function cyt(e){return"children"in e?nT({...e,children:[]}):nT(e)}function fyt(e){return function(t,n){return YIe(t,{...e,file:n})}}function Cu({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Dv,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(nt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(zs,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(zs,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(zs,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(zs,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(zs,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(zs,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(kv,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(xh,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(xh,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(Zpt,{components:n,rehypePlugins:[fyt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function M4({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Cu,{text:n})}const Kw=14;function dyt({completed:e,inProgress:t,rejected:n}){return _.jsxs(qt,{ml:4,gap:4,children:[_.jsx(ss,{label:"Completed",children:_.jsx(v1,{variant:"light",color:"green",leftSection:_.jsx(_Ae,{width:Kw,height:Kw,style:{paddingTop:1}}),pb:1,children:e})}),_.jsx(ss,{label:"In Progress",children:_.jsx(v1,{variant:"light",color:"orange",leftSection:_.jsx(wAe,{width:Kw,height:Kw,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(ss,{label:"Rejected",children:_.jsx(v1,{variant:"light",color:"red",leftSection:_.jsx(YJ,{width:Kw,height:Kw,style:{paddingTop:1}}),pb:1,children:n})})]})}const hyt="https://github.com/revisit-studies/study/tree/main/public/";function pyt({configName:e,config:t,url:n}){const{storageEngine:r}=fo(),[i,s]=N.useState(null);N.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=N.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=N.useState(null);N.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=N.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return _.jsx(x2,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(nt,{fw:"bold",children:e}),_.jsxs(qt,{align:"center",direction:"row",children:[_.jsx(JI,{color:"red"}),_.jsx(nt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(M4,{issues:t.errors,type:"error"}),t.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(qt,{align:"center",direction:"row",children:[_.jsx(JI,{color:"orange"}),_.jsx(nt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(M4,{issues:t.warnings,type:"warning"})]})]}):_.jsxs(_.Fragment,{children:[_.jsx(qt,{direction:"row",justify:"space-between",children:_.jsx(nt,{fw:"bold",children:t.studyMetadata.title})}),_.jsxs(nt,{c:"dimmed",children:[_.jsx(nt,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),_.jsx(nt,{c:"dimmed",children:t.studyMetadata.description}),_.jsx(nt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(kv,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${hyt}${n}`,children:["View source:"," ",n,_.jsx(dct,{style:{width:$e(18),height:$e(18),marginLeft:$e(2),marginBottom:$e(-3)}})]})}),t.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(qt,{align:"center",direction:"row",children:[_.jsx(JI,{color:"orange"}),_.jsx(nt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(M4,{issues:t.warnings,type:"warning"})]}),_.jsx(_2,{my:"md"}),_.jsxs(qt,{direction:"row",gap:"sm",children:[_.jsxs(nt,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&_.jsx(dyt,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&_.jsxs(nt,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),_.jsxs(qt,{direction:"row",align:"end",gap:"sm",mt:"md",children:[_.jsx(gn,{leftSection:_.jsx(xAe,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${ul}analysis/stats/${n}`,children:"Analyze & Manage Study"}),_.jsx(gn,{leftSection:_.jsx(mct,{}),component:"a",href:`${ul}${n}`,children:"Go to Study"})]})]})},e)}function lA({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=CAe(n);return _.jsx(pyt,{configName:n,config:r,url:i},n)})}function myt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=n.filter(u=>u.startsWith("demo-")),i=n.filter(u=>u.startsWith("tutorial-")),s=n.filter(u=>u.startsWith("example-")),o=n.filter(u=>u.startsWith("test-")),a=n.filter(u=>!u.startsWith("demo-")&&!u.startsWith("tutorial-")&&!u.startsWith("example-")&&!u.startsWith("test-"));return _.jsx(Oi.Main,{children:_.jsxs(dg,{size:"sm",px:0,children:[_.jsx(Dv,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${ul}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsxs(Gr,{variant:"outline",defaultValue:a.length>0?"Others":"Demos",children:[_.jsxs(Gr.List,{children:[a.length>0&&_.jsx(Gr.Tab,{value:"Others",children:"Your Studies"}),_.jsx(Gr.Tab,{value:"Demos",children:"Demo Studies"}),_.jsx(Gr.Tab,{value:"Examples",children:"Example Studies"}),_.jsx(Gr.Tab,{value:"Tutorials",children:"Tutorials"}),_.jsx(Gr.Tab,{value:"Tests",children:"Tests"})]}),a.length>0&&_.jsx(Gr.Panel,{value:"Others",children:_.jsx(lA,{configNames:a,studyConfigs:t})}),_.jsxs(Gr.Panel,{value:"Demos",children:[_.jsx(nt,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),_.jsx(lA,{configNames:r,studyConfigs:t})]}),_.jsxs(Gr.Panel,{value:"Examples",children:[_.jsx(nt,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),_.jsx(lA,{configNames:s,studyConfigs:t})]}),_.jsxs(Gr.Panel,{value:"Tutorials",children:[_.jsx(nt,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),_.jsx(lA,{configNames:i,studyConfigs:t})]}),_.jsxs(Gr.Panel,{value:"Tests",children:[_.jsx(nt,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),_.jsx(lA,{configNames:o,studyConfigs:t})]})]})]})})}var JIe={exports:{}},ZIe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nN=N;function gyt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yyt=typeof Object.is=="function"?Object.is:gyt,vyt=nN.useSyncExternalStore,byt=nN.useRef,xyt=nN.useEffect,_yt=nN.useMemo,wyt=nN.useDebugValue;ZIe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=byt(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=_yt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,yyt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=vyt(e,s[0],s[1]);return xyt(function(){o.hasValue=!0,o.value=a},[a]),wyt(a),a};JIe.exports=ZIe;var Eyt=JIe.exports,Gc="default"in M6?ti:M6,ype=Symbol.for("react-redux-context"),vpe=typeof globalThis<"u"?globalThis:{};function Syt(){if(!Gc.createContext)return{};const e=vpe[ype]??(vpe[ype]=new Map);let t=e.get(Gc.createContext);return t||(t=Gc.createContext(null),e.set(Gc.createContext,t)),t}var F1=Syt(),Tyt=()=>{throw new Error("uSES not initialized!")};function pZ(e=F1){return function(){return Gc.useContext(e)}}var eke=pZ(),tke=Tyt,Cyt=e=>{tke=e},Ayt=(e,t)=>e===t;function Iyt(e=F1){const t=e===F1?eke:pZ(e),n=(r,i={})=>{const{equalityFn:s=Ayt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Gc.useRef(!0);const d=Gc.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=tke(u.addNestedSub,a.getState,l||a.getState,d,s);return Gc.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var kyt=Iyt();function Ryt(e){e()}function Dyt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Ryt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var bpe={notify(){},get:()=>[]};function Nyt(e,t){let n,r=bpe,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Dyt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=bpe)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Pyt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Oyt=typeof navigator<"u"&&navigator.product==="ReactNative",$yt=Pyt||Oyt?Gc.useLayoutEffect:Gc.useEffect;function Myt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Gc.useMemo(()=>{const l=Nyt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Gc.useMemo(()=>e.getState(),[e]);$yt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||F1;return Gc.createElement(u.Provider,{value:o},n)}var Lyt=Myt;function nke(e=F1){const t=e===F1?eke:pZ(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Fyt=nke();function Byt(e=F1){const t=e===F1?Fyt:nke(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var rke=Byt();Cyt(Eyt.useSyncExternalStoreWithSelector);function Ca(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var jyt=typeof Symbol=="function"&&Symbol.observable||"@@observable",xpe=jyt,eU=()=>Math.random().toString(36).substring(7).split("").join("."),Uyt={INIT:`@@redux/INIT${eU()}`,REPLACE:`@@redux/REPLACE${eU()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${eU()}`},S$=Uyt;function mZ(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function ike(e,t,n){if(typeof e!="function")throw new Error(Ca(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ca(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ca(1));return n(ike)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Ca(3));return i}function f(g){if(typeof g!="function")throw new Error(Ca(4));if(u)throw new Error(Ca(5));let y=!0;l();const b=a++;return o.set(b,g),function(){if(y){if(u)throw new Error(Ca(6));y=!1,l(),o.delete(b),s=null}}}function d(g){if(!mZ(g))throw new Error(Ca(7));if(typeof g.type>"u")throw new Error(Ca(8));if(typeof g.type!="string")throw new Error(Ca(17));if(u)throw new Error(Ca(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(b=>{b()}),g}function h(g){if(typeof g!="function")throw new Error(Ca(10));r=g,d({type:S$.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Ca(11));function b(){const w=y;w.next&&w.next(c())}return b(),{unsubscribe:g(b)}},[xpe](){return this}}}return d({type:S$.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[xpe]:p}}function zyt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:S$.INIT})>"u")throw new Error(Ca(12));if(typeof n(void 0,{type:S$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ca(13))})}function Vyt(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{zyt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Ca(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function T$(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Hyt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Ca(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=T$(...a)(i.dispatch),{...i,dispatch:s}}}function qyt(e){return mZ(e)&&"type"in e&&typeof e.type=="string"}var ske=Symbol.for("immer-nothing"),_pe=Symbol.for("immer-draftable"),lf=Symbol.for("immer-state");function ih(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var iT=Object.getPrototypeOf;function B1(e){return!!e&&!!e[lf]}function mg(e){var t;return e?oke(e)||Array.isArray(e)||!!e[_pe]||!!((t=e.constructor)!=null&&t[_pe])||D5(e)||N5(e):!1}var Wyt=Object.prototype.constructor.toString();function oke(e){if(!e||typeof e!="object")return!1;const t=iT(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Wyt}function C$(e,t){R5(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function R5(e){const t=e[lf];return t?t.type_:Array.isArray(e)?1:D5(e)?2:N5(e)?3:0}function Xq(e,t){return R5(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ake(e,t,n){const r=R5(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Gyt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function D5(e){return e instanceof Map}function N5(e){return e instanceof Set}function Lb(e){return e.copy_||e.base_}function Qq(e,t){if(D5(e))return new Map(e);if(N5(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=oke(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[lf];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(iT(e),r)}else{const r=iT(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function gZ(e,t=!1){return P5(e)||B1(e)||!mg(e)||(R5(e)>1&&(e.set=e.add=e.clear=e.delete=Yyt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>gZ(r,!0))),e}function Yyt(){ih(2)}function P5(e){return Object.isFrozen(e)}var Kyt={};function Xx(e){const t=Kyt[e];return t||ih(0,e),t}var yR;function uke(){return yR}function Xyt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function wpe(e,t){t&&(Xx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Jq(e){Zq(e),e.drafts_.forEach(Qyt),e.drafts_=null}function Zq(e){e===yR&&(yR=e.parent_)}function Epe(e){return yR=Xyt(yR,e)}function Qyt(e){const t=e[lf];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Spe(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[lf].modified_&&(Jq(t),ih(4)),mg(e)&&(e=A$(t,e),t.parent_||I$(t,e)),t.patches_&&Xx("Patches").generateReplacementPatches_(n[lf].base_,e,t.patches_,t.inversePatches_)):e=A$(t,n,[]),Jq(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==ske?e:void 0}function A$(e,t,n){if(P5(t))return t;const r=t[lf];if(!r)return C$(t,(i,s)=>Tpe(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return I$(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),C$(s,(a,u)=>Tpe(e,r,i,a,u,n,o)),I$(e,i,!1),n&&e.patches_&&Xx("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Tpe(e,t,n,r,i,s,o){if(B1(i)){const a=s&&t&&t.type_!==3&&!Xq(t.assigned_,r)?s.concat(r):void 0,u=A$(e,i,a);if(ake(n,r,u),B1(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(mg(i)&&!P5(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;A$(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&I$(e,i)}}function I$(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&gZ(t,n)}function Jyt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:uke(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=yZ;n&&(i=[r],s=vR);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var yZ={get(e,t){if(t===lf)return e;const n=Lb(e);if(!Xq(n,t))return Zyt(e,n,t);const r=n[t];return e.finalized_||!mg(r)?r:r===tU(e.base_,t)?(nU(e),e.copy_[t]=tW(r,e)):r},has(e,t){return t in Lb(e)},ownKeys(e){return Reflect.ownKeys(Lb(e))},set(e,t,n){const r=lke(Lb(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=tU(Lb(e),t),s=i==null?void 0:i[lf];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Gyt(n,i)&&(n!==void 0||Xq(e.base_,t)))return!0;nU(e),eW(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return tU(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,nU(e),eW(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Lb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){ih(11)},getPrototypeOf(e){return iT(e.base_)},setPrototypeOf(){ih(12)}},vR={};C$(yZ,(e,t)=>{vR[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});vR.deleteProperty=function(e,t){return vR.set.call(this,e,t,void 0)};vR.set=function(e,t,n){return yZ.set.call(this,e[0],t,n,e[0])};function tU(e,t){const n=e[lf];return(n?Lb(n):e)[t]}function Zyt(e,t,n){var i;const r=lke(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function lke(e,t){if(!(t in e))return;let n=iT(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=iT(n)}}function eW(e){e.modified_||(e.modified_=!0,e.parent_&&eW(e.parent_))}function nU(e){e.copy_||(e.copy_=Qq(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var e1t=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&ih(6),r!==void 0&&typeof r!="function"&&ih(7);let i;if(mg(t)){const s=Epe(this),o=tW(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?Jq(s):Zq(s)}return wpe(s,r),Spe(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===ske&&(i=void 0),this.autoFreeze_&&gZ(i,!0),r){const s=[],o=[];Xx("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else ih(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){mg(e)||ih(8),B1(e)&&(e=cke(e));const t=Epe(this),n=tW(e,void 0);return n[lf].isManual_=!0,Zq(t),n}finishDraft(e,t){const n=e&&e[lf];(!n||!n.isManual_)&&ih(9);const{scope_:r}=n;return wpe(r,t),Spe(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Xx("Patches").applyPatches_;return B1(e)?r(e,t):this.produce(e,i=>r(i,t))}};function tW(e,t){const n=D5(e)?Xx("MapSet").proxyMap_(e,t):N5(e)?Xx("MapSet").proxySet_(e,t):Jyt(e,t);return(t?t.scope_:uke()).drafts_.push(n),n}function cke(e){return B1(e)||ih(10,e),fke(e)}function fke(e){if(!mg(e)||P5(e))return e;const t=e[lf];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Qq(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Qq(e,!0);return C$(n,(r,i)=>{ake(n,r,fke(i))}),t&&(t.finalized_=!1),n}var cf=new e1t,dke=cf.produce;cf.produceWithPatches.bind(cf);cf.setAutoFreeze.bind(cf);cf.setUseStrictShallowCopy.bind(cf);cf.applyPatches.bind(cf);cf.createDraft.bind(cf);cf.finishDraft.bind(cf);function t1t(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function n1t(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function r1t(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Cpe=e=>Array.isArray(e)?e:[e];function i1t(e){const t=Array.isArray(e[0])?e[0]:e;return r1t(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function s1t(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var o1t=class{constructor(e){this.value=e}deref(){return this.value}},a1t=typeof WeakRef<"u"?WeakRef:o1t,u1t=0,Ape=1;function Y3(){return{s:u1t,v:void 0,o:null,p:null}}function vZ(e,t={}){let n=Y3();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=Y3(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=Y3(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Ape)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new a1t(c):c}return l.s=Ape,l.v=c,c}return o.clearCache=()=>{n=Y3(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function hke(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),t1t(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=vZ,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Cpe(d),y=Cpe(p),b=i1t(i),x=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const T=s1t(b,arguments);return a=x.apply(null,T),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:x,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var pke=hke(vZ),l1t=Object.assign((e,t=pke)=>{n1t(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>l1t});function mke(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var c1t=mke(),f1t=mke,d1t=(...e)=>{const t=hke(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(B1(o)?cke(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};d1t(vZ);var h1t=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?T$:T$.apply(null,arguments)};function sT(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(sc(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>qyt(r)&&r.type===e,n}var gke=class nI extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,nI.prototype)}static get[Symbol.species](){return nI}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new nI(...t[0].concat(this)):new nI(...t.concat(this))}};function Ipe(e){return mg(e)?dke(e,()=>{}):e}function kpe(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(sc(10));const r=n.insert(t,e);return e.set(t,r),r}function p1t(e){return typeof e=="boolean"}var m1t=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new gke;return n&&(p1t(n)?o.push(c1t):o.push(f1t(n.extraArgument))),o},g1t="RTK_autoBatch",yke=e=>t=>{setTimeout(t,e)},y1t=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:yke(10),v1t=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?y1t:e.type==="callback"?e.queueNotification:yke(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[g1t]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},b1t=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new gke(e);return r&&i.push(v1t(typeof r=="object"?r:void 0)),i};function x1t(e){const t=m1t(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(mZ(n))a=Vyt(n);else throw new Error(sc(1));let u;typeof r=="function"?u=r(t):u=t();let l=T$;i&&(l=h1t({trace:!1,...typeof i=="object"&&i}));const c=Hyt(...u),f=b1t(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return ike(a,s,h)}function vke(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(sc(28));if(a in t)throw new Error(sc(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function _1t(e){return typeof e=="function"}function w1t(e,t){let[n,r,i]=vke(t),s;if(_1t(e))s=()=>Ipe(e());else{const a=Ipe(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(B1(c)){const h=f(c,u);return h===void 0?c:h}else{if(mg(c))return dke(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(sc(9))}return d}}return c},a)}return o.getInitialState=s,o}var E1t="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",S1t=(e=21)=>{let t="",n=e;for(;n--;)t+=E1t[Math.random()*64|0];return t},T1t=Symbol.for("rtk-slice-createasyncthunk");function C1t(e,t){return`${e}/${t}`}function A1t({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[T1t];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(sc(11));const a=(typeof i.reducers=="function"?i.reducers(R1t()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(x,w){const S=typeof x=="string"?x:x.type;if(!S)throw new Error(sc(12));if(S in l.sliceCaseReducersByType)throw new Error(sc(13));return l.sliceCaseReducersByType[S]=w,c},addMatcher(x,w){return l.sliceMatchers.push({matcher:x,reducer:w}),c},exposeAction(x,w){return l.actionCreators[x]=w,c},exposeCaseReducer(x,w){return l.sliceCaseReducersByName[x]=w,c}};u.forEach(x=>{const w=a[x],S={reducerName:x,type:C1t(s,x),createNotation:typeof i.reducers=="function"};N1t(w)?O1t(S,w,c,t):D1t(S,w,c)});function f(){const[x={},w=[],S=void 0]=typeof i.extraReducers=="function"?vke(i.extraReducers):[i.extraReducers],T={...x,...l.sliceCaseReducersByType};return w1t(i.initialState,C=>{for(let I in T)C.addCase(I,T[I]);for(let I of l.sliceMatchers)C.addMatcher(I.matcher,I.reducer);for(let I of w)C.addMatcher(I.matcher,I.reducer);S&&C.addDefaultCase(S)})}const d=x=>x,h=new Map;let p;function m(x,w){return p||(p=f()),p(x,w)}function g(){return p||(p=f()),p.getInitialState()}function y(x,w=!1){function S(C){let I=C[x];return typeof I>"u"&&w&&(I=g()),I}function T(C=d){const I=kpe(h,w,{insert:()=>new WeakMap});return kpe(I,C,{insert:()=>{const D={};for(const[k,P]of Object.entries(i.selectors??{}))D[k]=I1t(P,C,g,w);return D}})}return{reducerPath:x,getSelectors:T,get selectors(){return T(S)},selectSlice:S}}const b={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(x,{reducerPath:w,...S}={}){const T=w??o;return x.inject({reducerPath:T,reducer:m},S),{...b,...y(T,!0)}}};return b}}function I1t(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var k1t=A1t();function R1t(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function D1t({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!P1t(r))throw new Error(sc(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?sT(e,o):sT(e))}function N1t(e){return e._reducerDefinitionType==="asyncThunk"}function P1t(e){return e._reducerDefinitionType==="reducerWithPrepare"}function O1t({type:e,reducerName:t},n,r,i){if(!i)throw new Error(sc(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||K3,pending:a||K3,rejected:u||K3,settled:l||K3})}function K3(){}var $1t=(e,t)=>{if(typeof e!="function")throw new Error(sc(32))},bZ="listenerMiddleware",M1t=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=sT(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(sc(21));return $1t(s),{predicate:i,type:t,effect:s}},L1t=Object.assign(e=>{const{type:t,predicate:n,effect:r}=M1t(e);return{id:S1t(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(sc(22))}}},{withTypes:()=>L1t}),F1t=Object.assign(sT(`${bZ}/add`),{withTypes:()=>F1t});sT(`${bZ}/removeAll`);var B1t=Object.assign(sT(`${bZ}/remove`),{withTypes:()=>B1t});function sc(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function om(e){return e.components.flatMap(t=>typeof t=="string"?t:om(t))}function bke(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:bke(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function xke(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+om(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+om(e).length-1}];r+=1}else{const o=xke(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function xZ(e,t){const n=xke(e,t,0);return typeof n=="number"?null:n}function _ke(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=_ke(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function j1t(e,t){const n=_ke(e,t,0);return n.found?n.distance:-1}function wke(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...wke(i,`${t}-${s}`))}),n}function _Z(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>_Z(n,`${t}-${r}`))}}async function U1t(e,t,n,r,i,s,o){const a=om(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=k1t({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setIframeAnswers:(p,m)=>{p.iframeAnswers=m.payload},setIframeProvenance:(p,m)=>{p.iframeProvenance=m.payload},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{const{responseId:g,questionKey:y,val:b}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[y]:b}}},setMatrixAnswersCheckbox:(p,m)=>{var C;const{responseId:g,questionKey:y,value:b,isChecked:x,choiceOptions:w}=m.payload,S=((C=p.matrixAnswers[g])==null?void 0:C[y])??"";let T="";x?S.length>0?T=[...S.split("|"),b].sort((I,D)=>w.map(k=>k.value).indexOf(I)-w.map(k=>k.value).indexOf(D)).join("|"):T=`${b}`:T=S.split("|").filter(I=>I!==b).join("|"),p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[y]:T}}},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:y,startTime:b,endTime:x,provenanceGraph:w,windowEvents:S,timedOut:T,incorrectAnswers:C,helpButtonClickedCount:I}=m;p.answers[g]={incorrectAnswers:C,answer:y,startTime:b,endTime:x,provenanceGraph:w,windowEvents:S,timedOut:T,helpButtonClickedCount:I}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:y,question:b}=m;p.answers[b].incorrectAnswers||(p.answers[b].incorrectAnswers={}),p.answers[b].incorrectAnswers[g]||(p.answers[b].incorrectAnswers[g]={id:g,value:[]}),p.answers[b].incorrectAnswers[g].value.push(y)}}});return{store:x1t({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const Eke=N.createContext(null);function ll(){return N.useContext(Eke).actions}const wc=rke,vi=kyt;function z1t(e){return vi(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const V1t=pke(e=>e.sequence,e=>om(e));function wZ(){return vi(V1t)}var Ske={exports:{}};function rI(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rU={exports:{}};const H1t={},q1t=Object.freeze(Object.defineProperty({__proto__:null,default:H1t},Symbol.toStringTag,{value:"Module"})),Tke=sXe(q1t);var Rpe;function Mr(){return Rpe||(Rpe=1,function(e,t){(function(n,r){e.exports=r()})(Jt,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof Jt<"u"&&Jt.crypto&&(s=Jt.crypto),!s&&typeof rI=="function")try{s=Tke}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function b(){}return function(x){var w;return b.prototype=x,w=new b,b.prototype=null,w}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(b){var x=a(this);return b&&x.mixIn(b),(!x.hasOwnProperty("init")||this.init===x.init)&&(x.init=function(){x.$super.init.apply(this,arguments)}),x.init.prototype=x,x.$super=this,x},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var x in b)b.hasOwnProperty(x)&&(this[x]=b[x]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(b,x){b=this.words=b||[],x!=i?this.sigBytes=x:this.sigBytes=b.length*4},toString:function(b){return(b||h).stringify(this)},concat:function(b){var x=this.words,w=b.words,S=this.sigBytes,T=b.sigBytes;if(this.clamp(),S%4)for(var C=0;C<T;C++){var I=w[C>>>2]>>>24-C%4*8&255;x[S+C>>>2]|=I<<24-(S+C)%4*8}else for(var D=0;D<T;D+=4)x[S+D>>>2]=w[D>>>2];return this.sigBytes+=T,this},clamp:function(){var b=this.words,x=this.sigBytes;b[x>>>2]&=4294967295<<32-x%4*8,b.length=r.ceil(x/4)},clone:function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var x=[],w=0;w<b;w+=4)x.push(o());return new f.init(x,b)}}),d=u.enc={},h=d.Hex={stringify:function(b){for(var x=b.words,w=b.sigBytes,S=[],T=0;T<w;T++){var C=x[T>>>2]>>>24-T%4*8&255;S.push((C>>>4).toString(16)),S.push((C&15).toString(16))}return S.join("")},parse:function(b){for(var x=b.length,w=[],S=0;S<x;S+=2)w[S>>>3]|=parseInt(b.substr(S,2),16)<<24-S%8*4;return new f.init(w,x/2)}},p=d.Latin1={stringify:function(b){for(var x=b.words,w=b.sigBytes,S=[],T=0;T<w;T++){var C=x[T>>>2]>>>24-T%4*8&255;S.push(String.fromCharCode(C))}return S.join("")},parse:function(b){for(var x=b.length,w=[],S=0;S<x;S++)w[S>>>2]|=(b.charCodeAt(S)&255)<<24-S%4*8;return new f.init(w,x)}},m=d.Utf8={stringify:function(b){try{return decodeURIComponent(escape(p.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return p.parse(unescape(encodeURIComponent(b)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=m.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var x,w=this._data,S=w.words,T=w.sigBytes,C=this.blockSize,I=C*4,D=T/I;b?D=r.ceil(D):D=r.max((D|0)-this._minBufferSize,0);var k=D*C,P=r.min(k*4,T);if(k){for(var M=0;M<k;M+=C)this._doProcessBlock(S,M);x=S.splice(0,k),w.sigBytes-=P}return new f.init(x,P)},clone:function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var x=this._doFinalize();return x},blockSize:16,_createHelper:function(b){return function(x,w){return new b.init(w).finalize(x)}},_createHmacHelper:function(b){return function(x,w){return new y.HMAC.init(b,w).finalize(x)}}});var y=u.algo={};return u}(Math);return n})}(rU)),rU.exports}var iU={exports:{}},Dpe;function O5(){return Dpe||(Dpe=1,function(e,t){(function(n,r){e.exports=r(Mr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(iU)),iU.exports}var sU={exports:{}},Npe;function W1t(){return Npe||(Npe=1,function(e,t){(function(n,r){e.exports=r(Mr())})(Jt,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(sU)),sU.exports}var oU={exports:{}},Ppe;function G1t(){return Ppe||(Ppe=1,function(e,t){(function(n,r){e.exports=r(Mr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(oU)),oU.exports}var aU={exports:{}},Ope;function G_(){return Ope||(Ope=1,function(e,t){(function(n,r){e.exports=r(Mr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,y=p<<16|m<<8|g,b=0;b<4&&h+b*.75<c;b++)d.push(f.charAt(y>>>6*(3-b)&63));var x=f.charAt(64);if(x)for(;d.length%4;)d.push(x);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(aU)),aU.exports}var uU={exports:{}},$pe;function Y1t(){return $pe||($pe=1,function(e,t){(function(n,r){e.exports=r(Mr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,y=c[p+2>>>2]>>>24-(p+2)%4*8&255,b=m<<16|g<<8|y,x=0;x<4&&p+x*.75<f;x++)h.push(d.charAt(b>>>6*(3-x)&63));var w=d.charAt(64);if(w)for(;h.length%4;)h.push(w);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(uU)),uU.exports}var lU={exports:{}},Mpe;function Y_(){return Mpe||(Mpe=1,function(e,t){(function(n,r){e.exports=r(Mr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var y=0;y<16;y++){var b=g+y,x=m[b];m[b]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360}var w=this._hash.words,S=m[g+0],T=m[g+1],C=m[g+2],I=m[g+3],D=m[g+4],k=m[g+5],P=m[g+6],M=m[g+7],$=m[g+8],B=m[g+9],q=m[g+10],H=m[g+11],Y=m[g+12],K=m[g+13],Q=m[g+14],L=m[g+15],z=w[0],W=w[1],F=w[2],V=w[3];z=f(z,W,F,V,S,7,l[0]),V=f(V,z,W,F,T,12,l[1]),F=f(F,V,z,W,C,17,l[2]),W=f(W,F,V,z,I,22,l[3]),z=f(z,W,F,V,D,7,l[4]),V=f(V,z,W,F,k,12,l[5]),F=f(F,V,z,W,P,17,l[6]),W=f(W,F,V,z,M,22,l[7]),z=f(z,W,F,V,$,7,l[8]),V=f(V,z,W,F,B,12,l[9]),F=f(F,V,z,W,q,17,l[10]),W=f(W,F,V,z,H,22,l[11]),z=f(z,W,F,V,Y,7,l[12]),V=f(V,z,W,F,K,12,l[13]),F=f(F,V,z,W,Q,17,l[14]),W=f(W,F,V,z,L,22,l[15]),z=d(z,W,F,V,T,5,l[16]),V=d(V,z,W,F,P,9,l[17]),F=d(F,V,z,W,H,14,l[18]),W=d(W,F,V,z,S,20,l[19]),z=d(z,W,F,V,k,5,l[20]),V=d(V,z,W,F,q,9,l[21]),F=d(F,V,z,W,L,14,l[22]),W=d(W,F,V,z,D,20,l[23]),z=d(z,W,F,V,B,5,l[24]),V=d(V,z,W,F,Q,9,l[25]),F=d(F,V,z,W,I,14,l[26]),W=d(W,F,V,z,$,20,l[27]),z=d(z,W,F,V,K,5,l[28]),V=d(V,z,W,F,C,9,l[29]),F=d(F,V,z,W,M,14,l[30]),W=d(W,F,V,z,Y,20,l[31]),z=h(z,W,F,V,k,4,l[32]),V=h(V,z,W,F,$,11,l[33]),F=h(F,V,z,W,H,16,l[34]),W=h(W,F,V,z,Q,23,l[35]),z=h(z,W,F,V,T,4,l[36]),V=h(V,z,W,F,D,11,l[37]),F=h(F,V,z,W,M,16,l[38]),W=h(W,F,V,z,q,23,l[39]),z=h(z,W,F,V,K,4,l[40]),V=h(V,z,W,F,S,11,l[41]),F=h(F,V,z,W,I,16,l[42]),W=h(W,F,V,z,P,23,l[43]),z=h(z,W,F,V,B,4,l[44]),V=h(V,z,W,F,Y,11,l[45]),F=h(F,V,z,W,L,16,l[46]),W=h(W,F,V,z,C,23,l[47]),z=p(z,W,F,V,S,6,l[48]),V=p(V,z,W,F,M,10,l[49]),F=p(F,V,z,W,Q,15,l[50]),W=p(W,F,V,z,k,21,l[51]),z=p(z,W,F,V,Y,6,l[52]),V=p(V,z,W,F,I,10,l[53]),F=p(F,V,z,W,q,15,l[54]),W=p(W,F,V,z,T,21,l[55]),z=p(z,W,F,V,$,6,l[56]),V=p(V,z,W,F,L,10,l[57]),F=p(F,V,z,W,P,15,l[58]),W=p(W,F,V,z,K,21,l[59]),z=p(z,W,F,V,D,6,l[60]),V=p(V,z,W,F,H,10,l[61]),F=p(F,V,z,W,C,15,l[62]),W=p(W,F,V,z,B,21,l[63]),w[0]=w[0]+z|0,w[1]=w[1]+W|0,w[2]=w[2]+F|0,w[3]=w[3]+V|0},_doFinalize:function(){var m=this._data,g=m.words,y=this._nDataBytes*8,b=m.sigBytes*8;g[b>>>5]|=128<<24-b%32;var x=r.floor(y/4294967296),w=y;g[(b+64>>>9<<4)+15]=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,g[(b+64>>>9<<4)+14]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var S=this._hash,T=S.words,C=0;C<4;C++){var I=T[C];T[C]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360}return S},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,y,b,x,w,S){var T=m+(g&y|~g&b)+x+S;return(T<<w|T>>>32-w)+g}function d(m,g,y,b,x,w,S){var T=m+(g&b|y&~b)+x+S;return(T<<w|T>>>32-w)+g}function h(m,g,y,b,x,w,S){var T=m+(g^y^b)+x+S;return(T<<w|T>>>32-w)+g}function p(m,g,y,b,x,w,S){var T=m+(y^(g|~b))+x+S;return(T<<w|T>>>32-w)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(lU)),lU.exports}var cU={exports:{}},Lpe;function Cke(){return Lpe||(Lpe=1,function(e,t){(function(n,r){e.exports=r(Mr())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],y=d[4],b=0;b<80;b++){if(b<16)u[b]=c[f+b]|0;else{var x=u[b-3]^u[b-8]^u[b-14]^u[b-16];u[b]=x<<1|x>>>31}var w=(h<<5|h>>>27)+y+u[b];b<20?w+=(p&m|~p&g)+1518500249:b<40?w+=(p^m^g)+1859775393:b<60?w+=(p&m|p&g|m&g)-1894007588:w+=(p^m^g)-899497514,y=g,g=m,m=p<<30|p>>>2,p=h,h=w}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(cU)),cU.exports}var fU={exports:{}},Fpe;function EZ(){return Fpe||(Fpe=1,function(e,t){(function(n,r){e.exports=r(Mr())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(y){for(var b=r.sqrt(y),x=2;x<=b;x++)if(!(y%x))return!1;return!0}function p(y){return(y-(y|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],y=m[1],b=m[2],x=m[3],w=m[4],S=m[5],T=m[6],C=m[7],I=0;I<64;I++){if(I<16)f[I]=h[p+I]|0;else{var D=f[I-15],k=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,P=f[I-2],M=(P<<15|P>>>17)^(P<<13|P>>>19)^P>>>10;f[I]=k+f[I-7]+M+f[I-16]}var $=w&S^~w&T,B=g&y^g&b^y&b,q=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),H=(w<<26|w>>>6)^(w<<21|w>>>11)^(w<<7|w>>>25),Y=C+H+$+c[I]+f[I],K=q+B;C=T,T=S,S=w,w=x+Y|0,x=b,b=y,y=g,g=Y+K|0}m[0]=m[0]+g|0,m[1]=m[1]+y|0,m[2]=m[2]+b|0,m[3]=m[3]+x|0,m[4]=m[4]+w|0,m[5]=m[5]+S|0,m[6]=m[6]+T|0,m[7]=m[7]+C|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(fU)),fU.exports}var dU={exports:{}},Bpe;function K1t(){return Bpe||(Bpe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),EZ())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(dU)),dU.exports}var hU={exports:{}},jpe;function Ake(){return jpe||(jpe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),O5())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,y=g[0],b=g[1],x=g[2],w=g[3],S=g[4],T=g[5],C=g[6],I=g[7],D=y.high,k=y.low,P=b.high,M=b.low,$=x.high,B=x.low,q=w.high,H=w.low,Y=S.high,K=S.low,Q=T.high,L=T.low,z=C.high,W=C.low,F=I.high,V=I.low,J=D,ue=k,we=P,he=M,ke=$,Pe=B,rt=q,Re=H,St=Y,Je=K,It=Q,mt=L,Te=z,Fe=W,st=F,yt=V,Dt=0;Dt<80;Dt++){var Qe,_e,kt=d[Dt];if(Dt<16)_e=kt.high=p[m+Dt*2]|0,Qe=kt.low=p[m+Dt*2+1]|0;else{var Rt=d[Dt-15],Ee=Rt.high,Oe=Rt.low,ot=(Ee>>>1|Oe<<31)^(Ee>>>8|Oe<<24)^Ee>>>7,xt=(Oe>>>1|Ee<<31)^(Oe>>>8|Ee<<24)^(Oe>>>7|Ee<<25),jt=d[Dt-2],jn=jt.high,dr=jt.low,Sr=(jn>>>19|dr<<13)^(jn<<3|dr>>>29)^jn>>>6,xi=(dr>>>19|jn<<13)^(dr<<3|jn>>>29)^(dr>>>6|jn<<26),Tn=d[Dt-7],Un=Tn.high,hr=Tn.low,gr=d[Dt-16],Yo=gr.high,es=gr.low;Qe=xt+hr,_e=ot+Un+(Qe>>>0<xt>>>0?1:0),Qe=Qe+xi,_e=_e+Sr+(Qe>>>0<xi>>>0?1:0),Qe=Qe+es,_e=_e+Yo+(Qe>>>0<es>>>0?1:0),kt.high=_e,kt.low=Qe}var ds=St&It^~St&Te,Ns=Je&mt^~Je&Fe,Ur=J&we^J&ke^we&ke,hs=ue&he^ue&Pe^he&Pe,Cc=(J>>>28|ue<<4)^(J<<30|ue>>>2)^(J<<25|ue>>>7),Ko=(ue>>>28|J<<4)^(ue<<30|J>>>2)^(ue<<25|J>>>7),Ou=(St>>>14|Je<<18)^(St>>>18|Je<<14)^(St<<23|Je>>>9),Lr=(Je>>>14|St<<18)^(Je>>>18|St<<14)^(Je<<23|St>>>9),ki=f[Dt],pi=ki.high,Xs=ki.low,si=yt+Lr,Ri=st+Ou+(si>>>0<yt>>>0?1:0),si=si+Ns,Ri=Ri+ds+(si>>>0<Ns>>>0?1:0),si=si+Xs,Ri=Ri+pi+(si>>>0<Xs>>>0?1:0),si=si+Qe,Ri=Ri+_e+(si>>>0<Qe>>>0?1:0),me=Ko+hs,ae=Cc+Ur+(me>>>0<Ko>>>0?1:0);st=Te,yt=Fe,Te=It,Fe=mt,It=St,mt=Je,Je=Re+si|0,St=rt+Ri+(Je>>>0<Re>>>0?1:0)|0,rt=ke,Re=Pe,ke=we,Pe=he,we=J,he=ue,ue=si+me|0,J=Ri+ae+(ue>>>0<si>>>0?1:0)|0}k=y.low=k+ue,y.high=D+J+(k>>>0<ue>>>0?1:0),M=b.low=M+he,b.high=P+we+(M>>>0<he>>>0?1:0),B=x.low=B+Pe,x.high=$+ke+(B>>>0<Pe>>>0?1:0),H=w.low=H+Re,w.high=q+rt+(H>>>0<Re>>>0?1:0),K=S.low=K+Je,S.high=Y+St+(K>>>0<Je>>>0?1:0),L=T.low=L+mt,T.high=Q+It+(L>>>0<mt>>>0?1:0),W=C.low=W+Fe,C.high=z+Te+(W>>>0<Fe>>>0?1:0),V=I.low=V+yt,I.high=F+st+(V>>>0<yt>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,y=p.sigBytes*8;m[y>>>5]|=128<<24-y%32,m[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(y+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(hU)),hU.exports}var pU={exports:{}},Upe;function X1t(){return Upe||(Upe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),O5(),Ake())})(Jt,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(pU)),pU.exports}var mU={exports:{}},zpe;function Q1t(){return zpe||(zpe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),O5())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,y=0,b=0;b<24;b++){f[g+5*y]=(b+1)*(b+2)/2%64;var x=y%5,w=(2*g+3*y)%5;g=x,y=w}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var S=1,T=0;T<24;T++){for(var C=0,I=0,D=0;D<7;D++){if(S&1){var k=(1<<D)-1;k<32?I^=1<<k:C^=1<<k-32}S&128?S=S<<1^113:S<<=1}h[T]=l.create(C,I)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,y){for(var b=this._state,x=this.blockSize/2,w=0;w<x;w++){var S=g[y+2*w],T=g[y+2*w+1];S=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360;var C=b[w];C.high^=T,C.low^=S}for(var I=0;I<24;I++){for(var D=0;D<5;D++){for(var k=0,P=0,M=0;M<5;M++){var C=b[D+5*M];k^=C.high,P^=C.low}var $=p[D];$.high=k,$.low=P}for(var D=0;D<5;D++)for(var B=p[(D+4)%5],q=p[(D+1)%5],H=q.high,Y=q.low,k=B.high^(H<<1|Y>>>31),P=B.low^(Y<<1|H>>>31),M=0;M<5;M++){var C=b[D+5*M];C.high^=k,C.low^=P}for(var K=1;K<25;K++){var k,P,C=b[K],Q=C.high,L=C.low,z=f[K];z<32?(k=Q<<z|L>>>32-z,P=L<<z|Q>>>32-z):(k=L<<z-32|Q>>>64-z,P=Q<<z-32|L>>>64-z);var W=p[d[K]];W.high=k,W.low=P}var F=p[0],V=b[0];F.high=V.high,F.low=V.low;for(var D=0;D<5;D++)for(var M=0;M<5;M++){var K=D+5*M,C=b[K],J=p[K],ue=p[(D+1)%5+5*M],we=p[(D+2)%5+5*M];C.high=J.high^~ue.high&we.high,C.low=J.low^~ue.low&we.low}var C=b[0],he=h[I];C.high^=he.high,C.low^=he.low}},_doFinalize:function(){var g=this._data,y=g.words;this._nDataBytes*8;var b=g.sigBytes*8,x=this.blockSize*32;y[b>>>5]|=1<<24-b%32,y[(r.ceil((b+1)/x)*x>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var w=this._state,S=this.cfg.outputLength/8,T=S/8,C=[],I=0;I<T;I++){var D=w[I],k=D.high,P=D.low;k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,P=(P<<8|P>>>24)&16711935|(P<<24|P>>>8)&4278255360,C.push(P),C.push(k)}return new o.init(C,S)},clone:function(){for(var g=a.clone.call(this),y=g._state=this._state.slice(0),b=0;b<25;b++)y[b]=y[b].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(mU)),mU.exports}var gU={exports:{}},Vpe;function J1t(){return Vpe||(Vpe=1,function(e,t){(function(n,r){e.exports=r(Mr())})(Jt,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(T,C){for(var I=0;I<16;I++){var D=C+I,k=T[D];T[D]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}var P=this._hash.words,M=h.words,$=p.words,B=l.words,q=c.words,H=f.words,Y=d.words,K,Q,L,z,W,F,V,J,ue,we;F=K=P[0],V=Q=P[1],J=L=P[2],ue=z=P[3],we=W=P[4];for(var he,I=0;I<80;I+=1)he=K+T[C+B[I]]|0,I<16?he+=g(Q,L,z)+M[0]:I<32?he+=y(Q,L,z)+M[1]:I<48?he+=b(Q,L,z)+M[2]:I<64?he+=x(Q,L,z)+M[3]:he+=w(Q,L,z)+M[4],he=he|0,he=S(he,H[I]),he=he+W|0,K=W,W=z,z=S(L,10),L=Q,Q=he,he=F+T[C+q[I]]|0,I<16?he+=w(V,J,ue)+$[0]:I<32?he+=x(V,J,ue)+$[1]:I<48?he+=b(V,J,ue)+$[2]:I<64?he+=y(V,J,ue)+$[3]:he+=g(V,J,ue)+$[4],he=he|0,he=S(he,Y[I]),he=he+we|0,F=we,we=ue,ue=S(J,10),J=V,V=he;he=P[1]+L+ue|0,P[1]=P[2]+z+we|0,P[2]=P[3]+W+F|0,P[3]=P[4]+K+V|0,P[4]=P[0]+Q+J|0,P[0]=he},_doFinalize:function(){var T=this._data,C=T.words,I=this._nDataBytes*8,D=T.sigBytes*8;C[D>>>5]|=128<<24-D%32,C[(D+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,T.sigBytes=(C.length+1)*4,this._process();for(var k=this._hash,P=k.words,M=0;M<5;M++){var $=P[M];P[M]=($<<8|$>>>24)&16711935|($<<24|$>>>8)&4278255360}return k},clone:function(){var T=a.clone.call(this);return T._hash=this._hash.clone(),T}});function g(T,C,I){return T^C^I}function y(T,C,I){return T&C|~T&I}function b(T,C,I){return(T|~C)^I}function x(T,C,I){return T&I|C&~I}function w(T,C,I){return T^(C|~I)}function S(T,C){return T<<C|T>>>32-C}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(gU)),gU.exports}var yU={exports:{}},Hpe;function SZ(){return Hpe||(Hpe=1,function(e,t){(function(n,r){e.exports=r(Mr())})(Jt,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,y=0;y<f;y++)m[y]^=1549556828,g[y]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(yU)),yU.exports}var vU={exports:{}},qpe;function Z1t(){return qpe||(qpe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),EZ(),SZ())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),y=m.words,b=g.words,x=h.keySize,w=h.iterations;y.length<x;){var S=p.update(d).finalize(g);p.reset();for(var T=S.words,C=T.length,I=S,D=1;D<w;D++){I=p.finalize(I),p.reset();for(var k=I.words,P=0;P<C;P++)T[P]^=k[P]}m.concat(S),b[0]++}return m.sigBytes=x*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(vU)),vU.exports}var bU={exports:{}},Wpe;function Mv(){return Wpe||(Wpe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),Cke(),SZ())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,y=h.keySize,b=h.iterations;g.length<y;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var x=1;x<b;x++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=y*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(bU)),bU.exports}var xU={exports:{}},Gpe;function ya(){return Gpe||(Gpe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),Mv())})(Jt,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(k,P){return this.create(this._ENC_XFORM_MODE,k,P)},createDecryptor:function(k,P){return this.create(this._DEC_XFORM_MODE,k,P)},init:function(k,P,M){this.cfg=this.cfg.extend(M),this._xformMode=k,this._key=P,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(k){return this._append(k),this._process()},finalize:function(k){k&&this._append(k);var P=this._doFinalize();return P},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function k(P){return typeof P=="string"?D:T}return function(P){return{encrypt:function(M,$,B){return k($).encrypt(P,M,$,B)},decrypt:function(M,$,B){return k($).decrypt(P,M,$,B)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var k=this._process(!0);return k},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(k,P){return this.Encryptor.create(k,P)},createDecryptor:function(k,P){return this.Decryptor.create(k,P)},init:function(k,P){this._cipher=k,this._iv=P}}),g=p.CBC=function(){var k=m.extend();k.Encryptor=k.extend({processBlock:function(M,$){var B=this._cipher,q=B.blockSize;P.call(this,M,$,q),B.encryptBlock(M,$),this._prevBlock=M.slice($,$+q)}}),k.Decryptor=k.extend({processBlock:function(M,$){var B=this._cipher,q=B.blockSize,H=M.slice($,$+q);B.decryptBlock(M,$),P.call(this,M,$,q),this._prevBlock=H}});function P(M,$,B){var q,H=this._iv;H?(q=H,this._iv=r):q=this._prevBlock;for(var Y=0;Y<B;Y++)M[$+Y]^=q[Y]}return k}(),y=i.pad={},b=y.Pkcs7={pad:function(k,P){for(var M=P*4,$=M-k.sigBytes%M,B=$<<24|$<<16|$<<8|$,q=[],H=0;H<$;H+=4)q.push(B);var Y=a.create(q,$);k.concat(Y)},unpad:function(k){var P=k.words[k.sigBytes-1>>>2]&255;k.sigBytes-=P}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:b}),reset:function(){var k;h.reset.call(this);var P=this.cfg,M=P.iv,$=P.mode;this._xformMode==this._ENC_XFORM_MODE?k=$.createEncryptor:(k=$.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==k?this._mode.init(this,M&&M.words):(this._mode=k.call($,this,M&&M.words),this._mode.__creator=k)},_doProcessBlock:function(k,P){this._mode.processBlock(k,P)},_doFinalize:function(){var k,P=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(P.pad(this._data,this.blockSize),k=this._process(!0)):(k=this._process(!0),P.unpad(k)),k},blockSize:128/32});var x=s.CipherParams=o.extend({init:function(k){this.mixIn(k)},toString:function(k){return(k||this.formatter).stringify(this)}}),w=i.format={},S=w.OpenSSL={stringify:function(k){var P,M=k.ciphertext,$=k.salt;return $?P=a.create([1398893684,1701076831]).concat($).concat(M):P=M,P.toString(c)},parse:function(k){var P,M=c.parse(k),$=M.words;return $[0]==1398893684&&$[1]==1701076831&&(P=a.create($.slice(2,4)),$.splice(0,4),M.sigBytes-=16),x.create({ciphertext:M,salt:P})}},T=s.SerializableCipher=o.extend({cfg:o.extend({format:S}),encrypt:function(k,P,M,$){$=this.cfg.extend($);var B=k.createEncryptor(M,$),q=B.finalize(P),H=B.cfg;return x.create({ciphertext:q,key:M,iv:H.iv,algorithm:k,mode:H.mode,padding:H.padding,blockSize:k.blockSize,formatter:$.format})},decrypt:function(k,P,M,$){$=this.cfg.extend($),P=this._parse(P,$.format);var B=k.createDecryptor(M,$).finalize(P.ciphertext);return B},_parse:function(k,P){return typeof k=="string"?P.parse(k,this):k}}),C=i.kdf={},I=C.OpenSSL={execute:function(k,P,M,$,B){if($||($=a.random(64/8)),B)var q=d.create({keySize:P+M,hasher:B}).compute(k,$);else var q=d.create({keySize:P+M}).compute(k,$);var H=a.create(q.words.slice(P),M*4);return q.sigBytes=P*4,x.create({key:q,iv:H,salt:$})}},D=s.PasswordBasedCipher=T.extend({cfg:T.cfg.extend({kdf:I}),encrypt:function(k,P,M,$){$=this.cfg.extend($);var B=$.kdf.execute(M,k.keySize,k.ivSize,$.salt,$.hasher);$.iv=B.iv;var q=T.encrypt.call(this,k,P,B.key,$);return q.mixIn(B),q},decrypt:function(k,P,M,$){$=this.cfg.extend($),P=this._parse(P,$.format);var B=$.kdf.execute(M,k.keySize,k.ivSize,P.salt,$.hasher);$.iv=B.iv;var q=T.decrypt.call(this,k,P,B.key,$);return q}})}()})}(xU)),xU.exports}var _U={exports:{}},Ype;function evt(){return Ype||(Ype=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),ya())})(Jt,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(_U)),_U.exports}var wU={exports:{}},Kpe;function tvt(){return Kpe||(Kpe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),ya())})(Jt,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(wU)),wU.exports}var EU={exports:{}},Xpe;function nvt(){return Xpe||(Xpe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),ya())})(Jt,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(EU)),EU.exports}var SU={exports:{}},Qpe;function rvt(){return Qpe||(Qpe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),ya())})(Jt,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(SU)),SU.exports}var TU={exports:{}},Jpe;function ivt(){return Jpe||(Jpe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),ya())})(Jt,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(TU)),TU.exports}var CU={exports:{}},Zpe;function svt(){return Zpe||(Zpe=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),ya())})(Jt,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(CU)),CU.exports}var AU={exports:{}},eme;function ovt(){return eme||(eme=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),ya())})(Jt,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(AU)),AU.exports}var IU={exports:{}},tme;function avt(){return tme||(tme=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),ya())})(Jt,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(IU)),IU.exports}var kU={exports:{}},nme;function uvt(){return nme||(nme=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),ya())})(Jt,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(kU)),kU.exports}var RU={exports:{}},rme;function lvt(){return rme||(rme=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),ya())})(Jt,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(RU)),RU.exports}var DU={exports:{}},ime;function cvt(){return ime||(ime=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),ya())})(Jt,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(DU)),DU.exports}var NU={exports:{}},sme;function fvt(){return sme||(sme=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),G_(),Y_(),Mv(),ya())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var x=[],w=0;w<256;w++)w<128?x[w]=w<<1:x[w]=w<<1^283;for(var S=0,T=0,w=0;w<256;w++){var C=T^T<<1^T<<2^T<<3^T<<4;C=C>>>8^C&255^99,a[S]=C,u[C]=S;var I=x[S],D=x[I],k=x[D],P=x[C]*257^C*16843008;l[S]=P<<24|P>>>8,c[S]=P<<16|P>>>16,f[S]=P<<8|P>>>24,d[S]=P;var P=k*16843009^D*65537^I*257^S*16843008;h[C]=P<<24|P>>>8,p[C]=P<<16|P>>>16,m[C]=P<<8|P>>>24,g[C]=P,S?(S=I^x[x[x[k^I]]],T^=x[x[T]]):S=T=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],b=o.AES=s.extend({_doReset:function(){var x;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var w=this._keyPriorReset=this._key,S=w.words,T=w.sigBytes/4,C=this._nRounds=T+6,I=(C+1)*4,D=this._keySchedule=[],k=0;k<I;k++)k<T?D[k]=S[k]:(x=D[k-1],k%T?T>6&&k%T==4&&(x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255]):(x=x<<8|x>>>24,x=a[x>>>24]<<24|a[x>>>16&255]<<16|a[x>>>8&255]<<8|a[x&255],x^=y[k/T|0]<<24),D[k]=D[k-T]^x);for(var P=this._invKeySchedule=[],M=0;M<I;M++){var k=I-M;if(M%4)var x=D[k];else var x=D[k-4];M<4||k<=4?P[M]=x:P[M]=h[a[x>>>24]]^p[a[x>>>16&255]]^m[a[x>>>8&255]]^g[a[x&255]]}}},encryptBlock:function(x,w){this._doCryptBlock(x,w,this._keySchedule,l,c,f,d,a)},decryptBlock:function(x,w){var S=x[w+1];x[w+1]=x[w+3],x[w+3]=S,this._doCryptBlock(x,w,this._invKeySchedule,h,p,m,g,u);var S=x[w+1];x[w+1]=x[w+3],x[w+3]=S},_doCryptBlock:function(x,w,S,T,C,I,D,k){for(var P=this._nRounds,M=x[w]^S[0],$=x[w+1]^S[1],B=x[w+2]^S[2],q=x[w+3]^S[3],H=4,Y=1;Y<P;Y++){var K=T[M>>>24]^C[$>>>16&255]^I[B>>>8&255]^D[q&255]^S[H++],Q=T[$>>>24]^C[B>>>16&255]^I[q>>>8&255]^D[M&255]^S[H++],L=T[B>>>24]^C[q>>>16&255]^I[M>>>8&255]^D[$&255]^S[H++],z=T[q>>>24]^C[M>>>16&255]^I[$>>>8&255]^D[B&255]^S[H++];M=K,$=Q,B=L,q=z}var K=(k[M>>>24]<<24|k[$>>>16&255]<<16|k[B>>>8&255]<<8|k[q&255])^S[H++],Q=(k[$>>>24]<<24|k[B>>>16&255]<<16|k[q>>>8&255]<<8|k[M&255])^S[H++],L=(k[B>>>24]<<24|k[q>>>16&255]<<16|k[M>>>8&255]<<8|k[$&255])^S[H++],z=(k[q>>>24]<<24|k[M>>>16&255]<<16|k[$>>>8&255]<<8|k[B&255])^S[H++];x[w]=K,x[w+1]=Q,x[w+2]=L,x[w+3]=z},keySize:256/32});r.AES=s._createHelper(b)}(),n.AES})}(NU)),NU.exports}var PU={exports:{}},ome;function dvt(){return ome||(ome=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),G_(),Y_(),Mv(),ya())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var y=this._key,b=y.words,x=[],w=0;w<56;w++){var S=u[w]-1;x[w]=b[S>>>5]>>>31-S%32&1}for(var T=this._subKeys=[],C=0;C<16;C++){for(var I=T[C]=[],D=c[C],w=0;w<24;w++)I[w/6|0]|=x[(l[w]-1+D)%28]<<31-w%6,I[4+(w/6|0)]|=x[28+(l[w+24]-1+D)%28]<<31-w%6;I[0]=I[0]<<1|I[0]>>>31;for(var w=1;w<7;w++)I[w]=I[w]>>>(w-1)*4+3;I[7]=I[7]<<5|I[7]>>>27}for(var k=this._invSubKeys=[],w=0;w<16;w++)k[w]=T[15-w]},encryptBlock:function(y,b){this._doCryptBlock(y,b,this._subKeys)},decryptBlock:function(y,b){this._doCryptBlock(y,b,this._invSubKeys)},_doCryptBlock:function(y,b,x){this._lBlock=y[b],this._rBlock=y[b+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var w=0;w<16;w++){for(var S=x[w],T=this._lBlock,C=this._rBlock,I=0,D=0;D<8;D++)I|=f[D][((C^S[D])&d[D])>>>0];this._lBlock=C,this._rBlock=T^I}var k=this._lBlock;this._lBlock=this._rBlock,this._rBlock=k,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),y[b]=this._lBlock,y[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(y,b){var x=(this._lBlock>>>y^this._rBlock)&b;this._rBlock^=x,this._lBlock^=x<<y}function m(y,b){var x=(this._rBlock>>>y^this._lBlock)&b;this._lBlock^=x,this._rBlock^=x<<y}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var y=this._key,b=y.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=b.slice(0,2),w=b.length<4?b.slice(0,2):b.slice(2,4),S=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=h.createEncryptor(s.create(x)),this._des2=h.createEncryptor(s.create(w)),this._des3=h.createEncryptor(s.create(S))},encryptBlock:function(y,b){this._des1.encryptBlock(y,b),this._des2.decryptBlock(y,b),this._des3.encryptBlock(y,b)},decryptBlock:function(y,b){this._des3.decryptBlock(y,b),this._des2.encryptBlock(y,b),this._des1.decryptBlock(y,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(PU)),PU.exports}var OU={exports:{}},ame;function hvt(){return ame||(ame=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),G_(),Y_(),Mv(),ya())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,y=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+y)%256;var b=h[p];h[p]=h[m],h[m]=b}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(OU)),OU.exports}var $U={exports:{}},ume;function pvt(){return ume||(ume=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),G_(),Y_(),Mv(),ya())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var y=h.words,b=y[0],x=y[1],w=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,T=w>>>16|S&4294901760,C=S<<16|w&65535;g[0]^=w,g[1]^=T,g[2]^=S,g[3]^=C,g[4]^=w,g[5]^=T,g[6]^=S,g[7]^=C;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,b=((g*g>>>17)+g*y>>>15)+y*y,x=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=b^x}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}($U)),$U.exports}var MU={exports:{}},lme;function mvt(){return lme||(lme=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),G_(),Y_(),Mv(),ya())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var y=h.words,b=y[0],x=y[1],w=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,S=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,T=w>>>16|S&4294901760,C=S<<16|w&65535;m[0]^=w,m[1]^=T,m[2]^=S,m[3]^=C,m[4]^=w,m[5]^=T,m[6]^=S,m[7]^=C;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,y=m>>>16,b=((g*g>>>17)+g*y>>>15)+y*y,x=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=b^x}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}(MU)),MU.exports}var LU={exports:{}},cme;function gvt(){return cme||(cme=1,function(e,t){(function(n,r,i){e.exports=r(Mr(),G_(),Y_(),Mv(),ya())})(Jt,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,y){let b=y>>24&255,x=y>>16&255,w=y>>8&255,S=y&255,T=g.sbox[0][b]+g.sbox[1][x];return T=T^g.sbox[2][w],T=T+g.sbox[3][S],T}function d(g,y,b){let x=y,w=b,S;for(let T=0;T<a;++T)x=x^g.pbox[T],w=f(g,x)^w,S=x,x=w,w=S;return S=x,x=w,w=S,w=w^g.pbox[a],x=x^g.pbox[a+1],{left:x,right:w}}function h(g,y,b){let x=y,w=b,S;for(let T=a+1;T>1;--T)x=x^g.pbox[T],w=f(g,x)^w,S=x,x=w,w=S;return S=x,x=w,w=S,w=w^g.pbox[1],x=x^g.pbox[0],{left:x,right:w}}function p(g,y,b){for(let C=0;C<4;C++){g.sbox[C]=[];for(let I=0;I<256;I++)g.sbox[C][I]=l[C][I]}let x=0;for(let C=0;C<a+2;C++)g.pbox[C]=u[C]^y[x],x++,x>=b&&(x=0);let w=0,S=0,T=0;for(let C=0;C<a+2;C+=2)T=d(g,w,S),w=T.left,S=T.right,g.pbox[C]=w,g.pbox[C+1]=S;for(let C=0;C<4;C++)for(let I=0;I<256;I+=2)T=d(g,w,S),w=T.left,S=T.right,g.sbox[C][I]=w,g.sbox[C][I+1]=S;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,b=g.sigBytes/4;p(c,y,b)}},encryptBlock:function(g,y){var b=d(c,g[y],g[y+1]);g[y]=b.left,g[y+1]=b.right},decryptBlock:function(g,y){var b=h(c,g[y],g[y+1]);g[y]=b.left,g[y+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(LU)),LU.exports}(function(e,t){(function(n,r,i){e.exports=r(Mr(),O5(),W1t(),G1t(),G_(),Y1t(),Y_(),Cke(),EZ(),K1t(),Ake(),X1t(),Q1t(),J1t(),SZ(),Z1t(),Mv(),ya(),evt(),tvt(),nvt(),rvt(),ivt(),svt(),ovt(),avt(),uvt(),lvt(),cvt(),fvt(),dvt(),hvt(),pvt(),mvt(),gvt())})(Jt,function(n){return n})})(Ske);var nW=Ske.exports;function Mp(e){const t=nW.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function yvt(e){const t=nW.AES.decrypt(atob(e),"notSecret").toString(nW.enc.Utf8);return parseInt(t,10)}function K_(){const{studyId:e}=sm();return`${e}`}function xd(){const{index:e}=sm();return e===void 0?0:e.startsWith("reviewer-")?e:yvt(e)}function _d(){const e=xd(),t=wZ();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var k$={exports:{}};k$.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",b="[object Object]",x="[object Proxy]",w="[object RegExp]",S="[object Set]",T="[object String]",C="[object Undefined]",I="[object WeakMap]",D="[object ArrayBuffer]",k="[object DataView]",P="[object Float32Array]",M="[object Float64Array]",$="[object Int8Array]",B="[object Int16Array]",q="[object Int32Array]",H="[object Uint8Array]",Y="[object Uint8ClampedArray]",K="[object Uint16Array]",Q="[object Uint32Array]",L=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,F={};F[P]=F[M]=F[$]=F[B]=F[q]=F[H]=F[Y]=F[K]=F[Q]=!0,F[a]=F[u]=F[D]=F[c]=F[k]=F[f]=F[d]=F[h]=F[m]=F[g]=F[b]=F[w]=F[S]=F[T]=F[I]=!1;var V=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,J=typeof self=="object"&&self&&self.Object===Object&&self,ue=V||J||Function("return this")(),we=t&&!t.nodeType&&t,he=we&&!0&&e&&!e.nodeType&&e,ke=he&&he.exports===we,Pe=ke&&V.process,rt=function(){try{var le=he&&he.require&&he.require("util").types;return le||Pe&&Pe.binding&&Pe.binding("util")}catch{}}(),Re=rt&&rt.isTypedArray;function St(le,ye,Be){switch(Be.length){case 0:return le.call(ye);case 1:return le.call(ye,Be[0]);case 2:return le.call(ye,Be[0],Be[1]);case 3:return le.call(ye,Be[0],Be[1],Be[2])}return le.apply(ye,Be)}function Je(le,ye){for(var Be=-1,Ht=Array(le);++Be<le;)Ht[Be]=ye(Be);return Ht}function It(le){return function(ye){return le(ye)}}function mt(le,ye){return le==null?void 0:le[ye]}function Te(le,ye){return function(Be){return le(ye(Be))}}var Fe=Array.prototype,st=Function.prototype,yt=Object.prototype,Dt=ue["__core-js_shared__"],Qe=st.toString,_e=yt.hasOwnProperty,kt=function(){var le=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return le?"Symbol(src)_1."+le:""}(),Rt=yt.toString,Ee=Qe.call(Object),Oe=RegExp("^"+Qe.call(_e).replace(L,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ot=ke?ue.Buffer:void 0,xt=ue.Symbol,jt=ue.Uint8Array;ot&&ot.allocUnsafe;var jn=Te(Object.getPrototypeOf,Object),dr=Object.create,Sr=yt.propertyIsEnumerable,xi=Fe.splice,Tn=xt?xt.toStringTag:void 0,Un=function(){try{var le=at(Object,"defineProperty");return le({},"",{}),le}catch{}}(),hr=ot?ot.isBuffer:void 0,gr=Math.max,Yo=Date.now,es=at(ue,"Map"),ds=at(Object,"create"),Ns=function(){function le(){}return function(ye){if(!Rd(ye))return{};if(dr)return dr(ye);le.prototype=ye;var Be=new le;return le.prototype=void 0,Be}}();function Ur(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function hs(){this.__data__=ds?ds(null):{},this.size=0}function Cc(le){var ye=this.has(le)&&delete this.__data__[le];return this.size-=ye?1:0,ye}function Ko(le){var ye=this.__data__;if(ds){var Be=ye[le];return Be===r?void 0:Be}return _e.call(ye,le)?ye[le]:void 0}function Ou(le){var ye=this.__data__;return ds?ye[le]!==void 0:_e.call(ye,le)}function Lr(le,ye){var Be=this.__data__;return this.size+=this.has(le)?0:1,Be[le]=ds&&ye===void 0?r:ye,this}Ur.prototype.clear=hs,Ur.prototype.delete=Cc,Ur.prototype.get=Ko,Ur.prototype.has=Ou,Ur.prototype.set=Lr;function ki(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function pi(){this.__data__=[],this.size=0}function Xs(le){var ye=this.__data__,Be=yr(ye,le);if(Be<0)return!1;var Ht=ye.length-1;return Be==Ht?ye.pop():xi.call(ye,Be,1),--this.size,!0}function si(le){var ye=this.__data__,Be=yr(ye,le);return Be<0?void 0:ye[Be][1]}function Ri(le){return yr(this.__data__,le)>-1}function me(le,ye){var Be=this.__data__,Ht=yr(Be,le);return Ht<0?(++this.size,Be.push([le,ye])):Be[Ht][1]=ye,this}ki.prototype.clear=pi,ki.prototype.delete=Xs,ki.prototype.get=si,ki.prototype.has=Ri,ki.prototype.set=me;function ae(le){var ye=-1,Be=le==null?0:le.length;for(this.clear();++ye<Be;){var Ht=le[ye];this.set(Ht[0],Ht[1])}}function ge(){this.size=0,this.__data__={hash:new Ur,map:new(es||ki),string:new Ur}}function Le(le){var ye=it(this,le).delete(le);return this.size-=ye?1:0,ye}function Me(le){return it(this,le).get(le)}function _t(le){return it(this,le).has(le)}function Ut(le,ye){var Be=it(this,le),Ht=Be.size;return Be.set(le,ye),this.size+=Be.size==Ht?0:1,this}ae.prototype.clear=ge,ae.prototype.delete=Le,ae.prototype.get=Me,ae.prototype.has=_t,ae.prototype.set=Ut;function fn(le){var ye=this.__data__=new ki(le);this.size=ye.size}function Zn(){this.__data__=new ki,this.size=0}function ur(le){var ye=this.__data__,Be=ye.delete(le);return this.size=ye.size,Be}function Pn(le){return this.__data__.get(le)}function Tr(le){return this.__data__.has(le)}function oi(le,ye){var Be=this.__data__;if(Be instanceof ki){var Ht=Be.__data__;if(!es||Ht.length<n-1)return Ht.push([le,ye]),this.size=++Be.size,this;Be=this.__data__=new ae(Ht)}return Be.set(le,ye),this.size=Be.size,this}fn.prototype.clear=Zn,fn.prototype.delete=ur,fn.prototype.get=Pn,fn.prototype.has=Tr,fn.prototype.set=oi;function on(le,ye){var Be=Id(le),Ht=!Be&&Ga(le),ir=!Be&&!Ht&&kd(le),Hr=!Be&&!Ht&&!ir&&Ew(le),_i=Be||Ht||ir||Hr,an=_i?Je(le.length,String):[],ai=an.length;for(var wi in le)_i&&(wi=="length"||ir&&(wi=="offset"||wi=="parent")||Hr&&(wi=="buffer"||wi=="byteLength"||wi=="byteOffset")||Mt(wi,ai))||an.push(wi);return an}function Cr(le,ye,Be){(Be!==void 0&&!$u(le[ye],Be)||Be===void 0&&!(ye in le))&&Di(le,ye,Be)}function Xr(le,ye,Be){var Ht=le[ye];(!(_e.call(le,ye)&&$u(Ht,Be))||Be===void 0&&!(ye in le))&&Di(le,ye,Be)}function yr(le,ye){for(var Be=le.length;Be--;)if($u(le[Be][0],ye))return Be;return-1}function Di(le,ye,Be){ye=="__proto__"&&Un?Un(le,ye,{configurable:!0,enumerable:!0,value:Be,writable:!0}):le[ye]=Be}var po=He();function Ni(le){return le==null?le===void 0?C:y:Tn&&Tn in Object(le)?ut(le):Co(le)}function So(le){return Xo(le)&&Ni(le)==a}function ts(le){if(!Rd(le)||er(le))return!1;var ye=sb(le)?Oe:z;return ye.test(rb(le))}function ns(le){return Xo(le)&&ww(le.length)&&!!F[Ni(le)]}function To(le){if(!Rd(le))return vr(le);var ye=zr(le),Be=[];for(var Ht in le)Ht=="constructor"&&(ye||!_e.call(le,Ht))||Be.push(Ht);return Be}function xa(le,ye,Be,Ht,ir){le!==ye&&po(ye,function(Hr,_i){if(ir||(ir=new fn),Rd(Hr))mo(le,ye,_i,Be,xa,Ht,ir);else{var an=Ht?Ht(Ad(le,_i),Hr,_i+"",le,ye,ir):void 0;an===void 0&&(an=Hr),Cr(le,_i,an)}},Gm)}function mo(le,ye,Be,Ht,ir,Hr,_i){var an=Ad(le,Be),ai=Ad(ye,Be),wi=_i.get(ai);if(wi){Cr(le,Be,wi);return}var Ao=Hr?Hr(an,ai,Be+"",le,ye,_i):void 0,Dd=Ao===void 0;if(Dd){var Ps=Id(ai),Ym=!Ps&&kd(ai),Km=!Ps&&!Ym&&Ew(ai);Ao=ai,Ps||Ym||Km?Id(an)?Ao=an:ib(an)?Ao=xe(an):Ym?(Dd=!1,Ao=ee(ai)):Km?(Dd=!1,Ao=se(ai)):Ao=[]:DC(ai)||Ga(ai)?(Ao=an,Ga(an)?Ao=Wm(an):(!Rd(an)||sb(an))&&(Ao=vt(ai))):Dd=!1}Dd&&(_i.set(ai,Ao),ir(Ao,ai,Ht,Hr,_i),_i.delete(ai)),Cr(le,Be,Ao)}function wl(le,ye){return iy(Ac(le,ye,Ar),le+"")}var Ef=Un?function(le,ye){return Un(le,"toString",{configurable:!0,enumerable:!1,value:Vr(ye),writable:!0})}:Ar;function ee(le,ye){return le.slice()}function pe(le){var ye=new le.constructor(le.byteLength);return new jt(ye).set(new jt(le)),ye}function se(le,ye){var Be=pe(le.buffer);return new le.constructor(Be,le.byteOffset,le.length)}function xe(le,ye){var Be=-1,Ht=le.length;for(ye||(ye=Array(Ht));++Be<Ht;)ye[Be]=le[Be];return ye}function Ce(le,ye,Be,Ht){var ir=!Be;Be||(Be={});for(var Hr=-1,_i=ye.length;++Hr<_i;){var an=ye[Hr],ai=void 0;ai===void 0&&(ai=le[an]),ir?Di(Be,an,ai):Xr(Be,an,ai)}return Be}function be(le){return wl(function(ye,Be){var Ht=-1,ir=Be.length,Hr=ir>1?Be[ir-1]:void 0,_i=ir>2?Be[2]:void 0;for(Hr=le.length>3&&typeof Hr=="function"?(ir--,Hr):void 0,_i&&On(Be[0],Be[1],_i)&&(Hr=ir<3?void 0:Hr,ir=1),ye=Object(ye);++Ht<ir;){var an=Be[Ht];an&&le(ye,an,Ht,Hr)}return ye})}function He(le){return function(ye,Be,Ht){for(var ir=-1,Hr=Object(ye),_i=Ht(ye),an=_i.length;an--;){var ai=_i[++ir];if(Be(Hr[ai],ai,Hr)===!1)break}return ye}}function it(le,ye){var Be=le.__data__;return Kt(ye)?Be[typeof ye=="string"?"string":"hash"]:Be.map}function at(le,ye){var Be=mt(le,ye);return ts(Be)?Be:void 0}function ut(le){var ye=_e.call(le,Tn),Be=le[Tn];try{le[Tn]=void 0;var Ht=!0}catch{}var ir=Rt.call(le);return Ht&&(ye?le[Tn]=Be:delete le[Tn]),ir}function vt(le){return typeof le.constructor=="function"&&!zr(le)?Ns(jn(le)):{}}function Mt(le,ye){var Be=typeof le;return ye=ye??o,!!ye&&(Be=="number"||Be!="symbol"&&W.test(le))&&le>-1&&le%1==0&&le<ye}function On(le,ye,Be){if(!Rd(Be))return!1;var Ht=typeof ye;return(Ht=="number"?sy(Be)&&Mt(ye,Be.length):Ht=="string"&&ye in Be)?$u(Be[ye],le):!1}function Kt(le){var ye=typeof le;return ye=="string"||ye=="number"||ye=="symbol"||ye=="boolean"?le!=="__proto__":le===null}function er(le){return!!kt&&kt in le}function zr(le){var ye=le&&le.constructor,Be=typeof ye=="function"&&ye.prototype||yt;return le===Be}function vr(le){var ye=[];if(le!=null)for(var Be in Object(le))ye.push(Be);return ye}function Co(le){return Rt.call(le)}function Ac(le,ye,Be){return ye=gr(ye===void 0?le.length-1:ye,0),function(){for(var Ht=arguments,ir=-1,Hr=gr(Ht.length-ye,0),_i=Array(Hr);++ir<Hr;)_i[ir]=Ht[ye+ir];ir=-1;for(var an=Array(ye+1);++ir<ye;)an[ir]=Ht[ir];return an[ye]=Be(_i),St(le,this,an)}}function Ad(le,ye){if(!(ye==="constructor"&&typeof le[ye]=="function")&&ye!="__proto__")return le[ye]}var iy=ep(Ef);function ep(le){var ye=0,Be=0;return function(){var Ht=Yo(),ir=s-(Ht-Be);if(Be=Ht,ir>0){if(++ye>=i)return arguments[0]}else ye=0;return le.apply(void 0,arguments)}}function rb(le){if(le!=null){try{return Qe.call(le)}catch{}try{return le+""}catch{}}return""}function $u(le,ye){return le===ye||le!==le&&ye!==ye}var Ga=So(function(){return arguments}())?So:function(le){return Xo(le)&&_e.call(le,"callee")&&!Sr.call(le,"callee")},Id=Array.isArray;function sy(le){return le!=null&&ww(le.length)&&!sb(le)}function ib(le){return Xo(le)&&sy(le)}var kd=hr||Tw;function sb(le){if(!Rd(le))return!1;var ye=Ni(le);return ye==h||ye==p||ye==l||ye==x}function ww(le){return typeof le=="number"&&le>-1&&le%1==0&&le<=o}function Rd(le){var ye=typeof le;return le!=null&&(ye=="object"||ye=="function")}function Xo(le){return le!=null&&typeof le=="object"}function DC(le){if(!Xo(le)||Ni(le)!=b)return!1;var ye=jn(le);if(ye===null)return!0;var Be=_e.call(ye,"constructor")&&ye.constructor;return typeof Be=="function"&&Be instanceof Be&&Qe.call(Be)==Ee}var Ew=Re?It(Re):ns;function Wm(le){return Ce(le,Gm(le))}function Gm(le){return sy(le)?on(le):To(le)}var Sw=be(function(le,ye,Be){xa(le,ye,Be)});function Vr(le){return function(){return le}}function Ar(le){return le}function Tw(){return!1}e.exports=Sw})(k$,k$.exports);var vvt=k$.exports;const TZ=Cm(vvt);function G0(e){return structuredClone(e)}function CZ(){const e=xd(),n=`${_d()}_${e}`;return vi(i=>i.answers[n])}const Ike=N.createContext(null);function bvt(){const e=N.useContext(Ike);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function gg(){return vi(e=>e.config)}function $5(){const[e]=Pv();return!!e.get("participantId")}function fme(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function kke(){const e=xd(),t=wZ(),r=`${_d()}_${e}`,i=vi(C=>C.trialValidation),s=vi(C=>C.sequence),o=vi(C=>C.answers),a=vi(C=>C.modes),u=wc(),{saveTrialAnswer:l,setIframeAnswers:c}=ll(),{storageEngine:f}=fo(),d=K_(),h=N.useMemo(()=>a.dataCollectionEnabled,[a]),p=z1t(r),m=$5(),g=typeof e!="number"||m||!p,y=CZ(),b=jh(),x=gg(),w=N.useMemo(()=>Date.now(),[]),S=bvt(),T=N.useCallback((C=!0)=>{if(typeof e!="number")return;const I=G0(i[r]),D=Object.values(I).reduce((Q,L)=>Object.hasOwn(L,"values")?{...Q,...L.values}:Q,{}),{provenanceGraph:k}=I,P=Date.now(),{incorrectAnswers:M,helpButtonClickedCount:$}=y,B=S&&"current"in S&&S.current?S.current.splice(0,S.current.length):[];if(h&&y.endTime===-1){const Q={answer:C?D:{},startTime:w,endTime:P,incorrectAnswers:M,provenanceGraph:k,windowEvents:B,timedOut:!C,helpButtonClickedCount:$};u(l({identifier:r,...Q})),f&&f.saveAnswers({...o,[r]:Q}),u(c({}))}let q=e+1;const H=xZ(s,e),Y=H!==null&&H.some(Q=>Object.hasOwn(Q.currentBlock,"skip")&&Q.currentBlock.skip!==void 0),K={...o,[r]:{answer:D,startTime:w,endTime:P,provenanceGraph:k,windowEvents:B}};Y&&[...H.flatMap(L=>L.currentBlock.skip?L.currentBlock.skip.map(z=>({...z,firstIndex:L.firstIndex,lastIndex:L.lastIndex})):[])].some(L=>{let z=!1;const W=Object.fromEntries(Object.entries(K).filter(([V])=>{const J=parseInt(V.slice(V.lastIndexOf("_")+1),10);return J>=L.firstIndex&&J<=e})),F=L.check!=="block"?Object.entries(W).filter(([V])=>V.slice(0,V.lastIndexOf("_"))===L.name):Object.entries(W);if(F.length===0)return!1;if(F.some(([V,J])=>!J))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(L,null,2)}`);if(L.check==="response"||L.check==="responses"){const[V,J]=F[0];L.check==="response"?z=L.comparison==="equal"?L.value===J.answer[L.responseId]:L.value!==J.answer[L.responseId]:z=!fme(J.answer,V,x.components[V.slice(0,V.lastIndexOf("_"))],x)}else if(L.check==="block"||L.check==="repeatedComponent"){if(F.length<L.value)return!1;const V=F.map(([we,he])=>fme(he.answer,we,x.components[we.slice(0,we.lastIndexOf("_"))],x)),J=V.filter(we=>we).length,ue=V.length-J;z=L.condition==="numCorrect"&&J===L.value||L.condition==="numIncorrect"&&ue===L.value}if(z){const V=t.indexOf(L.to),J=V===-1?j1t(s,L.to):-1;return q=V===-1?J:V,!0}return!1}),b(`/${d}/${Mp(q)}${window.location.search}`)},[e,i,r,S,h,y,s,o,w,b,d,u,l,f,c,x,t]);return{isNextDisabled:g,goToNextStep:T}}function xvt({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=kke(),o=gg(),a=jh(),u=N.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=N.useState(void 0);N.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},500);return()=>{clearInterval(m)}},[]),N.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./__timeout")},[l,f,a,o.uiConfig.timeoutReject]);const h=N.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return _.jsxs(_.Fragment,{children:[_.jsx(gn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&_.jsxs(W0,{mt:"md",title:"Please wait",color:"blue",icon:_.jsx(WJ,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?_.jsxs(W0,{mt:"md",title:"Next button disables soon",color:"yellow",icon:_.jsx(JI,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&_.jsxs(W0,{mt:"md",title:"Next button disabled",color:"red",icon:_.jsx(JI,{}),children:["The next button has timed out and is now disabled.",_.jsx(bi,{justify:"right",mt:"sm",children:_.jsx(gn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function _vt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const wvt=typeof window<"u"?N.useLayoutEffect:N.useEffect;function wa(e,t){wvt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Evt(e,t){e&&_vt(e),wa(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),wa(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),wa(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),wa(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),wa(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),wa(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),wa(`mantine-form:${e}:clear-errors`,t.clearErrors),wa(`mantine-form:${e}:reset`,t.reset),wa(`mantine-form:${e}:validate`,t.validate),wa(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),wa(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),wa(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),wa(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),wa(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),wa(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),wa(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),wa(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Svt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function rW(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Tvt(e){const[t,n]=N.useState(rW(e)),r=N.useRef(t),i=N.useCallback(u=>{n(l=>{const c=rW(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=N.useCallback(()=>i({}),[]),o=N.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=N.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function Rke(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function dme(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function hme(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=Rke(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=dme(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=dme(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Cvt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function pme(e,t,n){typeof n.value=="object"&&(n.value=HE(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function HE(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(HE(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(HE(a),HE(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(HE(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)pme(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||pme(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Dke(e){return typeof e!="string"?[]:e.split(".")}function Yl(e,t){const n=Dke(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function M5(e,t,n){const r=Dke(e);if(r.length===0)return n;const i=HE(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Avt(e,{from:t,to:n},r){const i=Yl(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),M5(e,s,r)}function Ivt(e,t,n,r){const i=Yl(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),M5(e,s,r)}function kvt(e,t,n){const r=Yl(e,n);return Array.isArray(r)?M5(e,r.filter((i,s)=>s!==t),n):n}function Rvt({$values:e,$errors:t,$status:n}){const r=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Cvt(o,a,u)),e.setValues({values:Avt(o,a,e.refValues.current),updateState:!0})},[]),i=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>hme(o,a,u,-1)),e.setValues({values:kvt(o,a,e.refValues.current),updateState:!0})},[]),s=N.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>hme(o,u,l,1)),e.setValues({values:Ivt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var AZ=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const L4=Cm(AZ);function X3(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Dvt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=N.useState(t),[o,a]=N.useState(e),u=N.useRef(t),l=N.useRef(e),c=N.useCallback(S=>{const T=typeof S=="function"?S(u.current):S;u.current=T,n==="controlled"&&s(T)},[]),f=N.useCallback(S=>{const T=typeof S=="function"?S(l.current):S;l.current=T,n==="controlled"&&a(T)},[]),d=N.useCallback(()=>c({}),[]),h=S=>{const T=S?{...S,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),f({})},p=N.useCallback((S,T)=>{c(C=>X3(C,S)===T?C:{...C,[S]:T})},[]),m=N.useCallback((S,T)=>{f(C=>X3(C,S)===T?C:{...C,[S]:T})},[]),g=N.useCallback(S=>X3(u.current,S),[]),y=N.useCallback(S=>f(T=>{if(typeof S!="string")return T;const C=Rke(S,T);return delete C[S],L4(C,T)?T:C}),[]),b=N.useCallback(S=>{if(S){const C=Yl(S,l.current);if(typeof C=="boolean")return C;const I=Yl(S,r.refValues.current),D=Yl(S,r.valuesSnapshot.current);return!L4(I,D)}return Object.keys(l.current).length>0?X3(l.current):!L4(r.refValues.current,r.valuesSnapshot.current)},[]),x=N.useCallback(()=>l.current,[]),w=N.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:b,getDirty:x,getTouched:w}}function Nvt({initialValues:e,onValuesChange:t,mode:n}){const r=N.useRef(!1),[i,s]=N.useState(e||{}),o=N.useRef(i),a=N.useRef(i),u=N.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const b=o.current,x=p instanceof Function?p(o.current):p,w=y?{...b,...x}:x;o.current=w,g&&s(w),t==null||t(w,b),m==null||m.filter(Boolean).forEach(S=>S({updatedValues:w,previousValues:b}))},[t]),l=N.useCallback(p=>{var y;const m=Yl(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const b=o.current,x=M5(p.path,g,o.current);u({values:x,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:x,previousValues:b}))}},[]),c=N.useCallback(p=>{a.current=p},[]),f=N.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=N.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=N.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Pvt({$status:e}){const t=N.useRef({}),n=N.useCallback((i,s)=>{N.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=N.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Yl(i,o.previousValues),value:Yl(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function mme(e,t){return e?`${e}-${t.toString()}`:t.toString()}function gme(e){const t=rW(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function iW(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Yl(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>iW(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||iW(o,t,a,i)),i},r)}function sW(e,t){return gme(typeof e=="function"?e(t):iW(e,t))}function Q3(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=sW(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Ovt="__MANTINE_FORM_INDEX__";function yme(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Ovt}`)):!1:!1}function Nke({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=Tvt(r),p=Nvt({initialValues:n,onValuesChange:l,mode:t}),m=Dvt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=Rvt({$values:p,$errors:h,$status:m}),y=Pvt({$status:m}),[b,x]=N.useState(0),[w,S]=N.useState({}),T=N.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&x(L=>L+1)},[]),C=N.useCallback(L=>{p.initialize(L,()=>t==="uncontrolled"&&x(z=>z+1))},[]),I=N.useCallback((L,z,W)=>{const F=yme(L,a);m.clearFieldDirty(L),m.setFieldTouched(L,!0),!F&&o&&h.clearFieldError(L),p.setFieldValue({path:L,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(L),F?V=>{const J=Q3(L,d,V.updatedValues);J.hasError?h.setFieldError(L,J.error):h.clearFieldError(L)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>S(V=>({...V,[L]:(V[L]||0)+1})):null]})},[l,d]),D=N.useCallback(L=>{const z=p.refValues.current;p.setValues({values:L,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&x(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const F=Yl(W,p.refValues.current),V=Yl(W,z);F!==V&&y.getFieldSubscribers(W).forEach(J=>J({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),k=N.useCallback(()=>{const L=sW(d,p.refValues.current);return h.setErrors(L.errors),L},[d]),P=N.useCallback(L=>{const z=Q3(L,d,p.refValues.current);return z.hasError?h.setFieldError(L,z.error):h.clearFieldError(L),z},[d]),M=(L,{type:z="input",withError:W=!0,withFocus:F=!0,...V}={})=>{const ue={onChange:Svt(we=>I(L,we,{forceUpdate:!1})),"data-path":mme(e,L)};return W&&(ue.error=h.errorsState[L]),z==="checkbox"?ue[t==="controlled"?"checked":"defaultChecked"]=Yl(L,p.refValues.current):ue[t==="controlled"?"value":"defaultValue"]=Yl(L,p.refValues.current),F&&(ue.onFocus=()=>m.setFieldTouched(L,!0),ue.onBlur=()=>{if(yme(L,u)){const we=Q3(L,d,p.refValues.current);we.hasError?h.setFieldError(L,we.error):h.clearFieldError(L)}}),Object.assign(ue,f==null?void 0:f({inputProps:ue,field:L,options:{type:z,withError:W,withFocus:F,...V},form:Q}))},$=(L,z)=>W=>{W==null||W.preventDefault();const F=k();F.hasErrors?z==null||z(F.errors,p.refValues.current,W):L==null||L(c(p.refValues.current),W)},B=L=>c(L||p.refValues.current),q=N.useCallback(L=>{L.preventDefault(),T()},[]),H=N.useCallback(L=>L?!Q3(L,d,p.refValues.current).hasError:!sW(d,p.refValues.current).hasErrors,[d]),Y=L=>`${b}-${L}-${w[L]||0}`,K=N.useCallback(L=>document.querySelector(`[data-path="${mme(e,L)}"]`),[]),Q={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:C,setValues:D,setFieldValue:I,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:T,validate:k,validateField:P,getInputProps:M,onSubmit:$,onReset:q,isValid:H,getTransformedValues:B,key:Y,getInputNode:K};return Evt(e,Q),Q}function $vt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Mvt(e){return $vt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function Pke(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Lvt=new URLSearchParams(window.location.search),Fvt=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=Lvt.get(r.paramCapture):r.type==="iframe"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(o=>[o,""]))),n={...n,[r.id]:s}}}),{...n}},Bvt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(i=>i!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?Pke(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function jvt(e,t,n){const[r,i]=N.useState(null),s=Nke({initialValues:Fvt(e,n),validate:Bvt(e)});return N.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function X_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=Pke(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Uvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return _.jsx(Gl.Group,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ie,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ie,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Cu,{text:s,required:o})})]}),description:u,...n,error:X_(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(bi,{mt:"xs",children:l.map(c=>_.jsx(Gl,{disabled:t,value:c.value,label:c.label},c.value))})})}function zvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return _.jsx(T2,{disabled:t,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ie,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ie,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Cu,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:X_(e,n,c)})}function Vvt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(Gs.Wrapper,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(Ie,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(Ie,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Cu,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&_.jsx(xh,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(xh.Item,{children:a},a)):_.jsx(xh.Item,{children:t.value})})})}function Oke({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f}=e,d=u.map(h=>typeof h=="string"?{value:h,label:h}:h);return _.jsx(hg.Group,{name:`radioInput${e.id}`,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ie,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ie,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Cu,{text:o,required:a})})]}),description:f,...n,error:X_(e,n,d),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(bi,{mt:"md",gap:"lg",style:{display:"flex",alignItems:"flex-end",justifyContent:s?"space-around":"inherit"},children:[l?_.jsx(nt,{children:l}):null,d.map(h=>_.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[_.jsx(nt,{children:h.label}),_.jsx(hg,{disabled:t,value:h.value,label:h.label,styles:{label:{display:"none"}}})]},h.label)),_.jsx(nt,{children:c})]})},e.id)}function Hvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(Oke,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function qvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(EJ,{disabled:t,placeholder:l,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ie,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ie,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Cu,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:X_(e,n)})}function Wvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=N.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=X_(e,n);return _.jsx(Gs.Wrapper,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ie,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ie,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Cu,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(v5,{disabled:t,marks:a,min:l,max:c,...n,h:40})})}function Gvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(O0,{disabled:t,placeholder:s,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ie,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ie,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Cu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:X_(e,n)})}function Yvt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(cJ,{disabled:t,placeholder:s,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(Ie,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(Ie,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Cu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:X_(e,n)})}function Kvt({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return _.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>_.jsx(Gl,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function Xvt({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return _.jsx(hg.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:_.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>_.jsx(hg,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function Qvt({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=ll(),a=wc(),{answerOptions:u,questionOptions:l,prompt:c,required:f}=e,h=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(x=>({value:x,label:x})):u.map(x=>typeof x=="string"?{value:x,label:x}:x),p=l.map(x=>typeof x=="string"?{value:x,label:x}:x),m=(x,w)=>{const S={type:"radio",questionKey:w,val:x,responseId:e.id};a(s(S))},g=(x,w,S)=>{const T=x.target.checked,C={questionKey:w,responseId:e.id,value:S.value,label:S.label,isChecked:T,choiceOptions:h};a(o(C))},y=h.length,b=p.length;return _.jsxs(_.Fragment,{children:[_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:0,children:[i&&_.jsx(Ie,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(Ie,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Cu,{text:c,required:f})})]}),_.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr",margin:"40px 100px 100px 100px"},children:[_.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${y}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:h.map((x,w)=>_.jsx(nt,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:x.label},`choice-${w}-label`))}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${b}, 1fr)`},children:p.map((x,w)=>_.jsx(nt,{style:{height:"60px",display:"flex",alignItems:"center",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(w+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,paddingLeft:"10px"},children:x.label},`question-${w}-label`))}),_.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${b},1fr)`},children:p.map((x,w)=>_.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(w+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?_.jsx(Xvt,{disabled:r,idx:w,question:x,answer:t,_choices:h,_n:y,onChange:m,response:e}):_.jsx(Kvt,{disabled:r,idx:w,question:x,answer:t,_choices:h,_n:y,onChange:g})},`question-${w}`))})]})]})}function Jvt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=Pv(),u=gg().uiConfig.enumerateQuestions??!1,l=N.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(Ie,{mb:"md",children:[e.type==="numerical"&&_.jsx(qvt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(Gvt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(Yvt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(Hvt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(zvt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(Wvt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(Oke,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(Uvt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(Vvt,{response:e,answer:i,index:r,enumerateQuestions:u}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&_.jsx(Qvt,{disabled:l,response:e,answer:i,index:r,enumerateQuestions:u})]})}function R$({config:e,location:t,status:n,style:r}){var L;const{storageEngine:i}=fo(),s=wc(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=ll(),c=xd(),f=_d(),d=n==null?void 0:n.answer,h=K_(),p=jh(),m=e,g=N.useMemo(()=>{var z;return((z=m==null?void 0:m.response)==null?void 0:z.filter(W=>W.location?W.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),y=N.useMemo(()=>g.map(z=>({...z,required:z.required===void 0?!0:z.required})),[g]),b=jvt(y,c,d||{}),[x,w]=N.useState(void 0),S=vi(z=>z.iframeAnswers),T=vi(z=>z.iframeProvenance),C=vi(z=>z.matrixAnswers),I=(m==null?void 0:m.provideFeedback)&&(((L=m==null?void 0:m.correctAnswer)==null?void 0:L.length)||0)>0,D=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[k,P]=N.useState(0),M=(m==null?void 0:m.trainingAttempts)||2,[$,B]=N.useState(!1),q=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");N.useEffect(()=>{const z=y.find(W=>W.type==="iframe");if(S&&z){const W=z.id;b.setValues({...b.values,[W]:S[W]})}},[S]),N.useEffect(()=>{T&&w(T)},[T]),N.useEffect(()=>{const z=y.filter(W=>W.type==="matrix-radio"||W.type==="matrix-checkbox");if(C&&z.length>0){const W={...b.values};z.forEach(F=>{const{id:V}=F;W[V]={...b.getInputProps(V).value,...C[V]}}),b.setValues(W)}},[C]),N.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:b.isValid(),values:G0(b.values),provenanceGraph:x}))},[b.values,f,c,t,s,o,x]);const[H,Y]=N.useState(Object.fromEntries(y.map(z=>[z.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),K=(z,W,F,V,J)=>{Y(ue=>({...ue,[z]:{visible:W,title:F,message:V,color:J}}))},Q=()=>{const z=k+1;P(z);const W=Object.fromEntries(y.map(F=>{var ue,we;const V=(we=(ue=m.correctAnswer)==null?void 0:ue.find(he=>he.id===F.id))==null?void 0:we.answer,J=b.values[F.id];return[F.id,Array.isArray(J)?typeof V=="string"?J.length===1&&V===J[0]:J.length===V.length&&J.every(he=>V.includes(he)):V===J]}));I&&(y.forEach(F=>{var V;if(W[F.id]&&!((V=H[F.id])!=null&&V.message.includes("You've failed to answer this question correctly")))K(F.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:F.id,answer:b.values[F.id]}));let J="";M===-1?J="Please try again.":z>=M?(J=`You didn't answer this question correctly after ${M} attempts. ${D?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!D&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./__trainingFailed")},5e3)})):M-z===1?J="Please try again. You have 1 attempt left.":J=`Please try again. You have ${M-z} attempts left.`,K(F.id,!0,"Incorrect Answer",J,"red")}}),B(D&&z>=M||Object.values(W).every(F=>F)&&z<=M))};return _.jsxs("div",{style:r,children:[y.map((z,W)=>{var V,J;const F=(J=(V=m.correctAnswer)==null?void 0:V.find(ue=>ue.id===z.id))==null?void 0:J.answer;return _.jsx(ti.Fragment,{children:z.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(Jvt,{storedAnswer:d?d[z.id]:void 0,answer:{...b.getInputProps(z.id,{type:z.type==="checkbox"?"checkbox":"input"})},response:z,index:W+1}),H[z.id].visible&&_.jsxs(W0,{mb:"md",title:H[z.id].title,color:H[z.id].color,children:[H[z.id].message," ",H[z.id].message.includes("Please try again")&&_.jsxs(_.Fragment,{children:[_.jsx("br",{}),_.jsx("br",{}),"If you're unsure"," ",_.jsx(kv,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),_.jsx("br",{}),_.jsx("br",{}),k>=M&&M>=0&&F&&` The correct answer was: ${F}.`]})]})},`${z.id}-${c}`)}),_.jsxs(bi,{justify:"right",gap:"xs",children:[I&&q&&_.jsx(gn,{onClick:()=>Q(),disabled:!b.isValid()||k>=M&&M>=0,children:"Check Answer"}),q&&_.jsx(xvt,{disabled:I&&!$||!b.isValid(),label:m.nextButtonText||"Next"})]})]})}const cA="@REVISIT_COMMS",Zvt={minHeight:"500px",width:"100%",border:0};function ebt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=ll(),r=wc(),i=rke(),s=N.useRef(null),o=N.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=_d(),u=jh(),l=N.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${cA}/${c}`,iframeId:o,message:f},"*")},[s,o]);return N.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${cA}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${cA}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${cA}/ANSWERS`:r(t(d.message));break;case`${cA}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${ul}${e.path}?trialid=${a}&id=${o}`,style:Zvt})}async function IZ(e){const n=await(await fetch(`${ul}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function tbt(e){const t=await fetch(`${ul}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function j1({email:e,path:t}){const n=Nv();return _.jsxs(dg,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(zs,{order:2,children:_.jsx(nt,{span:!0,c:"orange",children:"404"})}),_.jsxs(nt,{children:[_.jsx(nt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(Zc,{h:"lg"}),_.jsxs(xh,{children:[_.jsx(xh.Item,{children:_.jsx(nt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(xh.Item,{children:_.jsxs(nt,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(kv,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const nbt={maxWidth:"100%"};function rbt({currentConfig:e}){const t={...nbt,...e.style},[n,r]=N.useState(!0),[i,s]=N.useState(!1);return N.useEffect(()=>{async function o(){const a=await IZ(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Dv,{mx:"auto",src:`${ul}${e.path}`,style:t}):_.jsx(j1,{path:e.path})}function Y0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function ibt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function O2(e){let t,n,r;e.length!==2?(t=Y0,n=(a,u)=>Y0(e(a),u),r=(a,u)=>e(a)-u):(t=e===Y0||e===ibt?e:sbt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function sbt(){return 0}function $ke(e){return e===null?NaN:+e}function*obt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Mke=O2(Y0),U1=Mke.right,abt=Mke.left;O2($ke).center;function ubt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function lbt(e,t){const n=ubt(e,t);return n&&Math.sqrt(n)}function bR(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class sl{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class vme extends Map{constructor(t,n=Bke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(oW(this,t))}has(t){return super.has(oW(this,t))}set(t,n){return super.set(Lke(this,t),n)}delete(t){return super.delete(Fke(this,t))}}class D$ extends Set{constructor(t,n=Bke){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(oW(this,t))}add(t){return super.add(Lke(this,t))}delete(t){return super.delete(Fke(this,t))}}function oW({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Lke({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Fke({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Bke(e){return e!==null&&typeof e=="object"?e.valueOf():e}function cbt(e,t){return Array.from(t,n=>e[n])}function fbt(e=Y0){if(e===Y0)return jke;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function jke(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const dbt=Math.sqrt(50),hbt=Math.sqrt(10),pbt=Math.sqrt(2);function N$(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=dbt?10:s>=hbt?5:s>=pbt?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?N$(e,t,n*2):[a,u,l]}function aW(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?N$(t,e,n):N$(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function uW(e,t,n){return t=+t,e=+e,n=+n,N$(e,t,n)[2]}function z1(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?uW(t,e,n):uW(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function K0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function lW(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Uke(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?jke:fbt(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));Uke(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(fA(e,n,t),i(e[r],s)>0&&fA(e,n,r);o<a;){for(fA(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?fA(e,n,a):(++a,fA(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function fA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function cW(e,t,n){if(e=Float64Array.from(obt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return lW(e);if(t>=1)return K0(e);var r,i=(r-1)*t,s=Math.floor(i),o=K0(Uke(e,s).subarray(0,s+1)),a=lW(e.subarray(s+1));return o+(a-o)*(i-s)}}function zke(e,t,n=$ke){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function mbt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Vke(e,t){return cW(e,.5,t)}function*gbt(e){for(const t of e)yield*t}function Hke(e){return Array.from(gbt(e))}function Kl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function qke(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function ybt(e,...t){e=new D$(e),t=t.map(vbt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function vbt(e){return e instanceof D$?e:new D$(e)}function bbt(...e){const t=new D$;for(const n of e)for(const r of n)t.add(r);return t}var xbt={value:()=>{}};function L5(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new F4(n)}function F4(e){this._=e}function _bt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}F4.prototype=L5.prototype={constructor:F4,on:function(e,t){var n=this._,r=_bt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=wbt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=bme(n[i],e.name,t);else if(t==null)for(i in n)n[i]=bme(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new F4(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function wbt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function bme(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=xbt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var fW="http://www.w3.org/1999/xhtml";const xme={svg:"http://www.w3.org/2000/svg",xhtml:fW,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function F5(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),xme.hasOwnProperty(t)?{space:xme[t],local:e}:e}function Ebt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===fW&&t.documentElement.namespaceURI===fW?t.createElement(e):t.createElementNS(n,e)}}function Sbt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Wke(e){var t=F5(e);return(t.local?Sbt:Ebt)(t)}function Tbt(){}function kZ(e){return e==null?Tbt:function(){return this.querySelector(e)}}function Cbt(e){typeof e!="function"&&(e=kZ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new cl(r,this._parents)}function Gke(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Abt(){return[]}function Yke(e){return e==null?Abt:function(){return this.querySelectorAll(e)}}function Ibt(e){return function(){return Gke(e.apply(this,arguments))}}function kbt(e){typeof e=="function"?e=Ibt(e):e=Yke(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new cl(r,i)}function Kke(e){return function(){return this.matches(e)}}function Xke(e){return function(t){return t.matches(e)}}var Rbt=Array.prototype.find;function Dbt(e){return function(){return Rbt.call(this.children,e)}}function Nbt(){return this.firstElementChild}function Pbt(e){return this.select(e==null?Nbt:Dbt(typeof e=="function"?e:Xke(e)))}var Obt=Array.prototype.filter;function $bt(){return Array.from(this.children)}function Mbt(e){return function(){return Obt.call(this.children,e)}}function Lbt(e){return this.selectAll(e==null?$bt:Mbt(typeof e=="function"?e:Xke(e)))}function Fbt(e){typeof e!="function"&&(e=Kke(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new cl(r,this._parents)}function Qke(e){return new Array(e.length)}function Bbt(){return new cl(this._enter||this._groups.map(Qke),this._parents)}function P$(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}P$.prototype={constructor:P$,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function jbt(e){return function(){return e}}function Ubt(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new P$(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function zbt(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new P$(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Vbt(e){return e.__data__}function Hbt(e,t){if(!arguments.length)return Array.from(this,Vbt);var n=t?zbt:Ubt,r=this._parents,i=this._groups;typeof e!="function"&&(e=jbt(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=qbt(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var b=0,x=0,w,S;b<p;++b)if(w=m[b]){for(b>=x&&(x=b+1);!(S=g[x])&&++x<p;);w._next=S||null}}return o=new cl(o,r),o._enter=a,o._exit=u,o}function qbt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Wbt(){return new cl(this._exit||this._groups.map(Qke),this._parents)}function Gbt(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Ybt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new cl(a,this._parents)}function Kbt(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Xbt(e){e||(e=Qbt);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new cl(i,this._parents).order()}function Qbt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jbt(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Zbt(){return Array.from(this)}function ext(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function txt(){let e=0;for(const t of this)++e;return e}function nxt(){return!this.node()}function rxt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function ixt(e){return function(){this.removeAttribute(e)}}function sxt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oxt(e,t){return function(){this.setAttribute(e,t)}}function axt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function uxt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function lxt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function cxt(e,t){var n=F5(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?sxt:ixt:typeof t=="function"?n.local?lxt:uxt:n.local?axt:oxt)(n,t))}function Jke(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function fxt(e){return function(){this.style.removeProperty(e)}}function dxt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function hxt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function pxt(e,t,n){return arguments.length>1?this.each((t==null?fxt:typeof t=="function"?hxt:dxt)(e,t,n??"")):oT(this.node(),e)}function oT(e,t){return e.style.getPropertyValue(t)||Jke(e).getComputedStyle(e,null).getPropertyValue(t)}function mxt(e){return function(){delete this[e]}}function gxt(e,t){return function(){this[e]=t}}function yxt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function vxt(e,t){return arguments.length>1?this.each((t==null?mxt:typeof t=="function"?yxt:gxt)(e,t)):this.node()[e]}function Zke(e){return e.trim().split(/^|\s+/)}function RZ(e){return e.classList||new eRe(e)}function eRe(e){this._node=e,this._names=Zke(e.getAttribute("class")||"")}eRe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function tRe(e,t){for(var n=RZ(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function nRe(e,t){for(var n=RZ(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function bxt(e){return function(){tRe(this,e)}}function xxt(e){return function(){nRe(this,e)}}function _xt(e,t){return function(){(t.apply(this,arguments)?tRe:nRe)(this,e)}}function wxt(e,t){var n=Zke(e+"");if(arguments.length<2){for(var r=RZ(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?_xt:t?bxt:xxt)(n,t))}function Ext(){this.textContent=""}function Sxt(e){return function(){this.textContent=e}}function Txt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Cxt(e){return arguments.length?this.each(e==null?Ext:(typeof e=="function"?Txt:Sxt)(e)):this.node().textContent}function Axt(){this.innerHTML=""}function Ixt(e){return function(){this.innerHTML=e}}function kxt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Rxt(e){return arguments.length?this.each(e==null?Axt:(typeof e=="function"?kxt:Ixt)(e)):this.node().innerHTML}function Dxt(){this.nextSibling&&this.parentNode.appendChild(this)}function Nxt(){return this.each(Dxt)}function Pxt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Oxt(){return this.each(Pxt)}function $xt(e){var t=typeof e=="function"?e:Wke(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Mxt(){return null}function Lxt(e,t){var n=typeof e=="function"?e:Wke(e),r=t==null?Mxt:typeof t=="function"?t:kZ(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Fxt(){var e=this.parentNode;e&&e.removeChild(this)}function Bxt(){return this.each(Fxt)}function jxt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Uxt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function zxt(e){return this.select(e?Uxt:jxt)}function Vxt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Hxt(e){return function(t){e.call(this,t,this.__data__)}}function qxt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Wxt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Gxt(e,t,n){return function(){var r=this.__on,i,s=Hxt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Yxt(e,t,n){var r=qxt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Gxt:Wxt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function rRe(e,t,n){var r=Jke(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Kxt(e,t){return function(){return rRe(this,e,t)}}function Xxt(e,t){return function(){return rRe(this,e,t.apply(this,arguments))}}function Qxt(e,t){return this.each((typeof t=="function"?Xxt:Kxt)(e,t))}function*Jxt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var DZ=[null];function cl(e,t){this._groups=e,this._parents=t}function rN(){return new cl([[document.documentElement]],DZ)}function Zxt(){return this}cl.prototype=rN.prototype={constructor:cl,select:Cbt,selectAll:kbt,selectChild:Pbt,selectChildren:Lbt,filter:Fbt,data:Hbt,enter:Bbt,exit:Wbt,join:Gbt,merge:Ybt,selection:Zxt,order:Kbt,sort:Xbt,call:Jbt,nodes:Zbt,node:ext,size:txt,empty:nxt,each:rxt,attr:cxt,style:pxt,property:vxt,classed:wxt,text:Cxt,html:Rxt,raise:Nxt,lower:Oxt,append:$xt,insert:Lxt,remove:Bxt,clone:zxt,datum:Vxt,on:Yxt,dispatch:Qxt,[Symbol.iterator]:Jxt};function Qr(e){return typeof e=="string"?new cl([[document.querySelector(e)]],[document.documentElement]):new cl([[e]],DZ)}function e_t(e){let t;for(;t=e.sourceEvent;)e=t;return e}function O$(e,t){if(e=e_t(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function iRe(e){return typeof e=="string"?new cl([document.querySelectorAll(e)],[document.documentElement]):new cl([Gke(e)],DZ)}const dW={capture:!0,passive:!1};function hW(e){e.preventDefault(),e.stopImmediatePropagation()}function t_t(e){var t=e.document.documentElement,n=Qr(e).on("dragstart.drag",hW,dW);"onselectstart"in t?n.on("selectstart.drag",hW,dW):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function n_t(e,t){var n=e.document.documentElement,r=Qr(e).on("dragstart.drag",null);t&&(r.on("click.drag",hW,dW),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function $2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function iN(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Lv(){}var Qx=.7,aT=1/Qx,gS="\\s*([+-]?\\d+)\\s*",xR="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",r_t=/^#([0-9a-f]{3,8})$/,i_t=new RegExp(`^rgb\\(${gS},${gS},${gS}\\)$`),s_t=new RegExp(`^rgb\\(${qp},${qp},${qp}\\)$`),o_t=new RegExp(`^rgba\\(${gS},${gS},${gS},${xR}\\)$`),a_t=new RegExp(`^rgba\\(${qp},${qp},${qp},${xR}\\)$`),u_t=new RegExp(`^hsl\\(${xR},${qp},${qp}\\)$`),l_t=new RegExp(`^hsla\\(${xR},${qp},${qp},${xR}\\)$`),_me={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$2(Lv,Jx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:wme,formatHex:wme,formatHex8:c_t,formatHsl:f_t,formatRgb:Eme,toString:Eme});function wme(){return this.rgb().formatHex()}function c_t(){return this.rgb().formatHex8()}function f_t(){return sRe(this).formatHsl()}function Eme(){return this.rgb().formatRgb()}function Jx(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=r_t.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Sme(t):n===3?new ua(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?J3(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?J3(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=i_t.exec(e))?new ua(t[1],t[2],t[3],1):(t=s_t.exec(e))?new ua(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=o_t.exec(e))?J3(t[1],t[2],t[3],t[4]):(t=a_t.exec(e))?J3(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=u_t.exec(e))?Ame(t[1],t[2]/100,t[3]/100,1):(t=l_t.exec(e))?Ame(t[1],t[2]/100,t[3]/100,t[4]):_me.hasOwnProperty(e)?Sme(_me[e]):e==="transparent"?new ua(NaN,NaN,NaN,0):null}function Sme(e){return new ua(e>>16&255,e>>8&255,e&255,1)}function J3(e,t,n,r){return r<=0&&(e=t=n=NaN),new ua(e,t,n,r)}function NZ(e){return e instanceof Lv||(e=Jx(e)),e?(e=e.rgb(),new ua(e.r,e.g,e.b,e.opacity)):new ua}function V1(e,t,n,r){return arguments.length===1?NZ(e):new ua(e,t,n,r??1)}function ua(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}$2(ua,V1,iN(Lv,{brighter(e){return e=e==null?aT:Math.pow(aT,e),new ua(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qx:Math.pow(Qx,e),new ua(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ua(Nx(this.r),Nx(this.g),Nx(this.b),$$(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Tme,formatHex:Tme,formatHex8:d_t,formatRgb:Cme,toString:Cme}));function Tme(){return`#${mx(this.r)}${mx(this.g)}${mx(this.b)}`}function d_t(){return`#${mx(this.r)}${mx(this.g)}${mx(this.b)}${mx((isNaN(this.opacity)?1:this.opacity)*255)}`}function Cme(){const e=$$(this.opacity);return`${e===1?"rgb(":"rgba("}${Nx(this.r)}, ${Nx(this.g)}, ${Nx(this.b)}${e===1?")":`, ${e})`}`}function $$(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Nx(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function mx(e){return e=Nx(e),(e<16?"0":"")+e.toString(16)}function Ame(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new sh(e,t,n,r)}function sRe(e){if(e instanceof sh)return new sh(e.h,e.s,e.l,e.opacity);if(e instanceof Lv||(e=Jx(e)),!e)return new sh;if(e instanceof sh)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new sh(o,a,u,e.opacity)}function M$(e,t,n,r){return arguments.length===1?sRe(e):new sh(e,t,n,r??1)}function sh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$2(sh,M$,iN(Lv,{brighter(e){return e=e==null?aT:Math.pow(aT,e),new sh(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qx:Math.pow(Qx,e),new sh(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ua(FU(e>=240?e-240:e+120,i,r),FU(e,i,r),FU(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new sh(Ime(this.h),Z3(this.s),Z3(this.l),$$(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$$(this.opacity);return`${e===1?"hsl(":"hsla("}${Ime(this.h)}, ${Z3(this.s)*100}%, ${Z3(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ime(e){return e=(e||0)%360,e<0?e+360:e}function Z3(e){return Math.max(0,Math.min(1,e||0))}function FU(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const oRe=Math.PI/180,aRe=180/Math.PI,L$=18,uRe=.96422,lRe=1,cRe=.82521,fRe=4/29,yS=6/29,dRe=3*yS*yS,h_t=yS*yS*yS;function hRe(e){if(e instanceof Wp)return new Wp(e.l,e.a,e.b,e.opacity);if(e instanceof $0)return pRe(e);e instanceof ua||(e=NZ(e));var t=zU(e.r),n=zU(e.g),r=zU(e.b),i=BU((.2225045*t+.7168786*n+.0606169*r)/lRe),s,o;return t===n&&n===r?s=o=i:(s=BU((.4360747*t+.3850649*n+.1430804*r)/uRe),o=BU((.0139322*t+.0971045*n+.7141733*r)/cRe)),new Wp(116*i-16,500*(s-i),200*(i-o),e.opacity)}function F$(e,t,n,r){return arguments.length===1?hRe(e):new Wp(e,t,n,r??1)}function Wp(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}$2(Wp,F$,iN(Lv,{brighter(e){return new Wp(this.l+L$*(e??1),this.a,this.b,this.opacity)},darker(e){return new Wp(this.l-L$*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=uRe*jU(t),e=lRe*jU(e),n=cRe*jU(n),new ua(UU(3.1338561*t-1.6168667*e-.4906146*n),UU(-.9787684*t+1.9161415*e+.033454*n),UU(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function BU(e){return e>h_t?Math.pow(e,1/3):e/dRe+fRe}function jU(e){return e>yS?e*e*e:dRe*(e-fRe)}function UU(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function zU(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function p_t(e){if(e instanceof $0)return new $0(e.h,e.c,e.l,e.opacity);if(e instanceof Wp||(e=hRe(e)),e.a===0&&e.b===0)return new $0(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*aRe;return new $0(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function B$(e,t,n,r){return arguments.length===1?p_t(e):new $0(e,t,n,r??1)}function $0(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function pRe(e){if(isNaN(e.h))return new Wp(e.l,0,0,e.opacity);var t=e.h*oRe;return new Wp(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}$2($0,B$,iN(Lv,{brighter(e){return new $0(this.h,this.c,this.l+L$*(e??1),this.opacity)},darker(e){return new $0(this.h,this.c,this.l-L$*(e??1),this.opacity)},rgb(){return pRe(this).rgb()}}));var mRe=-.14861,PZ=1.78277,OZ=-.29227,B5=-.90649,_R=1.97294,kme=_R*B5,Rme=_R*PZ,Dme=PZ*OZ-B5*mRe;function m_t(e){if(e instanceof Px)return new Px(e.h,e.s,e.l,e.opacity);e instanceof ua||(e=NZ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Dme*r+kme*t-Rme*n)/(Dme+kme-Rme),s=r-i,o=(_R*(n-i)-OZ*s)/B5,a=Math.sqrt(o*o+s*s)/(_R*i*(1-i)),u=a?Math.atan2(o,s)*aRe-120:NaN;return new Px(u<0?u+360:u,a,i,e.opacity)}function pW(e,t,n,r){return arguments.length===1?m_t(e):new Px(e,t,n,r??1)}function Px(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}$2(Px,pW,iN(Lv,{brighter(e){return e=e==null?aT:Math.pow(aT,e),new Px(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qx:Math.pow(Qx,e),new Px(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*oRe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ua(255*(t+n*(mRe*r+PZ*i)),255*(t+n*(OZ*r+B5*i)),255*(t+n*(_R*r)),this.opacity)}}));function gRe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function yRe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return gRe((n-r/t)*t,o,i,s,a)}}function vRe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return gRe((n-r/t)*t,i,s,o,a)}}const j5=e=>()=>e;function bRe(e,t){return function(n){return e+n*t}}function g_t(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function U5(e,t){var n=t-e;return n?bRe(e,n>180||n<-180?n-360*Math.round(n/360):n):j5(isNaN(e)?t:e)}function y_t(e){return(e=+e)==1?la:function(t,n){return n-t?g_t(t,n,e):j5(isNaN(t)?n:t)}}function la(e,t){var n=t-e;return n?bRe(e,n):j5(isNaN(e)?t:e)}const wR=function e(t){var n=y_t(t);function r(i,s){var o=n((i=V1(i)).r,(s=V1(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=la(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function xRe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=V1(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var v_t=xRe(yRe),b_t=xRe(vRe);function $Z(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function _Re(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function x_t(e,t){return(_Re(t)?$Z:wRe)(e,t)}function wRe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=zg(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function ERe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function qf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function SRe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=zg(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var mW=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,VU=new RegExp(mW.source,"g");function __t(e){return function(){return e}}function w_t(e){return function(t){return e(t)+""}}function MZ(e,t){var n=mW.lastIndex=VU.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=mW.exec(e))&&(i=VU.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:qf(r,i)})),n=VU.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?w_t(u[0].x):__t(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function zg(e,t){var n=typeof t,r;return t==null||n==="boolean"?j5(t):(n==="number"?qf:n==="string"?(r=Jx(t))?(t=r,wR):MZ:t instanceof Jx?wR:t instanceof Date?ERe:_Re(t)?$Z:Array.isArray(t)?wRe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?SRe:qf)(e,t)}function E_t(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function S_t(e,t){var n=U5(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function sN(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Nme=180/Math.PI,gW={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function TRe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*Nme,skewX:Math.atan(u)*Nme,scaleX:o,scaleY:a}}var eO;function T_t(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?gW:TRe(t.a,t.b,t.c,t.d,t.e,t.f)}function C_t(e){return e==null||(eO||(eO=document.createElementNS("http://www.w3.org/2000/svg","g")),eO.setAttribute("transform",e),!(e=eO.transform.baseVal.consolidate()))?gW:(e=e.matrix,TRe(e.a,e.b,e.c,e.d,e.e,e.f))}function CRe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:qf(l,f)},{i:m-2,x:qf(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:qf(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:qf(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:qf(l,f)},{i:m-2,x:qf(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var ARe=CRe(T_t,"px, ","px)","deg)"),IRe=CRe(C_t,", ",")",")"),A_t=1e-12;function Pme(e){return((e=Math.exp(e))+1/e)/2}function I_t(e){return((e=Math.exp(e))-1/e)/2}function k_t(e){return((e=Math.exp(2*e))-1)/(e+1)}const R_t=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<A_t)y=Math.log(d/l)/t,g=function(C){return[a+C*h,u+C*p,l*Math.exp(t*C*y)]};else{var b=Math.sqrt(m),x=(d*d-l*l+r*m)/(2*l*n*b),w=(d*d-l*l-r*m)/(2*d*n*b),S=Math.log(Math.sqrt(x*x+1)-x),T=Math.log(Math.sqrt(w*w+1)-w);y=(T-S)/t,g=function(C){var I=C*y,D=Pme(S),k=l/(n*b)*(D*k_t(t*I+S)-I_t(S));return[a+k*h,u+k*p,l*D/Pme(t*I+S)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function kRe(e){return function(t,n){var r=e((t=M$(t)).h,(n=M$(n)).h),i=la(t.s,n.s),s=la(t.l,n.l),o=la(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const D_t=kRe(U5);var N_t=kRe(la);function P_t(e,t){var n=la((e=F$(e)).l,(t=F$(t)).l),r=la(e.a,t.a),i=la(e.b,t.b),s=la(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function RRe(e){return function(t,n){var r=e((t=B$(t)).h,(n=B$(n)).h),i=la(t.c,n.c),s=la(t.l,n.l),o=la(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const O_t=RRe(U5);var $_t=RRe(la);function DRe(e){return function t(n){n=+n;function r(i,s){var o=e((i=pW(i)).h,(s=pW(s)).h),a=la(i.s,s.s),u=la(i.l,s.l),l=la(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const M_t=DRe(U5);var L_t=DRe(la);function LZ(e,t){t===void 0&&(t=e,e=zg);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function F_t(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const B_t=Object.freeze(Object.defineProperty({__proto__:null,interpolate:zg,interpolateArray:x_t,interpolateBasis:yRe,interpolateBasisClosed:vRe,interpolateCubehelix:M_t,interpolateCubehelixLong:L_t,interpolateDate:ERe,interpolateDiscrete:E_t,interpolateHcl:O_t,interpolateHclLong:$_t,interpolateHsl:D_t,interpolateHslLong:N_t,interpolateHue:S_t,interpolateLab:P_t,interpolateNumber:qf,interpolateNumberArray:$Z,interpolateObject:SRe,interpolateRgb:wR,interpolateRgbBasis:v_t,interpolateRgbBasisClosed:b_t,interpolateRound:sN,interpolateString:MZ,interpolateTransformCss:ARe,interpolateTransformSvg:IRe,interpolateZoom:R_t,piecewise:LZ,quantize:F_t},Symbol.toStringTag,{value:"Module"}));var uT=0,iI=0,dA=0,NRe=1e3,j$,sI,U$=0,Zx=0,z5=0,ER=typeof performance=="object"&&performance.now?performance:Date,PRe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function V5(){return Zx||(PRe(j_t),Zx=ER.now()+z5)}function j_t(){Zx=0}function SR(){this._call=this._time=this._next=null}SR.prototype=FZ.prototype={constructor:SR,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?V5():+n)+(t==null?0:+t),!this._next&&sI!==this&&(sI?sI._next=this:j$=this,sI=this),this._call=e,this._time=n,yW()},stop:function(){this._call&&(this._call=null,this._time=1/0,yW())}};function FZ(e,t,n){var r=new SR;return r.restart(e,t,n),r}function U_t(){V5(),++uT;for(var e=j$,t;e;)(t=Zx-e._time)>=0&&e._call.call(void 0,t),e=e._next;--uT}function Ome(){Zx=(U$=ER.now())+z5,uT=iI=0;try{U_t()}finally{uT=0,V_t(),Zx=0}}function z_t(){var e=ER.now(),t=e-U$;t>NRe&&(z5-=t,U$=e)}function V_t(){for(var e,t=j$,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:j$=n);sI=e,yW(r)}function yW(e){if(!uT){iI&&(iI=clearTimeout(iI));var t=e-Zx;t>24?(e<1/0&&(iI=setTimeout(Ome,e-ER.now()-z5)),dA&&(dA=clearInterval(dA))):(dA||(U$=ER.now(),dA=setInterval(z_t,NRe)),uT=1,PRe(Ome))}}function $me(e,t,n){var r=new SR;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function H_t(e,t,n){var r=new SR,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?V5():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var q_t=L5("start","end","cancel","interrupt"),W_t=[],ORe=0,Mme=1,vW=2,B4=3,Lme=4,bW=5,j4=6;function H5(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;G_t(e,n,{name:t,index:r,group:i,on:q_t,tween:W_t,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ORe})}function BZ(e,t){var n=zh(e,t);if(n.state>ORe)throw new Error("too late; already scheduled");return n}function Rm(e,t){var n=zh(e,t);if(n.state>B4)throw new Error("too late; already running");return n}function zh(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function G_t(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=FZ(s,0,n.time);function s(l){n.state=Mme,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Mme)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===B4)return $me(o);h.state===Lme?(h.state=j4,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=j4,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if($me(function(){n.state===B4&&(n.state=Lme,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=vW,n.on.call("start",e,e.__data__,n.index,n.group),n.state===vW){for(n.state=B4,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=bW,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===bW&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=j4,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function xW(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>vW&&r.state<bW,r.state=j4,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Y_t(e){return this.each(function(){xW(this,e)})}function K_t(e,t){var n,r;return function(){var i=Rm(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function X_t(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Rm(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Q_t(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=zh(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?K_t:X_t)(n,e,t))}function jZ(e,t,n){var r=e._id;return e.each(function(){var i=Rm(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return zh(i,r).value[t]}}function $Re(e,t){var n;return(typeof t=="number"?qf:t instanceof Jx?wR:(n=Jx(t))?(t=n,wR):MZ)(e,t)}function J_t(e){return function(){this.removeAttribute(e)}}function Z_t(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ewt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function twt(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function nwt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function rwt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function iwt(e,t){var n=F5(e),r=n==="transform"?IRe:$Re;return this.attrTween(e,typeof t=="function"?(n.local?rwt:nwt)(n,r,jZ(this,"attr."+e,t)):t==null?(n.local?Z_t:J_t)(n):(n.local?twt:ewt)(n,r,t))}function swt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function owt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function awt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&owt(e,s)),n}return i._value=t,i}function uwt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&swt(e,s)),n}return i._value=t,i}function lwt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=F5(e);return this.tween(n,(r.local?awt:uwt)(r,t))}function cwt(e,t){return function(){BZ(this,e).delay=+t.apply(this,arguments)}}function fwt(e,t){return t=+t,function(){BZ(this,e).delay=t}}function dwt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?cwt:fwt)(t,e)):zh(this.node(),t).delay}function hwt(e,t){return function(){Rm(this,e).duration=+t.apply(this,arguments)}}function pwt(e,t){return t=+t,function(){Rm(this,e).duration=t}}function mwt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?hwt:pwt)(t,e)):zh(this.node(),t).duration}function gwt(e,t){if(typeof t!="function")throw new Error;return function(){Rm(this,e).ease=t}}function ywt(e){var t=this._id;return arguments.length?this.each(gwt(t,e)):zh(this.node(),t).ease}function vwt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Rm(this,e).ease=n}}function bwt(e){if(typeof e!="function")throw new Error;return this.each(vwt(this._id,e))}function xwt(e){typeof e!="function"&&(e=Kke(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new yg(r,this._parents,this._name,this._id)}function _wt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new yg(o,this._parents,this._name,this._id)}function wwt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ewt(e,t,n){var r,i,s=wwt(t)?BZ:Rm;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Swt(e,t){var n=this._id;return arguments.length<2?zh(this.node(),n).on.on(e):this.each(Ewt(n,e,t))}function Twt(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Cwt(){return this.on("end.remove",Twt(this._id))}function Awt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=kZ(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,H5(l[d],t,n,d,l,zh(c,n)));return new yg(s,this._parents,t,n)}function Iwt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Yke(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=zh(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&H5(h,t,n,m,d,p);s.push(d),o.push(c)}return new yg(s,o,t,n)}var kwt=rN.prototype.constructor;function Rwt(){return new kwt(this._groups,this._parents)}function Dwt(e,t){var n,r,i;return function(){var s=oT(this,e),o=(this.style.removeProperty(e),oT(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function MRe(e){return function(){this.style.removeProperty(e)}}function Nwt(e,t,n){var r,i=n+"",s;return function(){var o=oT(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Pwt(e,t,n){var r,i,s;return function(){var o=oT(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),oT(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Owt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Rm(this,e),l=u.on,c=u.value[s]==null?a||(a=MRe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function $wt(e,t,n){var r=(e+="")=="transform"?ARe:$Re;return t==null?this.styleTween(e,Dwt(e,r)).on("end.style."+e,MRe(e)):typeof t=="function"?this.styleTween(e,Pwt(e,r,jZ(this,"style."+e,t))).each(Owt(this._id,e)):this.styleTween(e,Nwt(e,r,t),n).on("end.style."+e,null)}function Mwt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Lwt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Mwt(e,o,n)),r}return s._value=t,s}function Fwt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Lwt(e,t,n??""))}function Bwt(e){return function(){this.textContent=e}}function jwt(e){return function(){var t=e(this);this.textContent=t??""}}function Uwt(e){return this.tween("text",typeof e=="function"?jwt(jZ(this,"text",e)):Bwt(e==null?"":e+""))}function zwt(e){return function(t){this.textContent=e.call(this,t)}}function Vwt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&zwt(i)),t}return r._value=e,r}function Hwt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Vwt(e))}function qwt(){for(var e=this._name,t=this._id,n=LRe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=zh(u,t);H5(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new yg(r,this._parents,e,n)}function Wwt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Rm(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Gwt=0;function yg(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function LRe(){return++Gwt}var o0=rN.prototype;yg.prototype={constructor:yg,select:Awt,selectAll:Iwt,selectChild:o0.selectChild,selectChildren:o0.selectChildren,filter:xwt,merge:_wt,selection:Rwt,transition:qwt,call:o0.call,nodes:o0.nodes,node:o0.node,size:o0.size,empty:o0.empty,each:o0.each,on:Swt,attr:iwt,attrTween:lwt,style:$wt,styleTween:Fwt,text:Uwt,textTween:Hwt,remove:Cwt,tween:Q_t,delay:dwt,duration:mwt,ease:ywt,easeVarying:bwt,end:Wwt,[Symbol.iterator]:o0[Symbol.iterator]};const Ywt=e=>+e;function Kwt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Xwt={time:null,delay:0,duration:250,ease:Kwt};function Qwt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Jwt(e){var t,n;e instanceof yg?(t=e._id,e=e._name):(t=LRe(),(n=Xwt).time=V5(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&H5(u,e,t,l,o,n||Qwt(u,t));return new yg(r,this._parents,e,t)}rN.prototype.interrupt=Y_t;rN.prototype.transition=Jwt;const HU=e=>()=>e;function Zwt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function eEt(e){e.stopImmediatePropagation()}function qU(e){e.preventDefault(),e.stopImmediatePropagation()}var Fme={name:"drag"},WU={name:"space"},Xw={name:"handle"},Qw={name:"center"};const{abs:Bme,max:eu,min:tu}=Math;function jme(e){return[+e[0],+e[1]]}function _W(e){return[jme(e[0]),jme(e[1])]}var U4={name:"x",handles:["w","e"].map(TR),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},z4={name:"y",handles:["n","s"].map(TR),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},tEt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(TR),input:function(e){return e==null?null:_W(e)},output:function(e){return e}},a0={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ume={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},zme={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},nEt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},rEt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function TR(e){return{type:e}}function iEt(e){return!e.ctrlKey&&!e.button}function sEt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function oEt(){return navigator.maxTouchPoints||"ontouchstart"in this}function GU(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function aEt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function FRe(){return UZ(U4)}function BRe(){return UZ(z4)}function jRe(){return UZ(tEt)}function UZ(e){var t=sEt,n=iEt,r=oEt,i=!0,s=L5("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([TR("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",a0.overlay).merge(y).each(function(){var x=GU(this).extent;Qr(this).attr("x",x[0][0]).attr("y",x[0][1]).attr("width",x[1][0]-x[0][0]).attr("height",x[1][1]-x[0][1])}),g.selectAll(".selection").data([TR("selection")]).enter().append("rect").attr("class","selection").attr("cursor",a0.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=g.selectAll(".handle").data(e.handles,function(x){return x.type});b.exit().remove(),b.enter().append("rect").attr("class",function(x){return"handle handle--"+x.type}).attr("cursor",function(x){return a0[x.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,b){g.tween?g.on("start.brush",function(x){c(this,arguments).beforestart().start(x)}).on("interrupt.brush end.brush",function(x){c(this,arguments).end(x)}).tween("brush",function(){var x=this,w=x.__brush,S=c(x,arguments),T=w.selection,C=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),I=zg(T,C);function D(k){w.selection=k===1&&C===null?null:I(k),l.call(x),S.brush()}return T!==null&&C!==null?D:D(1)}):g.each(function(){var x=this,w=arguments,S=x.__brush,T=e.input(typeof y=="function"?y.apply(x,w):y,S.extent),C=c(x,w).beforestart();xW(x),S.selection=T===null?null:T,l.call(x),C.start(b).brush(b).end(b)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=Qr(this),y=GU(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(b){return b.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(b){return b.type==="e"||b.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,b){var x=g.__brush.emitter;return x&&(!b||!x.clean)?x:new f(g,y,b)}function f(g,y,b){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=b}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,b){var x=Qr(this.that).datum();s.call(g,this.that,new Zwt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:b,dispatch:s}),x)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,b=g.target.__data__.type,x=(i&&g.metaKey?b="overlay":b)==="selection"?Fme:i&&g.altKey?Qw:Xw,w=e===z4?null:nEt[b],S=e===U4?null:rEt[b],T=GU(y),C=T.extent,I=T.selection,D=C[0][0],k,P,M=C[0][1],$,B,q=C[1][0],H,Y,K=C[1][1],Q,L,z=0,W=0,F,V=w&&S&&i&&g.shiftKey,J,ue,we=Array.from(g.touches||[g],Te=>{const Fe=Te.identifier;return Te=O$(Te,y),Te.point0=Te.slice(),Te.identifier=Fe,Te});xW(y);var he=c(y,arguments,!0).beforestart();if(b==="overlay"){I&&(F=!0);const Te=[we[0],we[1]||we[0]];T.selection=I=[[k=e===z4?D:tu(Te[0][0],Te[1][0]),$=e===U4?M:tu(Te[0][1],Te[1][1])],[H=e===z4?q:eu(Te[0][0],Te[1][0]),Q=e===U4?K:eu(Te[0][1],Te[1][1])]],we.length>1&&St(g)}else k=I[0][0],$=I[0][1],H=I[1][0],Q=I[1][1];P=k,B=$,Y=H,L=Q;var ke=Qr(y).attr("pointer-events","none"),Pe=ke.selectAll(".overlay").attr("cursor",a0[b]);if(g.touches)he.moved=Re,he.ended=Je;else{var rt=Qr(g.view).on("mousemove.brush",Re,!0).on("mouseup.brush",Je,!0);i&&rt.on("keydown.brush",It,!0).on("keyup.brush",mt,!0),t_t(g.view)}l.call(y),he.start(g,x.name);function Re(Te){for(const Fe of Te.changedTouches||[Te])for(const st of we)st.identifier===Fe.identifier&&(st.cur=O$(Fe,y));if(V&&!J&&!ue&&we.length===1){const Fe=we[0];Bme(Fe.cur[0]-Fe[0])>Bme(Fe.cur[1]-Fe[1])?ue=!0:J=!0}for(const Fe of we)Fe.cur&&(Fe[0]=Fe.cur[0],Fe[1]=Fe.cur[1]);F=!0,qU(Te),St(Te)}function St(Te){const Fe=we[0],st=Fe.point0;var yt;switch(z=Fe[0]-st[0],W=Fe[1]-st[1],x){case WU:case Fme:{w&&(z=eu(D-k,tu(q-H,z)),P=k+z,Y=H+z),S&&(W=eu(M-$,tu(K-Q,W)),B=$+W,L=Q+W);break}case Xw:{we[1]?(w&&(P=eu(D,tu(q,we[0][0])),Y=eu(D,tu(q,we[1][0])),w=1),S&&(B=eu(M,tu(K,we[0][1])),L=eu(M,tu(K,we[1][1])),S=1)):(w<0?(z=eu(D-k,tu(q-k,z)),P=k+z,Y=H):w>0&&(z=eu(D-H,tu(q-H,z)),P=k,Y=H+z),S<0?(W=eu(M-$,tu(K-$,W)),B=$+W,L=Q):S>0&&(W=eu(M-Q,tu(K-Q,W)),B=$,L=Q+W));break}case Qw:{w&&(P=eu(D,tu(q,k-z*w)),Y=eu(D,tu(q,H+z*w))),S&&(B=eu(M,tu(K,$-W*S)),L=eu(M,tu(K,Q+W*S)));break}}Y<P&&(w*=-1,yt=k,k=H,H=yt,yt=P,P=Y,Y=yt,b in Ume&&Pe.attr("cursor",a0[b=Ume[b]])),L<B&&(S*=-1,yt=$,$=Q,Q=yt,yt=B,B=L,L=yt,b in zme&&Pe.attr("cursor",a0[b=zme[b]])),T.selection&&(I=T.selection),J&&(P=I[0][0],Y=I[1][0]),ue&&(B=I[0][1],L=I[1][1]),(I[0][0]!==P||I[0][1]!==B||I[1][0]!==Y||I[1][1]!==L)&&(T.selection=[[P,B],[Y,L]],l.call(y),he.brush(Te,x.name))}function Je(Te){if(eEt(Te),Te.touches){if(Te.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else n_t(Te.view,F),rt.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);ke.attr("pointer-events","all"),Pe.attr("cursor",a0.overlay),T.selection&&(I=T.selection),aEt(I)&&(T.selection=null,l.call(y)),he.end(Te,x.name)}function It(Te){switch(Te.keyCode){case 16:{V=w&&S;break}case 18:{x===Xw&&(w&&(H=Y-z*w,k=P+z*w),S&&(Q=L-W*S,$=B+W*S),x=Qw,St(Te));break}case 32:{(x===Xw||x===Qw)&&(w<0?H=Y-z:w>0&&(k=P-z),S<0?Q=L-W:S>0&&($=B-W),x=WU,Pe.attr("cursor",a0.selection),St(Te));break}default:return}qU(Te)}function mt(Te){switch(Te.keyCode){case 16:{V&&(J=ue=V=!1,St(Te));break}case 18:{x===Qw&&(w<0?H=Y:w>0&&(k=P),S<0?Q=L:S>0&&($=B),x=Xw,St(Te));break}case 32:{x===WU&&(Te.altKey?(w&&(H=Y-z*w,k=P+z*w),S&&(Q=L-W*S,$=B+W*S),x=Qw):(w<0?H=Y:w>0&&(k=P),S<0?Q=L:S>0&&($=B),x=Xw),Pe.attr("cursor",a0[b]),St(Te));break}default:return}qU(Te)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=_W(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:HU(_W(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:HU(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:HU(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const wW=Math.PI,EW=2*wW,Fb=1e-6,uEt=EW-Fb;function URe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function lEt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return URe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let zZ=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?URe:lEt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Fb)if(!(Math.abs(f*u-l*c)>Fb)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),b=Math.sqrt(d),x=s*Math.tan((wW-Math.acos((m+d-g)/(2*y*b)))/2),w=x/b,S=x/y;Math.abs(w-1)>Fb&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+S*u},${this._y1=n+S*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Fb||Math.abs(this._y1-c)>Fb)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%EW+EW),d>uEt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Fb&&this._append`A${r},${r},0,${+(d>=wW)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function q5(){return new zZ}q5.prototype=zZ.prototype;const X0=11102230246251565e-32,nu=134217729,cEt=(3+8*X0)*X0;function YU(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function fEt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function oN(e){return new Float64Array(e)}const dEt=(3+16*X0)*X0,hEt=(2+12*X0)*X0,pEt=(9+64*X0)*X0*X0,Jw=oN(4),Vme=oN(8),Hme=oN(12),qme=oN(16),zu=oN(4);function mEt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,b,x,w,S,T,C,I;const D=e-i,k=n-i,P=t-s,M=r-s;w=D*M,d=nu*D,h=d-(d-D),p=D-h,d=nu*M,m=d-(d-M),g=M-m,S=p*g-(w-h*m-p*m-h*g),T=P*k,d=nu*P,h=d-(d-P),p=P-h,d=nu*k,m=d-(d-k),g=k-m,C=p*g-(T-h*m-p*m-h*g),y=S-C,f=S-y,Jw[0]=S-(y+f)+(f-C),b=w+y,f=b-w,x=w-(b-f)+(y-f),y=x-T,f=x-y,Jw[1]=x-(y+f)+(f-T),I=b+y,f=I-b,Jw[2]=b-(I-f)+(y-f),Jw[3]=I;let $=fEt(4,Jw),B=hEt*o;if($>=B||-$>=B||(f=e-D,a=e-(D+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-P,u=t-(P+f)+(f-s),f=r-M,c=r-(M+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(B=pEt*o+cEt*Math.abs($),$+=D*c+M*a-(P*l+k*u),$>=B||-$>=B))return $;w=a*M,d=nu*a,h=d-(d-a),p=a-h,d=nu*M,m=d-(d-M),g=M-m,S=p*g-(w-h*m-p*m-h*g),T=u*k,d=nu*u,h=d-(d-u),p=u-h,d=nu*k,m=d-(d-k),g=k-m,C=p*g-(T-h*m-p*m-h*g),y=S-C,f=S-y,zu[0]=S-(y+f)+(f-C),b=w+y,f=b-w,x=w-(b-f)+(y-f),y=x-T,f=x-y,zu[1]=x-(y+f)+(f-T),I=b+y,f=I-b,zu[2]=b-(I-f)+(y-f),zu[3]=I;const q=YU(4,Jw,4,zu,Vme);w=D*c,d=nu*D,h=d-(d-D),p=D-h,d=nu*c,m=d-(d-c),g=c-m,S=p*g-(w-h*m-p*m-h*g),T=P*l,d=nu*P,h=d-(d-P),p=P-h,d=nu*l,m=d-(d-l),g=l-m,C=p*g-(T-h*m-p*m-h*g),y=S-C,f=S-y,zu[0]=S-(y+f)+(f-C),b=w+y,f=b-w,x=w-(b-f)+(y-f),y=x-T,f=x-y,zu[1]=x-(y+f)+(f-T),I=b+y,f=I-b,zu[2]=b-(I-f)+(y-f),zu[3]=I;const H=YU(q,Vme,4,zu,Hme);w=a*c,d=nu*a,h=d-(d-a),p=a-h,d=nu*c,m=d-(d-c),g=c-m,S=p*g-(w-h*m-p*m-h*g),T=u*l,d=nu*u,h=d-(d-u),p=u-h,d=nu*l,m=d-(d-l),g=l-m,C=p*g-(T-h*m-p*m-h*g),y=S-C,f=S-y,zu[0]=S-(y+f)+(f-C),b=w+y,f=b-w,x=w-(b-f)+(y-f),y=x-T,f=x-y,zu[1]=x-(y+f)+(f-T),I=b+y,f=I-b,zu[2]=b-(I-f)+(y-f),zu[3]=I;const Y=YU(H,Hme,4,zu,qme);return qme[Y-1]}function tO(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=dEt*l?u:-mEt(e,t,n,r,i,s,l)}const Wme=Math.pow(2,-52),nO=new Uint32Array(512);class z${static from(t,n=xEt,r=_Et){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new z$(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let D=0;D<o;D++){const k=t[2*D],P=t[2*D+1];k<a&&(a=k),P<u&&(u=P),k>l&&(l=k),P>c&&(c=P),this._ids[D]=D}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let D=0,k=1/0;D<o;D++){const P=KU(f,d,t[2*D],t[2*D+1]);P<k&&(h=D,k=P)}const g=t[2*h],y=t[2*h+1];for(let D=0,k=1/0;D<o;D++){if(D===h)continue;const P=KU(g,y,t[2*D],t[2*D+1]);P<k&&P>0&&(p=D,k=P)}let b=t[2*p],x=t[2*p+1],w=1/0;for(let D=0;D<o;D++){if(D===h||D===p)continue;const k=vEt(g,y,b,x,t[2*D],t[2*D+1]);k<w&&(m=D,w=k)}let S=t[2*m],T=t[2*m+1];if(w===1/0){for(let P=0;P<o;P++)this._dists[P]=t[2*P]-t[0]||t[2*P+1]-t[1];qE(this._ids,this._dists,0,o-1);const D=new Uint32Array(o);let k=0;for(let P=0,M=-1/0;P<o;P++){const $=this._ids[P],B=this._dists[$];B>M&&(D[k++]=$,M=B)}this.hull=D.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(tO(g,y,b,x,S,T)<0){const D=p,k=b,P=x;p=m,b=S,x=T,m=D,S=k,T=P}const C=bEt(g,y,b,x,S,T);this._cx=C.x,this._cy=C.y;for(let D=0;D<o;D++)this._dists[D]=KU(t[2*D],t[2*D+1],C.x,C.y);qE(this._ids,this._dists,0,o-1),this._hullStart=h;let I=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(b,x)]=p,s[this._hashKey(S,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let D=0,k,P;D<this._ids.length;D++){const M=this._ids[D],$=t[2*M],B=t[2*M+1];if(D>0&&Math.abs($-k)<=Wme&&Math.abs(B-P)<=Wme||(k=$,P=B,M===h||M===p||M===m))continue;let q=0;for(let L=0,z=this._hashKey($,B);L<this._hashSize&&(q=s[(z+L)%this._hashSize],!(q!==-1&&q!==r[q]));L++);q=n[q];let H=q,Y;for(;Y=r[H],tO($,B,t[2*H],t[2*H+1],t[2*Y],t[2*Y+1])>=0;)if(H=Y,H===q){H=-1;break}if(H===-1)continue;let K=this._addTriangle(H,M,r[H],-1,-1,i[H]);i[M]=this._legalize(K+2),i[H]=K,I++;let Q=r[H];for(;Y=r[Q],tO($,B,t[2*Q],t[2*Q+1],t[2*Y],t[2*Y+1])<0;)K=this._addTriangle(Q,M,Y,i[M],-1,i[Q]),i[M]=this._legalize(K+2),r[Q]=Q,I--,Q=Y;if(H===q)for(;Y=n[H],tO($,B,t[2*Y],t[2*Y+1],t[2*H],t[2*H+1])<0;)K=this._addTriangle(Y,M,H,-1,i[H],i[Y]),this._legalize(K+2),i[Y]=K,r[H]=H,I--,H=Y;this._hullStart=n[M]=H,r[H]=n[Q]=M,r[M]=Q,s[this._hashKey($,B)]=M,s[this._hashKey(t[2*H],t[2*H+1])]=H}this.hull=new Uint32Array(I);for(let D=0,k=this._hullStart;D<I;D++)this.hull[D]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(gEt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=nO[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(yEt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let x=this._hullStart;do{if(this._hullTri[x]===f){this._hullTri[x]=t;break}x=this._hullPrev[x]}while(x!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const b=l+(a+1)%3;s<nO.length&&(nO[s++]=b)}else{if(s===0)break;t=nO[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function gEt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function KU(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function yEt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function vEt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function bEt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function qE(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;hA(e,i,s),t[e[n]]>t[e[r]]&&hA(e,n,r),t[e[s]]>t[e[r]]&&hA(e,s,r),t[e[n]]>t[e[s]]&&hA(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;hA(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(qE(e,t,s,r),qE(e,t,n,o-1)):(qE(e,t,n,o-1),qE(e,t,s,r))}}function hA(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function xEt(e){return e[0]}function _Et(e){return e[1]}const Gme=1e-6;class gx{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Gme||Math.abs(this._y1-s)>Gme)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class SW{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let wEt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,b,x;m<y;m+=3,g+=2){const w=r[m]*2,S=r[m+1]*2,T=r[m+2]*2,C=t[w],I=t[w+1],D=t[S],k=t[S+1],P=t[T],M=t[T+1],$=D-C,B=k-I,q=P-C,H=M-I,Y=($*H-B*q)*2;if(Math.abs(Y)<1e-9){if(s===void 0){s=o=0;for(const Q of n)s+=t[Q*2],o+=t[Q*2+1];s/=n.length,o/=n.length}const K=1e9*Math.sign((s-C)*H-(o-I)*q);b=(C+P)/2-K*H,x=(I+M)/2+K*q}else{const K=1/Y,Q=$*$+B*B,L=q*q+H*H;b=C+(H*Q-B*L)*K,x=I+($*L-q*Q)*K}a[g]=b,a[g+1]=x}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new gx:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],b=o[p+1];this._renderSegment(m,g,y,b,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new gx:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new gx:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new SW;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,b;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,b]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,b,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,b):i=[y,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const EEt=2*Math.PI,Zw=Math.pow;function SEt(e){return e[0]}function TEt(e){return e[1]}function CEt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function AEt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class VZ{static from(t,n=SEt,r=TEt,i){return new VZ("length"in t?IEt(t,n,r,i):Float64Array.from(kEt(t,n,r,i)))}constructor(t){this._delaunator=new z$(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&CEt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=AEt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new z$(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new wEt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=Zw(n-l[t*2],2)+Zw(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=Zw(n-l[p*2],2)+Zw(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&Zw(n-l[h*2],2)+Zw(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new gx:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new gx:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,EEt)}return r&&r.value()}renderHull(t){const n=t==null?t=new gx:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new SW;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new gx:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new SW;return this.renderTriangle(t,n),n.value()}}function IEt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*kEt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Yme={},XU={},QU=34,pA=10,JU=13;function zRe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function REt(e,t){var n=zRe(e);return function(r,i){return t(n(r),i,e)}}function Kme(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Nl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function DEt(e){return e<0?"-"+Nl(-e,6):e>9999?"+"+Nl(e,6):Nl(e,4)}function NEt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":DEt(e.getUTCFullYear())+"-"+Nl(e.getUTCMonth()+1,2)+"-"+Nl(e.getUTCDate(),2)+(i?"T"+Nl(t,2)+":"+Nl(n,2)+":"+Nl(r,2)+"."+Nl(i,3)+"Z":r?"T"+Nl(t,2)+":"+Nl(n,2)+":"+Nl(r,2)+"Z":n||t?"T"+Nl(t,2)+":"+Nl(n,2)+"Z":"")}function VRe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?REt(g,d):zRe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,b=p<=0,x=!1;f.charCodeAt(p-1)===pA&&--p,f.charCodeAt(p-1)===JU&&--p;function w(){if(b)return XU;if(x)return x=!1,Yme;var T,C=m,I;if(f.charCodeAt(C)===QU){for(;m++<p&&f.charCodeAt(m)!==QU||f.charCodeAt(++m)===QU;);return(T=m)>=p?b=!0:(I=f.charCodeAt(m++))===pA?x=!0:I===JU&&(x=!0,f.charCodeAt(m)===pA&&++m),f.slice(C+1,T-1).replace(/""/g,'"')}for(;m<p;){if((I=f.charCodeAt(T=m++))===pA)x=!0;else if(I===JU)x=!0,f.charCodeAt(m)===pA&&++m;else if(I!==n)continue;return f.slice(C,T)}return b=!0,f.slice(C,p)}for(;(y=w())!==XU;){for(var S=[];y!==Yme&&y!==XU;)S.push(y),y=w();d&&(S=d(S,g++))==null||h.push(S)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Kme(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Kme(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?NEt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var PEt=VRe(","),OEt=PEt.parse;function $Et(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function MEt(e,t){return fetch(e,t).then($Et)}function LEt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),MEt(t,n).then(function(i){return e(i,r)})}}var HRe=LEt(OEt);function FEt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function BEt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return qRe(this.cover(t,n),t,n,e)}function qRe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,b;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(b=(p>=d)<<1|h>=f));return i[b]=s,i[y]=o,e}function jEt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)qRe(this,o[n],a[n],e[n]);return this}function UEt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function zEt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function VEt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Zu(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function HEt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Zu(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Zu(h[3],g,y,u,l),new Zu(h[2],o,y,g,l),new Zu(h[1],g,a,u,y),new Zu(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var b=e-+this._x.call(null,h.data),x=t-+this._y.call(null,h.data),w=b*b+x*x;if(w<n){var S=Math.sqrt(n=w);i=e-S,s=t-S,c=e+S,f=t+S,r=h.data}}return r}function qEt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function WEt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function GEt(){return this._root}function YEt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function KEt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Zu(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Zu(i,l,c,a,u)),(i=r[2])&&t.push(new Zu(i,s,c,l,u)),(i=r[1])&&t.push(new Zu(i,l,o,a,c)),(i=r[0])&&t.push(new Zu(i,s,o,l,c))}return this}function XEt(e){var t=[],n=[],r;for(this._root&&t.push(new Zu(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Zu(s,o,a,c,f)),(s=i[1])&&t.push(new Zu(s,c,a,u,f)),(s=i[2])&&t.push(new Zu(s,o,f,c,l)),(s=i[3])&&t.push(new Zu(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function QEt(e){return e[0]}function JEt(e){return arguments.length?(this._x=e,this):this._x}function ZEt(e){return e[1]}function eSt(e){return arguments.length?(this._y=e,this):this._y}function HZ(e,t,n){var r=new qZ(t??QEt,n??ZEt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function qZ(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Xme(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var vl=HZ.prototype=qZ.prototype;vl.copy=function(){var e=new qZ(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Xme(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Xme(r));return e};vl.add=BEt;vl.addAll=jEt;vl.cover=UEt;vl.data=zEt;vl.extent=VEt;vl.find=HEt;vl.remove=qEt;vl.removeAll=WEt;vl.root=GEt;vl.size=YEt;vl.visit=KEt;vl.visitAfter=XEt;vl.x=JEt;vl.y=eSt;function tl(e){return function(){return e}}function Jy(e){return(e()-.5)*1e-6}function tSt(e){return e.x+e.vx}function nSt(e){return e.y+e.vy}function rSt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=tl(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=HZ(t,tSt,nSt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(b);function b(x,w,S,T,C){var I=x.data,D=x.r,k=m+D;if(I){if(I.index>d.index){var P=h-I.x-I.vx,M=p-I.y-I.vy,$=P*P+M*M;$<k*k&&(P===0&&(P=Jy(r),$+=P*P),M===0&&(M=Jy(r),$+=M*M),$=(k-($=Math.sqrt($)))/$*i,d.vx+=(P*=$)*(k=(D*=D)/(g+D)),d.vy+=(M*=$)*k,I.vx-=P*(k=1-k),I.vy-=M*k)}return}return w>h+k||T<h-k||S>p+k||C<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:tl(+l),u(),o):e},o}function iSt(e){return e.index}function Qme(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function sSt(e){var t=iSt,n=f,r,i=tl(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,b=e.length;y<c;++y)for(var x=0,w,S,T,C,I,D,k;x<b;++x)w=e[x],S=w.source,T=w.target,C=T.x+T.vx-S.x-S.vx||Jy(l),I=T.y+T.vy-S.y-S.vy||Jy(l),D=Math.sqrt(C*C+I*I),D=(D-s[x])/D*g*r[x],C*=D,I*=D,T.vx-=C*(k=u[x]),T.vy-=I*k,S.vx+=C*(k=1-k),S.vy+=I*k}function h(){if(o){var g,y=o.length,b=e.length,x=new Map(o.map((S,T)=>[t(S,T,o),S])),w;for(g=0,a=new Array(y);g<b;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Qme(x,w.source)),typeof w.target!="object"&&(w.target=Qme(x,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(b);g<b;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(b),p(),s=new Array(b),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:tl(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:tl(+g),m(),d):i},d}const oSt=1664525,aSt=1013904223,Jme=4294967296;function uSt(){let e=1;return()=>(e=(oSt*e+aSt)%Jme)/Jme}function lSt(e){return e.x}function cSt(e){return e.y}var fSt=10,dSt=Math.PI*(3-Math.sqrt(5));function hSt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=FZ(f),l=L5("tick","end"),c=uSt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,b;m===void 0&&(m=1);for(var x=0;x<m;++x)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)b=e[g],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var b=fSt*Math.sqrt(.5+m),x=m*dSt;y.x=b*Math.cos(x),y.y=b*Math.sin(x)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var b=0,x=e.length,w,S,T,C,I;for(y==null?y=1/0:y*=y,b=0;b<x;++b)C=e[b],w=m-C.x,S=g-C.y,T=w*w+S*S,T<y&&(I=C,y=T);return I},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function pSt(){var e,t,n,r,i=tl(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=HZ(e,lSt,cSt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,b,x,w;if(h.length){for(b=x=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,b+=g*m.x,x+=g*m.y);h.x=b/y,h.y=x/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,b=h.y-t.y,x=g-p,w=y*y+b*b;if(x*x/u<w)return w<a&&(y===0&&(y=Jy(n),w+=y*y),b===0&&(b=Jy(n),w+=b*b),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=b*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Jy(n),w+=y*y),b===0&&(b=Jy(n),w+=b*b),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(x=s[h.data.index]*r/w,t.vx+=y*x,t.vy+=b*x);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:tl(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function mSt(e){var t=tl(.1),n,r,i;typeof e!="function"&&(e=tl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:tl(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:tl(+a),o(),s):e},s}function gSt(e){var t=tl(.1),n,r,i;typeof e!="function"&&(e=tl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:tl(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:tl(+a),o(),s):e},s}function ySt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function V$(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function lT(e){return e=V$(Math.abs(e)),e?e[1]:NaN}function vSt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function bSt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var xSt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function e_(e){if(!(t=xSt.exec(e)))throw new Error("invalid format: "+e);var t;return new WZ({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}e_.prototype=WZ.prototype;function WZ(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}WZ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function _St(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var WRe;function wSt(e,t){var n=V$(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(WRe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+V$(e,Math.max(0,t+s-1))[0]}function Zme(e,t){var n=V$(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const e0e={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:ySt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Zme(e*100,t),r:Zme,s:wSt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function t0e(e){return e}var n0e=Array.prototype.map,r0e=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function GRe(e){var t=e.grouping===void 0||e.thousands===void 0?t0e:vSt(n0e.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?t0e:bSt(n0e.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=e_(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,b=f.comma,x=f.precision,w=f.trim,S=f.type;S==="n"?(b=!0,S="g"):e0e[S]||(x===void 0&&(x=12),w=!0,S="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",C=m==="$"?r:/[%p]/.test(S)?o:"",I=e0e[S],D=/[defgprs%]/.test(S);x=x===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function k(P){var M=T,$=C,B,q,H;if(S==="c")$=I(P)+$,P="";else{P=+P;var Y=P<0||1/P<0;if(P=isNaN(P)?u:I(Math.abs(P),x),w&&(P=_St(P)),Y&&+P==0&&p!=="+"&&(Y=!1),M=(Y?p==="("?p:a:p==="-"||p==="("?"":p)+M,$=(S==="s"?r0e[8+WRe/3]:"")+$+(Y&&p==="("?")":""),D){for(B=-1,q=P.length;++B<q;)if(H=P.charCodeAt(B),48>H||H>57){$=(H===46?i+P.slice(B+1):P.slice(B))+$,P=P.slice(0,B);break}}}b&&!g&&(P=t(P,1/0));var K=M.length+P.length+$.length,Q=K<y?new Array(y-K+1).join(d):"";switch(b&&g&&(P=t(Q+P,Q.length?y-$.length:1/0),Q=""),h){case"<":P=M+P+$+Q;break;case"=":P=M+Q+P+$;break;case"^":P=Q.slice(0,K=Q.length>>1)+M+P+$+Q.slice(K);break;default:P=Q+M+P+$;break}return s(P)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=e_(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(lT(d)/3)))*3,m=Math.pow(10,-p),g=r0e[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var rO,Fv,GZ;ESt({thousands:",",grouping:[3],currency:["$",""]});function ESt(e){return rO=GRe(e),Fv=rO.format,GZ=rO.formatPrefix,rO}function YRe(e){return Math.max(0,-lT(Math.abs(e)))}function KRe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(lT(t)/3)))*3-lT(Math.abs(e)))}function XRe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,lT(t)-lT(e))+1}var dn=1e-6,TW=1e-12,cr=Math.PI,Hs=cr/2,H$=cr/4,fl=cr*2,to=180/cr,ar=cr/180,Or=Math.abs,M2=Math.atan,ad=Math.atan2,cn=Math.cos,iO=Math.ceil,QRe=Math.exp,CW=Math.hypot,q$=Math.log,ZU=Math.pow,rn=Math.sin,Qf=Math.sign||function(e){return e>0?1:e<0?-1:0},dl=Math.sqrt,YZ=Math.tan;function JRe(e){return e>1?0:e<-1?cr:Math.acos(e)}function cc(e){return e>1?Hs:e<-1?-Hs:Math.asin(e)}function Pa(){}function W$(e,t){e&&s0e.hasOwnProperty(e.type)&&s0e[e.type](e,t)}var i0e={Feature:function(e,t){W$(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)W$(n[r].geometry,t)}},s0e={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){AW(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)AW(n[r],t,0)},Polygon:function(e,t){o0e(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)o0e(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)W$(n[r],t)}};function AW(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function o0e(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)AW(e[n],t,1);t.polygonEnd()}function S0(e,t){e&&i0e.hasOwnProperty(e.type)?i0e[e.type](e,t):W$(e,t)}var G$=new sl,Y$=new sl,ZRe,eDe,IW,kW,RW,am={point:Pa,lineStart:Pa,lineEnd:Pa,polygonStart:function(){G$=new sl,am.lineStart=SSt,am.lineEnd=TSt},polygonEnd:function(){var e=+G$;Y$.add(e<0?fl+e:e),this.lineStart=this.lineEnd=this.point=Pa},sphere:function(){Y$.add(fl)}};function SSt(){am.point=CSt}function TSt(){tDe(ZRe,eDe)}function CSt(e,t){am.point=tDe,ZRe=e,eDe=t,e*=ar,t*=ar,IW=e,kW=cn(t=t/2+H$),RW=rn(t)}function tDe(e,t){e*=ar,t*=ar,t=t/2+H$;var n=e-IW,r=n>=0?1:-1,i=r*n,s=cn(t),o=rn(t),a=RW*o,u=kW*s+a*cn(i),l=a*r*rn(i);G$.add(ad(l,u)),IW=e,kW=s,RW=o}function ASt(e){return Y$=new sl,S0(e,am),Y$*2}function K$(e){return[ad(e[1],e[0]),cc(e[2])]}function t_(e){var t=e[0],n=e[1],r=cn(n);return[r*cn(t),r*rn(t),rn(n)]}function sO(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cT(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ez(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function oO(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function X$(e){var t=dl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var As,jl,$s,Bc,Bb,nDe,rDe,vS,ak,Dy,vg,b0={point:DW,lineStart:a0e,lineEnd:u0e,polygonStart:function(){b0.point=sDe,b0.lineStart=ISt,b0.lineEnd=kSt,ak=new sl,am.polygonStart()},polygonEnd:function(){am.polygonEnd(),b0.point=DW,b0.lineStart=a0e,b0.lineEnd=u0e,G$<0?(As=-($s=180),jl=-(Bc=90)):ak>dn?Bc=90:ak<-1e-6&&(jl=-90),vg[0]=As,vg[1]=$s},sphere:function(){As=-($s=180),jl=-(Bc=90)}};function DW(e,t){Dy.push(vg=[As=e,$s=e]),t<jl&&(jl=t),t>Bc&&(Bc=t)}function iDe(e,t){var n=t_([e*ar,t*ar]);if(vS){var r=cT(vS,n),i=[r[1],-r[0],0],s=cT(i,r);X$(s),s=K$(s);var o=e-Bb,a=o>0?1:-1,u=s[0]*to*a,l,c=Or(o)>180;c^(a*Bb<u&&u<a*e)?(l=s[1]*to,l>Bc&&(Bc=l)):(u=(u+360)%360-180,c^(a*Bb<u&&u<a*e)?(l=-s[1]*to,l<jl&&(jl=l)):(t<jl&&(jl=t),t>Bc&&(Bc=t))),c?e<Bb?Lc(As,e)>Lc(As,$s)&&($s=e):Lc(e,$s)>Lc(As,$s)&&(As=e):$s>=As?(e<As&&(As=e),e>$s&&($s=e)):e>Bb?Lc(As,e)>Lc(As,$s)&&($s=e):Lc(e,$s)>Lc(As,$s)&&(As=e)}else Dy.push(vg=[As=e,$s=e]);t<jl&&(jl=t),t>Bc&&(Bc=t),vS=n,Bb=e}function a0e(){b0.point=iDe}function u0e(){vg[0]=As,vg[1]=$s,b0.point=DW,vS=null}function sDe(e,t){if(vS){var n=e-Bb;ak.add(Or(n)>180?n+(n>0?360:-360):n)}else nDe=e,rDe=t;am.point(e,t),iDe(e,t)}function ISt(){am.lineStart()}function kSt(){sDe(nDe,rDe),am.lineEnd(),Or(ak)>dn&&(As=-($s=180)),vg[0]=As,vg[1]=$s,vS=null}function Lc(e,t){return(t-=e)<0?t+360:t}function RSt(e,t){return e[0]-t[0]}function l0e(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function DSt(e){var t,n,r,i,s,o,a;if(Bc=$s=-(As=jl=1/0),Dy=[],S0(e,b0),n=Dy.length){for(Dy.sort(RSt),t=1,r=Dy[0],s=[r];t<n;++t)i=Dy[t],l0e(r,i[0])||l0e(r,i[1])?(Lc(r[0],i[1])>Lc(r[0],r[1])&&(r[1]=i[1]),Lc(i[0],r[1])>Lc(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Lc(r[1],i[0]))>o&&(o=a,As=i[0],$s=r[1])}return Dy=vg=null,As===1/0||jl===1/0?[[NaN,NaN],[NaN,NaN]]:[[As,jl],[$s,Bc]]}var oI,Q$,J$,Z$,eM,tM,nM,rM,NW,PW,OW,oDe,aDe,Xu,Qu,Ju,dh={sphere:Pa,point:KZ,lineStart:c0e,lineEnd:f0e,polygonStart:function(){dh.lineStart=OSt,dh.lineEnd=$St},polygonEnd:function(){dh.lineStart=c0e,dh.lineEnd=f0e}};function KZ(e,t){e*=ar,t*=ar;var n=cn(t);aN(n*cn(e),n*rn(e),rn(t))}function aN(e,t,n){++oI,J$+=(e-J$)/oI,Z$+=(t-Z$)/oI,eM+=(n-eM)/oI}function c0e(){dh.point=NSt}function NSt(e,t){e*=ar,t*=ar;var n=cn(t);Xu=n*cn(e),Qu=n*rn(e),Ju=rn(t),dh.point=PSt,aN(Xu,Qu,Ju)}function PSt(e,t){e*=ar,t*=ar;var n=cn(t),r=n*cn(e),i=n*rn(e),s=rn(t),o=ad(dl((o=Qu*s-Ju*i)*o+(o=Ju*r-Xu*s)*o+(o=Xu*i-Qu*r)*o),Xu*r+Qu*i+Ju*s);Q$+=o,tM+=o*(Xu+(Xu=r)),nM+=o*(Qu+(Qu=i)),rM+=o*(Ju+(Ju=s)),aN(Xu,Qu,Ju)}function f0e(){dh.point=KZ}function OSt(){dh.point=MSt}function $St(){uDe(oDe,aDe),dh.point=KZ}function MSt(e,t){oDe=e,aDe=t,e*=ar,t*=ar,dh.point=uDe;var n=cn(t);Xu=n*cn(e),Qu=n*rn(e),Ju=rn(t),aN(Xu,Qu,Ju)}function uDe(e,t){e*=ar,t*=ar;var n=cn(t),r=n*cn(e),i=n*rn(e),s=rn(t),o=Qu*s-Ju*i,a=Ju*r-Xu*s,u=Xu*i-Qu*r,l=CW(o,a,u),c=cc(l),f=l&&-c/l;NW.add(f*o),PW.add(f*a),OW.add(f*u),Q$+=c,tM+=c*(Xu+(Xu=r)),nM+=c*(Qu+(Qu=i)),rM+=c*(Ju+(Ju=s)),aN(Xu,Qu,Ju)}function LSt(e){oI=Q$=J$=Z$=eM=tM=nM=rM=0,NW=new sl,PW=new sl,OW=new sl,S0(e,dh);var t=+NW,n=+PW,r=+OW,i=CW(t,n,r);return i<TW&&(t=tM,n=nM,r=rM,Q$<dn&&(t=J$,n=Z$,r=eM),i=CW(t,n,r),i<TW)?[NaN,NaN]:[ad(n,t)*to,cc(r/i)*to]}function $W(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function MW(e,t){return Or(e)>cr&&(e-=Math.round(e/fl)*fl),[e,t]}MW.invert=MW;function lDe(e,t,n){return(e%=fl)?t||n?$W(h0e(e),p0e(t,n)):h0e(e):t||n?p0e(t,n):MW}function d0e(e){return function(t,n){return t+=e,Or(t)>cr&&(t-=Math.round(t/fl)*fl),[t,n]}}function h0e(e){var t=d0e(e);return t.invert=d0e(-e),t}function p0e(e,t){var n=cn(e),r=rn(e),i=cn(t),s=rn(t);function o(a,u){var l=cn(u),c=cn(a)*l,f=rn(a)*l,d=rn(u),h=d*n+c*r;return[ad(f*i-h*s,c*n-d*r),cc(h*i+f*s)]}return o.invert=function(a,u){var l=cn(u),c=cn(a)*l,f=rn(a)*l,d=rn(u),h=d*i-f*s;return[ad(f*i+d*s,c*n+h*r),cc(h*n-c*r)]},o}function FSt(e){e=lDe(e[0]*ar,e[1]*ar,e.length>2?e[2]*ar:0);function t(n){return n=e(n[0]*ar,n[1]*ar),n[0]*=to,n[1]*=to,n}return t.invert=function(n){return n=e.invert(n[0]*ar,n[1]*ar),n[0]*=to,n[1]*=to,n},t}function BSt(e,t,n,r,i,s){if(n){var o=cn(t),a=rn(t),u=r*n;i==null?(i=t+r*fl,s=t-u/2):(i=m0e(o,i),s=m0e(o,s),(r>0?i<s:i>s)&&(i+=r*fl));for(var l,c=i;r>0?c>s:c<s;c-=u)l=K$([o,-a*cn(c),-a*rn(c)]),e.point(l[0],l[1])}}function m0e(e,t){t=t_(t),t[0]-=e,X$(t);var n=JRe(-t[1]);return((-t[2]<0?-n:n)+fl-dn)%fl}function cDe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Pa,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function V4(e,t){return Or(e[0]-t[0])<dn&&Or(e[1]-t[1])<dn}function aO(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function fDe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],b;if(V4(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*dn}s.push(b=new aO(g,p,null,!0)),o.push(b.o=new aO(g,null,b,!1)),s.push(b=new aO(y,p,null,!1)),o.push(b.o=new aO(y,null,b,!0))}}),!!s.length){for(o.sort(t),g0e(s),g0e(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function g0e(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function tz(e){return Or(e[0])<=cr?e[0]:Qf(e[0])*((Or(e[0])+cr)%fl-cr)}function jSt(e,t){var n=tz(t),r=t[1],i=rn(r),s=[rn(n),-cn(n),0],o=0,a=0,u=new sl;i===1?r=Hs+dn:i===-1&&(r=-Hs-dn);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=tz(h),m=h[1]/2+H$,g=rn(m),y=cn(m),b=0;b<d;++b,p=w,g=T,y=C,h=x){var x=f[b],w=tz(x),S=x[1]/2+H$,T=rn(S),C=cn(S),I=w-p,D=I>=0?1:-1,k=D*I,P=k>cr,M=g*T;if(u.add(ad(M*D*rn(k),y*C+M*cn(k))),o+=P?I+D*fl:I,P^p>=n^w>=n){var $=cT(t_(h),t_(x));X$($);var B=cT(s,$);X$(B);var q=(P^I>=0?-1:1)*cc(B[2]);(r>q||r===q&&($[0]||$[1]))&&(a+=P^I>=0?1:-1)}}return(o<-1e-6||o<dn&&u<-1e-12)^a&1}function dDe(e,t,n,r){return function(i){var s=t(i),o=cDe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=b,d.lineEnd=x,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Hke(c);var w=jSt(l,r);c.length?(u||(i.polygonStart(),u=!0),fDe(c,zSt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,S){e(w,S)&&i.point(w,S)}function p(w,S){s.point(w,S)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,S){f.push([w,S]),a.point(w,S)}function b(){a.lineStart(),f=[]}function x(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),S=o.result(),T,C=S.length,I,D,k;if(f.pop(),l.push(f),f=null,!!C){if(w&1){if(D=S[0],(I=D.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<I;++T)i.point((k=D[T])[0],k[1]);i.lineEnd()}return}C>1&&w&2&&S.push(S.pop().concat(S.shift())),c.push(S.filter(USt))}}return d}}function USt(e){return e.length>1}function zSt(e,t){return((e=e.x)[0]<0?e[1]-Hs-dn:Hs-e[1])-((t=t.x)[0]<0?t[1]-Hs-dn:Hs-t[1])}const y0e=dDe(function(){return!0},VSt,qSt,[-cr,-Hs]);function VSt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?cr:-cr,u=Or(s-t);Or(u-cr)<dn?(e.point(t,n=(n+o)/2>0?Hs:-Hs),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=cr&&(Or(t-r)<dn&&(t-=r*dn),Or(s-a)<dn&&(s-=a*dn),n=HSt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function HSt(e,t,n,r){var i,s,o=rn(e-n);return Or(o)>dn?M2((rn(t)*(s=cn(r))*rn(n)-rn(r)*(i=cn(t))*rn(e))/(i*s*o)):(t+r)/2}function qSt(e,t,n,r){var i;if(e==null)i=n*Hs,r.point(-cr,i),r.point(0,i),r.point(cr,i),r.point(cr,0),r.point(cr,-i),r.point(0,-i),r.point(-cr,-i),r.point(-cr,0),r.point(-cr,i);else if(Or(e[0]-t[0])>dn){var s=e[0]<t[0]?cr:-cr;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function WSt(e){var t=cn(e),n=2*ar,r=t>0,i=Or(t)>dn;function s(c,f,d,h){BSt(h,e,n,d,c,f)}function o(c,f){return cn(c)*cn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var b=[g,y],x,w=o(g,y),S=r?w?0:l(g,y):w?l(g+(g<0?cr:-cr),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(x=u(f,b),(!x||V4(f,x)||V4(b,x))&&(b[2]=1)),w!==h)m=0,w?(c.lineStart(),x=u(b,f),c.point(x[0],x[1])):(x=u(f,b),c.point(x[0],x[1],2),c.lineEnd()),f=x;else if(i&&f&&r^w){var T;!(S&d)&&(T=u(b,f,!0))&&(m=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}w&&(!f||!V4(f,b))&&c.point(b[0],b[1]),f=b,h=w,d=S},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=t_(c),p=t_(f),m=[1,0,0],g=cT(h,p),y=sO(g,g),b=g[0],x=y-b*b;if(!x)return!d&&c;var w=t*y/x,S=-t*b/x,T=cT(m,g),C=oO(m,w),I=oO(g,S);ez(C,I);var D=T,k=sO(C,D),P=sO(D,D),M=k*k-P*(sO(C,C)-1);if(!(M<0)){var $=dl(M),B=oO(D,(-k-$)/P);if(ez(B,C),B=K$(B),!d)return B;var q=c[0],H=f[0],Y=c[1],K=f[1],Q;H<q&&(Q=q,q=H,H=Q);var L=H-q,z=Or(L-cr)<dn,W=z||L<dn;if(!z&&K<Y&&(Q=Y,Y=K,K=Q),W?z?Y+K>0^B[1]<(Or(B[0]-q)<dn?Y:K):Y<=B[1]&&B[1]<=K:L>cr^(q<=B[0]&&B[0]<=H)){var F=oO(D,(-k+$)/P);return ez(F,C),[B,K$(F)]}}}function l(c,f){var d=r?e:cr-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return dDe(o,a,s,r?[0,-e]:[-cr,e-cr])}function GSt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var uO=1e9,lO=-1e9;function hDe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Or(l[0]-e)<dn?c>0?0:3:Or(l[0]-n)<dn?c>0?2:1:Or(l[1]-t)<dn?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=cDe(),d,h,p,m,g,y,b,x,w,S,T,C={point:I,lineStart:M,lineEnd:$,polygonStart:k,polygonEnd:P};function I(q,H){i(q,H)&&c.point(q,H)}function D(){for(var q=0,H=0,Y=h.length;H<Y;++H)for(var K=h[H],Q=1,L=K.length,z=K[0],W,F,V=z[0],J=z[1];Q<L;++Q)W=V,F=J,z=K[Q],V=z[0],J=z[1],F<=r?J>r&&(V-W)*(r-F)>(J-F)*(e-W)&&++q:J<=r&&(V-W)*(r-F)<(J-F)*(e-W)&&--q;return q}function k(){c=f,d=[],h=[],T=!0}function P(){var q=D(),H=T&&q,Y=(d=Hke(d)).length;(H||Y)&&(l.polygonStart(),H&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),Y&&fDe(d,a,q,s,l),l.polygonEnd()),c=l,d=h=p=null}function M(){C.point=B,h&&h.push(p=[]),S=!0,w=!1,b=x=NaN}function $(){d&&(B(m,g),y&&w&&f.rejoin(),d.push(f.result())),C.point=I,w&&c.lineEnd()}function B(q,H){var Y=i(q,H);if(h&&p.push([q,H]),S)m=q,g=H,y=Y,S=!1,Y&&(c.lineStart(),c.point(q,H));else if(Y&&w)c.point(q,H);else{var K=[b=Math.max(lO,Math.min(uO,b)),x=Math.max(lO,Math.min(uO,x))],Q=[q=Math.max(lO,Math.min(uO,q)),H=Math.max(lO,Math.min(uO,H))];GSt(K,Q,e,t,n,r)?(w||(c.lineStart(),c.point(K[0],K[1])),c.point(Q[0],Q[1]),Y||c.lineEnd(),T=!1):Y&&(c.lineStart(),c.point(q,H),T=!1)}b=q,x=H,w=Y}return C}}function v0e(e,t,n){var r=Kl(e,t-dn,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function b0e(e,t,n){var r=Kl(e,t-dn,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function YSt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return Kl(iO(r/c)*c,n,c).map(p).concat(Kl(iO(a/f)*f,o,f).map(m)).concat(Kl(iO(t/u)*u,e,u).filter(function(x){return Or(x%c)>dn}).map(d)).concat(Kl(iO(s/l)*l,i,l).filter(function(x){return Or(x%f)>dn}).map(h))}return y.lines=function(){return b().map(function(x){return{type:"LineString",coordinates:x}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(x){return arguments.length?y.extentMajor(x).extentMinor(x):y.extentMinor()},y.extentMajor=function(x){return arguments.length?(r=+x[0][0],n=+x[1][0],a=+x[0][1],o=+x[1][1],r>n&&(x=r,r=n,n=x),a>o&&(x=a,a=o,o=x),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(x){return arguments.length?(t=+x[0][0],e=+x[1][0],s=+x[0][1],i=+x[1][1],t>e&&(x=t,t=e,e=x),s>i&&(x=s,s=i,i=x),y.precision(g)):[[t,s],[e,i]]},y.step=function(x){return arguments.length?y.stepMajor(x).stepMinor(x):y.stepMinor()},y.stepMajor=function(x){return arguments.length?(c=+x[0],f=+x[1],y):[c,f]},y.stepMinor=function(x){return arguments.length?(u=+x[0],l=+x[1],y):[u,l]},y.precision=function(x){return arguments.length?(g=+x,d=v0e(s,i,90),h=b0e(t,e,g),p=v0e(a,o,90),m=b0e(r,n,g),y):g},y.extentMajor([[-180,-90+dn],[180,90-dn]]).extentMinor([[-180,-80-dn],[180,80+dn]])}const CR=e=>e;var nz=new sl,LW=new sl,pDe,mDe,FW,BW,T0={point:Pa,lineStart:Pa,lineEnd:Pa,polygonStart:function(){T0.lineStart=KSt,T0.lineEnd=QSt},polygonEnd:function(){T0.lineStart=T0.lineEnd=T0.point=Pa,nz.add(Or(LW)),LW=new sl},result:function(){var e=nz/2;return nz=new sl,e}};function KSt(){T0.point=XSt}function XSt(e,t){T0.point=gDe,pDe=FW=e,mDe=BW=t}function gDe(e,t){LW.add(BW*e-FW*t),FW=e,BW=t}function QSt(){gDe(pDe,mDe)}var fT=1/0,iM=fT,AR=-fT,sM=AR,oM={point:JSt,lineStart:Pa,lineEnd:Pa,polygonStart:Pa,polygonEnd:Pa,result:function(){var e=[[fT,iM],[AR,sM]];return AR=sM=-(iM=fT=1/0),e}};function JSt(e,t){e<fT&&(fT=e),e>AR&&(AR=e),t<iM&&(iM=t),t>sM&&(sM=t)}var jW=0,UW=0,aI=0,aM=0,uM=0,WE=0,zW=0,VW=0,uI=0,yDe,vDe,Sp,Tp,Yf={point:n_,lineStart:x0e,lineEnd:_0e,polygonStart:function(){Yf.lineStart=tTt,Yf.lineEnd=nTt},polygonEnd:function(){Yf.point=n_,Yf.lineStart=x0e,Yf.lineEnd=_0e},result:function(){var e=uI?[zW/uI,VW/uI]:WE?[aM/WE,uM/WE]:aI?[jW/aI,UW/aI]:[NaN,NaN];return jW=UW=aI=aM=uM=WE=zW=VW=uI=0,e}};function n_(e,t){jW+=e,UW+=t,++aI}function x0e(){Yf.point=ZSt}function ZSt(e,t){Yf.point=eTt,n_(Sp=e,Tp=t)}function eTt(e,t){var n=e-Sp,r=t-Tp,i=dl(n*n+r*r);aM+=i*(Sp+e)/2,uM+=i*(Tp+t)/2,WE+=i,n_(Sp=e,Tp=t)}function _0e(){Yf.point=n_}function tTt(){Yf.point=rTt}function nTt(){bDe(yDe,vDe)}function rTt(e,t){Yf.point=bDe,n_(yDe=Sp=e,vDe=Tp=t)}function bDe(e,t){var n=e-Sp,r=t-Tp,i=dl(n*n+r*r);aM+=i*(Sp+e)/2,uM+=i*(Tp+t)/2,WE+=i,i=Tp*e-Sp*t,zW+=i*(Sp+e),VW+=i*(Tp+t),uI+=i*3,n_(Sp=e,Tp=t)}function xDe(e){this._context=e}xDe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,fl);break}}},result:Pa};var HW=new sl,rz,_De,wDe,lI,cI,IR={point:Pa,lineStart:function(){IR.point=iTt},lineEnd:function(){rz&&EDe(_De,wDe),IR.point=Pa},polygonStart:function(){rz=!0},polygonEnd:function(){rz=null},result:function(){var e=+HW;return HW=new sl,e}};function iTt(e,t){IR.point=EDe,_De=lI=e,wDe=cI=t}function EDe(e,t){lI-=e,cI-=t,HW.add(dl(lI*lI+cI*cI)),lI=e,cI=t}let w0e,lM,E0e,S0e;class T0e{constructor(t){this._append=t==null?SDe:sTt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==E0e||this._append!==lM){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,E0e=r,lM=this._append,S0e=this._,this._=i}this._+=S0e;break}}}result(){const t=this._;return this._="",t.length?t:null}}function SDe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function sTt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return SDe;if(t!==w0e){const n=10**t;w0e=t,lM=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return lM}function TDe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),S0(a,i(s))),s.result()}return o.area=function(a){return S0(a,i(T0)),T0.result()},o.measure=function(a){return S0(a,i(IR)),IR.result()},o.bounds=function(a){return S0(a,i(oM)),oM.result()},o.centroid=function(a){return S0(a,i(Yf)),Yf.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,CR):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new T0e(n)):new xDe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new T0e(n)),o},o.projection(e).digits(n).context(t)}function W5(e){return function(t){var n=new qW;for(var r in e)n[r]=e[r];return n.stream=t,n}}function qW(){}qW.prototype={constructor:qW,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function XZ(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),S0(n,e.stream(oM)),t(oM.result()),r!=null&&e.clipExtent(r),e}function G5(e,t,n){return XZ(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function QZ(e,t,n){return G5(e,[[0,0],t],n)}function JZ(e,t,n){return XZ(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function ZZ(e,t,n){return XZ(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var C0e=16,oTt=cn(30*ar);function A0e(e,t){return+t?uTt(e,t):aTt(e)}function aTt(e){return W5({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function uTt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,b=c-i,x=y*y+b*b;if(x>4*t&&m--){var w=o+d,S=a+h,T=u+p,C=dl(w*w+S*S+T*T),I=cc(T/=C),D=Or(Or(T)-1)<dn||Or(s-f)<dn?(s+f)/2:ad(S,w),k=e(D,I),P=k[0],M=k[1],$=P-r,B=M-i,q=b*$-y*B;(q*q/x>t||Or((y*$+b*B)/x-.5)>.3||o*d+a*h+u*p<oTt)&&(n(r,i,s,o,a,u,P,M,D,w/=C,S/=C,T,m,g),g.point(P,M),n(P,M,D,w,S,T,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:b,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=S},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function y(I,D){I=e(I,D),r.point(I[0],I[1])}function b(){f=NaN,g.point=x,r.lineStart()}function x(I,D){var k=t_([I,D]),P=e(I,D);n(f,d,c,h,p,m,f=P[0],d=P[1],c=I,h=k[0],p=k[1],m=k[2],C0e,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function S(){b(),g.point=T,g.lineEnd=C}function T(I,D){x(i=I,D),s=f,o=d,a=h,u=p,l=m,g.point=x}function C(){n(f,d,c,h,p,m,s,o,i,a,u,l,C0e,r),g.lineEnd=w,w()}return g}}var lTt=W5({point:function(e,t){this.stream.point(e*ar,t*ar)}});function cTt(e){return W5({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function fTt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function I0e(e,t,n,r,i,s){if(!s)return fTt(e,t,n,r,i);var o=cn(s),a=rn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Dm(e){return CDe(function(){return e})()}function CDe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=y0e,g=null,y,b,x,w=CR,S=.5,T,C,I,D,k;function P(q){return I(q[0]*ar,q[1]*ar)}function M(q){return q=I.invert(q[0],q[1]),q&&[q[0]*to,q[1]*to]}P.stream=function(q){return D&&k===q?D:D=lTt(cTt(c)(m(T(w(k=q)))))},P.preclip=function(q){return arguments.length?(m=q,p=void 0,B()):m},P.postclip=function(q){return arguments.length?(w=q,g=y=b=x=null,B()):w},P.clipAngle=function(q){return arguments.length?(m=+q?WSt(p=q*ar):(p=null,y0e),B()):p*to},P.clipExtent=function(q){return arguments.length?(w=q==null?(g=y=b=x=null,CR):hDe(g=+q[0][0],y=+q[0][1],b=+q[1][0],x=+q[1][1]),B()):g==null?null:[[g,y],[b,x]]},P.scale=function(q){return arguments.length?(n=+q,$()):n},P.translate=function(q){return arguments.length?(r=+q[0],i=+q[1],$()):[r,i]},P.center=function(q){return arguments.length?(s=q[0]%360*ar,o=q[1]%360*ar,$()):[s*to,o*to]},P.rotate=function(q){return arguments.length?(a=q[0]%360*ar,u=q[1]%360*ar,l=q.length>2?q[2]%360*ar:0,$()):[a*to,u*to,l*to]},P.angle=function(q){return arguments.length?(f=q%360*ar,$()):f*to},P.reflectX=function(q){return arguments.length?(d=q?-1:1,$()):d<0},P.reflectY=function(q){return arguments.length?(h=q?-1:1,$()):h<0},P.precision=function(q){return arguments.length?(T=A0e(C,S=q*q),B()):dl(S)},P.fitExtent=function(q,H){return G5(P,q,H)},P.fitSize=function(q,H){return QZ(P,q,H)},P.fitWidth=function(q,H){return JZ(P,q,H)},P.fitHeight=function(q,H){return ZZ(P,q,H)};function $(){var q=I0e(n,0,0,d,h,f).apply(null,t(s,o)),H=I0e(n,r-q[0],i-q[1],d,h,f);return c=lDe(a,u,l),C=$W(t,H),I=$W(c,C),T=A0e(C,S),B()}function B(){return D=k=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&M,$()}}function eee(e){var t=0,n=cr/3,r=CDe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*ar,n=s[1]*ar):[t*to,n*to]},i}function dTt(e){var t=cn(e);function n(r,i){return[r*t,rn(i)/t]}return n.invert=function(r,i){return[r/t,cc(i*t)]},n}function hTt(e,t){var n=rn(e),r=(n+rn(t))/2;if(Or(r)<dn)return dTt(e);var i=1+n*(2*r-n),s=dl(i)/r;function o(a,u){var l=dl(i-2*r*rn(u))/r;return[l*rn(a*=r),s-l*cn(a)]}return o.invert=function(a,u){var l=s-u,c=ad(a,Or(l))*Qf(l);return l*r<0&&(c-=cr*Qf(a)*Qf(l)),[c/r,cc((i-(a*a+l*l)*r*r)/(2*r))]},o}function cM(){return eee(hTt).scale(155.424).center([0,33.6442])}function ADe(){return cM().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function pTt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function mTt(){var e,t,n=ADe(),r,i=cM().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=cM().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=pTt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+dn,m+.12*h+dn],[p-.214*h-dn,m+.234*h-dn]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+dn,m+.166*h+dn],[p-.115*h-dn,m+.234*h-dn]]).stream(l),f()},c.fitExtent=function(d,h){return G5(c,d,h)},c.fitSize=function(d,h){return QZ(c,d,h)},c.fitWidth=function(d,h){return JZ(c,d,h)},c.fitHeight=function(d,h){return ZZ(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function IDe(e){return function(t,n){var r=cn(t),i=cn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*rn(t),s*rn(n)]}}function uN(e){return function(t,n){var r=dl(t*t+n*n),i=e(r),s=rn(i),o=cn(i);return[ad(t*s,r*o),cc(r&&n*s/r)]}}var kDe=IDe(function(e){return dl(2/(1+e))});kDe.invert=uN(function(e){return 2*cc(e/2)});function gTt(){return Dm(kDe).scale(124.75).clipAngle(180-.001)}var RDe=IDe(function(e){return(e=JRe(e))&&e/rn(e)});RDe.invert=uN(function(e){return e});function yTt(){return Dm(RDe).scale(79.4188).clipAngle(180-.001)}function Y5(e,t){return[e,q$(YZ((Hs+t)/2))]}Y5.invert=function(e,t){return[e,2*M2(QRe(t))-Hs]};function vTt(){return DDe(Y5).scale(961/fl)}function DDe(e){var t=Dm(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=cr*r(),d=t(FSt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===Y5?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function cO(e){return YZ((Hs+e)/2)}function bTt(e,t){var n=cn(e),r=e===t?rn(e):q$(n/cn(t))/q$(cO(t)/cO(e)),i=n*ZU(cO(e),r)/r;if(!r)return Y5;function s(o,a){i>0?a<-Hs+dn&&(a=-Hs+dn):a>Hs-dn&&(a=Hs-dn);var u=i/ZU(cO(a),r);return[u*rn(r*o),i-u*cn(r*o)]}return s.invert=function(o,a){var u=i-a,l=Qf(r)*dl(o*o+u*u),c=ad(o,Or(u))*Qf(u);return u*r<0&&(c-=cr*Qf(o)*Qf(u)),[c/r,2*M2(ZU(i/l,1/r))-Hs]},s}function xTt(){return eee(bTt).scale(109.5).parallels([30,30])}function fM(e,t){return[e,t]}fM.invert=fM;function _Tt(){return Dm(fM).scale(152.63)}function wTt(e,t){var n=cn(e),r=e===t?rn(e):(n-cn(t))/(t-e),i=n/r+e;if(Or(r)<dn)return fM;function s(o,a){var u=i-a,l=r*o;return[u*rn(l),i-u*cn(l)]}return s.invert=function(o,a){var u=i-a,l=ad(o,Or(u))*Qf(u);return u*r<0&&(l-=cr*Qf(o)*Qf(u)),[l/r,i-Qf(r)*dl(o*o+u*u)]},s}function ETt(){return eee(wTt).scale(131.154).center([0,13.9389])}var uk=1.340264,lk=-.081106,ck=893e-6,fk=.003796,dM=dl(3)/2,STt=12;function NDe(e,t){var n=cc(dM*rn(t)),r=n*n,i=r*r*r;return[e*cn(n)/(dM*(uk+3*lk*r+i*(7*ck+9*fk*r))),n*(uk+lk*r+i*(ck+fk*r))]}NDe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<STt&&(a=n*(uk+lk*r+i*(ck+fk*r))-t,u=uk+3*lk*r+i*(7*ck+9*fk*r),n-=o=a/u,r=n*n,i=r*r*r,!(Or(o)<TW));++s);return[dM*e*(uk+3*lk*r+i*(7*ck+9*fk*r))/cn(n),cc(rn(n)/dM)]};function TTt(){return Dm(NDe).scale(177.158)}function PDe(e,t){var n=cn(t),r=cn(e)*n;return[n*rn(e)/r,rn(t)/r]}PDe.invert=uN(M2);function CTt(){return Dm(PDe).scale(144.049).clipAngle(60)}function ATt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=W5({point:function(w,S){var T=x([w,S]);this.stream.point(T[0],T[1])}}),m=CR,g,y;function b(){return d=e*r,h=e*i,g=y=null,x}function x(w){var S=w[0]*d,T=w[1]*h;if(s){var C=T*o-S*a;S=S*o+T*a,T=C}return[S+t,T+n]}return x.invert=function(w){var S=w[0]-t,T=w[1]-n;if(s){var C=T*o+S*a;S=S*o-T*a,T=C}return[S/d,T/h]},x.stream=function(w){return g&&y===w?g:g=p(m(y=w))},x.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,b()):m},x.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,CR):hDe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),b()):u==null?null:[[u,l],[c,f]]},x.scale=function(w){return arguments.length?(e=+w,b()):e},x.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],b()):[t,n]},x.angle=function(w){return arguments.length?(s=w%360*ar,a=rn(s),o=cn(s),b()):s*to},x.reflectX=function(w){return arguments.length?(r=w?-1:1,b()):r<0},x.reflectY=function(w){return arguments.length?(i=w?-1:1,b()):i<0},x.fitExtent=function(w,S){return G5(x,w,S)},x.fitSize=function(w,S){return QZ(x,w,S)},x.fitWidth=function(w,S){return JZ(x,w,S)},x.fitHeight=function(w,S){return ZZ(x,w,S)},x}function ODe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}ODe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Or(i)>dn&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function ITt(){return Dm(ODe).scale(175.295)}function $De(e,t){return[cn(t)*rn(e),rn(t)]}$De.invert=uN(cc);function kTt(){return Dm($De).scale(249.5).clipAngle(90+dn)}function MDe(e,t){var n=cn(t),r=1+cn(e)*n;return[n*rn(e)/r,rn(t)/r]}MDe.invert=uN(function(e){return 2*M2(e)});function RTt(){return Dm(MDe).scale(250).clipAngle(142)}function LDe(e,t){return[q$(YZ((Hs+t)/2)),-e]}LDe.invert=function(e,t){return[-t,2*M2(QRe(e))-Hs]};function DTt(){var e=DDe(LDe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function NTt(e,t){return e.parent===t.parent?1:2}function PTt(e){return e.reduce(OTt,0)/e.length}function OTt(e,t){return e+t.x}function $Tt(e){return 1+e.reduce(MTt,0)}function MTt(e,t){return Math.max(e,t.y)}function LTt(e){for(var t;t=e.children;)e=t[0];return e}function FTt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function BTt(){var e=NTt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=PTt(h),d.y=$Tt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=LTt(s),l=FTt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function jTt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function UTt(){return this.eachAfter(jTt)}function zTt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function VTt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function HTt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function qTt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function WTt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function GTt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function YTt(e){for(var t=this,n=KTt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function KTt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function XTt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function QTt(){return Array.from(this)}function JTt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function ZTt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*e2t(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function K5(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=r2t)):t===void 0&&(t=n2t);for(var n=new dT(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new dT(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(FDe)}function t2t(){return K5(this).eachBefore(i2t)}function n2t(e){return e.children}function r2t(e){return Array.isArray(e)?e[1]:null}function i2t(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function FDe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function dT(e){this.data=e,this.depth=this.height=0,this.parent=null}dT.prototype=K5.prototype={constructor:dT,count:UTt,each:zTt,eachAfter:HTt,eachBefore:VTt,find:qTt,sum:WTt,sort:GTt,path:YTt,ancestors:XTt,descendants:QTt,leaves:JTt,links:ZTt,copy:t2t,[Symbol.iterator]:e2t};function H4(e){return e==null?null:BDe(e)}function BDe(e){if(typeof e!="function")throw new Error;return e}function Jb(){return 0}function xE(e){return function(){return e}}const s2t=1664525,o2t=1013904223,k0e=4294967296;function a2t(){let e=1;return()=>(e=(s2t*e+o2t)%k0e)/k0e}function u2t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function l2t(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function c2t(e,t){for(var n=0,r=(e=l2t(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&jDe(o,s)?++n:(o=d2t(i=f2t(i,s)),n=0);return o}function f2t(e,t){var n,r;if(iz(t,e))return[t];for(n=0;n<e.length;++n)if(fO(t,e[n])&&iz(fI(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(fO(fI(e[n],e[r]),t)&&fO(fI(e[n],t),e[r])&&fO(fI(e[r],t),e[n])&&iz(UDe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function fO(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function jDe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function iz(e,t){for(var n=0;n<t.length;++n)if(!jDe(e,t[n]))return!1;return!0}function d2t(e){switch(e.length){case 1:return h2t(e[0]);case 2:return fI(e[0],e[1]);case 3:return UDe(e[0],e[1],e[2])}}function h2t(e){return{x:e.x,y:e.y,r:e.r}}function fI(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function UDe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,b=r*r+i*i-s*s,x=b-o*o-a*a+u*u,w=b-l*l-c*c+f*f,S=h*p-d*m,T=(p*w-m*x)/(S*2)-r,C=(m*g-p*y)/S,I=(h*x-d*w)/(S*2)-i,D=(d*y-h*g)/S,k=C*C+D*D-1,P=2*(s+T*C+I*D),M=T*T+I*I-s*s,$=-(Math.abs(k)>1e-6?(P+Math.sqrt(P*P-4*k*M))/(2*k):M/P);return{x:r+T+C*$,y:i+I+D*$,r:$}}function R0e(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function D0e(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function N0e(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function dO(e){this._=e,this.next=null,this.previous=null}function p2t(e,t){if(!(s=(e=u2t(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;R0e(r,n,i=e[2]),n=new dO(n),r=new dO(r),i=new dO(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){R0e(n._,r._,i=e[u]),i=new dO(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(D0e(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(D0e(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=N0e(n);(i=i.next)!==r;)(a=N0e(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=c2t(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function m2t(e){return Math.sqrt(e.value)}function zDe(){var e=null,t=1,n=1,r=Jb;function i(s){const o=a2t();return s.x=t/2,s.y=n/2,e?s.eachBefore(P0e(e)).eachAfter(sz(r,.5,o)).eachBefore(O0e(1)):s.eachBefore(P0e(m2t)).eachAfter(sz(Jb,1,o)).eachAfter(sz(r,s.r/Math.min(t,n),o)).eachBefore(O0e(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=H4(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:xE(+s),i):r},i}function P0e(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function sz(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=p2t(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function O0e(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function VDe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function lN(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function g2t(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(VDe),o}function s(o,a){return function(u){u.children&&lN(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var y2t={depth:-1},$0e={},oz={};function v2t(e){return e.id}function b2t(e){return e.parentId}function M0e(){var e=v2t,t=b2t,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,S)=>x2t(n(w,S,i))),b=y.map(L0e),x=new Set(y).add("");for(const w of b)x.has(w)||(x.add(w),y.push(w),b.push(L0e(w)),s.push(oz));o=(w,S)=>y[S],a=(w,S)=>b[S]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new dT(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?$0e:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===$0e)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===oz&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===oz);--y)h.data=null}if(f.parent=y2t,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(FDe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=H4(i),r):e},r.parentId=function(i){return arguments.length?(t=H4(i),r):t},r.path=function(i){return arguments.length?(n=H4(i),r):n},r}function x2t(e){e=`${e}`;let t=e.length;return WW(e,t-1)&&!WW(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function L0e(e){let t=e.length;if(t<2)return"";for(;--t>1&&!WW(e,t););return e.slice(0,t)}function WW(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function _2t(e,t){return e.parent===t.parent?1:2}function az(e){var t=e.children;return t?t[0]:e.t}function uz(e){var t=e.children;return t?t[t.length-1]:e.t}function w2t(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function E2t(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function S2t(e,t,n){return e.a.parent===t.parent?e.a:n}function q4(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}q4.prototype=Object.create(dT.prototype);function T2t(e){for(var t=new q4(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new q4(s[o],o)),i.parent=n;return(t.parent=new q4(null,0)).children=[t],t}function C2t(){var e=_2t,t=1,n=1,r=null;function i(l){var c=T2t(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+m)*g,b.y=b.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){E2t(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,b=p.m,x=m.m,w;p=uz(p),d=az(d),p&&d;)m=az(m),h=uz(h),h.a=l,w=p.z+b-d.z-g+e(p._,d._),w>0&&(w2t(S2t(p,l,f),l,w),g+=w,y+=w),b+=p.m,g+=d.m,x+=m.m,y+=h.m;p&&!uz(h)&&(h.t=p,h.m+=b-y),d&&!az(m)&&(m.t=d,m.m+=g-x,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function X5(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var HDe=(1+Math.sqrt(5))/2;function qDe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,b,x,w,S,T;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=b=g,S=Math.max(p/h,h/p)/(m*e),T=g*g*S,w=Math.max(b/T,T/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>b&&(b=l),T=g*g*S,x=Math.max(b/T,T/y),x>w){g-=l;break}w=x}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?lN(u,n,r,i,m?r+=p*g/m:s):X5(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const WDe=function e(t){function n(r,i,s,o,a){qDe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(HDe);function A2t(){var e=WDe,t=!1,n=1,r=1,i=[0],s=Jb,o=Jb,a=Jb,u=Jb,l=Jb;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(VDe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=BDe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:xE(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:xE(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:xE(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:xE(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:xE(+d),c):l},c}function I2t(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var b=s[f];b.x0=p,b.y0=m,b.x1=g,b.y1=y;return}for(var x=l[f],w=h/2+x,S=f+1,T=d-1;S<T;){var C=S+T>>>1;l[C]<w?S=C+1:T=C}w-l[S-1]<l[S]-w&&f+1<S&&--S;var I=l[S]-x,D=h-I;if(g-p>y-m){var k=h?(p*D+g*I)/h:g;c(f,S,I,p,m,k,y),c(S,d,D,k,m,g,y)}else{var P=h?(m*D+y*I)/h:y;c(f,S,I,p,m,g,P),c(S,d,D,p,P,g,y)}}}function k2t(e,t,n,r,i){(e.depth&1?X5:lN)(e,t,n,r,i)}const R2t=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?lN(l,i,s,o,m?s+=(a-s)*l.value/m:a):X5(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=qDe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(HDe);function Vh(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Bv(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const GW=Symbol("implicit");function jv(){var e=new vme,t=[],n=[],r=GW;function i(s){let o=e.get(s);if(o===void 0){if(r!==GW)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new vme;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return jv(t,n).unknown(r)},Vh.apply(i,arguments),i}function L2(){var e=jv().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Kl(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return L2(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},Vh.apply(f(),arguments)}function D2t(e){return function(){return e}}function YW(e){return+e}var F0e=[0,1];function Xl(e){return e}function KW(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:D2t(isNaN(t)?NaN:.5)}function N2t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function P2t(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=KW(i,r),s=n(o,s)):(r=KW(r,i),s=n(s,o)),function(a){return s(r(a))}}function O2t(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=KW(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=U1(e,a,1,r)-1;return s[u](i[u](a))}}function cN(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Q5(){var e=F0e,t=F0e,n=zg,r,i,s,o=Xl,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Xl&&(o=N2t(e[0],e[d-1])),a=d>2?O2t:P2t,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),qf)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,YW),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=sN,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Xl,c()):o!==Xl},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function GDe(){return Q5()(Xl,Xl)}function YDe(e,t,n,r){var i=z1(e,t,n),s;switch(r=e_(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=KRe(i,o))&&(r.precision=s),GZ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=XRe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=YRe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Fv(r)}function Q_(e){var t=e.domain;return e.ticks=function(n){var r=t();return aW(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return YDe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=uW(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function fc(){var e=GDe();return e.copy=function(){return cN(e,fc())},Vh.apply(e,arguments),Q_(e)}function KDe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,YW),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return KDe(e).unknown(t)},e=arguments.length?Array.from(e,YW):[0,1],Q_(n)}function XDe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function B0e(e){return Math.log(e)}function j0e(e){return Math.exp(e)}function $2t(e){return-Math.log(-e)}function M2t(e){return-Math.exp(-e)}function L2t(e){return isFinite(e)?+("1e"+e):e<0?0:e}function F2t(e){return e===10?L2t:e===Math.E?Math.exp:t=>Math.pow(e,t)}function B2t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function U0e(e){return(t,n)=>-e(-t,n)}function tee(e){const t=e(B0e,j0e),n=t.domain;let r=10,i,s;function o(){return i=B2t(r),s=F2t(r),n()[0]<0?(i=U0e(i),s=U0e(s),e($2t,M2t)):e(B0e,j0e),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=aW(l,c,g))}else y=aW(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=e_(u)).precision==null&&(u.trim=!0),u=Fv(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(XDe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function QDe(){const e=tee(Q5()).domain([1,10]);return e.copy=()=>cN(e,QDe()).base(e.base()),Vh.apply(e,arguments),e}function z0e(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function V0e(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function nee(e){var t=1,n=e(z0e(t),V0e(t));return n.constant=function(r){return arguments.length?e(z0e(t=+r),V0e(t)):t},Q_(n)}function JDe(){var e=nee(Q5());return e.copy=function(){return cN(e,JDe()).constant(e.constant())},Vh.apply(e,arguments)}function H0e(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function j2t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function U2t(e){return e<0?-e*e:e*e}function ree(e){var t=e(Xl,Xl),n=1;function r(){return n===1?e(Xl,Xl):n===.5?e(j2t,U2t):e(H0e(n),H0e(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Q_(t)}function iee(){var e=ree(Q5());return e.copy=function(){return cN(e,iee()).exponent(e.exponent())},Vh.apply(e,arguments),e}function z2t(){return iee.apply(null,arguments).exponent(.5)}function ZDe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=zke(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[U1(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Y0),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return ZDe().domain(e).range(t).unknown(r)},Vh.apply(s,arguments)}function eNe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[U1(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return eNe().domain([e,t]).range(i).unknown(s)},Vh.apply(Q_(o),arguments)}function tNe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[U1(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return tNe().domain(e).range(t).unknown(n)},Vh.apply(i,arguments)}const lz=new Date,cz=new Date;function Wo(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Wo(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(lz.setTime(+s),cz.setTime(+o),e(lz),e(cz),Math.floor(n(lz,cz))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const hT=Wo(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);hT.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Wo(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):hT);hT.range;const M0=1e3,Jf=M0*60,L0=Jf*60,bg=L0*24,see=bg*7,q0e=bg*30,fz=bg*365,F0=Wo(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*M0)},(e,t)=>(t-e)/M0,e=>e.getUTCSeconds());F0.range;const J5=Wo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*M0)},(e,t)=>{e.setTime(+e+t*Jf)},(e,t)=>(t-e)/Jf,e=>e.getMinutes());J5.range;const Z5=Wo(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Jf)},(e,t)=>(t-e)/Jf,e=>e.getUTCMinutes());Z5.range;const e8=Wo(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*M0-e.getMinutes()*Jf)},(e,t)=>{e.setTime(+e+t*L0)},(e,t)=>(t-e)/L0,e=>e.getHours());e8.range;const t8=Wo(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*L0)},(e,t)=>(t-e)/L0,e=>e.getUTCHours());t8.range;const Q0=Wo(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jf)/bg,e=>e.getDate()-1);Q0.range;const _1=Wo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bg,e=>e.getUTCDate()-1);_1.range;const nNe=Wo(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/bg,e=>Math.floor(e/bg));nNe.range;function J_(e){return Wo(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Jf)/see)}const F2=J_(0),hM=J_(1),V2t=J_(2),H2t=J_(3),pT=J_(4),q2t=J_(5),W2t=J_(6);F2.range;hM.range;V2t.range;H2t.range;pT.range;q2t.range;W2t.range;function Z_(e){return Wo(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/see)}const B2=Z_(0),pM=Z_(1),G2t=Z_(2),Y2t=Z_(3),mT=Z_(4),K2t=Z_(5),X2t=Z_(6);B2.range;pM.range;G2t.range;Y2t.range;mT.range;K2t.range;X2t.range;const kR=Wo(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kR.range;const RR=Wo(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());RR.range;const um=Wo(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());um.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wo(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});um.range;const lm=Wo(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());lm.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Wo(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});lm.range;function rNe(e,t,n,r,i,s){const o=[[F0,1,M0],[F0,5,5*M0],[F0,15,15*M0],[F0,30,30*M0],[s,1,Jf],[s,5,5*Jf],[s,15,15*Jf],[s,30,30*Jf],[i,1,L0],[i,3,3*L0],[i,6,6*L0],[i,12,12*L0],[r,1,bg],[r,2,2*bg],[n,1,see],[t,1,q0e],[t,3,3*q0e],[e,1,fz]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=O2(([,,g])=>g).right(o,d);if(h===o.length)return e.every(z1(l/fz,c/fz,f));if(h===0)return hT.every(Math.max(z1(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Q2t,J2t]=rNe(lm,RR,B2,nNe,t8,Z5),[Z2t,eCt]=rNe(um,kR,F2,Q0,e8,J5);function dz(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function hz(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function mA(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function iNe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=gA(i),c=yA(i),f=gA(s),d=yA(s),h=gA(o),p=yA(o),m=gA(a),g=yA(a),y=gA(u),b=yA(u),x={a:Y,A:K,b:Q,B:L,c:null,d:Q0e,e:Q0e,f:ECt,g:PCt,G:$Ct,H:xCt,I:_Ct,j:wCt,L:sNe,m:SCt,M:TCt,p:z,q:W,Q:ege,s:tge,S:CCt,u:ACt,U:ICt,V:kCt,w:RCt,W:DCt,x:null,X:null,y:NCt,Y:OCt,Z:MCt,"%":Z0e},w={a:F,A:V,b:J,B:ue,c:null,d:J0e,e:J0e,f:jCt,g:XCt,G:JCt,H:LCt,I:FCt,j:BCt,L:aNe,m:UCt,M:zCt,p:we,q:he,Q:ege,s:tge,S:VCt,u:HCt,U:qCt,V:WCt,w:GCt,W:YCt,x:null,X:null,y:KCt,Y:QCt,Z:ZCt,"%":Z0e},S={a:k,A:P,b:M,B:$,c:B,d:K0e,e:K0e,f:gCt,g:Y0e,G:G0e,H:X0e,I:X0e,j:dCt,L:mCt,m:fCt,M:hCt,p:D,q:cCt,Q:vCt,s:bCt,S:pCt,u:sCt,U:oCt,V:aCt,w:iCt,W:uCt,x:q,X:H,y:Y0e,Y:G0e,Z:lCt,"%":yCt};x.x=T(n,x),x.X=T(r,x),x.c=T(t,x),w.x=T(n,w),w.X=T(r,w),w.c=T(t,w);function T(ke,Pe){return function(rt){var Re=[],St=-1,Je=0,It=ke.length,mt,Te,Fe;for(rt instanceof Date||(rt=new Date(+rt));++St<It;)ke.charCodeAt(St)===37&&(Re.push(ke.slice(Je,St)),(Te=W0e[mt=ke.charAt(++St)])!=null?mt=ke.charAt(++St):Te=mt==="e"?" ":"0",(Fe=Pe[mt])&&(mt=Fe(rt,Te)),Re.push(mt),Je=St+1);return Re.push(ke.slice(Je,St)),Re.join("")}}function C(ke,Pe){return function(rt){var Re=mA(1900,void 0,1),St=I(Re,ke,rt+="",0),Je,It;if(St!=rt.length)return null;if("Q"in Re)return new Date(Re.Q);if("s"in Re)return new Date(Re.s*1e3+("L"in Re?Re.L:0));if(Pe&&!("Z"in Re)&&(Re.Z=0),"p"in Re&&(Re.H=Re.H%12+Re.p*12),Re.m===void 0&&(Re.m="q"in Re?Re.q:0),"V"in Re){if(Re.V<1||Re.V>53)return null;"w"in Re||(Re.w=1),"Z"in Re?(Je=hz(mA(Re.y,0,1)),It=Je.getUTCDay(),Je=It>4||It===0?pM.ceil(Je):pM(Je),Je=_1.offset(Je,(Re.V-1)*7),Re.y=Je.getUTCFullYear(),Re.m=Je.getUTCMonth(),Re.d=Je.getUTCDate()+(Re.w+6)%7):(Je=dz(mA(Re.y,0,1)),It=Je.getDay(),Je=It>4||It===0?hM.ceil(Je):hM(Je),Je=Q0.offset(Je,(Re.V-1)*7),Re.y=Je.getFullYear(),Re.m=Je.getMonth(),Re.d=Je.getDate()+(Re.w+6)%7)}else("W"in Re||"U"in Re)&&("w"in Re||(Re.w="u"in Re?Re.u%7:"W"in Re?1:0),It="Z"in Re?hz(mA(Re.y,0,1)).getUTCDay():dz(mA(Re.y,0,1)).getDay(),Re.m=0,Re.d="W"in Re?(Re.w+6)%7+Re.W*7-(It+5)%7:Re.w+Re.U*7-(It+6)%7);return"Z"in Re?(Re.H+=Re.Z/100|0,Re.M+=Re.Z%100,hz(Re)):dz(Re)}}function I(ke,Pe,rt,Re){for(var St=0,Je=Pe.length,It=rt.length,mt,Te;St<Je;){if(Re>=It)return-1;if(mt=Pe.charCodeAt(St++),mt===37){if(mt=Pe.charAt(St++),Te=S[mt in W0e?Pe.charAt(St++):mt],!Te||(Re=Te(ke,rt,Re))<0)return-1}else if(mt!=rt.charCodeAt(Re++))return-1}return Re}function D(ke,Pe,rt){var Re=l.exec(Pe.slice(rt));return Re?(ke.p=c.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function k(ke,Pe,rt){var Re=h.exec(Pe.slice(rt));return Re?(ke.w=p.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function P(ke,Pe,rt){var Re=f.exec(Pe.slice(rt));return Re?(ke.w=d.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function M(ke,Pe,rt){var Re=y.exec(Pe.slice(rt));return Re?(ke.m=b.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function $(ke,Pe,rt){var Re=m.exec(Pe.slice(rt));return Re?(ke.m=g.get(Re[0].toLowerCase()),rt+Re[0].length):-1}function B(ke,Pe,rt){return I(ke,t,Pe,rt)}function q(ke,Pe,rt){return I(ke,n,Pe,rt)}function H(ke,Pe,rt){return I(ke,r,Pe,rt)}function Y(ke){return o[ke.getDay()]}function K(ke){return s[ke.getDay()]}function Q(ke){return u[ke.getMonth()]}function L(ke){return a[ke.getMonth()]}function z(ke){return i[+(ke.getHours()>=12)]}function W(ke){return 1+~~(ke.getMonth()/3)}function F(ke){return o[ke.getUTCDay()]}function V(ke){return s[ke.getUTCDay()]}function J(ke){return u[ke.getUTCMonth()]}function ue(ke){return a[ke.getUTCMonth()]}function we(ke){return i[+(ke.getUTCHours()>=12)]}function he(ke){return 1+~~(ke.getUTCMonth()/3)}return{format:function(ke){var Pe=T(ke+="",x);return Pe.toString=function(){return ke},Pe},parse:function(ke){var Pe=C(ke+="",!1);return Pe.toString=function(){return ke},Pe},utcFormat:function(ke){var Pe=T(ke+="",w);return Pe.toString=function(){return ke},Pe},utcParse:function(ke){var Pe=C(ke+="",!0);return Pe.toString=function(){return ke},Pe}}}var W0e={"-":"",_:" ",0:"0"},va=/^\s*\d+/,tCt=/^%/,nCt=/[\\^$*+?|[\]().{}]/g;function ni(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function rCt(e){return e.replace(nCt,"\\$&")}function gA(e){return new RegExp("^(?:"+e.map(rCt).join("|")+")","i")}function yA(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function iCt(e,t,n){var r=va.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function sCt(e,t,n){var r=va.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function oCt(e,t,n){var r=va.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function aCt(e,t,n){var r=va.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function uCt(e,t,n){var r=va.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function G0e(e,t,n){var r=va.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Y0e(e,t,n){var r=va.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function lCt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function cCt(e,t,n){var r=va.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function fCt(e,t,n){var r=va.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function K0e(e,t,n){var r=va.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function dCt(e,t,n){var r=va.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function X0e(e,t,n){var r=va.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function hCt(e,t,n){var r=va.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function pCt(e,t,n){var r=va.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function mCt(e,t,n){var r=va.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function gCt(e,t,n){var r=va.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function yCt(e,t,n){var r=tCt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function vCt(e,t,n){var r=va.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function bCt(e,t,n){var r=va.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Q0e(e,t){return ni(e.getDate(),t,2)}function xCt(e,t){return ni(e.getHours(),t,2)}function _Ct(e,t){return ni(e.getHours()%12||12,t,2)}function wCt(e,t){return ni(1+Q0.count(um(e),e),t,3)}function sNe(e,t){return ni(e.getMilliseconds(),t,3)}function ECt(e,t){return sNe(e,t)+"000"}function SCt(e,t){return ni(e.getMonth()+1,t,2)}function TCt(e,t){return ni(e.getMinutes(),t,2)}function CCt(e,t){return ni(e.getSeconds(),t,2)}function ACt(e){var t=e.getDay();return t===0?7:t}function ICt(e,t){return ni(F2.count(um(e)-1,e),t,2)}function oNe(e){var t=e.getDay();return t>=4||t===0?pT(e):pT.ceil(e)}function kCt(e,t){return e=oNe(e),ni(pT.count(um(e),e)+(um(e).getDay()===4),t,2)}function RCt(e){return e.getDay()}function DCt(e,t){return ni(hM.count(um(e)-1,e),t,2)}function NCt(e,t){return ni(e.getFullYear()%100,t,2)}function PCt(e,t){return e=oNe(e),ni(e.getFullYear()%100,t,2)}function OCt(e,t){return ni(e.getFullYear()%1e4,t,4)}function $Ct(e,t){var n=e.getDay();return e=n>=4||n===0?pT(e):pT.ceil(e),ni(e.getFullYear()%1e4,t,4)}function MCt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ni(t/60|0,"0",2)+ni(t%60,"0",2)}function J0e(e,t){return ni(e.getUTCDate(),t,2)}function LCt(e,t){return ni(e.getUTCHours(),t,2)}function FCt(e,t){return ni(e.getUTCHours()%12||12,t,2)}function BCt(e,t){return ni(1+_1.count(lm(e),e),t,3)}function aNe(e,t){return ni(e.getUTCMilliseconds(),t,3)}function jCt(e,t){return aNe(e,t)+"000"}function UCt(e,t){return ni(e.getUTCMonth()+1,t,2)}function zCt(e,t){return ni(e.getUTCMinutes(),t,2)}function VCt(e,t){return ni(e.getUTCSeconds(),t,2)}function HCt(e){var t=e.getUTCDay();return t===0?7:t}function qCt(e,t){return ni(B2.count(lm(e)-1,e),t,2)}function uNe(e){var t=e.getUTCDay();return t>=4||t===0?mT(e):mT.ceil(e)}function WCt(e,t){return e=uNe(e),ni(mT.count(lm(e),e)+(lm(e).getUTCDay()===4),t,2)}function GCt(e){return e.getUTCDay()}function YCt(e,t){return ni(pM.count(lm(e)-1,e),t,2)}function KCt(e,t){return ni(e.getUTCFullYear()%100,t,2)}function XCt(e,t){return e=uNe(e),ni(e.getUTCFullYear()%100,t,2)}function QCt(e,t){return ni(e.getUTCFullYear()%1e4,t,4)}function JCt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?mT(e):mT.ceil(e),ni(e.getUTCFullYear()%1e4,t,4)}function ZCt(){return"+0000"}function Z0e(){return"%"}function ege(e){return+e}function tge(e){return Math.floor(+e/1e3)}var eE,oee,lNe,fN,cNe;eAt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function eAt(e){return eE=iNe(e),oee=eE.format,lNe=eE.parse,fN=eE.utcFormat,cNe=eE.utcParse,eE}function tAt(e){return new Date(e)}function nAt(e){return e instanceof Date?+e:+new Date(+e)}function aee(e,t,n,r,i,s,o,a,u,l){var c=GDe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),b=l("%b %d"),x=l("%B"),w=l("%Y");function S(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?m:s(T)<T?g:r(T)<T?i(T)<T?y:b:n(T)<T?x:w)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,nAt)):d().map(tAt)},c.ticks=function(T){var C=d();return e(C[0],C[C.length-1],T??10)},c.tickFormat=function(T,C){return C==null?S:l(C)},c.nice=function(T){var C=d();return(!T||typeof T.range!="function")&&(T=t(C[0],C[C.length-1],T??10)),T?d(XDe(C,T)):c},c.copy=function(){return cN(c,aee(e,t,n,r,i,s,o,a,u,l))},c}function uee(){return Vh.apply(aee(Z2t,eCt,um,kR,F2,Q0,e8,J5,F0,oee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rAt(){return Vh.apply(aee(Q2t,J2t,lm,RR,B2,_1,t8,Z5,F0,fN).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function n8(){var e=0,t=1,n,r,i,s,o=Xl,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(zg),l.rangeRound=c(sN),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Uv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function lee(){var e=Q_(n8()(Xl));return e.copy=function(){return Uv(e,lee())},Bv.apply(e,arguments)}function fNe(){var e=tee(n8()).domain([1,10]);return e.copy=function(){return Uv(e,fNe()).base(e.base())},Bv.apply(e,arguments)}function dNe(){var e=nee(n8());return e.copy=function(){return Uv(e,dNe()).constant(e.constant())},Bv.apply(e,arguments)}function cee(){var e=ree(n8());return e.copy=function(){return Uv(e,cee()).exponent(e.exponent())},Bv.apply(e,arguments)}function iAt(){return cee.apply(null,arguments).exponent(.5)}function r8(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Xl,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,b,x;return arguments.length?([y,b,x]=g,l=LZ(m,[y,b,x]),h):[l(0),l(.5),l(1)]}}return h.range=p(zg),h.rangeRound=p(sN),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function hNe(){var e=Q_(r8()(Xl));return e.copy=function(){return Uv(e,hNe())},Bv.apply(e,arguments)}function pNe(){var e=tee(r8()).domain([.1,1,10]);return e.copy=function(){return Uv(e,pNe()).base(e.base())},Bv.apply(e,arguments)}function mNe(){var e=nee(r8());return e.copy=function(){return Uv(e,mNe()).constant(e.constant())},Bv.apply(e,arguments)}function fee(){var e=ree(r8());return e.copy=function(){return Uv(e,fee()).exponent(e.exponent())},Bv.apply(e,arguments)}function sAt(){return fee.apply(null,arguments).exponent(.5)}function Hh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const oAt=Hh("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),aAt=Hh("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),uAt=Hh("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),lAt=Hh("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),cAt=Hh("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),fAt=Hh("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),dAt=Hh("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),hAt=Hh("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),pAt=Hh("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),mAt=Hh("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),i8=Hh("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Qn(e){return function(){return e}}const nge=Math.abs,ru=Math.atan2,xb=Math.cos,gAt=Math.max,pz=Math.min,sp=Math.sin,yx=Math.sqrt,au=1e-12,gT=Math.PI,mM=gT/2,dk=2*gT;function yAt(e){return e>1?0:e<-1?gT:Math.acos(e)}function rge(e){return e>=1?mM:e<=-1?-mM:Math.asin(e)}function s8(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new zZ(t)}function vAt(e){return e.innerRadius}function bAt(e){return e.outerRadius}function xAt(e){return e.startAngle}function _At(e){return e.endAngle}function wAt(e){return e&&e.padAngle}function EAt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<au))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function hO(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/yx(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,b=p-d,x=m-h,w=b*b+x*x,S=i-s,T=d*m-p*h,C=(x<0?-1:1)*yx(gAt(0,S*S*w-T*T)),I=(T*x-b*C)/w,D=(-T*b-x*C)/w,k=(T*x+b*C)/w,P=(-T*b+x*C)/w,M=I-g,$=D-y,B=k-g,q=P-y;return M*M+$*$>B*B+q*q&&(I=k,D=P),{cx:I,cy:D,x01:-c,y01:-f,x11:I*(i/S-1),y11:D*(i/S-1)}}function XW(){var e=vAt,t=bAt,n=Qn(0),r=null,i=xAt,s=_At,o=wAt,a=null,u=s8(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-mM,m=s.apply(this,arguments)-mM,g=nge(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>au))a.moveTo(0,0);else if(g>dk-au)a.moveTo(h*xb(p),h*sp(p)),a.arc(0,0,h,p,m,!y),d>au&&(a.moveTo(d*xb(m),d*sp(m)),a.arc(0,0,d,m,p,y));else{var b=p,x=m,w=p,S=m,T=g,C=g,I=o.apply(this,arguments)/2,D=I>au&&(r?+r.apply(this,arguments):yx(d*d+h*h)),k=pz(nge(h-d)/2,+n.apply(this,arguments)),P=k,M=k,$,B;if(D>au){var q=rge(D/d*sp(I)),H=rge(D/h*sp(I));(T-=q*2)>au?(q*=y?1:-1,w+=q,S-=q):(T=0,w=S=(p+m)/2),(C-=H*2)>au?(H*=y?1:-1,b+=H,x-=H):(C=0,b=x=(p+m)/2)}var Y=h*xb(b),K=h*sp(b),Q=d*xb(S),L=d*sp(S);if(k>au){var z=h*xb(x),W=h*sp(x),F=d*xb(w),V=d*sp(w),J;if(g<gT)if(J=EAt(Y,K,F,V,z,W,Q,L)){var ue=Y-J[0],we=K-J[1],he=z-J[0],ke=W-J[1],Pe=1/sp(yAt((ue*he+we*ke)/(yx(ue*ue+we*we)*yx(he*he+ke*ke)))/2),rt=yx(J[0]*J[0]+J[1]*J[1]);P=pz(k,(d-rt)/(Pe-1)),M=pz(k,(h-rt)/(Pe+1))}else P=M=0}C>au?M>au?($=hO(F,V,Y,K,h,M,y),B=hO(z,W,Q,L,h,M,y),a.moveTo($.cx+$.x01,$.cy+$.y01),M<k?a.arc($.cx,$.cy,M,ru($.y01,$.x01),ru(B.y01,B.x01),!y):(a.arc($.cx,$.cy,M,ru($.y01,$.x01),ru($.y11,$.x11),!y),a.arc(0,0,h,ru($.cy+$.y11,$.cx+$.x11),ru(B.cy+B.y11,B.cx+B.x11),!y),a.arc(B.cx,B.cy,M,ru(B.y11,B.x11),ru(B.y01,B.x01),!y))):(a.moveTo(Y,K),a.arc(0,0,h,b,x,!y)):a.moveTo(Y,K),!(d>au)||!(T>au)?a.lineTo(Q,L):P>au?($=hO(Q,L,z,W,d,-P,y),B=hO(Y,K,F,V,d,-P,y),a.lineTo($.cx+$.x01,$.cy+$.y01),P<k?a.arc($.cx,$.cy,P,ru($.y01,$.x01),ru(B.y01,B.x01),!y):(a.arc($.cx,$.cy,P,ru($.y01,$.x01),ru($.y11,$.x11),!y),a.arc(0,0,d,ru($.cy+$.y11,$.cx+$.x11),ru(B.cy+B.y11,B.cx+B.x11),y),a.arc(B.cx,B.cy,P,ru(B.y11,B.x11),ru(B.y01,B.x01),!y))):a.arc(0,0,d,S,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-gT/2;return[xb(f)*c,sp(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Qn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Qn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Qn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Qn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Qn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Qn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Qn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function o8(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gNe(e){this._context=e}gNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function dee(e){return new gNe(e)}function yNe(e){return e[0]}function vNe(e){return e[1]}function bNe(e,t){var n=Qn(!0),r=null,i=dee,s=null,o=s8(a);e=typeof e=="function"?e:e===void 0?yNe:Qn(e),t=typeof t=="function"?t:t===void 0?vNe:Qn(t);function a(u){var l,c=(u=o8(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Qn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Qn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Qn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function xNe(e,t,n){var r=null,i=Qn(!0),s=null,o=dee,a=null,u=s8(l);e=typeof e=="function"?e:e===void 0?yNe:Qn(+e),t=typeof t=="function"?t:Qn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?vNe:Qn(+n);function l(f){var d,h,p,m=(f=o8(f)).length,g,y=!1,b,x=new Array(m),w=new Array(m);for(s==null&&(a=o(b=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(x[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(x[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):x[d],n?+n(g,d,f):w[d]))}if(b)return a=null,b+""||null}function c(){return bNe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Qn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Qn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Qn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Qn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Qn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function SAt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function TAt(e){return e}function CAt(){var e=TAt,t=SAt,n=null,r=Qn(0),i=Qn(dk),s=Qn(0);function o(a){var u,l=(a=o8(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(dk,Math.max(-dk,i.apply(this,arguments)-m)),y,b=Math.min(Math.abs(g)/l,s.apply(this,arguments)),x=b*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(S,T){return t(p[S],p[T])}):n!=null&&h.sort(function(S,T){return n(a[S],a[T])}),u=0,f=d?(g-l*x)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+x,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:b};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:Qn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:Qn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:Qn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:Qn(+a),o):s},o}const AAt={draw(e,t){const n=yx(t/gT);e.moveTo(n,0),e.arc(0,0,n,0,dk)}};function IAt(e,t){let n=null,r=s8(i);e=typeof e=="function"?e:Qn(e||AAt),t=typeof t=="function"?t:Qn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Qn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Qn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function H1(){}function gM(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function a8(e){this._context=e}a8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kAt(e){return new a8(e)}function _Ne(e){this._context=e}_Ne.prototype={areaStart:H1,areaEnd:H1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function RAt(e){return new _Ne(e)}function wNe(e){this._context=e}wNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function DAt(e){return new wNe(e)}function ENe(e,t){this._basis=new a8(e),this._beta=t}ENe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const NAt=function e(t){function n(r){return t===1?new a8(r):new ENe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function yM(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function hee(e,t){this._context=e,this._k=(1-t)/6}hee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:yM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:yM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const PAt=function e(t){function n(r){return new hee(r,t)}return n.tension=function(r){return e(+r)},n}(0);function pee(e,t){this._context=e,this._k=(1-t)/6}pee.prototype={areaStart:H1,areaEnd:H1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:yM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const OAt=function e(t){function n(r){return new pee(r,t)}return n.tension=function(r){return e(+r)},n}(0);function mee(e,t){this._context=e,this._k=(1-t)/6}mee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:yM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const $At=function e(t){function n(r){return new mee(r,t)}return n.tension=function(r){return e(+r)},n}(0);function gee(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>au){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>au){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function SNe(e,t){this._context=e,this._alpha=t}SNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:gee(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const MAt=function e(t){function n(r){return t?new SNe(r,t):new hee(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function TNe(e,t){this._context=e,this._alpha=t}TNe.prototype={areaStart:H1,areaEnd:H1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:gee(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const LAt=function e(t){function n(r){return t?new TNe(r,t):new pee(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function CNe(e,t){this._context=e,this._alpha=t}CNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:gee(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const FAt=function e(t){function n(r){return t?new CNe(r,t):new mee(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function ANe(e){this._context=e}ANe.prototype={areaStart:H1,areaEnd:H1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function BAt(e){return new ANe(e)}function ige(e){return e<0?-1:1}function sge(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(ige(s)+ige(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function oge(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function mz(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function vM(e){this._context=e}vM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:mz(this,this._t0,oge(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,mz(this,oge(this,n=sge(this,e,t)),n);break;default:mz(this,this._t0,n=sge(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function INe(e){this._context=new kNe(e)}(INe.prototype=Object.create(vM.prototype)).point=function(e,t){vM.prototype.point.call(this,t,e)};function kNe(e){this._context=e}kNe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function jAt(e){return new vM(e)}function UAt(e){return new INe(e)}function RNe(e){this._context=e}RNe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=age(e),i=age(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function age(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function zAt(e){return new RNe(e)}function u8(e,t){this._context=e,this._t=t}u8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function VAt(e){return new u8(e,.5)}function HAt(e){return new u8(e,0)}function qAt(e){return new u8(e,1)}function uge(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function lge(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function WAt(e,t){return e[t]}function GAt(e){const t=[];return t.key=e,t}function YAt(){var e=Qn([]),t=lge,n=uge,r=WAt;function i(s){var o=Array.from(e.apply(this,arguments),GAt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=o8(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Qn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:Qn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?lge:typeof s=="function"?s:Qn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??uge,i):n},i}function dI(e,t,n){this.k=e,this.x=t,this.y=n}dI.prototype={constructor:dI,scale:function(e){return e===1?this:new dI(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new dI(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};dI.prototype;function oh(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function q1(e){return!!e&&!!e[bs]}function xg(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===rIt}(e)||Array.isArray(e)||!!e[gge]||!!(!((t=e.constructor)===null||t===void 0)&&t[gge])||yee(e)||vee(e))}function r_(e,t,n){n===void 0&&(n=!1),j2(e)===0?(n?Object.keys:xS)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function j2(e){var t=e[bs];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:yee(e)?2:vee(e)?3:0}function bS(e,t){return j2(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function KAt(e,t){return j2(e)===2?e.get(t):e[t]}function DNe(e,t,n){var r=j2(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function NNe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function yee(e){return tIt&&e instanceof Map}function vee(e){return nIt&&e instanceof Set}function jb(e){return e.o||e.t}function bee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ONe(e);delete t[bs];for(var n=xS(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function xee(e,t){return t===void 0&&(t=!1),_ee(e)||q1(e)||!xg(e)||(j2(e)>1&&(e.set=e.add=e.clear=e.delete=XAt),Object.freeze(e),t&&r_(e,function(n,r){return xee(r,!0)},!0)),e}function XAt(){oh(2)}function _ee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Gp(e){var t=eG[e];return t||oh(18,e),t}function QAt(e,t){eG[e]||(eG[e]=t)}function QW(){return DR}function gz(e,t){t&&(Gp("Patches"),e.u=[],e.s=[],e.v=t)}function bM(e){JW(e),e.p.forEach(JAt),e.p=null}function JW(e){e===DR&&(DR=e.l)}function cge(e){return DR={p:[],l:DR,h:e,m:!0,_:0}}function JAt(e){var t=e[bs];t.i===0||t.i===1?t.j():t.g=!0}function yz(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Gp("ES5").S(t,e,r),r?(n[bs].P&&(bM(t),oh(4)),xg(e)&&(e=xM(t,e),t.l||_M(t,e)),t.u&&Gp("Patches").M(n[bs].t,e,t.u,t.s)):e=xM(t,n,[]),bM(t),t.u&&t.v(t.u,t.s),e!==PNe?e:void 0}function xM(e,t,n){if(_ee(t))return t;var r=t[bs];if(!r)return r_(t,function(a,u){return fge(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return _M(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=bee(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),r_(s,function(a,u){return fge(e,r,i,a,u,n,o)}),_M(e,i,!1),n&&e.u&&Gp("Patches").N(r,n,e.u,e.s)}return r.o}function fge(e,t,n,r,i,s,o){if(q1(i)){var a=xM(e,i,s&&t&&t.i!==3&&!bS(t.R,r)?s.concat(r):void 0);if(DNe(n,r,a),!q1(a))return;e.m=!1}else o&&n.add(i);if(xg(i)&&!_ee(i)){if(!e.h.D&&e._<1)return;xM(e,i),t&&t.A.l||_M(e,i)}}function _M(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&xee(t,n)}function vz(e,t){var n=e[bs];return(n?jb(n):e)[t]}function dge(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Vy(e){e.P||(e.P=!0,e.l&&Vy(e.l))}function bz(e){e.o||(e.o=bee(e.t))}function ZW(e,t,n){var r=yee(t)?Gp("MapSet").F(t,n):vee(t)?Gp("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:QW(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=NR;o&&(u=[a],l=hI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Gp("ES5").J(t,n);return(n?n.A:QW()).p.push(r),r}function ZAt(e){return q1(e)||oh(22,e),function t(n){if(!xg(n))return n;var r,i=n[bs],s=j2(n);if(i){if(!i.P&&(i.i<4||!Gp("ES5").K(i)))return i.t;i.I=!0,r=hge(n,s),i.I=!1}else r=hge(n,s);return r_(r,function(o,a){i&&KAt(i.t,o)===a||DNe(r,o,t(a))}),s===3?new Set(r):r}(e)}function hge(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return bee(e)}function eIt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[bs];return NR.get(u,s)},set:function(u){var l=this[bs];NR.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][bs];if(!a.P)switch(a.i){case 5:r(a)&&Vy(a);break;case 4:n(a)&&Vy(a)}}}function n(s){for(var o=s.t,a=s.k,u=xS(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==bs){var f=o[c];if(f===void 0&&!bS(o,c))return!0;var d=a[c],h=d&&d[bs];if(h?h.t!==f:!NNe(d,f))return!0}}var p=!!o[bs];return u.length!==xS(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};QAt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=ONe(f);delete p[bs];for(var m=xS(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:QW(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,bs,{value:l,writable:!0}),u},S:function(s,o,a){a?q1(o)&&o[bs].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[bs];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)r_(d,function(x){x!==bs&&(f[x]!==void 0||bS(f,x)?h[x]||u(d[x]):(h[x]=!0,Vy(c)))}),r_(f,function(x){d[x]!==void 0||bS(d,x)||(h[x]=!1,Vy(c))});else if(p===5){if(r(c)&&(Vy(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),b=0;b<y;b++)d.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&u(d[b])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var pge,DR,wee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",tIt=typeof Map<"u",nIt=typeof Set<"u",mge=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",PNe=wee?Symbol.for("immer-nothing"):((pge={})["immer-nothing"]=!0,pge),gge=wee?Symbol.for("immer-draftable"):"__$immer_draftable",bs=wee?Symbol.for("immer-state"):"__$immer_state",rIt=""+Object.prototype.constructor,xS=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ONe=Object.getOwnPropertyDescriptors||function(e){var t={};return xS(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},eG={},NR={get:function(e,t){if(t===bs)return e;var n=jb(e);if(!bS(n,t))return function(i,s,o){var a,u=dge(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!xg(r)?r:r===vz(e.t,t)?(bz(e),e.o[t]=ZW(e.A.h,r,e)):r},has:function(e,t){return t in jb(e)},ownKeys:function(e){return Reflect.ownKeys(jb(e))},set:function(e,t,n){var r=dge(jb(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=vz(jb(e),t),s=i==null?void 0:i[bs];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(NNe(n,i)&&(n!==void 0||bS(e.t,t)))return!0;bz(e),Vy(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return vz(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,bz(e),Vy(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=jb(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){oh(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){oh(12)}},hI={};r_(NR,function(e,t){hI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),hI.deleteProperty=function(e,t){return hI.set.call(this,e,t,void 0)},hI.set=function(e,t,n){return NR.set.call(this,e[0],t,n,e[0])};var iIt=function(){function e(n){var r=this;this.O=mge,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,b=Array(y>1?y-1:0),x=1;x<y;x++)b[x-1]=arguments[x];return u.produce(m,function(w){var S;return(S=s).call.apply(S,[g,w].concat(b))})}}var l;if(typeof s!="function"&&oh(6),o!==void 0&&typeof o!="function"&&oh(7),xg(i)){var c=cge(r),f=ZW(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?bM(c):JW(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return gz(c,o),yz(m,c)},function(m){throw bM(c),m}):(gz(c,o),yz(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===PNe&&(l=void 0),r.D&&xee(l,!0),o){var h=[],p=[];Gp("Patches").M(i,l,h,p),o(h,p)}return l}oh(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){xg(n)||oh(8),q1(n)&&(n=ZAt(n));var r=cge(this),i=ZW(this,n,void 0);return i[bs].C=!0,JW(r),i},t.finishDraft=function(n,r){var i=n&&n[bs],s=i.A;return gz(s,r),yz(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!mge&&oh(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Gp("Patches").$;return q1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ff=new iIt,$Ne=ff.produce;ff.produceWithPatches.bind(ff);ff.setAutoFreeze.bind(ff);ff.setUseProxies.bind(ff);ff.applyPatches.bind(ff);ff.createDraft.bind(ff);ff.finishDraft.bind(ff);function PR(e){"@babel/helpers - typeof";return PR=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PR(e)}function sIt(e,t){if(PR(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(PR(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oIt(e){var t=sIt(e,"string");return PR(t)=="symbol"?t:t+""}function aIt(e,t,n){return(t=oIt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function vge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yge(Object(n),!0).forEach(function(r){aIt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yge(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lu(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var bge=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),xz=function(){return Math.random().toString(36).substring(7).split("").join(".")},wM={INIT:"@@redux/INIT"+xz(),REPLACE:"@@redux/REPLACE"+xz(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+xz()}};function uIt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function MNe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(lu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(lu(1));return n(MNe)(e,t)}if(typeof e!="function")throw new Error(lu(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(lu(3));return s}function f(m){if(typeof m!="function")throw new Error(lu(4));if(u)throw new Error(lu(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(lu(6));g=!1,l();var b=a.indexOf(m);a.splice(b,1),o=null}}}function d(m){if(!uIt(m))throw new Error(lu(7));if(typeof m.type>"u")throw new Error(lu(8));if(u)throw new Error(lu(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var b=g[y];b()}return m}function h(m){if(typeof m!="function")throw new Error(lu(10));i=m,d({type:wM.REPLACE})}function p(){var m,g=f;return m={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(lu(11));function x(){b.next&&b.next(c())}x();var w=g(x);return{unsubscribe:w}}},m[bge]=function(){return this},m}return d({type:wM.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[bge]=p,r}function lIt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:wM.INIT});if(typeof r>"u")throw new Error(lu(12));if(typeof n(void 0,{type:wM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(lu(13))})}function cIt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{lIt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(lu(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function EM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function fIt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(lu(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=EM.apply(void 0,a)(i.dispatch),vge(vge({},i),{},{dispatch:s})}}}function LNe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var tG=LNe();tG.withExtraArgument=LNe;var FNe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dN=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},i_=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},dIt=Object.defineProperty,hIt=Object.defineProperties,pIt=Object.getOwnPropertyDescriptors,xge=Object.getOwnPropertySymbols,mIt=Object.prototype.hasOwnProperty,gIt=Object.prototype.propertyIsEnumerable,_ge=function(e,t,n){return t in e?dIt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},w1=function(e,t){for(var n in t||(t={}))mIt.call(t,n)&&_ge(e,n,t[n]);if(xge)for(var r=0,i=xge(t);r<i.length;r++){var n=i[r];gIt.call(t,n)&&_ge(e,n,t[n])}return e},_z=function(e,t){return hIt(e,pIt(t))},hN=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},yIt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?EM:EM.apply(null,arguments)};function BNe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var vIt=function(e){return e&&typeof e.match=="function"};function Yp(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return w1(w1({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function bIt(e){return BNe(e)&&"type"in e}var xIt=function(e){FNe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,i_([void 0],n[0].concat(this)))):new(t.bind.apply(t,i_([void 0],n.concat(this))))},t}(Array),_It=function(e){FNe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,i_([void 0],n[0].concat(this)))):new(t.bind.apply(t,i_([void 0],n.concat(this))))},t}(Array);function nG(e){return xg(e)?$Ne(e,function(){}):e}function wIt(e){return typeof e=="boolean"}function EIt(){return function(t){return SIt(t)}}function SIt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new xIt;return n&&(wIt(n)?r.push(tG):r.push(tG.withExtraArgument(n.extraArgument))),r}function TIt(e){var t=EIt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(BNe(i))h=cIt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=fIt.apply(void 0,p),g=EM;u&&(g=yIt(w1({trace:!1},typeof u=="object"&&u)));var y=new _It(m),b=y;Array.isArray(d)?b=i_([m],d):typeof d=="function"&&(b=d(y));var x=g.apply(void 0,b);return MNe(h,c,x)}function jNe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function CIt(e){return typeof e=="function"}function AIt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?jNe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(CIt(e))u=function(){return nG(e())};else{var l=nG(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=i_([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(q1(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(xg(p))return $Ne(p,function(b){return m(b,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function IIt(e,t){return e+"/"+t}function kIt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:nG(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=IIt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Yp(d,p):Yp(d)});function u(){var c=typeof e.extraReducers=="function"?jNe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=w1(w1({},d),o);return AIt(n,function(b){for(var x in y)b.addCase(x,y[x]);for(var w=0,S=p;w<S.length;w++){var T=S[w];b.addMatcher(T.matcher,T.reducer)}g&&b.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var RIt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",UNe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=RIt[Math.random()*64|0];return t},DIt=["name","message","stack","code"],wz=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),wge=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),NIt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=DIt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Yp(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:_z(w1({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Yp(t+"/pending",function(l,c,f){return{payload:void 0,meta:_z(w1({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Yp(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||NIt)(l||"Rejected"),meta:_z(w1({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):UNe(),p=new a,m;function g(b){m=b,p.abort()}var y=function(){return hN(this,null,function(){var b,x,w,S,T,C,I;return dN(this,function(D){switch(D.label){case 0:return D.trys.push([0,4,,5]),S=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,l,{getState:f,extra:d}),OIt(S)?[4,S]:[3,2];case 1:S=D.sent(),D.label=2;case 2:if(S===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(k,P){return p.signal.addEventListener("abort",function(){return P({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(x=r==null?void 0:r.getPendingMeta)==null?void 0:x.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,P){return new wz(k,P)},fulfillWithValue:function(k,P){return new wge(k,P)}})).then(function(k){if(k instanceof wz)throw k;return k instanceof wge?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=D.sent(),[3,5];case 4:return C=D.sent(),w=C instanceof wz?o(null,h,l,C.payload,C.meta):o(C,h,l),[3,5];case 5:return I=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,I||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(PIt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function PIt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function OIt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var $It=function(e,t){return vIt(e)?e.match(t):e(t)};function Ege(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return $It(r,n)})}}var Eee=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},rG=function(){},zNe=function(e,t){return t===void 0&&(t=rG),e.catch(t),e},VNe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},_S=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},MIt="task",HNe="listener",qNe="completed",See="cancelled",LIt="task-"+See,FIt="task-"+qNe,WNe=HNe+"-"+See,BIt=HNe+"-"+qNe,l8=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=MIt+" "+See+" (reason: "+t+")"}return e}(),wS=function(e){if(e.aborted)throw new l8(e.reason)};function GNe(e,t){var n=rG;return new Promise(function(r,i){var s=function(){return i(new l8(e.reason))};if(e.aborted){s();return}n=VNe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=rG})}var jIt=function(e,t){return hN(void 0,null,function(){var n,r;return dN(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof l8?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},SM=function(e){return function(t){return zNe(GNe(e,t).then(function(n){return wS(e),n}))}},YNe=function(e){var t=SM(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},UIt=Object.assign,Sge={},pN="listenerMiddleware",zIt=function(e,t){var n=function(r){return VNe(e,function(){return _S(r,e.reason)})};return function(r,i){Eee(r,"taskExecutor");var s=new AbortController;n(s);var o=jIt(function(){return hN(void 0,null,function(){var a;return dN(this,function(u){switch(u.label){case 0:return wS(e),wS(s.signal),[4,r({pause:SM(s.signal),delay:YNe(s.signal),signal:s.signal})];case 1:return a=u.sent(),wS(s.signal),[2,a]}})})},function(){return _S(s,FIt)});return i!=null&&i.autoJoin&&t.push(o),{result:SM(e)(o),cancel:function(){_S(s,LIt)}}}},VIt=function(e,t){var n=function(r,i){return hN(void 0,null,function(){var s,o,a,u;return dN(this,function(l){switch(l.label){case 0:wS(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,GNe(t,Promise.race(a))];case 2:return u=l.sent(),wS(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return zNe(n(r,i))}},KNe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Yp(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Eee(s,"options.listener"),{predicate:i,type:t,effect:s}},HIt=function(e){var t=KNe(e),n=t.type,r=t.predicate,i=t.effect,s=UNe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},iG=function(e){e.pending.forEach(function(t){_S(t,WNe)})},qIt=function(e){return function(){e.forEach(iG),e.clear()}},Tge=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},WIt=Yp(pN+"/add"),GIt=Yp(pN+"/removeAll"),YIt=Yp(pN+"/remove"),KIt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,i_([pN+"/error"],e))};function XIt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?KIt:i;Eee(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&iG(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=HIt(h)),o(p)},l=function(h){var p=KNe(h),m=p.type,g=p.effect,y=p.predicate,b=a(function(x){var w=typeof m=="string"?x.type===m:x.predicate===y;return w&&x.effect===g});return b&&(b.unsubscribe(),h.cancelActive&&iG(b)),!!b},c=function(h,p,m,g){return hN(t,null,function(){var y,b,x,w;return dN(this,function(S){switch(S.label){case 0:y=new AbortController,b=VIt(u,y.signal),x=[],S.label=1;case 1:return S.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,UIt({},m,{getOriginalState:g,condition:function(T,C){return b(T,C).then(Boolean)},take:b,delay:YNe(y.signal),pause:SM(y.signal),extra:r,signal:y.signal,fork:zIt(y.signal,x),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,C,I){T!==y&&(_S(T,WNe),I.delete(T))})}})))];case 2:return S.sent(),[3,6];case 3:return w=S.sent(),w instanceof l8||Tge(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(x)];case 5:return S.sent(),_S(y,BIt),h.pending.delete(y),[7];case 6:return[2]}})})},f=qIt(n),d=function(h){return function(p){return function(m){if(!bIt(m))return p(m);if(WIt.match(m))return u(m.payload);if(GIt.match(m)){f();return}if(YIt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Sge)throw new Error(pN+": getOriginalState can only be called synchronously");return g},b;try{if(b=p(m),n.size>0)for(var x=h.getState(),w=Array.from(n.values()),S=0,T=w;S<T.length;S++){var C=T[S],I=!1;try{I=C.predicate(m,x,g)}catch(D){I=!1,Tge(s,D,{raisedBy:"predicate"})}I&&c(C,m,h,y)}}finally{g=Sge}return b}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Cge;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);eIt();function QIt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let pO;const JIt=new Uint8Array(16);function ZIt(){if(!pO&&(pO=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!pO))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pO(JIt)}const Ea=[];for(let e=0;e<256;++e)Ea.push((e+256).toString(16).slice(1));function ekt(e,t=0){return(Ea[e[t+0]]+Ea[e[t+1]]+Ea[e[t+2]]+Ea[e[t+3]]+"-"+Ea[e[t+4]]+Ea[e[t+5]]+"-"+Ea[e[t+6]]+Ea[e[t+7]]+"-"+Ea[e[t+8]]+Ea[e[t+9]]+"-"+Ea[e[t+10]]+Ea[e[t+11]]+Ea[e[t+12]]+Ea[e[t+13]]+Ea[e[t+14]]+Ea[e[t+15]]).toLowerCase()}const tkt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Age={randomUUID:tkt};function Ige(e,t,n){if(Age.randomUUID&&!e)return Age.randomUUID();e=e||{};const r=e.random||(e.rng||ZIt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ekt(r)}class Kp{static get(){let t=Ige();for(;this.ids.has(t);)t=Ige();return this.ids.set(t,!0),t}}Kp.ids=new Map;function _h(e){return"parent"in e}function nkt(e){return!_h(e)}function rkt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Kp.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Kp.get(),createdOn:Date.now(),val:r}]:[];return{id:Kp.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function ikt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Kp.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Kp.get(),createdOn:Date.now(),val:s}]:[];return{id:Kp.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function js(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=hkt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function s_(e){return!!e&&!!e[df]}function W1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===pkt}(e)||Array.isArray(e)||!!e[hk]||!!(!((t=e.constructor)===null||t===void 0)&&t[hk])||c8(e)||f8(e))}function yT(e,t,n){n===void 0&&(n=!1),G1(e)===0?(n?Object.keys:Ree)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function G1(e){var t=e[df];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:c8(e)?2:f8(e)?3:0}function OR(e,t){return G1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function W4(e,t){return G1(e)===2?e.get(t):e[t]}function XNe(e,t,n){var r=G1(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function skt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function c8(e){return fkt&&e instanceof Map}function f8(e){return dkt&&e instanceof Set}function Ub(e){return e.o||e.t}function Tee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=mkt(e);delete t[df];for(var n=Ree(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Cee(e,t){return t===void 0&&(t=!1),Aee(e)||s_(e)||!W1(e)||(G1(e)>1&&(e.set=e.add=e.clear=e.delete=okt),Object.freeze(e),t&&yT(e,function(n,r){return Cee(r,!0)},!0)),e}function okt(){js(2)}function Aee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Xp(e){var t=uG[e];return t||js(18,e),t}function akt(e,t){uG[e]||(uG[e]=t)}function kge(){return{}.NODE_ENV==="production"||vT||js(0),vT}function Ez(e,t){t&&(Xp("Patches"),e.u=[],e.s=[],e.v=t)}function TM(e){sG(e),e.p.forEach(ukt),e.p=null}function sG(e){e===vT&&(vT=e.l)}function Rge(e){return vT={p:[],l:vT,h:e,m:!0,_:0}}function ukt(e){var t=e[df];t.i===0||t.i===1?t.j():t.O=!0}function Sz(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||Xp("ES5").S(t,e,r),r?(n[df].P&&(TM(t),js(4)),W1(e)&&(e=CM(t,e),t.l||AM(t,e)),t.u&&Xp("Patches").M(n[df].t,e,t.u,t.s)):e=CM(t,n,[]),TM(t),t.u&&t.v(t.u,t.s),e!==kee?e:void 0}function CM(e,t,n){if(Aee(t))return t;var r=t[df];if(!r)return yT(t,function(s,o){return Dge(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return AM(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=Tee(r.k):r.o;yT(r.i===3?new Set(i):i,function(s,o){return Dge(e,r,i,s,o,n)}),AM(e,i,!1),n&&e.u&&Xp("Patches").R(r,n,e.u,e.s)}return r.o}function Dge(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&js(5),s_(i)){var o=CM(e,i,s&&t&&t.i!==3&&!OR(t.D,r)?s.concat(r):void 0);if(XNe(n,r,o),!s_(o))return;e.m=!1}if(W1(i)&&!Aee(i)){if(!e.h.F&&e._<1)return;CM(e,i),t&&t.A.l||AM(e,i)}}function AM(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&Cee(t,n)}function Tz(e,t){var n=e[df];return(n?Ub(n):e)[t]}function Nge(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function oG(e){e.P||(e.P=!0,e.l&&oG(e.l))}function Cz(e){e.o||(e.o=Tee(e.t))}function aG(e,t,n){var r=c8(t)?Xp("MapSet").N(t,n):f8(t)?Xp("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:kge(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=lG;o&&(u=[a],l=pI);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Xp("ES5").J(t,n);return(n?n.A:kge()).p.push(r),r}function lkt(e){return s_(e)||js(22,e),function t(n){if(!W1(n))return n;var r,i=n[df],s=G1(n);if(i){if(!i.P&&(i.i<4||!Xp("ES5").K(i)))return i.t;i.I=!0,r=Pge(n,s),i.I=!1}else r=Pge(n,s);return yT(r,function(o,a){i&&W4(i.t,o)===a||XNe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Pge(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Tee(e)}function ckt(){function e(r){if(!W1(r))return r;if(Array.isArray(r))return r.map(e);if(c8(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(f8(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return OR(r,hk)&&(i[hk]=r[hk]),i}function t(r){return s_(r)?e(r):r}var n="add";akt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=G1(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||js(24),typeof u=="function"&&f==="prototype"&&js(24),typeof(u=W4(u,f))!="object"&&js(15,o.join("/"))}var d=G1(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:js(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:js(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;yT(a.D,function(h,p){var m=W4(f,h),g=W4(d,h),y=p?OR(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var b=u.concat(h);l.push(y==="remove"?{op:y,path:b}:{op:y,path:b,value:g}),c.push(y===n?{op:"remove",path:b}:y==="remove"?{op:n,path:b,value:t(m)}:{op:"replace",path:b,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var b=f.length;b<h.length;b++){var x=u.concat([b]);l.push({op:n,path:x,value:t(h[b])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===kee?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Oge,vT,Iee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",fkt=typeof Map<"u",dkt=typeof Set<"u",$ge=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",kee=Iee?Symbol.for("immer-nothing"):((Oge={})["immer-nothing"]=!0,Oge),hk=Iee?Symbol.for("immer-draftable"):"__$immer_draftable",df=Iee?Symbol.for("immer-state"):"__$immer_state",hkt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},pkt=""+Object.prototype.constructor,Ree=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,mkt=Object.getOwnPropertyDescriptors||function(e){var t={};return Ree(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},uG={},lG={get:function(e,t){if(t===df)return e;var n=Ub(e);if(!OR(n,t))return function(i,s,o){var a,u=Nge(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!W1(r)?r:r===Tz(e.t,t)?(Cz(e),e.o[t]=aG(e.A.h,r,e)):r},has:function(e,t){return t in Ub(e)},ownKeys:function(e){return Reflect.ownKeys(Ub(e))},set:function(e,t,n){var r=Nge(Ub(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Tz(Ub(e),t),s=i==null?void 0:i[df];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(skt(n,i)&&(n!==void 0||OR(e.t,t)))return!0;Cz(e),oG(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Tz(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Cz(e),oG(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Ub(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){js(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){js(12)}},pI={};yT(lG,function(e,t){pI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),pI.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&js(13),pI.set.call(this,e,t,void 0)},pI.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&js(14),lG.set.call(this,e[0],t,n,e[0])};var gkt=function(){function e(n){var r=this;this.g=$ge,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,b=Array(y>1?y-1:0),x=1;x<y;x++)b[x-1]=arguments[x];return u.produce(m,function(w){var S;return(S=s).call.apply(S,[g,w].concat(b))})}}var l;if(typeof s!="function"&&js(6),o!==void 0&&typeof o!="function"&&js(7),W1(i)){var c=Rge(r),f=aG(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?TM(c):sG(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Ez(c,o),Sz(m,c)},function(m){throw TM(c),m}):(Ez(c,o),Sz(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===kee&&(l=void 0),r.F&&Cee(l,!0),o){var h=[],p=[];Xp("Patches").M(i,l,h,p),o(h,p)}return l}js(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){W1(n)||js(8),s_(n)&&(n=lkt(n));var r=Rge(this),i=aG(this,n,void 0);return i[df].C=!0,sG(r),i},t.finishDraft=function(n,r){var i=n&&n[df];({}).NODE_ENV!=="production"&&(i&&i.C||js(9),i.I&&js(10));var s=i.A;return Ez(s,r),Sz(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!$ge&&js(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Xp("Patches").$;return s_(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),hf=new gkt,ykt=hf.produce;hf.produceWithPatches.bind(hf);hf.setAutoFreeze.bind(hf);hf.setUseProxies.bind(hf);hf.applyPatches.bind(hf);hf.createDraft.bind(hf);hf.finishDraft.bind(hf);function vkt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=rkt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return kIt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Kp.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Kp.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function bkt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=vkt(e),s=XIt();s.startListening({matcher:Ege(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Ege(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=TIt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Kp.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var xkt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_kt=Object.prototype.hasOwnProperty;function cG(e,t){return _kt.call(e,t)}function fG(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)cG(e,i)&&r.push(i);return r}function Ql(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function dG(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function zb(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function QNe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function hG(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(hG(e[t]))return!0}else if(typeof e=="object"){for(var r=fG(e),i=r.length,s=0;s<i;s++)if(hG(e[r[s]]))return!0}}return!1}function Mge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var JNe=function(e){xkt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Mge(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Mge(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ms=JNe,wkt=Ql,GE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=IM(n,this.path);r&&(r=Ql(r));var i=Ox(n,{op:"remove",path:this.from}).removed;return Ox(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=IM(n,this.from);return Ox(n,{op:"add",path:this.path,value:Ql(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:$R(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Ekt={add:function(e,t,n){return dG(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:GE.move,copy:GE.copy,test:GE.test,_get:GE._get};function IM(e,t){if(t=="")return e;var n={op:"_get",path:t};return Ox(e,n),n.value}function Ox(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):kM(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=IM(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=$R(e,t.value),o.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ms("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Ql(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=kM;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=QNe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!dG(h))throw new Ms("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);dG(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ms("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=Ekt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=GE[t.op].call(t,l,h,e);if(o.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ms("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function d8(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ms("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Ql(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Ox(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function Skt(e,t,n){var r=Ox(e,t);if(r.test===!1)throw new Ms("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function kM(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ms("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(GE[e.op]){if(typeof e.path!="string")throw new Ms("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ms('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ms("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ms("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&hG(e.value))throw new Ms("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ms("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ms("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=ZNe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ms("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ms("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function ZNe(e,t,n){try{if(!Array.isArray(e))throw new Ms("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)d8(Ql(t),Ql(e),n||!0);else{n=n||kM;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ms)return i;throw i}}function $R(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!$R(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!$R(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Tkt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ms,_areEquals:$R,applyOperation:Ox,applyPatch:d8,applyReducer:Skt,deepClone:wkt,getValueByPointer:IM,validate:ZNe,validator:kM},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Dee=new WeakMap,Ckt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Akt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Ikt(e){return Dee.get(e)}function kkt(e,t){return e.observers.get(t)}function Rkt(e,t){e.observers.delete(t.callback)}function Dkt(e,t){t.unobserve()}function Nkt(e,t){var n=[],r,i=Ikt(e);if(!i)i=new Ckt(e),Dee.set(e,i);else{var s=kkt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Ql(e),t){r.callback=t,r.next=null;var o=function(){pG(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){pG(r),clearTimeout(r.next),Rkt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Akt(t,r)),r}function pG(e,t){t===void 0&&(t=!1);var n=Dee.get(e.object);Nee(n.value,e.object,e.patches,"",t),e.patches.length&&d8(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Nee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=fG(t),o=fG(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(cG(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Nee(c,f,n,r+"/"+zb(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+zb(l),value:Ql(c)}),n.push({op:"replace",path:r+"/"+zb(l),value:Ql(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+zb(l),value:Ql(c)}),n.push({op:"remove",path:r+"/"+zb(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!cG(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+zb(l),value:Ql(t[l])})}}}function ePe(e,t,n){n===void 0&&(n=!1);var r=[];return Nee(e,t,r,"",n),r}const Pkt=Object.freeze(Object.defineProperty({__proto__:null,compare:ePe,generate:pG,observe:Nkt,unobserve:Dkt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Tkt,Pkt,{JsonPatchError:JNe,deepClone:Ql,escapePathComponent:zb,unescapePathComponent:QNe});var mI=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(mI||{});function G4(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=tPe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=G4(i,t);return d8(a,Ql(o),!0,!1).newDocument}function Okt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function mN({registry:e,initialState:t}){let n=!1;const r=QIt(),i=bkt(t);function s(c){return i.backend.nodes[c]}r.listen(mI.TRAVERSAL_START,()=>{n=!0}),r.listen(mI.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return G4(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=G4(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const b=ePe(y,f);if(Okt(f,b)==="checkpoint")g={type:"checkpoint",val:f};else{const x=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:b,checkpointRef:x}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=ikt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=G4(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(mI.TRAVERSAL_START);const f=tPe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);Mkt(p,m)?_h(p)&&d.push(...p.sideEffects.undo):_h(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(mI.TRAVERSAL_END)},undo(){const{current:c}=i;return _h(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return nPe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function $kt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;_h(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)_h(r)&&(r=n[r.parent]),_h(i)&&(i=n[i.parent]);return r.id}function tPe(e,t,n){const r=$kt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),_h(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),_h(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function Mkt(e,t){if(_h(e)&&e.parent===t.id)return!0;if(_h(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function nPe(e,t){return{...e,children:e.children.map(n=>nPe(t[n],t)),name:`${e.label}`}}ckt();function Lkt(e){return e.length===2?ykt(e):e}class ew{static create(){return new ew}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:Lkt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Yp(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}const Lge=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},U2=e=>{const t=N.useRef(null),n=Lge(e),[r,i]=N.useState(0),[s,o]=N.useState(0);N.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Lge({...n,width:n.width||r,height:n.height||s});return[t,a]},Fkt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:U2},Symbol.toStringTag,{value:"Module"})),Bkt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function jkt({parameters:e,setAnswer:t}){const[n,r]=U2(Bkt),[i,s]=N.useState(100),[o,a]=N.useState(100),[u,l]=N.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=N.useMemo(()=>{const p=ew.create(),m=p.register("click",(y,b)=>(y.clickX=b.clickX,y.clickY=b.clickY,y.distance=b.distance,y)),g=mN({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=N.useCallback(p=>{const m=Qr("#movingCircle"),g=Qr("#clickAccuracySvg"),y=O$(p,g.node()),b=[+m.attr("cx"),+m.attr("cy")],x=`${Math.round(Math.sqrt((y[0]-b[0])**2+(y[1]-b[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+x,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:x}})},[f,t,c,d]);return N.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;Qr(n.current).select("circle").transition().duration(y).ease(Ywt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(Ie,{children:["Adjust speed (px/s):",_.jsx(v5,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const Ukt=Object.freeze(Object.defineProperty({__proto__:null,default:jkt},Symbol.toStringTag,{value:"Module"}));function Pee({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?fN("%B"):Fv(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(Ua,{children:_.jsx(bi,{gap:3,children:_.jsx(nt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(Ua,{children:_.jsx(ss,{withinPortal:!0,label:c,children:_.jsx(nt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const zkt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:Pee},Symbol.toStringTag,{value:"Module"}));function rPe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Ua,{children:_.jsx(bi,{gap:3,children:_.jsx(nt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(bi,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(nt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const Vkt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:rPe},Symbol.toStringTag,{value:"Module"})),Nf={top:15,left:100,right:50,bottom:50};function mG({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Jc(),o=N.useMemo(()=>s-Nf.left-Nf.right,[s]),a=N.useMemo(()=>i-Nf.top-Nf.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return jv(i8).domain(d)},[n,t.category]),l=N.useMemo(()=>e?fc([Nf.left,o+Nf.left]).domain([0,K0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?L2([Nf.top,a+Nf.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:Nf.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Nf.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(Pee,{xScale:l,yRange:c.range(),vertPosition:a+Nf.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(rPe,{yScale:c,horizontalPosition:Nf.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(_c,{})}const Hkt=Object.freeze(Object.defineProperty({__proto__:null,Bar:mG,default:mG},Symbol.toStringTag,{value:"Module"})),Jr=Array.isArray;function dc(e){return e!=null?Jr(e)?e:[e]:[]}function qkt(e=0,t=1/0){return`${Fge(e)} < row_number() && row_number() <= ${Fge(t)}`}function Fge(e){return e<0?`count() + ${e}`:e}class iPe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(qkt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,dc(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Jn(e){throw Error(e)}function hl(e){return typeof e=="number"}function fs(e){return typeof e=="function"}function h8(e,t){const n=Array(e);if(fs(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let Wkt=class extends iPe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Jn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Jn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Jn("Not implemented")}getter(t){Jn("Not implemented")}objects(t){Jn("Not implemented")}object(t){Jn("Not implemented")}[Symbol.iterator](){Jn("Not implemented")}print(t={}){hl(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=h8(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},Gkt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},Ykt=function(e){return e&&fs(e.get)?e:new Gkt(e)};function _g(e){return e instanceof Date}function Au(e){return e===Object(e)}function RM(e){return e instanceof RegExp}function qa(e){return typeof e=="string"}function Kkt(e,t){const n=r=>Jn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?Bge(e.entries(),t):_g(e)?n("Date"):RM(e)?n("RegExp"):qa(e)?n():Jr(e)?Xkt(e,t):fs(e[Symbol.iterator])?Qkt(e,t):Au(e)?Bge(Object.entries(e),t):n()}function Bge(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function Xkt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function Qkt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:Jkt}=Object.prototype;function Rh(e,t){return Jkt.call(e,t)}function wf(e){return e?new jge({...e.data()},e.columnNames()):new jge}class jge{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Rh(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const Wr=void 0,Zkt=Object.getPrototypeOf(Int8Array);function gN(e){return e instanceof Zkt}function vx(e){return Jr(e)||gN(e)}function hh(e){return e!=null&&e===e}const vA=e=>vx(e)||qa(e),eRt={compact:e=>vx(e)?e.filter(t=>hh(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>vA(e)?e.includes(t,n):!1,indexof:(e,t)=>vA(e)?e.indexOf(t):-1,join:(e,t)=>vx(e)?e.join(t):Wr,lastindexof:(e,t)=>vA(e)?e.lastIndexOf(t):-1,length:e=>vA(e)?e.length:0,pluck:(e,t)=>vx(e)?e.map(n=>hh(n)?n[t]:Wr):Wr,reverse:e=>vx(e)?e.slice().reverse():qa(e)?e.split("").reverse().join(""):Wr,slice:(e,t,n)=>vA(e)?e.slice(t,n):Wr};function tRt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function Y4(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const op=e=>(e<10?"0":"")+e,nRt=e=>e<0?"-"+Y4(-e,6):e>9999?"+"+Y4(e,6):Y4(e,4);function sPe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return nRt(e)+"-"+op(t+1)+"-"+op(n)+(!u||o?"T"+op(r)+":"+op(i)+":"+op(s)+"."+Y4(o,3)+l:s?"T"+op(r)+":"+op(i)+":"+op(s)+l:i||r||!a?"T"+op(r)+":"+op(i)+l:"")}function oPe(e,t){return isNaN(e)?"Invalid Date":sPe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function p8(e,t){return isNaN(e)?"Invalid Date":sPe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const rRt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function iRt(e){return e.match(rRt)&&!isNaN(Date.parse(e))}function sRt(e,t=Date.parse){return iRt(e)?t(e):e}const aPe=6e4,uPe=864e5,lPe=6048e5,Bs=new Date,Us=new Date,Zs=e=>(Bs.setTime(typeof e=="string"?sRt(e):e),Bs);function oRt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function aRt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function uRt(e){Us.setTime(+e),Us.setHours(0,0,0,0),Bs.setTime(+Us),Bs.setMonth(0),Bs.setDate(1);const t=(Us.getTimezoneOffset()-Bs.getTimezoneOffset())*aPe;return Math.floor(1+(Us-Bs-t)/uPe)}function lRt(e){Us.setTime(+e),Us.setUTCHours(0,0,0,0);const t=Date.UTC(Us.getUTCFullYear(),0,1);return Math.floor(1+(Us-t)/uPe)}function cRt(e,t){const n=t||0;Us.setTime(+e),Us.setDate(Us.getDate()-(Us.getDay()+7-n)%7),Us.setHours(0,0,0,0),Bs.setTime(+e),Bs.setMonth(0),Bs.setDate(1),Bs.setDate(1-(Bs.getDay()+7-n)%7),Bs.setHours(0,0,0,0);const r=(Us.getTimezoneOffset()-Bs.getTimezoneOffset())*aPe;return Math.floor((1+(Us-Bs)-r)/lPe)}function fRt(e,t){const n=t||0;return Us.setTime(+e),Us.setUTCDate(Us.getUTCDate()-(Us.getUTCDay()+7-n)%7),Us.setUTCHours(0,0,0,0),Bs.setTime(+e),Bs.setUTCMonth(0),Bs.setUTCDate(1),Bs.setUTCDate(1-(Bs.getUTCDay()+7-n)%7),Bs.setUTCHours(0,0,0,0),Math.floor((1+(Us-Bs))/lPe)}const dRt={format_date:(e,t)=>oPe(Zs(e),!t),format_utcdate:(e,t)=>p8(Zs(e),!t),timestamp:e=>+Zs(e),year:e=>Zs(e).getFullYear(),quarter:e=>Math.floor(Zs(e).getMonth()/3),month:e=>Zs(e).getMonth(),date:e=>Zs(e).getDate(),dayofweek:e=>Zs(e).getDay(),hours:e=>Zs(e).getHours(),minutes:e=>Zs(e).getMinutes(),seconds:e=>Zs(e).getSeconds(),milliseconds:e=>Zs(e).getMilliseconds(),utcyear:e=>Zs(e).getUTCFullYear(),utcquarter:e=>Math.floor(Zs(e).getUTCMonth()/3),utcmonth:e=>Zs(e).getUTCMonth(),utcdate:e=>Zs(e).getUTCDate(),utcdayofweek:e=>Zs(e).getUTCDay(),utchours:e=>Zs(e).getUTCHours(),utcminutes:e=>Zs(e).getUTCMinutes(),utcseconds:e=>Zs(e).getUTCSeconds(),utcmilliseconds:e=>Zs(e).getUTCMilliseconds(),datetime:oRt,dayofyear:uRt,week:cRt,utcdatetime:aRt,utcdayofyear:lRt,utcweek:fRt,now:Date.now};function Oee(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:_g(e)||_g(t)?+e==+t:RM(e)&&RM(t)?e+""==t+"":Au(e)&&Au(t)?hRt(e,t):!1}function hRt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Uge(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Uge(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!Oee(e[o],t[o]))return!1}return!0}function Uge(e,t,n=Oee){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const pRt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let mRt=Math.random;function z2(){return mRt()}const gRt={random:z2,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function $ee(e){return e instanceof Map}function yRt(e){return e instanceof Set}function K4(e){return $ee(e)||yRt(e)}function Az(e){return Array.from(e)}const vRt={has:(e,t)=>K4(e)?e.has(t):e!=null?Rh(e,t):!1,keys:e=>$ee(e)?Az(e.keys()):e!=null?Object.keys(e):[],values:e=>K4(e)?Az(e.values()):e!=null?Object.values(e):[],entries:e=>K4(e)?Az(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):Wr};function bRt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Rh(t,e))return t[e];return n!==void 0?n:e}function xRt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const _Rt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},YE={bin:tRt,equal:Oee,recode:bRt,sequence:xRt,...eRt,...dRt,...pRt,...gRt,...vRt,..._Rt};function MR(e){return typeof e=="bigint"}function cm(e){return e===void 0?e+"":MR(e)?e+"n":JSON.stringify(e)}function Hn(e,t=[],n=[]){return new wRt(e,dc(t),dc(n))}let wRt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${cm(n)}]`),...this.params.map(cm)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const cPe=e=>Hn("any",e),fPe=()=>Hn("count"),dPe=e=>Hn("array_agg",e),hPe=e=>Hn("array_agg_distinct",e),pPe=(e,t)=>Hn("map_agg",[e,t]),mPe=(e,t)=>Hn("object_agg",[e,t]),gPe=(e,t)=>Hn("entries_agg",[e,t]);({...YE});function ERt(e,t){e=K4(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function SRt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function TRt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function CRt(e,t,n,r){const i=r==="map"||r===!0?pPe:r==="entries"?gPe:r==="object"?mPe:Jn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=ERt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:dPe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const ARt="ArrayPattern",IRt="ArrowFunctionExpression",kRt="FunctionExpression",E1="Identifier",V2="Literal",yPe="MemberExpression",RRt="ObjectExpression",vPe="ObjectPattern",bPe="Property",yN="Column",DRt="Constant",NRt="Dictionary",PRt="Function",ORt="Parameter",xPe="Op",Gi=(e,t)=>{const n=$Rt[e.type];return n?n(e,t):Jn(`Unsupported expression construct: ${e.type}`)},Iz=(e,t)=>"("+Gi(e.left,t)+" "+e.operator+" "+Gi(e.right,t)+")",kz=(e,t)=>"("+pp(e.params,t)+")=>"+Gi(e.body,t),zge=(e,t)=>Gi(e.callee,t)+"("+pp(e.arguments,t)+")",pp=(e,t,n=",")=>e.map(r=>Gi(r,t)).join(n),_Pe=e=>e.computed?`[${cm(e.name)}]`:`.${e.name}`,Vge=(e,t,n)=>{const r=e.table||"";return`data${r}${_Pe(e)}.${n}(${t.index}${r})`},$Rt={Constant:e=>e.raw,Column:(e,t)=>Vge(e,t,"get"),Dictionary:(e,t)=>Vge(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${_Pe(e)}`,Op:(e,t)=>`op(${cm(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Gi(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Gi(e.object,t),i=Gi(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:zge,NewExpression:(e,t)=>"new "+zge(e,t),ArrayExpression:(e,t)=>"["+pp(e.elements,t)+"]",AssignmentExpression:Iz,BinaryExpression:Iz,LogicalExpression:Iz,UnaryExpression:(e,t)=>"("+e.operator+Gi(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Gi(e.test,t)+"?"+Gi(e.consequent,t)+":"+Gi(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+pp(e.properties,t)+"})",Property:(e,t)=>{const n=Gi(e.key,t);return(e.computed?`[${n}]`:n)+":"+Gi(e.value,t)},ArrowFunctionExpression:kz,FunctionExpression:kz,FunctionDeclaration:kz,ArrayPattern:(e,t)=>"["+pp(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+pp(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+pp(e.declarations,t,","),VariableDeclarator:(e,t)=>Gi(e.id,t)+"="+Gi(e.init,t),SpreadElement:(e,t)=>"..."+Gi(e.argument,t),BlockStatement:(e,t)=>"{"+pp(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Gi(e.expression,t),IfStatement:(e,t)=>"if ("+Gi(e.test,t)+")"+Gi(e.consequent,t)+(e.alternate?" else "+Gi(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Gi(e.discriminant,t)+") {"+pp(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Gi(e.test,t):"default")+": "+pp(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Gi(e.argument,t),Program:(e,t)=>Gi(e.body[0],t)};function DM(e,t={index:"row"}){return Gi(e,t)}function MRt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function bT(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:_g(e)?+e:Jr(e)||gN(e)?`[${e.map(bT)}]`:RM(e)?e+"":LRt(e)}function LRt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${bT(e[r])}`;return t+="}",t}function NM(e,t){const n=e.length;return n===1?(r,i)=>bT(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=bT(a)}return s}}function FRt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=bT(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=bT(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function x0(){}function BRt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Do(e){return e.init=e.init||x0,e.add=e.add||x0,e.rem=e.rem||x0,e}function Hge(e,t){return e.product_v=!1,e.product=t}const wPe={count:{create:()=>Do({value:e=>e.count}),param:[]},array_agg:{create:()=>Do({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Do({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Do({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Do({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Do({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:Wr}),param:[1]},valid:{create:()=>Do({value:e=>e.valid}),param:[1]},invalid:{create:()=>Do({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=FRt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Do({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Do({value:e=>{let t=Wr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:Wr,add:(e,t)=>MR(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Hge(e,1),value:e=>e.valid?e.product_v?Hge(e,BRt(e.list.values())):e.product:void 0,add:(e,t)=>MR(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:Wr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Do({value:e=>e.valid?e.mean:Wr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):Wr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Do({value:e=>e.valid>1?e.dev/e.valid:Wr}),param:[1],req:["variance"]},stdev:{create:()=>Do({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):Wr}),param:[1],req:["variance"]},stdevp:{create:()=>Do({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):Wr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=Wr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===Wr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=Wr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===Wr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Do({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Do({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):Wr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Do({value:e=>e.valid>1?e.cov/e.valid:Wr}),param:[2],req:["covariance"]},corr:{create:()=>Do({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):Wr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Do({value:i=>MRt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},qge={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Wge={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},EPe={row_number:{create(){return{init:x0,value:e=>e.index+1}},param:[]},rank:qge,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=qge.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Wge,ntile:{create(e){e=+e,e>0||Jn("ntile num must be greater than zero.");const{init:t,value:n}=Wge.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=Wr){return e=+e||1,{init:x0,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=Wr){return e=+e||1,{init:x0,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:x0,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:x0,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Jn("nth_value nth must be greater than zero."),{init:x0,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):Wr}}},param:[1,1]},fill_down:{create(e=Wr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return hh(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=Wr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=jRt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function jRt(e,t,n){for(const r=e.size;n<r;++n)if(hh(e.value(n,t)))return n;return-1}function Mee(e){return Rh(wPe,e)}function Lee(e){return Rh(EPe,e)}function SPe(e){return Rh(YE,e)||e==="row_object"}function TPe(e){return Mee(e)&&wPe[e]}function CPe(e){return Lee(e)&&EPe[e]}function bA(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Fee={escape:(e,t,n)=>bA(e,t,n),expr:(e,t)=>bA(`(row,data,op)=>${e}`,YE,t),expr2:(e,t)=>bA(`(row0,data0,row,data)=>${e}`,YE,t),join:(e,t)=>bA(`(row1,data1,row2,data2)=>${e}`,YE,t),param:(e,t)=>bA(e,YE,t)},URt={"==":1,"!=":1,"===":1,"!==":1};function APe(e,t,n=0,r,i){if(e.type=yN,e.name=t,e.table=n,i&&r&&fs(r.keyFor)){const s=URt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===V2&&zRt(i,e,s,r.keyFor(s.value))}return e}function zRt(e,t,n,r){return r<0?(e.type=V2,e.value=!1,e.raw="false"):(t.type=NRt,n.value=r,n.raw=r+""),!0}function m8(e){return Jr(e)?e:$ee(e)?e.entries():e?Object.entries(e):[]}const IPe="row_object";function kPe(e,t){e.type=RRt;const n=e.properties=[];for(const r of m8(t)){const[i,s]=Jr(r)?r:[r,r];n.push({type:bPe,key:{type:V2,raw:cm(s)},value:APe({computed:!0},i)})}return e}function RPe(e){return DM(kPe({},e))}function DPe(e){return Fee.expr(RPe(e))}const VRt=new TextDecoder("utf-8"),gG=e=>VRt.decode(e),HRt=new TextEncoder,Bee=e=>HRt.encode(e),qRt=e=>typeof e=="boolean",Ml=e=>typeof e=="function",zv=e=>e!=null&&Object(e)===e,g8=e=>zv(e)&&Ml(e.then),jee=e=>zv(e)&&Ml(e[Symbol.iterator]),y8=e=>zv(e)&&Ml(e[Symbol.asyncIterator]),WRt=e=>zv(e)&&"done"in e&&"value"in e,NPe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,GRt=e=>zv(e)&&Ml(e.abort)&&Ml(e.getWriter)&&!NPe(e),YRt=e=>zv(e)&&Ml(e.end)&&Ml(e.write)&&qRt(e.writable)&&!NPe(e),KRt=e=>zv(e)&&Ml(e.clear)&&Ml(e.bytes)&&Ml(e.position)&&Ml(e.setPosition)&&Ml(e.capacity)&&Ml(e.getBufferIdentifier)&&Ml(e.createLong),Uee=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function XRt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function PM(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function fm(e,t){const n=XRt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?PM(o,s,a):o=s;break}PM(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function ea(e,t){let n=WRt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Bee(n)),n instanceof ArrayBuffer?new e(n):n instanceof Uee?new e(n):KRt(n)?ea(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const xA=e=>ea(Int32Array,e),Ti=e=>ea(Uint8Array,e),yG=e=>(e.next(),e);function*QRt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Uee?n(t):jee(t)?t:n(t);return yield*yG(function*(i){let s=null;do s=i.next(yield ea(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const JRt=e=>QRt(Uint8Array,e);function PPe(e,t){return fx(this,arguments,function*(){if(g8(t))return yield Nr(yield Nr(yield*y7(XI(PPe(e,yield Nr(t))))));const r=function(o){return fx(this,arguments,function*(){yield yield Nr(yield Nr(o))})},i=function(o){return fx(this,arguments,function*(){yield Nr(yield*y7(XI(yG(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Uee?r(t):jee(t)?i(t):y8(t)?t:r(t);return yield Nr(yield*y7(XI(yG(function(o){return fx(this,arguments,function*(){let a=null;do a=yield Nr(o.next(yield yield Nr(ea(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Nr(new e)})}const ZRt=e=>PPe(Uint8Array,e);function OPe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function eDt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Gge={fromIterable(e){return mO(tDt(e))},fromAsyncIterable(e){return mO(nDt(e))},fromDOMStream(e){return mO(rDt(e))},fromNodeStream(e){return mO(sDt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},mO=e=>(e.next(),e);function*tDt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?fm(r,o)[0]:([i,r,a]=fm(r,o),i)}({cmd:s,size:o}=yield null);const l=JRt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function nDt(e){return fx(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?fm(i,a)[0]:([s,i,u]=fm(i,a),s)}({cmd:o,size:a}=yield yield Nr(null));const c=ZRt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Nr(c.next()):yield Nr(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Nr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Nr(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Nr(c.return(new Uint8Array(0))))}return yield Nr(null)})}function rDt(e){return fx(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?fm(i,a)[0]:([s,i,u]=fm(i,a),s)}({cmd:o,size:a}=yield yield Nr(null));const c=new iDt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Nr(c.read()):yield Nr(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Ti(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Nr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Nr(c.cancel(f)))}finally{r===!1?yield Nr(c.cancel()):e.locked&&c.releaseLock()}return yield Nr(null)})}class iDt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return E0(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return E0(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Ti(n)),n})}}const Rz=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function sDt(e){return fx(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?fm(l,a)[0]:([c,l,u]=fm(l,a),c)}if({cmd:o,size:a}=yield yield Nr(null),e.isTTY)return yield yield Nr(new Uint8Array(0)),yield Nr(null);try{n[0]=Rz(e,"end"),n[1]=Rz(e,"error");do{if(n[2]=Rz(e,"readable"),[r,s]=yield Nr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Ti(e.read(a-u)),c.byteLength<a-u&&(c=Ti(e.read()))):c=Ti(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Nr(f()));while(a<u)}while(!i)}finally{yield Nr(d(n,r==="error"?s:null))}return yield Nr(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,b]of h)e.off(y,b);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var el;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(el||(el={}));var hc;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(hc||(hc={}));var Ma;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Ma||(Ma={}));var dm;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(dm||(dm={}));var yn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(yn||(yn={}));var hm;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(hm||(hm={}));var ra;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(ra||(ra={}));var fe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(fe||(fe={}));var p0;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(p0||(p0={}));const oDt=void 0;function o_(e){if(e===null)return"null";if(e===oDt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>o_(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const aDt=Symbol.for("isArrowBigNum");function qh(e,...t){return t.length===0?Object.setPrototypeOf(ea(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}qh.prototype[aDt]=!0;qh.prototype.toJSON=function(){return`"${FR(this)}"`};qh.prototype.valueOf=function(){return $Pe(this)};qh.prototype.toString=function(){return FR(this)};qh.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return $Pe(this);case"string":return FR(this);case"default":return uDt(this)}return FR(this)};function ES(...e){return qh.apply(this,e)}function SS(...e){return qh.apply(this,e)}function LR(...e){return qh.apply(this,e)}Object.setPrototypeOf(ES.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(SS.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(LR.prototype,Object.create(Uint32Array.prototype));Object.assign(ES.prototype,qh.prototype,{constructor:ES,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(SS.prototype,qh.prototype,{constructor:SS,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(LR.prototype,qh.prototype,{constructor:LR,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function $Pe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const FR=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return Dz(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return Dz(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${Dz(t)}`},uDt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:FR(e);function Dz(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class zee{static new(t,n){switch(n){case!0:return new ES(t);case!1:return new SS(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new ES(t)}return t.byteLength===16?new LR(t):new SS(t)}static signed(t){return new ES(t)}static unsigned(t){return new SS(t)}static decimal(t){return new LR(t)}constructor(t,n){return zee.new(t,n)}}function Dh(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var MPe,LPe,FPe,BPe,jPe,UPe,zPe,VPe,HPe,qPe,WPe,GPe,YPe,KPe,XPe,QPe,JPe,ZPe,e3e,t3e;let nr=class vG{static isNull(t){return(t==null?void 0:t.typeId)===fe.Null}static isInt(t){return(t==null?void 0:t.typeId)===fe.Int}static isFloat(t){return(t==null?void 0:t.typeId)===fe.Float}static isBinary(t){return(t==null?void 0:t.typeId)===fe.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===fe.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===fe.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===fe.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===fe.Date}static isTime(t){return(t==null?void 0:t.typeId)===fe.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===fe.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===fe.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===fe.Duration}static isList(t){return(t==null?void 0:t.typeId)===fe.List}static isStruct(t){return(t==null?void 0:t.typeId)===fe.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===fe.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===fe.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===fe.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===fe.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===fe.Dictionary}static isDenseUnion(t){return vG.isUnion(t)&&t.mode===hc.Dense}static isSparseUnion(t){return vG.isUnion(t)&&t.mode===hc.Sparse}get typeId(){return fe.NONE}};MPe=Symbol.toStringTag;nr[MPe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(nr.prototype);let wg=class extends nr{toString(){return"Null"}get typeId(){return fe.Null}};LPe=Symbol.toStringTag;wg[LPe]=(e=>e[Symbol.toStringTag]="Null")(wg.prototype);class pl extends nr{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return fe.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}FPe=Symbol.toStringTag;pl[FPe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(pl.prototype);class Vee extends pl{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Hee extends pl{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Y1 extends pl{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class qee extends pl{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class Wee extends pl{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Gee extends pl{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class Yee extends pl{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class Kee extends pl{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(Vee.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Hee.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Y1.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(qee.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(Wee.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Gee.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Yee.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(Kee.prototype,"ArrayType",{value:BigUint64Array});class K1 extends nr{constructor(t){super(),this.precision=t}get typeId(){return fe.Float}get ArrayType(){switch(this.precision){case Ma.HALF:return Uint16Array;case Ma.SINGLE:return Float32Array;case Ma.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}BPe=Symbol.toStringTag;K1[BPe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(K1.prototype);class n3e extends K1{constructor(){super(Ma.HALF)}}class Xee extends K1{constructor(){super(Ma.SINGLE)}}class Qee extends K1{constructor(){super(Ma.DOUBLE)}}Object.defineProperty(n3e.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Xee.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(Qee.prototype,"ArrayType",{value:Float64Array});let BR=class extends nr{constructor(){super()}get typeId(){return fe.Binary}toString(){return"Binary"}};jPe=Symbol.toStringTag;BR[jPe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(BR.prototype);let xT=class extends nr{constructor(){super()}get typeId(){return fe.Utf8}toString(){return"Utf8"}};UPe=Symbol.toStringTag;xT[UPe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(xT.prototype);let jR=class extends nr{constructor(){super()}get typeId(){return fe.Bool}toString(){return"Bool"}};zPe=Symbol.toStringTag;jR[zPe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(jR.prototype);let OM=class extends nr{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return fe.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};VPe=Symbol.toStringTag;OM[VPe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(OM.prototype);class _T extends nr{constructor(t){super(),this.unit=t}get typeId(){return fe.Date}toString(){return`Date${(this.unit+1)*32}<${dm[this.unit]}>`}}HPe=Symbol.toStringTag;_T[HPe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(_T.prototype);class lDt extends _T{constructor(){super(dm.DAY)}}class cDt extends _T{constructor(){super(dm.MILLISECOND)}}class Eg extends nr{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return fe.Time}toString(){return`Time${this.bitWidth}<${yn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}qPe=Symbol.toStringTag;Eg[qPe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Eg.prototype);class fDt extends Eg{constructor(){super(yn.SECOND,32)}}class dDt extends Eg{constructor(){super(yn.MILLISECOND,32)}}class hDt extends Eg{constructor(){super(yn.MICROSECOND,64)}}class pDt extends Eg{constructor(){super(yn.NANOSECOND,64)}}class $M extends nr{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return fe.Timestamp}toString(){return`Timestamp<${yn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}WPe=Symbol.toStringTag;$M[WPe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))($M.prototype);class wT extends nr{constructor(t){super(),this.unit=t}get typeId(){return fe.Interval}toString(){return`Interval<${hm[this.unit]}>`}}GPe=Symbol.toStringTag;wT[GPe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(wT.prototype);class mDt extends wT{constructor(){super(hm.DAY_TIME)}}class gDt extends wT{constructor(){super(hm.YEAR_MONTH)}}let MM=class extends nr{constructor(t){super(),this.unit=t}get typeId(){return fe.Duration}toString(){return`Duration<${yn[this.unit]}>`}};YPe=Symbol.toStringTag;MM[YPe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(MM.prototype);let ET=class extends nr{constructor(t){super(),this.children=[t]}get typeId(){return fe.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};KPe=Symbol.toStringTag;ET[KPe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(ET.prototype);class mu extends nr{constructor(t){super(),this.children=t}get typeId(){return fe.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}XPe=Symbol.toStringTag;mu[XPe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(mu.prototype);class UR extends nr{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return fe.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}QPe=Symbol.toStringTag;UR[QPe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(UR.prototype);let LM=class extends nr{constructor(t){super(),this.byteWidth=t}get typeId(){return fe.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};JPe=Symbol.toStringTag;LM[JPe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(LM.prototype);let ST=class extends nr{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return fe.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};ZPe=Symbol.toStringTag;ST[ZPe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(ST.prototype);class zR extends nr{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return fe.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}e3e=Symbol.toStringTag;zR[e3e]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(zR.prototype);const yDt=(e=>()=>++e)(-1);class X1 extends nr{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?yDt():Dh(r)}get typeId(){return fe.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}t3e=Symbol.toStringTag;X1[t3e]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(X1.prototype);function yp(e){const t=e;switch(e.typeId){case fe.Decimal:return e.bitWidth/32;case fe.Timestamp:return 2;case fe.Date:return 1+t.unit;case fe.Interval:return 1+t.unit;case fe.FixedSizeList:return t.listSize;case fe.FixedSizeBinary:return t.byteWidth;default:return 1}}class rr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return vDt(this,t,n)}getVisitFnByTypeId(t,n=!0){return _E(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function vDt(e,t,n=!0){return typeof t=="number"?_E(e,t,n):typeof t=="string"&&t in fe?_E(e,fe[t],n):t&&t instanceof nr?_E(e,Yge(t),n):t!=null&&t.type&&t.type instanceof nr?_E(e,Yge(t.type),n):_E(e,fe.NONE,n)}function _E(e,t,n=!0){let r=null;switch(t){case fe.Null:r=e.visitNull;break;case fe.Bool:r=e.visitBool;break;case fe.Int:r=e.visitInt;break;case fe.Int8:r=e.visitInt8||e.visitInt;break;case fe.Int16:r=e.visitInt16||e.visitInt;break;case fe.Int32:r=e.visitInt32||e.visitInt;break;case fe.Int64:r=e.visitInt64||e.visitInt;break;case fe.Uint8:r=e.visitUint8||e.visitInt;break;case fe.Uint16:r=e.visitUint16||e.visitInt;break;case fe.Uint32:r=e.visitUint32||e.visitInt;break;case fe.Uint64:r=e.visitUint64||e.visitInt;break;case fe.Float:r=e.visitFloat;break;case fe.Float16:r=e.visitFloat16||e.visitFloat;break;case fe.Float32:r=e.visitFloat32||e.visitFloat;break;case fe.Float64:r=e.visitFloat64||e.visitFloat;break;case fe.Utf8:r=e.visitUtf8;break;case fe.Binary:r=e.visitBinary;break;case fe.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case fe.Date:r=e.visitDate;break;case fe.DateDay:r=e.visitDateDay||e.visitDate;break;case fe.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case fe.Timestamp:r=e.visitTimestamp;break;case fe.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case fe.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case fe.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case fe.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case fe.Time:r=e.visitTime;break;case fe.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case fe.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case fe.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case fe.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case fe.Decimal:r=e.visitDecimal;break;case fe.List:r=e.visitList;break;case fe.Struct:r=e.visitStruct;break;case fe.Union:r=e.visitUnion;break;case fe.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case fe.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case fe.Dictionary:r=e.visitDictionary;break;case fe.Interval:r=e.visitInterval;break;case fe.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case fe.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case fe.Duration:r=e.visitDuration;break;case fe.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case fe.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case fe.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case fe.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case fe.FixedSizeList:r=e.visitFixedSizeList;break;case fe.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${fe[t]}'`)}function Yge(e){switch(e.typeId){case fe.Null:return fe.Null;case fe.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?fe.Int8:fe.Uint8;case 16:return n?fe.Int16:fe.Uint16;case 32:return n?fe.Int32:fe.Uint32;case 64:return n?fe.Int64:fe.Uint64}return fe.Int}case fe.Float:switch(e.precision){case Ma.HALF:return fe.Float16;case Ma.SINGLE:return fe.Float32;case Ma.DOUBLE:return fe.Float64}return fe.Float;case fe.Binary:return fe.Binary;case fe.Utf8:return fe.Utf8;case fe.Bool:return fe.Bool;case fe.Decimal:return fe.Decimal;case fe.Time:switch(e.unit){case yn.SECOND:return fe.TimeSecond;case yn.MILLISECOND:return fe.TimeMillisecond;case yn.MICROSECOND:return fe.TimeMicrosecond;case yn.NANOSECOND:return fe.TimeNanosecond}return fe.Time;case fe.Timestamp:switch(e.unit){case yn.SECOND:return fe.TimestampSecond;case yn.MILLISECOND:return fe.TimestampMillisecond;case yn.MICROSECOND:return fe.TimestampMicrosecond;case yn.NANOSECOND:return fe.TimestampNanosecond}return fe.Timestamp;case fe.Date:switch(e.unit){case dm.DAY:return fe.DateDay;case dm.MILLISECOND:return fe.DateMillisecond}return fe.Date;case fe.Interval:switch(e.unit){case hm.DAY_TIME:return fe.IntervalDayTime;case hm.YEAR_MONTH:return fe.IntervalYearMonth}return fe.Interval;case fe.Duration:switch(e.unit){case yn.SECOND:return fe.DurationSecond;case yn.MILLISECOND:return fe.DurationMillisecond;case yn.MICROSECOND:return fe.DurationMicrosecond;case yn.NANOSECOND:return fe.DurationNanosecond}return fe.Duration;case fe.Map:return fe.Map;case fe.List:return fe.List;case fe.Struct:return fe.Struct;case fe.Union:switch(e.mode){case hc.Dense:return fe.DenseUnion;case hc.Sparse:return fe.SparseUnion}return fe.Union;case fe.FixedSizeBinary:return fe.FixedSizeBinary;case fe.FixedSizeList:return fe.FixedSizeList;case fe.Dictionary:return fe.Dictionary}throw new Error(`Unrecognized type '${fe[e.typeId]}'`)}rr.prototype.visitInt8=null;rr.prototype.visitInt16=null;rr.prototype.visitInt32=null;rr.prototype.visitInt64=null;rr.prototype.visitUint8=null;rr.prototype.visitUint16=null;rr.prototype.visitUint32=null;rr.prototype.visitUint64=null;rr.prototype.visitFloat16=null;rr.prototype.visitFloat32=null;rr.prototype.visitFloat64=null;rr.prototype.visitDateDay=null;rr.prototype.visitDateMillisecond=null;rr.prototype.visitTimestampSecond=null;rr.prototype.visitTimestampMillisecond=null;rr.prototype.visitTimestampMicrosecond=null;rr.prototype.visitTimestampNanosecond=null;rr.prototype.visitTimeSecond=null;rr.prototype.visitTimeMillisecond=null;rr.prototype.visitTimeMicrosecond=null;rr.prototype.visitTimeNanosecond=null;rr.prototype.visitDenseUnion=null;rr.prototype.visitSparseUnion=null;rr.prototype.visitIntervalDayTime=null;rr.prototype.visitIntervalYearMonth=null;rr.prototype.visitDuration=null;rr.prototype.visitDurationSecond=null;rr.prototype.visitDurationMillisecond=null;rr.prototype.visitDurationMicrosecond=null;rr.prototype.visitDurationNanosecond=null;const r3e=new Float64Array(1),tE=new Uint32Array(r3e.buffer);function i3e(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function s3e(e){if(e!==e)return 32256;r3e[0]=e;const t=(tE[1]&2147483648)>>16&65535;let n=tE[1]&2146435072,r=0;return n>=1089470464?tE[0]>0?n=31744:(n=(n&2080374784)>>16,r=(tE[1]&1048575)>>10):n<=1056964608?(r=1048576+(tE[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(tE[1]&1048575)+512>>10),t|n|r&65535}class wn extends rr{}function In(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const bDt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},Jee=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},xDt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},_Dt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},o3e=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},wDt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Vg=({values:e},t,n)=>{e[t]=n},Zee=({values:e},t,n)=>{e[t]=n},a3e=({values:e},t,n)=>{e[t]=s3e(n)},EDt=(e,t,n)=>{switch(e.type.precision){case Ma.HALF:return a3e(e,t,n);case Ma.SINGLE:case Ma.DOUBLE:return Zee(e,t,n)}},ete=({values:e},t,n)=>{bDt(e,t,n.valueOf())},tte=({values:e},t,n)=>{Jee(e,t*2,n.valueOf())},u3e=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},SDt=({values:e,valueOffsets:t},n,r)=>o3e(e,t,n,r),TDt=({values:e,valueOffsets:t},n,r)=>{o3e(e,t,n,Bee(r))},l3e=(e,t,n)=>{e.type.unit===dm.DAY?ete(e,t,n):tte(e,t,n)},nte=({values:e},t,n)=>Jee(e,t*2,n/1e3),rte=({values:e},t,n)=>Jee(e,t*2,n),ite=({values:e},t,n)=>xDt(e,t*2,n),ste=({values:e},t,n)=>_Dt(e,t*2,n),c3e=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return nte(e,t,n);case yn.MILLISECOND:return rte(e,t,n);case yn.MICROSECOND:return ite(e,t,n);case yn.NANOSECOND:return ste(e,t,n)}},ote=({values:e},t,n)=>{e[t]=n},ate=({values:e},t,n)=>{e[t]=n},ute=({values:e},t,n)=>{e[t]=n},lte=({values:e},t,n)=>{e[t]=n},f3e=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return ote(e,t,n);case yn.MILLISECOND:return ate(e,t,n);case yn.MICROSECOND:return ute(e,t,n);case yn.NANOSECOND:return lte(e,t,n)}},d3e=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},CDt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=ud.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},ADt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=ud.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},IDt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),kDt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),RDt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),DDt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),NDt=(e,t,n)=>{const r=e.type.children.map(s=>ud.getVisitFn(s.type)),i=n instanceof Map?RDt(t,n):n instanceof Zr?kDt(t,n):Array.isArray(n)?IDt(t,n):DDt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},PDt=(e,t,n)=>{e.type.mode===hc.Dense?h3e(e,t,n):p3e(e,t,n)},h3e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ud.visit(i,e.valueOffsets[t],n)},p3e=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ud.visit(i,t,n)},ODt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},m3e=(e,t,n)=>{e.type.unit===hm.DAY_TIME?cte(e,t,n):fte(e,t,n)},cte=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},fte=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},dte=({values:e},t,n)=>{e[t]=n},hte=({values:e},t,n)=>{e[t]=n},pte=({values:e},t,n)=>{e[t]=n},mte=({values:e},t,n)=>{e[t]=n},g3e=(e,t,n)=>{switch(e.type.unit){case yn.SECOND:return dte(e,t,n);case yn.MILLISECOND:return hte(e,t,n);case yn.MICROSECOND:return pte(e,t,n);case yn.NANOSECOND:return mte(e,t,n)}},$Dt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=ud.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};wn.prototype.visitBool=In(wDt);wn.prototype.visitInt=In(Vg);wn.prototype.visitInt8=In(Vg);wn.prototype.visitInt16=In(Vg);wn.prototype.visitInt32=In(Vg);wn.prototype.visitInt64=In(Vg);wn.prototype.visitUint8=In(Vg);wn.prototype.visitUint16=In(Vg);wn.prototype.visitUint32=In(Vg);wn.prototype.visitUint64=In(Vg);wn.prototype.visitFloat=In(EDt);wn.prototype.visitFloat16=In(a3e);wn.prototype.visitFloat32=In(Zee);wn.prototype.visitFloat64=In(Zee);wn.prototype.visitUtf8=In(TDt);wn.prototype.visitBinary=In(SDt);wn.prototype.visitFixedSizeBinary=In(u3e);wn.prototype.visitDate=In(l3e);wn.prototype.visitDateDay=In(ete);wn.prototype.visitDateMillisecond=In(tte);wn.prototype.visitTimestamp=In(c3e);wn.prototype.visitTimestampSecond=In(nte);wn.prototype.visitTimestampMillisecond=In(rte);wn.prototype.visitTimestampMicrosecond=In(ite);wn.prototype.visitTimestampNanosecond=In(ste);wn.prototype.visitTime=In(f3e);wn.prototype.visitTimeSecond=In(ote);wn.prototype.visitTimeMillisecond=In(ate);wn.prototype.visitTimeMicrosecond=In(ute);wn.prototype.visitTimeNanosecond=In(lte);wn.prototype.visitDecimal=In(d3e);wn.prototype.visitList=In(CDt);wn.prototype.visitStruct=In(NDt);wn.prototype.visitUnion=In(PDt);wn.prototype.visitDenseUnion=In(h3e);wn.prototype.visitSparseUnion=In(p3e);wn.prototype.visitDictionary=In(ODt);wn.prototype.visitInterval=In(m3e);wn.prototype.visitIntervalDayTime=In(cte);wn.prototype.visitIntervalYearMonth=In(fte);wn.prototype.visitDuration=In(g3e);wn.prototype.visitDurationSecond=In(dte);wn.prototype.visitDurationMillisecond=In(hte);wn.prototype.visitDurationMicrosecond=In(pte);wn.prototype.visitDurationNanosecond=In(mte);wn.prototype.visitFixedSizeList=In($Dt);wn.prototype.visitMap=In(ADt);const ud=new wn,Qd=Symbol.for("parent"),TS=Symbol.for("rowIndex");class gte{constructor(t,n){return this[Qd]=t,this[TS]=n,new Proxy(this,new LDt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[TS],n=this[Qd],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=pc.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${o_(t)}: ${o_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new MDt(this[Qd],this[TS])}}class MDt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,pc.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(gte.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Qd]:{writable:!0,enumerable:!1,configurable:!1,value:null},[TS]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class LDt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Qd].type.children.map(n=>n.name)}has(t,n){return t[Qd].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Qd].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Qd].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=pc.visit(t[Qd].children[r],t[TS]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Qd].type.children.findIndex(s=>s.name===n);return i!==-1?(ud.visit(t[Qd].children[i],t[TS],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class vn extends rr{}function En(e){return(t,n)=>t.getValid(n)?e(t,n):null}const FDt=(e,t)=>864e5*e[t],yte=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),BDt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,jDt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,y3e=e=>new Date(e),UDt=(e,t)=>y3e(FDt(e,t)),zDt=(e,t)=>y3e(yte(e,t)),VDt=(e,t)=>null,v3e=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},HDt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},b3e=({values:e},t)=>UDt(e,t),x3e=({values:e},t)=>zDt(e,t*2),Vv=({stride:e,values:t},n)=>t[e*n],qDt=({stride:e,values:t},n)=>i3e(t[e*n]),_3e=({values:e},t)=>e[t],WDt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),GDt=({values:e,valueOffsets:t},n)=>v3e(e,t,n),YDt=({values:e,valueOffsets:t},n)=>{const r=v3e(e,t,n);return r!==null?gG(r):null},KDt=({values:e},t)=>e[t],XDt=({type:e,values:t},n)=>e.precision!==Ma.HALF?t[n]:i3e(t[n]),QDt=(e,t)=>e.type.unit===dm.DAY?b3e(e,t):x3e(e,t),w3e=({values:e},t)=>1e3*yte(e,t*2),E3e=({values:e},t)=>yte(e,t*2),S3e=({values:e},t)=>BDt(e,t*2),T3e=({values:e},t)=>jDt(e,t*2),JDt=(e,t)=>{switch(e.type.unit){case yn.SECOND:return w3e(e,t);case yn.MILLISECOND:return E3e(e,t);case yn.MICROSECOND:return S3e(e,t);case yn.NANOSECOND:return T3e(e,t)}},C3e=({values:e},t)=>e[t],A3e=({values:e},t)=>e[t],I3e=({values:e},t)=>e[t],k3e=({values:e},t)=>e[t],ZDt=(e,t)=>{switch(e.type.unit){case yn.SECOND:return C3e(e,t);case yn.MILLISECOND:return A3e(e,t);case yn.MICROSECOND:return I3e(e,t);case yn.NANOSECOND:return k3e(e,t)}},eNt=({values:e,stride:t},n)=>zee.decimal(e.subarray(t*n,t*(n+1))),tNt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new Zr([u])},nNt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new v8(o.slice(i,s-i))},rNt=(e,t)=>new gte(e,t),iNt=(e,t)=>e.type.mode===hc.Dense?R3e(e,t):D3e(e,t),R3e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return pc.visit(r,e.valueOffsets[t])},D3e=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return pc.visit(r,t)},sNt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},oNt=(e,t)=>e.type.unit===hm.DAY_TIME?N3e(e,t):P3e(e,t),N3e=({values:e},t)=>e.subarray(2*t,2*(t+1)),P3e=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},O3e=({values:e},t)=>e[t],$3e=({values:e},t)=>e[t],M3e=({values:e},t)=>e[t],L3e=({values:e},t)=>e[t],aNt=(e,t)=>{switch(e.type.unit){case yn.SECOND:return O3e(e,t);case yn.MILLISECOND:return $3e(e,t);case yn.MICROSECOND:return M3e(e,t);case yn.NANOSECOND:return L3e(e,t)}},uNt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new Zr([s])};vn.prototype.visitNull=En(VDt);vn.prototype.visitBool=En(HDt);vn.prototype.visitInt=En(KDt);vn.prototype.visitInt8=En(Vv);vn.prototype.visitInt16=En(Vv);vn.prototype.visitInt32=En(Vv);vn.prototype.visitInt64=En(_3e);vn.prototype.visitUint8=En(Vv);vn.prototype.visitUint16=En(Vv);vn.prototype.visitUint32=En(Vv);vn.prototype.visitUint64=En(_3e);vn.prototype.visitFloat=En(XDt);vn.prototype.visitFloat16=En(qDt);vn.prototype.visitFloat32=En(Vv);vn.prototype.visitFloat64=En(Vv);vn.prototype.visitUtf8=En(YDt);vn.prototype.visitBinary=En(GDt);vn.prototype.visitFixedSizeBinary=En(WDt);vn.prototype.visitDate=En(QDt);vn.prototype.visitDateDay=En(b3e);vn.prototype.visitDateMillisecond=En(x3e);vn.prototype.visitTimestamp=En(JDt);vn.prototype.visitTimestampSecond=En(w3e);vn.prototype.visitTimestampMillisecond=En(E3e);vn.prototype.visitTimestampMicrosecond=En(S3e);vn.prototype.visitTimestampNanosecond=En(T3e);vn.prototype.visitTime=En(ZDt);vn.prototype.visitTimeSecond=En(C3e);vn.prototype.visitTimeMillisecond=En(A3e);vn.prototype.visitTimeMicrosecond=En(I3e);vn.prototype.visitTimeNanosecond=En(k3e);vn.prototype.visitDecimal=En(eNt);vn.prototype.visitList=En(tNt);vn.prototype.visitStruct=En(rNt);vn.prototype.visitUnion=En(iNt);vn.prototype.visitDenseUnion=En(R3e);vn.prototype.visitSparseUnion=En(D3e);vn.prototype.visitDictionary=En(sNt);vn.prototype.visitInterval=En(oNt);vn.prototype.visitIntervalDayTime=En(N3e);vn.prototype.visitIntervalYearMonth=En(P3e);vn.prototype.visitDuration=En(aNt);vn.prototype.visitDurationSecond=En(O3e);vn.prototype.visitDurationMillisecond=En($3e);vn.prototype.visitDurationMicrosecond=En(M3e);vn.prototype.visitDurationNanosecond=En(L3e);vn.prototype.visitFixedSizeList=En(uNt);vn.prototype.visitMap=En(nNt);const pc=new vn,ah=Symbol.for("keys"),CS=Symbol.for("vals");class v8{constructor(t){return this[ah]=new Zr([t.children[0]]).memoize(),this[CS]=t.children[1],new Proxy(this,new cNt)}[Symbol.iterator](){return new lNt(this[ah],this[CS])}get size(){return this[ah].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[ah],n=this[CS],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=pc.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${o_(t)}: ${o_(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class lNt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),pc.visit(this.vals,t)]})}}class cNt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[ah].toArray().map(String)}has(t,n){return t[ah].includes(n)}getOwnPropertyDescriptor(t,n){if(t[ah].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[ah].indexOf(n);if(r!==-1){const i=pc.visit(Reflect.get(t,CS),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[ah].indexOf(n);return i!==-1?(ud.visit(Reflect.get(t,CS),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(v8.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[ah]:{writable:!0,enumerable:!1,configurable:!1,value:null},[CS]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Kge;function F3e(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Kge=s,s=o,o=Kge),o>i&&(o=i),r?r(e,s,o):[s,o]}const Xge=e=>e!==e;function H2(e){if(typeof e!=="object"||e===null)return Xge(e)?Xge:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?eDt(e,n):!1:e instanceof Map?dNt(e):Array.isArray(e)?fNt(e):e instanceof Zr?hNt(e):pNt(e,!0)}function fNt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=H2(e[n]);return b8(t)}function dNt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=H2(r);return b8(n)}function hNt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=H2(e.get(n));return b8(t)}function pNt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=H2(e[n[i]]);return b8(r,n)}function b8(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return mNt(e,n);case Map:return Qge(e,n,n.keys());case v8:case gte:case Object:case void 0:return Qge(e,n,t||Object.keys(n))}return n instanceof Zr?gNt(e,n):!1}}function mNt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function gNt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Qge(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function B3e(e,t,n,r){return(n&1<<r)!==0}function yNt(e,t,n,r){return(n&1<<r)>>r}function FM(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):j3e(new vte(n,e,t,null,B3e)).subarray(0,r)),i}return n}function j3e(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class vte{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function bG(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new vte(e,t,n-t,e,yNt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return bG(e,t,i)+bG(e,r,n)+vNt(e,i>>3,r-i>>3)}function vNt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Nz(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Nz(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Nz(s.getUint8(i)),i+=1;return r}function Nz(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const bNt=-1;class Si{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return nr.isSparseUnion(t)?this.children.some(n=>n.nullable):nr.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(nr.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=bNt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-bG(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Si?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=yp(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(nr.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===hc.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(nr.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===hc.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(FM(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Si(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===fe.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(FM(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[p0.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[p0.TYPE])&&(o[p0.TYPE]=s.subarray(t,t+n)),(s=o[p0.OFFSET])&&(o[p0.OFFSET]=s.subarray(t,t+n+1))||(s=o[p0.DATA])&&(o[p0.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Si.prototype.children=Object.freeze([]);class pk extends rr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Si(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.data),s=Ti(t.nullBitmap),o=xA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Si(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.data),s=Ti(t.nullBitmap),o=xA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Si(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/yp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/yp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/yp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/yp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/yp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Ti(t.nullBitmap),o=xA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Si(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ti(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=ea(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(nr.isSparseUnion(n))return new Si(n,r,o,a,[void 0,void 0,void 0,s],i);const u=xA(t.valueOffsets);return new Si(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=ea(n.indices.ArrayType,t.data),{["dictionary"]:o=new Zr([new pk().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Si(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length/yp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Ti(t.nullBitmap),s=ea(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new pk().visit({type:n.valueType})}=t,s=Ti(t.nullBitmap),{["length"]:o=i.length/yp(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Si(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new pk().visit({type:n.childType})}=t,s=Ti(t.nullBitmap),o=xA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Si(n,r,a,u,[o,void 0,s],[i])}}const xNt=new pk;function fu(e){return xNt.visit(e)}class Jge{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function U3e(e){return e.reduce((t,n)=>t+n.nullCount,0)}function z3e(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function V3e(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function bte(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function xte(e,t){return e.getValid(t)}function AS(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return bte(r,this._offsets,n,t)}}function H3e(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=bte(s,this._offsets,r,n);return t=void 0,o}}function q3e(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):bte(s,this._offsets,i,n);return t=void 0,o}}class bn extends rr{}function _Nt(e,t){return t===null&&e.length>0?0:-1}function wNt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new vte(n,e.offset+(t||0),e.length,n,B3e)){if(!i)return r;++r}return-1}function Mn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case fe.Union:break;case fe.Dictionary:break;default:return wNt(e,n)}const r=pc.getVisitFn(e),i=H2(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function W3e(e,t,n){const r=pc.getVisitFn(e),i=H2(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}bn.prototype.visitNull=_Nt;bn.prototype.visitBool=Mn;bn.prototype.visitInt=Mn;bn.prototype.visitInt8=Mn;bn.prototype.visitInt16=Mn;bn.prototype.visitInt32=Mn;bn.prototype.visitInt64=Mn;bn.prototype.visitUint8=Mn;bn.prototype.visitUint16=Mn;bn.prototype.visitUint32=Mn;bn.prototype.visitUint64=Mn;bn.prototype.visitFloat=Mn;bn.prototype.visitFloat16=Mn;bn.prototype.visitFloat32=Mn;bn.prototype.visitFloat64=Mn;bn.prototype.visitUtf8=Mn;bn.prototype.visitBinary=Mn;bn.prototype.visitFixedSizeBinary=Mn;bn.prototype.visitDate=Mn;bn.prototype.visitDateDay=Mn;bn.prototype.visitDateMillisecond=Mn;bn.prototype.visitTimestamp=Mn;bn.prototype.visitTimestampSecond=Mn;bn.prototype.visitTimestampMillisecond=Mn;bn.prototype.visitTimestampMicrosecond=Mn;bn.prototype.visitTimestampNanosecond=Mn;bn.prototype.visitTime=Mn;bn.prototype.visitTimeSecond=Mn;bn.prototype.visitTimeMillisecond=Mn;bn.prototype.visitTimeMicrosecond=Mn;bn.prototype.visitTimeNanosecond=Mn;bn.prototype.visitDecimal=Mn;bn.prototype.visitList=Mn;bn.prototype.visitStruct=Mn;bn.prototype.visitUnion=Mn;bn.prototype.visitDenseUnion=W3e;bn.prototype.visitSparseUnion=W3e;bn.prototype.visitDictionary=Mn;bn.prototype.visitInterval=Mn;bn.prototype.visitIntervalDayTime=Mn;bn.prototype.visitIntervalYearMonth=Mn;bn.prototype.visitDuration=Mn;bn.prototype.visitDurationSecond=Mn;bn.prototype.visitDurationMillisecond=Mn;bn.prototype.visitDurationMicrosecond=Mn;bn.prototype.visitDurationNanosecond=Mn;bn.prototype.visitFixedSizeList=Mn;bn.prototype.visitMap=Mn;const BM=new bn;class xn extends rr{}function Sn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===fe.Timestamp||t instanceof pl&&t.bitWidth!==64||t instanceof Eg&&t.bitWidth!==64||t instanceof K1&&t.precision!==Ma.HALF))return new Jge(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Jge(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new ENt(o)})}class ENt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}xn.prototype.visitNull=Sn;xn.prototype.visitBool=Sn;xn.prototype.visitInt=Sn;xn.prototype.visitInt8=Sn;xn.prototype.visitInt16=Sn;xn.prototype.visitInt32=Sn;xn.prototype.visitInt64=Sn;xn.prototype.visitUint8=Sn;xn.prototype.visitUint16=Sn;xn.prototype.visitUint32=Sn;xn.prototype.visitUint64=Sn;xn.prototype.visitFloat=Sn;xn.prototype.visitFloat16=Sn;xn.prototype.visitFloat32=Sn;xn.prototype.visitFloat64=Sn;xn.prototype.visitUtf8=Sn;xn.prototype.visitBinary=Sn;xn.prototype.visitFixedSizeBinary=Sn;xn.prototype.visitDate=Sn;xn.prototype.visitDateDay=Sn;xn.prototype.visitDateMillisecond=Sn;xn.prototype.visitTimestamp=Sn;xn.prototype.visitTimestampSecond=Sn;xn.prototype.visitTimestampMillisecond=Sn;xn.prototype.visitTimestampMicrosecond=Sn;xn.prototype.visitTimestampNanosecond=Sn;xn.prototype.visitTime=Sn;xn.prototype.visitTimeSecond=Sn;xn.prototype.visitTimeMillisecond=Sn;xn.prototype.visitTimeMicrosecond=Sn;xn.prototype.visitTimeNanosecond=Sn;xn.prototype.visitDecimal=Sn;xn.prototype.visitList=Sn;xn.prototype.visitStruct=Sn;xn.prototype.visitUnion=Sn;xn.prototype.visitDenseUnion=Sn;xn.prototype.visitSparseUnion=Sn;xn.prototype.visitDictionary=Sn;xn.prototype.visitInterval=Sn;xn.prototype.visitIntervalDayTime=Sn;xn.prototype.visitIntervalYearMonth=Sn;xn.prototype.visitDuration=Sn;xn.prototype.visitDurationSecond=Sn;xn.prototype.visitDurationMillisecond=Sn;xn.prototype.visitDurationMicrosecond=Sn;xn.prototype.visitDurationNanosecond=Sn;xn.prototype.visitFixedSizeList=Sn;xn.prototype.visitMap=Sn;const _te=new xn,SNt=(e,t)=>e+t;class Hv extends rr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===yn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+pm.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+pm.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const TNt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),CNt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),ANt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=pm.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},INt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=pm.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},kNt=(e,t)=>e.type.mode===hc.Dense?G3e(e,t):Y3e(e,t),G3e=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+pm.visit(t[s],r[i])},Y3e=({children:e},t)=>4+pm.visitMany(e,e.map(()=>t)).reduce(SNt,0);Hv.prototype.visitUtf8=TNt;Hv.prototype.visitBinary=CNt;Hv.prototype.visitList=ANt;Hv.prototype.visitFixedSizeList=INt;Hv.prototype.visitUnion=kNt;Hv.prototype.visitDenseUnion=G3e;Hv.prototype.visitSparseUnion=Y3e;const pm=new Hv;var K3e;const X3e={},Q3e={};class Zr{constructor(t){var n,r,i;const s=t[0]instanceof Zr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Si)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=X3e[o.typeId],f=s[0];this.isValid=d=>xte(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,Q3e[o.typeId]),this._offsets=z3e(s);break}this.data=s,this.type=o,this.stride=yp(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return U3e(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${fe[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return _te.visit(this)}concat(...t){return new Zr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new Zr(F3e(this,t,n,({data:r,_offsets:i},s,o)=>V3e(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case fe.Int:case fe.Float:case fe.Decimal:case fe.Time:case fe.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Zr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return nr.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(nr.isDictionary(this.type)){const t=new jM(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Zr(n)}return new jM(this)}unmemoize(){if(nr.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Zr(n)}return this}}K3e=Symbol.toStringTag;Zr[K3e]=(e=>{e.type=nr.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(fe).map(n=>fe[n]).filter(n=>typeof n=="number"&&n!==fe.NONE);for(const n of t){const r=pc.getVisitFnByTypeId(n),i=ud.getVisitFnByTypeId(n),s=BM.getVisitFnByTypeId(n),o=pm.getVisitFnByTypeId(n);X3e[n]={get:r,set:i,indexOf:s,byteLength:o},Q3e[n]=Object.create(e,{isValid:{value:AS(xte)},get:{value:AS(pc.getVisitFnByTypeId(n))},set:{value:H3e(ud.getVisitFnByTypeId(n))},indexOf:{value:q3e(BM.getVisitFnByTypeId(n))},getByteLength:{value:AS(pm.getVisitFnByTypeId(n))}})}return"Vector"})(Zr.prototype);class jM extends Zr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new jM(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Zr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function RNt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${DNt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function DNt(e){return typeof e!="bigint"?o_(e):`${o_(e)}n`}const Pz=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,NNt=(e,t=0)=>e.length>=t?e.subarray(0,t):PM(new e.constructor(t),e,0);class x8{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?Pz(r*1,this.BYTES_PER_ELEMENT):Pz(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Pz(t*this.stride,this.BYTES_PER_ELEMENT);const n=NNt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=PM(new this.ArrayType(t),this.buffer)}}x8.prototype.offset=0;class vN extends x8{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class J3e extends vN{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class Z3e extends vN{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Ec=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=yp(t),this._nulls=new J3e,n&&n.length>0&&(this._isValid=RNt(n))}toVector(){return new Zr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),fu({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Ec.prototype.length=1;Ec.prototype.stride=1;Ec.prototype.children=null;Ec.prototype.finished=!1;Ec.prototype.nullValues=null;Ec.prototype._isValid=()=>!0;class Hg extends Ec{constructor(t){super(t),this._values=new vN(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class _8 extends Ec{constructor(t){super(t),this._pendingLength=0,this._offsets=new Z3e}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof v8?n[ah].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class xG{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const Oz=2,Cp=4,C0=4,ji=4,Ny=new Int32Array(2),Zge=new Float32Array(Ny.buffer),eye=new Float64Array(Ny.buffer),gO=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var _G;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(_G||(_G={}));let UM=class eOe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new eOe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Ny[0]=this.readInt32(t),Zge[0]}readFloat64(t){return Ny[gO?0:1]=this.readInt32(t),Ny[gO?1:0]=this.readInt32(t+4),eye[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Zge[0]=n,this.writeInt32(t,Ny[0])}writeFloat64(t,n){eye[0]=n,this.writeInt32(t,Ny[gO?0:1]),this.writeInt32(t+4,Ny[gO?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Cp+C0)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<C0;n++)t+=String.fromCharCode(this.readInt8(this.position_+Cp+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Cp;const i=this.bytes_.subarray(t,t+r);return n===_G.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Cp}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=C0)throw new Error("FlatBuffers: file identifier must be length "+C0);for(let n=0;n<C0;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Cp+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},tOe=class nOe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=UM.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=nOe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=UM.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Cp,0),this.writeInt32(this.offset()-t+Cp)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*Oz;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=Oz;l<s;l+=Oz)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?ji:0;if(n){const s=n;if(this.prep(this.minalign,Cp+C0+i),s.length!=C0)throw new TypeError("FlatBuffers: file identifier must be length "+C0);for(let o=C0-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Cp+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Cp,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Oo{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Oo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+ji),(n||new Oo).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Oo.startKeyValue(t),Oo.addKey(t,n),Oo.addValue(t,r),Oo.endKeyValue(t)}}var TT;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(TT||(TT={}));var CT;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(CT||(CT={}));var zM;(function(e){e[e.DenseArray=0]="DenseArray"})(zM||(zM={}));class jc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new jc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+ji),(n||new jc).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return jc.startInt(t),jc.addBitWidth(t,n),jc.addIsSigned(t,r),jc.endInt(t)}}class A0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new A0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+ji),(n||new A0).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new jc).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):zM.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,zM.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class bx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new bx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+ji),(n||new bx).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return bx.startBinary(t),bx.endBinary(t)}}class xx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new xx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+ji),(n||new xx).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return xx.startBool(t),xx.endBool(t)}}var VM;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(VM||(VM={}));let X4=class wE{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new wE).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+ji),(n||new wE).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):VM.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,VM.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return wE.startDate(t),wE.addUnit(t,n),wE.endDate(t)}};class Ll{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Ll).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+ji),(n||new Ll).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Ll.startDecimal(t),Ll.addPrecision(t,n),Ll.addScale(t,r),Ll.addBitWidth(t,i),Ll.endDecimal(t)}}var Q1;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Q1||(Q1={}));class Ap{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Ap).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+ji),(n||new Ap).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q1.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Q1.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Ap.startDuration(t),Ap.addUnit(t,n),Ap.endDuration(t)}}class Ip{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Ip).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+ji),(n||new Ip).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Ip.startFixedSizeBinary(t),Ip.addByteWidth(t,n),Ip.endFixedSizeBinary(t)}}class kp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new kp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+ji),(n||new kp).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return kp.startFixedSizeList(t),kp.addListSize(t,n),kp.endFixedSizeList(t)}}var HM;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(HM||(HM={}));class Rp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Rp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+ji),(n||new Rp).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):HM.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,HM.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Rp.startFloatingPoint(t),Rp.addPrecision(t,n),Rp.endFloatingPoint(t)}}var qM;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(qM||(qM={}));class Dp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Dp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+ji),(n||new Dp).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):qM.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,qM.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Dp.startInterval(t),Dp.addUnit(t,n),Dp.endInterval(t)}}class _x{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new _x).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+ji),(n||new _x).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return _x.startList(t),_x.endList(t)}}let Q4=class EE{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new EE).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+ji),(n||new EE).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return EE.startMap(t),EE.addKeysSorted(t,n),EE.endMap(t)}};class wx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new wx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+ji),(n||new wx).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return wx.startNull(t),wx.endNull(t)}}class Ex{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Ex).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+ji),(n||new Ex).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Ex.startStruct_(t),Ex.endStruct_(t)}}let gI=class Vb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Vb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+ji),(n||new Vb).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q1.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Q1.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Vb.startTime(t),Vb.addUnit(t,n),Vb.addBitWidth(t,r),Vb.endTime(t)}},yI=class Hb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Hb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+ji),(n||new Hb).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Q1.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Q1.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Hb.startTimestamp(t),Hb.addUnit(t,n),Hb.addTimezone(t,r),Hb.endTimestamp(t)}};var WM;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(WM||(WM={}));let qb=class Wb{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Wb).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+ji),(n||new Wb).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):WM.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,WM.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Wb.startUnion(t),Wb.addMode(t,n),Wb.addTypeIds(t,r),Wb.endUnion(t)}};class Sx{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Sx).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+ji),(n||new Sx).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Sx.startUtf8(t),Sx.endUtf8(t)}}var ys;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(ys||(ys={}));let Ff=class J4{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new J4).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+ji),(n||new J4).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):ys.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new A0).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new J4).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,ys.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},mp=class d0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new d0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+ji),(n||new d0).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):CT.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Ff).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,CT.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return d0.startSchema(t),d0.addEndianness(t,n),d0.addFields(t,r),d0.addCustomMetadata(t,i),d0.addFeatures(t,s),d0.endSchema(t)}};class $c{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new $c).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+ji),(n||new $c).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):TT.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new mp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new xG).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new xG).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,TT.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class yi{constructor(t=[],n,r,i=el.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=EG(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new yi(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new yi(n,this.metadata)}assign(...t){const n=t[0]instanceof yi?t[0]:Array.isArray(t[0])?new yi(t[0]):new yi(t),r=[...this.fields],i=yO(yO(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:yO(yO(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=EG(s,new Map);return new yi([...r,...s],i,new Map([...this.dictionaries,...o]))}}yi.prototype.fields=null;yi.prototype.metadata=null;yi.prototype.dictionaries=null;let Mi=class wG{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new wG(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],wG.new(n,r,i,s)}};Mi.prototype.type=null;Mi.prototype.name=null;Mi.prototype.nullable=null;Mi.prototype.metadata=null;function yO(e,t){return new Map([...e||new Map,...t||new Map])}function EG(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(nr.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&EG(s.children,t)}return t}var PNt=tOe,ONt=UM;class SG{static decode(t){t=new ONt(Ti(t));const n=$c.getRootAsFooter(t),r=yi.decode(n.schema(),new Map,n.version());return new $Nt(r,n)}static encode(t){const n=new PNt,r=yi.encode(n,t.schema);$c.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())J1.encode(n,o);const i=n.endVector();$c.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())J1.encode(n,o);const s=n.endVector();return $c.startFooter(n),$c.addSchema(n,r),$c.addVersion(n,el.V5),$c.addRecordBatches(n,i),$c.addDictionaries(n,s),$c.finishFooterBuffer(n,$c.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=el.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class $Nt extends SG{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return J1.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return J1.decode(n)}return null}}class J1{static decode(t){return new J1(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return xG.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Dh(r),this.bodyLength=Dh(n)}}const vO=Object.freeze({done:!0,value:void 0});class rOe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class MNt extends rOe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return E0(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(vO);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Gge.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Gge.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return E0(this,void 0,void 0,function*(){return yield this.abort(t),vO})}return(t){return E0(this,void 0,void 0,function*(){return yield this.close(),vO})}read(t){return E0(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return E0(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(vO)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class $z extends MNt{write(t){if((t=Ti(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?gG(this.toUint8Array(!0)):this.toUint8Array(!1).then(gG)}toUint8Array(t=!1){return t?fm(this._values)[0]:E0(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=XI(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return fm(o,a)[0]})}}class iOe extends _8{constructor(t){super(t),this._values=new x8(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Ti(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class LNt extends Ec{constructor(t){super(t),this._values=new J3e}setValue(t,n){this._values.set(t,+n)}}class w8 extends Hg{}w8.prototype._setValue=l3e;class sOe extends w8{}sOe.prototype._setValue=ete;class oOe extends w8{}oOe.prototype._setValue=tte;class aOe extends Hg{}aOe.prototype._setValue=d3e;class FNt extends Ec{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new X1(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=GM({type:this.type.indices,nullValues:n}),this.dictionary=GM({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class uOe extends Hg{}uOe.prototype._setValue=u3e;class BNt extends Ec{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new ST(this.type.listSize,new Mi(n,t.type,!0)),r}}class E8 extends Hg{setValue(t,n){this._values.set(t,n)}}class jNt extends E8{setValue(t,n){super.setValue(t,s3e(n))}}class UNt extends E8{}class zNt extends E8{}class S8 extends Hg{}S8.prototype._setValue=m3e;class lOe extends S8{}lOe.prototype._setValue=cte;class cOe extends S8{}cOe.prototype._setValue=fte;class q2 extends Hg{}q2.prototype._setValue=g3e;class fOe extends q2{}fOe.prototype._setValue=dte;class dOe extends q2{}dOe.prototype._setValue=hte;class hOe extends q2{}hOe.prototype._setValue=pte;class pOe extends q2{}pOe.prototype._setValue=mte;class qg extends Hg{setValue(t,n){this._values.set(t,n)}}class VNt extends qg{}class HNt extends qg{}class qNt extends qg{}class WNt extends qg{}class GNt extends qg{}class YNt extends qg{}class KNt extends qg{}class XNt extends qg{}class QNt extends _8{constructor(t){super(t),this._offsets=new Z3e}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ET(new Mi(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class JNt extends _8{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new zR(new Mi(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class ZNt extends Ec{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class ePt extends Ec{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new mu([...this.type.children,new Mi(n,t.type,!0)]),r}}class W2 extends Hg{}W2.prototype._setValue=c3e;class mOe extends W2{}mOe.prototype._setValue=nte;class gOe extends W2{}gOe.prototype._setValue=rte;class yOe extends W2{}yOe.prototype._setValue=ite;class vOe extends W2{}vOe.prototype._setValue=ste;class G2 extends Hg{}G2.prototype._setValue=f3e;class bOe extends G2{}bOe.prototype._setValue=ote;class xOe extends G2{}xOe.prototype._setValue=ate;class _Oe extends G2{}_Oe.prototype._setValue=ute;class wOe extends G2{}wOe.prototype._setValue=lte;class wte extends Ec{constructor(t){super(t),this._typeIds=new vN(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Mi(n,t.type)];return this.type=new UR(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class tPt extends wte{}class nPt extends wte{constructor(t){super(t),this._offsets=new vN(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class EOe extends _8{constructor(t){super(t),this._values=new x8(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Bee(n))}_flushPending(t,n){}}EOe.prototype._flushPending=iOe.prototype._flushPending;class rPt extends rr{visitNull(){return ZNt}visitBool(){return LNt}visitInt(){return qg}visitInt8(){return VNt}visitInt16(){return HNt}visitInt32(){return qNt}visitInt64(){return WNt}visitUint8(){return GNt}visitUint16(){return YNt}visitUint32(){return KNt}visitUint64(){return XNt}visitFloat(){return E8}visitFloat16(){return jNt}visitFloat32(){return UNt}visitFloat64(){return zNt}visitUtf8(){return EOe}visitBinary(){return iOe}visitFixedSizeBinary(){return uOe}visitDate(){return w8}visitDateDay(){return sOe}visitDateMillisecond(){return oOe}visitTimestamp(){return W2}visitTimestampSecond(){return mOe}visitTimestampMillisecond(){return gOe}visitTimestampMicrosecond(){return yOe}visitTimestampNanosecond(){return vOe}visitTime(){return G2}visitTimeSecond(){return bOe}visitTimeMillisecond(){return xOe}visitTimeMicrosecond(){return _Oe}visitTimeNanosecond(){return wOe}visitDecimal(){return aOe}visitList(){return QNt}visitStruct(){return ePt}visitUnion(){return wte}visitDenseUnion(){return nPt}visitSparseUnion(){return tPt}visitDictionary(){return FNt}visitInterval(){return S8}visitIntervalDayTime(){return lOe}visitIntervalYearMonth(){return cOe}visitDuration(){return q2}visitDurationSecond(){return fOe}visitDurationMillisecond(){return dOe}visitDurationMicrosecond(){return hOe}visistDurationNanosecond(){return pOe}visitFixedSizeList(){return BNt}visitMap(){return JNt}}const iPt=new rPt;class _n extends rr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function bl(e,t){return t instanceof e.constructor}function bN(e,t){return e===t||bl(e,t)}function Wg(e,t){return e===t||bl(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function T8(e,t){return e===t||bl(e,t)&&e.precision===t.precision}function sPt(e,t){return e===t||bl(e,t)&&e.byteWidth===t.byteWidth}function Ete(e,t){return e===t||bl(e,t)&&e.unit===t.unit}function xN(e,t){return e===t||bl(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function _N(e,t){return e===t||bl(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function oPt(e,t){return e===t||bl(e,t)&&e.children.length===t.children.length&&Z1.compareManyFields(e.children,t.children)}function aPt(e,t){return e===t||bl(e,t)&&e.children.length===t.children.length&&Z1.compareManyFields(e.children,t.children)}function Ste(e,t){return e===t||bl(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Z1.compareManyFields(e.children,t.children)}function uPt(e,t){return e===t||bl(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Z1.visit(e.indices,t.indices)&&Z1.visit(e.dictionary,t.dictionary)}function Tte(e,t){return e===t||bl(e,t)&&e.unit===t.unit}function wN(e,t){return e===t||bl(e,t)&&e.unit===t.unit}function lPt(e,t){return e===t||bl(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Z1.compareManyFields(e.children,t.children)}function cPt(e,t){return e===t||bl(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Z1.compareManyFields(e.children,t.children)}_n.prototype.visitNull=bN;_n.prototype.visitBool=bN;_n.prototype.visitInt=Wg;_n.prototype.visitInt8=Wg;_n.prototype.visitInt16=Wg;_n.prototype.visitInt32=Wg;_n.prototype.visitInt64=Wg;_n.prototype.visitUint8=Wg;_n.prototype.visitUint16=Wg;_n.prototype.visitUint32=Wg;_n.prototype.visitUint64=Wg;_n.prototype.visitFloat=T8;_n.prototype.visitFloat16=T8;_n.prototype.visitFloat32=T8;_n.prototype.visitFloat64=T8;_n.prototype.visitUtf8=bN;_n.prototype.visitBinary=bN;_n.prototype.visitFixedSizeBinary=sPt;_n.prototype.visitDate=Ete;_n.prototype.visitDateDay=Ete;_n.prototype.visitDateMillisecond=Ete;_n.prototype.visitTimestamp=xN;_n.prototype.visitTimestampSecond=xN;_n.prototype.visitTimestampMillisecond=xN;_n.prototype.visitTimestampMicrosecond=xN;_n.prototype.visitTimestampNanosecond=xN;_n.prototype.visitTime=_N;_n.prototype.visitTimeSecond=_N;_n.prototype.visitTimeMillisecond=_N;_n.prototype.visitTimeMicrosecond=_N;_n.prototype.visitTimeNanosecond=_N;_n.prototype.visitDecimal=bN;_n.prototype.visitList=oPt;_n.prototype.visitStruct=aPt;_n.prototype.visitUnion=Ste;_n.prototype.visitDenseUnion=Ste;_n.prototype.visitSparseUnion=Ste;_n.prototype.visitDictionary=uPt;_n.prototype.visitInterval=Tte;_n.prototype.visitIntervalDayTime=Tte;_n.prototype.visitIntervalYearMonth=Tte;_n.prototype.visitDuration=wN;_n.prototype.visitDurationSecond=wN;_n.prototype.visitDurationMillisecond=wN;_n.prototype.visitDurationMicrosecond=wN;_n.prototype.visitDurationNanosecond=wN;_n.prototype.visitFixedSizeList=lPt;_n.prototype.visitMap=cPt;const Z1=new _n;function TG(e,t){return Z1.compareSchemas(e,t)}function GM(e){const t=e.type,n=new(iPt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(GM(Object.assign(Object.assign({},l),{type:u})))}}return n}function Mz(e,t){return fPt(e,t.map(n=>n.data.concat()))}function fPt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=dPt(n,o,c,t,i),o>0&&(r[s++]=fu({type:new mu(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Uc(e,f))]}function dPt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:fu({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var SOe;class Ul{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new yi([]),this._offsets=[0],this;let i,s;t[0]instanceof yi&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Uc)return[u];if(u instanceof Ul)return u.batches;if(u instanceof Si){if(u.type instanceof mu)return[new Uc(new yi(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new Zr([u[h]])),f=new yi(l.map((h,p)=>new Mi(String(h),c[p].type))),[,d]=Mz(f,c);return d.length===0?[new Uc(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new yi([]),!(i instanceof yi))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Uc))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!TG(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??z3e(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=U3e(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?_te.visit(new Zr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Ul(n,r.map(i=>new Uc(n,i)))}slice(t,n){const r=this.schema;[t,n]=F3e({length:this.numRows},t,n);const i=V3e(this.data,this._offsets,t,n);return new Ul(r,i.map(s=>new Uc(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=fu({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Zr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Zr([fu({type:new wg,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=Mz(r,a)}return new Ul(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Ul(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Ul(...Mz(s,o))}}SOe=Symbol.toStringTag;Ul[SOe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=AS(xte),e.get=AS(pc.getVisitFn(fe.Struct)),e.set=H3e(ud.getVisitFn(fe.Struct)),e.indexOf=q3e(BM.getVisitFn(fe.Struct)),e.getByteLength=AS(pm.getVisitFn(fe.Struct)),"Table"))(Ul.prototype);var TOe;let Uc=class vI{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof yi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=fu({nullCount:0,type:new mu(this.schema.fields),children:this.schema.fields.map(n=>fu({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Si))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=tye(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Mi.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new yi(r),a=fu({type:new mu(r),length:s,children:i,nullCount:0});[this.schema,this.data]=tye(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=COe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return pc.visit(this.data,t)}set(t,n){return ud.visit(this.data,t,n)}indexOf(t,n){return BM.visit(this.data,t,n)}getByteLength(t){return pm.visit(this.data,t)}[Symbol.iterator](){return _te.visit(new Zr([this.data]))}toArray(){return[...this]}concat(...t){return new Ul(this.schema,[this,...t])}slice(t,n){const[r]=new Zr([this.data]).slice(t,n).data;return new vI(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Zr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new Zr([fu({type:new wg,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new yi(s,new Map(this.schema.metadata)),i=fu({type:new mu(s),children:o})}return new vI(r,i)}select(t){const n=this.schema.select(t),r=new mu(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new vI(n,fu({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=fu({type:new mu(n.fields),length:this.numRows,children:r});return new vI(n,i)}};TOe=Symbol.toStringTag;Uc[TOe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Uc.prototype);function tye(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:fu({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),fu({type:new mu(i),length:n,children:s})]}function COe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])COe(a.children,l==null?void 0:l.children,n);if(nr.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class hPt extends Uc{constructor(t){const n=t.fields.map(i=>fu({type:i.type})),r=fu({type:new mu(t.fields),nullCount:0,children:n});super(t,r)}}var YM;(function(e){e[e.BUFFER=0]="BUFFER"})(YM||(YM={}));var KM;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(KM||(KM={}));class Py{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Py).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+ji),(n||new Py).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):KM.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):YM.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,KM.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,YM.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Py.startBodyCompression(t),Py.addCodec(t,n),Py.addMethod(t,r),Py.endBodyCompression(t)}}let AOe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},IOe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},m0=class CG{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new CG).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+ji),(n||new CG).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new IOe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new AOe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Py).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},SE=class AG{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new AG).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+ji),(n||new AG).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new m0).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var XM;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(XM||(XM={}));let yy=class up{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new up).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+ji),(n||new up).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):TT.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):XM.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Oo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,TT.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,XM.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return up.startMessage(t),up.addVersion(t,n),up.addHeaderType(t,r),up.addHeader(t,i),up.addBodyLength(t,s),up.addCustomMetadata(t,o),up.endMessage(t)}};class pPt extends rr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return wx.startNull(n),wx.endNull(n)}visitInt(t,n){return jc.startInt(n),jc.addBitWidth(n,t.bitWidth),jc.addIsSigned(n,t.isSigned),jc.endInt(n)}visitFloat(t,n){return Rp.startFloatingPoint(n),Rp.addPrecision(n,t.precision),Rp.endFloatingPoint(n)}visitBinary(t,n){return bx.startBinary(n),bx.endBinary(n)}visitBool(t,n){return xx.startBool(n),xx.endBool(n)}visitUtf8(t,n){return Sx.startUtf8(n),Sx.endUtf8(n)}visitDecimal(t,n){return Ll.startDecimal(n),Ll.addScale(n,t.scale),Ll.addPrecision(n,t.precision),Ll.addBitWidth(n,t.bitWidth),Ll.endDecimal(n)}visitDate(t,n){return X4.startDate(n),X4.addUnit(n,t.unit),X4.endDate(n)}visitTime(t,n){return gI.startTime(n),gI.addUnit(n,t.unit),gI.addBitWidth(n,t.bitWidth),gI.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return yI.startTimestamp(n),yI.addUnit(n,t.unit),r!==void 0&&yI.addTimezone(n,r),yI.endTimestamp(n)}visitInterval(t,n){return Dp.startInterval(n),Dp.addUnit(n,t.unit),Dp.endInterval(n)}visitDuration(t,n){return Ap.startDuration(n),Ap.addUnit(n,t.unit),Ap.endDuration(n)}visitList(t,n){return _x.startList(n),_x.endList(n)}visitStruct(t,n){return Ex.startStruct_(n),Ex.endStruct_(n)}visitUnion(t,n){qb.startTypeIdsVector(n,t.typeIds.length);const r=qb.createTypeIdsVector(n,t.typeIds);return qb.startUnion(n),qb.addMode(n,t.mode),qb.addTypeIds(n,r),qb.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return A0.startDictionaryEncoding(n),A0.addId(n,BigInt(t.id)),A0.addIsOrdered(n,t.isOrdered),r!==void 0&&A0.addIndexType(n,r),A0.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Ip.startFixedSizeBinary(n),Ip.addByteWidth(n,t.byteWidth),Ip.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return kp.startFixedSizeList(n),kp.addListSize(n,t.listSize),kp.endFixedSizeList(n)}visitMap(t,n){return Q4.startMap(n),Q4.addKeysSorted(n,t.keysSorted),Q4.endMap(n)}}const Lz=new pPt;function mPt(e,t=new Map){return new yi(yPt(e,t),Z4(e.metadata),t)}function kOe(e){return new pf(e.count,ROe(e.columns),DOe(e.columns))}function gPt(e){return new mm(kOe(e.data),e.id,e.isDelta)}function yPt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Mi.fromJSON(n,t))}function nye(e,t){return(e.children||[]).filter(Boolean).map(n=>Mi.fromJSON(n,t))}function ROe(e){return(e||[]).reduce((t,n)=>[...t,new ev(n.count,vPt(n.VALIDITY)),...ROe(n.children)],[])}function DOe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Lp(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Lp(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Lp(t.length,i.OFFSET.length)),i.DATA&&t.push(new Lp(t.length,i.DATA.length)),t=DOe(i.children,t)}return t}function vPt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function bPt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=iye(e,nye(e,t)),i=new Mi(e.name,o,e.nullable,Z4(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?rye(r):new Y1,a=new X1(t.get(n),r,n,s.isOrdered),i=new Mi(e.name,a,e.nullable,Z4(e.metadata))):(r=(r=s.indexType)?rye(r):new Y1,t.set(n,o=iye(e,nye(e,t))),a=new X1(o,r,n,s.isOrdered),i=new Mi(e.name,a,e.nullable,Z4(e.metadata))),i||null}function Z4(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function rye(e){return new pl(e.isSigned,e.bitWidth)}function iye(e,t){const n=e.type.name;switch(n){case"NONE":return new wg;case"null":return new wg;case"binary":return new BR;case"utf8":return new xT;case"bool":return new jR;case"list":return new ET((t||[])[0]);case"struct":return new mu(t||[]);case"struct_":return new mu(t||[])}switch(n){case"int":{const r=e.type;return new pl(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new K1(Ma[r.precision])}case"decimal":{const r=e.type;return new OM(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new _T(dm[r.unit])}case"time":{const r=e.type;return new Eg(yn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new $M(yn[r.unit],r.timezone)}case"interval":{const r=e.type;return new wT(hm[r.unit])}case"duration":{const r=e.type;return new MM(yn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new UR(hc[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new LM(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new ST(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new zR((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var xPt=tOe,_Pt=UM;class Np{static fromJSON(t,n){const r=new Np(0,el.V5,n);return r._createHeader=wPt(t,n),r}static decode(t){t=new _Pt(Ti(t));const n=yy.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Np(r,i,s);return o._createHeader=EPt(n,s),o}static encode(t){const n=new xPt;let r=-1;return t.isSchema()?r=yi.encode(n,t.header()):t.isRecordBatch()?r=pf.encode(n,t.header()):t.isDictionaryBatch()&&(r=mm.encode(n,t.header())),yy.startMessage(n),yy.addVersion(n,el.V5),yy.addHeader(n,r),yy.addHeaderType(n,t.headerType),yy.addBodyLength(n,BigInt(t.bodyLength)),yy.finishMessageBuffer(n,yy.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof yi)return new Np(0,el.V5,ra.Schema,t);if(t instanceof pf)return new Np(n,el.V5,ra.RecordBatch,t);if(t instanceof mm)return new Np(n,el.V5,ra.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ra.Schema}isRecordBatch(){return this.headerType===ra.RecordBatch}isDictionaryBatch(){return this.headerType===ra.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Dh(t)}}class pf{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Dh(t)}}class mm{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Dh(n)}}class Lp{constructor(t,n){this.offset=Dh(t),this.length=Dh(n)}}class ev{constructor(t,n){this.length=Dh(t),this.nullCount=Dh(n)}}function wPt(e,t){return()=>{switch(t){case ra.Schema:return yi.fromJSON(e);case ra.RecordBatch:return pf.fromJSON(e);case ra.DictionaryBatch:return mm.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${ra[t]}, type: ${t} }`)}}function EPt(e,t){return()=>{switch(t){case ra.Schema:return yi.decode(e.header(new mp),new Map,e.version());case ra.RecordBatch:return pf.decode(e.header(new m0),e.version());case ra.DictionaryBatch:return mm.decode(e.header(new SE),e.version())}throw new Error(`Unrecognized Message type: { name: ${ra[t]}, type: ${t} }`)}}Mi.encode=OPt;Mi.decode=NPt;Mi.fromJSON=bPt;yi.encode=PPt;yi.decode=SPt;yi.fromJSON=mPt;pf.encode=$Pt;pf.decode=TPt;pf.fromJSON=kOe;mm.encode=MPt;mm.decode=CPt;mm.fromJSON=gPt;ev.encode=LPt;ev.decode=IPt;Lp.encode=FPt;Lp.decode=APt;function SPt(e,t=new Map,n=el.V5){const r=DPt(e,t);return new yi(r,e6(e),t,n)}function TPt(e,t=el.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new pf(e.length(),kPt(e),RPt(e,t))}function CPt(e,t=el.V5){return new mm(pf.decode(e.data(),t),e.id(),e.isDelta())}function APt(e){return new Lp(e.offset(),e.length())}function IPt(e){return new ev(e.length(),e.nullCount())}function kPt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=ev.decode(n));return t}function RPt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<el.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Lp.decode(r));return n}function DPt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Mi.decode(r,t));return n}function sye(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Mi.decode(r,t));return n}function NPt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=aye(e,sye(e,t)),r=new Mi(e.name(),i,e.nullable(),e6(e))):t.has(n=Dh(a.id()))?(s=(s=a.indexType())?oye(s):new Y1,o=new X1(t.get(n),s,n,a.isOrdered()),r=new Mi(e.name(),o,e.nullable(),e6(e))):(s=(s=a.indexType())?oye(s):new Y1,t.set(n,i=aye(e,sye(e,t))),o=new X1(i,s,n,a.isOrdered()),r=new Mi(e.name(),o,e.nullable(),e6(e))),r||null}function e6(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function oye(e){return new pl(e.isSigned(),e.bitWidth())}function aye(e,t){const n=e.typeType();switch(n){case ys.NONE:return new wg;case ys.Null:return new wg;case ys.Binary:return new BR;case ys.Utf8:return new xT;case ys.Bool:return new jR;case ys.List:return new ET((t||[])[0]);case ys.Struct_:return new mu(t||[])}switch(n){case ys.Int:{const r=e.type(new jc);return new pl(r.isSigned(),r.bitWidth())}case ys.FloatingPoint:{const r=e.type(new Rp);return new K1(r.precision())}case ys.Decimal:{const r=e.type(new Ll);return new OM(r.scale(),r.precision(),r.bitWidth())}case ys.Date:{const r=e.type(new X4);return new _T(r.unit())}case ys.Time:{const r=e.type(new gI);return new Eg(r.unit(),r.bitWidth())}case ys.Timestamp:{const r=e.type(new yI);return new $M(r.unit(),r.timezone())}case ys.Interval:{const r=e.type(new Dp);return new wT(r.unit())}case ys.Duration:{const r=e.type(new Ap);return new MM(r.unit())}case ys.Union:{const r=e.type(new qb);return new UR(r.mode(),r.typeIdsArray()||[],t||[])}case ys.FixedSizeBinary:{const r=e.type(new Ip);return new LM(r.byteWidth())}case ys.FixedSizeList:{const r=e.type(new kp);return new ST(r.listSize(),(t||[])[0])}case ys.Map:{const r=e.type(new Q4);return new zR((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${ys[n]}" (${n})`)}function PPt(e,t){const n=t.fields.map(s=>Mi.encode(e,s));mp.startFieldsVector(e,n.length);const r=mp.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?mp.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Oo.startKeyValue(e),Oo.addKey(e,a),Oo.addValue(e,u),Oo.endKeyValue(e)})):-1;return mp.startSchema(e),mp.addFields(e,r),mp.addEndianness(e,BPt?CT.Little:CT.Big),i!==-1&&mp.addCustomMetadata(e,i),mp.endSchema(e)}function OPt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;nr.isDictionary(s)?(o=s.dictionary.typeId,i=Lz.visit(s,e),r=Lz.visit(s.dictionary,e)):r=Lz.visit(s,e);const a=(s.children||[]).map(c=>Mi.encode(e,c)),u=Ff.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Ff.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Oo.startKeyValue(e),Oo.addKey(e,d),Oo.addValue(e,h),Oo.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Ff.startField(e),Ff.addType(e,r),Ff.addTypeType(e,o),Ff.addChildren(e,u),Ff.addNullable(e,!!t.nullable),n!==-1&&Ff.addName(e,n),i!==-1&&Ff.addDictionary(e,i),l!==-1&&Ff.addCustomMetadata(e,l),Ff.endField(e)}function $Pt(e,t){const n=t.nodes||[],r=t.buffers||[];m0.startNodesVector(e,n.length);for(const o of n.slice().reverse())ev.encode(e,o);const i=e.endVector();m0.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Lp.encode(e,o);const s=e.endVector();return m0.startRecordBatch(e),m0.addLength(e,BigInt(t.length)),m0.addNodes(e,i),m0.addBuffers(e,s),m0.endRecordBatch(e)}function MPt(e,t){const n=pf.encode(e,t.data);return SE.startDictionaryBatch(e),SE.addId(e,BigInt(t.id)),SE.addIsDelta(e,t.isDelta),SE.addData(e,n),SE.endDictionaryBatch(e)}function LPt(e,t){return IOe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function FPt(e,t){return AOe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const BPt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),IG="ARROW1",Cte=new Uint8Array(IG.length);for(let e=0;e<IG.length;e+=1)Cte[e]=IG.codePointAt(e);Cte.length;class oo extends rr{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Uc?s.data.children:s.data),r=new oo;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Zr)return this.visitMany(t.data),this;const{type:n}=t;if(!nr.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(nr.isUnion(n))this.nodes.push(new ev(r,0));else{const{nullCount:i}=t;nr.isNull(n)||wh.call(this,i<=0?new Uint8Array(0):FM(t.offset,r,t.nullBitmap)),this.nodes.push(new ev(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function wh(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Lp(this._byteLength,t)),this._byteLength+=t,this}function jPt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(wh.call(this,i),n.mode===hc.Sparse)return kG.call(this,e);if(n.mode===hc.Dense){if(e.offset<=0)return wh.call(this,s),kG.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);wh.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function UPt(e){let t;return e.nullCount>=e.length?wh.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?wh.call(this,FM(e.offset,e.length,t)):wh.call(this,j3e(e.values))}function Gg(e){return wh.call(this,e.values.subarray(0,e.length*e.stride))}function NOe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return wh.call(this,OPe(-i,t+1,r)),wh.call(this,n.subarray(i,i+o)),this}function Ate(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return wh.call(this,OPe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function kG(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}oo.prototype.visitBool=UPt;oo.prototype.visitInt=Gg;oo.prototype.visitFloat=Gg;oo.prototype.visitUtf8=NOe;oo.prototype.visitBinary=NOe;oo.prototype.visitFixedSizeBinary=Gg;oo.prototype.visitDate=Gg;oo.prototype.visitTimestamp=Gg;oo.prototype.visitTime=Gg;oo.prototype.visitDecimal=Gg;oo.prototype.visitList=Ate;oo.prototype.visitStruct=kG;oo.prototype.visitUnion=jPt;oo.prototype.visitInterval=Gg;oo.prototype.visitDuration=Gg;oo.prototype.visitFixedSizeList=Ate;oo.prototype.visitMap=Ate;class POe extends rOe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new $z,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,zv(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return g8(t)?t.then(n=>this.writeAll(n)):y8(t)?Dte(this,t):Rte(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof $z?this._sink=t:(this._sink=new $z,t&&GRt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&YRt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!TG(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Ul&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Uc&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!TG(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Uc?t instanceof hPt||this._writeRecordBatch(t):t instanceof Ul?this.writeAll(t.batches):jee(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Np.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===ra.RecordBatch?this._recordBatchBlocks.push(new J1(a,t.bodyLength,this._position)):t.headerType===ra.DictionaryBatch&&this._dictionaryBlocks.push(new J1(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Ti(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Np.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Cte)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=oo.assemble(t),o=new pf(t.numRows,r,i),a=Np.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=oo.assemble(new Zr([t])),u=new pf(t.length,s,o),l=new mm(u,n,r),c=Np.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class Ite extends POe{static writeAll(t,n){const r=new Ite(n);return g8(t)?t.then(i=>r.writeAll(i)):y8(t)?Dte(r,t):Rte(r,t)}}class kte extends POe{static writeAll(t){const n=new kte;return g8(t)?t.then(r=>n.writeAll(r)):y8(t)?Dte(n,t):Rte(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=SG.encode(new SG(t,el.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Rte(e,t){let n=t;t instanceof Ul&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Dte(e,t){var n,r,i,s,o,a,u;return E0(this,void 0,void 0,function*(){try{for(n=!0,r=XI(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function zPt(e,t="stream"){return(t==="stream"?Ite:kte).writeAll(e).toUint8Array(!0)}function Nte(e,t=1){return(e*t+63&-64||64)/t}function tv(e,t,n=e.BYTES_PER_ELEMENT){return new e(Nte(t,n))}function Pte(e){return e instanceof Si?e:new Si(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function VPt(e){return new Zr([Pte(e)])}const Ote=new TextEncoder;function HPt(e,t,n){const r=Ote.encode(n);return e.set(r,t),r.length}function qPt(e,t,n){return Ote.encodeInto(n,e.subarray(t)).written}const WPt=Ote.encodeInto?qPt:HPt;function uye(e,t){const n=tv(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function GPt(e,t){const n=tv(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function YPt(e,t){const n=tv(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function KPt(e,t){const n=tv(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function XPt(e){const t=GM({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function QPt(e,t,n){const r=tv(Int32Array,t+1),i=tv(Uint8Array,3*n);let s=0;return{set(o,a){s+=WPt(i,s,o),r[a+1]=s},data:()=>{const o=Nte(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function JPt(e,t){const n=[],r=tv(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:ZPt(e.dictionary,n,o)})}}function ZPt(e,t,n){const r=QPt(e,t.length,n);return t.forEach(r.set),VPt(r.data())}function e3t(e,t){const n=tv(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function t3t(e,t,n=!0){let r;switch(e.typeId){case fe.Int:r=e.bitWidth<64?uye:null;break;case fe.Float:r=e.precision>0?uye:null;break;case fe.Dictionary:r=e.dictionary.typeId===fe.Utf8&&e.indices.typeId===fe.Int&&e.indices.bitWidth<64?JPt:null;break;case fe.Bool:r=GPt;break;case fe.Date:r=e.unit?KPt:YPt;break}return r==null?XPt(e):n?e3t(r(e,t),t):r(e,t)}function n3t(e,t){const n=e.length,r=Nte(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),Pte({type:t,length:n,buffers:[null,i]})}function OOe(e,t,n,r,i=!0){const s=t3t(r,e,i);return t(n,s.set),Pte(s.data())}function $te(e){if(e instanceof nr||e==null)return e;switch(e){case fe.Binary:return new BR;case fe.Bool:return new jR;case fe.DateDay:return new lDt;case fe.DateMillisecond:case fe.Date:return new cDt;case fe.Dictionary:return new X1(new xT,new Y1);case fe.Float16:return new n3e;case fe.Float32:return new Xee;case fe.Float64:case fe.Float:return new Qee;case fe.Int8:return new Vee;case fe.Int16:return new Hee;case fe.Int32:case fe.Int:return new Y1;case fe.Int64:return new qee;case fe.IntervalDayTime:return new mDt;case fe.Interval:case fe.IntervalYearMonth:return new gDt;case fe.Null:return new wg;case fe.TimeMicrosecond:return new hDt;case fe.TimeMillisecond:case fe.Time:return new dDt;case fe.TimeNanosecond:return new pDt;case fe.TimeSecond:return new fDt;case fe.Uint8:return new Wee;case fe.Uint16:return new Gee;case fe.Uint32:return new Yee;case fe.Uint64:return new Kee;case fe.Utf8:return new xT;default:Jn(`Unsupported type code: ${cm(e)}. Use a data type constructor instead?`)}}function r3t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function $Oe(e,t){const n=RG();return e(t,n.add),n}function RG(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(_g(t))++e.dates,r3t(t)&&++e.utcdays;else if(vx(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=RG());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=RG())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return $te(i3t(e))}};return e}function i3t(e){const t=e.count-e.nulls;if(t===0)return fe.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?fe.Float64:n<128?fe.Int8:n<32768?fe.Int16:fe.Int32:n>=2**32?fe.Float64:n<256?fe.Uint8:n<65536?fe.Uint16:fe.Uint32}else{if(e.nums===t)return fe.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?fe.Int64:Jn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?fe.Uint64:Jn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return fe.Bool;if(e.utcdays===t)return fe.DateDay;if(e.dates===t)return fe.DateMillisecond;if(e.arrays===t){const n=Mi.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new ST(e.minlen,n):new ET(n)}else if(e.structs===t){const n=e.struct_prof;return new mu(Object.keys(n).map(r=>Mi.new(r,n[r].type(),!0)))}else{if(e.strings>0)return fe.Dictionary;Jn("Type inference failure")}}}}function s3t(e,t,n,r,i,s=!0){if(i=$te(i),!i){const o=$Oe(r,t);s=o.nulls>0,i=o.type()}return OOe(n,r,t,i,s)}function o3t(e,t,n,r,i,s=!0){i=$te(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=a3t(o);if(u&&a&&lye(u.type,i))return u;const l=o.data;if(gN(l)){const c=u3t(l);if(a&&c&&lye(c,i))return n3t(l,c);i=i||c,s=!1}if(!i){const c=$Oe(r,o);s=c.nulls>0,i=c.type()}return OOe(n,r,o,i,s)}function a3t(e){return e instanceof Zr?e:e.vector instanceof Zr?e.vector:null}function u3t(e){const n={Float32Array:Xee,Float64Array:Qee,Int8Array:Vee,Int16Array:Hee,Int32Array:Y1,Uint8Array:Wee,Uint16Array:Gee,Uint32Array:Yee,BigInt64Array:qee,BigUint64Array:Kee}[e.constructor.name];return n?new n:null}function lye(e,t){return!e||!t?!0:e.compareTo(t)}function l3t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function c3t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&vx(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const f3t=()=>Jn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function d3t(){try{return Ul}catch{f3t()}}function MOe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=h3t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Jn("Column length mismatch"),a[l]=c});const u=d3t();return new u(a)}function h3t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=fs(n)?n(e):Jr(n)?n:null;if(Jr(e))return{dataFrom:s3t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:l3t(e,r,i)};if(p3t(e))return{dataFrom:o3t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:c3t(e,r,i)};Jn("Unsupported input data type")}function p3t(e){return e&&fs(e.reify)}function m3t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return zPt(MOe(e,r),n)}function g3t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function y3t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&_g(u))++i,g3t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function C8(e,t){return fs(t)?t(e):t||e.columnNames()}function LOe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=y3t(v3t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function v3t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function Mte(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function b3t(e,t={}){const n=C8(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":_g(l)?p8(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return Mte(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function FOe(e,t={}){if(fs(t))return t(e)+"";const n=typeof e;if(n==="object"){if(_g(e))return t.utc?p8(e):oPe(e);{const r=JSON.stringify(e,(s,o)=>gN(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function A8(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function x3t(e,t={}){const n=C8(e,t.columns),{align:r,format:i}=LOe(e,n,t),s=_3t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(FOe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const b=y?a(r[g]):"",x=s[m]&&s[m](g,d,f)||"",w=(b?`text-align: ${b};`+(x?" ":""):"")+x;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return Mte(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function _3t(e){return A8(e.style,t=>fs(t)?t:()=>t)}function w3t(e,t=!0,n=!1){return e===void 0||e?t:n}const E3t=e=>_g(e)?p8(e,!0):e;function S3t(e,t={}){const n=w3t(t.schema),r=t.format||{},i=C8(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||E3t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function T3t(e,t={}){const n=C8(e,t.columns),{align:r,format:i}=LOe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return Mte(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(FOe(u,i[l]))+"|"}}),a+`
`}function BOe(e,t){for(const[n,r]of m8(t))e.set(n,r);return e}function C3t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Sg(e,t,n=new Map){return t=hl(t)?e.columnName(t):t,qa(t)?n.set(t,t):Jr(t)?t.forEach(r=>Sg(e,r,n)):fs(t)?Sg(e,t(e),n):Au(t)?BOe(n,t):Jn(`Invalid column selection: ${cm(t)}`),n}function I8(e,t){return e.toObject=t,e}function jOe(e){return Jr(e)?e.map(jOe):e&&e.toObject?e.toObject():e}function AT(){return I8(e=>e.columnNames(),()=>({all:[]}))}function UOe(...e){return e=e.flat(),I8(t=>{const n=Sg(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:jOe(e)}))}function A3t(e,t){return I8(n=>{let r=hl(e)?e:n.columnIndex(e),i=hl(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function I3t(e){return qa(e)&&(e=RegExp(C3t(e))),I8(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function k3t(e){return gN(e.data)?e.data.constructor:Array}class I0 extends Wkt{static from(t,n){return new I0(Kkt(t,n),n)}static new(t,n){if(t instanceof I0)return t;const r={},i=[];for(const[s,o]of m8(t))r[s]=o,i.push(s);return new I0(r,n||i)}constructor(t,n,r,i,s,o){A8(t,Ykt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new I0(t||this._data,n||(t?null:this._names),o,i!==void 0?i:SRt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=wf(r).groupby(r.groups());return t.forEach(s=>{s=I0.new(s),s.numRows()!==n&&Jn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Jn(`Unrecognized column: ${t}`)}object(t=0){return cye(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Sg(this,t.columns||AT()),o=DPe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),CRt(this,u,a,n)}return a}*[Symbol.iterator](){const t=cye(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(k3t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=TRt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return MOe(this,t)}toArrowBuffer(t){return m3t(this,t)}toCSV(t){return b3t(this,t)}toHTML(t){return x3t(this,t)}toJSON(t){return S3t(this,t)}toMarkdown(t){return T3t(this,t)}}function cye(e){let t=e._builder;if(!t){const n=DPe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class R3t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Br(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=D3t[e.type];s&&s(e,t,n)}const bO=(e,t,n)=>{Br(e.argument,t,n,e)},Fz=(e,t,n)=>{Br(e.left,t,n,e),Br(e.right,t,n,e)},fye=(e,t,n)=>{Br(e.test,t,n,e),Br(e.consequent,t,n,e),e.alternate&&Br(e.alternate,t,n,e)},Bz=(e,t,n)=>{gp(e.params,t,n,e),Br(e.body,t,n,e)},dye=(e,t,n)=>{Br(e.callee,t,n,e),gp(e.arguments,t,n,e)},gp=(e,t,n,r)=>{e.forEach(i=>Br(i,t,n,r))},D3t={TemplateLiteral:(e,t,n)=>{gp(e.expressions,t,n,e),gp(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Br(e.object,t,n,e),Br(e.property,t,n,e)},CallExpression:dye,NewExpression:dye,ArrayExpression:(e,t,n)=>{gp(e.elements,t,n,e)},AssignmentExpression:Fz,AwaitExpression:bO,BinaryExpression:Fz,LogicalExpression:Fz,UnaryExpression:bO,UpdateExpression:bO,ConditionalExpression:fye,ObjectExpression:(e,t,n)=>{gp(e.properties,t,n,e)},Property:(e,t,n)=>{Br(e.key,t,n,e),Br(e.value,t,n,e)},ArrowFunctionExpression:Bz,FunctionExpression:Bz,FunctionDeclaration:Bz,VariableDeclaration:(e,t,n)=>{gp(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Br(e.id,t,n,e),Br(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Br(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{gp(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Br(e.expression,t,n,e)},IfStatement:fye,ForStatement:(e,t,n)=>{Br(e.init,t,n,e),Br(e.test,t,n,e),Br(e.update,t,n,e),Br(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Br(e.test,t,n,e),Br(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Br(e.body,t,n,e),Br(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Br(e.discriminant,t,n,e),gp(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Br(e.test,t,n,e),gp(e.consequent,t,n,e)},ReturnStatement:bO,Program:(e,t,n)=>{Br(e.body[0],t,n,e)}};function zOe(e){delete e.start,delete e.end,delete e.optional}function hye(e){zOe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function N3t(e){return Br(e,null,{Column:hye,Constant:hye,Default:zOe}),e}function Mo(e,t){return t&&t.type===e}function P3t(e){return Mo(kRt,e)||Mo(IRt,e)}function O3t(e){return fs(e)?e:()=>e}const $3t="Escaped functions are not valid as rollup or pivot values.";function M3t(e,t,n){e.aggronly&&Jn($3t);const r="(row,data)=>fn("+RPe(e.table.columnNames())+",$)";return{escape:Fee.escape(r,O3t(t.expr),n)}}var L3t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],VOe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],F3t="-----------------------------------------------------------------------------------------------------------------------------------------------------",HOe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",jz={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Uz="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",B3t={5:Uz,"5module":Uz+" export import",6:Uz+" const class extends export import super"},j3t=/^in(stanceof)?$/,U3t=new RegExp("["+HOe+"]"),z3t=new RegExp("["+HOe+F3t+"]");function DG(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Tg(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&U3t.test(String.fromCharCode(e)):t===!1?!1:DG(e,VOe)}function IT(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&z3t.test(String.fromCharCode(e)):t===!1?!1:DG(e,VOe)||DG(e,L3t)}var qr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Pf(e,t){return new qr(e,{beforeExpr:!0,binop:t})}var Of={beforeExpr:!0},kl={startsExpr:!0},Lte={};function Rr(e,t){return t===void 0&&(t={}),t.keyword=e,Lte[e]=new qr(e,t)}var te={num:new qr("num",kl),regexp:new qr("regexp",kl),string:new qr("string",kl),name:new qr("name",kl),privateId:new qr("privateId",kl),eof:new qr("eof"),bracketL:new qr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new qr("]"),braceL:new qr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new qr("}"),parenL:new qr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new qr(")"),comma:new qr(",",Of),semi:new qr(";",Of),colon:new qr(":",Of),dot:new qr("."),question:new qr("?",Of),questionDot:new qr("?."),arrow:new qr("=>",Of),template:new qr("template"),invalidTemplate:new qr("invalidTemplate"),ellipsis:new qr("...",Of),backQuote:new qr("`",kl),dollarBraceL:new qr("${",{beforeExpr:!0,startsExpr:!0}),eq:new qr("=",{beforeExpr:!0,isAssign:!0}),assign:new qr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new qr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new qr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Pf("||",1),logicalAND:Pf("&&",2),bitwiseOR:Pf("|",3),bitwiseXOR:Pf("^",4),bitwiseAND:Pf("&",5),equality:Pf("==/!=/===/!==",6),relational:Pf("</>/<=/>=",7),bitShift:Pf("<</>>/>>>",8),plusMin:new qr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Pf("%",10),star:Pf("*",10),slash:Pf("/",10),starstar:new qr("**",{beforeExpr:!0}),coalesce:Pf("??",1),_break:Rr("break"),_case:Rr("case",Of),_catch:Rr("catch"),_continue:Rr("continue"),_debugger:Rr("debugger"),_default:Rr("default",Of),_do:Rr("do",{isLoop:!0,beforeExpr:!0}),_else:Rr("else",Of),_finally:Rr("finally"),_for:Rr("for",{isLoop:!0}),_function:Rr("function",kl),_if:Rr("if"),_return:Rr("return",Of),_switch:Rr("switch"),_throw:Rr("throw",Of),_try:Rr("try"),_var:Rr("var"),_const:Rr("const"),_while:Rr("while",{isLoop:!0}),_with:Rr("with"),_new:Rr("new",{beforeExpr:!0,startsExpr:!0}),_this:Rr("this",kl),_super:Rr("super",kl),_class:Rr("class",kl),_extends:Rr("extends",Of),_export:Rr("export"),_import:Rr("import",kl),_null:Rr("null",kl),_true:Rr("true",kl),_false:Rr("false",kl),_in:Rr("in",{beforeExpr:!0,binop:7}),_instanceof:Rr("instanceof",{beforeExpr:!0,binop:7}),_typeof:Rr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Rr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Rr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},wd=/\r\n?|\n|\u2028|\u2029/,V3t=new RegExp(wd.source,"g");function Y2(e){return e===10||e===13||e===8232||e===8233}function qOe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(Y2(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var WOe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Wf=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,GOe=Object.prototype,H3t=GOe.hasOwnProperty,q3t=GOe.toString,EN=Object.hasOwn||function(e,t){return H3t.call(e,t)},pye=Array.isArray||function(e){return q3t.call(e)==="[object Array]"},mye=Object.create(null);function Zy(e){return mye[e]||(mye[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function nv(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var W3t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,VR=function(t,n){this.line=t,this.column=n};VR.prototype.offset=function(t){return new VR(this.line,this.column+t)};var k8=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function YOe(e,t){for(var n=1,r=0;;){var i=qOe(e,r,t);if(i<0)return new VR(n,t-r);++n,r=i}}var NG={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},gye=!1;function G3t(e){var t={};for(var n in NG)t[n]=e&&EN(e,n)?e[n]:NG[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!gye&&typeof console=="object"&&console.warn&&(gye=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),pye(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return pye(t.onComment)&&(t.onComment=Y3t(t,t.onComment)),t}function Y3t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new k8(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var HR=1,K2=2,Fte=4,KOe=8,XOe=16,QOe=32,Bte=64,JOe=128,SN=256,jte=HR|K2|SN;function Ute(e,t){return K2|(e?Fte:0)|(t?KOe:0)}var QM=0,zte=1,Yg=2,ZOe=3,e4e=4,t4e=5,Ho=function(t,n,r){this.options=t=G3t(t),this.sourceFile=t.sourceFile,this.keywords=Zy(B3t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=jz[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Zy(i);var s=(i?i+" ":"")+jz.strict;this.reservedWordsStrict=Zy(s),this.reservedWordsStrictBind=Zy(s+" "+jz.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(wd).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=te.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(HR),this.regexpState=null,this.privateNameStack=[]},Nm={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Ho.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Nm.inFunction.get=function(){return(this.currentVarScope().flags&K2)>0};Nm.inGenerator.get=function(){return(this.currentVarScope().flags&KOe)>0&&!this.currentVarScope().inClassFieldInit};Nm.inAsync.get=function(){return(this.currentVarScope().flags&Fte)>0&&!this.currentVarScope().inClassFieldInit};Nm.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&SN)return!1;if(t.flags&K2)return(t.flags&Fte)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Nm.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Bte)>0||n||this.options.allowSuperOutsideMethod};Nm.allowDirectSuper.get=function(){return(this.currentThisScope().flags&JOe)>0};Nm.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Nm.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(K2|SN))>0||n};Nm.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&SN)>0};Ho.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Ho.parse=function(t,n){return new this(n,t).parse()};Ho.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Ho.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Ho.prototype,Nm);var xl=Ho.prototype,K3t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;xl.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Wf.lastIndex=e,e+=Wf.exec(this.input)[0].length;var t=K3t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Wf.lastIndex=e+t[0].length;var n=Wf.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||wd.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Wf.lastIndex=e,e+=Wf.exec(this.input)[0].length,this.input[e]===";"&&e++}};xl.eat=function(e){return this.type===e?(this.next(),!0):!1};xl.isContextual=function(e){return this.type===te.name&&this.value===e&&!this.containsEsc};xl.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};xl.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};xl.canInsertSemicolon=function(){return this.type===te.eof||this.type===te.braceR||wd.test(this.input.slice(this.lastTokEnd,this.start))};xl.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};xl.semicolon=function(){!this.eat(te.semi)&&!this.insertSemicolon()&&this.unexpected()};xl.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};xl.expect=function(e){this.eat(e)||this.unexpected()};xl.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var R8=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};xl.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};xl.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};xl.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};xl.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var en=Ho.prototype;en.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==te.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var Vte={kind:"loop"},X3t={kind:"switch"};en.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Wf.lastIndex=this.pos;var t=Wf.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Tg(r,!0)){for(var i=n+1;IT(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!j3t.test(s))return!0}return!1};en.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Wf.lastIndex=this.pos;var e=Wf.exec(this.input),t=this.pos+e[0].length,n;return!wd.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(IT(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};en.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=te._var,s="let"),r){case te._break:case te._continue:return this.parseBreakContinueStatement(i,r.keyword);case te._debugger:return this.parseDebuggerStatement(i);case te._do:return this.parseDoStatement(i);case te._for:return this.parseForStatement(i);case te._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case te._class:return e&&this.unexpected(),this.parseClass(i,!0);case te._if:return this.parseIfStatement(i);case te._return:return this.parseReturnStatement(i);case te._switch:return this.parseSwitchStatement(i);case te._throw:return this.parseThrowStatement(i);case te._try:return this.parseTryStatement(i);case te._const:case te._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case te._while:return this.parseWhileStatement(i);case te._with:return this.parseWithStatement(i);case te.braceL:return this.parseBlock(!0,i);case te.semi:return this.parseEmptyStatement(i);case te._export:case te._import:if(this.options.ecmaVersion>10&&r===te._import){Wf.lastIndex=this.pos;var o=Wf.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===te._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===te.name&&c.type==="Identifier"&&this.eat(te.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};en.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(te.semi)||this.insertSemicolon()?e.label=null:this.type!==te.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};en.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};en.parseDoStatement=function(e){return this.next(),this.labels.push(Vte),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(te._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(te.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};en.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Vte),this.enterScope(0),this.expect(te.parenL),this.type===te.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===te._var||this.type===te._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===te._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new R8,u=this.parseExpression(t>-1?"await":!0,a);return this.type===te._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===te._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};en.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,mk|(n?0:PG),!1,t)};en.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(te._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};en.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(te.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};en.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(te.braceL),this.labels.push(X3t),this.enterScope(0);for(var t,n=!1;this.type!==te.braceR;)if(this.type===te._case||this.type===te._default){var r=this.type===te._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(te.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};en.parseThrowStatement=function(e){return this.next(),wd.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Q3t=[];en.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?QOe:0),this.checkLValPattern(e,t?e4e:Yg),this.expect(te.parenR),e};en.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===te._catch){var t=this.startNode();this.next(),this.eat(te.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(te._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};en.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};en.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(Vte),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};en.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};en.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};en.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===te._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};en.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};en.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(te.braceL),e&&this.enterScope(0);this.type!==te.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};en.parseFor=function(e,t){return e.init=t,this.expect(te.semi),e.test=this.type===te.semi?null:this.parseExpression(),this.expect(te.semi),e.update=this.type===te.parenR?null:this.parseExpression(),this.expect(te.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};en.parseForIn=function(e,t){var n=this.type===te._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(te.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};en.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(te.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===te._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===te._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(te.comma))break}return e};en.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?zte:Yg,!1)};var mk=1,PG=2,n4e=4;en.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===te.star&&t&PG&&this.unexpected(),e.generator=this.eat(te.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&mk&&(e.id=t&n4e&&this.type!==te.name?null:this.parseIdent(),e.id&&!(t&PG)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?zte:Yg:ZOe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Ute(e.async,e.generator)),t&mk||(e.id=this.type===te.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&mk?"FunctionDeclaration":"FunctionExpression")};en.parseFunctionParams=function(e){this.expect(te.parenL),e.params=this.parseBindingList(te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};en.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(te.braceL);this.type!==te.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&J3t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};en.parseClassElement=function(e){if(this.eat(te.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(te.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===te.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===te.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(te.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===te.parenL||o!=="method"||i||s){var l=!n.static&&JM(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};en.isClassElementNameStart=function(){return this.type===te.name||this.type===te.privateId||this.type===te.num||this.type===te.string||this.type===te.bracketL||this.type.keyword};en.parseClassElementName=function(e){this.type===te.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};en.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&JM(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};en.parseClassField=function(e){if(JM(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&JM(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(te.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};en.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(SN|Bte);this.type!==te.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};en.parseClassId=function(e,t){this.type===te.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,Yg,!1)):(t===!0&&this.unexpected(),e.id=null)};en.parseClassSuper=function(e){e.superClass=this.eat(te._extends)?this.parseExprSubscripts(null,!1):null};en.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};en.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];EN(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function J3t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function JM(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}en.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==te.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};en.parseExport=function(e,t){if(this.next(),this.eat(te.star))return this.parseExportAllDeclaration(e,t);if(this.eat(te._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==te.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};en.parseExportDeclaration=function(e){return this.parseStatement(null)};en.parseExportDefaultDeclaration=function(){var e;if(this.type===te._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,mk|n4e,!1,e)}else if(this.type===te._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};en.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),EN(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};en.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};en.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};en.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};en.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};en.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(te.braceL);!this.eat(te.braceR);){if(n)n=!1;else if(this.expect(te.comma),this.afterTrailingComma(te.braceR))break;t.push(this.parseExportSpecifier(e))}return t};en.parseImport=function(e){return this.next(),this.type===te.string?(e.specifiers=Q3t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===te.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};en.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,Yg),this.finishNode(e,"ImportSpecifier")};en.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,Yg),this.finishNode(e,"ImportDefaultSpecifier")};en.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,Yg),this.finishNode(e,"ImportNamespaceSpecifier")};en.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===te.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(te.comma)))return e;if(this.type===te.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(te.braceL);!this.eat(te.braceR);){if(t)t=!1;else if(this.expect(te.comma),this.afterTrailingComma(te.braceR))break;e.push(this.parseImportSpecifier())}return e};en.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===te.string){var e=this.parseLiteral(this.value);return W3t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};en.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};en.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Ed=Ho.prototype;Ed.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Ed.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Ed.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Ed.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==te.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Ed.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case te.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(te.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case te.braceL:return this.parseObj(!0)}return this.parseIdent()};Ed.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(te.comma),t&&this.type===te.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===te.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Ed.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Ed.parseBindingListItem=function(e){return e};Ed.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(te.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Ed.checkLValSimple=function(e,t,n){t===void 0&&(t=QM);var r=t!==QM;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===Yg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(EN(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==t4e&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Ed.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=QM),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Ed.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=QM),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Ud=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Es={b_stat:new Ud("{",!1),b_expr:new Ud("{",!0),b_tmpl:new Ud("${",!1),p_stat:new Ud("(",!1),p_expr:new Ud("(",!0),q_tmpl:new Ud("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Ud("function",!1),f_expr:new Ud("function",!0),f_expr_gen:new Ud("function",!0,!1,null,!0),f_gen:new Ud("function",!1,!1,null,!0)},X2=Ho.prototype;X2.initialContext=function(){return[Es.b_stat]};X2.curContext=function(){return this.context[this.context.length-1]};X2.braceIsBlock=function(e){var t=this.curContext();return t===Es.f_expr||t===Es.f_stat?!0:e===te.colon&&(t===Es.b_stat||t===Es.b_expr)?!t.isExpr:e===te._return||e===te.name&&this.exprAllowed?wd.test(this.input.slice(this.lastTokEnd,this.start)):e===te._else||e===te.semi||e===te.eof||e===te.parenR||e===te.arrow?!0:e===te.braceL?t===Es.b_stat:e===te._var||e===te._const||e===te.name?!1:!this.exprAllowed};X2.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};X2.updateContext=function(e){var t,n=this.type;n.keyword&&e===te.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};X2.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};te.parenR.updateContext=te.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Es.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};te.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Es.b_stat:Es.b_expr),this.exprAllowed=!0};te.dollarBraceL.updateContext=function(){this.context.push(Es.b_tmpl),this.exprAllowed=!0};te.parenL.updateContext=function(e){var t=e===te._if||e===te._for||e===te._with||e===te._while;this.context.push(t?Es.p_stat:Es.p_expr),this.exprAllowed=!0};te.incDec.updateContext=function(){};te._function.updateContext=te._class.updateContext=function(e){e.beforeExpr&&e!==te._else&&!(e===te.semi&&this.curContext()!==Es.p_stat)&&!(e===te._return&&wd.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===te.colon||e===te.braceL)&&this.curContext()===Es.b_stat)?this.context.push(Es.f_expr):this.context.push(Es.f_stat),this.exprAllowed=!1};te.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};te.backQuote.updateContext=function(){this.curContext()===Es.q_tmpl?this.context.pop():this.context.push(Es.q_tmpl),this.exprAllowed=!1};te.star.updateContext=function(e){if(e===te._function){var t=this.context.length-1;this.context[t]===Es.f_expr?this.context[t]=Es.f_expr_gen:this.context[t]=Es.f_gen}this.exprAllowed=!0};te.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==te.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Nn=Ho.prototype;Nn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Nn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===te.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(te.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Nn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new R8,r=!0);var a=this.start,u=this.startLoc;(this.type===te.parenL||this.type===te.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===te.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===te.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Nn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(te.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(te.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Nn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Nn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==te._in)&&s>r){var o=this.type===te.logicalOR||this.type===te.logicalAND,a=this.type===te.coalesce;a&&(s=te.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===te.coalesce||a&&(this.type===te.logicalOR||this.type===te.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Nn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Nn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===te.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&r4e(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===te.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==te._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(te.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function r4e(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&r4e(e.expression)}Nn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Nn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Nn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(te.arrow)};Nn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Nn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(te.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(te.bracketL);if(l||u&&this.type!==te.parenL&&this.type!==te.backQuote||this.eat(te.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(te.bracketR)):this.type===te.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(te.parenL)){var f=new R8,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(te.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===te.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};Nn.parseExprAtom=function(e,t,n){this.type===te.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case te._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===te.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==te.dot&&this.type!==te.bracketL&&this.type!==te.parenL&&this.unexpected(),this.finishNode(r,"Super");case te._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case te.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(te._function))return this.overrideContext(Es.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(te.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===te.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(te.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case te.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case te.num:case te.string:return this.parseLiteral(this.value);case te._null:case te._true:case te._false:return r=this.startNode(),r.value=this.type===te._null?null:this.type===te._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case te.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case te.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(te.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case te.braceL:return this.overrideContext(Es.b_expr),this.parseObj(!1,e);case te._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case te._class:return this.parseClass(this.startNode(),!1);case te._new:return this.parseNew();case te.backQuote:return this.parseTemplate();case te._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Nn.parseExprAtomDefault=function(){this.unexpected()};Nn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===te.parenL&&!e)return this.parseDynamicImport(t);if(this.type===te.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Nn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(te.parenR)){var t=this.start;this.eat(te.comma)&&this.eat(te.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Nn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Nn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Nn.parseParenExpression=function(){this.expect(te.parenL);var e=this.parseExpression();return this.expect(te.parenR),e};Nn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Nn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new R8,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==te.parenR;)if(l?l=!1:this.expect(te.comma),s&&this.afterTrailingComma(te.parenR,!0)){c=!0;break}else if(this.type===te.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(te.parenR),e&&this.shouldParseArrow(u)&&this.eat(te.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};Nn.parseParenItem=function(e){return e};Nn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var Z3t=[];Nn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===te.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(te.parenL)?e.arguments=this.parseExprList(te.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Z3t,this.finishNode(e,"NewExpression")};Nn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===te.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===te.backQuote,this.finishNode(n,"TemplateElement")};Nn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===te.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(te.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(te.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Nn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===te.name||this.type===te.num||this.type===te.string||this.type===te.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===te.star)&&!wd.test(this.input.slice(this.lastTokEnd,this.start))};Nn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(te.braceR);){if(r)r=!1;else if(this.expect(te.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(te.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Nn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(te.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===te.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===te.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(te.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(te.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Nn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Nn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===te.colon&&this.unexpected(),this.eat(te.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===te.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==te.comma&&this.type!==te.braceR&&this.type!==te.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===te.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Nn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(te.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(te.bracketR),e.key;e.computed=!1}return e.key=this.type===te.num||this.type===te.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Nn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Nn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Ute(t,r.generator)|Bte|(n?JOe:0)),this.expect(te.parenL),r.params=this.parseBindingList(te.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Nn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(Ute(n,!1)|XOe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Nn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==te.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,t4e),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Nn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Nn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,zte,t?null:n)}};Nn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(te.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===te.comma?o=null:this.type===te.ellipsis?(o=this.parseSpread(r),r&&this.type===te.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Nn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Nn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Nn.parseIdentNode=function(){var e=this.startNode();return this.type===te.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=te.name):this.unexpected(),e};Nn.parsePrivateIdent=function(){var e=this.startNode();return this.type===te.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Nn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===te.semi||this.canInsertSemicolon()||this.type!==te.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(te.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Nn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var ZM=Ho.prototype;ZM.raise=function(e,t){var n=YOe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};ZM.raiseRecoverable=ZM.raise;ZM.curPosition=function(){if(this.options.locations)return new VR(this.curLine,this.pos-this.lineStart)};var qv=Ho.prototype,eOt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};qv.enterScope=function(e){this.scopeStack.push(new eOt(e))};qv.exitScope=function(){this.scopeStack.pop()};qv.treatFunctionsAsVarInScope=function(e){return e.flags&K2||!this.inModule&&e.flags&HR};qv.declareName=function(e,t,n){var r=!1;if(t===Yg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&HR&&delete this.undefinedExports[e]}else if(t===e4e){var s=this.currentScope();s.lexical.push(e)}else if(t===ZOe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&QOe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&HR&&delete this.undefinedExports[e],u.flags&jte)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};qv.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};qv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};qv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&jte)return t}};qv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&jte&&!(t.flags&XOe))return t}};var D8=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new k8(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},TN=Ho.prototype;TN.startNode=function(){return new D8(this,this.start,this.startLoc)};TN.startNodeAt=function(e,t){return new D8(this,e,t)};function i4e(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}TN.finishNode=function(e,t){return i4e.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};TN.finishNodeAt=function(e,t,n,r){return i4e.call(this,e,t,n,r)};TN.copyNode=function(e){var t=new D8(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var s4e="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",o4e=s4e+" Extended_Pictographic",a4e=o4e,u4e=a4e+" EBase EComp EMod EPres ExtPict",l4e=u4e,tOt=l4e,nOt={9:s4e,10:o4e,11:a4e,12:u4e,13:l4e,14:tOt},rOt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",iOt={9:"",10:"",11:"",12:"",13:"",14:rOt},yye="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",c4e="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",f4e=c4e+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",d4e=f4e+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",h4e=d4e+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",p4e=h4e+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",sOt=p4e+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",oOt={9:c4e,10:f4e,11:d4e,12:h4e,13:p4e,14:sOt},m4e={};function aOt(e){var t=m4e[e]={binary:Zy(nOt[e]+" "+yye),binaryOfStrings:Zy(iOt[e]),nonBinary:{General_Category:Zy(yye),Script:Zy(oOt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var zz=0,vye=[9,10,11,12,13,14];zz<vye.length;zz+=1){var uOt=vye[zz];aOt(uOt)}var Wt=Ho.prototype,Pm=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=m4e[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Pm.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Pm.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Pm.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Pm.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Pm.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Pm.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Pm.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Pm.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Pm.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Wt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Wt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Wt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Wt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Wt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Wt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Wt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Wt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Wt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Wt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Wt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Wt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Wt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Wt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Wt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Wt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Wt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return g4e(t)?(e.lastIntValue=t,e.advance(),!0):!1};function g4e(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Wt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!g4e(n);)e.advance();return e.pos!==t};Wt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Wt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Wt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Wt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=nv(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=nv(e.lastIntValue);return!0}return!1};Wt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),lOt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function lOt(e){return Tg(e,!0)||e===36||e===95}Wt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),cOt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function cOt(e){return IT(e,!0)||e===36||e===95||e===8204||e===8205}Wt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Wt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Wt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Wt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Wt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Wt.regexp_eatZero=function(e){return e.current()===48&&!N8(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Wt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Wt.regexp_eatControlLetter=function(e){var t=e.current();return y4e(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function y4e(e){return e>=65&&e<=90||e>=97&&e<=122}Wt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&fOt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function fOt(e){return e>=0&&e<=1114111}Wt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Wt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var v4e=0,Cg=1,Kf=2;Wt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(dOt(t))return e.lastIntValue=-1,e.advance(),Cg;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Kf&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return v4e};function dOt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Wt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Cg}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return v4e};Wt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){EN(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Wt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Cg;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Kf;e.raise("Invalid property name")};Wt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";b4e(t=e.current());)e.lastStringValue+=nv(t),e.advance();return e.lastStringValue!==""};function b4e(e){return y4e(e)||e===95}Wt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";hOt(t=e.current());)e.lastStringValue+=nv(t),e.advance();return e.lastStringValue!==""};function hOt(e){return b4e(e)||N8(e)}Wt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Wt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Kf&&e.raise("Negated character class may contain strings"),!0}return!1};Wt.regexp_classContents=function(e){return e.current()===93?Cg:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Cg)};Wt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Wt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||w4e(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Wt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Wt.regexp_classSetExpression=function(e){var t=Cg,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Kf&&(t=Kf);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Kf&&(t=Cg);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Kf&&(t=Kf)}};Wt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Wt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Cg:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Wt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Kf&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Wt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Wt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Kf&&(t=Kf);return t};Wt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Cg:Kf};Wt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&pOt(n)||mOt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function pOt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function mOt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Wt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return gOt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function gOt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Wt.regexp_eatClassControlLetter=function(e){var t=e.current();return N8(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Wt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Wt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;N8(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function N8(e){return e>=48&&e<=57}Wt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;x4e(n=e.current());)e.lastIntValue=16*e.lastIntValue+_4e(n),e.advance();return e.pos!==t};function x4e(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function _4e(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Wt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Wt.regexp_eatOctalDigit=function(e){var t=e.current();return w4e(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function w4e(e){return e>=48&&e<=55}Wt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!x4e(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+_4e(i),e.advance()}return!0};var Hte=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new k8(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Er=Ho.prototype;Er.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Hte(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Er.getToken=function(){return this.next(),new Hte(this)};typeof Symbol<"u"&&(Er[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===te.eof,value:t}}}});Er.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(te.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Er.readToken=function(e){return Tg(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Er.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Er.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=qOe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Er.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Y2(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Er.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&WOe.test(String.fromCharCode(e)))++this.pos;else break e}}};Er.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Er.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(te.ellipsis)):(++this.pos,this.finishToken(te.dot))};Er.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(te.assign,2):this.finishOp(te.slash,1)};Er.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?te.star:te.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=te.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(te.assign,n+1):this.finishOp(r,n)};Er.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(te.assign,3)}return this.finishOp(e===124?te.logicalOR:te.logicalAND,2)}return t===61?this.finishOp(te.assign,2):this.finishOp(e===124?te.bitwiseOR:te.bitwiseAND,1)};Er.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(te.assign,2):this.finishOp(te.bitwiseXOR,1)};Er.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||wd.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(te.incDec,2):t===61?this.finishOp(te.assign,2):this.finishOp(te.plusMin,1)};Er.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(te.assign,n+1):this.finishOp(te.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(te.relational,n))};Er.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(te.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(te.arrow)):this.finishOp(e===61?te.eq:te.prefix,1)};Er.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(te.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(te.assign,3)}return this.finishOp(te.coalesce,2)}}return this.finishOp(te.question,1)};Er.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Tg(t,!0)||t===92))return this.finishToken(te.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+nv(t)+"'")};Er.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(te.parenL);case 41:return++this.pos,this.finishToken(te.parenR);case 59:return++this.pos,this.finishToken(te.semi);case 44:return++this.pos,this.finishToken(te.comma);case 91:return++this.pos,this.finishToken(te.bracketL);case 93:return++this.pos,this.finishToken(te.bracketR);case 123:return++this.pos,this.finishToken(te.braceL);case 125:return++this.pos,this.finishToken(te.braceR);case 58:return++this.pos,this.finishToken(te.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(te.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(te.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+nv(e)+"'")};Er.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Er.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(wd.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Pm(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(te.regexp,{pattern:i,flags:o,value:u})};Er.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function yOt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function E4e(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Er.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=E4e(this.input.slice(t,this.pos)),++this.pos):Tg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(te.num,n)};Er.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=E4e(this.input.slice(t,this.pos));return++this.pos,Tg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(te.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Tg(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=yOt(this.input.slice(t,this.pos),n);return this.finishToken(te.num,s)};Er.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Er.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Y2(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(te.string,t)};var S4e={};Er.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===S4e)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Er.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw S4e;this.raise(e,t)};Er.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===te.template||this.type===te.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(te.dollarBraceL)):(++this.pos,this.finishToken(te.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(te.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Y2(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Er.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(te.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Er.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return nv(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return Y2(t)?"":String.fromCharCode(t)}};Er.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Er.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(IT(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Tg:IT)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=nv(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Er.readWord=function(){var e=this.readWord1(),t=te.name;return this.keywords.test(e)&&(t=Lte[e]),this.finishToken(t,e)};var vOt="8.11.3";Ho.acorn={Parser:Ho,version:vOt,defaultOptions:NG,Position:VR,SourceLocation:k8,getLineInfo:YOe,Node:D8,TokenType:qr,tokTypes:te,keywordTypes:Lte,TokContext:Ud,tokContexts:Es,isIdentifierChar:IT,isIdentifierStart:Tg,Token:Hte,isNewLine:Y2,lineBreak:wd,lineBreakG:V3t,nonASCIIwhitespace:WOe};function bOt(e,t){return Ho.parse(e,t)}const qte={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},xOt={ecmaVersion:11},bye="$",_Ot="d",wOt="d1",EOt="d2",Ia=e=>(t,n)=>n.error(t,e+" not allowed"),SOt=Ia("Aggregate function"),TOt=Ia("Window function"),COt="Invalid argument",Wte="Invalid column reference",AOt=Wte+" (must be input to an aggregate function)",T4e="Invalid function call",IOt="Invalid member expression",kOt="Invalid operator parameter",ROt="Invalid param reference",DOt="Invalid variable reference",NOt="Variable not accessible in operator call",POt="Unsupported variable declaration",OOt="Unsupported destructuring pattern",C4e="Table expressions do not support closures",A4e="Use aq.escape(fn) to use a function as-is (including closures)",$Ot="use table.params({ name: value }) to define dynamic parameters",MOt="use aq.addFunction(name, fn) to add new op functions",LOt=`
Note: ${C4e}. ${A4e}, or ${$Ot}.`,I4e=`
Note: ${C4e}. ${A4e}, or ${MOt}.`,FOt=`The ${IPe} method is not valid in multi-table expressions.`;function BOt(e,t){const n=jOt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,P3t(r)?(zOt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=wOt),e.scope.add(e.tuple2=EOt),e.scope.add(e.$param=bye)):(e.scope.add(e.tuple=_Ot),e.scope.add(e.$param=bye)),Br(r,e,Gte),e.root}function jOt(e){try{const t=e.field?UOt(e):Jr(e)?cm(e):e;return bOt(`expr=(${t})`,xOt).body[0].expression.right}catch{Jn(`Expression parse error: ${e+""}`)}}function UOt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const Gte={FunctionDeclaration:Ia("Function definitions"),ForStatement:Ia("For loops"),ForOfStatement:Ia("For-of loops"),ForInStatement:Ia("For-in loops"),WhileStatement:Ia("While loops"),DoWhileStatement:Ia("Do-while loops"),AwaitExpression:Ia("Await expressions"),ArrowFunctionExpression:Ia("Function definitions"),AssignmentExpression:Ia("Assignments"),FunctionExpression:Ia("Function definitions"),NewExpression:Ia('Use of "new"'),UpdateExpression:Ia("Update expressions"),VariableDeclarator(e,t){MG(e.id,t)},Identifier(e,t,n){D4e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,DOt,LOt)},CallExpression(e,t){const n=k4e(e.callee),r=TPe(n)||CPe(n);if(r){if((t.join||t.aggregate===!1)&&Mee(n)&&SOt(e,t),(t.join||t.window===!1)&&Lee(n)&&TOt(e,t),t.$op=1,t.ast)$G(e,n,t),e.arguments.forEach(i=>Br(i,t,OG));else{const i=t.op(VOt(t,r,n,e.arguments));Object.assign(e,{type:xPe,name:i.id})}return t.$op=0,!1}else SPe(n)?$G(e,n,t):t.error(e,T4e,I4e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Mo(E1,r))return;const{name:s}=r;if(R4e(e)&&Mo(E1,i)&&Rh(qte,i.name)){O4e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return xye(e,o,t,N4e,n);if(s===t.$param)return xye(e,o,t,qOt);t.paramsRef.has(s)?qR(e,t.paramsRef.get(s)):t.columnRef.has(s)?P4e(r,s,t,e):Rh(t.params,s)&&qR(r,s)}};function xye(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Mo(V2,s))a=s.value;else try{Br(s,n,Gte,e),a=n.param(s)}catch{n.error(e,IOt)}return r(e,a,t,n,i),!1}const OG={...Gte,VariableDeclarator:Ia("Variable declaration in operator call"),Identifier(e,t,n){D4e(e,t,n)&&t.error(e,NOt)},CallExpression(e,t){const n=k4e(e.callee);SPe(n)?$G(e,n,t):t.error(e,T4e,I4e)}};function zOt(e,t){e.generator&&Ia("Generator functions")(e,t),e.async&&Ia("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(_A(t,n[0],"tuple1",i(1)),r>1&&_A(t,n[1],"tuple2",i(2)),r>2&&_A(t,n[2],"$param",s)):(_A(t,n[0],"tuple",i(0)),r>1&&_A(t,n[1],"$param",s))),t.root=e.body}function _A(e,t,n,r){Mo(E1,t)?(e.scope.add(t.name),e[n]=t.name):Mo(vPe,t)&&t.properties.forEach(i=>{const s=Mo(E1,i.key)?i.key.name:Mo(V2,i.key)?i.key.value:e.error(i,COt);Mo(E1,i.value)||e.error(i.value,OOt),r(i.value.name,s)})}function VOt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Br(u,e,OG),i.push(e.field(u))):l<a?(Br(u,e,OG),s.push(e.param(u))):e.error(u,kOt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function k4e(e){return Mo(E1,e)?e.name:Mo(yPe,e)?R4e(e)?HOt(e.property.name):e.property.name:null}function R4e(e){return Mo(E1,e.object)&&e.object.name==="Math"}function HOt(e){return e==="max"?"greatest":e==="min"?"least":e}function D4e(e,t,n){const{name:r}=e;if(!(Mo(yPe,n)&&n.property===e)){if(!(Mo(bPe,n)&&n.key===e))if(t.paramsRef.has(r))qR(e,t.paramsRef.get(r));else if(t.columnRef.has(r))P4e(e,r,t,n);else if(Rh(t.params,r))qR(e,r);else if(Rh(qte,r))O4e(e,r);else return!0}}function N4e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,Wte),r.aggronly&&!r.$op&&r.error(e,AOt),APe(e,t,n,o,i)}function P4e(e,t,n,r){const[i,s]=n.columnRef.get(t);N4e(e,i,s,n,r)}function qOt(e,t,n,r){r.params&&!Rh(r.params,t)&&r.error(e,ROt),qR(e,t)}function qR(e,t){e.type=ORt,e.name=t}function O4e(e,t){e.type=DRt,e.name=t,e.raw=qte[t]}function $G(e,t,n){if(t===IPe){const r=n.table;r||n.error(e,FOt),kPe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=hl(s)?r.columnName(s):s;return r.column(o)||n.error(i,Wte),o}):r.columnNames())}else e.callee={type:PRt,name:t}}function MG(e,t){Mo(E1,e)?t.scope.add(e.name):Mo(ARt,e)?e.elements.forEach(n=>MG(n,t)):Mo(vPe,e)?e.properties.forEach(n=>MG(n.value,t)):t.error(e.id,POt)}const WOt={[yN]:1,[xPe]:1};function mc(e,t={}){const n=t.generate||DM,r=t.compiler||Fee,i=YOt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=GOt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Mo(V2,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?N3t(g):f(n(g),i));u.push(y),WOt[g.type]&&y!==g&&Au(y)&&(y.field=g.name)},error(m,g,y=""){const b=m.start-6,x=m.end-6,w=String(d.spec).slice(b,x);Jn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of m8(e))d.value(m+"",g.escape?M3t(d,g,i):BOt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function GOt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function YOt(e){return(e.table?Vz(e.table):e.join?{...Vz(e.join[1]),...Vz(e.join[0])}:{})||{}}function Vz(e){return e&&fs(e.params)?e.params():{}}const $4e="Expr",zd="ExprList",M4e="ExprNumber",bI="ExprObject",KE="JoinKeys",eL="JoinValues",Bf="Options",Yte="OrderKeys",Sy="SelectionList",Zb="TableRef",XE="TableRefList",KOt="Descending",XOt="Query",QOt="Selection",JOt="Verb",ZOt="Window";function P8(e,t){return e&&e.expr?new _ye({...e,...t}):new _ye(t,e)}class _ye{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...fs(this.expr)?{func:!0}:{}}}}function e4t(e){return P8(e,{desc:!0})}function a_(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return P8(e,t?{expr:t,...r}:r)}function t4t(e,t,n){return P8(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function n4t(e){const t=n=>n;return t.toString=()=>e,t}function wye(e,t){return t=t&&fs(t.query)?t.query():t,t&&fs(t.evaluate)?t.evaluate(null,e):e(t)}function L4e(e){return Au(e)&&(Jr(e.all)||Jr(e.matches)||Jr(e.not)||Jr(e.range))}function WR(e){return e&&fs(e.toObject)?e.toObject():fs(e)?{expr:String(e),func:!0}:Jr(e)?e.map(WR):Au(e)?A8(e,t=>WR(t)):e}function Kte(e){return Jr(e)?e.map(Kte):Au(e)?Jr(e.verbs)?Qte.from(e):Jr(e.all)?AT():Jr(e.range)?A3t(...e.range):Jr(e.match)?I3t(RegExp(...e.match)):Jr(e.not)?UOe(e.not.map(WR)):r4t(e):e}function r4t(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=a_(n):e.func===!0&&(t=n=n4t(n)),Au(e.window)){const{frame:r,peers:i}=e.window;t=n=t4t(n,r,i)}e.desc===!0&&(t=e4t(n))}return e===t?A8(e,r=>Kte(r)):t}function i4t(e){return Jr(e)?e.map(s4t):e}function s4t(e){const t=[];return dc(e).forEach(n=>{hl(n)?t.push(n):qa(n)?t.push(a_(n,null)):Au(n)&&n.expr||fs(n)?t.push(n):Jn(`Invalid key value: ${n+""}`)}),t}function o4t(e){return Jr(e)?e.map(a4t):e}function a4t(e,t){return t<2?dc(e):e}function u4t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Au(r)&&!fs(r))for(const i in r)t.push(r[i]);else n=hl(r)?r:qa(r)?a_(n):fs(r)?n:Jn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const l4t={[$4e]:U4e,[zd]:kT,[M4e]:m4t,[bI]:rv,[KE]:g4t,[eL]:y4t,[Yte]:kT,[Sy]:h4t};function c4t(e,t,n){return t===Zb?Eye(e):t===XE?e.map(Eye):F4e(WR(e),t,n)}function F4e(e,t,n){return t===Bf?e&&f4t(e,n):l4t[t](e)}function f4t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?F4e(i,t[r]):i}return n}function d4t(e,t){return mc({expr:e},{...t,ast:!0}).exprs[0]}function Xte(e){return{type:yN,name:e}}function B4e(e){return{type:yN,index:e}}function rv(e,t){if(qa(e))return d4t(e,t);if(e.expr){let n;if(e.field===!0?n=Xte(e.expr):e.func===!0&&(n=rv(e.expr,t)),n)return e.desc&&(n={type:KOt,expr:n}),e.window&&(n={type:ZOt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...rv(e[n],t),as:n}))}function j4e(e){const t=QOt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:kT(e.not)}:e.range?{type:t,operator:"range",arguments:kT(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Jn("Invalid input")}function h4t(e){return dc(e).map(p4t).flat()}function p4t(e){return L4e(e)?j4e(e):hl(e)?B4e(e):qa(e)?Xte(e):Au(e)?Object.keys(e).map(t=>({type:yN,name:t,as:e[t]})):Jn("Invalid input")}function U4e(e){return L4e(e)?j4e(e):hl(e)?B4e(e):qa(e)?Xte(e):Au(e)?rv(e):Jn("Invalid input")}function kT(e){return dc(e).map(U4e).flat()}function m4t(e){return hl(e)?e:rv(e)}function g4t(e){return Jr(e)?e.map(kT):rv(e,{join:!0})}function y4t(e){return Jr(e)?e.map((t,n)=>n<2?kT(t):rv(t,{join:!0})):rv(e,{join:!0})}function Eye(e){return e&&fs(e.toAST)?e.toAST():e}class z4e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===KE?i4t(a):o===eL?o4t(a):o===Yte?u4t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=LG[t.verb],r=(n.schema||[]).map(({name:i})=>Kte(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Zb?wye(n,o):s===XE?o.map(a=>wye(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=WR(this[n])}),t}toAST(){const t={type:JOt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=c4t(this[n],r,i)}),t}}function Pi(e,t){return Object.assign((...n)=>new z4e(e,t,n),{schema:t})}const LG={count:Pi("count",[{name:"options",type:Bf}]),derive:Pi("derive",[{name:"values",type:bI},{name:"options",type:Bf,props:{before:Sy,after:Sy}}]),filter:Pi("filter",[{name:"criteria",type:bI}]),groupby:Pi("groupby",[{name:"keys",type:zd}]),orderby:Pi("orderby",[{name:"keys",type:Yte}]),relocate:Pi("relocate",[{name:"columns",type:Sy},{name:"options",type:Bf,props:{before:Sy,after:Sy}}]),rename:Pi("rename",[{name:"columns",type:Sy}]),rollup:Pi("rollup",[{name:"values",type:bI}]),sample:Pi("sample",[{name:"size",type:M4e},{name:"options",type:Bf,props:{weight:$4e}}]),select:Pi("select",[{name:"columns",type:Sy}]),ungroup:Pi("ungroup"),unorder:Pi("unorder"),reify:Pi("reify"),dedupe:Pi("dedupe",[{name:"keys",type:zd,default:[]}]),impute:Pi("impute",[{name:"values",type:bI},{name:"options",type:Bf,props:{expand:zd}}]),fold:Pi("fold",[{name:"values",type:zd},{name:"options",type:Bf}]),pivot:Pi("pivot",[{name:"keys",type:zd},{name:"values",type:zd},{name:"options",type:Bf}]),spread:Pi("spread",[{name:"values",type:zd},{name:"options",type:Bf}]),unroll:Pi("unroll",[{name:"values",type:zd},{name:"options",type:Bf,props:{drop:zd}}]),lookup:Pi("lookup",[{name:"table",type:Zb},{name:"on",type:KE},{name:"values",type:zd}]),join:Pi("join",[{name:"table",type:Zb},{name:"on",type:KE},{name:"values",type:eL},{name:"options",type:Bf}]),cross:Pi("cross",[{name:"table",type:Zb},{name:"values",type:eL},{name:"options",type:Bf}]),semijoin:Pi("semijoin",[{name:"table",type:Zb},{name:"on",type:KE}]),antijoin:Pi("antijoin",[{name:"table",type:Zb},{name:"on",type:KE}]),concat:Pi("concat",[{name:"tables",type:XE}]),union:Pi("union",[{name:"tables",type:XE}]),intersect:Pi("intersect",[{name:"tables",type:XE}]),except:Pi("except",[{name:"tables",type:XE}])};let Qte=class V4e extends iPe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new V4e(t.map(z4e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Sye(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Sye(this,"toAST",{type:XOt})}};function Sye(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function v4t(e,t){return new Qte(e._verbs.concat(t),e._params,e._table)}for(const e in LG){const t=LG[e];Qte.prototype["__"+e]=function(n,...r){return v4t(n,t(...r))}}function Q2(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function b4t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function Jte(e,t){const n=wf();return t.forEach((r,i)=>{const s=qa(r)?r:i;if(s){const o=e.column(i)||Jn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function H4e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Jn("relocate requires a before or after option."),i&&s&&Jn("relocate accepts only one of the before or after options."),t=Sg(e,t);const o=[...Sg(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),Jte(e,u)}function CN(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function Zte(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function x4t(e,t=0,n=e.length){let r=n?e[t++]:Wr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function _4t(e,t=0,n=e.length){let r=n?e[t++]:Wr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function xO(e){return MR(e)?e:+e}function w4t(e,t){const n=e.length;if(!n)return Wr;if((t=+t)<=0||n<2)return xO(e[0]);if(t>=1)return xO(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=xO(e[i]);return MR(s)?s:s+(xO(e[i+1])-s)*(r-i)}class E4t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:x4t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:_4t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(Zte)),w4t(this._sorted,t)}}const tL=(e,t,n)=>Q2(t,"{"+CN(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function S4t(e,t){const{ops:n,output:r}=T4t(e,t),i=e[0].fields,s=i.length,o=s===0?ene:s===1?C4t:s===2?A4t:Jn("Unsupported field count: "+s);return new o(i,n,r,t)}function T4t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=TPe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class ene extends R3t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new E4t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class C4t extends ene{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=tL(n,s,"add"),this._rem=tL(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,hh(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,hh(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class A4t extends ene{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=tL(n,s,"add"),this._rem=tL(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,hh(i)&&hh(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,hh(i)&&hh(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function tw(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=J2(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function J2(e,t,n){if(!t.length)return n;const r=q4e(t),i=e.groups(),s=i?i.size:1;return n=n||h8(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=G4e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=W4e(e,o);o.write(a,n,0)}),n}function q4e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(S4t(r[i],t));return n}function W4e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function G4e(e,t,n){const{keys:r,size:i}=n,s=h8(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function Y4e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function K4e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Tye=K4e(Zte);function I4t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?Q2(["w","r","k"],"{"+CN(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,b){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=b,a=i.map(x=>x.init());for(let x=0;x<f;++x)r[x].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,b=p.size,x=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(b,m+Math.abs(y)+1):b,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Tye.left(o,o[p.i0])),p.i1<b&&c(p.i1)&&(p.i1=Tye.right(o,o[p.i1-1])));for(let S=0;S<d;++S){const T=i[S],C=a[S];for(let I=x;I<p.i0;++I)T.rem(C,s[I],e);for(let I=w;I<p.i1;++I)T.add(C,s[I],e);T.write(C,u,l)}return h(p,u,l),u}};return p}const k4t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),R4t=e=>!!e.peers;function D4t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=CPe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function N4t(e,t,n,r={},i){const s=e.data(),o=P4t(i,s),a=o.length,u=Q2(["r","d","op"],"{"+CN(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=O4t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function P4t(e,t){const n={};return e.forEach(r=>{const i=k4t(r),s=R4t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});Mee(r.name)?a.push(r):u.push(D4t(r))}),Object.values(n).map(r=>I4t(t,r.frame,r.peers,r.winOps,q4e(r.aggOps,r.frame[0]!=null?-1:1)))}function O4t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function $4t(e){return Lee(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function tne(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=wf(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=M4t(r),c=e.isGrouped()?e.groups().size:1,f=J2(e,u,h8(r.length,()=>Array(c)));return l.length?N4t(e,a,n,f,l):L4t(e,a,n,f),e.create(o)}function M4t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,($4t(s)?n:t).push(s)}return[t,n]}function L4t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function F4t(e,t,n={}){const r=tne(e,mc(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:H4e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function B4t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const _O=2147483648,j4t=4294967295;class X4e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&_O>>>t}set(t){this._bits[t>>5]|=_O>>>t}clear(t){this._bits[t>>5]&=~(_O>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&j4t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=_O>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function U4t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new X4e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function z4t(e,t){const n=mc({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=tne(e,n,{drop:!0}).column("p");r=s=>i[s]}return U4t(e,r)}function Q4e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=tw(e,r,n),l=wf(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const S=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(S))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,b=(w,S)=>{for(let T=0;T<g;++T)d[T].length=m+S,d[T].fill(f[T].get(w),m,m+S)},x=p?(w,S)=>{for(let T=0;T<S;++T)p[w+T]=T}:()=>{};if(y===1){const w=u[0],S=h[0];e.scan((T,C)=>{const I=dc(w(T,C)),D=Math.min(I.length,s);b(T,D);for(let k=0;k<D;++k)S[m+k]=I[k];x(m,D),m+=D})}else e.scan((w,S)=>{let T=0;const C=u.map(I=>{const D=dc(I(w,S));return T=Math.min(Math.max(T,D.length),s),D});b(w,T);for(let I=0;I<y;++I){const D=h[I],k=C[I];for(let P=0;P<T;++P)D[m+P]=k[P]}x(m,T),m+=T});return e.create(l.new())}function V4t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=tw(e,r,n);return Q4e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Nh(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=hl(o)?t.columnName(o):o,qa(o)?i.set(o,a_(o)):fs(o)?Sg(t,o).forEach(s):Au(o)?BOe(i,o):Jn(`Invalid ${e} value: ${o+""}`)};return dc(n).forEach(s),r.preparse&&r.preparse(i),mc(i,{table:t,...r})}function H4t(e,t,n){return V4t(e,Nh("fold",e,t),n)}function Cye(e,t,n,r){const i=n&&n.length;return q4t(i?W4t(e,n,r):e,t,i)}function q4t(e,{names:t,exprs:n,ops:r},i){const s=tw(e,r,n),o=i?null:wf(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=hh(p)?p:d(h)})}),i?e:e.create(o)}function W4t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=NM(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=wf(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(b=>y.push(g.get(b)))});const d=NM(o.map((p,m)=>g=>g[m])),h=Q2("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,b)=>y*b.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Aye(r,n,(y,b)=>{a.has(d(y))||(h(y),g[p++]=b[0])}),c.groupby({...r,keys:g})}else Aye(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Aye(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function nne(e,{names:t,exprs:n,ops:r}){const i=wf(),s=e.groups();return s&&Y4e(i,s),G4t(t,n,s,J2(e,r),i),e.create(i.new())}function G4t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function Y4t(e,t,n={}){if(t=mc(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Jn(`Invalid impute column ${cm(r)}`)),n.expand){const r={preparse:K4t,aggronly:!0},i=Nh("impute",e,n.expand,r),s=nne(e.ungroup(),i);return Cye(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Cye(e,t)}function K4t(e){e.forEach((t,n)=>t.field?e.set(n,hPe(t+"")):0)}function X4t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function J4e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function Q4t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function J4t(e,t){const n=["i","a","j","b"];return Q2(n,"{"+CN(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function Z4t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=wf(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const b=J4t(g,y);if((Jr(n)?t6t:e6t)(b,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||b(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||b(-1,o,f[w],c);return e.create(m.new())}function e6t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function t6t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,b,x=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,b=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,b=s,x=(T,C,I,D)=>e(I,D,T,C));const w=Q4t(b,m,g),S=p.length;for(let T=0;T<S;++T){const C=p[T],I=w.get(d(C,f));if(I){const D=I.length;for(let k=0;k<D;++k){const P=I[k];x(C,f,b[P],m),y[P]=1}h[T]=1}}}function nL(e,t,n){const r=new Map;dc(n).forEach((s,o)=>{s=hl(s)?t.columnName(s):s,qa(s)?r.set(o,a_(s)):fs(s)||Au(s)&&s.expr?r.set(o,s):Jn(`Invalid ${e} key value: ${s+""}`)});const i=mc(r,{table:t,aggregate:!1,window:!1});return NM(i.exprs,!0)}function n6t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function rne(e,t,n){if(n)qa(n)?n=[n,n]:Jr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=n6t(e.columnNames(),t.columnNames());r.length||Jn("Natural join requires shared column names."),n=[r,r]}return n}function Z4e(e,t,n,r){return n.length!==r.length&&Jn("Mismatched number of join keys"),[nL("join",e,n),nL("join",t,r)]}const r6t={aggregate:!1,window:!1},i6t={...r6t,index:1};function Iye(e,t,n,r,i={}){n=rne(e,t,n);const s={join:[e,t]};let o;if(Jr(n)){const[a,u]=n.map(dc);o=Z4e(e,t,a,u),r||(r=s6t(e,a,u,i))}else o=mc({on:n},s).exprs[0],r||(r=[AT(),AT()]);return Z4t(e,t,o,o6t(e,t,r,s,i&&i.suffix),i)}function s6t(e,t,n,r){const i=[];t.forEach((o,a)=>qa(o)&&o===n[a]?i.push(o):0);const s=UOe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${cm(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,AT()]:[AT(),s]}function o6t(e,t,n,r,i=[]){if(Jr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Nh("join",e,n[0],r)),u--&&(o=Nh("join",t,n[1],i6t)),u--&&(a=mc(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&kye(s.names,l,i[0]||"_1"),i[1]!==""&&kye(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return mc(n,r)}function kye(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function a6t(e,t,n,r={}){const i=new X4e(e.totalRows());return(Jr(n)?u6t:l6t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function u6t(e,t,n,[r,i]){const s=J4e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function l6t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Rye(e,t,n,r){n=rne(e,t,n);const i=Jr(n)?Z4e(e,t,...n.map(dc)):mc({on:n},{join:[e,t]}).exprs[0];return a6t(e,t,i,r)}function c6t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=wf(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(Wr)));const l=J4e(t,r),c=Q2(["lr","rr","data"],"{"+CN(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),tw(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function f6t(e,t,n,r){return n=rne(e,t,n),c6t(e,t,[nL("lookup",e,n[0]),nL("lookup",t,n[1])],Nh("lookup",t,r))}const FG=(e,t)=>e??t;function d6t(e,t,n,r={}){const{keys:i,keyColumn:s}=h6t(e,t,r),o=FG(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>J2(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(p6t(n,a,e.groups(),u))}function h6t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=FG(n.sort,!0),s=FG(n.keySeparator,"_"),o=tw(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=J2(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function p6t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=wf(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&Y4e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function m6t(e,t,n,r){return d6t(e,Nh("fold",e,t),Nh("fold",e,n,{preparse:g6t,aggronly:!0}),r)}function g6t(e){e.forEach((t,n)=>t.field?e.set(n,cPe(t+"")):0)}function y6t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),Jte(e,Sg(e,t,n))}function Dye(e,t){return nne(e,mc(t,{table:e,aggronly:!0,window:!1}))}function v6t(e,t,n,r){return(t?r?x6t:b6t:r?w6t:_6t)(e.length,e,n,r)}function b6t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*z2()|0];return t}function x6t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=K4e(Zte).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*z2())];return t}function _6t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*z2();s<e&&(t[s|0]=n[i])}return t}function w6t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(z2())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function E6t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=z2()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function S6t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):v6t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&E6t(u),e.reify(u)}function T6t(e,t,n={}){return S6t(e,C6t(e,t),A6t(e,n.weight),n)}const e6e=e=>t=>e.get(t)||0;function C6t(e,t){return hl(t)?()=>t:e6e(nne(e,mc({size:t},{table:e,window:!1})).column("size"))}function A6t(e,t){return t==null?null:(t=hl(t)?e.columnName(t):t,e6e(qa(t)?e.column(t):tne(e,mc({w:t},{table:e}),{drop:!0}).column("w")))}function I6t(e,t){return Jte(e,Sg(e,t))}function k6t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=tw(e,r,n),l=wf(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=R6t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function R6t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=dc(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(Wr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function D6t(e,t,n){return k6t(e,Nh("spread",e,t),n)}function N6t(e,t){return e.concat(t).dedupe()}function P6t(e,t,n){return Q4e(e,Nh("unroll",e,t),n&&n.drop?{...n,drop:Nh("unroll",e,n.drop).names}:n)}function O6t(e,t){return e.create({groups:$6t(e,t)})}function $6t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=tw(e,r,n);const o=NM(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function M6t(e,t){return O6t(e,Nh("groupby",e,t))}function L6t(e,t){return e.create({order:t})}const F6t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function B6t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=mc(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([DM(p,{index:"a",op:o}),DM(p,{index:"b",op:a})])},window:!1}),l=J2(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=F6t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function j6t(e,t){return L6t(e,U6t(e,t))}function U6t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Au(o)&&!fs(o))for(const a in o)i(o[a]);else i(hl(o)?a_(s,e.columnName(o)):qa(o)?a_(s):fs(o)?s:Jn(`Invalid orderby field: ${s+""}`))}),B6t(e,r)}function z6t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=wf();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>Wr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function V6t(e,t){const n=wf(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?G4e(e,t,r):[W4e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,b=0;y<a;++y)m.fill(g(o[y],d),b,b+=u[y+1])})}return e.create(n.new())}function H6t(e){return e.isGrouped()?e.create({groups:null}):e}function q6t(e){return e.isOrdered()?e.create({order:null}):e}const W6t={__antijoin:(e,t,n)=>Rye(e,t,n,{anti:!0}),__count:(e,t={})=>Dye(e,{[t.as||"count"]:fPe()}),__cross:(e,t,n,r)=>Iye(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:z6t,__dedupe:b4t,__derive:F4t,__except:B4t,__filter:z4t,__fold:H4t,__impute:Y4t,__intersect:X4t,__join:Iye,__lookup:f6t,__pivot:m6t,__relocate:H4e,__rename:y6t,__rollup:Dye,__sample:T6t,__select:I6t,__semijoin:Rye,__spread:D6t,__union:N6t,__unroll:P6t,__groupby:M6t,__orderby:j6t,__ungroup:H6t,__unorder:q6t,__reduce:V6t};Object.assign(I0.prototype,W6t);function t6e(e,t){return I0.from(e,t)}function IS(e){return P8(e,{escape:!0,toString(){Jn("Escaped values can not be serialized.")}})}I0.prototype;var G6t="Expected a function",Nye=NaN,Y6t="[object Symbol]",K6t=/^\s+|\s+$/g,X6t=/^[-+]0x[0-9a-f]+$/i,Q6t=/^0b[01]+$/i,J6t=/^0o[0-7]+$/i,Z6t=parseInt,e$t=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,t$t=typeof self=="object"&&self&&self.Object===Object&&self,n$t=e$t||t$t||Function("return this")(),r$t=Object.prototype,i$t=r$t.toString,s$t=Math.max,o$t=Math.min,Hz=function(){return n$t.Date.now()};function a$t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(G6t);t=Pye(t)||0,BG(n)&&(c=!!n.leading,f="maxWait"in n,s=f?s$t(Pye(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(T){var C=r,I=i;return r=i=void 0,l=T,o=e.apply(I,C),o}function p(T){return l=T,a=setTimeout(y,t),c?h(T):o}function m(T){var C=T-u,I=T-l,D=t-C;return f?o$t(D,s-I):D}function g(T){var C=T-u,I=T-l;return u===void 0||C>=t||C<0||f&&I>=s}function y(){var T=Hz();if(g(T))return b(T);a=setTimeout(y,m(T))}function b(T){return a=void 0,d&&r?h(T):(r=i=void 0,o)}function x(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:b(Hz())}function S(){var T=Hz(),C=g(T);if(r=arguments,i=this,u=T,C){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return S.cancel=x,S.flush=w,S}function BG(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function u$t(e){return!!e&&typeof e=="object"}function l$t(e){return typeof e=="symbol"||u$t(e)&&i$t.call(e)==Y6t}function Pye(e){if(typeof e=="number")return e;if(l$t(e))return Nye;if(BG(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=BG(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(K6t,"");var n=Q6t.test(e);return n||J6t.test(e)?Z6t(e.slice(2),n?2:8):X6t.test(e)?Nye:+e}var c$t=a$t;const Wd=Cm(c$t);function n6e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>Fv(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Ua,{children:_.jsx(bi,{gap:3,children:_.jsx(nt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const f$t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:n6e},Symbol.toStringTag,{value:"Module"})),qz=15;function r6e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=Qr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<qz&&Math.abs(t(g[r.y])-p[1])<qz);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(b=>{g.has(b[r.ids])&&g.delete(b[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:qz,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const d$t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:r6e},Symbol.toStringTag,{value:"Module"})),ps={top:15,left:100,right:15,bottom:70};function jG({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Jc(),[c]=Jc(),[f]=Jc(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-ps.left-ps.right,[l]),m=N.useMemo(()=>u-ps.top-ps.bottom,[u]),g=N.useMemo(()=>{const k=Array.from(new Set(s.map(P=>P[i.category])));return jv(i8).domain(k)},[s,i.category]),{xMin:y,yMin:b,xMax:x,yMax:w}=N.useMemo(()=>{const k=s.map(H=>+H[i.x]).filter(H=>H!==null),[P,M]=bR(k),$=s.map(H=>+H[i.y]).filter(H=>H!==null),[B,q]=bR($);return{xMin:P,xMax:M,yMin:B,yMax:q}},[s,i.x,i.y]),S=N.useMemo(()=>{const k=x-y;return p<=0?null:i.dataType==="date"?uee([ps.left,p+ps.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):fc([ps.left,p+ps.left]).domain([y-k/10,x+k/10]).nice()},[i.dataType,p,x,y]),T=N.useMemo(()=>{const k=w-b;return m<=0?null:fc([m+ps.top,ps.top]).domain([b-k/10,w+k/10]).nice()},[m,w,b]),C=N.useMemo(()=>{if(!S||!T)return()=>null;if(r==="Axis Selection"){const k=FRe().extent([[ps.left,ps.top+m-5],[ps.left+p,ps.top+m+5]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[M.selection[0],null],[M.selection[1],null]],S,T,M.mode)}),P=BRe().extent([[ps.left-5,ps.top],[ps.left+5,ps.top+m]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[null,M.selection[0]],[null,M.selection[1]]],S,T,M.mode)});return c.current&&f.current&&(Qr(f.current).call(P),Qr(c.current).call(k),t.hasBrush||(Qr(f.current).call(P.move,[T(w),T(b)]),Qr(c.current).call(k.move,[S(new Date("2015-01-02")),S(new Date("2015-12-31"))]),n([[S(new Date("2015-01-02")),T(w)],[S(new Date("2015-12-31")),T(b)]],S,T,"drag"))),()=>{Qr(f.current).call(P.move,[T(w),T(b)]),Qr(c.current).call(k.move,[S(new Date("2015-01-02")),S(new Date("2015-12-31"))]),n([[S(new Date("2015-01-02")),T(w)],[S(new Date("2015-12-31")),T(b)]],S,T,"clear")}}if(r==="Rectangular Selection"){const k=jRe().extent([[ps.left,ps.top],[ps.left+p,ps.top+m]]).on("brush",P=>{P.sourceEvent!==void 0&&n([[P.selection[0][0],P.selection[0][1]],[P.selection[1][0],P.selection[1][1]]],S,T,P.mode)}).on("end",P=>{P.selection===null&&P.sourceEvent!==void 0&&(Qr(a.current).call(k.move,null),e(null))});return Qr(a.current).call(k),()=>{Qr(a.current).call(k.move,null),n([[null,null],[null,null]],S,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[S(y),T(w)],[S(x),T(b)]],S,T,null),()=>n([[S(y),T(w)],[S(x),T(b)]],S,T,"clear")):r==="Paintbrush Selection"?()=>n([[S(y),T(w)],[S(x),T(b)]],S,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,x,y,S,w,b,T]),I=N.useMemo(()=>o.length===0?null:new Set(o),[o]),D=N.useMemo(()=>!S||!T?null:s.map((k,P)=>{if(k[i.x]===null||k[i.y]===null)return null;const M=i.dataType==="date"?S(new Date(k[i.x])):S(k[i.x]);return _.jsx("circle",{opacity:I&&!I.has(k[i.ids])?.3:1,r:3,fill:I&&!I.has(k[i.ids])?"lightgray":g(k[i.category]),cx:M,cy:T(k[i.y])},P)}),[I,g,s,i.category,i.dataType,i.ids,i.x,i.y,S,T]);return N.useEffect(()=>{r==="Axis Selection"&&iRe(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(aa,{children:[_.jsxs(bi,{children:[_.jsx(gn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),C==null||C()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(m5,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(bi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[S&&T?_.jsxs("g",{children:[_.jsx(n6e,{yScale:T,label:i.y,horizontalPosition:ps.left,xRange:S.range()}),_.jsx(Pee,{xScale:S,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+ps.top,label:i.x,ticks:S.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:S(k)}))})]}):null,D,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),S&&T&&r==="Paintbrush Selection"?_.jsx(r6e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:S,yScale:T}):null]}),r==="Slider Selection"&&S&&T?_.jsxs(aa,{style:{flexGrow:1},gap:50,children:[_.jsxs(aa,{gap:0,children:[_.jsx(nt,{children:i.x}),_.jsx(tT,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[S(k[0]),t.y1],[S(k[1]),t.y2]],S,T,"drag")},style:{width:"300px"},marks:S.ticks(5).map(k=>({value:k,label:k})),value:[S.invert(t.x1),S.invert(t.x2)]})]}),_.jsxs(aa,{gap:0,children:[_.jsx(nt,{children:i.y}),_.jsx(tT,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:k=>{n([[t.x1,T(k[1])],[t.x2,T(k[0])]],S,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(k=>({value:k,label:k})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const h$t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:jG,default:jG},Symbol.toStringTag,{value:"Module"}));function Oye({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=N.useState(null),[s,o]=N.useState(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]});N.useEffect(()=>{o(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]})},[n]);const[a,u]=N.useState(null);N.useEffect(()=>{HRe(`./data/${e.dataset}.csv`).then(y=>{u(y)})},[e]);const l=N.useMemo(()=>a?t6e(a):null,[a]),{actions:c,trrack:f}=N.useMemo(()=>{const y=ew.create(),b=y.register("brush",(C,I)=>(C.all={brush:I},C)),x=y.register("brushMove",(C,I)=>(C.all={brush:I},C)),w=y.register("brushResize",(C,I)=>(C.all={brush:I},C)),S=y.register("brushClear",(C,I)=>(C.all={brush:I},C)),T=mN({registry:y,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:b,brushMove:x,brushResize:w,clearBrush:S},trrack:T}},[]),d=N.useCallback((y,b)=>{y==="drag"?f.apply("Move Brush",c.brushMove(b)):y==="handle"&&f.apply("Brush",c.brush(b))},[c,f]),h=N.useMemo(()=>Wd(d,100,{maxWait:100}),[d]),p=N.useCallback((y,b,x,w,S)=>{if(!b||!x)return;const T=b.invert(y[0][0]||s.x1),C=b.invert(y[1][0]||s.x2),I=x.invert(y[1][1]||s.y2),D=x.invert(y[0][1]||s.y1);let k=null;if(w==="clear")k=l;else if(S){const M=new Set(S);k=l.filter(IS($=>M.has($[e.ids])))}else e.brushType==="Axis Selection"?k=l.filter(IS(M=>new Date(M[e.x])>=new Date(T)&&new Date(M[e.x])<=new Date(C)&&M[e.y]>=I&&M[e.y]<=D)):k=l.filter(IS(M=>M[e.x]>=T&&M[e.x]<=C&&M[e.y]>=I&&M[e.y]<=D));const P={x1:y[0][0]||(s==null?void 0:s.x1)||0,x2:y[1][0]||(s==null?void 0:s.x2)||0,y1:y[0][1]||(s==null?void 0:s.y1)||0,y2:y[1][1]||(s==null?void 0:s.y2)||0,hasBrush:w!=="clear",ids:w!=="clear"?k==null?void 0:k.array("id"):[]};o(P),w==="drag"||w==="handle"?h(w,P):w==="clear"&&f.apply("Clear Brush",c.clearBrush(P)),i(k),t({status:!0,provenanceGraph:f.graph.backend,answers:{}})},[s,l,e,f,t,h,c]),m=N.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():l?l==null?void 0:l.groupby(e.category).count():null,[r,l,e.category]),g=N.useCallback(y=>{i(y)},[]);return a?_.jsxs(aa,{gap:"xs",children:[_.jsx(jG,{brushedPoints:s==null?void 0:s.ids,data:a,params:e,brushType:e.brushType,setBrushedSpace:p,brushState:s,setFilteredTable:g}),_.jsx(mG,{data:a,parameters:e,barsTable:m})]}):_.jsx(_c,{})}const p$t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Oye,default:Oye},Symbol.toStringTag,{value:"Module"})),m$t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function i6e({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const g$t=Object.freeze(Object.defineProperty({__proto__:null,Bars:i6e},Symbol.toStringTag,{value:"Module"}));function ine({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=fc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const y$t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:ine},Symbol.toStringTag,{value:"Module"}));function s6e({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=L2().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const v$t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:s6e},Symbol.toStringTag,{value:"Module"})),b$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function x$t({parameters:e}){const[n,r]=U2(b$t),i=L2().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=fc().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(s6e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(ine,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(i6e,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const _$t=Object.freeze(Object.defineProperty({__proto__:null,default:x$t},Symbol.toStringTag,{value:"Module"}));function o6e({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const w$t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:o6e},Symbol.toStringTag,{value:"Module"}));function sne({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const E$t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:sne},Symbol.toStringTag,{value:"Module"})),S$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},T$t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=zDe().size([t-10,n-10]).padding(1.5),o=K5(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},C$t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function A$t({parameters:e}){const[t,n]=U2(S$t),r=T$t(e,n.width,n.height),i=C$t(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(o6e,{data:r}),_.jsx(sne,{positions:i})]})})})}const I$t=Object.freeze(Object.defineProperty({__proto__:null,default:A$t},Symbol.toStringTag,{value:"Module"}));function a6e({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const k$t=Object.freeze(Object.defineProperty({__proto__:null,Slices:a6e},Symbol.toStringTag,{value:"Module"}));function u6e({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const R$t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:u6e},Symbol.toStringTag,{value:"Module"})),D$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},N$t=CAt().value(e=>e.value),wA=150;function P$t({parameters:e}){const[t,n]=U2(D$t),r=N$t(e.data),i=r.map(o=>XW().innerRadius(0).outerRadius(wA).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>XW().outerRadius(wA+10).innerRadius(wA+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+wA,n.marginTop+wA].join(",")})`,children:[_.jsx(a6e,{arcs:i}),_.jsx(u6e,{positions:s})]})})})}const O$t=Object.freeze(Object.defineProperty({__proto__:null,default:P$t},Symbol.toStringTag,{value:"Module"}));function l6e({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=N.useMemo(()=>{const o=fc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const $$t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:l6e},Symbol.toStringTag,{value:"Module"}));function c6e({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const M$t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:c6e},Symbol.toStringTag,{value:"Module"})),L$t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function F$t({parameters:e}){const[n,r]=U2(L$t),i=L2().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=fc().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(x=>+x.value),g=p.reduce((x,w)=>Number(x)+Number(w))/100,y={};p.forEach((x,w)=>{y[String.fromCharCode(w+65)]=x/g});const b=[y];return YAt().keys(e.data.map(x=>x.name))(b)},l=(h,p,m)=>h.filter((y,b)=>p.includes(b)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(l6e,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(ine,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(c6e,{data:c,barWidth:f,yScale:s}),_.jsx(sne,{positions:d})]})]})})})}const B$t=Object.freeze(Object.defineProperty({__proto__:null,default:F$t},Symbol.toStringTag,{value:"Module"}));function $ye({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function j$t({parameters:e,setAnswer:t}){const n=_d(),[r,i]=N.useState(""),{goToNextStep:s,isNextDisabled:o}=kke(),a=N.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=N.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=N.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=N.useCallback(()=>{o||s()},[o,s]);N.useEffect(()=>{const h=zZe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(qc,{children:[_.jsxs(qc.Col,{span:2,children:[_.jsx($ye,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(gn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(lhe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(qc.Col,{span:2,children:[_.jsx($ye,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(gn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(lhe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const U$t=Object.freeze(Object.defineProperty({__proto__:null,default:j$t},Symbol.toStringTag,{value:"Module"}));function z$t(){return _.jsx("div",{children:"test react file"})}const V$t=Object.freeze(Object.defineProperty({__proto__:null,default:z$t},Symbol.toStringTag,{value:"Module"}));function H$t({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=N.useRef(null),o=10,a=N.useCallback(u=>{const l=Qr("#Circle"),c=Qr("#click_svg"),f=O$(u,c.node()),d=[+l.attr("cx"),+l.attr("cy")],h=`${Math.round(Math.sqrt((f[0]-d[0])**2+(f[1]-d[1])**2))}px`;t({status:!0,answers:{[n]:h}})},[t,n]);return _.jsx("div",{className:"Chart__wrapper",ref:s,onClick:a,style:{height:"650px"},children:_.jsx("svg",{id:"click_svg",width:400,height:400,children:_.jsx("circle",{id:"Circle",cx:r,cy:i,r:o,stroke:"black",strokeWidth:"2",fill:"white"})})})}const q$t=Object.freeze(Object.defineProperty({__proto__:null,default:H$t},Symbol.toStringTag,{value:"Module"}));function one({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=N.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=N.useCallback(c=>(s?fN("%B"):Fv(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(Ua,{children:_.jsx(bi,{gap:3,children:_.jsx(nt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(Ua,{children:_.jsx(ss,{withinPortal:!0,label:c,children:_.jsx(nt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const W$t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:one},Symbol.toStringTag,{value:"Module"}));function f6e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=N.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Ua,{children:_.jsx(bi,{gap:3,children:_.jsx(nt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(bi,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(nt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const G$t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:f6e},Symbol.toStringTag,{value:"Module"})),$f={top:15,left:100,right:50,bottom:50};function UG({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=Jc(),o=N.useMemo(()=>s-$f.left-$f.right,[s]),a=N.useMemo(()=>i-$f.top-$f.bottom,[i]),u=N.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return jv(i8).domain(d)},[n,t.category]),l=N.useMemo(()=>e?fc([$f.left,o+$f.left]).domain([0,K0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=N.useMemo(()=>e?L2([$f.top,a+$f.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=N.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:$f.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-$f.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(one,{xScale:l,yRange:c.range(),vertPosition:a+$f.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(f6e,{yScale:c,horizontalPosition:$f.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(_c,{})}const Y$t=Object.freeze(Object.defineProperty({__proto__:null,Bar:UG,default:UG},Symbol.toStringTag,{value:"Module"}));function d6e({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=N.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=N.useMemo(()=>Fv(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Ua,{children:_.jsx(bi,{gap:3,children:_.jsx(nt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const K$t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:d6e},Symbol.toStringTag,{value:"Module"})),Wz=15;function h6e({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=N.useState([0,0]),[l,c]=N.useState(!1);return N.useEffect(()=>{const f=Qr("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<Wz&&Math.abs(t(g[r.y])-p[1])<Wz);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(b=>{g.has(b[r.ids])&&g.delete(b[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:Wz,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const X$t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:h6e},Symbol.toStringTag,{value:"Module"})),ms={top:15,left:100,right:15,bottom:70};function zG({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=Jc(),[c]=Jc(),[f]=Jc(),[d,h]=N.useState(!0),p=N.useMemo(()=>l-ms.left-ms.right,[l]),m=N.useMemo(()=>u-ms.top-ms.bottom,[u]),g=N.useMemo(()=>{const k=Array.from(new Set(s.map(P=>P[i.category])));return jv(i8).domain(k)},[s,i.category]),{xMin:y,yMin:b,xMax:x,yMax:w}=N.useMemo(()=>{const k=s.map(H=>+H[i.x]).filter(H=>H!==null),[P,M]=bR(k),$=s.map(H=>+H[i.y]).filter(H=>H!==null),[B,q]=bR($);return{xMin:P,xMax:M,yMin:B,yMax:q}},[s,i.x,i.y]),S=N.useMemo(()=>{const k=x-y;return p<=0?null:i.dataType==="date"?uee([ms.left,p+ms.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):fc([ms.left,p+ms.left]).domain([y-k/10,x+k/10]).nice()},[i.dataType,p,x,y]),T=N.useMemo(()=>{const k=w-b;return m<=0?null:fc([m+ms.top,ms.top]).domain([b-k/10,w+k/10]).nice()},[m,w,b]),C=N.useMemo(()=>{if(!S||!T)return()=>null;if(r==="Axis Selection"){const k=FRe().extent([[ms.left,ms.top+m-5],[ms.left+p,ms.top+m+5]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[M.selection[0],null],[M.selection[1],null]],S,T,M.mode)}),P=BRe().extent([[ms.left-5,ms.top],[ms.left+5,ms.top+m]]).on("brush end",M=>{M.sourceEvent!==void 0&&n([[null,M.selection[0]],[null,M.selection[1]]],S,T,M.mode)});return c.current&&f.current&&(Qr(f.current).call(P),Qr(c.current).call(k),t.hasBrush||(Qr(f.current).call(P.move,[T(w),T(b)]),Qr(c.current).call(k.move,[S(new Date("2015-01-02")),S(new Date("2015-12-31"))]),n([[S(new Date("2015-01-02")),T(w)],[S(new Date("2015-12-31")),T(b)]],S,T,"drag"))),()=>{Qr(f.current).call(P.move,[T(w),T(b)]),Qr(c.current).call(k.move,[S(new Date("2015-01-02")),S(new Date("2015-12-31"))]),n([[S(new Date("2015-01-02")),T(w)],[S(new Date("2015-12-31")),T(b)]],S,T,"clear")}}if(r==="Rectangular Selection"){const k=jRe().extent([[ms.left,ms.top],[ms.left+p,ms.top+m]]).on("brush",P=>{P.sourceEvent!==void 0&&n([[P.selection[0][0],P.selection[0][1]],[P.selection[1][0],P.selection[1][1]]],S,T,P.mode)}).on("end",P=>{P.selection===null&&P.sourceEvent!==void 0&&(Qr(a.current).call(k.move,null),e(null))});return Qr(a.current).call(k),()=>{Qr(a.current).call(k.move,null),n([[null,null],[null,null]],S,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[S(y),T(w)],[S(x),T(b)]],S,T,null),()=>n([[S(y),T(w)],[S(x),T(b)]],S,T,"clear")):r==="Paintbrush Selection"?()=>n([[S(y),T(w)],[S(x),T(b)]],S,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,x,y,S,w,b,T]),I=N.useMemo(()=>o.length===0?null:new Set(o),[o]),D=N.useMemo(()=>!S||!T?null:s.map((k,P)=>{if(k[i.x]===null||k[i.y]===null)return null;const M=i.dataType==="date"?S(new Date(k[i.x])):S(k[i.x]);return _.jsx("circle",{opacity:I&&!I.has(k[i.ids])?.3:1,r:3,fill:I&&!I.has(k[i.ids])?"lightgray":g(k[i.category]),cx:M,cy:T(k[i.y])},P)}),[I,g,s,i.category,i.dataType,i.ids,i.x,i.y,S,T]);return N.useEffect(()=>{r==="Axis Selection"&&iRe(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(aa,{children:[_.jsxs(bi,{children:[_.jsx(gn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),C==null||C()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(m5,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(bi,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[S&&T?_.jsxs("g",{children:[_.jsx(d6e,{yScale:T,label:i.y,horizontalPosition:ms.left,xRange:S.range()}),_.jsx(one,{xScale:S,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+ms.top,label:i.x,ticks:S.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:S(k)}))})]}):null,D,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),S&&T&&r==="Paintbrush Selection"?_.jsx(h6e,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:S,yScale:T}):null]}),r==="Slider Selection"&&S&&T?_.jsxs(aa,{style:{flexGrow:1},gap:50,children:[_.jsxs(aa,{gap:0,children:[_.jsx(nt,{children:i.x}),_.jsx(tT,{minRange:1,label:null,min:S.domain()[0],max:S.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[S(k[0]),t.y1],[S(k[1]),t.y2]],S,T,"drag")},style:{width:"300px"},marks:S.ticks(5).map(k=>({value:k,label:k})),value:[S.invert(t.x1),S.invert(t.x2)]})]}),_.jsxs(aa,{gap:0,children:[_.jsx(nt,{children:i.y}),_.jsx(tT,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:k=>{n([[t.x1,T(k[1])],[t.x2,T(k[0])]],S,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(k=>({value:k,label:k})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const Q$t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:zG,default:zG},Symbol.toStringTag,{value:"Module"}));function Mye({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=N.useState(null);N.useEffect(()=>{HRe(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=N.useMemo(()=>o?t6e(o):null,[o]),{actions:l,trrack:c}=N.useMemo(()=>{const g=ew.create(),y=g.register("brush",(T,C)=>(T.all={brush:C},T)),b=g.register("brushMove",(T,C)=>(T.all={brush:C},T)),x=g.register("brushResize",(T,C)=>(T.all={brush:C},T)),w=g.register("brushClear",(T,C)=>(T.all={brush:C},T)),S=mN({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:b,brushResize:x,clearBrush:w},trrack:S}},[]),f=N.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=N.useMemo(()=>Wd(f,100,{maxWait:100}),[f]),h=N.useCallback((g,y,b,x,w)=>{if(!y||!b)return;const S=y.invert(g[0][0]||i.x1),T=y.invert(g[1][0]||i.x2),C=b.invert(g[1][1]||i.y2),I=b.invert(g[0][1]||i.y1);let D=null;if(x==="clear")D=u;else if(w){const P=new Set(w);D=u.filter(IS(M=>P.has(M[e.ids])))}else e.brushType==="Axis Selection"?D=u.filter(IS(P=>new Date(P[e.x])>=new Date(S)&&new Date(P[e.x])<=new Date(T)&&P[e.y]>=C&&P[e.y]<=I)):D=u.filter(IS(P=>P[e.x]>=S&&P[e.x]<=T&&P[e.y]>=C&&P[e.y]<=I));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:x!=="clear",ids:x!=="clear"?D==null?void 0:D.array("id"):[]};s(k),x==="drag"||x==="handle"?d(x,k):x==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(D),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=N.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=N.useCallback(g=>{r(g)},[]);return o?_.jsxs(aa,{gap:"xs",children:[_.jsx(zG,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(UG,{data:o,parameters:e,barsTable:p})]}):_.jsx(_c,{})}const J$t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Mye,default:Mye},Symbol.toStringTag,{value:"Module"})),Z$t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),eMt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class tMt extends ti.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?_.jsx(nt,{children:this.state.error.toString()}):this.props.children}}const Lye=Object.assign({"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":Ukt,"../public/example-brush-interactions/assets/Bar.tsx":Hkt,"../public/example-brush-interactions/assets/BrushPlot.tsx":p$t,"../public/example-brush-interactions/assets/Paintbrush.tsx":d$t,"../public/example-brush-interactions/assets/Scatter.tsx":h$t,"../public/example-brush-interactions/assets/XAxisBar.tsx":zkt,"../public/example-brush-interactions/assets/YAxis.tsx":f$t,"../public/example-brush-interactions/assets/YAxisBar.tsx":Vkt,"../public/example-brush-interactions/assets/types.ts":m$t,"../public/example-cleveland/assets/BarChart.tsx":_$t,"../public/example-cleveland/assets/BubbleChart.tsx":I$t,"../public/example-cleveland/assets/PieChart.tsx":O$t,"../public/example-cleveland/assets/StackedBarChart.tsx":B$t,"../public/example-cleveland/assets/chartcomponents/Bars.tsx":g$t,"../public/example-cleveland/assets/chartcomponents/Bubbles.tsx":w$t,"../public/example-cleveland/assets/chartcomponents/DotMarks.tsx":E$t,"../public/example-cleveland/assets/chartcomponents/NumericAxisH.tsx":$$t,"../public/example-cleveland/assets/chartcomponents/NumericAxisV.tsx":y$t,"../public/example-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":v$t,"../public/example-cleveland/assets/chartcomponents/Slices.tsx":k$t,"../public/example-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":R$t,"../public/example-cleveland/assets/chartcomponents/StackedBars.tsx":M$t,"../public/example-cleveland/assets/hooks/useChartDimensions.tsx":Fkt,"../public/example-fairness-jnd/assets/FairnessJND.tsx":U$t,"../public/libraries/test/assets/test.tsx":V$t,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":q$t,"../public/tutorial/react-and-randomization/assets/Bar.tsx":Y$t,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":J$t,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":X$t,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":Q$t,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":W$t,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":K$t,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":G$t,"../public/tutorial/react-and-randomization/assets/some.tsx":Z$t,"../public/tutorial/react-and-randomization/assets/types.ts":eMt});function nMt({currentConfig:e,provState:t}){const n=xd(),r=_d(),i=`../public/${e.path}`,s=i in Lye?Lye[i].default:null,o=wc(),{updateResponseBlockValidation:a,setIframeAnswers:u}=ll(),l=N.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return _.jsx(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:s?_.jsx(tMt,{children:_.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):_.jsx(j1,{path:e.path})})}function rMt({currentConfig:e}){const[t,n]=N.useState(""),[r,i]=N.useState(!0);return N.useEffect(()=>{async function s(){const o=await IZ(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Cu,{text:t}):_.jsx(j1,{path:e.path})}function Z2(e){return e.baseComponent!==void 0}function p6e(){const e=xd(),{setAlertModal:t}=ll(),n=wc();N.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Fye=Object.prototype.hasOwnProperty;function Bye(e,t,n){for(n of e.keys())if(gk(n,t))return n}function gk(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&gk(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Bye(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Bye(t,i),!i)||!gk(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Fye.call(e,n)&&++r&&!Fye.call(t,n)||!(n in t)||!gk(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function iMt(e){var t=N.useRef(e),n=N.useRef(0);return gk(e,t.current)||(t.current=e,n.current+=1),N.useMemo(function(){return t.current},[n.current])}function sMt(e,t){return N.useEffect(e,iMt(t))}const rL=(e,t=null)=>{const[n,r]=N.useState("idle"),[i,s]=N.useState(null),[o,a]=N.useState(null),u=N.useRef(),l=N.useRef(!1);N.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=N.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return sMt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function m6e(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const jye=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],g6e=["participantId","trialId","trialOrder","responseId"];function ane(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function oMt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(om(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=Z2(u)&&u.baseComponent&&n.baseComponents?TZ({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=m6e(s);return Object.entries(s.answer).map(([h,p])=>{var y,b;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(x=>x.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const x=(b=(y=l.correctAnswer)==null?void 0:y.find(w=>w.id===h))==null?void 0:b.answer;m.correctAnswer=typeof x=="object"?JSON.stringify(x):x}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function aMt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...g6e,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await oMt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function uMt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=N.useState([...jye].filter(h=>h!=="meta")),a=fo(),{value:u,status:l,error:c}=rL(aMt,[s,r,a.storageEngine,i]),f=N.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);ane(h,n)},[n,u]),d=N.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(qs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(xJ,{searchable:!0,nothingFoundMessage:"Property not found",data:[...jye],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(pct,{}),variant:"filled"}),_.jsx(Zc,{h:"md"}),_.jsxs(Ie,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(un,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(un.Thead,{children:_.jsx(un.Tr,{children:u.header.map(h=>_.jsx(un.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(qt,{direction:"row",justify:"space-between",align:"center",children:[h,!g6e.includes(h)&&_.jsx(j_,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(YJ,{size:16})})]})},h))})}),_.jsx(un.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(un.Tr,{children:u.header.map(m=>_.jsx(un.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(W0,{variant:"light",children:c.message}):null,_.jsx(uf,{visible:l==="pending"||l==="idle"})]}),_.jsx(Zc,{h:"sm"}),_.jsx(qt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(nt,{children:d})}),_.jsx(Zc,{h:"md"}),_.jsxs(bi,{justify:"right",children:[_.jsx(gn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(gn,{leftSection:_.jsx(SAe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function lMt(){const e=gg(),{storageEngine:t}=fo(),n=vi(b=>b.answers),[r,i]=N.useState(!1);N.useEffect(()=>{const b=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(b))},1e3)},[]),p6e();const[s,o]=N.useState(),[a,u]=N.useState(""),l=e.studyMetadata.title.replace(" ","_");N.useEffect(()=>{async function b(){if(t){const x=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(x),o(w)}}b()},[t]);const c=N.useCallback(async()=>{ane(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=N.useState(Math.floor(d/1e3));N.useEffect(()=>{if(r){const b=setInterval(()=>{p(x=>x-1)},1e3);return h<=0?(f&&c(),clearInterval(b),()=>clearInterval(b)):()=>clearInterval(b)}return()=>{}},[f,r,h,c]);const m=K_(),[g,y]=N.useState(!1);return N.useEffect(()=>{(async()=>{if(t){const x=await t.getModes(m);y(x.dataCollectionEnabled)}})()},[t,m]),_.jsx(Ua,{style:{height:"100%"},children:_.jsx(qt,{direction:"column",children:r||!g?_.jsx(nt,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Cu,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(nt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(Zc,{h:"lg"}),_.jsx(Ua,{children:_.jsx(_c,{color:"blue"})})]})})})}function cMt(){return _.jsx(nt,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function fMt(){return _.jsx(nt,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const Uye={};function VG(e,t){e===void 0&&(e=Uye),t===void 0&&(t=Uye);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var dMt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hMt=Object.prototype.hasOwnProperty;function HG(e,t){return hMt.call(e,t)}function qG(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)HG(e,i)&&r.push(i);return r}function Yc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function WG(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Gb(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function y6e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function GG(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(GG(e[t]))return!0}else if(typeof e=="object"){for(var r=qG(e),i=r.length,s=0;s<i;s++)if(GG(e[r[s]]))return!0}}return!1}function zye(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var v6e=function(e){dMt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,zye(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=zye(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ls=v6e,pMt=Yc,QE={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=iL(n,this.path);r&&(r=Yc(r));var i=$x(n,{op:"remove",path:this.from}).removed;return $x(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=iL(n,this.from);return $x(n,{op:"add",path:this.path,value:Yc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:GR(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},mMt={add:function(e,t,n){return WG(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:QE.move,copy:QE.copy,test:QE.test,_get:QE._get};function iL(e,t){if(t=="")return e;var n={op:"_get",path:t};return $x(e,n),n.value}function $x(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):sL(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=iL(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=GR(e,t.value),o.test===!1)throw new Ls("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ls("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Yc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=sL;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=y6e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!WG(h))throw new Ls("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);WG(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ls("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=mMt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ls("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=QE[t.op].call(t,l,h,e);if(o.test===!1)throw new Ls("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ls("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function O8(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ls("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Yc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=$x(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function gMt(e,t,n){var r=$x(e,t);if(r.test===!1)throw new Ls("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function sL(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ls("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(QE[e.op]){if(typeof e.path!="string")throw new Ls("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ls('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ls("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ls("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&GG(e.value))throw new Ls("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ls("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ls("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=b6e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ls("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ls("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function b6e(e,t,n){try{if(!Array.isArray(e))throw new Ls("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)O8(Yc(t),Yc(e),n||!0);else{n=n||sL;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ls)return i;throw i}}function GR(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!GR(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!GR(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const yMt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ls,_areEquals:GR,applyOperation:$x,applyPatch:O8,applyReducer:gMt,deepClone:pMt,getValueByPointer:iL,validate:b6e,validator:sL},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var une=new WeakMap,vMt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),bMt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function xMt(e){return une.get(e)}function _Mt(e,t){return e.observers.get(t)}function wMt(e,t){e.observers.delete(t.callback)}function EMt(e,t){t.unobserve()}function SMt(e,t){var n=[],r,i=xMt(e);if(!i)i=new vMt(e),une.set(e,i);else{var s=_Mt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Yc(e),t){r.callback=t,r.next=null;var o=function(){YG(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){YG(r),clearTimeout(r.next),wMt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new bMt(t,r)),r}function YG(e,t){t===void 0&&(t=!1);var n=une.get(e.object);lne(n.value,e.object,e.patches,"",t),e.patches.length&&O8(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function lne(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=qG(t),o=qG(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(HG(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?lne(c,f,n,r+"/"+Gb(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Gb(l),value:Yc(c)}),n.push({op:"replace",path:r+"/"+Gb(l),value:Yc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Gb(l),value:Yc(c)}),n.push({op:"remove",path:r+"/"+Gb(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!HG(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Gb(l),value:Yc(t[l])})}}}function TMt(e,t,n){n===void 0&&(n=!1);var r=[];return lne(e,t,r,"",n),r}const CMt=Object.freeze(Object.defineProperty({__proto__:null,compare:TMt,generate:YG,observe:SMt,unobserve:EMt},Symbol.toStringTag,{value:"Module"}));Object.assign({},yMt,CMt,{JsonPatchError:v6e,deepClone:Yc,escapePathComponent:Gb,unescapePathComponent:y6e});var AMt=/("(?:[^\\"]|\\.)*")|[:,]/g,IMt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,b,x,w,S;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(b=w.replace(AMt,function(T,C){return C||T+" "}),b.length<=g))return b;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(x="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(x="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",S=o(a[h],y,p.length+(f===g-1?0:1)),S!==void 0&&d.push(p+S);if(d.length>0)return[x,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const Gz=Cm(IMt);function Sc(e,t,n){return e.fields=t||[],e.fname=n,e}function Ws(e){return e==null?null:e.fname}function _u(e){return e==null?null:e.fields}function x6e(e){return e.length===1?kMt(e[0]):RMt(e)}const kMt=e=>function(t){return t[e]},RMt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Ye(e){throw Error(e)}function Om(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Ye("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Ye("Access path missing closing bracket: "+e),r&&Ye("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function ld(e,t,n){const r=Om(e);return e=r.length===1?r[0]:e,Sc((n&&n.get||x6e)(r),[e],t||e)}const AN=ld("id"),Iu=Sc(e=>e,[],"identity"),Hy=Sc(()=>0,[],"zero"),eC=Sc(()=>1,[],"one"),cd=Sc(()=>!0,[],"true"),Ty=Sc(()=>!1,[],"false");function DMt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const _6e=0,cne=1,fne=2,w6e=3,E6e=4;function dne(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:DMt,r=e||_6e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=cne&&n(t||"error","ERROR",arguments),this},warn(){return r>=fne&&n(t||"warn","WARN",arguments),this},info(){return r>=w6e&&n(t||"log","INFO",arguments),this},debug(){return r>=E6e&&n(t||"log","DEBUG",arguments),this}}}var Xe=Array.isArray;function Ot(e){return e===Object(e)}const Vye=e=>e!=="__proto__";function tC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=NMt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;nC(r,s,i[s],o)}return r},{})}function nC(e,t,n,r){if(!Vye(t))return;let i,s;if(Ot(n)&&!Xe(n)){s=Ot(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?nC(s,i,n[i]):Vye(i)&&(s[i]=n[i])}else e[t]=n}function NMt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function $r(e){return e[e.length-1]}function vu(e){return e==null||e===""?null:+e}const S6e=e=>t=>e*Math.exp(t),T6e=e=>t=>Math.log(e*t),C6e=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),A6e=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,oL=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function $8(e,t,n,r){const i=n(e[0]),s=n($r(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function I6e(e,t){return $8(e,t,vu,Iu)}function k6e(e,t){var n=Math.sign(e[0]);return $8(e,t,T6e(n),S6e(n))}function R6e(e,t,n){return $8(e,t,oL(n),oL(1/n))}function D6e(e,t,n){return $8(e,t,C6e(n),A6e(n))}function M8(e,t,n,r,i){const s=r(e[0]),o=r($r(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function hne(e,t,n){return M8(e,t,n,vu,Iu)}function pne(e,t,n){const r=Math.sign(e[0]);return M8(e,t,n,T6e(r),S6e(r))}function aL(e,t,n,r){return M8(e,t,n,oL(r),oL(1/r))}function mne(e,t,n,r){return M8(e,t,n,C6e(r),A6e(r))}function N6e(e){return 1+~~(new Date(e).getMonth()/3)}function P6e(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Nt(e){return e!=null?Xe(e)?e:[e]:[]}function O6e(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function Gn(e){return typeof e=="function"}const PMt="descending";function gne(e,t,n){n=n||{},t=Nt(t)||[];const r=[],i=[],s={},o=n.comparator||OMt;return Nt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===PMt?-1:1),i.push(a=Gn(a)?a:ld(a,null,n)),(_u(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Sc(o(i,r),Object.keys(s))}const L8=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),OMt=(e,t)=>e.length===1?$Mt(e[0],t[0]):MMt(e,t,e.length),$Mt=(e,t)=>function(n,r){return L8(e(n),e(r))*t},MMt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=L8(s(r),s(i));return o*t[a]});function ku(e){return Gn(e)?e:()=>e}function yne(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Wn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function gm(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function $6e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const LMt=Object.prototype.hasOwnProperty;function sn(e,t){return LMt.call(e,t)}const wO={};function rC(e){let t={},n;function r(s){return sn(t,s)&&t[s]!==wO}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===wO&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=wO),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==wO&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function M6e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=$r(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function Ct(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Wn(r,n)}function JE(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Wv(e){return typeof e=="boolean"}function S1(e){return Object.prototype.toString.call(e)==="[object Date]"}function L6e(e){return e&&Gn(e[Symbol.iterator])}function Kr(e){return typeof e=="number"}function F6e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Pt(e){return typeof e=="string"}function vne(e,t,n){e&&(e=t?Nt(e).map(a=>a.replace(/\\(.)/g,"$1")):Nt(e));const r=e&&e.length,i=n&&n.get||x6e,s=a=>i(t?[a]:Om(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Sc(o,e,"key")}function B6e(e,t){const n=e[0],r=$r(e),i=+t;return i?i===1?r:n+i*(r-n):n}const FMt=1e4;function j6e(e){e=+e||FMt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>sn(t,o)||sn(n,o),get:o=>sn(t,o)?t[o]:sn(n,o)?s(o,n[o]):void 0,set:(o,a)=>sn(t,o)?t[o]=a:s(o,a)}}function U6e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function xI(e,t){let n="";for(;--t>=0;)n+=e;return n}function z6e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?xI(i,o)+s:r==="center"?xI(i,~~(o/2))+s+xI(i,Math.ceil(o/2)):s+xI(i,o)}function IN(e){return e&&$r(e)-e[0]||0}function Et(e){return Xe(e)?"["+e.map(Et)+"]":Ot(e)||Pt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function bne(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const BMt=e=>Kr(e)||S1(e)?e:Date.parse(e);function xne(e,t){return t=t||BMt,e==null||e===""?null:t(e)}function _ne(e){return e==null||e===""?null:e+""}function Ph(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function V6e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Oy(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function jMt(e){return e}function UMt(e){if(e==null)return jMt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function zMt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function VMt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Hye(e,n)})}:Hye(e,t)}function Hye(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=H6e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function H6e(e,t){var n=UMt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&zMt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function HMt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function qMt(e){return H6e(e,WMt.apply(this,arguments))}function WMt(e,t,n){var r,i,s;if(arguments.length>1)r=GMt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:HMt(e,r)}}function GMt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const La="year",gc="quarter",wu="month",Bo="week",yc="date",gu="day",ym="dayofyear",mf="hours",gf="minutes",fd="seconds",Oh="milliseconds",wne=[La,gc,wu,Bo,yc,gu,ym,mf,gf,fd,Oh],Yz=wne.reduce((e,t,n)=>(e[t]=1+n,e),{});function Ene(e){const t=Nt(e).slice(),n={};return t.length||Ye("Missing time unit."),t.forEach(i=>{sn(Yz,i)?n[i]=1:Ye(`Invalid time unit: ${i}.`)}),(n[Bo]||n[gu]?1:0)+(n[gc]||n[wu]||n[yc]?1:0)+(n[ym]?1:0)>1&&Ye(`Incompatible time units: ${e}`),t.sort((i,s)=>Yz[i]-Yz[s]),t}const YMt={[La]:"%Y ",[gc]:"Q%q ",[wu]:"%b ",[yc]:"%d ",[Bo]:"W%U ",[gu]:"%a ",[ym]:"%j ",[mf]:"%H:00",[gf]:"00:%M",[fd]:":%S",[Oh]:".%L",[`${La}-${wu}`]:"%Y-%m ",[`${La}-${wu}-${yc}`]:"%Y-%m-%d ",[`${mf}-${gf}`]:"%H:%M"};function q6e(e,t){const n=Wn({},YMt,t),r=Ene(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const ex=new Date;function Sne(e){return ex.setFullYear(e),ex.setMonth(0),ex.setDate(1),ex.setHours(0,0,0,0),ex}function W6e(e){return Y6e(new Date(e))}function G6e(e){return KG(new Date(e))}function Y6e(e){return Q0.count(Sne(e.getFullYear())-1,e)}function KG(e){return F2.count(Sne(e.getFullYear())-1,e)}function XG(e){return Sne(e).getDay()}function KMt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function K6e(e){return Q6e(new Date(e))}function X6e(e){return QG(new Date(e))}function Q6e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return _1.count(t-1,e)}function QG(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return B2.count(t-1,e)}function JG(e){return ex.setTime(Date.UTC(e,0,1)),ex.getUTCDay()}function XMt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function J6e(e,t,n,r,i){const s=t||1,o=$r(e),a=(y,b,x)=>(x=x||y,QMt(n[x],r[x],y===o&&s,b)),u=new Date,l=Ph(e),c=l[La]?a(La):ku(2012),f=l[wu]?a(wu):l[gc]?a(gc):Hy,d=l[Bo]&&l[gu]?a(gu,1,Bo+gu):l[Bo]?a(Bo,1):l[gu]?a(gu,1):l[yc]?a(yc,1):l[ym]?a(ym,1):eC,h=l[mf]?a(mf):Hy,p=l[gf]?a(gf):Hy,m=l[fd]?a(fd):Hy,g=l[Oh]?a(Oh):Hy;return function(y){u.setTime(+y);const b=c(u);return i(b,f(u),d(u,b),h(u),p(u),m(u),g(u))}}function QMt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function RT(e,t,n){return t+e*7-(n+6)%7}const JMt={[La]:e=>e.getFullYear(),[gc]:e=>Math.floor(e.getMonth()/3),[wu]:e=>e.getMonth(),[yc]:e=>e.getDate(),[mf]:e=>e.getHours(),[gf]:e=>e.getMinutes(),[fd]:e=>e.getSeconds(),[Oh]:e=>e.getMilliseconds(),[ym]:e=>Y6e(e),[Bo]:e=>KG(e),[Bo+gu]:(e,t)=>RT(KG(e),e.getDay(),XG(t)),[gu]:(e,t)=>RT(1,e.getDay(),XG(t))},ZMt={[gc]:e=>3*e,[Bo]:(e,t)=>RT(e,0,XG(t))};function Z6e(e,t){return J6e(e,t||1,JMt,ZMt,KMt)}const eLt={[La]:e=>e.getUTCFullYear(),[gc]:e=>Math.floor(e.getUTCMonth()/3),[wu]:e=>e.getUTCMonth(),[yc]:e=>e.getUTCDate(),[mf]:e=>e.getUTCHours(),[gf]:e=>e.getUTCMinutes(),[fd]:e=>e.getUTCSeconds(),[Oh]:e=>e.getUTCMilliseconds(),[ym]:e=>Q6e(e),[Bo]:e=>QG(e),[gu]:(e,t)=>RT(1,e.getUTCDay(),JG(t)),[Bo+gu]:(e,t)=>RT(QG(e),e.getUTCDay(),JG(t))},tLt={[gc]:e=>3*e,[Bo]:(e,t)=>RT(e,0,JG(t))};function e$e(e,t){return J6e(e,t||1,eLt,tLt,XMt)}const nLt={[La]:um,[gc]:kR.every(3),[wu]:kR,[Bo]:F2,[yc]:Q0,[gu]:Q0,[ym]:Q0,[mf]:e8,[gf]:J5,[fd]:F0,[Oh]:hT},rLt={[La]:lm,[gc]:RR.every(3),[wu]:RR,[Bo]:B2,[yc]:_1,[gu]:_1,[ym]:_1,[mf]:t8,[gf]:Z5,[fd]:F0,[Oh]:hT};function iC(e){return nLt[e]}function sC(e){return rLt[e]}function t$e(e,t,n){return e?e.offset(t,n):void 0}function n$e(e,t,n){return t$e(iC(e),t,n)}function r$e(e,t,n){return t$e(sC(e),t,n)}function i$e(e,t,n,r){return e?e.range(t,n,r):void 0}function s$e(e,t,n,r){return i$e(iC(e),t,n,r)}function o$e(e,t,n,r){return i$e(sC(e),t,n,r)}const _I=1e3,wI=_I*60,EI=wI*60,F8=EI*24,iLt=F8*7,qye=F8*30,ZG=F8*365,a$e=[La,wu,yc,mf,gf,fd,Oh],SI=a$e.slice(0,-1),TI=SI.slice(0,-1),CI=TI.slice(0,-1),sLt=CI.slice(0,-1),oLt=[La,Bo],Wye=[La,wu],u$e=[La],EA=[[SI,1,_I],[SI,5,5*_I],[SI,15,15*_I],[SI,30,30*_I],[TI,1,wI],[TI,5,5*wI],[TI,15,15*wI],[TI,30,30*wI],[CI,1,EI],[CI,3,3*EI],[CI,6,6*EI],[CI,12,12*EI],[sLt,1,F8],[oLt,1,iLt],[Wye,1,qye],[Wye,3,3*qye],[u$e,1,ZG]];function l$e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(IN(t))/n;let i=O2(a=>a[2]).right(EA,r),s,o;return i===EA.length?(s=u$e,o=z1(t[0]/ZG,t[1]/ZG,n)):i?(i=EA[r/EA[i-1][2]<EA[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=a$e,o=Math.max(z1(t[0],t[1],n),1)),{units:s,step:o}}function AI(e){const t={};return n=>t[n]||(t[n]=e(n))}function aLt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=uLt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function uLt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function c$e(e){const t=AI(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=e_(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return aLt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=e_(o??",f");const a=z1(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=KRe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=XRe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=YRe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let eY;f$e();function f$e(){return eY=c$e({format:Fv,formatPrefix:GZ})}function d$e(e){return c$e(GRe(e))}function uL(e){return arguments.length?eY=d$e(e):eY}function Gye(e,t,n){n=n||{},Ot(n)||Ye(`Invalid time multi-format specifier: ${n}`);const r=t(fd),i=t(gf),s=t(mf),o=t(yc),a=t(Bo),u=t(wu),l=t(gc),c=t(La),f=e(n[Oh]||".%L"),d=e(n[fd]||":%S"),h=e(n[gf]||"%I:%M"),p=e(n[mf]||"%I %p"),m=e(n[yc]||n[gu]||"%a %d"),g=e(n[Bo]||"%b %d"),y=e(n[wu]||"%B"),b=e(n[gc]||"%B"),x=e(n[La]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:b:x)(w)}function h$e(e){const t=AI(e.format),n=AI(e.utcFormat);return{timeFormat:r=>Pt(r)?t(r):Gye(t,iC,r),utcFormat:r=>Pt(r)?n(r):Gye(n,sC,r),timeParse:AI(e.parse),utcParse:AI(e.utcParse)}}let tY;p$e();function p$e(){return tY=h$e({format:oee,parse:lNe,utcFormat:fN,utcParse:cNe})}function m$e(e){return h$e(iNe(e))}function YR(e){return arguments.length?tY=m$e(e):tY}const nY=(e,t)=>Wn({},e,t);function g$e(e,t){const n=e?d$e(e):uL(),r=t?m$e(t):YR();return nY(n,r)}function Tne(e,t){const n=arguments.length;return n&&n!==2&&Ye("defaultLocale expects either zero or two arguments."),n?nY(uL(e),YR(t)):nY(uL(),YR())}function lLt(){return f$e(),p$e(),Tne()}const cLt=/^(data:|([A-Za-z]+:)?\/\/)/,fLt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,dLt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Yye="file://";function hLt(e,t){return n=>({options:n||{},sanitize:mLt,load:pLt,fileAccess:!1,file:gLt(t),http:vLt(e)})}async function pLt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function mLt(e,t){t=Wn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=fLt.test(e.replace(dLt,""));(e==null||typeof e!="string"||!a)&&Ye("Sanitize failure, invalid URI: "+Et(e));const u=cLt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Yye))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Yye.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function gLt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):yLt}async function yLt(){Ye("No file system access.")}function vLt(e){return e?async function(t,n){const r=Wn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?Gn(s[i])?s[i]():s.text():Ye(s.status+""+s.statusText)}:bLt}async function bLt(){Ye("No HTTP fetch method available.")}const xLt=e=>e!=null&&e===e,_Lt=e=>e==="true"||e==="false"||e===!0||e===!1,wLt=e=>!Number.isNaN(Date.parse(e)),y$e=e=>!Number.isNaN(+e)&&!(e instanceof Date),ELt=e=>y$e(e)&&Number.isInteger(+e),rY={boolean:bne,integer:vu,number:vu,date:xne,string:_ne,unknown:Iu},EO=[_Lt,ELt,y$e,wLt],SLt=["boolean","integer","number","date"];function v$e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=EO.length,i=EO.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&xLt(u)&&!EO[a](u)&&(i[a]=0,++o,o===EO.length))return"string";return SLt[i.reduce((s,o)=>s===0?o:s,0)-1]}function b$e(e,t){return t.reduce((n,r)=>(n[r]=v$e(e,r),n),{})}function Kye(e){const t=function(n,r){const i={delimiter:e};return Cne(n,r?Wn(r,i):i)};return t.responseType="text",t}function Cne(e,t){return t.header&&(e=t.header.map(Et).join(t.delimiter)+`
`+e),VRe(t.delimiter).parse(e+"")}Cne.responseType="text";function TLt(e){return typeof Buffer=="function"&&Gn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function Ane(e,t){const n=t&&t.property?ld(t.property):Iu;return Ot(e)&&!TLt(e)?CLt(n(e),t):n(JSON.parse(e))}Ane.responseType="json";function CLt(e,t){return!Xe(e)&&L6e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const ALt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function x$e(e,t){let n,r,i,s;return e=Ane(e,t),t&&t.feature?(n=VMt,i=t.feature):t&&t.mesh?(n=qMt,i=t.mesh,s=ALt[t.filter]):Ye("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Ye("Invalid TopoJSON object: "+i),r&&r.features||[r]}x$e.responseType="json";const t6={dsv:Cne,csv:Kye(","),tsv:Kye("	"),json:Ane,topojson:x$e};function Ine(e,t){return arguments.length>1?(t6[e]=t,this):sn(t6,e)?t6[e]:null}function _$e(e){const t=Ine(e);return t&&t.responseType||"text"}function w$e(e,t,n,r){t=t||{};const i=Ine(t.type||"json");return i||Ye("Unknown data format type: "+t.type),e=i(e,t),t.parse&&ILt(e,t.parse,n,r),sn(e,"columns")&&delete e.columns,e}function ILt(e,t,n,r){if(!e.length)return;const i=YR();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=b$e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!rY[p])throw Error("Illegal format pattern: "+h+":"+p);return rY[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const B8=hLt(typeof fetch<"u"&&fetch,null);function j8(e){const t=e||Iu,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function n6(e,t){try{await t(e)}catch(n){e.error(n)}}const E$e=Symbol("vega_id");let kLt=1;function U8(e){return!!(e&&nn(e))}function nn(e){return e[E$e]}function S$e(e,t){return e[E$e]=t,e}function hi(e){const t=e===Object(e)?e:{data:e};return nn(t)?t:S$e(t,kLt++)}function kne(e){return z8(e,hi({}))}function z8(e,t){for(const n in e)t[n]=e[n];return t}function T$e(e,t){return S$e(t,nn(e))}function nw(e,t){return e?t?(n,r)=>e(n,r)||nn(t(n))-nn(t(r)):(n,r)=>e(n,r)||nn(n)-nn(r):null}function C$e(e){return e&&e.constructor===rw}function rw(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:rw,insert(a){const u=Nt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=Gn(a)?r:t,l=Nt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:ku(l)};return Gn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return Gn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[nn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[nn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(b=>{p(b)&&(l[nn(b)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=nn(m),l[g]?l[g]=1:a.add.push(hi(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[nn(m)]<0&&a.rem.push(m);function y(b,x,w){w?b[x]=w(b):a.encode=x,o||(c[nn(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[nn(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(b=>{p(b)&&l[nn(b)]>0&&y(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(b=>l[nn(b)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const r6="_:mod:_";function V8(){Object.defineProperty(this,r6,{writable:!0,value:{}})}V8.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[r6];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Xe(n)?1+n.length:-1),i},modified(e,t){const n=this[r6];if(arguments.length){if(Xe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[r6]={},this}};let RLt=0;const DLt="pulse",NLt=new V8,PLt=1,OLt=2;function qi(e,t,n,r){this.id=++RLt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Xye(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}qi.prototype={targets(){return this._targets||(this._targets=j8(AN))},set(e){return this.value!==e?(this.value=e,1):0},skip:Xye(PLt),modified:Xye(OLt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new V8,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof qi?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===DLt)Nt(a).forEach(f=>{f instanceof qi?f!==this&&(f.targets().add(this),s.push(f)):Ye("Pulse parameters must be operator instances.")}),this.source=a;else if(Xe(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||NLt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function $Lt(e,t,n,r){let i=1,s;return e instanceof qi?s=e:e&&e.prototype instanceof qi?s=new e:Gn(e)?s=new qi(null,e):(i=0,s=new qi(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function MLt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let LLt=0;function H8(e,t,n){this.id=++LLt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Cy(e,t,n){return new H8(e,t,n)}H8.prototype={_filter:cd,_apply:Iu,targets(){return this._targets||(this._targets=j8(AN))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Cy(e);return this.targets().add(t),t},apply(e){const t=Cy(null,e);return this.targets().add(t),t},merge(){const e=Cy();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Cy();return this.targets().add(Cy(null,null,yne(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Cy(null,null,()=>n=!0)),t.targets().add(Cy(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=cd,this._targets=null}};function FLt(e,t,n,r){const i=this,s=Cy(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Nt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function BLt(e,t){const n=this.locale();return w$e(e,t,n.timeParse,n.utcParse)}function jLt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function ULt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:_$e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function zLt(e,t,n){const r=this,i=r._pending||VLt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(cd).insert(s.data||[])),i.done(),s}function VLt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const HLt={skip:!0};function qLt(e,t,n,r,i){return(e instanceof qi?GLt:WLt)(this,e,t,n,r,i),this}function WLt(e,t,n,r,i,s){const o=Wn({},s,HLt);let a,u;Gn(n)||(n=ku(n)),r===void 0?a=l=>e.touch(n(l)):Gn(r)?(u=new qi(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;C$e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function GLt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new qi(null,YLt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function YLt(e,t){return t=Gn(t)?t:ku(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function KLt(e){e.rank=++this._rank}function XLt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Ye("Cycle detected in dataflow graph.")}const lL={},vp=1,$y=2,g0=4,QLt=vp|$y,Qye=vp|g0,nE=vp|$y|g0,Jye=8,SA=16,Zye=32,e1e=64;function T1(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Kz(e,t){const n=[];return Oy(e,t,r=>n.push(r)),n}function t1e(e,t){const n={};return e.visit(t,r=>{n[nn(r)]=1}),r=>n[nn(r)]?null:r}function SO(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}T1.prototype={StopPropagation:lL,ADD:vp,REM:$y,MOD:g0,ADD_REM:QLt,ADD_MOD:Qye,ALL:nE,REFLOW:Jye,SOURCE:SA,NO_SOURCE:Zye,NO_FIELDS:e1e,fork(e){return new T1(this.dataflow).init(this,e)},clone(){const e=this.fork(nE);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(nE|SA)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new T1(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&e1e)&&(n.fields=e.fields),t&vp?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&$y?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&g0?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Zye?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||nE;return t&vp&&this.add.length||t&$y&&this.rem.length||t&g0&&this.mod.length},reflow(e){if(e)return this.fork(nE).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(g0,t1e(this,vp))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Xe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Xe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&vp&&(n.addF=SO(n.addF,t)),e&$y&&(n.remF=SO(n.remF,t)),e&g0&&(n.modF=SO(n.modF,t)),e&SA&&(n.srcF=SO(n.srcF,t)),n},materialize(e){e=e||nE;const t=this;return e&vp&&t.addF&&(t.add=Kz(t.add,t.addF),t.addF=null),e&$y&&t.remF&&(t.rem=Kz(t.rem,t.remF),t.remF=null),e&g0&&t.modF&&(t.mod=Kz(t.mod,t.modF),t.modF=null),e&SA&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&SA)return Oy(n.source,n.srcF,r),n;e&vp&&Oy(n.add,n.addF,r),e&$y&&Oy(n.rem,n.remF,r),e&g0&&Oy(n.mod,n.modF,r);const i=n.source;if(e&Jye&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Oy(i,t1e(n,Qye),r):Oy(i,n.srcF,r))}return n}};function Rne(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}Ct(Rne,T1,{fork(e){const t=new T1(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Xe(e)?e.some(r=>n[r]):n[e]:0},filter(){Ye("MultiPulse does not support filtering.")},materialize(){Ye("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function JLt(e,t,n){const r=this,i=[];if(r._pulse)return A$e(r);if(r._pending&&await r._pending,t&&await n6(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new T1(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=j8(AN);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=lL),u!==lL&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await n6(r,c[f].callback)}return n&&await n6(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function ZLt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function eFt(e,t,n){return this._pulse?A$e(this):(this.evaluate(e,t,n),this)}function tFt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function A$e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function nFt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function rFt(e,t){const n=e.source,r=this._clock;return n&&Xe(n)?new Rne(this,r,n.map(i=>i.pulse),t):this._input[e.id]||iFt(this._pulse,n&&n.pulse)}function iFt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==lL&&(e.source=t.source),e)}const Dne={skip:!1,force:!1};function sFt(e,t){const n=t||Dne;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function oFt(e,t,n){const r=n||Dne;return(e.set(t)||r.force)&&this.touch(e,r),this}function aFt(e,t,n){this.touch(e,n||Dne);const r=new T1(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function uFt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),I$e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,lFt(t,0,e)):r=n,r}}}function I$e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function lFt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,I$e(e,r,t,n)}function kS(){this.logger(dne()),this.logLevel(cne),this._clock=0,this._rank=0,this._locale=Tne();try{this._loader=B8()}catch{}this._touched=j8(AN),this._input={},this._pulse=null,this._heap=uFt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function TA(e){return function(){return this._log[e].apply(this,arguments)}}kS.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:TA("error"),warn:TA("warn"),info:TA("info"),debug:TA("debug"),logLevel:TA("level"),cleanThreshold:1e4,add:$Lt,connect:MLt,rank:KLt,rerank:XLt,pulse:aFt,touch:sFt,update:oFt,changeset:rw,ingest:jLt,parse:BLt,preload:zLt,request:ULt,events:FLt,on:qLt,evaluate:JLt,run:eFt,runAsync:ZLt,runAfter:tFt,_enqueue:nFt,_getPulse:rFt};function Ve(e,t){qi.call(this,e,null,t)}Ct(Ve,qi,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const DT={};function k$e(e){const t=R$e(e);return t&&t.Definition||null}function R$e(e){return e=e&&e.toLowerCase(),sn(DT,e)?DT[e]:null}function*D$e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Nne(e,t,n){const r=Float64Array.from(D$e(e,n));return r.sort(Y0),t.map(i=>zke(r,i))}function Pne(e,t){return Nne(e,[.25,.5,.75],t)}function One(e,t){const n=e.length,r=lbt(e,t),i=Pne(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function N$e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var dd=Math.random;function cFt(e){dd=e}function P$e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(D$e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(dd()*s)];c[l]=a/s}return c.sort(Y0),[cW(c,n/2),cW(c,1-n/2)]}function O$e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?fFt(s,t+t/4):s}function fFt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function dFt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function hFt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*dd())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const $$e=Math.sqrt(2*Math.PI),pFt=Math.SQRT2;let CA=NaN;function q8(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(CA===CA)n=CA,CA=NaN;else{do n=dd()*2-1,r=dd()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,CA=r*s}return e+n*t}function $ne(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*$$e)}function W8(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function G8(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*pFt*mFt(2*e-1)}function mFt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Mne(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>q8(n,r),pdf:s=>$ne(s,n,r),cdf:s=>W8(s,n,r),icdf:s=>G8(s,n,r)};return i.mean(e).stdev(t)}function Lne(e,t){const n=Mne();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=One(e)),i):t},sample(){return e[~~(dd()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Fne(e,t){return e=e||0,t=t??1,Math.exp(e+q8()*t)}function Bne(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*$$e*e)}function jne(e,t,n){return W8(Math.log(e),t,n)}function Une(e,t,n){return Math.exp(G8(e,t,n))}function M$e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Fne(n,r),pdf:s=>Bne(s,n,r),cdf:s=>jne(s,n,r),icdf:s=>Une(s,n,r)};return i.mean(e).stdev(t)}function L$e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=dd();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function zne(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*dd()}function Vne(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Hne(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function qne(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function F$e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>zne(n,r),pdf:s=>Vne(s,n,r),cdf:s=>Hne(s,n,r),icdf:s=>qne(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Wne(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function kN(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function Y8(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function RN(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function oC(e,t,n,r,i){let s=0,o=0;return RN(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Gne(e,t,n){let r=0,i=0,s=0,o=0,a=0;RN(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=kN(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:oC(e,t,n,i,l)}}function B$e(e,t,n){let r=0,i=0,s=0,o=0,a=0;RN(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=kN(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:oC(e,t,n,i,l)}}function j$e(e,t,n){const[r,i,s,o]=Y8(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;RN(e,t,n,(b,x)=>{d=r[f++],h=Math.log(x),p=d*x,a+=(x*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=kN(u/o,a/o,l/o,c/o),y=b=>Math.exp(m+g*(b-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:oC(e,t,n,o,y)}}function U$e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;RN(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=kN(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:oC(e,t,n,a,c)}}function Yne(e,t,n){const[r,i,s,o]=Y8(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,b=u*y-l*l,x=(d*u-f*l)/b,w=(f*y-d*l)/b,S=-x*u,T=C=>(C=C-s,x*C*C+w*C+S+o);return{coef:[S-w*s+x*s*s+o,w-2*x*s,x],predict:T,rSquared:oC(e,t,n,o,T)}}function z$e(e,t,n,r){if(r===0)return Wne(e,t,n);if(r===1)return Gne(e,t,n);if(r===2)return Yne(e,t,n);const[i,s,o,a]=Y8(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=yFt(c),b=x=>{x-=o;let w=a+y[0]+y[1]*x+y[2]*x*x;for(d=3;d<f;++d)w+=y[d]*Math.pow(x,d);return w};return{coef:gFt(f,y,-o,a),predict:b,rSquared:oC(e,t,n,a,b)}}function gFt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function yFt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const n1e=2,r1e=1e-12;function V$e(e,t,n,r){const[i,s,o,a]=Y8(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=n1e;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],b=p[0],x=p[1],w=y-i[b]>i[x]-y?b:x;let S=0,T=0,C=0,I=0,D=0;const k=1/Math.abs(i[w]-y||1);for(let $=b;$<=x;++$){const B=i[$],q=s[$],H=vFt(Math.abs(y-B)*k)*d[$],Y=B*H;S+=H,T+=Y,C+=q*H,I+=q*Y,D+=B*Y}const[P,M]=kN(T/S,C/S,I/S,D/S);c[g]=P+M*y,f[g]=Math.abs(s[g]-c[g]),bFt(i,g+1,p)}if(h===n1e)break;const m=Vke(f);if(Math.abs(m)<r1e)break;for(let g=0,y,b;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?r1e:(b=1-y*y)*b}return xFt(i,c,o,a)}function vFt(e){return(e=1-e*e*e)*e*e}function bFt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function xFt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const _Ft=.5*Math.PI/180;function K8(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=wFt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&EFt(f,m,d,h,p)>_Ft?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function wFt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function EFt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function SFt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function iY(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:SFt(e)}function H$e(e,t,n){return n||e+(t?"_"+t:"")}const Xz=()=>{},TFt={init:Xz,add:Xz,rem:Xz,idx:0},KR={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},DN=Object.keys(KR).filter(e=>e!=="__count__");function CFt(e,t){return(n,r)=>Wn({name:e,aggregate_param:r,out:n||e},TFt,t)}[...DN,"__count__"].forEach(e=>{KR[e]=CFt(e,KR[e])});function q$e(e,t,n){return KR[e](n,t)}function W$e(e,t){return e.idx-t.idx}function AFt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=KR[i]())})};return e.forEach(n),Object.values(t).sort(W$e)}function IFt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function kFt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function RFt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function DFt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function G$e(e,t){const n=t||Iu,r=AFt(e),i=e.slice().sort(W$e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=IFt,s.prototype.add=kFt,s.prototype.rem=RFt,s.prototype.set=DFt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Kne(e){this._key=e?ld(e):nn,this.reset()}const Wa=Kne.prototype;Wa.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Wa.add=function(e){this._add.push(e)};Wa.rem=function(e){this._rem.push(e)};Wa.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Wa.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",sn(n,s)||(n[s]=1,++i);return i};Wa.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=$6e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Wa.argmin=function(e){return this.extent(e)[0]||{}};Wa.argmax=function(e){return this.extent(e)[1]||{}};Wa.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Wa.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Wa.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Pne(this.values(),e),this._get=e),this._q};Wa.q1=function(e){return this.quartile(e)[0]};Wa.q2=function(e){return this.quartile(e)[1]};Wa.q3=function(e){return this.quartile(e)[2]};Wa.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=P$e(this.values(),1e3,.05,e),this._get=e),this._ci};Wa.ci0=function(e){return this.ci(e)[0]};Wa.ci1=function(e){return this.ci(e)[1]};function iv(e){Ve.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}iv.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:DN},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Ct(iv,Ve,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const x=Nt(_u(b)),w=x.length;let S=0,T;for(;S<w;++S)r[T=x[S]]||(r[T]=1,t.push(T))}this._dims=Nt(e.groupby),this._dnames=this._dims.map(b=>{const x=Ws(b);return i(b),n.push(x),x}),this.cellkey=e.key?e.key:iY(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Ye("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Ye("Null aggregate field specified."),m=Ws(f),g=H$e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(q$e(d,h,g))}return this._measures=this._measures.map(b=>G$e(b,b.field)),Object.create(null)},cellkey:iY(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Kne),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?T$e(t.tuple,s):hi(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const NFt=1e-14;function Xne(e){Ve.call(this,null,e)}Xne.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Ct(Xne,Ve,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(_u(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=N$e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=vu(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(NFt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Sc(u,_u(t),e.name||"bin_"+Ws(t))}});function Y$e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?U6e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Qne(e){Ve.call(this,[],e)}Qne.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Ct(Qne,Ve,{transform(e,t){const n=t.fork(t.ALL),r=Y$e(nn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(nw(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function K$e(e){qi.call(this,null,PFt,e)}Ct(K$e,qi);function PFt(e){return this.value&&!e.modified()?this.value:gne(e.fields,e.orders)}function Jne(e){Ve.call(this,null,e)}Jne.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function OFt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Ct(Jne,Ve,{transform(e,t){const n=f=>d=>{for(var h=OFt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=hi({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Zne(e){Ve.call(this,null,e)}Zne.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Ct(Zne,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=$Ft(a,i,s,e.filter||cd)):n.mod=a,n.source=this.value,n.modifies(r)}});function $Ft(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(hi(s)),s={},s[t]=l);return i}const i1e={kde:Lne,mixture:L$e,normal:Mne,lognormal:M$e,uniform:F$e},MFt="distributions",s1e="function",LFt="field";function X$e(e,t){const n=e[s1e];sn(i1e,n)||Ye("Unknown distribution function: "+n);const r=i1e[n]();for(const i in e)i===LFt?r.data((e.from||t()).map(e[i])):i===MFt?r[i](e[i].map(s=>X$e(s,t))):typeof r[i]===s1e&&r[i](e[i]);return r}function ere(e){Ve.call(this,null,e)}const Q$e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],FFt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:Q$e},{name:"weights",type:"number",array:!0}]};ere.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:Q$e.concat(FFt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ct(ere,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=X$e(e.distribution,BFt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Ye("Invalid density method: "+o),!e.extent&&!r.data&&Ye("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||gm(r.data()),l=K8(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],hi(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function BFt(e){return()=>e.materialize(e.SOURCE).source}function J$e(e,t){return e?e.map((n,r)=>t[r]||Ws(n)):null}function tre(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const Z$e="bin";function nre(e){Ve.call(this,null,e)}nre.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Z$e}]};const jFt=(e,t)=>IN(gm(e,t))/30;Ct(nre,Ve,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=tre(t.source,e.groupby,Iu),i=e.smooth||!1,s=e.field,o=e.step||jFt(n,s),a=nw((p,m)=>s(p)-s(m)),u=e.as||Z$e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of O$e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function eMe(e){qi.call(this,null,UFt,e),this.modified(!0)}Ct(eMe,qi);function UFt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Sc(n=>t(n,e),_u(t),Ws(t))}function rre(e){Ve.call(this,[void 0,void 0],e)}rre.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Ct(rre,Ve,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=vu(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ws(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function ire(e,t){qi.call(this,e),this.parent=t,this.count=0}Ct(ire,qi,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function X8(e){Ve.call(this,{},e),this._keys=rC();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}Ct(X8,Ve,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=sn(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new ire(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=nn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(nn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=nn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(nn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=nn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function tMe(e){qi.call(this,null,zFt,e)}Ct(tMe,qi);function zFt(e){return this.value&&!e.modified()?this.value:Xe(e.name)?Nt(e.name).map(t=>ld(t)):ld(e.name,e.as)}function sre(e){Ve.call(this,rC(),e)}sre.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Ct(sre,Ve,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=nn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(nn(f),1)});function c(f){const d=nn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function ore(e){Ve.call(this,[],e)}ore.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Ct(ore,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=J$e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=kne(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function are(e){Ve.call(this,[],e)}are.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Ct(are,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ws),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=kne(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function ure(e){Ve.call(this,null,e)}ure.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Ct(ure,Ve,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function nMe(e){Ve.call(this,[],e)}Ct(nMe,Ve,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=hi(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const TO={value:"value",median:Vke,mean:mbt,min:lW,max:K0},VFt=[];function lre(e){Ve.call(this,[],e)}lre.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function HFt(e){var t=e.method||TO.value,n;if(TO[t]==null)Ye("Unrecognized imputation method: "+t);else return t===TO.value?(n=e.value!==void 0?e.value:0,()=>n):TO[t]}function qFt(e){const t=e.field;return n=>n?t(n):NaN}Ct(lre,Ve,{transform(e,t){var n=t.fork(t.ALL),r=HFt(e),i=qFt(e),s=Ws(e.field),o=Ws(e.key),a=(e.groupby||[]).map(Ws),u=WFt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,b,x,w,S;for(g=0,x=u.length;g<x;++g)for(d=u[g],p=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(m=u.domain[b],S={_impute:!0},y=0,w=p.length;y<w;++y)S[a[y]]=p[y];S[o]=m,S[s]=Number.isNaN(h)?h=r(d,i):h,l.push(hi(S))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function WFt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,b)=>a[y]=b+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):VFt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function cre(e){iv.call(this,e)}cre.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:DN},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Ct(cre,iv,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Wn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function fre(e){Ve.call(this,null,e)}fre.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Ct(fre,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=tre(r,e.groupby,e.field),s=(e.groupby||[]).map(Ws),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Ye("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=gm(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Lne(h,o)[a],m=e.counts?h.length:1,g=c||gm(h);K8(p,g,f,d).forEach(y=>{const b={};for(let x=0;x<s.length;++x)b[s[x]]=h.dims[x];b[u[0]]=y[0],b[u[1]]=y[1]*m,l.push(hi(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function rMe(e){qi.call(this,null,GFt,e)}Ct(rMe,qi);function GFt(e){return this.value&&!e.modified()?this.value:vne(e.fields,e.flat)}function iMe(e){Ve.call(this,[],e),this._pending=null}Ct(iMe,Ve,{transform(e,t){const n=t.dataflow;return this._pending?Qz(this,t,this._pending):YFt(e)?t.StopPropagation:e.values?Qz(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Nt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>Qz(this,t,Nt(r.data)))}});function YFt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function Qz(e,t,n){n.forEach(hi);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function dre(e){Ve.call(this,{},e)}dre.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Ct(dre,Ve,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Ye('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Ye('The "as" parameter has too few output field names.'),c=c||i.map(Ws),f=function(p){for(var m=0,g=0,y,b;m<a;++m)if(b=r.get(n[m](p)),b==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](b)}):(c||Ye("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function sMe(e){qi.call(this,null,KFt,e)}Ct(sMe,qi);function KFt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function oMe(e){qi.call(this,null,XFt,e)}Ct(oMe,qi);function XFt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function aMe(e){Ve.call(this,null,e)}Ct(aMe,Ve,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function hre(e){iv.call(this,e)}hre.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:DN,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Ct(hre,iv,{_transform:iv.prototype.transform,transform(e,t){return this._transform(QFt(e,t),t)}});function QFt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=_u(n).concat(_u(r)),o=ZFt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>JFt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function JFt(e,t,n,r){return Sc(i=>t(i)===e?n(i):NaN,r,e+"")}function ZFt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(L8),t?i.slice(0,t):i}function uMe(e){X8.call(this,e)}Ct(uMe,X8,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(nn(s),n,t,s);return(e.modified("field")||r&&t.modified(_u(r)))&&Ye("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(hi(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function pre(e){Ve.call(this,null,e)}pre.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Ct(pre,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=J$e(e.fields,e.as||[]),s=r?(a,u)=>e5t(a,u,r,i):z8;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=nn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,hi({}));o[nn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[nn(a)]))}),n}});function e5t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function lMe(e){Ve.call(this,null,e)}Ct(lMe,Ve,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function mre(e){Ve.call(this,null,e)}mre.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const t5t=1e-14;Ct(mre,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=tre(i,e.groupby,e.field),o=(e.groupby||[]).map(Ws),a=[],u=e.step||.01,l=e.probs||Kl(u/2,1-t5t,u),c=l.length;return s.forEach(f=>{const d=Nne(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(hi(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function cMe(e){Ve.call(this,null,e)}Ct(cMe,Ve,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=nn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=kne(i);r[nn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[nn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function gre(e){Ve.call(this,[],e),this.count=0}gre.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Ct(gre,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[nn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*dd()),d<o.length&&d>=u&&(f=o[d],s[nn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=nn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[nn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[nn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[nn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[nn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[nn(c)])),this.count=a,this.value=n.source=o,n}});function yre(e){Ve.call(this,null,e)}yre.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Ct(yre,Ve,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Kl(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,hi(s)}),n.add=t.add.concat(this.value),n}});function fMe(e){Ve.call(this,null,e),this.modified(!0)}Ct(fMe,Ve,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function vre(e){Ve.call(this,null,e)}const dMe=["unit0","unit1"];vre.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:wne,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:dMe}]};Ct(vre,Ve,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?sC:iC)(s.unit).offset,a=e.as||dMe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(_u(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:l$e({extent:e.extent||gm(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Ene(r),o=this.value||{},a=(n?e$e:Z6e)(s,i);return a.unit=$r(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function hMe(e){Ve.call(this,rC(),e)}Ct(hMe,Ve,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function pMe(e){Ve.call(this,null,e)}Ct(pMe,Ve,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(nw(e.sort)):t.source).map(e.field))}});function n5t(e,t,n,r){const i=XR[e](t,n);return{init:i.init||Hy,update:function(s,o){o[r]=i.next(s)}}}const XR={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=XR.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Ye("ntile num must be greater than zero.");const n=XR.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Ye("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=r5t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function r5t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const i5t=Object.keys(XR);function mMe(e){const t=Nt(e.ops),n=Nt(e.fields),r=Nt(e.params),i=Nt(e.aggregate_params),s=Nt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Nt(_u(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],b=i[m]||null,x=Ws(g),w=H$e(p,x,s[m]);if(h(g),o.push(w),sn(XR,p))a.push(n5t(p,g,y,w));else{if(g==null&&p!=="count"&&Ye("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let S=l[x];S||(S=l[x]=[],S.field=g,f.push(S)),S.push(q$e(p,b,w))}}),(c.length||f.length)&&(this.cell=s5t(f,c,d)),this.inputs=Object.keys(u)}const gMe=mMe.prototype;gMe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};gMe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function s5t(e,t,n){e=e.map(u=>G$e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Kne;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function bre(e){Ve.call(this,{},e),this._mlen=0,this._mods=[]}bre.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:i5t.concat(DN)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Ct(bre,Ve,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=nw(e.sort),i=iY(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new mMe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)o5t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=Y$e(nn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function o5t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?O2(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ku(-1)};t.init();for(let f=0;f<u;++f)a5t(c,o,f,u),s&&u5t(c,l),t.update(c,a[f])}function a5t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function u5t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const l5t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:iv,bin:Xne,collect:Qne,compare:K$e,countpattern:Jne,cross:Zne,density:ere,dotbin:nre,expression:eMe,extent:rre,facet:X8,field:tMe,filter:sre,flatten:ore,fold:are,formula:ure,generate:nMe,impute:lre,joinaggregate:cre,kde:fre,key:rMe,load:iMe,lookup:dre,multiextent:sMe,multivalues:oMe,params:aMe,pivot:hre,prefacet:uMe,project:pre,proxy:lMe,quantile:mre,relay:cMe,sample:gre,sequence:yre,sieve:fMe,subflow:ire,timeunit:vre,tupleindex:hMe,values:pMe,window:bre},Symbol.toStringTag,{value:"Module"}));function C1(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const c5t=()=>typeof Image<"u"?Image:null;function xre(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const f5t="identity",NT="linear",Ag="log",NN="pow",PN="sqrt",Q8="symlog",u_="time",l_="utc",Qp="sequential",aC="diverging",PT="quantile",J8="quantize",Z8="threshold",_re="ordinal",sY="point",yMe="band",wre="bin-ordinal",Go="continuous",ON="discrete",$N="discretizing",Sd="interpolating",Ere="temporal";function d5t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function h5t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Sre(){const e=jv().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=xre(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Kl(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,b,x;if(!(m!==m||g!==g)&&(g<m&&(x=m,m=g,g=x),!(g<h[0]||m>r[1-d])))return y=Math.max(0,U1(h,m)-1),b=m===g?y:U1(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(x=y,y=p-b,b=p-x),y>b?void 0:t().slice(y,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Sre().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function vMe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return vMe(t())},e}function p5t(){return vMe(Sre().paddingInner(1))}var m5t=Array.prototype.map;function g5t(e){return m5t.call(e,vu)}const y5t=Array.prototype.slice;function bMe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(U1(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=g5t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=y5t.call(r),n):t.slice()},n.tickFormat=function(r,i){return YDe(e[0],$r(e),r??10,i)},n.copy=function(){return bMe().domain(n.domain()).range(n.range())},n}const cL=new Map,xMe=Symbol("vega_scale");function _Me(e){return e[xMe]=!0,e}function v5t(e){return e&&e[xMe]===!0}function b5t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?d5t(s):s.invertExtent?h5t(s):void 0),s.type=e,_Me(s)};return r.metadata=Ph(Nt(n)),r}function ri(e,t,n){return arguments.length>1?(cL.set(e,b5t(e,t,n)),this):wMe(e)?cL.get(e):void 0}ri(f5t,KDe);ri(NT,fc,Go);ri(Ag,QDe,[Go,Ag]);ri(NN,iee,Go);ri(PN,z2t,Go);ri(Q8,JDe,Go);ri(u_,uee,[Go,Ere]);ri(l_,rAt,[Go,Ere]);ri(Qp,lee,[Go,Sd]);ri(`${Qp}-${NT}`,lee,[Go,Sd]);ri(`${Qp}-${Ag}`,fNe,[Go,Sd,Ag]);ri(`${Qp}-${NN}`,cee,[Go,Sd]);ri(`${Qp}-${PN}`,iAt,[Go,Sd]);ri(`${Qp}-${Q8}`,dNe,[Go,Sd]);ri(`${aC}-${NT}`,hNe,[Go,Sd]);ri(`${aC}-${Ag}`,pNe,[Go,Sd,Ag]);ri(`${aC}-${NN}`,fee,[Go,Sd]);ri(`${aC}-${PN}`,sAt,[Go,Sd]);ri(`${aC}-${Q8}`,mNe,[Go,Sd]);ri(PT,ZDe,[$N,PT]);ri(J8,eNe,$N);ri(Z8,tNe,$N);ri(wre,bMe,[ON,$N]);ri(_re,jv,ON);ri(yMe,Sre,ON);ri(sY,p5t,ON);function wMe(e){return cL.has(e)}function iw(e,t){const n=cL.get(e);return n&&n.metadata[t]}function Tre(e){return iw(e,Go)}function OT(e){return iw(e,ON)}function oY(e){return iw(e,$N)}function EMe(e){return iw(e,Ag)}function x5t(e){return iw(e,Ere)}function SMe(e){return iw(e,Sd)}function TMe(e){return iw(e,PT)}const _5t=["clamp","base","constant","exponent"];function CMe(e,t){const n=t[0],r=$r(t)-n;return function(i){return e(n+i*r)}}function eB(e,t,n){return LZ(Cre(t||"rgb",n),e)}function AMe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function IMe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?ku(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=ri(s)().domain([t,n]).range([0,1]),_5t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Cre(e,t){const n=B_t[w5t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function w5t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const E5t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},S5t={accent:aAt,category10:oAt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:uAt,observable10:lAt,paired:cAt,pastel1:fAt,pastel2:dAt,set1:hAt,set2:pAt,set3:mAt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function kMe(e){if(Xe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function RMe(e,t){for(const n in e)Are(n,t(e[n]))}const o1e={};RMe(S5t,kMe);RMe(E5t,e=>eB(kMe(e)));function Are(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(o1e[e]=t,this):o1e[e]}const i6="symbol",T5t="discrete",C5t="gradient",A5t=e=>Xe(e)?e.map(t=>String(t)):String(e),I5t=(e,t)=>e[1]-t[1],k5t=(e,t)=>t[1]-e[1];function Ire(e,t,n){let r;return Kr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(IN(e.domain())/n||1)+1))),Ot(t)&&(r=t.step,t=t.interval),Pt(t)&&(t=e.type===u_?iC(t):e.type==l_?sC(t):Ye("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function DMe(e,t,n){let r=e.range(),i=r[0],s=$r(r),o=I5t;if(i>s&&(r=s,s=i,i=r,o=k5t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],$r(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function kre(e,t){return e.bins?DMe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function NMe(e,t,n,r,i,s){const o=t.type;let a=A5t;if(o===u_||i===u_)a=e.timeFormat(r);else if(o===l_||i===l_)a=e.utcFormat(r);else if(EMe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=PMe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function PMe(e,t,n){const r=kre(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const aY={[PT]:"quantiles",[J8]:"thresholds",[Z8]:"domain"},OMe={[PT]:"quantiles",[J8]:"domain"};function $Me(e,t){return e.bins?N5t(e.bins):e.type===Ag?PMe(e,t,!0):aY[e.type]?D5t(e[aY[e.type]]()):kre(e,t)}function R5t(e,t,n){const r=t[OMe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function D5t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function N5t(e){const t=e.slice(0,-1);return t.max=$r(e),t}const P5t=e=>aY[e.type]||e.bins;function MMe(e,t,n,r,i,s,o){const a=OMe[t.type]&&s!==u_&&s!==l_?R5t(e,t,i):NMe(e,t,n,i,s,o);return r===i6&&P5t(t)?O5t(a):r===T5t?$5t(a):M5t(a)}const O5t=e=>(t,n,r)=>{const i=a1e(r[n+1],a1e(r.max,1/0)),s=u1e(t,e),o=u1e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},a1e=(e,t)=>e??t,$5t=e=>(t,n)=>n?e(t):null,M5t=e=>t=>e(t),u1e=(e,t)=>Number.isFinite(e)?t(e):null;function L5t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+$r(t),s=i-r;if(e.type===Z8){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function F5t(e,t,n,r){const i=r||t.type;return Pt(n)&&x5t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===u_?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===l_?e.utcFormat("%A, %d %B %Y, %X UTC"):MMe(e,t,5,null,n,r,!0)}function LMe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=F5t(e,t,n.format,n.formatType);if(oY(t.type)){const s=$Me(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(OT(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i($r(s))}`}}let FMe=0;function B5t(){FMe=0}const fL="p_";function Rre(e){return e&&e.gradient}function BMe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?fL:"";return i||(i=e.id="gradient_"+FMe++,r==="radial"?(e.x1=ap(e.x1,.5),e.y1=ap(e.y1,.5),e.r1=ap(e.r1,0),e.x2=ap(e.x2,.5),e.y2=ap(e.y2,.5),e.r2=ap(e.r2,.5),s=fL):(e.x1=ap(e.x1,0),e.y1=ap(e.y1,0),e.x2=ap(e.x2,1),e.y2=ap(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function ap(e,t){return e??t}function jMe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const l1e={basis:{curve:kAt},"basis-closed":{curve:RAt},"basis-open":{curve:DAt},bundle:{curve:NAt,tension:"beta",value:.85},cardinal:{curve:PAt,tension:"tension",value:0},"cardinal-open":{curve:$At,tension:"tension",value:0},"cardinal-closed":{curve:OAt,tension:"tension",value:0},"catmull-rom":{curve:MAt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:LAt,tension:"alpha",value:.5},"catmull-rom-open":{curve:FAt,tension:"alpha",value:.5},linear:{curve:dee},"linear-closed":{curve:BAt},monotone:{horizontal:UAt,vertical:jAt},natural:{curve:zAt},step:{curve:VAt},"step-after":{curve:qAt},"step-before":{curve:HAt}};function Dre(e,t,n){var r=sn(l1e,e)&&l1e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const j5t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},U5t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,z5t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,V5t=/^((\s+,?\s*)|(,\s*))/,H5t=/^[01]/;function $T(e){const t=[];return(e.match(U5t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=j5t[s],a=q5t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function q5t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?H5t:z5t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(V5t);u!==null&&(i+=u[0].length)}return r}const sv=Math.PI/180,W5t=1e-14,tx=Math.PI/2,Pp=Math.PI*2,rE=Math.sqrt(3)/2;var Jz={},Zz={},UMe=[].join;function G5t(e,t,n,r,i,s,o,a,u){const l=UMe.call(arguments);if(Jz[l])return Jz[l];const c=o*sv,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,b=-f/r,x=d/r,w=g*a+y*u,S=b*a+x*u,T=g*e+y*t,C=b*e+x*t;let D=1/((T-w)*(T-w)+(C-S)*(C-S))-.25;D<0&&(D=0);let k=Math.sqrt(D);s==i&&(k=-k);const P=.5*(w+T)-k*(C-S),M=.5*(S+C)+k*(T-w),$=Math.atan2(S-M,w-P);let q=Math.atan2(C-M,T-P)-$;q<0&&s===1?q+=Pp:q>0&&s===0&&(q-=Pp);const H=Math.ceil(Math.abs(q/(tx+.001))),Y=[];for(let K=0;K<H;++K){const Q=$+K*q/H,L=$+(K+1)*q/H;Y[K]=[P,M,Q,L,n,r,f,d]}return Jz[l]=Y}function Y5t(e){const t=UMe.call(e);if(Zz[t])return Zz[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),b=.5*(s-i),x=Math.sin(b*.5),w=8/3*x*x/Math.sin(b),S=n+p-w*m,T=r+m+w*p,C=n+g,I=r+y,D=C+w*y,k=I-w*g;return Zz[t]=[c*S+f*T,d*S+h*T,c*D+f*k,d*D+h*k,c*C+f*I,d*C+h*I]}const Mf=["l",0,0,0,0,0,0,0];function K5t(e,t,n){const r=Mf[0]=e[0];if(r==="a"||r==="A")Mf[1]=t*e[1],Mf[2]=n*e[2],Mf[3]=e[3],Mf[4]=e[4],Mf[5]=e[5],Mf[6]=t*e[6],Mf[7]=n*e[7];else if(r==="h"||r==="H")Mf[1]=t*e[1];else if(r==="v"||r==="V")Mf[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Mf[i]=(i%2==1?t:n)*e[i];return Mf}function QR(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var b=0,x=t.length;b<x;++b){switch(o=t[b],(i!==1||s!==1)&&(o=K5t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":c1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":c1e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function c1e(e,t,n,r){const i=G5t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Y5t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const f1e=.5773502691896257,d1e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Pp)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n,i=r-n*f1e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n,i=r-n*f1e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=rE*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function zMe(e){return sn(d1e,e)?d1e[e]:X5t(e)}var eV={};function X5t(e){if(!sn(eV,e)){const t=$T(e);eV[e]={draw:function(n,r){QR(n,t,0,0,Math.sqrt(r)/2)}}}return eV[e]}const vy=.448084975506;function Q5t(e){return e.x}function J5t(e){return e.y}function Z5t(e){return e.width}function e8t(e){return e.height}function u0(e){return typeof e=="function"?e:()=>+e}function CO(e,t,n){return Math.max(t,Math.min(e,n))}function VMe(){var e=Q5t,t=J5t,n=Z5t,r=e8t,i=u0(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),b=Math.min(g,y)/2,x=CO(+i.call(this,c),0,b),w=CO(+s.call(this,c),0,b),S=CO(+o.call(this,c),0,b),T=CO(+a.call(this,c),0,b);if(u||(u=h=q5()),x<=0&&w<=0&&S<=0&&T<=0)u.rect(p,m,g,y);else{var C=p+g,I=m+y;u.moveTo(p+x,m),u.lineTo(C-w,m),u.bezierCurveTo(C-vy*w,m,C,m+vy*w,C,m+w),u.lineTo(C,I-T),u.bezierCurveTo(C,I-vy*T,C-vy*T,I,C-T,I),u.lineTo(p+S,I),u.bezierCurveTo(p+vy*S,I,p,I-vy*S,p,I-S),u.lineTo(p,m+x),u.bezierCurveTo(p,m+vy*x,p+vy*x,m,p+x,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=u0(c),l):e},l.y=function(c){return arguments.length?(t=u0(c),l):t},l.width=function(c){return arguments.length?(n=u0(c),l):n},l.height=function(c){return arguments.length?(r=u0(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=u0(c),s=f!=null?u0(f):i,a=d!=null?u0(d):i,o=h!=null?u0(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function HMe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),b=(m/=y)*u,x=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-b,a-x),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+b,a+x),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Pp);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=q5()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function MN(e,t){return e??t}const LN=e=>e.x||0,FN=e=>e.y||0,t8t=e=>e.width||0,n8t=e=>e.height||0,r8t=e=>(e.x||0)+(e.width||0),i8t=e=>(e.y||0)+(e.height||0),s8t=e=>e.startAngle||0,o8t=e=>e.endAngle||0,a8t=e=>e.padAngle||0,u8t=e=>e.innerRadius||0,l8t=e=>e.outerRadius||0,c8t=e=>e.cornerRadius||0,f8t=e=>MN(e.cornerRadiusTopLeft,e.cornerRadius)||0,d8t=e=>MN(e.cornerRadiusTopRight,e.cornerRadius)||0,h8t=e=>MN(e.cornerRadiusBottomRight,e.cornerRadius)||0,p8t=e=>MN(e.cornerRadiusBottomLeft,e.cornerRadius)||0,m8t=e=>MN(e.size,64),g8t=e=>e.size||1,tB=e=>e.defined!==!1,y8t=e=>zMe(e.shape||"circle"),v8t=XW().startAngle(s8t).endAngle(o8t).padAngle(a8t).innerRadius(u8t).outerRadius(l8t).cornerRadius(c8t),b8t=xNe().x(LN).y1(FN).y0(i8t).defined(tB),x8t=xNe().y(FN).x1(LN).x0(r8t).defined(tB),_8t=bNe().x(LN).y(FN).defined(tB),w8t=VMe().x(LN).y(FN).width(t8t).height(n8t).cornerRadius(f8t,d8t,h8t,p8t),E8t=IAt().type(y8t).size(m8t),S8t=HMe().x(LN).y(FN).defined(tB).size(g8t);function Nre(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function T8t(e,t){return v8t.context(e)(t)}function C8t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?x8t:b8t).curve(Dre(r,n.orient,n.tension)).context(e)(t)}function A8t(e,t){const n=t[0],r=n.interpolate||"linear";return _8t.curve(Dre(r,n.orient,n.tension)).context(e)(t)}function uC(e,t,n,r){return w8t.context(e)(t,n,r)}function I8t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function k8t(e,t){return E8t.context(e)(t)}function R8t(e,t){return S8t.context(e)(t)}var qMe=1;function WMe(){qMe=1}function Pre(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+qMe++),o=i.clipping[s]||(i.clipping[s]={id:s});return Gn(r)?o.path=r(null):Nre(n)?o.path=uC(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Eo(e){this.clear(),e&&this.union(e)}Eo.prototype={clone(){return new Eo(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function nB(e){this.mark=e,this.bounds=this.bounds||new Eo}function rB(e){nB.call(this,e),this.items=this.items||[]}Ct(rB,nB);class GMe{constructor(t){this._pending=0,this._loader=t||B8()}pending(){return this._pending}sanitizeURL(t){const n=this;return h1e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(AA(n),r)).catch(()=>(AA(n),null))}loadImage(t){const n=this,r=c5t();return h1e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=sn(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>AA(n),o.onerror=()=>AA(n),o.src=s,o}).catch(i=>(AA(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function h1e(e){e._pending+=1}function AA(e){e._pending-=1}function Kg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?D8t(t,r):0))}return e}function D8t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const N8t=Pp-1e-8;let iB,s6,o6,Tx,uY,a6,lY,cY;const e1=(e,t)=>iB.add(e,t),u6=(e,t)=>e1(s6=e,o6=t),p1e=e=>e1(e,iB.y1),m1e=e=>e1(iB.x1,e),nx=(e,t)=>uY*e+lY*t,rx=(e,t)=>a6*e+cY*t,tV=(e,t)=>e1(nx(e,t),rx(e,t)),nV=(e,t)=>u6(nx(e,t),rx(e,t));function BN(e,t){return iB=e,t?(Tx=t*sv,uY=cY=Math.cos(Tx),a6=Math.sin(Tx),lY=-a6):(uY=cY=1,Tx=a6=lY=0),P8t}const P8t={beginPath(){},closePath(){},moveTo:nV,lineTo:nV,rect(e,t,n,r){Tx?(tV(e+n,t),tV(e+n,t+r),tV(e,t+r),nV(e,t)):(e1(e+n,t+r),u6(e,t))},quadraticCurveTo(e,t,n,r){const i=nx(e,t),s=rx(e,t),o=nx(n,r),a=rx(n,r);g1e(s6,i,o,p1e),g1e(o6,s,a,m1e),u6(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=nx(e,t),a=rx(e,t),u=nx(n,r),l=rx(n,r),c=nx(i,s),f=rx(i,s);y1e(s6,o,u,c,p1e),y1e(o6,a,l,f,m1e),u6(c,f)},arc(e,t,n,r,i,s){if(r+=Tx,i+=Tx,s6=n*Math.cos(i)+e,o6=n*Math.sin(i)+t,Math.abs(i-r)>N8t)e1(e-n,t-n),e1(e+n,t+n);else{const o=l=>e1(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Pp,r<0&&(r+=Pp),i=i%Pp,i<0&&(i+=Pp),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Pp,a=r-r%tx,u=0;u<4&&a>i;++u,a-=tx)o(a);else for(a=r-r%tx+tx,u=0;u<4&&a<i;++u,a=a+tx)o(a)}}};function g1e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function y1e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>W5t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(v1e(u,e,t,n,r)),0<l&&l<1&&i(v1e(l,e,t,n,r))}function v1e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var A1=(A1=C1(1,1))?A1.getContext("2d"):null;const fY=new Eo;function Ore(e){return function(t,n){if(!A1)return!0;e(A1,t),fY.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=fY;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(A1.isPointInPath(u,a))return!0;return!1}}function $re(e,t){return t.contains(e.x||0,e.y||0)}function YMe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(fY.set(n,r,n+i,r+s))}function KMe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return ZE(t,n,r,i,s)}function ZE(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function MT(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Vd(e,t){return e??t}function b1e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function O8t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Vd(t.x1,.5)*r,n.y1+Vd(t.y1,.5)*i,Math.max(r,i)*Vd(t.r1,0),n.x1+Vd(t.x2,.5)*r,n.y1+Vd(t.y2,.5)*i,Math.max(r,i)*Vd(t.r2,.5));else{const o=Vd(t.x1,0),a=Vd(t.y1,0),u=Vd(t.x2,1),l=Vd(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=C1(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=b1e(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return b1e(s,t.stops)}function XMe(e,t,n){return Rre(n)?O8t(e,n,t.bounds):n}function dL(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=XMe(e,t,t.fill),!0):!1}var $8t=[];function LT(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=XMe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||$8t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function M8t(e,t){return e.zindex-t.zindex||e.index-t.index}function Mre(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(M8t)}function $h(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Mre(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function hL(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Mre(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Lre(e){return function(t,n,r){$h(n,i=>{(!r||r.intersects(i.bounds))&&QMe(e,t,i,i)})}}function L8t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&QMe(e,t,n.items[0],n.items)}}function QMe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(MT(t,n),n.fill&&dL(t,n,i)&&t.fill(),n.stroke&&LT(t,n,i)&&t.stroke()))}function sB(e){return e=e||cd,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,hL(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function jN(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Fre(e){return sB(jN(e))}function Mx(e,t){return"translate("+e+","+t+")"}function Bre(e){return"rotate("+e+")"}function F8t(e,t){return"scale("+e+","+t+")"}function JMe(e){return Mx(e.x||0,e.y||0)}function B8t(e){return Mx(e.x||0,e.y||0)+(e.angle?" "+Bre(e.angle):"")}function j8t(e){return Mx(e.x||0,e.y||0)+(e.angle?" "+Bre(e.angle):"")+(e.scaleX||e.scaleY?" "+F8t(e.scaleX||1,e.scaleY||1):"")}function jre(e,t,n){function r(o,a){o("transform",B8t(a)),o("d",t(null,a))}function i(o,a){return t(BN(o,a.angle),a),Kg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=sv),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Lre(s),pick:Fre(s),isect:n||Ore(s)}}var U8t=jre("arc",T8t);function z8t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function V8t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function H8t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Ure(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(BN(u),c),Kg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=jN(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:L8t(s),pick:a,isect:$re,tip:n}}var q8t=Ure("area",C8t,z8t);function W8t(e,t){var n=t.clip;e.save(),Gn(n)?(e.beginPath(),n(e),e.clip()):ZMe(e,t.group)}function ZMe(e,t){e.beginPath(),Nre(t)?uC(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function eLe(e){const t=Vd(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function G8t(e,t){e("transform",JMe(t))}function tLe(e,t){const n=eLe(t);e("d",uC(null,t,n,n))}function Y8t(e,t){e("class","background"),e("aria-hidden",!0),tLe(e,t)}function K8t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?tLe(e,t):e("d","")}function X8t(e,t,n){const r=t.clip?Pre(n,t,t):null;e("clip-path",r)}function Q8t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Kg(e,t),e.translate(t.x||0,t.y||0)}function JR(e,t,n,r){const i=eLe(t);e.beginPath(),uC(e,t,(n||0)+i,(r||0)+i)}const J8t=jN(JR),Z8t=jN(JR,!1),eBt=jN(JR,!0);function tBt(e,t,n,r){$h(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(JR(e,i,s,o),MT(e,i),i.fill&&dL(e,i,u)&&e.fill(),i.stroke&&!a&&LT(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&ZMe(e,i),n&&n.translate(-s,-o),$h(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(JR(e,i,s,o),MT(e,i),LT(e,i,u)&&e.stroke())})}function nBt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return hL(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Nre(u)&&!eBt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&Z8t(e,u,o,a)?(e.restore(),u):(l=hL(u,b=>rBt(b,c,f)?this.pick(b,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&J8t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function rBt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var iBt={type:"group",tag:"g",nested:!1,attr:G8t,bound:Q8t,draw:tBt,pick:nBt,isect:YMe,content:X8t,background:Y8t,foreground:K8t},ZR={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function zre(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Vre(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Hre(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function oB(e,t){return e==="center"?t/2:e==="right"?t:0}function aB(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function sBt(e,t,n){const r=zre(t,n),i=Vre(t,r),s=Hre(t,r),o=(t.x||0)-oB(t.align,i),a=(t.y||0)-aB(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,ZR["xmlns:xlink"],"xlink:href"),e("transform",Mx(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function oBt(e,t){const n=t.image,r=Vre(t,n),i=Hre(t,n),s=(t.x||0)-oB(t.align,r),o=(t.y||0)-aB(t.baseline,i);return e.set(s,o,s+r,o+i)}function aBt(e,t,n){$h(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=zre(r,this);let s=Vre(r,i),o=Hre(r,i);if(s===0||o===0)return;let a=(r.x||0)-oB(r.align,s),u=(r.y||0)-aB(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(MT(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var uBt={type:"image",tag:"image",nested:!1,attr:sBt,bound:oBt,draw:aBt,pick:sB(),isect:cd,get:zre,xOffset:oB,yOffset:aB},lBt=Ure("line",A8t,V8t);function cBt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",j8t(t)),e("d",t.path)}function l6(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*sv,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=$T(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),QR(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):QR(e,u,r,i,s,o)}function fBt(e,t){return l6(BN(e,t.angle),t)?e.set(0,0,0,0):Kg(e,t,!0)}var dBt={type:"path",tag:"path",nested:!1,attr:cBt,bound:fBt,draw:Lre(l6),pick:Fre(l6),isect:Ore(l6)};function hBt(e,t){e("d",uC(null,t))}function pBt(e,t){var n,r;return Kg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function x1e(e,t){e.beginPath(),uC(e,t)}var mBt={type:"rect",tag:"path",nested:!1,attr:hBt,bound:pBt,draw:Lre(x1e),pick:Fre(x1e),isect:YMe};function gBt(e,t){e("transform",JMe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function yBt(e,t){var n,r;return Kg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function nLe(e,t,n){var r,i,s,o;return t.stroke&&LT(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function vBt(e,t,n){$h(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&nLe(e,r,i)&&(MT(e,r),e.stroke())}})}function bBt(e,t,n,r){return e.isPointInStroke?nLe(e,t,1)&&e.isPointInStroke(n,r):!1}var xBt={type:"rule",tag:"line",nested:!1,attr:gBt,bound:yBt,draw:vBt,pick:sB(bBt),isect:KMe},_Bt=jre("shape",I8t),wBt=jre("symbol",k8t,$re);const _1e=j6e();var ef={height:$m,measureWidth:qre,estimateWidth:pL,width:pL,canvas:rLe};rLe(!0);function rLe(e){ef.width=e&&A1?qre:pL}function pL(e,t){return iLe(av(e,t),$m(e))}function iLe(e,t){return~~(.8*e.length*t)}function qre(e,t){return $m(e)<=0||!(t=av(e,t))?0:sLe(t,uB(e))}function sLe(e,t){const n=`(${t}) ${e}`;let r=_1e.get(n);return r===void 0&&(A1.font=t,r=A1.measureText(e).width,_1e.set(n,r)),r}function $m(e){return e.fontSize!=null?+e.fontSize||0:11}function ov(e){return e.lineHeight!=null?e.lineHeight:$m(e)+2}function EBt(e){return Xe(e)?e.length>1?e:e[0]:e}function UN(e){return EBt(e.lineBreak&&e.text&&!Xe(e.text)?e.text.split(e.lineBreak):e.text)}function Wre(e){const t=UN(e);return(Xe(t)?t.length-1:0)*ov(e)}function av(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?TBt(e,n):n}function SBt(e){if(ef.width===qre){const t=uB(e);return n=>sLe(n,t)}else if(ef.width===pL){const t=$m(e);return n=>iLe(n,t)}else return t=>ef.width(e,t)}function TBt(e,t){var n=+e.limit,r=SBt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function zN(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function uB(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+$m(e)+"px "+zN(e,t)}function Gre(e){var t=e.baseline,n=$m(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*ov(e):t==="line-bottom"?.29*n-.5*ov(e):0)}const CBt={left:"start",center:"middle",right:"end"},yk=new Eo;function lB(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-tx,t+=r*Math.cos(i),n+=r*Math.sin(i)),yk.x1=t,yk.y1=n,yk}function ABt(e,t){var n=t.dx||0,r=(t.dy||0)+Gre(t),i=lB(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",CBt[t.align]||"start"),a?(u=Mx(s,o)+" "+Bre(a),(n||r)&&(u+=" "+Mx(n,r))):u=Mx(s+n,o+r),e("transform",u)}function Yre(e,t,n){var r=ef.height(t),i=t.align,s=lB(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Gre(t)-Math.round(.8*r),c=UN(t),f;if(Xe(c)?(r+=ov(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,ef.width(t,h)),0)):f=ef.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*sv,o,a);else if(n===2)return e.rotatedPoints(t.angle*sv,o,a);return e}function IBt(e,t,n){$h(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=uB(r),e.textAlign=r.align||"left",s=lB(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*sv),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Gre(r),c=UN(r),MT(e,r),Xe(c))for(l=ov(r),u=0;u<c.length;++u)f=av(r,c[u]),r.fill&&dL(e,r,i)&&e.fillText(f,o,a),r.stroke&&LT(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=av(r,c),r.fill&&dL(e,r,i)&&e.fillText(f,o,a),r.stroke&&LT(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function kBt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=lB(t),a=o.x1,u=o.y1,l=Yre(yk,t,1),c=-t.angle*sv,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function RBt(e,t){const n=Yre(yk,e,2);return ZE(t,n[0],n[1],n[2],n[3])||ZE(t,n[0],n[1],n[4],n[5])||ZE(t,n[4],n[5],n[6],n[7])||ZE(t,n[2],n[3],n[6],n[7])}var DBt={type:"text",tag:"text",nested:!1,attr:ABt,bound:Yre,draw:IBt,pick:sB(kBt),isect:RBt},NBt=Ure("trail",R8t,H8t),yf={arc:U8t,area:q8t,group:iBt,image:uBt,line:lBt,path:dBt,rect:mBt,rule:xBt,shape:_Bt,symbol:wBt,text:DBt,trail:NBt};function dY(e,t,n){var r=yf[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Eo),e,n)}var w1e={mark:null};function oLe(e,t,n){var r=yf[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(w1e.mark=e,l=w1e),c=dY(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Eo,o)for(a=0,u=s.length;a<u;++a)t.union(dY(s[a],i,n));return e.bounds=t}const PBt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function aLe(e,t){return JSON.stringify(e,PBt,t)}function uLe(e){const t=typeof e=="string"?JSON.parse(e):e;return lLe(t)}function lLe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&lLe(n[i]);return t&&oLe(e),e}class cLe{constructor(t){arguments.length?this.root=uLe(t):(this.root=E1e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new rB(this.root)])}toJSON(t){return aLe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=E1e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function E1e(e,t){const n={bounds:new Eo,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function t1(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Kre(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Lo(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=t1(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Gf(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function fLe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function cB(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function OBt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=yf[i.marktype]).tip){for(o=cB(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Xre=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||B8(),this._tooltip=n||$Bt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=t1(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=OBt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function $Bt(e,t,n,r){e.element().setAttribute("title",r||"")}class VN{constructor(t){this._el=null,this._bgcolor=null,this._loader=new GMe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const MBt="keydown",LBt="keypress",FBt="keyup",dLe="dragenter",c6="dragleave",hLe="dragover",hY="pointerdown",BBt="pointerup",mL="pointermove",f6="pointerout",pLe="pointerover",pY="mousedown",jBt="mouseup",mLe="mousemove",gL="mouseout",gLe="mouseover",yL="click",UBt="dblclick",zBt="wheel",yLe="mousewheel",vL="touchstart",bL="touchmove",xL="touchend",VBt=[MBt,LBt,FBt,dLe,c6,hLe,hY,BBt,mL,f6,pLe,pY,jBt,mLe,gL,gLe,yL,UBt,zBt,yLe,vL,bL,xL],mY=mL,vk=gL,gY=yL;class HN extends Xre{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=VBt,this.pointermove=T1e([mL,mLe],[pLe,gLe],[f6,gL]),this.dragover=T1e([hLe],[dLe],[c6]),this.pointerout=C1e([f6,gL]),this.dragleave=C1e([c6])}initialize(t,n,r){return this._canvas=t&&Kre(t,"canvas"),[yL,pY,hY,mL,f6,c6].forEach(i=>S1e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(yLe,t)}pointerdown(t){this._down=this._active,this.fire(hY,t)}mousedown(t){this._down=this._active,this.fire(pY,t)}click(t){this._down===this._active&&(this.fire(yL,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(vL,t,!0)}touchmove(t){this.fire(bL,t,!0)}touchend(t){this.fire(xL,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===gY&&i&&i.href?this.handleHref(n,i,i.href):(t===mY||t===vk)&&this.handleTooltip(n,i,t!==vk),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(S1e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=cB(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return yf[t.marktype].pick.call(this,o,t,n,r,i,s)}}const HBt=e=>e===vL||e===bL||e===xL?[vL,bL,xL]:[e];function S1e(e,t){HBt(t).forEach(n=>qBt(e,n))}function qBt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function II(e,t,n){t.forEach(r=>e.fire(r,n))}function T1e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?II(this,e,r):((!i||!i.exit)&&II(this,n,r),this._active=s,II(this,t,r),II(this,e,r))}}function C1e(e){return function(t){II(this,e,t),this._active=null}}function WBt(){return typeof window<"u"&&window.devicePixelRatio||1}function GBt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?WBt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class _L extends VN{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Eo,this._tempb=new Eo}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:C1(1,1,this._options.type),t&&this._canvas&&(Gf(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)GBt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Ye("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=YBt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):KBt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=yf[n.marktype];n.clip&&W8t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const YBt=(e,t,n)=>new Eo().set(0,0,t,n).translate(-e[0],-e[1]);function KBt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class vLe extends Xre{constructor(t,n){super(t,n);const r=this;r._hrefHandler=rV(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=rV(r,(i,s)=>{r.handleTooltip(i,s,i.type!==vk)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(gY,this._hrefHandler),i.removeEventListener(mY,this._tooltipHandler),i.removeEventListener(vk,this._tooltipHandler)),this._svg=i=t&&Kre(t,"svg"),i&&(i.addEventListener(gY,this._hrefHandler),i.addEventListener(mY,this._tooltipHandler),i.addEventListener(vk,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:rV(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const rV=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},bLe="aria-hidden",Qre="aria-label",Jre="role",Zre="aria-roledescription",xLe="graphics-object",eie="graphics-symbol",_Le=(e,t,n)=>({[Jre]:e,[Zre]:t,[Qre]:n||void 0}),XBt=Ph(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),A1e={axis:{desc:"axis",caption:ZBt},legend:{desc:"legend",caption:e9t},"title-text":{desc:"title",caption:e=>`Title text '${k1e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${k1e(e)}'`}},I1e={ariaRole:Jre,ariaRoleDescription:Zre,description:Qre};function wLe(e,t){const n=t.aria===!1;if(e(bLe,n||void 0),n||t.description==null)for(const r in I1e)e(I1e[r],void 0);else{const r=t.mark.marktype;e(Qre,t.description),e(Jre,t.ariaRole||(r==="group"?xLe:eie)),e(Zre,t.ariaRoleDescription||`${r} mark`)}}function ELe(e){return e.aria===!1?{[bLe]:!0}:XBt[e.role]?null:A1e[e.role]?JBt(e,A1e[e.role]):QBt(e)}function QBt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return _Le(n?xLe:eie,`${t} mark container`,e.description)}function JBt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return _Le(t.role||eie,t.desc,n.description||r(n))}catch{return null}}function k1e(e){return Nt(e.text).join(" ")}function ZBt(e){const t=e.datum,n=e.orient,r=t.title?SLe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${OT(a)?"discrete":a} scale with ${LMe(o,s,e)}`}function e9t(e){const t=e.datum,n=t.title?SLe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return n9t(r)+(n?` titled '${n}'`:"")+` for ${t9t(s)} with ${LMe(u,a,e)}`}function SLe(e){try{return Nt($r(e.items).items[0].text).join(" ")}catch{return null}}function t9t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+$r(e)}function n9t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const TLe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r9t=e=>TLe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function tie(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${r9t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=TLe(u),a),toString:()=>e};return a}const CLe=e=>ALe(tie(),e)+"";function ALe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):ALe(e,r)}return e.close()}const wL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},EL={blend:"mix-blend-mode"},ILe={fill:"none","stroke-miterlimit":10},IA=0,R1e="http://www.w3.org/2000/xmlns/",$o=ZR.xmlns;class nie extends VN{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Lo(t,0,"svg",$o),this._svg.setAttributeNS(R1e,"xmlns",$o),this._svg.setAttributeNS(R1e,"xmlns:xlink",ZR["xmlns:xlink"]),this._svg.setAttribute("version",ZR.version),this._svg.setAttribute("class","marks"),Gf(t,1),this._root=Lo(this._svg,IA,"g",$o),n1(this._root,ILe),Gf(this._svg,IA+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(n1(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Lo(t,IA,"rect",$o),n1(r,{width:this._width,height:this._height,fill:n}));const i=CLe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Gf(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=yf[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,D1e(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,D1e(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=yf[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=N1e(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Gf(c,0),n._svg;c.setAttribute("class",fLe(n));const f=ELe(n);for(const m in f)qu(c,m,f[m]);l||qu(c,"pointer-events",u),qu(c,"clip-path",n.clip?Pre(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=N1e(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&o9t(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):$h(n,p),Gf(c,h),c}_update(t,n,r){B0=n,cu=n.__values__,wLe(bk,r),t.attr(bk,r,this);const i=u9t[t.type];i&&i.call(this,t,n,r),B0&&this.style(B0,r)}style(t,n){if(n!=null){for(const r in wL){let i=r==="font"?zN(n):n[r];if(i===cu[r])continue;const s=wL[r];i==null?t.removeAttribute(s):(Rre(i)&&(i=BMe(i,this._defs.gradient,kLe())),t.setAttribute(s,i+"")),cu[r]=i}for(const r in EL)d6(t,EL[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Lo(t,IA+1,"defs",$o)),i=i9t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Lo(t,IA+1,"defs",$o)),i=s9t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Gf(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function D1e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function i9t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Lo(e,n++,"pattern",$o);n1(o,{id:fL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Lo(o,0,"rect",$o),n1(o,{width:1,height:1,fill:`url(${kLe()}#${t.id})`}),e=Lo(e,n++,"radialGradient",$o),n1(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Lo(e,n++,"linearGradient",$o),n1(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Lo(e,r,"stop",$o),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Gf(e,r),n}function s9t(e,t,n){let r;return e=Lo(e,n,"clipPath",$o),e.setAttribute("id",t.id),t.path?(r=Lo(e,0,"path",$o),r.setAttribute("d",t.path)):(r=Lo(e,0,"rect",$o),n1(r,{x:0,y:0,width:t.width,height:t.height})),Gf(e,1),n+1}function o9t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;$h(n,o=>{i=e.mark(t,o,i,r),++s}),Gf(t,1+s)}function N1e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=t1(o,r,$o),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=t1(o,"path",$o);s.appendChild(a),a.__data__=e;const u=t1(o,"g",$o);s.appendChild(u),u.__data__=e;const l=t1(o,"path",$o);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||a9t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function a9t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let B0=null,cu=null;const u9t={group(e,t,n){const r=B0=t.childNodes[2];cu=r.__values__,e.foreground(bk,n,this),cu=t.__values__,B0=t.childNodes[1],e.content(bk,n,this);const i=B0=t.childNodes[0];e.background(bk,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==cu.events&&(qu(r,"pointer-events",s),qu(i,"pointer-events",s),cu.events=s),n.strokeForeground&&n.stroke){const o=n.fill;qu(r,"display",null),this.style(i,n),qu(i,"stroke",null),o&&(n.fill=null),cu=r.__values__,this.style(r,n),o&&(n.fill=o),B0=null}else qu(r,"display","none")},image(e,t,n){n.smooth===!1?(d6(t,"image-rendering","optimizeSpeed"),d6(t,"image-rendering","pixelated")):d6(t,"image-rendering",null)},text(e,t,n){const r=UN(n);let i,s,o,a;Xe(r)?(s=r.map(u=>av(n,u)),i=s.join(`
`),i!==cu.text&&(Gf(t,0),o=t.ownerDocument,a=ov(n),s.forEach((u,l)=>{const c=t1(o,"tspan",$o);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),cu.text=i)):(s=av(n,r),s!==cu.text&&(t.textContent=s,cu.text=s)),qu(t,"font-family",zN(n)),qu(t,"font-size",$m(n)+"px"),qu(t,"font-style",n.fontStyle),qu(t,"font-variant",n.fontVariant),qu(t,"font-weight",n.fontWeight)}};function bk(e,t,n){t!==cu[e]&&(n?l9t(B0,e,t,n):qu(B0,e,t),cu[e]=t)}function d6(e,t,n){n!==cu[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),cu[t]=n)}function n1(e,t){for(const n in t)qu(e,n,t[n])}function qu(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function l9t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function kLe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class RLe extends VN{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=tie();n.open("svg",Wn({},ZR,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",ILe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=yf[n.marktype],i=r.tag,s=[wLe,r.attr];t.open("g",{class:fLe(n),"clip-path":n.clip?Pre(this,n,n.group):null},ELe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=UN(a);if(Xe(l)){const c={x:0,dy:ov(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(av(a,l[f])).close()}else t.text(av(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),$h(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):$h(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&c9t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:fL+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function c9t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=zN(t),e["font-size"]=$m(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in wL){let a=t[o];const u=wL[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Rre(a)&&(a=BMe(a,i.gradient,"")),e[u]=a)}for(const o in EL){const a=t[o];a!=null&&(s=s||[],s.push(`${EL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const Jd={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function f9t(e){Jd.svgMarkTypes=e.svgMarkTypes??["text"],Jd.svgOnTop=e.svgOnTop??!0,Jd.debug=e.debug??!1}class yY extends VN{constructor(t){super(t),this._svgRenderer=new nie(t),this._canvasRenderer=new _L(t)}initialize(t,n,r,i,s){this._root_el=Lo(t,0,"div");const o=Lo(this._root_el,0,"div"),a=Lo(this._root_el,1,"div");return this._root_el.style.position="relative",Jd.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=Jd.svgOnTop?a:o,this._canvasEl=Jd.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return Jd.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!Jd.svgMarkTypes.includes(s));this._svgRenderer.render(t,Jd.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return Jd.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class DLe extends HN{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Lo(Lo(t,0,"div"),Jd.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const NLe="canvas",PLe="hybrid",OLe="png",$Le="svg",MLe="none",r1={Canvas:NLe,PNG:OLe,SVG:$Le,Hybrid:PLe,None:MLe},c_={};c_[NLe]=c_[OLe]={renderer:_L,headless:_L,handler:HN};c_[$Le]={renderer:nie,headless:RLe,handler:vLe};c_[PLe]={renderer:yY,headless:yY,handler:DLe};c_[MLe]={};function fB(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(c_[e]=t,this):c_[e]}function LLe(e,t,n){const r=[],i=new Eo().union(t),s=e.marktype;return s?FLe(e,i,n,r):s==="group"?BLe(e,i,n,r):Ye("Intersect scene must be mark node or group item.")}function FLe(e,t,n,r){if(d9t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)BLe(i[a],t,n,r);else for(const u=yf[s].isect;a<o;++a){const l=i[a];jLe(l,t,u)&&r.push(l)}}return r}function d9t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function BLe(e,t,n,r){n&&n(e.mark)&&jLe(e,t,yf.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)FLe(i[u],t,n,r);t.translate(o,a)}return r}function jLe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const iV=new Eo;function ULe(e){const t=e.clip;if(Gn(t))t(BN(iV.clear()));else if(t)iV.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(iV)}const h9t=1e-9;function rie(e,t,n){return e===t?!0:n==="path"?zLe(e,t):e instanceof Date&&t instanceof Date?+e==+t:Kr(e)&&Kr(t)?Math.abs(e-t)<=h9t:!e||!t||!Ot(e)&&!Ot(t)?e==t:p9t(e,t)}function zLe(e,t){return rie($T(e),$T(t))}function p9t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!rie(e[i],t[i],i))return!1;return typeof e==typeof t}function m9t(){WMe(),B5t()}const FT="top",uh="left",ph="right",uv="bottom",g9t="top-left",y9t="top-right",v9t="bottom-left",b9t="bottom-right",iie="start",vY="middle",Ku="end",x9t="x",_9t="y",dB="group",sie="axis",oie="title",w9t="frame",E9t="scope",aie="legend",VLe="row-header",HLe="row-footer",qLe="row-title",WLe="column-header",GLe="column-footer",YLe="column-title",S9t="padding",T9t="symbol",KLe="fit",XLe="fit-x",QLe="fit-y",C9t="pad",uie="none",AO="all",bY="each",lie="flush",i1="column",s1="row";function JLe(e){Ve.call(this,null,e)}Ct(JLe,Ve,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=yf[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=IO(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===dB||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(IO(l,o))),r.role){case sie:case aie:case oie:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(IO(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(IO(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return ULe(r),t.modifies("bounds")}});function IO(e,t,n){return t(e.bounds.clear(),e,n)}const P1e=":vega_identifier:";function cie(e){Ve.call(this,0,e)}cie.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Ct(cie,Ve,{transform(e,t){const n=A9t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function A9t(e){return e._signals[P1e]||(e._signals[P1e]=e.add(0))}function ZLe(e){Ve.call(this,null,e)}Ct(ZLe,Ve,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,I9t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===dB?rB:nB;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function I9t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function eFe(e){Ve.call(this,null,e)}const O1e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!tFe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},tFe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),$1e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(tFe(i,s=e[n].bounds,t))return!0},k9t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},R9t=(e,t,n)=>{var r=e.range(),i=new Eo;return t===FT||t===uv?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},M1e=e=>(e.forEach(t=>t.opacity=1),e),L1e=(e,t)=>e.reflow(t.modified()).modifies("opacity");Ct(eFe,Ve,{transform(e,t){const n=O1e[e.method]||O1e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(M1e(i),t=L1e(t,e)),t;if(i=i.filter(k9t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=M1e(i),t=L1e(t,e),s.length>=3&&$1e(s,r)){do s=n(s,r);while(s.length>=3&&$1e(s,r));s.length<3&&!$r(i).opacity&&(s.length>1&&($r(s).opacity=0),$r(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=R9t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function nFe(e){Ve.call(this,null,e)}Ct(nFe,Ve,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const uu=new Eo;function eS(e,t,n){return e[t]===n?0:(e[t]=n,1)}function D9t(e){var t=e.items[0].orient;return t===uh||t===ph}function N9t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function P9t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=N9t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Wre(p),b=0,x=0,w,S;switch(uu.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case FT:b=f||0,x=-c,S=Math.max(d,Math.min(h,-g.y1)),g.add(0,-S).add(l,0),p&&kO(e,p,S,m,y,0,-1,g);break;case uh:b=-c,x=f||0,S=Math.max(d,Math.min(h,-g.x1)),g.add(-S,0).add(0,l),p&&kO(e,p,S,m,y,1,-1,g);break;case ph:b=n+c,x=f||0,S=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(S,l),p&&kO(e,p,S,m,y,1,1,g);break;case uv:b=f||0,x=r+c,S=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,S),p&&kO(e,p,S,m,0,0,1,g);break;default:b=i.x,x=i.y}return Kg(g.translate(b,x),i),eS(i,"x",b+o)|eS(i,"y",x+o)&&(i.bounds=uu,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function kO(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const F1e=(e,t)=>Math.floor(Math.min(e,t)),B1e=(e,t)=>Math.ceil(Math.max(e,t));function O9t(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===dB)switch(i.role){case sie:case aie:case oie:break;case VLe:o.rowheaders.push(...s);break;case HLe:o.rowfooters.push(...s);break;case WLe:o.colheaders.push(...s);break;case GLe:o.colfooters.push(...s);break;case qLe:o.rowtitle=s[0];break;case YLe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function $9t(e){return new Eo().set(0,0,e.width||0,e.height||0)}function M9t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function vs(e,t,n){const r=Ot(e)?e[t]:e;return r??(n!==void 0?n:0)}function j1e(e){return e<0?Math.ceil(-e):0}function rFe(e,t,n){var r=!n.nodirty,i=n.bounds===lie?$9t:M9t,s=uu.set(0,0,0,0),o=vs(n.align,i1),a=vs(n.align,s1),u=vs(n.padding,i1),l=vs(n.padding,s1),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),b=0,x=Array(d),w=Array(d),S=Array(d),T,C,I,D,k,P,M,$,B,q,H;for(C=0;C<c;++C)p[C]=0;for(C=0;C<f;++C)y[C]=0;for(C=0;C<d;++C)P=t[C],k=S[C]=i(P),P.x=P.x||0,x[C]=0,P.y=P.y||0,w[C]=0,I=C%c,D=~~(C/c),m=Math.max(m,M=Math.ceil(k.x2)),b=Math.max(b,$=Math.ceil(k.y2)),p[I]=Math.max(p[I],M),y[D]=Math.max(y[D],$),h[C]=u+j1e(k.x1),g[C]=l+j1e(k.y1),r&&e.dirty(t[C]);for(C=0;C<d;++C)C%c===0&&(h[C]=0),C<c&&(g[C]=0);if(o===bY)for(I=1;I<c;++I){for(H=0,C=I;C<d;C+=c)H<h[C]&&(H=h[C]);for(C=I;C<d;C+=c)h[C]=H+p[I-1]}else if(o===AO){for(H=0,C=0;C<d;++C)C%c&&H<h[C]&&(H=h[C]);for(C=0;C<d;++C)C%c&&(h[C]=H+m)}else for(o=!1,I=1;I<c;++I)for(C=I;C<d;C+=c)h[C]+=p[I-1];if(a===bY)for(D=1;D<f;++D){for(H=0,C=D*c,T=C+c;C<T;++C)H<g[C]&&(H=g[C]);for(C=D*c;C<T;++C)g[C]=H+y[D-1]}else if(a===AO){for(H=0,C=c;C<d;++C)H<g[C]&&(H=g[C]);for(C=c;C<d;++C)g[C]=H+b}else for(a=!1,D=1;D<f;++D)for(C=D*c,T=C+c;C<T;++C)g[C]+=y[D-1];for(B=0,C=0;C<d;++C)B=h[C]+(C%c?B:0),x[C]+=B-t[C].x;for(I=0;I<c;++I)for(q=0,C=I;C<d;C+=c)q+=g[C],w[C]+=q-t[C].y;if(o&&vs(n.center,i1)&&f>1)for(C=0;C<d;++C)k=o===AO?m:p[C%c],B=k-S[C].x2-t[C].x-x[C],B>0&&(x[C]+=B/2);if(a&&vs(n.center,s1)&&c!==1)for(C=0;C<d;++C)k=a===AO?b:y[~~(C/c)],q=k-S[C].y2-t[C].y-w[C],q>0&&(w[C]+=q/2);for(C=0;C<d;++C)s.union(S[C].translate(x[C],w[C]));switch(B=vs(n.anchor,x9t),q=vs(n.anchor,_9t),vs(n.anchor,i1)){case Ku:B-=s.width();break;case vY:B-=s.width()/2}switch(vs(n.anchor,s1)){case Ku:q-=s.height();break;case vY:q-=s.height()/2}for(B=Math.round(B),q=Math.round(q),s.clear(),C=0;C<d;++C)t[C].mark.bounds.clear();for(C=0;C<d;++C)P=t[C],P.x+=x[C]+=B,P.y+=w[C]+=q,s.union(P.mark.bounds.union(P.bounds.translate(x[C],w[C]))),r&&e.dirty(P);return s}function L9t(e,t,n){var r=O9t(t),i=r.marks,s=n.bounds===lie?F9t:B9t,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=rFe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=vs(n.headerBand,s1,null),c=RO(e,r.rowheaders,i,a,u,-vs(o,"rowHeader"),F1e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=vs(n.headerBand,i1,null),f=RO(e,r.colheaders,i,a,a,-vs(o,"columnHeader"),F1e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=vs(n.footerBand,s1,null),d=RO(e,r.rowfooters,i,a,u,vs(o,"rowFooter"),B1e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=vs(n.footerBand,i1,null),h=RO(e,r.colfooters,i,a,a,vs(o,"columnFooter"),B1e,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=vs(n.titleAnchor,s1),g=vs(o,"rowTitle"),g=p===Ku?d+g:c-g,m=vs(n.titleBand,s1,.5),U1e(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=vs(n.titleAnchor,i1),g=vs(o,"columnTitle"),g=p===Ku?h+g:f-g,m=vs(n.titleBand,i1,.5),U1e(e,r.coltitle,g,1,y,m))}function F9t(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function B9t(e,t){return e.bounds[t]}function RO(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,b,x,w,S,T,C,I,D;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,b=0,w=t.length;b<w;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(y=c,b=0,w=t.length;b<w;++b,y+=f){for(T=t[b],S=T.mark.bounds,x=y;x>=0&&(C=n[x])==null;x-=d);a?(I=h==null?C.x:Math.round(C.bounds.x1+h*C.bounds.width()),D=m):(I=m,D=h==null?C.y:Math.round(C.bounds.y1+h*C.bounds.height())),S.union(T.bounds.translate(I-(T.x||0),D-(T.y||0))),T.x=I,T.y=D,e.dirty(T),g=o(g,S[l])}return g}function U1e(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function j9t(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function U9t(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function z9t(e,t,n,r,i,s,o){const a=j9t(n,t),u=U9t(e,a("offset",0)),l=a("anchor",iie),c=l===Ku?1:l===vY?.5:0,f={align:bY,bounds:a("bounds",lie),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case uh:f.anchor={x:Math.floor(r.x1)-u,column:Ku,y:c*(o||r.height()+2*r.y1),row:l};break;case ph:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case FT:f.anchor={y:Math.floor(i.y1)-u,row:Ku,x:c*(s||i.width()+2*i.x1),column:l};break;case uv:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case g9t:f.anchor={x:u,y:u};break;case y9t:f.anchor={x:s-u,y:u,column:Ku};break;case v9t:f.anchor={x:u,y:o-u,row:Ku};break;case b9t:f.anchor={x:s-u,y:o-u,column:Ku,row:Ku};break}return f}function V9t(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),q9t(e,n,n.items[0].items[0]),s=H9t(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===T9t&&W9t(n.items[0].items[0].items[0].items),i!==uie&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Kg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function H9t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function q9t(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&kA(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case uh:i+=Math.ceil(o.bounds.width())+u;break;case ph:case uv:break;default:s+=o.bounds.height()+u}switch((i||s)&&kA(e,n,i,s),o.orient){case uh:c+=iE(t,n,o,a,1,1);break;case ph:l+=iE(t,n,o,Ku,0,0)+u,c+=iE(t,n,o,a,1,1);break;case uv:l+=iE(t,n,o,a,0,0),c+=iE(t,n,o,Ku,-1,0,1)+u;break;default:l+=iE(t,n,o,a,0,0)}(l||c)&&kA(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(kA(e,n,-l,0),kA(e,o,-l,0))}}function iE(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Wre(n);return Math.round(r===iie?f:r===Ku?d-h:.5*(c-h))}function kA(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function W9t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function G9t(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===uh||a===ph?r:n,p=0,m=0,g=0,y=0,b=0,x;if(o!==dB?a===uh?(p=i.y2,h=i.y1):a===ph?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===uh&&(p=r,h=0),x=u===iie?p:u===Ku?h:(p+h)/2,d&&d.text){switch(a){case FT:case uv:b=f.bounds.height()+c;break;case uh:y=f.bounds.width()+c;break;case ph:y=-f.bounds.width()-c;break}uu.clear().union(d.bounds),uu.translate(y-(d.x||0),b-(d.y||0)),eS(d,"x",y)|eS(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(uu),d.mark.bounds.clear().union(uu),e.dirty(d)),uu.clear().union(d.bounds)}else uu.clear();switch(uu.union(f.bounds),a){case FT:m=x,g=i.y1-uu.height()-l;break;case uh:m=i.x1-uu.width()-l,g=x;break;case ph:m=i.x2+uu.width()+l,g=x;break;case uv:m=x,g=i.y2+l;break;default:m=s.x,g=s.y}return eS(s,"x",m)|eS(s,"y",g)&&(uu.translate(m,g),e.dirty(s),s.bounds.clear().union(uu),t.bounds.clear().union(uu),e.dirty(s)),s.bounds}function iFe(e){Ve.call(this,null,e)}Ct(iFe,Ve,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&L9t(n,r,e.layout),K9t(n,r,e)}),Y9t(e.mark.group)?t.reflow():t}});function Y9t(e){return e&&e.mark.role!=="legend-entry"}function K9t(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Eo().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case sie:h=D9t(f)?a:u,h.union(P9t(e,f,i,s));break;case oie:c=f;break;case aie:l.push(V9t(e,f));break;case w9t:case E9t:case VLe:case HLe:case qLe:case WLe:case GLe:case YLe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||ph,d!==uie&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const b=g[y];rFe(e,b,z9t(b,y,n.legends,a,u,i,s))}l.forEach(y=>{const b=y.bounds;if(b.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=b,e.dirty(y)),n.autosize&&(n.autosize.type===KLe||n.autosize.type===XLe||n.autosize.type===QLe))switch(y.orient){case uh:case ph:o.add(b.x1,0).add(b.x2,0);break;case FT:case uv:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(u),c&&o.union(G9t(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),X9t(e,t,o,n)}function X9t(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===S9t){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===uie?(l=0,f=0,u=o,c=a):s===KLe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===XLe?(u=Math.max(0,o-l-d),a=c+f+h):s===QLe?(o=u+l+d,c=Math.max(0,a-f-h)):s===C9t&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const Q9t=Object.freeze(Object.defineProperty({__proto__:null,bound:JLe,identifier:cie,mark:ZLe,overlap:eFe,render:nFe,viewlayout:iFe},Symbol.toStringTag,{value:"Module"}));function sFe(e){Ve.call(this,null,e)}Ct(sFe,Ve,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Ire(s,o,e.minstep),u=e.format||NMe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?DMe(s,e.values,a):kre(s,a);return i&&(r.rem=i),i=l.map((c,f)=>hi({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(hi({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function oFe(e){Ve.call(this,null,e)}function J9t(){return hi({})}function Z9t(e){const t=rC().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Ct(oFe,Ve,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||J9t,s=e.key||nn,o=this.value;return Xe(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Ye("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Z9t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function aFe(e){Ve.call(this,null,e)}Ct(aFe,Ve,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Xe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Ty,u=i.enter||Ty,l=i.exit||Ty,c=(s&&!o?i[s]:a)||Ty;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Ty&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Ty&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Ty){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function uFe(e){Ve.call(this,[],e)}Ct(uFe,Ve,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||i6,o=e.scale,a=+e.limit,u=Ire(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===i6,c=e.format||MMe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||$Me(o,u),d,h,p,m,g;return i&&(r.rem=i),s===i6?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,Gn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,b)=>Math.max(y,p(b,e)),0)):p=ku(m=p||8),i=i.map((y,b)=>hi({index:b,label:c(y,b,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(hi({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===C5t?(d=o.domain(),h=IMe(o,d[0],$r(d)),f.length<3&&!e.values&&d[0]!==$r(d)&&(f=[d[0],$r(d)]),i=f.map((y,b)=>hi({index:b,label:c(y,b,f),value:y,perc:h(y)}))):(p=f.length-1,h=L5t(o),i=f.map((y,b)=>hi({index:b,label:c(y,b,f),value:y,perc:b?h(y):0,perc2:b===p?1:h(f[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const ejt=e=>e.source.x,tjt=e=>e.source.y,njt=e=>e.target.x,rjt=e=>e.target.y;function fie(e){Ve.call(this,{},e)}fie.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Ct(fie,Ve,{transform(e,t){var n=e.sourceX||ejt,r=e.sourceY||tjt,i=e.targetX||njt,s=e.targetY||rjt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=z1e.get(u+"-"+a)||z1e.get(u);return l||Ye("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const lFe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,ijt=(e,t,n,r)=>lFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),cFe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},sjt=(e,t,n,r)=>cFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),fFe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},ojt=(e,t,n,r)=>fFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),ajt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,ujt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,ljt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},cjt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},fjt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},djt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},z1e=rC({line:lFe,"line-radial":ijt,arc:cFe,"arc-radial":sjt,curve:fFe,"curve-radial":ojt,"orthogonal-horizontal":ajt,"orthogonal-vertical":ujt,"orthogonal-radial":ljt,"diagonal-horizontal":cjt,"diagonal-vertical":fjt,"diagonal-radial":djt});function die(e){Ve.call(this,null,e)}die.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Ct(die,Ve,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||eC,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/qke(l),h=Kl(c),p,m,g;for(e.sort&&h.sort((y,b)=>l[y]-l[b]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const hjt=5;function pjt(e){const t=e.type;return!e.bins&&(t===NT||t===NN||t===PN)}function dFe(e){return Tre(e)&&e!==Qp}const mjt=Ph(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function hFe(e){Ve.call(this,null,e),this.modified(!0)}Ct(hFe,Ve,{transform(e,t){var n=t.dataflow,r=this.value,i=gjt(e);(!r||i!==r.type)&&(this.value=r=ri(i)());for(i in e)if(!mjt[i]){if(i==="padding"&&dFe(r.type))continue;Gn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return wjt(r,e,_jt(r,e,vjt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function gjt(e){var t=e.type,n="",r;return t===Qp?Qp+"-"+NT:(yjt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Qp+"-":r===3?aC+"-":""),(n+t||NT).toLowerCase())}function yjt(e){const t=e.type;return Tre(t)&&t!==u_&&t!==l_&&(e.scheme||e.range&&e.range.length&&e.range.every(Pt))}function vjt(e,t,n){const r=bjt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&pjt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return dFe(s)&&t.padding&&i[0]!==$r(i)&&(i=xjt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(pFe(s,i,n)),s===_re&&e.unknown(t.domainImplicit?GW:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Ire(e,t.nice)||null),i.length}function bjt(e,t,n){return t?(e.domain(pFe(e.type,t,n)),t.length):-1}function xjt(e,t,n,r,i,s){var o=Math.abs($r(n)-n[0]),a=o/(o-2*r),u=e===Ag?pne(t,null,a):e===PN?aL(t,null,a,.5):e===NN?aL(t,null,a,i||1):e===Q8?mne(t,null,a,s||1):hne(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function pFe(e,t,n){if(EMe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+Et(t))}return t}function _jt(e,t,n){let r=t.bins;if(r&&!Xe(r)){const i=e.domain(),s=i[0],o=$r(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Ye("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Kl(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===wre&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function wjt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=Ejt(r,t,n);else if(t.scheme&&(s=Sjt(r,t,n),Gn(s))){if(e.interpolator)return e.interpolator(s);Ye(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&SMe(r))return e.interpolator(eB(xY(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Cre(t.interpolate,t.interpolateGamma)):Gn(e.round)?e.round(i):Gn(e.rangeRound)&&e.interpolate(i?sN:zg),s&&e.range(xY(s,t.reverse))}function Ejt(e,t,n){e!==yMe&&e!==sY&&Ye("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===sY?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*xre(n,i,r)]}function Sjt(e,t,n){var r=t.schemeExtent,i,s;return Xe(t.scheme)?s=eB(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Are(i),s||Ye(`Unrecognized scheme name: ${t.scheme}`)),n=e===Z8?n+1:e===wre?n-1:e===PT||e===J8?+t.schemeCount||hjt:n,SMe(e)?V1e(s,r,t.reverse):Gn(s)?AMe(V1e(s,r),n):e===_re?s:s.slice(0,n)}function V1e(e,t,n){return Gn(e)&&(t||n)?CMe(e,xY(t||[0,1],n)):e}function xY(e,t){return t?e.slice().reverse():e}function mFe(e){Ve.call(this,null,e)}Ct(mFe,Ve,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(nw(e.sort)),this.modified(n),t}});const H1e="zero",gFe="center",yFe="normalize",vFe=["y0","y1"];function hie(e){Ve.call(this,null,e)}hie.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:H1e,values:[H1e,gFe,yFe]},{name:"as",type:"string",array:!0,length:2,default:vFe}]};Ct(hie,Ve,{transform(e,t){var n=e.as||vFe,r=n[0],i=n[1],s=nw(e.sort),o=e.field||eC,a=e.offset===gFe?Tjt:e.offset===yFe?Cjt:Ajt,u,l,c,f;for(u=Ijt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function Tjt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function Cjt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function Ajt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function Ijt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const kjt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:sFe,datajoin:oFe,encode:aFe,legendentries:uFe,linkpath:fie,pie:die,scale:hFe,sortitems:mFe,stack:hie},Symbol.toStringTag,{value:"Module"}));var Rjt=Math.abs,_Y=Math.cos,SL=Math.sin,Djt=1e-6,bFe=Math.PI,wY=bFe/2,q1e=Njt(2);function W1e(e){return e>1?wY:e<-1?-wY:Math.asin(e)}function Njt(e){return e>0?Math.sqrt(e):0}function Pjt(e,t){var n=e*SL(t),r=30,i;do t-=i=(t+SL(t)-n)/(1+_Y(t));while(Rjt(i)>Djt&&--r>0);return t/2}function Ojt(e,t,n){function r(i,s){return[e*i*_Y(s=Pjt(n,s)),t*SL(s)]}return r.invert=function(i,s){return s=W1e(s/t),[i/(e*_Y(s)),W1e((2*s+SL(2*s))/n)]},r}var $jt=Ojt(q1e/wY,q1e,bFe);function Mjt(){return Dm($jt).scale(169.529)}const Ljt=TDe(),EY=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Fjt(e,t){return function n(){const r=t();return r.type=e,r.path=TDe().projection(r),r.copy=r.copy||function(){const i=n();return EY.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},_Me(r)}}function pie(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(TL[e]=Fjt(e,t),this):TL[e]||null}function xFe(e){return e&&e.path||Ljt}const TL={albers:ADe,albersusa:mTt,azimuthalequalarea:gTt,azimuthalequidistant:yTt,conicconformal:xTt,conicequalarea:cM,conicequidistant:ETt,equalEarth:TTt,equirectangular:_Tt,gnomonic:CTt,identity:ATt,mercator:vTt,mollweide:Mjt,naturalEarth1:ITt,orthographic:kTt,stereographic:RTt,transversemercator:DTt};for(const e in TL)pie(e,TL[e]);function Bjt(){}const l0=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function _Fe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),jjt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(Ujt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,b;for(h=p=-1,g=u[0]>=l,l0[g<<1].forEach(x);++h<e-1;)m=g,g=u[h+1]>=l,l0[m|g<<1].forEach(x);for(l0[g<<0].forEach(x);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,l0[g<<1|y<<2].forEach(x);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,b=y,y=u[p*e+h+1]>=l,l0[m|g<<1|y<<2|b<<3].forEach(x);l0[g|y<<3].forEach(x)}for(h=-1,y=u[p*e]>=l,l0[y<<2].forEach(x);++h<e-1;)b=y,y=u[p*e+h+1]>=l,l0[y<<2|b<<3].forEach(x);l0[y<<3].forEach(x);function x(w){var S=[w[0][0]+h,w[0][1]+p],T=[w[1][0]+h,w[1][1]+p],C=o(S),I=o(T),D,k;(D=d[C])?(k=f[I])?(delete d[D.end],delete f[k.start],D===k?(D.ring.push(T),c(D.ring)):f[D.start]=d[k.end]={start:D.start,end:k.end,ring:D.ring.concat(k.ring)}):(delete d[D.end],D.ring.push(T),d[D.end=I]=D):(D=f[I])?(k=d[C])?(delete f[D.start],delete d[k.end],D===k?(D.ring.push(T),c(D.ring)):f[k.start]=d[D.end]={start:k.start,end:D.end,ring:k.ring.concat(D.ring)}):(delete f[D.start],D.ring.unshift(S),f[D.start=C]=D):f[C]=d[I]={start:C,end:I,ring:[S,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Ye("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:Bjt,r):n===a},r}function jjt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function Ujt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=zjt(e,t[n]))return i;return 0}function zjt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(Vjt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function Vjt(e,t,n){var r;return Hjt(e,t,n)&&qjt(e[r=+(e[0]===t[0])],n[r],t[r])}function Hjt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function qjt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function wFe(e,t,n){return function(r){var i=gm(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?z1(s,o,e):a/(e+1);return Kl(s+u,o,u)}}function mie(e){Ve.call(this,null,e)}mie.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Ct(mie,Ve,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Iu,s=_Fe().smooth(e.smooth!==!1),o=e.thresholds||Wjt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Xe(o)?o:o(c.values));Gjt(f,c,l,e),f.forEach(d=>{u.push(z8(l,hi(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Wjt(e,t,n){const r=wFe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>K0(t(i).values)))}function Gjt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(Gn(i)&&(i=i(n,r)),Gn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(Kr(i)?i:i[0])||1,a=(Kr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(EFe(t,o,a,u,l))}function EFe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function G1e(e,t,n){const r=e>=0?e:One(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function sV(e){return Gn(e)?e:ku(+e)}function SFe(){var e=u=>u[0],t=u=>u[1],n=eC,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=G1e(r[0],u,e)>>o,f=G1e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let b=g;u.forEach(w=>{const S=d+(+e(w)>>o),T=h+(+t(w)>>o);S>=0&&S<p&&T>=0&&T<m&&(g[S+T*p]+=+n(w))}),c>0&&f>0?(sE(p,m,g,y,c),oE(p,m,y,g,f),sE(p,m,g,y,c),oE(p,m,y,g,f),sE(p,m,g,y,c),oE(p,m,y,g,f)):c>0?(sE(p,m,g,y,c),sE(p,m,y,g,c),sE(p,m,g,y,c),b=y):f>0&&(oE(p,m,g,y,f),oE(p,m,y,g,f),oE(p,m,g,y,f),b=y);const x=l?Math.pow(2,-2*o):1/qke(b);for(let w=0,S=p*m;w<S;++w)b[w]*=x;return{values:b,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=sV(u),a):e},a.y=function(u){return arguments.length?(t=sV(u),a):t},a.weight=function(u){return arguments.length?(n=sV(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Ye("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Ye("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Nt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Ye("invalid bandwidth"),r=u,a):r},a}function sE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function oE(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function gie(e){Ve.call(this,null,e)}gie.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Yjt=["x","y","weight","size","cellSize","bandwidth"];function TFe(e,t){return Yjt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Ct(gie,Ve,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=Kjt(r,e.groupby),s=(e.groupby||[]).map(Ws),o=TFe(SFe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>hi(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Kjt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function yie(e){Ve.call(this,null,e)}yie.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Ct(yie,Ve,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=_Fe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||wFe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=TFe(SFe(),e)(i,!0),u=EFe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Xe(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(hi),n}});const SY="Feature",vie="FeatureCollection",Xjt="MultiPoint";function bie(e){Ve.call(this,null,e)}bie.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Ct(bie,Ve,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Iu,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(_u(a))||s&&t.modified(_u(s))||o&&t.modified(_u(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:SY,geometry:{type:Xjt,coordinates:r}})),this.value={type:vie,features:n}}});function xie(e){Ve.call(this,null,e)}xie.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Ct(xie,Ve,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Iu,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=xFe(e.projection),n.materialize().reflow()):o=i===Iu||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=Qjt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function Qjt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function _ie(e){Ve.call(this,null,e)}_ie.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Ct(_ie,Ve,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function wie(e){Ve.call(this,null,e)}wie.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Ct(wie,Ve,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=Jjt(xFe(e.projection),e.field||ld("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function Jjt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Eie(e){Ve.call(this,[],e),this.generator=YSt()}Eie.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Ct(Eie,Ve,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)Gn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(T$e(n[0],i)):t.add.push(hi(i)),n[0]=i,t}});function Sie(e){Ve.call(this,null,e)}Sie.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Ct(Sie,Ve,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Iu,s=e7t(e.opacity,e),o=Zjt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?K0(n.map(l=>K0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=Wn({},l,u);r||(f.$max=K0(c.values||[])),l[a]=t7t(c,f,o.dep?o:ku(o(f)),s.dep?s:ku(s(f)))}),t.reflow(!0).modifies(a)}});function Zjt(e,t){let n;return Gn(e)?(n=r=>V1(e(r,t)),n.dep=CFe(e)):n=ku(V1(e||"#888")),n}function e7t(e,t){let n;return Gn(e)?(n=r=>e(r,t),n.dep=CFe(e)):e?n=ku(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function CFe(e){if(!Gn(e))return!1;const t=Ph(_u(e));return t.$x||t.$y||t.$value||t.$max}function t7t(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Hy,d=C1(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let b=o,x=g*i;b<u;++b,y+=4){t.$x=b-o,t.$value=f(b+x);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function AFe(e){Ve.call(this,null,e),this.modified(!0)}Ct(AFe,Ve,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=r7t(e.type),EY.forEach(r=>{e[r]!=null&&Y1e(n,r,e[r])})):EY.forEach(r=>{e.modified(r)&&Y1e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&n7t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function n7t(e,t){const n=i7t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function r7t(e){const t=pie((e||"mercator").toLowerCase());return t||Ye("Unrecognized projection type: "+e),t()}function Y1e(e,t,n){Gn(e[t])&&e[t](n)}function i7t(e){return e=Nt(e),e.length===1?e[0]:{type:vie,features:e.reduce((t,n)=>t.concat(s7t(n)),[])}}function s7t(e){return e.type===vie?e.features:Nt(e).filter(t=>t!=null).map(t=>t.type===SY?t:{type:SY,geometry:t})}const o7t=Object.freeze(Object.defineProperty({__proto__:null,contour:yie,geojson:bie,geopath:xie,geopoint:_ie,geoshape:wie,graticule:Eie,heatmap:Sie,isocontour:mie,kde2d:gie,projection:AFe},Symbol.toStringTag,{value:"Module"})),K1e={center:FEt,collide:rSt,nbody:pSt,link:sSt,x:mSt,y:gSt},kI="forces",TY=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],a7t=["static","iterations"],IFe=["x","y","vx","vy"];function Tie(e){Ve.call(this,null,e)}Tie.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:IFe}]};Ct(Tie,Ve,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(TY),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&kFe(n,e,0,t)):(this.value=n=l7t(t.source,e),n.on("tick",u7t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(a7t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==kI||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(IFe)}});function u7t(e,t){return()=>e.touch(t).run()}function l7t(e,t){const n=hSt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),kFe(n,t,!0).on("end",()=>s=!0)}function kFe(e,t,n,r){var i=Nt(t.forces),s,o,a,u;for(s=0,o=TY.length;s<o;++s)a=TY[s],a!==kI&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=kI+s,a=n||t.modified(kI,s)?f7t(i[s]):r&&c7t(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(kI+s,null);return e.numForces=i.length,e}function c7t(e,t){var n,r;for(n in e)if(Gn(r=e[n])&&t.modified(_u(r)))return 1;return 0}function f7t(e){var t,n;sn(K1e,e.force)||Ye("Unrecognized force: "+e.force),t=K1e[e.force]();for(n in e)Gn(t[n])&&d7t(t[n],e[n],e);return t}function d7t(e,t,n){e(Gn(t)?r=>t(r,n):t)}const h7t=Object.freeze(Object.defineProperty({__proto__:null,force:Tie},Symbol.toStringTag,{value:"Module"}));function CY(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Cie(e){Ve.call(this,null,e)}Cie.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const p7t=e=>e.values;Ct(Cie,Ve,{transform(e,t){t.source||Ye("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&U8(o.data)&&i.rem.push(o.data)}),this.value=s=K5({values:Nt(e.keys).reduce((o,a)=>(o.key(a),o),m7t()).entries(i.source)},p7t),n&&s.each(o=>{o.children&&(o=hi(o.data),i.add.push(o),i.source.push(o))}),CY(s,nn,nn)),i.source.root=s,i}});function m7t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Xg(e){Ve.call(this,null,e)}const g7t=(e,t)=>e.parent===t.parent?1:2;Ct(Xg,Ve,{transform(e,t){(!t.source||!t.source.root)&&Ye(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(nw(e.sort,o=>o.data)),y7t(n,this.params,e),n.separation&&n.separation(e.separation!==!1?g7t:eC);try{this.value=n(i)}catch(o){Ye(o)}return i.each(o=>v7t(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function y7t(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function v7t(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const AY=["x","y","r","depth","children"];function Aie(e){Xg.call(this,e)}Aie.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:AY.length,default:AY}]};Ct(Aie,Xg,{layout:zDe,params:["radius","size","padding"],fields:AY});const IY=["x0","y0","x1","y1","depth","children"];function Iie(e){Xg.call(this,e)}Iie.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:IY.length,default:IY}]};Ct(Iie,Xg,{layout:g2t,params:["size","round","padding"],fields:IY});function kie(e){Ve.call(this,null,e)}kie.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Ct(kie,Ve,{transform(e,t){t.source||Ye("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?CY(M0e().id(e.key).parentId(e.parentKey)(i.source),e.key,cd):CY(M0e()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const X1e={tidy:C2t,cluster:BTt},kY=["x","y","depth","children"];function Rie(e){Xg.call(this,e)}Rie.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:kY.length,default:kY}]};Ct(Rie,Xg,{layout(e){const t=e||"tidy";if(sn(X1e,t))return X1e[t]();Ye("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:kY});function Die(e){Ve.call(this,[],e)}Die.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Ct(Die,Ve,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Ye("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[nn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[nn(a)]&&s[nn(u)]&&i.add.push(hi({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[nn(o)]=1),n.forEach(o=>{(s[nn(o.source)]||s[nn(o.target)])&&i.mod.push(o)})),i}});const Q1e={binary:I2t,dice:lN,slice:X5,slicedice:k2t,squarify:WDe,resquarify:R2t},RY=["x0","y0","x1","y1","depth","children"];function Nie(e){Xg.call(this,e)}Nie.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:RY.length,default:RY}]};Ct(Nie,Xg,{layout(){const e=A2t();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{sn(Q1e,t)?e.tile(Q1e[t]):Ye("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:RY});const b7t=Object.freeze(Object.defineProperty({__proto__:null,nest:Cie,pack:Aie,partition:Iie,stratify:kie,tree:Rie,treelinks:Die,treemap:Nie},Symbol.toStringTag,{value:"Module"})),oV=4278190080;function x7t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function _7t(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=C1(s,o).getContext("2d"),l=C1(s,o).getContext("2d"),c=a&&C1(s,o).getContext("2d");n.forEach(I=>h6(u,I,!1)),h6(l,t,!1),a&&h6(c,t,!0);const f=aV(u,s,o),d=aV(l,s,o),h=a&&aV(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,b,x,w,S,T,C;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,S=f[w]&oV,C=d[w]&oV,T=a&&h[w]&oV,(S||T||C)&&(b=e(g),x=e(y),!i&&(S||C)&&p.set(b,x),a&&(S||T)&&m.set(b,x));return[p,m]}function aV(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function h6(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>h6(e,s.items,n))}):yf[r].draw(e,{items:n?t.map(w7t):t})}function w7t(e){const t=z8(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const c0=5,Vu=31,eD=32,My=new Uint32Array(eD+1),nh=new Uint32Array(eD+1);nh[0]=0;My[0]=~nh[0];for(let e=1;e<=eD;++e)nh[e]=nh[e-1]<<1|1,My[e]=~nh[e];function E7t(e,t){const n=new Uint32Array(~~((e*t+eD)/eD));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>c0]&1<<(a&Vu)},set:(s,o)=>{const a=o*e+s;r(a>>>c0,1<<(a&Vu))},clear:(s,o)=>{const a=o*e+s;i(a>>>c0,~(1<<(a&Vu)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>c0,h=f>>>c0,d===h){if(n[d]&My[c&Vu]&nh[(f&Vu)+1])return!0}else{if(n[d]&My[c&Vu]||n[h]&nh[(f&Vu)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>c0,d=c>>>c0,f===d)r(f,My[l&Vu]&nh[(c&Vu)+1]);else for(r(f,My[l&Vu]),r(d,nh[(c&Vu)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>c0,d=c>>>c0,f===d)i(f,nh[l&Vu]|My[(c&Vu)+1]);else for(i(f,nh[l&Vu]),i(d,My[(c&Vu)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function S7t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>E7t(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function T7t(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=ef.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,b;for(let x=0;x<u;++x)d=a[x].x,p=a[x].y,h=a[x].x2===void 0?d:a[x].x2,m=a[x].y2===void 0?p:a[x].y2,g=(d+h)/2,y=(p+m)/2,b=Math.abs(h-d+m-p),b>=f&&(f=b,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function CL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function o1(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function C7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,b;if(!CL(p,m,d,h,i,s)&&!o1(e,p,m,h,d,g,o,a)&&!o1(e,p,m,h,d,h,o,null)){for(;y-g>=1;)b=(g+y)/2,o1(e,p,m,h,d,b,o,a)?y=b:g=b;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ef.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,b,x,w,S,T,C,I,D,k,P,M,$,B,q,H,Y,K;for(let Q=0;Q<f;++Q){for(b=c[Q].x,w=c[Q].y,x=c[Q].x2===void 0?b:c[Q].x2,S=c[Q].y2===void 0?w:c[Q].y2,b>x&&(K=b,b=x,x=K),w>S&&(K=w,w=S,S=K),k=e(b),M=e(x),P=~~((k+M)/2),$=e(w),q=e(S),B=~~(($+q)/2),I=P;I>=k;--I)for(D=B;D>=$;--D)Y=u(I,D,p,h,d),Y&&([l.x,l.y,p,m]=Y);for(I=P;I<=M;++I)for(D=B;D<=q;++D)Y=u(I,D,p,h,d),Y&&([l.x,l.y,p,m]=Y);!m&&!n&&(H=Math.abs(x-b+S-w),T=(b+x)/2,C=(w+S)/2,H>=y&&!CL(T,C,h,d,i,s)&&!o1(e,T,C,d,h,d,o,null)&&(y=H,l.x=T,l.y=C,g=!0))}return m||g?(T=h/2,C=d/2,o.setRange(e(l.x-T),e(l.y-C),e(l.x+T),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const A7t=[-1,-1,1,1],I7t=[-1,1,-1,1];function k7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=ef.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,b=0,x,w,S,T,C,I,D,k,P,M,$,B;for(let q=0;q<f;++q){for(x=c[q].x,S=c[q].y,w=c[q].x2===void 0?x:c[q].x2,T=c[q].y2===void 0?S:c[q].y2,p.push([e((x+w)/2),e((S+T)/2)]);p.length;)if([D,k]=p.pop(),!(o.get(D,k)||a.get(D,k)||u.get(D,k))){u.set(D,k);for(let H=0;H<4;++H)C=D+A7t[H],I=k+I7t[H],u.outOfBounds(C,I,C,I)||p.push([C,I]);if(C=e.invert(D),I=e.invert(k),P=m,M=s,!CL(C,I,h,d,i,s)&&!o1(e,C,I,d,h,P,o,a)&&!o1(e,C,I,d,h,d,o,null)){for(;M-P>=1;)$=(P+M)/2,o1(e,C,I,d,h,$,o,a)?M=$:P=$;P>m&&(l.x=C,l.y=I,m=P,g=!0)}}!g&&!n&&(B=Math.abs(w-x+T-S),C=(x+w)/2,I=(S+T)/2,B>=b&&!CL(C,I,h,d,i,s)&&!o1(e,C,I,d,h,d,o,null)&&(b=B,l.x=C,l.y=I,y=!0))}return g||y?(C=h/2,I=d/2,o.setRange(e(l.x-C),e(l.y-I),e(l.x+C),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const R7t=["right","center","left"],D7t=["bottom","middle","top"];function N7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,b,x,w,S,T,C,I,D,k,P;for(let M=0;M<u;++M){if(h=(n[M]&3)-1,p=(n[M]>>>2&3)-1,m=h===0&&p===0||r[M]<0,g=h&&p?Math.SQRT1_2:1,y=r[M]<0?-1:1,b=c[1+h]+r[M]*h*g,C=c[4+p]+y*f*p/2+r[M]*p*g,w=C-f/2,S=C+f/2,I=e(b),k=e(w),P=e(S),!d)if(J1e(I,I,k,P,o,a,b,b,w,S,c,m))d=ef.width(l.datum,l.datum.text);else continue;if(T=b+y*d*h/2,b=T-d/2,x=T+d/2,I=e(b),D=e(x),J1e(I,D,k,P,o,a,b,x,w,S,c,m))return l.x=h?h*y<0?x:b:T,l.y=p?p*y<0?S:w:C,l.align=R7t[h*y+1],l.baseline=D7t[p*y+1],o.setRange(I,k,D,P),!0}return!1}}function J1e(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const uV=0,lV=4,cV=8,fV=0,dV=1,hV=2,P7t={"top-left":uV+fV,top:uV+dV,"top-right":uV+hV,left:lV+fV,middle:lV+dV,right:lV+hV,"bottom-left":cV+fV,bottom:cV+dV,"bottom-right":cV+hV},O7t={naive:T7t,"reduced-search":C7t,floodfill:k7t};function $7t(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=M7t(r,f),h=L7t(i,f),p=F7t(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=B7t(p,m,a,u),b=l===null||l===1/0,x=g&&c==="naive";let w=-1,S=-1;const T=e.map(k=>{const P=b?ef.width(k,k.text):void 0;return w=Math.max(w,P),S=Math.max(S,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:P}});l=l===null||l===1/0?Math.max(w,S)+Math.max(...r):l;const C=S7t(t[0],t[1],l);let I;if(!x){n&&T.sort((M,$)=>n(M.datum,$.datum));let k=!1;for(let M=0;M<h.length&&!k;++M)k=h[M]===5||d[M]<0;const P=(p&&o||g)&&e.map(M=>M.datum);I=s.length||P?_7t(C,P||[],s,k,g):x7t(C,o&&T)}const D=g?O7t[c](C,I,o,u):N7t(C,I,h,d);return T.forEach(k=>k.opacity=+D(k)),T}function M7t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function L7t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=P7t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function F7t(e){return e&&e.mark&&e.mark.marktype}function B7t(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const DY=["x","y","opacity","align","baseline"],RFe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Pie(e){Ve.call(this,null,e)}Pie.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:RFe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:DY.length,default:DY}]};Ct(Pie,Ve,{transform(e,t){function n(s){const o=e[s];return Gn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Ye("Size parameter should be specified as a [width, height] array.");const i=e.as||DY;return $7t(t.materialize(t.SOURCE).source||[],e.size,e.sort,Nt(e.offset==null?1:e.offset),Nt(e.anchor||RFe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const j7t=Object.freeze(Object.defineProperty({__proto__:null,label:Pie},Symbol.toStringTag,{value:"Module"}));function DFe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Oie(e){Ve.call(this,null,e)}Oie.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Ct(Oie,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=DFe(r,e.groupby),s=(e.groupby||[]).map(Ws),o=s.length,a=e.as||[Ws(e.x),Ws(e.y)],u=[];i.forEach(l=>{V$e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(hi(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const NY={constant:Wne,linear:Gne,log:B$e,exp:j$e,pow:U$e,quad:Yne,poly:z$e},U7t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function $ie(e){Ve.call(this,null,e)}$ie.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(NY)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Ct($ie,Ve,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=DFe(r,e.groupby),s=(e.groupby||[]).map(Ws),o=e.method||"linear",a=e.order==null?3:e.order,u=U7t(o,a),l=e.as||[Ws(e.x),Ws(e.y)],c=NY[o],f=[];let d=e.extent;sn(NY,o)||Ye("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(hi({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||gm(h,e.x),y=b=>{const x={};for(let w=0;w<s.length;++w)x[s[w]]=h.dims[w];x[l[0]]=b[0],x[l[1]]=b[1],f.push(hi(x))};o==="linear"||o==="constant"?g.forEach(b=>y([b,m.predict(b)])):K8(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const z7t=Object.freeze(Object.defineProperty({__proto__:null,loess:Oie,regression:$ie},Symbol.toStringTag,{value:"Module"}));function Mie(e){Ve.call(this,null,e)}Mie.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const V7t=[-1e5,-1e5,1e5,1e5];Ct(Mie,Ve,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:V7t;const s=this.value=VZ.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!q7t(u)?H7t(u):null}return t.reflow(e.modified()).modifies(n)}});function H7t(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function q7t(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const W7t=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Mie},Symbol.toStringTag,{value:"Module"}));var pV=Math.PI/180,RI=64,p6=2048;function G7t(){var e=[256,256],t,n,r,i,s,o,a,u=NFe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(C1()),m=Z7t((e[0]>>5)*e[1]),g=null,y=l.length,b=-1,x=[],w=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,C)=>C.size-T.size);++b<y;){var S=w[b];S.x=e[0]*(c()+.5)>>1,S.y=e[1]*(c()+.5)>>1,Y7t(p,S,w,b),S.hasText&&h(m,S,g)&&(x.push(S),g?X7t(g,S):g=[{x:S.x+S.x0,y:S.y+S.y0},{x:S.x+S.x1,y:S.y+S.y1}],S.x-=e[0]>>1,S.y-=e[1]>>1)}return x};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(RI<<5)/m,p.height=p6/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,b=m.y,x=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),S=c()<.5?1:-1,T=-S,C,I,D;(C=w(T+=S))&&(I=~~C[0],D=~~C[1],!(Math.min(Math.abs(I),Math.abs(D))>=x));)if(m.x=y+I,m.y=b+D,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!K7t(m,p,e[0]))&&(!g||Q7t(m,g))){for(var k=m.sprite,P=m.width>>5,M=e[0]>>5,$=m.x-(P<<4),B=$&127,q=32-B,H=m.y1-m.y0,Y=(m.y+m.y0)*M+($>>5),K,Q=0;Q<H;Q++){K=0;for(var L=0;L<=P;L++)p[Y+L]|=K<<q|(L<P?(K=k[Q*P+L])>>>B:0);Y+=M}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=_b(p),f):n},f.fontStyle=function(p){return arguments.length?(i=_b(p),f):i},f.fontWeight=function(p){return arguments.length?(s=_b(p),f):s},f.rotate=function(p){return arguments.length?(o=_b(p),f):o},f.text=function(p){return arguments.length?(t=_b(p),f):t},f.spiral=function(p){return arguments.length?(u=eUt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=_b(p),f):r},f.padding=function(p){return arguments.length?(a=_b(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function Y7t(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(RI<<5)/s,p6/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*pV),g=Math.cos(t.rotate*pV),y=c*g,b=c*m,x=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(b+x),Math.abs(b-x))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=RI<<5&&(o=0,a+=u,u=0),a+d>=p6)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*pV),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var S=i.getImageData(0,0,(RI<<5)/s,p6/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var C=0,I=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var D=f*p+(h>>5),k=S[(a+p)*(RI<<5)+(o+h)<<2]?1<<31-h%32:0;T[D]|=k,C|=k}C?I=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+I,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function K7t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function X7t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function Q7t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function NFe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function J7t(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Z7t(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function _b(e){return typeof e=="function"?e:function(){return e}}var eUt={archimedean:NFe,rectangular:J7t};const PFe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],tUt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Lie(e){Ve.call(this,G7t(),e)}Lie.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:PFe}]};Ct(Lie,Ve,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Ye("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return Gn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||tUt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||PFe;let a=e.fontSize||14,u;if(Gn(a)?u=e.fontSizeRange:a=ku(a),u){const p=a,m=ri("sqrt")().domain(gm(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(dd).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const nUt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Lie},Symbol.toStringTag,{value:"Module"})),rUt=e=>new Uint8Array(e),iUt=e=>new Uint16Array(e),xk=e=>new Uint32Array(e);function sUt(){let e=8,t=[],n=xk(0),r=DO(0,e),i=DO(0,e);return{data:()=>t,seen:()=>n=oUt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=DO(s,e,r),i=DO(s,e))}}}function oUt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function DO(e,t,n){const r=(t<257?rUt:t<65537?iUt:xk)(e);return n&&r.set(n),r}function Z1e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function eve(){let e=xk(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=xk(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=aUt(h,d),c)p=t,m=e,t=Array(c+f),e=xk(c+f),uUt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[abt(u,a[0],0,l),U1(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function aUt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),cbt(e,t)}function uUt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Fie(e){Ve.call(this,sUt(),e),this._indices=null,this._dims=null}Fie.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Ct(Fie,Ve,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=eve()),s.push(Z1e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,b,x,w,S,T,C;if(l.set(u),t.rem.length&&(x=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},b=t.mod,S=0,T=b.length;S<T;++S)w[b[S]._index]=1;for(S=0;S<h;++S)C=r[S],(!o[S]||e.modified("fields",S)||t.modified(C.fields))&&(y=C.fname,(m=p[y])||(s[y]=g=eve(),p[y]=m=g.insert(C,t.source,0)),o[S]=Z1e(g,S,i[S]).onAdd(m,u));for(S=0,T=a.data().length;S<T;++S)x[S]||(l[S]!==u[S]?f.push(S):w[S]&&u[S]!==c&&d.push(S));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),b=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=b,g[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,b;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Bie(e){Ve.call(this,null,e)}Bie.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Ct(Bie,Ve,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const lUt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Fie,resolvefilter:Bie},Symbol.toStringTag,{value:"Module"})),cUt="RawCode",f_="Literal",fUt="Property",dUt="Identifier",hUt="ArrayExpression",pUt="BinaryExpression",OFe="CallExpression",mUt="ConditionalExpression",gUt="LogicalExpression",yUt="MemberExpression",vUt="ObjectExpression",bUt="UnaryExpression";function Wh(e){this.type=e}Wh.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=xUt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function xUt(e){switch(e.type){case hUt:return e.elements;case pUt:case gUt:return[e.left,e.right];case OFe:return[e.callee].concat(e.arguments);case mUt:return[e.test,e.consequent,e.alternate];case yUt:return[e.object,e.property];case vUt:return e.properties;case fUt:return[e.key,e.value];case bUt:return[e.argument];case dUt:case f_:case cUt:default:return[]}}var Mm,Gt,We,Eu,Ci,hB=1,qN=2,d_=3,Gv=4,pB=5,sw=6,Fl=7,WN=8,_Ut=9;Mm={};Mm[hB]="Boolean";Mm[qN]="<end>";Mm[d_]="Identifier";Mm[Gv]="Keyword";Mm[pB]="Null";Mm[sw]="Numeric";Mm[Fl]="Punctuator";Mm[WN]="String";Mm[_Ut]="RegularExpression";var wUt="ArrayExpression",EUt="BinaryExpression",SUt="CallExpression",TUt="ConditionalExpression",$Fe="Identifier",CUt="Literal",AUt="LogicalExpression",IUt="MemberExpression",kUt="ObjectExpression",RUt="Property",DUt="UnaryExpression",ca="Unexpected token %0",NUt="Unexpected number",PUt="Unexpected string",OUt="Unexpected identifier",$Ut="Unexpected reserved word",MUt="Unexpected end of input",PY="Invalid regular expression",mV="Invalid regular expression: missing /",MFe="Octal literals are not allowed in strict mode.",LUt="Duplicate data property in object literal not allowed in strict mode",Oa="ILLEGAL",tD="Disabled.",FUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),BUt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function mB(e,t){if(!e)throw new Error("ASSERT: "+t)}function _0(e){return e>=48&&e<=57}function jie(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function _k(e){return"01234567".indexOf(e)>=0}function jUt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function nD(e){return e===10||e===13||e===8232||e===8233}function GN(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&FUt.test(String.fromCharCode(e))}function AL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&BUt.test(String.fromCharCode(e))}const UUt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function LFe(){for(;We<Eu;){const e=Gt.charCodeAt(We);if(jUt(e)||nD(e))++We;else break}}function OY(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)We<Eu&&jie(Gt[We])?(r=Gt[We++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):ei({},ca,Oa);return String.fromCharCode(i)}function zUt(){var e,t,n,r;for(e=Gt[We],t=0,e==="}"&&ei({},ca,Oa);We<Eu&&(e=Gt[We++],!!jie(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&ei({},ca,Oa),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function FFe(){var e,t;for(e=Gt.charCodeAt(We++),t=String.fromCharCode(e),e===92&&(Gt.charCodeAt(We)!==117&&ei({},ca,Oa),++We,e=OY("u"),(!e||e==="\\"||!GN(e.charCodeAt(0)))&&ei({},ca,Oa),t=e);We<Eu&&(e=Gt.charCodeAt(We),!!AL(e));)++We,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Gt.charCodeAt(We)!==117&&ei({},ca,Oa),++We,e=OY("u"),(!e||e==="\\"||!AL(e.charCodeAt(0)))&&ei({},ca,Oa),t+=e);return t}function VUt(){var e,t;for(e=We++;We<Eu;){if(t=Gt.charCodeAt(We),t===92)return We=e,FFe();if(AL(t))++We;else break}return Gt.slice(e,We)}function HUt(){var e,t,n;return e=We,t=Gt.charCodeAt(We)===92?FFe():VUt(),t.length===1?n=d_:UUt.hasOwnProperty(t)?n=Gv:t==="null"?n=pB:t==="true"||t==="false"?n=hB:n=d_,{type:n,value:t,start:e,end:We}}function gV(){var e=We,t=Gt.charCodeAt(We),n,r=Gt[We],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++We,{type:Fl,value:String.fromCharCode(t),start:e,end:We};default:if(n=Gt.charCodeAt(We+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return We+=2,{type:Fl,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:We};case 33:case 61:return We+=2,Gt.charCodeAt(We)===61&&++We,{type:Fl,value:Gt.slice(e,We),start:e,end:We}}}if(o=Gt.substr(We,4),o===">>>=")return We+=4,{type:Fl,value:o,start:e,end:We};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return We+=3,{type:Fl,value:s,start:e,end:We};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return We+=2,{type:Fl,value:i,start:e,end:We};if(i==="//"&&ei({},ca,Oa),"<>=!+-*%&|^/".indexOf(r)>=0)return++We,{type:Fl,value:r,start:e,end:We};ei({},ca,Oa)}function qUt(e){let t="";for(;We<Eu&&jie(Gt[We]);)t+=Gt[We++];return t.length===0&&ei({},ca,Oa),GN(Gt.charCodeAt(We))&&ei({},ca,Oa),{type:sw,value:parseInt("0x"+t,16),start:e,end:We}}function WUt(e){let t="0"+Gt[We++];for(;We<Eu&&_k(Gt[We]);)t+=Gt[We++];return(GN(Gt.charCodeAt(We))||_0(Gt.charCodeAt(We)))&&ei({},ca,Oa),{type:sw,value:parseInt(t,8),octal:!0,start:e,end:We}}function tve(){var e,t,n;if(n=Gt[We],mB(_0(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=We,e="",n!=="."){if(e=Gt[We++],n=Gt[We],e==="0"){if(n==="x"||n==="X")return++We,qUt(t);if(_k(n))return WUt(t);n&&_0(n.charCodeAt(0))&&ei({},ca,Oa)}for(;_0(Gt.charCodeAt(We));)e+=Gt[We++];n=Gt[We]}if(n==="."){for(e+=Gt[We++];_0(Gt.charCodeAt(We));)e+=Gt[We++];n=Gt[We]}if(n==="e"||n==="E")if(e+=Gt[We++],n=Gt[We],(n==="+"||n==="-")&&(e+=Gt[We++]),_0(Gt.charCodeAt(We)))for(;_0(Gt.charCodeAt(We));)e+=Gt[We++];else ei({},ca,Oa);return GN(Gt.charCodeAt(We))&&ei({},ca,Oa),{type:sw,value:parseFloat(e),start:t,end:We}}function GUt(){var e="",t,n,r,i,s=!1;for(t=Gt[We],mB(t==="'"||t==='"',"String literal must starts with a quote"),n=We,++We;We<Eu;)if(r=Gt[We++],r===t){t="";break}else if(r==="\\")if(r=Gt[We++],!r||!nD(r.charCodeAt(0)))switch(r){case"u":case"x":Gt[We]==="{"?(++We,e+=zUt()):e+=OY(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:_k(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),We<Eu&&_k(Gt[We])&&(s=!0,i=i*8+"01234567".indexOf(Gt[We++]),"0123".indexOf(r)>=0&&We<Eu&&_k(Gt[We])&&(i=i*8+"01234567".indexOf(Gt[We++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Gt[We]===`
`&&++We;else{if(nD(r.charCodeAt(0)))break;e+=r}return t!==""&&ei({},ca,Oa),{type:WN,value:e,octal:s,start:n,end:We}}function YUt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";ei({},PY)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{ei({},PY)}try{return new RegExp(e,t)}catch{return null}}function KUt(){var e,t,n,r,i;for(e=Gt[We],mB(e==="/","Regular expression literal must start with a slash"),t=Gt[We++],n=!1,r=!1;We<Eu;)if(e=Gt[We++],t+=e,e==="\\")e=Gt[We++],nD(e.charCodeAt(0))&&ei({},mV),t+=e;else if(nD(e.charCodeAt(0)))ei({},mV);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||ei({},mV),i=t.substr(1,t.length-2),{value:i,literal:t}}function XUt(){var e,t,n;for(t="",n="";We<Eu&&(e=Gt[We],!!AL(e.charCodeAt(0)));)++We,e==="\\"&&We<Eu?ei({},ca,Oa):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&ei({},PY,n),{value:n,literal:t}}function QUt(){var e,t,n,r;return Ci=null,LFe(),e=We,t=KUt(),n=XUt(),r=YUt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:We}}function JUt(e){return e.type===d_||e.type===Gv||e.type===hB||e.type===pB}function BFe(){if(LFe(),We>=Eu)return{type:qN,start:We,end:We};const e=Gt.charCodeAt(We);return GN(e)?HUt():e===40||e===41||e===59?gV():e===39||e===34?GUt():e===46?_0(Gt.charCodeAt(We+1))?tve():gV():_0(e)?tve():gV()}function Vl(){const e=Ci;return We=e.end,Ci=BFe(),We=e.end,e}function jFe(){const e=We;Ci=BFe(),We=e}function ZUt(e){const t=new Wh(wUt);return t.elements=e,t}function nve(e,t,n){const r=new Wh(e==="||"||e==="&&"?AUt:EUt);return r.operator=e,r.left=t,r.right=n,r}function ezt(e,t){const n=new Wh(SUt);return n.callee=e,n.arguments=t,n}function tzt(e,t,n){const r=new Wh(TUt);return r.test=e,r.consequent=t,r.alternate=n,r}function Uie(e){const t=new Wh($Fe);return t.name=e,t}function DI(e){const t=new Wh(CUt);return t.value=e.value,t.raw=Gt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function rve(e,t,n){const r=new Wh(IUt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function nzt(e){const t=new Wh(kUt);return t.properties=e,t}function ive(e,t,n){const r=new Wh(RUt);return r.key=t,r.value=n,r.kind=e,r}function rzt(e,t){const n=new Wh(DUt);return n.operator=e,n.argument=t,n.prefix=!0,n}function ei(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(mB(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=We,n.description=i,n}function gB(e){e.type===qN&&ei(e,MUt),e.type===sw&&ei(e,NUt),e.type===WN&&ei(e,PUt),e.type===d_&&ei(e,OUt),e.type===Gv&&ei(e,$Ut),ei(e,ca,e.value)}function Su(e){const t=Vl();(t.type!==Fl||t.value!==e)&&gB(t)}function os(e){return Ci.type===Fl&&Ci.value===e}function yV(e){return Ci.type===Gv&&Ci.value===e}function izt(){const e=[];for(We=Ci.start,Su("[");!os("]");)os(",")?(Vl(),e.push(null)):(e.push(h_()),os("]")||Su(","));return Vl(),ZUt(e)}function sve(){We=Ci.start;const e=Vl();return e.type===WN||e.type===sw?(e.octal&&ei(e,MFe),DI(e)):Uie(e.value)}function szt(){var e,t,n,r;if(We=Ci.start,e=Ci,e.type===d_)return n=sve(),Su(":"),r=h_(),ive("init",n,r);if(e.type===qN||e.type===Fl)gB(e);else return t=sve(),Su(":"),r=h_(),ive("init",t,r)}function ozt(){var e=[],t,n,r,i={},s=String;for(We=Ci.start,Su("{");!os("}");)t=szt(),t.key.type===$Fe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?ei({},LUt):i[r]=!0,e.push(t),os("}")||Su(",");return Su("}"),nzt(e)}function azt(){Su("(");const e=zie();return Su(")"),e}const uzt={if:1};function lzt(){var e,t,n;if(os("("))return azt();if(os("["))return izt();if(os("{"))return ozt();if(e=Ci.type,We=Ci.start,e===d_||uzt[Ci.value])n=Uie(Vl().value);else if(e===WN||e===sw)Ci.octal&&ei(Ci,MFe),n=DI(Vl());else{if(e===Gv)throw new Error(tD);e===hB?(t=Vl(),t.value=t.value==="true",n=DI(t)):e===pB?(t=Vl(),t.value=null,n=DI(t)):os("/")||os("/=")?(n=DI(QUt()),jFe()):gB(Vl())}return n}function czt(){const e=[];if(Su("("),!os(")"))for(;We<Eu&&(e.push(h_()),!os(")"));)Su(",");return Su(")"),e}function fzt(){We=Ci.start;const e=Vl();return JUt(e)||gB(e),Uie(e.value)}function dzt(){return Su("."),fzt()}function hzt(){Su("[");const e=zie();return Su("]"),e}function pzt(){var e,t,n;for(e=lzt();;)if(os("."))n=dzt(),e=rve(".",e,n);else if(os("("))t=czt(),e=ezt(e,t);else if(os("["))n=hzt(),e=rve("[",e,n);else break;return e}function ove(){const e=pzt();if(Ci.type===Fl&&(os("++")||os("--")))throw new Error(tD);return e}function m6(){var e,t;if(Ci.type!==Fl&&Ci.type!==Gv)t=ove();else{if(os("++")||os("--"))throw new Error(tD);if(os("+")||os("-")||os("~")||os("!"))e=Vl(),t=m6(),t=rzt(e.value,t);else{if(yV("delete")||yV("void")||yV("typeof"))throw new Error(tD);t=ove()}}return t}function ave(e){let t=0;if(e.type!==Fl&&e.type!==Gv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function mzt(){var e,t,n,r,i,s,o,a,u,l;if(e=Ci,u=m6(),r=Ci,i=ave(r),i===0)return u;for(r.prec=i,Vl(),t=[e,Ci],o=m6(),s=[u,r,o];(i=ave(Ci))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=nve(a,u,o),s.push(n);r=Vl(),r.prec=i,s.push(r),t.push(Ci),n=m6(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=nve(s[l-1].value,s[l-2],n),l-=2;return n}function h_(){var e,t,n;return e=mzt(),os("?")&&(Vl(),t=h_(),Su(":"),n=h_(),e=tzt(e,t,n)),e}function zie(){const e=h_();if(os(","))throw new Error(tD);return e}function Vie(e){Gt=e,We=0,Eu=Gt.length,Ci=null,jFe();const t=zie();if(Ci.type!==qN)throw new Error("Unexpect token after expression.");return t}var UFe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function zFe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Ye("Missing arguments to clamp function."),o.length>3&&Ye("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Ye("Missing arguments to if function."),o.length>3&&Ye("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function gzt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function VFe(e){e=e||{};const t=e.allowed?Ph(e.allowed):{},n=e.forbidden?Ph(e.forbidden):{},r=e.constants||UFe,i=(e.functions||zFe)(f),s=e.globalvar,o=e.fieldvar,a=Gn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Pt(p))return p;const m=d[p.type];return m==null&&Ye("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:sn(n,m)?Ye("Illegal identifier: "+m):sn(r,m)?r[m]:sn(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[gzt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Ye("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=sn(i,m)&&i[m];return y||Ye("Unrecognized function: "+m),Gn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const uve=Symbol("vega_selection_getter");function HFe(e){return(!e.getter||!e.getter[uve])&&(e.getter=ld(e.field),e.getter[uve]=!0),e.getter}const Hie="intersect",lve="union",yzt="vlMulti",vzt="vlPoint",cve="or",bzt="and",xp="_vgsid_",rD=ld(xp),xzt="E",_zt="R",wzt="R-E",Ezt="R-LE",Szt="R-RE",IL="index:unit";function fve(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=HFe(a)(e),S1(o)&&(o=vu(o)),S1(r[s])&&(r[s]=vu(r[s])),Xe(r[s])&&S1(r[s][0])&&(r[s]=r[s].map(vu)),a.type===xzt){if(Xe(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===_zt){if(!JE(o,r[s]))return!1}else if(a.type===Szt){if(!JE(o,r[s],!0,!1))return!1}else if(a.type===wzt){if(!JE(o,r[s],!1,!1))return!1}else if(a.type===Ezt&&!JE(o,r[s],!1,!0))return!1;return!0}function Tzt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[IL]&&r[IL].value:void 0,o=n===Hie,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=fve(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=fve(t,l),o^h)return h;return a&&o}const qFe=O2(rD),Czt=qFe.left,Azt=qFe.right;function Izt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[IL]&&r[IL].value:void 0,o=n===Hie,a=rD(t),u=Czt(i,a);if(u===i.length||rD(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(Azt(i,a)-u<s.size)return!1}return!0}function kzt(e,t){return e.map(n=>Wn(t.fields?{values:t.fields.map(r=>HFe(r)(n.datum))}:{[xp]:rD(n.datum)},t))}function Rzt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,b,x=s.length,w=0,S,T;w<x;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(S=0,T=c.length;S<T;++S)h=c[S],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),b=vV[`${y}_union`],m[d]=b(g,Nt(f[S]));n&&(g=a[d]||(a[d]=[]),g.push(Nt(f).reduce((C,I,D)=>(C[c[D].field]=I,C),{})))}else h=xp,p=rD(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[xp]:p}));if(t=t||lve,o[xp]?o[xp]=vV[`${xp}_${t}`](...Object.values(o[xp])):Object.keys(o).forEach(C=>{o[C]=Object.keys(o[C]).map(I=>o[C][I]).reduce((I,D)=>I===void 0?D:vV[`${u[C]}_${t}`](I,D))}),s=Object.keys(a),n&&s.length){const C=r?vzt:yzt;o[C]=t===lve?{[cve]:s.reduce((I,D)=>(I.push(...a[D]),I),[])}:{[bzt]:s.map(I=>({[cve]:a[I]}))}}return o}var vV={[`${xp}_union`]:bbt,[`${xp}_intersect`]:ybt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=vu(t[0]),r=vu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=vu(t[0]),r=vu(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const Dzt=":",Nzt="@";function qie(e,t,n,r){t[0].type!==f_&&Ye("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&$r(t).value,o="unit",a=Nzt+o,u=Dzt+i;s===Hie&&!sn(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),sn(r,u)||(r[u]=n.getData(i).tuplesRef())}function WFe(e){const t=this.context.data[e];return t?t.values.value:[]}function Pzt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function Ozt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(cd).insert(t)),1}function $zt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const YN=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},Mzt=YN("format"),GFe=YN("timeFormat"),Lzt=YN("utcFormat"),Fzt=YN("timeParse"),Bzt=YN("utcParse"),NO=new Date(2e3,0,1);function yB(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(NO.setYear(2e3),NO.setMonth(e),NO.setDate(t),GFe.call(this,NO,n))}function jzt(e){return yB.call(this,e,1,"%B")}function Uzt(e){return yB.call(this,e,1,"%b")}function zzt(e){return yB.call(this,0,2+e,"%A")}function Vzt(e){return yB.call(this,0,2+e,"%a")}const Hzt=":",qzt="@",$Y="%",YFe="$";function Wie(e,t,n,r){t[0].type!==f_&&Ye("First argument to data functions must be a string literal.");const i=t[0].value,s=Hzt+i;if(!sn(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function Wzt(e,t,n,r){t[0].type!==f_&&Ye("First argument to indata must be a string literal."),t[1].type!==f_&&Ye("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=qzt+s;sn(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function ol(e,t,n,r){if(t[0].type===f_)dve(n,r,t[0].value);else for(e in n.scales)dve(n,r,e)}function dve(e,t,n){const r=$Y+n;if(!sn(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Lm(e,t){if(Gn(e))return e;if(Pt(e)){const n=t.scales[e];return n&&v5t(n.value)?n.value:void 0}}function Gzt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=ol,n._range=ol,n._scale=ol;const r=i=>"_["+(i.type===f_?Et($Y+i.value):Et($Y)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Gie(e,t){return function(n,r,i){if(n){const s=Lm(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const Yzt=Gie("area",ASt),Kzt=Gie("bounds",DSt),Xzt=Gie("centroid",LSt);function Qzt(e,t){const n=Lm(e,(t||this).context);return n&&n.scale()}function Jzt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Yie(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Zzt(){return Yie(this.context.dataflow,"warn",arguments)}function eVt(){return Yie(this.context.dataflow,"info",arguments)}function tVt(){return Yie(this.context.dataflow,"debug",arguments)}function bV(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function MY(e){const t=V1(e),n=bV(t.r),r=bV(t.g),i=bV(t.b);return .2126*n+.7152*r+.0722*i}function nVt(e,t){const n=MY(e),r=MY(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function rVt(){const e=[].slice.call(arguments);return e.unshift({}),Wn(...e)}function KFe(e,t){return e===t||e!==e&&t!==t?!0:Xe(e)?Xe(t)&&e.length===t.length?iVt(e,t):!1:Ot(e)&&Ot(t)?XFe(e,t):!1}function iVt(e,t){for(let n=0,r=e.length;n<r;++n)if(!KFe(e[n],t[n]))return!1;return!0}function XFe(e,t){for(const n in e)if(!KFe(e[n],t[n]))return!1;return!0}function hve(e){return t=>XFe(e,t)}function sVt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?cd:Xe(n)||U8(n)?n:hve(n),c.remove(f)),t&&c.insert(t),r&&(f=hve(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function oVt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function aVt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const pve={};function uVt(e,t){const n=pve[t]||(pve[t]=ld(t));return Xe(e)?e.map(n):n(e)}function Kie(e){return Xe(e)||ArrayBuffer.isView(e)?e:null}function Xie(e){return Kie(e)||(Pt(e)?e:null)}function lVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Kie(e).join(...n)}function cVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xie(e).indexOf(...n)}function fVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xie(e).lastIndexOf(...n)}function dVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xie(e).slice(...n)}function hVt(e,t,n){return Gn(n)&&Ye("Function argument passed to replace."),String(e).replace(t,n)}function pVt(e){return Kie(e).slice().reverse()}function mVt(e,t,n){return xre(e||0,t||0,n||0)}function gVt(e,t){const n=Lm(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function yVt(e,t){const n=Lm(e,(t||this).context);return n?n.copy():void 0}function vVt(e,t){const n=Lm(e,(t||this).context);return n?n.domain():[]}function bVt(e,t,n){const r=Lm(e,(n||this).context);return r?Xe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function xVt(e,t){const n=Lm(e,(t||this).context);return n&&n.range?n.range():[]}function _Vt(e,t,n){const r=Lm(e,(n||this).context);return r?r(t):void 0}function wVt(e,t,n,r,i){e=Lm(e,(i||this).context);const s=jMe(t,n);let o=e.domain(),a=o[0],u=$r(o),l=Iu;return u-a?l=IMe(e,a,u):e=(e.interpolator?ri("sequential")().interpolator(e.interpolator()):ri("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==$r(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function EVt(e,t,n){const r=Lm(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function SVt(e){let t=null;return function(n){return n?QR(n,t=t||$T(e)):e}}const QFe=e=>e.data;function JFe(e,t){const n=WFe.call(t,e);return n.root&&n.root.lookup||{}}function TVt(e,t,n){const r=JFe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(QFe):void 0}function CVt(e,t){const n=JFe(e,this)[t];return n?n.ancestors().map(QFe):void 0}const ZFe=()=>typeof window<"u"&&window||null;function AVt(){const e=ZFe();return e?e.screen:{}}function IVt(){const e=ZFe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function kVt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function e5e(e,t,n){if(!e)return[];const[r,i]=e,s=new Eo().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return LLe(o,s,RVt(t))}function RVt(e){let t=null;if(e){const n=Nt(e.marktype),r=Nt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function DVt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Nt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function NVt(e){return Nt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function PVt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Eo().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),e5e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>OVt(u.x,u.y,t))}function OVt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const iD={random(){return dd()},cumulativeNormal:W8,cumulativeLogNormal:jne,cumulativeUniform:Hne,densityNormal:$ne,densityLogNormal:Bne,densityUniform:Vne,quantileNormal:G8,quantileLogNormal:Une,quantileUniform:qne,sampleNormal:q8,sampleLogNormal:Fne,sampleUniform:zne,isArray:Xe,isBoolean:Wv,isDate:S1,isDefined(e){return e!==void 0},isNumber:Kr,isObject:Ot,isRegExp:F6e,isString:Pt,isTuple:U8,isValid(e){return e!=null&&e===e},toBoolean:bne,toDate(e){return xne(e)},toNumber:vu,toString:_ne,indexof:cVt,join:lVt,lastindexof:fVt,replace:hVt,reverse:pVt,slice:dVt,flush:M6e,lerp:B6e,merge:rVt,pad:z6e,peek:$r,pluck:uVt,span:IN,inrange:JE,truncate:V6e,rgb:V1,lab:F$,hcl:B$,hsl:M$,luminance:MY,contrast:nVt,sequence:Kl,format:Mzt,utcFormat:Lzt,utcParse:Bzt,utcOffset:r$e,utcSequence:o$e,timeFormat:GFe,timeParse:Fzt,timeOffset:n$e,timeSequence:s$e,timeUnitSpecifier:q6e,monthFormat:jzt,monthAbbrevFormat:Uzt,dayFormat:zzt,dayAbbrevFormat:Vzt,quarter:N6e,utcquarter:P6e,week:G6e,utcweek:X6e,dayofyear:W6e,utcdayofyear:K6e,warn:Zzt,info:eVt,debug:tVt,extent(e){return gm(e)},inScope:Jzt,intersect:e5e,clampRange:O6e,pinchDistance:oVt,pinchAngle:aVt,screen:AVt,containerSize:kVt,windowSize:IVt,bandspace:mVt,setdata:Ozt,pathShape:SVt,panLinear:I6e,panLog:k6e,panPow:R6e,panSymlog:D6e,zoomLinear:hne,zoomLog:pne,zoomPow:aL,zoomSymlog:mne,encode:$zt,modify:sVt,lassoAppend:DVt,lassoPath:NVt,intersectLasso:PVt},$Vt=["view","item","group","xy","x","y"],MVt="event.vega.",t5e="this.",Qie={},n5e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Et(YFe+e)}]`,functions:LVt,constants:UFe,visitors:Qie},r5e=VFe(n5e);function LVt(e){const t=zFe(e);$Vt.forEach(n=>t[n]=MVt+n);for(const n in iD)t[n]=t5e+n;return Wn(t,Gzt(e,iD,Qie)),t}function ho(e,t,n){return arguments.length===1?iD[e]:(iD[e]=t,n&&(Qie[e]=n),r5e.functions[e]=t5e+e,this)}ho("bandwidth",gVt,ol);ho("copy",yVt,ol);ho("domain",vVt,ol);ho("range",xVt,ol);ho("invert",bVt,ol);ho("scale",_Vt,ol);ho("gradient",wVt,ol);ho("geoArea",Yzt,ol);ho("geoBounds",Kzt,ol);ho("geoCentroid",Xzt,ol);ho("geoShape",EVt,ol);ho("geoScale",Qzt,ol);ho("indata",Pzt,Wzt);ho("data",WFe,Wie);ho("treePath",TVt,Wie);ho("treeAncestors",CVt,Wie);ho("vlSelectionTest",Tzt,qie);ho("vlSelectionIdTest",Izt,qie);ho("vlSelectionResolve",Rzt,qie);ho("vlSelectionTuples",kzt);function vm(e,t){const n={};let r;try{e=Pt(e)?e:Et(e)+"",r=Vie(e)}catch{Ye("Expression parse error: "+e)}r.visit(s=>{if(s.type!==OFe)return;const o=s.callee.name,a=n5e.visitors[o];a&&a(o,s.arguments,t,n)});const i=r5e(r);return i.globals.forEach(s=>{const o=YFe+s;!sn(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Wn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function FVt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const BVt=Ph(["rule"]),mve=Ph(["group","image","rect"]);function jVt(e,t){let n="";return BVt[t]||(e.x2&&(e.x?(mve[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(mve[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Jie(e){return(e+"").toLowerCase()}function UVt(e){return Jie(e)==="operator"}function zVt(e){return Jie(e)==="collect"}function RA(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function VVt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var HVt={operator:(e,t)=>RA(e,["_"],t.code),parameter:(e,t)=>RA(e,["datum","_"],t.code),event:(e,t)=>RA(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return RA(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+Et(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=jVt(r,n),i+="return m;",RA(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(Et).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),VVt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function qVt(e){const t=this;UVt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function WVt(e){const t=this;if(e.params){const n=t.get(e.id);n||Ye("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function GVt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Xe(i)?i.map(s=>gve(s,n,t)):gve(i,n,t)}return t}function gve(e,t,n){if(!e||!Ot(e))return e;for(let r=0,i=yve.length,s;r<i;++r)if(s=yve[r],sn(e,s.key))return s.parse(e,t,n);return e}var yve=[{key:"$ref",parse:YVt},{key:"$key",parse:XVt},{key:"$expr",parse:KVt},{key:"$field",parse:QVt},{key:"$encode",parse:ZVt},{key:"$compare",parse:JVt},{key:"$context",parse:eHt},{key:"$subflow",parse:tHt},{key:"$tupleid",parse:nHt}];function YVt(e,t){return t.get(e.$ref)||Ye("Operator not defined: "+e.$ref)}function KVt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Sc(t.parameterExpression(e.$expr),e.$fields))}function XVt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=vne(e.$key,e.$flat,t.expr.codegen))}function QVt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=ld(e.$field,e.$name,t.expr.codegen))}function JVt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Nt(e.$compare).map(i=>i&&i.$tupleid?nn:i);return t.fn[n]||(t.fn[n]=gne(r,e.$order,t.expr.codegen))}function ZVt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Sc(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function eHt(e,t){return t}function tHt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function nHt(){return nn}function rHt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Ye("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function iHt(e){var t=this,n=Ot(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Ye("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const sHt={skip:!0};function oHt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function aHt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],sHt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(cd).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function i5e(e,t,n,r){return new s5e(e,t,n,r)}function s5e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||HVt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function vve(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}s5e.prototype=vve.prototype={fork(){const e=new vve(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),zVt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Jie(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:FVt,parseOperator:qVt,parseOperatorParameters:WVt,parseParameters:GVt,parseStream:rHt,parseUpdate:iHt,getState:oHt,setState:aHt};function uHt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),o5e(t,e.description()))}function o5e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function lHt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const xV="default";function cHt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:xV,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Pt(i)?i:i.user:xV,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Pt(r)||(i=r.item,r=r.user),LY(e,r&&r!==xV?r:i||r),i},{cursor:t})}function LY(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function kL(e,t){var n=e._runtime.data;return sn(n,t)||Ye("Unrecognized data set: "+t),n[t]}function fHt(e,t){return arguments.length<2?kL(this,e).values.value:vB.call(this,e,rw().remove(cd).insert(t))}function vB(e,t){C$e(t)||Ye("Second argument to changes must be a changeset.");const n=kL(this,e);return n.modified=!0,this.pulse(n.input,t)}function dHt(e,t){return vB.call(this,e,rw().insert(t))}function hHt(e,t){return vB.call(this,e,rw().remove(t))}function a5e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function u5e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function bB(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function pHt(e){var t=bB(e),n=a5e(e),r=u5e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function mHt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=bB(e),o=t.changedTouches?t.changedTouches[0]:t,s=cB(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=gHt(e,n,s),t}function gHt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Pt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:ku(e),item:ku(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const bve="view",yHt="timer",vHt="window",bHt={trap:!1};function xHt(e){const t=Wn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Xe(r[s])&&(r[s]=Ph(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function l5e(e,t,n,r){e._eventListeners.push({type:n,sources:Nt(t),handler:r})}function _Ht(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function PO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ot(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function wHt(e,t,n){var r=this,i=new H8(n),s=function(l,c){r.runAsync(null,()=>{e===bve&&_Ht(r,t)&&l.preventDefault(),i.receive(mHt(r,l,c))})},o;if(e===yHt)PO(r,"timer",t)&&r.timer(s,t);else if(e===bve)PO(r,"view",t)&&r.addEventListener(t,s,bHt);else if(e===vHt?PO(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&PO(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);l5e(r,o,t,s)}return i}function xve(e){return e.item}function _ve(e){return e.item.mark.source}function wve(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function EHt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",xve),_ve,wve(e)),this.on(this.events("view","pointerout",xve),_ve,wve(t)),this}function SHt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function tf(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const THt="vega-bind",CHt="vega-bind-name",AHt="vega-bind-radio";function IHt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=yne(r.debounce,i.update))),(r.input==null&&r.element?kHt:DHt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function kHt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),l5e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(RHt(i))}}function RHt(e){return typeof Event<"u"?new Event(e):{type:e}}function DHt(e,t,n,r){const i=r.signal(n.signal),s=tf("div",{class:THt}),o=n.input==="radio"?s:s.appendChild(tf("label"));o.appendChild(tf("span",{class:CHt},n.name||n.signal)),t.appendChild(s);let a=NHt;switch(n.input){case"checkbox":a=PHt;break;case"select":a=OHt;break;case"radio":a=$Ht;break;case"range":a=MHt;break}a(e,o,n,i)}function NHt(e,t,n,r){const i=tf("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function PHt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=tf("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function OHt(e,t,n,r){const i=tf("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};RL(o,r)&&(u.selected=!0),i.appendChild(tf("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(RL(n.options[a],o)){i.selectedIndex=a;return}}}function $Ht(e,t,n,r){const i=tf("span",{class:AHt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};RL(o,r)&&(u.checked=!0);const l=tf("input",u);l.addEventListener("change",()=>e.update(o));const c=tf("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)RL(a[l].value,o)&&(a[l].checked=!0)}}function MHt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||z1(s,i,100),a=tf("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=tf("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function RL(e,t){return e===t||e+""==t+""}function c5e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,a5e(e),u5e(e),bB(e),i,s).background(e.background())}function Zie(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function LHt(e,t,n,r){const i=new r(e.loader(),Zie(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,bB(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function FHt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=fB(r);e=n._el=e?_V(n,e,!0):null,uHt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||HN,a=e?s.renderer:s.headless;return n._renderer=a?c5e(n,n._renderer,e,a):null,n._handler=LHt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=_V(n,t,!0):e.appendChild(tf("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=_V(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{IHt(n,u.element||t,u)})),n}function _V(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const DA=e=>+e||0,BHt=e=>({top:e,bottom:e,left:e,right:e});function Eve(e){return Ot(e)?{top:DA(e.top),bottom:DA(e.bottom),left:DA(e.left),right:DA(e.right)}:BHt(DA(e))}async function ese(e,t,n,r){const i=fB(t),s=i&&i.headless;return s||Ye("Unrecognized renderer type: "+t),await e.runAsync(),c5e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function jHt(e,t){e!==r1.Canvas&&e!==r1.SVG&&e!==r1.PNG&&Ye("Unrecognized image type: "+e);const n=await ese(this,e,t);return e===r1.SVG?UHt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function UHt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function zHt(e,t){return(await ese(this,r1.Canvas,e,t)).canvas()}async function VHt(e){return(await ese(this,r1.SVG,e)).svg()}function HHt(e,t,n){return i5e(e,DT,iD,n).parse(t)}function qHt(e){var t=this._runtime.scales;return sn(t,e)||Ye("Unrecognized scale or projection: "+e),t[e].value}var f5e="width",d5e="height",tse="padding",Sve={skip:!0};function h5e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===tse?r.left+r.right:0)}function p5e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===tse?r.top+r.bottom:0)}function WHt(e){var t=e._signals,n=t[f5e],r=t[d5e],i=t[tse];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=h5e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=p5e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function GHt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(f5e,n,Sve),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(d5e,r,Sve),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function YHt(e){return this._runtime.getState(e||{data:KHt,signals:XHt,recurse:!0})}function KHt(e,t){return t.modified&&Xe(t.input.value)&&!e.startsWith("_:vega:_")}function XHt(e,t){return!(e==="parent"||t instanceof DT.proxy)}function QHt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function JHt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(H_t(n,t))}function ZHt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",eqt(r))}function eqt(e){return e==null?"":Xe(e)?m5e(e):Ot(e)&&!S1(e)?tqt(e):e+""}function tqt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Xe(n)?m5e(n):g5e(n))}).join(`
`)}function m5e(e){return"["+e.map(g5e).join(", ")+"]"}function g5e(e){return Xe(e)?"[]":Ot(e)&&!S1(e)?"{}":e}function nqt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function y5e(e,t){const n=this;if(t=t||{},kS.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Wn({},e.locale,t.locale);n.locale(g$e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||r1.Canvas,n._scenegraph=new cLe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||ZHt,n._redraw=!0,n._handler=new HN().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=xHt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=HHt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Wn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=h5e(n,n._width),n._viewHeight=p5e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,WHt(n),lHt(n),cHt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function OO(e,t){return sn(e._signals,t)?e._signals[t]:Ye("Unrecognized signal name: "+Et(t))}function v5e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Tve(e,t,n,r){let i=v5e(n,r);return i||(i=Zie(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Cve(e,t,n){const r=v5e(t,n);return r&&t._targets.remove(r),e}Ct(y5e,kS,{async evaluate(e,t,n){if(await kS.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,pHt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&n6(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&o5e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=OO(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Eve(e)):Eve(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(fB(e)||Ye("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(kS.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(OO(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:GHt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Zie(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Tve(this,e,OO(this,e),t)},removeSignalListener(e,t){return Cve(this,OO(this,e),t)},addDataListener(e,t){return Tve(this,e,kL(this,e).values,t)},removeDataListener(e,t){return Cve(this,kL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=LY(this,null);this._globalCursor=!!e,t&&LY(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:JHt,events:wHt,finalize:SHt,hover:EHt,data:fHt,change:vB,insert:dHt,remove:hHt,scale:qHt,initialize:FHt,toImageURL:jHt,toCanvas:zHt,toSVG:VHt,getState:YHt,setState:QHt,_watchPixelRatio:nqt});const rqt="view",DL="[",NL="]",b5e="{",x5e="}",iqt=":",_5e=",",sqt="@",oqt=">",aqt=/[[\]{}]/,uqt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let w5e,E5e;function Yv(e,t,n){return w5e=t||rqt,E5e=n||uqt,S5e(e.trim()).map(FY)}function lqt(e){return E5e[e]}function wk(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function S5e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=wk(e,i,_5e,DL+b5e,NL+x5e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function FY(e){return e[0]==="["?cqt(e):fqt(e)}function cqt(e){const t=e.length;let n=1,r;if(n=wk(e,n,NL,DL,NL),n===t)throw"Empty between selector: "+e;if(r=S5e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==oqt)throw"Expected '>' after between selector: "+e;r=r.map(FY);const i=FY(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function fqt(e){const t={source:w5e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===x5e){if(a=e.lastIndexOf(b5e),a>=0){try{r=dqt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===sqt&&(i=++a),u=wk(e,a,iqt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=wk(e,a,DL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=wk(e,a,NL),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==DL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||aqt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):lqt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function dqt(e){const t=e.split(_5e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function hqt(e){return Ot(e)?e:{type:e||"pad"}}const NA=e=>+e||0,pqt=e=>({top:e,bottom:e,left:e,right:e});function mqt(e){return Ot(e)?e.signal?e:{top:NA(e.top),bottom:NA(e.bottom),left:NA(e.left),right:NA(e.right)}:pqt(NA(e))}const fa=e=>Ot(e)&&!Xe(e)?Wn({},e):{value:e};function Ave(e,t,n,r){return n!=null?(Ot(n)&&!Xe(n)||Xe(n)&&n.length&&Ot(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function za(e,t,n){for(const r in t)Ave(e,r,t[r]);for(const r in n)Ave(e,r,n[r],"update")}function lC(e,t,n){for(const r in t)n&&sn(n,r)||(e[r]=Wn(e[r]||{},t[r]));return e}function TE(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const nse="mark",rse="frame",ise="scope",gqt="axis",yqt="axis-domain",vqt="axis-grid",bqt="axis-label",xqt="axis-tick",_qt="axis-title",wqt="legend",Eqt="legend-band",Sqt="legend-entry",Tqt="legend-gradient",T5e="legend-label",Cqt="legend-symbol",Aqt="legend-title",Iqt="title",kqt="title-text",Rqt="title-subtitle";function Dqt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!TE(u,e)&&wV(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===rse?i.group:n===nse?Wn({},i.mark,i[t]):null;for(u in c)l=TE(u,e)||(u==="fill"||u==="stroke")&&(TE("fill",e)||TE("stroke",e)),l||wV(s,u,c[u]);Nt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)TE(h,e)||wV(s,h,d[h])}),e=Wn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=Wn(o,e.enter),a&&(e.update=Wn(a,e.update)),e}function wV(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const C5e=e=>Pt(e)?Et(e):e.signal?`(${e.signal})`:A5e(e);function xB(e){if(e.gradient!=null)return Pqt(e);let t=e.signal?`(${e.signal})`:e.color?Nqt(e.color):e.field!=null?A5e(e.field):e.value!==void 0?Et(e.value):void 0;return e.scale!=null&&(t=Oqt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${g6(e.exponent)})`),e.mult!=null&&(t+=`*${g6(e.mult)}`),e.offset!=null&&(t+=`+${g6(e.offset)}`),e.round&&(t=`round(${t})`),t}const $O=(e,t,n,r)=>`(${e}(${[t,n,r].map(xB).join(",")})+'')`;function Nqt(e){return e.c?$O("hcl",e.h,e.c,e.l):e.h||e.s?$O("hsl",e.h,e.s,e.l):e.l||e.a?$O("lab",e.l,e.a,e.b):e.r||e.g||e.b?$O("rgb",e.r,e.g,e.b):null}function Pqt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Et(n));for(;t.length&&$r(t)==null;)t.pop();return t.unshift(C5e(e.gradient)),`gradient(${t.join(",")})`}function g6(e){return Ot(e)?"("+xB(e)+")":e}function A5e(e){return I5e(Ot(e)?e:{datum:e})}function I5e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Ye("Invalid field reference: "+Et(e));return e.signal||(r=Pt(r)?Om(r).map(Et).join("]["):I5e(r)),t+"["+r+"]"}function Oqt(e,t){const n=C5e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+g6(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function $qt(e){let t="";return e.forEach(n=>{const r=xB(n);t+=n.test?`(${n.test})?${r}:`:r}),$r(t)===":"&&(t+="null"),t}function k5e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=Dqt(e,t,n,r,i.config);for(const a in e)o[a]=Mqt(e[a],t,s,i);return s}function Mqt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=Fqt(Lqt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Lqt(e){return Xe(e)?$qt(e):xB(e)}function Fqt(e,t,n,r){const i=vm(e,t);return i.$fields.forEach(s=>r[s]=1),Wn(n,i.$params),i.$expr}const Bqt="outer",jqt=["value","update","init","react","bind"];function Ive(e,t){Ye(e+' for "outer" push: '+Et(t))}function R5e(e,t){const n=e.name;if(e.push===Bqt)t.signals[n]||Ive("No prior signal definition",n),jqt.forEach(r=>{e[r]!==void 0&&Ive("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function BY(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function _B(e,t,n,r){return new BY(e,t,n,r)}function PL(e,t){return _B("operator",e,t)}function tn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function sD(e,t){return t?{$field:e,$name:t}:{$field:e}}const jY=sD("key");function kve(e,t){return{$compare:e,$order:t}}function Uqt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const zqt="ascending",Vqt="descending";function Hqt(e){return Ot(e)?(e.order===Vqt?"-":"+")+wB(e.op,e.field):""}function wB(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const sse="scope",UY="view";function Uo(e){return e&&e.signal}function qqt(e){return e&&e.expr}function y6(e){if(Uo(e))return!0;if(Ot(e)){for(const t in e)if(y6(e[t]))return!0}return!1}function Zd(e,t){return e??t}function Lx(e){return e&&e.signal||e}const Rve="timer";function oD(e,t){return(e.merge?Gqt:e.stream?Yqt:e.type?Kqt:Ye("Invalid stream specification: "+Et(e)))(e,t)}function Wqt(e){return e===sse?UY:e||UY}function Gqt(e,t){const n=e.merge.map(i=>oD(i,t)),r=ose({merge:n},e,t);return t.addStream(r).id}function Yqt(e,t){const n=oD(e.stream,t),r=ose({stream:n},e,t);return t.addStream(r).id}function Kqt(e,t){let n;e.type===Rve?(n=t.event(Rve,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Wqt(e.source),e.type);const r=ose({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function ose(e,t,n){let r=t.between;return r&&(r.length!==2&&Ye('Stream "between" parameter must have 2 entries: '+Et(t)),e.between=[oD(r[0],n),oD(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(Xqt(t.marktype,t.markname,t.markrole)),t.source===sse&&r.push("inScope(event.item)"),r.length&&(e.filter=vm("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function Xqt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Qqt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Jqt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Ye("Signal update missing events specification."),Pt(s)&&(s=Yv(s,t.isSubscope()?sse:UY)),s=Nt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[eWt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Ye("Signal encode and update are mutually exclusive."),o="encode(item(),"+Et(r)+")"),i.update=Pt(o)?vm(o,t):o.expr!=null?vm(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Qqt,$params:{$value:t.signalRef(o.signal)}}:Ye("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(Wn(Zqt(u,t),i)))}function Zqt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):oD(e,t)}}function eWt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function tWt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Ye("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=vm(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Jqt(i,t,n.id))}const Ui=e=>(t,n,r)=>_B(e,n,t||void 0,r),D5e=Ui("aggregate"),nWt=Ui("axisticks"),N5e=Ui("bound"),Gh=Ui("collect"),Dve=Ui("compare"),rWt=Ui("datajoin"),P5e=Ui("encode"),iWt=Ui("expression"),sWt=Ui("facet"),oWt=Ui("field"),aWt=Ui("key"),uWt=Ui("legendentries"),lWt=Ui("load"),cWt=Ui("mark"),fWt=Ui("multiextent"),dWt=Ui("multivalues"),hWt=Ui("overlap"),pWt=Ui("params"),O5e=Ui("prefacet"),mWt=Ui("projection"),gWt=Ui("proxy"),yWt=Ui("relay"),$5e=Ui("render"),vWt=Ui("scale"),ow=Ui("sieve"),bWt=Ui("sortitems"),M5e=Ui("viewlayout"),xWt=Ui("values");let _Wt=0;const L5e={min:"min",max:"max",count:"sum"};function wWt(e,t){const n=e.type||"linear";wMe(n)||Ye("Unrecognized scale type: "+Et(n)),t.addScale(e.name,{type:n,domain:void 0})}function EWt(e,t){const n=t.getScale(e.name).params;let r;n.domain=F5e(e.domain,e,t),e.range!=null&&(n.range=j5e(e,t,n)),e.interpolate!=null&&PWt(e.interpolate,n),e.nice!=null&&(n.nice=NWt(e.nice,t)),e.bins!=null&&(n.bins=DWt(e.bins,t));for(r in e)sn(n,r)||r==="name"||(n[r]=Zf(e[r],t))}function Zf(e,t){return Ot(e)?e.signal?t.signalRef(e.signal):Ye("Unsupported object: "+Et(e)):e}function v6(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Zf(n,t))}function EB(e){Ye("Can not find data set: "+Et(e))}function F5e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Ye("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Xe(e)?SWt:e.fields?CWt:TWt)(e,t,n)}function SWt(e,t,n){return e.map(r=>Zf(r,n))}function TWt(e,t,n){const r=n.getData(e.data);return r||EB(e.data),OT(t.type)?r.valuesRef(n,e.field,B5e(e.sort,!1)):TMe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function CWt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Pt(o)?{data:r,field:o}:Xe(o)||o.signal?AWt(o,n):o,s.push(o),s),[]);return(OT(t.type)?IWt:TMe(t.type)?kWt:RWt)(e,n,i)}function AWt(e,t){const n="_:vega:_"+_Wt++,r=Gh({});if(Xe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+Et(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,ow({})]),{data:n,field:"data"}}function IWt(e,t,n){const r=B5e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||EB(l.data),c.countsRef(t,l.field,r)}),a={groupby:jY,pulse:o};r&&(i=r.op||"count",s=r.field?wB(i,r.field):"count",a.ops=[L5e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(D5e(a));const u=t.add(Gh({pulse:tn(i)}));return s=t.add(xWt({field:jY,sort:t.sortRef(r),pulse:tn(u)})),tn(s)}function B5e(e,t){return e&&(!e.field&&!e.op?Ot(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Ye("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!L5e[e.op]&&Ye("Multiple domain scales can not be sorted using "+e.op)),e}function kWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||EB(i.data),s.domainRef(t,i.field)});return tn(t.add(dWt({values:r})))}function RWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||EB(i.data),s.extentRef(t,i.field)});return tn(t.add(fWt({extents:r})))}function DWt(e,t){return e.signal||Xe(e)?v6(e,t):t.objectProperty(e)}function NWt(e,t){return e.signal?t.signalRef(e.signal):Ot(e)?{interval:Zf(e.interval),step:Zf(e.step)}:Zf(e)}function PWt(e,t){t.interpolate=Zf(e.type||e),e.gamma!=null&&(t.interpolateGamma=Zf(e.gamma))}function j5e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Pt(i)){if(r&&sn(r,i))return e=Wn({},e,{range:r[i]}),j5e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=OT(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Ye("Unrecognized scale range value: "+Et(i))}else if(i.scheme){n.scheme=Xe(i.scheme)?v6(i.scheme,t):Zf(i.scheme,t),i.extent&&(n.schemeExtent=v6(i.extent,t)),i.count&&(n.schemeCount=Zf(i.count,t));return}else if(i.step){n.rangeStep=Zf(i.step,t);return}else{if(OT(e.type)&&!Xe(i))return F5e(i,e,t);Xe(i)||Ye("Unsupported range type: "+Et(i))}return i.map(s=>(Xe(s)?v6:Zf)(s,t))}function OWt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=zY(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=zY(n[i],i,t));t.addProjection(e.name,r)}function zY(e,t,n){return Xe(e)?e.map(r=>zY(r,t,n)):Ot(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Ye("Unsupported parameter object: "+Et(e)):e}const Yh="top",cC="left",fC="right",lv="bottom",U5e="center",$Wt="vertical",MWt="start",LWt="middle",FWt="end",VY="index",ase="label",BWt="offset",BT="perc",jWt="perc2",nd="value",KN="guide-label",use="guide-title",UWt="group-title",zWt="group-subtitle",Nve="symbol",b6="gradient",HY="discrete",qY="size",VWt="shape",HWt="fill",qWt="stroke",WWt="strokeWidth",GWt="strokeDash",YWt="opacity",lse=[qY,VWt,HWt,qWt,WWt,GWt,YWt],XN={name:1,style:1,interactive:1},jr={value:0},rd={value:1},SB="group",z5e="rect",cse="rule",KWt="symbol",aw="text";function aD(e){return e.type=SB,e.interactive=e.interactive||!1,e}function Tc(e,t){const n=(r,i)=>Zd(e[r],Zd(t[r],i));return n.isVertical=r=>$Wt===Zd(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Zd(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Zd(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Zd(e.columns,Zd(t.columns,+n.isVertical(!0))),n}function V5e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function XWt(e,t,n){const r=t.config.style[n];return r&&r[e]}function TB(e,t,n){return`item.anchor === '${MWt}' ? ${e} : item.anchor === '${FWt}' ? ${t} : ${n}`}const fse=TB(Et(cC),Et(fC),Et(U5e));function QWt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ot(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function H5e(e,t){return t?e?Ot(e)?Object.assign({},e,{offset:H5e(e.offset,t)}):{value:e,offset:t}:t:e}function vf(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=lC(e.encode,t,XN)):e.interactive=!1,e}function JWt(e,t,n,r){const i=Tc(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:jr,x:jr,y:jr,width:fa(f),height:fa(d)},update:Wn({},u,{opacity:rd,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:jr}};return za(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),vf({type:z5e,role:Tqt,encode:h},r)}function ZWt(e,t,n,r,i){const s=Tc(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:jr,fill:{scale:t,field:nd}};p[l]={signal:h+"datum."+BT,mult:u},p[c]=jr,p[f]={signal:h+"datum."+jWt,mult:u},p[d]=fa(a);const m={enter:p,update:Wn({},p,{opacity:rd}),exit:{opacity:jr}};return za(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),vf({type:z5e,role:Eqt,key:nd,from:i,encode:m},r)}const eGt=`datum.${BT}<=0?"${cC}":datum.${BT}>=1?"${fC}":"${U5e}"`,tGt=`datum.${BT}<=0?"${lv}":datum.${BT}>=1?"${Yh}":"${LWt}"`;function Pve(e,t,n,r){const i=Tc(e,t),s=i.isVertical(),o=fa(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:jr},update:c={opacity:rd,text:{field:ase}},exit:{opacity:jr}};return za(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Zd(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:tGt},f="y",d="x",h="1-"):(l.align=c.align={signal:eGt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+BT,mult:a},l[d]=c[d]=o,o.offset=Zd(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+VY}:void 0,vf({type:aw,role:T5e,style:KN,key:nd,from:r,encode:p,overlap:u},n)}function nGt(e,t,n,r,i){const s=Tc(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${BWt} : datum.${qY}`,h=l?fa(l):{field:qY},p=`datum.${VY}`,m=`max(1, ${i})`;let g,y,b,x,w;h.mult=.5,g={enter:y={opacity:jr,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:rd,x:y.x,y:y.y},exit:{opacity:jr}};let S=null,T=null;e.fill||(S=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),za(g,{fill:s("symbolFillColor",S),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),lse.forEach(k=>{e[k]&&(b[k]=y[k]={scale:e[k],field:nd})});const C=vf({type:KWt,role:Cqt,key:nd,from:f,clip:l?!0:void 0,encode:g},n.symbols),I=fa(c);I.offset=s("labelOffset"),g={enter:y={opacity:jr,x:{signal:d,offset:I},y:h},update:b={opacity:rd,text:{field:ase},x:y.x,y:y.y},exit:{opacity:jr}},za(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const D=vf({type:aw,role:T5e,style:KN,key:nd,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:jr,height:l?fa(l):jr,opacity:jr},exit:{opacity:jr},update:b={opacity:rd,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(x=`ceil(item.mark.items.length / ${m})`,b.row.signal=`${p}%${x}`,b.column.signal=`floor(${p} / ${x})`,w={field:["row",p]}):(b.row.signal=`floor(${p} / ${m})`,b.column.signal=`${p} % ${m}`,w={field:p}),b.column.signal=`(${i})?${b.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:VY}},aD({role:ise,from:r,encode:lC(g,o,XN),marks:[C,D],name:u,interactive:a,sort:w})}function rGt(e,t){const n=Tc(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const dse='item.orient === "left"',hse='item.orient === "right"',CB=`(${dse} || ${hse})`,iGt=`datum.vgrad && ${CB}`,sGt=TB('"top"','"bottom"','"middle"'),oGt=TB('"right"','"left"','"center"'),aGt=`datum.vgrad && ${hse} ? (${oGt}) : (${CB} && !(datum.vgrad && ${dse})) ? "left" : ${fse}`,uGt=`item._anchor || (${CB} ? "middle" : "start")`,lGt=`${iGt} ? (${dse} ? -90 : 90) : 0`,cGt=`${CB} ? (datum.vgrad ? (${hse} ? "bottom" : "top") : ${sGt}) : "top"`;function fGt(e,t,n,r){const i=Tc(e,t),s={enter:{opacity:jr},update:{opacity:rd,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:jr}};return za(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:uGt},angle:{signal:lGt},align:{signal:aGt},baseline:{signal:cGt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),vf({type:aw,role:Aqt,style:use,from:r,encode:s},n)}function dGt(e,t){let n;return Ot(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Ove(e.path)+")":e.sphere&&(n="geoShape("+Ove(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Ove(e){return Ot(e)&&e.signal?e.signal:Et(e)}function q5e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===SB?ise:t||nse}function hGt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||q5e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function pGt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function pse(e,t){const n=k$e(e.type);n||Ye("Unrecognized transform type: "+Et(e.type));const r=_B(n.type.toLowerCase(),null,W5e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function W5e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=mGt(o,t,n)}return r}function mGt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return gGt(e,t,n);if(i===void 0){e.required&&Ye("Missing required "+Et(t.type)+" parameter: "+Et(e.name));return}else{if(r==="param")return yGt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Uo(i)?i.map(s=>$ve(e,s,n)):$ve(e,i,n)}function $ve(e,t,n){const r=e.type;if(Uo(t))return Lve(r)?Ye("Expression references can not be signals."):EV(r)?n.fieldRef(t):Fve(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||EV(r);return i&&vGt(t)?n.exprRef(t.expr,t.as):i&&bGt(t)?sD(t.field,t.as):Lve(r)?vm(t,n):xGt(r)?tn(n.getData(t).values):EV(r)?sD(t):Fve(r)?n.compareRef(t):t}}function gGt(e,t,n){return Pt(t.from)||Ye('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function yGt(e,t,n){const r=t[e.name];return e.array?(Xe(r)||Ye("Expected an array of sub-parameters. Instead: "+Et(r)),r.map(i=>Mve(e,i,n))):Mve(e,r,n)}function Mve(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Ye("Unsupported parameter: "+Et(t));const s=Wn(W5e(i,t,n),i.key);return tn(n.add(pWt(s)))}const vGt=e=>e&&e.expr,bGt=e=>e&&e.field,xGt=e=>e==="data",Lve=e=>e==="expr",EV=e=>e==="field",Fve=e=>e==="compare";function _Gt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Ye("Only group marks can be faceted."),r.field!=null?o=a=x6(r,n):(e.data?a=tn(n.getData(e.data).aggregate):(s=pse(Wn({type:"aggregate",groupby:Nt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=x6(r,n),o=a=tn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=tn(n.add(Gh(null,[{}]))),o||(o=x6(e,n)),{key:i,pulse:o,parent:a}}function x6(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:tn(t.getData(e.data).output)}function p_(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}p_.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=tn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new p_(e,s,i,r,o)};function G5e(e){return Pt(e)?e:null}function Bve(e,t,n){const r=wB(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function PA(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=Hqt(s);let l=G5e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:jY,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:tn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(_B(r,void 0,d)),o&&(t.index[i]=f),c=tn(f),l!=null&&(a[l]=c)}return c}p_.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=G5e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Bve(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:tn(r.output)},n&&n.field&&Bve(e,u,n),a=e.add(D5e(u)),o=e.add(Gh({pulse:tn(a)})),o={agg:a,ref:tn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return tn(this.values)},extentRef(e,t){return PA(e,this,"extent","extent",t,!1)},domainRef(e,t){return PA(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return PA(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return PA(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return PA(e,this,"indata","tupleindex",t,!0,!0)}};function wGt(e,t,n){const r=e.from.facet,i=r.name,s=x6(r,t);let o;r.name||Ye("Facet must have a name: "+Et(r)),r.data||Ye("Facet must reference a data set: "+Et(r)),r.field?o=t.add(O5e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(sWt({key:t.keyRef(r.groupby),group:tn(t.proxy(n.parent)),pulse:s})):Ye("Facet must specify groupby or field: "+Et(r));const a=t.fork(),u=a.add(Gh()),l=a.add(ow({pulse:tn(u)}));a.addData(i,new p_(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function EGt(e,t,n){const r=t.add(O5e({pulse:n.pulse})),i=t.fork();i.add(ow()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function Y5e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(PL()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=vm(l,t);u.update=c.$expr,u.params=c.$params}function AB(e,t){const n=q5e(e),r=e.type===SB,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===ise||n===rse,a,u,l,c,f,d,h;const p=n===nse||o||i,m=_Gt(e.from,r,t);u=t.add(rWt({key:m.key||(e.key?sD(e.key):void 0),pulse:m.pulse,clean:!r}));const g=tn(u);u=l=t.add(Gh({pulse:g})),u=t.add(cWt({markdef:hGt(e),interactive:pGt(e.interactive,t),clip:dGt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:tn(u)}));const y=tn(u);u=c=t.add(P5e(k5e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const C=pse(T,t),I=C.metadata;(I.generates||I.changes)&&Ye("Mark transforms should not generate new data."),I.nomod||(c.params.mod=!0),C.params.pulse=tn(u),t.add(u=C)}),e.sort&&(u=t.add(bWt({sort:t.compareRef(e.sort),pulse:tn(u)})));const b=tn(u);(i||o)&&(o=t.add(M5e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:b})),d=tn(o));const x=t.add(N5e({mark:y,pulse:d||b}));h=tn(x),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,d||h,g),i?wGt(e,t,m):p?EGt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(x))),s&&(h=SGt(s,h,t));const w=t.add($5e({pulse:h})),S=t.add(ow({pulse:tn(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new p_(t,l,w,S)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&Ye("Marks only support modify triggers."),Y5e(T,t,f)}))}function SGt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Uo(s)?n.signalRef(s.signal):s,method:Uo(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Uo(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return tn(n.add(hWt(o)))}function TGt(e,t){const n=t.config.legend,r=e.encode||{},i=Tc(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;lse.forEach(x=>e[x]?(l[x]=e[x],c=c||e[x]):0),c||Ye("Missing valid scale for legend.");const p=CGt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=tn(t.add(Gh(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},b=tn(t.add(uWt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===b6?(h=[JWt(e,c,n,r.gradient),Pve(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${Lx(i.gradientLength())})/100))`)):p===HY?h=[ZWt(e,c,n,r.gradient,b),Pve(e,n,r.labels,b)]:(f=rGt(e,n),h=[nGt(e,n,r,b,Lx(f.columns))],d.size=kGt(e,t,h[0].marks)),h=[aD({role:Sqt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(fGt(e,n,r.title,g)),AB(aD({role:wqt,from:g,encode:lC(IGt(i,e,n),s,XN),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function CGt(e,t){let n=e.type||Nve;return!e.type&&AGt(e)===1&&(e.fill||e.stroke)&&(n=Tre(t)?b6:oY(t)?HY:Nve),n!==b6?n:oY(t)?HY:b6}function AGt(e){return lse.reduce((t,n)=>t+(e[n]?1:0),0)}function IGt(e,t,n){const r={enter:{},update:{}};return za(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function kGt(e,t,n){const r=Lx(jve("size",e,n)),i=Lx(jve("strokeWidth",e,n)),s=Lx(RGt(n[1].encode,t,KN));return vm(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function jve(e,t,n){return t[e]?`scale("${t[e]}",datum)`:V5e(e,n[0].encode)}function RGt(e,t,n){return V5e("fontSize",e)||XWt("fontSize",t,n)}const DGt=`item.orient==="${cC}"?-90:item.orient==="${fC}"?90:0`;function NGt(e,t){e=Pt(e)?{text:e}:e;const n=Tc(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=tn(t.add(Gh(null,[l])));return u.push($Gt(e,n,PGt(e),c)),e.subtitle&&u.push(MGt(e,n,r.subtitle,c)),AB(aD({role:Iqt,from:c,encode:OGt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function PGt(e){const t=e.encode;return t&&t.title||Wn({name:e.name,interactive:e.interactive,style:e.style},t)}function OGt(e,t){const n={enter:{},update:{}};return za(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:fse},angle:{signal:DGt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),lC(n,t,XN)}function $Gt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return za(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vf({type:aw,role:kqt,style:UWt,from:r,encode:o},n)}function MGt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return za(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),vf({type:aw,role:Rqt,style:zWt,from:r,encode:o},n)}function LGt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(pse(r,t))}),e.on&&e.on.forEach(r=>{Y5e(r,t,e.name)}),t.addDataPipeline(e.name,FGt(e,t,n))}function FGt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Uo(e.values)||y6(e.format)?(r.push(Uve(t,e)),r.push(i=wb())):r.push(i=wb({$ingest:e.values,$format:e.format})):e.url?y6(e.url)||y6(e.format)?(r.push(Uve(t,e)),r.push(i=wb())):r.push(i=wb({$request:e.url,$format:e.format})):e.source&&(i=a=Nt(e.source).map(d=>tn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=wb()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=yWt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,wb())),i||r.push(wb()),r.push(ow({})),r}function wb(e){const t=Gh({},e);return t.metadata={source:!0},t}function Uve(e,t){return lWt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const K5e=e=>e===lv||e===Yh,IB=(e,t,n)=>Uo(e)?zGt(e.signal,t,n):e===cC||e===Yh?t:n,da=(e,t,n)=>Uo(e)?jGt(e.signal,t,n):K5e(e)?t:n,Eh=(e,t,n)=>Uo(e)?UGt(e.signal,t,n):K5e(e)?n:t,X5e=(e,t,n)=>Uo(e)?VGt(e.signal,t,n):e===Yh?{value:t}:{value:n},BGt=(e,t,n)=>Uo(e)?HGt(e.signal,t,n):e===fC?{value:t}:{value:n},jGt=(e,t,n)=>Q5e(`${e} === '${Yh}' || ${e} === '${lv}'`,t,n),UGt=(e,t,n)=>Q5e(`${e} !== '${Yh}' && ${e} !== '${lv}'`,t,n),zGt=(e,t,n)=>mse(`${e} === '${cC}' || ${e} === '${Yh}'`,t,n),VGt=(e,t,n)=>mse(`${e} === '${Yh}'`,t,n),HGt=(e,t,n)=>mse(`${e} === '${fC}'`,t,n),Q5e=(e,t,n)=>(t=t!=null?fa(t):t,n=n!=null?fa(n):n,zve(t)&&zve(n)?(t=t?t.signal||Et(t.value):null,n=n?n.signal||Et(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Wn({test:e},t)].concat(n||[])),zve=e=>e==null||Object.keys(e).length===1,mse=(e,t,n)=>({signal:`${e} ? (${tS(t)}) : (${tS(n)})`}),qGt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${cC}' ? (${tS(r)}) : `:"")+(n!=null?`${e} === '${lv}' ? (${tS(n)}) : `:"")+(i!=null?`${e} === '${fC}' ? (${tS(i)}) : `:"")+(t!=null?`${e} === '${Yh}' ? (${tS(t)}) : `:"")+"(null)"}),tS=e=>Uo(e)?e.signal:e==null?null:Et(e),WGt=(e,t)=>t===0?0:Uo(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},RS=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function aE(e,t,n,r){let i;if(t&&sn(t,e))return t[e];if(sn(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[use][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[KN][i]}return null}function Vve(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function GGt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Uo(o)){const f=Vve([n.axisX,n.axisY]),d=Vve([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=da(o,aE(l,n.axisX,i,r),aE(l,n.axisY,i,r));u={};for(l of d)u[l]=qGt(o.signal,aE(l,n.axisTop,i,r),aE(l,n.axisBottom,i,r),aE(l,n.axisLeft,i,r),aE(l,n.axisRight,i,r))}else a=o===Yh||o===lv?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?Wn({},i,a,u,s):i}function YGt(e,t,n,r){const i=Tc(e,t),s=e.orient;let o,a;const u={enter:o={opacity:jr},update:a={opacity:rd},exit:{opacity:jr}};za(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Hve(e,0),c=Hve(e,1);return o.x=a.x=da(s,l,jr),o.x2=a.x2=da(s,c),o.y=a.y=Eh(s,l,jr),o.y2=a.y2=Eh(s,c),vf({type:cse,role:yqt,from:r,encode:u},n)}function Hve(e,t){return{scale:e.scale,range:t}}function KGt(e,t,n,r,i){const s=Tc(e,t),o=e.orient,a=e.gridScale,u=IB(o,1,-1),l=XGt(e.offset,u);let c,f,d;const h={enter:c={opacity:jr},update:d={opacity:rd},exit:f={opacity:jr}};za(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:nd,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=da(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:Wn(m,{mult:u,offset:l});return c.x=d.x=da(o,p,g),c.y=d.y=Eh(o,p,g),c.x2=d.x2=Eh(o,y),c.y2=d.y2=da(o,y),f.x=da(o,p),f.y=Eh(o,p),vf({type:cse,role:vqt,key:nd,from:r,encode:h},n)}function XGt(e,t){if(t!==1)if(!Ot(e))e=Uo(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Wn({},e);for(;n.mult!=null;)if(Ot(n.mult))n=n.mult=Wn({},n.mult);else return n.mult=Uo(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function QGt(e,t,n,r,i,s){const o=Tc(e,t),a=e.orient,u=IB(a,-1,1);let l,c,f;const d={enter:l={opacity:jr},update:f={opacity:rd},exit:c={opacity:jr}};za(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=fa(i);h.mult=u;const p={scale:e.scale,field:nd,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=da(a,jr,p),f.y2=l.y2=da(a,h),c.x=da(a,p),f.x=l.x=Eh(a,jr,p),f.x2=l.x2=Eh(a,h),c.y=Eh(a,p),vf({type:cse,role:xqt,key:nd,from:r,encode:d},n)}function SV(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function JGt(e,t,n,r,i,s){const o=Tc(e,t),a=e.orient,u=e.scale,l=IB(a,-1,1),c=Lx(o("labelFlush")),f=Lx(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=fa(i);g.mult=l,g.offset=fa(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:nd,band:.5,offset:H5e(s.offset,o("labelOffset"))},b=da(a,p?SV(u,c,'"left"','"right"','"center"'):{value:"center"},BGt(a,"left","right")),x=da(a,X5e(a,"bottom","top"),p?SV(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=SV(u,c,`-(${f})`,f,0);p=p&&f;const S={opacity:jr,x:da(a,y,g),y:Eh(a,y,g)},T={enter:S,update:m={opacity:rd,text:{field:ase},x:S.x,y:S.y,align:b,baseline:x},exit:{opacity:jr,x:S.x,y:S.y}};za(T,{dx:!d&&p?da(a,w):null,dy:!h&&p?Eh(a,w):null}),za(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const C=o("labelBound");let I=o("labelOverlap");return I=I||C?{separation:o("labelSeparation"),method:I,order:"datum.index",bound:C?{scale:u,orient:a,tolerance:C}:null}:void 0,m.align!==b&&(m.align=RS(m.align,b)),m.baseline!==x&&(m.baseline=RS(m.baseline,x)),vf({type:aw,role:bqt,style:KN,key:nd,from:r,encode:T,overlap:I},n)}function ZGt(e,t,n,r){const i=Tc(e,t),s=e.orient,o=IB(s,-1,1);let a,u;const l={enter:a={opacity:jr,anchor:fa(i("titleAnchor",null)),align:{signal:fse}},update:u=Wn({},a,{opacity:rd,text:fa(e.title)}),exit:{opacity:jr}},c={signal:`lerp(range("${e.scale}"), ${TB(0,1,.5)})`};return u.x=da(s,c),u.y=Eh(s,c),a.angle=da(s,jr,WGt(o,90)),a.baseline=da(s,X5e(s,lv,Yh),{value:lv}),u.angle=a.angle,u.baseline=a.baseline,za(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),eYt(i,s,l,n),l.update.align=RS(l.update.align,a.align),l.update.angle=RS(l.update.angle,a.angle),l.update.baseline=RS(l.update.baseline,a.baseline),vf({type:aw,role:_qt,style:use,from:r,encode:l},n)}function eYt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=RS(fa(a),n.update[u]),!1):!TE(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?fa(o):da(t,fa(o),fa(s))}function tYt(e,t){const n=GGt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Tc(e,n),l=QWt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=tn(t.add(Gh({},[c]))),d=tn(t.add(nWt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(KGt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(QGt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(JGt(e,n,r.labels,d,p,l))),c.domain&&h.push(YGt(e,n,r.domain,f)),c.title&&h.push(ZGt(e,n,r.title,f)),AB(aD({role:gqt,from:f,encode:lC(nYt(u,e),i,XN),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function nYt(e,t){const n={enter:{},update:{}};return za(n,{orient:e("orient"),offset:e("offset")||0,position:Zd(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function J5e(e,t,n){const r=Nt(e.signals),i=Nt(e.scales);return n||r.forEach(s=>R5e(s,t)),Nt(e.projections).forEach(s=>OWt(s,t)),i.forEach(s=>wWt(s,t)),Nt(e.data).forEach(s=>LGt(s,t)),i.forEach(s=>EWt(s,t)),(n||r).forEach(s=>tWt(s,t)),Nt(e.axes).forEach(s=>tYt(s,t)),Nt(e.marks).forEach(s=>AB(s,t)),Nt(e.legends).forEach(s=>TGt(s,t)),e.title&&NGt(e.title,t),t.parseLambdas(),t}const rYt=e=>lC({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function iYt(e,t){const n=t.config,r=tn(t.root=t.add(PL())),i=sYt(e,n);i.forEach(l=>R5e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Gh()),o=t.add(P5e(k5e(rYt(e.encode),SB,rse,e.style,t,{pulse:tn(s)}))),a=t.add(M5e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:tn(o)}));t.operators.pop(),t.pushState(tn(o),tn(a),null),J5e(e,t,i),t.operators.push(a);let u=t.add(N5e({mark:r,pulse:tn(a)}));return u=t.add($5e({pulse:tn(u)})),u=t.add(ow({pulse:tn(u)})),t.addData("root",new p_(t,s,s,u)),t}function OA(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function sYt(e,t){const n=o=>Zd(e[o],t[o]),r=[OA("background",n("background")),OA("autosize",hqt(n("autosize"))),OA("padding",mqt(n("padding"))),OA("width",n("width")||0),OA("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Nt(e.signals).forEach(o=>{sn(i,o.name)?o=Wn(i[o.name],o):r.push(o),s[o.name]=o}),Nt(t.signals).forEach(o=>{!sn(s,o.name)&&!sn(i,o.name)&&r.push(o)}),r}function Z5e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function qve(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Z5e.prototype=qve.prototype={parse(e){return J5e(e,this)},fork(){return new qve(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof BY?tn(e):e;return this.add(gWt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(tn(this.add(ow({pulse:e})))),this._parent.push(t),this._lookup.push(n?tn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return $r(this._parent)},encode(){return $r(this._encode)},lookup(){return $r(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Pt(e))return sD(e,t);e.signal||Ye("Unsupported field reference: "+Et(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=tn(this.add(oWt(i)))}return r},compareRef(e){let t=!1;const n=s=>Uo(s)?(t=!0,this.signalRef(s.signal)):qqt(s)?(t=!0,this.exprRef(s.expr)):s,r=Nt(e.field).map(n),i=Nt(e.order).map(n);return t?tn(this.add(Dve({fields:r,orders:i}))):kve(r,i)},keyRef(e,t){let n=!1;const r=s=>Uo(s)?(n=!0,tn(i[s.signal])):s,i=this.signals;return e=Nt(e).map(r),n?tn(this.add(aWt({fields:e,flat:t}))):Uqt(e,t)},sortRef(e){if(!e)return e;const t=wB(e.op,e.field),n=e.order||zqt;return n.signal?tn(this.add(Dve({fields:t,orders:this.signalRef(n.signal)}))):kve(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return sn(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Ye("Duplicate signal name: "+Et(e));const n=t instanceof BY?t:this.add(PL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Ye("Unrecognized signal name: "+Et(e)),this.signals[e]},signalRef(e){return this.signals[e]?tn(this.signals[e]):(sn(this.lambdas,e)||(this.lambdas[e]=this.add(PL(null))),tn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=vm(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ot(e)?e:this.signalRef(e.signal||gse(e))},exprRef(e,t){const n={expr:vm(e,this)};return t&&(n.expr.$name=t),tn(this.add(iWt(n)))},addBinding(e,t){this.bindings||Ye("Nested signals do not support binding: "+Et(e)),this.bindings.push(Wn({signal:e},t))},addScaleProj(e,t){sn(this.scales,e)&&Ye("Duplicate scale or projection name: "+Et(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,vWt(t))},addProjection(e,t){this.addScaleProj(e,mWt(t))},getScale(e){return this.scales[e]||Ye("Unrecognized scale name: "+Et(e)),this.scales[e]},scaleRef(e){return tn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return sn(this.data,e)&&Ye("Duplicate data set name: "+Et(e)),this.data[e]=t},getData(e){return this.data[e]||Ye("Undefined data set name: "+Et(e)),this.data[e]},addDataPipeline(e,t){return sn(this.data,e)&&Ye("Duplicate data set name: "+Et(e)),this.addData(e,p_.fromEntries(this,t))}};function gse(e){return(Xe(e)?oYt:aYt)(e)}function oYt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ot(i)?i.signal||gse(i):Et(i))}return n+"]"}function aYt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+Et(r)+":"+(Ot(i)?i.signal||gse(i):Et(i));return t+"}"}function uYt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function lYt(e,t,n){return Ot(e)||Ye("Input Vega specification must be an object."),t=tC(uYt(),t,e.config),iYt(e,new Z5e(t,n)).toRuntime()}var cYt="5.29.0";Wn(DT,l5t,Q9t,kjt,o7t,h7t,j7t,b7t,z7t,W7t,nUt,lUt);const fYt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Eo,CanvasHandler:HN,CanvasRenderer:_L,DATE:yc,DAY:gu,DAYOFYEAR:ym,Dataflow:kS,Debug:E6e,Error:cne,EventStream:H8,Gradient:jMe,GroupItem:rB,HOURS:mf,Handler:Xre,HybridHandler:DLe,HybridRenderer:yY,Info:w6e,Item:nB,MILLISECONDS:Oh,MINUTES:gf,MONTH:wu,Marks:yf,MultiPulse:Rne,None:_6e,Operator:qi,Parameters:V8,Pulse:T1,QUARTER:gc,RenderType:r1,Renderer:VN,ResourceLoader:GMe,SECONDS:fd,SVGHandler:vLe,SVGRenderer:nie,SVGStringRenderer:RLe,Scenegraph:cLe,TIME_UNITS:wne,Transform:Ve,View:y5e,WEEK:Bo,Warn:fne,YEAR:La,accessor:Sc,accessorFields:_u,accessorName:Ws,array:Nt,ascending:L8,bandwidthNRD:One,bin:N$e,bootstrapCI:P$e,boundClip:ULe,boundContext:BN,boundItem:dY,boundMark:oLe,boundStroke:Kg,changeset:rw,clampRange:O6e,codegenExpression:VFe,compare:gne,constant:ku,cumulativeLogNormal:jne,cumulativeNormal:W8,cumulativeUniform:Hne,dayofyear:W6e,debounce:yne,defaultLocale:Tne,definition:k$e,densityLogNormal:Bne,densityNormal:$ne,densityUniform:Vne,domChild:Lo,domClear:Gf,domCreate:t1,domFind:Kre,dotbin:O$e,error:Ye,expressionFunction:ho,extend:Wn,extent:gm,extentIndex:$6e,falsy:Ty,fastmap:rC,field:ld,flush:M6e,font:uB,fontFamily:zN,fontSize:$m,format:t6,formatLocale:uL,formats:Ine,hasOwnProperty:sn,id:AN,identity:Iu,inferType:v$e,inferTypes:b$e,ingest:hi,inherits:Ct,inrange:JE,interpolate:Cre,interpolateColors:eB,interpolateRange:CMe,intersect:LLe,intersectBoxLine:ZE,intersectPath:Ore,intersectPoint:$re,intersectRule:KMe,isArray:Xe,isBoolean:Wv,isDate:S1,isFunction:Gn,isIterable:L6e,isNumber:Kr,isObject:Ot,isRegExp:F6e,isString:Pt,isTuple:U8,key:vne,lerp:B6e,lineHeight:ov,loader:B8,locale:g$e,logger:dne,lruCache:j6e,markup:tie,merge:U6e,mergeConfig:tC,multiLineOffset:Wre,one:eC,pad:z6e,panLinear:I6e,panLog:k6e,panPow:R6e,panSymlog:D6e,parse:lYt,parseExpression:Vie,parseSelector:Yv,path:q5,pathCurves:Dre,pathEqual:zLe,pathParse:$T,pathRectangle:VMe,pathRender:QR,pathSymbols:zMe,pathTrail:HMe,peek:$r,point:cB,projection:pie,quantileLogNormal:Une,quantileNormal:G8,quantileUniform:qne,quantiles:Nne,quantizeInterpolator:AMe,quarter:N6e,quartiles:Pne,get random(){return dd},randomInteger:hFt,randomKDE:Lne,randomLCG:dFt,randomLogNormal:M$e,randomMixture:L$e,randomNormal:Mne,randomUniform:F$e,read:w$e,regressionConstant:Wne,regressionExp:j$e,regressionLinear:Gne,regressionLoess:V$e,regressionLog:B$e,regressionPoly:z$e,regressionPow:U$e,regressionQuad:Yne,renderModule:fB,repeat:xI,resetDefaultLocale:lLt,resetSVGClipId:WMe,resetSVGDefIds:m9t,responseType:_$e,runtimeContext:i5e,sampleCurve:K8,sampleLogNormal:Fne,sampleNormal:q8,sampleUniform:zne,scale:ri,sceneEqual:rie,sceneFromJSON:uLe,scenePickVisit:hL,sceneToJSON:aLe,sceneVisit:$h,sceneZOrder:Mre,scheme:Are,serializeXML:CLe,setHybridRendererOptions:f9t,setRandom:cFt,span:IN,splitAccessPath:Om,stringValue:Et,textMetrics:ef,timeBin:l$e,timeFloor:Z6e,timeFormatLocale:YR,timeInterval:iC,timeOffset:n$e,timeSequence:s$e,timeUnitSpecifier:q6e,timeUnits:Ene,toBoolean:bne,toDate:xne,toNumber:vu,toSet:Ph,toString:_ne,transform:R$e,transforms:DT,truncate:V6e,truthy:cd,tupleid:nn,typeParsers:rY,utcFloor:e$e,utcInterval:sC,utcOffset:r$e,utcSequence:o$e,utcdayofyear:K6e,utcquarter:P6e,utcweek:X6e,version:cYt,visitArray:Oy,week:G6e,writeConfig:nC,zero:Hy,zoomLinear:hne,zoomLog:pne,zoomPow:aL,zoomSymlog:mne},Symbol.toStringTag,{value:"Module"}));function dYt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var hYt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},pYt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},mYt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const gYt=Array.prototype.slice,Eb=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,gYt.call(t,1))},yYt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var vYt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:yYt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Eb("join",arguments)},indexof:function(){return Eb("indexOf",arguments)},lastindexof:function(){return Eb("lastIndexOf",arguments)},slice:function(){return Eb("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Eb("substring",arguments,String)},split:function(){return Eb("split",arguments,String)},replace:function(){return Eb("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const bYt=["view","item","group","xy","x","y"],WY=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&WY.add(setImmediate);const xYt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:hYt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),WY.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||vYt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>pYt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>mYt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,WY.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function $A(e,t,n,r,i,s){const o=a=>xYt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,bYt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var _Yt={operator(e,t){const n=t.ast,r=e.functions;return i=>$A(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>$A(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>$A(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return $A(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=$A(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&dYt(o,r,s),l}}};const wYt="vega-lite",EYt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',SYt="5.18.1",TYt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],CYt="https://vega.github.io/vega-lite/",AYt="Vega-Lite is a concise high-level language for interactive visualization.",IYt=["vega","chart","visualization"],kYt="build/vega-lite.js",RYt="build/vega-lite.min.js",DYt="build/vega-lite.min.js",NYt="build/src/index",PYt="build/src/index.d.ts",OYt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},$Yt=["bin","build","src","vega-lite*","tsconfig.json"],MYt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},LYt={type:"git",url:"https://github.com/vega/vega-lite.git"},FYt="BSD-3-Clause",BYt={url:"https://github.com/vega/vega-lite/issues"},jYt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},UYt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},zYt={vega:"^5.24.0"},VYt={node:">=18"},HYt="yarn@1.22.19",qYt={name:wYt,author:EYt,version:SYt,collaborators:TYt,homepage:CYt,description:AYt,keywords:IYt,main:kYt,unpkg:RYt,jsdelivr:DYt,module:NYt,types:PYt,bin:OYt,files:$Yt,scripts:MYt,repository:LYt,license:FYt,bugs:BYt,devDependencies:jYt,dependencies:UYt,peerDependencies:zYt,engines:VYt,packageManager:HYt};function yse(e){return!!e.or}function vse(e){return!!e.and}function bse(e){return!!e.not}function _6(e,t){if(bse(e))_6(e.not,t);else if(vse(e))for(const n of e.and)_6(n,t);else if(yse(e))for(const n of e.or)_6(n,t);else t(e)}function DS(e,t){return bse(e)?{not:DS(e.not,t)}:vse(e)?{and:e.and.map(n=>DS(n,t))}:yse(e)?{or:e.or.map(n=>DS(n,t))}:t(e)}const An=structuredClone;function e8e(e){throw new Error(e)}function jT(e,t){const n={};for(const r of t)sn(e,r)&&(n[r]=e[r]);return n}function oc(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Fi(e)).join(",")})`};function _r(e){if(Kr(e))return e;const t=Pt(e)?e:Fi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function GY(e){return e===!1||e===null}function wr(e,t){return e.includes(t)}function m_(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function xse(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function t8e(e,...t){for(const n of t)WYt(e,n??{});return e}function WYt(e,t){for(const n of ct(t))nC(e,n,t[n],!0)}function Fp(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function GYt(e,t){const n=ct(e),r=ct(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function n8e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function _se(e,t){for(const n of e)if(t.has(n))return!0;return!1}function YY(e){const t=new Set;for(const n of e){const i=Om(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function wse(e,t){return e===void 0||t===void 0?!0:_se(YY(e),YY(t))}function Li(e){return ct(e).length===0}const ct=Object.keys,Fa=Object.values,cv=Object.entries;function uD(e){return e===!0||e===!1}function Ss(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Ek(e,t){return bse(e)?`!(${Ek(e.not,t)})`:vse(e)?`(${e.and.map(n=>Ek(n,t)).join(") && (")})`:yse(e)?`(${e.or.map(n=>Ek(n,t)).join(") || (")})`:t(e)}function OL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&OL(e[n],t)&&delete e[n],Li(e)}function QN(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Ese(e,t="datum"){const n=Om(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(Et).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function r8e(e,t="datum"){return`${t}[${Et(Om(e).join("."))}]`}function YYt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function hd(e){return`${Om(e).map(YYt).join("\\.")}`}function g_(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function dC(e){return`${Om(e).join(".")}`}function UT(e){return e?Om(e).length:0}function ao(...e){for(const t of e)if(t!==void 0)return t}let i8e=42;function s8e(e){const t=++i8e;return e?String(e)+t:t}function KYt(){i8e=42}function o8e(e){return a8e(e)?e:`__${e}`}function a8e(e){return e.startsWith("__")}function lD(e){if(e!==void 0)return(e%360+360)%360}function kB(e){return Kr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Wve=Object.getPrototypeOf(structuredClone({}));function Kc(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Kc(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Kc(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Wve.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Wve.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Kc(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Fi(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const J0="row",Z0="column",RB="facet",Ts="x",ba="y",Kh="x2",Fm="y2",Kv="xOffset",hC="yOffset",Xh="radius",Qg="radius2",Td="theta",Jg="theta2",Qh="latitude",Jh="longitude",Zh="latitude2",pd="longitude2",vc="color",Bm="fill",jm="stroke",bc="shape",Zg="size",uw="angle",ey="opacity",Xv="fillOpacity",Qv="strokeOpacity",Jv="strokeWidth",Zv="strokeDash",JN="text",zT="order",ZN="detail",DB="key",y_="tooltip",NB="href",PB="url",OB="description",XYt={x:1,y:1,x2:1,y2:1},u8e={theta:1,theta2:1,radius:1,radius2:1};function l8e(e){return e in u8e}const Sse={longitude:1,longitude2:1,latitude:1,latitude2:1};function c8e(e){switch(e){case Qh:return"y";case Zh:return"y2";case Jh:return"x";case pd:return"x2"}}function f8e(e){return e in Sse}const QYt=ct(Sse),Tse={...XYt,...u8e,...Sse,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function NS(e){return e===vc||e===Bm||e===jm}const d8e={row:1,column:1,facet:1},ed=ct(d8e),Cse={...Tse,...d8e},JYt=ct(Cse),{order:pbn,detail:mbn,tooltip:gbn,...ZYt}=Cse,{row:ybn,column:vbn,facet:bbn,...eKt}=ZYt;function tKt(e){return!!eKt[e]}function h8e(e){return!!Cse[e]}const nKt=[Kh,Fm,Zh,pd,Jg,Qg];function p8e(e){return lw(e)!==e}function lw(e){switch(e){case Kh:return Ts;case Fm:return ba;case Zh:return Qh;case pd:return Jh;case Jg:return Td;case Qg:return Xh}return e}function fv(e){if(l8e(e))switch(e){case Td:return"startAngle";case Jg:return"endAngle";case Xh:return"outerRadius";case Qg:return"innerRadius"}return e}function Um(e){switch(e){case Ts:return Kh;case ba:return Fm;case Qh:return Zh;case Jh:return pd;case Td:return Jg;case Xh:return Qg}}function xc(e){switch(e){case Ts:case Kh:return"width";case ba:case Fm:return"height"}}function m8e(e){switch(e){case Ts:return"xOffset";case ba:return"yOffset";case Kh:return"x2Offset";case Fm:return"y2Offset";case Td:return"thetaOffset";case Xh:return"radiusOffset";case Jg:return"theta2Offset";case Qg:return"radius2Offset"}}function Ase(e){switch(e){case Ts:return"xOffset";case ba:return"yOffset"}}function rKt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const iKt=ct(Tse),{x:xbn,y:_bn,x2:wbn,y2:Ebn,xOffset:Sbn,yOffset:Tbn,latitude:Cbn,longitude:Abn,latitude2:Ibn,longitude2:kbn,theta:Rbn,theta2:Dbn,radius:Nbn,radius2:Pbn,...Ise}=Tse,sKt=ct(Ise),kse={x:1,y:1},zm=ct(kse);function uo(e){return e in kse}const Rse={theta:1,radius:1},oKt=ct(Rse);function $B(e){return e==="width"?Ts:ba}const g8e={xOffset:1,yOffset:1};function eP(e){return e in g8e}const{text:Obn,tooltip:$bn,href:Mbn,url:Lbn,description:Fbn,detail:Bbn,key:jbn,order:Ubn,...y8e}=Ise,aKt=ct(y8e);function uKt(e){return!!Ise[e]}function lKt(e){switch(e){case vc:case Bm:case jm:case Zg:case bc:case ey:case Jv:case Zv:return!0;case Xv:case Qv:case uw:return!1}}const v8e={...kse,...Rse,...g8e,...y8e},MB=ct(v8e);function ty(e){return!!v8e[e]}function cKt(e,t){return dKt(e)[t]}const b8e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:zbn,...fKt}=b8e;function dKt(e){switch(e){case vc:case Bm:case jm:case OB:case ZN:case DB:case y_:case NB:case zT:case ey:case Xv:case Qv:case Jv:case RB:case J0:case Z0:return b8e;case Ts:case ba:case Kv:case hC:case Qh:case Jh:return fKt;case Kh:case Fm:case Zh:case pd:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Zg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Zv:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case bc:return{point:"always",geoshape:"always"};case JN:return{text:"always"};case uw:return{point:"always",square:"always",text:"always"};case PB:return{image:"always"};case Td:return{text:"always",arc:"always"};case Xh:return{text:"always",arc:"always"};case Jg:case Qg:return{arc:"always"}}}function TV(e){switch(e){case Ts:case ba:case Td:case Xh:case Kv:case hC:case Zg:case uw:case Jv:case ey:case Xv:case Qv:case Kh:case Fm:case Jg:case Qg:return;case RB:case J0:case Z0:case bc:case Zv:case JN:case y_:case NB:case PB:case OB:return"discrete";case vc:case Bm:case jm:return"flexible";case Qh:case Jh:case Zh:case pd:case ZN:case DB:case zT:return}}const hKt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},pKt={count:1,min:1,max:1};function Ig(e){return!!e&&!!e.argmin}function eb(e){return!!e&&!!e.argmax}function Dse(e){return Pt(e)&&!!hKt[e]}const mKt=new Set(["count","valid","missing","distinct"]);function x8e(e){return Pt(e)&&mKt.has(e)}function gKt(e){return Pt(e)&&wr(["min","max"],e)}const yKt=new Set(["count","sum","distinct","valid","missing"]),vKt=new Set(["mean","average","median","q1","q3","min","max"]);function _8e(e){return Wv(e)&&(e=YB(e,void 0)),"bin"+ct(e).map(t=>LB(e[t])?Ss(`_${t}_${cv(e[t])}`):Ss(`_${t}_${e[t]}`)).join("")}function Ji(e){return e===!0||cw(e)&&!e.binned}function ka(e){return e==="binned"||cw(e)&&e.binned===!0}function cw(e){return Ot(e)}function LB(e){return e==null?void 0:e.param}function Gve(e){switch(e){case J0:case Z0:case Zg:case vc:case Bm:case jm:case Jv:case ey:case Xv:case Qv:case bc:return 6;case Zv:return 4;default:return 10}}function tP(e){return!!(e!=null&&e.expr)}function zl(e){const t=ct(e||{}),n={};for(const r of t)n[r]=zc(e[r]);return n}function w8e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},b={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},x=jT(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:x,nonMarkTitleProperties:y,subtitle:b}}function Ly(e){return Pt(e)||Xe(e)&&Pt(e[0])}function Xt(e){return!!(e!=null&&e.signal)}function tb(e){return!!e.step}function bKt(e){return Xe(e)?!1:"fields"in e&&!("data"in e)}function xKt(e){return Xe(e)?!1:"fields"in e&&"data"in e}function j0(e){return Xe(e)?!1:"field"in e&&"data"in e}const _Kt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},wKt=ct(_Kt),EKt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},KY=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function E8e(e){const t=Xe(e.condition)?e.condition.map(Yve):Yve(e.condition);return{...zc(e),condition:t}}function zc(e){if(tP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Yve(e){if(tP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function as(e){if(tP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Xt(e)?e:e!==void 0?{value:e}:void 0}function SKt(e){return Xt(e)?e.signal:Et(e)}function Kve(e){return Xt(e)?e.signal:Et(e.value)}function mh(e){return Xt(e)?e.signal:e==null?null:Et(e)}function TKt(e,t,n){for(const r of n){const i=kg(r,t.markDef,t.config);i!==void 0&&(e[r]=as(i))}return e}function S8e(e){return[].concat(e.type,e.style??[])}function di(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:kg(e,t,n,r)}function kg(e,t,n,{vgChannel:r}={}){return ao(r?$L(e,t,n.style):void 0,$L(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function $L(e,t,n){return T8e(e,S8e(t),n)}function T8e(e,t,n){t=Nt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function C8e(e,t){return Nt(e).reduce((n,r)=>(n.field.push(Tt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function A8e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Kc(i,r))return;n.push(r)}),n}function I8e(e,t){return Kc(e,t)||!t?e:e?[...Nt(e),...Nt(t)].join(", "):t}function k8e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Ly(n)||Xt(n))&&(Ly(r)||Xt(r)))return{explicit:e.explicit,value:I8e(n,r)};if(Ly(n)||Xt(n))return{explicit:e.explicit,value:n};if(Ly(r)||Xt(r))return{explicit:e.explicit,value:r};if(!Ly(n)&&!Xt(n)&&!Ly(r)&&!Xt(r))return{explicit:e.explicit,value:A8e(n,r)};throw new Error("It should never reach here")}function Nse(e){return`Invalid specification ${Fi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const CKt='Autosize "fit" only works for single views and layered views.';function Xve(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Qve(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Jve(e){return e?`Dropping "fit-${e}" because spec has discrete ${xc(e)}.`:'Dropping "fit" because spec has discrete size.'}function Pse(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Zve(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function AKt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function IKt(e){return`The "nearest" transform is not supported for ${e} marks.`}function R8e(e){return`Selection not supported for ${e} yet.`}function kKt(e){return`Cannot find a selection named "${e}".`}const RKt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",DKt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",NKt="Legend bindings are only supported for selections over an individual field or encoding channel.";function PKt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function OKt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const $Kt="The same selection must be used to override scale domains in a layered view.",MKt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function LKt(e){return`Unknown repeated value "${e}".`}function ebe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const FKt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function BKt(e){return`Unrecognized parse "${e}".`}function tbe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const jKt="Attempt to add the same child twice.";function UKt(e){return`Ignoring an invalid transform: ${Fi(e)}.`}const zKt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function nbe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function VKt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Fi(t)} is overridden by a child projection ${Fi(n)}.`}const HKt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function qKt(e){return`${e}Offset dropped because ${e} is continuous`}function WKt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Fi(n)}}.`}function D8e(e){return`Invalid field type "${e}".`}function GKt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function YKt(e){return`Invalid aggregation operator "${e}".`}function N8e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function KKt(e){return`Position range does not support relative band size for ${e}.`}function XY(e,t){return`Dropping ${Fi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const XKt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function FB(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function QKt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function JKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function ZKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function eXt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function CV(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function tXt(e){return`The ${e} for range marks cannot be an expression`}function nXt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function rXt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function iXt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function sXt(e){return`Cannot use the relative band size with ${e} scale.`}function oXt(e){return`Using unaggregated domain with raw field has no effect (${Fi(e)}).`}function aXt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function uXt(e){return`Unaggregated domain is currently unsupported for log scale (${Fi(e)}).`}function lXt(e){return`Cannot apply size to non-oriented mark "${e}".`}function cXt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function fXt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function P8e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function O8e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function dXt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fi(n)} and ${Fi(r)}). Using ${Fi(n)}.`}function hXt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fi(n)} and ${Fi(r)}). Using the union of the two domains.`}function pXt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function mXt(e){return`Dropping sort property ${Fi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const rbe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",gXt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",yXt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",vXt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function bXt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function xXt(e){return`Stack is applied to a non-linear scale (${e}).`}function _Xt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function ML(e,t){return`Invalid ${e}: ${Fi(t)}.`}function wXt(e){return`Dropping day from datetime ${Fi(e)} as day cannot be combined with other units.`}function EXt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function SXt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function TXt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function ibe(e){return`1D error band does not support ${e}.`}function $8e(e){return`Channel ${e} is required for "binned" bin.`}function CXt(e){return`Channel ${e} should not be used with "binned" bin.`}function AXt(e){return`Domain for ${e} is required for threshold scale.`}const M8e=dne(fne);let VT=M8e;function IXt(e){return VT=e,VT}function kXt(){return VT=M8e,VT}function pt(...e){VT.warn(...e)}function RXt(...e){VT.debug(...e)}function fw(e){if(e&&Ot(e)){for(const t of $se)if(t in e)return!0}return!1}const L8e=["january","february","march","april","may","june","july","august","september","october","november","december"],DXt=L8e.map(e=>e.substr(0,3)),F8e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],NXt=F8e.map(e=>e.substr(0,3));function PXt(e){if(kB(e)&&(e=+e),Kr(e))return e>4&&pt(ML("quarter",e)),e-1;throw new Error(ML("quarter",e))}function OXt(e){if(kB(e)&&(e=+e),Kr(e))return e-1;{const t=e.toLowerCase(),n=L8e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=DXt.indexOf(r);if(i!==-1)return i;throw new Error(ML("month",e))}}function $Xt(e){if(kB(e)&&(e=+e),Kr(e))return e%7;{const t=e.toLowerCase(),n=F8e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=NXt.indexOf(r);if(i!==-1)return i;throw new Error(ML("day",e))}}function Ose(e,t){const n=[];if(t&&e.day!==void 0&&ct(e).length>1&&(pt(wXt(e)),e=An(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?OXt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?PXt(e.quarter):e.quarter;n.push(Kr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?$Xt(e.day):e.day;n.push(Kr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function v_(e){const n=Ose(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function MXt(e){const n=Ose(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function LXt(e){const t=Ose(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const B8e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},$se=ct(B8e);function FXt(e){return!!B8e[e]}function dw(e){return Ot(e)?e.binned:j8e(e)}function j8e(e){return e&&e.startsWith("binned")}function Mse(e){return e.startsWith("utc")}function BXt(e){return e.substring(3)}const jXt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function BB(e){return $se.filter(t=>z8e(e,t))}function U8e(e){const t=BB(e);return t[t.length-1]}function z8e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function UXt(e,t,{end:n}={end:!1}){const r=Ese(t),i=Mse(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of $se)z8e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),MXt(a)}function V8e(e){if(!e)return;const t=BB(e);return`timeUnitSpecifier(${Fi(t)}, ${Fi(jXt)})`}function zXt(e,t,n){if(!e)return;const r=V8e(e);return`${n||Mse(e)?"utc":"time"}Format(${t}, ${r})`}function pa(e){if(!e)return;let t;return Pt(e)?j8e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ot(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Mse(t.unit)&&(t.utc=!0,t.unit=BXt(t.unit)),t}function VXt(e){const{utc:t,...n}=pa(e);return n.unit?(t?"utc":"")+ct(n).map(r=>Ss(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+ct(n).map(r=>Ss(`_${r}_${n[r]}`)).join("")}function H8e(e,t=n=>n){const n=pa(e),r=U8e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=q8e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(v_(a))} - ${t(v_(i))}`}}const HXt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function qXt(e){return!!HXt[e]}function q8e(e,t=1){if(qXt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function WXt(e){return e==null?void 0:e.param}function Lse(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Fse(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Bse(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function jse(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Use(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function zse(e){if(e!=null&&e.field){if(Xe(e.range)&&e.range.length===2)return!0;if(Xt(e.range))return!0}return!1}function Vse(e){return!!(e!=null&&e.field)&&(Xe(e.oneOf)||Xe(e.in))}function GXt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function W8e(e){return Vse(e)||Lse(e)||zse(e)||Fse(e)||jse(e)||Bse(e)||Use(e)}function lp(e,t){return KB(e,{timeUnit:t,wrapTime:!0})}function YXt(e,t){return e.map(n=>lp(n,t))}function G8e(e,t=!0){const{field:n}=e,r=pa(e.timeUnit),{unit:i,binned:s}=r||{},o=Tt(e,{expr:"datum"}),a=i?`time(${s?o:UXt(i,n)})`:o;if(Lse(e))return`${a}===${lp(e.equal,i)}`;if(Fse(e)){const u=e.lt;return`${a}<${lp(u,i)}`}else if(jse(e)){const u=e.gt;return`${a}>${lp(u,i)}`}else if(Bse(e)){const u=e.lte;return`${a}<=${lp(u,i)}`}else if(Use(e)){const u=e.gte;return`${a}>=${lp(u,i)}`}else{if(Vse(e))return`indexof([${YXt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(GXt(e))return Hse(a,e.valid);if(zse(e)){const{range:u}=e,l=Xt(u)?{signal:`${u.signal}[0]`}:u[0],c=Xt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+lp(l,i)+", "+lp(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${lp(l,i)}`),c!==null&&f.push(`${a} <= ${lp(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Fi(e)}`)}function Hse(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function KXt(e){return W8e(e)&&e.timeUnit?{...e,timeUnit:pa(e.timeUnit)}:e}const nP={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function XXt(e){return e==="quantitative"||e==="temporal"}function Y8e(e){return e==="ordinal"||e==="nominal"}const b_=nP.quantitative,qse=nP.ordinal,HT=nP.temporal,Wse=nP.nominal,pC=nP.geojson;function QXt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case b_:return"quantitative";case"t":case HT:return"temporal";case"o":case qse:return"ordinal";case"n":case Wse:return"nominal";case pC:return"geojson"}}const ac={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},QY={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function JXt(e,t){const n=QY[e],r=QY[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const ZXt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function sbe(e){return ZXt[e]}const K8e=new Set(["linear","log","pow","sqrt","symlog"]),X8e=new Set([...K8e,"time","utc"]);function Q8e(e){return K8e.has(e)}const J8e=new Set(["quantile","quantize","threshold"]),eQt=new Set([...X8e,...J8e,"sequential","identity"]),tQt=new Set(["ordinal","bin-ordinal","point","band"]);function ga(e){return tQt.has(e)}function bf(e){return eQt.has(e)}function gh(e){return X8e.has(e)}function qT(e){return J8e.has(e)}const nQt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function rQt(e){return!Pt(e)&&!!e.name}function Z8e(e){return e==null?void 0:e.param}function iQt(e){return e==null?void 0:e.unionWith}function sQt(e){return Ot(e)&&"field"in e}const oQt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Vbn,domain:Hbn,range:qbn,rangeMax:Wbn,rangeMin:Gbn,scheme:Ybn,...aQt}=oQt,uQt=ct(aQt);function JY(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return gh(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return gh(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return gh(e);case"nice":return gh(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return bf(e)&&!wr(["log","time","utc","threshold","quantile"],e)}}function eBe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return NS(e)?void 0:iXt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function lQt(e,t){return wr([qse,Wse],t)?e===void 0||ga(e):t===HT?wr([ac.TIME,ac.UTC,void 0],e):t===b_?Q8e(e)||qT(e)||e===void 0:!0}function cQt(e,t,n=!1){if(!ty(e))return!1;switch(e){case Ts:case ba:case Kv:case hC:case Td:case Xh:return gh(t)||t==="band"?!0:t==="point"?!n:!1;case Zg:case Jv:case ey:case Xv:case Qv:case uw:return gh(t)||qT(t)||wr(["band","point","ordinal"],t);case vc:case Bm:case jm:return t!=="band";case Zv:case bc:return t==="ordinal"||qT(t)}}function Gse(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=Kse(e);return gt(n)&&!x8e(n.aggregate)&&i&&gh(i.get("type"))?fQt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function fQt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return di("invalid",n,i)===null?[dQt(e,t),r]:r}function dQt(e,t){const n=Yse(e,!0),i=lw(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Yse(e,t=!0){return Hse(Pt(e)?e:Tt(e,{expr:"datum"}),!t)}function hQt(e){const{datum:t}=e;return fw(t)?v_(t):`${Fi(t)}`}function Fx(e,t,n,r){const i={};if(t&&(i.scale=t),Vm(e)){const{datum:s}=e;fw(s)?i.signal=v_(s):Xt(s)?i.signal=s.signal:tP(s)?i.signal=s.expr:i.value=s}else i.field=Tt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function LL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Xt(o)&&0<o&&o<1?"datum":void 0,u=Tt(t,{expr:a,suffix:i}),l=n!==void 0?Tt(n,{expr:a}):Tt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Xt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function pQt({scaleName:e,fieldDef:t}){const n=Tt(t,{expr:"datum"}),r=Tt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Kse({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if($n(t)){const f=o==null?void 0:o.get("type");if(ml(t)){c??(c=dv({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(Ji(d)||c&&h&&p===HT)return a!=null&&a.impute?Fx(t,s,{binSuffix:"mid"},{offset:u}):c&&!ga(f)?LL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Fx(t,s,oP(t,e)?{binSuffix:"range"}:{},{offset:u});if(ka(d)){if(gt(n))return LL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});pt($8e(e===Ts?Kh:Fm))}}return Fx(t,s,ga(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Mh(t)){const f=t.value,d=u?{offset:u}:{};return{...Sk(e,f),...d}}}return Gn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function Sk(e,t){return wr(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:wr(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:as(t)}function x_(e){return e&&e!=="number"&&e!=="time"}function tBe(e,t,n){return`${e}(${t}${n?`, ${Fi(n)}`:""})`}const mQt="  ";function Xse({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(x_(n))return yh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=nBe(e,r,i),a=WT(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return yh({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return yh({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&gt(e)&&e.timeUnit===void 0)return yh({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(YT(e)){const c=yQt({field:o,timeUnit:gt(e)?(u=pa(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:pw(e)&&((l=e.scale)==null?void 0:l.type)===ac.UTC});return c?{signal:c}:void 0}if(t=ZY({type:a,specifiedFormat:t,config:s,normalizeStack:i}),gt(e)&&Ji(e.bin)){const c=Tt(e,{expr:r,binSuffix:"end"});return{signal:rP(o,c,t,n,s)}}else return t||WT(e)==="quantitative"?{signal:`${sBe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function nBe(e,t,n){return gt(e)?n?`${Tt(e,{expr:t,suffix:"end"})}-${Tt(e,{expr:t,suffix:"start"})}`:Tt(e,{expr:t}):hQt(e)}function yh({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=nBe(e,r,i)),o!=="datum.value"&&gt(e)&&Ji(e.bin)){const a=Tt(e,{expr:r,binSuffix:"end"});return{signal:rP(o,a,t,n,s)}}return{signal:tBe(n,o,t)}}function rBe(e,t,n,r,i,s){var o;if(!(Pt(r)&&x_(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&WT(e)==="quantitative"&&(i.normalizedNumberFormatType&&GT(e)&&e.stack==="normalize"||i.numberFormatType))){if(GT(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return ZY({type:"quantitative",config:i,normalizeStack:!0});if(YT(e)){const a=gt(e)?(o=pa(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:gQt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return ZY({type:t,specifiedFormat:n,config:i})}}function iBe(e,t,n){var r;if(e&&(Xt(e)||e==="number"||e==="time"))return e;if(YT(t)&&n!=="time"&&n!=="utc")return gt(t)&&((r=pa(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function ZY({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Pt(t))return t;if(e===b_)return r?n.normalizedNumberFormat:n.numberFormat}function gQt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:V8e(t)}:r?void 0:n.timeFormat)}function sBe(e,t){return`format(${e}, "${t||""}")`}function obe(e,t,n,r){return x_(n)?tBe(n,e,t):sBe(e,(Pt(t)?t:void 0)??r.numberFormat)}function rP(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return rP(e,t,i.numberFormat,i.numberFormatType,i);const s=obe(e,n,r,i),o=obe(t,n,r,i);return`${Hse(e,!1)} ? "null" : ${s} + "${mQt}" + ${o}`}function yQt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Pt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):zXt(t,e,s)}const _l={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},oBe=_l.arc,jB=_l.area,UB=_l.bar,vQt=_l.image,zB=_l.line,VB=_l.point,bQt=_l.rect,FL=_l.rule,aBe=_l.text,Qse=_l.tick,xQt=_l.trail,Jse=_l.circle,Zse=_l.square,uBe=_l.geoshape;function hw(e){return["line","area","trail"].includes(e)}function cD(e){return["rect","bar","image","arc"].includes(e)}const _Qt=new Set(ct(_l));function bm(e){return e.type}const wQt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],EQt=["fill","fillOpacity"],SQt=[...wQt,...EQt],TQt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},abe=ct(TQt),CQt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},AQt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},IQt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},lBe=ct(IQt);function __(e){return e&&e.band!=null}const kQt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},cBe=5,RQt={binSpacing:1,continuousBandSize:cBe,minBandSize:.25,timeUnitBandPosition:.5},DQt={binSpacing:0,continuousBandSize:cBe,minBandSize:.25,timeUnitBandPosition:.5},NQt={thickness:1};function PQt(e){return bm(e)?e.type:e}const HB="min",OQt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function ube(e){return e in OQt}function fBe(e){return!!(e!=null&&e.encoding)}function Jp(e){return e&&(e.op==="count"||!!e.field)}function dBe(e){return e&&Xe(e)}function iP(e){return"row"in e||"column"in e}function eoe(e){return!!e&&"header"in e}function qB(e){return"facet"in e}function $Qt(e){return e.param}function MQt(e){return e&&!Pt(e)&&"repeat"in e}function lbe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function toe(e){return"sort"in e}function dv({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if($n(e)&&e.bandPosition!==void 0)return e.bandPosition;if(gt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return kg("timeUnitBandPosition",n,r);if(Ji(s))return .5}}function hBe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=xc(e),u=di(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(gt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:kg("timeUnitBandSize",r,i)};if(Ji(h)&&!ga(s))return{band:1}}if(cD(r.type))return s?ga(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function pBe(e,t,n,r){return Ji(e.bin)||e.timeUnit&&ml(e)&&e.type==="temporal"?dv({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function mBe(e){return e&&!!e.sort&&!e.field}function WB(e){return e&&"condition"in e}function GB(e){const t=e==null?void 0:e.condition;return!!t&&!Xe(t)&&gt(t)}function sP(e){const t=e==null?void 0:e.condition;return!!t&&!Xe(t)&&$n(t)}function LQt(e){const t=e==null?void 0:e.condition;return!!t&&(Xe(t)||Mh(t))}function gt(e){return e&&(!!e.field||e.aggregate==="count")}function WT(e){return e==null?void 0:e.type}function Vm(e){return e&&"datum"in e}function a1(e){return ml(e)&&!jL(e)||BL(e)}function cbe(e){return ml(e)&&e.type==="quantitative"&&!e.bin||BL(e)}function BL(e){return Vm(e)&&Kr(e.datum)}function $n(e){return gt(e)||Vm(e)}function ml(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Mh(e){return e&&"value"in e&&"value"in e}function pw(e){return e&&("scale"in e||"sort"in e)}function GT(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function gBe(e){return e&&"legend"in e}function yBe(e){return e&&("format"in e||"formatType"in e)}function FQt(e){return oc(e,["legend","axis","header","scale"])}function BQt(e){return"op"in e}function Tt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(UQt(e))n=o8e("count");else{let o;if(!t.nofn)if(BQt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;Ji(a)?(o=_8e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?eb(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Ig(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!dw(l)&&(o=VXt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?dC(n):t.expr?r8e(n,t.expr)+s:hd(n)+s}function jL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return gt(e)&&!!e.bin;case"temporal":return!1}throw new Error(D8e(e.type))}function jQt(e){var t;return pw(e)&&qT((t=e.scale)==null?void 0:t.type)}function UQt(e){return e.aggregate==="count"}function zQt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(Ji(r))return`${n} (binned)`;if(i&&!dw(i)){const a=(o=pa(i))==null?void 0:o.unit;if(a)return`${n} (${BB(a).join("-")})`}else if(s)return eb(s)?`${n} for max ${s.argmax}`:Ig(s)?`${n} for min ${s.argmin}`:`${QN(s)} of ${n}`;return n}function VQt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(eb(t))return`${i} for argmax(${t.argmax})`;if(Ig(t))return`${i} for argmin(${t.argmin})`;const s=r&&!dw(r)?pa(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||Ji(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const vBe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return VQt(e);default:return zQt(e,t)}};let bBe=vBe;function xBe(e){bBe=e}function HQt(){xBe(vBe)}function PS(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=noe(e))==null?void 0:a.title;if(!gt(e))return i??e.title;const s=e,o=r?roe(s,t):void 0;return n?ao(i,s.title,o):i??s.title??o}function noe(e){if(GT(e)&&e.axis)return e.axis;if(gBe(e)&&e.legend)return e.legend;if(eoe(e)&&e.header)return e.header}function roe(e,t){return bBe(e,t)}function UL(e){if(yBe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=noe(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function qQt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(toe(e)&&Xe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!eb(n)&&!Ig(n))return"quantitative";if(pw(e)&&((s=e.scale)!=null&&s.type))switch(QY[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function xm(e){if(gt(e))return e;if(GB(e))return e.condition}function jo(e){if($n(e))return e;if(sP(e))return e.condition}function _Be(e,t,n,r={}){if(Pt(e)||Kr(e)||Wv(e)){const i=Pt(e)?"string":Kr(e)?"number":"boolean";return pt(WKt(t,i,e)),{value:e}}return $n(e)?zL(e,t,n,r):sP(e)?{...e,condition:zL(e.condition,t,n,r)}:e}function zL(e,t,n,r){if(yBe(e)){const{format:i,formatType:s,...o}=e;if(x_(s)&&!n.customFormatTypes)return pt(nbe(t)),zL(o,t,n,r)}else{const i=GT(e)?"axis":gBe(e)?"legend":eoe(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(x_(o)&&!n.customFormatTypes)return pt(nbe(t)),zL({...e,[i]:a},t,n,r)}}return gt(e)?ioe(e,t,r):WQt(e)}function WQt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Kr(n)?"quantitative":Pt(n)?"nominal":fw(n)?"temporal":void 0,{...e,type:t}}function ioe(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Dse(r)&&!eb(r)&&!Ig(r)&&(pt(YKt(r)),delete a.aggregate),i&&(a.timeUnit=pa(i)),o&&(a.field=`${o}`),Ji(s)&&(a.bin=YB(s,t)),ka(s)&&!uo(t)&&pt(CXt(t)),ml(a)){const{type:u}=a,l=QXt(u);u!==l&&(a.type=l),u!=="quantitative"&&x8e(r)&&(pt(GKt(u,r)),a.type="quantitative")}else if(!p8e(t)){const u=qQt(a,t);a.type=u}if(ml(a)){const{compatible:u,warning:l}=GQt(a,t)||{};u===!1&&pt(l)}if(toe(a)&&Pt(a.sort)){const{sort:u}=a;if(ube(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&ube(l))return{...a,sort:{encoding:l,order:"descending"}}}if(eoe(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function YB(e,t){return Wv(e)?{maxbins:Gve(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Gve(t)}:e}const uE={compatible:!0};function GQt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case J0:case Z0:case RB:return jL(e)?uE:{compatible:!1,warning:JKt(t)};case Ts:case ba:case Kv:case hC:case vc:case Bm:case jm:case JN:case ZN:case DB:case y_:case NB:case PB:case uw:case Td:case Xh:case OB:return uE;case Jh:case pd:case Qh:case Zh:return n!==b_?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:uE;case ey:case Xv:case Qv:case Jv:case Zg:case Jg:case Qg:case Kh:case Fm:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:uE;case bc:case Zv:return!jL(e)&&!jQt(e)?{compatible:!1,warning:ZKt(t)}:uE;case zT:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:uE}}function YT(e){const{formatType:t}=UL(e);return t==="time"||!t&&YQt(e)}function YQt(e){return e&&(e.type==="temporal"||gt(e)&&!!e.timeUnit)}function KB(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=pa(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return tP(e)?a=e.expr:Xt(e)?a=e.signal:fw(e)?(o=!0,a=v_(e)):(Pt(e)||Kr(e))&&o&&(a=`datetime(${Fi(e)})`,FXt(s)&&(Kr(e)&&e<1e4||Pt(e)&&isNaN(Date.parse(e)))&&(a=v_({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Fi(e)}function wBe(e,t){const{type:n}=e;return t.map(r=>{const i=gt(e)&&!dw(e.timeUnit)?e.timeUnit:void 0,s=KB(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function oP(e,t){return Ji(e.bin)?ty(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const fbe={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function aP(e){return e==null?void 0:e.condition}const EBe=["domain","grid","labels","ticks","title"],KQt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},SBe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},XQt={...SBe,style:1,labelExpr:1,encoding:1};function dbe(e){return!!XQt[e]}const QQt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},TBe=ct(QQt);function ny(e){return"mark"in e}class XB{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return ny(t)?PQt(t.mark)===this.name:!1}}function Bx(e,t){const n=e&&e[t];return n?Xe(n)?m_(n,r=>!!r.field):gt(n)||GB(n):!1}function CBe(e,t){const n=e&&e[t];return n?Xe(n)?m_(n,r=>!!r.field):gt(n)||Vm(n)||sP(n):!1}function ABe(e,t){if(uo(t)){const n=e[t];if((gt(n)||Vm(n))&&(Y8e(n.type)||gt(n)&&n.timeUnit)){const r=Ase(t);return CBe(e,r)}}return!1}function soe(e){return m_(JYt,t=>{if(Bx(e,t)){const n=e[t];if(Xe(n))return m_(n,r=>!!r.aggregate);{const r=xm(n);return r&&!!r.aggregate}}return!1})}function IBe(e,t){const n=[],r=[],i=[],s=[],o={};return ooe(e,(a,u)=>{if(gt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=noe(a),m=p==null?void 0:p.title;let g=Tt(a,{forAs:!0});const y={...m?[]:{title:PS(a,t,{allowDisabling:!0})},...h,field:g};if(c){let b;if(eb(c)?(b="argmax",g=Tt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Ig(c)?(b="argmin",g=Tt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const x={op:b,as:g};l&&(x.field=l),s.push(x)}}else if(n.push(g),ml(a)&&Ji(f)){if(r.push({bin:f,field:l,as:g}),n.push(Tt(a,{binSuffix:"end"})),oP(a,u)&&n.push(Tt(a,{binSuffix:"range"})),uo(u)){const b={field:`${g}_end`};o[`${u}2`]=b}y.bin="binned",p8e(u)||(y.type=b_)}else if(d&&!dw(d)){i.push({timeUnit:d,field:l,as:g});const b=ml(a)&&a.type!==HT&&"time";b&&(u===JN||u===y_?y.formatType=b:uKt(u)?y.legend={formatType:b,...y.legend}:uo(u)&&(y.axis={formatType:b,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function JQt(e,t,n){const r=cKt(t,n);if(r){if(r==="binned"){const i=e[t===Kh?Ts:ba];return!!(gt(i)&&gt(e[t])&&ka(i.bin))}}else return!1;return!0}function ZQt(e,t,n,r){const i={};for(const s of ct(e))h8e(s)||pt(QKt(s));for(let s of iKt){if(!e[s])continue;const o=e[s];if(eP(s)){const a=rKt(s),u=i[a];if(gt(u)&&XXt(u.type)&&gt(o)&&!u.timeUnit){pt(qKt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(pt(HKt),s=Td),!JQt(e,s,t)){pt(FB(s,t));continue}if(s===Zg&&t==="line"){const a=xm(e[s]);if(a!=null&&a.aggregate){pt(XKt);continue}}if(s===vc&&(n?"fill"in e:"stroke"in e)){pt(N8e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===ZN||s===zT&&!Xe(o)&&!Mh(o)||s===y_&&Xe(o)){if(o){if(s===zT){const a=e[s];if(mBe(a)){i[s]=a;continue}}i[s]=Nt(o).reduce((a,u)=>(gt(u)?a.push(ioe(u,s)):pt(XY(u,s)),a),[])}}else{if(s===y_&&o===null)i[s]=null;else if(!gt(o)&&!Vm(o)&&!Mh(o)&&!WB(o)&&!Xt(o)){pt(XY(o,s));continue}i[s]=_Be(o,s,r)}}return i}function QB(e,t){const n={};for(const r of ct(e)){const i=_Be(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function eJt(e){const t=[];for(const n of ct(e))if(Bx(e,n)){const r=e[n],i=Nt(r);for(const s of i)gt(s)?t.push(s):GB(s)&&t.push(s.condition)}return t}function ooe(e,t,n){if(e)for(const r of ct(e)){const i=e[r];if(Xe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function tJt(e,t,n,r){return e?ct(e).reduce((i,s)=>{const o=e[s];return Xe(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function kBe(e,t){return ct(t).reduce((n,r)=>{switch(r){case Ts:case ba:case NB:case OB:case PB:case Kh:case Fm:case Kv:case hC:case Td:case Jg:case Xh:case Qg:case Qh:case Jh:case Zh:case pd:case JN:case bc:case uw:case y_:return n;case zT:if(e==="line"||e==="trail")return n;case ZN:case DB:{const i=t[r];if(Xe(i)||gt(i))for(const s of Nt(i))s.aggregate||n.push(Tt(s,{}));return n}case Zg:if(e==="trail")return n;case vc:case Bm:case jm:case ey:case Xv:case Qv:case Zv:case Jv:{const i=xm(t[r]);return i&&!i.aggregate&&n.push(Tt(i,{})),n}}},[])}function nJt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Xe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Xe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function eK(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${aoe(t)}`:"";return{field:o+t.field,type:t.type,title:Xt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=eJt(n).map(FQt);return{tooltip:[...i,...Fp(s,_r)]}}function aoe(e){const{title:t,field:n}=e;return ao(t,n)}function uoe(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=aoe(n);return RBe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Pt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function RBe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...bm(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Wv(e[t])?{}:e[t]}}]:[]}function DBe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:MO(s,n),continuousAxisChannelDef2:MO(o,n),continuousAxisChannelDefError:MO(a,n),continuousAxisChannelDefError2:MO(u,n),continuousAxis:i}}function MO(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&pt(TXt(n,t)),r}else return e}function NBe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(bm(n)&&n.orient)return n.orient;if(a1(i)){if(a1(s)){const o=gt(i)&&i.aggregate,a=gt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return YT(s)&&!YT(i)?"horizontal":"vertical"}return"horizontal"}else{if(a1(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const VL="boxplot",rJt=["box","median","outliers","rule","ticks"],iJt=new XB(VL,OBe);function PBe(e){return Kr(e)?"tukey":e}function OBe(e,{config:t}){e={...e,encoding:QB(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=bm(n)?n:{type:n};i&&pt(R8e("boxplot"));const u=a.extent??t.boxplot.extent,l=di("size",a,t),c=a.invalid,f=PBe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:b,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:S,customTooltipWithoutAggregatedField:T}=sJt(e,u,t),C=dC(m.field),{color:I,size:D,...k}=x,P=Fe=>uoe(a,g,m,Fe,t.boxplot),M=P(k),$=P(x),B=(Ot(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",q=P({...k,...D?{size:D}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...I||{value:B}}}}),H=eK([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,x),Y={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},K=f==="min-max"?H:eK([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,x),Q=[...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:K}),...M({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:K}),...M({partName:"ticks",mark:Y,positionPrefix:"lower_whisker",extraEncoding:K}),...M({partName:"ticks",mark:Y,positionPrefix:"upper_whisker",extraEncoding:K})],L=[...f!=="tukey"?Q:[],...$({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:S,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:H}),...q({partName:"median",mark:{type:"tick",invalid:c,...Ot(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:H})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:L};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,F=`(${W} - ${z})`,V=`${z} - ${u} * ${F}`,J=`${W} + ${u} * ${F}`,ue=`datum["${m.field}"]`,we={joinaggregate:$Be(m.field),groupby:y},he={transform:[{filter:`(${V} <= ${ue}) && (${ue} <= ${J})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${C}`},{op:"max",field:m.field,as:`upper_whisker_${C}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${C}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${C}`},...b],groupby:y}],layer:Q},{tooltip:ke,...Pe}=k,{scale:rt,axis:Re}=m,St=aoe(m),Je=oc(Re,["title"]),It=RBe(a,"outliers",t.boxplot,{transform:[{filter:`(${ue} < ${V}) || (${ue} > ${J})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...St!==void 0?{title:St}:{},...rt!==void 0?{scale:rt}:{},...Li(Je)?{}:{axis:Je}},...Pe,...I?{color:I}:{},...T?{tooltip:T}:{}}})[0];let mt;const Te=[...d,...h,we];return It?mt={transform:Te,layer:[It,he]}:(mt=he,mt.transform.unshift(...Te)),{...o,layer:[mt,{transform:p,layer:L}]}}function $Be(e){const t=dC(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function sJt(e,t,n){const r=NBe(e,VL),{continuousAxisChannelDef:i,continuousAxis:s}=DBe(e,r,VL),o=i.field,a=dC(o),u=PBe(t),l=[...$Be(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=nJt(d),{bins:m,timeUnits:g,aggregate:y,groupby:b,encoding:x}=IBe(p,n),w=r==="vertical"?"horizontal":"vertical",S=r,T=[...m,...g,{aggregate:[...y,...l],groupby:b},...c];return{bins:m,timeUnits:g,transform:T,groupby:b,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:S,customTooltipWithoutAggregatedField:h}}const loe="errorbar",oJt=["ticks","rule"],aJt=new XB(loe,MBe);function MBe(e,{config:t}){e={...e,encoding:QB(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=LBe(e,loe,t);delete s.size;const c=uoe(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function uJt(e,t){const{encoding:n}=e;if(lJt(n))return{orient:NBe(e,t),inputType:"raw"};const r=cJt(n),i=fJt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if($n(a)&&$n(u))throw new Error(`${t} cannot have both x2 and y2`);if($n(a)){if(a1(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if($n(u)){if(a1(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if($n(u)&&!$n(a))throw new Error(`${t} cannot have xError2 without xError`);if($n(c)&&!$n(l))throw new Error(`${t} cannot have yError2 without yError`);if($n(a)&&$n(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if($n(a)){if(a1(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if($n(l)){if(a1(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function lJt(e){return($n(e.x)||$n(e.y))&&!$n(e.x2)&&!$n(e.y2)&&!$n(e.xError)&&!$n(e.xError2)&&!$n(e.yError)&&!$n(e.yError2)}function cJt(e){return $n(e.x2)||$n(e.y2)}function fJt(e){return $n(e.xError)||$n(e.xError2)||$n(e.yError)||$n(e.yError2)}function LBe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=bm(r)?r:{type:r};s&&pt(R8e(t));const{orient:l,inputType:c}=uJt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=DBe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:b,tooltipTitleWithFieldName:x}=dJt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:S,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:C,...I}=i,{bins:D,timeUnits:k,aggregate:P,groupby:M,encoding:$}=IBe(I,n),B=[...P,...g],q=c!=="raw"?[]:M,H=eK(b,f,$,x);return{transform:[...a.transform??[],...D,...k,...B.length===0?[]:[{aggregate:B,groupby:q}],...y],groupby:q,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:$,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:H}}function dJt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&pt(SXt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:QN(h)},{fieldPrefix:"upper_",titlePrefix:hbe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:hbe(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:PS({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:PS({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:PS({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&pt(EXt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:g_(g_(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function hbe(e,t,n){return`${QN(e)} ${n} ${t}`}const coe="errorband",hJt=["band","borders"],pJt=new XB(coe,FBe);function FBe(e,{config:t}){e={...e,encoding:QB(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=LBe(e,coe,t),l=o,c=uoe(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?pt(ibe("interpolate")):l.tension&&pt(ibe("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const BBe={};function foe(e,t,n){const r=new XB(e,t);BBe[e]={normalizer:r,parts:n}}function mJt(){return ct(BBe)}foe(VL,OBe,rJt);foe(loe,MBe,oJt);foe(coe,FBe,hJt);const gJt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],jBe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},UBe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},yJt=ct(jBe),vJt=ct(UBe),bJt={header:1,headerRow:1,headerColumn:1,headerFacet:1},zBe=ct(bJt),VBe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],xJt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},_Jt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Lh="_vgsid_",wJt={point:{on:"click",fields:[Lh],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function doe(e){return e==="legend"||!!(e!=null&&e.legend)}function AV(e){return doe(e)&&Ot(e)}function hoe(e){return!!(e!=null&&e.select)}function HBe(e){const t=[];for(const n of e||[]){if(hoe(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function EJt(e){return JB(e)||moe(e)||poe(e)}function poe(e){return"concat"in e}function JB(e){return"vconcat"in e}function moe(e){return"hconcat"in e}function qBe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function _m(e){return Ot(e)&&e.step!==void 0}function pbe(e){return e.view||e.width||e.height}const mbe=20,SJt={align:1,bounds:1,center:1,columns:1,spacing:1},TJt=ct(SJt);function CJt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(qB(e)&&!iP(e.facet)||poe(e))&&(i.columns=o),JB(e)&&(i.columns=1);for(const a of TJt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=Kr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function tK(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function HL(e,t){const n=qL(e,t);return _m(n)?n.step:WBe}function qL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ao(n,{step:e.step})}const WBe=20,AJt={continuousWidth:200,continuousHeight:200,step:WBe},IJt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:AJt,mark:AQt,arc:{},area:{},bar:RQt,circle:{},geoshape:{},image:{},line:{},point:{},rect:DQt,rule:{color:"black"},square:{},text:{color:"black"},tick:NQt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:nQt,projection:{},legend:xJt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:wJt,style:{},title:{},facet:{spacing:mbe},concat:{spacing:mbe},normalizedNumberFormat:".0%"},f0=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],gbe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},ybe={blue:f0[0],orange:f0[1],red:f0[2],teal:f0[3],green:f0[4],yellow:f0[5],purple:f0[6],pink:f0[7],brown:f0[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function kJt(e={}){return{signals:[{name:"color",value:Ot(e)?{...ybe,...e}:ybe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function RJt(e){return{signals:[{name:"fontSize",value:Ot(e)?{...gbe,...e}:gbe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function DJt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function GBe(e){const t=ct(e||{}),n={};for(const r of t){const i=e[r];n[r]=aP(i)?E8e(i):zc(i)}return n}function NJt(e){const t=ct(e),n={};for(const r of t)n[r]=GBe(e[r]);return n}const PJt=[...lBe,...TBe,...zBe,"background","padding","legend","lineBreak","scale","style","title","view"];function YBe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=tC({},An(IJt),n?DJt(n):{},t?kJt(t):{},r?RJt(r):{},s||{});i&&nC(o,"selection",i,!0);const a=oc(o,PJt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=zc(o[u]));for(const u of lBe)o[u]&&(a[u]=zl(o[u]));for(const u of TBe)o[u]&&(a[u]=GBe(o[u]));for(const u of zBe)o[u]&&(a[u]=zl(o[u]));return o.legend&&(a.legend=zl(o.legend)),o.scale&&(a.scale=zl(o.scale)),o.style&&(a.style=NJt(o.style)),o.title&&(a.title=zl(o.title)),o.view&&(a.view=zl(o.view)),a}const OJt=new Set(["view",..._Qt]),$Jt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],MJt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...CQt};function LJt(e){e=An(e);for(const t of $Jt)delete e[t];if(e.axis)for(const t in e.axis)aP(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of gJt)delete e.legend[t];if(e.mark){for(const t of abe)delete e.mark[t];e.mark.tooltip&&Ot(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(HBe(e.params)),delete e.params);for(const t of OJt){for(const r of abe)delete e[t][r];const n=MJt[t];if(n)for(const r of n)delete e[t][r];BJt(e,t)}for(const t of mJt())delete e[t];FJt(e);for(const t in e)Ot(e[t])&&Li(e[t])&&delete e[t];return Li(e)?void 0:e}function FJt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=w8e(e.title);Li(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Li(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Li(r)?delete e.title:e.title=r}function BJt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Li(s)||(e.style[n??t]=s),delete e[t]}function ZB(e){return"layer"in e}function jJt(e){return"repeat"in e}function UJt(e){return!Xe(e.repeat)&&e.repeat.layer}class goe{map(t,n){return qB(t)?this.mapFacet(t,n):jJt(t)?this.mapRepeat(t,n):moe(t)?this.mapHConcat(t,n):JB(t)?this.mapVConcat(t,n):poe(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(ZB(t))return this.mapLayer(t,n);if(ny(t))return this.mapUnit(t,n);throw new Error(Nse(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const zJt={zero:1,center:1,normalize:1};function VJt(e){return e in zJt}const HJt=new Set([oBe,UB,jB,FL,VB,Jse,Zse,zB,aBe,Qse]),qJt=new Set([UB,jB,oBe]);function lE(e){return gt(e)&&WT(e)==="quantitative"&&!e.bin}function vbe(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(gt(o)&&gt(a))if(lE(o)&&lE(a)){if(o.stack)return t;if(a.stack)return i;const u=gt(o)&&!!o.aggregate,l=gt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(lE(o))return t;if(lE(a))return i}else{if(lE(o))return s&&n==="vertical"?void 0:t;if(lE(a))return s&&n==="horizontal"?void 0:i}}function WJt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function KBe(e,t){var m,g;const n=bm(e)?e:{type:e},r=n.type;if(!HJt.has(r))return null;const i=vbe(t,"x",n)||vbe(t,"theta",n);if(!i)return null;const s=t[i],o=gt(s)?Tt(s,{}):void 0,a=WJt(i),u=[],l=new Set;if(t[a]){const y=t[a],b=gt(y)?Tt(y,{}):void 0;b&&b!==o&&(u.push(a),l.add(b))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=gt(f)?Tt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=sKt.reduce((y,b)=>{if(b!=="tooltip"&&Bx(t,b)){const x=t[b];for(const w of Nt(x)){const S=xm(w);if(S.aggregate)continue;const T=Tt(S,{});(!T||!l.has(T))&&y.push({channel:b,fieldDef:S})}}return y},[]);let p;return s.stack!==void 0?Wv(s.stack)?p=s.stack?"zero":null:p=s.stack:qJt.has(r)&&(p="zero"),!p||!VJt(p)||soe(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==ac.LINEAR&&s!=null&&s.stack&&pt(xXt(s.scale.type)),$n(t[Um(i)])?(s.stack!==void 0&&pt(bXt(i)),null):(gt(s)&&s.aggregate&&!yKt.has(s.aggregate)&&pt(_Xt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:hw(r),stackBy:h,offset:p}))}function XBe(e,t,n){const r=zl(e),i=di("orient",r,n);if(r.orient=XJt(r.type,t,i),i!==void 0&&i!==r.orient&&pt(rXt(r.orient,i)),r.type==="bar"&&r.orient){const u=di("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:kQt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=di("opacity",r,n),o=di("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=YJt(r.type,t)),di("cursor",r,n)===void 0&&(r.cursor=GJt(r,t,n)),r}function GJt(e,t,n){return t.href||e.href||di("href",e,n)?"pointer":e.cursor}function YJt(e,t){if(wr([VB,Qse,Jse,Zse],e)&&!soe(t))return .7}function KJt(e,t,{graticule:n}){if(n)return!1;const r=kg("filled",e,t),i=e.type;return ao(r,i!==VB&&i!==zB&&i!==FL)}function XJt(e,t,n){switch(e){case VB:case Jse:case Zse:case aBe:case bQt:case vQt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case UB:if(gt(r)&&(ka(r.bin)||gt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(gt(i)&&(ka(i.bin)||gt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(gt(r)&&r.type===b_&&!Ji(r.bin)||BL(r))&&gt(i)&&ka(i.bin)?"horizontal":"vertical";if(!o)return(gt(i)&&i.type===b_&&!Ji(i.bin)||BL(i))&&gt(r)&&ka(r.bin)?"vertical":"horizontal"}case FL:if(s&&!(gt(r)&&ka(r.bin))&&o&&!(gt(i)&&ka(i.bin)))return;case jB:if(o)return gt(i)&&ka(i.bin)?"horizontal":"vertical";if(s)return gt(r)&&ka(r.bin)?"vertical":"horizontal";if(e===FL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case zB:case Qse:{const a=cbe(r),u=cbe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ml(r)&&r.type===HT,c=ml(i)&&i.type===HT;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function QJt(e){const{point:t,line:n,...r}=e;return ct(r).length>1?r:r.type}function JJt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:oc(e[t],["point","line"])});return e}function IV(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ot(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ot(t.point)?t.point:{}:void 0}function bbe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class ZJt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(ny(t)){const{mark:r,encoding:i}=t,s=bm(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!IV(s,n[s.type],i);case"area":return!!IV(s,n[s.type],i)||!!bbe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=QB(l,i),d=bm(a)?a:{type:a},h=IV(d,i[d.type],f),p=d.type==="area"&&bbe(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:QJt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:oc(f,["shape"])}],g=KBe(XBe(d,f,i),f);let y=f;if(g){const{fieldChannel:b,offset:x}=g;y={...f,[b]:{...f[b],...x?{stack:x}:{}}}}return y=oc(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...jT(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...jT(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:JJt(i)})}}function eZt(e,t){return t?iP(e)?JBe(e,t):QBe(e,t):e}function kV(e,t){return t?JBe(e,t):e}function nK(e,t,n){const r=t[e];if(MQt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};pt(LKt(r.repeat));return}return t}function QBe(e,t){if(e=nK("field",e,t),e!==void 0){if(e===null)return null;if(toe(e)&&Jp(e.sort)){const n=nK("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function xbe(e,t){if(gt(e))return QBe(e,t);{const n=nK("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function _be(e,t){if($n(e)){const n=xbe(e,t);if(n)return n;if(WB(e))return{condition:e.condition}}else{if(sP(e)){const n=xbe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function JBe(e,t){const n={};for(const r in e)if(sn(e,r)){const i=e[r];if(Xe(i))n[r]=i.map(s=>_be(s,t)).filter(s=>s);else{const s=_be(i,t);s!==void 0&&(n[r]=s)}}return n}class tZt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(ny(t)){const{encoding:n,mark:r}=t;if(r==="line"||bm(r)&&r.type==="line")for(const i of nKt){const s=lw(i),o=n[s];if(n[i]&&(gt(o)&&!ka(o.bin)||Vm(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return pt(nXt(!!i.x2,!!i.y2)),r({...t,mark:Ot(s)?{...s,type:"rule"}:"rule"},n)}}class nZt extends goe{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[iJt,aJt,pJt,new ZJt,new tZt]}map(t,n){if(ny(t)){const r=Bx(t.encoding,J0),i=Bx(t.encoding,Z0),s=Bx(t.encoding,RB);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=kV(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return UJt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ss(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Xe(r)&&t.columns&&(t=oc(t,["columns"]),pt(ebe("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Xe(r)&&r.row||[u?u.row:null],f=!Xe(r)&&r.column||[u?u.column:null],d=Xe(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},b=(i.name?`${i.name}_`:"")+l+"child__"+(Xe(r)?`${Ss(p)}`:(r.row?`row_${Ss(m)}`:"")+(r.column?`column_${Ss(g)}`:"")),x=this.map(i,{...n,repeater:y,repeaterPrefix:b});x.name=b,a.push(oc(x,["data"]))}const h=Xe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return iP(r)&&t.columns&&(t=oc(t,["columns"]),pt(ebe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Ebe({parentProjection:o,projection:i}),l=wbe({parentEncoding:s,encoding:kV(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=kV(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&pt(eXt([...r?[J0]:[],...i?[Z0]:[]]));const o={},a={};for(const u of[J0,Z0]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:eZt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:wbe({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Ebe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function wbe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...ct(e),...ct(t)]);for(const s of i){const o=t[s],a=e[s];if($n(o)){const u={...a,...o};r[s]=u}else sP(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Mh(a)||Xt(a)||$n(a)||Xe(a))&&(r[s]=a)}}else r=t;return!r||Li(r)?void 0:r}function Ebe(e){const{parentProjection:t,projection:n}=e;return t&&n&&pt(VKt({parentProjection:t,projection:n})),n??t}function yoe(e){return"filter"in e}function rZt(e){return(e==null?void 0:e.stop)!==void 0}function ZBe(e){return"lookup"in e}function iZt(e){return"data"in e}function sZt(e){return"param"in e}function oZt(e){return"pivot"in e}function aZt(e){return"density"in e}function uZt(e){return"quantile"in e}function lZt(e){return"regression"in e}function cZt(e){return"loess"in e}function fZt(e){return"sample"in e}function dZt(e){return"window"in e}function hZt(e){return"joinaggregate"in e}function pZt(e){return"flatten"in e}function mZt(e){return"calculate"in e}function e9e(e){return"bin"in e}function gZt(e){return"impute"in e}function yZt(e){return"timeUnit"in e}function vZt(e){return"aggregate"in e}function bZt(e){return"stack"in e}function xZt(e){return"fold"in e}function _Zt(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function wZt(e){return e.map(t=>yoe(t)?{filter:DS(t.filter,KXt)}:t)}class EZt extends goe{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Sbe(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Sbe(t,n),t.encoding){const r={};for(const[i,s]of cv(t.encoding))r[i]=t9e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:cv(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Fa(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Sbe(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(yoe(s))return{filter:rK(s,t)};if(e9e(s)&&cw(s.bin))return{...s,bin:n9e(s.bin)};if(ZBe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function t9e(e,t){var r,i;const n=An(e);if(gt(n)&&cw(n.bin)&&(n.bin=n9e(n.bin)),pw(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(WB(n))if(Xe(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:rK(s,t)}});else{const{selection:s,param:o,test:a,...u}=t9e(n.condition,t);n.condition=o?n.condition:{...u,test:rK(n.condition,t)}}return n}function n9e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function rK(e,t){const n=r=>DS(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):DS(e.test||e.filter,r=>r.selection?n(r.selection):r)}class iK extends goe{map(t,n){const r=n.selections??[];if(t.params&&!ny(t)){const i=[];for(const s of t.params)hoe(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Pt(a)&&(a===t.name||i.includes(a))||Xe(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=iK.prototype[e];iK.prototype[e]=function(n,r){return t.call(this,n,SZt(n,r))}}function SZt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function r9e(e,t){t===void 0&&(t=YBe(e.config));const n=IZt(e,t),{width:r,height:i}=e,s=kZt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const TZt=new nZt,CZt=new EZt,AZt=new iK;function IZt(e,t={}){const n={config:t};return AZt.map(TZt.map(CZt.map(e,n),n),n)}function Tbe(e){return Pt(e)?{type:e}:e??{}}function kZt(e,t,n){let{width:r,height:i}=t;const s=ny(e)||ZB(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(pt(Xve("width")),r=void 0),i=="container"&&(pt(Xve("height")),i=void 0));const a={type:"pad",...o,...n?Tbe(n.autosize):{},...Tbe(e.autosize)};if(a.type==="fit"&&!s&&(pt(CKt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&pt(Qve("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&pt(Qve("height")),!Kc(a,{type:"pad"}))return a}function RZt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function DZt(e){return e?`fit-${$B(e)}`:"fit"}const NZt=["background","padding"];function Cbe(e,t){const n={};for(const r of NZt)e&&e[r]!==void 0&&(n[r]=zc(e[r]));return t&&(n.params=e.params),n}class ry{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ry(An(this.explicit),An(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ao(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ct(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function bp(e){return{explicit:!0,value:e}}function Oc(e){return{explicit:!1,value:e}}function i9e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:e9(t,n,r,i)}}function e9(e,t,n,r){return e.explicit&&t.explicit&&pt(dXt(n,r,e.value,t.value)),e}function hv(e,t,n,r,i=e9){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Kc(e.value,t.value)?e:i(e,t,n,r)}class PZt extends ry{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function KT(e){return"url"in e}function fD(e){return"values"in e}function s9e(e){return"name"in e&&!KT(e)&&!fD(e)&&!I1(e)}function I1(e){return e&&(o9e(e)||a9e(e)||voe(e))}function o9e(e){return"sequence"in e}function a9e(e){return"sphere"in e}function voe(e){return"graticule"in e}var xs;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(xs||(xs={}));function u9e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=hd(i.field),i}function w_(e,t=!0,n=Iu){if(Xe(e)){const r=e.map(i=>w_(i,t,n));return t?`[${r.join(", ")}]`:r}else if(fw(e))return n(t?v_(e):LXt(e));return t?n(Fi(e)):e}function OZt(e,t){for(const n of Fa(e.component.selection??{})){const r=n.name;let i=`${r}${mv}, ${n.resolve==="global"?"true":`{unit: ${jx(e)}}`}`;for(const s of i9)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+den,on:[{events:{signal:n.name+mv},update:`modify(${Et(n.name+E_)}, ${i})`}]})}return boe(t)}function $Zt(e,t){if(e.component.selection&&ct(e.component.selection).length){const n=Et(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Yv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return boe(t)}function MZt(e,t){let n=!1;for(const r of Fa(e.component.selection??{})){const i=r.name,s=Et(i+E_);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${C9e}(${s}, ${Et(a)}${u}`})}n=!0;for(const a of i9)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),boe(t)}function LZt(e,t){const n=[...t],r=jx(e,{escape:!1});for(const i of Fa(e.component.selection??{})){const s={name:i.name+E_};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Lh}}]),i.init){const a=i.project.items.map(u9e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Lh]:w_(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:w_(u,!1)}))}n.filter(a=>a.name===i.name+E_).length||n.push(s)}return n}function l9e(e,t){for(const n of Fa(e.component.selection??{}))for(const r of i9)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function FZt(e,t){for(const n of e.children)Vs(n)&&(t=l9e(n,t));return t}function BZt(e,t,n,r){const i=D9e(e,t.param,t);return{signal:bf(n.get("type"))&&Xe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function boe(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Ii{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){pt(jKt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class uc extends Ii{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${s8e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function RV(e){return e.as!==void 0}function Abe(e){return`${e}_end`}class Zp extends Ii{clone(){return new Zp(null,An(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(dw(u)){if(Vs(n)){const{mark:c,markDef:f,config:d}=n,h=dv({fieldDef:s,markDef:f,config:d});(cD(c)||h)&&(l={timeUnit:pa(u),field:a})}}else l={as:Tt(s,{forAs:!0}),field:a,timeUnit:u};if(Vs(n)){const{mark:c,markDef:f,config:d}=n,h=dv({fieldDef:s,markDef:f,config:d});cD(c)&&uo(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[_r(l)]=l)}return i},{});return Li(r)?null:new Zp(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=pa(r),o={...i,timeUnit:s};return new Zp(t,{[_r(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of cv(this.timeUnits)){const s=RV(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Fa(this.timeUnits).map(t=>RV(t)?t.as:Abe(t.field)))}dependentFields(){return new Set(Fa(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${_r(this.timeUnits)}`}assemble(){const t=[];for(const n of Fa(this.timeUnits)){const{rectBandPosition:r}=n,i=pa(n.timeUnit);if(RV(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:hd(s),type:"timeunit",...a?{units:BB(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Ibe(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=c9e({timeUnit:i,field:o}),u=Abe(o);t.push({type:"formula",expr:a,as:u}),t.push(...Ibe([o,u],r,i))}}return t}}const t9="offsetted_rect_start",n9="offsetted_rect_end";function c9e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=U8e(r),{part:o,step:a}=q8e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Ibe([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:kbe([c9e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${t9}`},{type:"formula",expr:kbe([i,s],n+.5),as:`${e}_${n9}`}]}return[]}function kbe([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const uP="_tuple_fields";class jZt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const UZt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new jZt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ss(`${r}_${g}`);for(let b=1;a.has(y);b++)y=Ss(`${r}_${g}_${b}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Nt(n.value):null;let{fields:d,encodings:h}=Ot(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(Ot(p))for(const m of ct(p))tKt(m)?(h||(h=[])).push(m):l==="interval"?(pt(MKt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){pt(AKt(p,m.aggregate));continue}else if(!g){pt(Zve(p));continue}if(m.timeUnit&&!dw(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[_r(y)]=y}if(!s[g]){const y=l==="interval"&&ty(p)&&bf(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",b={field:g,channel:p,type:y,index:i.items.length};b.signals={...u(b,"data"),...u(b,"visual")},i.items.push(s[g]=b),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Lh,f8e(p)?(b.geoChannel=p,b.channel=c8e(p),i.hasChannel[b.channel]=s[g]):i.hasChannel[p]=s[g]}}else pt(Zve(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Lh}f&&(t.init=f.map(p=>i.items.map(m=>Ot(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Li(o)||(i.timeUnit=new Zp(null,o))},signals:(e,t,n)=>{const r=t.name+uP;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(u9e)})}},eg={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!ty(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&pt(DKt),!s||!bf(o)){pt(RKt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Rbe(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(C9e)>=0)i.update=`{${r.map(o=>`${Et(hd(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${Et(hd(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Rbe(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function sK(e,t){return`domain(${Et(e.scaleName(t))})`}function Rbe(e){return e.parent&&bC(e.parent)&&!e.parent.parent}const OS="_brush",f9e="_scale_trigger",MA="geo_interval_init_tick",d9e="_init",zZt="_center",VZt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ot(n.select)?n.select:{}};i.fields=[Lh],i.encodings||(i.encodings=n.value?ct(n.value):[Jh,Qh]),n.select={type:"interval",...i}}if(t.translate&&!eg.defined(t)){const i=`!event.item || event.item.mark.name !== ${Et(t.name+OS)}`;for(const s of t.events){if(!s.between){pt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Nt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+mv,s=Fa(t.project.hasChannel).filter(a=>a.channel===Ts||a.channel===ba),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(HZt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=Et(e.projectionName()),u=e.projectionName()+zZt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=S=>e.getSizeSignalRef(S).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+d9e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${Et(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${jx(e)}}`,x=`vlSelectionTuples(${y}, ${b})`,w=s.map(S=>S.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:MA}]:[]],update:x}]})}else{if(!eg.defined(t)){const l=r+f9e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=Et(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=bf(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${jx(e)}, fields: ${r+uP}, values`;return n.concat({name:i,...o?{init:`{${u}: ${w_(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Vs(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===MA).length||n.unshift({name:MA,value:null,on:[{events:"timer{1}",update:`${MA} === null ? {} : ${MA}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${Et(t.name+E_)})`;if(eg.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of ct(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${jx(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=ct(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+OS}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+OS,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function HZt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=Et(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ts?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=eg.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:w_(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+f9e},update:bf(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:w_(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ts?0:1,h=t.name+d9e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const qZt={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+uP,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Fa(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+OS):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${jx(e)}, `;if(t.project.hasSelectionId)l+=`${Lh}: ${o}[${Et(Lh)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${Et(e.vgField(d.channel,{}))}], ${o}[${Et(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${Et(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+mv,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function mC(e,t,n,r){const i=WB(t)&&t.condition,s=r(t);if(i){const a=Nt(i).map(u=>{const l=r(u);if($Qt(u)){const{param:c,empty:f}=u;return{test:R9e(e,{param:c,empty:f}),...l}}else return{test:YL(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function xoe(e,t="text"){const n=e.encoding[t];return mC(e,n,t,r=>r9(r,e.config))}function r9(e,t,n="datum"){if(e){if(Mh(e))return as(e.value);if($n(e)){const{format:r,formatType:i}=UL(e);return Xse({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function h9e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Xe(o))return{tooltip:Dbe({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return mC(e,o,"tooltip",u=>{const l=r9(u,i,a);if(l)return l;if(u===null)return;let c=di("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),Pt(c))return{value:c};if(Ot(c))return Xt(c)?c:c.content==="encoding"?Dbe(n,s,i,t):{signal:a}})}}function p9e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=lw(f),h=ml(c)?c:{...c,type:e[d].type},p=h.title||roe(h,i),m=Nt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(uo(f)){const y=f==="x"?"x2":"y2",b=xm(e[y]);if(ka(h.bin)&&b){const x=Tt(h,{expr:o}),w=Tt(b,{expr:o}),{format:S,formatType:T}=UL(h);g=rP(x,w,S,T,i),s[y]=!0}}if((uo(f)||f===Td||f===Xh)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:b}=UL(h);g=Xse({fieldOrDatumDef:h,format:y,formatType:b,expr:o,config:i,normalizeStack:!0}).signal}g??(g=r9(h,i,o).signal),a.push({channel:f,key:m,value:g})}ooe(e,(c,f)=>{gt(c)?u(c,f):GB(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Dbe(e,t,n,{reactiveGeom:r}={}){const i=p9e(e,t,n,{reactiveGeom:r}),s=cv(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function WZt(e){const{markDef:t,config:n}=e,r=di("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...GZt(e),...YZt(e)}}function GZt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=di("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in EKt?{}:{ariaRoleDescription:{value:t}}}function YZt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return mC(e,s,"description",u=>r9(u,e.config));const o=di("description",n,r);if(o!=null)return{description:as(o)};if(r.aria===!1)return{};const a=p9e(t,i,r);if(!Li(a))return{description:{signal:cv(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function oa(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=di(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=as(u)));const l=i[e];return mC(t,l,o??e,c=>Kse({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function m9e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??di("filled",n,i),a=wr(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=di(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=di(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:as(u)}:{},...l?{stroke:as(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&pt(N8e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...oa("color",e,{vgChannel:c,defaultValue:o?u:l}),...oa("fill",e,{defaultValue:r.fill?u:void 0}),...oa("stroke",e,{defaultValue:r.stroke?l:void 0})}}function KZt(e){const{encoding:t,mark:n}=e,r=t.order;return!hw(n)&&Mh(r)?mC(e,r,"zindex",i=>as(i.value)):{}}function XT({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Kse({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:as(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function bu(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Um(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=XT({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=_oe({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&uo(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:XZt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function XZt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if($n(n)&&i&&t===i.fieldChannel){if(gt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return LL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Fx(n,r,{suffix:"end"},{offset:s})}return Gse(e)}function _oe({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=lw(n),u=fv(n),l=di(n,s,o,{vgChannel:u});if(l!==void 0)return Sk(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!wr([ac.LOG,ac.TIME,ac.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[xc(n)],mult:.5}}}}const QZt={left:"x",center:"xc",right:"x2"},JZt={top:"y",middle:"yc",bottom:"y2"};function g9e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return fv(e);const i=e==="x"?"align":"baseline",s=di(i,t,n);let o;return Xt(s)?(pt(tXt(i)),o=void 0):o=s,e==="x"?QZt[o||(r==="top"?"left":"center")]:JZt[o||r]}function WL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?y9e(e,t,{defaultPos:n,defaultPos2:r}):bu(e,t,{defaultPos:n})}function y9e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Um(e),a=xc(e),u=ZZt(t,r,o),l=u[a]?g9e(e,i,s):fv(e);return{...bu(e,t,{defaultPos:n,vgChannel:l}),...u}}function ZZt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=lw(n),l=xc(n),c=fv(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?XT({channel:n,markDef:s,encoding:r,model:e}):XT({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=xc(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=een({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:LO(n,s)||LO(n,{[n]:$L(n,s,a.style),[l]:$L(l,s,a.style)})||LO(n,a[i])||LO(n,a.mark)||{[c]:_oe({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function een({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return $n(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Fx(t,s,{suffix:"start"},{offset:u}):Gse({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function LO(e,t){const n=xc(e),r=fv(e);if(t[r]!==void 0)return{[r]:Sk(e,t[r])};if(t[e]!==void 0)return{[r]:Sk(e,t[e])};if(t[n]){const i=t[n];if(__(i))pt(KKt(n));else return{[n]:Sk(e,i)}}}function pv(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Um(t),a=xc(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??di("size",i,n,{vgChannel:a}),p=m8e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return gt(u)&&(Ji(u.bin)||ka(u.bin)||u.timeUnit&&!l)&&!(h&&!__(h))&&!r[p]&&!ga(f)?ren({fieldDef:u,fieldDef2:l,channel:t,model:e}):($n(u)&&ga(f)||m)&&!l?nen(u,t,e):y9e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function ten(e,t,n,r,i,s,o){if(__(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=kg("minBandSize",{type:o},r);return{signal:c?`max(${mh(c)}, ${l})`:l}}else i.band!==1&&(pt(sXt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Xt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(tb(u)&&Kr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=ao(u,o==="bar"?l:c);if(Xt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(Kr(f))return{signal:`${1-f} * ${e}`}}return{value:HL(r.view,e)-2}}function nen(e,t,n){var D,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=xc(t),f=Um(t),d=m8e(t),h=n.scaleName(d),p=n.getScaleComponent(Ase(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=oa("size",n,{vgChannel:c,defaultRef:as(r.size)}):pt(lXt(r.type)));const y=!!g,b=hBe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(D=l||p)==null?void 0:D.get("type"),useVlSizeChannel:m});g=g||{[c]:ten(c,h||u,p||l,s,b,!!e,r.type)};const x=((k=l||p)==null?void 0:k.get("type"))==="band"&&__(b)&&!y?"top":"middle",w=g9e(t,r,s,x),S=w==="xc"||w==="yc",{offset:T,offsetType:C}=XT({channel:t,markDef:r,encoding:i,model:n,bandPosition:S?.5:0}),I=Gse({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:_oe({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:S?C==="encoding"?0:.5:Xt(b)?{signal:`(1-${b})/2`}:__(b)?(1-b.band)/2:0});if(c)return{[w]:I,...g};{const P=fv(f),M=g[c],$=T?{...M,offset:T}:M;return{[w]:I,[P]:Xe(I)?[I[0],{...I[1],offset:$}]:{...I,offset:$}}}}function Nbe(e,t,n,r,i,s,o){if(l8e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Xt(n)||Xt(i)||Xt(r)||s){const l=mh(n),c=mh(i),f=mh(r),d=mh(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function ren({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=hBe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=uo(n)?di("binSpacing",s,i)??0:0,m=Um(n),g=fv(n),y=fv(m),b=kg("minBandSize",s,i),{offset:x}=XT({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=XT({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),S=pQt({fieldDef:e,scaleName:u}),T=Nbe(n,p,c,h,x,b,S),C=Nbe(m,p,c,h,w??x,b,S),I=Xt(f)?{signal:`(1-${f.signal})/2`}:__(f)?(1-f.band)/2:.5,D=dv({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(Ji(e.bin)||e.timeUnit){const P=e.timeUnit&&D!==.5;return{[y]:Pbe({fieldDef:e,scaleName:u,bandPosition:I,offset:C,useRectOffsetField:P}),[g]:Pbe({fieldDef:e,scaleName:u,bandPosition:Xt(I)?{signal:`1-${I.signal}`}:1-I,offset:T,useRectOffsetField:P})}}else if(ka(e.bin)){const P=Fx(e,u,{},{offset:C});if(gt(t))return{[y]:P,[g]:Fx(t,u,{},{offset:T})};if(cw(e.bin)&&e.bin.step)return{[y]:P,[g]:{signal:`scale("${u}", ${Tt(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}pt($8e(m))}function Pbe({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return LL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:t9,endSuffix:n9}:{}})}const ien=new Set(["aria","width","height"]);function Cd(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?m9e(e):{};return{...sen(e.markDef,t),...Obe(e,"fill",n),...Obe(e,"stroke",r),...oa("opacity",e),...oa("fillOpacity",e),...oa("strokeOpacity",e),...oa("strokeWidth",e),...oa("strokeDash",e),...KZt(e),...h9e(e),...xoe(e,"href"),...WZt(e)}}function Obe(e,t,n){const{config:r,mark:i,markDef:s}=e;if(di("invalid",s,r)==="hide"&&n&&!hw(i)){const a=oen(e,{invalid:!0,channels:MB});if(a)return{[t]:[{test:a,value:null},...Nt(n)]}}return n?{[t]:n}:{}}function sen(e,t){return wKt.reduce((n,r)=>(!ien.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=as(e[r])),n),{})}function oen(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&bf(u)&&(s[l]=!0)}return s},{}),i=ct(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Yse(o,t)).join(` ${s} `)}}function woe(e){const{config:t,markDef:n}=e;if(di("invalid",n,t)){const i=aen(e,{channels:zm});if(i)return{defined:{signal:i}}}return{}}function aen(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&bf(l)&&(s[c]=!0)}return s},{}),i=ct(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Yse(o,t)).join(` ${s} `)}}function $be(e,t){if(t!==void 0)return{[e]:as(t)}}const DV="voronoi",v9e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(DV)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(hw(s))return pt(IKt(s)),n;const o={name:e.getName(DV),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...h9e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(DV)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},b9e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!doe(e.bind),parse:(e,t,n)=>A9e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=v9e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ss(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:w_(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${Et(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+mv)[0],o=r+uP,a=i.items.map(l=>Ss(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},GL="_toggle",x9e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+GL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+mv,r=t.name+GL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${jx(e)}}, `)+`${r} ? ${n} : null`}},uen={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Pt(t.clear)?Yv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(b9e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ss(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+mv);r(i,"null"),x9e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+GL),r(i,"false"))}return n}},_9e={defined:e=>{const t=e.resolve==="global"&&e.bind&&doe(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Lh;return t&&!n&&pt(NKt),t&&n},parse:(e,t,n)=>{const r=An(n);if(r.select=Pt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},A9e(t,r),Ot(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Nt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=AV(t.bind)?t.bind.legend:"click",s=Pt(i)?Yv(i,"view"):Nt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=AV(t.bind)&&t.bind.legend,s=o=>a=>{const u=An(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ss(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+mv),o=r+uP,a=i.items.filter(d=>d.hasLegend).map(d=>Ss(`${r}_${Ss(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+GL),f=AV(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function len(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Fa(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&_9e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const w9e="_translate_anchor",E9e="_translate_delta",cen={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=eg.defined(t),s=r+w9e,{x:o,y:a}=t.project.hasChannel;let u=Yv(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+OS,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?sK(e,Ts):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?sK(e,ba):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+E9e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Mbe(e,t,o,"width",n),a!==void 0&&Mbe(e,t,a,"height",n),n}};function Mbe(e,t,n,r,i){const s=t.name,o=s+w9e,a=s+E9e,u=n.channel,l=eg.defined(t),c=i.filter(S=>S.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ts?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,b=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",x=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${b}(${g}, ${y}${x})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const S9e="_zoom_anchor",T9e="_zoom_delta",fen={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=eg.defined(t),s=r+T9e,{x:o,y:a}=t.project.hasChannel,u=Et(e.scaleName(Ts)),l=Et(e.scaleName(ba));let c=Yv(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+OS,f))),n.push({name:r+S9e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Lbe(e,t,o,"width",n),a!==void 0&&Lbe(e,t,a,"height",n),n}};function Lbe(e,t,n,r,i){const s=t.name,o=n.channel,a=eg.defined(t),u=i.filter(b=>b.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?sK(e,o):u.name,h=s+T9e,p=`${s}${S9e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const E_="_store",mv="_tuple",den="_modify",C9e="vlSelectionResolve",i9=[qZt,VZt,UZt,x9e,b9e,eg,_9e,uen,cen,fen,v9e];function hen(e){let t=e.parent;for(;t&&!nf(t);)t=t.parent;return t}function jx(e,{escape:t}={escape:!0}){let n=t?Et(e.name):e.name;const r=hen(e);if(r){const{facet:i}=r;for(const s of ed)i[s]&&(n+=` + '__facet_${s}_' + (facet[${Et(r.vgField(s))}])`)}return n}function Eoe(e){return Fa(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function A9e(e,t){(Pt(t.select)||!t.select.on)&&delete e.events,(Pt(t.select)||!t.select.clear)&&delete e.clear,(Pt(t.select)||!t.select.toggle)&&delete e.toggle}function oK(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...oK(e.object)),t.push(...oK(e.property))),t)}function I9e(e){return e.object.type==="MemberExpression"?I9e(e.object):e.object.name==="datum"}function k9e(e){const t=Vie(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&I9e(r)&&n.add(oK(r).slice(1).join("."))}),n}class gC extends Ii{clone(){return new gC(null,this.model,An(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=YL(this.model,this.filter,this),this._dependentFields=k9e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function pen(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ss(i.name),o=i.select,a=Pt(o)?o:o.type,u=Ot(o)?An(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=An(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:Pt(u.on)?Yv(u.on,"scope"):Nt(An(u.on))},f=An(i);for(const d of i9)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function R9e(e,t,n,r="datum"){const i=Pt(t)?t:t.param,s=Ss(i),o=Et(s+E_);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${Et(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function D9e(e,t,n){const r=Ss(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&pt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Et(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,pt((a.length?"Multiple ":"No ")+`matching ${Et(i)} encoding found for selection ${Et(n.param)}. Using "field": ${Et(s)}.`)):s=a[0].field}return`${o.name}[${Et(hd(s))}]`}function men(e,t){for(const[n,r]of cv(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new uc(new gC(t,e,{param:n}),i,xs.Lookup,e.component.data.outputNodeRefCounts)}}function YL(e,t,n){return Ek(t,r=>Pt(r)?r:WXt(r)?R9e(e,r,n):G8e(r))}function gen(e,t){if(e)return Xe(e)&&!Ly(e)?e.map(n=>roe(n,t)).join(", "):e}function NV(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function NI(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=KQt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(aP(m)){const{condition:g,...y}=m,b=Nt(g),x=fbe[h];if(x){const{vgProp:w,part:S}=x,T=[...b.map(C=>{const{test:I,...D}=C;return{test:YL(null,I),...D}}),y];NV(c,S,w,T),delete c[h]}else if(x===null){const w={signal:b.map(S=>{const{test:T,...C}=S;return`${YL(null,T)} ? ${Kve(C)} : `}).join("")+Kve(y)};c[h]=w}}else if(Xt(m)){const g=fbe[h];if(g){const{vgProp:y,part:b}=g;NV(c,b,y,m),delete c[h]}}wr(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Li(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ao(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Xt(c.encode.labels.update.text)&&(p=g_(a,"datum.label",c.encode.labels.update.text.signal)),NV(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of EBe)e.hasAxisPart(p)||delete c.encode[p];Li(c.encode)&&delete c.encode}const h=gen(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ao(l,0)}}}}function N9e(e){const{axes:t}=e.component,n=[];for(const r of zm)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function yen(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>NI(i,"grid",t)),...r.map(i=>NI(i,"grid",t)),...n.map(i=>NI(i,"main",t)),...r.map(i=>NI(i,"main",t))].filter(i=>i)}function Fbe(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...ct(o),...ct(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${mh(o[c])} : ${mh(a[c])}`};return l}return t[i]})])}function ven(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Q8e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Xt(n)?"axisOrient":`axis${QN(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Fbe(a,r,e,n),vgAxisConfig:Fbe(u,r,e,n),axisConfigStyle:ben([...u,...a],r)}}function ben(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Nt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function aK(e,t,n,r={}){var s;const i=T8e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Bbe={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??xen(n,e),gridScale:({model:e,channel:t})=>_en(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||O9e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||P9e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Een(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Sen(t.type,n,gt(t)&&!!t.timeUnit,gt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Cen({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Aen,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=$9e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return A8e(i?[lbe(i)]:[],gt(o)?[lbe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Ien(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??ken(n,t)};function xen(e,t){return!ga(e)&&gt(t)&&!Ji(t==null?void 0:t.bin)&&!ka(t==null?void 0:t.bin)}function _en(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function wen(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Xt(s)?s:lD(s);{const{configValue:o}=aK("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?lD(o):n===Ts&&wr([Wse,qse],e.type)&&!(gt(e)&&e.timeUnit)?270:void 0}}function uK(e){return`(((${e.signal} % 360) + 360) % 360)`}function P9e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Xt(e)){const i=uK(e),s=Xt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Xt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Xt(e)){const i=uK(e),s=Xt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Xt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function O9e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Xt(e)){const o=uK(e),a=Xt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Xt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Een(e,t){if(t==="x"&&wr(["quantitative","temporal"],e))return!0}function Sen(e,t,n,r){if(n&&!Ot(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Ten(e){return e==="x"?"bottom":"left"}function Cen({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ga(t)&&t!=="log"){if(gt(e)){if(Ji(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&wr(["month","hours","day","quarter"],(i=pa(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Aen({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(gt(t)){const{timeUnit:n}=t;if(n){const r=H8e(n);if(r)return{signal:r}}}}function $9e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return I8e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Ien(e,t){const n=e.values;if(Xe(n))return wBe(t,n);if(Xt(n))return n}function ken(e,t){return e==="rect"&&jL(t)?1:0}class QT extends Ii{clone(){return new QT(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=k9e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(pw(r)&&dBe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${G8e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new QT(t,{calculate:u,as:JT(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${_r(this.transform)}`}}function JT(e,t,n){return Tt(e,{prefix:t,suffix:"sort_index",...n})}function s9(e,t){return wr(["top","bottom"],t)?"column":wr(["left","right"],t)||e==="row"?"row":"column"}function ZT(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ao((t||{})[e],i[e],n.header[e])}function o9(e,t,n,r){const i={};for(const s of e){const o=ZT(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Soe=["row","column"],Toe=["header","footer"];function Ren(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=o9(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=s9(t,a),l=lD(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...L9e(l,u),...M9e(u,l,s),...F9e(r,i,t,yJt,jBe)}}}function M9e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=O9e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function L9e(e,t){const n=P9e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Den(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Toe)if(n[i])for(const s of n[i]){const o=Pen(e,t,i,n,s);o!=null&&r.push(o)}return r}function Nen(e,t){const{sort:n}=e;return Jp(n)?{field:Tt(n,{expr:"datum"}),order:n.order??"ascending"}:Xe(n)?{field:JT(e,t,{expr:"datum"}),order:"ascending"}:{field:Tt(e,{expr:"datum"}),order:n??"ascending"}}function lK(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=o9(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Xse({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=s9(t,a);return{text:{signal:u?g_(g_(u,"datum.label",l),"datum.value",Tt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...L9e(s,c),...M9e(c,s,o),...F9e(n,e,t,vJt,UBe)}}function Pen(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=o9(["labelOrient"],o.header,a,t);(t==="row"&&!wr(["top","bottom"],f)||t==="column"&&!wr(["left","right"],f))&&(s=lK(o,t,a))}const u=nf(e)&&!iP(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Nen(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Oen={column:{start:0,end:1},row:{start:1,end:0}};function $en(e,t){return Oen[t][e]}function Men(e,t){const n={};for(const r of ed){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=o9(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=s9(r,o),u=$en(s,a);u!==void 0&&(n[a]=u)}}return Li(n)?void 0:n}function F9e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=ZT(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Coe(e){return[...FO(e,"width"),...FO(e,"height"),...FO(e,"childWidth"),...FO(e,"childHeight")]}function FO(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(ga(o)&&tb(a)){const u=e.scaleName(n);return nf(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[jbe(u,a)]:[jbe(u,a),{name:i,update:B9e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=tK(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function jbe(e,t){const n=`${e}_step`;return Xt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function B9e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ao(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${mh(o)}, ${mh(s)}) * ${e}_step`}function j9e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function U9e(e,t){return ct(e).reduce((n,r)=>{const i=e[r];return{...n,...mC(t,i,r,s=>as(s.value))}},{})}function z9e(e,t){if(nf(t))return e==="theta"?"independent":"shared";if(bC(t))return"shared";if(Poe(t))return uo(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Aoe(e,t){const n=e.scale[t],r=uo(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&pt(pXt(t)),"independent"):e[r][t]||"shared"}const Len={..._Jt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},V9e=ct(Len);class Fen extends ry{}const Ube={symbols:Ben,gradient:jen,labels:Uen,entries:zen};function Ben(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...TKt({},n,SQt),...m9e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?H9e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===vc)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=as(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=as(m??1));else if(Xe(f.fill)){const g=cK(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=as(g))}}if(f.stroke){if(r==="stroke"||!c&&r===vc)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Xe(f.stroke)){const g=ao(cK(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==ey){const g=gt(t)&&W9e(n,i,t);g?f.opacity=[{test:g,...as(m??1)},as(u.legend.unselectedOpacity)]:m&&(f.opacity=as(m))}return f={...f,...e},Li(f)?void 0:f}function jen(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?H9e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=as(l)),a={...a,...e},Li(a)?void 0:a}function Uen(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=gt(t)?W9e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;x_(c)?f=yh({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=yh({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&gt(t)&&t.timeUnit===void 0&&(f=yh({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Li(d)?void 0:d}function zen(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function H9e(e){return q9e(e,(t,n)=>Math.max(t,n.value))}function cK(e){return q9e(e,(t,n)=>ao(t,n.value))}function q9e(e,t){if(LQt(e))return Nt(e.condition).reduce(t,e.value);if(Mh(e))return e.value}function W9e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=Et(n.field);return r.map(s=>`(!length(data(${Et(Ss(s)+E_)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const zbe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return rBe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return iBe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Ken(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Xen(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Hen(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>PS(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(NS(n)&&gh(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Ven(t,e)};function Ven(e,t){const n=e.values;if(Xe(n))return wBe(t,n);if(Xt(n))return n}function Hen(e,t,n,r){if(t!=="shape"){const i=cK(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function qen(e){const{legend:t}=e;return ao(t.type,Wen(e))}function Wen({channel:e,timeUnit:t,scaleType:n}){if(NS(e)){if(wr(["quarter","month","day"],t))return"symbol";if(gh(n))return"gradient"}return"symbol"}function Gen({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Yen(n,t)}function Yen(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Ken({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(gh(i))return n==="horizontal"?r==="top"||r==="bottom"?Vbe(t,"width",o,s):o:Vbe(t,"height",u,a)}function Vbe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Xen(e){if(wr(["quantile","threshold","log","symlog"],e))return"greedy"}function G9e(e){const t=Vs(e)?Qen(e):ttn(e);return e.component.legends=t,t}function Qen(e){const{encoding:t}=e,n={};for(const r of[vc,...VBe]){const i=jo(t[r]);!i||!e.getScaleComponent(r)||r===bc&&gt(i)&&i.type===pC||(n[r]=etn(e,r))}return n}function Jen(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Zen(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function etn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Fen({},Jen(e,t));len(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=jo(i[t]),f=gt(c)?(w=pa(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=qen({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Gen({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const S of V9e){if(h==="gradient"&&S.startsWith("symbol")||h==="symbol"&&S.startsWith("gradient"))continue;const T=S in zbe?zbe[S](m):n[S];if(T!==void 0){const C=Zen(T,S,n,e.fieldDef(t));(C||s.legend[S]===void 0)&&a.set(S,T,C)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),b={},x={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const S of["labels","legend","title","symbols","gradient","entries"]){const T=U9e(g[S]??{},e),C=S in Ube?Ube[S](T,x):T;C!==void 0&&!Li(C)&&(b[S]={...y!=null&&y.length&&gt(c)?{name:`${Ss(c.field)}_legend_${S}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:C})}return Li(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function ttn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){G9e(r);for(const i of ct(r.component.legends))n.legend[i]=Aoe(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Y9e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of ct(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Y9e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of V9e){const c=hv(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return ntn(f,d);case"title":return k8e(f,d);case"type":return i=!0,Oc("symbol")}return e9(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&OL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&OL(e.explicit,["encode","gradient"])),e}function ntn(e,t){return t.value==="circle"?t:e}function rtn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function K9e(e){const t=e.component.legends,n={};for(const i of ct(t)){const s=e.getScaleComponent(i),o=Fi(s.get("domains"));if(n[o])for(const a of n[o])Y9e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Fa(n).flat().map(i=>itn(i,e.config)).filter(i=>i!==void 0)}function itn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of VBe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Xt(s.encode.labels.update.text)&&(l=g_(r,"datum.label",s.encode.labels.update.text.signal)),rtn(s,"labels","text",{signal:l})}return s}}function stn(e){return bC(e)||Poe(e)?otn(e):X9e(e)}function otn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),X9e(e))}function X9e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Xt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return wr(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const atn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Q9e extends ry{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function J9e(e){e.component.projection=Vs(e)?utn(e):ftn(e)}function utn(e){if(e.hasProjection){const t=zl(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?ltn(e):void 0,s=new Q9e(e.projectionName(!0),{...zl(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function ltn(e){const t=[],{encoding:n}=e;for(const r of[[Jh,Qh],[pd,Zh]])(jo(n[r[0]])||jo(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(bc)&&e.typedFieldDef(bc).type===pC&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(xs.Main)),t}function ctn(e,t){const n=xse(atn,i=>!!(!sn(e.explicit,i)&&!sn(t.explicit,i)||sn(e.explicit,i)&&sn(t.explicit,i)&&Kc(e.get(i),t.get(i))));if(Kc(e.size,t.size)){if(n)return e;if(Kc(e.explicit,{}))return t;if(Kc(t.explicit,{}))return e}return null}function ftn(e){if(e.children.length===0)return;let t;for(const r of e.children)J9e(r);const n=xse(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=ctn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Q9e(r,t.specifiedProjection,t.size,An(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function dtn(e,t,n,r){if(oP(t,n)){const i=Vs(e)?e.axis(n)??e.legend(n)??{}:{},s=Tt(t,{expr:"datum"}),o=Tt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Tt(t,{binSuffix:"range",forAs:!0}),formula:rP(s,o,i.format,i.formatType,r)}}return{}}function Z9e(e,t){return`${_8e(e)}_${t}`}function htn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Ioe(e,t,n){const r=YB(n,void 0)??{},i=Z9e(r,t);return e.getName(`${i}_bins`)}function ptn(e){return"as"in e}function Hbe(e,t,n){let r,i;ptn(e)?r=Pt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Tt(e,{forAs:!0}),Tt(e,{binSuffix:"end",forAs:!0})];const s={...YB(t,void 0)},o=Z9e(s,e.field),{signal:a,extentSignal:u}=htn(n,o);if(LB(s.extent)){const c=s.extent;i=D9e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class em extends Ii{clone(){return new em(null,An(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ml(s)&&Ji(s.bin)){const{key:a,binComponent:u}=Hbe(s,s.bin,n);i[a]={...u,...i[a],...dtn(n,s,o,n.config)}}return i},{});return Li(r)?null:new em(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Hbe(n,n.bin,r);return new em(t,{[i]:s})}merge(t,n){for(const r of ct(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Fp([...this.bins[r].as,...t.bins[r].as],_r)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Fa(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Fa(this.bins).map(t=>t.field))}hash(){return`Bin ${_r(this.bins)}`}assemble(){return Fa(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:hd(t.field),as:r,signal:t.signal,...LB(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:hd(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Tt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function mtn(e,t,n,r){var s;const i=Vs(r)?r.encoding[Um(t)]:void 0;if(ml(n)&&Vs(r)&&pBe(n,i,r.markDef,r.config)){e.add(Tt(n,{})),e.add(Tt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=dv({fieldDef:n,markDef:a,config:u});cD(o)&&l!==.5&&uo(t)&&(e.add(Tt(n,{suffix:t9})),e.add(Tt(n,{suffix:n9}))),n.bin&&oP(n,t)&&e.add(Tt(n,{binSuffix:"range"}))}else if(f8e(t)){const o=c8e(t);e.add(r.getName(o))}else e.add(Tt(n));return pw(n)&&sQt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function gtn(e,t){for(const n of ct(t)){const r=t[n];for(const i of ct(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Sh extends Ii{clone(){return new Sh(null,new Set(this.dimensions),An(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Tt(o,{forAs:!0})]);else{if(Ig(u)||eb(u)){const c=Ig(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Tt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Tt(o,{forAs:!0})]);ty(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Tt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Tt({field:l,aggregate:"max"},{forAs:!0})]))}else mtn(s,a,o,n)}),s.size+ct(i).length===0)?null:new Sh(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||Tt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||Tt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+ct(i).length===0?null:new Sh(t,r,i)}merge(t){return n8e(this.dimensions,t.dimensions)?(gtn(this.measures,t.measures),!0):(RXt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ct(this.measures)])}producedFields(){const t=new Set;for(const n of ct(this.measures))for(const r of ct(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${_r({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of ct(this.measures))for(const o of ct(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:hd(s));return{type:"aggregate",groupby:[...this.dimensions].map(hd),ops:t,fields:n,as:r}}}class yC extends Ii{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of ed){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Tt(o),...Ji(a)?[Tt(o,{binSuffix:"end"})]:[]],...Jp(u)?{sortField:u}:Xe(u)?{sortIndexField:JT(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of ed)this[n]&&(t+=` ${n.charAt(0)}:${_r(this[n])}`);return t}get fields(){var n;const t=[];for(const r of ed)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of ed)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of zm){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(ga(i)&&tb(s)){const o=a9(this.childModel,n),a=Noe(o);a?t[n]=a:pt(Pse(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=HB,field:f}=u;s.push(f),o.push(c),a.push(Tt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Soe){for(const c of Toe){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Z0,J0])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function qbe(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function ytn(e,t){const n=Ese(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=qbe(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=qbe(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return pt(BKt(t)),null}function vtn(e){const t={};return _6(e.filter,n=>{if(W8e(n)){let r=null;Lse(n)?r=zc(n.equal):Bse(n)?r=zc(n.lte):Fse(n)?r=zc(n.lt):jse(n)?r=zc(n.gt):Use(n)?r=zc(n.gte):zse(n)?r=n.range[0]:Vse(n)&&(r=(n.oneOf??n.in)[0]),r&&(fw(r)?t[n.field]="date":Kr(r)?t[n.field]="number":Pt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function btn(e){const t={};function n(r){YT(r)?t[r.field]="date":r.type==="quantitative"&&gKt(r.aggregate)?t[r.field]="number":UT(r.field)>1?r.field in t||(t[r.field]="flatten"):pw(r)&&Jp(r.sort)&&UT(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Vs(e)||nf(e))&&e.forEachFieldDef((r,i)=>{if(ml(r))n(r);else{const s=lw(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Vs(e)){const{mark:r,markDef:i,encoding:s}=e;if(hw(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];gt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function xtn(e){const t={};if(Vs(e)&&e.component.selection)for(const n of ct(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&UT(i.field)>1&&(t[i.field]="flatten")}return t}class xu extends Ii{clone(){return new xu(null,An(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${_r(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!I1(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of ct(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:pt(tbe(a,r[a],u.value)))}for(const a of ct(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:pt(tbe(a,n[a],u)))}const s=new ry(n,r);i.copyAll(s);const o={};for(const a of ct(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return ct(o).length===0||i.parseNothing?null:new xu(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ct(this._parse)){const r=this._parse[n];UT(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(ct(this._parse))}dependentFields(){return new Set(ct(this._parse))}assembleTransforms(t=!1){return ct(this._parse).filter(n=>t?UT(n)>1:!0).map(n=>{const r=ytn(n,this._parse[n]);return r?{type:"formula",expr:r,as:dC(n)}:null}).filter(n=>n!==null)}}class gv extends Ii{clone(){return new gv(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Lh])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Lh}}}class lP extends Ii{clone(){return new lP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${_r(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class cP extends Ii{clone(){return new cP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${_r(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class S_ extends Ii{constructor(t){super(null),t??(t={name:"source"});let n;if(I1(t)||(n=t.format?{...oc(t.format,["parse"])}:{}),fD(t))this._data={values:t.values};else if(KT(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];wr(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else a9e(t)?this._data={values:[{type:"Sphere"}]}:(s9e(t)||I1(t))&&(this._data={});this._generator=I1(t),t.name&&(this._name=t.name),n&&!Li(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Wbe=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},_tn=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},PI;function koe(e){return e instanceof S_||e instanceof lP||e instanceof cP}class Roe{constructor(){PI.set(this,void 0),Wbe(this,PI,!1,"f")}setModified(){Wbe(this,PI,!0,"f")}get modifiedFlag(){return _tn(this,PI,"f")}}PI=new WeakMap;class mw extends Roe{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Doe extends Roe{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class wtn extends Doe{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of ct(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Etn extends Doe{constructor(t){super(),this.requiresSelectionId=t&&Eoe(t)}run(t){t instanceof gv&&(this.requiresSelectionId&&(koe(t.parent)||t.parent instanceof Sh||t.parent instanceof xu)||(this.setModified(),t.remove()))}}class Stn extends Roe{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Zp&&(r=t.producedFields(),_se(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Ttn extends Doe{constructor(){super()}run(t){t instanceof uc&&!t.isRequired()&&(this.setModified(),t.remove())}}class Ctn extends mw{run(t){if(!koe(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof xu)if(t instanceof xu)this.setModified(),t.merge(n);else{if(wse(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Atn extends mw{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof xu);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of ct(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Li(i)){this.setModified();const o=new xu(t,i);for(const a of n){if(a instanceof xu)for(const u of ct(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof xu&&ct(a.parse).length===0&&a.remove()}}}}}class Itn extends mw{run(t){t instanceof uc||t.numChildren()>0||t instanceof yC||t instanceof S_||(this.setModified(),t.remove())}}class ktn extends mw{run(t){const n=t.children.filter(i=>i instanceof Zp),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Rtn extends mw{run(t){const n=t.children.filter(i=>i instanceof Sh),r={};for(const i of n){const s=_r(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of ct(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Dtn extends mw{constructor(t){super(),this.model=t}run(t){const n=!(koe(t)||t instanceof gC||t instanceof xu||t instanceof gv),r=[],i=[];for(const s of t.children)s instanceof em&&(n&&!wse(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof em?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Ntn extends mw{run(t){const n=[...t.children];if(!m_(n,o=>o instanceof uc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof uc){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof uc)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class gw extends Ii{clone(){return new gw(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Fp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Tt(t)}hash(){return`JoinAggregateTransform ${_r(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function Ptn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Tt(r);return i&&t.push(i),t},[])}function Otn(e){return Xe(e)&&e.every(t=>Pt(t))&&e.length>1}class tg extends Ii{clone(){return new tg(null,An(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ao(f.order,"ascending"));const l={field:a,order:u};let c;return Otn(s)?c=s:Pt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new tg(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return xm(p)}).filter(h=>!!h),c=Ptn(n),f=n.encoding.order;let d;if(Xe(f)||gt(f))d=C8e(f);else{const h=mBe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new tg(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${_r(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Tt(i,{binSuffix:"mid"})]:[Tt(i,{}),Tt(i,{binSuffix:"end"})]:[Tt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Tt(c,{expr:"datum"}),p=Tt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:Tt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Tt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class vC extends Ii{clone(){return new vC(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Fp(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Tt(t)}hash(){return`WindowTransform ${_r(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Dse(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function $tn(e){function t(n){if(!(n instanceof yC)){const r=n.clone();if(r instanceof uc){const i=dK+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Sh||r instanceof tg||r instanceof vC||r instanceof gw)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function fK(e){if(e instanceof yC)if(e.numChildren()===1&&!(e.children[0]instanceof uc)){const t=e.children[0];(t instanceof Sh||t instanceof tg||t instanceof vC||t instanceof gw)&&t.addDimensions(e.fields),t.swapWithParent(),fK(e)}else{const t=e.model.component.data.main;eje(t);const n=$tn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(fK)}function eje(e){if(e instanceof uc&&e.type===xs.Main&&e.numChildren()===1){const t=e.children[0];t instanceof yC||(t.swapWithParent(),eje(e))}}const dK="scale_",BO=5;function hK(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!hK(t.children))return!1}return!0}function Bd(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Gbe(e,t,n){let r=e.sources,i=!1;return i=Bd(new Ttn,r)||i,i=Bd(new Etn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Bd(new Itn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Bd(new Ctn,r)||i,i=Bd(new Dtn(t),r)||i,i=Bd(new Stn,r)||i,i=Bd(new Atn,r)||i,i=Bd(new Rtn,r)||i,i=Bd(new ktn,r)||i,i=Bd(new wtn,r)||i,i=Bd(new Ntn,r)||i),e.sources=r,i}function Mtn(e,t){hK(e.sources);let n=0,r=0;for(let i=0;i<BO&&Gbe(e,t,!0);i++)n++;e.sources.map(fK);for(let i=0;i<BO&&Gbe(e,t,!1);i++)r++;hK(e.sources),Math.max(n,r)===BO&&pt(`Maximum optimization runs(${BO}) reached.`)}class ia{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new ia(()=>t(n))}}function tje(e){Vs(e)?Ltn(e):Ftn(e)}function Ltn(e){const t=e.component.scales;for(const n of ct(t)){const r=jtn(e,n);if(t[n].setWithExplicit("domains",r),ztn(e,n),e.component.data.isFaceted){let s=e;for(;!nf(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)j0(a)&&(a.data=dK+a.data.replace(dK,""))}}}function Ftn(e){for(const n of e.children)tje(n);const t=e.component.scales;for(const n of ct(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=hv(r,o.getWithExplicit("domains"),"domains","scale",pK);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&pt($Kt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Btn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Ybe(t,n);if(!i){pt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Ybe(t,n);if(i)return"unaggregated"}return e}function jtn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Btn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&jo(r.x2)?jo(r.x)?hv(Ay(n,i,e,"x"),Ay(n,i,e,"x2"),"domain","scale",pK):Ay(n,i,e,"x2"):t==="y"&&jo(r.y2)?jo(r.y)?hv(Ay(n,i,e,"y"),Ay(n,i,e,"y2"),"domain","scale",pK):Ay(n,i,e,"y2"):Ay(n,i,e,t)}function Utn(e,t,n){return e.map(r=>({signal:`{data: ${KB(r,{timeUnit:n,type:t})}}`}))}function PV(e,t,n){var i;const r=(i=pa(n))==null?void 0:i.unit;return t==="temporal"||r?Utn(e,t,r):[e]}function Ay(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=jo(i[r]),{type:c}=l,f=l.timeUnit;if(iQt(t)){const p=Ay(e,void 0,n,r),m=PV(t.unionWith,c,f);return bp([...m,...p.value])}else{if(Xt(t))return bp([t]);if(t&&t!=="unaggregated"&&!Z8e(t))return bp(PV(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Oc([[0,1]]);const p=n.requestDataName(xs.Main);return Oc([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=ty(r)&&gt(l)?Vtn(n,r,e):void 0;if(Vm(l)){const p=PV([l.datum],c,f);return Oc(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(xs.Main),{field:m}=l;return Oc([{data:p,field:Tt({field:m,aggregate:"min"})},{data:p,field:Tt({field:m,aggregate:"max"})}])}else if(Ji(h.bin)){if(ga(e))return Oc(e==="bin-ordinal"?[]:[{data:uD(d)?n.requestDataName(xs.Main):n.requestDataName(xs.Raw),field:n.vgField(r,oP(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!Ot(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(Ji(p)){const m=Ioe(n,h.field,p);return Oc([new ia(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return Oc([{data:n.requestDataName(xs.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&wr(["time","utc"],e)){const p=i[Um(r)];if(pBe(h,p,s,a)){const m=n.requestDataName(xs.Main),g=dv({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=cD(o)&&g!==.5&&uo(r);return Oc([{data:m,field:n.vgField(r,y?{suffix:t9}:{})},{data:m,field:n.vgField(r,{suffix:y?n9:"end"})}])}}return Oc(d?[{data:uD(d)?n.requestDataName(xs.Main):n.requestDataName(xs.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(xs.Main),field:n.vgField(r)}])}function OV(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":HB),...r?{field:hd(r)}:{},...i?{order:i}:{}}}function ztn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=Z8e(r)&&r,o=cw(i)&&LB(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Vtn(e,t,n){if(!ga(n))return;const r=e.fieldDef(t),i=r.sort;if(dBe(i))return{op:"min",field:JT(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Jp(i)){const a=s&&!o.has(i.field);return OV(i,a)}else if(fBe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Ig(c)||eb(c))return OV({field:Tt(l),order:u},d);if(Dse(c)||!c)return OV({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(wr(["ascending",void 0],i))return!0}}function Ybe(e,t){const{aggregate:n,type:r}=e;return n?Pt(n)&&!vKt.has(n)?{valid:!1,reason:aXt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:uXt(e)}:{valid:!0}:{valid:!1,reason:oXt(e)}}function pK(e,t,n,r){return e.explicit&&t.explicit&&pt(hXt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Htn(e){const t=Fp(e.map(o=>{if(j0(o)){const{sort:a,...u}=o;return u}return o}),_r),n=Fp(e.map(o=>{if(j0(o)){const a=o.sort;return a!==void 0&&!uD(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),_r);if(t.length===0)return;if(t.length===1){const o=e[0];if(j0(o)&&n.length>0){let a=n[0];if(n.length>1){pt(rbe);const u=n.filter(l=>Ot(l)&&"op"in l&&l.op!=="min");n.every(l=>Ot(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(Ot(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Fp(n.map(o=>uD(o)||!("op"in o)||Pt(o.op)&&o.op in pKt?o:(pt(mXt(o)),!0)),_r);let i;r.length===1?i=r[0]:r.length>1&&(pt(rbe),i=!0);const s=Fp(e.map(o=>j0(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Noe(e){if(j0(e)&&Pt(e.field))return e.field;if(bKt(e)){let t;for(const n of e.fields)if(j0(n)&&Pt(n.field)){if(!t)t=n.field;else if(t!==n.field)return pt(gXt),t}return pt(yXt),t}else if(xKt(e)){pt(vXt);const t=e.fields[0];return Pt(t)?t:void 0}}function a9(e,t){const r=e.component.scales[t].get("domains").map(i=>(j0(i)&&(i.data=e.lookupDataSource(i.data)),i));return Htn(r)}function nje(e){return bC(e)||Poe(e)?e.children.reduce((t,n)=>t.concat(nje(n)),Kbe(e)):Kbe(e)}function Kbe(e){return ct(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=qtn(i.range,s,n,e),h=a9(e,n),p=a?BZt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function qtn(e,t,n,r){if(uo(n)){if(tb(e))return{step:{signal:`${t}_step`}}}else if(Ot(e)&&j0(e))return{...e,data:r.lookupDataSource(e.data)};return e}class rje extends ry{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:m_(this.get("domains"),t=>Xe(t)&&t.length===2&&Kr(t[0])&&t[0]<=0&&Kr(t[1])&&t[1]>=0)}}const Wtn=["range","scheme"];function Gtn(e){const t=e.component.scales;for(const n of MB){const r=t[n];if(!r)continue;const i=Ytn(n,e);r.setWithExplicit("range",i)}}function Xbe(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=xc(t),o=e.getName(s);if(Ot(r)&&r.binned&&r.step!==void 0)return new ia(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(Ji(r)){const a=Ioe(e,i,r);return new ia(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Ytn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Wtn)if(n[f]!==void 0){const d=JY(s,f),h=eBe(e,f);if(!d)pt(P8e(s,f,e));else if(h)pt(h);else switch(f){case"range":{const p=n.range;if(Xe(p)){if(uo(e))return bp(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return ia.fromName(y,g)}return m}))}else if(Ot(p))return bp({data:t.requestDataName(xs.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return bp(p)}case"scheme":return bp(Ktn(n[f]))}}const o=e===Ts||e==="xOffset"?"width":"height",a=r[o];if(_m(a)){if(uo(e))if(ga(s)){const f=sje(a,t,e);if(f)return bp({step:f})}else pt(O8e(o));else if(eP(e)){const f=e===Kv?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=oje(a,s);if(p)return bp(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Xtn(e,t);return(u!==void 0||l!==void 0)&&JY(s,"rangeMin")&&Xe(c)&&c.length===2?bp([u??c[0],l??c[1]]):Oc(c)}function Ktn(e){return rQt(e)?{scheme:e.name,...oc(e,["name"])}:{scheme:e}}function ije(e,t,n,{center:r}={}){const i=xc(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===ba&&bf(n)?r?[ia.fromName(a=>`${o(a)}/2`,s),ia.fromName(a=>`-${o(a)}/2`,s)]:[ia.fromName(o,s),0]:r?[ia.fromName(a=>`-${o(a)}/2`,s),ia.fromName(a=>`${o(a)}/2`,s)]:[0,ia.fromName(o,s)]}function Xtn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=jo(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ts:case ba:{if(wr(["point","band"],u)){const f=aje(e,n,r.view);if(_m(f))return{step:sje(f,t,e)}}return ije(e,t,u)}case Kv:case hC:return Qtn(e,t,u);case Zg:{const f=t.component.scales[e].get("zero"),d=uje(i,f,r),h=enn(i,n,t,r);return qT(u)?Ztn(d,h,Jtn(u,r,l,e)):[d,h]}case Td:return[0,Math.PI*2];case uw:return[0,360];case Xh:return[0,new ia(()=>{const f=t.getSignalName(nf(t.parent)?"child_width":"width"),d=t.getSignalName(nf(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Jv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Zv:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case bc:return"symbol";case vc:case Bm:case jm:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ey:case Xv:case Qv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function sje(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Ase(n),o=r[s];if(qBe({step:e,offsetIsDiscrete:$n(o)&&Y8e(o.type)})==="offset"&&CBe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${SKt(f)})`}}else return e.step}function oje(e,t){if(qBe({step:e,offsetIsDiscrete:ga(t)})==="offset")return{step:e.step}}function Qtn(e,t,n){const r=e===Kv?"x":"y",i=t.getScaleComponent(r);if(!i)return ije(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=aje(r,t.size,t.config.view);if(_m(l)){const c=oje(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(gt(l)&&l.timeUnit){const c=H8e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=dv({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Xt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Xt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return e8e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function aje(e,t,n){const r=e===Ts?"width":"height",i=t[r];return i||qL(n,r)}function Jtn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Xe(n)?n.length+1:(pt(AXt(r)),3)}}function Ztn(e,t,n){const r=()=>{const i=mh(t),s=mh(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Xt(t)?new ia(r):{signal:r()}}function uje(e,t,n){if(t)return Xt(t)?{signal:`${t.signal} ? 0 : ${uje(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(FB("size",e))}const Qbe=.95;function enn(e,t,n,r){const i={x:Xbe(n,"x"),y:Xbe(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Jbe(t,i,r.view);return Kr(s)?s-1:new ia(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Jbe(t,i,r.view);return Kr(s)?Math.pow(Qbe*s,2):new ia(()=>`pow(${Qbe} * ${s.signal}, 2)`)}}throw new Error(FB("size",e))}function Jbe(e,t,n){const r=_m(e.width)?e.width.step:HL(n,"width"),i=_m(e.height)?e.height.step:HL(n,"height");return t.x||t.y?new ia(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function lje(e,t){Vs(e)?tnn(e,t):fje(e,t)}function tnn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of ct(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=jo(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=JY(h,t),y=eBe(a,t);if(d!==void 0&&(g?y&&pt(y):pt(P8e(h,t,a))),g&&y===void 0)if(d!==void 0){const b=f.timeUnit,x=f.type;switch(t){case"domainMax":case"domainMin":fw(u[t])||x==="temporal"||b?l.set(t,{signal:KB(u[t],{type:x,timeUnit:b})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const b=t in Zbe?Zbe[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:ABe(i,a),hasSecondaryRangeChannel:!!i[Um(a)]}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const Zbe={bins:({model:e,fieldOrDatumDef:t})=>gt(t)?nnn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>rnn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>inn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>snn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>onn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>ann(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=gt(e)?e.sort:void 0;return unn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>lnn(e,t,n,r,i,s.scale,o)};function cje(e){Vs(e)?Gtn(e):fje(e,"range")}function fje(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?cje(r):lje(r,t);for(const r of ct(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=hv(i,a,t,"scale",i9e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function nnn(e,t){const n=t.bin;if(Ji(n)){const r=Ioe(e,t.field,n);return new ia(()=>e.getSignalName(r))}else if(ka(n)&&cw(n)&&n.step!==void 0)return{step:n.step}}function rnn(e,t){if(wr([vc,Bm,jm],e)&&t!=="nominal")return"hcl"}function inn(e,t,n,r,i,s){var o;if(!((o=xm(s))!=null&&o.bin||Xe(n)||i!=null||r!=null||wr([ac.TIME,ac.UTC],e)))return uo(t)?!0:void 0}function snn(e,t,n,r,i,s){if(uo(e)){if(gh(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(gt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===ac.POINT)return n.pointPadding}}function onn(e,t,n,r,i,s=!1){if(e===void 0){if(uo(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:ao(o,n==="bar"?a:u)}else if(eP(t)&&r===ac.BAND)return i.offsetBandPaddingInner}}function ann(e,t,n,r,i,s=!1){if(e===void 0){if(uo(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===ac.BAND)return ao(o,Xt(r)?{signal:`${r.signal}/2`}:r/2)}else if(eP(t)){if(n===ac.POINT)return .5;if(n===ac.BAND)return i.offsetBandPaddingOuter}}}function unn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return bf(e)&&t==="descending"?Xt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(bf(e)&&t==="descending")return!0}function lnn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&bf(i)){if(Xe(n)){const u=n[0],l=n[n.length-1];if(Kr(u)&&u<=0&&Kr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!qT(i))return!0;if(!(gt(t)&&t.bin)&&wr([...zm,...oKt],e)){const{orient:u,type:l}=r;return wr(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:wr(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function cnn(e,t,n,r,i=!1){const s=fnn(t,n,r,i),{type:o}=e;return ty(t)?o!==void 0?cQt(t,o)?gt(n)&&!lQt(o,n.type)?(pt(fXt(o,s)),s):o:(pt(cXt(t,o,s)),s):s:null}function fnn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(NS(e)||TV(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&pt(CV(e,"ordinal")),"ordinal";if(uo(e)||eP(e)){if(wr(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Rse)return"band";const s=n[xc(e)];return __(s)||GT(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return NS(e)?"time":TV(e)==="discrete"?(pt(CV(e,"temporal")),"ordinal"):gt(t)&&t.timeUnit&&pa(t.timeUnit).utc?"utc":"time";case"quantitative":return NS(e)?gt(t)&&Ji(t.bin)?"bin-ordinal":"linear":TV(e)==="discrete"?(pt(CV(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(D8e(t.type))}function dnn(e,{ignoreRange:t}={}){dje(e),tje(e);for(const n of uQt)lje(e,n);t||cje(e)}function dje(e){Vs(e)?e.component.scales=hnn(e):e.component.scales=mnn(e)}function hnn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of MB){const o=jo(t[s]);if(o&&n===uBe&&s===bc&&o.type===pC)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=ABe(t,s),l=cnn(a,s,o,r,u);i[s]=new rje(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const pnn=i9e((e,t)=>sbe(e)-sbe(t));function mnn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){dje(s);for(const o of ct(s.component.scales))if((t=i.scale)[o]??(t[o]=z9e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?JXt(a.value,u.value)?r[o]=hv(a,u,"type","scale",pnn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of ct(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new rje(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class $V{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Vs(e){return(e==null?void 0:e.type)==="unit"}function nf(e){return(e==null?void 0:e.type)==="facet"}function Poe(e){return(e==null?void 0:e.type)==="concat"}function bC(e){return(e==null?void 0:e.type)==="layer"}class Ooe{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=zl(a),this.name=t.name??i,this.title=Ly(t.title)?{text:t.title}:t.title?zl(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new $V,this.projectionNameMap=r?r.projectionNameMap:new $V,this.signalNameMap=r?r.signalNameMap:new $V,this.data=t.data,this.description=t.description,this.transforms=wZt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:CJt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:qB(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new ry,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?An(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){dnn(this)}parseProjection(){J9e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){G9e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of ct(r)){const o=r[s];o!==void 0&&(i[s]=as(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=as(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Li(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Men(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of ed)t[r].title&&n.push(Ren(this,r));for(const r of Soe)n=n.concat(Den(this,r));return n}assembleAxes(){return yen(this.component.axes,this.config)}assembleLegends(){return K9e(this)}assembleProjections(){return stn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...w8e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return wr(["unit","layer"],this.type)?wr(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Li(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||nf(this.parent)?nje(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ss((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(xs[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(nf(this.parent)){const n=j9e(t),r=$B(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(ga(s)&&tb(o)){const a=i.get("name"),u=a9(this,r),l=Noe(u);if(l){const c=Tt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:B9e(a,i,c)}}else return pt(Pse(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(h8e(t)&&ty(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(kKt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class hje extends Ooe{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Tt(r,n)}reduceFieldDef(t,n){return tJt(this.getMapping(),(r,i,s)=>{const o=xm(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){ooe(this.getMapping(),(r,i)=>{const s=xm(r);s&&t(s,i)},n)}}class u9 extends Ii{clone(){return new u9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${_r(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class l9 extends Ii{clone(){return new l9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${_r(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class dD extends Ii{clone(){return new dD(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(di("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=ty(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");bf(d)&&l.aggregate!=="count"&&!hw(i)&&(u[l.field]=l)}return u},{});return ct(a).length?new dD(t,a):null}dependentFields(){return new Set(ct(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${_r(this.filter)}`}assemble(){const t=ct(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Tt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class c9 extends Ii{clone(){return new c9(this.parent,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${_r(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class f9 extends Ii{clone(){return new f9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${_r(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class $S extends Ii{clone(){return new $S(null,An(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Jh,Qh],[pd,Zh]]){const s=i.map(o=>{const a=jo(n.encoding[o]);return gt(a)?a.field:Vm(a)?{expr:`${a.datum}`}:Mh(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new $S(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(bc)){const i=n.typedFieldDef(bc);i.type===pC&&(t=new $S(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Pt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${_r(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class hD extends Ii{clone(){return new hD(null,this.projection,An(this.fields),An(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Jh,Qh],[pd,Zh]]){const i=r.map(o=>{const a=jo(n.encoding[o]);return gt(a)?a.field:Vm(a)?{expr:`${a.datum}`}:Mh(a)?{expr:`${a.value}`}:void 0}),s=r[0]===pd?"2":"";(i[0]||i[1])&&(t=new hD(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Pt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${_r(this.fields)} ${_r(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ux extends Ii{clone(){return new Ux(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Ux(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(gt(i)&&gt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=kBe(n.mark,r);return new Ux(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${_r(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:rZt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class d9 extends Ii{clone(){return new d9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${_r(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class pD extends Ii{clone(){return new pD(null,An(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(iZt(o)){let u=gje(o.data,s);u||(u=new S_(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new uc(u,l,xs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(sZt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ss(u),u)}catch{throw new Error(PKt(u))}if(a=l.materialized,!a)throw new Error(OKt(u))}return new pD(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Nt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${_r({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Nt(this.transform.as)}:{}};else{let n=this.transform.as;Pt(n)||(pt(zKt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class h9 extends Ii{clone(){return new h9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${_r(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class p9 extends Ii{clone(){return new p9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=An(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${_r(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class m9 extends Ii{clone(){return new m9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Fp((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${_r(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class g9 extends Ii{clone(){return new g9(null,An(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${_r(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function pje(e){let t=0;function n(r,i){if(r instanceof S_&&!r.isGenerator&&!KT(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof xu&&(r.parent instanceof S_&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof yC){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof lP||r instanceof cP||r instanceof dD||r instanceof gC||r instanceof QT||r instanceof hD||r instanceof Sh||r instanceof pD||r instanceof vC||r instanceof gw||r instanceof f9||r instanceof c9||r instanceof u9||r instanceof d9||r instanceof h9||r instanceof p9||r instanceof gv||r instanceof g9||r instanceof m9||r instanceof l9)&&i.transform.push(r.assemble()),(r instanceof em||r instanceof Zp||r instanceof Ux||r instanceof tg||r instanceof $S)&&i.transform.push(...r.assemble()),r instanceof uc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof uc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof uc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function gnn(e){const t=[],n=pje(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function ynn(e,t){const n=[],r=pje(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function vnn(e){return e==="top"||e==="left"||Xt(e)?"header":"footer"}function bnn(e){for(const t of ed)xnn(e,t);exe(e,"x"),exe(e,"y")}function xnn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=ZT("title",null,r,t);let l=PS(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Xe(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=ZT("labelOrient",a.header,r,t),f=a.header!==null?ao((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=wr(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[mje(e,t,f)]}}}function mje(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function exe(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Aoe(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=vnn(a.get("orient"));o[u]??(o[u]=[mje(e,s,!1)]);const l=NI(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function _nn(e){$oe(e),KL(e,"width"),KL(e,"height")}function wnn(e){$oe(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";KL(e,t),KL(e,n)}function $oe(e){for(const t of e.children)t.parseLayoutSize()}function KL(e,t){const n=j9e(t),r=$B(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??z9e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=hv(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Enn(e){const{size:t,component:n}=e;for(const r of zm){const i=xc(r);if(t[i]){const s=t[i];n.layoutSize.set(i,_m(s)?"step":s,!0)}else{const s=Snn(e,i);n.layoutSize.set(i,s,!1)}}}function Snn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(ga(s)){const a=qL(r.view,t);return tb(o)||_m(a)?"step":a}else return tK(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return tK(r.view,t);{const s=qL(r.view,t);return _m(s)?s.step:s}}}function mK(e,t,n){return Tt(t,{suffix:`by_${Tt(e)}`,...n})}class Tk extends hje{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=joe(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!iP(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ct(t),r={};for(const i of n){if(![J0,Z0].includes(i)){pt(FB(i,"facet"));break}const s=t[i];if(s.field===void 0){pt(XY(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=ioe(t,n);return r.header?r.header=zl(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=y9(this),this.child.parseData()}parseLayoutSize(){$oe(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),bnn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of ed)for(const r of Toe){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=ZT("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=s9(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Tk))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Tk?{...this.channelHasField("column")?{encode:{update:{columns:{field:Tt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof Tk){if(this.child.channelHasField("column")){const i=Tt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of zm){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(ga(o)&&tb(a)){const u=a9(this.child,i),l=Noe(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):pt(Pse(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of ed){const f=this.facet[c];if(f){u.push(Tt(f));const{bin:d,sort:h}=f;if(Ji(d)&&u.push(Tt(f,{binSuffix:"end"})),Jp(h)){const{field:p,op:m=HB}=h,g=mK(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Xe(h)){const p=JT(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Jp(r.sort)?[mK(r,r.sort,{expr:"datum"})]:Xe(r.sort)?[JT(r,t,{expr:"datum"})]:[Tt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Jp(i)?i.order:!Xe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return lK(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Soe)if(t[s]){const o=ZT("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return lK(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=gnn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:ed.map(u=>this.facetSortFields(u)).flat(),order:ed.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup($Zt(this,[]))}]}getMapping(){return this.facet}}function Tnn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Jp(s.sort)){const{field:o,op:a=HB}=s.sort;e=i=new gw(e,{joinaggregate:[{op:a,field:o,as:mK(s,s.sort,{forAs:!0})}],groupby:[Tt(s)]})}return i}return null}function gje(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(fD(e)&&fD(a)){if(Kc(e.values,a.values))return o}else if(KT(e)&&KT(a)){if(e.url===a.url)return o}else if(s9e(e)&&e.name===o.dataName)return o}}return null}function Cnn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new S_({values:[]});return t.push(r),r}const n=gje(e.data,t);if(n)return I1(e.data)||(n.data.format=t8e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new S_(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Ann(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(mZt(i))o=e=new QT(e,i),s="derived";else if(yoe(i)){const a=vtn(i);o=e=xu.makeWithAncestors(e,{},a,n)??e,e=new gC(e,t,i.filter)}else if(e9e(i))o=e=em.makeFromTransform(e,i,t),s="number";else if(yZt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new xu(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Zp.makeFromTransform(e,i);else if(vZt(i))o=e=Sh.makeFromTransform(e,i),s="number",Eoe(t)&&(e=new gv(e));else if(ZBe(i))o=e=pD.make(e,t,i,r++),s="derived";else if(dZt(i))o=e=new vC(e,i),s="number";else if(hZt(i))o=e=new gw(e,i),s="number";else if(bZt(i))o=e=tg.makeFromTransform(e,i),s="derived";else if(xZt(i))o=e=new f9(e,i),s="derived";else if(_Zt(i))o=e=new l9(e,i),s="derived";else if(pZt(i))o=e=new c9(e,i),s="derived";else if(oZt(i))o=e=new m9(e,i),s="derived";else if(fZt(i))e=new g9(e,i);else if(gZt(i))o=e=Ux.makeFromTransform(e,i),s="derived";else if(aZt(i))o=e=new u9(e,i),s="derived";else if(uZt(i))o=e=new h9(e,i),s="derived";else if(lZt(i))o=e=new p9(e,i),s="derived";else if(cZt(i))o=e=new d9(e,i),s="derived";else{pt(UKt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function y9(e){var h;let t=Cnn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(I1(i)||KT(i)||fD(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new PZt;I1(i)?(o9e(i)?t=new cP(t,i.sequence):voe(i)&&(t=new lP(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=xu.makeExplicit(t,e,o)??t,t=new gv(t);const a=e.parent&&bC(e.parent);(Vs(e)||nf(e))&&a&&(t=em.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Ann(t,e,o));const u=xtn(e),l=btn(e);t=xu.makeWithAncestors(t,{},{...u,...l},o)??t,Vs(e)&&(t=$S.parseAll(t,e),t=hD.parseAll(t,e)),(Vs(e)||nf(e))&&(a||(t=em.makeFromEncoding(t,e)??t),t=Zp.makeFromEncoding(t,e)??t,t=QT.parseAllForSortIndex(t,e));const c=t=txe(xs.Raw,e,t);if(Vs(e)){const p=Sh.makeFromEncoding(t,e);p&&(t=p,Eoe(e)&&(t=new gv(t))),t=Ux.makeFromEncoding(t,e)??t,t=tg.makeFromEncoding(t,e)??t}Vs(e)&&(t=dD.make(t,e)??t);const f=t=txe(xs.Main,e,t);Vs(e)&&men(e,f);let d=null;if(nf(e)){const p=e.getName("facet");t=Tnn(t,e.facet)??t,d=new yC(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function txe(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new uc(n,s,e,i);return r[s]=o,o}class Inn extends Ooe{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&pt(FKt),this.children=this.getChildren(t).map((l,c)=>joe(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=y9(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ct(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return JB(t)?t.vconcat:moe(t)?t.hconcat:t.concat}parseLayoutSize(){wnn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Coe(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function knn(e){return e===!1||e===null}const Rnn={disable:1,gridScale:1,scale:1,...SBe,labelExpr:1,encode:1},yje=ct(Rnn);class Moe extends ry{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Moe(An(this.explicit),An(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!knn(this.get(t))}hasOrientSignalRef(){return Xt(this.explicit.orient)}}function Dnn(e,t,n){const{encoding:r,config:i}=e,s=jo(r[t])??jo(r[Um(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(x_(u))return{text:yh({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(WT(s)==="quantitative"){if(GT(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:yh({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:yh({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(WT(s)==="temporal"&&i.timeFormatType&&gt(s)&&!s.timeUnit)return{text:yh({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Nnn(e){return zm.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Bnn(n,e)]),t),{})}const Pnn={bottom:"top",top:"bottom",left:"right",right:"left"};function Onn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of ct(i.component.axes))n.axis[s]=Aoe(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=$nn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of zm){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Xt(a)){if(r[a]>0&&!u){const l=Pnn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function $nn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Mnn(i,s)}}}else return t.map(n=>n.clone());return e}function Mnn(e,t){for(const n of yje){const r=hv(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return k8e(i,s);case"gridScale":return{explicit:i.explicit,value:ao(i.value,s.value)}}return e9(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Lnn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Xt(n.labelAngle)?n.labelAngle:lD(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===$9e(r,i))return!0}return e===n[t]}const Fnn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Bnn(e,t){var y,b;let n=t.axis(e);const r=new Moe,i=jo(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((b=o.axis)==null?void 0:b.orient)||Ten(e),u=t.getScaleComponent(e).get("type"),l=ven(e,u,a,t.config),c=n!==void 0?!n:aK("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=wen(i,n,e,o.style,l),d=iBe(n.formatType,i,u),h=rBe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const x of yje){const w=x in Bbe?Bbe[x](p):dbe(x)?n[x]:void 0,S=w!==void 0,T=Lnn(w,x,n,t,e);if(S&&T)r.set(x,w,T);else{const{configValue:C=void 0,configFrom:I=void 0}=dbe(x)&&x!=="values"?aK(x,o.style,n.style,l):{},D=C!==void 0;S&&!D?r.set(x,w,T):(I!=="vgAxisConfig"||Fnn.has(x)&&D||aP(C)||Xt(C))&&r.set(x,C,!1)}}const m=n.encoding??{},g=EBe.reduce((x,w)=>{if(!r.hasAxisPart(w))return x;const S=U9e(m[w]??{},t),T=w==="labels"?Dnn(t,e,S):S;return T!==void 0&&!Li(T)&&(x[w]={update:T}),x},{});return Li(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function jnn({encoding:e,size:t}){for(const n of zm){const r=xc(n);_m(t[r])&&a1(e[n])&&(delete t[r],pt(O8e(r)))}return t}const Unn={vgMark:"arc",encodeEntry:e=>({...Cd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...bu("x",e,{defaultPos:"mid"}),...bu("y",e,{defaultPos:"mid"}),...pv(e,"radius"),...pv(e,"theta")})},znn={vgMark:"area",encodeEntry:e=>({...Cd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...WL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...WL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...woe(e)})},Vnn={vgMark:"rect",encodeEntry:e=>({...Cd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pv(e,"x"),...pv(e,"y")})},Hnn={vgMark:"shape",encodeEntry:e=>({...Cd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&gt(n)&&n.type===pC?{field:Tt(n,{expr:"datum"})}:{}}]}},qnn={vgMark:"image",encodeEntry:e=>({...Cd(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...pv(e,"x"),...pv(e,"y"),...xoe(e,"url")})},Wnn={vgMark:"line",encodeEntry:e=>({...Cd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...bu("x",e,{defaultPos:"mid"}),...bu("y",e,{defaultPos:"mid"}),...oa("size",e,{vgChannel:"strokeWidth"}),...woe(e)})},Gnn={vgMark:"trail",encodeEntry:e=>({...Cd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...bu("x",e,{defaultPos:"mid"}),...bu("y",e,{defaultPos:"mid"}),...oa("size",e),...woe(e)})};function Loe(e,t){const{config:n}=e;return{...Cd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...bu("x",e,{defaultPos:"mid"}),...bu("y",e,{defaultPos:"mid"}),...oa("size",e),...oa("angle",e),...Ynn(e,n,t)}}function Ynn(e,t,n){return n?{shape:{value:n}}:oa("shape",e)}const Knn={vgMark:"symbol",encodeEntry:e=>Loe(e)},Xnn={vgMark:"symbol",encodeEntry:e=>Loe(e,"circle")},Qnn={vgMark:"symbol",encodeEntry:e=>Loe(e,"square")},Jnn={vgMark:"rect",encodeEntry:e=>({...Cd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pv(e,"x"),...pv(e,"y")})},Znn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Cd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...WL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...WL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...oa("size",e,{vgChannel:"strokeWidth"})}}},ern={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Cd(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...bu("x",e,{defaultPos:"mid"}),...bu("y",e,{defaultPos:"mid"}),...xoe(e),...oa("size",e,{vgChannel:"fontSize"}),...oa("angle",e),...$be("align",trn(e.markDef,n,t)),...$be("baseline",nrn(e.markDef,n,t)),...bu("radius",e,{defaultPos:null}),...bu("theta",e,{defaultPos:null})}}};function trn(e,t,n){if(di("align",e,n)===void 0)return"center"}function nrn(e,t,n){if(di("baseline",e,n)===void 0)return"middle"}const rrn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Cd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...bu("x",e,{defaultPos:"mid",vgChannel:"xc"}),...bu("y",e,{defaultPos:"mid",vgChannel:"yc"}),...oa("size",e,{defaultValue:irn(e),vgChannel:i}),[s]:as(di("thickness",n,t))}}};function irn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=di("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&tb(a)&&Kr(a.step)?a.step*3/4:HL(t.view,i)*3/4}}const jO={arc:Unn,area:znn,bar:Vnn,circle:Xnn,geoshape:Hnn,image:qnn,line:Wnn,point:Knn,rect:Jnn,rule:Znn,square:Qnn,text:ern,tick:rrn,trail:Gnn};function srn(e){if(wr([zB,jB,xQt],e.mark)){const t=kBe(e.mark,e.encoding);if(t.length>0)return orn(e,t)}else if(e.mark===UB){const t=KY.some(n=>di(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return arn(e)}return Foe(e)}const nxe="faceted_path_";function orn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:nxe+e.requestDataName(xs.Main),data:e.requestDataName(xs.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Foe(e,{fromPrefix:nxe})}]}const rxe="stack_group_";function arn(e){var l;const[t]=Foe(e,{fromPrefix:rxe}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...jT(t.encode.update,["y","yc","y2","height",...KY]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...oc(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...jT(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...oc(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of KY){const f=kg(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=as(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Tt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Tt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=kg(f,e.markDef,e.config);return d!==void 0?{...c,[f]:as(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(xs.Main),name:rxe+e.requestDataName(xs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function urn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Xe(o)&&Mh(o)&&GY(o.value)||!o&&GY(di("order",i,s)))){if((Xe(o)||gt(o))&&!n)return C8e(o,{expr:"datum"});if(hw(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(gt(l)){const c=l.sort;if(Xe(c))return{field:Tt(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Jp(c))return{field:Tt({aggregate:soe(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(fBe(c)){const f=e.fieldDef(c.encoding);return{field:Tt(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:Tt(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function Foe(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=ao(r.clip,lrn(e),crn(e)),a=S8e(r),u=i.key,l=urn(e),c=frn(e),f=di("aria",r,s),d=jO[n].postEncodingTransform?jO[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:jO[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(xs.Main)},encode:{update:jO[n].encodeEntry(e)},...d?{transform:d}:{}}]}function lrn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function crn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function frn(e){if(!e.component.selection)return null;const t=ct(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=ct(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class vje extends hje{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,pbe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=bm(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=KJt(o,s,{graticule:t.data&&voe(t.data)}));const u=this.encoding=ZQt(t.encoding||{},a,o.filled,s);this.markDef=XBe(o,u,s),this.size=jnn({encoding:u,size:pbe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=KBe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>hoe(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===uBe,r=t&&QYt.some(i=>$n(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return MB.reduce((r,i)=>{const s=jo(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=zl(t);return Xe(n)&&(i.domain=n.map(zc)),Xe(r)&&(i.range=r.map(zc)),i}initAxes(t){return zm.reduce((n,r)=>{const i=t[r];if($n(i)||r===Ts&&$n(t.x2)||r===ba&&$n(t.y2)){const s=$n(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=ct(t),r={};for(const i of n){const s=t[i];r[i]=aP(s)?E8e(s):zc(s)}return r}initLegends(t){return aKt.reduce((n,r)=>{const i=jo(t[r]);if(i&&lKt(r)){const s=i.legend;n[r]=s&&zl(s)}return n},{})}parseData(){this.component.data=y9(this)}parseLayoutSize(){Enn(this)}parseSelections(){this.component.selection=pen(this,this.selection)}parseMarkGroup(){this.component.mark=srn(this)}parseAxesAndHeaders(){this.component.axes=Nnn(this)}assembleSelectionTopLevelSignals(t){return MZt(this,t)}assembleSignals(){return[...N9e(this),...OZt(this,[])]}assembleSelectionData(t){return LZt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Coe(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!bC(this.parent))&&(t=l9e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Bx(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return xm(n)}typedFieldDef(t){const n=this.fieldDef(t);return ml(n)?n:null}}class Boe extends Ooe{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(ZB(a))return new Boe(a,this,this.getName(`layer_${u}`),o,s);if(ny(a))return new vje(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Nse(a))})}parseData(){this.component.data=y9(this);for(const t of this.children)t.parseData()}parseLayoutSize(){_nn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ct(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Onn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),N9e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Coe(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Nt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return FZt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),K9e(this))}}function joe(e,t,n,r,i){if(qB(e))return new Tk(e,t,n,i);if(ZB(e))return new Boe(e,t,n,r,i);if(ny(e))return new vje(e,t,n,r,i);if(EJt(e))return new Inn(e,t,n,i);throw new Error(Nse(e))}function drn(e,t={}){t.logger&&IXt(t.logger),t.fieldTitle&&xBe(t.fieldTitle);try{const n=YBe(tC(t.config,e.config)),r=r9e(e,n),i=joe(r,null,"",void 0,n);return i.parse(),Mtn(i.component.data,i),{spec:prn(i,hrn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&kXt(),t.fieldTitle&&HQt()}}function hrn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Pt(t)&&(t={type:t}),i&&s&&RZt(t.type)){if(i==="step"&&s==="step")pt(Jve()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";pt(Jve($B(o)));const a=o==="width"?"height":"width";t.type=DZt(a)}}return{...ct(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Cbe(n,!1),...Cbe(e,!0)}}function prn(e,t,n={},r){const i=e.config?LJt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),ynn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...HBe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const mrn=qYt.version,grn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:UT,accessPathWithDatum:Ese,compile:drn,contains:wr,deepEqual:Kc,deleteNestedProperty:OL,duplicate:An,entries:cv,every:xse,fieldIntersection:wse,flatAccessWithDatum:r8e,getFirstDefined:ao,hasIntersection:_se,hash:_r,internalField:o8e,isBoolean:uD,isEmpty:Li,isEqual:GYt,isInternalField:a8e,isNullOrFalse:GY,isNumeric:kB,keys:ct,logicalExpr:Ek,mergeDeep:t8e,never:e8e,normalize:r9e,normalizeAngle:lD,omit:oc,pick:jT,prefixGenerator:YY,removePathFromField:dC,replaceAll:g_,replacePathInField:hd,resetIdCounter:KYt,setEqual:n8e,some:m_,stringify:Fi,titleCase:QN,unique:Fp,uniqueId:s8e,vals:Fa,varName:Ss,version:mrn},Symbol.toStringTag,{value:"Module"}));function bje(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var yrn="vega-themes",vrn="2.15.0",brn="Themes for stylized Vega and Vega-Lite visualizations.",xrn=["vega","vega-lite","themes","style"],_rn="BSD-3-Clause",wrn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Ern=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Srn="build/vega-themes.js",Uoe="build/vega-themes.module.js",Trn="build/vega-themes.min.js",Crn="build/vega-themes.min.js",Arn="build/vega-themes.module.d.ts",Irn={type:"git",url:"https://github.com/vega/vega-themes.git"},krn=["src","build"],Rrn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Drn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Nrn={vega:"*","vega-lite":"*"},Prn={},Orn={name:yrn,version:vrn,description:brn,keywords:xrn,license:_rn,author:wrn,contributors:Ern,main:Srn,module:Uoe,unpkg:Trn,jsdelivr:Crn,types:Arn,repository:Irn,files:krn,scripts:Rrn,devDependencies:Drn,peerDependencies:Nrn,dependencies:Prn};const cE="#fff",ixe="#888",$rn={background:"#333",view:{stroke:ixe},title:{color:cE,subtitleColor:cE},style:{"guide-label":{fill:cE},"guide-title":{fill:cE}},axis:{domainColor:cE,gridColor:ixe,tickColor:cE}},Sb="#4572a7",Mrn={background:"#fff",arc:{fill:Sb},area:{fill:Sb},line:{stroke:Sb,strokeWidth:2},path:{stroke:Sb},rect:{fill:Sb},shape:{stroke:Sb},symbol:{fill:Sb,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Tb="#30a2da",MV="#cbcbcb",Lrn="#999",Frn="#333",sxe="#f0f0f0",oxe="#333",Brn={arc:{fill:Tb},area:{fill:Tb},axis:{domainColor:MV,grid:!0,gridColor:MV,gridWidth:1,labelColor:Lrn,labelFontSize:10,titleColor:Frn,tickColor:MV,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:sxe,group:{fill:sxe},legend:{labelColor:oxe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:oxe,titleFontSize:14,titlePadding:10},line:{stroke:Tb,strokeWidth:2},path:{stroke:Tb,strokeWidth:.5},rect:{fill:Tb},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Tb},bar:{binSpacing:2,fill:Tb,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Cb="#000",jrn={group:{fill:"#e5e5e5"},arc:{fill:Cb},area:{fill:Cb},line:{stroke:Cb},path:{stroke:Cb},rect:{fill:Cb},shape:{stroke:Cb},symbol:{fill:Cb,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Urn=22,zrn="normal",axe="Benton Gothic, sans-serif",uxe=11.5,Vrn="normal",Ab="#82c6df",LV="Benton Gothic Bold, sans-serif",lxe="normal",cxe=13,LA={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Hrn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:LV,fontSize:Urn,fontWeight:zrn},arc:{fill:Ab},area:{fill:Ab},line:{stroke:Ab,strokeWidth:2},path:{stroke:Ab},rect:{fill:Ab},shape:{stroke:Ab},symbol:{fill:Ab,size:30},axis:{labelFont:axe,labelFontSize:uxe,labelFontWeight:Vrn,titleFont:LV,titleFontSize:cxe,titleFontWeight:lxe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:axe,labelFontSize:uxe,symbolType:"square",titleFont:LV,titleFontSize:cxe,titleFontWeight:lxe},range:{category:LA["category-6"],diverging:LA["fireandice-6"],heatmap:LA["fire-7"],ordinal:LA["fire-7"],ramp:LA["fire-7"]}},Ib="#ab5787",UO="#979797",qrn={background:"#f9f9f9",arc:{fill:Ib},area:{fill:Ib},line:{stroke:Ib},path:{stroke:Ib},rect:{fill:Ib},shape:{stroke:Ib},symbol:{fill:Ib,size:30},axis:{domainColor:UO,domainWidth:.5,gridWidth:.2,labelColor:UO,tickColor:UO,tickWidth:.2,titleColor:UO},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},kb="#3e5c69",Wrn={background:"#fff",arc:{fill:kb},area:{fill:kb},line:{stroke:kb},path:{stroke:kb},rect:{fill:kb},shape:{stroke:kb},symbol:{fill:kb},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Lf="#1696d2",fxe="#000000",Grn="#FFFFFF",zO="Lato",FV="Lato",Yrn="Lato",Krn="#DEDDDD",Xrn=18,FA={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Qrn={background:Grn,title:{anchor:"start",fontSize:Xrn,font:zO},axisX:{domain:!0,domainColor:fxe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:FV,labelAngle:0,tickColor:fxe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:zO},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Krn,gridWidth:1,labelFontSize:12,labelFont:FV,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:zO,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:FV,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:zO,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:FA["six-groups-cat-1"],diverging:FA["diverging-colors"],heatmap:FA["diverging-colors"],ordinal:FA["six-groups-seq"],ramp:FA["shades-blue"]},area:{fill:Lf},rect:{fill:Lf},line:{color:Lf,stroke:Lf,strokeWidth:5},trail:{color:Lf,stroke:Lf,strokeWidth:0,size:1},path:{stroke:Lf,strokeWidth:.5},point:{filled:!0},text:{font:Yrn,color:Lf,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Lf,stroke:null}},arc:{fill:Lf},shape:{stroke:Lf},symbol:{fill:Lf,size:30}},Rb="#3366CC",dxe="#ccc",VO="Arial, sans-serif",Jrn={arc:{fill:Rb},area:{fill:Rb},path:{stroke:Rb},rect:{fill:Rb},shape:{stroke:Rb},symbol:{stroke:Rb},circle:{fill:Rb},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:VO,fontSize:12},"guide-title":{font:VO,fontSize:12},"group-title":{font:VO,fontSize:12}},title:{font:VO,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:dxe,tickColor:dxe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},zoe=e=>e*(1/3+1),hxe=zoe(9),pxe=zoe(10),mxe=zoe(12),BA="Segoe UI",gxe="wf_standard-font, helvetica, arial, sans-serif",yxe="#252423",jA="#605E5C",vxe="transparent",Zrn="#C8C6C4",Hd="#118DFF",ein="#12239E",tin="#E66C37",nin="#6B007B",rin="#E044A7",iin="#744EC2",sin="#D9B300",oin="#D64550",xje=Hd,_je="#DEEFFF",bxe=[_je,xje],ain=[_je,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",xje],uin={view:{stroke:vxe},background:vxe,font:BA,header:{titleFont:gxe,titleFontSize:mxe,titleColor:yxe,labelFont:BA,labelFontSize:pxe,labelColor:jA},axis:{ticks:!1,grid:!1,domain:!1,labelColor:jA,labelFontSize:hxe,titleFont:gxe,titleColor:yxe,titleFontSize:mxe,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Zrn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Hd},line:{stroke:Hd,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:BA,fontSize:hxe,fill:jA},arc:{fill:Hd},area:{fill:Hd,line:!0,opacity:.6},path:{stroke:Hd},rect:{fill:Hd},point:{fill:Hd,filled:!0,size:75},shape:{stroke:Hd},symbol:{fill:Hd,strokeWidth:1.5,size:50},legend:{titleFont:BA,titleFontWeight:"bold",titleColor:jA,labelFont:BA,labelFontSize:pxe,labelColor:jA,symbolType:"circle",symbolSize:75},range:{category:[Hd,ein,tin,nin,rin,iin,sin,oin],diverging:bxe,heatmap:bxe,ordinal:ain}},BV='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',lin='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',jV=400,HO={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},cin=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],fin=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function v9({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=HO.gridBg[e],i=HO.textPrimary[e],s=HO.textSecondary[e],o=n==="dark"?cin:fin,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:BV,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:lin,labelFontWeight:jV,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:HO.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:BV,fill:s,fontWeight:jV},"guide-title":{font:BV,fill:s,fontWeight:jV}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const din=v9({theme:"white",background:"#ffffff"}),hin=v9({theme:"g10",background:"#f4f4f4"}),pin=v9({theme:"g90",background:"#262626"}),min=v9({theme:"g100",background:"#161616"}),gin=Orn.version,yin=Object.freeze(Object.defineProperty({__proto__:null,carbong10:hin,carbong100:min,carbong90:pin,carbonwhite:din,dark:$rn,excel:Mrn,fivethirtyeight:Brn,ggplot2:jrn,googlecharts:Jrn,latimes:Hrn,powerbi:uin,quartz:qrn,urbaninstitute:Qrn,version:gin,vox:Wrn},Symbol.toStringTag,{value:"Module"}));function vin(e,t,n,r){if(Xe(e))return`[${e.map(i=>t(Pt(i)?i:xxe(i,n))).join(", ")}]`;if(Ot(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(Ot(c)&&(c=xxe(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function bin(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function xxe(e,t){return JSON.stringify(e,bin(t))}var xin=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const wje="vg-tooltip-element",_in={offsetX:10,offsetY:10,id:wje,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:win,maxDepth:2,formatTooltip:vin,baseURL:""};function win(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Ein(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return xin.toString().replace(wje,e)}function Sin(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Tin{constructor(t){this.options={..._in,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Ein(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Sin(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var UV={};function Cin(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zV,_xe;function Ain(){return _xe||(_xe=1,zV=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),zV}var Iin=ii;ii.Node=T_;ii.create=ii;function ii(e){var t=this;if(t instanceof ii||(t=new ii),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}ii.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};ii.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};ii.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};ii.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)Rin(this,arguments[e]);return this.length};ii.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)Din(this,arguments[e]);return this.length};ii.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};ii.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};ii.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};ii.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};ii.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};ii.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};ii.prototype.map=function(e,t){t=t||this;for(var n=new ii,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};ii.prototype.mapReverse=function(e,t){t=t||this;for(var n=new ii,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};ii.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};ii.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};ii.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};ii.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};ii.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ii;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};ii.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new ii;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};ii.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=kin(this,i,n[r]);return s};ii.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function kin(e,t,n){var r=t===e.head?new T_(n,null,t,e):new T_(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function Rin(e,t){e.tail=new T_(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function Din(e,t){e.head=new T_(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function T_(e,t,n,r){if(!(this instanceof T_))return new T_(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{Ain()(ii)}catch{}const Nin=Iin,ix=Symbol("max"),w0=Symbol("length"),fE=Symbol("lengthCalculator"),Ck=Symbol("allowStale"),Cx=Symbol("maxAge"),y0=Symbol("dispose"),wxe=Symbol("noDisposeOnSet"),Zo=Symbol("lruList"),Gd=Symbol("cache"),Eje=Symbol("updateAgeOnGet"),VV=()=>1;class Pin{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[ix]=t.max||1/0;const n=t.length||VV;if(this[fE]=typeof n!="function"?VV:n,this[Ck]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Cx]=t.maxAge||0,this[y0]=t.dispose,this[wxe]=t.noDisposeOnSet||!1,this[Eje]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[ix]=t||1/0,UA(this)}get max(){return this[ix]}set allowStale(t){this[Ck]=!!t}get allowStale(){return this[Ck]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Cx]=t,UA(this)}get maxAge(){return this[Cx]}set lengthCalculator(t){typeof t!="function"&&(t=VV),t!==this[fE]&&(this[fE]=t,this[w0]=0,this[Zo].forEach(n=>{n.length=this[fE](n.value,n.key),this[w0]+=n.length})),UA(this)}get lengthCalculator(){return this[fE]}get length(){return this[w0]}get itemCount(){return this[Zo].length}rforEach(t,n){n=n||this;for(let r=this[Zo].tail;r!==null;){const i=r.prev;Exe(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Zo].head;r!==null;){const i=r.next;Exe(this,t,r,n),r=i}}keys(){return this[Zo].toArray().map(t=>t.key)}values(){return this[Zo].toArray().map(t=>t.value)}reset(){this[y0]&&this[Zo]&&this[Zo].length&&this[Zo].forEach(t=>this[y0](t.key,t.value)),this[Gd]=new Map,this[Zo]=new Nin,this[w0]=0}dump(){return this[Zo].map(t=>XL(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Zo]}set(t,n,r){if(r=r||this[Cx],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[fE](n,t);if(this[Gd].has(t)){if(s>this[ix])return MS(this,this[Gd].get(t)),!1;const u=this[Gd].get(t).value;return this[y0]&&(this[wxe]||this[y0](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[w0]+=s-u.length,u.length=s,this.get(t),UA(this),!0}const o=new Oin(t,n,s,i,r);return o.length>this[ix]?(this[y0]&&this[y0](t,n),!1):(this[w0]+=o.length,this[Zo].unshift(o),this[Gd].set(t,this[Zo].head),UA(this),!0)}has(t){if(!this[Gd].has(t))return!1;const n=this[Gd].get(t).value;return!XL(this,n)}get(t){return HV(this,t,!0)}peek(t){return HV(this,t,!1)}pop(){const t=this[Zo].tail;return t?(MS(this,t),t.value):null}del(t){MS(this,this[Gd].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[Gd].forEach((t,n)=>HV(this,n,!1))}}const HV=(e,t,n)=>{const r=e[Gd].get(t);if(r){const i=r.value;if(XL(e,i)){if(MS(e,r),!e[Ck])return}else n&&(e[Eje]&&(r.value.now=Date.now()),e[Zo].unshiftNode(r));return i.value}},XL=(e,t)=>{if(!t||!t.maxAge&&!e[Cx])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Cx]&&n>e[Cx]},UA=e=>{if(e[w0]>e[ix])for(let t=e[Zo].tail;e[w0]>e[ix]&&t!==null;){const n=t.prev;MS(e,t),t=n}},MS=(e,t)=>{if(t){const n=t.value;e[y0]&&e[y0](n.key,n.value),e[w0]-=n.length,e[Gd].delete(n.key),e[Zo].removeNode(t)}};class Oin{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Exe=(e,t,n,r)=>{let i=n.value;XL(e,i)&&(MS(e,n),e[Ck]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var $in=Pin;const Min=Object.freeze({loose:!0}),Lin=Object.freeze({}),Fin=e=>e?typeof e!="object"?Min:e:Lin;var Voe=Fin,gK={exports:{}};const Bin="2.0.0",Sje=256,jin=Number.MAX_SAFE_INTEGER||9007199254740991,Uin=16,zin=Sje-6,Vin=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Hoe={MAX_LENGTH:Sje,MAX_SAFE_COMPONENT_LENGTH:Uin,MAX_SAFE_BUILD_LENGTH:zin,MAX_SAFE_INTEGER:jin,RELEASE_TYPES:Vin,SEMVER_SPEC_VERSION:Bin,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Hin=typeof process=="object"&&UV&&UV.NODE_DEBUG&&/\bsemver\b/i.test(UV.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var b9=Hin;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Hoe,s=b9;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const b=h(g),x=c++;s(m,x,g),l[m]=x,u[x]=g,o[x]=new RegExp(g,y?"g":void 0),a[x]=new RegExp(b,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(gK,gK.exports);var qoe=gK.exports;const Sxe=/^[0-9]+$/,Tje=(e,t)=>{const n=Sxe.test(e),r=Sxe.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},qin=(e,t)=>Tje(t,e);var Win={compareIdentifiers:Tje,rcompareIdentifiers:qin};const qO=b9,{MAX_LENGTH:Txe,MAX_SAFE_INTEGER:WO}=Hoe,{safeRe:Cxe,t:Axe}=qoe,Gin=Voe,{compareIdentifiers:dE}=Win;let Yin=class cp{constructor(t,n){if(n=Gin(n),t instanceof cp){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Txe)throw new TypeError(`version is longer than ${Txe} characters`);qO("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Cxe[Axe.LOOSE]:Cxe[Axe.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>WO||this.major<0)throw new TypeError("Invalid major version");if(this.minor>WO||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>WO||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<WO)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(qO("SemVer.compare",this.version,this.options,t),!(t instanceof cp)){if(typeof t=="string"&&t===this.version)return 0;t=new cp(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof cp||(t=new cp(t,this.options)),dE(this.major,t.major)||dE(this.minor,t.minor)||dE(this.patch,t.patch)}comparePre(t){if(t instanceof cp||(t=new cp(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(qO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return dE(r,i)}while(++n)}compareBuild(t){t instanceof cp||(t=new cp(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(qO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return dE(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),dE(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Woe=Yin;const Ixe=Woe,Kin=(e,t,n)=>new Ixe(e,n).compare(new Ixe(t,n));var xC=Kin;const Xin=xC,Qin=(e,t,n)=>Xin(e,t,n)===0;var Jin=Qin;const Zin=xC,esn=(e,t,n)=>Zin(e,t,n)!==0;var tsn=esn;const nsn=xC,rsn=(e,t,n)=>nsn(e,t,n)>0;var isn=rsn;const ssn=xC,osn=(e,t,n)=>ssn(e,t,n)>=0;var asn=osn;const usn=xC,lsn=(e,t,n)=>usn(e,t,n)<0;var csn=lsn;const fsn=xC,dsn=(e,t,n)=>fsn(e,t,n)<=0;var hsn=dsn;const psn=Jin,msn=tsn,gsn=isn,ysn=asn,vsn=csn,bsn=hsn,xsn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return psn(e,n,r);case"!=":return msn(e,n,r);case">":return gsn(e,n,r);case">=":return ysn(e,n,r);case"<":return vsn(e,n,r);case"<=":return bsn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var _sn=xsn,qV,kxe;function wsn(){if(kxe)return qV;kxe=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}qV=t;const n=Voe,{safeRe:r,t:i}=qoe,s=_sn,o=b9,a=Woe,u=Cje();return qV}var WV,Rxe;function Cje(){if(Rxe)return WV;Rxe=1;class e{constructor(B,q){if(q=r(q),B instanceof e)return B.loose===!!q.loose&&B.includePrerelease===!!q.includePrerelease?B:new e(B.raw,q);if(B instanceof i)return this.raw=B.value,this.set=[[B]],this.format(),this;if(this.options=q,this.loose=!!q.loose,this.includePrerelease=!!q.includePrerelease,this.raw=B.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(H=>this.parseRange(H.trim())).filter(H=>H.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const H=this.set[0];if(this.set=this.set.filter(Y=>!p(Y[0])),this.set.length===0)this.set=[H];else if(this.set.length>1){for(const Y of this.set)if(Y.length===1&&m(Y[0])){this.set=[Y];break}}}this.format()}format(){return this.range=this.set.map(B=>B.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(B){const H=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+B,Y=n.get(H);if(Y)return Y;const K=this.options.loose,Q=K?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];B=B.replace(Q,P(this.options.includePrerelease)),s("hyphen replace",B),B=B.replace(a[u.COMPARATORTRIM],l),s("comparator trim",B),B=B.replace(a[u.TILDETRIM],c),s("tilde trim",B),B=B.replace(a[u.CARETTRIM],f),s("caret trim",B);let L=B.split(" ").map(V=>y(V,this.options)).join(" ").split(/\s+/).map(V=>k(V,this.options));K&&(L=L.filter(V=>(s("loose invalid filter",V,this.options),!!V.match(a[u.COMPARATORLOOSE])))),s("range list",L);const z=new Map,W=L.map(V=>new i(V,this.options));for(const V of W){if(p(V))return[V];z.set(V.value,V)}z.size>1&&z.has("")&&z.delete("");const F=[...z.values()];return n.set(H,F),F}intersects(B,q){if(!(B instanceof e))throw new TypeError("a Range is required");return this.set.some(H=>g(H,q)&&B.set.some(Y=>g(Y,q)&&H.every(K=>Y.every(Q=>K.intersects(Q,q)))))}test(B){if(!B)return!1;if(typeof B=="string")try{B=new o(B,this.options)}catch{return!1}for(let q=0;q<this.set.length;q++)if(M(this.set[q],B,this.options))return!0;return!1}}WV=e;const t=$in,n=new t({max:1e3}),r=Voe,i=wsn(),s=b9,o=Woe,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=qoe,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Hoe,p=$=>$.value==="<0.0.0-0",m=$=>$.value==="",g=($,B)=>{let q=!0;const H=$.slice();let Y=H.pop();for(;q&&H.length;)q=H.every(K=>Y.intersects(K,B)),Y=H.pop();return q},y=($,B)=>(s("comp",$,B),$=S($,B),s("caret",$),$=x($,B),s("tildes",$),$=C($,B),s("xrange",$),$=D($,B),s("stars",$),$),b=$=>!$||$.toLowerCase()==="x"||$==="*",x=($,B)=>$.trim().split(/\s+/).map(q=>w(q,B)).join(" "),w=($,B)=>{const q=B.loose?a[u.TILDELOOSE]:a[u.TILDE];return $.replace(q,(H,Y,K,Q,L)=>{s("tilde",$,H,Y,K,Q,L);let z;return b(Y)?z="":b(K)?z=`>=${Y}.0.0 <${+Y+1}.0.0-0`:b(Q)?z=`>=${Y}.${K}.0 <${Y}.${+K+1}.0-0`:L?(s("replaceTilde pr",L),z=`>=${Y}.${K}.${Q}-${L} <${Y}.${+K+1}.0-0`):z=`>=${Y}.${K}.${Q} <${Y}.${+K+1}.0-0`,s("tilde return",z),z})},S=($,B)=>$.trim().split(/\s+/).map(q=>T(q,B)).join(" "),T=($,B)=>{s("caret",$,B);const q=B.loose?a[u.CARETLOOSE]:a[u.CARET],H=B.includePrerelease?"-0":"";return $.replace(q,(Y,K,Q,L,z)=>{s("caret",$,Y,K,Q,L,z);let W;return b(K)?W="":b(Q)?W=`>=${K}.0.0${H} <${+K+1}.0.0-0`:b(L)?K==="0"?W=`>=${K}.${Q}.0${H} <${K}.${+Q+1}.0-0`:W=`>=${K}.${Q}.0${H} <${+K+1}.0.0-0`:z?(s("replaceCaret pr",z),K==="0"?Q==="0"?W=`>=${K}.${Q}.${L}-${z} <${K}.${Q}.${+L+1}-0`:W=`>=${K}.${Q}.${L}-${z} <${K}.${+Q+1}.0-0`:W=`>=${K}.${Q}.${L}-${z} <${+K+1}.0.0-0`):(s("no pr"),K==="0"?Q==="0"?W=`>=${K}.${Q}.${L}${H} <${K}.${Q}.${+L+1}-0`:W=`>=${K}.${Q}.${L}${H} <${K}.${+Q+1}.0-0`:W=`>=${K}.${Q}.${L} <${+K+1}.0.0-0`),s("caret return",W),W})},C=($,B)=>(s("replaceXRanges",$,B),$.split(/\s+/).map(q=>I(q,B)).join(" ")),I=($,B)=>{$=$.trim();const q=B.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return $.replace(q,(H,Y,K,Q,L,z)=>{s("xRange",$,H,Y,K,Q,L,z);const W=b(K),F=W||b(Q),V=F||b(L),J=V;return Y==="="&&J&&(Y=""),z=B.includePrerelease?"-0":"",W?Y===">"||Y==="<"?H="<0.0.0-0":H="*":Y&&J?(F&&(Q=0),L=0,Y===">"?(Y=">=",F?(K=+K+1,Q=0,L=0):(Q=+Q+1,L=0)):Y==="<="&&(Y="<",F?K=+K+1:Q=+Q+1),Y==="<"&&(z="-0"),H=`${Y+K}.${Q}.${L}${z}`):F?H=`>=${K}.0.0${z} <${+K+1}.0.0-0`:V&&(H=`>=${K}.${Q}.0${z} <${K}.${+Q+1}.0-0`),s("xRange return",H),H})},D=($,B)=>(s("replaceStars",$,B),$.trim().replace(a[u.STAR],"")),k=($,B)=>(s("replaceGTE0",$,B),$.trim().replace(a[B.includePrerelease?u.GTE0PRE:u.GTE0],"")),P=$=>(B,q,H,Y,K,Q,L,z,W,F,V,J,ue)=>(b(H)?q="":b(Y)?q=`>=${H}.0.0${$?"-0":""}`:b(K)?q=`>=${H}.${Y}.0${$?"-0":""}`:Q?q=`>=${q}`:q=`>=${q}${$?"-0":""}`,b(W)?z="":b(F)?z=`<${+W+1}.0.0-0`:b(V)?z=`<${W}.${+F+1}.0-0`:J?z=`<=${W}.${F}.${V}-${J}`:$?z=`<${W}.${F}.${+V+1}-0`:z=`<=${z}`,`${q} ${z}`.trim()),M=($,B,q)=>{for(let H=0;H<$.length;H++)if(!$[H].test(B))return!1;if(B.prerelease.length&&!q.includePrerelease){for(let H=0;H<$.length;H++)if(s($[H].semver),$[H].semver!==i.ANY&&$[H].semver.prerelease.length>0){const Y=$[H].semver;if(Y.major===B.major&&Y.minor===B.minor&&Y.patch===B.patch)return!0}return!1}return!0};return WV}const Esn=Cje(),Ssn=(e,t,n)=>{try{t=new Esn(t,n)}catch{return!1}return t.test(e)};var Tsn=Ssn,Aje=Cin(Tsn);function Csn(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var Asn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function Ije(e,...t){for(const n of t)Isn(e,n);return e}function Isn(e,t){for(const n of Object.keys(t))nC(e,n,t[n],!0)}const Kd=fYt;let mD=grn;const GO=typeof window<"u"?window:void 0;var iEe;mD===void 0&&((iEe=GO==null?void 0:GO.vl)!=null&&iEe.compile)&&(mD=GO.vl);const ksn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Rsn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},OI={vega:"Vega","vega-lite":"Vega-Lite"},QL={vega:Kd.version,"vega-lite":mD?mD.version:"not available"},Dsn={vega:e=>e,"vega-lite":(e,t)=>mD.compile(e,{config:t}).spec},Nsn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Psn="chart-wrapper";function Osn(e){return typeof e=="function"}function Dxe(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${OI[r]} JSON Source`}function $sn(e,t){if(e.$schema){const n=bje(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${OI[n.library]}, but mode argument sets ${OI[t]??t}.`);const r=n.library;return Aje(QL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${OI[r]} ${n.version}, but the current version of ${OI[r]} is v${QL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function kje(e){return!!(e&&"load"in e)}function Nxe(e){return kje(e)?e:Kd.loader(e)}function Msn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Pt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function Lsn(e,t,n={}){let r,i;Pt(t)?(i=Nxe(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Msn(r),o=s.loader;(!i||o)&&(i=Nxe(n.loader??o));const a=await Pxe(s,i),u=await Pxe(n,i),l={...Ije(u,a),config:tC(u.config??{},a.config??{})};return await Bsn(e,r,l,i)}async function Pxe(e,t){const n=Pt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Pt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Fsn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Bsn(e,t,n={},r){const i=n.theme?tC(yin[n.theme],n.config??{}):n.config,s=Wv(n.actions)?n.actions:Ije({},ksn,n.actions??{}),o={...Rsn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??Kd.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const S="vega-embed-style",{root:T,rootContainer:C}=Fsn(c);if(!T.getElementById(S)){const I=document.createElement("style");I.id=S,I.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Asn.toString():n.defaultStyle,C.appendChild(I)}}const f=$sn(t,n.mode);let d=Dsn[f](t,i);if(f==="vega-lite"&&d.$schema){const S=bje(d.$schema);Aje(QL.vega,`^${S.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${S.version}, but current version is v${QL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const S=document.createElement("div");S.classList.add(Psn),c.appendChild(S),h=S}const p=n.patch;if(p&&(d=p instanceof Function?p(d):O8(d,p,!0,!1).newDocument),n.formatLocale&&Kd.formatLocale(n.formatLocale),n.timeFormatLocale&&Kd.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const S in n.expressionFunctions){const T=n.expressionFunctions[S];"fn"in T?Kd.expressionFunction(S,T.fn,T.visitor):T instanceof Function&&Kd.expressionFunction(S,T)}const{ast:m}=n,g=Kd.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Kd.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:Kd.expressionInterpreter??n.expr??_Yt}:{}});if(y.addSignalListener("autosize",(S,T)=>{const{type:C}=T;C=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):C=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):C=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:S,tooltip:T}=n,C=S&&!kje(S)?S==null?void 0:S.baseURL:void 0,I=Osn(T)?T:new Tin({baseURL:C,...T===!0?{}:T}).call;y.tooltip(I)}let{hover:b}=n;if(b===void 0&&(b=f==="vega"),b){const{hoverSet:S,updateSet:T}=typeof b=="boolean"?{}:b;y.hover(S,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let x;if(s!==!1){let S=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const C=document.createElement("details");C.title=o.CLICK_TO_VIEW_ACTIONS,c.append(C),S=C;const I=document.createElement("summary");I.innerHTML=Nsn,C.append(I),x=D=>{C.contains(D.target)||C.removeAttribute("open")},document.addEventListener("click",x)}const T=document.createElement("div");if(S.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const C of["svg","png"])if(s===!0||s.export===!0||s.export[C]){const I=o[`${C.toUpperCase()}_ACTION`],D=document.createElement("a"),k=Ot(n.scaleFactor)?n.scaleFactor[C]:n.scaleFactor;D.text=I,D.href="#",D.target="_blank",D.download=`${l}.${C}`,D.addEventListener("mousedown",async function(P){P.preventDefault();const M=await y.toImageURL(C,k);this.href=M}),T.append(D)}}if(s===!0||s.source!==!1){const C=document.createElement("a");C.text=o.SOURCE_ACTION,C.href="#",C.addEventListener("click",function(I){Dxe(Gz(t),n.sourceHeader??"",n.sourceFooter??"",f),I.preventDefault()}),T.append(C)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const C=document.createElement("a");C.text=o.COMPILED_ACTION,C.href="#",C.addEventListener("click",function(I){Dxe(Gz(d),n.sourceHeader??"",n.sourceFooter??"","vega"),I.preventDefault()}),T.append(C)}if(s===!0||s.editor!==!1){const C=n.editorUrl??"https://vega.github.io/editor/",I=document.createElement("a");I.text=o.EDITOR_ACTION,I.href="#",I.addEventListener("click",function(D){Csn(window,C,{config:i,mode:f,renderer:a,spec:Gz(t)}),D.preventDefault()}),T.append(I)}}function w(){x&&document.removeEventListener("click",x),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function jsn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Usn(e,t,n){n&&(jsn(n)?n(e.data(t)):e.change(t,Kd.changeset().remove(()=>!0).insert(n)))}function zsn(e,t){Object.keys(t).forEach(n=>{Usn(e,n,t[n])})}function Rje(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const Dje=()=>{};function GV(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Vsn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=Rje([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!L4(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Oxe(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function YV(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function $I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Nje extends ti.PureComponent{constructor(){super(...arguments),$I(this,"containerRef",ti.createRef()),$I(this,"resultPromise",void 0),$I(this,"handleError",t=>{const{onError:n=Dje}=this.props;n(t,this.containerRef.current),console.warn(t)}),$I(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=Rje([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Vsn(YV(this.props),YV(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!VG(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&Oxe(a,s),i&&GV(a,i)),a.run()})}else VG(i,s)||this.modifyView(o=>{s&&Oxe(o,s),i&&GV(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=YV(this.props);this.resultPromise=Lsn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;GV(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return ti.createElement("div",{ref:this.containerRef,className:t,style:n})}}$I(Nje,"propTypes",{className:Qde.string,onError:Qde.func});function yK(){return yK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yK.apply(this,arguments)}function vK(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Hsn={};class Goe extends ti.PureComponent{constructor(){super(...arguments),vK(this,"vegaEmbed",ti.createRef()),vK(this,"handleNewView",t=>{this.update();const{onNewView:n=Dje}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){VG(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{zsn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return ti.createElement(Nje,yK({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}vK(Goe,"defaultProps",{data:Hsn});function bK(){return bK=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bK.apply(this,arguments)}function $xe(e){return ti.createElement(Goe,bK({},e,{mode:"vega-lite"}))}function qsn({currentConfig:e,provState:t}){const n=xd(),r=_d(),i=wc(),[s,o]=N.useState(null),[a,u]=N.useState(!0),{updateResponseBlockValidation:l,setIframeAnswers:c}=ll(),[f,d]=N.useState(),{actions:h,trrack:p}=N.useMemo(()=>{const x=ew.create(),w=x.register("signal",(T,C)=>(T.event=C,T)),S=mN({registry:x,initialState:{event:{}}});return{actions:{signalAction:w},trrack:S}},[]),m=N.useCallback(({status:x,provenanceGraph:w,answers:S})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:x,values:S,provenanceGraph:w})),i(c(S))},[r,n,i,c,l]),g=N.useCallback((x,w)=>{p.apply(x,h.signalAction({key:x,value:w}))},[h,p]),y=N.useCallback((x,w)=>{const{responseId:S,response:T}=w;m({status:!0,provenanceGraph:p.graph.backend,answers:{[S]:T}})},[m,p.graph.backend]),b=N.useMemo(()=>{var w;const x=(w=s==null?void 0:s.config)==null?void 0:w.signals;return x?x.reduce((S,T)=>(T.name==="revisitAnswer"?S[T.name]=y:S[T.name]=g,S),{}):{}},[y,g,s]);return N.useEffect(()=>{async function x(){u(!0);let w;"path"in e?w=await tbt(e.path):w=e.config,w!==void 0&&o(w),u(!1)}e&&x()},[e]),N.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?_.jsx("div",{children:"Loading..."}):"path"in e&&!s?_.jsx(j1,{path:e.path}):s?_.jsx(Goe,{spec:structuredClone(s),signalListeners:b,onNewView:x=>d(x)}):_.jsx("div",{children:"Failed to load vega config"})}function Wsn(){const e=gg(),t=xd(),n=_d()||"Notfound",r=e.components[n],{storageEngine:i}=fo(),s=N.useRef(null),[o,a]=N.useState(null),{setIsRecording:u}=ll(),l=vi(D=>D.analysisProvState),c=$5(),f=CZ(),d=vi(D=>D.sequence),[h]=Pv(),p=vi(D=>D.participantId),m=N.useMemo(()=>h.get("participantId"),[h]);p6e();const g=wc(),{setAlertModal:y}=ll();N.useEffect(()=>{(i==null?void 0:i.getEngine())!=="firebase"&&g(y({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[y,i,g]),N.useEffect(()=>{!e||!e.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(D=>{var k;D.stop(),(k=s.current)==null||k.stream.removeTrack(D)}),s.current.stream.getAudioTracks().forEach(D=>{var k;D.stop(),(k=s.current)==null||k.stream.removeTrack(D)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(D=>{const k=new MediaRecorder(D);s.current=k,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[b,x]=N.useState([]),w=N.useRef([]);N.useEffect(()=>{async function D(){var M;const P=((M=xZ(d,t))==null?void 0:M.map($=>$.currentBlock.id).filter($=>$!==void 0))||[];x(P)}async function k(){const P=w.current;JSON.stringify(P)!==JSON.stringify(b)&&b.length>0&&i&&await i.addParticipantTags(b),w.current=b}D().then(k)},[t,i,d]);const S=N.useMemo(()=>{var D;return n!=="end"&&Z2(r)&&e.baseComponents?TZ({},(D=e.baseComponents)==null?void 0:D[r.baseComponent],r):r},[r,e]);if(n==="end")return _.jsx(lMt,{});if(n==="__trainingFailed")return _.jsx(cMt,{});if(n==="__timedOut")return _.jsx(fMt,{});if(n==="Notfound")return _.jsx(j1,{email:e.uiConfig.contactEmail});if(m&&p!==m)return _.jsx(Ua,{style:{height:"80vh"},children:_.jsx(_c,{})});const T=S.instruction||"",{instructionLocation:C}=S,I=e.uiConfig.sidebar&&(C==="sidebar"||C===void 0);return _.jsxs(_.Fragment,{children:[C==="aboveStimulus"&&_.jsx(Cu,{text:T}),_.jsx(R$,{status:f,config:S,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[S.type==="markdown"&&_.jsx(rMt,{currentConfig:S}),S.type==="website"&&_.jsx(ebt,{currentConfig:S}),S.type==="image"&&_.jsx(rbt,{currentConfig:S}),S.type==="react-component"&&_.jsx(nMt,{currentConfig:S,provState:l}),S.type==="vega"&&_.jsx(qsn,{currentConfig:S,provState:l})]},`${t}-stimulus`),(C==="belowStimulus"||C===void 0&&!I)&&_.jsx(Cu,{text:T}),_.jsx(R$,{status:f,config:S,location:"belowStimulus"},`${t}-below-response-block`)]})}function Pje(e){const[t]=Pv();return _.jsx(HJ,{...e,to:{pathname:e.to,search:t.toString()}})}function Oje(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=Oje(o,t,n,r),r.includes(o.orderPath))break}return i}function $je(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=$je(s,r)}}),n}function Gsn(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function Ysn({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=K_(),c=jh(),f=xd(),[d,{close:h,open:p}]=rQ(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?Oje(n,e,r,a.orderPath):-1,{trialId:y}=sm(),[b]=Pv(),x=N.useMemo(()=>b.get("participantId"),[b]),w=y===e,S=s?f===g:f===`reviewer-${e}`,T=u?w:S,C=N.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),D=u?C:()=>c(s?x?`/${l}/${Mp(g)}?participantId=${x}`:`/${l}/${Mp(g)}`:`/${l}/reviewer-${e}`),k=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,P=e.includes("$")&&k&&e.includes(k)?e.split(k).at(-1):e;return _.jsxs(rc,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[_.jsx(rc.Target,{children:_.jsx(Ie,{onMouseEnter:p,onMouseLeave:h,children:_.jsx(c5,{active:T,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(Ie,{children:[i&&_.jsx(ict,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==P&&_.jsx(vct,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),_.jsx(nt,{size:"sm",span:T,fw:T?"700":void 0,display:"inline",children:P})]}),onClick:D,disabled:t})})}),m&&(m.description||m.meta)&&_.jsx(rc.Dropdown,{onMouseLeave:h,children:_.jsxs(Ie,{children:[m.description&&_.jsxs(Ie,{children:[_.jsx(nt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(nt,{fw:400,component:"span",children:m.description})]}),m.meta&&_.jsxs(Ie,{children:[_.jsx(nt,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(nt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function JL({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=G0(e.components);return n&&r&&(o=Gsn(G0(e.components),G0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),_.jsx(_.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return _.jsx(Ysn,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?om(c).length-$je(u,c):0,d=om(u);return _.jsx(c5,{label:_.jsxs(Ie,{style:{opacity:f>0?1:.5},children:[_.jsx(nt,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?_.jsx(nct,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(v1,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&_.jsx(v1,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(Ie,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(JL,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function Mje(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Mxe({text:e}){return _.jsx(ss,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(WJ,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function Ksn(){const e=vi(d=>d.sequence),t=vi(d=>d.metadata),{toggleStudyBrowser:n}=ll(),r=gg(),i=wc(),s=K_(),o=mAe(`/${s}`),{storageEngine:a}=fo(),u=N.useMemo(()=>{let d=G0(r.sequence);return d=_Z(d,"root"),d.components.push("end"),d},[r.sequence]),[l,c]=N.useState("participant"),f=N.useMemo(()=>l==="allTrials",[l]);return _.jsxs(Oi.Aside,{p:"0",children:[_.jsx(Oi.Section,{p:"md",children:_.jsxs(qt,{direction:"row",justify:"space-between",children:[_.jsx(nt,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(ss,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:f,children:_.jsx(gn,{variant:"light",leftSection:_.jsx(GJ,{size:14}),onClick:()=>Mje(a,r,t,o),size:"xs",disabled:f,children:"Next Participant"})}),_.jsx(Iv,{onClick:()=>i(n()),mt:1})]})}),_.jsx(Oi.Section,{grow:!0,component:lg,p:"md",children:_.jsxs(Gr,{value:l,onChange:c,children:[_.jsx(Ie,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(Gr.List,{grow:!0,children:[_.jsxs(Gr.Tab,{value:"participant",children:["Participant View",_.jsx(Mxe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(Gr.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Mxe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(Gr.Panel,{value:"participant",children:_.jsx(JL,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),_.jsx(Gr.Panel,{value:"allTrials",children:_.jsx(JL,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}const Xsn=N.createContext(null);function yu(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let fP=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const Lxe={decode:function(e,t){return yu(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Lje(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(Lje(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Fxe(e,t,n){const r=Lje(e,t||{});return n==null||n.appendChild(r),r}var Qsn=Object.freeze({__proto__:null,createElement:Fxe,default:Fxe});const Jsn={fetchBlob:function(e,t,n){return yu(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){yu(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>yu(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>yu(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class Zsn extends fP{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return yu(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}class e2 extends fP{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=S=>{if(S.preventDefault(),S.stopPropagation(),u&&Date.now()-m<a)return;const T=S.clientX,C=S.clientY,I=T-d,D=C-h;if(p||Math.abs(I)>s||Math.abs(D)>s){const k=t.getBoundingClientRect(),{left:P,top:M}=k;p||(r==null||r(d-P,h-M),p=!0),n(I,D,T-P,C-M),d=T,h=C}},y=S=>{if(p){const T=S.clientX,C=S.clientY,I=t.getBoundingClientRect(),{left:D,top:k}=I;i==null||i(T-D,C-k)}l()},b=S=>{S.relatedTarget&&S.relatedTarget!==document.documentElement||y(S)},x=S=>{p&&(S.stopPropagation(),S.preventDefault())},w=S=>{p&&S.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",y),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",w,{passive:!1}),document.addEventListener("click",x,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",w),setTimeout(()=>{document.removeEventListener("click",x,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.call(this)}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,b=0,x=0;for(let w=0;w<=a;w++){const S=Math.round(w*m);if(S>y){const I=Math.round(b*c*i),D=I+Math.round(x*c*i)||1;let k=c-I;n.barAlign==="top"?k=0:n.barAlign==="bottom"&&(k=l-D),r[g](y*(d+h),k,d,D,p),y=S,b=0,x=0}const T=Math.abs(s[w]||0),C=Math.abs(o[w]||0);T>b&&(b=T),C>x&&(x=C)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,y),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(e2.MAX_CANVAS_WIDTH,u,l),f={};if(n.barWidth||n.barGap){const g=n.barWidth||.5,y=g+(n.barGap||g/2);c%y!=0&&(c=Math.floor(c/y)*y)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const y=g*c,b=Math.min(l-y,c);if(b<=0)return;const x=t.map(w=>{const S=Math.floor(y/l*w.length),T=Math.floor((y+b)/l*w.length);return w.slice(S,T)});this.renderSingleCanvas(x,n,b,i,y,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);d(m-1),d(m),d(m+1),h>1&&(this.unsubscribeOnScroll=this.on("scroll",()=>{const{scrollLeft:g}=this.scrollContainer,y=Math.floor(g/l*h);Object.keys(f).length>e2.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(y-1),d(y),d(y+1)}))}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return yu(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){var t;if((t=this.unsubscribeOnScroll)===null||t===void 0||t.call(this),delete this.unsubscribeOnScroll,!this.audioData)return;const{scrollWidth:n}=this.scrollContainer,{right:r}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&n!==this.scrollContainer.scrollWidth){const{right:i}=this.progressWrapper.getBoundingClientRect();let s=i-r;s*=2,s=s<0?Math.floor(s):Math.ceil(s),s/=2,this.scrollContainer.scrollLeft+=s}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return yu(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}}e2.MAX_CANVAS_WIDTH=8e3,e2.MAX_NODES=10;class eon extends fP{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Bxe extends fP{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return yu(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return yu(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return yu(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const ton={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class gD extends Zsn{static create(t){return new gD(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Bxe:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},ton,t),this.timer=new eon;const r=n?void 0:this.getMediaElement();this.renderer=new e2(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{this.emit("error",t.error)}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return yu(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=l=>this.emit("loading",l);n=yield Jsn.fetchBlob(t,u,a)}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof Bxe&&(a.duration=o)}if(r)this.decodedData=Lxe.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield Lxe.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return yu(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return yu(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return yu(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return yu(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}gD.BasePlugin=class extends fP{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},gD.dom=Qsn;function non(e){return gD.create(e)}function ron(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const jxe=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),ion=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:jxe(i),enabled:jxe(s)}};function Uxe(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=ron(i)}return n}function son({container:e,plugins:t=[],onMount:n,...r}){const i=N.useRef(!1),[s,o]=N.useState({}),a=N.useRef([]),[u,l]=N.useState(null);return N.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=Uxe(s,t);a.current=Object.keys(f);const d=non({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),N.useEffect(()=>{if(u){const c=Uxe(s,t),{disabled:f,enabled:d}=ion(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function Fje({children:e,plugins:t=[],onMount:n,...r}){const i=son({plugins:t,onMount:n,...r});return ti.createElement(Xsn.Provider,{value:i},e)}const Bje=({id:e="waveform",children:t})=>ti.createElement("div",{id:e},t);function KV(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let jje=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};class oon extends jje{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}}class aon extends jje{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const uon=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class Yoe extends oon{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new aon,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new Yoe(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const y=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),y)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return KV(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return KV(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||uon.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return KV(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function lon({width:e=70,height:t=36}){const n=N.useRef(null),r=N.useRef(null),[i,s]=N.useState(!1);N.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(Yoe.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=N.useCallback(a=>{n.current=a,s(!0)},[]);return _.jsx(Ie,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:_.jsx(Fje,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:_.jsx(Bje,{id:"waveform",height:t})})})}function con({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=vi(I=>I.config),r=vi(I=>I.metadata),i=wZ(),s=wc(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=ll(),{storageEngine:l}=fo(),c=_d(),f=xd(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=N.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,y=n==null?void 0:n.uiConfig.withProgressBar,b=K_(),x=mAe(`/${b}`),w=N.useRef(null),[S,T]=N.useState(!1),C=vi(I=>I.isRecording);return N.useEffect(()=>{const I=w.current;I&&T(I.scrollWidth>I.offsetWidth)},[n]),_.jsx(Oi.Header,{p:"md",children:_.jsxs(qc,{mt:-7,align:"center",children:[_.jsx(qc.Col,{span:4,children:_.jsxs(qt,{align:"center",children:[_.jsx(Dv,{w:40,src:`${ul}${g}`,alt:"Study Logo"}),_.jsx(Zc,{w:"md"}),_.jsx(zs,{ref:w,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:S?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(qc.Col,{span:4,children:y&&_.jsx(S2,{radius:"md",size:"lg",value:h})}),_.jsx(qc.Col,{span:4,children:_.jsxs(bi,{wrap:"nowrap",justify:"right",children:[C?_.jsxs(bi,{ml:"xl",gap:20,wrap:"nowrap",children:[_.jsx(nt,{color:"red",children:"Recording audio"}),_.jsx(lon,{})]}):null,!t&&_.jsx(ss,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(v1,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(gn,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),_.jsxs(Yu,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[_.jsx(Yu.Target,{children:_.jsx(j_,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(cct,{})})}),_.jsxs(Yu.Dropdown,{children:[e&&_.jsx(Yu.Item,{leftSection:_.jsx(Ect,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Yu.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(gct,{size:14}),children:"Contact"}),e&&_.jsx(Yu.Item,{leftSection:_.jsx(GJ,{size:14}),onClick:()=>Mje(l,n,r,x),children:"Next Participant"}),e&&_.jsx(Yu.Item,{leftSection:_.jsx(xAe,{size:14}),component:"a",href:`${ul}analysis/stats/${b}`,children:"Analyze & Manage"})]})]})]})})]})})}function Uje(e,t){var n;return Z2(e)&&t.baseComponents?TZ({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function fon(){var u;const e=(u=gg())==null?void 0:u.uiConfig.sidebar,t=gg(),n=_d(),r=t.components[n],i=N.useMemo(()=>r?Uje(r,t):null,[r,t]),s=CZ(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(Oi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(Oi.Section,{bg:"gray.3",p:"md",children:_.jsxs(nt,{c:"gray.9",children:[_.jsx(nt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Cu,{text:o})]})}),_.jsx(Oi.Section,{p:"md",children:_.jsx(R$,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(Oi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(R$,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function don(){const e=vi(u=>u.showHelpText),t=vi(u=>u.config),n=wc(),{toggleShowHelpText:r}=ll(),[i,s]=N.useState(""),[o,a]=N.useState(!0);return N.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await IZ(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(qs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Cu,{text:i}):_.jsx(j1,{path:t.uiConfig.helpTextPath})})}function hon(){const e=vi(o=>o.alertModal),{setAlertModal:t}=ll(),n=wc(),[r,i]=N.useState(e.show),s=N.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return N.useEffect(()=>i(e.show),[e.show]),_.jsx(qs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(W0,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(tct,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(nt,{my:"md",children:e.message}),_.jsx(bi,{w:"100%",justify:"end",children:_.jsx(gn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function pon(e){const t=N.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return N.useLayoutEffect(()=>{t.current=e}),N.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const zxe=15,Vxe=3;function mon({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return _.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return _.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:_.jsx("rect",{fill:a===r?"#e15759":"#484848",x:e(u.createdOn)-Vxe/2,y:n/2-zxe/2,width:Vxe,height:zxe})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?_.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const Hxe={left:5,top:0,right:5,bottom:0};function gon({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=N.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=N.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=N.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return _.jsx(mon,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return _.jsxs("svg",{style:{width:n,height:r},children:[_.jsx("line",{stroke:"black",strokeWidth:1,x1:Hxe.left,x2:n+Hxe.left,y1:r/2,y2:r/2}),c]})}const XV={left:0,top:0,right:0,bottom:0};function yon(e,t){return t?t.getParticipantData(e):null}function von(){const[e]=Pv(),t=N.useMemo(()=>e.get("participantId")||void 0,[e]),{storageEngine:n}=fo(),r=vi(Q=>Q.analysisIsPlaying),i=vi(Q=>Q.analysisHasAudio),{saveAnalysisState:s,setAnalysisHasAudio:o,setAnalysisHasProvenance:a}=ll(),u=wc(),l=_d(),c=xd();N.useEffect(()=>{u(s(null))},[c,s,u]);const[f,{width:d}]=Jc(),[h,p]=N.useState(0),[m,g]=N.useState(null),[y,b]=N.useState(0),{value:x,status:w}=rL(yon,[t,n]),[S,T]=GZe(0,200),C=N.useRef(null),[I,D]=N.useState(!0),k=N.useRef(null),P=N.useMemo(()=>`${l}_${c}`,[l,c]);N.useEffect(()=>{var Q;if(P&&x&&((Q=x.answers[P])!=null&&Q.provenanceGraph)){const L=ew.create(),z=mN({registry:L,initialState:{}});x.answers[P].provenanceGraph&&(z.importObject(G0(x.answers[P].provenanceGraph)),u(a(!0)),k.current=z)}else u(a(!1))},[x,P,u,a]);const M=N.useCallback(Q=>{var L;Q&&(P&&x&&k.current&&(u(s(k.current.getState((L=x.answers[P].provenanceGraph)==null?void 0:L.nodes[Q]))),k.current.to(Q)),g(Q))},[x,s,u,P]),$=pon(Q=>{if(x&&l&&P){const{startTime:L}=x.answers[P];T(Q*1e3+L)}});N.useEffect(()=>{var z;if(!P||!x||!k.current||!((z=x.answers[P])!=null&&z.provenanceGraph))return;const Q=x.answers[P].provenanceGraph;if(!Q)return;if(!m||!Q.nodes[m]){M(Q.root);return}let L=Q.nodes[m];for(;;)if(S<L.createdOn){if(nkt(L))break;{const W=L.parent;L=Q.nodes[W]}}else if(L.children.length>0){const W=L.children[0];if(S>Q.nodes[W].createdOn)L=Q.nodes[W];else break}else break;L.id!==m&&M(L.id)},[M,m,x,t,S,P]);const B=$5(),q=N.useRef(null),H=N.useCallback(async Q=>{if(q.current=Q,Q&&x&&B&&P&&n)try{const L=await n.getAudio(P,t);await Q.load(L),D(!1),u(o(!0)),b(Q.getDuration()),p(Q.getWidth()),Q.seekTo(0),Q.on("timeupdate",$),Q.on("redrawcomplete",()=>p(Q.getWidth()))}catch(L){throw b(0),u(o(!1)),new Error(L)}else u(o(!1)),b(0)},[x,B,P,n,t,u,o,$]),Y=N.useCallback((Q,L)=>{T(Q),q.current&&L&&setTimeout(()=>{var z;(z=q.current)==null||z.seekTo(L)})},[T,q]);N.useEffect(()=>{q.current&&(r?q.current.play():q.current.pause())},[q,r]);const K=N.useMemo(()=>{var z,W;if(!x||!((z=x.answers[P])!=null&&z.startTime)||!((W=x.answers[P])!=null&&W.endTime))return null;const Q=y>0?x.answers[P].startTime+y*1e3:x.answers[P].endTime;return fc([XV.left,d+XV.left+XV.right]).domain([x.answers[P].startTime,Q]).clamp(!0)},[x,P,d,y]);return N.useEffect(()=>{H(q.current)},[H,x,t,q]),_.jsx(bi,{wrap:"nowrap",gap:10,mx:10,children:_.jsxs(aa,{ref:f,style:{width:"100%"},gap:0,children:[_.jsx(Ua,{}),x!==null&&P?_.jsxs(Ie,{ref:C,style:{overflow:"hidden",width:"100%"},display:i?"block":"none",id:"waveformDiv",children:[_.jsx(Fje,{onMount:H,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",children:_.jsx(Bje,{id:"waveform",height:50})}),I?_.jsx(_c,{}):null]}):null,w==="success"&&x&&K&&P&&x.answers[P].provenanceGraph?_.jsx(gon,{xScale:K,trialName:P,setPlayTime:Y,currentNode:m,setCurrentNode:M,participantData:x,width:h||d,height:25}):null]})})}function bon(e,t){return t?t.getParticipantData(e):null}function xon(e){return e?e.getAllParticipantsData():null}function _on(){const[e]=Pv(),t=N.useMemo(()=>e.get("participantId")||void 0,[e]),n=_d(),r=xd(),i=jh(),{setAnalysisIsPlaying:s}=ll(),o=wc(),a=vi(p=>p.analysisIsPlaying),{storageEngine:u}=fo(),{value:l,status:c}=rL(bon,[t,u]),{value:f}=rL(xon,[u]),d=N.useMemo(()=>{if(f&&l&&t&&n){const p=f.filter(y=>y.participantConfigHash===l.participantConfigHash),m=p.findIndex(y=>y.participantId===t),g=m<p.length-1?p[m+1]:p[0];return[g.participantId,om(g.sequence).indexOf(n)]}return["",0]},[f,n,l,t]),h=N.useMemo(()=>{const p={};return f==null||f.forEach(m=>{p[m.participantConfigHash]||(p[m.participantConfigHash]=new Set),p[m.participantConfigHash].add(m.participantId)}),Object.keys(p).sort((m,g)=>m===(l==null?void 0:l.participantConfigHash)?-1:g===(l==null?void 0:l.participantConfigHash)?1:0).map(m=>({group:`Config version: ${m}`,items:[...p[m]].map(g=>({value:g,label:g,disabled:m!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]);return _.jsx(Oi.Footer,{zIndex:101,withBorder:!1,children:_.jsxs(Ie,{style:{backgroundColor:"var(--mantine-color-blue-2)",height:"150px"},children:[_.jsx(uf,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),_.jsx(von,{}),_.jsx(Ua,{children:_.jsxs(bi,{style:{height:"50px"},children:[_.jsx(j_,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?_.jsx(kct,{}):_.jsx(Rct,{})}),_.jsx(nt,{mx:"sm",children:"Participant:"}),_.jsx(T2,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:p=>{i(`./${Mp(0)}?participantId=${p}`,{relative:"path"})},data:h}),_.jsx(gn,{onClick:()=>i(`./${Mp(+r-1)}?participantId=${t}`,{relative:"path"}),children:"Previous Task"}),_.jsx(gn,{onClick:()=>i(`./${Mp(+r+1)}?participantId=${t}`,{relative:"path"}),children:"Next Task"}),_.jsx(gn,{onClick:()=>i(`./${Mp(d[1])}?participantId=${d[0]}`),children:"Next Participant"})]})})]})})}function won(){const e=N.useRef([]),t=gg(),n=t.uiConfig.windowEventDebounceTime??100,r=vi(d=>d.showStudyBrowser),i=vi(d=>d.analysisHasAudio),s=vi(d=>d.analysisHasProvenance),o=vi(d=>d.modes);N.useEffect(()=>{const d=Wd(S=>{e.current.push([Date.now(),"focus",S.target instanceof HTMLElement?S.target.tagName:""])},n,{maxWait:n}),h=Wd(S=>{e.current.push([Date.now(),"input",S.data??""])},n,{maxWait:n}),p=Wd(S=>{e.current.push([Date.now(),"keypress",S.key])},n,{maxWait:n}),m=Wd(S=>{e.current.push([Date.now(),"mousedown",[S.clientX,S.clientY]])},n,{maxWait:n}),g=Wd(S=>{e.current.push([Date.now(),"mouseup",[S.clientX,S.clientY]])},n,{maxWait:n}),y=Wd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),b=Wd(S=>{e.current.push([Date.now(),"mousemove",[S.clientX,S.clientY]])},n,{maxWait:n}),x=Wd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Wd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",b),window.addEventListener("scroll",x),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",b),window.removeEventListener("scroll",x),document.removeEventListener("visibilitychange",w)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=N.useMemo(()=>o,[o]),c=N.useMemo(()=>u&&r,[u,r]),f=$5();return _.jsx(Ike.Provider,{value:e,children:_.jsxs(Oi,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[_.jsx(fon,{}),_.jsx(Ksn,{}),_.jsx(con,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),_.jsx(don,{}),_.jsx(hon,{}),_.jsx(Oi.Main,{children:_.jsx(jlt,{})}),f&&_.jsx(_on,{})]})})}function Eon(e,t=!1){return typeof e=="number"?qxe(e,t):qxe(e.length,t).map(r=>r.map(i=>e[i]))}function qxe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function zje(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=zje(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function Son(e,t){const n=G0(e);return zje(n,t,"root")}function Vje(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&Vje(s,t,i,o)})}function Ton(e){const t=[];return Vje(e,t,"",0),t}function Wxe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return Eon(i.sort(()=>.5-Math.random()),!0)}function Gxe(e){const n=Ton(e.sequence).map(s=>({[s]:Wxe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=Son(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Wxe(e,o))})}),i}var Con=Tke;function Aon(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function Ion(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function kon(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function Ron(e){return e.__COMMENTS__}function Don(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var x9={EOL:Con.EOL||`
`,tryParseNumber:Aon,createComment:Ion,removeComment:kon,getComment:Ron,forceComment:Don},Non="3.2.1";function Pon(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Yxe}else if(e.length===0)return Yxe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return $on(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),Oon.bind(null,n)}function Oon(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Yxe(){}function $on(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function Hje(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}Hje.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function qje(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}qje.description="parse hexadecimal numbers prefixed with 0x";function Wje(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}Wje.description="support ISO dates";var Koe={loadDsf:Pon,std:{math:Hje,hex:qje,date:Wje}},Mon=function(e,t){var n=x9,r=Koe,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(B){return B==="{"||B==="}"||B==="["||B==="]"||B===","||B===":"}function d(B){var q,H=0,Y=1;for(q=s-1;q>0&&i[q]!==`
`;q--,H++);for(;q>0;q--)i[q]===`
`&&Y++;throw new Error(B+" at line "+Y+","+H+" >>>"+i.substr(s-H,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(B){return i.charAt(s+B)}function m(B){for(var q="",H=o;h();){if(o===H)return h(),B&&H==="'"&&o==="'"&&q.length===0?(h(),g()):q;if(o==="\\")if(h(),o==="u"){for(var Y=0,K=0;K<4;K++){h();var Q=o.charCodeAt(0),L;o>="0"&&o<="9"?L=Q-48:o>="a"&&o<="f"?L=Q-97+10:o>="A"&&o<="F"?L=Q-65+10:d("Bad \\u char "+o),Y=Y*16+L}q+=String.fromCharCode(Y)}else if(typeof a[o]=="string")q+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):q+=o}d("Bad string")}function g(){for(var B="",q=0,H=0;;){var Y=p(-H-5);if(!Y||Y===`
`)break;H++}function K(){for(var Q=H;o&&o<=" "&&o!==`
`&&Q-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),K());;){if(!o)d("Bad multiline string");else if(o==="'"){if(q++,h(),q===3)return B.slice(-1)===`
`&&(B=B.slice(0,-1)),B;continue}else for(;q>0;)B+="'",q--;o===`
`?(B+=`
`,h(),K()):(o!=="\r"&&(B+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var B="",q=s,H=-1;;){if(o===":")return B?H>=0&&H!==B.length&&(s=q+H,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),B;o<=" "?o?H<0&&(H=B.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):B+=o,h()}}function b(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function x(){var B=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var q=o==="\r"||o===`
`||o==="";if(q||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var H=B[0];switch(H){case"f":if(B.trim()==="false")return!1;break;case"n":if(B.trim()==="null")return null;break;case"t":if(B.trim()==="true")return!0;break;default:if(H==="-"||H>="0"&&H<="9"){var Y=n.tryParseNumber(B);if(Y!==void 0)return Y}}if(q){B=B.trim();var K=l(B);return K!==void 0?K:B}}B+=o}}function w(B,q){var H;for(B--,H=s-2;H>B&&i[H]<=" "&&i[H]!==`
`;H--);i[H]===`
`&&H--,i[H]==="\r"&&H--;var Y=i.substr(B,H-B+1);for(H=0;H<Y.length;H++)if(Y[H]>" "){var K=Y.indexOf(`
`);if(K>=0){var Q=[Y.substr(0,K),Y.substr(K+1)];return q&&Q[0].trim().length===0&&Q.shift(),Q}else return[Y]}return[]}function S(B){function q(Y,K){var Q,L,z,W;switch(typeof Y){case"string":Y.indexOf(K)>=0&&(W=Y);break;case"object":if(Object.prototype.toString.apply(Y)==="[object Array]")for(Q=0,z=Y.length;Q<z;Q++)W=q(Y[Q],K)||W;else for(L in Y)Object.prototype.hasOwnProperty.call(Y,L)&&(W=q(Y[L],K)||W)}return W}function H(Y){var K=q(B,Y);return K?"found '"+Y+`' in a string value, your mistake could be with:
  > `+K+`
  (unquoted strings contain everything up to the next line!)`:""}return H("}")||H("]")}function T(){var B=[],q,H,Y;try{if(u&&(q=n.createComment(B,{a:[]})),h(),H=s,b(),q&&(Y=w(H,!0).join(`
`)),o==="]")return h(),q&&(q.e=[Y]),B;for(;o;){if(B.push(I()),H=s,b(),o===","&&(h(),H=s,b()),q){var K=w(H);q.a.push([Y||"",K[0]||""]),Y=K[1]}if(o==="]")return h(),q&&(q.a[q.a.length-1][1]+=Y||""),B;b()}d("End of input while parsing an array (missing ']')")}catch(Q){throw Q.hint=Q.hint||S(B),Q}}function C(B){var q="",H={},Y,K,Q;try{if(u&&(Y=n.createComment(H,{c:{},o:[]})),B?K=1:(h(),K=s),b(),Y&&(Q=w(K,!0).join(`
`)),o==="}"&&!B)return Y&&(Y.e=[Q]),h(),H;for(;o;){if(q=y(),b(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),H[q]=I(),K=s,b(),o===","&&(h(),K=s,b()),Y){var L=w(K);Y.c[q]=[Q||"",L[0]||""],Q=L[1],Y.o.push(q)}if(o==="}"&&!B)return h(),Y&&(Y.c[q][1]+=Q||""),H;b()}if(B)return H;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||S(H),z}}function I(){switch(b(),o){case"{":return C();case"[":return T();case"'":case'"':return m(!0);default:return x()}}function D(B,q){var H=s;if(b(),o&&d("Syntax error, found trailing characters"),u){var Y=q.join(`
`),K=w(H).join(`
`);if(K||Y){var Q=n.createComment(B,n.getComment(B));Q.r=[Y,K]}}return B}function k(){b();var B=u?w(1):null;switch(o){case"{":return D(C(),B);case"[":return D(T(),B);default:return D(I(),B)}}function P(){b();var B=u?w(1):null;switch(o){case"{":return D(C(),B);case"[":return D(T(),B)}try{return D(C(!0),B)}catch(q){c();try{return D(I(),B)}catch{throw q}}}if(typeof e!="string")throw new Error("source is not a string");var M=null,$=!0;return t&&typeof t=="object"&&(u=t.keepWsc,M=t.dsf,$=t.legacyRoot!==!1),l=r.loadDsf(M,"parse"),i=e,c(),$?P():k()},Lon=function(e,t){var n=x9,r=Koe,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,b=Object.keys(i);for(y=b.length-1;y>=0;y--){var x=b[y];g[x].push(i[x][0].length,i[x][1].length)}}var w,S="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+S+"]","g"),C=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+S+"]","g"),I=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+S+"]","g"),D=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},P=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,M="",$=0;function B(W,F){return $+=W[0].length+W[1].length-W[2]-W[3],W[0]+F+W[1]}function q(W){return W.replace(T,function(F){var V=k[F];return typeof V=="string"?B(g.esc,V):B(g.uni,("0000"+F.charCodeAt(0).toString(16)).slice(-4))})}function H(W,F,V,J){return W?(C.lastIndex=0,D.lastIndex=0,c||V||C.test(W)||n.tryParseNumber(W,!0)!==void 0||D.test(W)?(T.lastIndex=0,I.lastIndex=0,T.test(W)?!I.test(W)&&!J&&d?Y(W,F):B(g.qstr,q(W)):B(g.qstr,W)):B(g.str,W)):B(g.qstr,"")}function Y(W,F){var V,J=W.replace(/\r/g,"").split(`
`);if(F+=o,J.length===1)return B(g.mstr,J[0]);var ue=s+F+g.mstr[0];for(V=0;V<J.length;V++)ue+=s,J[V]&&(ue+=F+J[V]);return ue+s+F+g.mstr[1]}function K(W){return W?l||P.test(W)?(T.lastIndex=0,B(g.qkey,T.test(W)?q(W):W)):B(g.key,W):'""'}function Q(W,F,V,J){function ue(Tn){return Tn&&Tn[Tn[0]==="\r"?1:0]===`
`}function we(Tn){return Tn&&!ue(Tn)}function he(Tn,Un,hr){if(!Tn)return"";Tn=n.forceComment(Tn);var gr,Yo=Tn.length;for(gr=0;gr<Yo&&Tn[gr]<=" ";gr++);return hr&&gr>0&&(Tn=Tn.substr(gr)),gr<Yo?Un+B(g.rem,Tn):Tn}var ke=w(W);if(ke!==void 0)return B(g.dsf,ke);switch(typeof W){case"string":return H(W,M,F,J);case"number":return isFinite(W)?B(g.num,String(W)):B(g.lit,"null");case"boolean":return B(g.lit,String(W));case"object":if(!W)return B(g.lit,"null");var Pe;a&&(Pe=n.getComment(W));var rt=Object.prototype.toString.apply(W)==="[object Array]",Re=M;M+=o;var St=s+Re,Je=s+M,It=V||u?"":St,mt=[],Te,Fe=f?[]:null,st=c,yt=d,Dt=h?"":g.com[0],Qe=0,_e,kt,Rt,Ee,Oe,ot,xt,jt,jn;if(rt){for(_e=0,kt=W.length;_e<kt;_e++){if(Te=_e<kt-1,Pe?(ot=Pe.a[_e]||[],xt=we(ot[1]),mt.push(he(ot[0],`
`)+Je),Fe&&(ot[0]||ot[1]||xt)&&(Fe=null)):mt.push(Je),$=0,Ee=W[_e],mt.push(Q(Ee,Pe?xt:!1,!0)+(Te?h:"")),Fe){switch(typeof Ee){case"string":$=0,c=!0,d=0,Fe.push(Q(Ee,!1,!0)+(Te?g.com[0]:"")),c=st,d=yt;break;case"object":if(Ee){Fe=null;break}default:Fe.push(mt[mt.length-1]+(Te?Dt:""));break}Te&&($+=g.com[0].length-g.com[2]),Qe+=$}Pe&&ot[1]&&mt.push(he(ot[1],xt?" ":`
`,xt))}kt===0?Pe&&Pe.e&&mt.push(he(Pe.e[0],`
`)+St):mt.push(St),mt.length===0?jt=B(g.arr,""):(jt=It+B(g.arr,mt.join("")),Fe&&(jn=Fe.join(" "),jn.length-Qe<=f&&(jt=B(g.arr,jn))))}else{var dr=Pe?Pe.o.slice():[],Sr=[];for(Rt in W)Object.prototype.hasOwnProperty.call(W,Rt)&&dr.indexOf(Rt)<0&&Sr.push(Rt);m&&Sr.sort();var xi=dr.concat(Sr);for(_e=0,kt=xi.length;_e<kt;_e++)if(Te=_e<kt-1,Rt=xi[_e],Pe?(ot=Pe.c[Rt]||[],xt=we(ot[1]),mt.push(he(ot[0],`
`)+Je),Fe&&(ot[0]||ot[1]||xt)&&(Fe=null)):mt.push(Je),$=0,Ee=W[Rt],Oe=Q(Ee,Pe&&xt),mt.push(K(Rt)+g.col[0]+(ue(Oe)?"":" ")+Oe+(Te?h:"")),Pe&&ot[1]&&mt.push(he(ot[1],xt?" ":`
`,xt)),Fe){switch(typeof Ee){case"string":$=0,c=!0,d=0,Oe=Q(Ee,!1),c=st,d=yt,Fe.push(K(Rt)+g.col[0]+" "+Oe+(Te?g.com[0]:""));break;case"object":if(Ee){Fe=null;break}default:Fe.push(mt[mt.length-1]+(Te?Dt:""));break}$+=g.col[0].length-g.col[2],Te&&($+=g.com[0].length-g.com[2]),Qe+=$}kt===0?Pe&&Pe.e&&mt.push(he(Pe.e[0],`
`)+St):mt.push(St),mt.length===0?jt=B(g.obj,""):(jt=It+B(g.obj,mt.join("")),Fe&&(jn=Fe.join(" "),jn.length-Qe<=f&&(jt=B(g.obj,jn))))}return M=Re,jt}}w=r.loadDsf(p,"stringify");var L="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(L=z[0]+`
`),L+=Q(e,null,!0,!0),z&&(L+=z[1]||""),L},LS=x9;function Ak(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function xK(e,t){if(!(e===null||typeof e!="object")){var n=LS.getComment(e);n&&LS.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Kxe(o.a,r,n.a[r],xK(e[r]))&&(s=!0);!s&&n.e&&(o.e=Ak(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Kxe(o.s,l,n.c[l],xK(e[l]))&&(s=!0)}!s&&n.e&&(o.e=Ak(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=Ak(n.r[0],n.r[1])),s?o:void 0}}function Fon(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Bon(e,t){var n=[];if(_K(e,t,n,[]),n.length>0){var r=ZL(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+Fon(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),ZL(t,r,1)}}function Kxe(e,t,n,r){var i=Ak(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function Ik(e,t){var n=Ak(t.b,t.a);return n.path=e,n}function kk(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(Ik(s,o)),kk(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(Ik(u,l)),kk(l.x,t,u))});e.e&&t.push(Ik(n,e.e))}}function _K(e,t,n,r){if(e){if(t===null||typeof t!="object"){kk(e,n,r);return}var i,s=LS.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],_K(u.x,t[i],n,l)):(n.push(Ik(l,u)),kk(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],_K(d.x,t[c],n,f))):d&&(n.push(Ik(f,d)),kk(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function ZL(e,t,n){var r=LS.createComment(e,LS.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=LS.forceComment(t)),r.r[n]||""}var jon={extract:function(e){return xK(e,!0)},merge:Bon,header:function(e,t){return ZL(e,t,0)},footer:function(e,t){return ZL(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Xxe=x9,Uon=Non,Qxe=Mon,Jxe=Lon,zon=jon,Von=Koe,_9={parse:Qxe,stringify:Jxe,endOfLine:function(){return Xxe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Xxe.EOL=e)},version:Uon,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Qxe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Jxe(e,t)}},comments:zon,dsf:Von.std},wK={exports:{}},Gje={},Th={},t2={},dP={},fr={},yD={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((x,w)=>`${x}${w}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((x,w)=>(w instanceof n&&(x[w.str]=(x[w.str]||0)+1),x),{})}}e._Code=r,e.nil=new r("");function i(y,...b){const x=[y[0]];let w=0;for(;w<b.length;)a(x,b[w]),x.push(y[++w]);return new r(x)}e._=i;const s=new r("+");function o(y,...b){const x=[h(y[0])];let w=0;for(;w<b.length;)x.push(s),a(x,b[w]),x.push(s,h(y[++w]));return u(x),new r(x)}e.str=o;function a(y,b){b instanceof r?y.push(...b._items):b instanceof n?y.push(b):y.push(f(b))}e.addCodeArg=a;function u(y){let b=1;for(;b<y.length-1;){if(y[b]===s){const x=l(y[b-1],y[b+1]);if(x!==void 0){y.splice(b-1,3,x);continue}y[b++]="+"}b++}}function l(y,b){if(b==='""')return y;if(y==='""')return b;if(typeof y=="string")return b instanceof n||y[y.length-1]!=='"'?void 0:typeof b!="string"?`${y.slice(0,-1)}${b}"`:b[0]==='"'?y.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(y instanceof n))return`"${y}${b.slice(1)}`}function c(y,b){return b.emptyStr()?y:y.emptyStr()?b:o`${y}${b}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(yD);var EK={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=yD;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const b=m.get(p);if(b)return b}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let b=c(y);if(b){const x=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${x} ${y} = ${b};${this.opts._n}`}else if(b=d==null?void 0:d(y))h=(0,t._)`${h}${b}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(EK);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=yD,n=EK;var r=yD;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=EK;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(V,J){return this}}class o extends s{constructor(V,J,ue){super(),this.varKind=V,this.name=J,this.rhs=ue}render({es5:V,_n:J}){const ue=V?n.varKinds.var:this.varKind,we=this.rhs===void 0?"":` = ${this.rhs}`;return`${ue} ${this.name}${we};`+J}optimizeNames(V,J){if(V[this.name.str])return this.rhs&&(this.rhs=B(this.rhs,V,J)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(V,J,ue){super(),this.lhs=V,this.rhs=J,this.sideEffects=ue}render({_n:V}){return`${this.lhs} = ${this.rhs};`+V}optimizeNames(V,J){if(!(this.lhs instanceof t.Name&&!V[this.lhs.str]&&!this.sideEffects))return this.rhs=B(this.rhs,V,J),this}get names(){const V=this.lhs instanceof t.Name?{}:{...this.lhs.names};return $(V,this.rhs)}}class u extends a{constructor(V,J,ue,we){super(V,ue,we),this.op=J}render({_n:V}){return`${this.lhs} ${this.op}= ${this.rhs};`+V}}class l extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`${this.label}:`+V}}class c extends s{constructor(V){super(),this.label=V,this.names={}}render({_n:V}){return`break${this.label?` ${this.label}`:""};`+V}}class f extends s{constructor(V){super(),this.error=V}render({_n:V}){return`throw ${this.error};`+V}get names(){return this.error.names}}class d extends s{constructor(V){super(),this.code=V}render({_n:V}){return`${this.code};`+V}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(V,J){return this.code=B(this.code,V,J),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(V=[]){super(),this.nodes=V}render(V){return this.nodes.reduce((J,ue)=>J+ue.render(V),"")}optimizeNodes(){const{nodes:V}=this;let J=V.length;for(;J--;){const ue=V[J].optimizeNodes();Array.isArray(ue)?V.splice(J,1,...ue):ue?V[J]=ue:V.splice(J,1)}return V.length>0?this:void 0}optimizeNames(V,J){const{nodes:ue}=this;let we=ue.length;for(;we--;){const he=ue[we];he.optimizeNames(V,J)||(q(V,he.names),ue.splice(we,1))}return ue.length>0?this:void 0}get names(){return this.nodes.reduce((V,J)=>M(V,J.names),{})}}class p extends h{render(V){return"{"+V._n+super.render(V)+"}"+V._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(V,J){super(J),this.condition=V}render(V){let J=`if(${this.condition})`+super.render(V);return this.else&&(J+="else "+this.else.render(V)),J}optimizeNodes(){super.optimizeNodes();const V=this.condition;if(V===!0)return this.nodes;let J=this.else;if(J){const ue=J.optimizeNodes();J=this.else=Array.isArray(ue)?new g(ue):ue}if(J)return V===!1?J instanceof y?J:J.nodes:this.nodes.length?this:new y(H(V),J instanceof y?[J]:J.nodes);if(!(V===!1||!this.nodes.length))return this}optimizeNames(V,J){var ue;if(this.else=(ue=this.else)===null||ue===void 0?void 0:ue.optimizeNames(V,J),!!(super.optimizeNames(V,J)||this.else))return this.condition=B(this.condition,V,J),this}get names(){const V=super.names;return $(V,this.condition),this.else&&M(V,this.else.names),V}}y.kind="if";class b extends p{}b.kind="for";class x extends b{constructor(V){super(),this.iteration=V}render(V){return`for(${this.iteration})`+super.render(V)}optimizeNames(V,J){if(super.optimizeNames(V,J))return this.iteration=B(this.iteration,V,J),this}get names(){return M(super.names,this.iteration.names)}}class w extends b{constructor(V,J,ue,we){super(),this.varKind=V,this.name=J,this.from=ue,this.to=we}render(V){const J=V.es5?n.varKinds.var:this.varKind,{name:ue,from:we,to:he}=this;return`for(${J} ${ue}=${we}; ${ue}<${he}; ${ue}++)`+super.render(V)}get names(){const V=$(super.names,this.from);return $(V,this.to)}}class S extends b{constructor(V,J,ue,we){super(),this.loop=V,this.varKind=J,this.name=ue,this.iterable=we}render(V){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(V)}optimizeNames(V,J){if(super.optimizeNames(V,J))return this.iterable=B(this.iterable,V,J),this}get names(){return M(super.names,this.iterable.names)}}class T extends p{constructor(V,J,ue){super(),this.name=V,this.args=J,this.async=ue}render(V){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(V)}}T.kind="func";class C extends h{render(V){return"return "+super.render(V)}}C.kind="return";class I extends p{render(V){let J="try"+super.render(V);return this.catch&&(J+=this.catch.render(V)),this.finally&&(J+=this.finally.render(V)),J}optimizeNodes(){var V,J;return super.optimizeNodes(),(V=this.catch)===null||V===void 0||V.optimizeNodes(),(J=this.finally)===null||J===void 0||J.optimizeNodes(),this}optimizeNames(V,J){var ue,we;return super.optimizeNames(V,J),(ue=this.catch)===null||ue===void 0||ue.optimizeNames(V,J),(we=this.finally)===null||we===void 0||we.optimizeNames(V,J),this}get names(){const V=super.names;return this.catch&&M(V,this.catch.names),this.finally&&M(V,this.finally.names),V}}class D extends p{constructor(V){super(),this.error=V}render(V){return`catch(${this.error})`+super.render(V)}}D.kind="catch";class k extends p{render(V){return"finally"+super.render(V)}}k.kind="finally";class P{constructor(V,J={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...J,_n:J.lines?`
`:""},this._extScope=V,this._scope=new n.Scope({parent:V}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(V){return this._scope.name(V)}scopeName(V){return this._extScope.name(V)}scopeValue(V,J){const ue=this._extScope.value(V,J);return(this._values[ue.prefix]||(this._values[ue.prefix]=new Set)).add(ue),ue}getScopeValue(V,J){return this._extScope.getValue(V,J)}scopeRefs(V){return this._extScope.scopeRefs(V,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(V,J,ue,we){const he=this._scope.toName(J);return ue!==void 0&&we&&(this._constants[he.str]=ue),this._leafNode(new o(V,he,ue)),he}const(V,J,ue){return this._def(n.varKinds.const,V,J,ue)}let(V,J,ue){return this._def(n.varKinds.let,V,J,ue)}var(V,J,ue){return this._def(n.varKinds.var,V,J,ue)}assign(V,J,ue){return this._leafNode(new a(V,J,ue))}add(V,J){return this._leafNode(new u(V,e.operators.ADD,J))}code(V){return typeof V=="function"?V():V!==t.nil&&this._leafNode(new d(V)),this}object(...V){const J=["{"];for(const[ue,we]of V)J.length>1&&J.push(","),J.push(ue),(ue!==we||this.opts.es5)&&(J.push(":"),(0,t.addCodeArg)(J,we));return J.push("}"),new t._Code(J)}if(V,J,ue){if(this._blockNode(new y(V)),J&&ue)this.code(J).else().code(ue).endIf();else if(J)this.code(J).endIf();else if(ue)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(V){return this._elseNode(new y(V))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(V,J){return this._blockNode(V),J&&this.code(J).endFor(),this}for(V,J){return this._for(new x(V),J)}forRange(V,J,ue,we,he=this.opts.es5?n.varKinds.var:n.varKinds.let){const ke=this._scope.toName(V);return this._for(new w(he,ke,J,ue),()=>we(ke))}forOf(V,J,ue,we=n.varKinds.const){const he=this._scope.toName(V);if(this.opts.es5){const ke=J instanceof t.Name?J:this.var("_arr",J);return this.forRange("_i",0,(0,t._)`${ke}.length`,Pe=>{this.var(he,(0,t._)`${ke}[${Pe}]`),ue(he)})}return this._for(new S("of",we,he,J),()=>ue(he))}forIn(V,J,ue,we=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(V,(0,t._)`Object.keys(${J})`,ue);const he=this._scope.toName(V);return this._for(new S("in",we,he,J),()=>ue(he))}endFor(){return this._endBlockNode(b)}label(V){return this._leafNode(new l(V))}break(V){return this._leafNode(new c(V))}return(V){const J=new C;if(this._blockNode(J),this.code(V),J.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(C)}try(V,J,ue){if(!J&&!ue)throw new Error('CodeGen: "try" without "catch" and "finally"');const we=new I;if(this._blockNode(we),this.code(V),J){const he=this.name("e");this._currNode=we.catch=new D(he),J(he)}return ue&&(this._currNode=we.finally=new k,this.code(ue)),this._endBlockNode(D,k)}throw(V){return this._leafNode(new f(V))}block(V,J){return this._blockStarts.push(this._nodes.length),V&&this.code(V).endBlock(J),this}endBlock(V){const J=this._blockStarts.pop();if(J===void 0)throw new Error("CodeGen: not in self-balancing block");const ue=this._nodes.length-J;if(ue<0||V!==void 0&&ue!==V)throw new Error(`CodeGen: wrong number of nodes: ${ue} vs ${V} expected`);return this._nodes.length=J,this}func(V,J=t.nil,ue,we){return this._blockNode(new T(V,J,ue)),we&&this.code(we).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(V=1){for(;V-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(V){return this._currNode.nodes.push(V),this}_blockNode(V){this._currNode.nodes.push(V),this._nodes.push(V)}_endBlockNode(V,J){const ue=this._currNode;if(ue instanceof V||J&&ue instanceof J)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${J?`${V.kind}/${J.kind}`:V.kind}"`)}_elseNode(V){const J=this._currNode;if(!(J instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=J.else=V,this}get _root(){return this._nodes[0]}get _currNode(){const V=this._nodes;return V[V.length-1]}set _currNode(V){const J=this._nodes;J[J.length-1]=V}}e.CodeGen=P;function M(F,V){for(const J in V)F[J]=(F[J]||0)+(V[J]||0);return F}function $(F,V){return V instanceof t._CodeOrName?M(F,V.names):F}function B(F,V,J){if(F instanceof t.Name)return ue(F);if(!we(F))return F;return new t._Code(F._items.reduce((he,ke)=>(ke instanceof t.Name&&(ke=ue(ke)),ke instanceof t._Code?he.push(...ke._items):he.push(ke),he),[]));function ue(he){const ke=J[he.str];return ke===void 0||V[he.str]!==1?he:(delete V[he.str],ke)}function we(he){return he instanceof t._Code&&he._items.some(ke=>ke instanceof t.Name&&V[ke.str]===1&&J[ke.str]!==void 0)}}function q(F,V){for(const J in V)F[J]=(F[J]||0)-(V[J]||0)}function H(F){return typeof F=="boolean"||typeof F=="number"||F===null?!F:(0,t._)`!${W(F)}`}e.not=H;const Y=z(e.operators.AND);function K(...F){return F.reduce(Y)}e.and=K;const Q=z(e.operators.OR);function L(...F){return F.reduce(Q)}e.or=L;function z(F){return(V,J)=>V===t.nil?J:J===t.nil?V:(0,t._)`${W(V)} ${F} ${W(J)}`}function W(F){return F instanceof t.Name?F:(0,t._)`(${F})`}})(fr);var Ft={};Object.defineProperty(Ft,"__esModule",{value:!0});Ft.checkStrictMode=Ft.getErrorPath=Ft.Type=Ft.useFunc=Ft.setEvaluated=Ft.evaluatedPropsToName=Ft.mergeEvaluated=Ft.eachItem=Ft.unescapeJsonPointer=Ft.escapeJsonPointer=Ft.escapeFragment=Ft.unescapeFragment=Ft.schemaRefOrVal=Ft.schemaHasRulesButRef=Ft.schemaHasRules=Ft.checkUnknownRules=Ft.alwaysValidSchema=Ft.toHash=void 0;const Hi=fr,Hon=yD;function qon(e){const t={};for(const n of e)t[n]=!0;return t}Ft.toHash=qon;function Won(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Yje(e,t),!Kje(t,e.self.RULES.all))}Ft.alwaysValidSchema=Won;function Yje(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||Jje(e,`unknown keyword: "${s}"`)}Ft.checkUnknownRules=Yje;function Kje(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}Ft.schemaHasRules=Kje;function Gon(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}Ft.schemaHasRulesButRef=Gon;function Yon({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Hi._)`${n}`}return(0,Hi._)`${e}${t}${(0,Hi.getProperty)(r)}`}Ft.schemaRefOrVal=Yon;function Kon(e){return Xje(decodeURIComponent(e))}Ft.unescapeFragment=Kon;function Xon(e){return encodeURIComponent(Xoe(e))}Ft.escapeFragment=Xon;function Xoe(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}Ft.escapeJsonPointer=Xoe;function Xje(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}Ft.unescapeJsonPointer=Xje;function Qon(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}Ft.eachItem=Qon;function Zxe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Hi.Name?(s instanceof Hi.Name?e(i,s,o):t(i,s,o),o):s instanceof Hi.Name?(t(i,o,s),s):n(s,o);return a===Hi.Name&&!(u instanceof Hi.Name)?r(i,u):u}}Ft.mergeEvaluated={props:Zxe({mergeNames:(e,t,n)=>e.if((0,Hi._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Hi._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Hi._)`${n} || {}`).code((0,Hi._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Hi._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Hi._)`${n} || {}`),Qoe(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Qje}),items:Zxe({mergeNames:(e,t,n)=>e.if((0,Hi._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Hi._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Hi._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Hi._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Qje(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Hi._)`{}`);return t!==void 0&&Qoe(e,n,t),n}Ft.evaluatedPropsToName=Qje;function Qoe(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Hi._)`${t}${(0,Hi.getProperty)(r)}`,!0))}Ft.setEvaluated=Qoe;const e_e={};function Jon(e,t){return e.scopeValue("func",{ref:t,code:e_e[t.code]||(e_e[t.code]=new Hon._Code(t.code))})}Ft.useFunc=Jon;var SK;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(SK||(Ft.Type=SK={}));function Zon(e,t,n){if(e instanceof Hi.Name){const r=t===SK.Num;return n?r?(0,Hi._)`"[" + ${e} + "]"`:(0,Hi._)`"['" + ${e} + "']"`:r?(0,Hi._)`"/" + ${e}`:(0,Hi._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Hi.getProperty)(e).toString():"/"+Xoe(e)}Ft.getErrorPath=Zon;function Jje(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}Ft.checkStrictMode=Jje;var Hm={};Object.defineProperty(Hm,"__esModule",{value:!0});const iu=fr,ean={data:new iu.Name("data"),valCxt:new iu.Name("valCxt"),instancePath:new iu.Name("instancePath"),parentData:new iu.Name("parentData"),parentDataProperty:new iu.Name("parentDataProperty"),rootData:new iu.Name("rootData"),dynamicAnchors:new iu.Name("dynamicAnchors"),vErrors:new iu.Name("vErrors"),errors:new iu.Name("errors"),this:new iu.Name("this"),self:new iu.Name("self"),scope:new iu.Name("scope"),json:new iu.Name("json"),jsonPos:new iu.Name("jsonPos"),jsonLen:new iu.Name("jsonLen"),jsonPart:new iu.Name("jsonPart")};Hm.default=ean;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=fr,n=Ft,r=Hm;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,b,x){const{it:w}=g,{gen:S,compositeRule:T,allErrors:C}=w,I=f(g,y,b);x??(T||C)?u(S,I):l(w,(0,t._)`[${I}]`)}e.reportError=i;function s(g,y=e.keywordError,b){const{it:x}=g,{gen:w,compositeRule:S,allErrors:T}=x,C=f(g,y,b);u(w,C),S||T||l(x,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:b,data:x,errsCount:w,it:S}){if(w===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",w,r.default.errors,C=>{g.const(T,(0,t._)`${r.default.vErrors}[${C}]`),g.if((0,t._)`${T}.instancePath === undefined`,()=>g.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,S.errorPath))),g.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${S.errSchemaPath}/${y}`),S.opts.verbose&&(g.assign((0,t._)`${T}.schema`,b),g.assign((0,t._)`${T}.data`,x))})}e.extendErrors=a;function u(g,y){const b=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${r.default.vErrors}.push(${b})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:b,validateName:x,schemaEnv:w}=g;w.$async?b.throw((0,t._)`new ${g.ValidationError}(${y})`):(b.assign((0,t._)`${x}.errors`,y),b.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,b){const{createErrors:x}=g.it;return x===!1?(0,t._)`{}`:d(g,y,b)}function d(g,y,b={}){const{gen:x,it:w}=g,S=[h(w,b),p(g,b)];return m(g,y,S),x.object(...S)}function h({errorPath:g},{instancePath:y}){const b=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:b,parentSchema:x}){let w=x?y:(0,t.str)`${y}/${g}`;return b&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(b,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:b},x){const{keyword:w,data:S,schemaValue:T,it:C}=g,{opts:I,propertyName:D,topSchemaRef:k,schemaPath:P}=C;x.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),I.messages&&x.push([c.message,typeof b=="function"?b(g):b]),I.verbose&&x.push([c.schema,T],[c.parentSchema,(0,t._)`${k}${P}`],[r.default.data,S]),D&&x.push([c.propertyName,D])}})(dP);Object.defineProperty(t2,"__esModule",{value:!0});t2.boolOrEmptySchema=t2.topBoolOrEmptySchema=void 0;const tan=dP,nan=fr,ran=Hm,ian={message:"boolean schema is false"};function san(e){const{gen:t,schema:n,validateName:r}=e;n===!1?Zje(e,!1):typeof n=="object"&&n.$async===!0?t.return(ran.default.data):(t.assign((0,nan._)`${r}.errors`,null),t.return(!0))}t2.topBoolOrEmptySchema=san;function oan(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),Zje(e)):n.var(t,!0)}t2.boolOrEmptySchema=oan;function Zje(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,tan.reportError)(i,ian,void 0,t)}var Po={},C_={};Object.defineProperty(C_,"__esModule",{value:!0});C_.getRules=C_.isJSONType=void 0;const aan=["string","number","integer","boolean","null","object","array"],uan=new Set(aan);function lan(e){return typeof e=="string"&&uan.has(e)}C_.isJSONType=lan;function can(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}C_.getRules=can;var ng={};Object.defineProperty(ng,"__esModule",{value:!0});ng.shouldUseRule=ng.shouldUseGroup=ng.schemaHasRulesForType=void 0;function fan({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&e7e(e,r)}ng.schemaHasRulesForType=fan;function e7e(e,t){return t.rules.some(n=>t7e(e,n))}ng.shouldUseGroup=e7e;function t7e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}ng.shouldUseRule=t7e;Object.defineProperty(Po,"__esModule",{value:!0});Po.reportTypeError=Po.checkDataTypes=Po.checkDataType=Po.coerceAndCheckDataType=Po.getJSONTypes=Po.getSchemaTypes=Po.DataType=void 0;const dan=C_,han=ng,pan=dP,Xn=fr,n7e=Ft;var FS;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(FS||(Po.DataType=FS={}));function man(e){const t=r7e(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Po.getSchemaTypes=man;function r7e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(dan.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Po.getJSONTypes=r7e;function gan(e,t){const{gen:n,data:r,opts:i}=e,s=yan(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,han.schemaHasRulesForType)(e,t[0]));if(o){const a=Joe(t,r,i.strictNumbers,FS.Wrong);n.if(a,()=>{s.length?van(e,t,s):Zoe(e)})}return o}Po.coerceAndCheckDataType=gan;const i7e=new Set(["string","number","integer","boolean","null"]);function yan(e,t){return t?e.filter(n=>i7e.has(n)||t==="array"&&n==="array"):[]}function van(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,Xn._)`typeof ${i}`),a=r.let("coerced",(0,Xn._)`undefined`);s.coerceTypes==="array"&&r.if((0,Xn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,Xn._)`${i}[0]`).assign(o,(0,Xn._)`typeof ${i}`).if(Joe(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,Xn._)`${a} !== undefined`);for(const l of n)(i7e.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),Zoe(e),r.endIf(),r.if((0,Xn._)`${a} !== undefined`,()=>{r.assign(i,a),ban(e,a)});function u(l){switch(l){case"string":r.elseIf((0,Xn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Xn._)`"" + ${i}`).elseIf((0,Xn._)`${i} === null`).assign(a,(0,Xn._)`""`);return;case"number":r.elseIf((0,Xn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,Xn._)`+${i}`);return;case"integer":r.elseIf((0,Xn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,Xn._)`+${i}`);return;case"boolean":r.elseIf((0,Xn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,Xn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Xn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Xn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,Xn._)`[${i}]`)}}}function ban({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,Xn._)`${t} !== undefined`,()=>e.assign((0,Xn._)`${t}[${n}]`,r))}function TK(e,t,n,r=FS.Correct){const i=r===FS.Correct?Xn.operators.EQ:Xn.operators.NEQ;let s;switch(e){case"null":return(0,Xn._)`${t} ${i} null`;case"array":s=(0,Xn._)`Array.isArray(${t})`;break;case"object":s=(0,Xn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,Xn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,Xn._)`typeof ${t} ${i} ${e}`}return r===FS.Correct?s:(0,Xn.not)(s);function o(a=Xn.nil){return(0,Xn.and)((0,Xn._)`typeof ${t} == "number"`,a,n?(0,Xn._)`isFinite(${t})`:Xn.nil)}}Po.checkDataType=TK;function Joe(e,t,n,r){if(e.length===1)return TK(e[0],t,n,r);let i;const s=(0,n7e.toHash)(e);if(s.array&&s.object){const o=(0,Xn._)`typeof ${t} != "object"`;i=s.null?o:(0,Xn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=Xn.nil;s.number&&delete s.integer;for(const o in s)i=(0,Xn.and)(i,TK(o,t,n,r));return i}Po.checkDataTypes=Joe;const xan={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Xn._)`{type: ${e}}`:(0,Xn._)`{type: ${t}}`};function Zoe(e){const t=_an(e);(0,pan.reportError)(t,xan)}Po.reportTypeError=Zoe;function _an(e){const{gen:t,data:n,schema:r}=e,i=(0,n7e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var w9={};Object.defineProperty(w9,"__esModule",{value:!0});w9.assignDefaults=void 0;const hE=fr,wan=Ft;function Ean(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)t_e(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>t_e(e,s,i.default))}w9.assignDefaults=Ean;function t_e(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,hE._)`${s}${(0,hE.getProperty)(t)}`;if(i){(0,wan.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,hE._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,hE._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,hE._)`${a} = ${(0,hE.stringify)(n)}`)}var Bp={},lr={};Object.defineProperty(lr,"__esModule",{value:!0});lr.validateUnion=lr.validateArray=lr.usePattern=lr.callValidateCode=lr.schemaProperties=lr.allSchemaProperties=lr.noPropertyInData=lr.propertyInData=lr.isOwnProperty=lr.hasPropFunc=lr.reportMissingProp=lr.checkMissingProp=lr.checkReportMissingProp=void 0;const us=fr,eae=Ft,by=Hm,San=Ft;function Tan(e,t){const{gen:n,data:r,it:i}=e;n.if(nae(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,us._)`${t}`},!0),e.error()})}lr.checkReportMissingProp=Tan;function Can({gen:e,data:t,it:{opts:n}},r,i){return(0,us.or)(...r.map(s=>(0,us.and)(nae(e,t,s,n.ownProperties),(0,us._)`${i} = ${s}`)))}lr.checkMissingProp=Can;function Aan(e,t){e.setParams({missingProperty:t},!0),e.error()}lr.reportMissingProp=Aan;function s7e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,us._)`Object.prototype.hasOwnProperty`})}lr.hasPropFunc=s7e;function tae(e,t,n){return(0,us._)`${s7e(e)}.call(${t}, ${n})`}lr.isOwnProperty=tae;function Ian(e,t,n,r){const i=(0,us._)`${t}${(0,us.getProperty)(n)} !== undefined`;return r?(0,us._)`${i} && ${tae(e,t,n)}`:i}lr.propertyInData=Ian;function nae(e,t,n,r){const i=(0,us._)`${t}${(0,us.getProperty)(n)} === undefined`;return r?(0,us.or)(i,(0,us.not)(tae(e,t,n))):i}lr.noPropertyInData=nae;function o7e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}lr.allSchemaProperties=o7e;function kan(e,t){return o7e(t).filter(n=>!(0,eae.alwaysValidSchema)(e,t[n]))}lr.schemaProperties=kan;function Ran({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,us._)`${e}, ${t}, ${r}${i}`:t,f=[[by.default.instancePath,(0,us.strConcat)(by.default.instancePath,s)],[by.default.parentData,o.parentData],[by.default.parentDataProperty,o.parentDataProperty],[by.default.rootData,by.default.rootData]];o.opts.dynamicRef&&f.push([by.default.dynamicAnchors,by.default.dynamicAnchors]);const d=(0,us._)`${c}, ${n.object(...f)}`;return u!==us.nil?(0,us._)`${a}.call(${u}, ${d})`:(0,us._)`${a}(${d})`}lr.callValidateCode=Ran;const Dan=(0,us._)`new RegExp`;function Nan({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,us._)`${i.code==="new RegExp"?Dan:(0,San.useFunc)(e,i)}(${n}, ${r})`})}lr.usePattern=Nan;function Pan(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,us._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:eae.Type.Num},s),t.if((0,us.not)(s),a)})}}lr.validateArray=Pan;function Oan(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,eae.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,us._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,us.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}lr.validateUnion=Oan;Object.defineProperty(Bp,"__esModule",{value:!0});Bp.validateKeywordUsage=Bp.validSchemaType=Bp.funcKeywordCode=Bp.macroKeywordCode=void 0;const Gu=fr,sx=Hm,$an=lr,Man=dP;function Lan(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=a7e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Gu.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Bp.macroKeywordCode=Lan;function Fan(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;jan(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=a7e(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&n_e(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&n_e(e),g(()=>Ban(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Gu._)`await `),b=>r.assign(f,!1).if((0,Gu._)`${b} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Gu._)`${b}.errors`),()=>r.throw(b))),y}function p(){const y=(0,Gu._)`${c}.errors`;return r.assign(y,null),m(Gu.nil),y}function m(y=t.async?(0,Gu._)`await `:Gu.nil){const b=u.opts.passContext?sx.default.this:sx.default.self,x=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Gu._)`${y}${(0,$an.callValidateCode)(e,c,b,x)}`,t.modifying)}function g(y){var b;r.if((0,Gu.not)((b=t.valid)!==null&&b!==void 0?b:f),y)}}Bp.funcKeywordCode=Fan;function n_e(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Gu._)`${r.parentData}[${r.parentDataProperty}]`))}function Ban(e,t){const{gen:n}=e;n.if((0,Gu._)`Array.isArray(${t})`,()=>{n.assign(sx.default.vErrors,(0,Gu._)`${sx.default.vErrors} === null ? ${t} : ${sx.default.vErrors}.concat(${t})`).assign(sx.default.errors,(0,Gu._)`${sx.default.vErrors}.length`),(0,Man.extendErrors)(e)},()=>e.error())}function jan({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function a7e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Gu.stringify)(n)})}function Uan(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Bp.validSchemaType=Uan;function zan({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Bp.validateKeywordUsage=zan;var k1={};Object.defineProperty(k1,"__esModule",{value:!0});k1.extendSubschemaMode=k1.extendSubschemaData=k1.getSubschema=void 0;const Op=fr,u7e=Ft;function Van(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Op._)`${e.schemaPath}${(0,Op.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Op._)`${e.schemaPath}${(0,Op.getProperty)(t)}${(0,Op.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,u7e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}k1.getSubschema=Van;function Han(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Op._)`${t.data}${(0,Op.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Op.str)`${l}${(0,u7e.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Op._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Op.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}k1.extendSubschemaData=Han;function qan(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}k1.extendSubschemaMode=qan;var Da={},l7e={exports:{}},u1=l7e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};w6(t,r,i,e,"",e)};u1.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};u1.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};u1.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};u1.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function w6(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in u1.arrayKeywords)for(var d=0;d<f.length;d++)w6(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in u1.propsKeywords){if(f&&typeof f=="object")for(var h in f)w6(e,t,n,f[h],i+"/"+c+"/"+Wan(h),s,i,c,r,h)}else(c in u1.keywords||e.allKeys&&!(c in u1.skipKeywords))&&w6(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function Wan(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var Gan=l7e.exports;Object.defineProperty(Da,"__esModule",{value:!0});Da.getSchemaRefs=Da.resolveUrl=Da.normalizeId=Da._getFullPath=Da.getFullPath=Da.inlineRef=void 0;const Yan=Ft,Kan=AZ,Xan=Gan,Qan=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Jan(e,t=!0){return typeof e=="boolean"?!0:t===!0?!CK(e):t?c7e(e)<=t:!1}Da.inlineRef=Jan;const Zan=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function CK(e){for(const t in e){if(Zan.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(CK)||typeof n=="object"&&CK(n))return!0}return!1}function c7e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!Qan.has(n)&&(typeof e[n]=="object"&&(0,Yan.eachItem)(e[n],r=>t+=c7e(r)),t===1/0))return 1/0}return t}function f7e(e,t="",n){n!==!1&&(t=BS(t));const r=e.parse(t);return d7e(e,r)}Da.getFullPath=f7e;function d7e(e,t){return e.serialize(t).split("#")[0]+"#"}Da._getFullPath=d7e;const eun=/#\/?$/;function BS(e){return e?e.replace(eun,""):""}Da.normalizeId=BS;function tun(e,t,n){return n=BS(n),e.resolve(t,n)}Da.resolveUrl=tun;const nun=/^[a-z_][-a-z0-9._]*$/i;function run(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=BS(e[n]||t),s={"":i},o=f7e(r,i,!1),a={},u=new Set;return Xan(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),b.call(this,f.$anchor),b.call(this,f.$dynamicAnchor),s[d]=g;function y(x){const w=this.opts.uriResolver.resolve;if(x=BS(g?w(g,x):x),u.has(x))throw c(x);u.add(x);let S=this.refs[x];return typeof S=="string"&&(S=this.refs[S]),typeof S=="object"?l(f,S.schema,x):x!==BS(m)&&(x[0]==="#"?(l(f,a[x],x),a[x]=f):this.refs[x]=m),x}function b(x){if(typeof x=="string"){if(!nun.test(x))throw new Error(`invalid anchor "${x}"`);y.call(this,`#${x}`)}}}),a;function l(f,d,h){if(d!==void 0&&!Kan(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Da.getSchemaRefs=run;Object.defineProperty(Th,"__esModule",{value:!0});Th.getData=Th.KeywordCxt=Th.validateFunctionCode=void 0;const h7e=t2,r_e=Po,rae=ng,eF=Po,iun=w9,Rk=Bp,QV=k1,Zt=fr,kn=Hm,sun=Da,rg=Ft,zA=dP;function oun(e){if(g7e(e)&&(y7e(e),m7e(e))){lun(e);return}p7e(e,()=>(0,h7e.topBoolOrEmptySchema)(e))}Th.validateFunctionCode=oun;function p7e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Zt._)`${kn.default.data}, ${kn.default.valCxt}`,r.$async,()=>{e.code((0,Zt._)`"use strict"; ${i_e(n,i)}`),uun(e,i),e.code(s)}):e.func(t,(0,Zt._)`${kn.default.data}, ${aun(i)}`,r.$async,()=>e.code(i_e(n,i)).code(s))}function aun(e){return(0,Zt._)`{${kn.default.instancePath}="", ${kn.default.parentData}, ${kn.default.parentDataProperty}, ${kn.default.rootData}=${kn.default.data}${e.dynamicRef?(0,Zt._)`, ${kn.default.dynamicAnchors}={}`:Zt.nil}}={}`}function uun(e,t){e.if(kn.default.valCxt,()=>{e.var(kn.default.instancePath,(0,Zt._)`${kn.default.valCxt}.${kn.default.instancePath}`),e.var(kn.default.parentData,(0,Zt._)`${kn.default.valCxt}.${kn.default.parentData}`),e.var(kn.default.parentDataProperty,(0,Zt._)`${kn.default.valCxt}.${kn.default.parentDataProperty}`),e.var(kn.default.rootData,(0,Zt._)`${kn.default.valCxt}.${kn.default.rootData}`),t.dynamicRef&&e.var(kn.default.dynamicAnchors,(0,Zt._)`${kn.default.valCxt}.${kn.default.dynamicAnchors}`)},()=>{e.var(kn.default.instancePath,(0,Zt._)`""`),e.var(kn.default.parentData,(0,Zt._)`undefined`),e.var(kn.default.parentDataProperty,(0,Zt._)`undefined`),e.var(kn.default.rootData,kn.default.data),t.dynamicRef&&e.var(kn.default.dynamicAnchors,(0,Zt._)`{}`)})}function lun(e){const{schema:t,opts:n,gen:r}=e;p7e(e,()=>{n.$comment&&t.$comment&&b7e(e),pun(e),r.let(kn.default.vErrors,null),r.let(kn.default.errors,0),n.unevaluated&&cun(e),v7e(e),yun(e)})}function cun(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Zt._)`${n}.evaluated`),t.if((0,Zt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Zt._)`${e.evaluated}.props`,(0,Zt._)`undefined`)),t.if((0,Zt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Zt._)`${e.evaluated}.items`,(0,Zt._)`undefined`))}function i_e(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Zt._)`/*# sourceURL=${n} */`:Zt.nil}function fun(e,t){if(g7e(e)&&(y7e(e),m7e(e))){dun(e,t);return}(0,h7e.boolOrEmptySchema)(e,t)}function m7e({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function g7e(e){return typeof e.schema!="boolean"}function dun(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&b7e(e),mun(e),gun(e);const s=r.const("_errs",kn.default.errors);v7e(e,s),r.var(t,(0,Zt._)`${s} === ${kn.default.errors}`)}function y7e(e){(0,rg.checkUnknownRules)(e),hun(e)}function v7e(e,t){if(e.opts.jtd)return s_e(e,[],!1,t);const n=(0,r_e.getSchemaTypes)(e.schema),r=(0,r_e.coerceAndCheckDataType)(e,n);s_e(e,n,!r,t)}function hun(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,rg.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function pun(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,rg.checkStrictMode)(e,"default is ignored in the schema root")}function mun(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,sun.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function gun(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function b7e({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Zt._)`${kn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Zt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Zt._)`${kn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function yun(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Zt._)`${kn.default.errors} === 0`,()=>t.return(kn.default.data),()=>t.throw((0,Zt._)`new ${i}(${kn.default.vErrors})`)):(t.assign((0,Zt._)`${r}.errors`,kn.default.vErrors),s.unevaluated&&vun(e),t.return((0,Zt._)`${kn.default.errors} === 0`))}function vun({gen:e,evaluated:t,props:n,items:r}){n instanceof Zt.Name&&e.assign((0,Zt._)`${t}.props`,n),r instanceof Zt.Name&&e.assign((0,Zt._)`${t}.items`,r)}function s_e(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,rg.schemaHasRulesButRef)(s,c))){i.block(()=>w7e(e,"$ref",c.all.$ref.definition));return}u.jtd||bun(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,rae.shouldUseGroup)(s,d)&&(d.type?(i.if((0,eF.checkDataType)(d.type,o,u.strictNumbers)),o_e(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,eF.reportTypeError)(e)),i.endIf()):o_e(e,d),a||i.if((0,Zt._)`${kn.default.errors} === ${r||0}`))}}function o_e(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,iun.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,rae.shouldUseRule)(r,s)&&w7e(e,s.keyword,s.definition,t.type)})}function bun(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(xun(e,t),e.opts.allowUnionTypes||_un(e,t),wun(e,e.dataTypes))}function xun(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{x7e(e.dataTypes,n)||iae(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),Sun(e,t)}}function _un(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&iae(e,"use allowUnionTypes to allow union type keyword")}function wun(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,rae.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>Eun(t,o))&&iae(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function Eun(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function x7e(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Sun(e,t){const n=[];for(const r of e.dataTypes)x7e(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function iae(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,rg.checkStrictMode)(e,t,e.opts.strictTypes)}class _7e{constructor(t,n,r){if((0,Rk.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,rg.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",E7e(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,Rk.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",kn.default.errors))}result(t,n,r){this.failResult((0,Zt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Zt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Zt._)`${n} !== undefined && (${(0,Zt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?zA.reportExtraError:zA.reportError)(this,this.def.error,n)}$dataError(){(0,zA.reportError)(this,this.def.$dataError||zA.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,zA.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Zt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Zt.nil,n=Zt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Zt.or)((0,Zt._)`${i} === undefined`,n)),t!==Zt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Zt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Zt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Zt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Zt._)`${(0,eF.checkDataTypes)(u,n,s.opts.strictNumbers,eF.DataType.Wrong)}`}return Zt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Zt._)`!${u}(${n})`}return Zt.nil}}subschema(t,n){const r=(0,QV.getSubschema)(this.it,t);(0,QV.extendSubschemaData)(r,this.it,t),(0,QV.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return fun(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=rg.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=rg.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Zt.Name)),!0}}Th.KeywordCxt=_7e;function w7e(e,t,n,r){const i=new _7e(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,Rk.funcKeywordCode)(i,n):"macro"in n?(0,Rk.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,Rk.funcKeywordCode)(i,n)}const Tun=/^\/(?:[^~]|~0|~1)*$/,Cun=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function E7e(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return kn.default.rootData;if(e[0]==="/"){if(!Tun.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=kn.default.rootData}else{const l=Cun.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Zt._)`${s}${(0,Zt.getProperty)((0,rg.unescapeJsonPointer)(l))}`,o=(0,Zt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Th.getData=E7e;var hP={};Object.defineProperty(hP,"__esModule",{value:!0});class Aun extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}hP.default=Aun;var _C={};Object.defineProperty(_C,"__esModule",{value:!0});const JV=Da;class Iun extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,JV.resolveUrl)(t,n,r),this.missingSchema=(0,JV.normalizeId)((0,JV.getFullPath)(t,this.missingRef))}}_C.default=Iun;var Hl={};Object.defineProperty(Hl,"__esModule",{value:!0});Hl.resolveSchema=Hl.getCompilingSchema=Hl.resolveRef=Hl.compileSchema=Hl.SchemaEnv=void 0;const jd=fr,kun=hP,Db=Hm,lh=Da,a_e=Ft,Run=Th;class E9{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,lh.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Hl.SchemaEnv=E9;function sae(e){const t=S7e.call(this,e);if(t)return t;const n=(0,lh.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new jd.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:kun.default,code:(0,jd._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Db.default.data,parentData:Db.default.parentData,parentDataProperty:Db.default.parentDataProperty,dataNames:[Db.default.data],dataPathArr:[jd.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,jd.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:jd.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,jd._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,Run.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Db.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Db.default.self}`,`${Db.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof jd.Name?void 0:p,items:m instanceof jd.Name?void 0:m,dynamicProps:p instanceof jd.Name,dynamicItems:m instanceof jd.Name},h.source&&(h.source.evaluated=(0,jd.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Hl.compileSchema=sae;function Dun(e,t,n){var r;n=(0,lh.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=Oun.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new E9({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=Nun.call(this,s)}Hl.resolveRef=Dun;function Nun(e){return(0,lh.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:sae.call(this,e)}function S7e(e){for(const t of this._compilations)if(Pun(t,e))return t}Hl.getCompilingSchema=S7e;function Pun(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Oun(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||S9.call(this,e,t)}function S9(e,t){const n=this.opts.uriResolver.parse(t),r=(0,lh._getFullPath)(this.opts.uriResolver,n);let i=(0,lh.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return ZV.call(this,n,e);const s=(0,lh.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=S9.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:ZV.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||sae.call(this,o),s===(0,lh.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,lh.resolveUrl)(this.opts.uriResolver,i,l)),new E9({schema:a,schemaId:u,root:e,baseId:i})}return ZV.call(this,n,o)}}Hl.resolveSchema=S9;const $un=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function ZV(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,a_e.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!$un.has(a)&&l&&(t=(0,lh.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,a_e.schemaHasRulesButRef)(n,this.RULES)){const a=(0,lh.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=S9.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new E9({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const Mun="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Lun="Meta-schema for $data reference (JSON AnySchema extension proposal)",Fun="object",Bun=["$data"],jun={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Uun=!1,zun={$id:Mun,description:Lun,type:Fun,required:Bun,properties:jun,additionalProperties:Uun};var oae={},AK={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Jt,function(n){function r(){for(var me=arguments.length,ae=Array(me),ge=0;ge<me;ge++)ae[ge]=arguments[ge];if(ae.length>1){ae[0]=ae[0].slice(0,-1);for(var Le=ae.length-1,Me=1;Me<Le;++Me)ae[Me]=ae[Me].slice(1,-1);return ae[Le]=ae[Le].slice(1),ae.join("")}else return ae[0]}function i(me){return"(?:"+me+")"}function s(me){return me===void 0?"undefined":me===null?"null":Object.prototype.toString.call(me).split(" ").pop().split("]").shift().toLowerCase()}function o(me){return me.toUpperCase()}function a(me){return me!=null?me instanceof Array?me:typeof me.length!="number"||me.split||me.setInterval||me.call?[me]:Array.prototype.slice.call(me):[]}function u(me,ae){var ge=me;if(ae)for(var Le in ae)ge[Le]=ae[Le];return ge}function l(me){var ae="[A-Za-z]",ge="[0-9]",Le=r(ge,"[A-Fa-f]"),Me=i(i("%[EFef]"+Le+"%"+Le+Le+"%"+Le+Le)+"|"+i("%[89A-Fa-f]"+Le+"%"+Le+Le)+"|"+i("%"+Le+Le)),_t="[\\:\\/\\?\\#\\[\\]\\@]",Ut="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",fn=r(_t,Ut),Zn=me?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",ur=me?"[\\uE000-\\uF8FF]":"[]",Pn=r(ae,ge,"[\\-\\.\\_\\~]",Zn);i(ae+r(ae,ge,"[\\+\\-\\.]")+"*"),i(i(Me+"|"+r(Pn,Ut,"[\\:]"))+"*");var Tr=i(i("25[0-5]")+"|"+i("2[0-4]"+ge)+"|"+i("1"+ge+ge)+"|"+i("0?[1-9]"+ge)+"|0?0?"+ge),oi=i(Tr+"\\."+Tr+"\\."+Tr+"\\."+Tr),on=i(Le+"{1,4}"),Cr=i(i(on+"\\:"+on)+"|"+oi),Xr=i(i(on+"\\:")+"{6}"+Cr),yr=i("\\:\\:"+i(on+"\\:")+"{5}"+Cr),Di=i(i(on)+"?\\:\\:"+i(on+"\\:")+"{4}"+Cr),po=i(i(i(on+"\\:")+"{0,1}"+on)+"?\\:\\:"+i(on+"\\:")+"{3}"+Cr),Ni=i(i(i(on+"\\:")+"{0,2}"+on)+"?\\:\\:"+i(on+"\\:")+"{2}"+Cr),So=i(i(i(on+"\\:")+"{0,3}"+on)+"?\\:\\:"+on+"\\:"+Cr),ts=i(i(i(on+"\\:")+"{0,4}"+on)+"?\\:\\:"+Cr),ns=i(i(i(on+"\\:")+"{0,5}"+on)+"?\\:\\:"+on),To=i(i(i(on+"\\:")+"{0,6}"+on)+"?\\:\\:"),xa=i([Xr,yr,Di,po,Ni,So,ts,ns,To].join("|")),mo=i(i(Pn+"|"+Me)+"+");i("[vV]"+Le+"+\\."+r(Pn,Ut,"[\\:]")+"+"),i(i(Me+"|"+r(Pn,Ut))+"*");var wl=i(Me+"|"+r(Pn,Ut,"[\\:\\@]"));return i(i(Me+"|"+r(Pn,Ut,"[\\@]"))+"+"),i(i(wl+"|"+r("[\\/\\?]",ur))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ae,ge,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",Pn,Ut),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",Pn,Ut),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",Pn,Ut),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",Pn,Ut),"g"),NOT_QUERY:new RegExp(r("[^\\%]",Pn,Ut,"[\\:\\@\\/\\?]",ur),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",Pn,Ut,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",Pn,Ut),"g"),UNRESERVED:new RegExp(Pn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",Pn,fn),"g"),PCT_ENCODED:new RegExp(Me,"g"),IPV4ADDRESS:new RegExp("^("+oi+")$"),IPV6ADDRESS:new RegExp("^\\[?("+xa+")"+i(i("\\%25|\\%(?!"+Le+"{2})")+"("+mo+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function me(ae,ge){var Le=[],Me=!0,_t=!1,Ut=void 0;try{for(var fn=ae[Symbol.iterator](),Zn;!(Me=(Zn=fn.next()).done)&&(Le.push(Zn.value),!(ge&&Le.length===ge));Me=!0);}catch(ur){_t=!0,Ut=ur}finally{try{!Me&&fn.return&&fn.return()}finally{if(_t)throw Ut}}return Le}return function(ae,ge){if(Array.isArray(ae))return ae;if(Symbol.iterator in Object(ae))return me(ae,ge);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(me){if(Array.isArray(me)){for(var ae=0,ge=Array(me.length);ae<me.length;ae++)ge[ae]=me[ae];return ge}else return Array.from(me)},p=2147483647,m=36,g=1,y=26,b=38,x=700,w=72,S=128,T="-",C=/^xn--/,I=/[^\0-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=m-g,M=Math.floor,$=String.fromCharCode;function B(me){throw new RangeError(k[me])}function q(me,ae){for(var ge=[],Le=me.length;Le--;)ge[Le]=ae(me[Le]);return ge}function H(me,ae){var ge=me.split("@"),Le="";ge.length>1&&(Le=ge[0]+"@",me=ge[1]),me=me.replace(D,".");var Me=me.split("."),_t=q(Me,ae).join(".");return Le+_t}function Y(me){for(var ae=[],ge=0,Le=me.length;ge<Le;){var Me=me.charCodeAt(ge++);if(Me>=55296&&Me<=56319&&ge<Le){var _t=me.charCodeAt(ge++);(_t&64512)==56320?ae.push(((Me&1023)<<10)+(_t&1023)+65536):(ae.push(Me),ge--)}else ae.push(Me)}return ae}var K=function(ae){return String.fromCodePoint.apply(String,h(ae))},Q=function(ae){return ae-48<10?ae-22:ae-65<26?ae-65:ae-97<26?ae-97:m},L=function(ae,ge){return ae+22+75*(ae<26)-((ge!=0)<<5)},z=function(ae,ge,Le){var Me=0;for(ae=Le?M(ae/x):ae>>1,ae+=M(ae/ge);ae>P*y>>1;Me+=m)ae=M(ae/P);return M(Me+(P+1)*ae/(ae+b))},W=function(ae){var ge=[],Le=ae.length,Me=0,_t=S,Ut=w,fn=ae.lastIndexOf(T);fn<0&&(fn=0);for(var Zn=0;Zn<fn;++Zn)ae.charCodeAt(Zn)>=128&&B("not-basic"),ge.push(ae.charCodeAt(Zn));for(var ur=fn>0?fn+1:0;ur<Le;){for(var Pn=Me,Tr=1,oi=m;;oi+=m){ur>=Le&&B("invalid-input");var on=Q(ae.charCodeAt(ur++));(on>=m||on>M((p-Me)/Tr))&&B("overflow"),Me+=on*Tr;var Cr=oi<=Ut?g:oi>=Ut+y?y:oi-Ut;if(on<Cr)break;var Xr=m-Cr;Tr>M(p/Xr)&&B("overflow"),Tr*=Xr}var yr=ge.length+1;Ut=z(Me-Pn,yr,Pn==0),M(Me/yr)>p-_t&&B("overflow"),_t+=M(Me/yr),Me%=yr,ge.splice(Me++,0,_t)}return String.fromCodePoint.apply(String,ge)},F=function(ae){var ge=[];ae=Y(ae);var Le=ae.length,Me=S,_t=0,Ut=w,fn=!0,Zn=!1,ur=void 0;try{for(var Pn=ae[Symbol.iterator](),Tr;!(fn=(Tr=Pn.next()).done);fn=!0){var oi=Tr.value;oi<128&&ge.push($(oi))}}catch(He){Zn=!0,ur=He}finally{try{!fn&&Pn.return&&Pn.return()}finally{if(Zn)throw ur}}var on=ge.length,Cr=on;for(on&&ge.push(T);Cr<Le;){var Xr=p,yr=!0,Di=!1,po=void 0;try{for(var Ni=ae[Symbol.iterator](),So;!(yr=(So=Ni.next()).done);yr=!0){var ts=So.value;ts>=Me&&ts<Xr&&(Xr=ts)}}catch(He){Di=!0,po=He}finally{try{!yr&&Ni.return&&Ni.return()}finally{if(Di)throw po}}var ns=Cr+1;Xr-Me>M((p-_t)/ns)&&B("overflow"),_t+=(Xr-Me)*ns,Me=Xr;var To=!0,xa=!1,mo=void 0;try{for(var wl=ae[Symbol.iterator](),Ef;!(To=(Ef=wl.next()).done);To=!0){var ee=Ef.value;if(ee<Me&&++_t>p&&B("overflow"),ee==Me){for(var pe=_t,se=m;;se+=m){var xe=se<=Ut?g:se>=Ut+y?y:se-Ut;if(pe<xe)break;var Ce=pe-xe,be=m-xe;ge.push($(L(xe+Ce%be,0))),pe=M(Ce/be)}ge.push($(L(pe,0))),Ut=z(_t,ns,Cr==on),_t=0,++Cr}}}catch(He){xa=!0,mo=He}finally{try{!To&&wl.return&&wl.return()}finally{if(xa)throw mo}}++_t,++Me}return ge.join("")},V=function(ae){return H(ae,function(ge){return C.test(ge)?W(ge.slice(4).toLowerCase()):ge})},J=function(ae){return H(ae,function(ge){return I.test(ge)?"xn--"+F(ge):ge})},ue={version:"2.1.0",ucs2:{decode:Y,encode:K},decode:W,encode:F,toASCII:J,toUnicode:V},we={};function he(me){var ae=me.charCodeAt(0),ge=void 0;return ae<16?ge="%0"+ae.toString(16).toUpperCase():ae<128?ge="%"+ae.toString(16).toUpperCase():ae<2048?ge="%"+(ae>>6|192).toString(16).toUpperCase()+"%"+(ae&63|128).toString(16).toUpperCase():ge="%"+(ae>>12|224).toString(16).toUpperCase()+"%"+(ae>>6&63|128).toString(16).toUpperCase()+"%"+(ae&63|128).toString(16).toUpperCase(),ge}function ke(me){for(var ae="",ge=0,Le=me.length;ge<Le;){var Me=parseInt(me.substr(ge+1,2),16);if(Me<128)ae+=String.fromCharCode(Me),ge+=3;else if(Me>=194&&Me<224){if(Le-ge>=6){var _t=parseInt(me.substr(ge+4,2),16);ae+=String.fromCharCode((Me&31)<<6|_t&63)}else ae+=me.substr(ge,6);ge+=6}else if(Me>=224){if(Le-ge>=9){var Ut=parseInt(me.substr(ge+4,2),16),fn=parseInt(me.substr(ge+7,2),16);ae+=String.fromCharCode((Me&15)<<12|(Ut&63)<<6|fn&63)}else ae+=me.substr(ge,9);ge+=9}else ae+=me.substr(ge,3),ge+=3}return ae}function Pe(me,ae){function ge(Le){var Me=ke(Le);return Me.match(ae.UNRESERVED)?Me:Le}return me.scheme&&(me.scheme=String(me.scheme).replace(ae.PCT_ENCODED,ge).toLowerCase().replace(ae.NOT_SCHEME,"")),me.userinfo!==void 0&&(me.userinfo=String(me.userinfo).replace(ae.PCT_ENCODED,ge).replace(ae.NOT_USERINFO,he).replace(ae.PCT_ENCODED,o)),me.host!==void 0&&(me.host=String(me.host).replace(ae.PCT_ENCODED,ge).toLowerCase().replace(ae.NOT_HOST,he).replace(ae.PCT_ENCODED,o)),me.path!==void 0&&(me.path=String(me.path).replace(ae.PCT_ENCODED,ge).replace(me.scheme?ae.NOT_PATH:ae.NOT_PATH_NOSCHEME,he).replace(ae.PCT_ENCODED,o)),me.query!==void 0&&(me.query=String(me.query).replace(ae.PCT_ENCODED,ge).replace(ae.NOT_QUERY,he).replace(ae.PCT_ENCODED,o)),me.fragment!==void 0&&(me.fragment=String(me.fragment).replace(ae.PCT_ENCODED,ge).replace(ae.NOT_FRAGMENT,he).replace(ae.PCT_ENCODED,o)),me}function rt(me){return me.replace(/^0*(.*)/,"$1")||"0"}function Re(me,ae){var ge=me.match(ae.IPV4ADDRESS)||[],Le=d(ge,2),Me=Le[1];return Me?Me.split(".").map(rt).join("."):me}function St(me,ae){var ge=me.match(ae.IPV6ADDRESS)||[],Le=d(ge,3),Me=Le[1],_t=Le[2];if(Me){for(var Ut=Me.toLowerCase().split("::").reverse(),fn=d(Ut,2),Zn=fn[0],ur=fn[1],Pn=ur?ur.split(":").map(rt):[],Tr=Zn.split(":").map(rt),oi=ae.IPV4ADDRESS.test(Tr[Tr.length-1]),on=oi?7:8,Cr=Tr.length-on,Xr=Array(on),yr=0;yr<on;++yr)Xr[yr]=Pn[yr]||Tr[Cr+yr]||"";oi&&(Xr[on-1]=Re(Xr[on-1],ae));var Di=Xr.reduce(function(ns,To,xa){if(!To||To==="0"){var mo=ns[ns.length-1];mo&&mo.index+mo.length===xa?mo.length++:ns.push({index:xa,length:1})}return ns},[]),po=Di.sort(function(ns,To){return To.length-ns.length})[0],Ni=void 0;if(po&&po.length>1){var So=Xr.slice(0,po.index),ts=Xr.slice(po.index+po.length);Ni=So.join(":")+"::"+ts.join(":")}else Ni=Xr.join(":");return _t&&(Ni+="%"+_t),Ni}else return me}var Je=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,It="".match(/(){0}/)[1]===void 0;function mt(me){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge={},Le=ae.iri!==!1?f:c;ae.reference==="suffix"&&(me=(ae.scheme?ae.scheme+":":"")+"//"+me);var Me=me.match(Je);if(Me){It?(ge.scheme=Me[1],ge.userinfo=Me[3],ge.host=Me[4],ge.port=parseInt(Me[5],10),ge.path=Me[6]||"",ge.query=Me[7],ge.fragment=Me[8],isNaN(ge.port)&&(ge.port=Me[5])):(ge.scheme=Me[1]||void 0,ge.userinfo=me.indexOf("@")!==-1?Me[3]:void 0,ge.host=me.indexOf("//")!==-1?Me[4]:void 0,ge.port=parseInt(Me[5],10),ge.path=Me[6]||"",ge.query=me.indexOf("?")!==-1?Me[7]:void 0,ge.fragment=me.indexOf("#")!==-1?Me[8]:void 0,isNaN(ge.port)&&(ge.port=me.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Me[4]:void 0)),ge.host&&(ge.host=St(Re(ge.host,Le),Le)),ge.scheme===void 0&&ge.userinfo===void 0&&ge.host===void 0&&ge.port===void 0&&!ge.path&&ge.query===void 0?ge.reference="same-document":ge.scheme===void 0?ge.reference="relative":ge.fragment===void 0?ge.reference="absolute":ge.reference="uri",ae.reference&&ae.reference!=="suffix"&&ae.reference!==ge.reference&&(ge.error=ge.error||"URI is not a "+ae.reference+" reference.");var _t=we[(ae.scheme||ge.scheme||"").toLowerCase()];if(!ae.unicodeSupport&&(!_t||!_t.unicodeSupport)){if(ge.host&&(ae.domainHost||_t&&_t.domainHost))try{ge.host=ue.toASCII(ge.host.replace(Le.PCT_ENCODED,ke).toLowerCase())}catch(Ut){ge.error=ge.error||"Host's domain name can not be converted to ASCII via punycode: "+Ut}Pe(ge,c)}else Pe(ge,Le);_t&&_t.parse&&_t.parse(ge,ae)}else ge.error=ge.error||"URI can not be parsed.";return ge}function Te(me,ae){var ge=ae.iri!==!1?f:c,Le=[];return me.userinfo!==void 0&&(Le.push(me.userinfo),Le.push("@")),me.host!==void 0&&Le.push(St(Re(String(me.host),ge),ge).replace(ge.IPV6ADDRESS,function(Me,_t,Ut){return"["+_t+(Ut?"%25"+Ut:"")+"]"})),(typeof me.port=="number"||typeof me.port=="string")&&(Le.push(":"),Le.push(String(me.port))),Le.length?Le.join(""):void 0}var Fe=/^\.\.?\//,st=/^\/\.(\/|$)/,yt=/^\/\.\.(\/|$)/,Dt=/^\/?(?:.|\n)*?(?=\/|$)/;function Qe(me){for(var ae=[];me.length;)if(me.match(Fe))me=me.replace(Fe,"");else if(me.match(st))me=me.replace(st,"/");else if(me.match(yt))me=me.replace(yt,"/"),ae.pop();else if(me==="."||me==="..")me="";else{var ge=me.match(Dt);if(ge){var Le=ge[0];me=me.slice(Le.length),ae.push(Le)}else throw new Error("Unexpected dot segment condition")}return ae.join("")}function _e(me){var ae=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=ae.iri?f:c,Le=[],Me=we[(ae.scheme||me.scheme||"").toLowerCase()];if(Me&&Me.serialize&&Me.serialize(me,ae),me.host&&!ge.IPV6ADDRESS.test(me.host)){if(ae.domainHost||Me&&Me.domainHost)try{me.host=ae.iri?ue.toUnicode(me.host):ue.toASCII(me.host.replace(ge.PCT_ENCODED,ke).toLowerCase())}catch(fn){me.error=me.error||"Host's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+fn}}Pe(me,ge),ae.reference!=="suffix"&&me.scheme&&(Le.push(me.scheme),Le.push(":"));var _t=Te(me,ae);if(_t!==void 0&&(ae.reference!=="suffix"&&Le.push("//"),Le.push(_t),me.path&&me.path.charAt(0)!=="/"&&Le.push("/")),me.path!==void 0){var Ut=me.path;!ae.absolutePath&&(!Me||!Me.absolutePath)&&(Ut=Qe(Ut)),_t===void 0&&(Ut=Ut.replace(/^\/\//,"/%2F")),Le.push(Ut)}return me.query!==void 0&&(Le.push("?"),Le.push(me.query)),me.fragment!==void 0&&(Le.push("#"),Le.push(me.fragment)),Le.join("")}function kt(me,ae){var ge=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Le=arguments[3],Me={};return Le||(me=mt(_e(me,ge),ge),ae=mt(_e(ae,ge),ge)),ge=ge||{},!ge.tolerant&&ae.scheme?(Me.scheme=ae.scheme,Me.userinfo=ae.userinfo,Me.host=ae.host,Me.port=ae.port,Me.path=Qe(ae.path||""),Me.query=ae.query):(ae.userinfo!==void 0||ae.host!==void 0||ae.port!==void 0?(Me.userinfo=ae.userinfo,Me.host=ae.host,Me.port=ae.port,Me.path=Qe(ae.path||""),Me.query=ae.query):(ae.path?(ae.path.charAt(0)==="/"?Me.path=Qe(ae.path):((me.userinfo!==void 0||me.host!==void 0||me.port!==void 0)&&!me.path?Me.path="/"+ae.path:me.path?Me.path=me.path.slice(0,me.path.lastIndexOf("/")+1)+ae.path:Me.path=ae.path,Me.path=Qe(Me.path)),Me.query=ae.query):(Me.path=me.path,ae.query!==void 0?Me.query=ae.query:Me.query=me.query),Me.userinfo=me.userinfo,Me.host=me.host,Me.port=me.port),Me.scheme=me.scheme),Me.fragment=ae.fragment,Me}function Rt(me,ae,ge){var Le=u({scheme:"null"},ge);return _e(kt(mt(me,Le),mt(ae,Le),Le,!0),Le)}function Ee(me,ae){return typeof me=="string"?me=_e(mt(me,ae),ae):s(me)==="object"&&(me=mt(_e(me,ae),ae)),me}function Oe(me,ae,ge){return typeof me=="string"?me=_e(mt(me,ge),ge):s(me)==="object"&&(me=_e(me,ge)),typeof ae=="string"?ae=_e(mt(ae,ge),ge):s(ae)==="object"&&(ae=_e(ae,ge)),me===ae}function ot(me,ae){return me&&me.toString().replace(!ae||!ae.iri?c.ESCAPE:f.ESCAPE,he)}function xt(me,ae){return me&&me.toString().replace(!ae||!ae.iri?c.PCT_ENCODED:f.PCT_ENCODED,ke)}var jt={scheme:"http",domainHost:!0,parse:function(ae,ge){return ae.host||(ae.error=ae.error||"HTTP URIs must have a host."),ae},serialize:function(ae,ge){var Le=String(ae.scheme).toLowerCase()==="https";return(ae.port===(Le?443:80)||ae.port==="")&&(ae.port=void 0),ae.path||(ae.path="/"),ae}},jn={scheme:"https",domainHost:jt.domainHost,parse:jt.parse,serialize:jt.serialize};function dr(me){return typeof me.secure=="boolean"?me.secure:String(me.scheme).toLowerCase()==="wss"}var Sr={scheme:"ws",domainHost:!0,parse:function(ae,ge){var Le=ae;return Le.secure=dr(Le),Le.resourceName=(Le.path||"/")+(Le.query?"?"+Le.query:""),Le.path=void 0,Le.query=void 0,Le},serialize:function(ae,ge){if((ae.port===(dr(ae)?443:80)||ae.port==="")&&(ae.port=void 0),typeof ae.secure=="boolean"&&(ae.scheme=ae.secure?"wss":"ws",ae.secure=void 0),ae.resourceName){var Le=ae.resourceName.split("?"),Me=d(Le,2),_t=Me[0],Ut=Me[1];ae.path=_t&&_t!=="/"?_t:void 0,ae.query=Ut,ae.resourceName=void 0}return ae.fragment=void 0,ae}},xi={scheme:"wss",domainHost:Sr.domainHost,parse:Sr.parse,serialize:Sr.serialize},Tn={},Un="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",hr="[0-9A-Fa-f]",gr=i(i("%[EFef]"+hr+"%"+hr+hr+"%"+hr+hr)+"|"+i("%[89A-Fa-f]"+hr+"%"+hr+hr)+"|"+i("%"+hr+hr)),Yo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",es="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",ds=r(es,'[\\"\\\\]'),Ns="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Ur=new RegExp(Un,"g"),hs=new RegExp(gr,"g"),Cc=new RegExp(r("[^]",Yo,"[\\.]",'[\\"]',ds),"g"),Ko=new RegExp(r("[^]",Un,Ns),"g"),Ou=Ko;function Lr(me){var ae=ke(me);return ae.match(Ur)?ae:me}var ki={scheme:"mailto",parse:function(ae,ge){var Le=ae,Me=Le.to=Le.path?Le.path.split(","):[];if(Le.path=void 0,Le.query){for(var _t=!1,Ut={},fn=Le.query.split("&"),Zn=0,ur=fn.length;Zn<ur;++Zn){var Pn=fn[Zn].split("=");switch(Pn[0]){case"to":for(var Tr=Pn[1].split(","),oi=0,on=Tr.length;oi<on;++oi)Me.push(Tr[oi]);break;case"subject":Le.subject=xt(Pn[1],ge);break;case"body":Le.body=xt(Pn[1],ge);break;default:_t=!0,Ut[xt(Pn[0],ge)]=xt(Pn[1],ge);break}}_t&&(Le.headers=Ut)}Le.query=void 0;for(var Cr=0,Xr=Me.length;Cr<Xr;++Cr){var yr=Me[Cr].split("@");if(yr[0]=xt(yr[0]),ge.unicodeSupport)yr[1]=xt(yr[1],ge).toLowerCase();else try{yr[1]=ue.toASCII(xt(yr[1],ge).toLowerCase())}catch(Di){Le.error=Le.error||"Email address's domain name can not be converted to ASCII via punycode: "+Di}Me[Cr]=yr.join("@")}return Le},serialize:function(ae,ge){var Le=ae,Me=a(ae.to);if(Me){for(var _t=0,Ut=Me.length;_t<Ut;++_t){var fn=String(Me[_t]),Zn=fn.lastIndexOf("@"),ur=fn.slice(0,Zn).replace(hs,Lr).replace(hs,o).replace(Cc,he),Pn=fn.slice(Zn+1);try{Pn=ge.iri?ue.toUnicode(Pn):ue.toASCII(xt(Pn,ge).toLowerCase())}catch(Cr){Le.error=Le.error||"Email address's domain name can not be converted to "+(ge.iri?"Unicode":"ASCII")+" via punycode: "+Cr}Me[_t]=ur+"@"+Pn}Le.path=Me.join(",")}var Tr=ae.headers=ae.headers||{};ae.subject&&(Tr.subject=ae.subject),ae.body&&(Tr.body=ae.body);var oi=[];for(var on in Tr)Tr[on]!==Tn[on]&&oi.push(on.replace(hs,Lr).replace(hs,o).replace(Ko,he)+"="+Tr[on].replace(hs,Lr).replace(hs,o).replace(Ou,he));return oi.length&&(Le.query=oi.join("&")),Le}},pi=/^([^\:]+)\:(.*)/,Xs={scheme:"urn",parse:function(ae,ge){var Le=ae.path&&ae.path.match(pi),Me=ae;if(Le){var _t=ge.scheme||Me.scheme||"urn",Ut=Le[1].toLowerCase(),fn=Le[2],Zn=_t+":"+(ge.nid||Ut),ur=we[Zn];Me.nid=Ut,Me.nss=fn,Me.path=void 0,ur&&(Me=ur.parse(Me,ge))}else Me.error=Me.error||"URN can not be parsed.";return Me},serialize:function(ae,ge){var Le=ge.scheme||ae.scheme||"urn",Me=ae.nid,_t=Le+":"+(ge.nid||Me),Ut=we[_t];Ut&&(ae=Ut.serialize(ae,ge));var fn=ae,Zn=ae.nss;return fn.path=(Me||ge.nid)+":"+Zn,fn}},si=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ri={scheme:"urn:uuid",parse:function(ae,ge){var Le=ae;return Le.uuid=Le.nss,Le.nss=void 0,!ge.tolerant&&(!Le.uuid||!Le.uuid.match(si))&&(Le.error=Le.error||"UUID is not valid."),Le},serialize:function(ae,ge){var Le=ae;return Le.nss=(ae.uuid||"").toLowerCase(),Le}};we[jt.scheme]=jt,we[jn.scheme]=jn,we[Sr.scheme]=Sr,we[xi.scheme]=xi,we[ki.scheme]=ki,we[Xs.scheme]=Xs,we[Ri.scheme]=Ri,n.SCHEMES=we,n.pctEncChar=he,n.pctDecChars=ke,n.parse=mt,n.removeDotSegments=Qe,n.serialize=_e,n.resolveComponents=kt,n.resolve=Rt,n.normalize=Ee,n.equal=Oe,n.escapeComponent=ot,n.unescapeComponent=xt,Object.defineProperty(n,"__esModule",{value:!0})})})(AK,AK.exports);var Vun=AK.exports;Object.defineProperty(oae,"__esModule",{value:!0});const T7e=Vun;T7e.code='require("ajv/dist/runtime/uri").default';oae.default=T7e;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Th;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=fr;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=hP,i=_C,s=C_,o=Hl,a=fr,u=Da,l=Po,c=Ft,f=zun,d=oae,h=(L,z)=>new RegExp(L,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function x(L){var z,W,F,V,J,ue,we,he,ke,Pe,rt,Re,St,Je,It,mt,Te,Fe,st,yt,Dt,Qe,_e,kt,Rt;const Ee=L.strict,Oe=(z=L.code)===null||z===void 0?void 0:z.optimize,ot=Oe===!0||Oe===void 0?1:Oe||0,xt=(F=(W=L.code)===null||W===void 0?void 0:W.regExp)!==null&&F!==void 0?F:h,jt=(V=L.uriResolver)!==null&&V!==void 0?V:d.default;return{strictSchema:(ue=(J=L.strictSchema)!==null&&J!==void 0?J:Ee)!==null&&ue!==void 0?ue:!0,strictNumbers:(he=(we=L.strictNumbers)!==null&&we!==void 0?we:Ee)!==null&&he!==void 0?he:!0,strictTypes:(Pe=(ke=L.strictTypes)!==null&&ke!==void 0?ke:Ee)!==null&&Pe!==void 0?Pe:"log",strictTuples:(Re=(rt=L.strictTuples)!==null&&rt!==void 0?rt:Ee)!==null&&Re!==void 0?Re:"log",strictRequired:(Je=(St=L.strictRequired)!==null&&St!==void 0?St:Ee)!==null&&Je!==void 0?Je:!1,code:L.code?{...L.code,optimize:ot,regExp:xt}:{optimize:ot,regExp:xt},loopRequired:(It=L.loopRequired)!==null&&It!==void 0?It:b,loopEnum:(mt=L.loopEnum)!==null&&mt!==void 0?mt:b,meta:(Te=L.meta)!==null&&Te!==void 0?Te:!0,messages:(Fe=L.messages)!==null&&Fe!==void 0?Fe:!0,inlineRefs:(st=L.inlineRefs)!==null&&st!==void 0?st:!0,schemaId:(yt=L.schemaId)!==null&&yt!==void 0?yt:"$id",addUsedSchema:(Dt=L.addUsedSchema)!==null&&Dt!==void 0?Dt:!0,validateSchema:(Qe=L.validateSchema)!==null&&Qe!==void 0?Qe:!0,validateFormats:(_e=L.validateFormats)!==null&&_e!==void 0?_e:!0,unicodeRegExp:(kt=L.unicodeRegExp)!==null&&kt!==void 0?kt:!0,int32range:(Rt=L.int32range)!==null&&Rt!==void 0?Rt:!0,uriResolver:jt}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...x(z)};const{es5:W,lines:F}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:F}),this.logger=M(z.logger);const V=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),S.call(this,g,z,"NOT SUPPORTED"),S.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=k.call(this),z.formats&&I.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&D.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),C.call(this),z.validateFormats=V}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:F}=this.opts;let V=f;F==="id"&&(V={...f},V.id=V.$id,delete V.$id),W&&z&&this.addMetaSchema(V,V[F],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let F;if(typeof z=="string"){if(F=this.getSchema(z),!F)throw new Error(`no schema with key or ref "${z}"`)}else F=this.compile(z);const V=F(W);return"$async"in F||(this.errors=F.errors),V}compile(z,W){const F=this._addSchema(z,W);return F.validate||this._compileSchemaEnv(F)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:F}=this.opts;return V.call(this,z,W);async function V(Pe,rt){await J.call(this,Pe.$schema);const Re=this._addSchema(Pe,rt);return Re.validate||ue.call(this,Re)}async function J(Pe){Pe&&!this.getSchema(Pe)&&await V.call(this,{$ref:Pe},!0)}async function ue(Pe){try{return this._compileSchemaEnv(Pe)}catch(rt){if(!(rt instanceof i.default))throw rt;return we.call(this,rt),await he.call(this,rt.missingSchema),ue.call(this,Pe)}}function we({missingSchema:Pe,missingRef:rt}){if(this.refs[Pe])throw new Error(`AnySchema ${Pe} is loaded but ${rt} cannot be resolved`)}async function he(Pe){const rt=await ke.call(this,Pe);this.refs[Pe]||await J.call(this,rt.$schema),this.refs[Pe]||this.addSchema(rt,Pe,W)}async function ke(Pe){const rt=this._loading[Pe];if(rt)return rt;try{return await(this._loading[Pe]=F(Pe))}finally{delete this._loading[Pe]}}}addSchema(z,W,F,V=this.opts.validateSchema){if(Array.isArray(z)){for(const ue of z)this.addSchema(ue,void 0,F,V);return this}let J;if(typeof z=="object"){const{schemaId:ue}=this.opts;if(J=z[ue],J!==void 0&&typeof J!="string")throw new Error(`schema ${ue} must be string`)}return W=(0,u.normalizeId)(W||J),this._checkUnique(W),this.schemas[W]=this._addSchema(z,F,W,V,!0),this}addMetaSchema(z,W,F=this.opts.validateSchema){return this.addSchema(z,W,!0,F),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let F;if(F=z.$schema,F!==void 0&&typeof F!="string")throw new Error("$schema must be a string");if(F=F||this.opts.defaultMeta||this.defaultMeta(),!F)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const V=this.validate(F,z);if(!V&&W){const J="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(J);else throw new Error(J)}return V}getSchema(z){let W;for(;typeof(W=T.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:F}=this.opts,V=new o.SchemaEnv({schema:{},schemaId:F});if(W=o.resolveSchema.call(this,V,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=T.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let F=z[this.opts.schemaId];return F&&(F=(0,u.normalizeId)(F),delete this.schemas[F],delete this.refs[F]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let F;if(typeof z=="string")F=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=F);else if(typeof z=="object"&&W===void 0){if(W=z,F=W.keyword,Array.isArray(F)&&!F.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(B.call(this,F,W),!W)return(0,c.eachItem)(F,J=>q.call(this,J)),this;Y.call(this,W);const V={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(F,V.type.length===0?J=>q.call(this,J,V):J=>V.type.forEach(ue=>q.call(this,J,V,ue))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const F of W.rules){const V=F.rules.findIndex(J=>J.keyword===z);V>=0&&F.rules.splice(V,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:F="data"}={}){return!z||z.length===0?"No errors":z.map(V=>`${F}${V.instancePath} ${V.message}`).reduce((V,J)=>V+W+J)}$dataMetaSchema(z,W){const F=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const V of W){const J=V.split("/").slice(1);let ue=z;for(const we of J)ue=ue[we];for(const we in F){const he=F[we];if(typeof he!="object")continue;const{$data:ke}=he.definition,Pe=ue[we];ke&&Pe&&(ue[we]=Q(Pe))}}return z}_removeAllSchemas(z,W){for(const F in z){const V=z[F];(!W||W.test(F))&&(typeof V=="string"?delete z[F]:V&&!V.meta&&(this._cache.delete(V.schema),delete z[F]))}}_addSchema(z,W,F,V=this.opts.validateSchema,J=this.opts.addUsedSchema){let ue;const{schemaId:we}=this.opts;if(typeof z=="object")ue=z[we];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let he=this._cache.get(z);if(he!==void 0)return he;F=(0,u.normalizeId)(ue||F);const ke=u.getSchemaRefs.call(this,z,F);return he=new o.SchemaEnv({schema:z,schemaId:we,meta:W,baseId:F,localRefs:ke}),this._cache.set(he.schema,he),J&&!F.startsWith("#")&&(F&&this._checkUnique(F),this.refs[F]=he),V&&this.validateSchema(z,!0),he}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function S(L,z,W,F="error"){for(const V in L){const J=V;J in z&&this.logger[F](`${W}: option ${V}. ${L[J]}`)}}function T(L){return L=(0,u.normalizeId)(L),this.schemas[L]||this.refs[L]}function C(){const L=this.opts.schemas;if(L)if(Array.isArray(L))this.addSchema(L);else for(const z in L)this.addSchema(L[z],z)}function I(){for(const L in this.opts.formats){const z=this.opts.formats[L];z&&this.addFormat(L,z)}}function D(L){if(Array.isArray(L)){this.addVocabulary(L);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in L){const W=L[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function k(){const L={...this.opts};for(const z of p)delete L[z];return L}const P={log(){},warn(){},error(){}};function M(L){if(L===!1)return P;if(L===void 0)return console;if(L.log&&L.warn&&L.error)return L;throw new Error("logger must implement log, warn and error methods")}const $=/^[a-z_$][a-z0-9_$:-]*$/i;function B(L,z){const{RULES:W}=this;if((0,c.eachItem)(L,F=>{if(W.keywords[F])throw new Error(`Keyword ${F} is already defined`);if(!$.test(F))throw new Error(`Keyword ${F} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function q(L,z,W){var F;const V=z==null?void 0:z.post;if(W&&V)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:J}=this;let ue=V?J.post:J.rules.find(({type:he})=>he===W);if(ue||(ue={type:W,rules:[]},J.rules.push(ue)),J.keywords[L]=!0,!z)return;const we={keyword:L,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?H.call(this,ue,we,z.before):ue.rules.push(we),J.all[L]=we,(F=z.implements)===null||F===void 0||F.forEach(he=>this.addKeyword(he))}function H(L,z,W){const F=L.rules.findIndex(V=>V.keyword===W);F>=0?L.rules.splice(F,0,z):(L.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function Y(L){let{metaSchema:z}=L;z!==void 0&&(L.$data&&this.opts.$data&&(z=Q(z)),L.validateSchema=this.compile(z,!0))}const K={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function Q(L){return{anyOf:[L,K]}}})(Gje);var aae={},uae={},lae={};Object.defineProperty(lae,"__esModule",{value:!0});const Hun={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};lae.default=Hun;var A_={};Object.defineProperty(A_,"__esModule",{value:!0});A_.callRef=A_.getValidate=void 0;const qun=_C,u_e=lr,Pl=fr,pE=Hm,l_e=Hl,YO=Ft,Wun={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=l_e.resolveRef.call(u,l,i,n);if(c===void 0)throw new qun.default(r.opts.uriResolver,i,n);if(c instanceof l_e.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return E6(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return E6(e,(0,Pl._)`${p}.validate`,l,l.$async)}function d(p){const m=C7e(e,p);E6(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Pl.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Pl.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function C7e(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Pl._)`${n.scopeValue("wrapper",{ref:t})}.validate`}A_.getValidate=C7e;function E6(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?pE.default.this:Pl.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Pl._)`await ${(0,u_e.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Pl._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,u_e.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Pl._)`${p}.errors`;i.assign(pE.default.vErrors,(0,Pl._)`${pE.default.vErrors} === null ? ${m} : ${pE.default.vErrors}.concat(${m})`),i.assign(pE.default.errors,(0,Pl._)`${pE.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=YO.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Pl._)`${p}.evaluated.props`);s.props=YO.mergeEvaluated.props(i,y,s.props,Pl.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=YO.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Pl._)`${p}.evaluated.items`);s.items=YO.mergeEvaluated.items(i,y,s.items,Pl.Name)}}}A_.callRef=E6;A_.default=Wun;Object.defineProperty(uae,"__esModule",{value:!0});const Gun=lae,Yun=A_,Kun=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Gun.default,Yun.default];uae.default=Kun;var cae={},fae={};Object.defineProperty(fae,"__esModule",{value:!0});const tF=fr,xy=tF.operators,nF={maximum:{okStr:"<=",ok:xy.LTE,fail:xy.GT},minimum:{okStr:">=",ok:xy.GTE,fail:xy.LT},exclusiveMaximum:{okStr:"<",ok:xy.LT,fail:xy.GTE},exclusiveMinimum:{okStr:">",ok:xy.GT,fail:xy.LTE}},Xun={message:({keyword:e,schemaCode:t})=>(0,tF.str)`must be ${nF[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,tF._)`{comparison: ${nF[e].okStr}, limit: ${t}}`},Qun={keyword:Object.keys(nF),type:"number",schemaType:"number",$data:!0,error:Xun,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,tF._)`${n} ${nF[t].fail} ${r} || isNaN(${n})`)}};fae.default=Qun;var dae={};Object.defineProperty(dae,"__esModule",{value:!0});const Dk=fr,Jun={message:({schemaCode:e})=>(0,Dk.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Dk._)`{multipleOf: ${e}}`},Zun={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Jun,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,Dk._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,Dk._)`${o} !== parseInt(${o})`;e.fail$data((0,Dk._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};dae.default=Zun;var hae={},pae={};Object.defineProperty(pae,"__esModule",{value:!0});function A7e(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}pae.default=A7e;A7e.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(hae,"__esModule",{value:!0});const ox=fr,eln=Ft,tln=pae,nln={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,ox.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,ox._)`{limit: ${e}}`},rln={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:nln,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?ox.operators.GT:ox.operators.LT,o=i.opts.unicode===!1?(0,ox._)`${n}.length`:(0,ox._)`${(0,eln.useFunc)(e.gen,tln.default)}(${n})`;e.fail$data((0,ox._)`${o} ${s} ${r}`)}};hae.default=rln;var mae={};Object.defineProperty(mae,"__esModule",{value:!0});const iln=lr,rF=fr,sln={message:({schemaCode:e})=>(0,rF.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,rF._)`{pattern: ${e}}`},oln={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:sln,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,rF._)`(new RegExp(${i}, ${o}))`:(0,iln.usePattern)(e,r);e.fail$data((0,rF._)`!${a}.test(${t})`)}};mae.default=oln;var gae={};Object.defineProperty(gae,"__esModule",{value:!0});const Nk=fr,aln={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,Nk.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,Nk._)`{limit: ${e}}`},uln={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:aln,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?Nk.operators.GT:Nk.operators.LT;e.fail$data((0,Nk._)`Object.keys(${n}).length ${i} ${r}`)}};gae.default=uln;var yae={};Object.defineProperty(yae,"__esModule",{value:!0});const VA=lr,Pk=fr,lln=Ft,cln={message:({params:{missingProperty:e}})=>(0,Pk.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,Pk._)`{missingProperty: ${e}}`},fln={keyword:"required",type:"object",schemaType:"array",$data:!0,error:cln,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,lln.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(Pk.nil,f);else for(const h of n)(0,VA.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,VA.checkMissingProp)(e,n,h)),(0,VA.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,VA.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,VA.propertyInData)(t,i,h,a.ownProperties)),t.if((0,Pk.not)(p),()=>{e.error(),t.break()})},Pk.nil)}}};yae.default=fln;var vae={};Object.defineProperty(vae,"__esModule",{value:!0});const Ok=fr,dln={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,Ok.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,Ok._)`{limit: ${e}}`},hln={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:dln,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?Ok.operators.GT:Ok.operators.LT;e.fail$data((0,Ok._)`${n}.length ${i} ${r}`)}};vae.default=hln;var bae={},pP={};Object.defineProperty(pP,"__esModule",{value:!0});const I7e=AZ;I7e.code='require("ajv/dist/runtime/equal").default';pP.default=I7e;Object.defineProperty(bae,"__esModule",{value:!0});const eH=Po,Ta=fr,pln=Ft,mln=pP,gln={message:({params:{i:e,j:t}})=>(0,Ta.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Ta._)`{i: ${e}, j: ${t}}`},yln={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:gln,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,eH.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Ta._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Ta._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Ta._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,eH.checkDataTypes)(l,g,a.opts.strictNumbers,eH.DataType.Wrong),b=t.const("indices",(0,Ta._)`{}`);t.for((0,Ta._)`;${p}--;`,()=>{t.let(g,(0,Ta._)`${n}[${p}]`),t.if(y,(0,Ta._)`continue`),l.length>1&&t.if((0,Ta._)`typeof ${g} == "string"`,(0,Ta._)`${g} += "_"`),t.if((0,Ta._)`typeof ${b}[${g}] == "number"`,()=>{t.assign(m,(0,Ta._)`${b}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Ta._)`${b}[${g}] = ${p}`)})}function h(p,m){const g=(0,pln.useFunc)(t,mln.default),y=t.name("outer");t.label(y).for((0,Ta._)`;${p}--;`,()=>t.for((0,Ta._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Ta._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};bae.default=yln;var xae={};Object.defineProperty(xae,"__esModule",{value:!0});const IK=fr,vln=Ft,bln=pP,xln={message:"must be equal to constant",params:({schemaCode:e})=>(0,IK._)`{allowedValue: ${e}}`},_ln={keyword:"const",$data:!0,error:xln,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,IK._)`!${(0,vln.useFunc)(t,bln.default)}(${n}, ${i})`):e.fail((0,IK._)`${s} !== ${n}`)}};xae.default=_ln;var _ae={};Object.defineProperty(_ae,"__esModule",{value:!0});const MI=fr,wln=Ft,Eln=pP,Sln={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,MI._)`{allowedValues: ${e}}`},Tln={keyword:"enum",schemaType:"array",$data:!0,error:Sln,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,wln.useFunc)(t,Eln.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,MI.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,MI._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,MI._)`${l()}(${n}, ${h}[${p}])`:(0,MI._)`${n} === ${m}`}}};_ae.default=Tln;Object.defineProperty(cae,"__esModule",{value:!0});const Cln=fae,Aln=dae,Iln=hae,kln=mae,Rln=gae,Dln=yae,Nln=vae,Pln=bae,Oln=xae,$ln=_ae,Mln=[Cln.default,Aln.default,Iln.default,kln.default,Rln.default,Dln.default,Nln.default,Pln.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Oln.default,$ln.default];cae.default=Mln;var wae={},wC={};Object.defineProperty(wC,"__esModule",{value:!0});wC.validateAdditionalItems=void 0;const ax=fr,kK=Ft,Lln={message:({params:{len:e}})=>(0,ax.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ax._)`{limit: ${e}}`},Fln={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Lln,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,kK.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}k7e(e,r)}};function k7e(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,ax._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,ax._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,kK.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,ax._)`${a} <= ${t.length}`);n.if((0,ax.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:kK.Type.Num},l),o.allErrors||n.if((0,ax.not)(l),()=>n.break())})}}wC.validateAdditionalItems=k7e;wC.default=Fln;var Eae={},EC={};Object.defineProperty(EC,"__esModule",{value:!0});EC.validateTuple=void 0;const c_e=fr,S6=Ft,Bln=lr,jln={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return R7e(e,"additionalItems",t);n.items=!0,!(0,S6.alwaysValidSchema)(n,t)&&e.ok((0,Bln.validateArray)(e))}};function R7e(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=S6.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,c_e._)`${s}.length`);n.forEach((f,d)=>{(0,S6.alwaysValidSchema)(a,f)||(r.if((0,c_e._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,S6.checkStrictMode)(a,g,d.strictTuples)}}}EC.validateTuple=R7e;EC.default=jln;Object.defineProperty(Eae,"__esModule",{value:!0});const Uln=EC,zln={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Uln.validateTuple)(e,"items")};Eae.default=zln;var Sae={};Object.defineProperty(Sae,"__esModule",{value:!0});const f_e=fr,Vln=Ft,Hln=lr,qln=wC,Wln={message:({params:{len:e}})=>(0,f_e.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,f_e._)`{limit: ${e}}`},Gln={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Wln,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,Vln.alwaysValidSchema)(r,t)&&(i?(0,qln.validateAdditionalItems)(e,i):e.ok((0,Hln.validateArray)(e)))}};Sae.default=Gln;var Tae={};Object.defineProperty(Tae,"__esModule",{value:!0});const Uf=fr,KO=Ft,Yln={message:({params:{min:e,max:t}})=>t===void 0?(0,Uf.str)`must contain at least ${e} valid item(s)`:(0,Uf.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Uf._)`{minContains: ${e}}`:(0,Uf._)`{minContains: ${e}, maxContains: ${t}}`},Kln={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Yln,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,Uf._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,KO.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,KO.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,KO.alwaysValidSchema)(s,n)){let m=(0,Uf._)`${c} >= ${o}`;a!==void 0&&(m=(0,Uf._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,Uf._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:KO.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Uf._)`${m}++`),a===void 0?t.if((0,Uf._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,Uf._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,Uf._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};Tae.default=Kln;var D7e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=fr,n=Ft,r=lr;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(D7e);var Cae={};Object.defineProperty(Cae,"__esModule",{value:!0});const N7e=fr,Xln=Ft,Qln={message:"property name must be valid",params:({params:e})=>(0,N7e._)`{propertyName: ${e.propertyName}}`},Jln={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Qln,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Xln.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,N7e.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};Cae.default=Jln;var T9={};Object.defineProperty(T9,"__esModule",{value:!0});const XO=lr,qd=fr,Zln=Hm,QO=Ft,ecn={message:"must NOT have additional properties",params:({params:e})=>(0,qd._)`{additionalProperty: ${e.additionalProperty}}`},tcn={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:ecn,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,QO.alwaysValidSchema)(o,n))return;const l=(0,XO.allSchemaProperties)(r.properties),c=(0,XO.allSchemaProperties)(r.patternProperties);f(),e.ok((0,qd._)`${s} === ${Zln.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const b=(0,QO.schemaRefOrVal)(o,r.properties,"properties");y=(0,XO.isOwnProperty)(t,b,g)}else l.length?y=(0,qd.or)(...l.map(b=>(0,qd._)`${g} === ${b}`)):y=qd.nil;return c.length&&(y=(0,qd.or)(y,...c.map(b=>(0,qd._)`${(0,XO.usePattern)(e,b)}.test(${g})`))),(0,qd.not)(y)}function h(g){t.code((0,qd._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,QO.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,qd.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,qd.not)(y),()=>t.break()))}}function m(g,y,b){const x={keyword:"additionalProperties",dataProp:g,dataPropType:QO.Type.Str};b===!1&&Object.assign(x,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(x,y)}}};T9.default=tcn;var Aae={};Object.defineProperty(Aae,"__esModule",{value:!0});const ncn=Th,d_e=lr,tH=Ft,h_e=T9,rcn={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&h_e.default.code(new ncn.KeywordCxt(s,h_e.default,"additionalProperties"));const o=(0,d_e.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=tH.mergeEvaluated.props(t,(0,tH.toHash)(o),s.props));const a=o.filter(f=>!(0,tH.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,d_e.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};Aae.default=rcn;var Iae={};Object.defineProperty(Iae,"__esModule",{value:!0});const p_e=lr,JO=fr,m_e=Ft,g_e=Ft,icn={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,p_e.allSchemaProperties)(n),u=a.filter(m=>(0,m_e.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof JO.Name)&&(s.props=(0,g_e.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,m_e.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,JO._)`${(0,p_e.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:g_e.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,JO._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,JO.not)(c),()=>t.break())})})}}};Iae.default=icn;var kae={};Object.defineProperty(kae,"__esModule",{value:!0});const scn=Ft,ocn={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,scn.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};kae.default=ocn;var Rae={};Object.defineProperty(Rae,"__esModule",{value:!0});const acn=lr,ucn={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:acn.validateUnion,error:{message:"must match a schema in anyOf"}};Rae.default=ucn;var Dae={};Object.defineProperty(Dae,"__esModule",{value:!0});const T6=fr,lcn=Ft,ccn={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,T6._)`{passingSchemas: ${e.passing}}`},fcn={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:ccn,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,lcn.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,T6._)`${u} && ${o}`).assign(o,!1).assign(a,(0,T6._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,T6.Name)})})}}};Dae.default=fcn;var Nae={};Object.defineProperty(Nae,"__esModule",{value:!0});const dcn=Ft,hcn={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,dcn.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};Nae.default=hcn;var Pae={};Object.defineProperty(Pae,"__esModule",{value:!0});const iF=fr,P7e=Ft,pcn={message:({params:e})=>(0,iF.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,iF._)`{failingKeyword: ${e.ifClause}}`},mcn={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:pcn,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,P7e.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=y_e(r,"then"),s=y_e(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,iF.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,iF._)`${c}`):e.setParams({ifClause:c})}}}};function y_e(e,t){const n=e.schema[t];return n!==void 0&&!(0,P7e.alwaysValidSchema)(e,n)}Pae.default=mcn;var Oae={};Object.defineProperty(Oae,"__esModule",{value:!0});const gcn=Ft,ycn={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,gcn.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};Oae.default=ycn;Object.defineProperty(wae,"__esModule",{value:!0});const vcn=wC,bcn=Eae,xcn=EC,_cn=Sae,wcn=Tae,Ecn=D7e,Scn=Cae,Tcn=T9,Ccn=Aae,Acn=Iae,Icn=kae,kcn=Rae,Rcn=Dae,Dcn=Nae,Ncn=Pae,Pcn=Oae;function Ocn(e=!1){const t=[Icn.default,kcn.default,Rcn.default,Dcn.default,Ncn.default,Pcn.default,Scn.default,Tcn.default,Ecn.default,Ccn.default,Acn.default];return e?t.push(bcn.default,_cn.default):t.push(vcn.default,xcn.default),t.push(wcn.default),t}wae.default=Ocn;var $ae={},Mae={};Object.defineProperty(Mae,"__esModule",{value:!0});const eo=fr,$cn={message:({schemaCode:e})=>(0,eo.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,eo._)`{format: ${e}}`},Mcn={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:$cn,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,eo._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,eo._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,eo._)`${m}.type || "string"`).assign(y,(0,eo._)`${m}.validate`),()=>n.assign(g,(0,eo._)`"string"`).assign(y,m)),e.fail$data((0,eo.or)(b(),x()));function b(){return u.strictSchema===!1?eo.nil:(0,eo._)`${o} && !${y}`}function x(){const w=c.$async?(0,eo._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,eo._)`${y}(${r})`,S=(0,eo._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,eo._)`${y} && ${y} !== true && ${g} === ${t} && !${S}`}}function h(){const p=f.formats[s];if(!p){b();return}if(p===!0)return;const[m,g,y]=x(p);m===t&&e.pass(w());function b(){if(u.strictSchema===!1){f.logger.warn(S());return}throw new Error(S());function S(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function x(S){const T=S instanceof RegExp?(0,eo.regexpCode)(S):u.code.formats?(0,eo._)`${u.code.formats}${(0,eo.getProperty)(s)}`:void 0,C=n.scopeValue("formats",{key:s,ref:S,code:T});return typeof S=="object"&&!(S instanceof RegExp)?[S.type||"string",S.validate,(0,eo._)`${C}.validate`]:["string",S,C]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,eo._)`await ${y}(${r})`}return typeof g=="function"?(0,eo._)`${y}(${r})`:(0,eo._)`${y}.test(${r})`}}}};Mae.default=Mcn;Object.defineProperty($ae,"__esModule",{value:!0});const Lcn=Mae,Fcn=[Lcn.default];$ae.default=Fcn;var n2={};Object.defineProperty(n2,"__esModule",{value:!0});n2.contentVocabulary=n2.metadataVocabulary=void 0;n2.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];n2.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(aae,"__esModule",{value:!0});const Bcn=uae,jcn=cae,Ucn=wae,zcn=$ae,v_e=n2,Vcn=[Bcn.default,jcn.default,(0,Ucn.default)(),zcn.default,v_e.metadataVocabulary,v_e.contentVocabulary];aae.default=Vcn;var Lae={},C9={};Object.defineProperty(C9,"__esModule",{value:!0});C9.DiscrError=void 0;var b_e;(function(e){e.Tag="tag",e.Mapping="mapping"})(b_e||(C9.DiscrError=b_e={}));Object.defineProperty(Lae,"__esModule",{value:!0});const CE=fr,RK=C9,x_e=Hl,Hcn=_C,qcn=Ft,Wcn={message:({params:{discrError:e,tagName:t}})=>e===RK.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,CE._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},Gcn={keyword:"discriminator",type:"object",schemaType:"object",error:Wcn,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,CE._)`${n}${(0,CE.getProperty)(a)}`);t.if((0,CE._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:RK.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,CE._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:RK.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,CE.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let S=o[w];if(S!=null&&S.$ref&&!(0,qcn.schemaHasRulesButRef)(S,s.self.RULES)){const C=S.$ref;if(S=x_e.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,C),S instanceof x_e.SchemaEnv&&(S=S.schema),S===void 0)throw new Hcn.default(s.opts.uriResolver,s.baseId,C)}const T=(h=S==null?void 0:S.properties)===null||h===void 0?void 0:h[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(S)),b(T,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function b(w,S){if(w.const)x(w.const,S);else if(w.enum)for(const T of w.enum)x(T,S);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function x(w,S){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=S}}}};Lae.default=Gcn;const Ycn="http://json-schema.org/draft-07/schema#",Kcn="http://json-schema.org/draft-07/schema#",Xcn="Core schema meta-schema",Qcn={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Jcn=["object","boolean"],Zcn={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},efn={$schema:Ycn,$id:Kcn,title:Xcn,definitions:Qcn,type:Jcn,properties:Zcn,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Gje,r=aae,i=Lae,s=efn,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Th;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=fr;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=hP;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=_C;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(wK,wK.exports);var tfn=wK.exports;const Fae=Cm(tfn),nfn="#/definitions/StudyConfig",rfn="http://json-schema.org/draft-07/schema#",ifn={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc2/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc2/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc2/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},importedLibraries:{description:"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.",items:{type:"string"},type:"array"},recordStudyAudio:{description:"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.",type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},timeoutReject:{description:"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.",type:"boolean"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},sfn={$ref:nfn,$schema:rfn,definitions:ifn},ofn="#/definitions/GlobalConfig",afn="http://json-schema.org/draft-07/schema#",ufn={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},lfn={$ref:ofn,$schema:afn,definitions:ufn};var sF={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */sF.exports;(function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,y=2,b=4,x=8,w=16,S=32,T=64,C=128,I=256,D=512,k=30,P="...",M=800,$=16,B=1,q=2,H=3,Y=1/0,K=9007199254740991,Q=17976931348623157e292,L=NaN,z=4294967295,W=z-1,F=z>>>1,V=[["ary",C],["bind",g],["bindKey",y],["curry",x],["curryRight",w],["flip",D],["partial",S],["partialRight",T],["rearg",I]],J="[object Arguments]",ue="[object Array]",we="[object AsyncFunction]",he="[object Boolean]",ke="[object Date]",Pe="[object DOMException]",rt="[object Error]",Re="[object Function]",St="[object GeneratorFunction]",Je="[object Map]",It="[object Number]",mt="[object Null]",Te="[object Object]",Fe="[object Promise]",st="[object Proxy]",yt="[object RegExp]",Dt="[object Set]",Qe="[object String]",_e="[object Symbol]",kt="[object Undefined]",Rt="[object WeakMap]",Ee="[object WeakSet]",Oe="[object ArrayBuffer]",ot="[object DataView]",xt="[object Float32Array]",jt="[object Float64Array]",jn="[object Int8Array]",dr="[object Int16Array]",Sr="[object Int32Array]",xi="[object Uint8Array]",Tn="[object Uint8ClampedArray]",Un="[object Uint16Array]",hr="[object Uint32Array]",gr=/\b__p \+= '';/g,Yo=/\b(__p \+=) '' \+/g,es=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ds=/&(?:amp|lt|gt|quot|#39);/g,Ns=/[&<>"']/g,Ur=RegExp(ds.source),hs=RegExp(Ns.source),Cc=/<%-([\s\S]+?)%>/g,Ko=/<%([\s\S]+?)%>/g,Ou=/<%=([\s\S]+?)%>/g,Lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ki=/^\w*$/,pi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xs=/[\\^$.*+?()[\]{}|]/g,si=RegExp(Xs.source),Ri=/^\s+/,me=/\s/,ae=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ge=/\{\n\/\* \[wrapped with (.+)\] \*/,Le=/,? & /,Me=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,_t=/[()=,{}\[\]\/\s]/,Ut=/\\(\\)?/g,fn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zn=/\w*$/,ur=/^[-+]0x[0-9a-f]+$/i,Pn=/^0b[01]+$/i,Tr=/^\[object .+?Constructor\]$/,oi=/^0o[0-7]+$/i,on=/^(?:0|[1-9]\d*)$/,Cr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xr=/($^)/,yr=/['\n\r\u2028\u2029\\]/g,Di="\\ud800-\\udfff",po="\\u0300-\\u036f",Ni="\\ufe20-\\ufe2f",So="\\u20d0-\\u20ff",ts=po+Ni+So,ns="\\u2700-\\u27bf",To="a-z\\xdf-\\xf6\\xf8-\\xff",xa="\\xac\\xb1\\xd7\\xf7",mo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",wl="\\u2000-\\u206f",Ef=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ee="A-Z\\xc0-\\xd6\\xd8-\\xde",pe="\\ufe0e\\ufe0f",se=xa+mo+wl+Ef,xe="[']",Ce="["+Di+"]",be="["+se+"]",He="["+ts+"]",it="\\d+",at="["+ns+"]",ut="["+To+"]",vt="[^"+Di+se+it+ns+To+ee+"]",Mt="\\ud83c[\\udffb-\\udfff]",On="(?:"+He+"|"+Mt+")",Kt="[^"+Di+"]",er="(?:\\ud83c[\\udde6-\\uddff]){2}",zr="[\\ud800-\\udbff][\\udc00-\\udfff]",vr="["+ee+"]",Co="\\u200d",Ac="(?:"+ut+"|"+vt+")",Ad="(?:"+vr+"|"+vt+")",iy="(?:"+xe+"(?:d|ll|m|re|s|t|ve))?",ep="(?:"+xe+"(?:D|LL|M|RE|S|T|VE))?",rb=On+"?",$u="["+pe+"]?",Ga="(?:"+Co+"(?:"+[Kt,er,zr].join("|")+")"+$u+rb+")*",Id="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sy="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",ib=$u+rb+Ga,kd="(?:"+[at,er,zr].join("|")+")"+ib,sb="(?:"+[Kt+He+"?",He,er,zr,Ce].join("|")+")",ww=RegExp(xe,"g"),Rd=RegExp(He,"g"),Xo=RegExp(Mt+"(?="+Mt+")|"+sb+ib,"g"),DC=RegExp([vr+"?"+ut+"+"+iy+"(?="+[be,vr,"$"].join("|")+")",Ad+"+"+ep+"(?="+[be,vr+Ac,"$"].join("|")+")",vr+"?"+Ac+"+"+iy,vr+"+"+ep,sy,Id,it,kd].join("|"),"g"),Ew=RegExp("["+Co+Di+ts+pe+"]"),Wm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Gm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Sw=-1,Vr={};Vr[xt]=Vr[jt]=Vr[jn]=Vr[dr]=Vr[Sr]=Vr[xi]=Vr[Tn]=Vr[Un]=Vr[hr]=!0,Vr[J]=Vr[ue]=Vr[Oe]=Vr[he]=Vr[ot]=Vr[ke]=Vr[rt]=Vr[Re]=Vr[Je]=Vr[It]=Vr[Te]=Vr[yt]=Vr[Dt]=Vr[Qe]=Vr[Rt]=!1;var Ar={};Ar[J]=Ar[ue]=Ar[Oe]=Ar[ot]=Ar[he]=Ar[ke]=Ar[xt]=Ar[jt]=Ar[jn]=Ar[dr]=Ar[Sr]=Ar[Je]=Ar[It]=Ar[Te]=Ar[yt]=Ar[Dt]=Ar[Qe]=Ar[_e]=Ar[xi]=Ar[Tn]=Ar[Un]=Ar[hr]=!0,Ar[rt]=Ar[Re]=Ar[Rt]=!1;var Tw={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},le={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ye={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=parseFloat,ir=parseInt,Hr=typeof Jt=="object"&&Jt&&Jt.Object===Object&&Jt,_i=typeof self=="object"&&self&&self.Object===Object&&self,an=Hr||_i||Function("return this")(),ai=t&&!t.nodeType&&t,wi=ai&&!0&&e&&!e.nodeType&&e,Ao=wi&&wi.exports===ai,Dd=Ao&&Hr.process,Ps=function(){try{var Se=wi&&wi.require&&wi.require("util").types;return Se||Dd&&Dd.binding&&Dd.binding("util")}catch{}}(),Ym=Ps&&Ps.isArrayBuffer,Km=Ps&&Ps.isDate,ob=Ps&&Ps.isMap,NC=Ps&&Ps.isRegExp,ab=Ps&&Ps.isSet,NP=Ps&&Ps.isTypedArray;function Ya(Se,Ge,je){switch(je.length){case 0:return Se.call(Ge);case 1:return Se.call(Ge,je[0]);case 2:return Se.call(Ge,je[0],je[1]);case 3:return Se.call(Ge,je[0],je[1],je[2])}return Se.apply(Ge,je)}function ub(Se,Ge,je,zt){for(var Ln=-1,li=Se==null?0:Se.length;++Ln<li;){var ko=Se[Ln];Ge(zt,ko,je(ko),Se)}return zt}function Mu(Se,Ge){for(var je=-1,zt=Se==null?0:Se.length;++je<zt&&Ge(Se[je],je,Se)!==!1;);return Se}function PP(Se,Ge){for(var je=Se==null?0:Se.length;je--&&Ge(Se[je],je,Se)!==!1;);return Se}function Cw(Se,Ge){for(var je=-1,zt=Se==null?0:Se.length;++je<zt;)if(!Ge(Se[je],je,Se))return!1;return!0}function Sf(Se,Ge){for(var je=-1,zt=Se==null?0:Se.length,Ln=0,li=[];++je<zt;){var ko=Se[je];Ge(ko,je,Se)&&(li[Ln++]=ko)}return li}function lb(Se,Ge){var je=Se==null?0:Se.length;return!!je&&Xm(Se,Ge,0)>-1}function oy(Se,Ge,je){for(var zt=-1,Ln=Se==null?0:Se.length;++zt<Ln;)if(je(Ge,Se[zt]))return!0;return!1}function zi(Se,Ge){for(var je=-1,zt=Se==null?0:Se.length,Ln=Array(zt);++je<zt;)Ln[je]=Ge(Se[je],je,Se);return Ln}function Nd(Se,Ge){for(var je=-1,zt=Ge.length,Ln=Se.length;++je<zt;)Se[Ln+je]=Ge[je];return Se}function Pd(Se,Ge,je,zt){var Ln=-1,li=Se==null?0:Se.length;for(zt&&li&&(je=Se[++Ln]);++Ln<li;)je=Ge(je,Se[Ln],Ln,Se);return je}function OP(Se,Ge,je,zt){var Ln=Se==null?0:Se.length;for(zt&&Ln&&(je=Se[--Ln]);Ln--;)je=Ge(je,Se[Ln],Ln,Se);return je}function Aw(Se,Ge){for(var je=-1,zt=Se==null?0:Se.length;++je<zt;)if(Ge(Se[je],je,Se))return!0;return!1}var $P=G("length");function MP(Se){return Se.split("")}function Iw(Se){return Se.match(Me)||[]}function Ka(Se,Ge,je){var zt;return je(Se,function(Ln,li,ko){if(Ge(Ln,li,ko))return zt=li,!1}),zt}function cb(Se,Ge,je,zt){for(var Ln=Se.length,li=je+(zt?1:-1);zt?li--:++li<Ln;)if(Ge(Se[li],li,Se))return li;return-1}function Xm(Se,Ge,je){return Ge===Ge?UVe(Se,Ge,je):cb(Se,A,je)}function ay(Se,Ge,je,zt){for(var Ln=je-1,li=Se.length;++Ln<li;)if(zt(Se[Ln],Ge))return Ln;return-1}function A(Se){return Se!==Se}function j(Se,Ge){var je=Se==null?0:Se.length;return je?At(Se,Ge)/je:L}function G(Se){return function(Ge){return Ge==null?n:Ge[Se]}}function ne(Se){return function(Ge){return Se==null?n:Se[Ge]}}function De(Se,Ge,je,zt,Ln){return Ln(Se,function(li,ko,Vi){je=zt?(zt=!1,li):Ge(je,li,ko,Vi)}),je}function ze(Se,Ge){var je=Se.length;for(Se.sort(Ge);je--;)Se[je]=Se[je].value;return Se}function At(Se,Ge){for(var je,zt=-1,Ln=Se.length;++zt<Ln;){var li=Ge(Se[zt]);li!==n&&(je=je===n?li:je+li)}return je}function ui(Se,Ge){for(var je=-1,zt=Array(Se);++je<Se;)zt[je]=Ge(je);return zt}function Io(Se,Ge){return zi(Ge,function(je){return[je,Se[je]]})}function Ir(Se){return Se&&Se.slice(0,Gue(Se)+1).replace(Ri,"")}function mi(Se){return function(Ge){return Se(Ge)}}function go(Se,Ge){return zi(Ge,function(je){return Se[je]})}function Tf(Se,Ge){return Se.has(Ge)}function El(Se,Ge){for(var je=-1,zt=Se.length;++je<zt&&Xm(Ge,Se[je],0)>-1;);return je}function fb(Se,Ge){for(var je=Se.length;je--&&Xm(Ge,Se[je],0)>-1;);return je}function PC(Se,Ge){for(var je=Se.length,zt=0;je--;)Se[je]===Ge&&++zt;return zt}var OVe=ne(Tw),$Ve=ne(le);function MVe(Se){return"\\"+Be[Se]}function LVe(Se,Ge){return Se==null?n:Se[Ge]}function kw(Se){return Ew.test(Se)}function FVe(Se){return Wm.test(Se)}function BVe(Se){for(var Ge,je=[];!(Ge=Se.next()).done;)je.push(Ge.value);return je}function X9(Se){var Ge=-1,je=Array(Se.size);return Se.forEach(function(zt,Ln){je[++Ge]=[Ln,zt]}),je}function Wue(Se,Ge){return function(je){return Se(Ge(je))}}function uy(Se,Ge){for(var je=-1,zt=Se.length,Ln=0,li=[];++je<zt;){var ko=Se[je];(ko===Ge||ko===c)&&(Se[je]=c,li[Ln++]=je)}return li}function LP(Se){var Ge=-1,je=Array(Se.size);return Se.forEach(function(zt){je[++Ge]=zt}),je}function jVe(Se){var Ge=-1,je=Array(Se.size);return Se.forEach(function(zt){je[++Ge]=[zt,zt]}),je}function UVe(Se,Ge,je){for(var zt=je-1,Ln=Se.length;++zt<Ln;)if(Se[zt]===Ge)return zt;return-1}function zVe(Se,Ge,je){for(var zt=je+1;zt--;)if(Se[zt]===Ge)return zt;return zt}function Rw(Se){return kw(Se)?HVe(Se):$P(Se)}function Od(Se){return kw(Se)?qVe(Se):MP(Se)}function Gue(Se){for(var Ge=Se.length;Ge--&&me.test(Se.charAt(Ge)););return Ge}var VVe=ne(ye);function HVe(Se){for(var Ge=Xo.lastIndex=0;Xo.test(Se);)++Ge;return Ge}function qVe(Se){return Se.match(Xo)||[]}function WVe(Se){return Se.match(DC)||[]}var GVe=function Se(Ge){Ge=Ge==null?an:Dw.defaults(an.Object(),Ge,Dw.pick(an,Gm));var je=Ge.Array,zt=Ge.Date,Ln=Ge.Error,li=Ge.Function,ko=Ge.Math,Vi=Ge.Object,Q9=Ge.RegExp,YVe=Ge.String,Cf=Ge.TypeError,FP=je.prototype,KVe=li.prototype,Nw=Vi.prototype,BP=Ge["__core-js_shared__"],jP=KVe.toString,Ei=Nw.hasOwnProperty,XVe=0,Yue=function(){var v=/[^.]+$/.exec(BP&&BP.keys&&BP.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}(),UP=Nw.toString,QVe=jP.call(Vi),JVe=an._,ZVe=Q9("^"+jP.call(Ei).replace(Xs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zP=Ao?Ge.Buffer:n,ly=Ge.Symbol,VP=Ge.Uint8Array,Kue=zP?zP.allocUnsafe:n,HP=Wue(Vi.getPrototypeOf,Vi),Xue=Vi.create,Que=Nw.propertyIsEnumerable,qP=FP.splice,Jue=ly?ly.isConcatSpreadable:n,OC=ly?ly.iterator:n,db=ly?ly.toStringTag:n,WP=function(){try{var v=yb(Vi,"defineProperty");return v({},"",{}),v}catch{}}(),eHe=Ge.clearTimeout!==an.clearTimeout&&Ge.clearTimeout,tHe=zt&&zt.now!==an.Date.now&&zt.now,nHe=Ge.setTimeout!==an.setTimeout&&Ge.setTimeout,GP=ko.ceil,YP=ko.floor,J9=Vi.getOwnPropertySymbols,rHe=zP?zP.isBuffer:n,Zue=Ge.isFinite,iHe=FP.join,sHe=Wue(Vi.keys,Vi),Ro=ko.max,Xa=ko.min,oHe=zt.now,aHe=Ge.parseInt,ele=ko.random,uHe=FP.reverse,Z9=yb(Ge,"DataView"),$C=yb(Ge,"Map"),ej=yb(Ge,"Promise"),Pw=yb(Ge,"Set"),MC=yb(Ge,"WeakMap"),LC=yb(Vi,"create"),KP=MC&&new MC,Ow={},lHe=vb(Z9),cHe=vb($C),fHe=vb(ej),dHe=vb(Pw),hHe=vb(MC),XP=ly?ly.prototype:n,FC=XP?XP.valueOf:n,tle=XP?XP.toString:n;function Z(v){if(Os(v)&&!zn(v)&&!(v instanceof br)){if(v instanceof Af)return v;if(Ei.call(v,"__wrapped__"))return nce(v)}return new Af(v)}var $w=function(){function v(){}return function(E){if(!Cs(E))return{};if(Xue)return Xue(E);v.prototype=E;var R=new v;return v.prototype=n,R}}();function QP(){}function Af(v,E){this.__wrapped__=v,this.__actions__=[],this.__chain__=!!E,this.__index__=0,this.__values__=n}Z.templateSettings={escape:Cc,evaluate:Ko,interpolate:Ou,variable:"",imports:{_:Z}},Z.prototype=QP.prototype,Z.prototype.constructor=Z,Af.prototype=$w(QP.prototype),Af.prototype.constructor=Af;function br(v){this.__wrapped__=v,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=z,this.__views__=[]}function pHe(){var v=new br(this.__wrapped__);return v.__actions__=Sl(this.__actions__),v.__dir__=this.__dir__,v.__filtered__=this.__filtered__,v.__iteratees__=Sl(this.__iteratees__),v.__takeCount__=this.__takeCount__,v.__views__=Sl(this.__views__),v}function mHe(){if(this.__filtered__){var v=new br(this);v.__dir__=-1,v.__filtered__=!0}else v=this.clone(),v.__dir__*=-1;return v}function gHe(){var v=this.__wrapped__.value(),E=this.__dir__,R=zn(v),U=E<0,X=R?v.length:0,re=Iqe(0,X,this.__views__),ce=re.start,ve=re.end,Ae=ve-ce,Ze=U?ve:ce-1,et=this.__iteratees__,lt=et.length,$t=0,Qt=Xa(Ae,this.__takeCount__);if(!R||!U&&X==Ae&&Qt==Ae)return Tle(v,this.__actions__);var pn=[];e:for(;Ae--&&$t<Qt;){Ze+=E;for(var tr=-1,mn=v[Ze];++tr<lt;){var pr=et[tr],kr=pr.iteratee,Rc=pr.type,Bu=kr(mn);if(Rc==q)mn=Bu;else if(!Bu){if(Rc==B)continue e;break e}}pn[$t++]=mn}return pn}br.prototype=$w(QP.prototype),br.prototype.constructor=br;function hb(v){var E=-1,R=v==null?0:v.length;for(this.clear();++E<R;){var U=v[E];this.set(U[0],U[1])}}function yHe(){this.__data__=LC?LC(null):{},this.size=0}function vHe(v){var E=this.has(v)&&delete this.__data__[v];return this.size-=E?1:0,E}function bHe(v){var E=this.__data__;if(LC){var R=E[v];return R===u?n:R}return Ei.call(E,v)?E[v]:n}function xHe(v){var E=this.__data__;return LC?E[v]!==n:Ei.call(E,v)}function _He(v,E){var R=this.__data__;return this.size+=this.has(v)?0:1,R[v]=LC&&E===n?u:E,this}hb.prototype.clear=yHe,hb.prototype.delete=vHe,hb.prototype.get=bHe,hb.prototype.has=xHe,hb.prototype.set=_He;function Qm(v){var E=-1,R=v==null?0:v.length;for(this.clear();++E<R;){var U=v[E];this.set(U[0],U[1])}}function wHe(){this.__data__=[],this.size=0}function EHe(v){var E=this.__data__,R=JP(E,v);if(R<0)return!1;var U=E.length-1;return R==U?E.pop():qP.call(E,R,1),--this.size,!0}function SHe(v){var E=this.__data__,R=JP(E,v);return R<0?n:E[R][1]}function THe(v){return JP(this.__data__,v)>-1}function CHe(v,E){var R=this.__data__,U=JP(R,v);return U<0?(++this.size,R.push([v,E])):R[U][1]=E,this}Qm.prototype.clear=wHe,Qm.prototype.delete=EHe,Qm.prototype.get=SHe,Qm.prototype.has=THe,Qm.prototype.set=CHe;function Jm(v){var E=-1,R=v==null?0:v.length;for(this.clear();++E<R;){var U=v[E];this.set(U[0],U[1])}}function AHe(){this.size=0,this.__data__={hash:new hb,map:new($C||Qm),string:new hb}}function IHe(v){var E=c3(this,v).delete(v);return this.size-=E?1:0,E}function kHe(v){return c3(this,v).get(v)}function RHe(v){return c3(this,v).has(v)}function DHe(v,E){var R=c3(this,v),U=R.size;return R.set(v,E),this.size+=R.size==U?0:1,this}Jm.prototype.clear=AHe,Jm.prototype.delete=IHe,Jm.prototype.get=kHe,Jm.prototype.has=RHe,Jm.prototype.set=DHe;function pb(v){var E=-1,R=v==null?0:v.length;for(this.__data__=new Jm;++E<R;)this.add(v[E])}function NHe(v){return this.__data__.set(v,u),this}function PHe(v){return this.__data__.has(v)}pb.prototype.add=pb.prototype.push=NHe,pb.prototype.has=PHe;function $d(v){var E=this.__data__=new Qm(v);this.size=E.size}function OHe(){this.__data__=new Qm,this.size=0}function $He(v){var E=this.__data__,R=E.delete(v);return this.size=E.size,R}function MHe(v){return this.__data__.get(v)}function LHe(v){return this.__data__.has(v)}function FHe(v,E){var R=this.__data__;if(R instanceof Qm){var U=R.__data__;if(!$C||U.length<i-1)return U.push([v,E]),this.size=++R.size,this;R=this.__data__=new Jm(U)}return R.set(v,E),this.size=R.size,this}$d.prototype.clear=OHe,$d.prototype.delete=$He,$d.prototype.get=MHe,$d.prototype.has=LHe,$d.prototype.set=FHe;function nle(v,E){var R=zn(v),U=!R&&bb(v),X=!R&&!U&&py(v),re=!R&&!U&&!X&&Bw(v),ce=R||U||X||re,ve=ce?ui(v.length,YVe):[],Ae=ve.length;for(var Ze in v)(E||Ei.call(v,Ze))&&!(ce&&(Ze=="length"||X&&(Ze=="offset"||Ze=="parent")||re&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||n0(Ze,Ae)))&&ve.push(Ze);return ve}function rle(v){var E=v.length;return E?v[fj(0,E-1)]:n}function BHe(v,E){return f3(Sl(v),mb(E,0,v.length))}function jHe(v){return f3(Sl(v))}function tj(v,E,R){(R!==n&&!Md(v[E],R)||R===n&&!(E in v))&&Zm(v,E,R)}function BC(v,E,R){var U=v[E];(!(Ei.call(v,E)&&Md(U,R))||R===n&&!(E in v))&&Zm(v,E,R)}function JP(v,E){for(var R=v.length;R--;)if(Md(v[R][0],E))return R;return-1}function UHe(v,E,R,U){return cy(v,function(X,re,ce){E(U,X,R(X),ce)}),U}function ile(v,E){return v&&np(E,Qo(E),v)}function zHe(v,E){return v&&np(E,Cl(E),v)}function Zm(v,E,R){E=="__proto__"&&WP?WP(v,E,{configurable:!0,enumerable:!0,value:R,writable:!0}):v[E]=R}function nj(v,E){for(var R=-1,U=E.length,X=je(U),re=v==null;++R<U;)X[R]=re?n:Mj(v,E[R]);return X}function mb(v,E,R){return v===v&&(R!==n&&(v=v<=R?v:R),E!==n&&(v=v>=E?v:E)),v}function If(v,E,R,U,X,re){var ce,ve=E&f,Ae=E&d,Ze=E&h;if(R&&(ce=X?R(v,U,X,re):R(v)),ce!==n)return ce;if(!Cs(v))return v;var et=zn(v);if(et){if(ce=Rqe(v),!ve)return Sl(v,ce)}else{var lt=Qa(v),$t=lt==Re||lt==St;if(py(v))return Ile(v,ve);if(lt==Te||lt==J||$t&&!X){if(ce=Ae||$t?{}:Gle(v),!ve)return Ae?bqe(v,zHe(ce,v)):vqe(v,ile(ce,v))}else{if(!Ar[lt])return X?v:{};ce=Dqe(v,lt,ve)}}re||(re=new $d);var Qt=re.get(v);if(Qt)return Qt;re.set(v,ce),wce(v)?v.forEach(function(mn){ce.add(If(mn,E,R,mn,v,re))}):xce(v)&&v.forEach(function(mn,pr){ce.set(pr,If(mn,E,R,pr,v,re))});var pn=Ze?Ae?wj:_j:Ae?Cl:Qo,tr=et?n:pn(v);return Mu(tr||v,function(mn,pr){tr&&(pr=mn,mn=v[pr]),BC(ce,pr,If(mn,E,R,pr,v,re))}),ce}function VHe(v){var E=Qo(v);return function(R){return sle(R,v,E)}}function sle(v,E,R){var U=R.length;if(v==null)return!U;for(v=Vi(v);U--;){var X=R[U],re=E[X],ce=v[X];if(ce===n&&!(X in v)||!re(ce))return!1}return!0}function ole(v,E,R){if(typeof v!="function")throw new Cf(o);return WC(function(){v.apply(n,R)},E)}function jC(v,E,R,U){var X=-1,re=lb,ce=!0,ve=v.length,Ae=[],Ze=E.length;if(!ve)return Ae;R&&(E=zi(E,mi(R))),U?(re=oy,ce=!1):E.length>=i&&(re=Tf,ce=!1,E=new pb(E));e:for(;++X<ve;){var et=v[X],lt=R==null?et:R(et);if(et=U||et!==0?et:0,ce&&lt===lt){for(var $t=Ze;$t--;)if(E[$t]===lt)continue e;Ae.push(et)}else re(E,lt,U)||Ae.push(et)}return Ae}var cy=Ple(tp),ale=Ple(ij,!0);function HHe(v,E){var R=!0;return cy(v,function(U,X,re){return R=!!E(U,X,re),R}),R}function ZP(v,E,R){for(var U=-1,X=v.length;++U<X;){var re=v[U],ce=E(re);if(ce!=null&&(ve===n?ce===ce&&!kc(ce):R(ce,ve)))var ve=ce,Ae=re}return Ae}function qHe(v,E,R,U){var X=v.length;for(R=Kn(R),R<0&&(R=-R>X?0:X+R),U=U===n||U>X?X:Kn(U),U<0&&(U+=X),U=R>U?0:Sce(U);R<U;)v[R++]=E;return v}function ule(v,E){var R=[];return cy(v,function(U,X,re){E(U,X,re)&&R.push(U)}),R}function _a(v,E,R,U,X){var re=-1,ce=v.length;for(R||(R=Pqe),X||(X=[]);++re<ce;){var ve=v[re];E>0&&R(ve)?E>1?_a(ve,E-1,R,U,X):Nd(X,ve):U||(X[X.length]=ve)}return X}var rj=Ole(),lle=Ole(!0);function tp(v,E){return v&&rj(v,E,Qo)}function ij(v,E){return v&&lle(v,E,Qo)}function e3(v,E){return Sf(E,function(R){return r0(v[R])})}function gb(v,E){E=dy(E,v);for(var R=0,U=E.length;v!=null&&R<U;)v=v[rp(E[R++])];return R&&R==U?v:n}function cle(v,E,R){var U=E(v);return zn(v)?U:Nd(U,R(v))}function Lu(v){return v==null?v===n?kt:mt:db&&db in Vi(v)?Aqe(v):jqe(v)}function sj(v,E){return v>E}function WHe(v,E){return v!=null&&Ei.call(v,E)}function GHe(v,E){return v!=null&&E in Vi(v)}function YHe(v,E,R){return v>=Xa(E,R)&&v<Ro(E,R)}function oj(v,E,R){for(var U=R?oy:lb,X=v[0].length,re=v.length,ce=re,ve=je(re),Ae=1/0,Ze=[];ce--;){var et=v[ce];ce&&E&&(et=zi(et,mi(E))),Ae=Xa(et.length,Ae),ve[ce]=!R&&(E||X>=120&&et.length>=120)?new pb(ce&&et):n}et=v[0];var lt=-1,$t=ve[0];e:for(;++lt<X&&Ze.length<Ae;){var Qt=et[lt],pn=E?E(Qt):Qt;if(Qt=R||Qt!==0?Qt:0,!($t?Tf($t,pn):U(Ze,pn,R))){for(ce=re;--ce;){var tr=ve[ce];if(!(tr?Tf(tr,pn):U(v[ce],pn,R)))continue e}$t&&$t.push(pn),Ze.push(Qt)}}return Ze}function KHe(v,E,R,U){return tp(v,function(X,re,ce){E(U,R(X),re,ce)}),U}function UC(v,E,R){E=dy(E,v),v=Qle(v,E);var U=v==null?v:v[rp(Rf(E))];return U==null?n:Ya(U,v,R)}function fle(v){return Os(v)&&Lu(v)==J}function XHe(v){return Os(v)&&Lu(v)==Oe}function QHe(v){return Os(v)&&Lu(v)==ke}function zC(v,E,R,U,X){return v===E?!0:v==null||E==null||!Os(v)&&!Os(E)?v!==v&&E!==E:JHe(v,E,R,U,zC,X)}function JHe(v,E,R,U,X,re){var ce=zn(v),ve=zn(E),Ae=ce?ue:Qa(v),Ze=ve?ue:Qa(E);Ae=Ae==J?Te:Ae,Ze=Ze==J?Te:Ze;var et=Ae==Te,lt=Ze==Te,$t=Ae==Ze;if($t&&py(v)){if(!py(E))return!1;ce=!0,et=!1}if($t&&!et)return re||(re=new $d),ce||Bw(v)?Hle(v,E,R,U,X,re):Tqe(v,E,Ae,R,U,X,re);if(!(R&p)){var Qt=et&&Ei.call(v,"__wrapped__"),pn=lt&&Ei.call(E,"__wrapped__");if(Qt||pn){var tr=Qt?v.value():v,mn=pn?E.value():E;return re||(re=new $d),X(tr,mn,R,U,re)}}return $t?(re||(re=new $d),Cqe(v,E,R,U,X,re)):!1}function ZHe(v){return Os(v)&&Qa(v)==Je}function aj(v,E,R,U){var X=R.length,re=X,ce=!U;if(v==null)return!re;for(v=Vi(v);X--;){var ve=R[X];if(ce&&ve[2]?ve[1]!==v[ve[0]]:!(ve[0]in v))return!1}for(;++X<re;){ve=R[X];var Ae=ve[0],Ze=v[Ae],et=ve[1];if(ce&&ve[2]){if(Ze===n&&!(Ae in v))return!1}else{var lt=new $d;if(U)var $t=U(Ze,et,Ae,v,E,lt);if(!($t===n?zC(et,Ze,p|m,U,lt):$t))return!1}}return!0}function dle(v){if(!Cs(v)||$qe(v))return!1;var E=r0(v)?ZVe:Tr;return E.test(vb(v))}function eqe(v){return Os(v)&&Lu(v)==yt}function tqe(v){return Os(v)&&Qa(v)==Dt}function nqe(v){return Os(v)&&y3(v.length)&&!!Vr[Lu(v)]}function hle(v){return typeof v=="function"?v:v==null?Al:typeof v=="object"?zn(v)?gle(v[0],v[1]):mle(v):$ce(v)}function uj(v){if(!qC(v))return sHe(v);var E=[];for(var R in Vi(v))Ei.call(v,R)&&R!="constructor"&&E.push(R);return E}function rqe(v){if(!Cs(v))return Bqe(v);var E=qC(v),R=[];for(var U in v)U=="constructor"&&(E||!Ei.call(v,U))||R.push(U);return R}function lj(v,E){return v<E}function ple(v,E){var R=-1,U=Tl(v)?je(v.length):[];return cy(v,function(X,re,ce){U[++R]=E(X,re,ce)}),U}function mle(v){var E=Sj(v);return E.length==1&&E[0][2]?Kle(E[0][0],E[0][1]):function(R){return R===v||aj(R,v,E)}}function gle(v,E){return Cj(v)&&Yle(E)?Kle(rp(v),E):function(R){var U=Mj(R,v);return U===n&&U===E?Lj(R,v):zC(E,U,p|m)}}function t3(v,E,R,U,X){v!==E&&rj(E,function(re,ce){if(X||(X=new $d),Cs(re))iqe(v,E,ce,R,t3,U,X);else{var ve=U?U(Ij(v,ce),re,ce+"",v,E,X):n;ve===n&&(ve=re),tj(v,ce,ve)}},Cl)}function iqe(v,E,R,U,X,re,ce){var ve=Ij(v,R),Ae=Ij(E,R),Ze=ce.get(Ae);if(Ze){tj(v,R,Ze);return}var et=re?re(ve,Ae,R+"",v,E,ce):n,lt=et===n;if(lt){var $t=zn(Ae),Qt=!$t&&py(Ae),pn=!$t&&!Qt&&Bw(Ae);et=Ae,$t||Qt||pn?zn(ve)?et=ve:Qs(ve)?et=Sl(ve):Qt?(lt=!1,et=Ile(Ae,!0)):pn?(lt=!1,et=kle(Ae,!0)):et=[]:GC(Ae)||bb(Ae)?(et=ve,bb(ve)?et=Tce(ve):(!Cs(ve)||r0(ve))&&(et=Gle(Ae))):lt=!1}lt&&(ce.set(Ae,et),X(et,Ae,U,re,ce),ce.delete(Ae)),tj(v,R,et)}function yle(v,E){var R=v.length;if(R)return E+=E<0?R:0,n0(E,R)?v[E]:n}function vle(v,E,R){E.length?E=zi(E,function(re){return zn(re)?function(ce){return gb(ce,re.length===1?re[0]:re)}:re}):E=[Al];var U=-1;E=zi(E,mi(hn()));var X=ple(v,function(re,ce,ve){var Ae=zi(E,function(Ze){return Ze(re)});return{criteria:Ae,index:++U,value:re}});return ze(X,function(re,ce){return yqe(re,ce,R)})}function sqe(v,E){return ble(v,E,function(R,U){return Lj(v,U)})}function ble(v,E,R){for(var U=-1,X=E.length,re={};++U<X;){var ce=E[U],ve=gb(v,ce);R(ve,ce)&&VC(re,dy(ce,v),ve)}return re}function oqe(v){return function(E){return gb(E,v)}}function cj(v,E,R,U){var X=U?ay:Xm,re=-1,ce=E.length,ve=v;for(v===E&&(E=Sl(E)),R&&(ve=zi(v,mi(R)));++re<ce;)for(var Ae=0,Ze=E[re],et=R?R(Ze):Ze;(Ae=X(ve,et,Ae,U))>-1;)ve!==v&&qP.call(ve,Ae,1),qP.call(v,Ae,1);return v}function xle(v,E){for(var R=v?E.length:0,U=R-1;R--;){var X=E[R];if(R==U||X!==re){var re=X;n0(X)?qP.call(v,X,1):pj(v,X)}}return v}function fj(v,E){return v+YP(ele()*(E-v+1))}function aqe(v,E,R,U){for(var X=-1,re=Ro(GP((E-v)/(R||1)),0),ce=je(re);re--;)ce[U?re:++X]=v,v+=R;return ce}function dj(v,E){var R="";if(!v||E<1||E>K)return R;do E%2&&(R+=v),E=YP(E/2),E&&(v+=v);while(E);return R}function sr(v,E){return kj(Xle(v,E,Al),v+"")}function uqe(v){return rle(jw(v))}function lqe(v,E){var R=jw(v);return f3(R,mb(E,0,R.length))}function VC(v,E,R,U){if(!Cs(v))return v;E=dy(E,v);for(var X=-1,re=E.length,ce=re-1,ve=v;ve!=null&&++X<re;){var Ae=rp(E[X]),Ze=R;if(Ae==="__proto__"||Ae==="constructor"||Ae==="prototype")return v;if(X!=ce){var et=ve[Ae];Ze=U?U(et,Ae,ve):n,Ze===n&&(Ze=Cs(et)?et:n0(E[X+1])?[]:{})}BC(ve,Ae,Ze),ve=ve[Ae]}return v}var _le=KP?function(v,E){return KP.set(v,E),v}:Al,cqe=WP?function(v,E){return WP(v,"toString",{configurable:!0,enumerable:!1,value:Bj(E),writable:!0})}:Al;function fqe(v){return f3(jw(v))}function kf(v,E,R){var U=-1,X=v.length;E<0&&(E=-E>X?0:X+E),R=R>X?X:R,R<0&&(R+=X),X=E>R?0:R-E>>>0,E>>>=0;for(var re=je(X);++U<X;)re[U]=v[U+E];return re}function dqe(v,E){var R;return cy(v,function(U,X,re){return R=E(U,X,re),!R}),!!R}function n3(v,E,R){var U=0,X=v==null?U:v.length;if(typeof E=="number"&&E===E&&X<=F){for(;U<X;){var re=U+X>>>1,ce=v[re];ce!==null&&!kc(ce)&&(R?ce<=E:ce<E)?U=re+1:X=re}return X}return hj(v,E,Al,R)}function hj(v,E,R,U){var X=0,re=v==null?0:v.length;if(re===0)return 0;E=R(E);for(var ce=E!==E,ve=E===null,Ae=kc(E),Ze=E===n;X<re;){var et=YP((X+re)/2),lt=R(v[et]),$t=lt!==n,Qt=lt===null,pn=lt===lt,tr=kc(lt);if(ce)var mn=U||pn;else Ze?mn=pn&&(U||$t):ve?mn=pn&&$t&&(U||!Qt):Ae?mn=pn&&$t&&!Qt&&(U||!tr):Qt||tr?mn=!1:mn=U?lt<=E:lt<E;mn?X=et+1:re=et}return Xa(re,W)}function wle(v,E){for(var R=-1,U=v.length,X=0,re=[];++R<U;){var ce=v[R],ve=E?E(ce):ce;if(!R||!Md(ve,Ae)){var Ae=ve;re[X++]=ce===0?0:ce}}return re}function Ele(v){return typeof v=="number"?v:kc(v)?L:+v}function Ic(v){if(typeof v=="string")return v;if(zn(v))return zi(v,Ic)+"";if(kc(v))return tle?tle.call(v):"";var E=v+"";return E=="0"&&1/v==-1/0?"-0":E}function fy(v,E,R){var U=-1,X=lb,re=v.length,ce=!0,ve=[],Ae=ve;if(R)ce=!1,X=oy;else if(re>=i){var Ze=E?null:Eqe(v);if(Ze)return LP(Ze);ce=!1,X=Tf,Ae=new pb}else Ae=E?[]:ve;e:for(;++U<re;){var et=v[U],lt=E?E(et):et;if(et=R||et!==0?et:0,ce&&lt===lt){for(var $t=Ae.length;$t--;)if(Ae[$t]===lt)continue e;E&&Ae.push(lt),ve.push(et)}else X(Ae,lt,R)||(Ae!==ve&&Ae.push(lt),ve.push(et))}return ve}function pj(v,E){return E=dy(E,v),v=Qle(v,E),v==null||delete v[rp(Rf(E))]}function Sle(v,E,R,U){return VC(v,E,R(gb(v,E)),U)}function r3(v,E,R,U){for(var X=v.length,re=U?X:-1;(U?re--:++re<X)&&E(v[re],re,v););return R?kf(v,U?0:re,U?re+1:X):kf(v,U?re+1:0,U?X:re)}function Tle(v,E){var R=v;return R instanceof br&&(R=R.value()),Pd(E,function(U,X){return X.func.apply(X.thisArg,Nd([U],X.args))},R)}function mj(v,E,R){var U=v.length;if(U<2)return U?fy(v[0]):[];for(var X=-1,re=je(U);++X<U;)for(var ce=v[X],ve=-1;++ve<U;)ve!=X&&(re[X]=jC(re[X]||ce,v[ve],E,R));return fy(_a(re,1),E,R)}function Cle(v,E,R){for(var U=-1,X=v.length,re=E.length,ce={};++U<X;){var ve=U<re?E[U]:n;R(ce,v[U],ve)}return ce}function gj(v){return Qs(v)?v:[]}function yj(v){return typeof v=="function"?v:Al}function dy(v,E){return zn(v)?v:Cj(v,E)?[v]:tce(gi(v))}var hqe=sr;function hy(v,E,R){var U=v.length;return R=R===n?U:R,!E&&R>=U?v:kf(v,E,R)}var Ale=eHe||function(v){return an.clearTimeout(v)};function Ile(v,E){if(E)return v.slice();var R=v.length,U=Kue?Kue(R):new v.constructor(R);return v.copy(U),U}function vj(v){var E=new v.constructor(v.byteLength);return new VP(E).set(new VP(v)),E}function pqe(v,E){var R=E?vj(v.buffer):v.buffer;return new v.constructor(R,v.byteOffset,v.byteLength)}function mqe(v){var E=new v.constructor(v.source,Zn.exec(v));return E.lastIndex=v.lastIndex,E}function gqe(v){return FC?Vi(FC.call(v)):{}}function kle(v,E){var R=E?vj(v.buffer):v.buffer;return new v.constructor(R,v.byteOffset,v.length)}function Rle(v,E){if(v!==E){var R=v!==n,U=v===null,X=v===v,re=kc(v),ce=E!==n,ve=E===null,Ae=E===E,Ze=kc(E);if(!ve&&!Ze&&!re&&v>E||re&&ce&&Ae&&!ve&&!Ze||U&&ce&&Ae||!R&&Ae||!X)return 1;if(!U&&!re&&!Ze&&v<E||Ze&&R&&X&&!U&&!re||ve&&R&&X||!ce&&X||!Ae)return-1}return 0}function yqe(v,E,R){for(var U=-1,X=v.criteria,re=E.criteria,ce=X.length,ve=R.length;++U<ce;){var Ae=Rle(X[U],re[U]);if(Ae){if(U>=ve)return Ae;var Ze=R[U];return Ae*(Ze=="desc"?-1:1)}}return v.index-E.index}function Dle(v,E,R,U){for(var X=-1,re=v.length,ce=R.length,ve=-1,Ae=E.length,Ze=Ro(re-ce,0),et=je(Ae+Ze),lt=!U;++ve<Ae;)et[ve]=E[ve];for(;++X<ce;)(lt||X<re)&&(et[R[X]]=v[X]);for(;Ze--;)et[ve++]=v[X++];return et}function Nle(v,E,R,U){for(var X=-1,re=v.length,ce=-1,ve=R.length,Ae=-1,Ze=E.length,et=Ro(re-ve,0),lt=je(et+Ze),$t=!U;++X<et;)lt[X]=v[X];for(var Qt=X;++Ae<Ze;)lt[Qt+Ae]=E[Ae];for(;++ce<ve;)($t||X<re)&&(lt[Qt+R[ce]]=v[X++]);return lt}function Sl(v,E){var R=-1,U=v.length;for(E||(E=je(U));++R<U;)E[R]=v[R];return E}function np(v,E,R,U){var X=!R;R||(R={});for(var re=-1,ce=E.length;++re<ce;){var ve=E[re],Ae=U?U(R[ve],v[ve],ve,R,v):n;Ae===n&&(Ae=v[ve]),X?Zm(R,ve,Ae):BC(R,ve,Ae)}return R}function vqe(v,E){return np(v,Tj(v),E)}function bqe(v,E){return np(v,qle(v),E)}function i3(v,E){return function(R,U){var X=zn(R)?ub:UHe,re=E?E():{};return X(R,v,hn(U,2),re)}}function Mw(v){return sr(function(E,R){var U=-1,X=R.length,re=X>1?R[X-1]:n,ce=X>2?R[2]:n;for(re=v.length>3&&typeof re=="function"?(X--,re):n,ce&&Fu(R[0],R[1],ce)&&(re=X<3?n:re,X=1),E=Vi(E);++U<X;){var ve=R[U];ve&&v(E,ve,U,re)}return E})}function Ple(v,E){return function(R,U){if(R==null)return R;if(!Tl(R))return v(R,U);for(var X=R.length,re=E?X:-1,ce=Vi(R);(E?re--:++re<X)&&U(ce[re],re,ce)!==!1;);return R}}function Ole(v){return function(E,R,U){for(var X=-1,re=Vi(E),ce=U(E),ve=ce.length;ve--;){var Ae=ce[v?ve:++X];if(R(re[Ae],Ae,re)===!1)break}return E}}function xqe(v,E,R){var U=E&g,X=HC(v);function re(){var ce=this&&this!==an&&this instanceof re?X:v;return ce.apply(U?R:this,arguments)}return re}function $le(v){return function(E){E=gi(E);var R=kw(E)?Od(E):n,U=R?R[0]:E.charAt(0),X=R?hy(R,1).join(""):E.slice(1);return U[v]()+X}}function Lw(v){return function(E){return Pd(Pce(Nce(E).replace(ww,"")),v,"")}}function HC(v){return function(){var E=arguments;switch(E.length){case 0:return new v;case 1:return new v(E[0]);case 2:return new v(E[0],E[1]);case 3:return new v(E[0],E[1],E[2]);case 4:return new v(E[0],E[1],E[2],E[3]);case 5:return new v(E[0],E[1],E[2],E[3],E[4]);case 6:return new v(E[0],E[1],E[2],E[3],E[4],E[5]);case 7:return new v(E[0],E[1],E[2],E[3],E[4],E[5],E[6])}var R=$w(v.prototype),U=v.apply(R,E);return Cs(U)?U:R}}function _qe(v,E,R){var U=HC(v);function X(){for(var re=arguments.length,ce=je(re),ve=re,Ae=Fw(X);ve--;)ce[ve]=arguments[ve];var Ze=re<3&&ce[0]!==Ae&&ce[re-1]!==Ae?[]:uy(ce,Ae);if(re-=Ze.length,re<R)return jle(v,E,s3,X.placeholder,n,ce,Ze,n,n,R-re);var et=this&&this!==an&&this instanceof X?U:v;return Ya(et,this,ce)}return X}function Mle(v){return function(E,R,U){var X=Vi(E);if(!Tl(E)){var re=hn(R,3);E=Qo(E),R=function(ve){return re(X[ve],ve,X)}}var ce=v(E,R,U);return ce>-1?X[re?E[ce]:ce]:n}}function Lle(v){return t0(function(E){var R=E.length,U=R,X=Af.prototype.thru;for(v&&E.reverse();U--;){var re=E[U];if(typeof re!="function")throw new Cf(o);if(X&&!ce&&l3(re)=="wrapper")var ce=new Af([],!0)}for(U=ce?U:R;++U<R;){re=E[U];var ve=l3(re),Ae=ve=="wrapper"?Ej(re):n;Ae&&Aj(Ae[0])&&Ae[1]==(C|x|S|I)&&!Ae[4].length&&Ae[9]==1?ce=ce[l3(Ae[0])].apply(ce,Ae[3]):ce=re.length==1&&Aj(re)?ce[ve]():ce.thru(re)}return function(){var Ze=arguments,et=Ze[0];if(ce&&Ze.length==1&&zn(et))return ce.plant(et).value();for(var lt=0,$t=R?E[lt].apply(this,Ze):et;++lt<R;)$t=E[lt].call(this,$t);return $t}})}function s3(v,E,R,U,X,re,ce,ve,Ae,Ze){var et=E&C,lt=E&g,$t=E&y,Qt=E&(x|w),pn=E&D,tr=$t?n:HC(v);function mn(){for(var pr=arguments.length,kr=je(pr),Rc=pr;Rc--;)kr[Rc]=arguments[Rc];if(Qt)var Bu=Fw(mn),Dc=PC(kr,Bu);if(U&&(kr=Dle(kr,U,X,Qt)),re&&(kr=Nle(kr,re,ce,Qt)),pr-=Dc,Qt&&pr<Ze){var Js=uy(kr,Bu);return jle(v,E,s3,mn.placeholder,R,kr,Js,ve,Ae,Ze-pr)}var Ld=lt?R:this,s0=$t?Ld[v]:v;return pr=kr.length,ve?kr=Uqe(kr,ve):pn&&pr>1&&kr.reverse(),et&&Ae<pr&&(kr.length=Ae),this&&this!==an&&this instanceof mn&&(s0=tr||HC(s0)),s0.apply(Ld,kr)}return mn}function Fle(v,E){return function(R,U){return KHe(R,v,E(U),{})}}function o3(v,E){return function(R,U){var X;if(R===n&&U===n)return E;if(R!==n&&(X=R),U!==n){if(X===n)return U;typeof R=="string"||typeof U=="string"?(R=Ic(R),U=Ic(U)):(R=Ele(R),U=Ele(U)),X=v(R,U)}return X}}function bj(v){return t0(function(E){return E=zi(E,mi(hn())),sr(function(R){var U=this;return v(E,function(X){return Ya(X,U,R)})})})}function a3(v,E){E=E===n?" ":Ic(E);var R=E.length;if(R<2)return R?dj(E,v):E;var U=dj(E,GP(v/Rw(E)));return kw(E)?hy(Od(U),0,v).join(""):U.slice(0,v)}function wqe(v,E,R,U){var X=E&g,re=HC(v);function ce(){for(var ve=-1,Ae=arguments.length,Ze=-1,et=U.length,lt=je(et+Ae),$t=this&&this!==an&&this instanceof ce?re:v;++Ze<et;)lt[Ze]=U[Ze];for(;Ae--;)lt[Ze++]=arguments[++ve];return Ya($t,X?R:this,lt)}return ce}function Ble(v){return function(E,R,U){return U&&typeof U!="number"&&Fu(E,R,U)&&(R=U=n),E=i0(E),R===n?(R=E,E=0):R=i0(R),U=U===n?E<R?1:-1:i0(U),aqe(E,R,U,v)}}function u3(v){return function(E,R){return typeof E=="string"&&typeof R=="string"||(E=Df(E),R=Df(R)),v(E,R)}}function jle(v,E,R,U,X,re,ce,ve,Ae,Ze){var et=E&x,lt=et?ce:n,$t=et?n:ce,Qt=et?re:n,pn=et?n:re;E|=et?S:T,E&=~(et?T:S),E&b||(E&=-4);var tr=[v,E,X,Qt,lt,pn,$t,ve,Ae,Ze],mn=R.apply(n,tr);return Aj(v)&&Jle(mn,tr),mn.placeholder=U,Zle(mn,v,E)}function xj(v){var E=ko[v];return function(R,U){if(R=Df(R),U=U==null?0:Xa(Kn(U),292),U&&Zue(R)){var X=(gi(R)+"e").split("e"),re=E(X[0]+"e"+(+X[1]+U));return X=(gi(re)+"e").split("e"),+(X[0]+"e"+(+X[1]-U))}return E(R)}}var Eqe=Pw&&1/LP(new Pw([,-0]))[1]==Y?function(v){return new Pw(v)}:zj;function Ule(v){return function(E){var R=Qa(E);return R==Je?X9(E):R==Dt?jVe(E):Io(E,v(E))}}function e0(v,E,R,U,X,re,ce,ve){var Ae=E&y;if(!Ae&&typeof v!="function")throw new Cf(o);var Ze=U?U.length:0;if(Ze||(E&=-97,U=X=n),ce=ce===n?ce:Ro(Kn(ce),0),ve=ve===n?ve:Kn(ve),Ze-=X?X.length:0,E&T){var et=U,lt=X;U=X=n}var $t=Ae?n:Ej(v),Qt=[v,E,R,U,X,et,lt,re,ce,ve];if($t&&Fqe(Qt,$t),v=Qt[0],E=Qt[1],R=Qt[2],U=Qt[3],X=Qt[4],ve=Qt[9]=Qt[9]===n?Ae?0:v.length:Ro(Qt[9]-Ze,0),!ve&&E&(x|w)&&(E&=-25),!E||E==g)var pn=xqe(v,E,R);else E==x||E==w?pn=_qe(v,E,ve):(E==S||E==(g|S))&&!X.length?pn=wqe(v,E,R,U):pn=s3.apply(n,Qt);var tr=$t?_le:Jle;return Zle(tr(pn,Qt),v,E)}function zle(v,E,R,U){return v===n||Md(v,Nw[R])&&!Ei.call(U,R)?E:v}function Vle(v,E,R,U,X,re){return Cs(v)&&Cs(E)&&(re.set(E,v),t3(v,E,n,Vle,re),re.delete(E)),v}function Sqe(v){return GC(v)?n:v}function Hle(v,E,R,U,X,re){var ce=R&p,ve=v.length,Ae=E.length;if(ve!=Ae&&!(ce&&Ae>ve))return!1;var Ze=re.get(v),et=re.get(E);if(Ze&&et)return Ze==E&&et==v;var lt=-1,$t=!0,Qt=R&m?new pb:n;for(re.set(v,E),re.set(E,v);++lt<ve;){var pn=v[lt],tr=E[lt];if(U)var mn=ce?U(tr,pn,lt,E,v,re):U(pn,tr,lt,v,E,re);if(mn!==n){if(mn)continue;$t=!1;break}if(Qt){if(!Aw(E,function(pr,kr){if(!Tf(Qt,kr)&&(pn===pr||X(pn,pr,R,U,re)))return Qt.push(kr)})){$t=!1;break}}else if(!(pn===tr||X(pn,tr,R,U,re))){$t=!1;break}}return re.delete(v),re.delete(E),$t}function Tqe(v,E,R,U,X,re,ce){switch(R){case ot:if(v.byteLength!=E.byteLength||v.byteOffset!=E.byteOffset)return!1;v=v.buffer,E=E.buffer;case Oe:return!(v.byteLength!=E.byteLength||!re(new VP(v),new VP(E)));case he:case ke:case It:return Md(+v,+E);case rt:return v.name==E.name&&v.message==E.message;case yt:case Qe:return v==E+"";case Je:var ve=X9;case Dt:var Ae=U&p;if(ve||(ve=LP),v.size!=E.size&&!Ae)return!1;var Ze=ce.get(v);if(Ze)return Ze==E;U|=m,ce.set(v,E);var et=Hle(ve(v),ve(E),U,X,re,ce);return ce.delete(v),et;case _e:if(FC)return FC.call(v)==FC.call(E)}return!1}function Cqe(v,E,R,U,X,re){var ce=R&p,ve=_j(v),Ae=ve.length,Ze=_j(E),et=Ze.length;if(Ae!=et&&!ce)return!1;for(var lt=Ae;lt--;){var $t=ve[lt];if(!(ce?$t in E:Ei.call(E,$t)))return!1}var Qt=re.get(v),pn=re.get(E);if(Qt&&pn)return Qt==E&&pn==v;var tr=!0;re.set(v,E),re.set(E,v);for(var mn=ce;++lt<Ae;){$t=ve[lt];var pr=v[$t],kr=E[$t];if(U)var Rc=ce?U(kr,pr,$t,E,v,re):U(pr,kr,$t,v,E,re);if(!(Rc===n?pr===kr||X(pr,kr,R,U,re):Rc)){tr=!1;break}mn||(mn=$t=="constructor")}if(tr&&!mn){var Bu=v.constructor,Dc=E.constructor;Bu!=Dc&&"constructor"in v&&"constructor"in E&&!(typeof Bu=="function"&&Bu instanceof Bu&&typeof Dc=="function"&&Dc instanceof Dc)&&(tr=!1)}return re.delete(v),re.delete(E),tr}function t0(v){return kj(Xle(v,n,sce),v+"")}function _j(v){return cle(v,Qo,Tj)}function wj(v){return cle(v,Cl,qle)}var Ej=KP?function(v){return KP.get(v)}:zj;function l3(v){for(var E=v.name+"",R=Ow[E],U=Ei.call(Ow,E)?R.length:0;U--;){var X=R[U],re=X.func;if(re==null||re==v)return X.name}return E}function Fw(v){var E=Ei.call(Z,"placeholder")?Z:v;return E.placeholder}function hn(){var v=Z.iteratee||jj;return v=v===jj?hle:v,arguments.length?v(arguments[0],arguments[1]):v}function c3(v,E){var R=v.__data__;return Oqe(E)?R[typeof E=="string"?"string":"hash"]:R.map}function Sj(v){for(var E=Qo(v),R=E.length;R--;){var U=E[R],X=v[U];E[R]=[U,X,Yle(X)]}return E}function yb(v,E){var R=LVe(v,E);return dle(R)?R:n}function Aqe(v){var E=Ei.call(v,db),R=v[db];try{v[db]=n;var U=!0}catch{}var X=UP.call(v);return U&&(E?v[db]=R:delete v[db]),X}var Tj=J9?function(v){return v==null?[]:(v=Vi(v),Sf(J9(v),function(E){return Que.call(v,E)}))}:Vj,qle=J9?function(v){for(var E=[];v;)Nd(E,Tj(v)),v=HP(v);return E}:Vj,Qa=Lu;(Z9&&Qa(new Z9(new ArrayBuffer(1)))!=ot||$C&&Qa(new $C)!=Je||ej&&Qa(ej.resolve())!=Fe||Pw&&Qa(new Pw)!=Dt||MC&&Qa(new MC)!=Rt)&&(Qa=function(v){var E=Lu(v),R=E==Te?v.constructor:n,U=R?vb(R):"";if(U)switch(U){case lHe:return ot;case cHe:return Je;case fHe:return Fe;case dHe:return Dt;case hHe:return Rt}return E});function Iqe(v,E,R){for(var U=-1,X=R.length;++U<X;){var re=R[U],ce=re.size;switch(re.type){case"drop":v+=ce;break;case"dropRight":E-=ce;break;case"take":E=Xa(E,v+ce);break;case"takeRight":v=Ro(v,E-ce);break}}return{start:v,end:E}}function kqe(v){var E=v.match(ge);return E?E[1].split(Le):[]}function Wle(v,E,R){E=dy(E,v);for(var U=-1,X=E.length,re=!1;++U<X;){var ce=rp(E[U]);if(!(re=v!=null&&R(v,ce)))break;v=v[ce]}return re||++U!=X?re:(X=v==null?0:v.length,!!X&&y3(X)&&n0(ce,X)&&(zn(v)||bb(v)))}function Rqe(v){var E=v.length,R=new v.constructor(E);return E&&typeof v[0]=="string"&&Ei.call(v,"index")&&(R.index=v.index,R.input=v.input),R}function Gle(v){return typeof v.constructor=="function"&&!qC(v)?$w(HP(v)):{}}function Dqe(v,E,R){var U=v.constructor;switch(E){case Oe:return vj(v);case he:case ke:return new U(+v);case ot:return pqe(v,R);case xt:case jt:case jn:case dr:case Sr:case xi:case Tn:case Un:case hr:return kle(v,R);case Je:return new U;case It:case Qe:return new U(v);case yt:return mqe(v);case Dt:return new U;case _e:return gqe(v)}}function Nqe(v,E){var R=E.length;if(!R)return v;var U=R-1;return E[U]=(R>1?"& ":"")+E[U],E=E.join(R>2?", ":" "),v.replace(ae,`{
/* [wrapped with `+E+`] */
`)}function Pqe(v){return zn(v)||bb(v)||!!(Jue&&v&&v[Jue])}function n0(v,E){var R=typeof v;return E=E??K,!!E&&(R=="number"||R!="symbol"&&on.test(v))&&v>-1&&v%1==0&&v<E}function Fu(v,E,R){if(!Cs(R))return!1;var U=typeof E;return(U=="number"?Tl(R)&&n0(E,R.length):U=="string"&&E in R)?Md(R[E],v):!1}function Cj(v,E){if(zn(v))return!1;var R=typeof v;return R=="number"||R=="symbol"||R=="boolean"||v==null||kc(v)?!0:ki.test(v)||!Lr.test(v)||E!=null&&v in Vi(E)}function Oqe(v){var E=typeof v;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?v!=="__proto__":v===null}function Aj(v){var E=l3(v),R=Z[E];if(typeof R!="function"||!(E in br.prototype))return!1;if(v===R)return!0;var U=Ej(R);return!!U&&v===U[0]}function $qe(v){return!!Yue&&Yue in v}var Mqe=BP?r0:Hj;function qC(v){var E=v&&v.constructor,R=typeof E=="function"&&E.prototype||Nw;return v===R}function Yle(v){return v===v&&!Cs(v)}function Kle(v,E){return function(R){return R==null?!1:R[v]===E&&(E!==n||v in Vi(R))}}function Lqe(v){var E=m3(v,function(U){return R.size===l&&R.clear(),U}),R=E.cache;return E}function Fqe(v,E){var R=v[1],U=E[1],X=R|U,re=X<(g|y|C),ce=U==C&&R==x||U==C&&R==I&&v[7].length<=E[8]||U==(C|I)&&E[7].length<=E[8]&&R==x;if(!(re||ce))return v;U&g&&(v[2]=E[2],X|=R&g?0:b);var ve=E[3];if(ve){var Ae=v[3];v[3]=Ae?Dle(Ae,ve,E[4]):ve,v[4]=Ae?uy(v[3],c):E[4]}return ve=E[5],ve&&(Ae=v[5],v[5]=Ae?Nle(Ae,ve,E[6]):ve,v[6]=Ae?uy(v[5],c):E[6]),ve=E[7],ve&&(v[7]=ve),U&C&&(v[8]=v[8]==null?E[8]:Xa(v[8],E[8])),v[9]==null&&(v[9]=E[9]),v[0]=E[0],v[1]=X,v}function Bqe(v){var E=[];if(v!=null)for(var R in Vi(v))E.push(R);return E}function jqe(v){return UP.call(v)}function Xle(v,E,R){return E=Ro(E===n?v.length-1:E,0),function(){for(var U=arguments,X=-1,re=Ro(U.length-E,0),ce=je(re);++X<re;)ce[X]=U[E+X];X=-1;for(var ve=je(E+1);++X<E;)ve[X]=U[X];return ve[E]=R(ce),Ya(v,this,ve)}}function Qle(v,E){return E.length<2?v:gb(v,kf(E,0,-1))}function Uqe(v,E){for(var R=v.length,U=Xa(E.length,R),X=Sl(v);U--;){var re=E[U];v[U]=n0(re,R)?X[re]:n}return v}function Ij(v,E){if(!(E==="constructor"&&typeof v[E]=="function")&&E!="__proto__")return v[E]}var Jle=ece(_le),WC=nHe||function(v,E){return an.setTimeout(v,E)},kj=ece(cqe);function Zle(v,E,R){var U=E+"";return kj(v,Nqe(U,zqe(kqe(U),R)))}function ece(v){var E=0,R=0;return function(){var U=oHe(),X=$-(U-R);if(R=U,X>0){if(++E>=M)return arguments[0]}else E=0;return v.apply(n,arguments)}}function f3(v,E){var R=-1,U=v.length,X=U-1;for(E=E===n?U:E;++R<E;){var re=fj(R,X),ce=v[re];v[re]=v[R],v[R]=ce}return v.length=E,v}var tce=Lqe(function(v){var E=[];return v.charCodeAt(0)===46&&E.push(""),v.replace(pi,function(R,U,X,re){E.push(X?re.replace(Ut,"$1"):U||R)}),E});function rp(v){if(typeof v=="string"||kc(v))return v;var E=v+"";return E=="0"&&1/v==-1/0?"-0":E}function vb(v){if(v!=null){try{return jP.call(v)}catch{}try{return v+""}catch{}}return""}function zqe(v,E){return Mu(V,function(R){var U="_."+R[0];E&R[1]&&!lb(v,U)&&v.push(U)}),v.sort()}function nce(v){if(v instanceof br)return v.clone();var E=new Af(v.__wrapped__,v.__chain__);return E.__actions__=Sl(v.__actions__),E.__index__=v.__index__,E.__values__=v.__values__,E}function Vqe(v,E,R){(R?Fu(v,E,R):E===n)?E=1:E=Ro(Kn(E),0);var U=v==null?0:v.length;if(!U||E<1)return[];for(var X=0,re=0,ce=je(GP(U/E));X<U;)ce[re++]=kf(v,X,X+=E);return ce}function Hqe(v){for(var E=-1,R=v==null?0:v.length,U=0,X=[];++E<R;){var re=v[E];re&&(X[U++]=re)}return X}function qqe(){var v=arguments.length;if(!v)return[];for(var E=je(v-1),R=arguments[0],U=v;U--;)E[U-1]=arguments[U];return Nd(zn(R)?Sl(R):[R],_a(E,1))}var Wqe=sr(function(v,E){return Qs(v)?jC(v,_a(E,1,Qs,!0)):[]}),Gqe=sr(function(v,E){var R=Rf(E);return Qs(R)&&(R=n),Qs(v)?jC(v,_a(E,1,Qs,!0),hn(R,2)):[]}),Yqe=sr(function(v,E){var R=Rf(E);return Qs(R)&&(R=n),Qs(v)?jC(v,_a(E,1,Qs,!0),n,R):[]});function Kqe(v,E,R){var U=v==null?0:v.length;return U?(E=R||E===n?1:Kn(E),kf(v,E<0?0:E,U)):[]}function Xqe(v,E,R){var U=v==null?0:v.length;return U?(E=R||E===n?1:Kn(E),E=U-E,kf(v,0,E<0?0:E)):[]}function Qqe(v,E){return v&&v.length?r3(v,hn(E,3),!0,!0):[]}function Jqe(v,E){return v&&v.length?r3(v,hn(E,3),!0):[]}function Zqe(v,E,R,U){var X=v==null?0:v.length;return X?(R&&typeof R!="number"&&Fu(v,E,R)&&(R=0,U=X),qHe(v,E,R,U)):[]}function rce(v,E,R){var U=v==null?0:v.length;if(!U)return-1;var X=R==null?0:Kn(R);return X<0&&(X=Ro(U+X,0)),cb(v,hn(E,3),X)}function ice(v,E,R){var U=v==null?0:v.length;if(!U)return-1;var X=U-1;return R!==n&&(X=Kn(R),X=R<0?Ro(U+X,0):Xa(X,U-1)),cb(v,hn(E,3),X,!0)}function sce(v){var E=v==null?0:v.length;return E?_a(v,1):[]}function eWe(v){var E=v==null?0:v.length;return E?_a(v,Y):[]}function tWe(v,E){var R=v==null?0:v.length;return R?(E=E===n?1:Kn(E),_a(v,E)):[]}function nWe(v){for(var E=-1,R=v==null?0:v.length,U={};++E<R;){var X=v[E];U[X[0]]=X[1]}return U}function oce(v){return v&&v.length?v[0]:n}function rWe(v,E,R){var U=v==null?0:v.length;if(!U)return-1;var X=R==null?0:Kn(R);return X<0&&(X=Ro(U+X,0)),Xm(v,E,X)}function iWe(v){var E=v==null?0:v.length;return E?kf(v,0,-1):[]}var sWe=sr(function(v){var E=zi(v,gj);return E.length&&E[0]===v[0]?oj(E):[]}),oWe=sr(function(v){var E=Rf(v),R=zi(v,gj);return E===Rf(R)?E=n:R.pop(),R.length&&R[0]===v[0]?oj(R,hn(E,2)):[]}),aWe=sr(function(v){var E=Rf(v),R=zi(v,gj);return E=typeof E=="function"?E:n,E&&R.pop(),R.length&&R[0]===v[0]?oj(R,n,E):[]});function uWe(v,E){return v==null?"":iHe.call(v,E)}function Rf(v){var E=v==null?0:v.length;return E?v[E-1]:n}function lWe(v,E,R){var U=v==null?0:v.length;if(!U)return-1;var X=U;return R!==n&&(X=Kn(R),X=X<0?Ro(U+X,0):Xa(X,U-1)),E===E?zVe(v,E,X):cb(v,A,X,!0)}function cWe(v,E){return v&&v.length?yle(v,Kn(E)):n}var fWe=sr(ace);function ace(v,E){return v&&v.length&&E&&E.length?cj(v,E):v}function dWe(v,E,R){return v&&v.length&&E&&E.length?cj(v,E,hn(R,2)):v}function hWe(v,E,R){return v&&v.length&&E&&E.length?cj(v,E,n,R):v}var pWe=t0(function(v,E){var R=v==null?0:v.length,U=nj(v,E);return xle(v,zi(E,function(X){return n0(X,R)?+X:X}).sort(Rle)),U});function mWe(v,E){var R=[];if(!(v&&v.length))return R;var U=-1,X=[],re=v.length;for(E=hn(E,3);++U<re;){var ce=v[U];E(ce,U,v)&&(R.push(ce),X.push(U))}return xle(v,X),R}function Rj(v){return v==null?v:uHe.call(v)}function gWe(v,E,R){var U=v==null?0:v.length;return U?(R&&typeof R!="number"&&Fu(v,E,R)?(E=0,R=U):(E=E==null?0:Kn(E),R=R===n?U:Kn(R)),kf(v,E,R)):[]}function yWe(v,E){return n3(v,E)}function vWe(v,E,R){return hj(v,E,hn(R,2))}function bWe(v,E){var R=v==null?0:v.length;if(R){var U=n3(v,E);if(U<R&&Md(v[U],E))return U}return-1}function xWe(v,E){return n3(v,E,!0)}function _We(v,E,R){return hj(v,E,hn(R,2),!0)}function wWe(v,E){var R=v==null?0:v.length;if(R){var U=n3(v,E,!0)-1;if(Md(v[U],E))return U}return-1}function EWe(v){return v&&v.length?wle(v):[]}function SWe(v,E){return v&&v.length?wle(v,hn(E,2)):[]}function TWe(v){var E=v==null?0:v.length;return E?kf(v,1,E):[]}function CWe(v,E,R){return v&&v.length?(E=R||E===n?1:Kn(E),kf(v,0,E<0?0:E)):[]}function AWe(v,E,R){var U=v==null?0:v.length;return U?(E=R||E===n?1:Kn(E),E=U-E,kf(v,E<0?0:E,U)):[]}function IWe(v,E){return v&&v.length?r3(v,hn(E,3),!1,!0):[]}function kWe(v,E){return v&&v.length?r3(v,hn(E,3)):[]}var RWe=sr(function(v){return fy(_a(v,1,Qs,!0))}),DWe=sr(function(v){var E=Rf(v);return Qs(E)&&(E=n),fy(_a(v,1,Qs,!0),hn(E,2))}),NWe=sr(function(v){var E=Rf(v);return E=typeof E=="function"?E:n,fy(_a(v,1,Qs,!0),n,E)});function PWe(v){return v&&v.length?fy(v):[]}function OWe(v,E){return v&&v.length?fy(v,hn(E,2)):[]}function $We(v,E){return E=typeof E=="function"?E:n,v&&v.length?fy(v,n,E):[]}function Dj(v){if(!(v&&v.length))return[];var E=0;return v=Sf(v,function(R){if(Qs(R))return E=Ro(R.length,E),!0}),ui(E,function(R){return zi(v,G(R))})}function uce(v,E){if(!(v&&v.length))return[];var R=Dj(v);return E==null?R:zi(R,function(U){return Ya(E,n,U)})}var MWe=sr(function(v,E){return Qs(v)?jC(v,E):[]}),LWe=sr(function(v){return mj(Sf(v,Qs))}),FWe=sr(function(v){var E=Rf(v);return Qs(E)&&(E=n),mj(Sf(v,Qs),hn(E,2))}),BWe=sr(function(v){var E=Rf(v);return E=typeof E=="function"?E:n,mj(Sf(v,Qs),n,E)}),jWe=sr(Dj);function UWe(v,E){return Cle(v||[],E||[],BC)}function zWe(v,E){return Cle(v||[],E||[],VC)}var VWe=sr(function(v){var E=v.length,R=E>1?v[E-1]:n;return R=typeof R=="function"?(v.pop(),R):n,uce(v,R)});function lce(v){var E=Z(v);return E.__chain__=!0,E}function HWe(v,E){return E(v),v}function d3(v,E){return E(v)}var qWe=t0(function(v){var E=v.length,R=E?v[0]:0,U=this.__wrapped__,X=function(re){return nj(re,v)};return E>1||this.__actions__.length||!(U instanceof br)||!n0(R)?this.thru(X):(U=U.slice(R,+R+(E?1:0)),U.__actions__.push({func:d3,args:[X],thisArg:n}),new Af(U,this.__chain__).thru(function(re){return E&&!re.length&&re.push(n),re}))});function WWe(){return lce(this)}function GWe(){return new Af(this.value(),this.__chain__)}function YWe(){this.__values__===n&&(this.__values__=Ece(this.value()));var v=this.__index__>=this.__values__.length,E=v?n:this.__values__[this.__index__++];return{done:v,value:E}}function KWe(){return this}function XWe(v){for(var E,R=this;R instanceof QP;){var U=nce(R);U.__index__=0,U.__values__=n,E?X.__wrapped__=U:E=U;var X=U;R=R.__wrapped__}return X.__wrapped__=v,E}function QWe(){var v=this.__wrapped__;if(v instanceof br){var E=v;return this.__actions__.length&&(E=new br(this)),E=E.reverse(),E.__actions__.push({func:d3,args:[Rj],thisArg:n}),new Af(E,this.__chain__)}return this.thru(Rj)}function JWe(){return Tle(this.__wrapped__,this.__actions__)}var ZWe=i3(function(v,E,R){Ei.call(v,R)?++v[R]:Zm(v,R,1)});function eGe(v,E,R){var U=zn(v)?Cw:HHe;return R&&Fu(v,E,R)&&(E=n),U(v,hn(E,3))}function tGe(v,E){var R=zn(v)?Sf:ule;return R(v,hn(E,3))}var nGe=Mle(rce),rGe=Mle(ice);function iGe(v,E){return _a(h3(v,E),1)}function sGe(v,E){return _a(h3(v,E),Y)}function oGe(v,E,R){return R=R===n?1:Kn(R),_a(h3(v,E),R)}function cce(v,E){var R=zn(v)?Mu:cy;return R(v,hn(E,3))}function fce(v,E){var R=zn(v)?PP:ale;return R(v,hn(E,3))}var aGe=i3(function(v,E,R){Ei.call(v,R)?v[R].push(E):Zm(v,R,[E])});function uGe(v,E,R,U){v=Tl(v)?v:jw(v),R=R&&!U?Kn(R):0;var X=v.length;return R<0&&(R=Ro(X+R,0)),v3(v)?R<=X&&v.indexOf(E,R)>-1:!!X&&Xm(v,E,R)>-1}var lGe=sr(function(v,E,R){var U=-1,X=typeof E=="function",re=Tl(v)?je(v.length):[];return cy(v,function(ce){re[++U]=X?Ya(E,ce,R):UC(ce,E,R)}),re}),cGe=i3(function(v,E,R){Zm(v,R,E)});function h3(v,E){var R=zn(v)?zi:ple;return R(v,hn(E,3))}function fGe(v,E,R,U){return v==null?[]:(zn(E)||(E=E==null?[]:[E]),R=U?n:R,zn(R)||(R=R==null?[]:[R]),vle(v,E,R))}var dGe=i3(function(v,E,R){v[R?0:1].push(E)},function(){return[[],[]]});function hGe(v,E,R){var U=zn(v)?Pd:De,X=arguments.length<3;return U(v,hn(E,4),R,X,cy)}function pGe(v,E,R){var U=zn(v)?OP:De,X=arguments.length<3;return U(v,hn(E,4),R,X,ale)}function mGe(v,E){var R=zn(v)?Sf:ule;return R(v,g3(hn(E,3)))}function gGe(v){var E=zn(v)?rle:uqe;return E(v)}function yGe(v,E,R){(R?Fu(v,E,R):E===n)?E=1:E=Kn(E);var U=zn(v)?BHe:lqe;return U(v,E)}function vGe(v){var E=zn(v)?jHe:fqe;return E(v)}function bGe(v){if(v==null)return 0;if(Tl(v))return v3(v)?Rw(v):v.length;var E=Qa(v);return E==Je||E==Dt?v.size:uj(v).length}function xGe(v,E,R){var U=zn(v)?Aw:dqe;return R&&Fu(v,E,R)&&(E=n),U(v,hn(E,3))}var _Ge=sr(function(v,E){if(v==null)return[];var R=E.length;return R>1&&Fu(v,E[0],E[1])?E=[]:R>2&&Fu(E[0],E[1],E[2])&&(E=[E[0]]),vle(v,_a(E,1),[])}),p3=tHe||function(){return an.Date.now()};function wGe(v,E){if(typeof E!="function")throw new Cf(o);return v=Kn(v),function(){if(--v<1)return E.apply(this,arguments)}}function dce(v,E,R){return E=R?n:E,E=v&&E==null?v.length:E,e0(v,C,n,n,n,n,E)}function hce(v,E){var R;if(typeof E!="function")throw new Cf(o);return v=Kn(v),function(){return--v>0&&(R=E.apply(this,arguments)),v<=1&&(E=n),R}}var Nj=sr(function(v,E,R){var U=g;if(R.length){var X=uy(R,Fw(Nj));U|=S}return e0(v,U,E,R,X)}),pce=sr(function(v,E,R){var U=g|y;if(R.length){var X=uy(R,Fw(pce));U|=S}return e0(E,U,v,R,X)});function mce(v,E,R){E=R?n:E;var U=e0(v,x,n,n,n,n,n,E);return U.placeholder=mce.placeholder,U}function gce(v,E,R){E=R?n:E;var U=e0(v,w,n,n,n,n,n,E);return U.placeholder=gce.placeholder,U}function yce(v,E,R){var U,X,re,ce,ve,Ae,Ze=0,et=!1,lt=!1,$t=!0;if(typeof v!="function")throw new Cf(o);E=Df(E)||0,Cs(R)&&(et=!!R.leading,lt="maxWait"in R,re=lt?Ro(Df(R.maxWait)||0,E):re,$t="trailing"in R?!!R.trailing:$t);function Qt(Js){var Ld=U,s0=X;return U=X=n,Ze=Js,ce=v.apply(s0,Ld),ce}function pn(Js){return Ze=Js,ve=WC(pr,E),et?Qt(Js):ce}function tr(Js){var Ld=Js-Ae,s0=Js-Ze,Mce=E-Ld;return lt?Xa(Mce,re-s0):Mce}function mn(Js){var Ld=Js-Ae,s0=Js-Ze;return Ae===n||Ld>=E||Ld<0||lt&&s0>=re}function pr(){var Js=p3();if(mn(Js))return kr(Js);ve=WC(pr,tr(Js))}function kr(Js){return ve=n,$t&&U?Qt(Js):(U=X=n,ce)}function Rc(){ve!==n&&Ale(ve),Ze=0,U=Ae=X=ve=n}function Bu(){return ve===n?ce:kr(p3())}function Dc(){var Js=p3(),Ld=mn(Js);if(U=arguments,X=this,Ae=Js,Ld){if(ve===n)return pn(Ae);if(lt)return Ale(ve),ve=WC(pr,E),Qt(Ae)}return ve===n&&(ve=WC(pr,E)),ce}return Dc.cancel=Rc,Dc.flush=Bu,Dc}var EGe=sr(function(v,E){return ole(v,1,E)}),SGe=sr(function(v,E,R){return ole(v,Df(E)||0,R)});function TGe(v){return e0(v,D)}function m3(v,E){if(typeof v!="function"||E!=null&&typeof E!="function")throw new Cf(o);var R=function(){var U=arguments,X=E?E.apply(this,U):U[0],re=R.cache;if(re.has(X))return re.get(X);var ce=v.apply(this,U);return R.cache=re.set(X,ce)||re,ce};return R.cache=new(m3.Cache||Jm),R}m3.Cache=Jm;function g3(v){if(typeof v!="function")throw new Cf(o);return function(){var E=arguments;switch(E.length){case 0:return!v.call(this);case 1:return!v.call(this,E[0]);case 2:return!v.call(this,E[0],E[1]);case 3:return!v.call(this,E[0],E[1],E[2])}return!v.apply(this,E)}}function CGe(v){return hce(2,v)}var AGe=hqe(function(v,E){E=E.length==1&&zn(E[0])?zi(E[0],mi(hn())):zi(_a(E,1),mi(hn()));var R=E.length;return sr(function(U){for(var X=-1,re=Xa(U.length,R);++X<re;)U[X]=E[X].call(this,U[X]);return Ya(v,this,U)})}),Pj=sr(function(v,E){var R=uy(E,Fw(Pj));return e0(v,S,n,E,R)}),vce=sr(function(v,E){var R=uy(E,Fw(vce));return e0(v,T,n,E,R)}),IGe=t0(function(v,E){return e0(v,I,n,n,n,E)});function kGe(v,E){if(typeof v!="function")throw new Cf(o);return E=E===n?E:Kn(E),sr(v,E)}function RGe(v,E){if(typeof v!="function")throw new Cf(o);return E=E==null?0:Ro(Kn(E),0),sr(function(R){var U=R[E],X=hy(R,0,E);return U&&Nd(X,U),Ya(v,this,X)})}function DGe(v,E,R){var U=!0,X=!0;if(typeof v!="function")throw new Cf(o);return Cs(R)&&(U="leading"in R?!!R.leading:U,X="trailing"in R?!!R.trailing:X),yce(v,E,{leading:U,maxWait:E,trailing:X})}function NGe(v){return dce(v,1)}function PGe(v,E){return Pj(yj(E),v)}function OGe(){if(!arguments.length)return[];var v=arguments[0];return zn(v)?v:[v]}function $Ge(v){return If(v,h)}function MGe(v,E){return E=typeof E=="function"?E:n,If(v,h,E)}function LGe(v){return If(v,f|h)}function FGe(v,E){return E=typeof E=="function"?E:n,If(v,f|h,E)}function BGe(v,E){return E==null||sle(v,E,Qo(E))}function Md(v,E){return v===E||v!==v&&E!==E}var jGe=u3(sj),UGe=u3(function(v,E){return v>=E}),bb=fle(function(){return arguments}())?fle:function(v){return Os(v)&&Ei.call(v,"callee")&&!Que.call(v,"callee")},zn=je.isArray,zGe=Ym?mi(Ym):XHe;function Tl(v){return v!=null&&y3(v.length)&&!r0(v)}function Qs(v){return Os(v)&&Tl(v)}function VGe(v){return v===!0||v===!1||Os(v)&&Lu(v)==he}var py=rHe||Hj,HGe=Km?mi(Km):QHe;function qGe(v){return Os(v)&&v.nodeType===1&&!GC(v)}function WGe(v){if(v==null)return!0;if(Tl(v)&&(zn(v)||typeof v=="string"||typeof v.splice=="function"||py(v)||Bw(v)||bb(v)))return!v.length;var E=Qa(v);if(E==Je||E==Dt)return!v.size;if(qC(v))return!uj(v).length;for(var R in v)if(Ei.call(v,R))return!1;return!0}function GGe(v,E){return zC(v,E)}function YGe(v,E,R){R=typeof R=="function"?R:n;var U=R?R(v,E):n;return U===n?zC(v,E,n,R):!!U}function Oj(v){if(!Os(v))return!1;var E=Lu(v);return E==rt||E==Pe||typeof v.message=="string"&&typeof v.name=="string"&&!GC(v)}function KGe(v){return typeof v=="number"&&Zue(v)}function r0(v){if(!Cs(v))return!1;var E=Lu(v);return E==Re||E==St||E==we||E==st}function bce(v){return typeof v=="number"&&v==Kn(v)}function y3(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=K}function Cs(v){var E=typeof v;return v!=null&&(E=="object"||E=="function")}function Os(v){return v!=null&&typeof v=="object"}var xce=ob?mi(ob):ZHe;function XGe(v,E){return v===E||aj(v,E,Sj(E))}function QGe(v,E,R){return R=typeof R=="function"?R:n,aj(v,E,Sj(E),R)}function JGe(v){return _ce(v)&&v!=+v}function ZGe(v){if(Mqe(v))throw new Ln(s);return dle(v)}function eYe(v){return v===null}function tYe(v){return v==null}function _ce(v){return typeof v=="number"||Os(v)&&Lu(v)==It}function GC(v){if(!Os(v)||Lu(v)!=Te)return!1;var E=HP(v);if(E===null)return!0;var R=Ei.call(E,"constructor")&&E.constructor;return typeof R=="function"&&R instanceof R&&jP.call(R)==QVe}var $j=NC?mi(NC):eqe;function nYe(v){return bce(v)&&v>=-9007199254740991&&v<=K}var wce=ab?mi(ab):tqe;function v3(v){return typeof v=="string"||!zn(v)&&Os(v)&&Lu(v)==Qe}function kc(v){return typeof v=="symbol"||Os(v)&&Lu(v)==_e}var Bw=NP?mi(NP):nqe;function rYe(v){return v===n}function iYe(v){return Os(v)&&Qa(v)==Rt}function sYe(v){return Os(v)&&Lu(v)==Ee}var oYe=u3(lj),aYe=u3(function(v,E){return v<=E});function Ece(v){if(!v)return[];if(Tl(v))return v3(v)?Od(v):Sl(v);if(OC&&v[OC])return BVe(v[OC]());var E=Qa(v),R=E==Je?X9:E==Dt?LP:jw;return R(v)}function i0(v){if(!v)return v===0?v:0;if(v=Df(v),v===Y||v===-1/0){var E=v<0?-1:1;return E*Q}return v===v?v:0}function Kn(v){var E=i0(v),R=E%1;return E===E?R?E-R:E:0}function Sce(v){return v?mb(Kn(v),0,z):0}function Df(v){if(typeof v=="number")return v;if(kc(v))return L;if(Cs(v)){var E=typeof v.valueOf=="function"?v.valueOf():v;v=Cs(E)?E+"":E}if(typeof v!="string")return v===0?v:+v;v=Ir(v);var R=Pn.test(v);return R||oi.test(v)?ir(v.slice(2),R?2:8):ur.test(v)?L:+v}function Tce(v){return np(v,Cl(v))}function uYe(v){return v?mb(Kn(v),-9007199254740991,K):v===0?v:0}function gi(v){return v==null?"":Ic(v)}var lYe=Mw(function(v,E){if(qC(E)||Tl(E)){np(E,Qo(E),v);return}for(var R in E)Ei.call(E,R)&&BC(v,R,E[R])}),Cce=Mw(function(v,E){np(E,Cl(E),v)}),b3=Mw(function(v,E,R,U){np(E,Cl(E),v,U)}),cYe=Mw(function(v,E,R,U){np(E,Qo(E),v,U)}),fYe=t0(nj);function dYe(v,E){var R=$w(v);return E==null?R:ile(R,E)}var hYe=sr(function(v,E){v=Vi(v);var R=-1,U=E.length,X=U>2?E[2]:n;for(X&&Fu(E[0],E[1],X)&&(U=1);++R<U;)for(var re=E[R],ce=Cl(re),ve=-1,Ae=ce.length;++ve<Ae;){var Ze=ce[ve],et=v[Ze];(et===n||Md(et,Nw[Ze])&&!Ei.call(v,Ze))&&(v[Ze]=re[Ze])}return v}),pYe=sr(function(v){return v.push(n,Vle),Ya(Ace,n,v)});function mYe(v,E){return Ka(v,hn(E,3),tp)}function gYe(v,E){return Ka(v,hn(E,3),ij)}function yYe(v,E){return v==null?v:rj(v,hn(E,3),Cl)}function vYe(v,E){return v==null?v:lle(v,hn(E,3),Cl)}function bYe(v,E){return v&&tp(v,hn(E,3))}function xYe(v,E){return v&&ij(v,hn(E,3))}function _Ye(v){return v==null?[]:e3(v,Qo(v))}function wYe(v){return v==null?[]:e3(v,Cl(v))}function Mj(v,E,R){var U=v==null?n:gb(v,E);return U===n?R:U}function EYe(v,E){return v!=null&&Wle(v,E,WHe)}function Lj(v,E){return v!=null&&Wle(v,E,GHe)}var SYe=Fle(function(v,E,R){E!=null&&typeof E.toString!="function"&&(E=UP.call(E)),v[E]=R},Bj(Al)),TYe=Fle(function(v,E,R){E!=null&&typeof E.toString!="function"&&(E=UP.call(E)),Ei.call(v,E)?v[E].push(R):v[E]=[R]},hn),CYe=sr(UC);function Qo(v){return Tl(v)?nle(v):uj(v)}function Cl(v){return Tl(v)?nle(v,!0):rqe(v)}function AYe(v,E){var R={};return E=hn(E,3),tp(v,function(U,X,re){Zm(R,E(U,X,re),U)}),R}function IYe(v,E){var R={};return E=hn(E,3),tp(v,function(U,X,re){Zm(R,X,E(U,X,re))}),R}var kYe=Mw(function(v,E,R){t3(v,E,R)}),Ace=Mw(function(v,E,R,U){t3(v,E,R,U)}),RYe=t0(function(v,E){var R={};if(v==null)return R;var U=!1;E=zi(E,function(re){return re=dy(re,v),U||(U=re.length>1),re}),np(v,wj(v),R),U&&(R=If(R,f|d|h,Sqe));for(var X=E.length;X--;)pj(R,E[X]);return R});function DYe(v,E){return Ice(v,g3(hn(E)))}var NYe=t0(function(v,E){return v==null?{}:sqe(v,E)});function Ice(v,E){if(v==null)return{};var R=zi(wj(v),function(U){return[U]});return E=hn(E),ble(v,R,function(U,X){return E(U,X[0])})}function PYe(v,E,R){E=dy(E,v);var U=-1,X=E.length;for(X||(X=1,v=n);++U<X;){var re=v==null?n:v[rp(E[U])];re===n&&(U=X,re=R),v=r0(re)?re.call(v):re}return v}function OYe(v,E,R){return v==null?v:VC(v,E,R)}function $Ye(v,E,R,U){return U=typeof U=="function"?U:n,v==null?v:VC(v,E,R,U)}var kce=Ule(Qo),Rce=Ule(Cl);function MYe(v,E,R){var U=zn(v),X=U||py(v)||Bw(v);if(E=hn(E,4),R==null){var re=v&&v.constructor;X?R=U?new re:[]:Cs(v)?R=r0(re)?$w(HP(v)):{}:R={}}return(X?Mu:tp)(v,function(ce,ve,Ae){return E(R,ce,ve,Ae)}),R}function LYe(v,E){return v==null?!0:pj(v,E)}function FYe(v,E,R){return v==null?v:Sle(v,E,yj(R))}function BYe(v,E,R,U){return U=typeof U=="function"?U:n,v==null?v:Sle(v,E,yj(R),U)}function jw(v){return v==null?[]:go(v,Qo(v))}function jYe(v){return v==null?[]:go(v,Cl(v))}function UYe(v,E,R){return R===n&&(R=E,E=n),R!==n&&(R=Df(R),R=R===R?R:0),E!==n&&(E=Df(E),E=E===E?E:0),mb(Df(v),E,R)}function zYe(v,E,R){return E=i0(E),R===n?(R=E,E=0):R=i0(R),v=Df(v),YHe(v,E,R)}function VYe(v,E,R){if(R&&typeof R!="boolean"&&Fu(v,E,R)&&(E=R=n),R===n&&(typeof E=="boolean"?(R=E,E=n):typeof v=="boolean"&&(R=v,v=n)),v===n&&E===n?(v=0,E=1):(v=i0(v),E===n?(E=v,v=0):E=i0(E)),v>E){var U=v;v=E,E=U}if(R||v%1||E%1){var X=ele();return Xa(v+X*(E-v+Ht("1e-"+((X+"").length-1))),E)}return fj(v,E)}var HYe=Lw(function(v,E,R){return E=E.toLowerCase(),v+(R?Dce(E):E)});function Dce(v){return Fj(gi(v).toLowerCase())}function Nce(v){return v=gi(v),v&&v.replace(Cr,OVe).replace(Rd,"")}function qYe(v,E,R){v=gi(v),E=Ic(E);var U=v.length;R=R===n?U:mb(Kn(R),0,U);var X=R;return R-=E.length,R>=0&&v.slice(R,X)==E}function WYe(v){return v=gi(v),v&&hs.test(v)?v.replace(Ns,$Ve):v}function GYe(v){return v=gi(v),v&&si.test(v)?v.replace(Xs,"\\$&"):v}var YYe=Lw(function(v,E,R){return v+(R?"-":"")+E.toLowerCase()}),KYe=Lw(function(v,E,R){return v+(R?" ":"")+E.toLowerCase()}),XYe=$le("toLowerCase");function QYe(v,E,R){v=gi(v),E=Kn(E);var U=E?Rw(v):0;if(!E||U>=E)return v;var X=(E-U)/2;return a3(YP(X),R)+v+a3(GP(X),R)}function JYe(v,E,R){v=gi(v),E=Kn(E);var U=E?Rw(v):0;return E&&U<E?v+a3(E-U,R):v}function ZYe(v,E,R){v=gi(v),E=Kn(E);var U=E?Rw(v):0;return E&&U<E?a3(E-U,R)+v:v}function eKe(v,E,R){return R||E==null?E=0:E&&(E=+E),aHe(gi(v).replace(Ri,""),E||0)}function tKe(v,E,R){return(R?Fu(v,E,R):E===n)?E=1:E=Kn(E),dj(gi(v),E)}function nKe(){var v=arguments,E=gi(v[0]);return v.length<3?E:E.replace(v[1],v[2])}var rKe=Lw(function(v,E,R){return v+(R?"_":"")+E.toLowerCase()});function iKe(v,E,R){return R&&typeof R!="number"&&Fu(v,E,R)&&(E=R=n),R=R===n?z:R>>>0,R?(v=gi(v),v&&(typeof E=="string"||E!=null&&!$j(E))&&(E=Ic(E),!E&&kw(v))?hy(Od(v),0,R):v.split(E,R)):[]}var sKe=Lw(function(v,E,R){return v+(R?" ":"")+Fj(E)});function oKe(v,E,R){return v=gi(v),R=R==null?0:mb(Kn(R),0,v.length),E=Ic(E),v.slice(R,R+E.length)==E}function aKe(v,E,R){var U=Z.templateSettings;R&&Fu(v,E,R)&&(E=n),v=gi(v),E=b3({},E,U,zle);var X=b3({},E.imports,U.imports,zle),re=Qo(X),ce=go(X,re),ve,Ae,Ze=0,et=E.interpolate||Xr,lt="__p += '",$t=Q9((E.escape||Xr).source+"|"+et.source+"|"+(et===Ou?fn:Xr).source+"|"+(E.evaluate||Xr).source+"|$","g"),Qt="//# sourceURL="+(Ei.call(E,"sourceURL")?(E.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Sw+"]")+`
`;v.replace($t,function(mn,pr,kr,Rc,Bu,Dc){return kr||(kr=Rc),lt+=v.slice(Ze,Dc).replace(yr,MVe),pr&&(ve=!0,lt+=`' +
__e(`+pr+`) +
'`),Bu&&(Ae=!0,lt+=`';
`+Bu+`;
__p += '`),kr&&(lt+=`' +
((__t = (`+kr+`)) == null ? '' : __t) +
'`),Ze=Dc+mn.length,mn}),lt+=`';
`;var pn=Ei.call(E,"variable")&&E.variable;if(!pn)lt=`with (obj) {
`+lt+`
}
`;else if(_t.test(pn))throw new Ln(a);lt=(Ae?lt.replace(gr,""):lt).replace(Yo,"$1").replace(es,"$1;"),lt="function("+(pn||"obj")+`) {
`+(pn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ve?", __e = _.escape":"")+(Ae?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+lt+`return __p
}`;var tr=Oce(function(){return li(re,Qt+"return "+lt).apply(n,ce)});if(tr.source=lt,Oj(tr))throw tr;return tr}function uKe(v){return gi(v).toLowerCase()}function lKe(v){return gi(v).toUpperCase()}function cKe(v,E,R){if(v=gi(v),v&&(R||E===n))return Ir(v);if(!v||!(E=Ic(E)))return v;var U=Od(v),X=Od(E),re=El(U,X),ce=fb(U,X)+1;return hy(U,re,ce).join("")}function fKe(v,E,R){if(v=gi(v),v&&(R||E===n))return v.slice(0,Gue(v)+1);if(!v||!(E=Ic(E)))return v;var U=Od(v),X=fb(U,Od(E))+1;return hy(U,0,X).join("")}function dKe(v,E,R){if(v=gi(v),v&&(R||E===n))return v.replace(Ri,"");if(!v||!(E=Ic(E)))return v;var U=Od(v),X=El(U,Od(E));return hy(U,X).join("")}function hKe(v,E){var R=k,U=P;if(Cs(E)){var X="separator"in E?E.separator:X;R="length"in E?Kn(E.length):R,U="omission"in E?Ic(E.omission):U}v=gi(v);var re=v.length;if(kw(v)){var ce=Od(v);re=ce.length}if(R>=re)return v;var ve=R-Rw(U);if(ve<1)return U;var Ae=ce?hy(ce,0,ve).join(""):v.slice(0,ve);if(X===n)return Ae+U;if(ce&&(ve+=Ae.length-ve),$j(X)){if(v.slice(ve).search(X)){var Ze,et=Ae;for(X.global||(X=Q9(X.source,gi(Zn.exec(X))+"g")),X.lastIndex=0;Ze=X.exec(et);)var lt=Ze.index;Ae=Ae.slice(0,lt===n?ve:lt)}}else if(v.indexOf(Ic(X),ve)!=ve){var $t=Ae.lastIndexOf(X);$t>-1&&(Ae=Ae.slice(0,$t))}return Ae+U}function pKe(v){return v=gi(v),v&&Ur.test(v)?v.replace(ds,VVe):v}var mKe=Lw(function(v,E,R){return v+(R?" ":"")+E.toUpperCase()}),Fj=$le("toUpperCase");function Pce(v,E,R){return v=gi(v),E=R?n:E,E===n?FVe(v)?WVe(v):Iw(v):v.match(E)||[]}var Oce=sr(function(v,E){try{return Ya(v,n,E)}catch(R){return Oj(R)?R:new Ln(R)}}),gKe=t0(function(v,E){return Mu(E,function(R){R=rp(R),Zm(v,R,Nj(v[R],v))}),v});function yKe(v){var E=v==null?0:v.length,R=hn();return v=E?zi(v,function(U){if(typeof U[1]!="function")throw new Cf(o);return[R(U[0]),U[1]]}):[],sr(function(U){for(var X=-1;++X<E;){var re=v[X];if(Ya(re[0],this,U))return Ya(re[1],this,U)}})}function vKe(v){return VHe(If(v,f))}function Bj(v){return function(){return v}}function bKe(v,E){return v==null||v!==v?E:v}var xKe=Lle(),_Ke=Lle(!0);function Al(v){return v}function jj(v){return hle(typeof v=="function"?v:If(v,f))}function wKe(v){return mle(If(v,f))}function EKe(v,E){return gle(v,If(E,f))}var SKe=sr(function(v,E){return function(R){return UC(R,v,E)}}),TKe=sr(function(v,E){return function(R){return UC(v,R,E)}});function Uj(v,E,R){var U=Qo(E),X=e3(E,U);R==null&&!(Cs(E)&&(X.length||!U.length))&&(R=E,E=v,v=this,X=e3(E,Qo(E)));var re=!(Cs(R)&&"chain"in R)||!!R.chain,ce=r0(v);return Mu(X,function(ve){var Ae=E[ve];v[ve]=Ae,ce&&(v.prototype[ve]=function(){var Ze=this.__chain__;if(re||Ze){var et=v(this.__wrapped__),lt=et.__actions__=Sl(this.__actions__);return lt.push({func:Ae,args:arguments,thisArg:v}),et.__chain__=Ze,et}return Ae.apply(v,Nd([this.value()],arguments))})}),v}function CKe(){return an._===this&&(an._=JVe),this}function zj(){}function AKe(v){return v=Kn(v),sr(function(E){return yle(E,v)})}var IKe=bj(zi),kKe=bj(Cw),RKe=bj(Aw);function $ce(v){return Cj(v)?G(rp(v)):oqe(v)}function DKe(v){return function(E){return v==null?n:gb(v,E)}}var NKe=Ble(),PKe=Ble(!0);function Vj(){return[]}function Hj(){return!1}function OKe(){return{}}function $Ke(){return""}function MKe(){return!0}function LKe(v,E){if(v=Kn(v),v<1||v>K)return[];var R=z,U=Xa(v,z);E=hn(E),v-=z;for(var X=ui(U,E);++R<v;)E(R);return X}function FKe(v){return zn(v)?zi(v,rp):kc(v)?[v]:Sl(tce(gi(v)))}function BKe(v){var E=++XVe;return gi(v)+E}var jKe=o3(function(v,E){return v+E},0),UKe=xj("ceil"),zKe=o3(function(v,E){return v/E},1),VKe=xj("floor");function HKe(v){return v&&v.length?ZP(v,Al,sj):n}function qKe(v,E){return v&&v.length?ZP(v,hn(E,2),sj):n}function WKe(v){return j(v,Al)}function GKe(v,E){return j(v,hn(E,2))}function YKe(v){return v&&v.length?ZP(v,Al,lj):n}function KKe(v,E){return v&&v.length?ZP(v,hn(E,2),lj):n}var XKe=o3(function(v,E){return v*E},1),QKe=xj("round"),JKe=o3(function(v,E){return v-E},0);function ZKe(v){return v&&v.length?At(v,Al):0}function eXe(v,E){return v&&v.length?At(v,hn(E,2)):0}return Z.after=wGe,Z.ary=dce,Z.assign=lYe,Z.assignIn=Cce,Z.assignInWith=b3,Z.assignWith=cYe,Z.at=fYe,Z.before=hce,Z.bind=Nj,Z.bindAll=gKe,Z.bindKey=pce,Z.castArray=OGe,Z.chain=lce,Z.chunk=Vqe,Z.compact=Hqe,Z.concat=qqe,Z.cond=yKe,Z.conforms=vKe,Z.constant=Bj,Z.countBy=ZWe,Z.create=dYe,Z.curry=mce,Z.curryRight=gce,Z.debounce=yce,Z.defaults=hYe,Z.defaultsDeep=pYe,Z.defer=EGe,Z.delay=SGe,Z.difference=Wqe,Z.differenceBy=Gqe,Z.differenceWith=Yqe,Z.drop=Kqe,Z.dropRight=Xqe,Z.dropRightWhile=Qqe,Z.dropWhile=Jqe,Z.fill=Zqe,Z.filter=tGe,Z.flatMap=iGe,Z.flatMapDeep=sGe,Z.flatMapDepth=oGe,Z.flatten=sce,Z.flattenDeep=eWe,Z.flattenDepth=tWe,Z.flip=TGe,Z.flow=xKe,Z.flowRight=_Ke,Z.fromPairs=nWe,Z.functions=_Ye,Z.functionsIn=wYe,Z.groupBy=aGe,Z.initial=iWe,Z.intersection=sWe,Z.intersectionBy=oWe,Z.intersectionWith=aWe,Z.invert=SYe,Z.invertBy=TYe,Z.invokeMap=lGe,Z.iteratee=jj,Z.keyBy=cGe,Z.keys=Qo,Z.keysIn=Cl,Z.map=h3,Z.mapKeys=AYe,Z.mapValues=IYe,Z.matches=wKe,Z.matchesProperty=EKe,Z.memoize=m3,Z.merge=kYe,Z.mergeWith=Ace,Z.method=SKe,Z.methodOf=TKe,Z.mixin=Uj,Z.negate=g3,Z.nthArg=AKe,Z.omit=RYe,Z.omitBy=DYe,Z.once=CGe,Z.orderBy=fGe,Z.over=IKe,Z.overArgs=AGe,Z.overEvery=kKe,Z.overSome=RKe,Z.partial=Pj,Z.partialRight=vce,Z.partition=dGe,Z.pick=NYe,Z.pickBy=Ice,Z.property=$ce,Z.propertyOf=DKe,Z.pull=fWe,Z.pullAll=ace,Z.pullAllBy=dWe,Z.pullAllWith=hWe,Z.pullAt=pWe,Z.range=NKe,Z.rangeRight=PKe,Z.rearg=IGe,Z.reject=mGe,Z.remove=mWe,Z.rest=kGe,Z.reverse=Rj,Z.sampleSize=yGe,Z.set=OYe,Z.setWith=$Ye,Z.shuffle=vGe,Z.slice=gWe,Z.sortBy=_Ge,Z.sortedUniq=EWe,Z.sortedUniqBy=SWe,Z.split=iKe,Z.spread=RGe,Z.tail=TWe,Z.take=CWe,Z.takeRight=AWe,Z.takeRightWhile=IWe,Z.takeWhile=kWe,Z.tap=HWe,Z.throttle=DGe,Z.thru=d3,Z.toArray=Ece,Z.toPairs=kce,Z.toPairsIn=Rce,Z.toPath=FKe,Z.toPlainObject=Tce,Z.transform=MYe,Z.unary=NGe,Z.union=RWe,Z.unionBy=DWe,Z.unionWith=NWe,Z.uniq=PWe,Z.uniqBy=OWe,Z.uniqWith=$We,Z.unset=LYe,Z.unzip=Dj,Z.unzipWith=uce,Z.update=FYe,Z.updateWith=BYe,Z.values=jw,Z.valuesIn=jYe,Z.without=MWe,Z.words=Pce,Z.wrap=PGe,Z.xor=LWe,Z.xorBy=FWe,Z.xorWith=BWe,Z.zip=jWe,Z.zipObject=UWe,Z.zipObjectDeep=zWe,Z.zipWith=VWe,Z.entries=kce,Z.entriesIn=Rce,Z.extend=Cce,Z.extendWith=b3,Uj(Z,Z),Z.add=jKe,Z.attempt=Oce,Z.camelCase=HYe,Z.capitalize=Dce,Z.ceil=UKe,Z.clamp=UYe,Z.clone=$Ge,Z.cloneDeep=LGe,Z.cloneDeepWith=FGe,Z.cloneWith=MGe,Z.conformsTo=BGe,Z.deburr=Nce,Z.defaultTo=bKe,Z.divide=zKe,Z.endsWith=qYe,Z.eq=Md,Z.escape=WYe,Z.escapeRegExp=GYe,Z.every=eGe,Z.find=nGe,Z.findIndex=rce,Z.findKey=mYe,Z.findLast=rGe,Z.findLastIndex=ice,Z.findLastKey=gYe,Z.floor=VKe,Z.forEach=cce,Z.forEachRight=fce,Z.forIn=yYe,Z.forInRight=vYe,Z.forOwn=bYe,Z.forOwnRight=xYe,Z.get=Mj,Z.gt=jGe,Z.gte=UGe,Z.has=EYe,Z.hasIn=Lj,Z.head=oce,Z.identity=Al,Z.includes=uGe,Z.indexOf=rWe,Z.inRange=zYe,Z.invoke=CYe,Z.isArguments=bb,Z.isArray=zn,Z.isArrayBuffer=zGe,Z.isArrayLike=Tl,Z.isArrayLikeObject=Qs,Z.isBoolean=VGe,Z.isBuffer=py,Z.isDate=HGe,Z.isElement=qGe,Z.isEmpty=WGe,Z.isEqual=GGe,Z.isEqualWith=YGe,Z.isError=Oj,Z.isFinite=KGe,Z.isFunction=r0,Z.isInteger=bce,Z.isLength=y3,Z.isMap=xce,Z.isMatch=XGe,Z.isMatchWith=QGe,Z.isNaN=JGe,Z.isNative=ZGe,Z.isNil=tYe,Z.isNull=eYe,Z.isNumber=_ce,Z.isObject=Cs,Z.isObjectLike=Os,Z.isPlainObject=GC,Z.isRegExp=$j,Z.isSafeInteger=nYe,Z.isSet=wce,Z.isString=v3,Z.isSymbol=kc,Z.isTypedArray=Bw,Z.isUndefined=rYe,Z.isWeakMap=iYe,Z.isWeakSet=sYe,Z.join=uWe,Z.kebabCase=YYe,Z.last=Rf,Z.lastIndexOf=lWe,Z.lowerCase=KYe,Z.lowerFirst=XYe,Z.lt=oYe,Z.lte=aYe,Z.max=HKe,Z.maxBy=qKe,Z.mean=WKe,Z.meanBy=GKe,Z.min=YKe,Z.minBy=KKe,Z.stubArray=Vj,Z.stubFalse=Hj,Z.stubObject=OKe,Z.stubString=$Ke,Z.stubTrue=MKe,Z.multiply=XKe,Z.nth=cWe,Z.noConflict=CKe,Z.noop=zj,Z.now=p3,Z.pad=QYe,Z.padEnd=JYe,Z.padStart=ZYe,Z.parseInt=eKe,Z.random=VYe,Z.reduce=hGe,Z.reduceRight=pGe,Z.repeat=tKe,Z.replace=nKe,Z.result=PYe,Z.round=QKe,Z.runInContext=Se,Z.sample=gGe,Z.size=bGe,Z.snakeCase=rKe,Z.some=xGe,Z.sortedIndex=yWe,Z.sortedIndexBy=vWe,Z.sortedIndexOf=bWe,Z.sortedLastIndex=xWe,Z.sortedLastIndexBy=_We,Z.sortedLastIndexOf=wWe,Z.startCase=sKe,Z.startsWith=oKe,Z.subtract=JKe,Z.sum=ZKe,Z.sumBy=eXe,Z.template=aKe,Z.times=LKe,Z.toFinite=i0,Z.toInteger=Kn,Z.toLength=Sce,Z.toLower=uKe,Z.toNumber=Df,Z.toSafeInteger=uYe,Z.toString=gi,Z.toUpper=lKe,Z.trim=cKe,Z.trimEnd=fKe,Z.trimStart=dKe,Z.truncate=hKe,Z.unescape=pKe,Z.uniqueId=BKe,Z.upperCase=mKe,Z.upperFirst=Fj,Z.each=cce,Z.eachRight=fce,Z.first=oce,Uj(Z,function(){var v={};return tp(Z,function(E,R){Ei.call(Z.prototype,R)||(v[R]=E)}),v}(),{chain:!1}),Z.VERSION=r,Mu(["bind","bindKey","curry","curryRight","partial","partialRight"],function(v){Z[v].placeholder=Z}),Mu(["drop","take"],function(v,E){br.prototype[v]=function(R){R=R===n?1:Ro(Kn(R),0);var U=this.__filtered__&&!E?new br(this):this.clone();return U.__filtered__?U.__takeCount__=Xa(R,U.__takeCount__):U.__views__.push({size:Xa(R,z),type:v+(U.__dir__<0?"Right":"")}),U},br.prototype[v+"Right"]=function(R){return this.reverse()[v](R).reverse()}}),Mu(["filter","map","takeWhile"],function(v,E){var R=E+1,U=R==B||R==H;br.prototype[v]=function(X){var re=this.clone();return re.__iteratees__.push({iteratee:hn(X,3),type:R}),re.__filtered__=re.__filtered__||U,re}}),Mu(["head","last"],function(v,E){var R="take"+(E?"Right":"");br.prototype[v]=function(){return this[R](1).value()[0]}}),Mu(["initial","tail"],function(v,E){var R="drop"+(E?"":"Right");br.prototype[v]=function(){return this.__filtered__?new br(this):this[R](1)}}),br.prototype.compact=function(){return this.filter(Al)},br.prototype.find=function(v){return this.filter(v).head()},br.prototype.findLast=function(v){return this.reverse().find(v)},br.prototype.invokeMap=sr(function(v,E){return typeof v=="function"?new br(this):this.map(function(R){return UC(R,v,E)})}),br.prototype.reject=function(v){return this.filter(g3(hn(v)))},br.prototype.slice=function(v,E){v=Kn(v);var R=this;return R.__filtered__&&(v>0||E<0)?new br(R):(v<0?R=R.takeRight(-v):v&&(R=R.drop(v)),E!==n&&(E=Kn(E),R=E<0?R.dropRight(-E):R.take(E-v)),R)},br.prototype.takeRightWhile=function(v){return this.reverse().takeWhile(v).reverse()},br.prototype.toArray=function(){return this.take(z)},tp(br.prototype,function(v,E){var R=/^(?:filter|find|map|reject)|While$/.test(E),U=/^(?:head|last)$/.test(E),X=Z[U?"take"+(E=="last"?"Right":""):E],re=U||/^find/.test(E);X&&(Z.prototype[E]=function(){var ce=this.__wrapped__,ve=U?[1]:arguments,Ae=ce instanceof br,Ze=ve[0],et=Ae||zn(ce),lt=function(pr){var kr=X.apply(Z,Nd([pr],ve));return U&&$t?kr[0]:kr};et&&R&&typeof Ze=="function"&&Ze.length!=1&&(Ae=et=!1);var $t=this.__chain__,Qt=!!this.__actions__.length,pn=re&&!$t,tr=Ae&&!Qt;if(!re&&et){ce=tr?ce:new br(this);var mn=v.apply(ce,ve);return mn.__actions__.push({func:d3,args:[lt],thisArg:n}),new Af(mn,$t)}return pn&&tr?v.apply(this,ve):(mn=this.thru(lt),pn?U?mn.value()[0]:mn.value():mn)})}),Mu(["pop","push","shift","sort","splice","unshift"],function(v){var E=FP[v],R=/^(?:push|sort|unshift)$/.test(v)?"tap":"thru",U=/^(?:pop|shift)$/.test(v);Z.prototype[v]=function(){var X=arguments;if(U&&!this.__chain__){var re=this.value();return E.apply(zn(re)?re:[],X)}return this[R](function(ce){return E.apply(zn(ce)?ce:[],X)})}}),tp(br.prototype,function(v,E){var R=Z[E];if(R){var U=R.name+"";Ei.call(Ow,U)||(Ow[U]=[]),Ow[U].push({name:E,func:R})}}),Ow[s3(n,y).name]=[{name:"wrapper",func:n}],br.prototype.clone=pHe,br.prototype.reverse=mHe,br.prototype.value=gHe,Z.prototype.at=qWe,Z.prototype.chain=WWe,Z.prototype.commit=GWe,Z.prototype.next=YWe,Z.prototype.plant=XWe,Z.prototype.reverse=QWe,Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=JWe,Z.prototype.first=Z.prototype.head,OC&&(Z.prototype[OC]=KWe),Z},Dw=GVe();wi?((wi.exports=Dw)._=Dw,ai._=Dw):an._=Dw}).call(Jt)})(sF,sF.exports);var cfn=sF.exports;const ffn="#/definitions/LibraryConfig",dfn="http://json-schema.org/draft-07/schema#",hfn={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"},{$ref:"#/definitions/VegaComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire","vega"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LibraryConfig:{additionalProperties:!1,description:'LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\n\nBelow is the general template that should be followed when constructing a Library configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc2/src/parser/LibraryConfigSchema.json",  "baseComponents": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  "components": {    // Components here are defined exactly as is in the StudyConfig  },  "sequences": {   // Sequences here are defined as "key": "value" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequences:{additionalProperties:{$ref:"#/definitions/ComponentBlock"},description:"The order of the components in the study. This might include some randomness.",type:"object"}},required:["$schema","components","sequences"],type:"object"},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},MatrixResponse:{additionalProperties:!1,description:`The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, \`answerOptions\` can be set to one of the following custom strings: 'satisfaction5','satisfaction7', 'likely5', 'likely7'. This will automatically generate the appropriate headers for the matrix.

Example for a 5-scale satisfaction matrix with three questions:

\`\`\`js { "id": "multi-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.", "location": "aboveStimulus", "type": "matrix-radio", "answerOptions": "satisfaction5", "questionOptions": [  "The tool we created",  "The technique we developed",  "The authors of the tools" ] } \`\`\`

Here's an example using custom columns (answerOptions):

\`\`\`js { "id": "multi-custom", "prompt": "Which categories do the following items belong to?", "location": "aboveStimulus", "type": "matrix-checkbox", "answerOptions": [  "Has Legs",  "Has Wings",  "Can Swim" ], "questionOptions": [  "Dog",  "Snake",  "Eagle",  "Salmon",  "Platypus" ]

} \`\`\``,properties:{answerOptions:{anyOf:[{items:{type:"string"},type:"array"},{const:"likely5",type:"string"},{const:"likely7",type:"string"},{const:"satisfaction5",type:"string"},{const:"satisfaction7",type:"string"}],description:"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},questionOptions:{description:"The question options (rows) are the prompts for each response you'd like to record.",items:{type:"string"},type:"array"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{enum:["matrix-radio","matrix-checkbox"],type:"string"}},required:["answerOptions","id","prompt","questionOptions","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc2/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc2/src/public/example-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"},{$ref:"#/definitions/MatrixResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered. Defaults to true.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},VegaComponent:{anyOf:[{$ref:"#/definitions/VegaComponentPath"},{$ref:"#/definitions/VegaComponentConfig"}]},VegaComponentConfig:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},config:{description:"The vega or vega-lite configuration.",type:"object"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["config","response","type"],type:"object"},VegaComponentPath:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the vega file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"vega",type:"string"}},required:["path","response","type"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonDisableTime:{description:"A timeout (in ms) after which the next button will be disabled.",type:"number"},nextButtonEnableTime:{description:"A timer (in ms) after which the next button will be enabled.",type:"number"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{description:"Whether or not to record audio for a component. Only relevant if StudyConfig.recordStudyAudio is true. Defaults to true.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},pfn={$ref:ffn,$schema:dfn,definitions:hfn},O7e=new Fae;O7e.addSchema(pfn);const mfn=O7e.getSchema("#/definitions/LibraryConfig");function $7e(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?$7e(n,t):`$${t}.components.${n}`)}}function M7e(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return M7e(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=$7e(l,a),l}return r})}}function gfn(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;Z2(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function yfn(e,t){let n=!1,r;try{r=_9.parse(e),n=mfn(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function vfn(e){const t=await(await fetch(`${ul}libraries/${e}/config.json`)).text();return yfn(t,e)}async function bfn(e,t,n){const r=e.map(async s=>{const o=await vfn(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(Z2(a)){const u=cfn.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const L7e=new Fae;L7e.addSchema(lfn);const __e=L7e.getSchema("#/definitions/GlobalConfig"),F7e=new Fae;F7e.addSchema(sfn);const w_e=F7e.getSchema("#/definitions/StudyConfig");function xfn(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function _fn(e){const t=_9.parse(e),n=__e(t),r=xfn(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...__e.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function B7e(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):B7e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function wfn(e,t){const n=[],r=[];gfn(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;Z2(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=bke(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return B7e(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function Bae(e){let t=!1,n;try{n=_9.parse(e),t=w_e(n)}catch{t=!1}let r=w_e.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await bfn(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=M7e(n.sequence,o,r);const{errors:a,warnings:u}=wfn(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function Efn(e){const t=await(await fetch(`${ul}${e}`)).text();return await Bae(t)}async function jae(e,t){const n=t.configsList.find(r=>CAe(r)===e);if(n){const r=t.configs[n];return await Efn(`${r.path}`)}return null}async function Sfn(e){const t={},n=e.configsList.map(async i=>jae(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function Tfn({globalConfig:e}){const t=K_(),[n,r]=N.useState(null),i=e.configsList.includes(t)||t==="revisit-widget";N.useEffect(()=>{if(t!=="revisit-widget")return jae(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&Bae(m.data.payload).then(async g=>{r(g);const y=await Gxe(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:y},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=N.useState([]),[a,u]=N.useState(null),{storageEngine:l}=fo(),[c]=Pv(),f=N.useMemo(()=>c.get("participantId"),[c]);N.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await Gxe(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(c.entries()),b=await fetch("https://api.ipify.org?format=json").catch(I=>""),x=b instanceof Response?await b.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:x.ip},S=await l.initializeParticipantSession(t,y,n,w,f||g),T=await l.getModes(t),C=await U1t(t,n,S.sequence,w,S.answers,T,S.participantId);u(C),o([{element:_.jsx(won,{}),children:[{path:"/",element:_.jsx(Pje,{to:Mp(0),replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(zs,{order:2,mb:8,children:"Error loading config"}),_.jsx(M4,{issues:n.errors,type:"error"})]}):_.jsx(Wsn,{})}]}])}p()},[l,n,t,c,f]);const d=yAe(s);let h=null;return i?s.length===0?h=_.jsx(uf,{visible:!0}):h=d&&a?_.jsx(Eke.Provider,{value:a,children:_.jsx(Lyt,{store:a.store,children:d})}):_.jsx(j1,{}):h=_.jsx(j1,{}),h}function C6({studyIds:e}){const t=jh(),{studyId:n}=sm(),r=Nv(),i=e.map(o=>({value:o,label:o})),s=r.pathname.includes("analysis");return _.jsx(Oi.Header,{p:"md",children:_.jsxs(qc,{mt:-7,align:"center",children:[_.jsx(qc.Col,{span:6,children:_.jsxs(qt,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[_.jsx(Dv,{w:40,src:`${ul}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(Zc,{w:"md"}),_.jsx(zs,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(qc.Col,{span:6,children:_.jsxs(qt,{justify:"flex-end",direction:"row",children:[s&&_.jsx(T2,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),_.jsx(EAe,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function j7e({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=rQ(!1),[a,u]=N.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;ane(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return _.jsxs(_.Fragment,{children:[_.jsxs(bi,{style:{gap:n},children:[_.jsx(ss,{label:"Download all participants data as JSON",children:_.jsx(gn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:_.jsx(lct,{})})}),_.jsx(ss,{label:"Download all participants data as a tidy CSV",children:_.jsx(gn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:_.jsx(SAe,{})})})]}),i&&a.length>0&&_.jsx(uMt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}var E_e={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U7e=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Cfn=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Uae={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(U7e(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Cfn(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new Afn;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Afn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ifn=function(e){const t=U7e(e);return Uae.encodeByteArray(t,!0)},oF=function(e){return Ifn(e).replace(/\./g,"")},z7e=function(e){try{return Uae.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V7e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kfn=()=>V7e().__FIREBASE_DEFAULTS__,Rfn=()=>{if(typeof process>"u"||typeof E_e>"u")return;const e=E_e.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Dfn=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&z7e(e[1]);return t&&JSON.parse(t)},A9=()=>{try{return kfn()||Rfn()||Dfn()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},H7e=e=>{var t,n;return(n=(t=A9())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Nfn=e=>{const t=H7e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},q7e=()=>{var e;return(e=A9())===null||e===void 0?void 0:e.config},W7e=e=>{var t;return(t=A9())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pfn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[oF(JSON.stringify(n)),oF(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ofn(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Va())}function $fn(){var e;const t=(e=A9())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Mfn(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function Lfn(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ffn(){const e=Va();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Bfn(){return!$fn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zae(){try{return typeof indexedDB=="object"}catch{return!1}}function jfn(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ufn="FirebaseError";class qm extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Ufn,Object.setPrototypeOf(this,qm.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,SC.prototype.create)}}class SC{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?zfn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new qm(i,a,r)}}function zfn(e,t){return e.replace(Vfn,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const Vfn=/\{\$([^}]+)}/g;function Hfn(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function bD(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(S_e(s)&&S_e(o)){if(!bD(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function S_e(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function qfn(e,t){const n=new Wfn(e,t);return n.subscribe.bind(n)}class Wfn{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Gfn(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=nH),i.error===void 0&&(i.error=nH),i.complete===void 0&&(i.complete=nH);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Gfn(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function nH(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yfn=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kfn=1e3,Xfn=2,Qfn=4*60*60*1e3,Jfn=.5;function Zfn(e,t=Kfn,n=Xfn){const r=t*Math.pow(n,e),i=Math.round(Jfn*r*(Math.random()-.5)*2);return Math.min(Qfn,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(e){return e&&e._delegate?e._delegate:e}class wm{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class edn{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new vD;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(ndn(t))try{this.getOrInitializeService({instanceIdentifier:Yb})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Yb){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Yb){return this.instances.has(t)}getOptions(t=Yb){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tdn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Yb){return this.component?this.component.multipleInstances?t:Yb:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tdn(e){return e===Yb?void 0:e}function ndn(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rdn{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new edn(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Dr||(Dr={}));const idn={debug:Dr.DEBUG,verbose:Dr.VERBOSE,info:Dr.INFO,warn:Dr.WARN,error:Dr.ERROR,silent:Dr.SILENT},sdn=Dr.INFO,odn={[Dr.DEBUG]:"log",[Dr.VERBOSE]:"log",[Dr.INFO]:"info",[Dr.WARN]:"warn",[Dr.ERROR]:"error"},adn=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=odn[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class I9{constructor(t){this.name=t,this._logLevel=sdn,this._logHandler=adn,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Dr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?idn[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Dr.DEBUG,...t),this._logHandler(this,Dr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Dr.VERBOSE,...t),this._logHandler(this,Dr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Dr.INFO,...t),this._logHandler(this,Dr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Dr.WARN,...t),this._logHandler(this,Dr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Dr.ERROR,...t),this._logHandler(this,Dr.ERROR,...t)}}const udn=(e,t)=>t.some(n=>e instanceof n);let T_e,C_e;function ldn(){return T_e||(T_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cdn(){return C_e||(C_e=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G7e=new WeakMap,DK=new WeakMap,Y7e=new WeakMap,rH=new WeakMap,Vae=new WeakMap;function fdn(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(R1(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&G7e.set(n,e)}).catch(()=>{}),Vae.set(t,e),t}function ddn(e){if(DK.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});DK.set(e,t)}let NK={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return DK.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Y7e.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return R1(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function hdn(e){NK=e(NK)}function pdn(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(iH(this),t,...n);return Y7e.set(r,t.sort?t.sort():[t]),R1(r)}:cdn().includes(e)?function(...t){return e.apply(iH(this),t),R1(G7e.get(this))}:function(...t){return R1(e.apply(iH(this),t))}}function mdn(e){return typeof e=="function"?pdn(e):(e instanceof IDBTransaction&&ddn(e),udn(e,ldn())?new Proxy(e,NK):e)}function R1(e){if(e instanceof IDBRequest)return fdn(e);if(rH.has(e))return rH.get(e);const t=mdn(e);return t!==e&&(rH.set(e,t),Vae.set(t,e)),t}const iH=e=>Vae.get(e);function gdn(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=R1(o);return r&&o.addEventListener("upgradeneeded",u=>{r(R1(o.result),u.oldVersion,u.newVersion,R1(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const ydn=["get","getKey","getAll","getAllKeys","count"],vdn=["put","add","delete","clear"],sH=new Map;function A_e(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(sH.get(t))return sH.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=vdn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ydn.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return sH.set(t,s),s}hdn(e=>({...e,get:(t,n,r)=>A_e(t,n)||e.get(t,n,r),has:(t,n)=>!!A_e(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bdn{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xdn(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xdn(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const PK="@firebase/app",I_e="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new I9("@firebase/app"),_dn="@firebase/app-compat",wdn="@firebase/analytics-compat",Edn="@firebase/analytics",Sdn="@firebase/app-check-compat",Tdn="@firebase/app-check",Cdn="@firebase/auth",Adn="@firebase/auth-compat",Idn="@firebase/database",kdn="@firebase/database-compat",Rdn="@firebase/functions",Ddn="@firebase/functions-compat",Ndn="@firebase/installations",Pdn="@firebase/installations-compat",Odn="@firebase/messaging",$dn="@firebase/messaging-compat",Mdn="@firebase/performance",Ldn="@firebase/performance-compat",Fdn="@firebase/remote-config",Bdn="@firebase/remote-config-compat",jdn="@firebase/storage",Udn="@firebase/storage-compat",zdn="@firebase/firestore",Vdn="@firebase/vertexai-preview",Hdn="@firebase/firestore-compat",qdn="firebase",Wdn="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OK="[DEFAULT]",Gdn={[PK]:"fire-core",[_dn]:"fire-core-compat",[Edn]:"fire-analytics",[wdn]:"fire-analytics-compat",[Tdn]:"fire-app-check",[Sdn]:"fire-app-check-compat",[Cdn]:"fire-auth",[Adn]:"fire-auth-compat",[Idn]:"fire-rtdb",[kdn]:"fire-rtdb-compat",[Rdn]:"fire-fn",[Ddn]:"fire-fn-compat",[Ndn]:"fire-iid",[Pdn]:"fire-iid-compat",[Odn]:"fire-fcm",[$dn]:"fire-fcm-compat",[Mdn]:"fire-perf",[Ldn]:"fire-perf-compat",[Fdn]:"fire-rc",[Bdn]:"fire-rc-compat",[jdn]:"fire-gcs",[Udn]:"fire-gcs-compat",[zdn]:"fire-fst",[Hdn]:"fire-fst-compat",[Vdn]:"fire-vertex","fire-js":"fire-js",[qdn]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=new Map,Ydn=new Map,$K=new Map;function k_e(e,t){try{e.container.addComponent(t)}catch(n){I_.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Rg(e){const t=e.name;if($K.has(t))return I_.debug(`There were multiple attempts to register component ${t}.`),!1;$K.set(t,e);for(const n of aF.values())k_e(n,e);for(const n of Ydn.values())k_e(n,e);return!0}function TC(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function jp(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kdn={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},D1=new SC("app","Firebase",Kdn);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xdn{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw D1.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yw=Wdn;function K7e(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:OK,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw D1.create("bad-app-name",{appName:String(i)});if(n||(n=q7e()),!n)throw D1.create("no-options");const s=aF.get(i);if(s){if(bD(n,s.options)&&bD(r,s.config))return s;throw D1.create("duplicate-app",{appName:i})}const o=new rdn(i);for(const u of $K.values())o.addComponent(u);const a=new Xdn(n,r,o);return aF.set(i,a),a}function Hae(e=OK){const t=aF.get(e);if(!t&&e===OK&&q7e())return K7e();if(!t)throw D1.create("no-app",{appName:e});return t}function Ch(e,t,n){var r;let i=(r=Gdn[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),I_.warn(a.join(" "));return}Rg(new wm(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qdn="firebase-heartbeat-database",Jdn=1,xD="firebase-heartbeat-store";let oH=null;function X7e(){return oH||(oH=gdn(Qdn,Jdn,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(xD)}catch(n){console.warn(n)}}}}).catch(e=>{throw D1.create("idb-open",{originalErrorMessage:e.message})})),oH}async function Zdn(e){try{const n=(await X7e()).transaction(xD),r=await n.objectStore(xD).get(Q7e(e));return await n.done,r}catch(t){if(t instanceof qm)I_.warn(t.message);else{const n=D1.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});I_.warn(n.message)}}}async function R_e(e,t){try{const r=(await X7e()).transaction(xD,"readwrite");await r.objectStore(xD).put(t,Q7e(e)),await r.done}catch(n){if(n instanceof qm)I_.warn(n.message);else{const r=D1.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});I_.warn(r.message)}}}function Q7e(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ehn=1024,thn=30*24*60*60*1e3;class nhn{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ihn(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=D_e();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=thn}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=D_e(),{heartbeatsToSend:r,unsentEntries:i}=rhn(this._heartbeatsCache.heartbeats),s=oF(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function D_e(){return new Date().toISOString().substring(0,10)}function rhn(e,t=ehn){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),N_e(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),N_e(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ihn{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zae()?jfn().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Zdn(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return R_e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return R_e(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function N_e(e){return oF(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function shn(e){Rg(new wm("platform-logger",t=>new bdn(t),"PRIVATE")),Rg(new wm("heartbeat",t=>new nhn(t),"PRIVATE")),Ch(PK,I_e,e),Ch(PK,I_e,"esm2017"),Ch("fire-js","")}shn("");function J7e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ohn=J7e,Z7e=new SC("auth","Firebase",J7e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uF=new I9("@firebase/auth");function ahn(e,...t){uF.logLevel<=Dr.WARN&&uF.warn(`Auth (${yw}): ${e}`,...t)}function A6(e,...t){uF.logLevel<=Dr.ERROR&&uF.error(`Auth (${yw}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(e,...t){throw Wae(e,...t)}function Ah(e,...t){return Wae(e,...t)}function qae(e,t,n){const r=Object.assign(Object.assign({},ohn()),{[t]:n});return new SC("auth","Firebase",r).create(t,{appName:e.name})}function N1(e){return qae(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uhn(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Em(e,"argument-error"),qae(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Wae(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Z7e.create(e,...t)}function Rn(e,t,...n){if(!e)throw Wae(t,...n)}function U0(e){const t="INTERNAL ASSERTION FAILED: "+e;throw A6(t),new Error(t)}function Dg(e,t){e||U0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MK(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function lhn(){return P_e()==="http:"||P_e()==="https:"}function P_e(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function chn(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lhn()||Mfn()||"connection"in navigator)?navigator.onLine:!0}function fhn(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(t,n){this.shortDelay=t,this.longDelay=n,Dg(n>t,"Short delay should be less than long delay!"),this.isMobile=Ofn()||Lfn()}get(){return chn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gae(e,t){Dg(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eUe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;U0("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;U0("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;U0("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dhn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hhn=new gP(3e4,6e4);function k9(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function CC(e,t,n,r,i={}){return tUe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=mP(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),eUe.fetch()(rUe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function tUe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},dhn),t);try{const i=new phn(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ZO(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ZO(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ZO(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw ZO(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw qae(e,c,l);Em(e,c)}}catch(i){if(i instanceof qm)throw i;Em(e,"network-request-failed",{message:String(i)})}}async function nUe(e,t,n,r,i={}){const s=await CC(e,t,n,r,i);return"mfaPendingCredential"in s&&Em(e,"multi-factor-auth-required",{_serverResponse:s}),s}function rUe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Gae(e.config,i):`${e.config.apiScheme}://${i}`}class phn{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ah(this.auth,"network-request-failed")),hhn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ZO(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ah(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mhn(e,t){return CC(e,"POST","/v1/accounts:delete",t)}async function iUe(e,t){return CC(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ghn(e,t=!1){const n=Zi(e),r=await n.getIdToken(t),i=Yae(r);Rn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:$k(aH(i.auth_time)),issuedAtTime:$k(aH(i.iat)),expirationTime:$k(aH(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function aH(e){return Number(e)*1e3}function Yae(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return A6("JWT malformed, contained fewer than 3 sections"),null;try{const i=z7e(n);return i?JSON.parse(i):(A6("Failed to decode base64 JWT payload"),null)}catch(i){return A6("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function O_e(e){const t=Yae(e);return Rn(t,"internal-error"),Rn(typeof t.exp<"u","internal-error"),Rn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof qm&&yhn(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function yhn({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vhn{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LK{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=$k(this.lastLoginAt),this.creationTime=$k(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lF(e){var t;const n=e.auth,r=await e.getIdToken(),i=await _D(e,iUe(n,{idToken:r}));Rn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?sUe(s.providerUserInfo):[],a=xhn(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new LK(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function bhn(e){const t=Zi(e);await lF(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function xhn(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function sUe(e){return e.map(t=>{var{providerId:n}=t,r=BD(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _hn(e,t){const n=await tUe(e,{},async()=>{const r=mP({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=rUe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",eUe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function whn(e,t){return CC(e,"POST","/v2/accounts:revokeToken",k9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Rn(t.idToken,"internal-error"),Rn(typeof t.idToken<"u","internal-error"),Rn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):O_e(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Rn(t.length!==0,"internal-error");const n=O_e(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Rn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await _hn(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new jS;return r&&(Rn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Rn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Rn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new jS,this.toJSON())}_performRefresh(){return U0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _y(e,t){Rn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class z0{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=BD(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vhn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new LK(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await _D(this,this.stsTokenManager.getToken(this.auth,t));return Rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ghn(this,t)}reload(){return bhn(this)}_assign(t){this!==t&&(Rn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new z0(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await lF(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jp(this.auth.app))return Promise.reject(N1(this.auth));const t=await this.getIdToken();return await _D(this,mhn(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,b=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:x,emailVerified:w,isAnonymous:S,providerData:T,stsTokenManager:C}=n;Rn(x&&C,t,"internal-error");const I=jS.fromJSON(this.name,C);Rn(typeof x=="string",t,"internal-error"),_y(f,t.name),_y(d,t.name),Rn(typeof w=="boolean",t,"internal-error"),Rn(typeof S=="boolean",t,"internal-error"),_y(h,t.name),_y(p,t.name),_y(m,t.name),_y(g,t.name),_y(y,t.name),_y(b,t.name);const D=new z0({uid:x,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:S,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:I,createdAt:y,lastLoginAt:b});return T&&Array.isArray(T)&&(D.providerData=T.map(k=>Object.assign({},k))),g&&(D._redirectEventId=g),D}static async _fromIdTokenResponse(t,n,r=!1){const i=new jS;i.updateFromServerResponse(n);const s=new z0({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await lF(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Rn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?sUe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new jS;a.updateFromIdToken(r);const u=new z0({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new LK(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_e=new Map;function V0(e){Dg(e instanceof Function,"Expected a class definition");let t=$_e.get(e);return t?(Dg(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,$_e.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oUe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}oUe.type="NONE";const M_e=oUe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I6(e,t,n){return`firebase:${e}:${t}:${n}`}class US{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=I6(this.userKey,i.apiKey,s),this.fullPersistenceKey=I6("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?z0._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new US(V0(M_e),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||V0(M_e);const o=I6(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=z0._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new US(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new US(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_e(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lUe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(aUe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fUe(t))return"Blackberry";if(dUe(t))return"Webos";if(Kae(t))return"Safari";if((t.includes("chrome/")||uUe(t))&&!t.includes("edge/"))return"Chrome";if(cUe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aUe(e=Va()){return/firefox\//i.test(e)}function Kae(e=Va()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function uUe(e=Va()){return/crios\//i.test(e)}function lUe(e=Va()){return/iemobile/i.test(e)}function cUe(e=Va()){return/android/i.test(e)}function fUe(e=Va()){return/blackberry/i.test(e)}function dUe(e=Va()){return/webos/i.test(e)}function R9(e=Va()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Ehn(e=Va()){var t;return R9(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Shn(){return Ffn()&&document.documentMode===10}function hUe(e=Va()){return R9(e)||cUe(e)||dUe(e)||fUe(e)||/windows phone/i.test(e)||lUe(e)}function Thn(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pUe(e,t=[]){let n;switch(e){case"Browser":n=L_e(Va());break;case"Worker":n=`${L_e(Va())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${yw}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Chn{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ahn(e,t={}){return CC(e,"GET","/v2/passwordPolicy",k9(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ihn=6;class khn{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Ihn,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rhn{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new F_e(this),this.idTokenSubscription=new F_e(this),this.beforeStateQueue=new Chn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z7e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=V0(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await US.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await iUe(this,{idToken:t}),r=await z0._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(jp(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await lF(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=fhn()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(jp(this.app))return Promise.reject(N1(this));const n=t?Zi(t):null;return n&&Rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return jp(this.app)?Promise.reject(N1(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return jp(this.app)?Promise.reject(N1(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(V0(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Ahn(this),n=new khn(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new SC("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await whn(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&V0(t)||this._popupRedirectResolver;Rn(n,this,"argument-error"),this.redirectPersistenceManager=await US.create(this,[V0(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Rn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=pUe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&ahn(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yP(e){return Zi(e)}class F_e{constructor(t){this.auth=t,this.observer=null,this.addObserver=qfn(n=>this.observer=n)}get next(){return Rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xae={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Dhn(e){Xae=e}function Nhn(e){return Xae.loadJS(e)}function Phn(){return Xae.gapiScript}function Ohn(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $hn(e,t){const n=TC(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(bD(s,t??{}))return i;Em(i,"already-initialized")}return n.initialize({options:t})}function Mhn(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(V0);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function Lhn(e,t,n){const r=yP(e);Rn(r._canInitEmulator,r,"emulator-config-failed"),Rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=mUe(t),{host:o,port:a}=Fhn(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Bhn()}function mUe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Fhn(e){const t=mUe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:B_e(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:B_e(o)}}}function B_e(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Bhn(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gUe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return U0("not implemented")}_getIdTokenResponse(t){return U0("not implemented")}_linkToIdToken(t,n){return U0("not implemented")}_getReauthenticationResolver(t){return U0("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zS(e,t){return nUe(e,"POST","/v1/accounts:signInWithIdp",k9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jhn="http://localhost";class k_ extends gUe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new k_(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Em("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=BD(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new k_(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return zS(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,zS(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,zS(t,n)}buildRequest(){const t={requestUri:jhn,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=mP(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qae{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP extends Qae{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends vP{constructor(){super("facebook.com")}static credential(t){return k_._fromParams({providerId:qy.PROVIDER_ID,signInMethod:qy.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qy.credentialFromTaggedObject(t)}static credentialFromError(t){return qy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qy.credential(t.oauthAccessToken)}catch{return null}}}qy.FACEBOOK_SIGN_IN_METHOD="facebook.com";qy.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0 extends vP{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return k_._fromParams({providerId:k0.PROVIDER_ID,signInMethod:k0.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return k0.credentialFromTaggedObject(t)}static credentialFromError(t){return k0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return k0.credential(n,r)}catch{return null}}}k0.GOOGLE_SIGN_IN_METHOD="google.com";k0.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy extends vP{constructor(){super("github.com")}static credential(t){return k_._fromParams({providerId:Wy.PROVIDER_ID,signInMethod:Wy.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wy.credentialFromTaggedObject(t)}static credentialFromError(t){return Wy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wy.credential(t.oauthAccessToken)}catch{return null}}}Wy.GITHUB_SIGN_IN_METHOD="github.com";Wy.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy extends vP{constructor(){super("twitter.com")}static credential(t,n){return k_._fromParams({providerId:Gy.PROVIDER_ID,signInMethod:Gy.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Gy.credentialFromTaggedObject(t)}static credentialFromError(t){return Gy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Gy.credential(n,r)}catch{return null}}}Gy.TWITTER_SIGN_IN_METHOD="twitter.com";Gy.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uhn(e,t){return nUe(e,"POST","/v1/accounts:signUp",k9(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await z0._fromIdTokenResponse(t,r,i),o=j_e(r);return new yv({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=j_e(r);return new yv({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function j_e(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zhn(e){var t;if(jp(e.app))return Promise.reject(N1(e));const n=yP(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new yv({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Uhn(n,{returnSecureToken:!0}),i=await yv._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF extends qm{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,cF.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new cF(t,n,r,i)}}function yUe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cF._fromErrorAndOperation(e,s,t,r):s})}async function Vhn(e,t,n=!1){const r=await _D(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return yv._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hhn(e,t,n=!1){const{auth:r}=e;if(jp(r.app))return Promise.reject(N1(r));const i="reauthenticate";try{const s=await _D(e,yUe(r,i,t,e),n);Rn(s.idToken,r,"internal-error");const o=Yae(s.idToken);Rn(o,r,"internal-error");const{sub:a}=o;return Rn(e.uid===a,r,"user-mismatch"),yv._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Em(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qhn(e,t,n=!1){if(jp(e.app))return Promise.reject(N1(e));const r="signIn",i=await yUe(e,r,t),s=await yv._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Whn(e,t,n,r){return Zi(e).onIdTokenChanged(t,n,r)}function Ghn(e,t,n){return Zi(e).beforeAuthStateChanged(t,n)}function Yhn(e,t,n,r){return Zi(e).onAuthStateChanged(t,n,r)}function Khn(e){return Zi(e).signOut()}const fF="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vUe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fF,"1"),this.storage.removeItem(fF),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xhn(){const e=Va();return Kae(e)||R9(e)}const Qhn=1e3,Jhn=10;class bUe extends vUe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Xhn()&&Thn(),this.fallbackToPolling=hUe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Shn()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Jhn):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Qhn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}bUe.type="LOCAL";const Zhn=bUe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xUe extends vUe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}xUe.type="SESSION";const _Ue=xUe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function epn(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D9{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new D9(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await epn(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}D9.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jae(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tpn{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=Jae("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(){return window}function npn(e){tm().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wUe(){return typeof tm().WorkerGlobalScope<"u"&&typeof tm().importScripts=="function"}async function rpn(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ipn(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function spn(){return wUe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EUe="firebaseLocalStorageDb",opn=1,dF="firebaseLocalStorage",SUe="fbase_key";class bP{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function N9(e,t){return e.transaction([dF],t?"readwrite":"readonly").objectStore(dF)}function apn(){const e=indexedDB.deleteDatabase(EUe);return new bP(e).toPromise()}function FK(){const e=indexedDB.open(EUe,opn);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(dF,{keyPath:SUe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(dF)?t(r):(r.close(),await apn(),t(await FK()))})})}async function U_e(e,t,n){const r=N9(e,!0).put({[SUe]:t,value:n});return new bP(r).toPromise()}async function upn(e,t){const n=N9(e,!1).get(t),r=await new bP(n).toPromise();return r===void 0?null:r.value}function z_e(e,t){const n=N9(e,!0).delete(t);return new bP(n).toPromise()}const lpn=800,cpn=3;class TUe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await FK(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>cpn)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wUe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=D9._getInstance(spn()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await rpn(),!this.activeServiceWorker)return;this.sender=new tpn(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||ipn()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await FK();return await U_e(t,fF,"1"),await z_e(t,fF),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>U_e(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>upn(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>z_e(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=N9(i,!1).getAll();return new bP(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lpn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}TUe.type="LOCAL";const fpn=TUe;new gP(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CUe(e,t){return t?V0(t):(Rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zae extends gUe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return zS(t,this._buildIdpRequest())}_linkToIdToken(t,n){return zS(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return zS(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function dpn(e){return qhn(e.auth,new Zae(e),e.bypassAuthState)}function hpn(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),Hhn(n,new Zae(e),e.bypassAuthState)}async function ppn(e){const{auth:t,user:n}=e;return Rn(n,t,"internal-error"),Vhn(n,new Zae(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AUe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return dpn;case"linkViaPopup":case"linkViaRedirect":return ppn;case"reauthViaPopup":case"reauthViaRedirect":return hpn;default:Em(this.auth,"internal-error")}}resolve(t){Dg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Dg(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mpn=new gP(2e3,1e4);async function gpn(e,t,n){if(jp(e.app))return Promise.reject(Ah(e,"operation-not-supported-in-this-environment"));const r=yP(e);uhn(e,t,Qae);const i=CUe(r,n);return new Ax(r,"signInViaPopup",t,i).executeNotNull()}class Ax extends AUe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ax.currentPopupAction&&Ax.currentPopupAction.cancel(),Ax.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Rn(t,this.auth,"internal-error"),t}async onExecution(){Dg(this.filter.length===1,"Popup operations only handle one event");const t=Jae();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ah(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ah(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ax.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ah(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,mpn.get())};t()}}Ax.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ypn="pendingRedirect",k6=new Map;class vpn extends AUe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=k6.get(this.auth._key());if(!t){try{const r=await bpn(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}k6.set(this.auth._key(),t)}return this.bypassAuthState||k6.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bpn(e,t){const n=wpn(t),r=_pn(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function xpn(e,t){k6.set(e._key(),t)}function _pn(e){return V0(e._redirectPersistence)}function wpn(e){return I6(ypn,e.config.apiKey,e.name)}async function Epn(e,t,n=!1){if(jp(e.app))return Promise.reject(N1(e));const r=yP(e),i=CUe(r,t),o=await new vpn(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Spn=10*60*1e3;class Tpn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!Cpn(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!IUe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ah(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Spn&&this.cachedEventUids.clear(),this.cachedEventUids.has(V_e(t))}saveEventToCache(t){this.cachedEventUids.add(V_e(t)),this.lastProcessedEventTime=Date.now()}}function V_e(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function IUe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function Cpn(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IUe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Apn(e,t={}){return CC(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ipn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kpn=/^https?/;async function Rpn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Apn(e);for(const n of t)try{if(Dpn(n))return}catch{}Em(e,"unauthorized-domain")}function Dpn(e){const t=MK(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!kpn.test(n))return!1;if(Ipn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Npn=new gP(3e4,6e4);function H_e(){const e=tm().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Ppn(e){return new Promise((t,n)=>{var r,i,s;function o(){H_e(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{H_e(),n(Ah(e,"network-request-failed"))},timeout:Npn.get()})}if(!((i=(r=tm().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=tm().gapi)===null||s===void 0)&&s.load)o();else{const a=Ohn("iframefcb");return tm()[a]=()=>{gapi.load?o():n(Ah(e,"network-request-failed"))},Nhn(`${Phn()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw R6=null,t})}let R6=null;function Opn(e){return R6=R6||Ppn(e),R6}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $pn=new gP(5e3,15e3),Mpn="__/auth/iframe",Lpn="emulator/auth/iframe",Fpn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Bpn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jpn(e){const t=e.config;Rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Gae(t,Lpn):`https://${e.config.authDomain}/${Mpn}`,r={apiKey:t.apiKey,appName:e.name,v:yw},i=Bpn.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${mP(r).slice(1)}`}async function Upn(e){const t=await Opn(e),n=tm().gapi;return Rn(n,e,"internal-error"),t.open({where:document.body,url:jpn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fpn,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ah(e,"network-request-failed"),a=tm().setTimeout(()=>{s(o)},$pn.get());function u(){tm().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zpn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Vpn=500,Hpn=600,qpn="_blank",Wpn="http://localhost";class q_e{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Gpn(e,t,n,r=Vpn,i=Hpn){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},zpn),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Va().toLowerCase();n&&(a=uUe(l)?qpn:n),aUe(l)&&(t=t||Wpn,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Ehn(l)&&a!=="_self")return Ypn(t||"",a),new q_e(null);const f=window.open(t||"",a,c);Rn(f,e,"popup-blocked");try{f.focus()}catch{}return new q_e(f)}function Ypn(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kpn="__/auth/handler",Xpn="emulator/auth/handler",Qpn=encodeURIComponent("fac");async function W_e(e,t,n,r,i,s){Rn(e.config.authDomain,e,"auth-domain-config-required"),Rn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:yw,eventId:i};if(t instanceof Qae){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Hfn(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof vP){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Qpn}=${encodeURIComponent(u)}`:"";return`${Jpn(e)}?${mP(a).slice(1)}${l}`}function Jpn({config:e}){return e.emulator?Gae(e,Xpn):`https://${e.authDomain}/${Kpn}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uH="webStorageSupport";class Zpn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_Ue,this._completeRedirectFn=Epn,this._overrideRedirectResult=xpn}async _openPopup(t,n,r,i){var s;Dg((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await W_e(t,n,r,MK(),i);return Gpn(t,o,Jae())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await W_e(t,n,r,MK(),i);return npn(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Dg(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Upn(t),r=new Tpn(t);return n.register("authEvent",i=>(Rn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(uH,{type:uH},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[uH];o!==void 0&&n(!!o),Em(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Rpn(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return hUe()||Kae()||R9()}}const kUe=Zpn;var G_e="@firebase/auth",Y_e="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class emn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tmn(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nmn(e){Rg(new wm("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Rn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pUe(e)},l=new Rhn(r,i,s,u);return Mhn(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Rg(new wm("auth-internal",t=>{const n=yP(t.getProvider("auth").getImmediate());return(r=>new emn(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ch(G_e,Y_e,tmn(e)),Ch(G_e,Y_e,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rmn=5*60,imn=W7e("authIdTokenMaxAge")||rmn;let K_e=null;const smn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>imn)return;const i=n==null?void 0:n.token;K_e!==i&&(K_e=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function hF(e=Hae()){const t=TC(e,"auth");if(t.isInitialized())return t.getImmediate();const n=$hn(e,{popupRedirectResolver:kUe,persistence:[fpn,Zhn,_Ue]}),r=W7e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=smn(s.toString());Ghn(n,o,()=>o(n.currentUser)),Whn(n,a=>o(a))}}const i=H7e("auth");return i&&Lhn(n,`http://${i}`),n}function omn(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Dhn({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Ah("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",omn().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nmn("Browser");var amn="firebase",umn="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ch(amn,umn,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RUe="firebasestorage.googleapis.com",DUe="storageBucket",lmn=2*60*1e3,cmn=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks extends qm{constructor(t,n,r=0){super(lH(t),`Firebase Storage: ${n} (${lH(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ks.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return lH(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ys;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ys||(Ys={}));function lH(e){return"storage/"+e}function eue(){const e="An unknown error occurred, please check the error payload for server response.";return new Ks(Ys.UNKNOWN,e)}function fmn(e){return new Ks(Ys.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function dmn(e){return new Ks(Ys.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hmn(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ks(Ys.UNAUTHENTICATED,e)}function pmn(){return new Ks(Ys.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mmn(e){return new Ks(Ys.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function gmn(){return new Ks(Ys.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ymn(){return new Ks(Ys.CANCELED,"User canceled the upload/download.")}function vmn(e){return new Ks(Ys.INVALID_URL,"Invalid URL '"+e+"'.")}function bmn(e){return new Ks(Ys.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function xmn(){return new Ks(Ys.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DUe+"' property when initializing the app?")}function _mn(){return new Ks(Ys.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function wmn(){return new Ks(Ys.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Emn(e){return new Ks(Ys.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function BK(e){return new Ks(Ys.INVALID_ARGUMENT,e)}function NUe(){return new Ks(Ys.APP_DELETED,"The Firebase app was deleted.")}function Smn(e){return new Ks(Ys.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mk(e,t){return new Ks(Ys.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function HA(e){throw new Ks(Ys.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=nl.makeFromUrl(t,n)}catch{return new nl(t,"")}if(r.path==="")return r;throw bmn(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===RUe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),x=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<x.length;w++){const S=x[w],T=S.regex.exec(t);if(T){const C=T[S.indices.bucket];let I=T[S.indices.path];I||(I=""),r=new nl(C,I),S.postModify(r);break}}if(r==null)throw vmn(t);return r}}class Tmn{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cmn(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function Amn(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Imn(e){return e!==void 0}function kmn(e){return typeof e=="object"&&!Array.isArray(e)}function tue(e){return typeof e=="string"||e instanceof String}function X_e(e){return nue()&&e instanceof Blob}function nue(){return typeof Blob<"u"}function jK(e,t,n,r){if(r<t)throw BK(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw BK(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function PUe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zx;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(zx||(zx={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rmn(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dmn{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new e4(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===zx.NO_ERROR,u=s.getStatus();if(!a||Rmn(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===zx.ABORT;r(!1,new e4(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new e4(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());Imn(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=eue();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?NUe():ymn();o(u)}else{const u=gmn();o(u)}};this.canceled_?n(!1,new e4(!1,null,!0)):this.backoffId_=Cmn(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&Amn(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class e4{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function Nmn(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Pmn(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Omn(e,t){t&&(e["X-Firebase-GMPID"]=t)}function $mn(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Mmn(e,t,n,r,i,s,o=!0){const a=PUe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return Omn(l,t),Nmn(l,n),Pmn(l,s),$mn(l,r),new Dmn(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lmn(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Fmn(...e){const t=Lmn();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(nue())return new Blob(e);throw new Ks(Ys.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Bmn(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jmn(e){if(typeof atob>"u")throw Emn("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Up={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cH{constructor(t,n){this.data=t,this.contentType=n||null}}function Umn(e,t){switch(e){case Up.RAW:return new cH(OUe(t));case Up.BASE64:case Up.BASE64URL:return new cH($Ue(e,t));case Up.DATA_URL:return new cH(Vmn(t),Hmn(t))}throw eue()}function OUe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function zmn(e){let t;try{t=decodeURIComponent(e)}catch{throw Mk(Up.DATA_URL,"Malformed data URL.")}return OUe(t)}function $Ue(e,t){switch(e){case Up.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw Mk(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Up.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw Mk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=jmn(t)}catch(i){throw i.message.includes("polyfill")?i:Mk(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class MUe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Mk(Up.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=qmn(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function Vmn(e){const t=new MUe(e);return t.base64?$Ue(Up.BASE64,t.rest):zmn(t.rest)}function Hmn(e){return new MUe(e).contentType}function qmn(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(t,n){let r=0,i="";X_e(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(X_e(this.data_)){const r=this.data_,i=Bmn(r,t,n);return i===null?null:new Yy(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Yy(r,!0)}}static getBlob(...t){if(nue()){const n=t.map(r=>r instanceof Yy?r.data_:r);return new Yy(Fmn.apply(null,n))}else{const n=t.map(o=>tue(o)?Umn(Up.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Yy(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rue(e){let t;try{t=JSON.parse(e)}catch{return null}return kmn(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wmn(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Gmn(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function LUe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ymn(e,t){return t}class Hu{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Ymn}}let t4=null;function Kmn(e){return!tue(e)||e.length<2?e:LUe(e)}function FUe(){if(t4)return t4;const e=[];e.push(new Hu("bucket")),e.push(new Hu("generation")),e.push(new Hu("metageneration")),e.push(new Hu("name","fullPath",!0));function t(s,o){return Kmn(o)}const n=new Hu("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Hu("size");return i.xform=r,e.push(i),e.push(new Hu("timeCreated")),e.push(new Hu("updated")),e.push(new Hu("md5Hash",null,!0)),e.push(new Hu("cacheControl",null,!0)),e.push(new Hu("contentDisposition",null,!0)),e.push(new Hu("contentEncoding",null,!0)),e.push(new Hu("contentLanguage",null,!0)),e.push(new Hu("contentType",null,!0)),e.push(new Hu("metadata","customMetadata",!0)),t4=e,t4}function Xmn(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new nl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function Qmn(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return Xmn(r,e),r}function BUe(e,t,n){const r=rue(t);return r===null?null:Qmn(e,r,n)}function Jmn(e,t,n,r){const i=rue(t);if(i===null||!tue(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=xP(d,n,r),p=PUe({alt:"media",token:l});return h+p})[0]}function Zmn(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_e="prefixes",J_e="items";function e0n(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Q_e])for(const i of n[Q_e]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new nl(t,s));r.prefixes.push(o)}if(n[J_e])for(const i of n[J_e]){const s=e._makeStorageReference(new nl(t,i.name));r.items.push(s)}return r}function t0n(e,t,n){const r=rue(n);return r===null?null:e0n(e,t,r)}class P9{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iue(e){if(!e)throw eue()}function n0n(e,t){function n(r,i){const s=BUe(e,i,t);return iue(s!==null),s}return n}function r0n(e,t){function n(r,i){const s=t0n(e,t,i);return iue(s!==null),s}return n}function i0n(e,t){function n(r,i){const s=BUe(e,i,t);return iue(s!==null),Jmn(s,i,e.host,e._protocol)}return n}function sue(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=pmn():i=hmn():n.getStatus()===402?i=dmn(e.bucket):n.getStatus()===403?i=mmn(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function jUe(e){const t=sue(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=fmn(e.path)),s.serverResponse=i.serverResponse,s}return n}function s0n(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=xP(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new P9(a,u,r0n(e,t.bucket),l);return c.urlParams=s,c.errorHandler=sue(t),c}function o0n(e,t,n){const r=t.fullServerUrl(),i=xP(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new P9(i,s,i0n(e,n),o);return a.errorHandler=jUe(t),a}function a0n(e,t){const n=t.fullServerUrl(),r=xP(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new P9(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=jUe(t),a}function u0n(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function l0n(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=u0n(null,t)),r}function c0n(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let w=0;w<2;w++)x=x+Math.random().toString().slice(2);return x}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=l0n(t,r,i),c=Zmn(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Yy.getBlob(f,r,d);if(h===null)throw _mn();const p={name:l.fullPath},m=xP(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,b=new P9(m,g,n0n(e,n),y);return b.urlParams=p,b.headers=o,b.body=h.uploadData(),b.errorHandler=sue(t),b}class f0n{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zx.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=zx.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=zx.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw HA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw HA("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw HA("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw HA("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw HA("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class d0n extends f0n{initXhr(){this.xhr_.responseType="text"}}function O9(){return new d0n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(t,n){this._service=t,n instanceof nl?this._location=n:this._location=nl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new R_(t,n)}get root(){const t=new nl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LUe(this._location.path)}get storage(){return this._service}get parent(){const t=Wmn(this._location.path);if(t===null)return null;const n=new nl(this._location.bucket,t);return new R_(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Smn(t)}}function h0n(e,t,n){e._throwIfRoot("uploadBytes");const r=c0n(e.storage,e._location,FUe(),new Yy(t,!0),n);return e.storage.makeRequestWithTokens(r,O9).then(i=>({metadata:i,ref:e}))}function p0n(e){const t={prefixes:[],items:[]};return UUe(e,t).then(()=>t)}async function UUe(e,t,n){const i=await m0n(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await UUe(e,t,i.nextPageToken)}function m0n(e,t){t!=null&&typeof t.maxResults=="number"&&jK("options.maxResults",1,1e3,t.maxResults);const n=t,r=s0n(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,O9)}function g0n(e){e._throwIfRoot("getDownloadURL");const t=o0n(e.storage,e._location,FUe());return e.storage.makeRequestWithTokens(t,O9).then(n=>{if(n===null)throw wmn();return n})}function y0n(e){e._throwIfRoot("deleteObject");const t=a0n(e.storage,e._location);return e.storage.makeRequestWithTokens(t,O9)}function v0n(e,t){const n=Gmn(e._location.path,t),r=new nl(e._location.bucket,n);return new R_(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0n(e){return/^[A-Za-z]+:\/\//.test(e)}function x0n(e,t){return new R_(e,t)}function zUe(e,t){if(e instanceof oue){const n=e;if(n._bucket==null)throw xmn();const r=new R_(n,n._bucket);return t!=null?zUe(r,t):r}else return t!==void 0?v0n(e,t):e}function _0n(e,t){if(t&&b0n(t)){if(e instanceof oue)return x0n(e,t);throw BK("To use ref(service, url), the first argument must be a Storage instance.")}else return zUe(e,t)}function Z_e(e,t){const n=t==null?void 0:t[DUe];return n==null?null:nl.makeFromBucketSpec(n,e)}function w0n(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:Pfn(i,e.app.options.projectId))}class oue{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=RUe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lmn,this._maxUploadRetryTime=cmn,this._requests=new Set,i!=null?this._bucket=nl.makeFromBucketSpec(i,this._host):this._bucket=Z_e(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=nl.makeFromBucketSpec(this._url,t):this._bucket=Z_e(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){jK("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){jK("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new R_(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new Tmn(NUe());{const o=Mmn(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const ewe="@firebase/storage",twe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VUe="storage";function n4(e,t,n){return e=Zi(e),h0n(e,t,n)}function qA(e){return e=Zi(e),p0n(e)}function r4(e){return e=Zi(e),g0n(e)}function nwe(e){return e=Zi(e),y0n(e)}function Nc(e,t){return e=Zi(e),_0n(e,t)}function rwe(e=Hae(),t){e=Zi(e);const r=TC(e,VUe).getImmediate({identifier:t}),i=Nfn("storage");return i&&E0n(r,...i),r}function E0n(e,t,n,r={}){w0n(e,t,n,r)}function S0n(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new oue(n,r,i,t,yw)}function T0n(){Rg(new wm(VUe,S0n,"PUBLIC").setMultipleInstances(!0)),Ch(ewe,twe,""),Ch(ewe,twe,"esm2017")}T0n();var iwe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vx,HUe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(C,I){function D(){}D.prototype=I.prototype,C.D=I.prototype,C.prototype=new D,C.prototype.constructor=C,C.C=function(k,P,M){for(var $=Array(arguments.length-2),B=2;B<arguments.length;B++)$[B-2]=arguments[B];return I.prototype[P].apply(k,$)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,I,D){D||(D=0);var k=Array(16);if(typeof I=="string")for(var P=0;16>P;++P)k[P]=I.charCodeAt(D++)|I.charCodeAt(D++)<<8|I.charCodeAt(D++)<<16|I.charCodeAt(D++)<<24;else for(P=0;16>P;++P)k[P]=I[D++]|I[D++]<<8|I[D++]<<16|I[D++]<<24;I=C.g[0],D=C.g[1],P=C.g[2];var M=C.g[3],$=I+(M^D&(P^M))+k[0]+3614090360&4294967295;I=D+($<<7&4294967295|$>>>25),$=M+(P^I&(D^P))+k[1]+3905402710&4294967295,M=I+($<<12&4294967295|$>>>20),$=P+(D^M&(I^D))+k[2]+606105819&4294967295,P=M+($<<17&4294967295|$>>>15),$=D+(I^P&(M^I))+k[3]+3250441966&4294967295,D=P+($<<22&4294967295|$>>>10),$=I+(M^D&(P^M))+k[4]+4118548399&4294967295,I=D+($<<7&4294967295|$>>>25),$=M+(P^I&(D^P))+k[5]+1200080426&4294967295,M=I+($<<12&4294967295|$>>>20),$=P+(D^M&(I^D))+k[6]+2821735955&4294967295,P=M+($<<17&4294967295|$>>>15),$=D+(I^P&(M^I))+k[7]+4249261313&4294967295,D=P+($<<22&4294967295|$>>>10),$=I+(M^D&(P^M))+k[8]+1770035416&4294967295,I=D+($<<7&4294967295|$>>>25),$=M+(P^I&(D^P))+k[9]+2336552879&4294967295,M=I+($<<12&4294967295|$>>>20),$=P+(D^M&(I^D))+k[10]+4294925233&4294967295,P=M+($<<17&4294967295|$>>>15),$=D+(I^P&(M^I))+k[11]+2304563134&4294967295,D=P+($<<22&4294967295|$>>>10),$=I+(M^D&(P^M))+k[12]+1804603682&4294967295,I=D+($<<7&4294967295|$>>>25),$=M+(P^I&(D^P))+k[13]+4254626195&4294967295,M=I+($<<12&4294967295|$>>>20),$=P+(D^M&(I^D))+k[14]+2792965006&4294967295,P=M+($<<17&4294967295|$>>>15),$=D+(I^P&(M^I))+k[15]+1236535329&4294967295,D=P+($<<22&4294967295|$>>>10),$=I+(P^M&(D^P))+k[1]+4129170786&4294967295,I=D+($<<5&4294967295|$>>>27),$=M+(D^P&(I^D))+k[6]+3225465664&4294967295,M=I+($<<9&4294967295|$>>>23),$=P+(I^D&(M^I))+k[11]+643717713&4294967295,P=M+($<<14&4294967295|$>>>18),$=D+(M^I&(P^M))+k[0]+3921069994&4294967295,D=P+($<<20&4294967295|$>>>12),$=I+(P^M&(D^P))+k[5]+3593408605&4294967295,I=D+($<<5&4294967295|$>>>27),$=M+(D^P&(I^D))+k[10]+38016083&4294967295,M=I+($<<9&4294967295|$>>>23),$=P+(I^D&(M^I))+k[15]+3634488961&4294967295,P=M+($<<14&4294967295|$>>>18),$=D+(M^I&(P^M))+k[4]+3889429448&4294967295,D=P+($<<20&4294967295|$>>>12),$=I+(P^M&(D^P))+k[9]+568446438&4294967295,I=D+($<<5&4294967295|$>>>27),$=M+(D^P&(I^D))+k[14]+3275163606&4294967295,M=I+($<<9&4294967295|$>>>23),$=P+(I^D&(M^I))+k[3]+4107603335&4294967295,P=M+($<<14&4294967295|$>>>18),$=D+(M^I&(P^M))+k[8]+1163531501&4294967295,D=P+($<<20&4294967295|$>>>12),$=I+(P^M&(D^P))+k[13]+2850285829&4294967295,I=D+($<<5&4294967295|$>>>27),$=M+(D^P&(I^D))+k[2]+4243563512&4294967295,M=I+($<<9&4294967295|$>>>23),$=P+(I^D&(M^I))+k[7]+1735328473&4294967295,P=M+($<<14&4294967295|$>>>18),$=D+(M^I&(P^M))+k[12]+2368359562&4294967295,D=P+($<<20&4294967295|$>>>12),$=I+(D^P^M)+k[5]+4294588738&4294967295,I=D+($<<4&4294967295|$>>>28),$=M+(I^D^P)+k[8]+2272392833&4294967295,M=I+($<<11&4294967295|$>>>21),$=P+(M^I^D)+k[11]+1839030562&4294967295,P=M+($<<16&4294967295|$>>>16),$=D+(P^M^I)+k[14]+4259657740&4294967295,D=P+($<<23&4294967295|$>>>9),$=I+(D^P^M)+k[1]+2763975236&4294967295,I=D+($<<4&4294967295|$>>>28),$=M+(I^D^P)+k[4]+1272893353&4294967295,M=I+($<<11&4294967295|$>>>21),$=P+(M^I^D)+k[7]+4139469664&4294967295,P=M+($<<16&4294967295|$>>>16),$=D+(P^M^I)+k[10]+3200236656&4294967295,D=P+($<<23&4294967295|$>>>9),$=I+(D^P^M)+k[13]+681279174&4294967295,I=D+($<<4&4294967295|$>>>28),$=M+(I^D^P)+k[0]+3936430074&4294967295,M=I+($<<11&4294967295|$>>>21),$=P+(M^I^D)+k[3]+3572445317&4294967295,P=M+($<<16&4294967295|$>>>16),$=D+(P^M^I)+k[6]+76029189&4294967295,D=P+($<<23&4294967295|$>>>9),$=I+(D^P^M)+k[9]+3654602809&4294967295,I=D+($<<4&4294967295|$>>>28),$=M+(I^D^P)+k[12]+3873151461&4294967295,M=I+($<<11&4294967295|$>>>21),$=P+(M^I^D)+k[15]+530742520&4294967295,P=M+($<<16&4294967295|$>>>16),$=D+(P^M^I)+k[2]+3299628645&4294967295,D=P+($<<23&4294967295|$>>>9),$=I+(P^(D|~M))+k[0]+4096336452&4294967295,I=D+($<<6&4294967295|$>>>26),$=M+(D^(I|~P))+k[7]+1126891415&4294967295,M=I+($<<10&4294967295|$>>>22),$=P+(I^(M|~D))+k[14]+2878612391&4294967295,P=M+($<<15&4294967295|$>>>17),$=D+(M^(P|~I))+k[5]+4237533241&4294967295,D=P+($<<21&4294967295|$>>>11),$=I+(P^(D|~M))+k[12]+1700485571&4294967295,I=D+($<<6&4294967295|$>>>26),$=M+(D^(I|~P))+k[3]+2399980690&4294967295,M=I+($<<10&4294967295|$>>>22),$=P+(I^(M|~D))+k[10]+4293915773&4294967295,P=M+($<<15&4294967295|$>>>17),$=D+(M^(P|~I))+k[1]+2240044497&4294967295,D=P+($<<21&4294967295|$>>>11),$=I+(P^(D|~M))+k[8]+1873313359&4294967295,I=D+($<<6&4294967295|$>>>26),$=M+(D^(I|~P))+k[15]+4264355552&4294967295,M=I+($<<10&4294967295|$>>>22),$=P+(I^(M|~D))+k[6]+2734768916&4294967295,P=M+($<<15&4294967295|$>>>17),$=D+(M^(P|~I))+k[13]+1309151649&4294967295,D=P+($<<21&4294967295|$>>>11),$=I+(P^(D|~M))+k[4]+4149444226&4294967295,I=D+($<<6&4294967295|$>>>26),$=M+(D^(I|~P))+k[11]+3174756917&4294967295,M=I+($<<10&4294967295|$>>>22),$=P+(I^(M|~D))+k[2]+718787259&4294967295,P=M+($<<15&4294967295|$>>>17),$=D+(M^(P|~I))+k[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(P+($<<21&4294967295|$>>>11))&4294967295,C.g[2]=C.g[2]+P&4294967295,C.g[3]=C.g[3]+M&4294967295}r.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var D=I-this.blockSize,k=this.B,P=this.h,M=0;M<I;){if(P==0)for(;M<=D;)i(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<I;)if(k[P++]=C.charCodeAt(M++),P==this.blockSize){i(this,k),P=0;break}}else for(;M<I;)if(k[P++]=C[M++],P==this.blockSize){i(this,k),P=0;break}}this.h=P,this.o+=I},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var D=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=D&255,D/=256;for(this.u(C),C=Array(16),I=D=0;4>I;++I)for(var k=0;32>k;k+=8)C[D++]=this.g[I]>>>k&255;return C};function s(C,I){var D=a;return Object.prototype.hasOwnProperty.call(D,C)?D[C]:D[C]=I(C)}function o(C,I){this.h=I;for(var D=[],k=!0,P=C.length-1;0<=P;P--){var M=C[P]|0;k&&M==I||(D[P]=M,k=!1)}this.g=D}var a={};function u(C){return-128<=C&&128>C?s(C,function(I){return new o([I|0],0>I?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return g(l(-C));for(var I=[],D=1,k=0;C>=D;k++)I[k]=C/D|0,D*=4294967296;return new o(I,0)}function c(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return g(c(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=l(Math.pow(I,8)),k=f,P=0;P<C.length;P+=8){var M=Math.min(8,C.length-P),$=parseInt(C.substring(P,P+M),I);8>M?(M=l(Math.pow(I,M)),k=k.j(M).add(l($))):(k=k.j(D),k=k.add(l($)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var C=0,I=1,D=0;D<this.g.length;D++){var k=this.i(D);C+=(0<=k?k:4294967296+k)*I,I*=4294967296}return C},e.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(p(this))return"0";if(m(this))return"-"+g(this).toString(C);for(var I=l(Math.pow(C,6)),D=this,k="";;){var P=w(D,I).g;D=y(D,P.j(I));var M=((0<D.g.length?D.g[0]:D.h)>>>0).toString(C);if(D=P,p(D))return M+k;for(;6>M.length;)M="0"+M;k=M+k}},e.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function p(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function m(C){return C.h==-1}e.l=function(C){return C=y(this,C),m(C)?-1:p(C)?0:1};function g(C){for(var I=C.g.length,D=[],k=0;k<I;k++)D[k]=~C.g[k];return new o(D,~C.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(C){for(var I=Math.max(this.g.length,C.g.length),D=[],k=0,P=0;P<=I;P++){var M=k+(this.i(P)&65535)+(C.i(P)&65535),$=(M>>>16)+(this.i(P)>>>16)+(C.i(P)>>>16);k=$>>>16,M&=65535,$&=65535,D[P]=$<<16|M}return new o(D,D[D.length-1]&-2147483648?-1:0)};function y(C,I){return C.add(g(I))}e.j=function(C){if(p(this)||p(C))return f;if(m(this))return m(C)?g(this).j(g(C)):g(g(this).j(C));if(m(C))return g(this.j(g(C)));if(0>this.l(h)&&0>C.l(h))return l(this.m()*C.m());for(var I=this.g.length+C.g.length,D=[],k=0;k<2*I;k++)D[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<C.g.length;P++){var M=this.i(k)>>>16,$=this.i(k)&65535,B=C.i(P)>>>16,q=C.i(P)&65535;D[2*k+2*P]+=$*q,b(D,2*k+2*P),D[2*k+2*P+1]+=M*q,b(D,2*k+2*P+1),D[2*k+2*P+1]+=$*B,b(D,2*k+2*P+1),D[2*k+2*P+2]+=M*B,b(D,2*k+2*P+2)}for(k=0;k<I;k++)D[k]=D[2*k+1]<<16|D[2*k];for(k=I;k<2*I;k++)D[k]=0;return new o(D,0)};function b(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function x(C,I){this.g=C,this.h=I}function w(C,I){if(p(I))throw Error("division by zero");if(p(C))return new x(f,f);if(m(C))return I=w(g(C),I),new x(g(I.g),g(I.h));if(m(I))return I=w(C,g(I)),new x(g(I.g),I.h);if(30<C.g.length){if(m(C)||m(I))throw Error("slowDivide_ only works with positive integers.");for(var D=d,k=I;0>=k.l(C);)D=S(D),k=S(k);var P=T(D,1),M=T(k,1);for(k=T(k,2),D=T(D,2);!p(k);){var $=M.add(k);0>=$.l(C)&&(P=P.add(D),M=$),k=T(k,1),D=T(D,1)}return I=y(C,P.j(I)),new x(P,I)}for(P=f;0<=C.l(I);){for(D=Math.max(1,Math.floor(C.m()/I.m())),k=Math.ceil(Math.log(D)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),M=l(D),$=M.j(I);m($)||0<$.l(C);)D-=k,M=l(D),$=M.j(I);p(M)&&(M=d),P=P.add(M),C=y(C,$)}return new x(P,C)}e.A=function(C){return w(this,C).h},e.and=function(C){for(var I=Math.max(this.g.length,C.g.length),D=[],k=0;k<I;k++)D[k]=this.i(k)&C.i(k);return new o(D,this.h&C.h)},e.or=function(C){for(var I=Math.max(this.g.length,C.g.length),D=[],k=0;k<I;k++)D[k]=this.i(k)|C.i(k);return new o(D,this.h|C.h)},e.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),D=[],k=0;k<I;k++)D[k]=this.i(k)^C.i(k);return new o(D,this.h^C.h)};function S(C){for(var I=C.g.length+1,D=[],k=0;k<I;k++)D[k]=C.i(k)<<1|C.i(k-1)>>>31;return new o(D,C.h)}function T(C,I){var D=I>>5;I%=32;for(var k=C.g.length-D,P=[],M=0;M<k;M++)P[M]=0<I?C.i(M+D)>>>I|C.i(M+D+1)<<32-I:C.i(M+D);return new o(P,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HUe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,Vx=o}).apply(typeof iwe<"u"?iwe:typeof self<"u"?self:typeof window<"u"?window:{});var i4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qUe,WUe,LI,GUe,D6,UK,YUe,KUe,XUe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(A,j,G){return A==Array.prototype||A==Object.prototype||(A[j]=G.value),A};function n(A){A=[typeof globalThis=="object"&&globalThis,A,typeof window=="object"&&window,typeof self=="object"&&self,typeof i4=="object"&&i4];for(var j=0;j<A.length;++j){var G=A[j];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var r=n(this);function i(A,j){if(j)e:{var G=r;A=A.split(".");for(var ne=0;ne<A.length-1;ne++){var De=A[ne];if(!(De in G))break e;G=G[De]}A=A[A.length-1],ne=G[A],j=j(ne),j!=ne&&j!=null&&t(G,A,{configurable:!0,writable:!0,value:j})}}function s(A,j){A instanceof String&&(A+="");var G=0,ne=!1,De={next:function(){if(!ne&&G<A.length){var ze=G++;return{value:j(ze,A[ze]),done:!1}}return ne=!0,{done:!0,value:void 0}}};return De[Symbol.iterator]=function(){return De},De}i("Array.prototype.values",function(A){return A||function(){return s(this,function(j,G){return G})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(A){var j=typeof A;return j=j!="object"?j:A?Array.isArray(A)?"array":j:"null",j=="array"||j=="object"&&typeof A.length=="number"}function l(A){var j=typeof A;return j=="object"&&A!=null||j=="function"}function c(A,j,G){return A.call.apply(A.bind,arguments)}function f(A,j,G){if(!A)throw Error();if(2<arguments.length){var ne=Array.prototype.slice.call(arguments,2);return function(){var De=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(De,ne),A.apply(j,De)}}return function(){return A.apply(j,arguments)}}function d(A,j,G){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(A,j){var G=Array.prototype.slice.call(arguments,1);return function(){var ne=G.slice();return ne.push.apply(ne,arguments),A.apply(this,ne)}}function p(A,j){function G(){}G.prototype=j.prototype,A.aa=j.prototype,A.prototype=new G,A.prototype.constructor=A,A.Qb=function(ne,De,ze){for(var At=Array(arguments.length-2),ui=2;ui<arguments.length;ui++)At[ui-2]=arguments[ui];return j.prototype[De].apply(ne,At)}}function m(A){const j=A.length;if(0<j){const G=Array(j);for(let ne=0;ne<j;ne++)G[ne]=A[ne];return G}return[]}function g(A,j){for(let G=1;G<arguments.length;G++){const ne=arguments[G];if(u(ne)){const De=A.length||0,ze=ne.length||0;A.length=De+ze;for(let At=0;At<ze;At++)A[De+At]=ne[At]}else A.push(ne)}}class y{constructor(j,G){this.i=j,this.j=G,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function b(A){return/^[\s\xa0]*$/.test(A)}function x(){var A=a.navigator;return A&&(A=A.userAgent)?A:""}function w(A){return w[" "](A),A}w[" "]=function(){};var S=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function T(A,j,G){for(const ne in A)j.call(G,A[ne],ne,A)}function C(A,j){for(const G in A)j.call(void 0,A[G],G,A)}function I(A){const j={};for(const G in A)j[G]=A[G];return j}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(A,j){let G,ne;for(let De=1;De<arguments.length;De++){ne=arguments[De];for(G in ne)A[G]=ne[G];for(let ze=0;ze<D.length;ze++)G=D[ze],Object.prototype.hasOwnProperty.call(ne,G)&&(A[G]=ne[G])}}function P(A){var j=1;A=A.split(":");const G=[];for(;0<j&&A.length;)G.push(A.shift()),j--;return A.length&&G.push(A.join(":")),G}function M(A){a.setTimeout(()=>{throw A},0)}function $(){var A=Q;let j=null;return A.g&&(j=A.g,A.g=A.g.next,A.g||(A.h=null),j.next=null),j}class B{constructor(){this.h=this.g=null}add(j,G){const ne=q.get();ne.set(j,G),this.h?this.h.next=ne:this.g=ne,this.h=ne}}var q=new y(()=>new H,A=>A.reset());class H{constructor(){this.next=this.g=this.h=null}set(j,G){this.h=j,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,K=!1,Q=new B,L=()=>{const A=a.Promise.resolve(void 0);Y=()=>{A.then(z)}};var z=()=>{for(var A;A=$();){try{A.h.call(A.g)}catch(G){M(G)}var j=q;j.j(A),100>j.h&&(j.h++,A.next=j.g,j.g=A)}K=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function F(A,j){this.type=A,this.g=this.target=j,this.defaultPrevented=!1}F.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var A=!1,j=Object.defineProperty({},"passive",{get:function(){A=!0}});try{const G=()=>{};a.addEventListener("test",G,j),a.removeEventListener("test",G,j)}catch{}return A}();function J(A,j){if(F.call(this,A?A.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,A){var G=this.type=A.type,ne=A.changedTouches&&A.changedTouches.length?A.changedTouches[0]:null;if(this.target=A.target||A.srcElement,this.g=j,j=A.relatedTarget){if(S){e:{try{w(j.nodeName);var De=!0;break e}catch{}De=!1}De||(j=null)}}else G=="mouseover"?j=A.fromElement:G=="mouseout"&&(j=A.toElement);this.relatedTarget=j,ne?(this.clientX=ne.clientX!==void 0?ne.clientX:ne.pageX,this.clientY=ne.clientY!==void 0?ne.clientY:ne.pageY,this.screenX=ne.screenX||0,this.screenY=ne.screenY||0):(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0),this.button=A.button,this.key=A.key||"",this.ctrlKey=A.ctrlKey,this.altKey=A.altKey,this.shiftKey=A.shiftKey,this.metaKey=A.metaKey,this.pointerId=A.pointerId||0,this.pointerType=typeof A.pointerType=="string"?A.pointerType:ue[A.pointerType]||"",this.state=A.state,this.i=A,A.defaultPrevented&&J.aa.h.call(this)}}p(J,F);var ue={2:"touch",3:"pen",4:"mouse"};J.prototype.h=function(){J.aa.h.call(this);var A=this.i;A.preventDefault?A.preventDefault():A.returnValue=!1};var we="closure_listenable_"+(1e6*Math.random()|0),he=0;function ke(A,j,G,ne,De){this.listener=A,this.proxy=null,this.src=j,this.type=G,this.capture=!!ne,this.ha=De,this.key=++he,this.da=this.fa=!1}function Pe(A){A.da=!0,A.listener=null,A.proxy=null,A.src=null,A.ha=null}function rt(A){this.src=A,this.g={},this.h=0}rt.prototype.add=function(A,j,G,ne,De){var ze=A.toString();A=this.g[ze],A||(A=this.g[ze]=[],this.h++);var At=St(A,j,ne,De);return-1<At?(j=A[At],G||(j.fa=!1)):(j=new ke(j,this.src,ze,!!ne,De),j.fa=G,A.push(j)),j};function Re(A,j){var G=j.type;if(G in A.g){var ne=A.g[G],De=Array.prototype.indexOf.call(ne,j,void 0),ze;(ze=0<=De)&&Array.prototype.splice.call(ne,De,1),ze&&(Pe(j),A.g[G].length==0&&(delete A.g[G],A.h--))}}function St(A,j,G,ne){for(var De=0;De<A.length;++De){var ze=A[De];if(!ze.da&&ze.listener==j&&ze.capture==!!G&&ze.ha==ne)return De}return-1}var Je="closure_lm_"+(1e6*Math.random()|0),It={};function mt(A,j,G,ne,De){if(Array.isArray(j)){for(var ze=0;ze<j.length;ze++)mt(A,j[ze],G,ne,De);return null}return G=Rt(G),A&&A[we]?A.K(j,G,l(ne)?!!ne.capture:!1,De):Te(A,j,G,!1,ne,De)}function Te(A,j,G,ne,De,ze){if(!j)throw Error("Invalid event type");var At=l(De)?!!De.capture:!!De,ui=_e(A);if(ui||(A[Je]=ui=new rt(A)),G=ui.add(j,G,ne,At,ze),G.proxy)return G;if(ne=Fe(),G.proxy=ne,ne.src=A,ne.listener=G,A.addEventListener)V||(De=At),De===void 0&&(De=!1),A.addEventListener(j.toString(),ne,De);else if(A.attachEvent)A.attachEvent(Dt(j.toString()),ne);else if(A.addListener&&A.removeListener)A.addListener(ne);else throw Error("addEventListener and attachEvent are unavailable.");return G}function Fe(){function A(G){return j.call(A.src,A.listener,G)}const j=Qe;return A}function st(A,j,G,ne,De){if(Array.isArray(j))for(var ze=0;ze<j.length;ze++)st(A,j[ze],G,ne,De);else ne=l(ne)?!!ne.capture:!!ne,G=Rt(G),A&&A[we]?(A=A.i,j=String(j).toString(),j in A.g&&(ze=A.g[j],G=St(ze,G,ne,De),-1<G&&(Pe(ze[G]),Array.prototype.splice.call(ze,G,1),ze.length==0&&(delete A.g[j],A.h--)))):A&&(A=_e(A))&&(j=A.g[j.toString()],A=-1,j&&(A=St(j,G,ne,De)),(G=-1<A?j[A]:null)&&yt(G))}function yt(A){if(typeof A!="number"&&A&&!A.da){var j=A.src;if(j&&j[we])Re(j.i,A);else{var G=A.type,ne=A.proxy;j.removeEventListener?j.removeEventListener(G,ne,A.capture):j.detachEvent?j.detachEvent(Dt(G),ne):j.addListener&&j.removeListener&&j.removeListener(ne),(G=_e(j))?(Re(G,A),G.h==0&&(G.src=null,j[Je]=null)):Pe(A)}}}function Dt(A){return A in It?It[A]:It[A]="on"+A}function Qe(A,j){if(A.da)A=!0;else{j=new J(j,this);var G=A.listener,ne=A.ha||A.src;A.fa&&yt(A),A=G.call(ne,j)}return A}function _e(A){return A=A[Je],A instanceof rt?A:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rt(A){return typeof A=="function"?A:(A[kt]||(A[kt]=function(j){return A.handleEvent(j)}),A[kt])}function Ee(){W.call(this),this.i=new rt(this),this.M=this,this.F=null}p(Ee,W),Ee.prototype[we]=!0,Ee.prototype.removeEventListener=function(A,j,G,ne){st(this,A,j,G,ne)};function Oe(A,j){var G,ne=A.F;if(ne)for(G=[];ne;ne=ne.F)G.push(ne);if(A=A.M,ne=j.type||j,typeof j=="string")j=new F(j,A);else if(j instanceof F)j.target=j.target||A;else{var De=j;j=new F(ne,A),k(j,De)}if(De=!0,G)for(var ze=G.length-1;0<=ze;ze--){var At=j.g=G[ze];De=ot(At,ne,!0,j)&&De}if(At=j.g=A,De=ot(At,ne,!0,j)&&De,De=ot(At,ne,!1,j)&&De,G)for(ze=0;ze<G.length;ze++)At=j.g=G[ze],De=ot(At,ne,!1,j)&&De}Ee.prototype.N=function(){if(Ee.aa.N.call(this),this.i){var A=this.i,j;for(j in A.g){for(var G=A.g[j],ne=0;ne<G.length;ne++)Pe(G[ne]);delete A.g[j],A.h--}}this.F=null},Ee.prototype.K=function(A,j,G,ne){return this.i.add(String(A),j,!1,G,ne)},Ee.prototype.L=function(A,j,G,ne){return this.i.add(String(A),j,!0,G,ne)};function ot(A,j,G,ne){if(j=A.i.g[String(j)],!j)return!0;j=j.concat();for(var De=!0,ze=0;ze<j.length;++ze){var At=j[ze];if(At&&!At.da&&At.capture==G){var ui=At.listener,Io=At.ha||At.src;At.fa&&Re(A.i,At),De=ui.call(Io,ne)!==!1&&De}}return De&&!ne.defaultPrevented}function xt(A,j,G){if(typeof A=="function")G&&(A=d(A,G));else if(A&&typeof A.handleEvent=="function")A=d(A.handleEvent,A);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:a.setTimeout(A,j||0)}function jt(A){A.g=xt(()=>{A.g=null,A.i&&(A.i=!1,jt(A))},A.l);const j=A.h;A.h=null,A.m.apply(null,j)}class jn extends W{constructor(j,G){super(),this.m=j,this.l=G,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:jt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dr(A){W.call(this),this.h=A,this.g={}}p(dr,W);var Sr=[];function xi(A){T(A.g,function(j,G){this.g.hasOwnProperty(G)&&yt(j)},A),A.g={}}dr.prototype.N=function(){dr.aa.N.call(this),xi(this)},dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tn=a.JSON.stringify,Un=a.JSON.parse,hr=class{stringify(A){return a.JSON.stringify(A,void 0)}parse(A){return a.JSON.parse(A,void 0)}};function gr(){}gr.prototype.h=null;function Yo(A){return A.h||(A.h=A.i())}function es(){}var ds={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ns(){F.call(this,"d")}p(Ns,F);function Ur(){F.call(this,"c")}p(Ur,F);var hs={},Cc=null;function Ko(){return Cc=Cc||new Ee}hs.La="serverreachability";function Ou(A){F.call(this,hs.La,A)}p(Ou,F);function Lr(A){const j=Ko();Oe(j,new Ou(j))}hs.STAT_EVENT="statevent";function ki(A,j){F.call(this,hs.STAT_EVENT,A),this.stat=j}p(ki,F);function pi(A){const j=Ko();Oe(j,new ki(j,A))}hs.Ma="timingevent";function Xs(A,j){F.call(this,hs.Ma,A),this.size=j}p(Xs,F);function si(A,j){if(typeof A!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){A()},j)}function Ri(){this.g=!0}Ri.prototype.xa=function(){this.g=!1};function me(A,j,G,ne,De,ze){A.info(function(){if(A.g)if(ze)for(var At="",ui=ze.split("&"),Io=0;Io<ui.length;Io++){var Ir=ui[Io].split("=");if(1<Ir.length){var mi=Ir[0];Ir=Ir[1];var go=mi.split("_");At=2<=go.length&&go[1]=="type"?At+(mi+"="+Ir+"&"):At+(mi+"=redacted&")}}else At=null;else At=ze;return"XMLHTTP REQ ("+ne+") [attempt "+De+"]: "+j+`
`+G+`
`+At})}function ae(A,j,G,ne,De,ze,At){A.info(function(){return"XMLHTTP RESP ("+ne+") [ attempt "+De+"]: "+j+`
`+G+`
`+ze+" "+At})}function ge(A,j,G,ne){A.info(function(){return"XMLHTTP TEXT ("+j+"): "+Me(A,G)+(ne?" "+ne:"")})}function Le(A,j){A.info(function(){return"TIMEOUT: "+j})}Ri.prototype.info=function(){};function Me(A,j){if(!A.g)return j;if(!j)return null;try{var G=JSON.parse(j);if(G){for(A=0;A<G.length;A++)if(Array.isArray(G[A])){var ne=G[A];if(!(2>ne.length)){var De=ne[1];if(Array.isArray(De)&&!(1>De.length)){var ze=De[0];if(ze!="noop"&&ze!="stop"&&ze!="close")for(var At=1;At<De.length;At++)De[At]=""}}}}return Tn(G)}catch{return j}}var _t={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ut={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},fn;function Zn(){}p(Zn,gr),Zn.prototype.g=function(){return new XMLHttpRequest},Zn.prototype.i=function(){return{}},fn=new Zn;function ur(A,j,G,ne){this.j=A,this.i=j,this.l=G,this.R=ne||1,this.U=new dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pn}function Pn(){this.i=null,this.g="",this.h=!1}var Tr={},oi={};function on(A,j,G){A.L=1,A.v=er(ut(j)),A.m=G,A.P=!0,Cr(A,null)}function Cr(A,j){A.F=Date.now(),Di(A),A.A=ut(A.v);var G=A.A,ne=A.R;Array.isArray(ne)||(ne=[String(ne)]),ib(G.i,"t",ne),A.C=0,G=A.j.J,A.h=new Pn,A.g=$P(A.j,G?j:null,!A.m),0<A.O&&(A.M=new jn(d(A.Y,A,A.g),A.O)),j=A.U,G=A.g,ne=A.ca;var De="readystatechange";Array.isArray(De)||(De&&(Sr[0]=De.toString()),De=Sr);for(var ze=0;ze<De.length;ze++){var At=mt(G,De[ze],ne||j.handleEvent,!1,j.h||j);if(!At)break;j.g[At.key]=At}j=A.H?I(A.H):{},A.m?(A.u||(A.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",A.g.ea(A.A,A.u,A.m,j)):(A.u="GET",A.g.ea(A.A,A.u,null,j)),Lr(),me(A.i,A.u,A.A,A.l,A.R,A.m)}ur.prototype.ca=function(A){A=A.target;const j=this.M;j&&wi(A)==3?j.j():this.Y(A)},ur.prototype.Y=function(A){try{if(A==this.g)e:{const go=wi(this.g);var j=this.g.Ba();const Tf=this.g.Z();if(!(3>go)&&(go!=3||this.g&&(this.h.h||this.g.oa()||Ao(this.g)))){this.J||go!=4||j==7||(j==8||0>=Tf?Lr(3):Lr(2)),Ni(this);var G=this.g.Z();this.X=G;t:if(Xr(this)){var ne=Ao(this.g);A="";var De=ne.length,ze=wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ts(this),So(this);var At="";break t}this.h.i=new a.TextDecoder}for(j=0;j<De;j++)this.h.h=!0,A+=this.h.i.decode(ne[j],{stream:!(ze&&j==De-1)});ne.length=0,this.h.g+=A,this.C=0,At=this.h.g}else At=this.g.oa();if(this.o=G==200,ae(this.i,this.u,this.A,this.l,this.R,go,G),this.o){if(this.T&&!this.K){t:{if(this.g){var ui,Io=this.g;if((ui=Io.g?Io.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(ui)){var Ir=ui;break t}}Ir=null}if(G=Ir)ge(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ns(this,G);else{this.o=!1,this.s=3,pi(12),ts(this),So(this);break e}}if(this.P){G=!0;let El;for(;!this.J&&this.C<At.length;)if(El=yr(this,At),El==oi){go==4&&(this.s=4,pi(14),G=!1),ge(this.i,this.l,null,"[Incomplete Response]");break}else if(El==Tr){this.s=4,pi(15),ge(this.i,this.l,At,"[Invalid Chunk]"),G=!1;break}else ge(this.i,this.l,El,null),ns(this,El);if(Xr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),go!=4||At.length!=0||this.h.h||(this.s=1,pi(16),G=!1),this.o=this.o&&G,!G)ge(this.i,this.l,At,"[Invalid Chunked Response]"),ts(this),So(this);else if(0<At.length&&!this.W){this.W=!0;var mi=this.j;mi.g==this&&mi.ba&&!mi.M&&(mi.j.info("Great, no buffering proxy detected. Bytes received: "+At.length),Sf(mi),mi.M=!0,pi(11))}}else ge(this.i,this.l,At,null),ns(this,At);go==4&&ts(this),this.o&&!this.J&&(go==4?zi(this.j,this):(this.o=!1,Di(this)))}else Dd(this.g),G==400&&0<At.indexOf("Unknown SID")?(this.s=3,pi(12)):(this.s=0,pi(13)),ts(this),So(this)}}}catch{}finally{}};function Xr(A){return A.g?A.u=="GET"&&A.L!=2&&A.j.Ca:!1}function yr(A,j){var G=A.C,ne=j.indexOf(`
`,G);return ne==-1?oi:(G=Number(j.substring(G,ne)),isNaN(G)?Tr:(ne+=1,ne+G>j.length?oi:(j=j.slice(ne,ne+G),A.C=ne+G,j)))}ur.prototype.cancel=function(){this.J=!0,ts(this)};function Di(A){A.S=Date.now()+A.I,po(A,A.I)}function po(A,j){if(A.B!=null)throw Error("WatchDog timer not null");A.B=si(d(A.ba,A),j)}function Ni(A){A.B&&(a.clearTimeout(A.B),A.B=null)}ur.prototype.ba=function(){this.B=null;const A=Date.now();0<=A-this.S?(Le(this.i,this.A),this.L!=2&&(Lr(),pi(17)),ts(this),this.s=2,So(this)):po(this,this.S-A)};function So(A){A.j.G==0||A.J||zi(A.j,A)}function ts(A){Ni(A);var j=A.M;j&&typeof j.ma=="function"&&j.ma(),A.M=null,xi(A.U),A.g&&(j=A.g,A.g=null,j.abort(),j.ma())}function ns(A,j){try{var G=A.j;if(G.G!=0&&(G.g==A||Ef(G.h,A))){if(!A.K&&Ef(G.h,A)&&G.G==3){try{var ne=G.Da.g.parse(j)}catch{ne=null}if(Array.isArray(ne)&&ne.length==3){var De=ne;if(De[0]==0){e:if(!G.u){if(G.g)if(G.g.F+3e3<A.F)oy(G),ob(G);else break e;Cw(G),pi(18)}}else G.za=De[1],0<G.za-G.T&&37500>De[2]&&G.F&&G.v==0&&!G.C&&(G.C=si(d(G.Za,G),6e3));if(1>=wl(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else Pd(G,11)}else if((A.K||G.g==A)&&oy(G),!b(j))for(De=G.Da.g.parse(j),j=0;j<De.length;j++){let Ir=De[j];if(G.T=Ir[0],Ir=Ir[1],G.G==2)if(Ir[0]=="c"){G.K=Ir[1],G.ia=Ir[2];const mi=Ir[3];mi!=null&&(G.la=mi,G.j.info("VER="+G.la));const go=Ir[4];go!=null&&(G.Aa=go,G.j.info("SVER="+G.Aa));const Tf=Ir[5];Tf!=null&&typeof Tf=="number"&&0<Tf&&(ne=1.5*Tf,G.L=ne,G.j.info("backChannelRequestTimeoutMs_="+ne)),ne=G;const El=A.g;if(El){const fb=El.g?El.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fb){var ze=ne.h;ze.g||fb.indexOf("spdy")==-1&&fb.indexOf("quic")==-1&&fb.indexOf("h2")==-1||(ze.j=ze.l,ze.g=new Set,ze.h&&(ee(ze,ze.h),ze.h=null))}if(ne.D){const PC=El.g?El.g.getResponseHeader("X-HTTP-Session-Id"):null;PC&&(ne.ya=PC,Kt(ne.I,ne.D,PC))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-A.F,G.j.info("Handshake RTT: "+G.R+"ms")),ne=G;var At=A;if(ne.qa=Aw(ne,ne.J?ne.ia:null,ne.W),At.K){pe(ne.h,At);var ui=At,Io=ne.L;Io&&(ui.I=Io),ui.B&&(Ni(ui),Di(ui)),ne.g=At}else PP(ne);0<G.i.length&&ab(G)}else Ir[0]!="stop"&&Ir[0]!="close"||Pd(G,7);else G.G==3&&(Ir[0]=="stop"||Ir[0]=="close"?Ir[0]=="stop"?Pd(G,7):Km(G):Ir[0]!="noop"&&G.l&&G.l.ta(Ir),G.v=0)}}Lr(4)}catch{}}var To=class{constructor(A,j){this.g=A,this.map=j}};function xa(A){this.l=A||10,a.PerformanceNavigationTiming?(A=a.performance.getEntriesByType("navigation"),A=0<A.length&&(A[0].nextHopProtocol=="hq"||A[0].nextHopProtocol=="h2")):A=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=A?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mo(A){return A.h?!0:A.g?A.g.size>=A.j:!1}function wl(A){return A.h?1:A.g?A.g.size:0}function Ef(A,j){return A.h?A.h==j:A.g?A.g.has(j):!1}function ee(A,j){A.g?A.g.add(j):A.h=j}function pe(A,j){A.h&&A.h==j?A.h=null:A.g&&A.g.has(j)&&A.g.delete(j)}xa.prototype.cancel=function(){if(this.i=se(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const A of this.g.values())A.cancel();this.g.clear()}};function se(A){if(A.h!=null)return A.i.concat(A.h.D);if(A.g!=null&&A.g.size!==0){let j=A.i;for(const G of A.g.values())j=j.concat(G.D);return j}return m(A.i)}function xe(A){if(A.V&&typeof A.V=="function")return A.V();if(typeof Map<"u"&&A instanceof Map||typeof Set<"u"&&A instanceof Set)return Array.from(A.values());if(typeof A=="string")return A.split("");if(u(A)){for(var j=[],G=A.length,ne=0;ne<G;ne++)j.push(A[ne]);return j}j=[],G=0;for(ne in A)j[G++]=A[ne];return j}function Ce(A){if(A.na&&typeof A.na=="function")return A.na();if(!A.V||typeof A.V!="function"){if(typeof Map<"u"&&A instanceof Map)return Array.from(A.keys());if(!(typeof Set<"u"&&A instanceof Set)){if(u(A)||typeof A=="string"){var j=[];A=A.length;for(var G=0;G<A;G++)j.push(G);return j}j=[],G=0;for(const ne in A)j[G++]=ne;return j}}}function be(A,j){if(A.forEach&&typeof A.forEach=="function")A.forEach(j,void 0);else if(u(A)||typeof A=="string")Array.prototype.forEach.call(A,j,void 0);else for(var G=Ce(A),ne=xe(A),De=ne.length,ze=0;ze<De;ze++)j.call(void 0,ne[ze],G&&G[ze],A)}var He=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(A,j){if(A){A=A.split("&");for(var G=0;G<A.length;G++){var ne=A[G].indexOf("="),De=null;if(0<=ne){var ze=A[G].substring(0,ne);De=A[G].substring(ne+1)}else ze=A[G];j(ze,De?decodeURIComponent(De.replace(/\+/g," ")):"")}}}function at(A){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,A instanceof at){this.h=A.h,vt(this,A.j),this.o=A.o,this.g=A.g,Mt(this,A.s),this.l=A.l;var j=A.i,G=new $u;G.i=j.i,j.g&&(G.g=new Map(j.g),G.h=j.h),On(this,G),this.m=A.m}else A&&(j=String(A).match(He))?(this.h=!1,vt(this,j[1]||"",!0),this.o=zr(j[2]||""),this.g=zr(j[3]||"",!0),Mt(this,j[4]),this.l=zr(j[5]||"",!0),On(this,j[6]||"",!0),this.m=zr(j[7]||"")):(this.h=!1,this.i=new $u(null,this.h))}at.prototype.toString=function(){var A=[],j=this.j;j&&A.push(vr(j,Ac,!0),":");var G=this.g;return(G||j=="file")&&(A.push("//"),(j=this.o)&&A.push(vr(j,Ac,!0),"@"),A.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.s,G!=null&&A.push(":",String(G))),(G=this.l)&&(this.g&&G.charAt(0)!="/"&&A.push("/"),A.push(vr(G,G.charAt(0)=="/"?iy:Ad,!0))),(G=this.i.toString())&&A.push("?",G),(G=this.m)&&A.push("#",vr(G,rb)),A.join("")};function ut(A){return new at(A)}function vt(A,j,G){A.j=G?zr(j,!0):j,A.j&&(A.j=A.j.replace(/:$/,""))}function Mt(A,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);A.s=j}else A.s=null}function On(A,j,G){j instanceof $u?(A.i=j,sb(A.i,A.h)):(G||(j=vr(j,ep)),A.i=new $u(j,A.h))}function Kt(A,j,G){A.i.set(j,G)}function er(A){return Kt(A,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),A}function zr(A,j){return A?j?decodeURI(A.replace(/%25/g,"%2525")):decodeURIComponent(A):""}function vr(A,j,G){return typeof A=="string"?(A=encodeURI(A).replace(j,Co),G&&(A=A.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A):null}function Co(A){return A=A.charCodeAt(0),"%"+(A>>4&15).toString(16)+(A&15).toString(16)}var Ac=/[#\/\?@]/g,Ad=/[#\?:]/g,iy=/[#\?]/g,ep=/[#\?@]/g,rb=/#/g;function $u(A,j){this.h=this.g=null,this.i=A||null,this.j=!!j}function Ga(A){A.g||(A.g=new Map,A.h=0,A.i&&it(A.i,function(j,G){A.add(decodeURIComponent(j.replace(/\+/g," ")),G)}))}e=$u.prototype,e.add=function(A,j){Ga(this),this.i=null,A=kd(this,A);var G=this.g.get(A);return G||this.g.set(A,G=[]),G.push(j),this.h+=1,this};function Id(A,j){Ga(A),j=kd(A,j),A.g.has(j)&&(A.i=null,A.h-=A.g.get(j).length,A.g.delete(j))}function sy(A,j){return Ga(A),j=kd(A,j),A.g.has(j)}e.forEach=function(A,j){Ga(this),this.g.forEach(function(G,ne){G.forEach(function(De){A.call(j,De,ne,this)},this)},this)},e.na=function(){Ga(this);const A=Array.from(this.g.values()),j=Array.from(this.g.keys()),G=[];for(let ne=0;ne<j.length;ne++){const De=A[ne];for(let ze=0;ze<De.length;ze++)G.push(j[ne])}return G},e.V=function(A){Ga(this);let j=[];if(typeof A=="string")sy(this,A)&&(j=j.concat(this.g.get(kd(this,A))));else{A=Array.from(this.g.values());for(let G=0;G<A.length;G++)j=j.concat(A[G])}return j},e.set=function(A,j){return Ga(this),this.i=null,A=kd(this,A),sy(this,A)&&(this.h-=this.g.get(A).length),this.g.set(A,[j]),this.h+=1,this},e.get=function(A,j){return A?(A=this.V(A),0<A.length?String(A[0]):j):j};function ib(A,j,G){Id(A,j),0<G.length&&(A.i=null,A.g.set(kd(A,j),m(G)),A.h+=G.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const A=[],j=Array.from(this.g.keys());for(var G=0;G<j.length;G++){var ne=j[G];const ze=encodeURIComponent(String(ne)),At=this.V(ne);for(ne=0;ne<At.length;ne++){var De=ze;At[ne]!==""&&(De+="="+encodeURIComponent(String(At[ne]))),A.push(De)}}return this.i=A.join("&")};function kd(A,j){return j=String(j),A.j&&(j=j.toLowerCase()),j}function sb(A,j){j&&!A.j&&(Ga(A),A.i=null,A.g.forEach(function(G,ne){var De=ne.toLowerCase();ne!=De&&(Id(this,ne),ib(this,De,G))},A)),A.j=j}function ww(A,j){const G=new Ri;if(a.Image){const ne=new Image;ne.onload=h(Xo,G,"TestLoadImage: loaded",!0,j,ne),ne.onerror=h(Xo,G,"TestLoadImage: error",!1,j,ne),ne.onabort=h(Xo,G,"TestLoadImage: abort",!1,j,ne),ne.ontimeout=h(Xo,G,"TestLoadImage: timeout",!1,j,ne),a.setTimeout(function(){ne.ontimeout&&ne.ontimeout()},1e4),ne.src=A}else j(!1)}function Rd(A,j){const G=new Ri,ne=new AbortController,De=setTimeout(()=>{ne.abort(),Xo(G,"TestPingServer: timeout",!1,j)},1e4);fetch(A,{signal:ne.signal}).then(ze=>{clearTimeout(De),ze.ok?Xo(G,"TestPingServer: ok",!0,j):Xo(G,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(De),Xo(G,"TestPingServer: error",!1,j)})}function Xo(A,j,G,ne,De){try{De&&(De.onload=null,De.onerror=null,De.onabort=null,De.ontimeout=null),ne(G)}catch{}}function DC(){this.g=new hr}function Ew(A,j,G){const ne=G||"";try{be(A,function(De,ze){let At=De;l(De)&&(At=Tn(De)),j.push(ne+ze+"="+encodeURIComponent(At))})}catch(De){throw j.push(ne+"type="+encodeURIComponent("_badmap")),De}}function Wm(A){this.l=A.Ub||null,this.j=A.eb||!1}p(Wm,gr),Wm.prototype.g=function(){return new Gm(this.l,this.j)},Wm.prototype.i=function(A){return function(){return A}}({});function Gm(A,j){Ee.call(this),this.D=A,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Gm,Ee),e=Gm.prototype,e.open=function(A,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=A,this.A=j,this.readyState=1,Ar(this)},e.send=function(A){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};A&&(j.body=A),(this.D||a).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vr(this)),this.readyState=0},e.Sa=function(A){if(this.g&&(this.l=A,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=A.headers,this.readyState=2,Ar(this)),this.g&&(this.readyState=3,Ar(this),this.g)))if(this.responseType==="arraybuffer")A.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in A){if(this.j=A.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sw(this)}else A.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sw(A){A.j.read().then(A.Pa.bind(A)).catch(A.ga.bind(A))}e.Pa=function(A){if(this.g){if(this.o&&A.value)this.response.push(A.value);else if(!this.o){var j=A.value?A.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!A.done}))&&(this.response=this.responseText+=j)}A.done?Vr(this):Ar(this),this.readyState==3&&Sw(this)}},e.Ra=function(A){this.g&&(this.response=this.responseText=A,Vr(this))},e.Qa=function(A){this.g&&(this.response=A,Vr(this))},e.ga=function(){this.g&&Vr(this)};function Vr(A){A.readyState=4,A.l=null,A.j=null,A.v=null,Ar(A)}e.setRequestHeader=function(A,j){this.u.append(A,j)},e.getResponseHeader=function(A){return this.h&&this.h.get(A.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const A=[],j=this.h.entries();for(var G=j.next();!G.done;)G=G.value,A.push(G[0]+": "+G[1]),G=j.next();return A.join(`\r
`)};function Ar(A){A.onreadystatechange&&A.onreadystatechange.call(A)}Object.defineProperty(Gm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(A){this.m=A?"include":"same-origin"}});function Tw(A){let j="";return T(A,function(G,ne){j+=ne,j+=":",j+=G,j+=`\r
`}),j}function le(A,j,G){e:{for(ne in G){var ne=!1;break e}ne=!0}ne||(G=Tw(G),typeof A=="string"?G!=null&&encodeURIComponent(String(G)):Kt(A,j,G))}function ye(A){Ee.call(this),this.headers=new Map,this.o=A||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ye,Ee);var Be=/^https?$/i,Ht=["POST","PUT"];e=ye.prototype,e.Ha=function(A){this.J=A},e.ea=function(A,j,G,ne){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+A);j=j?j.toUpperCase():"GET",this.D=A,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():fn.g(),this.v=this.o?Yo(this.o):Yo(fn),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(j,String(A),!0),this.B=!1}catch(ze){ir(this,ze);return}if(A=G||"",G=new Map(this.headers),ne)if(Object.getPrototypeOf(ne)===Object.prototype)for(var De in ne)G.set(De,ne[De]);else if(typeof ne.keys=="function"&&typeof ne.get=="function")for(const ze of ne.keys())G.set(ze,ne.get(ze));else throw Error("Unknown input type for opt_headers: "+String(ne));ne=Array.from(G.keys()).find(ze=>ze.toLowerCase()=="content-type"),De=a.FormData&&A instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ht,j,void 0))||ne||De||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ze,At]of G)this.g.setRequestHeader(ze,At);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ai(this),this.u=!0,this.g.send(A),this.u=!1}catch(ze){ir(this,ze)}};function ir(A,j){A.h=!1,A.g&&(A.j=!0,A.g.abort(),A.j=!1),A.l=j,A.m=5,Hr(A),an(A)}function Hr(A){A.A||(A.A=!0,Oe(A,"complete"),Oe(A,"error"))}e.abort=function(A){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=A||7,Oe(this,"complete"),Oe(this,"abort"),an(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),an(this,!0)),ye.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?_i(this):this.bb())},e.bb=function(){_i(this)};function _i(A){if(A.h&&typeof o<"u"&&(!A.v[1]||wi(A)!=4||A.Z()!=2)){if(A.u&&wi(A)==4)xt(A.Ea,0,A);else if(Oe(A,"readystatechange"),wi(A)==4){A.h=!1;try{const At=A.Z();e:switch(At){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var G;if(!(G=j)){var ne;if(ne=At===0){var De=String(A.D).match(He)[1]||null;!De&&a.self&&a.self.location&&(De=a.self.location.protocol.slice(0,-1)),ne=!Be.test(De?De.toLowerCase():"")}G=ne}if(G)Oe(A,"complete"),Oe(A,"success");else{A.m=6;try{var ze=2<wi(A)?A.g.statusText:""}catch{ze=""}A.l=ze+" ["+A.Z()+"]",Hr(A)}}finally{an(A)}}}}function an(A,j){if(A.g){ai(A);const G=A.g,ne=A.v[0]?()=>{}:null;A.g=null,A.v=null,j||Oe(A,"ready");try{G.onreadystatechange=ne}catch{}}}function ai(A){A.I&&(a.clearTimeout(A.I),A.I=null)}e.isActive=function(){return!!this.g};function wi(A){return A.g?A.g.readyState:0}e.Z=function(){try{return 2<wi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(A){if(this.g){var j=this.g.responseText;return A&&j.indexOf(A)==0&&(j=j.substring(A.length)),Un(j)}};function Ao(A){try{if(!A.g)return null;if("response"in A.g)return A.g.response;switch(A.H){case"":case"text":return A.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in A.g)return A.g.mozResponseArrayBuffer}return null}catch{return null}}function Dd(A){const j={};A=(A.g&&2<=wi(A)&&A.g.getAllResponseHeaders()||"").split(`\r
`);for(let ne=0;ne<A.length;ne++){if(b(A[ne]))continue;var G=P(A[ne]);const De=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const ze=j[De]||[];j[De]=ze,ze.push(G)}C(j,function(ne){return ne.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ps(A,j,G){return G&&G.internalChannelParams&&G.internalChannelParams[A]||j}function Ym(A){this.Aa=0,this.i=[],this.j=new Ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ps("failFast",!1,A),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ps("baseRetryDelayMs",5e3,A),this.cb=Ps("retryDelaySeedMs",1e4,A),this.Wa=Ps("forwardChannelMaxRetries",2,A),this.wa=Ps("forwardChannelRequestTimeoutMs",2e4,A),this.pa=A&&A.xmlHttpFactory||void 0,this.Xa=A&&A.Tb||void 0,this.Ca=A&&A.useFetchStreams||!1,this.L=void 0,this.J=A&&A.supportsCrossDomainXhr||!1,this.K="",this.h=new xa(A&&A.concurrentRequestLimit),this.Da=new DC,this.P=A&&A.fastHandshake||!1,this.O=A&&A.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=A&&A.Rb||!1,A&&A.xa&&this.j.xa(),A&&A.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&A&&A.detectBufferingProxy||!1,this.ja=void 0,A&&A.longPollingTimeout&&0<A.longPollingTimeout&&(this.ja=A.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Ym.prototype,e.la=8,e.G=1,e.connect=function(A,j,G,ne){pi(0),this.W=A,this.H=j||{},G&&ne!==void 0&&(this.H.OSID=G,this.H.OAID=ne),this.F=this.X,this.I=Aw(this,null,this.W),ab(this)};function Km(A){if(NC(A),A.G==3){var j=A.U++,G=ut(A.I);if(Kt(G,"SID",A.K),Kt(G,"RID",j),Kt(G,"TYPE","terminate"),ub(A,G),j=new ur(A,A.j,j),j.L=2,j.v=er(ut(G)),G=!1,a.navigator&&a.navigator.sendBeacon)try{G=a.navigator.sendBeacon(j.v.toString(),"")}catch{}!G&&a.Image&&(new Image().src=j.v,G=!0),G||(j.g=$P(j.j,null),j.g.ea(j.v)),j.F=Date.now(),Di(j)}OP(A)}function ob(A){A.g&&(Sf(A),A.g.cancel(),A.g=null)}function NC(A){ob(A),A.u&&(a.clearTimeout(A.u),A.u=null),oy(A),A.h.cancel(),A.s&&(typeof A.s=="number"&&a.clearTimeout(A.s),A.s=null)}function ab(A){if(!mo(A.h)&&!A.s){A.s=!0;var j=A.Ga;Y||L(),K||(Y(),K=!0),Q.add(j,A),A.B=0}}function NP(A,j){return wl(A.h)>=A.h.j-(A.s?1:0)?!1:A.s?(A.i=j.D.concat(A.i),!0):A.G==1||A.G==2||A.B>=(A.Va?0:A.Wa)?!1:(A.s=si(d(A.Ga,A,j),Nd(A,A.B)),A.B++,!0)}e.Ga=function(A){if(this.s)if(this.s=null,this.G==1){if(!A){this.U=Math.floor(1e5*Math.random()),A=this.U++;const De=new ur(this,this.j,A);let ze=this.o;if(this.S&&(ze?(ze=I(ze),k(ze,this.S)):ze=this.S),this.m!==null||this.O||(De.H=ze,ze=null),this.P)e:{for(var j=0,G=0;G<this.i.length;G++){t:{var ne=this.i[G];if("__data__"in ne.map&&(ne=ne.map.__data__,typeof ne=="string")){ne=ne.length;break t}ne=void 0}if(ne===void 0)break;if(j+=ne,4096<j){j=G;break e}if(j===4096||G===this.i.length-1){j=G+1;break e}}j=1e3}else j=1e3;j=Mu(this,De,j),G=ut(this.I),Kt(G,"RID",A),Kt(G,"CVER",22),this.D&&Kt(G,"X-HTTP-Session-Id",this.D),ub(this,G),ze&&(this.O?j="headers="+encodeURIComponent(String(Tw(ze)))+"&"+j:this.m&&le(G,this.m,ze)),ee(this.h,De),this.Ua&&Kt(G,"TYPE","init"),this.P?(Kt(G,"$req",j),Kt(G,"SID","null"),De.T=!0,on(De,G,null)):on(De,G,j),this.G=2}}else this.G==3&&(A?Ya(this,A):this.i.length==0||mo(this.h)||Ya(this))};function Ya(A,j){var G;j?G=j.l:G=A.U++;const ne=ut(A.I);Kt(ne,"SID",A.K),Kt(ne,"RID",G),Kt(ne,"AID",A.T),ub(A,ne),A.m&&A.o&&le(ne,A.m,A.o),G=new ur(A,A.j,G,A.B+1),A.m===null&&(G.H=A.o),j&&(A.i=j.D.concat(A.i)),j=Mu(A,G,1e3),G.I=Math.round(.5*A.wa)+Math.round(.5*A.wa*Math.random()),ee(A.h,G),on(G,ne,j)}function ub(A,j){A.H&&T(A.H,function(G,ne){Kt(j,ne,G)}),A.l&&be({},function(G,ne){Kt(j,ne,G)})}function Mu(A,j,G){G=Math.min(A.i.length,G);var ne=A.l?d(A.l.Na,A.l,A):null;e:{var De=A.i;let ze=-1;for(;;){const At=["count="+G];ze==-1?0<G?(ze=De[0].g,At.push("ofs="+ze)):ze=0:At.push("ofs="+ze);let ui=!0;for(let Io=0;Io<G;Io++){let Ir=De[Io].g;const mi=De[Io].map;if(Ir-=ze,0>Ir)ze=Math.max(0,De[Io].g-100),ui=!1;else try{Ew(mi,At,"req"+Ir+"_")}catch{ne&&ne(mi)}}if(ui){ne=At.join("&");break e}}}return A=A.i.splice(0,G),j.D=A,ne}function PP(A){if(!A.g&&!A.u){A.Y=1;var j=A.Fa;Y||L(),K||(Y(),K=!0),Q.add(j,A),A.v=0}}function Cw(A){return A.g||A.u||3<=A.v?!1:(A.Y++,A.u=si(d(A.Fa,A),Nd(A,A.v)),A.v++,!0)}e.Fa=function(){if(this.u=null,lb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var A=2*this.R;this.j.info("BP detection timer enabled: "+A),this.A=si(d(this.ab,this),A)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pi(10),ob(this),lb(this))};function Sf(A){A.A!=null&&(a.clearTimeout(A.A),A.A=null)}function lb(A){A.g=new ur(A,A.j,"rpc",A.Y),A.m===null&&(A.g.H=A.o),A.g.O=0;var j=ut(A.qa);Kt(j,"RID","rpc"),Kt(j,"SID",A.K),Kt(j,"AID",A.T),Kt(j,"CI",A.F?"0":"1"),!A.F&&A.ja&&Kt(j,"TO",A.ja),Kt(j,"TYPE","xmlhttp"),ub(A,j),A.m&&A.o&&le(j,A.m,A.o),A.L&&(A.g.I=A.L);var G=A.g;A=A.ia,G.L=1,G.v=er(ut(j)),G.m=null,G.P=!0,Cr(G,A)}e.Za=function(){this.C!=null&&(this.C=null,ob(this),Cw(this),pi(19))};function oy(A){A.C!=null&&(a.clearTimeout(A.C),A.C=null)}function zi(A,j){var G=null;if(A.g==j){oy(A),Sf(A),A.g=null;var ne=2}else if(Ef(A.h,j))G=j.D,pe(A.h,j),ne=1;else return;if(A.G!=0){if(j.o)if(ne==1){G=j.m?j.m.length:0,j=Date.now()-j.F;var De=A.B;ne=Ko(),Oe(ne,new Xs(ne,G)),ab(A)}else PP(A);else if(De=j.s,De==3||De==0&&0<j.X||!(ne==1&&NP(A,j)||ne==2&&Cw(A)))switch(G&&0<G.length&&(j=A.h,j.i=j.i.concat(G)),De){case 1:Pd(A,5);break;case 4:Pd(A,10);break;case 3:Pd(A,6);break;default:Pd(A,2)}}}function Nd(A,j){let G=A.Ta+Math.floor(Math.random()*A.cb);return A.isActive()||(G*=2),G*j}function Pd(A,j){if(A.j.info("Error code "+j),j==2){var G=d(A.fb,A),ne=A.Xa;const De=!ne;ne=new at(ne||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vt(ne,"https"),er(ne),De?ww(ne.toString(),G):Rd(ne.toString(),G)}else pi(2);A.G=0,A.l&&A.l.sa(j),OP(A),NC(A)}e.fb=function(A){A?(this.j.info("Successfully pinged google.com"),pi(2)):(this.j.info("Failed to ping google.com"),pi(1))};function OP(A){if(A.G=0,A.ka=[],A.l){const j=se(A.h);(j.length!=0||A.i.length!=0)&&(g(A.ka,j),g(A.ka,A.i),A.h.i.length=0,m(A.i),A.i.length=0),A.l.ra()}}function Aw(A,j,G){var ne=G instanceof at?ut(G):new at(G);if(ne.g!="")j&&(ne.g=j+"."+ne.g),Mt(ne,ne.s);else{var De=a.location;ne=De.protocol,j=j?j+"."+De.hostname:De.hostname,De=+De.port;var ze=new at(null);ne&&vt(ze,ne),j&&(ze.g=j),De&&Mt(ze,De),G&&(ze.l=G),ne=ze}return G=A.D,j=A.ya,G&&j&&Kt(ne,G,j),Kt(ne,"VER",A.la),ub(A,ne),ne}function $P(A,j,G){if(j&&!A.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=A.Ca&&!A.pa?new ye(new Wm({eb:G})):new ye(A.pa),j.Ha(A.J),j}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function MP(){}e=MP.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Iw(){}Iw.prototype.g=function(A,j){return new Ka(A,j)};function Ka(A,j){Ee.call(this),this.g=new Ym(j),this.l=A,this.h=j&&j.messageUrlParams||null,A=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(A?A["X-Client-Protocol"]="webchannel":A={"X-Client-Protocol":"webchannel"}),this.g.o=A,A=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(A?A["X-WebChannel-Content-Type"]=j.messageContentType:A={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(A?A["X-WebChannel-Client-Profile"]=j.va:A={"X-WebChannel-Client-Profile":j.va}),this.g.S=A,(A=j&&j.Sb)&&!b(A)&&(this.g.m=A),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!b(j)&&(this.g.D=j,A=this.h,A!==null&&j in A&&(A=this.h,j in A&&delete A[j])),this.j=new ay(this)}p(Ka,Ee),Ka.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ka.prototype.close=function(){Km(this.g)},Ka.prototype.o=function(A){var j=this.g;if(typeof A=="string"){var G={};G.__data__=A,A=G}else this.u&&(G={},G.__data__=Tn(A),A=G);j.i.push(new To(j.Ya++,A)),j.G==3&&ab(j)},Ka.prototype.N=function(){this.g.l=null,delete this.j,Km(this.g),delete this.g,Ka.aa.N.call(this)};function cb(A){Ns.call(this),A.__headers__&&(this.headers=A.__headers__,this.statusCode=A.__status__,delete A.__headers__,delete A.__status__);var j=A.__sm__;if(j){e:{for(const G in j){A=G;break e}A=void 0}(this.i=A)&&(A=this.i,j=j!==null&&A in j?j[A]:void 0),this.data=j}else this.data=A}p(cb,Ns);function Xm(){Ur.call(this),this.status=1}p(Xm,Ur);function ay(A){this.g=A}p(ay,MP),ay.prototype.ua=function(){Oe(this.g,"a")},ay.prototype.ta=function(A){Oe(this.g,new cb(A))},ay.prototype.sa=function(A){Oe(this.g,new Xm)},ay.prototype.ra=function(){Oe(this.g,"b")},Iw.prototype.createWebChannel=Iw.prototype.g,Ka.prototype.send=Ka.prototype.o,Ka.prototype.open=Ka.prototype.m,Ka.prototype.close=Ka.prototype.close,XUe=function(){return new Iw},KUe=function(){return Ko()},YUe=hs,UK={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,D6=_t,Ut.COMPLETE="complete",GUe=Ut,es.EventType=ds,ds.OPEN="a",ds.CLOSE="b",ds.ERROR="c",ds.MESSAGE="d",Ee.prototype.listen=Ee.prototype.K,LI=es,WUe=Wm,ye.prototype.listenOnce=ye.prototype.L,ye.prototype.getLastError=ye.prototype.Ka,ye.prototype.getLastErrorCode=ye.prototype.Ba,ye.prototype.getStatus=ye.prototype.Z,ye.prototype.getResponseJson=ye.prototype.Oa,ye.prototype.getResponseText=ye.prototype.oa,ye.prototype.send=ye.prototype.ea,ye.prototype.setWithCredentials=ye.prototype.Ha,qUe=ye}).apply(typeof i4<"u"?i4:typeof self<"u"?self:typeof window<"u"?window:{});const swe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Ol.UNAUTHENTICATED=new Ol(null),Ol.GOOGLE_CREDENTIALS=new Ol("google-credentials-uid"),Ol.FIRST_PARTY=new Ol("first-party-uid"),Ol.MOCK_USER=new Ol("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AC="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D_=new I9("@firebase/firestore");function WA(){return D_.logLevel}function Yt(e,...t){if(D_.logLevel<=Dr.DEBUG){const n=t.map(aue);D_.debug(`Firestore (${AC}): ${e}`,...n)}}function Ng(e,...t){if(D_.logLevel<=Dr.ERROR){const n=t.map(aue);D_.error(`Firestore (${AC}): ${e}`,...n)}}function wD(e,...t){if(D_.logLevel<=Dr.WARN){const n=t.map(aue);D_.warn(`Firestore (${AC}): ${e}`,...n)}}function aue(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(e="Unexpected state"){const t=`FIRESTORE (${AC}) INTERNAL ASSERTION FAILED: `+e;throw Ng(t),new Error(t)}function Qi(e,t){e||Dn()}function Bn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Lt extends qm{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0n{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class A0n{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Ol.UNAUTHENTICATED))}shutdown(){}}class I0n{constructor(t){this.t=t,this.currentUser=Ol.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new ig;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ig,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Yt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Yt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ig)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Yt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qi(typeof r.accessToken=="string"),new C0n(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return Qi(t===null||typeof t=="string"),new Ol(t)}}class k0n{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Ol.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class R0n{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new k0n(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Ol.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D0n{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N0n{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Yt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Yt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Yt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Yt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Qi(typeof n.token=="string"),this.R=n.token,new D0n(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0n(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QUe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=P0n(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function ci(e,t){return e<t?-1:e>t?1:0}function r2(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Lt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Lt(tt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Lt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Lt(tt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return zo.fromMillis(Date.now())}static fromDate(t){return zo.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new zo(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ci(this.nanoseconds,t.nanoseconds):ci(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Fn(t)}static min(){return new Fn(new zo(0,0))}static max(){return new Fn(new zo(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(t,n,r){n===void 0?n=0:n>t.length&&Dn(),r===void 0?r=t.length-n:r>t.length-n&&Dn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return ED.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ED?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ls extends ED{construct(t,n,r){return new ls(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Lt(tt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ls(n)}static emptyPath(){return new ls([])}}const O0n=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Na extends ED{construct(t,n,r){return new Na(t,n,r)}static isValidIdentifier(t){return O0n.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Na.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Na(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Lt(tt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Lt(tt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Lt(tt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Lt(tt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Na(n)}static emptyPath(){return new Na([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.path=t}static fromPath(t){return new ln(ls.fromString(t))}static fromName(t){return new ln(ls.fromString(t).popFirst(5))}static empty(){return new ln(ls.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ls.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ls.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new ln(new ls(t.slice()))}}function $0n(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Fn.fromTimestamp(r===1e9?new zo(n+1,0):new zo(n,r));return new vv(i,ln.empty(),t)}function M0n(e){return new vv(e.readTime,e.key,-1)}class vv{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new vv(Fn.min(),ln.empty(),-1)}static max(){return new vv(Fn.max(),ln.empty(),-1)}}function L0n(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=ln.comparator(e.documentKey,t.documentKey),n!==0?n:ci(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0n="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B0n{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(e){if(e.code!==tt.FAILED_PRECONDITION||e.message!==F0n)throw e;Yt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Dn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new dt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof dt?n:dt.resolve(n)}catch(n){return dt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):dt.reject(n)}static resolve(t){return new dt((n,r)=>{n(t)})}static reject(t){return new dt((n,r)=>{r(t)})}static waitFor(t){return new dt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=dt.resolve(!1);for(const r of t)n=n.next(i=>i?dt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new dt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new dt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function j0n(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wP(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uue{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}uue.oe=-1;function $9(e){return e==null}function pF(e){return e===0&&1/e==-1/0}function U0n(e){return typeof e=="number"&&Number.isInteger(e)&&!pF(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function owe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function vw(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function JUe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(t,n){this.comparator=t,this.root=n||Ra.EMPTY}insert(t,n){return new Ds(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Ra.BLACK,null,null))}remove(t){return new Ds(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ra.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new s4(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new s4(this.root,t,this.comparator,!1)}getReverseIterator(){return new s4(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new s4(this.root,t,this.comparator,!0)}}class s4{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ra{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Ra.RED,this.left=i??Ra.EMPTY,this.right=s??Ra.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Ra(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ra.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Ra.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ra.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ra.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Dn();const t=this.left.check();if(t!==this.right.check())throw Dn();return t+(this.isRed()?0:1)}}Ra.EMPTY=null,Ra.RED=!0,Ra.BLACK=!1;Ra.EMPTY=new class{constructor(){this.size=0}get key(){throw Dn()}get value(){throw Dn()}get color(){throw Dn()}get left(){throw Dn()}get right(){throw Dn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Ra(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(t){this.comparator=t,this.data=new Ds(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new awe(this.data.getIterator())}getIteratorFrom(t){return new awe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ba)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ba(this.comparator);return n.data=t,n}}class awe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(t){this.fields=t,t.sort(Na.comparator)}static empty(){return new Xc([])}unionWith(t){let n=new Ba(Na.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Xc(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return r2(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZUe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ZUe("Invalid base64 string: "+s):s}}(t);return new Ru(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Ru(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ci(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ru.EMPTY_BYTE_STRING=new Ru("");const z0n=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bv(e){if(Qi(!!e),typeof e=="string"){let t=0;const n=z0n.exec(e);if(Qi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bo(e.seconds),nanos:bo(e.nanos)}}function bo(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function N_(e){return typeof e=="string"?Ru.fromBase64String(e):Ru.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lue(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cue(e){const t=e.mapValue.fields.__previous_value__;return lue(t)?cue(t):t}function SD(e){const t=bv(e.mapValue.fields.__local_write_time__.timestampValue);return new zo(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0n{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class TD{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new TD("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof TD&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o4={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function P_(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?lue(e)?4:H0n(e)?9007199254740991:10:Dn()}function Sm(e,t){if(e===t)return!0;const n=P_(e);if(n!==P_(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return SD(e).isEqual(SD(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=bv(i.timestampValue),a=bv(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return N_(i.bytesValue).isEqual(N_(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return bo(i.geoPointValue.latitude)===bo(s.geoPointValue.latitude)&&bo(i.geoPointValue.longitude)===bo(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return bo(i.integerValue)===bo(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=bo(i.doubleValue),a=bo(s.doubleValue);return o===a?pF(o)===pF(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return r2(e.arrayValue.values||[],t.arrayValue.values||[],Sm);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(owe(o)!==owe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Sm(o[u],a[u])))return!1;return!0}(e,t);default:return Dn()}}function CD(e,t){return(e.values||[]).find(n=>Sm(n,t))!==void 0}function i2(e,t){if(e===t)return 0;const n=P_(e),r=P_(t);if(n!==r)return ci(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ci(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=bo(s.integerValue||s.doubleValue),u=bo(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return uwe(e.timestampValue,t.timestampValue);case 4:return uwe(SD(e),SD(t));case 5:return ci(e.stringValue,t.stringValue);case 6:return function(s,o){const a=N_(s),u=N_(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=ci(a[l],u[l]);if(c!==0)return c}return ci(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=ci(bo(s.latitude),bo(o.latitude));return a!==0?a:ci(bo(s.longitude),bo(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=i2(a[l],u[l]);if(c)return c}return ci(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===o4.mapValue&&o===o4.mapValue)return 0;if(s===o4.mapValue)return 1;if(o===o4.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=ci(u[f],c[f]);if(d!==0)return d;const h=i2(a[u[f]],l[c[f]]);if(h!==0)return h}return ci(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Dn()}}function uwe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ci(e,t);const n=bv(e),r=bv(t),i=ci(n.seconds,r.seconds);return i!==0?i:ci(n.nanos,r.nanos)}function s2(e){return zK(e)}function zK(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=bv(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return N_(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return ln.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=zK(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${zK(n.fields[o])}`;return i+"}"}(e.mapValue):Dn()}function lwe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function VK(e){return!!e&&"integerValue"in e}function fue(e){return!!e&&"arrayValue"in e}function cwe(e){return!!e&&"nullValue"in e}function fwe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function N6(e){return!!e&&"mapValue"in e}function Lk(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return vw(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=Lk(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Lk(e.arrayValue.values[n]);return t}return Object.assign({},e)}function H0n(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(t){this.value=t}static empty(){return new ql({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!N6(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Lk(n)}setAll(t){let n=Na.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Lk(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());N6(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Sm(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];N6(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){vw(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new ql(Lk(this.value))}}function eze(e){const t=[];return vw(e.fields,(n,r)=>{const i=new Na([n]);if(N6(r)){const s=eze(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Xc(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new pu(t,0,Fn.min(),Fn.min(),Fn.min(),ql.empty(),0)}static newFoundDocument(t,n,r,i){return new pu(t,1,n,Fn.min(),r,i,0)}static newNoDocument(t,n){return new pu(t,2,n,Fn.min(),Fn.min(),ql.empty(),0)}static newUnknownDocument(t,n){return new pu(t,3,n,Fn.min(),Fn.min(),ql.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Fn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ql.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ql.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof pu&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new pu(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(t,n){this.position=t,this.inclusive=n}}function dwe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=ln.comparator(ln.fromName(o.referenceValue),n.key):r=i2(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function hwe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Sm(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(t,n="asc"){this.field=t,this.dir=n}}function q0n(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tze{}class _o extends tze{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new G0n(t,n,r):n==="array-contains"?new X0n(t,r):n==="in"?new Q0n(t,r):n==="not-in"?new J0n(t,r):n==="array-contains-any"?new Z0n(t,r):new _o(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Y0n(t,r):new K0n(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(i2(n,this.value)):n!==null&&P_(this.value)===P_(n)&&this.matchesComparison(i2(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Dn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Fh extends tze{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Fh(t,n)}matches(t){return nze(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function nze(e){return e.op==="and"}function rze(e){return W0n(e)&&nze(e)}function W0n(e){for(const t of e.filters)if(t instanceof Fh)return!1;return!0}function HK(e){if(e instanceof _o)return e.field.canonicalString()+e.op.toString()+s2(e.value);if(rze(e))return e.filters.map(t=>HK(t)).join(",");{const t=e.filters.map(n=>HK(n)).join(",");return`${e.op}(${t})`}}function ize(e,t){return e instanceof _o?function(r,i){return i instanceof _o&&r.op===i.op&&r.field.isEqual(i.field)&&Sm(r.value,i.value)}(e,t):e instanceof Fh?function(r,i){return i instanceof Fh&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ize(o,i.filters[a]),!0):!1}(e,t):void Dn()}function sze(e){return e instanceof _o?function(n){return`${n.field.canonicalString()} ${n.op} ${s2(n.value)}`}(e):e instanceof Fh?function(n){return n.op.toString()+" {"+n.getFilters().map(sze).join(" ,")+"}"}(e):"Filter"}class G0n extends _o{constructor(t,n,r){super(t,n,r),this.key=ln.fromName(r.referenceValue)}matches(t){const n=ln.comparator(t.key,this.key);return this.matchesComparison(n)}}class Y0n extends _o{constructor(t,n){super(t,"in",n),this.keys=oze("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class K0n extends _o{constructor(t,n){super(t,"not-in",n),this.keys=oze("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function oze(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ln.fromName(r.referenceValue))}class X0n extends _o{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return fue(n)&&CD(n.arrayValue,this.value)}}class Q0n extends _o{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&CD(this.value.arrayValue,n)}}class J0n extends _o{constructor(t,n){super(t,"not-in",n)}matches(t){if(CD(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!CD(this.value.arrayValue,n)}}class Z0n extends _o{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!fue(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>CD(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class egn{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function pwe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new egn(e,t,n,r,i,s,o)}function due(e){const t=Bn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>HK(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$9(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>s2(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>s2(r)).join(",")),t.ue=n}return t.ue}function hue(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!q0n(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ize(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hwe(e.startAt,t.startAt)&&hwe(e.endAt,t.endAt)}function qK(e){return ln.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function tgn(e,t,n,r,i,s,o,a){return new IC(e,t,n,r,i,s,o,a)}function pue(e){return new IC(e)}function mwe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function aze(e){return e.collectionGroup!==null}function Fk(e){const t=Bn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ba(Na.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new AD(s,r))}),n.has(Na.keyField().canonicalString())||t.ce.push(new AD(Na.keyField(),r))}return t.ce}function nm(e){const t=Bn(e);return t.le||(t.le=ngn(t,Fk(e))),t.le}function ngn(e,t){if(e.limitType==="F")return pwe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new AD(i.field,s)});const n=e.endAt?new mF(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new mF(e.startAt.position,e.startAt.inclusive):null;return pwe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function WK(e,t){const n=e.filters.concat([t]);return new IC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function GK(e,t,n){return new IC(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function M9(e,t){return hue(nm(e),nm(t))&&e.limitType===t.limitType}function uze(e){return`${due(nm(e))}|lt:${e.limitType}`}function AE(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>sze(i)).join(", ")}]`),$9(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>s2(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>s2(i)).join(",")),`Target(${r})`}(nm(e))}; limitType=${e.limitType})`}function L9(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ln.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of Fk(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=dwe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Fk(r),i)||r.endAt&&!function(o,a,u){const l=dwe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Fk(r),i))}(e,t)}function rgn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function lze(e){return(t,n)=>{let r=!1;for(const i of Fk(e)){const s=ign(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ign(e,t,n){const r=e.field.isKeyField()?ln.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?i2(u,l):Dn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){vw(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return JUe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sgn=new Ds(ln.comparator);function Pg(){return sgn}const cze=new Ds(ln.comparator);function FI(...e){let t=cze;for(const n of e)t=t.insert(n.key,n);return t}function fze(e){let t=cze;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Ix(){return Bk()}function dze(){return Bk()}function Bk(){return new kC(e=>e.toString(),(e,t)=>e.isEqual(t))}const ogn=new Ds(ln.comparator),agn=new Ba(ln.comparator);function xr(...e){let t=agn;for(const n of e)t=t.add(n);return t}const ugn=new Ba(ci);function lgn(){return ugn}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hze(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pF(t)?"-0":t}}function pze(e){return{integerValue:""+e}}function cgn(e,t){return U0n(t)?pze(t):hze(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F9{constructor(){this._=void 0}}function fgn(e,t,n){return e instanceof ID?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&lue(s)&&(s=cue(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof kD?gze(e,t):e instanceof RD?yze(e,t):function(i,s){const o=mze(i,s),a=gwe(o)+gwe(i.Pe);return VK(o)&&VK(i.Pe)?pze(a):hze(i.serializer,a)}(e,t)}function dgn(e,t,n){return e instanceof kD?gze(e,t):e instanceof RD?yze(e,t):n}function mze(e,t){return e instanceof gF?function(r){return VK(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class ID extends F9{}class kD extends F9{constructor(t){super(),this.elements=t}}function gze(e,t){const n=vze(t);for(const r of e.elements)n.some(i=>Sm(i,r))||n.push(r);return{arrayValue:{values:n}}}class RD extends F9{constructor(t){super(),this.elements=t}}function yze(e,t){let n=vze(t);for(const r of e.elements)n=n.filter(i=>!Sm(i,r));return{arrayValue:{values:n}}}class gF extends F9{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function gwe(e){return bo(e.integerValue||e.doubleValue)}function vze(e){return fue(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hgn{constructor(t,n){this.field=t,this.transform=n}}function pgn(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof kD&&i instanceof kD||r instanceof RD&&i instanceof RD?r2(r.elements,i.elements,Sm):r instanceof gF&&i instanceof gF?Sm(r.Pe,i.Pe):r instanceof ID&&i instanceof ID}(e.transform,t.transform)}class mgn{constructor(t,n){this.version=t,this.transformResults=n}}class rf{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new rf}static exists(t){return new rf(void 0,t)}static updateTime(t){return new rf(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function P6(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class B9{}function bze(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new mue(e.key,rf.none()):new EP(e.key,e.data,rf.none());{const n=e.data,r=ql.empty();let i=new Ba(Na.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new nb(e.key,r,new Xc(i.toArray()),rf.none())}}function ggn(e,t,n){e instanceof EP?function(i,s,o){const a=i.value.clone(),u=vwe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof nb?function(i,s,o){if(!P6(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=vwe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(xze(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function jk(e,t,n,r){return e instanceof EP?function(s,o,a,u){if(!P6(s.precondition,o))return a;const l=s.value.clone(),c=bwe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof nb?function(s,o,a,u){if(!P6(s.precondition,o))return a;const l=bwe(s.fieldTransforms,u,o),c=o.data;return c.setAll(xze(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return P6(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function ygn(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=mze(r.transform,i||null);s!=null&&(n===null&&(n=ql.empty()),n.set(r.field,s))}return n||null}function ywe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&r2(r,i,(s,o)=>pgn(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class EP extends B9{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class nb extends B9{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xze(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function vwe(e,t,n){const r=new Map;Qi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,dgn(o,a,n[i]))}return r}function bwe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,fgn(s,o,t))}return r}class mue extends B9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vgn extends B9{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bgn{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&ggn(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=jk(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=jk(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=dze();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=bze(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Fn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),xr())}isEqual(t){return this.batchId===t.batchId&&r2(this.mutations,t.mutations,(n,r)=>ywe(n,r))&&r2(this.baseMutations,t.baseMutations,(n,r)=>ywe(n,r))}}class gue{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Qi(t.mutations.length===r.length);let i=function(){return ogn}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new gue(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xgn{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _gn{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yo,Fr;function wgn(e){switch(e){default:return Dn();case tt.CANCELLED:case tt.UNKNOWN:case tt.DEADLINE_EXCEEDED:case tt.RESOURCE_EXHAUSTED:case tt.INTERNAL:case tt.UNAVAILABLE:case tt.UNAUTHENTICATED:return!1;case tt.INVALID_ARGUMENT:case tt.NOT_FOUND:case tt.ALREADY_EXISTS:case tt.PERMISSION_DENIED:case tt.FAILED_PRECONDITION:case tt.ABORTED:case tt.OUT_OF_RANGE:case tt.UNIMPLEMENTED:case tt.DATA_LOSS:return!0}}function _ze(e){if(e===void 0)return Ng("GRPC error has no .code"),tt.UNKNOWN;switch(e){case yo.OK:return tt.OK;case yo.CANCELLED:return tt.CANCELLED;case yo.UNKNOWN:return tt.UNKNOWN;case yo.DEADLINE_EXCEEDED:return tt.DEADLINE_EXCEEDED;case yo.RESOURCE_EXHAUSTED:return tt.RESOURCE_EXHAUSTED;case yo.INTERNAL:return tt.INTERNAL;case yo.UNAVAILABLE:return tt.UNAVAILABLE;case yo.UNAUTHENTICATED:return tt.UNAUTHENTICATED;case yo.INVALID_ARGUMENT:return tt.INVALID_ARGUMENT;case yo.NOT_FOUND:return tt.NOT_FOUND;case yo.ALREADY_EXISTS:return tt.ALREADY_EXISTS;case yo.PERMISSION_DENIED:return tt.PERMISSION_DENIED;case yo.FAILED_PRECONDITION:return tt.FAILED_PRECONDITION;case yo.ABORTED:return tt.ABORTED;case yo.OUT_OF_RANGE:return tt.OUT_OF_RANGE;case yo.UNIMPLEMENTED:return tt.UNIMPLEMENTED;case yo.DATA_LOSS:return tt.DATA_LOSS;default:return Dn()}}(Fr=yo||(yo={}))[Fr.OK=0]="OK",Fr[Fr.CANCELLED=1]="CANCELLED",Fr[Fr.UNKNOWN=2]="UNKNOWN",Fr[Fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fr[Fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fr[Fr.NOT_FOUND=5]="NOT_FOUND",Fr[Fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fr[Fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fr[Fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fr[Fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fr[Fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fr[Fr.ABORTED=10]="ABORTED",Fr[Fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fr[Fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fr[Fr.INTERNAL=13]="INTERNAL",Fr[Fr.UNAVAILABLE=14]="UNAVAILABLE",Fr[Fr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Egn(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sgn=new Vx([4294967295,4294967295],0);function xwe(e){const t=Egn().encode(e),n=new HUe;return n.update(t),new Uint8Array(n.digest())}function _we(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Vx([n,r],0),new Vx([i,s],0)]}class yue{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new BI(`Invalid padding: ${n}`);if(r<0)throw new BI(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new BI(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new BI(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=Vx.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(Vx.fromNumber(r)));return i.compare(Sgn)===1&&(i=new Vx([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=xwe(t),[r,i]=_we(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new yue(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=xwe(t),[r,i]=_we(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class BI extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,SP.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new j9(Fn.min(),i,new Ds(ci),Pg(),xr())}}class SP{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new SP(r,n,xr(),xr(),xr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class wze{constructor(t,n){this.targetId=t,this.me=n}}class Eze{constructor(t,n,r=Ru.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class wwe{constructor(){this.fe=0,this.ge=Swe(),this.pe=Ru.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=xr(),n=xr(),r=xr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Dn()}}),new SP(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Swe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Qi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Tgn{constructor(t){this.Le=t,this.Be=new Map,this.ke=Pg(),this.qe=Ewe(),this.Qe=new Ds(ci)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:Dn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(qK(s))if(r===0){const o=new ln(s.path);this.Ue(n,o,pu.newNoDocument(o,Fn.min()))}else Qi(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=N_(r).toUint8Array()}catch(u){if(u instanceof ZUe)return wD("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new yue(o,i,s)}catch(u){return wD(u instanceof BI?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&qK(a.target)){const u=new ln(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,pu.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=xr();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new j9(t,n,this.Qe,this.ke,r);return this.ke=Pg(),this.qe=Ewe(),this.Qe=new Ds(ci),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new wwe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Ba(ci),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Yt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new wwe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Ewe(){return new Ds(ln.comparator)}function Swe(){return new Ds(ln.comparator)}const Cgn={asc:"ASCENDING",desc:"DESCENDING"},Agn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ign={and:"AND",or:"OR"};class kgn{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function YK(e,t){return e.useProto3Json||$9(t)?t:{value:t}}function yF(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Sze(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Rgn(e,t){return yF(e,t.toTimestamp())}function rm(e){return Qi(!!e),Fn.fromTimestamp(function(n){const r=bv(n);return new zo(r.seconds,r.nanos)}(e))}function vue(e,t){return KK(e,t).canonicalString()}function KK(e,t){const n=function(i){return new ls(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Tze(e){const t=ls.fromString(e);return Qi(Rze(t)),t}function XK(e,t){return vue(e.databaseId,t.path)}function fH(e,t){const n=Tze(t);if(n.get(1)!==e.databaseId.projectId)throw new Lt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Lt(tt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ln(Aze(n))}function Cze(e,t){return vue(e.databaseId,t)}function Dgn(e){const t=Tze(e);return t.length===4?ls.emptyPath():Aze(t)}function QK(e){return new ls(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Aze(e){return Qi(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Twe(e,t,n){return{name:XK(e,t),fields:n.value.mapValue.fields}}function Ngn(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Dn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Qi(c===void 0||typeof c=="string"),Ru.fromBase64String(c||"")):(Qi(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Ru.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?tt.UNKNOWN:_ze(l.code);return new Lt(c,l.message||"")}(o);n=new Eze(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=fH(e,r.document.name),s=rm(r.document.updateTime),o=r.document.createTime?rm(r.document.createTime):Fn.min(),a=new ql({mapValue:{fields:r.document.fields}}),u=pu.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new O6(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=fH(e,r.document),s=r.readTime?rm(r.readTime):Fn.min(),o=pu.newNoDocument(i,s),a=r.removedTargetIds||[];n=new O6([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=fH(e,r.document),s=r.removedTargetIds||[];n=new O6([],s,i,null)}else{if(!("filter"in t))return Dn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new _gn(i,s),a=r.targetId;n=new wze(a,o)}}return n}function Pgn(e,t){let n;if(t instanceof EP)n={update:Twe(e,t.key,t.value)};else if(t instanceof mue)n={delete:XK(e,t.key)};else if(t instanceof nb)n={update:Twe(e,t.key,t.data),updateMask:zgn(t.fieldMask)};else{if(!(t instanceof vgn))return Dn();n={verify:XK(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ID)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof kD)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof RD)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gF)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Dn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Rgn(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Dn()}(e,t.precondition)),n}function Ogn(e,t){return e&&e.length>0?(Qi(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?rm(i.updateTime):rm(s);return o.isEqual(Fn.min())&&(o=rm(s)),new mgn(o,i.transformResults||[])}(n,t))):[]}function $gn(e,t){return{documents:[Cze(e,t.path)]}}function Mgn(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cze(e,i);const s=function(l){if(l.length!==0)return kze(Fh.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:IE(d.field),direction:Bgn(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=YK(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function Lgn(e){let t=Dgn(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qi(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=Ize(f);return d instanceof Fh&&rze(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new AD(kE(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,$9(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new mF(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new mF(h,d)}(n.endAt)),tgn(t,i,o,s,a,"F",u,l)}function Fgn(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Ize(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=kE(n.unaryFilter.field);return _o.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=kE(n.unaryFilter.field);return _o.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=kE(n.unaryFilter.field);return _o.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=kE(n.unaryFilter.field);return _o.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Dn()}}(e):e.fieldFilter!==void 0?function(n){return _o.create(kE(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Fh.create(n.compositeFilter.filters.map(r=>Ize(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Dn()}}(n.compositeFilter.op))}(e):Dn()}function Bgn(e){return Cgn[e]}function jgn(e){return Agn[e]}function Ugn(e){return Ign[e]}function IE(e){return{fieldPath:e.canonicalString()}}function kE(e){return Na.fromServerFormat(e.fieldPath)}function kze(e){return e instanceof _o?function(n){if(n.op==="=="){if(fwe(n.value))return{unaryFilter:{field:IE(n.field),op:"IS_NAN"}};if(cwe(n.value))return{unaryFilter:{field:IE(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fwe(n.value))return{unaryFilter:{field:IE(n.field),op:"IS_NOT_NAN"}};if(cwe(n.value))return{unaryFilter:{field:IE(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:IE(n.field),op:jgn(n.op),value:n.value}}}(e):e instanceof Fh?function(n){const r=n.getFilters().map(i=>kze(i));return r.length===1?r[0]:{compositeFilter:{op:Ugn(n.op),filters:r}}}(e):Dn()}function zgn(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function Rze(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(t,n,r,i,s=Fn.min(),o=Fn.min(),a=Ru.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new l1(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new l1(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new l1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new l1(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vgn{constructor(t){this.ct=t}}function Hgn(e){const t=Lgn({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?GK(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qgn{constructor(){this._n=new Wgn}addToCollectionParentIndex(t,n){return this._n.add(n),dt.resolve()}getCollectionParents(t,n){return dt.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return dt.resolve()}deleteFieldIndex(t,n){return dt.resolve()}deleteAllFieldIndexes(t){return dt.resolve()}createTargetIndexes(t,n){return dt.resolve()}getDocumentsMatchingTarget(t,n){return dt.resolve(null)}getIndexType(t,n){return dt.resolve(0)}getFieldIndexes(t,n){return dt.resolve([])}getNextCollectionGroupToUpdate(t){return dt.resolve(null)}getMinOffset(t,n){return dt.resolve(vv.min())}getMinOffsetFromCollectionGroup(t,n){return dt.resolve(vv.min())}updateCollectionGroup(t,n,r){return dt.resolve()}updateIndexEntries(t,n){return dt.resolve()}}class Wgn{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Ba(ls.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Ba(ls.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new o2(0)}static Ln(){return new o2(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ggn{constructor(){this.changes=new kC(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,pu.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?dt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ygn{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kgn{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&jk(r.mutation,i,Xc.empty(),zo.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,xr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=xr()){const i=Ix();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=FI();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Ix();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,xr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Pg();const o=Bk(),a=function(){return Bk()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof nb)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),jk(c.mutation,l,c.mutation.getFieldMask(),zo.now())):o.set(l.key,Xc.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new Ygn(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=Bk();let i=new Ds((o,a)=>o-a),s=xr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Xc.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||xr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=dze();c.forEach(d=>{if(!s.has(d)){const h=bze(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return dt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return ln.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):aze(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):dt.resolve(Ix());let a=-1,u=s;return o.next(l=>dt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?dt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,xr())).next(c=>({batchId:a,changes:fze(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new ln(n)).next(r=>{let i=FI();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=FI();return this.indexManager.getCollectionParents(t,s).next(a=>dt.forEach(a,u=>{const l=function(f,d){return new IC(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,pu.newInvalidDocument(c)))});let a=FI();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&jk(c.mutation,l,Xc.empty(),zo.now()),L9(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xgn{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return dt.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:rm(i.createTime)}}(n)),dt.resolve()}getNamedQuery(t,n){return dt.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Hgn(i.bundledQuery),readTime:rm(i.readTime)}}(n)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qgn{constructor(){this.overlays=new Ds(ln.comparator),this.hr=new Map}getOverlay(t,n){return dt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Ix();return dt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),dt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),dt.resolve()}getOverlaysForCollection(t,n,r){const i=Ix(),s=n.length+1,o=new ln(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return dt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Ds((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Ix(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Ix(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return dt.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xgn(n,r));let s=this.hr.get(n);s===void 0&&(s=xr(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bue{constructor(){this.Pr=new Ba(ta.Ir),this.Tr=new Ba(ta.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new ta(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new ta(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new ln(new ls([])),r=new ta(n,t),i=new ta(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new ln(new ls([])),r=new ta(n,t),i=new ta(n,t+1);let s=xr();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new ta(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class ta{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return ln.comparator(t.key,n.key)||ci(t.pr,n.pr)}static Er(t,n){return ci(t.pr,n.pr)||ln.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jgn{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ba(ta.Ir)}checkEmpty(t){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new bgn(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new ta(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return dt.resolve(o)}lookupMutationBatch(t,n){return dt.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return dt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new ta(n,0),i=new ta(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),dt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ba(ci);return n.forEach(i=>{const s=new ta(i,0),o=new ta(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),dt.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;ln.isDocumentKey(s)||(s=s.child(""));const o=new ta(new ln(s),0);let a=new Ba(ci);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),dt.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Qi(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return dt.forEach(n.mutations,i=>{const s=new ta(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new ta(n,0),i=this.wr.firstAfterOrEqual(r);return dt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,dt.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zgn{constructor(t){this.vr=t,this.docs=function(){return new Ds(ln.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return dt.resolve(r?r.document.mutableCopy():pu.newInvalidDocument(n))}getEntries(t,n){let r=Pg();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pu.newInvalidDocument(i))}),dt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Pg();const o=n.path,a=new ln(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||L0n(M0n(c),r)<=0||(i.has(c.key)||L9(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return dt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Dn()}Fr(t,n){return dt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new eyn(this)}getSize(t){return dt.resolve(this.size)}}class eyn extends Ggn{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),dt.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tyn{constructor(t){this.persistence=t,this.Mr=new kC(n=>due(n),hue),this.lastRemoteSnapshotVersion=Fn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new bue,this.targetCount=0,this.Lr=o2.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),dt.resolve()}getLastRemoteSnapshotVersion(t){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return dt.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),dt.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new o2(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,dt.resolve()}updateTargetData(t,n){return this.qn(n),dt.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,dt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),dt.waitFor(s).next(()=>i)}getTargetCount(t){return dt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return dt.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),dt.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),dt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),dt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return dt.resolve(r)}containsKey(t,n){return dt.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nyn{constructor(t,n){this.Br={},this.overlays={},this.kr=new uue(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new tyn(this),this.indexManager=new qgn,this.remoteDocumentCache=function(i){return new Zgn(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Vgn(n),this.$r=new Xgn(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Qgn,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new Jgn(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Yt("MemoryPersistence","Starting transaction:",t);const i=new ryn(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return dt.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class ryn extends B0n{constructor(t){super(),this.currentSequenceNumber=t}}class xue{constructor(t){this.persistence=t,this.zr=new bue,this.jr=null}static Hr(t){return new xue(t)}get Jr(){if(this.jr)return this.jr;throw Dn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),dt.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),dt.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),dt.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.Jr,r=>{const i=ln.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,Fn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return dt.or([()=>dt.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _ue{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=xr(),i=xr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new _ue(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iyn{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class syn{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return Bfn()?8:j0n(Va())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new iyn;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(WA()<=Dr.DEBUG&&Yt("QueryEngine","SDK will not create cache indexes for query:",AE(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),dt.resolve()):(WA()<=Dr.DEBUG&&Yt("QueryEngine","Query:",AE(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(WA()<=Dr.DEBUG&&Yt("QueryEngine","The SDK decides to create cache indexes for query:",AE(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,nm(n))):dt.resolve())}ji(t,n){if(mwe(n))return dt.resolve(null);let r=nm(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=GK(n,null,"F"),r=nm(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=xr(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,GK(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return mwe(n)||i.isEqual(Fn.min())?dt.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?dt.resolve(null):(WA()<=Dr.DEBUG&&Yt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),AE(n)),this.es(t,o,n,$0n(i,-1)).next(a=>a))})}Zi(t,n){let r=new Ba(lze(t));return n.forEach((i,s)=>{L9(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return WA()<=Dr.DEBUG&&Yt("QueryEngine","Using full collection scan to execute query:",AE(n)),this.zi.getDocumentsMatchingQuery(t,n,vv.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oyn{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Ds(ci),this.rs=new kC(s=>due(s),hue),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Kgn(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function ayn(e,t,n,r){return new oyn(e,t,n,r)}async function Dze(e,t){const n=Bn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=xr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function uyn(e,t){const n=Bn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=dt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Qi(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=xr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function Nze(e){const t=Bn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function lyn(e,t){const n=Bn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Ru.EMPTY_BYTE_STRING,Fn.min()).withLastLimboFreeSnapshotVersion(Fn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Pg(),l=xr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(cyn(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(Fn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return dt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function cyn(e,t,n){let r=xr(),i=xr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Pg();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Fn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):Yt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function fyn(e,t){const n=Bn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function dyn(e,t){const n=Bn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,dt.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new l1(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function JK(e,t,n){const r=Bn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!wP(o))throw o;Yt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Cwe(e,t,n){const r=Bn(e);let i=Fn.min(),s=xr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=Bn(u),d=f.rs.get(c);return d!==void 0?dt.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,nm(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:Fn.min(),n?s:xr())).next(a=>(hyn(r,rgn(t),a),{documents:a,hs:s})))}function hyn(e,t,n){let r=e.ss.get(t)||Fn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Awe{constructor(){this.activeTargetIds=lgn()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class pyn{constructor(){this.no=new Awe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Awe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class myn{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iwe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Yt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Yt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a4=null;function dH(){return a4===null?a4=function(){return 268435456+Math.round(2147483648*Math.random())}():a4++,"0x"+a4.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gyn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yyn{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su="WebChannelConnection";class vyn extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=dH(),u=this.vo(n,r.toUriEncodedString());Yt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(Yt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw wD("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+AC}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=gyn[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=dH();return new Promise((o,a)=>{const u=new qUe;u.setWithCredentials(!0),u.listenOnce(GUe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case D6.NO_ERROR:const c=u.getResponseJson();Yt(su,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case D6.TIMEOUT:Yt(su,`RPC '${t}' ${s} timed out`),a(new Lt(tt.DEADLINE_EXCEEDED,"Request time out"));break;case D6.HTTP_ERROR:const f=u.getStatus();if(Yt(su,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(tt).indexOf(y)>=0?y:tt.UNKNOWN}(h.status);a(new Lt(p,h.message))}else a(new Lt(tt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Lt(tt.UNAVAILABLE,"Connection failed."));break;default:Dn()}}finally{Yt(su,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);Yt(su,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=dH(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=XUe(),a=KUe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new WUe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");Yt(su,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new yyn({lo:g=>{h?Yt(su,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(Yt(su,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),Yt(su,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,b)=>{g.listen(y,x=>{try{b(x)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,LI.EventType.OPEN,()=>{h||(Yt(su,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,LI.EventType.CLOSE,()=>{h||(h=!0,Yt(su,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,LI.EventType.ERROR,g=>{h||(h=!0,wD(su,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Lt(tt.UNAVAILABLE,"The operation could not be completed")))}),m(f,LI.EventType.MESSAGE,g=>{var y;if(!h){const b=g.data[0];Qi(!!b);const x=b,w=x.error||((y=x[0])===null||y===void 0?void 0:y.error);if(w){Yt(su,`RPC '${t}' stream ${i} received error:`,w);const S=w.status;let T=function(D){const k=yo[D];if(k!==void 0)return _ze(k)}(S),C=w.message;T===void 0&&(T=tt.INTERNAL,C="Unknown error status: "+S+" with message "+w.message),h=!0,p.po(new Lt(T,C)),f.close()}else Yt(su,`RPC '${t}' stream ${i} received:`,b),p.yo(b)}}),m(a,YUe.STAT_EVENT,g=>{g.stat===UK.PROXY?Yt(su,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===UK.NOPROXY&&Yt(su,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function hH(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U9(e){return new kgn(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pze{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Yt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oze{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Pze(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===tt.RESOURCE_EXHAUSTED?(Ng(n.toString()),Ng("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===tt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Lt(tt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return Yt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(Yt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class byn extends Oze{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=Ngn(this.serializer,t),r=function(s){if(!("targetChange"in s))return Fn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Fn.min():o.readTime?rm(o.readTime):Fn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=QK(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=qK(u)?{documents:$gn(s,u)}:{query:Mgn(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Sze(s,o.resumeToken);const l=YK(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Fn.min())>0){a.readTime=yF(s,o.snapshotVersion.toTimestamp());const l=YK(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=Fgn(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=QK(this.serializer),n.removeTarget=t,this.i_(n)}}class xyn extends Oze{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(Qi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=Ogn(t.writeResults,t.commitTime),r=rm(t.commitTime);return this.listener.A_(r,n)}return Qi(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=QK(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Pgn(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _yn extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Lt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,KK(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Lt(tt.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,KK(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===tt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Lt(tt.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class wyn{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ng(n),this.y_=!1):Yt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eyn{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{bw(this)&&(Yt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Bn(u);l.M_.add(4),await CP(l),l.N_.set("Unknown"),l.M_.delete(4),await TP(l)}(this))})}),this.N_=new wyn(r,i)}}async function TP(e){if(bw(e))for(const t of e.x_)await t(!0)}async function CP(e){for(const t of e.x_)await t(!1)}function $ze(e,t){const n=Bn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Tue(n)?Sue(n):RC(n).Xo()&&Eue(n,t))}function wue(e,t){const n=Bn(e),r=RC(n);n.F_.delete(t),r.Xo()&&Mze(n,t),n.F_.size===0&&(r.Xo()?r.n_():bw(n)&&n.N_.set("Unknown"))}function Eue(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Fn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}RC(e).P_(t)}function Mze(e,t){e.L_.xe(t),RC(e).I_(t)}function Sue(e){e.L_=new Tgn({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),RC(e).start(),e.N_.w_()}function Tue(e){return bw(e)&&!RC(e).Zo()&&e.F_.size>0}function bw(e){return Bn(e).M_.size===0}function Lze(e){e.L_=void 0}async function Syn(e){e.N_.set("Online")}async function Tyn(e){e.F_.forEach((t,n)=>{Eue(e,t)})}async function Cyn(e,t){Lze(e),Tue(e)?(e.N_.D_(t),Sue(e)):e.N_.set("Unknown")}async function Ayn(e,t,n){if(e.N_.set("Online"),t instanceof Eze&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){Yt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await vF(e,r)}else if(t instanceof O6?e.L_.Ke(t):t instanceof wze?e.L_.He(t):e.L_.We(t),!n.isEqual(Fn.min()))try{const r=await Nze(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(Ru.EMPTY_BYTE_STRING,c.snapshotVersion)),Mze(s,u);const f=new l1(c.target,u,l,c.sequenceNumber);Eue(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Yt("RemoteStore","Failed to raise snapshot:",r),await vF(e,r)}}async function vF(e,t,n){if(!wP(t))throw t;e.M_.add(1),await CP(e),e.N_.set("Offline"),n||(n=()=>Nze(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Yt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await TP(e)})}function Fze(e,t){return t().catch(n=>vF(e,n,t))}async function z9(e){const t=Bn(e),n=xv(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;Iyn(t);)try{const i=await fyn(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,kyn(t,i)}catch(i){await vF(t,i)}Bze(t)&&jze(t)}function Iyn(e){return bw(e)&&e.v_.length<10}function kyn(e,t){e.v_.push(t);const n=xv(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function Bze(e){return bw(e)&&!xv(e).Zo()&&e.v_.length>0}function jze(e){xv(e).start()}async function Ryn(e){xv(e).V_()}async function Dyn(e){const t=xv(e);for(const n of e.v_)t.d_(n.mutations)}async function Nyn(e,t,n){const r=e.v_.shift(),i=gue.from(r,t,n);await Fze(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await z9(e)}async function Pyn(e,t){t&&xv(e).E_&&await async function(r,i){if(function(o){return wgn(o)&&o!==tt.ABORTED}(i.code)){const s=r.v_.shift();xv(r).t_(),await Fze(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await z9(r)}}(e,t),Bze(e)&&jze(e)}async function kwe(e,t){const n=Bn(e);n.asyncQueue.verifyOperationInProgress(),Yt("RemoteStore","RemoteStore received new credentials");const r=bw(n);n.M_.add(3),await CP(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await TP(n)}async function Oyn(e,t){const n=Bn(e);t?(n.M_.delete(2),await TP(n)):t||(n.M_.add(2),await CP(n),n.N_.set("Unknown"))}function RC(e){return e.B_||(e.B_=function(n,r,i){const s=Bn(n);return s.f_(),new byn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:Syn.bind(null,e),To:Tyn.bind(null,e),Ao:Cyn.bind(null,e),h_:Ayn.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),Tue(e)?Sue(e):e.N_.set("Unknown")):(await e.B_.stop(),Lze(e))})),e.B_}function xv(e){return e.k_||(e.k_=function(n,r,i){const s=Bn(n);return s.f_(),new xyn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:Ryn.bind(null,e),Ao:Pyn.bind(null,e),R_:Dyn.bind(null,e),A_:Nyn.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await z9(e)):(await e.k_.stop(),e.v_.length>0&&(Yt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cue{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ig,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Cue(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Lt(tt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Aue(e,t){if(Ng("AsyncQueue",`${t}: ${e}`),wP(e))return new Lt(tt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t){this.comparator=t?(n,r)=>t(n,r)||ln.comparator(n.key,r.key):(n,r)=>ln.comparator(n.key,r.key),this.keyedMap=FI(),this.sortedSet=new Ds(this.comparator)}static emptySet(t){return new VS(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof VS)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new VS;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rwe{constructor(){this.q_=new Ds(ln.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):Dn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class a2{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new a2(t,n,VS.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&M9(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $yn{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class Myn{constructor(){this.queries=new kC(t=>uze(t),M9),this.onlineState="Unknown",this.z_=new Set}}async function Uze(e,t){const n=Bn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new $yn,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Aue(o,`Initialization of query '${AE(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Iue(n)}async function zze(e,t){const n=Bn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Lyn(e,t){const n=Bn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Iue(n)}function Fyn(e,t,n){const r=Bn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function Iue(e){e.z_.forEach(t=>{t.next()})}var ZK,Dwe;(Dwe=ZK||(ZK={})).J_="default",Dwe.Cache="cache";class Vze{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new a2(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=a2.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==ZK.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hze{constructor(t){this.key=t}}class qze{constructor(t){this.key=t}}class Byn{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=xr(),this.mutatedKeys=xr(),this.Ia=lze(t),this.Ta=new VS(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Rwe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=L9(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new a2(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Rwe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=xr(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new qze(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new Hze(r))}),n}pa(t){this.la=t.hs,this.Pa=xr();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return a2.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class jyn{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Uyn{constructor(t){this.key=t,this.wa=!1}}class zyn{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new kC(a=>uze(a),M9),this.Da=new Map,this.Ca=new Set,this.va=new Ds(ln.comparator),this.Fa=new Map,this.Ma=new bue,this.xa={},this.Oa=new Map,this.Na=o2.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function Vyn(e,t,n=!0){const r=Qze(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await Wze(r,t,n,!0),i}async function Hyn(e,t){const n=Qze(e);await Wze(n,t,!0,!1)}async function Wze(e,t,n,r){const i=await dyn(e.localStore,nm(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await qyn(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&$ze(e.remoteStore,i),a}async function qyn(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,b){let x=g.view.da(y);x.Xi&&(x=await Cwe(m.localStore,g.query,!1).then(({documents:C})=>g.view.da(C,x)));const w=b&&b.targetChanges.get(g.targetId),S=b&&b.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(x,m.isPrimaryClient,w,S);return Pwe(m,g.targetId,T.fa),T.snapshot}(e,f,d,h);const s=await Cwe(e.localStore,t,!0),o=new Byn(t,s.hs),a=o.da(s.documents),u=SP.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Pwe(e,n,l.fa);const c=new jyn(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function Wyn(e,t,n){const r=Bn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!M9(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await JK(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&wue(r.remoteStore,i.targetId),eX(r,i.targetId)}).catch(_P)):(eX(r,i.targetId),await JK(r.localStore,i.targetId,!0))}async function Gyn(e,t){const n=Bn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wue(n.remoteStore,r.targetId))}async function Yyn(e,t,n){const r=t1n(e);try{const i=await function(o,a){const u=Bn(o),l=zo.now(),c=a.reduce((h,p)=>h.add(p.key),xr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Pg(),m=xr();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,b)=>{b.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const b of a){const x=ygn(b,f.get(b.key).overlayedDocument);x!=null&&y.push(new nb(b.key,x,eze(x.value.mapValue),rf.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:fze(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Ds(ci)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await AP(r,i.changes),await z9(r.remoteStore)}catch(i){const s=Aue(i,"Failed to persist write");n.reject(s)}}async function Gze(e,t){const n=Bn(e);try{const r=await lyn(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(Qi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Qi(o.wa):i.removedDocuments.size>0&&(Qi(o.wa),o.wa=!1))}),await AP(n,r,t)}catch(r){await _P(r)}}function Nwe(e,t,n){const r=Bn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Bn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&Iue(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Kyn(e,t,n){const r=Bn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Ds(ln.comparator);o=o.insert(s,pu.newNoDocument(s,Fn.min()));const a=xr().add(s),u=new j9(Fn.min(),new Map,new Ds(ci),o,a);await Gze(r,u),r.va=r.va.remove(s),r.Fa.delete(t),kue(r)}else await JK(r.localStore,t,!1).then(()=>eX(r,t,n)).catch(_P)}async function Xyn(e,t){const n=Bn(e),r=t.batch.batchId;try{const i=await uyn(n.localStore,t);Kze(n,r,null),Yze(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await AP(n,i)}catch(i){await _P(i)}}async function Qyn(e,t,n){const r=Bn(e);try{const i=await function(o,a){const u=Bn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Qi(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);Kze(r,t,n),Yze(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await AP(r,i)}catch(i){await _P(i)}}function Yze(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function Kze(e,t,n){const r=Bn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function eX(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||Xze(e,r)})}function Xze(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(wue(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),kue(e))}function Pwe(e,t,n){for(const r of n)r instanceof Hze?(e.Ma.addReference(r.key,t),Jyn(e,r)):r instanceof qze?(Yt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||Xze(e,r.key)):Dn()}function Jyn(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Yt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),kue(e))}function kue(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new ln(ls.fromString(t)),r=e.Na.next();e.Fa.set(r,new Uyn(n)),e.va=e.va.insert(n,r),$ze(e.remoteStore,new l1(nm(pue(n.path)),r,"TargetPurposeLimboResolution",uue.oe))}}async function AP(e,t,n){const r=Bn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=_ue.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=Bn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>dt.forEach(l,d=>dt.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>dt.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!wP(f))throw f;Yt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function Zyn(e,t){const n=Bn(e);if(!n.currentUser.isEqual(t)){Yt("SyncEngine","User change. New user:",t.toKey());const r=await Dze(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Lt(tt.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await AP(n,r.us)}}function e1n(e,t){const n=Bn(e),r=n.Fa.get(t);if(r&&r.wa)return xr().add(r.key);{let i=xr();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function Qze(e){const t=Bn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Gze.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=e1n.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Kyn.bind(null,t),t.Sa.h_=Lyn.bind(null,t.eventManager),t.Sa.ka=Fyn.bind(null,t.eventManager),t}function t1n(e){const t=Bn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Xyn.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Qyn.bind(null,t),t}class Owe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=U9(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return ayn(this.persistence,new syn,t.initialUser,this.serializer)}createPersistence(t){return new nyn(xue.Hr,this.serializer)}createSharedClientState(t){return new pyn}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class n1n{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Nwe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zyn.bind(null,this.syncEngine),await Oyn(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Myn}()}createDatastore(t){const n=U9(t.databaseInfo.databaseId),r=function(s){return new vyn(s)}(t.databaseInfo);return function(s,o,a,u){return new _yn(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new Eyn(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Nwe(this.syncEngine,n,0),function(){return Iwe.D()?new Iwe:new myn}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new zyn(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=Bn(r);Yt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await CP(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jze{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Ng("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1n{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ol.UNAUTHENTICATED,this.clientId=QUe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Yt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Yt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Lt(tt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ig;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Aue(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function pH(e,t){e.asyncQueue.verifyOperationInProgress(),Yt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Dze(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function $we(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Zze(e);Yt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>kwe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>kwe(t.remoteStore,i)),e._onlineComponents=t}function i1n(e){return e.name==="FirebaseError"?e.code===tt.FAILED_PRECONDITION||e.code===tt.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function Zze(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Yt("FirestoreClient","Using user provided OfflineComponentProvider");try{await pH(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!i1n(n))throw n;wD("Error using user provided cache. Falling back to memory cache: "+n),await pH(e,new Owe)}}else Yt("FirestoreClient","Using default OfflineComponentProvider"),await pH(e,new Owe);return e._offlineComponents}async function Rue(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Yt("FirestoreClient","Using user provided OnlineComponentProvider"),await $we(e,e._uninitializedComponentsProvider._online)):(Yt("FirestoreClient","Using default OnlineComponentProvider"),await $we(e,new n1n))),e._onlineComponents}function s1n(e){return Zze(e).then(t=>t.persistence)}function o1n(e){return Rue(e).then(t=>t.remoteStore)}function a1n(e){return Rue(e).then(t=>t.syncEngine)}async function eVe(e){const t=await Rue(e),n=t.eventManager;return n.onListen=Vyn.bind(null,t.syncEngine),n.onUnlisten=Wyn.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Hyn.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Gyn.bind(null,t.syncEngine),n}function u1n(e){return e.asyncQueue.enqueue(async()=>{const t=await s1n(e),n=await o1n(e);return t.setNetworkEnabled(!0),function(i){const s=Bn(i);return s.M_.delete(0),TP(s)}(n)})}function l1n(e,t,n={}){const r=new ig;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Jze({next:d=>{o.enqueueAndForget(()=>zze(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Lt(tt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Lt(tt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Vze(pue(a.path),c,{includeMetadataChanges:!0,ra:!0});return Uze(s,f)}(await eVe(e),e.asyncQueue,t,n,r)),r.promise}function c1n(e,t,n={}){const r=new ig;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new Jze({next:d=>{o.enqueueAndForget(()=>zze(s,f)),d.fromCache&&u.source==="server"?l.reject(new Lt(tt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new Vze(a,c,{includeMetadataChanges:!0,ra:!0});return Uze(s,f)}(await eVe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tVe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mwe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nVe(e,t,n){if(!n)throw new Lt(tt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function f1n(e,t,n,r){if(t===!0&&r===!0)throw new Lt(tt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Lwe(e){if(!ln.isDocumentKey(e))throw new Lt(tt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Fwe(e){if(ln.isDocumentKey(e))throw new Lt(tt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function V9(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Dn()}function Tm(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Lt(tt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=V9(e);throw new Lt(tt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bwe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Lt(tt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Lt(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}f1n("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tVe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Lt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Lt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Lt(tt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Due{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bwe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Lt(tt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Lt(tt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bwe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new A0n;switch(r.type){case"firstParty":return new R0n(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Lt(tt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Mwe.get(n);r&&(Yt("ComponentProvider","Removing Datastore"),Mwe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xw{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new xw(this.firestore,t,this._query)}}class al{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new P1(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new al(this.firestore,t,this._key)}}class P1 extends xw{constructor(t,n,r){super(t,n,pue(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new al(this.firestore,null,new ln(t))}withConverter(t){return new P1(this.firestore,t,this._path)}}function Rl(e,t,...n){if(e=Zi(e),nVe("collection","path",t),e instanceof Due){const r=ls.fromString(t,...n);return Fwe(r),new P1(e,null,r)}{if(!(e instanceof al||e instanceof P1))throw new Lt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ls.fromString(t,...n));return Fwe(r),new P1(e.firestore,null,r)}}function rs(e,t,...n){if(e=Zi(e),arguments.length===1&&(t=QUe.newId()),nVe("doc","path",t),e instanceof Due){const r=ls.fromString(t,...n);return Lwe(r),new al(e,null,new ln(r))}{if(!(e instanceof al||e instanceof P1))throw new Lt(tt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ls.fromString(t,...n));return Lwe(r),new al(e.firestore,e instanceof P1?e.converter:null,new ln(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1n{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Pze(this,"async_queue_retry"),this.hu=()=>{const n=hH();n&&Yt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=hH();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=hH();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new ig;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!wP(t))throw t;Yt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ng("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=Cue.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Dn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class _w extends Due{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new d1n}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||rVe(this),this._firestoreClient.terminate()}}function h1n(e,t,n){n||(n="(default)");const r=TC(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(bD(s,t))return i;throw new Lt(tt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Lt(tt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Lt(tt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function IP(e){return e._firestoreClient||rVe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function rVe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new V0n(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,tVe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new r1n(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function p1n(e){return u1n(IP(e=Tm(e,_w)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(t){this._byteString=t}static fromBase64String(t){try{return new u2(Ru.fromBase64String(t))}catch(n){throw new Lt(tt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new u2(Ru.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Lt(tt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Na(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nue{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Lt(tt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Lt(tt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ci(this._lat,t._lat)||ci(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1n=/^__.*__$/;class g1n{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new nb(t,this.data,this.fieldMask,n,this.fieldTransforms):new EP(t,this.data,n,this.fieldTransforms)}}class iVe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new nb(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function sVe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dn()}}class Pue{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Pue(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return bF(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(sVe(this.fu)&&m1n.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class y1n{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||U9(t)}Fu(t,n,r,i=!1){return new Pue({fu:t,methodName:n,vu:r,path:Na.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function q9(e){const t=e._freezeSettings(),n=U9(e._databaseId);return new y1n(e._databaseId,!!t.ignoreUndefinedProperties,n)}function oVe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);$ue("Data must be an object, but it was:",o,r);const a=lVe(r,o);let u,l;if(s.merge)u=new Xc(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=tX(t,f,n);if(!o.contains(d))throw new Lt(tt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);fVe(c,d)||c.push(d)}u=new Xc(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new g1n(new ql(a),u,l)}class W9 extends H9{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof W9}}class Oue extends H9{_toFieldTransform(t){return new hgn(t.path,new ID)}isEqual(t){return t instanceof Oue}}function aVe(e,t,n,r){const i=e.Fu(1,t,n);$ue("Data must be an object, but it was:",i,r);const s=[],o=ql.empty();vw(r,(u,l)=>{const c=Mue(t,u,n);l=Zi(l);const f=i.Su(c);if(l instanceof W9)s.push(c);else{const d=RP(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Xc(s);return new iVe(o,a,i.fieldTransforms)}function uVe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[tX(t,r,n)],u=[i];if(s.length%2!=0)throw new Lt(tt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(tX(t,s[d])),u.push(s[d+1]);const l=[],c=ql.empty();for(let d=a.length-1;d>=0;--d)if(!fVe(l,a[d])){const h=a[d];let p=u[d];p=Zi(p);const m=o.Su(h);if(p instanceof W9)l.push(h);else{const g=RP(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Xc(l);return new iVe(c,f,o.fieldTransforms)}function v1n(e,t,n,r=!1){return RP(n,e.Fu(r?4:3,t))}function RP(e,t){if(cVe(e=Zi(e)))return $ue("Unsupported field value:",t,e),lVe(e,t);if(e instanceof H9)return function(r,i){if(!sVe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=RP(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=Zi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cgn(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=zo.fromDate(r);return{timestampValue:yF(i.serializer,s)}}if(r instanceof zo){const s=new zo(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yF(i.serializer,s)}}if(r instanceof Nue)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof u2)return{bytesValue:Sze(i.serializer,r._byteString)};if(r instanceof al){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:vue(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${V9(r)}`)}(e,t)}function lVe(e,t){const n={};return JUe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):vw(e,(r,i)=>{const s=RP(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function cVe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof zo||e instanceof Nue||e instanceof u2||e instanceof al||e instanceof H9)}function $ue(e,t,n){if(!cVe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=V9(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function tX(e,t,n){if((t=Zi(t))instanceof kP)return t._internalPath;if(typeof t=="string")return Mue(e,t);throw bF("Field path arguments must be of type string or ",e,!1,void 0,n)}const b1n=new RegExp("[~\\*/\\[\\]]");function Mue(e,t,n){if(t.search(b1n)>=0)throw bF(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new kP(...t.split("."))._internalPath}catch{throw bF(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function bF(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Lt(tt.INVALID_ARGUMENT,a+e+u)}function fVe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dVe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new al(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new x1n(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(G9("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class x1n extends dVe{data(){return super.data()}}function G9(e,t){return typeof t=="string"?Mue(e,t):t instanceof kP?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1n(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Lt(tt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lue{}class hVe extends Lue{}function mH(e,t,...n){let r=[];t instanceof Lue&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Fue).length,a=s.filter(u=>u instanceof Y9).length;if(o>1||o>0&&a>0)throw new Lt(tt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class Y9 extends hVe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Y9(t,n,r)}_apply(t){const n=this._parse(t);return pVe(t._query,n),new xw(t.firestore,t.converter,WK(t._query,n))}_parse(t){const n=q9(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Lt(tt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Vwe(f,c);const h=[];for(const p of f)h.push(zwe(u,s,p));d={arrayValue:{values:h}}}else d=zwe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Vwe(f,c),d=v1n(a,o,f,c==="in"||c==="not-in");return _o.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function jwe(e,t,n){const r=t,i=G9("where",e);return Y9._create(i,r,n)}class Fue extends Lue{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Fue(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Fh.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)pVe(o,u),o=WK(o,u)}(t._query,n),new xw(t.firestore,t.converter,WK(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Bue extends hVe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Bue(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Lt(tt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Lt(tt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new AD(s,o)}(t._query,this._field,this._direction);return new xw(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new IC(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function Uwe(e,t="asc"){const n=t,r=G9("orderBy",e);return Bue._create(r,n)}function zwe(e,t,n){if(typeof(n=Zi(n))=="string"){if(n==="")throw new Lt(tt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aze(t)&&n.indexOf("/")!==-1)throw new Lt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ls.fromString(n));if(!ln.isDocumentKey(r))throw new Lt(tt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lwe(e,new ln(r))}if(n instanceof al)return lwe(e,n._key);throw new Lt(tt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${V9(n)}.`)}function Vwe(e,t){if(!Array.isArray(e)||e.length===0)throw new Lt(tt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function pVe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Lt(tt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Lt(tt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class w1n{convertValue(t,n="none"){switch(P_(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(N_(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw Dn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return vw(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new Nue(bo(t.latitude),bo(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=cue(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(SD(t));default:return null}}convertTimestamp(t){const n=bv(t);return new zo(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ls.fromString(t);Qi(Rze(r));const i=new TD(r.get(1),r.get(3)),s=new ln(r.popFirst(5));return i.isEqual(n)||Ng(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mVe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class gVe extends dVe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new $6(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(G9("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class $6 extends gVe{data(t={}){return super.data(t)}}class E1n{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new jI(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new $6(this._firestore,this._userDataWriter,r.key,r,new jI(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Lt(tt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new $6(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new $6(i._firestore,i._userDataWriter,a.doc.key,a.doc,new jI(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:S1n(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function S1n(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(e){e=Tm(e,al);const t=Tm(e.firestore,_w);return l1n(IP(t),e._key).then(n=>T1n(t,e,n))}class yVe extends w1n{constructor(t){super(),this.firestore=t}convertBytes(t){return new u2(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new al(this.firestore,null,n)}}function mE(e){e=Tm(e,xw);const t=Tm(e.firestore,_w),n=IP(t),r=new yVe(t);return _1n(e._query),c1n(n,e._query).then(i=>new E1n(t,r,e,i))}function ou(e,t,n){e=Tm(e,al);const r=Tm(e.firestore,_w),i=mVe(e.converter,t,n);return jue(r,[oVe(q9(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,rf.none())])}function Hwe(e,t,n,...r){e=Tm(e,al);const i=Tm(e.firestore,_w),s=q9(i);let o;return o=typeof(t=Zi(t))=="string"||t instanceof kP?uVe(s,"updateDoc",e._key,t,n,r):aVe(s,"updateDoc",e._key,t),jue(i,[o.toMutation(e._key,rf.exists(!0))])}function jue(e,t){return function(r,i){const s=new ig;return r.asyncQueue.enqueueAndForget(async()=>Yyn(await a1n(r),i,s)),s.promise}(IP(e),t)}function T1n(e,t,n){const r=n.docs.get(t._key),i=new yVe(e);return new gVe(e,i,t._key,r,new jI(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1n{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=q9(t)}set(t,n,r){this._verifyNotCommitted();const i=gH(t,this._firestore),s=mVe(i.converter,n,r),o=oVe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,rf.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=gH(t,this._firestore);let o;return o=typeof(n=Zi(n))=="string"||n instanceof kP?uVe(this._dataReader,"WriteBatch.update",s._key,n,r,i):aVe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,rf.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=gH(t,this._firestore);return this._mutations=this._mutations.concat(new mue(n._key,rf.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Lt(tt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function gH(e,t){if((e=Zi(e)).firestore!==t)throw new Lt(tt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function qwe(){return new Oue("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wwe(e){return IP(e=Tm(e,_w)),new C1n(e,t=>jue(e,t))}(function(t,n=!0){(function(i){AC=i})(yw),Rg(new wm("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new _w(new I0n(r.getProvider("auth-internal")),new N0n(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Lt(tt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new TD(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ch(swe,"4.6.3",t),Ch(swe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nX=new Map,vVe={activated:!1,tokenObservers:[]},A1n={initialized:!1,enabled:!1};function Vo(e){return nX.get(e)||Object.assign({},vVe)}function I1n(e,t){return nX.set(e,t),nX.get(e)}function K9(){return A1n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bVe="https://content-firebaseappcheck.googleapis.com/v1",k1n="exchangeRecaptchaV3Token",R1n="exchangeDebugToken",Gwe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},D1n=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1n{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new vD,this.pending.promise.catch(n=>{}),await P1n(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new vD,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function P1n(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1n={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Jl=new SC("appCheck","AppCheck",O1n);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ywe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Uue(e){if(!Vo(e).activated)throw Jl.create("use-before-activation",{appName:e.name})}function xVe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=l4(n)+"d:"),r&&(o+=l4(r)+"h:"),o+=l4(i)+"m:"+l4(s)+"s",o}function l4(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zue({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Jl.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Jl.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Jl.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Jl.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function $1n(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${bVe}/projects/${n}/apps/${r}:${k1n}?key=${i}`,body:{recaptcha_v3_token:t}}}function _Ve(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${bVe}/projects/${n}/apps/${r}:${R1n}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M1n="firebase-app-check-database",L1n=1,DD="firebase-app-check-store",wVe="debug-token";let c4=null;function EVe(){return c4||(c4=new Promise((e,t)=>{try{const n=indexedDB.open(M1n,L1n);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Jl.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(DD,{keyPath:"compositeKey"})}}}catch(n){t(Jl.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),c4)}function F1n(e){return TVe(CVe(e))}function B1n(e,t){return SVe(CVe(e),t)}function j1n(e){return SVe(wVe,e)}function U1n(){return TVe(wVe)}async function SVe(e,t){const r=(await EVe()).transaction(DD,"readwrite"),s=r.objectStore(DD).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Jl.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function TVe(e){const n=(await EVe()).transaction(DD,"readonly"),i=n.objectStore(DD).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Jl.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function CVe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=new I9("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z1n(e){if(zae()){let t;try{t=await F1n(e)}catch(n){ND.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function yH(e,t){return zae()?B1n(e,t).catch(n=>{ND.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function V1n(){let e;try{e=await U1n()}catch{}if(e)return e;{const t=Yfn();return j1n(t).catch(n=>ND.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vue(){return K9().enabled}async function Hue(){const e=K9();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function H1n(){const e=V7e(),t=K9();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new vD;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(V1n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1n={error:"UNKNOWN_ERROR"};function W1n(e){return Uae.encodeString(JSON.stringify(e),!1)}async function rX(e,t=!1){const n=e.app;Uue(n);const r=Vo(n);let i=r.token,s;if(i&&!nS(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(nS(u)?i=u:await yH(n,void 0))}if(!t&&i&&nS(i))return{token:i.token};let o=!1;if(Vue()){r.exchangeTokenPromise||(r.exchangeTokenPromise=zue(_Ve(n,await Hue()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await yH(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Vo(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?ND.warn(u.message):ND.error(u),s=u}let a;return i?s?nS(i)?a={token:i.token,internalError:s}:a=Xwe(s):(a={token:i.token},r.token=i,await yH(n,i)):a=Xwe(s),o&&kVe(n,a),a}async function G1n(e){const t=e.app;Uue(t);const{provider:n}=Vo(t);if(Vue()){const r=await Hue(),{token:i}=await zue(_Ve(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function AVe(e,t,n,r){const{app:i}=e,s=Vo(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&nS(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Kwe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Kwe(e))}function IVe(e,t){const n=Vo(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Kwe(e){const{app:t}=e,n=Vo(t);let r=n.tokenRefresher;r||(r=Y1n(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Y1n(e){const{app:t}=e;return new N1n(async()=>{const n=Vo(t);let r;if(n.token?r=await rX(e,!0):r=await rX(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Vo(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Gwe.RETRIAL_MIN_WAIT,Gwe.RETRIAL_MAX_WAIT)}function kVe(e,t){const n=Vo(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function nS(e){return e.expireTimeMillis-Date.now()>0}function Xwe(e){return{token:W1n(q1n),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1n{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Vo(this.app);for(const n of t)IVe(this.app,n.next);return Promise.resolve()}}function X1n(e,t){return new K1n(e,t)}function Q1n(e){return{getToken:t=>rX(e,t),getLimitedUseToken:()=>G1n(e),addTokenListener:t=>AVe(e,"INTERNAL",t),removeTokenListener:t=>IVe(e.app,t)}}const J1n="@firebase/app-check",Z1n="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const evn="https://www.google.com/recaptcha/api.js";function tvn(e,t){const n=new vD,r=Vo(e);r.reCAPTCHAState={initialized:n};const i=nvn(e),s=Ywe(!1);return s?Qwe(e,t,s,i,n):svn(()=>{const o=Ywe(!1);if(!o)throw new Error("no recaptcha");Qwe(e,t,o,i,n)}),n.promise}function Qwe(e,t,n,r,i){n.ready(()=>{ivn(e,t,n,r),i.resolve(n)})}function nvn(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function rvn(e){Uue(e);const n=await Vo(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Vo(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function ivn(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Vo(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Vo(e).reCAPTCHAState.succeeded=!1}}),s=Vo(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function svn(e){const t=document.createElement("script");t.src=evn,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class que{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;avn(this._throttleData);const i=await rvn(this._app).catch(o=>{throw Jl.create("recaptcha-error")});if(!(!((t=Vo(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Jl.create("recaptcha-error");let s;try{s=await zue($1n(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=ovn(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Jl.create("throttled",{time:xVe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=TC(t,"heartbeat"),tvn(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof que?this._siteKey===t._siteKey:!1}}function ovn(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+D1n,httpStatus:e};{const n=t?t.backoffCount:0,r=Zfn(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function avn(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Jl.create("throttled",{time:xVe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uvn(e=Hae(),t){e=Zi(e);const n=TC(e,"app-check");if(K9().initialized||H1n(),Vue()&&Hue().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Jl.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return lvn(e,t.provider,t.isTokenAutoRefreshEnabled),Vo(e).isTokenAutoRefreshEnabled&&AVe(r,"INTERNAL",()=>{}),r}function lvn(e,t,n){const r=I1n(e,Object.assign({},vVe));r.activated=!0,r.provider=t,r.cachedTokenPromise=z1n(e).then(i=>(i&&nS(i)&&(r.token=i,kVe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const cvn="app-check",Jwe="app-check-internal";function fvn(){Rg(new wm(cvn,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return X1n(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Jwe).initialize()})),Rg(new wm(Jwe,e=>{const t=e.getProvider("app-check").getImmediate();return Q1n(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ch(J1n,Z1n)}fvn();var RVe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof rI=="function"&&rI;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof rI=="function"&&rI,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,b=h.length;b;){for(y=h,h=[],g=-1;++g<b;)y[g]();b=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(S){if(typeof S!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,S!==o&&m(this,S)}f.prototype.catch=function(S){return this.then(null,S)},f.prototype.then=function(S,T){if(typeof S!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var C=new this.constructor(o);if(this.state!==c){var I=this.state===l?S:T;h(C,I,this.outcome)}else this.queue.push(new d(C,S,T));return C};function d(S,T,C){this.promise=S,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(S){a.resolve(this.promise,S)},d.prototype.otherCallFulfilled=function(S){h(this.promise,this.onFulfilled,S)},d.prototype.callRejected=function(S){a.reject(this.promise,S)},d.prototype.otherCallRejected=function(S){h(this.promise,this.onRejected,S)};function h(S,T,C){s(function(){var I;try{I=T(C)}catch(D){return a.reject(S,D)}I===S?a.reject(S,new TypeError("Cannot resolve promise with itself")):a.resolve(S,I)})}a.resolve=function(S,T){var C=g(p,T);if(C.status==="error")return a.reject(S,C.value);var I=C.value;if(I)m(S,I);else{S.state=l,S.outcome=T;for(var D=-1,k=S.queue.length;++D<k;)S.queue[D].callFulfilled(T)}return S},a.reject=function(S,T){S.state=u,S.outcome=T;for(var C=-1,I=S.queue.length;++C<I;)S.queue[C].callRejected(T);return S};function p(S){var T=S&&S.then;if(S&&(typeof S=="object"||typeof S=="function")&&typeof T=="function")return function(){T.apply(S,arguments)}}function m(S,T){var C=!1;function I(M){C||(C=!0,a.reject(S,M))}function D(M){C||(C=!0,a.resolve(S,M))}function k(){T(D,I)}var P=g(k);P.status==="error"&&I(P.value)}function g(S,T){var C={};try{C.value=S(T),C.status="success"}catch(I){C.status="error",C.value=I}return C}f.resolve=y;function y(S){return S instanceof this?S:a.resolve(new this(o),S)}f.reject=b;function b(S){var T=new this(o);return a.reject(T,S)}f.all=x;function x(S){var T=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=S.length,I=!1;if(!C)return this.resolve([]);for(var D=new Array(C),k=0,P=-1,M=new this(o);++P<C;)$(S[P],P);return M;function $(B,q){T.resolve(B).then(H,function(Y){I||(I=!0,a.reject(M,Y))});function H(Y){D[q]=Y,++k===C&&!I&&(I=!0,a.resolve(M,D))}}}f.race=w;function w(S){var T=this;if(Object.prototype.toString.call(S)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=S.length,I=!1;if(!C)return this.resolve([]);for(var D=-1,k=new this(o);++D<C;)P(S[D]);return k;function P(M){T.resolve(M).then(function($){I||(I=!0,a.resolve(k,$))},function($){I||(I=!0,a.reject(k,$))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Jt<"u"?Jt:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ee){return typeof ee}:function(ee){return ee&&typeof Symbol=="function"&&ee.constructor===Symbol&&ee!==Symbol.prototype?"symbol":typeof ee};function o(ee,pe){if(!(ee instanceof pe))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ee=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),pe=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ee||pe)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ee,pe){ee=ee||[],pe=pe||{};try{return new Blob(ee,pe)}catch(be){if(be.name!=="TypeError")throw be;for(var se=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,xe=new se,Ce=0;Ce<ee.length;Ce+=1)xe.append(ee[Ce]);return xe.getBlob(pe.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ee,pe){pe&&ee.then(function(se){pe(null,se)},function(se){pe(se)})}function h(ee,pe,se){typeof pe=="function"&&ee.then(pe),typeof se=="function"&&ee.catch(se)}function p(ee){return typeof ee!="string"&&(console.warn(ee+" used as a key, but it is not a string."),ee=String(ee)),ee}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,b={},x=Object.prototype.toString,w="readonly",S="readwrite";function T(ee){for(var pe=ee.length,se=new ArrayBuffer(pe),xe=new Uint8Array(se),Ce=0;Ce<pe;Ce++)xe[Ce]=ee.charCodeAt(Ce);return se}function C(ee){return new f(function(pe){var se=ee.transaction(g,S),xe=c([""]);se.objectStore(g).put(xe,"key"),se.onabort=function(Ce){Ce.preventDefault(),Ce.stopPropagation(),pe(!1)},se.oncomplete=function(){var Ce=navigator.userAgent.match(/Chrome\/(\d+)/),be=navigator.userAgent.match(/Edge\//);pe(be||!Ce||parseInt(Ce[1],10)>=43)}}).catch(function(){return!1})}function I(ee){return typeof y=="boolean"?f.resolve(y):C(ee).then(function(pe){return y=pe,y})}function D(ee){var pe=b[ee.name],se={};se.promise=new f(function(xe,Ce){se.resolve=xe,se.reject=Ce}),pe.deferredOperations.push(se),pe.dbReady?pe.dbReady=pe.dbReady.then(function(){return se.promise}):pe.dbReady=se.promise}function k(ee){var pe=b[ee.name],se=pe.deferredOperations.pop();if(se)return se.resolve(),se.promise}function P(ee,pe){var se=b[ee.name],xe=se.deferredOperations.pop();if(xe)return xe.reject(pe),xe.promise}function M(ee,pe){return new f(function(se,xe){if(b[ee.name]=b[ee.name]||W(),ee.db)if(pe)D(ee),ee.db.close();else return se(ee.db);var Ce=[ee.name];pe&&Ce.push(ee.version);var be=u.open.apply(u,Ce);pe&&(be.onupgradeneeded=function(He){var it=be.result;try{it.createObjectStore(ee.storeName),He.oldVersion<=1&&it.createObjectStore(g)}catch(at){if(at.name==="ConstraintError")console.warn('The database "'+ee.name+'" has been upgraded from version '+He.oldVersion+" to version "+He.newVersion+', but the storage "'+ee.storeName+'" already exists.');else throw at}}),be.onerror=function(He){He.preventDefault(),xe(be.error)},be.onsuccess=function(){var He=be.result;He.onversionchange=function(it){it.target.close()},se(He),k(ee)}})}function $(ee){return M(ee,!1)}function B(ee){return M(ee,!0)}function q(ee,pe){if(!ee.db)return!0;var se=!ee.db.objectStoreNames.contains(ee.storeName),xe=ee.version<ee.db.version,Ce=ee.version>ee.db.version;if(xe&&(ee.version!==pe&&console.warn('The database "'+ee.name+`" can't be downgraded from version `+ee.db.version+" to version "+ee.version+"."),ee.version=ee.db.version),Ce||se){if(se){var be=ee.db.version+1;be>ee.version&&(ee.version=be)}return!0}return!1}function H(ee){return new f(function(pe,se){var xe=new FileReader;xe.onerror=se,xe.onloadend=function(Ce){var be=btoa(Ce.target.result||"");pe({__local_forage_encoded_blob:!0,data:be,type:ee.type})},xe.readAsBinaryString(ee)})}function Y(ee){var pe=T(atob(ee.data));return c([pe],{type:ee.type})}function K(ee){return ee&&ee.__local_forage_encoded_blob}function Q(ee){var pe=this,se=pe._initReady().then(function(){var xe=b[pe._dbInfo.name];if(xe&&xe.dbReady)return xe.dbReady});return h(se,ee,ee),se}function L(ee){D(ee);for(var pe=b[ee.name],se=pe.forages,xe=0;xe<se.length;xe++){var Ce=se[xe];Ce._dbInfo.db&&(Ce._dbInfo.db.close(),Ce._dbInfo.db=null)}return ee.db=null,$(ee).then(function(be){return ee.db=be,q(ee)?B(ee):be}).then(function(be){ee.db=pe.db=be;for(var He=0;He<se.length;He++)se[He]._dbInfo.db=be}).catch(function(be){throw P(ee,be),be})}function z(ee,pe,se,xe){xe===void 0&&(xe=1);try{var Ce=ee.db.transaction(ee.storeName,pe);se(null,Ce)}catch(be){if(xe>0&&(!ee.db||be.name==="InvalidStateError"||be.name==="NotFoundError"))return f.resolve().then(function(){if(!ee.db||be.name==="NotFoundError"&&!ee.db.objectStoreNames.contains(ee.storeName)&&ee.version<=ee.db.version)return ee.db&&(ee.version=ee.db.version+1),B(ee)}).then(function(){return L(ee).then(function(){z(ee,pe,se,xe-1)})}).catch(se);se(be)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(ee){var pe=this,se={db:null};if(ee)for(var xe in ee)se[xe]=ee[xe];var Ce=b[se.name];Ce||(Ce=W(),b[se.name]=Ce),Ce.forages.push(pe),pe._initReady||(pe._initReady=pe.ready,pe.ready=Q);var be=[];function He(){return f.resolve()}for(var it=0;it<Ce.forages.length;it++){var at=Ce.forages[it];at!==pe&&be.push(at._initReady().catch(He))}var ut=Ce.forages.slice(0);return f.all(be).then(function(){return se.db=Ce.db,$(se)}).then(function(vt){return se.db=vt,q(se,pe._defaultConfig.version)?B(se):vt}).then(function(vt){se.db=Ce.db=vt,pe._dbInfo=se;for(var Mt=0;Mt<ut.length;Mt++){var On=ut[Mt];On!==pe&&(On._dbInfo.db=se.db,On._dbInfo.version=se.version)}})}function V(ee,pe){var se=this;ee=p(ee);var xe=new f(function(Ce,be){se.ready().then(function(){z(se._dbInfo,w,function(He,it){if(He)return be(He);try{var at=it.objectStore(se._dbInfo.storeName),ut=at.get(ee);ut.onsuccess=function(){var vt=ut.result;vt===void 0&&(vt=null),K(vt)&&(vt=Y(vt)),Ce(vt)},ut.onerror=function(){be(ut.error)}}catch(vt){be(vt)}})}).catch(be)});return d(xe,pe),xe}function J(ee,pe){var se=this,xe=new f(function(Ce,be){se.ready().then(function(){z(se._dbInfo,w,function(He,it){if(He)return be(He);try{var at=it.objectStore(se._dbInfo.storeName),ut=at.openCursor(),vt=1;ut.onsuccess=function(){var Mt=ut.result;if(Mt){var On=Mt.value;K(On)&&(On=Y(On));var Kt=ee(On,Mt.key,vt++);Kt!==void 0?Ce(Kt):Mt.continue()}else Ce()},ut.onerror=function(){be(ut.error)}}catch(Mt){be(Mt)}})}).catch(be)});return d(xe,pe),xe}function ue(ee,pe,se){var xe=this;ee=p(ee);var Ce=new f(function(be,He){var it;xe.ready().then(function(){return it=xe._dbInfo,x.call(pe)==="[object Blob]"?I(it.db).then(function(at){return at?pe:H(pe)}):pe}).then(function(at){z(xe._dbInfo,S,function(ut,vt){if(ut)return He(ut);try{var Mt=vt.objectStore(xe._dbInfo.storeName);at===null&&(at=void 0);var On=Mt.put(at,ee);vt.oncomplete=function(){at===void 0&&(at=null),be(at)},vt.onabort=vt.onerror=function(){var Kt=On.error?On.error:On.transaction.error;He(Kt)}}catch(Kt){He(Kt)}})}).catch(He)});return d(Ce,se),Ce}function we(ee,pe){var se=this;ee=p(ee);var xe=new f(function(Ce,be){se.ready().then(function(){z(se._dbInfo,S,function(He,it){if(He)return be(He);try{var at=it.objectStore(se._dbInfo.storeName),ut=at.delete(ee);it.oncomplete=function(){Ce()},it.onerror=function(){be(ut.error)},it.onabort=function(){var vt=ut.error?ut.error:ut.transaction.error;be(vt)}}catch(vt){be(vt)}})}).catch(be)});return d(xe,pe),xe}function he(ee){var pe=this,se=new f(function(xe,Ce){pe.ready().then(function(){z(pe._dbInfo,S,function(be,He){if(be)return Ce(be);try{var it=He.objectStore(pe._dbInfo.storeName),at=it.clear();He.oncomplete=function(){xe()},He.onabort=He.onerror=function(){var ut=at.error?at.error:at.transaction.error;Ce(ut)}}catch(ut){Ce(ut)}})}).catch(Ce)});return d(se,ee),se}function ke(ee){var pe=this,se=new f(function(xe,Ce){pe.ready().then(function(){z(pe._dbInfo,w,function(be,He){if(be)return Ce(be);try{var it=He.objectStore(pe._dbInfo.storeName),at=it.count();at.onsuccess=function(){xe(at.result)},at.onerror=function(){Ce(at.error)}}catch(ut){Ce(ut)}})}).catch(Ce)});return d(se,ee),se}function Pe(ee,pe){var se=this,xe=new f(function(Ce,be){if(ee<0){Ce(null);return}se.ready().then(function(){z(se._dbInfo,w,function(He,it){if(He)return be(He);try{var at=it.objectStore(se._dbInfo.storeName),ut=!1,vt=at.openKeyCursor();vt.onsuccess=function(){var Mt=vt.result;if(!Mt){Ce(null);return}ee===0||ut?Ce(Mt.key):(ut=!0,Mt.advance(ee))},vt.onerror=function(){be(vt.error)}}catch(Mt){be(Mt)}})}).catch(be)});return d(xe,pe),xe}function rt(ee){var pe=this,se=new f(function(xe,Ce){pe.ready().then(function(){z(pe._dbInfo,w,function(be,He){if(be)return Ce(be);try{var it=He.objectStore(pe._dbInfo.storeName),at=it.openKeyCursor(),ut=[];at.onsuccess=function(){var vt=at.result;if(!vt){xe(ut);return}ut.push(vt.key),vt.continue()},at.onerror=function(){Ce(at.error)}}catch(vt){Ce(vt)}})}).catch(Ce)});return d(se,ee),se}function Re(ee,pe){pe=m.apply(this,arguments);var se=this.config();ee=typeof ee!="function"&&ee||{},ee.name||(ee.name=ee.name||se.name,ee.storeName=ee.storeName||se.storeName);var xe=this,Ce;if(!ee.name)Ce=f.reject("Invalid arguments");else{var be=ee.name===se.name&&xe._dbInfo.db,He=be?f.resolve(xe._dbInfo.db):$(ee).then(function(it){var at=b[ee.name],ut=at.forages;at.db=it;for(var vt=0;vt<ut.length;vt++)ut[vt]._dbInfo.db=it;return it});ee.storeName?Ce=He.then(function(it){if(it.objectStoreNames.contains(ee.storeName)){var at=it.version+1;D(ee);var ut=b[ee.name],vt=ut.forages;it.close();for(var Mt=0;Mt<vt.length;Mt++){var On=vt[Mt];On._dbInfo.db=null,On._dbInfo.version=at}var Kt=new f(function(er,zr){var vr=u.open(ee.name,at);vr.onerror=function(Co){var Ac=vr.result;Ac.close(),zr(Co)},vr.onupgradeneeded=function(){var Co=vr.result;Co.deleteObjectStore(ee.storeName)},vr.onsuccess=function(){var Co=vr.result;Co.close(),er(Co)}});return Kt.then(function(er){ut.db=er;for(var zr=0;zr<vt.length;zr++){var vr=vt[zr];vr._dbInfo.db=er,k(vr._dbInfo)}}).catch(function(er){throw(P(ee,er)||f.resolve()).catch(function(){}),er})}}):Ce=He.then(function(it){D(ee);var at=b[ee.name],ut=at.forages;it.close();for(var vt=0;vt<ut.length;vt++){var Mt=ut[vt];Mt._dbInfo.db=null}var On=new f(function(Kt,er){var zr=u.deleteDatabase(ee.name);zr.onerror=function(){var vr=zr.result;vr&&vr.close(),er(zr.error)},zr.onblocked=function(){console.warn('dropInstance blocked for database "'+ee.name+'" until all open connections are closed')},zr.onsuccess=function(){var vr=zr.result;vr&&vr.close(),Kt(vr)}});return On.then(function(Kt){at.db=Kt;for(var er=0;er<ut.length;er++){var zr=ut[er];k(zr._dbInfo)}}).catch(function(Kt){throw(P(ee,Kt)||f.resolve()).catch(function(){}),Kt})})}return d(Ce,pe),Ce}var St={_driver:"asyncStorage",_initStorage:F,_support:l(),iterate:J,getItem:V,setItem:ue,removeItem:we,clear:he,length:ke,key:Pe,keys:rt,dropInstance:Re};function Je(){return typeof openDatabase=="function"}var It="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mt="~~local_forage_type~",Te=/^~~local_forage_type~([^~]+)~/,Fe="__lfsc__:",st=Fe.length,yt="arbf",Dt="blob",Qe="si08",_e="ui08",kt="uic8",Rt="si16",Ee="si32",Oe="ur16",ot="ui32",xt="fl32",jt="fl64",jn=st+yt.length,dr=Object.prototype.toString;function Sr(ee){var pe=ee.length*.75,se=ee.length,xe,Ce=0,be,He,it,at;ee[ee.length-1]==="="&&(pe--,ee[ee.length-2]==="="&&pe--);var ut=new ArrayBuffer(pe),vt=new Uint8Array(ut);for(xe=0;xe<se;xe+=4)be=It.indexOf(ee[xe]),He=It.indexOf(ee[xe+1]),it=It.indexOf(ee[xe+2]),at=It.indexOf(ee[xe+3]),vt[Ce++]=be<<2|He>>4,vt[Ce++]=(He&15)<<4|it>>2,vt[Ce++]=(it&3)<<6|at&63;return ut}function xi(ee){var pe=new Uint8Array(ee),se="",xe;for(xe=0;xe<pe.length;xe+=3)se+=It[pe[xe]>>2],se+=It[(pe[xe]&3)<<4|pe[xe+1]>>4],se+=It[(pe[xe+1]&15)<<2|pe[xe+2]>>6],se+=It[pe[xe+2]&63];return pe.length%3===2?se=se.substring(0,se.length-1)+"=":pe.length%3===1&&(se=se.substring(0,se.length-2)+"=="),se}function Tn(ee,pe){var se="";if(ee&&(se=dr.call(ee)),ee&&(se==="[object ArrayBuffer]"||ee.buffer&&dr.call(ee.buffer)==="[object ArrayBuffer]")){var xe,Ce=Fe;ee instanceof ArrayBuffer?(xe=ee,Ce+=yt):(xe=ee.buffer,se==="[object Int8Array]"?Ce+=Qe:se==="[object Uint8Array]"?Ce+=_e:se==="[object Uint8ClampedArray]"?Ce+=kt:se==="[object Int16Array]"?Ce+=Rt:se==="[object Uint16Array]"?Ce+=Oe:se==="[object Int32Array]"?Ce+=Ee:se==="[object Uint32Array]"?Ce+=ot:se==="[object Float32Array]"?Ce+=xt:se==="[object Float64Array]"?Ce+=jt:pe(new Error("Failed to get type for BinaryArray"))),pe(Ce+xi(xe))}else if(se==="[object Blob]"){var be=new FileReader;be.onload=function(){var He=mt+ee.type+"~"+xi(this.result);pe(Fe+Dt+He)},be.readAsArrayBuffer(ee)}else try{pe(JSON.stringify(ee))}catch(He){console.error("Couldn't convert value into a JSON string: ",ee),pe(null,He)}}function Un(ee){if(ee.substring(0,st)!==Fe)return JSON.parse(ee);var pe=ee.substring(jn),se=ee.substring(st,jn),xe;if(se===Dt&&Te.test(pe)){var Ce=pe.match(Te);xe=Ce[1],pe=pe.substring(Ce[0].length)}var be=Sr(pe);switch(se){case yt:return be;case Dt:return c([be],{type:xe});case Qe:return new Int8Array(be);case _e:return new Uint8Array(be);case kt:return new Uint8ClampedArray(be);case Rt:return new Int16Array(be);case Oe:return new Uint16Array(be);case Ee:return new Int32Array(be);case ot:return new Uint32Array(be);case xt:return new Float32Array(be);case jt:return new Float64Array(be);default:throw new Error("Unkown type: "+se)}}var hr={serialize:Tn,deserialize:Un,stringToBuffer:Sr,bufferToString:xi};function gr(ee,pe,se,xe){ee.executeSql("CREATE TABLE IF NOT EXISTS "+pe.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],se,xe)}function Yo(ee){var pe=this,se={db:null};if(ee)for(var xe in ee)se[xe]=typeof ee[xe]!="string"?ee[xe].toString():ee[xe];var Ce=new f(function(be,He){try{se.db=openDatabase(se.name,String(se.version),se.description,se.size)}catch(it){return He(it)}se.db.transaction(function(it){gr(it,se,function(){pe._dbInfo=se,be()},function(at,ut){He(ut)})},He)});return se.serializer=hr,Ce}function es(ee,pe,se,xe,Ce,be){ee.executeSql(se,xe,Ce,function(He,it){it.code===it.SYNTAX_ERR?He.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[pe.storeName],function(at,ut){ut.rows.length?be(at,it):gr(at,pe,function(){at.executeSql(se,xe,Ce,be)},be)},be):be(He,it)},be)}function ds(ee,pe){var se=this;ee=p(ee);var xe=new f(function(Ce,be){se.ready().then(function(){var He=se._dbInfo;He.db.transaction(function(it){es(it,He,"SELECT * FROM "+He.storeName+" WHERE key = ? LIMIT 1",[ee],function(at,ut){var vt=ut.rows.length?ut.rows.item(0).value:null;vt&&(vt=He.serializer.deserialize(vt)),Ce(vt)},function(at,ut){be(ut)})})}).catch(be)});return d(xe,pe),xe}function Ns(ee,pe){var se=this,xe=new f(function(Ce,be){se.ready().then(function(){var He=se._dbInfo;He.db.transaction(function(it){es(it,He,"SELECT * FROM "+He.storeName,[],function(at,ut){for(var vt=ut.rows,Mt=vt.length,On=0;On<Mt;On++){var Kt=vt.item(On),er=Kt.value;if(er&&(er=He.serializer.deserialize(er)),er=ee(er,Kt.key,On+1),er!==void 0){Ce(er);return}}Ce()},function(at,ut){be(ut)})})}).catch(be)});return d(xe,pe),xe}function Ur(ee,pe,se,xe){var Ce=this;ee=p(ee);var be=new f(function(He,it){Ce.ready().then(function(){pe===void 0&&(pe=null);var at=pe,ut=Ce._dbInfo;ut.serializer.serialize(pe,function(vt,Mt){Mt?it(Mt):ut.db.transaction(function(On){es(On,ut,"INSERT OR REPLACE INTO "+ut.storeName+" (key, value) VALUES (?, ?)",[ee,vt],function(){He(at)},function(Kt,er){it(er)})},function(On){if(On.code===On.QUOTA_ERR){if(xe>0){He(Ur.apply(Ce,[ee,at,se,xe-1]));return}it(On)}})})}).catch(it)});return d(be,se),be}function hs(ee,pe,se){return Ur.apply(this,[ee,pe,se,1])}function Cc(ee,pe){var se=this;ee=p(ee);var xe=new f(function(Ce,be){se.ready().then(function(){var He=se._dbInfo;He.db.transaction(function(it){es(it,He,"DELETE FROM "+He.storeName+" WHERE key = ?",[ee],function(){Ce()},function(at,ut){be(ut)})})}).catch(be)});return d(xe,pe),xe}function Ko(ee){var pe=this,se=new f(function(xe,Ce){pe.ready().then(function(){var be=pe._dbInfo;be.db.transaction(function(He){es(He,be,"DELETE FROM "+be.storeName,[],function(){xe()},function(it,at){Ce(at)})})}).catch(Ce)});return d(se,ee),se}function Ou(ee){var pe=this,se=new f(function(xe,Ce){pe.ready().then(function(){var be=pe._dbInfo;be.db.transaction(function(He){es(He,be,"SELECT COUNT(key) as c FROM "+be.storeName,[],function(it,at){var ut=at.rows.item(0).c;xe(ut)},function(it,at){Ce(at)})})}).catch(Ce)});return d(se,ee),se}function Lr(ee,pe){var se=this,xe=new f(function(Ce,be){se.ready().then(function(){var He=se._dbInfo;He.db.transaction(function(it){es(it,He,"SELECT key FROM "+He.storeName+" WHERE id = ? LIMIT 1",[ee+1],function(at,ut){var vt=ut.rows.length?ut.rows.item(0).key:null;Ce(vt)},function(at,ut){be(ut)})})}).catch(be)});return d(xe,pe),xe}function ki(ee){var pe=this,se=new f(function(xe,Ce){pe.ready().then(function(){var be=pe._dbInfo;be.db.transaction(function(He){es(He,be,"SELECT key FROM "+be.storeName,[],function(it,at){for(var ut=[],vt=0;vt<at.rows.length;vt++)ut.push(at.rows.item(vt).key);xe(ut)},function(it,at){Ce(at)})})}).catch(Ce)});return d(se,ee),se}function pi(ee){return new f(function(pe,se){ee.transaction(function(xe){xe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Ce,be){for(var He=[],it=0;it<be.rows.length;it++)He.push(be.rows.item(it).name);pe({db:ee,storeNames:He})},function(Ce,be){se(be)})},function(xe){se(xe)})})}function Xs(ee,pe){pe=m.apply(this,arguments);var se=this.config();ee=typeof ee!="function"&&ee||{},ee.name||(ee.name=ee.name||se.name,ee.storeName=ee.storeName||se.storeName);var xe=this,Ce;return ee.name?Ce=new f(function(be){var He;ee.name===se.name?He=xe._dbInfo.db:He=openDatabase(ee.name,"","",0),ee.storeName?be({db:He,storeNames:[ee.storeName]}):be(pi(He))}).then(function(be){return new f(function(He,it){be.db.transaction(function(at){function ut(Kt){return new f(function(er,zr){at.executeSql("DROP TABLE IF EXISTS "+Kt,[],function(){er()},function(vr,Co){zr(Co)})})}for(var vt=[],Mt=0,On=be.storeNames.length;Mt<On;Mt++)vt.push(ut(be.storeNames[Mt]));f.all(vt).then(function(){He()}).catch(function(Kt){it(Kt)})},function(at){it(at)})})}):Ce=f.reject("Invalid arguments"),d(Ce,pe),Ce}var si={_driver:"webSQLStorage",_initStorage:Yo,_support:Je(),iterate:Ns,getItem:ds,setItem:hs,removeItem:Cc,clear:Ko,length:Ou,key:Lr,keys:ki,dropInstance:Xs};function Ri(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function me(ee,pe){var se=ee.name+"/";return ee.storeName!==pe.storeName&&(se+=ee.storeName+"/"),se}function ae(){var ee="_localforage_support_test";try{return localStorage.setItem(ee,!0),localStorage.removeItem(ee),!1}catch{return!0}}function ge(){return!ae()||localStorage.length>0}function Le(ee){var pe=this,se={};if(ee)for(var xe in ee)se[xe]=ee[xe];return se.keyPrefix=me(ee,pe._defaultConfig),ge()?(pe._dbInfo=se,se.serializer=hr,f.resolve()):f.reject()}function Me(ee){var pe=this,se=pe.ready().then(function(){for(var xe=pe._dbInfo.keyPrefix,Ce=localStorage.length-1;Ce>=0;Ce--){var be=localStorage.key(Ce);be.indexOf(xe)===0&&localStorage.removeItem(be)}});return d(se,ee),se}function _t(ee,pe){var se=this;ee=p(ee);var xe=se.ready().then(function(){var Ce=se._dbInfo,be=localStorage.getItem(Ce.keyPrefix+ee);return be&&(be=Ce.serializer.deserialize(be)),be});return d(xe,pe),xe}function Ut(ee,pe){var se=this,xe=se.ready().then(function(){for(var Ce=se._dbInfo,be=Ce.keyPrefix,He=be.length,it=localStorage.length,at=1,ut=0;ut<it;ut++){var vt=localStorage.key(ut);if(vt.indexOf(be)===0){var Mt=localStorage.getItem(vt);if(Mt&&(Mt=Ce.serializer.deserialize(Mt)),Mt=ee(Mt,vt.substring(He),at++),Mt!==void 0)return Mt}}});return d(xe,pe),xe}function fn(ee,pe){var se=this,xe=se.ready().then(function(){var Ce=se._dbInfo,be;try{be=localStorage.key(ee)}catch{be=null}return be&&(be=be.substring(Ce.keyPrefix.length)),be});return d(xe,pe),xe}function Zn(ee){var pe=this,se=pe.ready().then(function(){for(var xe=pe._dbInfo,Ce=localStorage.length,be=[],He=0;He<Ce;He++){var it=localStorage.key(He);it.indexOf(xe.keyPrefix)===0&&be.push(it.substring(xe.keyPrefix.length))}return be});return d(se,ee),se}function ur(ee){var pe=this,se=pe.keys().then(function(xe){return xe.length});return d(se,ee),se}function Pn(ee,pe){var se=this;ee=p(ee);var xe=se.ready().then(function(){var Ce=se._dbInfo;localStorage.removeItem(Ce.keyPrefix+ee)});return d(xe,pe),xe}function Tr(ee,pe,se){var xe=this;ee=p(ee);var Ce=xe.ready().then(function(){pe===void 0&&(pe=null);var be=pe;return new f(function(He,it){var at=xe._dbInfo;at.serializer.serialize(pe,function(ut,vt){if(vt)it(vt);else try{localStorage.setItem(at.keyPrefix+ee,ut),He(be)}catch(Mt){(Mt.name==="QuotaExceededError"||Mt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&it(Mt),it(Mt)}})})});return d(Ce,se),Ce}function oi(ee,pe){if(pe=m.apply(this,arguments),ee=typeof ee!="function"&&ee||{},!ee.name){var se=this.config();ee.name=ee.name||se.name,ee.storeName=ee.storeName||se.storeName}var xe=this,Ce;return ee.name?Ce=new f(function(be){ee.storeName?be(me(ee,xe._defaultConfig)):be(ee.name+"/")}).then(function(be){for(var He=localStorage.length-1;He>=0;He--){var it=localStorage.key(He);it.indexOf(be)===0&&localStorage.removeItem(it)}}):Ce=f.reject("Invalid arguments"),d(Ce,pe),Ce}var on={_driver:"localStorageWrapper",_initStorage:Le,_support:Ri(),iterate:Ut,getItem:_t,setItem:Tr,removeItem:Pn,clear:Me,length:ur,key:fn,keys:Zn,dropInstance:oi},Cr=function(pe,se){return pe===se||typeof pe=="number"&&typeof se=="number"&&isNaN(pe)&&isNaN(se)},Xr=function(pe,se){for(var xe=pe.length,Ce=0;Ce<xe;){if(Cr(pe[Ce],se))return!0;Ce++}return!1},yr=Array.isArray||function(ee){return Object.prototype.toString.call(ee)==="[object Array]"},Di={},po={},Ni={INDEXEDDB:St,WEBSQL:si,LOCALSTORAGE:on},So=[Ni.INDEXEDDB._driver,Ni.WEBSQL._driver,Ni.LOCALSTORAGE._driver],ts=["dropInstance"],ns=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ts),To={description:"",driver:So.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function xa(ee,pe){ee[pe]=function(){var se=arguments;return ee.ready().then(function(){return ee[pe].apply(ee,se)})}}function mo(){for(var ee=1;ee<arguments.length;ee++){var pe=arguments[ee];if(pe)for(var se in pe)pe.hasOwnProperty(se)&&(yr(pe[se])?arguments[0][se]=pe[se].slice():arguments[0][se]=pe[se])}return arguments[0]}var wl=function(){function ee(pe){o(this,ee);for(var se in Ni)if(Ni.hasOwnProperty(se)){var xe=Ni[se],Ce=xe._driver;this[se]=Ce,Di[Ce]||this.defineDriver(xe)}this._defaultConfig=mo({},To),this._config=mo({},this._defaultConfig,pe),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ee.prototype.config=function(se){if((typeof se>"u"?"undefined":s(se))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var xe in se){if(xe==="storeName"&&(se[xe]=se[xe].replace(/\W/g,"_")),xe==="version"&&typeof se[xe]!="number")return new Error("Database version must be a number.");this._config[xe]=se[xe]}return"driver"in se&&se.driver?this.setDriver(this._config.driver):!0}else return typeof se=="string"?this._config[se]:this._config},ee.prototype.defineDriver=function(se,xe,Ce){var be=new f(function(He,it){try{var at=se._driver,ut=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!se._driver){it(ut);return}for(var vt=ns.concat("_initStorage"),Mt=0,On=vt.length;Mt<On;Mt++){var Kt=vt[Mt],er=!Xr(ts,Kt);if((er||se[Kt])&&typeof se[Kt]!="function"){it(ut);return}}var zr=function(){for(var Ac=function($u){return function(){var Ga=new Error("Method "+$u+" is not implemented by the current driver"),Id=f.reject(Ga);return d(Id,arguments[arguments.length-1]),Id}},Ad=0,iy=ts.length;Ad<iy;Ad++){var ep=ts[Ad];se[ep]||(se[ep]=Ac(ep))}};zr();var vr=function(Ac){Di[at]&&console.info("Redefining LocalForage driver: "+at),Di[at]=se,po[at]=Ac,He()};"_support"in se?se._support&&typeof se._support=="function"?se._support().then(vr,it):vr(!!se._support):vr(!0)}catch(Co){it(Co)}});return h(be,xe,Ce),be},ee.prototype.driver=function(){return this._driver||null},ee.prototype.getDriver=function(se,xe,Ce){var be=Di[se]?f.resolve(Di[se]):f.reject(new Error("Driver not found."));return h(be,xe,Ce),be},ee.prototype.getSerializer=function(se){var xe=f.resolve(hr);return h(xe,se),xe},ee.prototype.ready=function(se){var xe=this,Ce=xe._driverSet.then(function(){return xe._ready===null&&(xe._ready=xe._initDriver()),xe._ready});return h(Ce,se,se),Ce},ee.prototype.setDriver=function(se,xe,Ce){var be=this;yr(se)||(se=[se]);var He=this._getSupportedDrivers(se);function it(){be._config.driver=be.driver()}function at(Mt){return be._extend(Mt),it(),be._ready=be._initStorage(be._config),be._ready}function ut(Mt){return function(){var On=0;function Kt(){for(;On<Mt.length;){var er=Mt[On];return On++,be._dbInfo=null,be._ready=null,be.getDriver(er).then(at).catch(Kt)}it();var zr=new Error("No available storage method found.");return be._driverSet=f.reject(zr),be._driverSet}return Kt()}}var vt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=vt.then(function(){var Mt=He[0];return be._dbInfo=null,be._ready=null,be.getDriver(Mt).then(function(On){be._driver=On._driver,it(),be._wrapLibraryMethodsWithReady(),be._initDriver=ut(He)})}).catch(function(){it();var Mt=new Error("No available storage method found.");return be._driverSet=f.reject(Mt),be._driverSet}),h(this._driverSet,xe,Ce),this._driverSet},ee.prototype.supports=function(se){return!!po[se]},ee.prototype._extend=function(se){mo(this,se)},ee.prototype._getSupportedDrivers=function(se){for(var xe=[],Ce=0,be=se.length;Ce<be;Ce++){var He=se[Ce];this.supports(He)&&xe.push(He)}return xe},ee.prototype._wrapLibraryMethodsWithReady=function(){for(var se=0,xe=ns.length;se<xe;se++)xa(this,ns[se])},ee.prototype.createInstance=function(se){return new ee(se)},ee}(),Ef=new wl;r.exports=Ef},{3:3}]},{},[4])(4)})})(RVe);var dvn=RVe.exports;const RE=Cm(dvn);var Sa=[];for(var vH=0;vH<256;++vH)Sa.push((vH+256).toString(16).slice(1));function hvn(e,t=0){return(Sa[e[t+0]]+Sa[e[t+1]]+Sa[e[t+2]]+Sa[e[t+3]]+"-"+Sa[e[t+4]]+Sa[e[t+5]]+"-"+Sa[e[t+6]]+Sa[e[t+7]]+"-"+Sa[e[t+8]]+Sa[e[t+9]]+"-"+Sa[e[t+10]]+Sa[e[t+11]]+Sa[e[t+12]]+Sa[e[t+13]]+Sa[e[t+14]]+Sa[e[t+15]]).toLowerCase()}var f4,pvn=new Uint8Array(16);function mvn(){if(!f4&&(f4=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!f4))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return f4(pvn)}var gvn=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Zwe={randomUUID:gvn};function xF(e,t,n){if(Zwe.randomUUID&&!e)return Zwe.randomUUID();e=e||{};var r=e.random||(e.rng||mvn)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,hvn(r)}class DVe{constructor(t){ju(this,"engine");ju(this,"connected",!1);ju(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function _F(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function GA(e){return e.participantId!==void 0}class rh extends DVe{constructor(){super("firebase");ju(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");ju(this,"firestore");ju(this,"collectionPrefix","prod-");ju(this,"studyCollection");ju(this,"storage");ju(this,"studyId","");ju(this,"localForage",RE.createInstance({name:"currentParticipantId"}));ju(this,"participantData",null);ju(this,"userManagementData",{});const n=_9.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=K7e(n);this.firestore=h1n(r,{}),this.storage=rwe();try{uvn(r,{provider:new que(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await p1n(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=hF();if(!i.currentUser&&(await zhn(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=Rl(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await _F(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.setcurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(GA(a))return this.participantData=a,a;const l=await _F(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=rs(this.studyCollection,"configHash"),r=await u4(n);return r.exists()?r.data().configHash:null}async setcurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=rs(this.studyCollection,"configHash");await ou(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Nc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=xF(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){const i=s=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,s.data)};n.addEventListener("dataavailable",i),n.requestData(),setTimeout(()=>{n.removeEventListener("dataavailable",i)},0)}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=rs(this.studyCollection,"sequenceAssignment");await ou(i,{});const s=Rl(i,"sequenceAssignment"),o=rs(s,this.currentParticipantId),a=mH(s,jwe("rejected","==",!0),jwe("claimed","==",!1)),u=await mE(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await ou(m.ref,{claimed:!0}),await ou(o,{participantId:this.currentParticipantId,timestamp:g,rejected:!1,claimed:!1,completed:null}))}else r.dataCollectionEnabled&&await ou(o,{participantId:this.currentParticipantId,timestamp:qwe(),rejected:!1,claimed:!1,completed:null});const l=mH(s,Uwe("timestamp","asc")),d=(await mE(l)).docs.map(m=>m.data()).filter(m=>!m.rejected).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Nc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await qA(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");GA(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=rwe(),s=await r4(Nc(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return GA(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=xF();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=rs(this.studyCollection,"sequenceAssignment"),i=Rl(r,"sequenceAssignment"),s=rs(i,this.currentParticipantId);return await Hwe(s,{completed:qwe()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=Rl(this.firestore,"user-management"),i=await mE(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await ou(rs(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await ou(rs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await ou(rs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await ou(rs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await ou(rs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Nc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await qA(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");GA(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=Rl(this.firestore,`${this.collectionPrefix}${n}`),o=Nc(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!GA(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=rs(s,"sequenceAssignment"),l=Rl(u,"sequenceAssignment"),c=rs(l,r);await Hwe(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=rs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await ou(s,{[r]:i},{merge:!0})}async getModes(n){const r=rs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await u4(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await ou(r,s),s}async getParticipantsStatusCounts(n){const r=Rl(this.firestore,`${this.collectionPrefix}${n}`),i=rs(r,"sequenceAssignment"),s=Rl(i,"sequenceAssignment"),o=mH(s,Uwe("timestamp","asc")),u=(await mE(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=rs(this.firestore,"metadata","collections"),i=await u4(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=rs(this.firestore,"metadata","collections");await ou(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=rs(this.firestore,"metadata","collections");return await ou(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=rs(this.firestore,"metadata","collections"),i=await u4(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await ou(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Nc(this.storage,n),s=(await qA(r)).items.map(o=>nwe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Nc(this.storage,n),o=(await qA(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Nc(this.storage,n),s=Nc(this.storage,r),o=await r4(i),u=await(await fetch(o)).blob();await n4(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Rl(this.firestore,n),s=rs(i,"sequenceAssignment"),o=Rl(s,"sequenceAssignment"),a=Rl(this.firestore,r),u=rs(a,"sequenceAssignment");await ou(u,{});const l=Rl(u,"sequenceAssignment"),c=await mE(o),f=Wwe(this.firestore);c.docs.forEach(d=>{const h=rs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Rl(this.firestore,n),i=rs(r,"sequenceAssignment"),s=Rl(i,"sequenceAssignment"),o=await mE(s),a=Wwe(this.firestore);o.forEach(u=>{const l=rs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Nc(this.storage,n);return(await qA(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Nc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await r4(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await r4(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=Nc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await n4(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await n4(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await n4(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Nc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await nwe(i)}}const NVe=N.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),DP=()=>N.useContext(NVe);function yvn({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=N.useState(t),[o,a]=N.useState(!1),{storageEngine:u}=fo(),l=async()=>{const h=hF();try{await Khn(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;N.useEffect(()=>{s(t);let h;if(u instanceof rh)try{h=hF()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(b=>({user:b.user,isAdmin:b.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const b={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},x=await f(b);b.isAdmin=!!x,s(b)}else l()},g=(async()=>{if(u instanceof rh){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const b=Yhn(h,async x=>await p(x));return()=>b()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=N.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(NVe.Provider,{value:d,children:i.determiningStatus?_.jsx(uf,{visible:!0}):e})}function vvn({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?_.jsx(un.Td,{children:_.jsx(aa,{miw:100,children:e.timedOut?_.jsx(nt,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>_.jsxs(Ie,{children:[_.jsxs(nt,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?_.jsx(nt,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):_.jsx(nt,{span:!0,children:n})]},`cell-${t}`))})}):_.jsx(un.Td,{children:"N/A"})}function eEe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=m6e(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?_.jsxs(un.Td,{children:[t.toFixed(1)," ","s",n&&_.jsxs(_.Fragment,{children:[_.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):_.jsx(un.Td,{children:"N/A"})}function bvn(e){const{metaData:t}=e;return _.jsx(un.Td,{children:_.jsx(NJ,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(aa,{gap:"xs",children:[_.jsxs(Ie,{children:["IP:"," ",t.ip]}),_.jsxs(Ie,{children:["Language:"," ",t.language]}),_.jsxs(Ie,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(Ie,{children:["User Agent:"," ",t.userAgent]})]})})})}function xvn({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=fo(),{studyId:i}=sm(),{user:s}=DP(),o=async(w,S)=>{if(r&&i)if(s.isAdmin){const T=S===""?"Rejected by admin":S;await r.rejectParticipant(i,w,T),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=N.useState([]),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(""),m=async()=>{c(!0),d(!1);const w=a.map(async S=>await o(S,h));await Promise.all(w),u([]),await n(),c(!1)};function g(w){w==="all"?a.length===e.length?u([]):u(e.map(S=>S.participantId)):a.includes(w)?u(a.filter(S=>S!==w)):u([...a,w])}const y=wke(t.sequence),b=[_.jsx(un.Th,{children:_.jsx(qt,{justify:"center",children:_.jsx(Gl,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),_.jsx(un.Th,{children:"ID"},"ID"),_.jsx(un.Th,{children:"Status"},"status"),_.jsx(un.Th,{children:"Tags"},"tags"),_.jsx(un.Th,{children:"Meta"},"meta"),...y.flatMap(w=>[_.jsx(un.Th,{children:w.componentName},`header-${w.componentName}-${w.timesSeenInBlock}`),_.jsxs(un.Th,{children:[_.jsx("span",{style:{whiteSpace:"nowrap"},children:w.componentName})," ","Duration (clean)"]},`header-${w.componentName}-${w.timesSeenInBlock}-duration`)]),_.jsx(un.Th,{children:"Total Duration (clean)"},"total-duration")],x=e.map(w=>_.jsxs(un.Tr,{children:[_.jsx(un.Td,{children:_.jsx(qt,{justify:"center",children:_.jsx(Gl,{mb:-4,checked:a.includes(w.participantId),onChange:()=>g(w.participantId)})})}),_.jsx(un.Td,{style:{whiteSpace:"nowrap"},children:w.participantId}),_.jsx(un.Td,{children:_.jsxs(qt,{direction:"column",miw:100,children:[_.jsxs(qt,{direction:"row",align:"center",children:[w.rejected?_.jsx(ss,{label:"Rejected",children:_.jsx(YJ,{size:16,color:"red",style:{marginBottom:-3}})}):w.completed?_.jsx(ss,{label:"Completed",children:_.jsx(_Ae,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(ss,{label:"In Progress",children:_.jsx(wAe,{size:16,color:"orange",style:{marginBottom:-3}})}),!w.completed&&_.jsxs(nt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(w.answers).filter(([S,T])=>T.endTime!==-1&&T.endTime!==void 0).length/(om(w.sequence).length-1)*100).toFixed(2),"%"]})]}),w.rejected&&_.jsx(nt,{mt:5,fz:10,children:w.rejected.reason})]})}),_.jsx(un.Td,{children:_.jsx(qt,{direction:"column",miw:100,children:(w.participantTags||[]).map(S=>_.jsxs(nt,{fz:10,children:["-"," ",S]},`tag-${S}`))})}),w.metadata?_.jsx(bvn,{metaData:w.metadata}):_.jsx(un.Td,{children:"N/A"}),y.map(S=>{const T=xZ(w.sequence,S.orderPath),C=T&&Object.entries(w.answers).sort((I,D)=>{const k=parseInt(I[0].slice(I[0].lastIndexOf("_")+1),10),P=parseInt(D[0].slice(D[0].lastIndexOf("_")+1),10);return k-P}).filter(([I])=>{const D=I.slice(0,I.lastIndexOf("_")),k=parseInt(I.slice(I.lastIndexOf("_")+1),10);return D===S.componentName&&k<=T[0].lastIndex&&k>=T[0].firstIndex});return C!==null&&C.length>=S.timesSeenInBlock+1&&C[S.timesSeenInBlock][1].endTime!==-1?_.jsxs(ti.Fragment,{children:[_.jsx(vvn,{cellData:C[S.timesSeenInBlock][1]}),_.jsx(eEe,{cellData:C[S.timesSeenInBlock][1]})]},`cellgroup-${w.participantId}-${S.componentName}-${S.timesSeenInBlock}`):_.jsxs(ti.Fragment,{children:[_.jsx(un.Td,{children:"N/A"}),_.jsx(un.Td,{children:"N/A"})]},`cellgroup-${w.participantId}-${S.componentName}-${S.timesSeenInBlock}`)}),_.jsx(eEe,{cellData:{startTime:Math.min(...Object.values(w.answers).filter(S=>S.endTime!==-1&&S.endTime!==void 0).map(S=>S.startTime)),endTime:Math.max(...Object.values(w.answers).filter(S=>S.endTime!==-1&&S.endTime!==void 0).map(S=>S.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(w.answers).flatMap(S=>S.windowEvents),timedOut:!1}},`cell-${w.participantId}-total-duration`)]},w.participantId));return e.length>0?_.jsxs(_.Fragment,{children:[_.jsx(uf,{visible:l,overlayProps:{blur:2}}),_.jsxs(qt,{justify:"space-between",mb:8,p:8,children:[_.jsx(bi,{children:_.jsx(T2,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(w=>w.participantId))],searchable:!0,value:null,leftSection:_.jsx(Sct,{size:14}),onChange:w=>w&&g(w)})}),_.jsxs(bi,{children:[_.jsx(j7e,{visibleParticipants:e,studyId:i||""}),_.jsxs(gn,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),_.jsx(qt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(un,{striped:!0,withTableBorder:!0,children:[_.jsx(un.Thead,{children:_.jsx(un.Tr,{children:b})}),_.jsx(un.Tbody,{children:x})]})}),_.jsxs(qs,{opened:f,onClose:()=>d(!1),title:_.jsxs(nt,{children:["Reject Participants (",a.length,")"]}),children:[_.jsx(O0,{label:"Please enter the reason for rejection.",onChange:w=>p(w.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(gn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),_.jsx(gn,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):_.jsxs(_.Fragment,{children:[_.jsx(Zc,{h:"xl"}),_.jsx(qt,{justify:"center",align:"center",children:_.jsx(nt,{children:"No data available"})})]})}const _vn="_root_1spq0_1",wvn="_description_1spq0_9",Evn="_title_1spq0_10",Svn="_closeButton_1spq0_14",Tvn={root:_vn,description:wvn,title:Evn,closeButton:Svn},wF=e=>{const{title:t,message:n,color:r}=e;V_.show({title:t,message:n,position:"top-center",classNames:Tvn,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function Cvn({studyId:e,refresh:t}){const[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(!1),[c,f]=N.useState(""),[d,h]=N.useState([]),[p,m]=N.useState(""),[g,y]=N.useState(""),[b,x]=N.useState(!1),[w,S]=N.useState(!1),{storageEngine:T}=fo(),C=T,I=N.useCallback(async()=>{S(!0);const L=await C.getSnapshots(e);h(L),S(!1)},[C,e]);N.useEffect(()=>{I()},[I]);const D=async(L,...z)=>{x(!0);const W=await L(...z);W.status==="SUCCESS"?(I(),x(!1),await t(),W.notifications&&W.notifications.forEach(F=>{wF(F)})):(x(!1),wF({title:W.error.title,message:W.error.message,color:"red"}))},k=async()=>{await D(C.createSnapshot.bind(C),e,!1)},P=async()=>{m(""),r(!1),await D(C.createSnapshot.bind(C),e,!0)},M=async()=>{a(!1),await D(C.renameSnapshot.bind(C),c,g)},$=async L=>{await D(C.restoreSnapshot.bind(C),e,L)},B=async()=>{m(""),s(!1),await D(C.removeSnapshotOrLive.bind(C),c,!0)},q=async()=>{m(""),l(!1),await D(C.removeSnapshotOrLive.bind(C),e,!0)},H=()=>ahe({title:"Create a Snapshot",children:_.jsx(nt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),Y=L=>ahe({title:"Restore Snapshot",children:_.jsx(nt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>$(L)}),K=L=>{const z=/-snapshot-(.+)$/,W=L.match(z);return W&&W[1]?W[1].replace("T"," "):null},Q=async L=>{const z=L.slice(L.indexOf("-")+1);return await C.getAllParticipantsDataByStudy(z)};return _.jsxs(_.Fragment,{children:[_.jsx(uf,{visible:b}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(Ie,{style:{width:"70%"},children:[_.jsx(zs,{order:5,children:"Create a Snapshot"}),_.jsxs(nt,{children:["This will create a snapshot of the live"," ",_.jsx(nt,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(nt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(ss,{label:"Create a snapshot",children:_.jsx(gn,{onClick:H,children:"Snapshot"})})]}),_.jsx(Zc,{h:"lg"}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(Ie,{style:{width:"70%"},children:[_.jsx(zs,{order:5,children:"Archive Data"}),_.jsxs(nt,{children:["This will create a snapshot of the live"," ",_.jsx(nt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(ss,{label:"Snapshot and Delete Data",children:_.jsx(gn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(Zc,{h:"lg"}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(Ie,{style:{width:"70%"},children:[_.jsx(zs,{order:5,children:"Delete Data"}),_.jsxs(nt,{children:["This will delete the live"," ",_.jsx(nt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(ss,{label:"Delete Data",children:_.jsx(gn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),_.jsx(Zc,{h:"xl"}),_.jsxs(qt,{direction:"column",children:[_.jsx(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(zs,{order:5,children:"Snapshots"})}),_.jsxs(Ie,{style:{position:"relative"},children:[_.jsx(uf,{visible:w}),d.length>0?_.jsxs(un,{children:[_.jsx(un.Thead,{children:_.jsxs(un.Tr,{children:[_.jsx(un.Th,{children:"Snapshot Name"}),_.jsx(un.Th,{children:"Date Created"}),_.jsx(un.Th,{children:"Actions"})]})}),_.jsx(un.Tbody,{children:d.map(L=>_.jsxs(un.Tr,{children:[_.jsx(un.Td,{children:L.alternateName}),_.jsx(un.Td,{children:K(L.originalName)}),_.jsx(un.Td,{children:_.jsxs(qt,{children:[_.jsx(ss,{label:"Rename",children:_.jsx(gn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(L.originalName)},children:_.jsx(bct,{})})}),_.jsx(ss,{label:"Restore Snapshot",children:_.jsx(gn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{Y(L.originalName)},children:_.jsx(wct,{})})}),_.jsx(ss,{label:"Delete Snapshot",children:_.jsx(gn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(L.originalName)},children:_.jsx(TAe,{})})}),_.jsx(j7e,{visibleParticipants:()=>Q(L.originalName),studyId:e,gap:"10px",fileName:L.alternateName})]})})]},L.originalName))})]}):_.jsx(nt,{children:"No snapshots."})]})]}),_.jsxs(qs,{opened:n,onClose:()=>{r(!1),m("")},title:_.jsx(nt,{children:"Archive Data"}),children:[_.jsx(nt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(O0,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:L=>m(L.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(gn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),_.jsx(gn,{color:"red",onClick:P,disabled:p!==e,children:"Archive"})]})]}),_.jsxs(qs,{opened:i,onClose:()=>{s(!1),m("")},title:_.jsx(nt,{children:"Delete Snapshot"}),children:[_.jsxs(nt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(nt,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(O0,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:L=>m(L.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(gn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),_.jsx(gn,{color:"red",onClick:B,disabled:p!==e,children:"Delete"})]})]}),_.jsxs(qs,{opened:o,onClose:()=>{a(!1),y("")},title:_.jsx(nt,{children:"Rename Snapshot"}),children:[_.jsx(O0,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:L=>y(L.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(gn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),_.jsx(gn,{color:"green",onClick:M,disabled:!g||g.length===0,children:"Rename"})]})]}),_.jsxs(qs,{opened:u,onClose:()=>{l(!1),m("")},title:_.jsx(nt,{children:"Delete Live Data"}),children:[_.jsxs(nt,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(nt,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(nt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(O0,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:L=>m(L.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(gn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),_.jsx(gn,{color:"red",onClick:q,disabled:p!==e,children:"Delete"})]})]})]})}function Avn({studyId:e}){const{storageEngine:t}=fo(),[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(!1);N.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(aa,{children:[_.jsx(hS,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(hS,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(hS,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function Ivn({studyId:e,refresh:t}){const{storageEngine:n}=fo();return _.jsx(dg,{children:_.jsxs($l,{multiple:!0,variant:"contained",children:[_.jsxs($l.Item,{value:"ReVISit Modes",children:[_.jsx($l.Control,{children:_.jsx(zs,{order:5,children:"ReVISit Modes"})}),_.jsx($l.Panel,{children:_.jsx(Avn,{studyId:e})})]},"modes"),_.jsxs($l.Item,{value:"Data Management",children:[_.jsx($l.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(zs,{order:5,children:"Data Management"})}),_.jsx($l.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(Cvn,{studyId:e,refresh:t})})]},"dataManagement")]})})}function kvn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=rQ(!0),[o,a]=Jc(),u=N.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=N.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=N.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,y])=>y.endTime!==-1).map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return _.jsxs(p2,{p:"lg",withBorder:!0,ref:o,children:[_.jsxs(qt,{direction:"row",justify:"space-between",onClick:s,children:[_.jsxs(qt,{align:"center",children:[e.type==="metadata"&&_.jsx(uct,{size:20}),e.type==="numerical"&&_.jsx(yct,{size:20}),(e.type==="shortText"||e.type==="longText")&&_.jsx(sct,{size:20}),e.type==="likert"&&_.jsx(fct,{size:20}),e.type==="dropdown"&&_.jsx(Tct,{size:20}),e.type==="slider"&&_.jsx(ect,{size:20}),e.type==="radio"&&_.jsx(_ct,{size:20}),e.type==="checkbox"&&_.jsx(Cct,{size:20}),e.type==="iframe"&&_.jsx(hct,{size:20}),_.jsx(zs,{order:5,ml:4,children:e.id})]}),_.jsx(act,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),_.jsxs(HF,{in:i,mah:400,children:[_.jsx(Ie,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:_.jsx(_2,{})}),_.jsxs(kJ,{cols:2,h:360,children:[_.jsx(lg,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?_.jsx($xe,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):_.jsxs(qt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&_.jsx(QI,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&_.jsxs(_.Fragment,{children:[_.jsx(nt,{fw:700,children:"Response Values: "}),u.map((f,d)=>_.jsx(qt,{align:"center",gap:"xs",children:_.jsx(nt,{children:f[e.id]})},d))]})]})}),_.jsx(lg,{mih:200,children:e.type==="metadata"?_.jsx($xe,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):_.jsxs(_.Fragment,{children:[_.jsx(nt,{fw:700,children:"Response Specification: "}),_.jsx(QI,{block:!0,children:JSON.stringify(e,null,2)}),_.jsx("br",{}),l&&_.jsxs(_.Fragment,{children:[_.jsx(nt,{fw:700,children:"Correct Answer: "}),_.jsx(QI,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function Rvn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&Uje(t.components[n],t),i=N.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?_.jsx(qt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>_.jsx(kvn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):_.jsx(qt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:_.jsx(nt,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function Dvn({studyConfig:e,visibleParticipants:t}){const n=N.useMemo(()=>{let i=G0(e.sequence);return i=_Z(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=sm();return _.jsx(p2,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?_.jsx(qt,{justify:"center",align:"center",pt:"lg",pb:"md",children:_.jsx(nt,{children:"No data available."})}):_.jsxs(qt,{direction:"row",children:[_.jsx(Ie,{w:340,children:_.jsx(JL,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),_.jsx(_2,{orientation:"vertical",mx:"md"}),_.jsx(Rvn,{participantData:t,studyConfig:e,trialId:r})]})})}function Nvn({xScale:e,answer:t,height:n,labelHeight:r=0}){return _.jsx("g",{children:_.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const d4=3,gE=25,h4=25,p4=20,tEe=1;function Pvn({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=N.useState(!1),[l,{width:c}]=Jc();return _.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[_.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+tEe,width:e(t.endTime)-e(t.startTime)-tEe*2,y:r-gE,height:gE}),_.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-d4,width:c+d4*2,y:r-gE-h4-o,height:p4,fill:"whitesmoke"}),_.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-d4,x2:c+e(t.startTime)+d4,y1:r-gE-h4+p4-o,y2:r-gE-h4+p4-o}),_.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-gE-h4-o,height:p4,children:_.jsx(Ua,{style:{width:"fit-content"},children:_.jsx(nt,{lineClamp:1,ref:l,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}const nEe=25,Ovn=8,bH={left:20,top:0,right:20,bottom:0};function $vn(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`;return`${t<10?`0${t}`:`${t}`}h ${s}m ${i}s`}function Mvn({participantData:e,width:t,height:n,selectedTask:r,studyId:i}){const s=jh(),o=N.useCallback(f=>{const d=f.split("_"),h=+d[d.length-1];s(`/${i}/${Mp(h)}?participantId=${e.participantId}`)},[s,e.participantId,i]),a=N.useMemo(()=>{const f=Object.values(e.answers||{}).filter(p=>p.startTime).map(p=>[p.startTime,p.endTime]).flat(),d=bR(f);return fc([bH.left,t-bH.left-bH.right]).domain(d).clamp(!0)},[e,t]),u=N.useMemo(()=>{let f=0;const d=Object.entries(e.answers||{}).filter(h=>!!h[1].startTime).sort((h,p)=>h[1].startTime-p[1].startTime);return d.map((h,p)=>{const[m,g]=h,y=p>0?d[p-f-1]:null;return y&&y[0].length*Ovn+a(y[1].startTime)>a(g.startTime)?f+=1:f=0,{line:_.jsx(Nvn,{labelHeight:f*nEe,answer:g,height:n,xScale:a},m),label:_.jsx(Pvn,{labelHeight:f*nEe,isSelected:r===m,setSelectedTask:o,answer:g,height:n,name:m,xScale:a},m)}})},[n,e.answers,r,o,a]),l=N.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const f=Object.values(e.answers).filter(d=>d.startTime).sort((d,h)=>d.startTime-h.startTime);return new Date(f[f.length-1].endTime-(f[0]?f[0].startTime:0)).getTime()},[e]),c=N.useMemo(()=>Object.entries(e.answers||{}).sort((d,h)=>d[1].startTime-h[1].startTime).map(d=>{const[h,p]=d,m=[];let g=[-1,-1],y="visible";if(p.windowEvents)for(let b=0;b<p.windowEvents.length;b+=1)p.windowEvents[b][1]==="visibility"&&(p.windowEvents[b][2]==="hidden"&&y==="visible"?(g=[p.windowEvents[b][0],-1],y="hidden"):p.windowEvents[b][2]==="visible"&&y==="hidden"&&(g[1]=p.windowEvents[b][0],m.push(g),g=[-1,-1],y="visible"));return m.map((b,x)=>_.jsx(ss,{withinPortal:!0,label:"Browsed away",children:_.jsx("rect",{x:a(b[0]),width:a(b[1])-a(b[0]),y:n-5,height:10})},x))}),[n,e,a]);return _.jsx(Ua,{children:_.jsxs(aa,{gap:25,style:{width:"100%"},children:[_.jsx(_2,{size:"md"}),_.jsxs(bi,{justify:"center",children:[_.jsx(kv,{href:"",onClick:()=>s(`/${i}/${Mp(0)}?participantId=${e.participantId}`),children:e.participantId}),e.completed?null:_.jsx(nt,{size:"xl",c:"red",children:"Not completed"}),_.jsx(nt,{size:"xl",children:`${$vn(l)}`})]}),e.completed?_.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[u.map(f=>f.line),u.map(f=>f.label),c]}):null]})})}function Lvn({visibleParticipants:e}){const{studyId:t}=sm(),[n,{width:r}]=Jc();return _.jsx(aa,{ref:n,style:{width:"100%"},children:e.map(i=>_.jsx(Mvn,{studyId:t||"",height:200,participantData:i,width:r},i.participantId))})}function Fvn({globalConfig:e}){const{studyId:t}=sm(),[n,r]=N.useState([]),[i,s]=N.useState(void 0),[o,a]=N.useState(!1),{storageEngine:u}=fo(),l=jh(),{tab:c}=sm(),{user:f}=DP();N.useEffect(()=>{if(!t)return()=>{};if(t==="revisit-widget"){const x=async w=>{if(w.data.type==="revisitWidget/CONFIG"&&u){const S=await Bae(w.data.payload);s(S)}};return window.addEventListener("message",x),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",x)}}return jae(t,e).then(x=>{x&&s(x)}),()=>{}},[t,e,u]);const d=N.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const x=await u.getAllParticipantsData();r(x),a(!1)}},[u,t,i]);N.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=N.useState([]),[m,g,y]=N.useMemo(()=>{const x=n.filter(T=>!T.rejected&&T.completed),w=n.filter(T=>!T.rejected&&!T.completed),S=n.filter(T=>T.rejected);return p([...x,...w,...S]),[x,w,S]},[n]),b=N.useCallback(x=>{const w=[];x.includes("completed")&&w.push(...m),x.includes("inprogress")&&w.push(...g),x.includes("rejected")&&w.push(...y),p(w)},[m,g,y]);return _.jsxs(_.Fragment,{children:[_.jsx(C6,{studyIds:e.configsList}),_.jsx(Oi.Main,{children:_.jsxs(dg,{fluid:!0,style:{height:"100%",position:"relative"},children:[_.jsx(uf,{visible:o}),_.jsxs(qt,{direction:"row",align:"center",justify:"space-between",children:[_.jsx(zs,{order:5,children:t}),_.jsxs(qt,{direction:"row",align:"center",children:[_.jsx(nt,{mt:-2,size:"sm",children:"Participants: "}),_.jsx(Gl.Group,{defaultValue:["completed","inprogress","rejected"],onChange:b,mb:"xs",mt:8,ml:"xs",children:_.jsxs(bi,{children:[_.jsx(Gl,{value:"completed",label:"Completed"}),_.jsx(Gl,{value:"inprogress",label:"In Progress"}),_.jsx(Gl,{value:"rejected",label:"Rejected"})]})})]})]}),_.jsx(Zc,{h:"xs"}),_.jsxs(Gr,{variant:"outline",value:c,onChange:x=>l(`/analysis/stats/${t}/${x}`),style:{height:"100%"},children:[_.jsxs(Gr.List,{children:[_.jsx(Gr.Tab,{value:"table",leftSection:_.jsx(Act,{size:16}),children:"Table View"}),_.jsx(Gr.Tab,{value:"stats",leftSection:_.jsx(oct,{size:16}),children:"Trial Stats"}),_.jsx(Gr.Tab,{value:"replay",leftSection:_.jsx(xct,{size:16}),children:"Participant Replay"}),_.jsx(Gr.Tab,{value:"manage",leftSection:_.jsx(EAe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),_.jsx(Gr.Panel,{value:"table",pt:"xs",children:i&&_.jsx(xvn,{visibleParticipants:h,studyConfig:i,refresh:d})}),_.jsx(Gr.Panel,{value:"stats",pt:"xs",children:i&&_.jsx(Dvn,{studyConfig:i,visibleParticipants:h})}),_.jsx(Gr.Panel,{value:"replay",pt:"xs",children:_.jsx(Lvn,{visibleParticipants:h})}),_.jsx(Gr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?_.jsx(Ivn,{studyId:t,refresh:d}):_.jsx(dg,{mt:20,children:_.jsx(W0,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(WJ,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function rEe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=DP(),{storageEngine:o}=fo(),[a,u]=N.useState(!1),l=sm();return N.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(uf,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(HJ,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function PVe(e,t){if(e instanceof rh){t(!0);const n=new k0,r=hF();try{await gpn(r,n,kUe)}catch(i){wF({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function Bvn(){const{user:e}=DP(),[t,n]=N.useState(!1),{storageEngine:r}=fo();return N.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&wF({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(HJ,{to:"/"}):_.jsx(dg,{children:_.jsx(x2,{padding:"lg",children:_.jsxs(qt,{align:"center",direction:"column",justify:"center",children:[_.jsx(Dv,{maw:200,mt:50,mb:100,src:`${ul}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(nt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(gn,{onClick:()=>PVe(r,n),leftSection:_.jsx(Ict,{}),variant:"filled",children:"Sign In With Google"})]}),_.jsx(uf,{visible:t})]})})})}function jvn(){const{user:e,triggerAuth:t}=DP(),{storageEngine:n}=fo(),[r,i]=N.useState(!1),[s,o]=N.useState([]),[a,u]=N.useState(!1),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(!1),[y,b]=N.useState(""),[x,w]=N.useState(null),S=Nke({initialValues:{email:""},validate:{email:Mvt("Invalid email")}});N.useEffect(()=>{(async()=>{if(u(!0),n instanceof rh){const $=await(n==null?void 0:n.getUserManagementData("authentication"));i(($==null?void 0:$.isEnabled)||!1);const B=await(n==null?void 0:n.getUserManagementData("adminUsers"));B&&B.adminUsersList&&o(B==null?void 0:B.adminUsersList.map(q=>q.email))}else i(!1);u(!1)})()},[n]);const T=async()=>{if(u(!0),n instanceof rh){const M=await PVe(n,u);M&&M.email?(w({email:M.email,uid:M.uid}),p(!0)):g(!0)}u(!1)},C=async M=>{u(!0),n instanceof rh&&M&&(await n.changeAuth(!0),await n.addAdminUser(M),o([M.email]),i(!0),t()),p(!1),u(!1)},I=async()=>{if(u(!0),n instanceof rh){await n.addAdminUser({email:S.values.email,uid:null});const M=await n.getUserManagementData("adminUsers");o((M==null?void 0:M.adminUsersList.map($=>$.email))||[])}u(!1),c(!1),S.setValues({email:""})},D=M=>{d(!0),b(M)},k=async()=>{if(u(!0),n instanceof rh){await n.removeAdminUser(y);const M=await n.getUserManagementData("adminUsers");o((M==null?void 0:M.adminUsersList.map($=>$.email))||[])}d(!1),u(!1)},P=N.useMemo(()=>n instanceof rh,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(dg,{children:_.jsxs(x2,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(zs,{mb:20,order:3,children:"Authentication"}),r?_.jsx(qt,{children:_.jsx(nt,{children:"Authentication is enabled."})}):_.jsxs(qt,{justify:"space-between",children:[_.jsx(Ie,{children:_.jsx(nt,{children:"Authentication is currently disabled."})}),_.jsx(ss,{label:"You can only enable auth when using Firebase",disabled:P,children:_.jsx(gn,{onClick:M=>P?T():M.preventDefault(),color:"green","data-disabled":P?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(qt,{mt:40,direction:"column",children:[_.jsxs(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(zs,{order:6,children:"Enabled Users"}),_.jsx(GJ,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(M=>{var $;return _.jsxs(qt,{justify:"space-between",mb:10,children:[_.jsx(nt,{children:M}),M===(($=e.user)==null?void 0:$.email)?_.jsx(nt,{color:"blue",size:"xs",children:"You"}):_.jsx(j_,{variant:"subtle",onClick:()=>D(M),children:_.jsx(TAe,{color:"red"})})]},M)}):null]}):null]})}),_.jsx(qs,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(Ie,{component:"form",onSubmit:S.onSubmit(()=>I()),children:[_.jsx(O0,{leftSection:_.jsx(rct,{}),placeholder:"User Gmail Account",...S.getInputProps("email")}),_.jsxs(qt,{mt:30,justify:"right",children:[_.jsx(gn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(gn,{type:"submit",children:"Save"})]})]})}),_.jsxs(qs,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(nt,{fw:700,children:["Remove",y,"?"]}),children:[_.jsxs(nt,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:y})," ","as an administrator?"]}),_.jsxs(qt,{mt:40,justify:"right",children:[_.jsx(gn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(gn,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),_.jsxs(qs,{opened:h,size:"md",onClose:()=>p(!1),title:_.jsx(nt,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(nt,{mt:40,children:["User"," ",_.jsx("b",{children:x==null?void 0:x.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(qt,{mt:40,justify:"right",children:[_.jsx(gn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(gn,{onClick:()=>C(x),children:"Yes, I'm sure."})]})]}),_.jsxs(qs,{opened:m,size:"md",onClose:()=>g(!1),title:_.jsx(nt,{fw:700,children:"An Error Occurred."}),children:[_.jsxs(nt,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",_.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),_.jsx(qt,{mt:40,justify:"right",children:_.jsx(gn,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),_.jsx(uf,{visible:a})]})}class Uvn extends DVe{constructor(){super("localStorage");ju(this,"studyDatabase");ju(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await RE.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await _F(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve("not yet implemented")}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await _F(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await RE.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=xF();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=RE.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=xF();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await RE.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await RE.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function zvn(){let e,t=!1;{const n=new rh;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new Uvn;await n.connect(),e=n}return e}function YA({title:e}){const t=Nv();return N.useEffect(()=>{document.title=e},[t,e]),null}async function Vvn(){const t=await(await fetch(`${ul}global.json`)).text();return _fn(t)}function Hvn(){const[e,t]=N.useState(null),[n,r]=N.useState({});N.useEffect(()=>{async function a(){e&&r(await Sfn(e))}a()},[e]),N.useEffect(()=>{e||Vvn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=fo();N.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await zvn();s(u)}a()},[s,i]);const o=async a=>i instanceof rh?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(Wlt,{basename:ul,children:_.jsx(yvn,{children:_.jsx(Jlt,{children:_.jsxs(zlt,{children:[_.jsx(Mb,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(YA,{title:"ReVISit | Home"}),_.jsxs(Oi,{padding:"md",header:{height:70},children:[_.jsx(C6,{studyIds:e.configsList}),_.jsx(myt,{globalConfig:e,studyConfigs:n})]})]})}),_.jsx(Mb,{path:"/:studyId/*",element:_.jsxs(_.Fragment,{children:[_.jsx(YA,{title:"ReVISit | Study"}),_.jsx(Tfn,{globalConfig:e})]})}),_.jsx(Mb,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:_.jsxs(_.Fragment,{children:[_.jsx(YA,{title:"ReVISit | Analysis"}),_.jsx(rEe,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(Oi,{padding:"md",header:{height:70},children:_.jsx(Fvn,{globalConfig:e})})})]})}),_.jsx(Mb,{path:"/analysis/stats/:studyId",element:_.jsx(Pje,{to:"./table",replace:!0})}),_.jsx(Mb,{path:"/settings",element:_.jsxs(rEe,{children:[_.jsx(YA,{title:"ReVISit | Settings"}),_.jsxs(Oi,{padding:"md",header:{height:70},children:[_.jsx(C6,{studyIds:e.configsList}),_.jsx(Oi.Main,{children:_.jsx(jvn,{})})]})]})}),_.jsx(Mb,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(YA,{title:"ReVISit | Login"}),_.jsx(C6,{studyIds:e.configsList}),_.jsx(Oi,{padding:"md",header:{height:70},children:_.jsx(Oi.Main,{children:_.jsx(Bvn,{})})})]})})]})})})}):null}xH.createRoot(document.getElementById("root")).render(_.jsx(ti.StrictMode,{children:_.jsx(Jut,{children:_.jsxs(BTe,{children:[_.jsx(Ug,{}),_.jsx(Hvn,{})]})})}))});export default qvn();
