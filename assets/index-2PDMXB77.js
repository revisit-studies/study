var iUe=Object.defineProperty;var sUe=(e,t,n)=>t in e?iUe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var oUe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Rl=(e,t,n)=>sUe(e,typeof t!="symbol"?t+"":t,n);var Lan=oUe((qun,Foe)=>{function aUe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var la=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function uUe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var jU={exports:{}},Uk={},UU={exports:{}},Cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _ue;function lUe(){if(_ue)return Cr;_ue=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),f=Symbol.iterator;function d(U){return U===null||typeof U!="object"?null:(U=f&&U[f]||U["@@iterator"],typeof U=="function"?U:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function g(U,G,V){this.props=U,this.context=G,this.refs=m,this.updater=V||h}g.prototype.isReactComponent={},g.prototype.setState=function(U,G){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,G,"setState")},g.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function v(){}v.prototype=g.prototype;function b(U,G,V){this.props=U,this.context=G,this.refs=m,this.updater=V||h}var w=b.prototype=new v;w.constructor=b,p(w,g.prototype),w.isPureReactComponent=!0;var E=Array.isArray,T=Object.prototype.hasOwnProperty,C={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function R(U,G,V){var Y,ee={},ae=null,_e=null;if(G!=null)for(Y in G.ref!==void 0&&(_e=G.ref),G.key!==void 0&&(ae=""+G.key),G)T.call(G,Y)&&!I.hasOwnProperty(Y)&&(ee[Y]=G[Y]);var pe=arguments.length-2;if(pe===1)ee.children=V;else if(1<pe){for(var Te=Array(pe),Le=0;Le<pe;Le++)Te[Le]=arguments[Le+2];ee.children=Te}if(U&&U.defaultProps)for(Y in pe=U.defaultProps,pe)ee[Y]===void 0&&(ee[Y]=pe[Y]);return{$$typeof:e,type:U,key:ae,ref:_e,props:ee,_owner:C.current}}function N(U,G){return{$$typeof:e,type:U.type,key:G,ref:U.ref,props:U.props,_owner:U._owner}}function O(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function L(U){var G={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(V){return G[V]})}var B=/\/+/g;function F(U,G){return typeof U=="object"&&U!==null&&U.key!=null?L(""+U.key):G.toString(36)}function H(U,G,V,Y,ee){var ae=typeof U;(ae==="undefined"||ae==="boolean")&&(U=null);var _e=!1;if(U===null)_e=!0;else switch(ae){case"string":case"number":_e=!0;break;case"object":switch(U.$$typeof){case e:case t:_e=!0}}if(_e)return _e=U,ee=ee(_e),U=Y===""?"."+F(_e,0):Y,E(ee)?(V="",U!=null&&(V=U.replace(B,"$&/")+"/"),H(ee,G,V,"",function(Le){return Le})):ee!=null&&(O(ee)&&(ee=N(ee,V+(!ee.key||_e&&_e.key===ee.key?"":(""+ee.key).replace(B,"$&/")+"/")+U)),G.push(ee)),1;if(_e=0,Y=Y===""?".":Y+":",E(U))for(var pe=0;pe<U.length;pe++){ae=U[pe];var Te=Y+F(ae,pe);_e+=H(ae,G,V,Te,ee)}else if(Te=d(U),typeof Te=="function")for(U=Te.call(U),pe=0;!(ae=U.next()).done;)ae=ae.value,Te=Y+F(ae,pe++),_e+=H(ae,G,V,Te,ee);else if(ae==="object")throw G=String(U),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return _e}function Q(U,G,V){if(U==null)return U;var Y=[],ee=0;return H(U,Y,"","",function(ae){return G.call(V,ae,ee++)}),Y}function J(U){if(U._status===-1){var G=U._result;G=G(),G.then(function(V){(U._status===0||U._status===-1)&&(U._status=1,U._result=V)},function(V){(U._status===0||U._status===-1)&&(U._status=2,U._result=V)}),U._status===-1&&(U._status=0,U._result=G)}if(U._status===1)return U._result.default;throw U._result}var ne={current:null},Z={transition:null},ie={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:Z,ReactCurrentOwner:C};function q(){throw Error("act(...) is not supported in production builds of React.")}return Cr.Children={map:Q,forEach:function(U,G,V){Q(U,function(){G.apply(this,arguments)},V)},count:function(U){var G=0;return Q(U,function(){G++}),G},toArray:function(U){return Q(U,function(G){return G})||[]},only:function(U){if(!O(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Cr.Component=g,Cr.Fragment=n,Cr.Profiler=i,Cr.PureComponent=b,Cr.StrictMode=r,Cr.Suspense=u,Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,Cr.act=q,Cr.cloneElement=function(U,G,V){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Y=p({},U.props),ee=U.key,ae=U.ref,_e=U._owner;if(G!=null){if(G.ref!==void 0&&(ae=G.ref,_e=C.current),G.key!==void 0&&(ee=""+G.key),U.type&&U.type.defaultProps)var pe=U.type.defaultProps;for(Te in G)T.call(G,Te)&&!I.hasOwnProperty(Te)&&(Y[Te]=G[Te]===void 0&&pe!==void 0?pe[Te]:G[Te])}var Te=arguments.length-2;if(Te===1)Y.children=V;else if(1<Te){pe=Array(Te);for(var Le=0;Le<Te;Le++)pe[Le]=arguments[Le+2];Y.children=pe}return{$$typeof:e,type:U.type,key:ee,ref:ae,props:Y,_owner:_e}},Cr.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:s,_context:U},U.Consumer=U},Cr.createElement=R,Cr.createFactory=function(U){var G=R.bind(null,U);return G.type=U,G},Cr.createRef=function(){return{current:null}},Cr.forwardRef=function(U){return{$$typeof:a,render:U}},Cr.isValidElement=O,Cr.lazy=function(U){return{$$typeof:c,_payload:{_status:-1,_result:U},_init:J}},Cr.memo=function(U,G){return{$$typeof:l,type:U,compare:G===void 0?null:G}},Cr.startTransition=function(U){var G=Z.transition;Z.transition={};try{U()}finally{Z.transition=G}},Cr.unstable_act=q,Cr.useCallback=function(U,G){return ne.current.useCallback(U,G)},Cr.useContext=function(U){return ne.current.useContext(U)},Cr.useDebugValue=function(){},Cr.useDeferredValue=function(U){return ne.current.useDeferredValue(U)},Cr.useEffect=function(U,G){return ne.current.useEffect(U,G)},Cr.useId=function(){return ne.current.useId()},Cr.useImperativeHandle=function(U,G,V){return ne.current.useImperativeHandle(U,G,V)},Cr.useInsertionEffect=function(U,G){return ne.current.useInsertionEffect(U,G)},Cr.useLayoutEffect=function(U,G){return ne.current.useLayoutEffect(U,G)},Cr.useMemo=function(U,G){return ne.current.useMemo(U,G)},Cr.useReducer=function(U,G,V){return ne.current.useReducer(U,G,V)},Cr.useRef=function(U){return ne.current.useRef(U)},Cr.useState=function(U){return ne.current.useState(U)},Cr.useSyncExternalStore=function(U,G,V){return ne.current.useSyncExternalStore(U,G,V)},Cr.useTransition=function(){return ne.current.useTransition()},Cr.version="18.3.1",Cr}var wue;function q8(){return wue||(wue=1,UU.exports=lUe()),UU.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eue;function cUe(){if(Eue)return Uk;Eue=1;var e=q8(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,u,l){var c,f={},d=null,h=null;l!==void 0&&(d=""+l),u.key!==void 0&&(d=""+u.key),u.ref!==void 0&&(h=u.ref);for(c in u)r.call(u,c)&&!s.hasOwnProperty(c)&&(f[c]=u[c]);if(a&&a.defaultProps)for(c in u=a.defaultProps,u)f[c]===void 0&&(f[c]=u[c]);return{$$typeof:t,type:a,key:d,ref:h,props:f,_owner:i.current}}return Uk.Fragment=n,Uk.jsx=o,Uk.jsxs=o,Uk}var Tue;function fUe(){return Tue||(Tue=1,jU.exports=cUe()),jU.exports}var S=fUe(),P=q8();const ci=yh(P),dUe=aUe({__proto__:null,default:ci},[P]);var D4={},zU={exports:{}},kc={},VU={exports:{}},HU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sue;function hUe(){return Sue||(Sue=1,function(e){function t(Z,ie){var q=Z.length;Z.push(ie);e:for(;0<q;){var U=q-1>>>1,G=Z[U];if(0<i(G,ie))Z[U]=ie,Z[q]=G,q=U;else break e}}function n(Z){return Z.length===0?null:Z[0]}function r(Z){if(Z.length===0)return null;var ie=Z[0],q=Z.pop();if(q!==ie){Z[0]=q;e:for(var U=0,G=Z.length,V=G>>>1;U<V;){var Y=2*(U+1)-1,ee=Z[Y],ae=Y+1,_e=Z[ae];if(0>i(ee,q))ae<G&&0>i(_e,ee)?(Z[U]=_e,Z[ae]=q,U=ae):(Z[U]=ee,Z[Y]=q,U=Y);else if(ae<G&&0>i(_e,q))Z[U]=_e,Z[ae]=q,U=ae;else break e}}return ie}function i(Z,ie){var q=Z.sortIndex-ie.sortIndex;return q!==0?q:Z.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Z){for(var ie=n(l);ie!==null;){if(ie.callback===null)r(l);else if(ie.startTime<=Z)r(l),ie.sortIndex=ie.expirationTime,t(u,ie);else break;ie=n(l)}}function E(Z){if(m=!1,w(Z),!p)if(n(u)!==null)p=!0,J(T);else{var ie=n(l);ie!==null&&ne(E,ie.startTime-Z)}}function T(Z,ie){p=!1,m&&(m=!1,v(R),R=-1),h=!0;var q=d;try{for(w(ie),f=n(u);f!==null&&(!(f.expirationTime>ie)||Z&&!L());){var U=f.callback;if(typeof U=="function"){f.callback=null,d=f.priorityLevel;var G=U(f.expirationTime<=ie);ie=e.unstable_now(),typeof G=="function"?f.callback=G:f===n(u)&&r(u),w(ie)}else r(u);f=n(u)}if(f!==null)var V=!0;else{var Y=n(l);Y!==null&&ne(E,Y.startTime-ie),V=!1}return V}finally{f=null,d=q,h=!1}}var C=!1,I=null,R=-1,N=5,O=-1;function L(){return!(e.unstable_now()-O<N)}function B(){if(I!==null){var Z=e.unstable_now();O=Z;var ie=!0;try{ie=I(!0,Z)}finally{ie?F():(C=!1,I=null)}}else C=!1}var F;if(typeof b=="function")F=function(){b(B)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,Q=H.port2;H.port1.onmessage=B,F=function(){Q.postMessage(null)}}else F=function(){g(B,0)};function J(Z){I=Z,C||(C=!0,F())}function ne(Z,ie){R=g(function(){Z(e.unstable_now())},ie)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,J(T))},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Z?Math.floor(1e3/Z):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(Z){switch(d){case 1:case 2:case 3:var ie=3;break;default:ie=d}var q=d;d=ie;try{return Z()}finally{d=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Z,ie){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var q=d;d=Z;try{return ie()}finally{d=q}},e.unstable_scheduleCallback=function(Z,ie,q){var U=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?U+q:U):q=U,Z){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=q+G,Z={id:c++,callback:ie,priorityLevel:Z,startTime:q,expirationTime:G,sortIndex:-1},q>U?(Z.sortIndex=q,t(l,Z),n(u)===null&&Z===n(l)&&(m?(v(R),R=-1):m=!0,ne(E,q-U))):(Z.sortIndex=G,t(u,Z),p||h||(p=!0,J(T))),Z},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(Z){var ie=d;return function(){var q=d;d=ie;try{return Z.apply(this,arguments)}finally{d=q}}}}(HU)),HU}var Cue;function pUe(){return Cue||(Cue=1,VU.exports=hUe()),VU.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aue;function mUe(){if(Aue)return kc;Aue=1;var e=q8(),t=pUe();function n(y){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+y,k=1;k<arguments.length;k++)x+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+y+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function s(y,x){o(y,x),o(y+"Capture",x)}function o(y,x){for(i[y]=x,y=0;y<x.length;y++)r.add(x[y])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,c={},f={};function d(y){return u.call(f,y)?!0:u.call(c,y)?!1:l.test(y)?f[y]=!0:(c[y]=!0,!1)}function h(y,x,k,M){if(k!==null&&k.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return M?!1:k!==null?!k.acceptsBooleans:(y=y.toLowerCase().slice(0,5),y!=="data-"&&y!=="aria-");default:return!1}}function p(y,x,k,M){if(x===null||typeof x>"u"||h(y,x,k,M))return!0;if(M)return!1;if(k!==null)switch(k.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function m(y,x,k,M,z,K,se){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=M,this.attributeNamespace=z,this.mustUseProperty=k,this.propertyName=y,this.type=x,this.sanitizeURL=K,this.removeEmptyString=se}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(y){g[y]=new m(y,0,!1,y,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(y){var x=y[0];g[x]=new m(x,1,!1,y[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(y){g[y]=new m(y,2,!1,y.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(y){g[y]=new m(y,2,!1,y,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(y){g[y]=new m(y,3,!1,y.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(y){g[y]=new m(y,3,!0,y,null,!1,!1)}),["capture","download"].forEach(function(y){g[y]=new m(y,4,!1,y,null,!1,!1)}),["cols","rows","size","span"].forEach(function(y){g[y]=new m(y,6,!1,y,null,!1,!1)}),["rowSpan","start"].forEach(function(y){g[y]=new m(y,5,!1,y.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function b(y){return y[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(y){var x=y.replace(v,b);g[x]=new m(x,1,!1,y,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(y){var x=y.replace(v,b);g[x]=new m(x,1,!1,y,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(y){var x=y.replace(v,b);g[x]=new m(x,1,!1,y,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(y){g[y]=new m(y,1,!1,y.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(y){g[y]=new m(y,1,!1,y.toLowerCase(),null,!0,!0)});function w(y,x,k,M){var z=g.hasOwnProperty(x)?g[x]:null;(z!==null?z.type!==0:M||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(p(x,k,z,M)&&(k=null),M||z===null?d(x)&&(k===null?y.removeAttribute(x):y.setAttribute(x,""+k)):z.mustUseProperty?y[z.propertyName]=k===null?z.type===3?!1:"":k:(x=z.attributeName,M=z.attributeNamespace,k===null?y.removeAttribute(x):(z=z.type,k=z===3||z===4&&k===!0?"":""+k,M?y.setAttributeNS(M,x,k):y.setAttribute(x,k))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),C=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),L=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),H=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),Z=Symbol.iterator;function ie(y){return y===null||typeof y!="object"?null:(y=Z&&y[Z]||y["@@iterator"],typeof y=="function"?y:null)}var q=Object.assign,U;function G(y){if(U===void 0)try{throw Error()}catch(k){var x=k.stack.trim().match(/\n( *(at )?)/);U=x&&x[1]||""}return`
`+U+y}var V=!1;function Y(y,x){if(!y||V)return"";V=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Xe){var M=Xe}Reflect.construct(y,[],x)}else{try{x.call()}catch(Xe){M=Xe}y.call(x.prototype)}else{try{throw Error()}catch(Xe){M=Xe}y()}}catch(Xe){if(Xe&&M&&typeof Xe.stack=="string"){for(var z=Xe.stack.split(`
`),K=M.stack.split(`
`),se=z.length-1,be=K.length-1;1<=se&&0<=be&&z[se]!==K[be];)be--;for(;1<=se&&0<=be;se--,be--)if(z[se]!==K[be]){if(se!==1||be!==1)do if(se--,be--,0>be||z[se]!==K[be]){var Ce=`
`+z[se].replace(" at new "," at ");return y.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",y.displayName)),Ce}while(1<=se&&0<=be);break}}}finally{V=!1,Error.prepareStackTrace=k}return(y=y?y.displayName||y.name:"")?G(y):""}function ee(y){switch(y.tag){case 5:return G(y.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return y=Y(y.type,!1),y;case 11:return y=Y(y.type.render,!1),y;case 1:return y=Y(y.type,!0),y;default:return""}}function ae(y){if(y==null)return null;if(typeof y=="function")return y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case I:return"Fragment";case C:return"Portal";case N:return"Profiler";case R:return"StrictMode";case F:return"Suspense";case H:return"SuspenseList"}if(typeof y=="object")switch(y.$$typeof){case L:return(y.displayName||"Context")+".Consumer";case O:return(y._context.displayName||"Context")+".Provider";case B:var x=y.render;return y=y.displayName,y||(y=x.displayName||x.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case Q:return x=y.displayName||null,x!==null?x:ae(y.type)||"Memo";case J:x=y._payload,y=y._init;try{return ae(y(x))}catch{}}return null}function _e(y){var x=y.type;switch(y.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return y=x.render,y=y.displayName||y.name||"",x.displayName||(y!==""?"ForwardRef("+y+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ae(x);case 8:return x===R?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function pe(y){switch(typeof y){case"boolean":case"number":case"string":case"undefined":return y;case"object":return y;default:return""}}function Te(y){var x=y.type;return(y=y.nodeName)&&y.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Le(y){var x=Te(y)?"checked":"value",k=Object.getOwnPropertyDescriptor(y.constructor.prototype,x),M=""+y[x];if(!y.hasOwnProperty(x)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var z=k.get,K=k.set;return Object.defineProperty(y,x,{configurable:!0,get:function(){return z.call(this)},set:function(se){M=""+se,K.call(this,se)}}),Object.defineProperty(y,x,{enumerable:k.enumerable}),{getValue:function(){return M},setValue:function(se){M=""+se},stopTracking:function(){y._valueTracker=null,delete y[x]}}}}function ye(y){y._valueTracker||(y._valueTracker=Le(y))}function he(y){if(!y)return!1;var x=y._valueTracker;if(!x)return!0;var k=x.getValue(),M="";return y&&(M=Te(y)?y.checked?"true":"false":y.value),y=M,y!==k?(x.setValue(y),!0):!1}function $e(y){if(y=y||(typeof document<"u"?document:void 0),typeof y>"u")return null;try{return y.activeElement||y.body}catch{return y.body}}function De(y,x){var k=x.checked;return q({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??y._wrapperState.initialChecked})}function tt(y,x){var k=x.defaultValue==null?"":x.defaultValue,M=x.checked!=null?x.checked:x.defaultChecked;k=pe(x.value!=null?x.value:k),y._wrapperState={initialChecked:M,initialValue:k,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function it(y,x){x=x.checked,x!=null&&w(y,"checked",x,!1)}function Me(y,x){it(y,x);var k=pe(x.value),M=x.type;if(k!=null)M==="number"?(k===0&&y.value===""||y.value!=k)&&(y.value=""+k):y.value!==""+k&&(y.value=""+k);else if(M==="submit"||M==="reset"){y.removeAttribute("value");return}x.hasOwnProperty("value")?at(y,x.type,k):x.hasOwnProperty("defaultValue")&&at(y,x.type,pe(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(y.defaultChecked=!!x.defaultChecked)}function Ge(y,x,k){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var M=x.type;if(!(M!=="submit"&&M!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+y._wrapperState.initialValue,k||x===y.value||(y.value=x),y.defaultValue=x}k=y.name,k!==""&&(y.name=""),y.defaultChecked=!!y._wrapperState.initialChecked,k!==""&&(y.name=k)}function at(y,x,k){(x!=="number"||$e(y.ownerDocument)!==y)&&(k==null?y.defaultValue=""+y._wrapperState.initialValue:y.defaultValue!==""+k&&(y.defaultValue=""+k))}var yt=Array.isArray;function Tt(y,x,k,M){if(y=y.options,x){x={};for(var z=0;z<k.length;z++)x["$"+k[z]]=!0;for(k=0;k<y.length;k++)z=x.hasOwnProperty("$"+y[k].value),y[k].selected!==z&&(y[k].selected=z),z&&M&&(y[k].defaultSelected=!0)}else{for(k=""+pe(k),x=null,z=0;z<y.length;z++){if(y[z].value===k){y[z].selected=!0,M&&(y[z].defaultSelected=!0);return}x!==null||y[z].disabled||(x=y[z])}x!==null&&(x.selected=!0)}}function Ot(y,x){if(x.dangerouslySetInnerHTML!=null)throw Error(n(91));return q({},x,{value:void 0,defaultValue:void 0,children:""+y._wrapperState.initialValue})}function qe(y,x){var k=x.value;if(k==null){if(k=x.children,x=x.defaultValue,k!=null){if(x!=null)throw Error(n(92));if(yt(k)){if(1<k.length)throw Error(n(93));k=k[0]}x=k}x==null&&(x=""),k=x}y._wrapperState={initialValue:pe(k)}}function dt(y,x){var k=pe(x.value),M=pe(x.defaultValue);k!=null&&(k=""+k,k!==y.value&&(y.value=k),x.defaultValue==null&&y.defaultValue!==k&&(y.defaultValue=k)),M!=null&&(y.defaultValue=""+M)}function wt(y){var x=y.textContent;x===y._wrapperState.initialValue&&x!==""&&x!==null&&(y.value=x)}function ke(y){switch(y){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oe(y,x){return y==null||y==="http://www.w3.org/1999/xhtml"?ke(x):y==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":y}var ht,Lt=function(y){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,k,M,z){MSApp.execUnsafeLocalFunction(function(){return y(x,k,M,z)})}:y}(function(y,x){if(y.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in y)y.innerHTML=x;else{for(ht=ht||document.createElement("div"),ht.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=ht.firstChild;y.firstChild;)y.removeChild(y.firstChild);for(;x.firstChild;)y.appendChild(x.firstChild)}});function Ft(y,x){if(x){var k=y.firstChild;if(k&&k===y.lastChild&&k.nodeType===3){k.nodeValue=x;return}}y.textContent=x}var dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nn=["Webkit","ms","Moz","O"];Object.keys(dn).forEach(function(y){Nn.forEach(function(x){x=x+y.charAt(0).toUpperCase()+y.substring(1),dn[x]=dn[y]})});function Tr(y,x,k){return x==null||typeof x=="boolean"||x===""?"":k||typeof x!="number"||x===0||dn.hasOwnProperty(y)&&dn[y]?(""+x).trim():x+"px"}function Ni(y,x){y=y.style;for(var k in x)if(x.hasOwnProperty(k)){var M=k.indexOf("--")===0,z=Tr(k,x[k],M);k==="float"&&(k="cssFloat"),M?y.setProperty(k,z):y[k]=z}}var Un=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tr(y,x){if(x){if(Un[y]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(n(137,y));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(n(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(n(61))}if(x.style!=null&&typeof x.style!="object")throw Error(n(62))}}function Ai(y,x){if(y.indexOf("-")===-1)return typeof x.is=="string";switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sr=null;function Lo(y){return y=y.target||y.srcElement||window,y.correspondingUseElement&&(y=y.correspondingUseElement),y.nodeType===3?y.parentNode:y}var Ji=null,Pi=null,Zi=null;function Qr(y){if(y=Ta(y)){if(typeof Ji!="function")throw Error(n(280));var x=y.stateNode;x&&(x=kT(x),Ji(y.stateNode,y.type,x))}}function $o(y){Pi?Zi?Zi.push(y):Zi=[y]:Pi=y}function oc(){if(Pi){var y=Pi,x=Zi;if(Zi=Pi=null,Qr(y),x)for(y=0;y<x.length;y++)Qr(x[y])}}function xa(y,x){return y(x)}function Du(){}var Jr=!1;function ji(y,x,k){if(Jr)return y(x,k);Jr=!0;try{return xa(y,x,k)}finally{Jr=!1,(Pi!==null||Zi!==null)&&(Du(),oc())}}function oi(y,x){var k=y.stateNode;if(k===null)return null;var M=kT(k);if(M===null)return null;k=M[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(y=y.type,M=!(y==="button"||y==="input"||y==="select"||y==="textarea")),y=!M;break e;default:y=!1}if(y)return null;if(k&&typeof k!="function")throw Error(n(231,x,typeof k));return k}var Ws=!1;if(a)try{var Fr={};Object.defineProperty(Fr,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",Fr,Fr),window.removeEventListener("test",Fr,Fr)}catch{Ws=!1}function es(y,x,k,M,z,K,se,be,Ce){var Xe=Array.prototype.slice.call(arguments,3);try{x.apply(k,Xe)}catch(St){this.onError(St)}}var Fo=!1,ho=null,Qo=!1,_l=null,Nh={onError:function(y){Fo=!0,ho=y}};function Pr(y,x,k,M,z,K,se,be,Ce){Fo=!1,ho=null,es.apply(Nh,arguments)}function ac(y,x,k,M,z,K,se,be,Ce){if(Pr.apply(this,arguments),Fo){if(Fo){var Xe=ho;Fo=!1,ho=null}else throw Error(n(198));Qo||(Qo=!0,_l=Xe)}}function ms(y){var x=y,k=y;if(y.alternate)for(;x.return;)x=x.return;else{y=x;do x=y,x.flags&4098&&(k=x.return),y=x.return;while(y)}return x.tag===3?k:null}function Xa(y){if(y.tag===13){var x=y.memoizedState;if(x===null&&(y=y.alternate,y!==null&&(x=y.memoizedState)),x!==null)return x.dehydrated}return null}function Jo(y){if(ms(y)!==y)throw Error(n(188))}function hm(y){var x=y.alternate;if(!x){if(x=ms(y),x===null)throw Error(n(188));return x!==y?null:y}for(var k=y,M=x;;){var z=k.return;if(z===null)break;var K=z.alternate;if(K===null){if(M=z.return,M!==null){k=M;continue}break}if(z.child===K.child){for(K=z.child;K;){if(K===k)return Jo(z),y;if(K===M)return Jo(z),x;K=K.sibling}throw Error(n(188))}if(k.return!==M.return)k=z,M=K;else{for(var se=!1,be=z.child;be;){if(be===k){se=!0,k=z,M=K;break}if(be===M){se=!0,M=z,k=K;break}be=be.sibling}if(!se){for(be=K.child;be;){if(be===k){se=!0,k=K,M=z;break}if(be===M){se=!0,M=K,k=z;break}be=be.sibling}if(!se)throw Error(n(189))}}if(k.alternate!==M)throw Error(n(190))}if(k.tag!==3)throw Error(n(188));return k.stateNode.current===k?y:x}function Ph(y){return y=hm(y),y!==null?_d(y):null}function _d(y){if(y.tag===5||y.tag===6)return y;for(y=y.child;y!==null;){var x=_d(y);if(x!==null)return x;y=y.sibling}return null}var wd=t.unstable_scheduleCallback,gf=t.unstable_cancelCallback,yf=t.unstable_shouldYield,vf=t.unstable_requestPaint,fr=t.unstable_now,Oh=t.unstable_getCurrentPriorityLevel,po=t.unstable_ImmediatePriority,wl=t.unstable_UserBlockingPriority,Gs=t.unstable_NormalPriority,uc=t.unstable_LowPriority,Mh=t.unstable_IdlePriority,lc=null,mo=null;function pm(y){if(mo&&typeof mo.onCommitFiberRoot=="function")try{mo.onCommitFiberRoot(lc,y,void 0,(y.current.flags&128)===128)}catch{}}var go=Math.clz32?Math.clz32:ge,ue=Math.log,Se=Math.LN2;function ge(y){return y>>>=0,y===0?32:31-(ue(y)/Se|0)|0}var Ne=64,Be=4194304;function Re(y){switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return y&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return y&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return y}}function rt(y,x){var k=y.pendingLanes;if(k===0)return 0;var M=0,z=y.suspendedLanes,K=y.pingedLanes,se=k&268435455;if(se!==0){var be=se&~z;be!==0?M=Re(be):(K&=se,K!==0&&(M=Re(K)))}else se=k&~z,se!==0?M=Re(se):K!==0&&(M=Re(K));if(M===0)return 0;if(x!==0&&x!==M&&!(x&z)&&(z=M&-M,K=x&-x,z>=K||z===16&&(K&4194240)!==0))return x;if(M&4&&(M|=k&16),x=y.entangledLanes,x!==0)for(y=y.entanglements,x&=M;0<x;)k=31-go(x),z=1<<k,M|=y[k],x&=~z;return M}function bt(y,x){switch(y){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Et(y,x){for(var k=y.suspendedLanes,M=y.pingedLanes,z=y.expirationTimes,K=y.pendingLanes;0<K;){var se=31-go(K),be=1<<se,Ce=z[se];Ce===-1?(!(be&k)||be&M)&&(z[se]=bt(be,x)):Ce<=x&&(y.expiredLanes|=be),K&=~be}}function xt(y){return y=y.pendingLanes&-1073741825,y!==0?y:y&1073741824?1073741824:0}function Dt(){var y=Ne;return Ne<<=1,!(Ne&4194240)&&(Ne=64),y}function qt(y){for(var x=[],k=0;31>k;k++)x.push(y);return x}function In(y,x,k){y.pendingLanes|=x,x!==536870912&&(y.suspendedLanes=0,y.pingedLanes=0),y=y.eventTimes,x=31-go(x),y[x]=k}function un(y,x){var k=y.pendingLanes&~x;y.pendingLanes=x,y.suspendedLanes=0,y.pingedLanes=0,y.expiredLanes&=x,y.mutableReadLanes&=x,y.entangledLanes&=x,x=y.entanglements;var M=y.eventTimes;for(y=y.expirationTimes;0<k;){var z=31-go(k),K=1<<z;x[z]=0,M[z]=-1,y[z]=-1,k&=~K}}function nr(y,x){var k=y.entangledLanes|=x;for(y=y.entanglements;k;){var M=31-go(k),z=1<<M;z&x|y[M]&x&&(y[M]|=x),k&=~z}}var ln=0;function br(y){return y&=-y,1<y?4<y?y&268435455?16:536870912:4:1}var Ys,Qa,cc,Lh,bf,$h=!1,Bo=[],gs=null,jo=null,Ja=null,xf=new Map,Za=new Map,Nu=[],U1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fc(y,x){switch(y){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":jo=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":xf.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Za.delete(x.pointerId)}}function Ts(y,x,k,M,z,K){return y===null||y.nativeEvent!==K?(y={blockedOn:x,domEventName:k,eventSystemFlags:M,nativeEvent:K,targetContainers:[z]},x!==null&&(x=Ta(x),x!==null&&Qa(x)),y):(y.eventSystemFlags|=M,x=y.targetContainers,z!==null&&x.indexOf(z)===-1&&x.push(z),y)}function Vx(y,x,k,M,z){switch(x){case"focusin":return gs=Ts(gs,y,x,k,M,z),!0;case"dragenter":return jo=Ts(jo,y,x,k,M,z),!0;case"mouseover":return Ja=Ts(Ja,y,x,k,M,z),!0;case"pointerover":var K=z.pointerId;return xf.set(K,Ts(xf.get(K)||null,y,x,k,M,z)),!0;case"gotpointercapture":return K=z.pointerId,Za.set(K,Ts(Za.get(K)||null,y,x,k,M,z)),!0}return!1}function wg(y){var x=Id(y.target);if(x!==null){var k=ms(x);if(k!==null){if(x=k.tag,x===13){if(x=Xa(k),x!==null){y.blockedOn=x,bf(y.priority,function(){cc(k)});return}}else if(x===3&&k.stateNode.current.memoizedState.isDehydrated){y.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}y.blockedOn=null}function _f(y){if(y.blockedOn!==null)return!1;for(var x=y.targetContainers;0<x.length;){var k=kr(y.domEventName,y.eventSystemFlags,x[0],y.nativeEvent);if(k===null){k=y.nativeEvent;var M=new k.constructor(k.type,k);Sr=M,k.target.dispatchEvent(M),Sr=null}else return x=Ta(k),x!==null&&Qa(x),y.blockedOn=k,!1;x.shift()}return!0}function Ed(y,x,k){_f(y)&&k.delete(x)}function z1(){$h=!1,gs!==null&&_f(gs)&&(gs=null),jo!==null&&_f(jo)&&(jo=null),Ja!==null&&_f(Ja)&&(Ja=null),xf.forEach(Ed),Za.forEach(Ed)}function xr(y,x){y.blockedOn===x&&(y.blockedOn=null,$h||($h=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,z1)))}function dr(y){function x(z){return xr(z,y)}if(0<Bo.length){xr(Bo[0],y);for(var k=1;k<Bo.length;k++){var M=Bo[k];M.blockedOn===y&&(M.blockedOn=null)}}for(gs!==null&&xr(gs,y),jo!==null&&xr(jo,y),Ja!==null&&xr(Ja,y),xf.forEach(x),Za.forEach(x),k=0;k<Nu.length;k++)M=Nu[k],M.blockedOn===y&&(M.blockedOn=null);for(;0<Nu.length&&(k=Nu[0],k.blockedOn===null);)wg(k),k.blockedOn===null&&Nu.shift()}var wf=E.ReactCurrentBatchConfig,ve=!0;function Ae(y,x,k,M){var z=ln,K=wf.transition;wf.transition=null;try{ln=1,tn(y,x,k,M)}finally{ln=z,wf.transition=K}}function Qe(y,x,k,M){var z=ln,K=wf.transition;wf.transition=null;try{ln=4,tn(y,x,k,M)}finally{ln=z,wf.transition=K}}function tn(y,x,k,M){if(ve){var z=kr(y,x,k,M);if(z===null)HI(y,x,M,rr,k),fc(y,M);else if(Vx(z,y,x,k,M))M.stopPropagation();else if(fc(y,M),x&4&&-1<U1.indexOf(y)){for(;z!==null;){var K=Ta(z);if(K!==null&&Ys(K),K=kr(y,x,k,M),K===null&&HI(y,x,M,rr,k),K===z)break;z=K}z!==null&&M.stopPropagation()}else HI(y,x,M,null,k)}}var rr=null;function kr(y,x,k,M){if(rr=null,y=Lo(M),y=Id(y),y!==null)if(x=ms(y),x===null)y=null;else if(k=x.tag,k===13){if(y=Xa(x),y!==null)return y;y=null}else if(k===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;y=null}else x!==y&&(y=null);return rr=y,null}function fi(y){switch(y){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Oh()){case po:return 1;case wl:return 4;case Gs:case uc:return 16;case Mh:return 536870912;default:return 16}default:return 16}}var cn=null,Br=null,Zr=null;function Ks(){if(Zr)return Zr;var y,x=Br,k=x.length,M,z="value"in cn?cn.value:cn.textContent,K=z.length;for(y=0;y<k&&x[y]===z[y];y++);var se=k-y;for(M=1;M<=se&&x[k-M]===z[K-M];M++);return Zr=z.slice(y,1<M?1-M:void 0)}function Pu(y){var x=y.keyCode;return"charCode"in y?(y=y.charCode,y===0&&x===13&&(y=13)):y=x,y===10&&(y=13),32<=y||y===13?y:0}function ts(){return!0}function Td(){return!1}function Fs(y){function x(k,M,z,K,se){this._reactName=k,this._targetInst=z,this.type=M,this.nativeEvent=K,this.target=se,this.currentTarget=null;for(var be in y)y.hasOwnProperty(be)&&(k=y[be],this[be]=k?k(K):K[be]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?ts:Td,this.isPropagationStopped=Td,this}return q(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),x}var dc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(y){return y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eg=Fs(dc),Ef=q({},dc,{view:0,detail:0}),hT=Fs(Ef),Uo,Fh,yo,Tg=q({},Ef,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sd,button:0,buttons:0,relatedTarget:function(y){return y.relatedTarget===void 0?y.fromElement===y.srcElement?y.toElement:y.fromElement:y.relatedTarget},movementX:function(y){return"movementX"in y?y.movementX:(y!==yo&&(yo&&y.type==="mousemove"?(Uo=y.screenX-yo.screenX,Fh=y.screenY-yo.screenY):Fh=Uo=0,yo=y),Uo)},movementY:function(y){return"movementY"in y?y.movementY:Fh}}),Sg=Fs(Tg),hc=q({},Tg,{dataTransfer:0}),Cg=Fs(hc),mm=q({},Ef,{relatedTarget:0}),Ei=Fs(mm),Tf=q({},dc,{animationName:0,elapsedTime:0,pseudoElement:0}),Sf=Fs(Tf),pT=q({},dc,{clipboardData:function(y){return"clipboardData"in y?y.clipboardData:window.clipboardData}}),V1=Fs(pT),mT=q({},dc,{data:0}),Hx=Fs(mT),H1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ag={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bh(y){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(y):(y=Ag[y])?!!x[y]:!1}function Sd(){return Bh}var D=q({},Ef,{key:function(y){if(y.key){var x=H1[y.key]||y.key;if(x!=="Unidentified")return x}return y.type==="keypress"?(y=Pu(y),y===13?"Enter":String.fromCharCode(y)):y.type==="keydown"||y.type==="keyup"?_a[y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sd,charCode:function(y){return y.type==="keypress"?Pu(y):0},keyCode:function(y){return y.type==="keydown"||y.type==="keyup"?y.keyCode:0},which:function(y){return y.type==="keypress"?Pu(y):y.type==="keydown"||y.type==="keyup"?y.keyCode:0}}),W=Fs(D),te=q({},Tg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ce=Fs(te),ze=q({},Ef,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sd}),Ze=Fs(ze),Ut=q({},dc,{propertyName:0,elapsedTime:0,pseudoElement:0}),ai=Fs(Ut),vo=q({},Tg,{deltaX:function(y){return"deltaX"in y?y.deltaX:"wheelDeltaX"in y?-y.wheelDeltaX:0},deltaY:function(y){return"deltaY"in y?y.deltaY:"wheelDeltaY"in y?-y.wheelDeltaY:"wheelDelta"in y?-y.wheelDelta:0},deltaZ:0,deltaMode:0}),Rr=Fs(vo),di=[9,13,27,32],Ss=a&&"CompositionEvent"in window,wa=null;a&&"documentMode"in document&&(wa=document.documentMode);var Ou=a&&"TextEvent"in window&&!wa,gm=a&&(!Ss||wa&&8<wa&&11>=wa),q1=" ",kO=!1;function RO(y,x){switch(y){case"keyup":return di.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function DO(y){return y=y.detail,typeof y=="object"&&"data"in y?y.data:null}var W1=!1;function G1(y,x){switch(y){case"compositionend":return DO(x);case"keypress":return x.which!==32?null:(kO=!0,q1);case"textInput":return y=x.data,y===q1&&kO?null:y;default:return null}}function nU(y,x){if(W1)return y==="compositionend"||!Ss&&RO(y,x)?(y=Ks(),Zr=Br=cn=null,W1=!1,y):null;switch(y){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return gm&&x.locale!=="ko"?null:x.data;default:return null}}var rU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gT(y){var x=y&&y.nodeName&&y.nodeName.toLowerCase();return x==="input"?!!rU[y.type]:x==="textarea"}function jI(y,x,k,M){$o(M),x=ST(x,"onChange"),0<x.length&&(k=new Eg("onChange","change",null,k,M),y.push({event:k,listeners:x}))}var pc=null,ym=null;function iU(y){FO(y,0)}function yT(y){var x=ir(y);if(he(x))return y}function sU(y,x){if(y==="change")return x}var Ig=!1;if(a){var El;if(a){var vT="oninput"in document;if(!vT){var NO=document.createElement("div");NO.setAttribute("oninput","return;"),vT=typeof NO.oninput=="function"}El=vT}else El=!1;Ig=El&&(!document.documentMode||9<document.documentMode)}function PO(){pc&&(pc.detachEvent("onpropertychange",OO),ym=pc=null)}function OO(y){if(y.propertyName==="value"&&yT(ym)){var x=[];jI(x,ym,y,Lo(y)),ji(iU,x)}}function oU(y,x,k){y==="focusin"?(PO(),pc=x,ym=k,pc.attachEvent("onpropertychange",OO)):y==="focusout"&&PO()}function aU(y){if(y==="selectionchange"||y==="keyup"||y==="keydown")return yT(ym)}function Y1(y,x){if(y==="click")return yT(x)}function Fe(y,x){if(y==="input"||y==="change")return yT(x)}function st(y,x){return y===x&&(y!==0||1/y===1/x)||y!==y&&x!==x}var Ye=typeof Object.is=="function"?Object.is:st;function Kt(y,x){if(Ye(y,x))return!0;if(typeof y!="object"||y===null||typeof x!="object"||x===null)return!1;var k=Object.keys(y),M=Object.keys(x);if(k.length!==M.length)return!1;for(M=0;M<k.length;M++){var z=k[M];if(!u.call(x,z)||!Ye(y[z],x[z]))return!1}return!0}function zn(y){for(;y&&y.firstChild;)y=y.firstChild;return y}function ei(y,x){var k=zn(y);y=0;for(var M;k;){if(k.nodeType===3){if(M=y+k.textContent.length,y<=x&&M>=x)return{node:k,offset:x-y};y=M}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=zn(k)}}function Xs(y,x){return y&&x?y===x?!0:y&&y.nodeType===3?!1:x&&x.nodeType===3?Xs(y,x.parentNode):"contains"in y?y.contains(x):y.compareDocumentPosition?!!(y.compareDocumentPosition(x)&16):!1:!1}function Ii(){for(var y=window,x=$e();x instanceof y.HTMLIFrameElement;){try{var k=typeof x.contentWindow.location.href=="string"}catch{k=!1}if(k)y=x.contentWindow;else break;x=$e(y.document)}return x}function qx(y){var x=y&&y.nodeName&&y.nodeName.toLowerCase();return x&&(x==="input"&&(y.type==="text"||y.type==="search"||y.type==="tel"||y.type==="url"||y.type==="password")||x==="textarea"||y.contentEditable==="true")}function uU(y){var x=Ii(),k=y.focusedElem,M=y.selectionRange;if(x!==k&&k&&k.ownerDocument&&Xs(k.ownerDocument.documentElement,k)){if(M!==null&&qx(k)){if(x=M.start,y=M.end,y===void 0&&(y=x),"selectionStart"in k)k.selectionStart=x,k.selectionEnd=Math.min(y,k.value.length);else if(y=(x=k.ownerDocument||document)&&x.defaultView||window,y.getSelection){y=y.getSelection();var z=k.textContent.length,K=Math.min(M.start,z);M=M.end===void 0?K:Math.min(M.end,z),!y.extend&&K>M&&(z=M,M=K,K=z),z=ei(k,K);var se=ei(k,M);z&&se&&(y.rangeCount!==1||y.anchorNode!==z.node||y.anchorOffset!==z.offset||y.focusNode!==se.node||y.focusOffset!==se.offset)&&(x=x.createRange(),x.setStart(z.node,z.offset),y.removeAllRanges(),K>M?(y.addRange(x),y.extend(se.node,se.offset)):(x.setEnd(se.node,se.offset),y.addRange(x)))}}for(x=[],y=k;y=y.parentNode;)y.nodeType===1&&x.push({element:y,left:y.scrollLeft,top:y.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<x.length;k++)y=x[k],y.element.scrollLeft=y.left,y.element.scrollTop=y.top}}var mc=a&&"documentMode"in document&&11>=document.documentMode,jh=null,UI=null,Cd=null,K1=!1;function Wx(y,x,k){var M=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;K1||jh==null||jh!==$e(M)||(M=jh,"selectionStart"in M&&qx(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Cd&&Kt(Cd,M)||(Cd=M,M=ST(UI,"onSelect"),0<M.length&&(x=new Eg("onSelect","select",null,x,k),y.push({event:x,listeners:M}),x.target=jh)))}function ti(y,x){var k={};return k[y.toLowerCase()]=x.toLowerCase(),k["Webkit"+y]="webkit"+x,k["Moz"+y]="moz"+x,k}var X1={animationend:ti("Animation","AnimationEnd"),animationiteration:ti("Animation","AnimationIteration"),animationstart:ti("Animation","AnimationStart"),transitionend:ti("Transition","TransitionEnd")},bT={},Gx={};a&&(Gx=document.createElement("div").style,"AnimationEvent"in window||(delete X1.animationend.animation,delete X1.animationiteration.animation,delete X1.animationstart.animation),"TransitionEvent"in window||delete X1.transitionend.transition);function xT(y){if(bT[y])return bT[y];if(!X1[y])return y;var x=X1[y],k;for(k in x)if(x.hasOwnProperty(k)&&k in Gx)return bT[y]=x[k];return y}var MO=xT("animationend"),LO=xT("animationiteration"),Yx=xT("animationstart"),Uh=xT("transitionend"),Kx=new Map,zI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cf(y,x){Kx.set(y,x),s(x,[y])}for(var _T=0;_T<zI.length;_T++){var wT=zI[_T],ET=wT.toLowerCase(),$O=wT[0].toUpperCase()+wT.slice(1);Cf(ET,"on"+$O)}Cf(MO,"onAnimationEnd"),Cf(LO,"onAnimationIteration"),Cf(Yx,"onAnimationStart"),Cf("dblclick","onDoubleClick"),Cf("focusin","onFocus"),Cf("focusout","onBlur"),Cf(Uh,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kg=new Set("cancel close invalid load scroll toggle".split(" ").concat(zh));function Xx(y,x,k){var M=y.type||"unknown-event";y.currentTarget=k,ac(M,x,void 0,y),y.currentTarget=null}function FO(y,x){x=(x&4)!==0;for(var k=0;k<y.length;k++){var M=y[k],z=M.event;M=M.listeners;e:{var K=void 0;if(x)for(var se=M.length-1;0<=se;se--){var be=M[se],Ce=be.instance,Xe=be.currentTarget;if(be=be.listener,Ce!==K&&z.isPropagationStopped())break e;Xx(z,be,Xe),K=Ce}else for(se=0;se<M.length;se++){if(be=M[se],Ce=be.instance,Xe=be.currentTarget,be=be.listener,Ce!==K&&z.isPropagationStopped())break e;Xx(z,be,Xe),K=Ce}}}if(Qo)throw y=_l,Qo=!1,_l=null,y}function ns(y,x){var k=x[IT];k===void 0&&(k=x[IT]=new Set);var M=y+"__bubble";k.has(M)||(TT(x,y,2,!1),k.add(M))}function VI(y,x,k){var M=0;x&&(M|=4),TT(k,y,M,x)}var Rg="_reactListening"+Math.random().toString(36).slice(2);function vm(y){if(!y[Rg]){y[Rg]=!0,r.forEach(function(k){k!=="selectionchange"&&(kg.has(k)||VI(k,!1,y),VI(k,!0,y))});var x=y.nodeType===9?y:y.ownerDocument;x===null||x[Rg]||(x[Rg]=!0,VI("selectionchange",!1,x))}}function TT(y,x,k,M){switch(fi(x)){case 1:var z=Ae;break;case 4:z=Qe;break;default:z=tn}k=z.bind(null,x,k,y),z=void 0,!Ws||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(z=!0),M?z!==void 0?y.addEventListener(x,k,{capture:!0,passive:z}):y.addEventListener(x,k,!0):z!==void 0?y.addEventListener(x,k,{passive:z}):y.addEventListener(x,k,!1)}function HI(y,x,k,M,z){var K=M;if(!(x&1)&&!(x&2)&&M!==null)e:for(;;){if(M===null)return;var se=M.tag;if(se===3||se===4){var be=M.stateNode.containerInfo;if(be===z||be.nodeType===8&&be.parentNode===z)break;if(se===4)for(se=M.return;se!==null;){var Ce=se.tag;if((Ce===3||Ce===4)&&(Ce=se.stateNode.containerInfo,Ce===z||Ce.nodeType===8&&Ce.parentNode===z))return;se=se.return}for(;be!==null;){if(se=Id(be),se===null)return;if(Ce=se.tag,Ce===5||Ce===6){M=K=se;continue e}be=be.parentNode}}M=M.return}ji(function(){var Xe=K,St=Lo(k),kt=[];e:{var _t=Kx.get(y);if(_t!==void 0){var Xt=Eg,rn=y;switch(y){case"keypress":if(Pu(k)===0)break e;case"keydown":case"keyup":Xt=W;break;case"focusin":rn="focus",Xt=Ei;break;case"focusout":rn="blur",Xt=Ei;break;case"beforeblur":case"afterblur":Xt=Ei;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Xt=Sg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Xt=Cg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Xt=Ze;break;case MO:case LO:case Yx:Xt=Sf;break;case Uh:Xt=ai;break;case"scroll":Xt=hT;break;case"wheel":Xt=Rr;break;case"copy":case"cut":case"paste":Xt=V1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Xt=ce}var sn=(x&4)!==0,As=!sn&&y==="scroll",Ve=sn?_t!==null?_t+"Capture":null:_t;sn=[];for(var Pe=Xe,We;Pe!==null;){We=Pe;var Mt=We.stateNode;if(We.tag===5&&Mt!==null&&(We=Mt,Ve!==null&&(Mt=oi(Pe,Ve),Mt!=null&&sn.push(Q1(Pe,Mt,We)))),As)break;Pe=Pe.return}0<sn.length&&(_t=new Xt(_t,rn,null,k,St),kt.push({event:_t,listeners:sn}))}}if(!(x&7)){e:{if(_t=y==="mouseover"||y==="pointerover",Xt=y==="mouseout"||y==="pointerout",_t&&k!==Sr&&(rn=k.relatedTarget||k.fromElement)&&(Id(rn)||rn[Tl]))break e;if((Xt||_t)&&(_t=St.window===St?St:(_t=St.ownerDocument)?_t.defaultView||_t.parentWindow:window,Xt?(rn=k.relatedTarget||k.toElement,Xt=Xe,rn=rn?Id(rn):null,rn!==null&&(As=ms(rn),rn!==As||rn.tag!==5&&rn.tag!==6)&&(rn=null)):(Xt=null,rn=Xe),Xt!==rn)){if(sn=Sg,Mt="onMouseLeave",Ve="onMouseEnter",Pe="mouse",(y==="pointerout"||y==="pointerover")&&(sn=ce,Mt="onPointerLeave",Ve="onPointerEnter",Pe="pointer"),As=Xt==null?_t:ir(Xt),We=rn==null?_t:ir(rn),_t=new sn(Mt,Pe+"leave",Xt,k,St),_t.target=As,_t.relatedTarget=We,Mt=null,Id(St)===Xe&&(sn=new sn(Ve,Pe+"enter",rn,k,St),sn.target=We,sn.relatedTarget=As,Mt=sn),As=Mt,Xt&&rn)t:{for(sn=Xt,Ve=rn,Pe=0,We=sn;We;We=J1(We))Pe++;for(We=0,Mt=Ve;Mt;Mt=J1(Mt))We++;for(;0<Pe-We;)sn=J1(sn),Pe--;for(;0<We-Pe;)Ve=J1(Ve),We--;for(;Pe--;){if(sn===Ve||Ve!==null&&sn===Ve.alternate)break t;sn=J1(sn),Ve=J1(Ve)}sn=null}else sn=null;Xt!==null&&Qs(kt,_t,Xt,sn,!1),rn!==null&&As!==null&&Qs(kt,As,rn,sn,!0)}}e:{if(_t=Xe?ir(Xe):window,Xt=_t.nodeName&&_t.nodeName.toLowerCase(),Xt==="select"||Xt==="input"&&_t.type==="file")var on=sU;else if(gT(_t))if(Ig)on=Fe;else{on=aU;var _n=oU}else(Xt=_t.nodeName)&&Xt.toLowerCase()==="input"&&(_t.type==="checkbox"||_t.type==="radio")&&(on=Y1);if(on&&(on=on(y,Xe))){jI(kt,on,k,St);break e}_n&&_n(y,_t,Xe),y==="focusout"&&(_n=_t._wrapperState)&&_n.controlled&&_t.type==="number"&&at(_t,"number",_t.value)}switch(_n=Xe?ir(Xe):window,y){case"focusin":(gT(_n)||_n.contentEditable==="true")&&(jh=_n,UI=Xe,Cd=null);break;case"focusout":Cd=UI=jh=null;break;case"mousedown":K1=!0;break;case"contextmenu":case"mouseup":case"dragend":K1=!1,Wx(kt,k,St);break;case"selectionchange":if(mc)break;case"keydown":case"keyup":Wx(kt,k,St)}var wn;if(Ss)e:{switch(y){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else W1?RO(y,k)&&(kn="onCompositionEnd"):y==="keydown"&&k.keyCode===229&&(kn="onCompositionStart");kn&&(gm&&k.locale!=="ko"&&(W1||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&W1&&(wn=Ks()):(cn=St,Br="value"in cn?cn.value:cn.textContent,W1=!0)),_n=ST(Xe,kn),0<_n.length&&(kn=new Hx(kn,y,null,k,St),kt.push({event:kn,listeners:_n}),wn?kn.data=wn:(wn=DO(k),wn!==null&&(kn.data=wn)))),(wn=Ou?G1(y,k):nU(y,k))&&(Xe=ST(Xe,"onBeforeInput"),0<Xe.length&&(St=new Hx("onBeforeInput","beforeinput",null,k,St),kt.push({event:St,listeners:Xe}),St.data=wn))}FO(kt,x)})}function Q1(y,x,k){return{instance:y,listener:x,currentTarget:k}}function ST(y,x){for(var k=x+"Capture",M=[];y!==null;){var z=y,K=z.stateNode;z.tag===5&&K!==null&&(z=K,K=oi(y,k),K!=null&&M.unshift(Q1(y,K,z)),K=oi(y,x),K!=null&&M.push(Q1(y,K,z))),y=y.return}return M}function J1(y){if(y===null)return null;do y=y.return;while(y&&y.tag!==5);return y||null}function Qs(y,x,k,M,z){for(var K=x._reactName,se=[];k!==null&&k!==M;){var be=k,Ce=be.alternate,Xe=be.stateNode;if(Ce!==null&&Ce===M)break;be.tag===5&&Xe!==null&&(be=Xe,z?(Ce=oi(k,K),Ce!=null&&se.unshift(Q1(k,Ce,be))):z||(Ce=oi(k,K),Ce!=null&&se.push(Q1(k,Ce,be)))),k=k.return}se.length!==0&&y.push({event:x,listeners:se})}var Ea=/\r\n?/g,lU=/\u0000|\uFFFD/g;function BO(y){return(typeof y=="string"?y:""+y).replace(Ea,`
`).replace(lU,"")}function Qx(y,x,k){if(x=BO(x),BO(y)!==x&&k)throw Error(n(425))}function CT(){}var Jx=null,Dg=null;function Zx(y,x){return y==="textarea"||y==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var bm=typeof setTimeout=="function"?setTimeout:void 0,e_=typeof clearTimeout=="function"?clearTimeout:void 0,Z1=typeof Promise=="function"?Promise:void 0,AT=typeof queueMicrotask=="function"?queueMicrotask:typeof Z1<"u"?function(y){return Z1.resolve(null).then(y).catch(ev)}:bm;function ev(y){setTimeout(function(){throw y})}function qI(y,x){var k=x,M=0;do{var z=k.nextSibling;if(y.removeChild(k),z&&z.nodeType===8)if(k=z.data,k==="/$"){if(M===0){y.removeChild(z),dr(x);return}M--}else k!=="$"&&k!=="$?"&&k!=="$!"||M++;k=z}while(k);dr(x)}function xm(y){for(;y!=null;y=y.nextSibling){var x=y.nodeType;if(x===1||x===3)break;if(x===8){if(x=y.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return y}function jO(y){y=y.previousSibling;for(var x=0;y;){if(y.nodeType===8){var k=y.data;if(k==="$"||k==="$!"||k==="$?"){if(x===0)return y;x--}else k==="/$"&&x++}y=y.previousSibling}return null}var tv=Math.random().toString(36).slice(2),Ad="__reactFiber$"+tv,_m="__reactProps$"+tv,Tl="__reactContainer$"+tv,IT="__reactEvents$"+tv,oe="__reactListeners$"+tv,nv="__reactHandles$"+tv;function Id(y){var x=y[Ad];if(x)return x;for(var k=y.parentNode;k;){if(x=k[Tl]||k[Ad]){if(k=x.alternate,x.child!==null||k!==null&&k.child!==null)for(y=jO(y);y!==null;){if(k=y[Ad])return k;y=jO(y)}return x}y=k,k=y.parentNode}return null}function Ta(y){return y=y[Ad]||y[Tl],!y||y.tag!==5&&y.tag!==6&&y.tag!==13&&y.tag!==3?null:y}function ir(y){if(y.tag===5||y.tag===6)return y.stateNode;throw Error(n(33))}function kT(y){return y[_m]||null}var WI=[],rv=-1;function Mu(y){return{current:y}}function rs(y){0>rv||(y.current=WI[rv],WI[rv]=null,rv--)}function Ui(y,x){rv++,WI[rv]=y.current,y.current=x}var wm={},Sa=Mu(wm),Lu=Mu(!1),eu=wm;function iv(y,x){var k=y.type.contextTypes;if(!k)return wm;var M=y.stateNode;if(M&&M.__reactInternalMemoizedUnmaskedChildContext===x)return M.__reactInternalMemoizedMaskedChildContext;var z={},K;for(K in k)z[K]=x[K];return M&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=x,y.__reactInternalMemoizedMaskedChildContext=z),z}function $u(y){return y=y.childContextTypes,y!=null}function RT(){rs(Lu),rs(Sa)}function UO(y,x,k){if(Sa.current!==wm)throw Error(n(168));Ui(Sa,x),Ui(Lu,k)}function zO(y,x,k){var M=y.stateNode;if(x=x.childContextTypes,typeof M.getChildContext!="function")return k;M=M.getChildContext();for(var z in M)if(!(z in x))throw Error(n(108,_e(y)||"Unknown",z));return q({},k,M)}function gc(y){return y=(y=y.stateNode)&&y.__reactInternalMemoizedMergedChildContext||wm,eu=Sa.current,Ui(Sa,y),Ui(Lu,Lu.current),!0}function VO(y,x,k){var M=y.stateNode;if(!M)throw Error(n(169));k?(y=zO(y,x,eu),M.__reactInternalMemoizedMergedChildContext=y,rs(Lu),rs(Sa),Ui(Sa,y)):rs(Lu),Ui(Lu,k)}var Vh=null,DT=!1,GI=!1;function HO(y){Vh===null?Vh=[y]:Vh.push(y)}function Ng(y){DT=!0,HO(y)}function Em(){if(!GI&&Vh!==null){GI=!0;var y=0,x=ln;try{var k=Vh;for(ln=1;y<k.length;y++){var M=k[y];do M=M(!0);while(M!==null)}Vh=null,DT=!1}catch(z){throw Vh!==null&&(Vh=Vh.slice(y+1)),wd(po,Em),z}finally{ln=x,GI=!1}}return null}var sv=[],Ca=0,NT=null,PT=0,yc=[],vc=0,Pg=null,kd=1,Rd="";function Og(y,x){sv[Ca++]=PT,sv[Ca++]=NT,NT=y,PT=x}function qO(y,x,k){yc[vc++]=kd,yc[vc++]=Rd,yc[vc++]=Pg,Pg=y;var M=kd;y=Rd;var z=32-go(M)-1;M&=~(1<<z),k+=1;var K=32-go(x)+z;if(30<K){var se=z-z%5;K=(M&(1<<se)-1).toString(32),M>>=se,z-=se,kd=1<<32-go(x)+z|k<<z|M,Rd=K+y}else kd=1<<K|k<<z|M,Rd=y}function t_(y){y.return!==null&&(Og(y,1),qO(y,1,0))}function Mg(y){for(;y===NT;)NT=sv[--Ca],sv[Ca]=null,PT=sv[--Ca],sv[Ca]=null;for(;y===Pg;)Pg=yc[--vc],yc[vc]=null,Rd=yc[--vc],yc[vc]=null,kd=yc[--vc],yc[vc]=null}var Aa=null,Sl=null,is=!1,Af=null;function Dd(y,x){var k=Sc(5,null,null,0);k.elementType="DELETED",k.stateNode=x,k.return=y,x=y.deletions,x===null?(y.deletions=[k],y.flags|=16):x.push(k)}function OT(y,x){switch(y.tag){case 5:var k=y.type;return x=x.nodeType!==1||k.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(y.stateNode=x,Aa=y,Sl=xm(x.firstChild),!0):!1;case 6:return x=y.pendingProps===""||x.nodeType!==3?null:x,x!==null?(y.stateNode=x,Aa=y,Sl=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(k=Pg!==null?{id:kd,overflow:Rd}:null,y.memoizedState={dehydrated:x,treeContext:k,retryLane:1073741824},k=Sc(18,null,null,0),k.stateNode=x,k.return=y,y.child=k,Aa=y,Sl=null,!0):!1;default:return!1}}function Hh(y){return(y.mode&1)!==0&&(y.flags&128)===0}function Fu(y){if(is){var x=Sl;if(x){var k=x;if(!OT(y,x)){if(Hh(y))throw Error(n(418));x=xm(k.nextSibling);var M=Aa;x&&OT(y,x)?Dd(M,k):(y.flags=y.flags&-4097|2,is=!1,Aa=y)}}else{if(Hh(y))throw Error(n(418));y.flags=y.flags&-4097|2,is=!1,Aa=y}}}function WO(y){for(y=y.return;y!==null&&y.tag!==5&&y.tag!==3&&y.tag!==13;)y=y.return;Aa=y}function n_(y){if(y!==Aa)return!1;if(!is)return WO(y),is=!0,!1;var x;if((x=y.tag!==3)&&!(x=y.tag!==5)&&(x=y.type,x=x!=="head"&&x!=="body"&&!Zx(y.type,y.memoizedProps)),x&&(x=Sl)){if(Hh(y))throw YI(),Error(n(418));for(;x;)Dd(y,x),x=xm(x.nextSibling)}if(WO(y),y.tag===13){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));e:{for(y=y.nextSibling,x=0;y;){if(y.nodeType===8){var k=y.data;if(k==="/$"){if(x===0){Sl=xm(y.nextSibling);break e}x--}else k!=="$"&&k!=="$!"&&k!=="$?"||x++}y=y.nextSibling}Sl=null}}else Sl=Aa?xm(y.stateNode.nextSibling):null;return!0}function YI(){for(var y=Sl;y;)y=xm(y.nextSibling)}function Nd(){Sl=Aa=null,is=!1}function Pd(y){Af===null?Af=[y]:Af.push(y)}var GO=E.ReactCurrentBatchConfig;function r_(y,x,k){if(y=k.ref,y!==null&&typeof y!="function"&&typeof y!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(n(309));var M=k.stateNode}if(!M)throw Error(n(147,y));var z=M,K=""+y;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===K?x.ref:(x=function(se){var be=z.refs;se===null?delete be[K]:be[K]=se},x._stringRef=K,x)}if(typeof y!="string")throw Error(n(284));if(!k._owner)throw Error(n(290,y))}return y}function Lg(y,x){throw y=Object.prototype.toString.call(x),Error(n(31,y==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":y))}function YO(y){var x=y._init;return x(y._payload)}function KI(y){function x(Ve,Pe){if(y){var We=Ve.deletions;We===null?(Ve.deletions=[Pe],Ve.flags|=16):We.push(Pe)}}function k(Ve,Pe){if(!y)return null;for(;Pe!==null;)x(Ve,Pe),Pe=Pe.sibling;return null}function M(Ve,Pe){for(Ve=new Map;Pe!==null;)Pe.key!==null?Ve.set(Pe.key,Pe):Ve.set(Pe.index,Pe),Pe=Pe.sibling;return Ve}function z(Ve,Pe){return Ve=Of(Ve,Pe),Ve.index=0,Ve.sibling=null,Ve}function K(Ve,Pe,We){return Ve.index=We,y?(We=Ve.alternate,We!==null?(We=We.index,We<Pe?(Ve.flags|=2,Pe):We):(Ve.flags|=2,Pe)):(Ve.flags|=1048576,Pe)}function se(Ve){return y&&Ve.alternate===null&&(Ve.flags|=2),Ve}function be(Ve,Pe,We,Mt){return Pe===null||Pe.tag!==6?(Pe=Mk(We,Ve.mode,Mt),Pe.return=Ve,Pe):(Pe=z(Pe,We),Pe.return=Ve,Pe)}function Ce(Ve,Pe,We,Mt){var on=We.type;return on===I?St(Ve,Pe,We.props.children,Mt,We.key):Pe!==null&&(Pe.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===J&&YO(on)===Pe.type)?(Mt=z(Pe,We.props),Mt.ref=r_(Ve,Pe,We),Mt.return=Ve,Mt):(Mt=mS(We.type,We.key,We.props,null,Ve.mode,Mt),Mt.ref=r_(Ve,Pe,We),Mt.return=Ve,Mt)}function Xe(Ve,Pe,We,Mt){return Pe===null||Pe.tag!==4||Pe.stateNode.containerInfo!==We.containerInfo||Pe.stateNode.implementation!==We.implementation?(Pe=Lk(We,Ve.mode,Mt),Pe.return=Ve,Pe):(Pe=z(Pe,We.children||[]),Pe.return=Ve,Pe)}function St(Ve,Pe,We,Mt,on){return Pe===null||Pe.tag!==7?(Pe=Gg(We,Ve.mode,Mt,on),Pe.return=Ve,Pe):(Pe=z(Pe,We),Pe.return=Ve,Pe)}function kt(Ve,Pe,We){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number")return Pe=Mk(""+Pe,Ve.mode,We),Pe.return=Ve,Pe;if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case T:return We=mS(Pe.type,Pe.key,Pe.props,null,Ve.mode,We),We.ref=r_(Ve,null,Pe),We.return=Ve,We;case C:return Pe=Lk(Pe,Ve.mode,We),Pe.return=Ve,Pe;case J:var Mt=Pe._init;return kt(Ve,Mt(Pe._payload),We)}if(yt(Pe)||ie(Pe))return Pe=Gg(Pe,Ve.mode,We,null),Pe.return=Ve,Pe;Lg(Ve,Pe)}return null}function _t(Ve,Pe,We,Mt){var on=Pe!==null?Pe.key:null;if(typeof We=="string"&&We!==""||typeof We=="number")return on!==null?null:be(Ve,Pe,""+We,Mt);if(typeof We=="object"&&We!==null){switch(We.$$typeof){case T:return We.key===on?Ce(Ve,Pe,We,Mt):null;case C:return We.key===on?Xe(Ve,Pe,We,Mt):null;case J:return on=We._init,_t(Ve,Pe,on(We._payload),Mt)}if(yt(We)||ie(We))return on!==null?null:St(Ve,Pe,We,Mt,null);Lg(Ve,We)}return null}function Xt(Ve,Pe,We,Mt,on){if(typeof Mt=="string"&&Mt!==""||typeof Mt=="number")return Ve=Ve.get(We)||null,be(Pe,Ve,""+Mt,on);if(typeof Mt=="object"&&Mt!==null){switch(Mt.$$typeof){case T:return Ve=Ve.get(Mt.key===null?We:Mt.key)||null,Ce(Pe,Ve,Mt,on);case C:return Ve=Ve.get(Mt.key===null?We:Mt.key)||null,Xe(Pe,Ve,Mt,on);case J:var _n=Mt._init;return Xt(Ve,Pe,We,_n(Mt._payload),on)}if(yt(Mt)||ie(Mt))return Ve=Ve.get(We)||null,St(Pe,Ve,Mt,on,null);Lg(Pe,Mt)}return null}function rn(Ve,Pe,We,Mt){for(var on=null,_n=null,wn=Pe,kn=Pe=0,_o=null;wn!==null&&kn<We.length;kn++){wn.index>kn?(_o=wn,wn=null):_o=wn.sibling;var ni=_t(Ve,wn,We[kn],Mt);if(ni===null){wn===null&&(wn=_o);break}y&&wn&&ni.alternate===null&&x(Ve,wn),Pe=K(ni,Pe,kn),_n===null?on=ni:_n.sibling=ni,_n=ni,wn=_o}if(kn===We.length)return k(Ve,wn),is&&Og(Ve,kn),on;if(wn===null){for(;kn<We.length;kn++)wn=kt(Ve,We[kn],Mt),wn!==null&&(Pe=K(wn,Pe,kn),_n===null?on=wn:_n.sibling=wn,_n=wn);return is&&Og(Ve,kn),on}for(wn=M(Ve,wn);kn<We.length;kn++)_o=Xt(wn,Ve,kn,We[kn],Mt),_o!==null&&(y&&_o.alternate!==null&&wn.delete(_o.key===null?kn:_o.key),Pe=K(_o,Pe,kn),_n===null?on=_o:_n.sibling=_o,_n=_o);return y&&wn.forEach(function(Mm){return x(Ve,Mm)}),is&&Og(Ve,kn),on}function sn(Ve,Pe,We,Mt){var on=ie(We);if(typeof on!="function")throw Error(n(150));if(We=on.call(We),We==null)throw Error(n(151));for(var _n=on=null,wn=Pe,kn=Pe=0,_o=null,ni=We.next();wn!==null&&!ni.done;kn++,ni=We.next()){wn.index>kn?(_o=wn,wn=null):_o=wn.sibling;var Mm=_t(Ve,wn,ni.value,Mt);if(Mm===null){wn===null&&(wn=_o);break}y&&wn&&Mm.alternate===null&&x(Ve,wn),Pe=K(Mm,Pe,kn),_n===null?on=Mm:_n.sibling=Mm,_n=Mm,wn=_o}if(ni.done)return k(Ve,wn),is&&Og(Ve,kn),on;if(wn===null){for(;!ni.done;kn++,ni=We.next())ni=kt(Ve,ni.value,Mt),ni!==null&&(Pe=K(ni,Pe,kn),_n===null?on=ni:_n.sibling=ni,_n=ni);return is&&Og(Ve,kn),on}for(wn=M(Ve,wn);!ni.done;kn++,ni=We.next())ni=Xt(wn,Ve,kn,ni.value,Mt),ni!==null&&(y&&ni.alternate!==null&&wn.delete(ni.key===null?kn:ni.key),Pe=K(ni,Pe,kn),_n===null?on=ni:_n.sibling=ni,_n=ni);return y&&wn.forEach(function(IU){return x(Ve,IU)}),is&&Og(Ve,kn),on}function As(Ve,Pe,We,Mt){if(typeof We=="object"&&We!==null&&We.type===I&&We.key===null&&(We=We.props.children),typeof We=="object"&&We!==null){switch(We.$$typeof){case T:e:{for(var on=We.key,_n=Pe;_n!==null;){if(_n.key===on){if(on=We.type,on===I){if(_n.tag===7){k(Ve,_n.sibling),Pe=z(_n,We.props.children),Pe.return=Ve,Ve=Pe;break e}}else if(_n.elementType===on||typeof on=="object"&&on!==null&&on.$$typeof===J&&YO(on)===_n.type){k(Ve,_n.sibling),Pe=z(_n,We.props),Pe.ref=r_(Ve,_n,We),Pe.return=Ve,Ve=Pe;break e}k(Ve,_n);break}else x(Ve,_n);_n=_n.sibling}We.type===I?(Pe=Gg(We.props.children,Ve.mode,Mt,We.key),Pe.return=Ve,Ve=Pe):(Mt=mS(We.type,We.key,We.props,null,Ve.mode,Mt),Mt.ref=r_(Ve,Pe,We),Mt.return=Ve,Ve=Mt)}return se(Ve);case C:e:{for(_n=We.key;Pe!==null;){if(Pe.key===_n)if(Pe.tag===4&&Pe.stateNode.containerInfo===We.containerInfo&&Pe.stateNode.implementation===We.implementation){k(Ve,Pe.sibling),Pe=z(Pe,We.children||[]),Pe.return=Ve,Ve=Pe;break e}else{k(Ve,Pe);break}else x(Ve,Pe);Pe=Pe.sibling}Pe=Lk(We,Ve.mode,Mt),Pe.return=Ve,Ve=Pe}return se(Ve);case J:return _n=We._init,As(Ve,Pe,_n(We._payload),Mt)}if(yt(We))return rn(Ve,Pe,We,Mt);if(ie(We))return sn(Ve,Pe,We,Mt);Lg(Ve,We)}return typeof We=="string"&&We!==""||typeof We=="number"?(We=""+We,Pe!==null&&Pe.tag===6?(k(Ve,Pe.sibling),Pe=z(Pe,We),Pe.return=Ve,Ve=Pe):(k(Ve,Pe),Pe=Mk(We,Ve.mode,Mt),Pe.return=Ve,Ve=Pe),se(Ve)):k(Ve,Pe)}return As}var Cs=KI(!0),MT=KI(!1),i_=Mu(null),Cl=null,Tm=null,ov=null;function qh(){ov=Tm=Cl=null}function LT(y){var x=i_.current;rs(i_),y._currentValue=x}function Zo(y,x,k){for(;y!==null;){var M=y.alternate;if((y.childLanes&x)!==x?(y.childLanes|=x,M!==null&&(M.childLanes|=x)):M!==null&&(M.childLanes&x)!==x&&(M.childLanes|=x),y===k)break;y=y.return}}function Sm(y,x){Cl=y,ov=Tm=null,y=y.dependencies,y!==null&&y.firstContext!==null&&(y.lanes&x&&(nu=!0),y.firstContext=null)}function bc(y){var x=y._currentValue;if(ov!==y)if(y={context:y,memoizedValue:x,next:null},Tm===null){if(Cl===null)throw Error(n(308));Tm=y,Cl.dependencies={lanes:0,firstContext:y}}else Tm=Tm.next=y;return x}var $g=null;function XI(y){$g===null?$g=[y]:$g.push(y)}function $T(y,x,k,M){var z=x.interleaved;return z===null?(k.next=k,XI(x)):(k.next=z.next,z.next=k),x.interleaved=k,Wh(y,M)}function Wh(y,x){y.lanes|=x;var k=y.alternate;for(k!==null&&(k.lanes|=x),k=y,y=y.return;y!==null;)y.childLanes|=x,k=y.alternate,k!==null&&(k.childLanes|=x),k=y,y=y.return;return k.tag===3?k.stateNode:null}var xc=!1;function FT(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function KO(y,x){y=y.updateQueue,x.updateQueue===y&&(x.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,effects:y.effects})}function Gh(y,x){return{eventTime:y,lane:x,tag:0,payload:null,callback:null,next:null}}function _c(y,x,k){var M=y.updateQueue;if(M===null)return null;if(M=M.shared,jr&2){var z=M.pending;return z===null?x.next=x:(x.next=z.next,z.next=x),M.pending=x,Wh(y,k)}return z=M.interleaved,z===null?(x.next=x,XI(M)):(x.next=z.next,z.next=x),M.interleaved=x,Wh(y,k)}function BT(y,x,k){if(x=x.updateQueue,x!==null&&(x=x.shared,(k&4194240)!==0)){var M=x.lanes;M&=y.pendingLanes,k|=M,x.lanes=k,nr(y,k)}}function XO(y,x){var k=y.updateQueue,M=y.alternate;if(M!==null&&(M=M.updateQueue,k===M)){var z=null,K=null;if(k=k.firstBaseUpdate,k!==null){do{var se={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};K===null?z=K=se:K=K.next=se,k=k.next}while(k!==null);K===null?z=K=x:K=K.next=x}else z=K=x;k={baseState:M.baseState,firstBaseUpdate:z,lastBaseUpdate:K,shared:M.shared,effects:M.effects},y.updateQueue=k;return}y=k.lastBaseUpdate,y===null?k.firstBaseUpdate=x:y.next=x,k.lastBaseUpdate=x}function av(y,x,k,M){var z=y.updateQueue;xc=!1;var K=z.firstBaseUpdate,se=z.lastBaseUpdate,be=z.shared.pending;if(be!==null){z.shared.pending=null;var Ce=be,Xe=Ce.next;Ce.next=null,se===null?K=Xe:se.next=Xe,se=Ce;var St=y.alternate;St!==null&&(St=St.updateQueue,be=St.lastBaseUpdate,be!==se&&(be===null?St.firstBaseUpdate=Xe:be.next=Xe,St.lastBaseUpdate=Ce))}if(K!==null){var kt=z.baseState;se=0,St=Xe=Ce=null,be=K;do{var _t=be.lane,Xt=be.eventTime;if((M&_t)===_t){St!==null&&(St=St.next={eventTime:Xt,lane:0,tag:be.tag,payload:be.payload,callback:be.callback,next:null});e:{var rn=y,sn=be;switch(_t=x,Xt=k,sn.tag){case 1:if(rn=sn.payload,typeof rn=="function"){kt=rn.call(Xt,kt,_t);break e}kt=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=sn.payload,_t=typeof rn=="function"?rn.call(Xt,kt,_t):rn,_t==null)break e;kt=q({},kt,_t);break e;case 2:xc=!0}}be.callback!==null&&be.lane!==0&&(y.flags|=64,_t=z.effects,_t===null?z.effects=[be]:_t.push(be))}else Xt={eventTime:Xt,lane:_t,tag:be.tag,payload:be.payload,callback:be.callback,next:null},St===null?(Xe=St=Xt,Ce=kt):St=St.next=Xt,se|=_t;if(be=be.next,be===null){if(be=z.shared.pending,be===null)break;_t=be,be=_t.next,_t.next=null,z.lastBaseUpdate=_t,z.shared.pending=null}}while(!0);if(St===null&&(Ce=kt),z.baseState=Ce,z.firstBaseUpdate=Xe,z.lastBaseUpdate=St,x=z.shared.interleaved,x!==null){z=x;do se|=z.lane,z=z.next;while(z!==x)}else K===null&&(z.shared.lanes=0);Rm|=se,y.lanes=se,y.memoizedState=kt}}function QI(y,x,k){if(y=x.effects,x.effects=null,y!==null)for(x=0;x<y.length;x++){var M=y[x],z=M.callback;if(z!==null){if(M.callback=null,M=k,typeof z!="function")throw Error(n(191,z));z.call(M)}}}var s_={},Od=Mu(s_),o_=Mu(s_),uv=Mu(s_);function Yh(y){if(y===s_)throw Error(n(174));return y}function JI(y,x){switch(Ui(uv,x),Ui(o_,y),Ui(Od,s_),y=x.nodeType,y){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:Oe(null,"");break;default:y=y===8?x.parentNode:x,x=y.namespaceURI||null,y=y.tagName,x=Oe(x,y)}rs(Od),Ui(Od,x)}function Cm(){rs(Od),rs(o_),rs(uv)}function ZI(y){Yh(uv.current);var x=Yh(Od.current),k=Oe(x,y.type);x!==k&&(Ui(o_,y),Ui(Od,k))}function jT(y){o_.current===y&&(rs(Od),rs(o_))}var us=Mu(0);function Fg(y){for(var x=y;x!==null;){if(x.tag===13){var k=x.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if(x.flags&128)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var ek=[];function UT(){for(var y=0;y<ek.length;y++)ek[y]._workInProgressVersionPrimary=null;ek.length=0}var a_=E.ReactCurrentDispatcher,tk=E.ReactCurrentBatchConfig,Am=0,ys=null,Bs=null,bo=null,lv=!1,u_=!1,Bg=0,hr=0;function Ia(){throw Error(n(321))}function nk(y,x){if(x===null)return!1;for(var k=0;k<x.length&&k<y.length;k++)if(!Ye(y[k],x[k]))return!1;return!0}function jg(y,x,k,M,z,K){if(Am=K,ys=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,a_.current=y===null||y.memoizedState===null?fU:YT,y=k(M,z),u_){K=0;do{if(u_=!1,Bg=0,25<=K)throw Error(n(301));K+=1,bo=Bs=null,x.updateQueue=null,a_.current=hv,y=k(M,z)}while(u_)}if(a_.current=GT,x=Bs!==null&&Bs.next!==null,Am=0,bo=Bs=ys=null,lv=!1,x)throw Error(n(300));return y}function zT(){var y=Bg!==0;return Bg=0,y}function Md(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bo===null?ys.memoizedState=bo=y:bo=bo.next=y,bo}function wc(){if(Bs===null){var y=ys.alternate;y=y!==null?y.memoizedState:null}else y=Bs.next;var x=bo===null?ys.memoizedState:bo.next;if(x!==null)bo=x,Bs=y;else{if(y===null)throw Error(n(310));Bs=y,y={memoizedState:Bs.memoizedState,baseState:Bs.baseState,baseQueue:Bs.baseQueue,queue:Bs.queue,next:null},bo===null?ys.memoizedState=bo=y:bo=bo.next=y}return bo}function ka(y,x){return typeof x=="function"?x(y):x}function rk(y){var x=wc(),k=x.queue;if(k===null)throw Error(n(311));k.lastRenderedReducer=y;var M=Bs,z=M.baseQueue,K=k.pending;if(K!==null){if(z!==null){var se=z.next;z.next=K.next,K.next=se}M.baseQueue=z=K,k.pending=null}if(z!==null){K=z.next,M=M.baseState;var be=se=null,Ce=null,Xe=K;do{var St=Xe.lane;if((Am&St)===St)Ce!==null&&(Ce=Ce.next={lane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),M=Xe.hasEagerState?Xe.eagerState:y(M,Xe.action);else{var kt={lane:St,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null};Ce===null?(be=Ce=kt,se=M):Ce=Ce.next=kt,ys.lanes|=St,Rm|=St}Xe=Xe.next}while(Xe!==null&&Xe!==K);Ce===null?se=M:Ce.next=be,Ye(M,x.memoizedState)||(nu=!0),x.memoizedState=M,x.baseState=se,x.baseQueue=Ce,k.lastRenderedState=M}if(y=k.interleaved,y!==null){z=y;do K=z.lane,ys.lanes|=K,Rm|=K,z=z.next;while(z!==y)}else z===null&&(k.lanes=0);return[x.memoizedState,k.dispatch]}function cv(y){var x=wc(),k=x.queue;if(k===null)throw Error(n(311));k.lastRenderedReducer=y;var M=k.dispatch,z=k.pending,K=x.memoizedState;if(z!==null){k.pending=null;var se=z=z.next;do K=y(K,se.action),se=se.next;while(se!==z);Ye(K,x.memoizedState)||(nu=!0),x.memoizedState=K,x.baseQueue===null&&(x.baseState=K),k.lastRenderedState=K}return[K,M]}function VT(){}function ik(y,x){var k=ys,M=wc(),z=x(),K=!Ye(M.memoizedState,z);if(K&&(M.memoizedState=z,nu=!0),M=M.queue,Ld(Kh.bind(null,k,M,y),[y]),M.getSnapshot!==x||K||bo!==null&&bo.memoizedState.tag&1){if(k.flags|=2048,fv(9,Bu.bind(null,k,M,z,x),void 0,null),Vo===null)throw Error(n(349));Am&30||sk(k,x,z)}return z}function sk(y,x,k){y.flags|=16384,y={getSnapshot:x,value:k},x=ys.updateQueue,x===null?(x={lastEffect:null,stores:null},ys.updateQueue=x,x.stores=[y]):(k=x.stores,k===null?x.stores=[y]:k.push(y))}function Bu(y,x,k,M){x.value=k,x.getSnapshot=M,HT(x)&&ok(y)}function Kh(y,x,k){return k(function(){HT(x)&&ok(y)})}function HT(y){var x=y.getSnapshot;y=y.value;try{var k=x();return!Ye(y,k)}catch{return!0}}function ok(y){var x=Wh(y,1);x!==null&&Pf(x,y,1,-1)}function l_(y){var x=Md();return typeof y=="function"&&(y=y()),x.memoizedState=x.baseState=y,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:y},x.queue=y,y=y.dispatch=n4.bind(null,ys,y),[x.memoizedState,y]}function fv(y,x,k,M){return y={tag:y,create:x,destroy:k,deps:M,next:null},x=ys.updateQueue,x===null?(x={lastEffect:null,stores:null},ys.updateQueue=x,x.lastEffect=y.next=y):(k=x.lastEffect,k===null?x.lastEffect=y.next=y:(M=k.next,k.next=y,y.next=M,x.lastEffect=y)),y}function qT(){return wc().memoizedState}function c_(y,x,k,M){var z=Md();ys.flags|=y,z.memoizedState=fv(1|x,k,void 0,M===void 0?null:M)}function dv(y,x,k,M){var z=wc();M=M===void 0?null:M;var K=void 0;if(Bs!==null){var se=Bs.memoizedState;if(K=se.destroy,M!==null&&nk(M,se.deps)){z.memoizedState=fv(x,k,K,M);return}}ys.flags|=y,z.memoizedState=fv(1|x,k,K,M)}function WT(y,x){return c_(8390656,8,y,x)}function Ld(y,x){return dv(2048,8,y,x)}function QO(y,x){return dv(4,2,y,x)}function Xh(y,x){return dv(4,4,y,x)}function ak(y,x){if(typeof x=="function")return y=y(),x(y),function(){x(null)};if(x!=null)return y=y(),x.current=y,function(){x.current=null}}function uk(y,x,k){return k=k!=null?k.concat([y]):null,dv(4,4,ak.bind(null,x,y),k)}function f_(){}function JO(y,x){var k=wc();x=x===void 0?null:x;var M=k.memoizedState;return M!==null&&x!==null&&nk(x,M[1])?M[0]:(k.memoizedState=[y,x],y)}function ZO(y,x){var k=wc();x=x===void 0?null:x;var M=k.memoizedState;return M!==null&&x!==null&&nk(x,M[1])?M[0]:(y=y(),k.memoizedState=[y,x],y)}function e4(y,x,k){return Am&21?(Ye(k,x)||(k=Dt(),ys.lanes|=k,Rm|=k,y.baseState=!0),x):(y.baseState&&(y.baseState=!1,nu=!0),y.memoizedState=k)}function t4(y,x){var k=ln;ln=k!==0&&4>k?k:4,y(!0);var M=tk.transition;tk.transition={};try{y(!1),x()}finally{ln=k,tk.transition=M}}function lk(){return wc().memoizedState}function cU(y,x,k){var M=Pm(y);if(k={lane:M,action:k,hasEagerState:!1,eagerState:null,next:null},ck(y))tu(x,k);else if(k=$T(y,x,k,M),k!==null){var z=su();Pf(k,y,M,z),If(k,x,M)}}function n4(y,x,k){var M=Pm(y),z={lane:M,action:k,hasEagerState:!1,eagerState:null,next:null};if(ck(y))tu(x,z);else{var K=y.alternate;if(y.lanes===0&&(K===null||K.lanes===0)&&(K=x.lastRenderedReducer,K!==null))try{var se=x.lastRenderedState,be=K(se,k);if(z.hasEagerState=!0,z.eagerState=be,Ye(be,se)){var Ce=x.interleaved;Ce===null?(z.next=z,XI(x)):(z.next=Ce.next,Ce.next=z),x.interleaved=z;return}}catch{}finally{}k=$T(y,x,z,M),k!==null&&(z=su(),Pf(k,y,M,z),If(k,x,M))}}function ck(y){var x=y.alternate;return y===ys||x!==null&&x===ys}function tu(y,x){u_=lv=!0;var k=y.pending;k===null?x.next=x:(x.next=k.next,k.next=x),y.pending=x}function If(y,x,k){if(k&4194240){var M=x.lanes;M&=y.pendingLanes,k|=M,x.lanes=k,nr(y,k)}}var GT={readContext:bc,useCallback:Ia,useContext:Ia,useEffect:Ia,useImperativeHandle:Ia,useInsertionEffect:Ia,useLayoutEffect:Ia,useMemo:Ia,useReducer:Ia,useRef:Ia,useState:Ia,useDebugValue:Ia,useDeferredValue:Ia,useTransition:Ia,useMutableSource:Ia,useSyncExternalStore:Ia,useId:Ia,unstable_isNewReconciler:!1},fU={readContext:bc,useCallback:function(y,x){return Md().memoizedState=[y,x===void 0?null:x],y},useContext:bc,useEffect:WT,useImperativeHandle:function(y,x,k){return k=k!=null?k.concat([y]):null,c_(4194308,4,ak.bind(null,x,y),k)},useLayoutEffect:function(y,x){return c_(4194308,4,y,x)},useInsertionEffect:function(y,x){return c_(4,2,y,x)},useMemo:function(y,x){var k=Md();return x=x===void 0?null:x,y=y(),k.memoizedState=[y,x],y},useReducer:function(y,x,k){var M=Md();return x=k!==void 0?k(x):x,M.memoizedState=M.baseState=x,y={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:x},M.queue=y,y=y.dispatch=cU.bind(null,ys,y),[M.memoizedState,y]},useRef:function(y){var x=Md();return y={current:y},x.memoizedState=y},useState:l_,useDebugValue:f_,useDeferredValue:function(y){return Md().memoizedState=y},useTransition:function(){var y=l_(!1),x=y[0];return y=t4.bind(null,y[1]),Md().memoizedState=y,[x,y]},useMutableSource:function(){},useSyncExternalStore:function(y,x,k){var M=ys,z=Md();if(is){if(k===void 0)throw Error(n(407));k=k()}else{if(k=x(),Vo===null)throw Error(n(349));Am&30||sk(M,x,k)}z.memoizedState=k;var K={value:k,getSnapshot:x};return z.queue=K,WT(Kh.bind(null,M,K,y),[y]),M.flags|=2048,fv(9,Bu.bind(null,M,K,k,x),void 0,null),k},useId:function(){var y=Md(),x=Vo.identifierPrefix;if(is){var k=Rd,M=kd;k=(M&~(1<<32-go(M)-1)).toString(32)+k,x=":"+x+"R"+k,k=Bg++,0<k&&(x+="H"+k.toString(32)),x+=":"}else k=hr++,x=":"+x+"r"+k.toString(32)+":";return y.memoizedState=x},unstable_isNewReconciler:!1},YT={readContext:bc,useCallback:JO,useContext:bc,useEffect:Ld,useImperativeHandle:uk,useInsertionEffect:QO,useLayoutEffect:Xh,useMemo:ZO,useReducer:rk,useRef:qT,useState:function(){return rk(ka)},useDebugValue:f_,useDeferredValue:function(y){var x=wc();return e4(x,Bs.memoizedState,y)},useTransition:function(){var y=rk(ka)[0],x=wc().memoizedState;return[y,x]},useMutableSource:VT,useSyncExternalStore:ik,useId:lk,unstable_isNewReconciler:!1},hv={readContext:bc,useCallback:JO,useContext:bc,useEffect:Ld,useImperativeHandle:uk,useInsertionEffect:QO,useLayoutEffect:Xh,useMemo:ZO,useReducer:cv,useRef:qT,useState:function(){return cv(ka)},useDebugValue:f_,useDeferredValue:function(y){var x=wc();return Bs===null?x.memoizedState=y:e4(x,Bs.memoizedState,y)},useTransition:function(){var y=cv(ka)[0],x=wc().memoizedState;return[y,x]},useMutableSource:VT,useSyncExternalStore:ik,useId:lk,unstable_isNewReconciler:!1};function Ec(y,x){if(y&&y.defaultProps){x=q({},x),y=y.defaultProps;for(var k in y)x[k]===void 0&&(x[k]=y[k]);return x}return x}function KT(y,x,k,M){x=y.memoizedState,k=k(M,x),k=k==null?x:q({},x,k),y.memoizedState=k,y.lanes===0&&(y.updateQueue.baseState=k)}var XT={isMounted:function(y){return(y=y._reactInternals)?ms(y)===y:!1},enqueueSetState:function(y,x,k){y=y._reactInternals;var M=su(),z=Pm(y),K=Gh(M,z);K.payload=x,k!=null&&(K.callback=k),x=_c(y,K,z),x!==null&&(Pf(x,y,z,M),BT(x,y,z))},enqueueReplaceState:function(y,x,k){y=y._reactInternals;var M=su(),z=Pm(y),K=Gh(M,z);K.tag=1,K.payload=x,k!=null&&(K.callback=k),x=_c(y,K,z),x!==null&&(Pf(x,y,z,M),BT(x,y,z))},enqueueForceUpdate:function(y,x){y=y._reactInternals;var k=su(),M=Pm(y),z=Gh(k,M);z.tag=2,x!=null&&(z.callback=x),x=_c(y,z,M),x!==null&&(Pf(x,y,M,k),BT(x,y,M))}};function fk(y,x,k,M,z,K,se){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(M,K,se):x.prototype&&x.prototype.isPureReactComponent?!Kt(k,M)||!Kt(z,K):!0}function Ug(y,x,k){var M=!1,z=wm,K=x.contextType;return typeof K=="object"&&K!==null?K=bc(K):(z=$u(x)?eu:Sa.current,M=x.contextTypes,K=(M=M!=null)?iv(y,z):wm),x=new x(k,K),y.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=XT,y.stateNode=x,x._reactInternals=y,M&&(y=y.stateNode,y.__reactInternalMemoizedUnmaskedChildContext=z,y.__reactInternalMemoizedMaskedChildContext=K),x}function pv(y,x,k,M){y=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(k,M),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(k,M),x.state!==y&&XT.enqueueReplaceState(x,x.state,null)}function dk(y,x,k,M){var z=y.stateNode;z.props=k,z.state=y.memoizedState,z.refs={},FT(y);var K=x.contextType;typeof K=="object"&&K!==null?z.context=bc(K):(K=$u(x)?eu:Sa.current,z.context=iv(y,K)),z.state=y.memoizedState,K=x.getDerivedStateFromProps,typeof K=="function"&&(KT(y,x,K,k),z.state=y.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(x=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),x!==z.state&&XT.enqueueReplaceState(z,z.state,null),av(y,k,z,M),z.state=y.memoizedState),typeof z.componentDidMount=="function"&&(y.flags|=4194308)}function zg(y,x){try{var k="",M=x;do k+=ee(M),M=M.return;while(M);var z=k}catch(K){z=`
Error generating stack: `+K.message+`
`+K.stack}return{value:y,source:x,stack:z,digest:null}}function QT(y,x,k){return{value:y,source:null,stack:k??null,digest:x??null}}function mv(y,x){try{console.error(x.value)}catch(k){setTimeout(function(){throw k})}}var r4=typeof WeakMap=="function"?WeakMap:Map;function d_(y,x,k){k=Gh(-1,k),k.tag=3,k.payload={element:null};var M=x.value;return k.callback=function(){uS||(uS=!0,Ik=M),mv(y,x)},k}function JT(y,x,k){k=Gh(-1,k),k.tag=3;var M=y.type.getDerivedStateFromError;if(typeof M=="function"){var z=x.value;k.payload=function(){return M(z)},k.callback=function(){mv(y,x)}}var K=y.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(k.callback=function(){mv(y,x),typeof M!="function"&&(Dm===null?Dm=new Set([this]):Dm.add(this));var se=x.stack;this.componentDidCatch(x.value,{componentStack:se!==null?se:""})}),k}function h_(y,x,k){var M=y.pingCache;if(M===null){M=y.pingCache=new r4;var z=new Set;M.set(x,z)}else z=M.get(x),z===void 0&&(z=new Set,M.set(x,z));z.has(k)||(z.add(k),y=bU.bind(null,y,x,k),x.then(y,y))}function i4(y){do{var x;if((x=y.tag===13)&&(x=y.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return y;y=y.return}while(y!==null);return null}function hk(y,x,k,M,z){return y.mode&1?(y.flags|=65536,y.lanes=z,y):(y===x?y.flags|=65536:(y.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(x=Gh(-1,1),x.tag=2,_c(k,x,1))),k.lanes|=1),y)}var ZT=E.ReactCurrentOwner,nu=!1;function ea(y,x,k,M){x.child=y===null?MT(x,null,k,M):Cs(x,y.child,k,M)}function s4(y,x,k,M,z){k=k.render;var K=x.ref;return Sm(x,z),M=jg(y,x,k,M,K,z),k=zT(),y!==null&&!nu?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~z,kf(y,x,z)):(is&&k&&t_(x),x.flags|=1,ea(y,x,M,z),x.child)}function pk(y,x,k,M,z){if(y===null){var K=k.type;return typeof K=="function"&&!pS(K)&&K.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(x.tag=15,x.type=K,$d(y,x,K,M,z)):(y=mS(k.type,null,M,x,x.mode,z),y.ref=x.ref,y.return=x,x.child=y)}if(K=y.child,!(y.lanes&z)){var se=K.memoizedProps;if(k=k.compare,k=k!==null?k:Kt,k(se,M)&&y.ref===x.ref)return kf(y,x,z)}return x.flags|=1,y=Of(K,M),y.ref=x.ref,y.return=x,x.child=y}function $d(y,x,k,M,z){if(y!==null){var K=y.memoizedProps;if(Kt(K,M)&&y.ref===x.ref)if(nu=!1,x.pendingProps=M=K,(y.lanes&z)!==0)y.flags&131072&&(nu=!0);else return x.lanes=y.lanes,kf(y,x,z)}return yk(y,x,k,M,z)}function mk(y,x,k){var M=x.pendingProps,z=M.children,K=y!==null?y.memoizedState:null;if(M.mode==="hidden")if(!(x.mode&1))x.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ui(bv,Il),Il|=k;else{if(!(k&1073741824))return y=K!==null?K.baseLanes|k:k,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:y,cachePool:null,transitions:null},x.updateQueue=null,Ui(bv,Il),Il|=y,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},M=K!==null?K.baseLanes:k,Ui(bv,Il),Il|=M}else K!==null?(M=K.baseLanes|k,x.memoizedState=null):M=k,Ui(bv,Il),Il|=M;return ea(y,x,z,k),x.child}function gk(y,x){var k=x.ref;(y===null&&k!==null||y!==null&&y.ref!==k)&&(x.flags|=512,x.flags|=2097152)}function yk(y,x,k,M,z){var K=$u(k)?eu:Sa.current;return K=iv(x,K),Sm(x,z),k=jg(y,x,k,M,K,z),M=zT(),y!==null&&!nu?(x.updateQueue=y.updateQueue,x.flags&=-2053,y.lanes&=~z,kf(y,x,z)):(is&&M&&t_(x),x.flags|=1,ea(y,x,k,z),x.child)}function vk(y,x,k,M,z){if($u(k)){var K=!0;gc(x)}else K=!1;if(Sm(x,z),x.stateNode===null)tS(y,x),Ug(x,k,M),dk(x,k,M,z),M=!0;else if(y===null){var se=x.stateNode,be=x.memoizedProps;se.props=be;var Ce=se.context,Xe=k.contextType;typeof Xe=="object"&&Xe!==null?Xe=bc(Xe):(Xe=$u(k)?eu:Sa.current,Xe=iv(x,Xe));var St=k.getDerivedStateFromProps,kt=typeof St=="function"||typeof se.getSnapshotBeforeUpdate=="function";kt||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(be!==M||Ce!==Xe)&&pv(x,se,M,Xe),xc=!1;var _t=x.memoizedState;se.state=_t,av(x,M,se,z),Ce=x.memoizedState,be!==M||_t!==Ce||Lu.current||xc?(typeof St=="function"&&(KT(x,k,St,M),Ce=x.memoizedState),(be=xc||fk(x,k,be,M,_t,Ce,Xe))?(kt||typeof se.UNSAFE_componentWillMount!="function"&&typeof se.componentWillMount!="function"||(typeof se.componentWillMount=="function"&&se.componentWillMount(),typeof se.UNSAFE_componentWillMount=="function"&&se.UNSAFE_componentWillMount()),typeof se.componentDidMount=="function"&&(x.flags|=4194308)):(typeof se.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=M,x.memoizedState=Ce),se.props=M,se.state=Ce,se.context=Xe,M=be):(typeof se.componentDidMount=="function"&&(x.flags|=4194308),M=!1)}else{se=x.stateNode,KO(y,x),be=x.memoizedProps,Xe=x.type===x.elementType?be:Ec(x.type,be),se.props=Xe,kt=x.pendingProps,_t=se.context,Ce=k.contextType,typeof Ce=="object"&&Ce!==null?Ce=bc(Ce):(Ce=$u(k)?eu:Sa.current,Ce=iv(x,Ce));var Xt=k.getDerivedStateFromProps;(St=typeof Xt=="function"||typeof se.getSnapshotBeforeUpdate=="function")||typeof se.UNSAFE_componentWillReceiveProps!="function"&&typeof se.componentWillReceiveProps!="function"||(be!==kt||_t!==Ce)&&pv(x,se,M,Ce),xc=!1,_t=x.memoizedState,se.state=_t,av(x,M,se,z);var rn=x.memoizedState;be!==kt||_t!==rn||Lu.current||xc?(typeof Xt=="function"&&(KT(x,k,Xt,M),rn=x.memoizedState),(Xe=xc||fk(x,k,Xe,M,_t,rn,Ce)||!1)?(St||typeof se.UNSAFE_componentWillUpdate!="function"&&typeof se.componentWillUpdate!="function"||(typeof se.componentWillUpdate=="function"&&se.componentWillUpdate(M,rn,Ce),typeof se.UNSAFE_componentWillUpdate=="function"&&se.UNSAFE_componentWillUpdate(M,rn,Ce)),typeof se.componentDidUpdate=="function"&&(x.flags|=4),typeof se.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof se.componentDidUpdate!="function"||be===y.memoizedProps&&_t===y.memoizedState||(x.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||be===y.memoizedProps&&_t===y.memoizedState||(x.flags|=1024),x.memoizedProps=M,x.memoizedState=rn),se.props=M,se.state=rn,se.context=Ce,M=Xe):(typeof se.componentDidUpdate!="function"||be===y.memoizedProps&&_t===y.memoizedState||(x.flags|=4),typeof se.getSnapshotBeforeUpdate!="function"||be===y.memoizedProps&&_t===y.memoizedState||(x.flags|=1024),M=!1)}return bk(y,x,k,M,K,z)}function bk(y,x,k,M,z,K){gk(y,x);var se=(x.flags&128)!==0;if(!M&&!se)return z&&VO(x,k,!1),kf(y,x,K);M=x.stateNode,ZT.current=x;var be=se&&typeof k.getDerivedStateFromError!="function"?null:M.render();return x.flags|=1,y!==null&&se?(x.child=Cs(x,y.child,null,K),x.child=Cs(x,null,be,K)):ea(y,x,be,K),x.memoizedState=M.state,z&&VO(x,k,!0),x.child}function o4(y){var x=y.stateNode;x.pendingContext?UO(y,x.pendingContext,x.pendingContext!==x.context):x.context&&UO(y,x.context,!1),JI(y,x.containerInfo)}function Fd(y,x,k,M,z){return Nd(),Pd(z),x.flags|=256,ea(y,x,k,M),x.child}var p_={dehydrated:null,treeContext:null,retryLane:0};function m_(y){return{baseLanes:y,cachePool:null,transitions:null}}function eS(y,x,k){var M=x.pendingProps,z=us.current,K=!1,se=(x.flags&128)!==0,be;if((be=se)||(be=y!==null&&y.memoizedState===null?!1:(z&2)!==0),be?(K=!0,x.flags&=-129):(y===null||y.memoizedState!==null)&&(z|=1),Ui(us,z&1),y===null)return Fu(x),y=x.memoizedState,y!==null&&(y=y.dehydrated,y!==null)?(x.mode&1?y.data==="$!"?x.lanes=8:x.lanes=1073741824:x.lanes=1,null):(se=M.children,y=M.fallback,K?(M=x.mode,K=x.child,se={mode:"hidden",children:se},!(M&1)&&K!==null?(K.childLanes=0,K.pendingProps=se):K=gS(se,M,0,null),y=Gg(y,M,k,null),K.return=x,y.return=x,K.sibling=y,x.child=K,x.child.memoizedState=m_(k),x.memoizedState=p_,y):gv(x,se));if(z=y.memoizedState,z!==null&&(be=z.dehydrated,be!==null))return Sn(y,x,se,M,be,z,k);if(K){K=M.fallback,se=x.mode,z=y.child,be=z.sibling;var Ce={mode:"hidden",children:M.children};return!(se&1)&&x.child!==z?(M=x.child,M.childLanes=0,M.pendingProps=Ce,x.deletions=null):(M=Of(z,Ce),M.subtreeFlags=z.subtreeFlags&14680064),be!==null?K=Of(be,K):(K=Gg(K,se,k,null),K.flags|=2),K.return=x,M.return=x,M.sibling=K,x.child=M,M=K,K=x.child,se=y.child.memoizedState,se=se===null?m_(k):{baseLanes:se.baseLanes|k,cachePool:null,transitions:se.transitions},K.memoizedState=se,K.childLanes=y.childLanes&~k,x.memoizedState=p_,M}return K=y.child,y=K.sibling,M=Of(K,{mode:"visible",children:M.children}),!(x.mode&1)&&(M.lanes=k),M.return=x,M.sibling=null,y!==null&&(k=x.deletions,k===null?(x.deletions=[y],x.flags|=16):k.push(y)),x.child=M,x.memoizedState=null,M}function gv(y,x){return x=gS({mode:"visible",children:x},y.mode,0,null),x.return=y,y.child=x}function Qh(y,x,k,M){return M!==null&&Pd(M),Cs(x,y.child,null,k),y=gv(x,x.pendingProps.children),y.flags|=2,x.memoizedState=null,y}function Sn(y,x,k,M,z,K,se){if(k)return x.flags&256?(x.flags&=-257,M=QT(Error(n(422))),Qh(y,x,se,M)):x.memoizedState!==null?(x.child=y.child,x.flags|=128,null):(K=M.fallback,z=x.mode,M=gS({mode:"visible",children:M.children},z,0,null),K=Gg(K,z,se,null),K.flags|=2,M.return=x,K.return=x,M.sibling=K,x.child=M,x.mode&1&&Cs(x,y.child,null,se),x.child.memoizedState=m_(se),x.memoizedState=p_,K);if(!(x.mode&1))return Qh(y,x,se,null);if(z.data==="$!"){if(M=z.nextSibling&&z.nextSibling.dataset,M)var be=M.dgst;return M=be,K=Error(n(419)),M=QT(K,M,void 0),Qh(y,x,se,M)}if(be=(se&y.childLanes)!==0,nu||be){if(M=Vo,M!==null){switch(se&-se){case 4:z=2;break;case 16:z=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:z=32;break;case 536870912:z=268435456;break;default:z=0}z=z&(M.suspendedLanes|se)?0:z,z!==0&&z!==K.retryLane&&(K.retryLane=z,Wh(y,z),Pf(M,y,z,-1))}return Ok(),M=QT(Error(n(421))),Qh(y,x,se,M)}return z.data==="$?"?(x.flags|=128,x.child=y.child,x=xU.bind(null,y),z._reactRetry=x,null):(y=K.treeContext,Sl=xm(z.nextSibling),Aa=x,is=!0,Af=null,y!==null&&(yc[vc++]=kd,yc[vc++]=Rd,yc[vc++]=Pg,kd=y.id,Rd=y.overflow,Pg=x),x=gv(x,M.children),x.flags|=4096,x)}function g_(y,x,k){y.lanes|=x;var M=y.alternate;M!==null&&(M.lanes|=x),Zo(y.return,x,k)}function y_(y,x,k,M,z){var K=y.memoizedState;K===null?y.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:M,tail:k,tailMode:z}:(K.isBackwards=x,K.rendering=null,K.renderingStartTime=0,K.last=M,K.tail=k,K.tailMode=z)}function Im(y,x,k){var M=x.pendingProps,z=M.revealOrder,K=M.tail;if(ea(y,x,M.children,k),M=us.current,M&2)M=M&1|2,x.flags|=128;else{if(y!==null&&y.flags&128)e:for(y=x.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&g_(y,k,x);else if(y.tag===19)g_(y,k,x);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===x)break e;for(;y.sibling===null;){if(y.return===null||y.return===x)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}M&=1}if(Ui(us,M),!(x.mode&1))x.memoizedState=null;else switch(z){case"forwards":for(k=x.child,z=null;k!==null;)y=k.alternate,y!==null&&Fg(y)===null&&(z=k),k=k.sibling;k=z,k===null?(z=x.child,x.child=null):(z=k.sibling,k.sibling=null),y_(x,!1,z,k,K);break;case"backwards":for(k=null,z=x.child,x.child=null;z!==null;){if(y=z.alternate,y!==null&&Fg(y)===null){x.child=z;break}y=z.sibling,z.sibling=k,k=z,z=y}y_(x,!0,k,null,K);break;case"together":y_(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function tS(y,x){!(x.mode&1)&&y!==null&&(y.alternate=null,x.alternate=null,x.flags|=2)}function kf(y,x,k){if(y!==null&&(x.dependencies=y.dependencies),Rm|=x.lanes,!(k&x.childLanes))return null;if(y!==null&&x.child!==y.child)throw Error(n(153));if(x.child!==null){for(y=x.child,k=Of(y,y.pendingProps),x.child=k,k.return=x;y.sibling!==null;)y=y.sibling,k=k.sibling=Of(y,y.pendingProps),k.return=x;k.sibling=null}return x.child}function a4(y,x,k){switch(x.tag){case 3:o4(x),Nd();break;case 5:ZI(x);break;case 1:$u(x.type)&&gc(x);break;case 4:JI(x,x.stateNode.containerInfo);break;case 10:var M=x.type._context,z=x.memoizedProps.value;Ui(i_,M._currentValue),M._currentValue=z;break;case 13:if(M=x.memoizedState,M!==null)return M.dehydrated!==null?(Ui(us,us.current&1),x.flags|=128,null):k&x.child.childLanes?eS(y,x,k):(Ui(us,us.current&1),y=kf(y,x,k),y!==null?y.sibling:null);Ui(us,us.current&1);break;case 19:if(M=(k&x.childLanes)!==0,y.flags&128){if(M)return Im(y,x,k);x.flags|=128}if(z=x.memoizedState,z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),Ui(us,us.current),M)break;return null;case 22:case 23:return x.lanes=0,mk(y,x,k)}return kf(y,x,k)}var ta,xk,u4,_k;ta=function(y,x){for(var k=x.child;k!==null;){if(k.tag===5||k.tag===6)y.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},xk=function(){},u4=function(y,x,k,M){var z=y.memoizedProps;if(z!==M){y=x.stateNode,Yh(Od.current);var K=null;switch(k){case"input":z=De(y,z),M=De(y,M),K=[];break;case"select":z=q({},z,{value:void 0}),M=q({},M,{value:void 0}),K=[];break;case"textarea":z=Ot(y,z),M=Ot(y,M),K=[];break;default:typeof z.onClick!="function"&&typeof M.onClick=="function"&&(y.onclick=CT)}tr(k,M);var se;k=null;for(Xe in z)if(!M.hasOwnProperty(Xe)&&z.hasOwnProperty(Xe)&&z[Xe]!=null)if(Xe==="style"){var be=z[Xe];for(se in be)be.hasOwnProperty(se)&&(k||(k={}),k[se]="")}else Xe!=="dangerouslySetInnerHTML"&&Xe!=="children"&&Xe!=="suppressContentEditableWarning"&&Xe!=="suppressHydrationWarning"&&Xe!=="autoFocus"&&(i.hasOwnProperty(Xe)?K||(K=[]):(K=K||[]).push(Xe,null));for(Xe in M){var Ce=M[Xe];if(be=z!=null?z[Xe]:void 0,M.hasOwnProperty(Xe)&&Ce!==be&&(Ce!=null||be!=null))if(Xe==="style")if(be){for(se in be)!be.hasOwnProperty(se)||Ce&&Ce.hasOwnProperty(se)||(k||(k={}),k[se]="");for(se in Ce)Ce.hasOwnProperty(se)&&be[se]!==Ce[se]&&(k||(k={}),k[se]=Ce[se])}else k||(K||(K=[]),K.push(Xe,k)),k=Ce;else Xe==="dangerouslySetInnerHTML"?(Ce=Ce?Ce.__html:void 0,be=be?be.__html:void 0,Ce!=null&&be!==Ce&&(K=K||[]).push(Xe,Ce)):Xe==="children"?typeof Ce!="string"&&typeof Ce!="number"||(K=K||[]).push(Xe,""+Ce):Xe!=="suppressContentEditableWarning"&&Xe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Xe)?(Ce!=null&&Xe==="onScroll"&&ns("scroll",y),K||be===Ce||(K=[])):(K=K||[]).push(Xe,Ce))}k&&(K=K||[]).push("style",k);var Xe=K;(x.updateQueue=Xe)&&(x.flags|=4)}},_k=function(y,x,k,M){k!==M&&(x.flags|=4)};function v_(y,x){if(!is)switch(y.tailMode){case"hidden":x=y.tail;for(var k=null;x!==null;)x.alternate!==null&&(k=x),x=x.sibling;k===null?y.tail=null:k.sibling=null;break;case"collapsed":k=y.tail;for(var M=null;k!==null;)k.alternate!==null&&(M=k),k=k.sibling;M===null?x||y.tail===null?y.tail=null:y.tail.sibling=null:M.sibling=null}}function na(y){var x=y.alternate!==null&&y.alternate.child===y.child,k=0,M=0;if(x)for(var z=y.child;z!==null;)k|=z.lanes|z.childLanes,M|=z.subtreeFlags&14680064,M|=z.flags&14680064,z.return=y,z=z.sibling;else for(z=y.child;z!==null;)k|=z.lanes|z.childLanes,M|=z.subtreeFlags,M|=z.flags,z.return=y,z=z.sibling;return y.subtreeFlags|=M,y.childLanes=k,x}function dU(y,x,k){var M=x.pendingProps;switch(Mg(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return na(x),null;case 1:return $u(x.type)&&RT(),na(x),null;case 3:return M=x.stateNode,Cm(),rs(Lu),rs(Sa),UT(),M.pendingContext&&(M.context=M.pendingContext,M.pendingContext=null),(y===null||y.child===null)&&(n_(x)?x.flags|=4:y===null||y.memoizedState.isDehydrated&&!(x.flags&256)||(x.flags|=1024,Af!==null&&(Dk(Af),Af=null))),xk(y,x),na(x),null;case 5:jT(x);var z=Yh(uv.current);if(k=x.type,y!==null&&x.stateNode!=null)u4(y,x,k,M,z),y.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!M){if(x.stateNode===null)throw Error(n(166));return na(x),null}if(y=Yh(Od.current),n_(x)){M=x.stateNode,k=x.type;var K=x.memoizedProps;switch(M[Ad]=x,M[_m]=K,y=(x.mode&1)!==0,k){case"dialog":ns("cancel",M),ns("close",M);break;case"iframe":case"object":case"embed":ns("load",M);break;case"video":case"audio":for(z=0;z<zh.length;z++)ns(zh[z],M);break;case"source":ns("error",M);break;case"img":case"image":case"link":ns("error",M),ns("load",M);break;case"details":ns("toggle",M);break;case"input":tt(M,K),ns("invalid",M);break;case"select":M._wrapperState={wasMultiple:!!K.multiple},ns("invalid",M);break;case"textarea":qe(M,K),ns("invalid",M)}tr(k,K),z=null;for(var se in K)if(K.hasOwnProperty(se)){var be=K[se];se==="children"?typeof be=="string"?M.textContent!==be&&(K.suppressHydrationWarning!==!0&&Qx(M.textContent,be,y),z=["children",be]):typeof be=="number"&&M.textContent!==""+be&&(K.suppressHydrationWarning!==!0&&Qx(M.textContent,be,y),z=["children",""+be]):i.hasOwnProperty(se)&&be!=null&&se==="onScroll"&&ns("scroll",M)}switch(k){case"input":ye(M),Ge(M,K,!0);break;case"textarea":ye(M),wt(M);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(M.onclick=CT)}M=z,x.updateQueue=M,M!==null&&(x.flags|=4)}else{se=z.nodeType===9?z:z.ownerDocument,y==="http://www.w3.org/1999/xhtml"&&(y=ke(k)),y==="http://www.w3.org/1999/xhtml"?k==="script"?(y=se.createElement("div"),y.innerHTML="<script><\/script>",y=y.removeChild(y.firstChild)):typeof M.is=="string"?y=se.createElement(k,{is:M.is}):(y=se.createElement(k),k==="select"&&(se=y,M.multiple?se.multiple=!0:M.size&&(se.size=M.size))):y=se.createElementNS(y,k),y[Ad]=x,y[_m]=M,ta(y,x,!1,!1),x.stateNode=y;e:{switch(se=Ai(k,M),k){case"dialog":ns("cancel",y),ns("close",y),z=M;break;case"iframe":case"object":case"embed":ns("load",y),z=M;break;case"video":case"audio":for(z=0;z<zh.length;z++)ns(zh[z],y);z=M;break;case"source":ns("error",y),z=M;break;case"img":case"image":case"link":ns("error",y),ns("load",y),z=M;break;case"details":ns("toggle",y),z=M;break;case"input":tt(y,M),z=De(y,M),ns("invalid",y);break;case"option":z=M;break;case"select":y._wrapperState={wasMultiple:!!M.multiple},z=q({},M,{value:void 0}),ns("invalid",y);break;case"textarea":qe(y,M),z=Ot(y,M),ns("invalid",y);break;default:z=M}tr(k,z),be=z;for(K in be)if(be.hasOwnProperty(K)){var Ce=be[K];K==="style"?Ni(y,Ce):K==="dangerouslySetInnerHTML"?(Ce=Ce?Ce.__html:void 0,Ce!=null&&Lt(y,Ce)):K==="children"?typeof Ce=="string"?(k!=="textarea"||Ce!=="")&&Ft(y,Ce):typeof Ce=="number"&&Ft(y,""+Ce):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?Ce!=null&&K==="onScroll"&&ns("scroll",y):Ce!=null&&w(y,K,Ce,se))}switch(k){case"input":ye(y),Ge(y,M,!1);break;case"textarea":ye(y),wt(y);break;case"option":M.value!=null&&y.setAttribute("value",""+pe(M.value));break;case"select":y.multiple=!!M.multiple,K=M.value,K!=null?Tt(y,!!M.multiple,K,!1):M.defaultValue!=null&&Tt(y,!!M.multiple,M.defaultValue,!0);break;default:typeof z.onClick=="function"&&(y.onclick=CT)}switch(k){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}}M&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return na(x),null;case 6:if(y&&x.stateNode!=null)_k(y,x,y.memoizedProps,M);else{if(typeof M!="string"&&x.stateNode===null)throw Error(n(166));if(k=Yh(uv.current),Yh(Od.current),n_(x)){if(M=x.stateNode,k=x.memoizedProps,M[Ad]=x,(K=M.nodeValue!==k)&&(y=Aa,y!==null))switch(y.tag){case 3:Qx(M.nodeValue,k,(y.mode&1)!==0);break;case 5:y.memoizedProps.suppressHydrationWarning!==!0&&Qx(M.nodeValue,k,(y.mode&1)!==0)}K&&(x.flags|=4)}else M=(k.nodeType===9?k:k.ownerDocument).createTextNode(M),M[Ad]=x,x.stateNode=M}return na(x),null;case 13:if(rs(us),M=x.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(is&&Sl!==null&&x.mode&1&&!(x.flags&128))YI(),Nd(),x.flags|=98560,K=!1;else if(K=n_(x),M!==null&&M.dehydrated!==null){if(y===null){if(!K)throw Error(n(318));if(K=x.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(n(317));K[Ad]=x}else Nd(),!(x.flags&128)&&(x.memoizedState=null),x.flags|=4;na(x),K=!1}else Af!==null&&(Dk(Af),Af=null),K=!0;if(!K)return x.flags&65536?x:null}return x.flags&128?(x.lanes=k,x):(M=M!==null,M!==(y!==null&&y.memoizedState!==null)&&M&&(x.child.flags|=8192,x.mode&1&&(y===null||us.current&1?xo===0&&(xo=3):Ok())),x.updateQueue!==null&&(x.flags|=4),na(x),null);case 4:return Cm(),xk(y,x),y===null&&vm(x.stateNode.containerInfo),na(x),null;case 10:return LT(x.type._context),na(x),null;case 17:return $u(x.type)&&RT(),na(x),null;case 19:if(rs(us),K=x.memoizedState,K===null)return na(x),null;if(M=(x.flags&128)!==0,se=K.rendering,se===null)if(M)v_(K,!1);else{if(xo!==0||y!==null&&y.flags&128)for(y=x.child;y!==null;){if(se=Fg(y),se!==null){for(x.flags|=128,v_(K,!1),M=se.updateQueue,M!==null&&(x.updateQueue=M,x.flags|=4),x.subtreeFlags=0,M=k,k=x.child;k!==null;)K=k,y=M,K.flags&=14680066,se=K.alternate,se===null?(K.childLanes=0,K.lanes=y,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=se.childLanes,K.lanes=se.lanes,K.child=se.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=se.memoizedProps,K.memoizedState=se.memoizedState,K.updateQueue=se.updateQueue,K.type=se.type,y=se.dependencies,K.dependencies=y===null?null:{lanes:y.lanes,firstContext:y.firstContext}),k=k.sibling;return Ui(us,us.current&1|2),x.child}y=y.sibling}K.tail!==null&&fr()>Vg&&(x.flags|=128,M=!0,v_(K,!1),x.lanes=4194304)}else{if(!M)if(y=Fg(se),y!==null){if(x.flags|=128,M=!0,k=y.updateQueue,k!==null&&(x.updateQueue=k,x.flags|=4),v_(K,!0),K.tail===null&&K.tailMode==="hidden"&&!se.alternate&&!is)return na(x),null}else 2*fr()-K.renderingStartTime>Vg&&k!==1073741824&&(x.flags|=128,M=!0,v_(K,!1),x.lanes=4194304);K.isBackwards?(se.sibling=x.child,x.child=se):(k=K.last,k!==null?k.sibling=se:x.child=se,K.last=se)}return K.tail!==null?(x=K.tail,K.rendering=x,K.tail=x.sibling,K.renderingStartTime=fr(),x.sibling=null,k=us.current,Ui(us,M?k&1|2:k&1),x):(na(x),null);case 22:case 23:return Pk(),M=x.memoizedState!==null,y!==null&&y.memoizedState!==null!==M&&(x.flags|=8192),M&&x.mode&1?Il&1073741824&&(na(x),x.subtreeFlags&6&&(x.flags|=8192)):na(x),null;case 24:return null;case 25:return null}throw Error(n(156,x.tag))}function hU(y,x){switch(Mg(x),x.tag){case 1:return $u(x.type)&&RT(),y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 3:return Cm(),rs(Lu),rs(Sa),UT(),y=x.flags,y&65536&&!(y&128)?(x.flags=y&-65537|128,x):null;case 5:return jT(x),null;case 13:if(rs(us),y=x.memoizedState,y!==null&&y.dehydrated!==null){if(x.alternate===null)throw Error(n(340));Nd()}return y=x.flags,y&65536?(x.flags=y&-65537|128,x):null;case 19:return rs(us),null;case 4:return Cm(),null;case 10:return LT(x.type._context),null;case 22:case 23:return Pk(),null;case 24:return null;default:return null}}var nS=!1,ls=!1,ru=typeof WeakSet=="function"?WeakSet:Set,en=null;function yv(y,x){var k=y.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(M){vs(y,x,M)}else k.current=null}function b_(y,x,k){try{k()}catch(M){vs(y,x,M)}}var l4=!1;function pU(y,x){if(Jx=ve,y=Ii(),qx(y)){if("selectionStart"in y)var k={start:y.selectionStart,end:y.selectionEnd};else e:{k=(k=y.ownerDocument)&&k.defaultView||window;var M=k.getSelection&&k.getSelection();if(M&&M.rangeCount!==0){k=M.anchorNode;var z=M.anchorOffset,K=M.focusNode;M=M.focusOffset;try{k.nodeType,K.nodeType}catch{k=null;break e}var se=0,be=-1,Ce=-1,Xe=0,St=0,kt=y,_t=null;t:for(;;){for(var Xt;kt!==k||z!==0&&kt.nodeType!==3||(be=se+z),kt!==K||M!==0&&kt.nodeType!==3||(Ce=se+M),kt.nodeType===3&&(se+=kt.nodeValue.length),(Xt=kt.firstChild)!==null;)_t=kt,kt=Xt;for(;;){if(kt===y)break t;if(_t===k&&++Xe===z&&(be=se),_t===K&&++St===M&&(Ce=se),(Xt=kt.nextSibling)!==null)break;kt=_t,_t=kt.parentNode}kt=Xt}k=be===-1||Ce===-1?null:{start:be,end:Ce}}else k=null}k=k||{start:0,end:0}}else k=null;for(Dg={focusedElem:y,selectionRange:k},ve=!1,en=x;en!==null;)if(x=en,y=x.child,(x.subtreeFlags&1028)!==0&&y!==null)y.return=x,en=y;else for(;en!==null;){x=en;try{var rn=x.alternate;if(x.flags&1024)switch(x.tag){case 0:case 11:case 15:break;case 1:if(rn!==null){var sn=rn.memoizedProps,As=rn.memoizedState,Ve=x.stateNode,Pe=Ve.getSnapshotBeforeUpdate(x.elementType===x.type?sn:Ec(x.type,sn),As);Ve.__reactInternalSnapshotBeforeUpdate=Pe}break;case 3:var We=x.stateNode.containerInfo;We.nodeType===1?We.textContent="":We.nodeType===9&&We.documentElement&&We.removeChild(We.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Mt){vs(x,x.return,Mt)}if(y=x.sibling,y!==null){y.return=x.return,en=y;break}en=x.return}return rn=l4,l4=!1,rn}function Jh(y,x,k){var M=x.updateQueue;if(M=M!==null?M.lastEffect:null,M!==null){var z=M=M.next;do{if((z.tag&y)===y){var K=z.destroy;z.destroy=void 0,K!==void 0&&b_(x,k,K)}z=z.next}while(z!==M)}}function x_(y,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&y)===y){var M=k.create;k.destroy=M()}k=k.next}while(k!==x)}}function rS(y){var x=y.ref;if(x!==null){var k=y.stateNode;switch(y.tag){case 5:y=k;break;default:y=k}typeof x=="function"?x(y):x.current=y}}function c4(y){var x=y.alternate;x!==null&&(y.alternate=null,c4(x)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(x=y.stateNode,x!==null&&(delete x[Ad],delete x[_m],delete x[IT],delete x[oe],delete x[nv])),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}function f4(y){return y.tag===5||y.tag===3||y.tag===4}function d4(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||f4(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function wk(y,x,k){var M=y.tag;if(M===5||M===6)y=y.stateNode,x?k.nodeType===8?k.parentNode.insertBefore(y,x):k.insertBefore(y,x):(k.nodeType===8?(x=k.parentNode,x.insertBefore(y,k)):(x=k,x.appendChild(y)),k=k._reactRootContainer,k!=null||x.onclick!==null||(x.onclick=CT));else if(M!==4&&(y=y.child,y!==null))for(wk(y,x,k),y=y.sibling;y!==null;)wk(y,x,k),y=y.sibling}function iS(y,x,k){var M=y.tag;if(M===5||M===6)y=y.stateNode,x?k.insertBefore(y,x):k.appendChild(y);else if(M!==4&&(y=y.child,y!==null))for(iS(y,x,k),y=y.sibling;y!==null;)iS(y,x,k),y=y.sibling}var zo=null,Rf=!1;function Bd(y,x,k){for(k=k.child;k!==null;)Ek(y,x,k),k=k.sibling}function Ek(y,x,k){if(mo&&typeof mo.onCommitFiberUnmount=="function")try{mo.onCommitFiberUnmount(lc,k)}catch{}switch(k.tag){case 5:ls||yv(k,x);case 6:var M=zo,z=Rf;zo=null,Bd(y,x,k),zo=M,Rf=z,zo!==null&&(Rf?(y=zo,k=k.stateNode,y.nodeType===8?y.parentNode.removeChild(k):y.removeChild(k)):zo.removeChild(k.stateNode));break;case 18:zo!==null&&(Rf?(y=zo,k=k.stateNode,y.nodeType===8?qI(y.parentNode,k):y.nodeType===1&&qI(y,k),dr(y)):qI(zo,k.stateNode));break;case 4:M=zo,z=Rf,zo=k.stateNode.containerInfo,Rf=!0,Bd(y,x,k),zo=M,Rf=z;break;case 0:case 11:case 14:case 15:if(!ls&&(M=k.updateQueue,M!==null&&(M=M.lastEffect,M!==null))){z=M=M.next;do{var K=z,se=K.destroy;K=K.tag,se!==void 0&&(K&2||K&4)&&b_(k,x,se),z=z.next}while(z!==M)}Bd(y,x,k);break;case 1:if(!ls&&(yv(k,x),M=k.stateNode,typeof M.componentWillUnmount=="function"))try{M.props=k.memoizedProps,M.state=k.memoizedState,M.componentWillUnmount()}catch(be){vs(k,x,be)}Bd(y,x,k);break;case 21:Bd(y,x,k);break;case 22:k.mode&1?(ls=(M=ls)||k.memoizedState!==null,Bd(y,x,k),ls=M):Bd(y,x,k);break;default:Bd(y,x,k)}}function vv(y){var x=y.updateQueue;if(x!==null){y.updateQueue=null;var k=y.stateNode;k===null&&(k=y.stateNode=new ru),x.forEach(function(M){var z=_U.bind(null,y,M);k.has(M)||(k.add(M),M.then(z,z))})}}function Al(y,x){var k=x.deletions;if(k!==null)for(var M=0;M<k.length;M++){var z=k[M];try{var K=y,se=x,be=se;e:for(;be!==null;){switch(be.tag){case 5:zo=be.stateNode,Rf=!1;break e;case 3:zo=be.stateNode.containerInfo,Rf=!0;break e;case 4:zo=be.stateNode.containerInfo,Rf=!0;break e}be=be.return}if(zo===null)throw Error(n(160));Ek(K,se,z),zo=null,Rf=!1;var Ce=z.alternate;Ce!==null&&(Ce.return=null),z.return=null}catch(Xe){vs(z,x,Xe)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)Tk(x,y),x=x.sibling}function Tk(y,x){var k=y.alternate,M=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:if(Al(x,y),Df(y),M&4){try{Jh(3,y,y.return),x_(3,y)}catch(sn){vs(y,y.return,sn)}try{Jh(5,y,y.return)}catch(sn){vs(y,y.return,sn)}}break;case 1:Al(x,y),Df(y),M&512&&k!==null&&yv(k,k.return);break;case 5:if(Al(x,y),Df(y),M&512&&k!==null&&yv(k,k.return),y.flags&32){var z=y.stateNode;try{Ft(z,"")}catch(sn){vs(y,y.return,sn)}}if(M&4&&(z=y.stateNode,z!=null)){var K=y.memoizedProps,se=k!==null?k.memoizedProps:K,be=y.type,Ce=y.updateQueue;if(y.updateQueue=null,Ce!==null)try{be==="input"&&K.type==="radio"&&K.name!=null&&it(z,K),Ai(be,se);var Xe=Ai(be,K);for(se=0;se<Ce.length;se+=2){var St=Ce[se],kt=Ce[se+1];St==="style"?Ni(z,kt):St==="dangerouslySetInnerHTML"?Lt(z,kt):St==="children"?Ft(z,kt):w(z,St,kt,Xe)}switch(be){case"input":Me(z,K);break;case"textarea":dt(z,K);break;case"select":var _t=z._wrapperState.wasMultiple;z._wrapperState.wasMultiple=!!K.multiple;var Xt=K.value;Xt!=null?Tt(z,!!K.multiple,Xt,!1):_t!==!!K.multiple&&(K.defaultValue!=null?Tt(z,!!K.multiple,K.defaultValue,!0):Tt(z,!!K.multiple,K.multiple?[]:"",!1))}z[_m]=K}catch(sn){vs(y,y.return,sn)}}break;case 6:if(Al(x,y),Df(y),M&4){if(y.stateNode===null)throw Error(n(162));z=y.stateNode,K=y.memoizedProps;try{z.nodeValue=K}catch(sn){vs(y,y.return,sn)}}break;case 3:if(Al(x,y),Df(y),M&4&&k!==null&&k.memoizedState.isDehydrated)try{dr(x.containerInfo)}catch(sn){vs(y,y.return,sn)}break;case 4:Al(x,y),Df(y);break;case 13:Al(x,y),Df(y),z=y.child,z.flags&8192&&(K=z.memoizedState!==null,z.stateNode.isHidden=K,!K||z.alternate!==null&&z.alternate.memoizedState!==null||(Ak=fr())),M&4&&vv(y);break;case 22:if(St=k!==null&&k.memoizedState!==null,y.mode&1?(ls=(Xe=ls)||St,Al(x,y),ls=Xe):Al(x,y),Df(y),M&8192){if(Xe=y.memoizedState!==null,(y.stateNode.isHidden=Xe)&&!St&&y.mode&1)for(en=y,St=y.child;St!==null;){for(kt=en=St;en!==null;){switch(_t=en,Xt=_t.child,_t.tag){case 0:case 11:case 14:case 15:Jh(4,_t,_t.return);break;case 1:yv(_t,_t.return);var rn=_t.stateNode;if(typeof rn.componentWillUnmount=="function"){M=_t,k=_t.return;try{x=M,rn.props=x.memoizedProps,rn.state=x.memoizedState,rn.componentWillUnmount()}catch(sn){vs(M,k,sn)}}break;case 5:yv(_t,_t.return);break;case 22:if(_t.memoizedState!==null){km(kt);continue}}Xt!==null?(Xt.return=_t,en=Xt):km(kt)}St=St.sibling}e:for(St=null,kt=y;;){if(kt.tag===5){if(St===null){St=kt;try{z=kt.stateNode,Xe?(K=z.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(be=kt.stateNode,Ce=kt.memoizedProps.style,se=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null,be.style.display=Tr("display",se))}catch(sn){vs(y,y.return,sn)}}}else if(kt.tag===6){if(St===null)try{kt.stateNode.nodeValue=Xe?"":kt.memoizedProps}catch(sn){vs(y,y.return,sn)}}else if((kt.tag!==22&&kt.tag!==23||kt.memoizedState===null||kt===y)&&kt.child!==null){kt.child.return=kt,kt=kt.child;continue}if(kt===y)break e;for(;kt.sibling===null;){if(kt.return===null||kt.return===y)break e;St===kt&&(St=null),kt=kt.return}St===kt&&(St=null),kt.sibling.return=kt.return,kt=kt.sibling}}break;case 19:Al(x,y),Df(y),M&4&&vv(y);break;case 21:break;default:Al(x,y),Df(y)}}function Df(y){var x=y.flags;if(x&2){try{e:{for(var k=y.return;k!==null;){if(f4(k)){var M=k;break e}k=k.return}throw Error(n(160))}switch(M.tag){case 5:var z=M.stateNode;M.flags&32&&(Ft(z,""),M.flags&=-33);var K=d4(y);iS(y,K,z);break;case 3:case 4:var se=M.stateNode.containerInfo,be=d4(y);wk(y,be,se);break;default:throw Error(n(161))}}catch(Ce){vs(y,y.return,Ce)}y.flags&=-3}x&4096&&(y.flags&=-4097)}function sS(y,x,k){en=y,Sk(y)}function Sk(y,x,k){for(var M=(y.mode&1)!==0;en!==null;){var z=en,K=z.child;if(z.tag===22&&M){var se=z.memoizedState!==null||nS;if(!se){var be=z.alternate,Ce=be!==null&&be.memoizedState!==null||ls;be=nS;var Xe=ls;if(nS=se,(ls=Ce)&&!Xe)for(en=z;en!==null;)se=en,Ce=se.child,se.tag===22&&se.memoizedState!==null?h4(z):Ce!==null?(Ce.return=se,en=Ce):h4(z);for(;K!==null;)en=K,Sk(K),K=K.sibling;en=z,nS=be,ls=Xe}Nf(y)}else z.subtreeFlags&8772&&K!==null?(K.return=z,en=K):Nf(y)}}function Nf(y){for(;en!==null;){var x=en;if(x.flags&8772){var k=x.alternate;try{if(x.flags&8772)switch(x.tag){case 0:case 11:case 15:ls||x_(5,x);break;case 1:var M=x.stateNode;if(x.flags&4&&!ls)if(k===null)M.componentDidMount();else{var z=x.elementType===x.type?k.memoizedProps:Ec(x.type,k.memoizedProps);M.componentDidUpdate(z,k.memoizedState,M.__reactInternalSnapshotBeforeUpdate)}var K=x.updateQueue;K!==null&&QI(x,K,M);break;case 3:var se=x.updateQueue;if(se!==null){if(k=null,x.child!==null)switch(x.child.tag){case 5:k=x.child.stateNode;break;case 1:k=x.child.stateNode}QI(x,se,k)}break;case 5:var be=x.stateNode;if(k===null&&x.flags&4){k=be;var Ce=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":Ce.autoFocus&&k.focus();break;case"img":Ce.src&&(k.src=Ce.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Xe=x.alternate;if(Xe!==null){var St=Xe.memoizedState;if(St!==null){var kt=St.dehydrated;kt!==null&&dr(kt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}ls||x.flags&512&&rS(x)}catch(_t){vs(x,x.return,_t)}}if(x===y){en=null;break}if(k=x.sibling,k!==null){k.return=x.return,en=k;break}en=x.return}}function km(y){for(;en!==null;){var x=en;if(x===y){en=null;break}var k=x.sibling;if(k!==null){k.return=x.return,en=k;break}en=x.return}}function h4(y){for(;en!==null;){var x=en;try{switch(x.tag){case 0:case 11:case 15:var k=x.return;try{x_(4,x)}catch(Ce){vs(x,k,Ce)}break;case 1:var M=x.stateNode;if(typeof M.componentDidMount=="function"){var z=x.return;try{M.componentDidMount()}catch(Ce){vs(x,z,Ce)}}var K=x.return;try{rS(x)}catch(Ce){vs(x,K,Ce)}break;case 5:var se=x.return;try{rS(x)}catch(Ce){vs(x,se,Ce)}}}catch(Ce){vs(x,x.return,Ce)}if(x===y){en=null;break}var be=x.sibling;if(be!==null){be.return=x.return,en=be;break}en=x.return}}var p4=Math.ceil,oS=E.ReactCurrentDispatcher,Ck=E.ReactCurrentOwner,Tc=E.ReactCurrentBatchConfig,jr=0,Vo=null,Js=null,ra=0,Il=0,bv=Mu(0),xo=0,__=null,Rm=0,w_=0,aS=0,E_=null,ju=null,Ak=0,Vg=1/0,Zh=null,uS=!1,Ik=null,Dm=null,lS=!1,Nm=null,iu=0,T_=0,kk=null,cS=-1,S_=0;function su(){return jr&6?fr():cS!==-1?cS:cS=fr()}function Pm(y){return y.mode&1?jr&2&&ra!==0?ra&-ra:GO.transition!==null?(S_===0&&(S_=Dt()),S_):(y=ln,y!==0||(y=window.event,y=y===void 0?16:fi(y.type)),y):1}function Pf(y,x,k,M){if(50<T_)throw T_=0,kk=null,Error(n(185));In(y,k,M),(!(jr&2)||y!==Vo)&&(y===Vo&&(!(jr&2)&&(w_|=k),xo===4&&Om(y,ra)),Uu(y,M),k===1&&jr===0&&!(x.mode&1)&&(Vg=fr()+500,DT&&Em()))}function Uu(y,x){var k=y.callbackNode;Et(y,x);var M=rt(y,y===Vo?ra:0);if(M===0)k!==null&&gf(k),y.callbackNode=null,y.callbackPriority=0;else if(x=M&-M,y.callbackPriority!==x){if(k!=null&&gf(k),x===1)y.tag===0?Ng(m4.bind(null,y)):HO(m4.bind(null,y)),AT(function(){!(jr&6)&&Em()}),k=null;else{switch(br(M)){case 1:k=po;break;case 4:k=wl;break;case 16:k=Gs;break;case 536870912:k=Mh;break;default:k=Gs}k=w4(k,fS.bind(null,y))}y.callbackPriority=x,y.callbackNode=k}}function fS(y,x){if(cS=-1,S_=0,jr&6)throw Error(n(327));var k=y.callbackNode;if(xv()&&y.callbackNode!==k)return null;var M=rt(y,y===Vo?ra:0);if(M===0)return null;if(M&30||M&y.expiredLanes||x)x=dS(y,M);else{x=M;var z=jr;jr|=2;var K=y4();(Vo!==y||ra!==x)&&(Zh=null,Vg=fr()+500,qg(y,x));do try{yU();break}catch(be){g4(y,be)}while(!0);qh(),oS.current=K,jr=z,Js!==null?x=0:(Vo=null,ra=0,x=xo)}if(x!==0){if(x===2&&(z=xt(y),z!==0&&(M=z,x=Rk(y,z))),x===1)throw k=__,qg(y,0),Om(y,M),Uu(y,fr()),k;if(x===6)Om(y,M);else{if(z=y.current.alternate,!(M&30)&&!mU(z)&&(x=dS(y,M),x===2&&(K=xt(y),K!==0&&(M=K,x=Rk(y,K))),x===1))throw k=__,qg(y,0),Om(y,M),Uu(y,fr()),k;switch(y.finishedWork=z,y.finishedLanes=M,x){case 0:case 1:throw Error(n(345));case 2:Wg(y,ju,Zh);break;case 3:if(Om(y,M),(M&130023424)===M&&(x=Ak+500-fr(),10<x)){if(rt(y,0)!==0)break;if(z=y.suspendedLanes,(z&M)!==M){su(),y.pingedLanes|=y.suspendedLanes&z;break}y.timeoutHandle=bm(Wg.bind(null,y,ju,Zh),x);break}Wg(y,ju,Zh);break;case 4:if(Om(y,M),(M&4194240)===M)break;for(x=y.eventTimes,z=-1;0<M;){var se=31-go(M);K=1<<se,se=x[se],se>z&&(z=se),M&=~K}if(M=z,M=fr()-M,M=(120>M?120:480>M?480:1080>M?1080:1920>M?1920:3e3>M?3e3:4320>M?4320:1960*p4(M/1960))-M,10<M){y.timeoutHandle=bm(Wg.bind(null,y,ju,Zh),M);break}Wg(y,ju,Zh);break;case 5:Wg(y,ju,Zh);break;default:throw Error(n(329))}}}return Uu(y,fr()),y.callbackNode===k?fS.bind(null,y):null}function Rk(y,x){var k=E_;return y.current.memoizedState.isDehydrated&&(qg(y,x).flags|=256),y=dS(y,x),y!==2&&(x=ju,ju=k,x!==null&&Dk(x)),y}function Dk(y){ju===null?ju=y:ju.push.apply(ju,y)}function mU(y){for(var x=y;;){if(x.flags&16384){var k=x.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var M=0;M<k.length;M++){var z=k[M],K=z.getSnapshot;z=z.value;try{if(!Ye(K(),z))return!1}catch{return!1}}}if(k=x.child,x.subtreeFlags&16384&&k!==null)k.return=x,x=k;else{if(x===y)break;for(;x.sibling===null;){if(x.return===null||x.return===y)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Om(y,x){for(x&=~aS,x&=~w_,y.suspendedLanes|=x,y.pingedLanes&=~x,y=y.expirationTimes;0<x;){var k=31-go(x),M=1<<k;y[k]=-1,x&=~M}}function m4(y){if(jr&6)throw Error(n(327));xv();var x=rt(y,0);if(!(x&1))return Uu(y,fr()),null;var k=dS(y,x);if(y.tag!==0&&k===2){var M=xt(y);M!==0&&(x=M,k=Rk(y,M))}if(k===1)throw k=__,qg(y,0),Om(y,x),Uu(y,fr()),k;if(k===6)throw Error(n(345));return y.finishedWork=y.current.alternate,y.finishedLanes=x,Wg(y,ju,Zh),Uu(y,fr()),null}function Nk(y,x){var k=jr;jr|=1;try{return y(x)}finally{jr=k,jr===0&&(Vg=fr()+500,DT&&Em())}}function Hg(y){Nm!==null&&Nm.tag===0&&!(jr&6)&&xv();var x=jr;jr|=1;var k=Tc.transition,M=ln;try{if(Tc.transition=null,ln=1,y)return y()}finally{ln=M,Tc.transition=k,jr=x,!(jr&6)&&Em()}}function Pk(){Il=bv.current,rs(bv)}function qg(y,x){y.finishedWork=null,y.finishedLanes=0;var k=y.timeoutHandle;if(k!==-1&&(y.timeoutHandle=-1,e_(k)),Js!==null)for(k=Js.return;k!==null;){var M=k;switch(Mg(M),M.tag){case 1:M=M.type.childContextTypes,M!=null&&RT();break;case 3:Cm(),rs(Lu),rs(Sa),UT();break;case 5:jT(M);break;case 4:Cm();break;case 13:rs(us);break;case 19:rs(us);break;case 10:LT(M.type._context);break;case 22:case 23:Pk()}k=k.return}if(Vo=y,Js=y=Of(y.current,null),ra=Il=x,xo=0,__=null,aS=w_=Rm=0,ju=E_=null,$g!==null){for(x=0;x<$g.length;x++)if(k=$g[x],M=k.interleaved,M!==null){k.interleaved=null;var z=M.next,K=k.pending;if(K!==null){var se=K.next;K.next=z,M.next=se}k.pending=M}$g=null}return y}function g4(y,x){do{var k=Js;try{if(qh(),a_.current=GT,lv){for(var M=ys.memoizedState;M!==null;){var z=M.queue;z!==null&&(z.pending=null),M=M.next}lv=!1}if(Am=0,bo=Bs=ys=null,u_=!1,Bg=0,Ck.current=null,k===null||k.return===null){xo=1,__=x,Js=null;break}e:{var K=y,se=k.return,be=k,Ce=x;if(x=ra,be.flags|=32768,Ce!==null&&typeof Ce=="object"&&typeof Ce.then=="function"){var Xe=Ce,St=be,kt=St.tag;if(!(St.mode&1)&&(kt===0||kt===11||kt===15)){var _t=St.alternate;_t?(St.updateQueue=_t.updateQueue,St.memoizedState=_t.memoizedState,St.lanes=_t.lanes):(St.updateQueue=null,St.memoizedState=null)}var Xt=i4(se);if(Xt!==null){Xt.flags&=-257,hk(Xt,se,be,K,x),Xt.mode&1&&h_(K,Xe,x),x=Xt,Ce=Xe;var rn=x.updateQueue;if(rn===null){var sn=new Set;sn.add(Ce),x.updateQueue=sn}else rn.add(Ce);break e}else{if(!(x&1)){h_(K,Xe,x),Ok();break e}Ce=Error(n(426))}}else if(is&&be.mode&1){var As=i4(se);if(As!==null){!(As.flags&65536)&&(As.flags|=256),hk(As,se,be,K,x),Pd(zg(Ce,be));break e}}K=Ce=zg(Ce,be),xo!==4&&(xo=2),E_===null?E_=[K]:E_.push(K),K=se;do{switch(K.tag){case 3:K.flags|=65536,x&=-x,K.lanes|=x;var Ve=d_(K,Ce,x);XO(K,Ve);break e;case 1:be=Ce;var Pe=K.type,We=K.stateNode;if(!(K.flags&128)&&(typeof Pe.getDerivedStateFromError=="function"||We!==null&&typeof We.componentDidCatch=="function"&&(Dm===null||!Dm.has(We)))){K.flags|=65536,x&=-x,K.lanes|=x;var Mt=JT(K,be,x);XO(K,Mt);break e}}K=K.return}while(K!==null)}b4(k)}catch(on){x=on,Js===k&&k!==null&&(Js=k=k.return);continue}break}while(!0)}function y4(){var y=oS.current;return oS.current=GT,y===null?GT:y}function Ok(){(xo===0||xo===3||xo===2)&&(xo=4),Vo===null||!(Rm&268435455)&&!(w_&268435455)||Om(Vo,ra)}function dS(y,x){var k=jr;jr|=2;var M=y4();(Vo!==y||ra!==x)&&(Zh=null,qg(y,x));do try{gU();break}catch(z){g4(y,z)}while(!0);if(qh(),jr=k,oS.current=M,Js!==null)throw Error(n(261));return Vo=null,ra=0,xo}function gU(){for(;Js!==null;)v4(Js)}function yU(){for(;Js!==null&&!yf();)v4(Js)}function v4(y){var x=_4(y.alternate,y,Il);y.memoizedProps=y.pendingProps,x===null?b4(y):Js=x,Ck.current=null}function b4(y){var x=y;do{var k=x.alternate;if(y=x.return,x.flags&32768){if(k=hU(k,x),k!==null){k.flags&=32767,Js=k;return}if(y!==null)y.flags|=32768,y.subtreeFlags=0,y.deletions=null;else{xo=6,Js=null;return}}else if(k=dU(k,x,Il),k!==null){Js=k;return}if(x=x.sibling,x!==null){Js=x;return}Js=x=y}while(x!==null);xo===0&&(xo=5)}function Wg(y,x,k){var M=ln,z=Tc.transition;try{Tc.transition=null,ln=1,vU(y,x,k,M)}finally{Tc.transition=z,ln=M}return null}function vU(y,x,k,M){do xv();while(Nm!==null);if(jr&6)throw Error(n(327));k=y.finishedWork;var z=y.finishedLanes;if(k===null)return null;if(y.finishedWork=null,y.finishedLanes=0,k===y.current)throw Error(n(177));y.callbackNode=null,y.callbackPriority=0;var K=k.lanes|k.childLanes;if(un(y,K),y===Vo&&(Js=Vo=null,ra=0),!(k.subtreeFlags&2064)&&!(k.flags&2064)||lS||(lS=!0,w4(Gs,function(){return xv(),null})),K=(k.flags&15990)!==0,k.subtreeFlags&15990||K){K=Tc.transition,Tc.transition=null;var se=ln;ln=1;var be=jr;jr|=4,Ck.current=null,pU(y,k),Tk(k,y),uU(Dg),ve=!!Jx,Dg=Jx=null,y.current=k,sS(k),vf(),jr=be,ln=se,Tc.transition=K}else y.current=k;if(lS&&(lS=!1,Nm=y,iu=z),K=y.pendingLanes,K===0&&(Dm=null),pm(k.stateNode),Uu(y,fr()),x!==null)for(M=y.onRecoverableError,k=0;k<x.length;k++)z=x[k],M(z.value,{componentStack:z.stack,digest:z.digest});if(uS)throw uS=!1,y=Ik,Ik=null,y;return iu&1&&y.tag!==0&&xv(),K=y.pendingLanes,K&1?y===kk?T_++:(T_=0,kk=y):T_=0,Em(),null}function xv(){if(Nm!==null){var y=br(iu),x=Tc.transition,k=ln;try{if(Tc.transition=null,ln=16>y?16:y,Nm===null)var M=!1;else{if(y=Nm,Nm=null,iu=0,jr&6)throw Error(n(331));var z=jr;for(jr|=4,en=y.current;en!==null;){var K=en,se=K.child;if(en.flags&16){var be=K.deletions;if(be!==null){for(var Ce=0;Ce<be.length;Ce++){var Xe=be[Ce];for(en=Xe;en!==null;){var St=en;switch(St.tag){case 0:case 11:case 15:Jh(8,St,K)}var kt=St.child;if(kt!==null)kt.return=St,en=kt;else for(;en!==null;){St=en;var _t=St.sibling,Xt=St.return;if(c4(St),St===Xe){en=null;break}if(_t!==null){_t.return=Xt,en=_t;break}en=Xt}}}var rn=K.alternate;if(rn!==null){var sn=rn.child;if(sn!==null){rn.child=null;do{var As=sn.sibling;sn.sibling=null,sn=As}while(sn!==null)}}en=K}}if(K.subtreeFlags&2064&&se!==null)se.return=K,en=se;else e:for(;en!==null;){if(K=en,K.flags&2048)switch(K.tag){case 0:case 11:case 15:Jh(9,K,K.return)}var Ve=K.sibling;if(Ve!==null){Ve.return=K.return,en=Ve;break e}en=K.return}}var Pe=y.current;for(en=Pe;en!==null;){se=en;var We=se.child;if(se.subtreeFlags&2064&&We!==null)We.return=se,en=We;else e:for(se=Pe;en!==null;){if(be=en,be.flags&2048)try{switch(be.tag){case 0:case 11:case 15:x_(9,be)}}catch(on){vs(be,be.return,on)}if(be===se){en=null;break e}var Mt=be.sibling;if(Mt!==null){Mt.return=be.return,en=Mt;break e}en=be.return}}if(jr=z,Em(),mo&&typeof mo.onPostCommitFiberRoot=="function")try{mo.onPostCommitFiberRoot(lc,y)}catch{}M=!0}return M}finally{ln=k,Tc.transition=x}}return!1}function hS(y,x,k){x=zg(k,x),x=d_(y,x,1),y=_c(y,x,1),x=su(),y!==null&&(In(y,1,x),Uu(y,x))}function vs(y,x,k){if(y.tag===3)hS(y,y,k);else for(;x!==null;){if(x.tag===3){hS(x,y,k);break}else if(x.tag===1){var M=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(Dm===null||!Dm.has(M))){y=zg(k,y),y=JT(x,y,1),x=_c(x,y,1),y=su(),x!==null&&(In(x,1,y),Uu(x,y));break}}x=x.return}}function bU(y,x,k){var M=y.pingCache;M!==null&&M.delete(x),x=su(),y.pingedLanes|=y.suspendedLanes&k,Vo===y&&(ra&k)===k&&(xo===4||xo===3&&(ra&130023424)===ra&&500>fr()-Ak?qg(y,0):aS|=k),Uu(y,x)}function x4(y,x){x===0&&(y.mode&1?(x=Be,Be<<=1,!(Be&130023424)&&(Be=4194304)):x=1);var k=su();y=Wh(y,x),y!==null&&(In(y,x,k),Uu(y,k))}function xU(y){var x=y.memoizedState,k=0;x!==null&&(k=x.retryLane),x4(y,k)}function _U(y,x){var k=0;switch(y.tag){case 13:var M=y.stateNode,z=y.memoizedState;z!==null&&(k=z.retryLane);break;case 19:M=y.stateNode;break;default:throw Error(n(314))}M!==null&&M.delete(x),x4(y,k)}var _4;_4=function(y,x,k){if(y!==null)if(y.memoizedProps!==x.pendingProps||Lu.current)nu=!0;else{if(!(y.lanes&k)&&!(x.flags&128))return nu=!1,a4(y,x,k);nu=!!(y.flags&131072)}else nu=!1,is&&x.flags&1048576&&qO(x,PT,x.index);switch(x.lanes=0,x.tag){case 2:var M=x.type;tS(y,x),y=x.pendingProps;var z=iv(x,Sa.current);Sm(x,k),z=jg(null,x,M,y,z,k);var K=zT();return x.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,$u(M)?(K=!0,gc(x)):K=!1,x.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,FT(x),z.updater=XT,x.stateNode=z,z._reactInternals=x,dk(x,M,y,k),x=bk(null,x,M,!0,K,k)):(x.tag=0,is&&K&&t_(x),ea(null,x,z,k),x=x.child),x;case 16:M=x.elementType;e:{switch(tS(y,x),y=x.pendingProps,z=M._init,M=z(M._payload),x.type=M,z=x.tag=EU(M),y=Ec(M,y),z){case 0:x=yk(null,x,M,y,k);break e;case 1:x=vk(null,x,M,y,k);break e;case 11:x=s4(null,x,M,y,k);break e;case 14:x=pk(null,x,M,Ec(M.type,y),k);break e}throw Error(n(306,M,""))}return x;case 0:return M=x.type,z=x.pendingProps,z=x.elementType===M?z:Ec(M,z),yk(y,x,M,z,k);case 1:return M=x.type,z=x.pendingProps,z=x.elementType===M?z:Ec(M,z),vk(y,x,M,z,k);case 3:e:{if(o4(x),y===null)throw Error(n(387));M=x.pendingProps,K=x.memoizedState,z=K.element,KO(y,x),av(x,M,null,k);var se=x.memoizedState;if(M=se.element,K.isDehydrated)if(K={element:M,isDehydrated:!1,cache:se.cache,pendingSuspenseBoundaries:se.pendingSuspenseBoundaries,transitions:se.transitions},x.updateQueue.baseState=K,x.memoizedState=K,x.flags&256){z=zg(Error(n(423)),x),x=Fd(y,x,M,k,z);break e}else if(M!==z){z=zg(Error(n(424)),x),x=Fd(y,x,M,k,z);break e}else for(Sl=xm(x.stateNode.containerInfo.firstChild),Aa=x,is=!0,Af=null,k=MT(x,null,M,k),x.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(Nd(),M===z){x=kf(y,x,k);break e}ea(y,x,M,k)}x=x.child}return x;case 5:return ZI(x),y===null&&Fu(x),M=x.type,z=x.pendingProps,K=y!==null?y.memoizedProps:null,se=z.children,Zx(M,z)?se=null:K!==null&&Zx(M,K)&&(x.flags|=32),gk(y,x),ea(y,x,se,k),x.child;case 6:return y===null&&Fu(x),null;case 13:return eS(y,x,k);case 4:return JI(x,x.stateNode.containerInfo),M=x.pendingProps,y===null?x.child=Cs(x,null,M,k):ea(y,x,M,k),x.child;case 11:return M=x.type,z=x.pendingProps,z=x.elementType===M?z:Ec(M,z),s4(y,x,M,z,k);case 7:return ea(y,x,x.pendingProps,k),x.child;case 8:return ea(y,x,x.pendingProps.children,k),x.child;case 12:return ea(y,x,x.pendingProps.children,k),x.child;case 10:e:{if(M=x.type._context,z=x.pendingProps,K=x.memoizedProps,se=z.value,Ui(i_,M._currentValue),M._currentValue=se,K!==null)if(Ye(K.value,se)){if(K.children===z.children&&!Lu.current){x=kf(y,x,k);break e}}else for(K=x.child,K!==null&&(K.return=x);K!==null;){var be=K.dependencies;if(be!==null){se=K.child;for(var Ce=be.firstContext;Ce!==null;){if(Ce.context===M){if(K.tag===1){Ce=Gh(-1,k&-k),Ce.tag=2;var Xe=K.updateQueue;if(Xe!==null){Xe=Xe.shared;var St=Xe.pending;St===null?Ce.next=Ce:(Ce.next=St.next,St.next=Ce),Xe.pending=Ce}}K.lanes|=k,Ce=K.alternate,Ce!==null&&(Ce.lanes|=k),Zo(K.return,k,x),be.lanes|=k;break}Ce=Ce.next}}else if(K.tag===10)se=K.type===x.type?null:K.child;else if(K.tag===18){if(se=K.return,se===null)throw Error(n(341));se.lanes|=k,be=se.alternate,be!==null&&(be.lanes|=k),Zo(se,k,x),se=K.sibling}else se=K.child;if(se!==null)se.return=K;else for(se=K;se!==null;){if(se===x){se=null;break}if(K=se.sibling,K!==null){K.return=se.return,se=K;break}se=se.return}K=se}ea(y,x,z.children,k),x=x.child}return x;case 9:return z=x.type,M=x.pendingProps.children,Sm(x,k),z=bc(z),M=M(z),x.flags|=1,ea(y,x,M,k),x.child;case 14:return M=x.type,z=Ec(M,x.pendingProps),z=Ec(M.type,z),pk(y,x,M,z,k);case 15:return $d(y,x,x.type,x.pendingProps,k);case 17:return M=x.type,z=x.pendingProps,z=x.elementType===M?z:Ec(M,z),tS(y,x),x.tag=1,$u(M)?(y=!0,gc(x)):y=!1,Sm(x,k),Ug(x,M,z),dk(x,M,z,k),bk(null,x,M,!0,y,k);case 19:return Im(y,x,k);case 22:return mk(y,x,k)}throw Error(n(156,x.tag))};function w4(y,x){return wd(y,x)}function wU(y,x,k,M){this.tag=y,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sc(y,x,k,M){return new wU(y,x,k,M)}function pS(y){return y=y.prototype,!(!y||!y.isReactComponent)}function EU(y){if(typeof y=="function")return pS(y)?1:0;if(y!=null){if(y=y.$$typeof,y===B)return 11;if(y===Q)return 14}return 2}function Of(y,x){var k=y.alternate;return k===null?(k=Sc(y.tag,x,y.key,y.mode),k.elementType=y.elementType,k.type=y.type,k.stateNode=y.stateNode,k.alternate=y,y.alternate=k):(k.pendingProps=x,k.type=y.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=y.flags&14680064,k.childLanes=y.childLanes,k.lanes=y.lanes,k.child=y.child,k.memoizedProps=y.memoizedProps,k.memoizedState=y.memoizedState,k.updateQueue=y.updateQueue,x=y.dependencies,k.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},k.sibling=y.sibling,k.index=y.index,k.ref=y.ref,k}function mS(y,x,k,M,z,K){var se=2;if(M=y,typeof y=="function")pS(y)&&(se=1);else if(typeof y=="string")se=5;else e:switch(y){case I:return Gg(k.children,z,K,x);case R:se=8,z|=8;break;case N:return y=Sc(12,k,x,z|2),y.elementType=N,y.lanes=K,y;case F:return y=Sc(13,k,x,z),y.elementType=F,y.lanes=K,y;case H:return y=Sc(19,k,x,z),y.elementType=H,y.lanes=K,y;case ne:return gS(k,z,K,x);default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case O:se=10;break e;case L:se=9;break e;case B:se=11;break e;case Q:se=14;break e;case J:se=16,M=null;break e}throw Error(n(130,y==null?y:typeof y,""))}return x=Sc(se,k,x,z),x.elementType=y,x.type=M,x.lanes=K,x}function Gg(y,x,k,M){return y=Sc(7,y,M,x),y.lanes=k,y}function gS(y,x,k,M){return y=Sc(22,y,M,x),y.elementType=ne,y.lanes=k,y.stateNode={isHidden:!1},y}function Mk(y,x,k){return y=Sc(6,y,null,x),y.lanes=k,y}function Lk(y,x,k){return x=Sc(4,y.children!==null?y.children:[],y.key,x),x.lanes=k,x.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},x}function TU(y,x,k,M,z){this.tag=x,this.containerInfo=y,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qt(0),this.expirationTimes=qt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qt(0),this.identifierPrefix=M,this.onRecoverableError=z,this.mutableSourceEagerHydrationData=null}function $k(y,x,k,M,z,K,se,be,Ce){return y=new TU(y,x,k,be,Ce),x===1?(x=1,K===!0&&(x|=8)):x=0,K=Sc(3,null,null,x),y.current=K,K.stateNode=y,K.memoizedState={element:M,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},FT(K),y}function SU(y,x,k){var M=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:C,key:M==null?null:""+M,children:y,containerInfo:x,implementation:k}}function E4(y){if(!y)return wm;y=y._reactInternals;e:{if(ms(y)!==y||y.tag!==1)throw Error(n(170));var x=y;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if($u(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(n(171))}if(y.tag===1){var k=y.type;if($u(k))return zO(y,k,x)}return x}function T4(y,x,k,M,z,K,se,be,Ce){return y=$k(k,M,!0,y,z,K,se,be,Ce),y.context=E4(null),k=y.current,M=su(),z=Pm(k),K=Gh(M,z),K.callback=x??null,_c(k,K,z),y.current.lanes=z,In(y,z,M),Uu(y,M),y}function yS(y,x,k,M){var z=x.current,K=su(),se=Pm(z);return k=E4(k),x.context===null?x.context=k:x.pendingContext=k,x=Gh(K,se),x.payload={element:y},M=M===void 0?null:M,M!==null&&(x.callback=M),y=_c(z,x,se),y!==null&&(Pf(y,z,se,K),BT(y,z,se)),se}function vS(y){if(y=y.current,!y.child)return null;switch(y.child.tag){case 5:return y.child.stateNode;default:return y.child.stateNode}}function S4(y,x){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var k=y.retryLane;y.retryLane=k!==0&&k<x?k:x}}function Fk(y,x){S4(y,x),(y=y.alternate)&&S4(y,x)}var C4=typeof reportError=="function"?reportError:function(y){console.error(y)};function Bk(y){this._internalRoot=y}C_.prototype.render=Bk.prototype.render=function(y){var x=this._internalRoot;if(x===null)throw Error(n(409));yS(y,x,null,null)},C_.prototype.unmount=Bk.prototype.unmount=function(){var y=this._internalRoot;if(y!==null){this._internalRoot=null;var x=y.containerInfo;Hg(function(){yS(null,y,null,null)}),x[Tl]=null}};function C_(y){this._internalRoot=y}C_.prototype.unstable_scheduleHydration=function(y){if(y){var x=Lh();y={blockedOn:null,target:y,priority:x};for(var k=0;k<Nu.length&&x!==0&&x<Nu[k].priority;k++);Nu.splice(k,0,y),k===0&&wg(y)}};function bS(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)}function xS(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11&&(y.nodeType!==8||y.nodeValue!==" react-mount-point-unstable "))}function A4(){}function CU(y,x,k,M,z){if(z){if(typeof M=="function"){var K=M;M=function(){var Xe=vS(se);K.call(Xe)}}var se=T4(x,M,y,0,null,!1,!1,"",A4);return y._reactRootContainer=se,y[Tl]=se.current,vm(y.nodeType===8?y.parentNode:y),Hg(),se}for(;z=y.lastChild;)y.removeChild(z);if(typeof M=="function"){var be=M;M=function(){var Xe=vS(Ce);be.call(Xe)}}var Ce=$k(y,0,!1,null,null,!1,!1,"",A4);return y._reactRootContainer=Ce,y[Tl]=Ce.current,vm(y.nodeType===8?y.parentNode:y),Hg(function(){yS(x,Ce,k,M)}),Ce}function _S(y,x,k,M,z){var K=k._reactRootContainer;if(K){var se=K;if(typeof z=="function"){var be=z;z=function(){var Ce=vS(se);be.call(Ce)}}yS(x,se,y,z)}else se=CU(k,x,y,z,M);return vS(se)}Ys=function(y){switch(y.tag){case 3:var x=y.stateNode;if(x.current.memoizedState.isDehydrated){var k=Re(x.pendingLanes);k!==0&&(nr(x,k|1),Uu(x,fr()),!(jr&6)&&(Vg=fr()+500,Em()))}break;case 13:Hg(function(){var M=Wh(y,1);if(M!==null){var z=su();Pf(M,y,1,z)}}),Fk(y,1)}},Qa=function(y){if(y.tag===13){var x=Wh(y,134217728);if(x!==null){var k=su();Pf(x,y,134217728,k)}Fk(y,134217728)}},cc=function(y){if(y.tag===13){var x=Pm(y),k=Wh(y,x);if(k!==null){var M=su();Pf(k,y,x,M)}Fk(y,x)}},Lh=function(){return ln},bf=function(y,x){var k=ln;try{return ln=y,x()}finally{ln=k}},Ji=function(y,x,k){switch(x){case"input":if(Me(y,k),x=k.name,k.type==="radio"&&x!=null){for(k=y;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<k.length;x++){var M=k[x];if(M!==y&&M.form===y.form){var z=kT(M);if(!z)throw Error(n(90));he(M),Me(M,z)}}}break;case"textarea":dt(y,k);break;case"select":x=k.value,x!=null&&Tt(y,!!k.multiple,x,!1)}},xa=Nk,Du=Hg;var wS={usingClientEntryPoint:!1,Events:[Ta,ir,kT,$o,oc,Nk]},A_={findFiberByHostInstance:Id,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AU={bundleType:A_.bundleType,version:A_.version,rendererPackageName:A_.rendererPackageName,rendererConfig:A_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(y){return y=Ph(y),y===null?null:y.stateNode},findFiberByHostInstance:A_.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ES=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ES.isDisabled&&ES.supportsFiber)try{lc=ES.inject(AU),mo=ES}catch{}}return kc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wS,kc.createPortal=function(y,x){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bS(x))throw Error(n(200));return SU(y,x,null,k)},kc.createRoot=function(y,x){if(!bS(y))throw Error(n(299));var k=!1,M="",z=C4;return x!=null&&(x.unstable_strictMode===!0&&(k=!0),x.identifierPrefix!==void 0&&(M=x.identifierPrefix),x.onRecoverableError!==void 0&&(z=x.onRecoverableError)),x=$k(y,1,!1,null,null,k,!1,M,z),y[Tl]=x.current,vm(y.nodeType===8?y.parentNode:y),new Bk(x)},kc.findDOMNode=function(y){if(y==null)return null;if(y.nodeType===1)return y;var x=y._reactInternals;if(x===void 0)throw typeof y.render=="function"?Error(n(188)):(y=Object.keys(y).join(","),Error(n(268,y)));return y=Ph(x),y=y===null?null:y.stateNode,y},kc.flushSync=function(y){return Hg(y)},kc.hydrate=function(y,x,k){if(!xS(x))throw Error(n(200));return _S(null,y,x,!0,k)},kc.hydrateRoot=function(y,x,k){if(!bS(y))throw Error(n(405));var M=k!=null&&k.hydratedSources||null,z=!1,K="",se=C4;if(k!=null&&(k.unstable_strictMode===!0&&(z=!0),k.identifierPrefix!==void 0&&(K=k.identifierPrefix),k.onRecoverableError!==void 0&&(se=k.onRecoverableError)),x=T4(x,null,y,1,k??null,z,!1,K,se),y[Tl]=x.current,vm(y),M)for(y=0;y<M.length;y++)k=M[y],z=k._getVersion,z=z(k._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[k,z]:x.mutableSourceEagerHydrationData.push(k,z);return new C_(x)},kc.render=function(y,x,k){if(!xS(x))throw Error(n(200));return _S(null,y,x,!1,k)},kc.unmountComponentAtNode=function(y){if(!xS(y))throw Error(n(40));return y._reactRootContainer?(Hg(function(){_S(null,null,y,!1,function(){y._reactRootContainer=null,y[Tl]=null})}),!0):!1},kc.unstable_batchedUpdates=Nk,kc.unstable_renderSubtreeIntoContainer=function(y,x,k,M){if(!xS(k))throw Error(n(200));if(y==null||y._reactInternals===void 0)throw Error(n(38));return _S(y,x,k,!1,M)},kc.version="18.3.1-next-f1338f8080-20240426",kc}var Iue;function Wxe(){if(Iue)return zU.exports;Iue=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),zU.exports=mUe(),zU.exports}var kue;function gUe(){if(kue)return D4;kue=1;var e=Wxe();return D4.createRoot=e.createRoot,D4.hydrateRoot=e.hydrateRoot,D4}var yUe=gUe();const vUe=yh(yUe);var Jm=function(){return Jm=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Jm.apply(this,arguments)};function FP(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function my(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Rue(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function bUe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Hr(e){return this instanceof Hr?(this.v=e,this):new Hr(e)}function hw(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,v){s.push([h,m,g,v])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Hr?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function qU(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Hr(e[i](o)),done:!1}:s?s(o):o}:s}}function kD(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Rue=="function"?Rue(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var WM="right-scroll-bar-position",GM="width-before-scroll-bar",xUe="with-scroll-bars-hidden",_Ue="--removed-body-scroll-bar-size";function WU(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function wUe(e,t){var n=P.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var EUe=typeof window<"u"?P.useLayoutEffect:P.useEffect,Due=new WeakMap;function TUe(e,t){var n=wUe(null,function(r){return e.forEach(function(i){return WU(i,r)})});return EUe(function(){var r=Due.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||WU(a,null)}),s.forEach(function(a){i.has(a)||WU(a,o)})}Due.set(n,e)},[e]),n}function SUe(e){return e}function CUe(e,t){t===void 0&&(t=SUe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function AUe(e){e===void 0&&(e={});var t=CUe(null);return t.options=Jm({async:!0,ssr:!1},e),t}var Gxe=function(e){var t=e.sideCar,n=FP(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return P.createElement(r,Jm({},n))};Gxe.isSideCarExport=!0;function IUe(e,t){return e.useMedium(t),Gxe}var Yxe=AUe(),GU=function(){},W8=P.forwardRef(function(e,t){var n=P.useRef(null),r=P.useState({onScrollCapture:GU,onWheelCapture:GU,onTouchMoveCapture:GU}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,v=g===void 0?"div":g,b=e.gapMode,w=FP(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=d,T=TUe([n,t]),C=Jm(Jm({},w),i);return P.createElement(P.Fragment,null,c&&P.createElement(E,{sideCar:Yxe,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:b}),o?P.cloneElement(P.Children.only(a),Jm(Jm({},C),{ref:T})):P.createElement(v,Jm({},C,{className:u,ref:T}),a))});W8.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};W8.classNames={fullWidth:GM,zeroRight:WM};var Kxe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function kUe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Kxe();return t&&e.setAttribute("nonce",t),e}function RUe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function DUe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var NUe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=kUe())&&(RUe(t,n),DUe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},PUe=function(){var e=NUe();return function(t,n){P.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},OUe=function(){var e=PUe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},MUe={left:0,top:0,right:0,gap:0},YU=function(e){return parseInt(e||"",10)||0},LUe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[YU(n),YU(r),YU(i)]},$Ue=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return MUe;var t=LUe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},FUe=OUe(),D2="data-scroll-locked",BUe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(xUe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(D2,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(WM,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(GM,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(WM," .").concat(WM,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(GM," .").concat(GM,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(D2,`] {
    `).concat(_Ue,": ").concat(a,`px;
  }
`)},Nue=function(){var e=parseInt(document.body.getAttribute(D2)||"0",10);return isFinite(e)?e:0},jUe=function(){P.useEffect(function(){return document.body.setAttribute(D2,(Nue()+1).toString()),function(){var e=Nue()-1;e<=0?document.body.removeAttribute(D2):document.body.setAttribute(D2,e.toString())}},[])},UUe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;jUe();var s=P.useMemo(function(){return $Ue(i)},[i]);return P.createElement(FUe,{styles:BUe(s,!t,i,n?"":"!important")})};function zUe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Kxe();return t&&e.setAttribute("nonce",t),e}function VUe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function HUe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var qUe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=zUe())&&(VUe(t,n),HUe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},WUe=function(){var e=qUe();return function(t,n){P.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},GUe=function(){var e=WUe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},qq=!1;if(typeof window<"u")try{var N4=Object.defineProperty({},"passive",{get:function(){return qq=!0,!0}});window.addEventListener("test",N4,N4),window.removeEventListener("test",N4,N4)}catch{qq=!1}var CS=qq?{passive:!1}:!1,YUe=function(e){return e.tagName==="TEXTAREA"},Xxe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!YUe(e)&&n[t]==="visible")},KUe=function(e){return Xxe(e,"overflowY")},XUe=function(e){return Xxe(e,"overflowX")},Pue=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Qxe(e,r);if(i){var s=Jxe(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},QUe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},JUe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Qxe=function(e,t){return e==="v"?KUe(t):XUe(t)},Jxe=function(e,t){return e==="v"?QUe(t):JUe(t)},ZUe=function(e,t){return e==="h"&&t==="rtl"?-1:1},eze=function(e,t,n,r,i){var s=ZUe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=Jxe(e,a),p=h[0],m=h[1],g=h[2],v=m-g-s*p;(p||v)&&Qxe(e,a)&&(f+=v,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&Math.abs(f)<1||!c&&Math.abs(d)<1)&&(l=!0),l},P4=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Oue=function(e){return[e.deltaX,e.deltaY]},Mue=function(e){return e&&"current"in e?e.current:e},tze=function(e,t){return e[0]===t[0]&&e[1]===t[1]},nze=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},rze=0,AS=[];function ize(e){var t=P.useRef([]),n=P.useRef([0,0]),r=P.useRef(),i=P.useState(rze++)[0],s=P.useState(GUe)[0],o=P.useRef(e);P.useEffect(function(){o.current=e},[e]),P.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=bUe([e.lockRef.current],(e.shards||[]).map(Mue),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=P.useCallback(function(m,g){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!o.current.allowPinchZoom;var v=P4(m),b=n.current,w="deltaX"in m?m.deltaX:b[0]-v[0],E="deltaY"in m?m.deltaY:b[1]-v[1],T,C=m.target,I=Math.abs(w)>Math.abs(E)?"h":"v";if("touches"in m&&I==="h"&&C.type==="range")return!1;var R=Pue(I,C);if(!R)return!0;if(R?T=I:(T=I==="v"?"h":"v",R=Pue(I,C)),!R)return!1;if(!r.current&&"changedTouches"in m&&(w||E)&&(r.current=T),!T)return!0;var N=r.current||T;return eze(N,g,m,N==="h"?w:E)},[]),u=P.useCallback(function(m){var g=m;if(!(!AS.length||AS[AS.length-1]!==s)){var v="deltaY"in g?Oue(g):P4(g),b=t.current.filter(function(T){return T.name===g.type&&(T.target===g.target||g.target===T.shadowParent)&&tze(T.delta,v)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(Mue).filter(Boolean).filter(function(T){return T.contains(g.target)}),E=w.length>0?a(g,w[0]):!o.current.noIsolation;E&&g.cancelable&&g.preventDefault()}}},[]),l=P.useCallback(function(m,g,v,b){var w={name:m,delta:g,target:v,should:b,shadowParent:sze(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(E){return E!==w})},1)},[]),c=P.useCallback(function(m){n.current=P4(m),r.current=void 0},[]),f=P.useCallback(function(m){l(m.type,Oue(m),m.target,a(m,e.lockRef.current))},[]),d=P.useCallback(function(m){l(m.type,P4(m),m.target,a(m,e.lockRef.current))},[]);P.useEffect(function(){return AS.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,CS),document.addEventListener("touchmove",u,CS),document.addEventListener("touchstart",c,CS),function(){AS=AS.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,CS),document.removeEventListener("touchmove",u,CS),document.removeEventListener("touchstart",c,CS)}},[]);var h=e.removeScrollBar,p=e.inert;return P.createElement(P.Fragment,null,p?P.createElement(s,{styles:nze(i)}):null,h?P.createElement(UUe,{gapMode:e.gapMode}):null)}function sze(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const oze=IUe(Yxe,ize);var uC=P.forwardRef(function(e,t){return P.createElement(W8,Jm({},e,{ref:t,sideCar:oze}))});uC.classNames=W8.classNames;function as(e){return Object.keys(e)}function KU(e){return e&&typeof e=="object"&&!Array.isArray(e)}function FX(e,t){const n={...e},r=t;return KU(e)&&KU(t)&&Object.keys(t).forEach(i=>{KU(r[i])&&i in e?n[i]=FX(n[i],r[i]):n[i]=r[i]}),n}function aze(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function uze(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function hN(e){const t=uze(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function XU(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Zxe(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?XU(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?XU(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?XU(s):s}}return r}return n}const Ke=Zxe("rem",{shouldScale:!0}),M$=Zxe("em");function ox(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function e_e(e){if(typeof e=="number")return!0;if(typeof e=="string"){if(e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!=="")return!0;const t=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return e.trim().split(/\s+/).every(r=>t.test(r))}return!1}function ax(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==P.Fragment:!1}function Iu(e){const t=P.createContext(null);return[({children:i,value:s})=>S.jsx(t.Provider,{value:s,children:i}),()=>{const i=P.useContext(t);if(i===null)throw new Error(e);return i}]}function ux(e=null){const t=P.createContext(e);return[({children:i,value:s})=>S.jsx(t.Provider,{value:s,children:i}),()=>P.useContext(t)]}function L$(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function $$(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function lze(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function cze(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function fze(e,t,n){return $$(e,n)===$$(t,n)}function BX({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=$$(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>fze(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=cze(l,u,r),f=lze(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const dze={app:100,modal:200,popover:300,overlay:400,max:9999};function ff(e){return dze[e]}const Wq=()=>{};function hze(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||Wq:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Kn(e,t="size",n=!0){if(e!==void 0)return e_e(e)?n?Ke(e):e:`var(--${t}-${e})`}function Go(e){return Kn(e,"mantine-spacing")}function Ci(e){return e===void 0?"var(--mantine-radius-default)":Kn(e,"mantine-radius")}function Va(e){return Kn(e,"mantine-font-size")}function t_e(e){return Kn(e,"mantine-line-height",!1)}function jX(e){if(e)return Kn(e,"mantine-shadow",!1)}function f0(e,t){return n=>{e==null||e(n),t==null||t(n)}}function UX(e,t){return e in t?hN(t[e]):hN(e)}function pN(e,t){const n=e.map(r=>({value:r,px:UX(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Ep(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function pze(e,t,n){var r;return n?Array.from(((r=$$(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function mze(){const[e,t]=P.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Zm(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function N2(e="mantine-"){return`${e}${Math.random().toString(36).slice(2,11)}`}function Uv(e){const t=P.useRef(e);return P.useEffect(()=>{t.current=e}),P.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const gze=()=>{};function G8(e,t){const n=typeof t=="number"?t:t.delay,r=typeof t=="number"?!1:t.flushOnUnmount,i=Uv(e),s=P.useRef(0),o=Object.assign(P.useCallback((...a)=>{window.clearTimeout(s.current);const u=()=>{s.current!==0&&(s.current=0,i(...a))};o.flush=u,s.current=window.setTimeout(u,n)},[i,n]),{flush:gze});return P.useEffect(()=>()=>{window.clearTimeout(s.current),r&&o.flush()},[o,r]),o}const Lue=["mousedown","touchstart"];function yze(e,t,n){const r=P.useRef(null);return P.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||Lue).forEach(s=>document.addEventListener(s,i)),()=>{(t||Lue).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function vze(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function bze(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function xze(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=P.useState(n?t:bze(e)),s=P.useRef(null);return P.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),vze(s.current,o=>i(o.matches))},[e]),r}const CE=typeof document<"u"?P.useLayoutEffect:P.useEffect;function P0(e,t){const n=P.useRef(!1);P.useEffect(()=>()=>{n.current=!1},[]),P.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function n_e({opened:e,shouldReturnFocus:t=!0}){const n=P.useRef(null),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return P0(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}const _ze=/input|select|textarea|button|object/,r_e="a, input, select, textarea, button, object, [tabindex]";function wze(e){return e.style.display==="none"}function Eze(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(wze(n))return!1;n=n.parentNode}return!0}function i_e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Gq(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(i_e(e));return(_ze.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&Eze(e)}function s_e(e){const t=i_e(e);return(Number.isNaN(t)||t>=0)&&Gq(e)}function Tze(e){return Array.from(e.querySelectorAll(r_e)).filter(s_e)}function Sze(e,t){const n=Tze(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function Cze(e=!0){const t=P.useRef(null),n=i=>{let s=i.querySelector("[data-autofocus]");if(!s){const o=Array.from(i.querySelectorAll(r_e));s=o.find(s_e)||o.find(Gq)||null,!s&&Gq(i)&&(s=i)}s&&s.focus({preventScroll:!0})},r=P.useCallback(i=>{e&&i!==null&&t.current!==i&&(i?(setTimeout(()=>{i.getRootNode()&&n(i)}),t.current=i):t.current=null)},[e]);return P.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>n(t.current));const i=s=>{s.key==="Tab"&&t.current&&Sze(t.current,s)};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[e]),r}const Aze=e=>(e+1)%1e6;function Ize(){const[,e]=P.useReducer(Aze,0);return e}const kze=ci.useId||(()=>{});function Rze(){const e=kze();return e?`mantine-${e.replace(/:/g,"")}`:""}function yl(e){const t=Rze(),[n,r]=P.useState(t);return CE(()=>{r(N2())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function o_e(e,t,n){P.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function F$(e,t){if(typeof e=="function")return e(t);typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function a_e(...e){const t=new Map;return n=>{if(e.forEach(r=>{const i=F$(r,n);i&&t.set(r,i)}),t.size>0)return()=>{e.forEach(r=>{const i=t.get(r);i?i():F$(r,null)}),t.clear()}}}function No(...e){return P.useCallback(a_e(...e),e)}function u_e(e,t,n="ltr"){const r=P.useRef(null),i=P.useRef(!1),s=P.useRef(!1),o=P.useRef(0),[a,u]=P.useState(!1);return P.useEffect(()=>{i.current=!0},[]),P.useEffect(()=>{var b,w;const l=({x:E,y:T})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const C=r.current.getBoundingClientRect();if(C.width&&C.height){const I=Zm((E-C.left)/C.width,0,1);e({x:n==="ltr"?I:1-I,y:Zm((T-C.top)/C.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",v),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=E=>{d(),E.preventDefault(),m(E)},m=E=>l({x:E.clientX,y:E.clientY}),g=E=>{E.cancelable&&E.preventDefault(),d(),v(E)},v=E=>{E.cancelable&&E.preventDefault(),l({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY})};return(b=r.current)==null||b.addEventListener("mousedown",p),(w=r.current)==null||w.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function Yo({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=P.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function Y8(e,t){return xze("(prefers-reduced-motion: reduce)",e,t)}const Dze={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function td(e){const t=P.useRef(0),n=P.useRef(null),[r,i]=P.useState(Dze),s=P.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return P.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function Nze(e){const[t,{width:n,height:r}]=td(e);return{ref:t,width:n,height:r}}function Pze(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift"),plus:t.includes("[plus]")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i==="[plus]"?"+":i}}function Oze(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function Mze(e){return t=>Oze(Pze(e),t)}function Lze(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{Mze(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function zX(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=P.useState(e),o=P.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=P.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=P.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function $ze(e,t,n={autoInvoke:!1}){const r=P.useRef(null),i=P.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=P.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return P.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function Fze(e){const t=P.useRef(void 0);return P.useEffect(()=>{t.current=e},[e]),t.current}function Bze(e,t,n){const r=P.useRef(null),i=P.useRef(null);return P.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function jze(){const[e,t]=P.useState(!1);return P.useEffect(()=>t(!0),[]),e}function Uze(e,t){const n=Uv(e),r=P.useRef(null),i=P.useRef(null),s=P.useRef(!0),o=P.useRef(t),a=P.useRef(-1),u=()=>window.clearTimeout(a.current),l=P.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=P.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=P.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return P.useEffect(()=>{o.current=t},[t]),[f,u]}function zze(e,t){const[n,r]=P.useState(e),[i,s]=Uze(r,t);return P.useEffect(()=>s,[]),[n,i]}function Vze(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function Hze(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});CE(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>Vze(`${e}:${String(r)}`,i[0])}return[t,n]}var qze={};function l_e(){return typeof process<"u"&&qze?"production":"development"}function Yq(e,t){return t.length===0?e:t.reduce((n,r)=>Math.abs(r-e)<Math.abs(n-e)?r:n)}function K8(e){var n;const t=ci.version;return typeof ci.version!="string"||t.startsWith("18.")?e==null?void 0:e.ref:(n=e==null?void 0:e.props)==null?void 0:n.ref}function c_e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=c_e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Io(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=c_e(e))&&(r&&(r+=" "),r+=t);return r}const Wze={};function Gze(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Io(t[r],i):t[r]=i})}),t}function X8({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||Wze);return Gze(s)}function B$({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const f_e=P.createContext(null);function lx(){const e=P.useContext(f_e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function Yze(){return lx().cssVariablesResolver}function Kze(){return lx().classNamesPrefix}function VX(){return lx().getStyleNonce}function Xze(){return lx().withStaticClasses}function Qze(){return lx().headless}function Jze(){var e;return(e=lx().stylesTransform)==null?void 0:e.sx}function Zze(){var e;return(e=lx().stylesTransform)==null?void 0:e.styles}function eVe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function tVe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function nVe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function rVe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function HX(e){return eVe(e)?tVe(e):e.startsWith("rgb")?nVe(e):e.startsWith("hsl")?rVe(e):{r:0,g:0,b:0,a:1}}function O4(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=HX(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function mN(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function QU(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function iVe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function sVe(e){if(e.startsWith("oklch("))return(iVe(e)||0)/100;const{r:t,g:n,b:r}=HX(e),i=t/255,s=n/255,o=r/255,a=QU(i),u=QU(s),l=QU(o);return .2126*a+.7152*u+.0722*l}function zk(e,t=.179){return e.startsWith("var(")?!1:sVe(e)>t}function ng({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:zk(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:zk(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:zk(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][mN(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:zk(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:zk(e,t.luminanceThreshold),shade:s,variable:void 0}}function qi(e,t){const n=ng({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function Kq(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=qi(n.from,t),i=qi(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function zm(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=HX(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const IS=zm,oVe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=ng({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Ke(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Ke(1)} solid transparent`}:{background:e,hover:O4(e,.1),color:a,border:`${Ke(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ke(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:zm(a,.1),hover:zm(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ke(1)} solid transparent`}}return{background:zm(e,.1),hover:zm(e,.12),color:e,border:`${Ke(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Ke(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:zm(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ke(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:zm(e,.05),color:e,border:`${Ke(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Ke(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:zm(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ke(1)} solid transparent`}}return{background:"transparent",hover:zm(e,.12),color:e,border:`${Ke(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Ke(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Ke(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Ke(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:O4(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Ke(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:O4(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Ke(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:O4(t.white,.01),color:e,border:`${Ke(1)} solid transparent`}:n==="gradient"?{background:Kq(r,t),hover:Kq(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Ke(1)} solid var(--mantine-color-default-border)`}:{}},aVe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},$ue="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",qX={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:aVe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:oVe,autoContrast:!1,luminanceThreshold:.3,fontFamily:$ue,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:$ue,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Ke(34),lineHeight:"1.3"},h2:{fontSize:Ke(26),lineHeight:"1.35"},h3:{fontSize:Ke(22),lineHeight:"1.4"},h4:{fontSize:Ke(18),lineHeight:"1.45"},h5:{fontSize:Ke(16),lineHeight:"1.5"},h6:{fontSize:Ke(14),lineHeight:"1.5"}}},fontSizes:{xs:Ke(12),sm:Ke(14),md:Ke(16),lg:Ke(18),xl:Ke(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Ke(2),sm:Ke(4),md:Ke(8),lg:Ke(16),xl:Ke(32)},spacing:{xs:Ke(10),sm:Ke(12),md:Ke(16),lg:Ke(20),xl:Ke(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), 0 ${Ke(1)} ${Ke(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(10)} ${Ke(15)} ${Ke(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ke(7)} ${Ke(7)} ${Ke(-5)}`,md:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(20)} ${Ke(25)} ${Ke(-5)}, rgba(0, 0, 0, 0.04) 0 ${Ke(10)} ${Ke(10)} ${Ke(-5)}`,lg:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(28)} ${Ke(23)} ${Ke(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ke(12)} ${Ke(12)} ${Ke(-7)}`,xl:`0 ${Ke(1)} ${Ke(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Ke(36)} ${Ke(28)} ${Ke(-7)}, rgba(0, 0, 0, 0.04) 0 ${Ke(17)} ${Ke(17)} ${Ke(-7)}`},other:{},components:{}};function Fue(e){return e==="auto"||e==="dark"||e==="light"}function uVe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Fue(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Fue(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const lVe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Bue="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function JU(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function jue(e){if(!(e.primaryColor in e.colors))throw new Error(lVe);if(typeof e.primaryShade=="object"&&(!JU(e.primaryShade.dark)||!JU(e.primaryShade.light)))throw new Error(Bue);if(typeof e.primaryShade=="number"&&!JU(e.primaryShade))throw new Error(Bue)}function cVe(e,t){var r;if(!t)return jue(e),e;const n=FX(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),jue(n),n}const WX=P.createContext(null),fVe=()=>P.useContext(WX)||qX;function Po(){const e=P.useContext(WX);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function d_e({theme:e,children:t,inherit:n=!0}){const r=fVe(),i=P.useMemo(()=>cVe(n?r:qX,e),[e,r,n]);return S.jsx(WX.Provider,{value:i,children:t})}d_e.displayName="@mantine/core/MantineThemeProvider";function dVe(){const e=Po(),t=VX(),n=as(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=hN(e.breakpoints[i]),a=s?`${o-.1}px`:M$(o-.1),u=s?`${o}px`:M$(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return S.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function ZU(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Vk(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function hVe(e,t){const n=ZU(e.variables),r=n?Vk(t,n):"",i=ZU(e.dark),s=ZU(e.light),o=i?Vk(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?Vk(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function cx({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&ng({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Uue(e,t){return cx({color:e.colors[e.primaryColor][mN(e,t)],theme:e,autoContrast:null})}function M4({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=mN(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:IS(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:IS(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:IS(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=mN(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:IS(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:IS(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:IS(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function pVe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function kS(e,t,n){as(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const h_e=e=>{const t=mN(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Ke(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Uue(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Uue(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};kS(r.variables,e.breakpoints,"breakpoint"),kS(r.variables,e.spacing,"spacing"),kS(r.variables,e.fontSizes,"font-size"),kS(r.variables,e.lineHeights,"line-height"),kS(r.variables,e.shadows,"shadow"),kS(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),as(e.colors).forEach(s=>{const o=e.colors[s];if(pVe(o)){Object.assign(r.light,M4({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,M4({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,M4({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,M4({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return as(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function mVe({theme:e,generator:t}){const n=h_e(e),r=t==null?void 0:t(e);return r?FX(n,r):n}const ez=h_e(qX);function gVe(e){const t={variables:{},light:{},dark:{}};return as(e.variables).forEach(n=>{ez.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),as(e.light).forEach(n=>{ez.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),as(e.dark).forEach(n=>{ez.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function yVe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function p_e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Po(),r=VX(),i=Yze(),s=mVe({theme:n,generator:i}),o=e===":root"&&t,a=o?gVe(s):s,u=hVe(a,e);return u?S.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":yVe(e)}`}}):null}p_e.displayName="@mantine/CssVariables";function vVe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function RS(e,t){var i;const n=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)").matches,r=e!=="auto"?e:n?"dark":"light";(i=t())==null||i.setAttribute("data-mantine-color-scheme",r)}function bVe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=P.useRef(null),[s,o]=P.useState(()=>e.get(t)),a=r||s,u=P.useCallback(c=>{r||(RS(c,n),o(c),e.set(c))},[e.set,a,r]),l=P.useCallback(()=>{o(t),RS(t,n),e.clear()},[e.clear,t]);return P.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),CE(()=>{RS(e.get(t),n)},[]),P.useEffect(()=>{var f;if(r)return RS(r,n),()=>{};r===void 0&&RS(s,n),typeof window<"u"&&"matchMedia"in window&&(i.current=window.matchMedia("(prefers-color-scheme: dark)"));const c=d=>{s==="auto"&&RS(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function xVe({respectReducedMotion:e,getRootElement:t}){CE(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}vVe();function m_e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=uVe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:v}=bVe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return xVe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),S.jsx(f_e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:v,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:S.jsxs(d_e,{theme:e,children:[o&&S.jsx(p_e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&S.jsx(dVe,{}),t]})})}m_e.displayName="@mantine/core/MantineProvider";function AE({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Po();return{resolvedClassNames:X8({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:B$({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const _Ve={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function wVe({theme:e,options:t,unstyled:n}){return Io((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||_Ve[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function EVe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return X8({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function zue({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return X8({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function TVe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function SVe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function CVe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function AVe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=X8({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function IVe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function kVe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Io(wVe({theme:e,options:t,unstyled:a||h}),AVe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),IVe({options:t,classes:o,selector:r,unstyled:a}),zue({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),zue({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),EVe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),TVe({rootSelector:l,selector:r,className:u}),SVe({selector:r,classes:o,unstyled:a||h}),d&&!h&&CVe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function RVe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return B$({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function Xq({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Xq({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function DVe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...ox(n[r])}}),t),{})}function NVe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=DVe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function PVe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&RVe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&B$({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&B$({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...NVe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?Xq({style:u,theme:e}):null,...Xq({style:r==null?void 0:r.style,theme:e})}}function OVe({props:e,stylesCtx:t,themeName:n}){var o;const r=Po(),i=(o=Zze())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function Zt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Po(),h=Kze(),p=Xze(),m=Qze(),g=(Array.isArray(e)?e:[e]).filter(w=>w),{withStylesTransform:v,getTransformedStyles:b}=OVe({props:n,stylesCtx:r,themeName:g});return(w,E)=>({className:kVe({theme:d,options:E,themeName:g,selector:w,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:b([E==null?void 0:E.styles,l])}),style:PVe({theme:d,themeName:g,selector:w,options:E,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:v})})}function _A(e,t){return typeof e=="boolean"?e:t.autoContrast}function Je(e,t,n){var o;const r=Po(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...ox(n)}}function tz(e){return as(e).reduce((t,n)=>e[n]!==void 0?`${t}${aze(n)}:${e[n]};`:t,"").trim()}function MVe({selector:e,styles:t,media:n,container:r}){const i=t?tz(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${tz(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${tz(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function IE(e){const t=VX();return S.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:MVe(e)}})}function kE(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:v,ps:b,bd:w,bg:E,c:T,opacity:C,ff:I,fz:R,fw:N,lts:O,ta:L,lh:B,fs:F,tt:H,td:Q,w:J,miw:ne,maw:Z,h:ie,mih:q,mah:U,bgsz:G,bgp:V,bgr:Y,bga:ee,pos:ae,top:_e,left:pe,bottom:Te,right:Le,inset:ye,display:he,flex:$e,hiddenFrom:De,visibleFrom:tt,lightHidden:it,darkHidden:Me,sx:Ge,...at}=e;return{styleProps:ox({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:v,ps:b,bd:w,bg:E,c:T,opacity:C,ff:I,fz:R,fw:N,lts:O,ta:L,lh:B,fs:F,tt:H,td:Q,w:J,miw:ne,maw:Z,h:ie,mih:q,mah:U,bgsz:G,bgp:V,bgr:Y,bga:ee,pos:ae,top:_e,left:pe,bottom:Te,right:Le,inset:ye,display:he,flex:$e,hiddenFrom:De,visibleFrom:tt,lightHidden:it,darkHidden:Me,sx:Ge}),rest:at}}const LVe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function GX(e,t){const n=ng({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function $Ve(e,t){const n=ng({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:GX(e,t)}function FVe(e,t){if(typeof e=="number")return Ke(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Ke(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${GX(i.join(" "),t)}`),s.trim()}return e}const Vue={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function BVe(e){return typeof e=="string"&&e in Vue?Vue[e]:e}const jVe=["h1","h2","h3","h4","h5","h6"];function UVe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&jVe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Ke(e):e}function zVe(e){return e}const VVe=["h1","h2","h3","h4","h5","h6"];function HVe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&VVe.includes(e)?`var(--mantine-${e}-line-height)`:e}function qVe(e){return typeof e=="number"?Ke(e):e}function WVe(e,t){if(typeof e=="number")return Ke(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Ke(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const nz={color:GX,textColor:$Ve,fontSize:UVe,spacing:WVe,identity:zVe,size:qVe,lineHeight:HVe,fontFamily:BVe,border:FVe};function Hue(e){return e.replace("(min-width: ","").replace("em)","")}function GVe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Hue(i))-Number(Hue(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function YVe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function KVe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function XVe(e){return typeof e=="object"&&e!==null?as(e).filter(t=>t!=="base"):[]}function QVe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function g_e({styleProps:e,data:t,theme:n}){return GVe(as(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=KVe(e[i]);if(!YVe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=nz[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=XVe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=nz[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:nz[s.type](QVe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function BP(){return`__m__-${P.useId().replace(/:/g,"")}`}function YX(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...YX(r,t)}),{}):typeof e=="function"?e(t):e??{}}function y_e(e){return e.startsWith("data-")?e:`data-${e}`}function JVe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[y_e(n)]=e[n]),t},{})}function v_e(e){return e?typeof e=="string"?{[y_e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...v_e(n)}),{}):JVe(e):null}function Qq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Qq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function ZVe({theme:e,style:t,vars:n,styleProps:r}){const i=Qq(t,e),s=Qq(n,e);return{...i,...s,...r}}const b_e=P.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var R;const m=Po(),g=e||"div",{styleProps:v,rest:b}=kE(h),w=Jze(),E=(R=w==null?void 0:w())==null?void 0:R(v.sx),T=BP(),C=g_e({styleProps:v,theme:m,data:LVe}),I={ref:p,style:ZVe({theme:m,style:t,vars:n,styleProps:C.inlineStyles}),className:Io(r,E,{[T]:C.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":e_e(o)?void 0:o||void 0,size:d,...v_e(s),...b};return S.jsxs(S.Fragment,{children:[C.hasResponsiveStyles&&S.jsx(IE,{selector:`.${T}`,styles:C.styles,media:C.media}),typeof f=="function"?f(I):S.jsx(g,{...I})]})});b_e.displayName="@mantine/core/Box";const je=b_e;function x_e(e){return e}function eHe(e){const t=e;return n=>{const r=P.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r}}function At(e){const t=P.forwardRef(e);return t.extend=x_e,t.withProps=n=>{const r=P.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Xo(e){const t=P.forwardRef(e);return t.withProps=n=>{const r=P.forwardRef((i,s)=>S.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=x_e,t}const tHe=P.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function b1(){return P.useContext(tHe)}var Q8=Wxe();const BR=yh(Q8);function nHe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function rz(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const Hk=typeof window<"u"&&window.requestAnimationFrame;function rHe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=P.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=P.useState(r?{}:o),l=p=>{Q8.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||nHe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}P0(()=>{typeof Hk=="function"&&Hk(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),Hk(()=>{const p=rz(i);c({...f(p),height:p})})}:()=>{const p=rz(i);c({...f(p),willChange:"height",height:p}),Hk(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=rz(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const v=g[m];return{"aria-hidden":!r,...g,[m]:a_e(i,v),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const iHe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},J8=At((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Je("Collapse",iHe,e),c=Po(),f=Y8(),h=(c.respectReducedMotion?f:!1)?0:i,p=rHe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?S.jsx(je,{...l,children:n}):null:S.jsx(je,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...YX(o,c)},ref:t,...l}),children:n})});J8.displayName="@mantine/core/Collapse";const[sHe,vh]=Iu("ScrollArea.Root component was not found in tree");function lC(e,t){const n=Uv(t);CE(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const oHe=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=vh(),[s,o]=P.useState(0),[a,u]=P.useState(0),l=!!(s&&a);return lC(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),lC(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?S.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),aHe=P.forwardRef((e,t)=>{const n=vh(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?S.jsx(oHe,{...e,ref:t}):null}),uHe={scrollHideDelay:1e3,type:"hover"},__e=P.forwardRef((e,t)=>{const n=Je("ScrollAreaRoot",uHe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=P.useState(null),[l,c]=P.useState(null),[f,d]=P.useState(null),[h,p]=P.useState(null),[m,g]=P.useState(null),[v,b]=P.useState(0),[w,E]=P.useState(0),[T,C]=P.useState(!1),[I,R]=P.useState(!1),N=No(t,O=>u(O));return S.jsx(sHe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:T,onScrollbarXEnabledChange:C,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:I,onScrollbarYEnabledChange:R,onCornerWidthChange:b,onCornerHeightChange:E},children:S.jsx(je,{...o,ref:N,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${v}px`,"--sa-corner-height":s!=="xy"?"0px":`${w}px`}})})});__e.displayName="@mantine/core/ScrollAreaRoot";function w_e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function Z8(e){const t=w_e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function E_e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function lHe(e,[t,n]){return Math.min(n,Math.max(t,e))}function que(e,t,n="ltr"){const r=Z8(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=lHe(e,u);return E_e([0,o],[0,a])(l)}function cHe(e,t,n,r="ltr"){const i=Z8(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return E_e([u,l],f)(e)}function T_e(e,t){return e>0&&e<t}function Kv(e){return e?parseInt(e,10):0}function Pw(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[fHe,S_e]=Iu("ScrollAreaScrollbar was not found in tree"),C_e=P.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=vh(),[h,p]=P.useState(null),m=No(t,R=>p(R)),g=P.useRef(null),v=P.useRef(""),{viewport:b}=d,w=n.content-n.viewport,E=Uv(l),T=Uv(a),C=G8(c,10),I=R=>{if(g.current){const N=R.clientX-g.current.left,O=R.clientY-g.current.top;u({x:N,y:O})}};return P.useEffect(()=>{const R=N=>{const O=N.target;(h==null?void 0:h.contains(O))&&E(N,w)};return document.addEventListener("wheel",R,{passive:!1}),()=>document.removeEventListener("wheel",R,{passive:!1})},[b,h,w,E]),P.useEffect(T,[n,T]),lC(h,C),lC(d.content,C),S.jsx(fHe,{value:{scrollbar:h,hasThumb:r,onThumbChange:Uv(i),onThumbPointerUp:Uv(s),onThumbPositionChange:T,onThumbPointerDown:Uv(o)},children:S.jsx("div",{...f,ref:m,"data-mantine-scrollbar":!0,style:{position:"absolute",...f.style},onPointerDown:Pw(e.onPointerDown,R=>{R.preventDefault(),R.button===0&&(R.target.setPointerCapture(R.pointerId),g.current=h.getBoundingClientRect(),v.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",I(R))}),onPointerMove:Pw(e.onPointerMove,I),onPointerUp:Pw(e.onPointerUp,R=>{R.preventDefault();const N=R.target;N.hasPointerCapture(R.pointerId)&&N.releasePointerCapture(R.pointerId),document.body.style.webkitUserSelect=v.current,g.current=null})})})}),A_e=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=vh(),[a,u]=P.useState(),l=P.useRef(null),c=No(t,l,o.onScrollbarXChange);return P.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),S.jsx(C_e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${Z8(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),T_e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Kv(a.paddingLeft),paddingEnd:Kv(a.paddingRight)}})}})});A_e.displayName="@mantine/core/ScrollAreaScrollbarX";const I_e=P.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=vh(),[a,u]=P.useState(),l=P.useRef(null),c=No(t,l,o.onScrollbarYChange);return P.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),S.jsx(C_e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${Z8(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),T_e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Kv(a.paddingTop),paddingEnd:Kv(a.paddingBottom)}})}})});I_e.displayName="@mantine/core/ScrollAreaScrollbarY";const eB=P.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=b1(),s=vh(),o=P.useRef(null),a=P.useRef(0),[u,l]=P.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=w_e(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>cHe(h,a.current,u,p);return n==="horizontal"?S.jsx(A_e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=que(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?S.jsx(I_e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=que(h,u);u.scrollbar.size===0?o.current.style.setProperty("--thumb-opacity","0"):o.current.style.setProperty("--thumb-opacity","1"),o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null});eB.displayName="@mantine/core/ScrollAreaScrollbarVisible";const KX=P.forwardRef((e,t)=>{const n=vh(),{forceMount:r,...i}=e,[s,o]=P.useState(!1),a=e.orientation==="horizontal",u=G8(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return lC(n.viewport,u),lC(n.content,u),r||s?S.jsx(eB,{"data-state":s?"visible":"hidden",...i,ref:t}):null});KX.displayName="@mantine/core/ScrollAreaScrollbarAuto";const k_e=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=vh(),[s,o]=P.useState(!1);return P.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?S.jsx(KX,{"data-state":s?"visible":"hidden",...r,ref:t}):null});k_e.displayName="@mantine/core/ScrollAreaScrollbarHover";const dHe=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=vh(),s=e.orientation==="horizontal",[o,a]=P.useState("hidden"),u=G8(()=>a("idle"),100);return P.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),P.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?S.jsx(eB,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Pw(e.onPointerEnter,()=>a("interacting")),onPointerLeave:Pw(e.onPointerLeave,()=>a("idle"))}):null}),Jq=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=vh(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return P.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?S.jsx(k_e,{...r,ref:t,forceMount:n}):i.type==="scroll"?S.jsx(dHe,{...r,ref:t,forceMount:n}):i.type==="auto"?S.jsx(KX,{...r,ref:t,forceMount:n}):i.type==="always"?S.jsx(eB,{...r,ref:t}):null});Jq.displayName="@mantine/core/ScrollAreaScrollbar";function hHe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const R_e=P.forwardRef((e,t)=>{const{style:n,...r}=e,i=vh(),s=S_e(),{onThumbPositionChange:o}=s,a=No(t,c=>s.onThumbChange(c)),u=P.useRef(void 0),l=G8(()=>{u.current&&(u.current(),u.current=void 0)},100);return P.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=hHe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),S.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Pw(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:Pw(e.onPointerUp,s.onThumbPointerUp)})});R_e.displayName="@mantine/core/ScrollAreaThumb";const Zq=P.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=S_e();return n||i.hasThumb?S.jsx(R_e,{ref:t,...r}):null});Zq.displayName="@mantine/core/ScrollAreaThumb";const D_e=P.forwardRef(({children:e,style:t,...n},r)=>{const i=vh(),s=No(r,i.onViewportChange);return S.jsx(je,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:S.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});D_e.displayName="@mantine/core/ScrollAreaViewport";var XX={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const N_e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},pHe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Ke(t)}}),Yy=At((e,t)=>{const n=Je("ScrollArea",N_e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:v,onBottomReached:b,onTopReached:w,...E}=n,[T,C]=P.useState(!1),I=Zt({name:"ScrollArea",props:n,classes:XX,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:pHe});return S.jsxs(__e,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:v,...I("root"),...E,children:[S.jsx(D_e,{...d,...I("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":v||void 0,onScroll:R=>{var B;(B=d==null?void 0:d.onScroll)==null||B.call(d,R),p==null||p({x:R.currentTarget.scrollLeft,y:R.currentTarget.scrollTop});const{scrollTop:N,scrollHeight:O,clientHeight:L}=R.currentTarget;N-(O-L)>=0&&(b==null||b()),N===0&&(w==null||w())},children:m}),(v==="xy"||v==="x")&&S.jsx(Jq,{...I("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:S.jsx(Zq,{...I("thumb")})}),(v==="xy"||v==="y")&&S.jsx(Jq,{...I("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),children:S.jsx(Zq,{...I("thumb")})}),S.jsx(aHe,{...I("corner"),"data-hovered":T||void 0,"data-hidden":c==="never"||void 0})]})});Yy.displayName="@mantine/core/ScrollArea";const QX=At((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:v,onBottomReached:b,onTopReached:w,...E}=Je("ScrollAreaAutosize",N_e,e);return S.jsx(je,{...E,ref:t,style:[{display:"flex",overflow:"auto"},g],children:S.jsx(je,{style:{display:"flex",flexDirection:"column",flex:1},children:S.jsx(Yy,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:v,scrollbars:m,onBottomReached:b,onTopReached:w,children:n})})})});Yy.classes=XX;QX.displayName="@mantine/core/ScrollAreaAutosize";QX.classes=XX;Yy.Autosize=QX;var P_e={root:"m_87cf2631"};const mHe={__staticSelector:"UnstyledButton"},ud=Xo((e,t)=>{const n=Je("UnstyledButton",mHe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=Zt({name:s,props:n,classes:P_e,className:r,style:l,classNames:a,styles:u,unstyled:o});return S.jsx(je,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});ud.classes=P_e;ud.displayName="@mantine/core/UnstyledButton";var O_e={root:"m_515a97f8"};const gHe={},JX=At((e,t)=>{const n=Je("VisuallyHidden",gHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=Zt({name:"VisuallyHidden",classes:O_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return S.jsx(je,{component:"span",ref:t,...c("root"),...l})});JX.classes=O_e;JX.displayName="@mantine/core/VisuallyHidden";var M_e={root:"m_1b7284a3"};const yHe={},vHe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Ci(t),"--paper-shadow":jX(n)}}),wA=Xo((e,t)=>{const n=Je("Paper",yHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=Zt({name:"Paper",props:n,classes:M_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:vHe});return S.jsx(je,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});wA.classes=M_e;wA.displayName="@mantine/core/Paper";function tB(){return typeof window<"u"}function L_e(e){return $_e(e)?(e.nodeName||"").toLowerCase():"#document"}function EA(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function bHe(e){var t;return(t=($_e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function $_e(e){return tB()?e instanceof Node||e instanceof EA(e).Node:!1}function jc(e){return tB()?e instanceof Element||e instanceof EA(e).Element:!1}function ZX(e){return tB()?e instanceof HTMLElement||e instanceof EA(e).HTMLElement:!1}function eW(e){return!tB()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof EA(e).ShadowRoot}function xHe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Wue(e){return["html","body","#document"].includes(L_e(e))}function _He(e){return EA(e).getComputedStyle(e)}function wHe(e){if(L_e(e)==="html")return e;const t=e.assignedSlot||e.parentNode||eW(e)&&e.host||bHe(e);return eW(t)?t.host:t}function Gue(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function gN(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&eW(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function F_e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function B_e(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function EHe(e){return CHe()?!1:!Yue()&&e.width===0&&e.height===0||Yue()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function THe(){return/apple/i.test(navigator.vendor)}function Yue(){const e=/android/i;return e.test(F_e())||e.test(B_e())}function SHe(){return F_e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function CHe(){return B_e().includes("jsdom/")}function tW(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function AHe(e){return"nativeEvent"in e}function IHe(e){return e.matches("html,body")}function pw(e){return(e==null?void 0:e.ownerDocument)||document}function iz(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function n2(e){return"composedPath"in e?e.composedPath()[0]:e.target}const kHe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function RHe(e){return ZX(e)&&e.matches(kHe)}const Kf=Math.min,el=Math.max,j$=Math.round,L4=Math.floor,_b=e=>({x:e,y:e}),DHe={left:"right",right:"left",bottom:"top",top:"bottom"},NHe={start:"end",end:"start"};function nW(e,t,n){return el(e,Kf(t,n))}function Ky(e,t){return typeof e=="function"?e(t):e}function Fp(e){return e.split("-")[0]}function TA(e){return e.split("-")[1]}function eQ(e){return e==="x"?"y":"x"}function tQ(e){return e==="y"?"height":"width"}function RE(e){return["top","bottom"].includes(Fp(e))?"y":"x"}function nQ(e){return eQ(RE(e))}function PHe(e,t,n){n===void 0&&(n=!1);const r=TA(e),i=nQ(e),s=tQ(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=U$(o)),[o,U$(o)]}function OHe(e){const t=U$(e);return[rW(e),t,rW(t)]}function rW(e){return e.replace(/start|end/g,t=>NHe[t])}function MHe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function LHe(e,t,n,r){const i=TA(e);let s=MHe(Fp(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(rW)))),s}function U$(e){return e.replace(/left|right|bottom|top/g,t=>DHe[t])}function $He(e){return{top:0,right:0,bottom:0,left:0,...e}}function rQ(e){return typeof e!="number"?$He(e):{top:e,right:e,bottom:e,left:e}}function cC(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Kue(e,t,n){let{reference:r,floating:i}=e;const s=RE(t),o=nQ(t),a=tQ(o),u=Fp(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(TA(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const FHe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Kue(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x:b,y:w,data:E,reset:T}=await v({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=b??c,f=w??f,h={...h,[g]:{...h[g],...E}},T&&p<=50&&(p++,typeof T=="object"&&(T.placement&&(d=T.placement),T.rects&&(l=T.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):T.rects),{x:c,y:f}=Kue(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function iQ(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Ky(t,e),p=rQ(h),g=a[d?f==="floating"?"reference":"floating":f],v=cC(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),b=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},T=cC(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:w,strategy:u}):b);return{top:(v.top-T.top+p.top)/E.y,bottom:(T.bottom-v.bottom+p.bottom)/E.y,left:(v.left-T.left+p.left)/E.x,right:(T.right-v.right+p.right)/E.x}}const BHe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Ky(e,t)||{};if(l==null)return{};const f=rQ(c),d={x:n,y:r},h=nQ(i),p=tQ(h),m=await o.getDimensions(l),g=h==="y",v=g?"top":"left",b=g?"bottom":"right",w=g?"clientHeight":"clientWidth",E=s.reference[p]+s.reference[h]-d[h]-s.floating[p],T=d[h]-s.reference[h],C=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let I=C?C[w]:0;(!I||!await(o.isElement==null?void 0:o.isElement(C)))&&(I=a.floating[w]||s.floating[p]);const R=E/2-T/2,N=I/2-m[p]/2-1,O=Kf(f[v],N),L=Kf(f[b],N),B=O,F=I-m[p]-L,H=I/2-m[p]/2+R,Q=nW(B,H,F),J=!u.arrow&&TA(i)!=null&&H!==Q&&s.reference[p]/2-(H<B?O:L)-m[p]/2<0,ne=J?H<B?H-B:H-F:0;return{[h]:d[h]+ne,data:{[h]:Q,centerOffset:H-Q-ne,...J&&{alignmentOffset:ne}},reset:J}}}),jHe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Ky(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const v=Fp(i),b=Fp(a)===a,w=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=d||(b||!m?[U$(a)]:OHe(a));!d&&p!=="none"&&E.push(...LHe(a,m,p,w));const T=[a,...E],C=await iQ(t,g),I=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&I.push(C[v]),f){const B=PHe(i,o,w);I.push(C[B[0]],C[B[1]])}if(R=[...R,{placement:i,overflows:I}],!I.every(B=>B<=0)){var N,O;const B=(((N=s.flip)==null?void 0:N.index)||0)+1,F=T[B];if(F)return{data:{index:B,overflows:R},reset:{placement:F}};let H=(O=R.filter(Q=>Q.overflows[0]<=0).sort((Q,J)=>Q.overflows[1]-J.overflows[1])[0])==null?void 0:O.placement;if(!H)switch(h){case"bestFit":{var L;const Q=(L=R.map(J=>[J.placement,J.overflows.filter(ne=>ne>0).reduce((ne,Z)=>ne+Z,0)]).sort((J,ne)=>J[1]-ne[1])[0])==null?void 0:L[0];Q&&(H=Q);break}case"initialPlacement":H=a;break}if(i!==H)return{reset:{placement:H}}}return{}}}};function j_e(e){const t=Kf(...e.map(s=>s.left)),n=Kf(...e.map(s=>s.top)),r=el(...e.map(s=>s.right)),i=el(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function UHe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>cC(j_e(i)))}const zHe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Ky(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=UHe(c),d=cC(j_e(c)),h=rQ(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(RE(n)==="y"){const O=f[0],L=f[f.length-1],B=Fp(n)==="top",F=O.top,H=L.bottom,Q=B?O.left:L.left,J=B?O.right:L.right,ne=J-Q,Z=H-F;return{top:F,bottom:H,left:Q,right:J,width:ne,height:Z,x:Q,y:F}}const g=Fp(n)==="left",v=el(...f.map(O=>O.right)),b=Kf(...f.map(O=>O.left)),w=f.filter(O=>g?O.left===b:O.right===v),E=w[0].top,T=w[w.length-1].bottom,C=b,I=v,R=I-C,N=T-E;return{top:E,bottom:T,left:C,right:I,width:R,height:N,x:C,y:E}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function VHe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Fp(n),a=TA(n),u=RE(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Ky(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const HHe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await VHe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},qHe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:v,y:b}=g;return{x:v,y:b}}},...u}=Ky(e,t),l={x:n,y:r},c=await iQ(t,u),f=RE(Fp(i)),d=eQ(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",v=d==="y"?"bottom":"right",b=h+c[g],w=h-c[v];h=nW(b,h,w)}if(o){const g=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=p+c[g],w=p-c[v];p=nW(b,p,w)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},WHe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Ky(e,t),c={x:n,y:r},f=RE(i),d=eQ(f);let h=c[d],p=c[f];const m=Ky(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const w=d==="y"?"height":"width",E=s.reference[d]-s.floating[w]+g.mainAxis,T=s.reference[d]+s.reference[w]-g.mainAxis;h<E?h=E:h>T&&(h=T)}if(l){var v,b;const w=d==="y"?"width":"height",E=["top","left"].includes(Fp(i)),T=s.reference[f]-s.floating[w]+(E&&((v=o.offset)==null?void 0:v[f])||0)+(E?0:g.crossAxis),C=s.reference[f]+s.reference[w]+(E?0:((b=o.offset)==null?void 0:b[f])||0)-(E?g.crossAxis:0);p<T?p=T:p>C&&(p=C)}return{[d]:h,[f]:p}}}},GHe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Ky(e,t),u=await iQ(t,a),l=Fp(n),c=TA(n),f=RE(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,v=d-u.left-u.right,b=Kf(h-u[p],g),w=Kf(d-u[m],v),E=!t.middlewareData.shift;let T=b,C=w;if(f?C=c||E?Kf(w,v):v:T=c||E?Kf(b,g):g,E&&!c){const R=el(u.left,0),N=el(u.right,0),O=el(u.top,0),L=el(u.bottom,0);f?C=d-2*(R!==0||N!==0?R+N:el(u.left,u.right)):T=h-2*(O!==0||L!==0?O+L:el(u.top,u.bottom))}await o({...t,availableWidth:C,availableHeight:T});const I=await i.getDimensions(s.floating);return d!==I.width||h!==I.height?{reset:{rects:!0}}:{}}}};function SA(e){return U_e(e)?(e.nodeName||"").toLowerCase():"#document"}function nd(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function x1(e){var t;return(t=(U_e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function U_e(e){return e instanceof Node||e instanceof nd(e).Node}function O0(e){return e instanceof Element||e instanceof nd(e).Element}function M0(e){return e instanceof HTMLElement||e instanceof nd(e).HTMLElement}function Xue(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof nd(e).ShadowRoot}function jP(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Bp(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function YHe(e){return["table","td","th"].includes(SA(e))}function sQ(e){const t=oQ(),n=Bp(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function KHe(e){let t=wb(e);for(;M0(t)&&!fC(t);){if(sQ(t))return t;t=wb(t)}return null}function oQ(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function fC(e){return["html","body","#document"].includes(SA(e))}function Bp(e){return nd(e).getComputedStyle(e)}function nB(e){return O0(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function wb(e){if(SA(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Xue(e)&&e.host||x1(e);return Xue(t)?t.host:t}function z_e(e){const t=wb(e);return fC(t)?e.ownerDocument?e.ownerDocument.body:e.body:M0(t)&&jP(t)?t:z_e(t)}function Py(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=z_e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=nd(i);return s?t.concat(o,o.visualViewport||[],jP(i)?i:[],o.frameElement&&n?Py(o.frameElement):[]):t.concat(i,Py(i,[],n))}function V_e(e){const t=Bp(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=M0(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=j$(n)!==s||j$(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function aQ(e){return O0(e)?e:e.contextElement}function P2(e){const t=aQ(e);if(!M0(t))return _b(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=V_e(t);let o=(s?j$(n.width):n.width)/r,a=(s?j$(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const XHe=_b(0);function H_e(e){const t=nd(e);return!oQ()||!t.visualViewport?XHe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function QHe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==nd(e)?!1:t}function Ww(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=aQ(e);let o=_b(1);t&&(r?O0(r)&&(o=P2(r)):o=P2(e));const a=QHe(s,n,r)?H_e(s):_b(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=nd(s),h=r&&O0(r)?nd(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=P2(m),v=m.getBoundingClientRect(),b=Bp(m),w=v.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,E=v.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=w,l+=E,p=nd(m),m=p.frameElement}}return cC({width:c,height:f,x:u,y:l})}const JHe=[":popover-open",":modal"];function uQ(e){return JHe.some(t=>{try{return e.matches(t)}catch{return!1}})}function ZHe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=x1(r),a=t?uQ(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=_b(1);const c=_b(0),f=M0(r);if((f||!f&&!s)&&((SA(r)!=="body"||jP(o))&&(u=nB(r)),M0(r))){const d=Ww(r);l=P2(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function eqe(e){return Array.from(e.getClientRects())}function q_e(e){return Ww(x1(e)).left+nB(e).scrollLeft}function tqe(e){const t=x1(e),n=nB(e),r=e.ownerDocument.body,i=el(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=el(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+q_e(e);const a=-n.scrollTop;return Bp(r).direction==="rtl"&&(o+=el(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function nqe(e,t){const n=nd(e),r=x1(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=oQ();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function rqe(e,t){const n=Ww(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=M0(e)?P2(e):_b(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Que(e,t,n){let r;if(t==="viewport")r=nqe(e,n);else if(t==="document")r=tqe(x1(e));else if(O0(t))r=rqe(t,n);else{const i=H_e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return cC(r)}function W_e(e,t){const n=wb(e);return n===t||!O0(n)||fC(n)?!1:Bp(n).position==="fixed"||W_e(n,t)}function iqe(e,t){const n=t.get(e);if(n)return n;let r=Py(e,[],!1).filter(a=>O0(a)&&SA(a)!=="body"),i=null;const s=Bp(e).position==="fixed";let o=s?wb(e):e;for(;O0(o)&&!fC(o);){const a=Bp(o),u=sQ(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||jP(o)&&!u&&W_e(e,o))?r=r.filter(c=>c!==o):i=a,o=wb(o)}return t.set(e,r),r}function sqe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?uQ(t)?[]:iqe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Que(t,c,i);return l.top=el(f.top,l.top),l.right=Kf(f.right,l.right),l.bottom=Kf(f.bottom,l.bottom),l.left=el(f.left,l.left),l},Que(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function oqe(e){const{width:t,height:n}=V_e(e);return{width:t,height:n}}function aqe(e,t,n){const r=M0(t),i=x1(t),s=n==="fixed",o=Ww(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=_b(0);if(r||!r&&!s)if((SA(t)!=="body"||jP(i))&&(a=nB(t)),r){const f=Ww(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=q_e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function sz(e){return Bp(e).position==="static"}function Jue(e,t){return!M0(e)||Bp(e).position==="fixed"?null:t?t(e):e.offsetParent}function G_e(e,t){const n=nd(e);if(uQ(e))return n;if(!M0(e)){let i=wb(e);for(;i&&!fC(i);){if(O0(i)&&!sz(i))return i;i=wb(i)}return n}let r=Jue(e,t);for(;r&&YHe(r)&&sz(r);)r=Jue(r,t);return r&&fC(r)&&sz(r)&&!sQ(r)?n:r||KHe(e)||n}const uqe=async function(e){const t=this.getOffsetParent||G_e,n=this.getDimensions,r=await n(e.floating);return{reference:aqe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function lqe(e){return Bp(e).direction==="rtl"}const cqe={convertOffsetParentRelativeRectToViewportRelativeRect:ZHe,getDocumentElement:x1,getClippingRect:sqe,getOffsetParent:G_e,getElementRects:uqe,getClientRects:eqe,getDimensions:oqe,getScale:P2,isElement:O0,isRTL:lqe};function fqe(e,t){let n=null,r;const i=x1(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=L4(c),p=L4(i.clientWidth-(l+f)),m=L4(i.clientHeight-(c+d)),g=L4(l),b={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:el(0,Kf(1,u))||1};let w=!0;function E(T){const C=T[0].intersectionRatio;if(C!==u){if(!w)return o();C?o(!1,C):r=setTimeout(()=>{o(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,b)}n.observe(e)}return o(!0),s}function dqe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=aQ(e),c=i||s?[...l?Py(l):[],...Py(t)]:[];c.forEach(v=>{i&&v.addEventListener("scroll",n,{passive:!0}),s&&v.addEventListener("resize",n)});const f=l&&a?fqe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var w;(w=h)==null||w.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?Ww(e):null;u&&g();function g(){const v=Ww(e);m&&(v.x!==m.x||v.y!==m.y||v.width!==m.width||v.height!==m.height)&&n(),m=v,p=requestAnimationFrame(g)}return n(),()=>{var v;c.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),f==null||f(),(v=h)==null||v.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const hqe=HHe,pqe=qHe,mqe=jHe,gqe=GHe,Zue=BHe,yqe=zHe,vqe=WHe,bqe=(e,t,n)=>{const r=new Map,i={platform:cqe,...n},s={...i.platform,_c:r};return FHe(e,t,{...i,platform:s})};var YM=typeof document<"u"?P.useLayoutEffect:P.useEffect;function z$(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!z$(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!z$(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Y_e(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ele(e,t){const n=Y_e(e);return Math.round(t*n)/n}function oz(e){const t=P.useRef(e);return YM(()=>{t.current=e}),t}function xqe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=P.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=P.useState(r);z$(d,r)||h(r);const[p,m]=P.useState(null),[g,v]=P.useState(null),b=P.useCallback(Z=>{Z!==C.current&&(C.current=Z,m(Z))},[]),w=P.useCallback(Z=>{Z!==I.current&&(I.current=Z,v(Z))},[]),E=s||p,T=o||g,C=P.useRef(null),I=P.useRef(null),R=P.useRef(c),N=u!=null,O=oz(u),L=oz(i),B=oz(l),F=P.useCallback(()=>{if(!C.current||!I.current)return;const Z={placement:t,strategy:n,middleware:d};L.current&&(Z.platform=L.current),bqe(C.current,I.current,Z).then(ie=>{const q={...ie,isPositioned:B.current!==!1};H.current&&!z$(R.current,q)&&(R.current=q,Q8.flushSync(()=>{f(q)}))})},[d,t,n,L,B]);YM(()=>{l===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(Z=>({...Z,isPositioned:!1})))},[l]);const H=P.useRef(!1);YM(()=>(H.current=!0,()=>{H.current=!1}),[]),YM(()=>{if(E&&(C.current=E),T&&(I.current=T),E&&T){if(O.current)return O.current(E,T,F);F()}},[E,T,F,O,N]);const Q=P.useMemo(()=>({reference:C,floating:I,setReference:b,setFloating:w}),[b,w]),J=P.useMemo(()=>({reference:E,floating:T}),[E,T]),ne=P.useMemo(()=>{const Z={position:n,left:0,top:0};if(!J.floating)return Z;const ie=ele(J.floating,c.x),q=ele(J.floating,c.y);return a?{...Z,transform:"translate("+ie+"px, "+q+"px)",...Y_e(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:q}},[n,a,J.floating,c.x,c.y]);return P.useMemo(()=>({...c,update:F,refs:Q,elements:J,floatingStyles:ne}),[c,F,Q,J,ne])}const _qe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Zue({element:r.current,padding:i}).fn(n):{}:r?Zue({element:r,padding:i}).fn(n):{}}}},K_e=(e,t)=>({...hqe(e),options:[e,t]}),lQ=(e,t)=>({...pqe(e),options:[e,t]}),tle=(e,t)=>({...vqe(e),options:[e,t]}),V$=(e,t)=>({...mqe(e),options:[e,t]}),wqe=(e,t)=>({...gqe(e),options:[e,t]}),RD=(e,t)=>({...yqe(e),options:[e,t]}),X_e=(e,t)=>({..._qe(e),options:[e,t]}),Q_e={...dUe},Eqe=Q_e.useInsertionEffect,Tqe=Eqe||(e=>e());function gy(e){const t=P.useRef(()=>{});return Tqe(()=>{t.current=e}),P.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var v0=typeof document<"u"?P.useLayoutEffect:P.useEffect;let nle=!1,Sqe=0;const rle=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Sqe++;function Cqe(){const[e,t]=P.useState(()=>nle?rle():void 0);return v0(()=>{e==null&&t(rle())},[]),P.useEffect(()=>{nle=!0},[]),e}const Aqe=Q_e.useId,J_e=Aqe||Cqe;function Iqe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const kqe=P.createContext(null),Rqe=P.createContext(null),cQ=()=>{var e;return((e=P.useContext(kqe))==null?void 0:e.id)||null},fQ=()=>P.useContext(Rqe);function dQ(e){return"data-floating-ui-"+e}function az(e){const t=P.useRef(e);return v0(()=>{t.current=e}),t}const ile=dQ("safe-polygon");function KM(e,t,n){return n&&!tW(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function Dqe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=t,h=fQ(),p=cQ(),m=az(l),g=az(u),v=az(n),b=P.useRef(),w=P.useRef(-1),E=P.useRef(),T=P.useRef(-1),C=P.useRef(!0),I=P.useRef(!1),R=P.useRef(()=>{}),N=P.useRef(!1),O=P.useCallback(()=>{var ne;const Z=(ne=i.current.openEvent)==null?void 0:ne.type;return(Z==null?void 0:Z.includes("mouse"))&&Z!=="mousedown"},[i]);P.useEffect(()=>{if(!a)return;function ne(Z){let{open:ie}=Z;ie||(clearTimeout(w.current),clearTimeout(T.current),C.current=!0,N.current=!1)}return s.on("openchange",ne),()=>{s.off("openchange",ne)}},[a,s]),P.useEffect(()=>{if(!a||!m.current||!n)return;function ne(ie){O()&&r(!1,ie,"hover")}const Z=pw(o.floating).documentElement;return Z.addEventListener("mouseleave",ne),()=>{Z.removeEventListener("mouseleave",ne)}},[o.floating,n,r,a,m,O]);const L=P.useCallback(function(ne,Z,ie){Z===void 0&&(Z=!0),ie===void 0&&(ie="hover");const q=KM(g.current,"close",b.current);q&&!E.current?(clearTimeout(w.current),w.current=window.setTimeout(()=>r(!1,ne,ie),q)):Z&&(clearTimeout(w.current),r(!1,ne,ie))},[g,r]),B=gy(()=>{R.current(),E.current=void 0}),F=gy(()=>{if(I.current){const ne=pw(o.floating).body;ne.style.pointerEvents="",ne.removeAttribute(ile),I.current=!1}}),H=gy(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);P.useEffect(()=>{if(!a)return;function ne(U){if(clearTimeout(w.current),C.current=!1,c&&!tW(b.current)||f>0&&!KM(g.current,"open"))return;const G=KM(g.current,"open",b.current);G?w.current=window.setTimeout(()=>{v.current||r(!0,U,"hover")},G):n||r(!0,U,"hover")}function Z(U){if(H())return;R.current();const G=pw(o.floating);if(clearTimeout(T.current),N.current=!1,m.current&&i.current.floatingContext){n||clearTimeout(w.current),E.current=m.current({...i.current.floatingContext,tree:h,x:U.clientX,y:U.clientY,onClose(){F(),B(),H()||L(U,!0,"safe-polygon")}});const Y=E.current;G.addEventListener("mousemove",Y),R.current=()=>{G.removeEventListener("mousemove",Y)};return}(b.current==="touch"?!gN(o.floating,U.relatedTarget):!0)&&L(U)}function ie(U){H()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:U.clientX,y:U.clientY,onClose(){F(),B(),H()||L(U)}})(U))}if(jc(o.domReference)){var q;const U=o.domReference;return n&&U.addEventListener("mouseleave",ie),(q=o.floating)==null||q.addEventListener("mouseleave",ie),d&&U.addEventListener("mousemove",ne,{once:!0}),U.addEventListener("mouseenter",ne),U.addEventListener("mouseleave",Z),()=>{var G;n&&U.removeEventListener("mouseleave",ie),(G=o.floating)==null||G.removeEventListener("mouseleave",ie),d&&U.removeEventListener("mousemove",ne),U.removeEventListener("mouseenter",ne),U.removeEventListener("mouseleave",Z)}}},[o,a,e,c,f,d,L,B,F,r,n,v,h,g,m,i,H]),v0(()=>{var ne;if(a&&n&&(ne=m.current)!=null&&ne.__options.blockPointerEvents&&O()){I.current=!0;const ie=o.floating;if(jc(o.domReference)&&ie){var Z;const q=pw(o.floating).body;q.setAttribute(ile,"");const U=o.domReference,G=h==null||(Z=h.nodesRef.current.find(V=>V.id===p))==null||(Z=Z.context)==null?void 0:Z.elements.floating;return G&&(G.style.pointerEvents=""),q.style.pointerEvents="none",U.style.pointerEvents="auto",ie.style.pointerEvents="auto",()=>{q.style.pointerEvents="",U.style.pointerEvents="",ie.style.pointerEvents=""}}}},[a,n,p,o,h,m,O]),v0(()=>{n||(b.current=void 0,N.current=!1,B(),F())},[n,B,F]),P.useEffect(()=>()=>{B(),clearTimeout(w.current),clearTimeout(T.current),F()},[a,o.domReference,B,F]);const Q=P.useMemo(()=>{function ne(Z){b.current=Z.pointerType}return{onPointerDown:ne,onPointerEnter:ne,onMouseMove(Z){const{nativeEvent:ie}=Z;function q(){!C.current&&!v.current&&r(!0,ie,"hover")}c&&!tW(b.current)||n||f===0||N.current&&Z.movementX**2+Z.movementY**2<2||(clearTimeout(T.current),b.current==="touch"?q():(N.current=!0,T.current=window.setTimeout(q,f)))}}},[c,r,n,v,f]),J=P.useMemo(()=>({onMouseEnter(){clearTimeout(w.current)},onMouseLeave(ne){H()||L(ne.nativeEvent,!1)}}),[L,H]);return P.useMemo(()=>a?{reference:Q,floating:J}:{},[a,Q,J])}const iW=()=>{},Z_e=P.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:iW,setState:iW,isInstantPhase:!1}),ewe=()=>P.useContext(Z_e);function Nqe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=P.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=P.useRef(null),a=P.useCallback(u=>{s({currentId:u})},[]);return v0(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),P.createElement(Z_e.Provider,{value:P.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function Pqe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s,enabled:o=!0}=t,a=s??i,u=ewe(),{currentId:l,setCurrentId:c,initialDelay:f,setState:d,timeoutMs:h}=u;return v0(()=>{o&&l&&(d({delay:{open:1,close:KM(f,"close")}}),l!==a&&r(!1))},[o,a,r,d,l,f]),v0(()=>{function p(){r(!1),d({delay:f,currentId:null})}if(o&&l&&!n&&l===a){if(h){const m=window.setTimeout(p,h);return()=>{clearTimeout(m)}}p()}},[o,n,d,l,a,r,f,h]),v0(()=>{o&&(c===iW||!n||c(a))},[o,n,c,a]),u}function uz(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const Oqe="data-floating-ui-focusable",Mqe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Lqe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},sle=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function $qe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:p}=t,m=fQ(),g=gy(typeof u=="function"?u:()=>!1),v=typeof u=="function"?g:u,b=P.useRef(!1),w=P.useRef(!1),{escapeKey:E,outsidePress:T}=sle(h),{escapeKey:C,outsidePress:I}=sle(p),R=P.useRef(!1),N=gy(Q=>{var J;if(!n||!o||!a||Q.key!=="Escape"||R.current)return;const ne=(J=s.current.floatingContext)==null?void 0:J.nodeId,Z=m?uz(m.nodesRef.current,ne):[];if(!E&&(Q.stopPropagation(),Z.length>0)){let ie=!0;if(Z.forEach(q=>{var U;if((U=q.context)!=null&&U.open&&!q.context.dataRef.current.__escapeKeyBubbles){ie=!1;return}}),!ie)return}r(!1,AHe(Q)?Q.nativeEvent:Q,"escape-key")}),O=gy(Q=>{var J;const ne=()=>{var Z;N(Q),(Z=n2(Q))==null||Z.removeEventListener("keydown",ne)};(J=n2(Q))==null||J.addEventListener("keydown",ne)}),L=gy(Q=>{var J;const ne=b.current;b.current=!1;const Z=w.current;if(w.current=!1,l==="click"&&Z||ne||typeof v=="function"&&!v(Q))return;const ie=n2(Q),q="["+dQ("inert")+"]",U=pw(i.floating).querySelectorAll(q);let G=jc(ie)?ie:null;for(;G&&!Wue(G);){const ae=wHe(G);if(Wue(ae)||!jc(ae))break;G=ae}if(U.length&&jc(ie)&&!IHe(ie)&&!gN(ie,i.floating)&&Array.from(U).every(ae=>!gN(G,ae)))return;if(ZX(ie)&&H){const ae=ie.clientWidth>0&&ie.scrollWidth>ie.clientWidth,_e=ie.clientHeight>0&&ie.scrollHeight>ie.clientHeight;let pe=_e&&Q.offsetX>ie.clientWidth;if(_e&&_He(ie).direction==="rtl"&&(pe=Q.offsetX<=ie.offsetWidth-ie.clientWidth),pe||ae&&Q.offsetY>ie.clientHeight)return}const V=(J=s.current.floatingContext)==null?void 0:J.nodeId,Y=m&&uz(m.nodesRef.current,V).some(ae=>{var _e;return iz(Q,(_e=ae.context)==null?void 0:_e.elements.floating)});if(iz(Q,i.floating)||iz(Q,i.domReference)||Y)return;const ee=m?uz(m.nodesRef.current,V):[];if(ee.length>0){let ae=!0;if(ee.forEach(_e=>{var pe;if((pe=_e.context)!=null&&pe.open&&!_e.context.dataRef.current.__outsidePressBubbles){ae=!1;return}}),!ae)return}r(!1,Q,"outside-press")}),B=gy(Q=>{var J;const ne=()=>{var Z;L(Q),(Z=n2(Q))==null||Z.removeEventListener(l,ne)};(J=n2(Q))==null||J.addEventListener(l,ne)});P.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=E,s.current.__outsidePressBubbles=T;let Q=-1;function J(U){r(!1,U,"ancestor-scroll")}function ne(){window.clearTimeout(Q),R.current=!0}function Z(){Q=window.setTimeout(()=>{R.current=!1},xHe()?5:0)}const ie=pw(i.floating);a&&(ie.addEventListener("keydown",C?O:N,C),ie.addEventListener("compositionstart",ne),ie.addEventListener("compositionend",Z)),v&&ie.addEventListener(l,I?B:L,I);let q=[];return d&&(jc(i.domReference)&&(q=Py(i.domReference)),jc(i.floating)&&(q=q.concat(Py(i.floating))),!jc(i.reference)&&i.reference&&i.reference.contextElement&&(q=q.concat(Py(i.reference.contextElement)))),q=q.filter(U=>{var G;return U!==((G=ie.defaultView)==null?void 0:G.visualViewport)}),q.forEach(U=>{U.addEventListener("scroll",J,{passive:!0})}),()=>{a&&(ie.removeEventListener("keydown",C?O:N,C),ie.removeEventListener("compositionstart",ne),ie.removeEventListener("compositionend",Z)),v&&ie.removeEventListener(l,I?B:L,I),q.forEach(U=>{U.removeEventListener("scroll",J)}),window.clearTimeout(Q)}},[s,i,a,v,l,n,r,d,o,E,T,N,C,O,L,I,B]),P.useEffect(()=>{b.current=!1},[v,l]);const F=P.useMemo(()=>({onKeyDown:N,[Mqe[f]]:Q=>{c&&r(!1,Q.nativeEvent,"reference-press")}}),[N,r,c,f]),H=P.useMemo(()=>({onKeyDown:N,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[Lqe[l]]:()=>{b.current=!0}}),[N,l]);return P.useMemo(()=>o?{reference:F,floating:H}:{},[o,F,H])}function Fqe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=J_e(),s=P.useRef({}),[o]=P.useState(()=>Iqe()),a=cQ()!=null,[u,l]=P.useState(r.reference),c=gy((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=P.useMemo(()=>({setPositionReference:l}),[]),d=P.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return P.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function hQ(e){e===void 0&&(e={});const{nodeId:t}=e,n=Fqe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=P.useState(null),[a,u]=P.useState(null),c=(i==null?void 0:i.domReference)||s,f=P.useRef(null),d=fQ();v0(()=>{c&&(f.current=c)},[c]);const h=xqe({...e,elements:{...i,...a&&{reference:a}}}),p=P.useCallback(w=>{const E=jc(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;u(E),h.refs.setReference(E)},[h.refs]),m=P.useCallback(w=>{(jc(w)||w===null)&&(f.current=w,o(w)),(jc(h.refs.reference.current)||h.refs.reference.current===null||w!==null&&!jc(w))&&h.refs.setReference(w)},[h.refs]),g=P.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),v=P.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),b=P.useMemo(()=>({...h,...r,refs:g,elements:v,nodeId:t}),[h,g,v,t,r]);return v0(()=>{r.dataRef.current.floatingContext=b;const w=d==null?void 0:d.nodesRef.current.find(E=>E.id===t);w&&(w.context=b)}),P.useMemo(()=>({...h,context:b,refs:g,elements:v}),[h,g,v,b])}function Bqe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=P.useRef(!1),c=P.useRef(),f=P.useRef(!0);P.useEffect(()=>{if(!a)return;const h=EA(o.domReference);function p(){!n&&ZX(o.domReference)&&o.domReference===Gue(pw(o.domReference))&&(l.current=!0)}function m(){f.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),P.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),P.useEffect(()=>()=>{clearTimeout(c.current)},[]);const d=P.useMemo(()=>({onPointerDown(h){EHe(h.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const p=n2(h.nativeEvent);if(u&&jc(p))try{if(THe()&&SHe())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!f.current&&!RHe(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=jc(p)&&p.hasAttribute(dQ("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var v;const b=Gue(o.domReference?o.domReference.ownerDocument:document);!p&&b===o.domReference||gN((v=s.current.floatingContext)==null?void 0:v.refs.floating.current,b)||gN(o.domReference,b)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,u]);return P.useMemo(()=>a?{reference:d}:{},[a,d])}const ole="active",ale="selected";function lz(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[ole]:o,[ale]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1,[Oqe]:""},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[ole,ale].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function jqe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=P.useCallback(a=>lz(a,e,"reference"),t),s=P.useCallback(a=>lz(a,e,"floating"),n),o=P.useCallback(a=>lz(a,e,"item"),r);return P.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const Uqe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function zqe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=Uqe.get(o))!=null?n:o,u=J_e(),c=cQ()!=null,f=P.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,o]),d=P.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,o]),h=P.useCallback(p=>{let{active:m,selected:g}=p;const v={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...v,"aria-selected":m&&g};case"combobox":return{...v,...m&&{"aria-selected":!0}}}return{}},[i,o]);return P.useMemo(()=>s?{reference:f,floating:d,item:h}:{},[s,f,d,h])}function twe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function ule(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function lle(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const Vqe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function Hqe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[Vqe[u]]:r},f=-t/2;return u==="left"?{...c,...ule(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:u==="right"?{...c,...ule(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:u==="top"?{...c,...lle(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:u==="bottom"?{...c,...lle(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const pQ=P.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=b1();return s?S.jsx("div",{...l,ref:c,style:{...u,...Hqe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});pQ.displayName="@mantine/core/FloatingArrow";var nwe={root:"m_9814e45f"};const qqe={zIndex:ff("modal")},Wqe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&zm(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Ke(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Ci(s),"--overlay-z-index":o==null?void 0:o.toString()}}),dC=Xo((e,t)=>{const n=Je("Overlay",qqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:v,mod:b,...w}=n,E=Zt({name:"Overlay",props:n,classes:nwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Wqe});return S.jsx(je,{ref:t,...E("root"),mod:[{center:c,fixed:l},b],...w,children:f})});dC.classes=nwe;dC.displayName="@mantine/core/Overlay";function Gqe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const Yqe={},rwe=P.forwardRef((e,t)=>{const{children:n,target:r,...i}=Je("Portal",Yqe,e),[s,o]=P.useState(!1),a=P.useRef(null);return CE(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:Gqe(i),F$(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:Q8.createPortal(S.jsx(S.Fragment,{children:n}),a.current)});rwe.displayName="@mantine/core/Portal";function fx({withinPortal:e=!0,children:t,...n}){return e?S.jsx(rwe,{...n,children:t}):S.jsx(S.Fragment,{children:t})}fx.displayName="@mantine/core/OptionalPortal";const qk=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${e==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),$4={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...qk("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...qk("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...qk("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...qk("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...qk("top"),common:{transformOrigin:"top right"}}},cle={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function Kqe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in $4?{transitionProperty:$4[e].transitionProperty,...i,...$4[e].common,...$4[e][cle[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[cle[t]]}}function Xqe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:u,exitDelay:l}){const c=Po(),f=Y8(),d=c.respectReducedMotion?f:!1,[h,p]=P.useState(d?0:e),[m,g]=P.useState(r?"entered":"exited"),v=P.useRef(-1),b=P.useRef(-1),w=P.useRef(-1),E=C=>{const I=C?i:s,R=C?o:a;window.clearTimeout(v.current);const N=d?0:C?e:t;p(N),N===0?(typeof I=="function"&&I(),typeof R=="function"&&R(),g(C?"entered":"exited")):w.current=requestAnimationFrame(()=>{BR.flushSync(()=>{g(C?"pre-entering":"pre-exiting")}),w.current=requestAnimationFrame(()=>{typeof I=="function"&&I(),g(C?"entering":"exiting"),v.current=window.setTimeout(()=>{typeof R=="function"&&R(),g(C?"entered":"exited")},N)})})},T=C=>{if(window.clearTimeout(b.current),typeof(C?u:l)!="number"){E(C);return}b.current=window.setTimeout(()=>{E(C)},C?u:l)};return P0(()=>{T(r)},[r]),P.useEffect(()=>()=>{window.clearTimeout(v.current),cancelAnimationFrame(w.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function rg({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=Xqe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d});return h===0?i?S.jsx(S.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:S.jsx(S.Fragment,{children:s(Kqe({transition:t,duration:h,state:p,timingFunction:m}))})}rg.displayName="@mantine/core/Transition";const[Qqe,iwe]=Iu("Popover component was not found in the tree");function rB({children:e,active:t=!0,refProp:n="ref",innerRef:r}){const i=Cze(t),s=No(i,r);return ax(e)?P.cloneElement(e,{[n]:s}):e}function swe(e){return S.jsx(JX,{tabIndex:-1,"data-autofocus":!0,...e})}rB.displayName="@mantine/core/FocusTrap";swe.displayName="@mantine/core/FocusTrapInitialFocus";rB.InitialFocus=swe;var owe={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const Jqe={},mQ=At((e,t)=>{var g,v,b,w;const n=Je("PopoverDropdown",Jqe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=iwe(),h=n_e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=No(t,d.floating);return d.disabled?null:S.jsx(fx,{...d.portalProps,withinPortal:d.withinPortal,children:S.jsx(rg,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((v=d.transitionProps)==null?void 0:v.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((b=d.transitionProps)==null?void 0:b.exitDuration)=="number"?d.transitionProps.exitDuration:(w=d.transitionProps)==null?void 0:w.duration,children:E=>S.jsx(rB,{active:d.trapFocus&&d.opened,innerRef:m,children:S.jsxs(je,{...p,...f,variant:u,onKeyDownCapture:hze(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...E,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Ke(d.width)},d.resolvedStyles.dropdown,c==null?void 0:c.dropdown,i]}),children:[o,S.jsx(pQ,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});mQ.classes=owe;mQ.displayName="@mantine/core/PopoverDropdown";const Zqe={refProp:"ref",popupType:"dialog"},awe=At((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Je("PopoverTarget",Zqe,e);if(!ax(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=iwe(),u=No(a.reference,K8(n),t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return P.cloneElement(n,{...o,...l,...a.targetProps,className:Io(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});awe.displayName="@mantine/core/PopoverTarget";function uwe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=P.useState(0);P.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current&&e)return dqe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),P0(()=>{t.update()},r),P0(()=>{s(o=>o+1)},[e])}function eWe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function tWe(e,t){const n=eWe(e.middlewares),r=[K_e(e.offset)];return n.shift&&r.push(lQ(typeof n.shift=="boolean"?{limiter:tle(),padding:5}:{limiter:tle(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?V$():V$(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?RD():RD(n.inline)),r.push(X_e({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(wqe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o,...a}){var c;const l=((c=t().refs.floating.current)==null?void 0:c.style)??{};n.size&&(typeof n.size=="object"&&n.size.apply?n.size.apply({rects:i,availableWidth:s,availableHeight:o,...a}):Object.assign(l,{maxWidth:`${s}px`,maxHeight:`${o}px`})),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function nWe(e){const[t,n]=Yo({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=P.useRef(t),i=()=>{t&&n(!1)},s=()=>n(!t),o=hQ({strategy:e.strategy,placement:e.position,middleware:tWe(e,()=>o)});return uwe({opened:t,position:e.position,positionDependencies:e.positionDependencies||[],floating:o}),P0(()=>{var a;(a=e.onPositionChange)==null||a.call(e,o.placement)},[o.placement]),P0(()=>{var a,u;t!==r.current&&(t?(u=e.onOpen)==null||u.call(e):(a=e.onClose)==null||a.call(e)),r.current=t},[t,e.onClose,e.onOpen]),{floating:o,controlled:typeof e.opened=="boolean",opened:t,onClose:i,onToggle:s}}const rWe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:ff("popover"),__staticSelector:"Popover",width:"max-content"},iWe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Ci(t),"--popover-shadow":jX(n)}});function _u(e){var dt,wt,ke,Oe,ht,Lt;const t=Je("Popover",rWe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,onExitTransitionEnd:l,onEnterTransitionEnd:c,width:f,middlewares:d,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:v,unstyled:b,classNames:w,styles:E,closeOnClickOutside:T,withinPortal:C,portalProps:I,closeOnEscape:R,clickOutsideEvents:N,trapFocus:O,onClose:L,onOpen:B,onChange:F,zIndex:H,radius:Q,shadow:J,id:ne,defaultOpened:Z,__staticSelector:ie,withRoles:q,disabled:U,returnFocus:G,variant:V,keepMounted:Y,vars:ee,floatingStrategy:ae,withOverlay:_e,overlayProps:pe,...Te}=t,Le=Zt({name:ie,props:t,classes:owe,classNames:w,styles:E,unstyled:b,rootSelector:"dropdown",vars:ee,varsResolver:iWe}),{resolvedStyles:ye}=AE({classNames:w,styles:E,props:t}),he=P.useRef(null),[$e,De]=P.useState(null),[tt,it]=P.useState(null),{dir:Me}=b1(),Ge=yl(ne),at=nWe({middlewares:d,width:f,position:twe(Me,r),offset:typeof i=="number"?i+(h?p/2:0):i,arrowRef:he,arrowOffset:m,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:Z,onChange:F,onOpen:B,onClose:L,strategy:ae});yze(()=>T&&at.onClose(),N,[$e,tt]);const yt=P.useCallback(Ft=>{De(Ft),at.floating.refs.setReference(Ft)},[at.floating.refs.setReference]),Tt=P.useCallback(Ft=>{it(Ft),at.floating.refs.setFloating(Ft)},[at.floating.refs.setFloating]),Ot=P.useCallback(()=>{var Ft;(Ft=u==null?void 0:u.onExited)==null||Ft.call(u),l==null||l()},[u==null?void 0:u.onExited,l]),qe=P.useCallback(()=>{var Ft;(Ft=u==null?void 0:u.onEntered)==null||Ft.call(u),c==null||c()},[u==null?void 0:u.onEntered,c]);return S.jsxs(Qqe,{value:{returnFocus:G,disabled:U,controlled:at.controlled,reference:yt,floating:Tt,x:at.floating.x,y:at.floating.y,arrowX:(ke=(wt=(dt=at.floating)==null?void 0:dt.middlewareData)==null?void 0:wt.arrow)==null?void 0:ke.x,arrowY:(Lt=(ht=(Oe=at.floating)==null?void 0:Oe.middlewareData)==null?void 0:ht.arrow)==null?void 0:Lt.y,opened:at.opened,arrowRef:he,transitionProps:{...u,onExited:Ot,onEntered:qe},width:f,withArrow:h,arrowSize:p,arrowOffset:m,arrowRadius:g,arrowPosition:v,placement:at.floating.placement,trapFocus:O,withinPortal:C,portalProps:I,zIndex:H,radius:Q,shadow:J,closeOnEscape:R,onClose:at.onClose,onToggle:at.onToggle,getTargetId:()=>`${Ge}-target`,getDropdownId:()=>`${Ge}-dropdown`,withRoles:q,targetProps:Te,__staticSelector:ie,classNames:w,styles:E,unstyled:b,variant:V,keepMounted:Y,getStyles:Le,resolvedStyles:ye,floatingStrategy:ae},children:[n,_e&&S.jsx(rg,{transition:"fade",mounted:at.opened,duration:(u==null?void 0:u.duration)||250,exitDuration:(u==null?void 0:u.exitDuration)||250,children:Ft=>S.jsx(fx,{withinPortal:C,children:S.jsx(dC,{...pe,...Le("overlay",{className:pe==null?void 0:pe.className,style:[Ft,pe==null?void 0:pe.style]})})})})]})}_u.Target=awe;_u.Dropdown=mQ;_u.displayName="@mantine/core/Popover";_u.extend=e=>e;var Tp={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const lwe=P.forwardRef(({className:e,...t},n)=>S.jsxs(je,{component:"span",className:Io(Tp.barsLoader,e),...t,ref:n,children:[S.jsx("span",{className:Tp.bar}),S.jsx("span",{className:Tp.bar}),S.jsx("span",{className:Tp.bar})]}));lwe.displayName="@mantine/core/Bars";const cwe=P.forwardRef(({className:e,...t},n)=>S.jsxs(je,{component:"span",className:Io(Tp.dotsLoader,e),...t,ref:n,children:[S.jsx("span",{className:Tp.dot}),S.jsx("span",{className:Tp.dot}),S.jsx("span",{className:Tp.dot})]}));cwe.displayName="@mantine/core/Dots";const fwe=P.forwardRef(({className:e,...t},n)=>S.jsx(je,{component:"span",className:Io(Tp.ovalLoader,e),...t,ref:n}));fwe.displayName="@mantine/core/Oval";const dwe={bars:lwe,oval:fwe,dots:cwe},sWe={loaders:dwe,type:"oval"},oWe=(e,{size:t,color:n})=>({root:{"--loader-size":Kn(t,"loader-size"),"--loader-color":n?qi(n,e):void 0}}),df=At((e,t)=>{const n=Je("Loader",sWe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=Zt({name:"Loader",props:n,classes:Tp,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:oWe});return p?S.jsx(je,{...g("root"),ref:t,...m,children:p}):S.jsx(je,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});df.defaultLoaders=dwe;df.classes=Tp;df.displayName="@mantine/core/Loader";var CA={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const fle={orientation:"horizontal"},aWe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Ke(t)}}),gQ=At((e,t)=>{const n=Je("ActionIconGroup",fle,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Je("ActionIconGroup",fle,e),p=Zt({name:"ActionIconGroup",props:n,classes:CA,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:aWe,rootSelector:"group"});return S.jsx(je,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});gQ.classes=CA;gQ.displayName="@mantine/core/ActionIconGroup";const dle={},uWe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":Kn(o,"section-height"),"--section-padding-x":Kn(o,"section-padding-x"),"--section-fz":Va(o),"--section-radius":t===void 0?void 0:Ci(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},yQ=At((e,t)=>{const n=Je("ActionIconGroupSection",dle,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=Je("ActionIconGroupSection",dle,e),p=Zt({name:"ActionIconGroupSection",props:n,classes:CA,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:uWe,rootSelector:"groupSection"});return S.jsx(je,{...p("groupSection"),ref:t,variant:l,...h})});yQ.classes=CA;yQ.displayName="@mantine/core/ActionIconGroupSection";const lWe={},cWe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Kn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Ci(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},dx=Xo((e,t)=>{const n=Je("ActionIcon",lWe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:v,disabled:b,"data-disabled":w,autoContrast:E,mod:T,...C}=n,I=Zt({name:["ActionIcon",p],props:n,className:r,style:u,classes:CA,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:cWe});return S.jsxs(ud,{...I("root",{active:!b&&!l&&!w}),...C,unstyled:i,variant:s,size:f,disabled:b||l,ref:t,mod:[{loading:l,disabled:b||w},T],children:[S.jsx(rg,{mounted:!!l,transition:"slide-down",duration:150,children:R=>S.jsx(je,{component:"span",...I("loader",{style:R}),"aria-hidden":!0,children:S.jsx(df,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),S.jsx(je,{component:"span",mod:{loading:l},...I("icon"),children:v})]})});dx.classes=CA;dx.displayName="@mantine/core/ActionIcon";dx.Group=gQ;dx.GroupSection=yQ;const hwe=P.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>S.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:S.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));hwe.displayName="@mantine/core/CloseIcon";var pwe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const fWe={variant:"subtle"},dWe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Kn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Ci(n),"--cb-icon-size":Ke(r)}}),hx=Xo((e,t)=>{const n=Je("CloseButton",fWe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,__staticSelector:v,...b}=n,w=Zt({name:v||"CloseButton",props:n,className:a,style:l,classes:pwe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:dWe});return S.jsxs(ud,{ref:t,...b,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...w("root",{variant:p,active:!h&&!d}),children:[m||S.jsx(hwe,{}),i]})});hx.classes=pwe;hx.displayName="@mantine/core/CloseButton";function hWe(e){return P.Children.toArray(e).filter(Boolean)}var mwe={root:"m_4081bf90"};const pWe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},mWe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Go(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Yr=At((e,t)=>{const n=Je("Group",pWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:v,mod:b,...w}=n,E=hWe(u),T=E.length,C=Go(l??"md"),R={childWidth:`calc(${100/T}% - (${C} - ${C} / ${T}))`},N=Zt({name:"Group",props:n,stylesCtx:R,className:i,style:s,classes:mwe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:mWe});return S.jsx(je,{...N("root"),ref:t,variant:g,mod:[{grow:h},b],size:v,...w,children:E})});Yr.classes=mwe;Yr.displayName="@mantine/core/Group";const[gWe,_1]=Iu("ModalBase component was not found in tree");function yWe({opened:e,transitionDuration:t}){const[n,r]=P.useState(e),i=P.useRef(-1),o=Y8()?0:t;return P.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function vWe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=yl(e),[u,l]=P.useState(!1),[c,f]=P.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=yWe({opened:n,transitionDuration:d});return o_e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),n_e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const gwe=P.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,onExitTransitionEnd:s,onEnterTransitionEnd:o,trapFocus:a,closeOnEscape:u,returnFocus:l,closeOnClickOutside:c,withinPortal:f,portalProps:d,lockScroll:h,children:p,zIndex:m,shadow:g,padding:v,__vars:b,unstyled:w,removeScrollProps:E,...T},C)=>{const{_id:I,titleMounted:R,bodyMounted:N,shouldLockScroll:O,setTitleMounted:L,setBodyMounted:B}=vWe({id:r,transitionProps:i,opened:t,trapFocus:a,closeOnEscape:u,onClose:n,returnFocus:l}),{key:F,...H}=E||{};return S.jsx(fx,{...d,withinPortal:f,children:S.jsx(gWe,{value:{opened:t,onClose:n,closeOnClickOutside:c,onExitTransitionEnd:s,onEnterTransitionEnd:o,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${I}-title`,getBodyId:()=>`${I}-body`,titleMounted:R,bodyMounted:N,setTitleMounted:L,setBodyMounted:B,trapFocus:a,closeOnEscape:u,zIndex:m,unstyled:w},children:S.jsx(uC,{enabled:O&&h,...H,children:S.jsx(je,{ref:C,...T,__vars:{...b,"--mb-z-index":(m||ff("modal")).toString(),"--mb-shadow":jX(g),"--mb-padding":Go(v)},children:p})},F)})})});gwe.displayName="@mantine/core/ModalBase";function bWe(){const e=_1();return P.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var hC={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const ywe=P.forwardRef(({className:e,...t},n)=>{const r=bWe(),i=_1();return S.jsx(je,{ref:n,...t,id:r,className:Io({[hC.body]:!i.unstyled},e)})});ywe.displayName="@mantine/core/ModalBaseBody";const vwe=P.forwardRef(({className:e,onClick:t,...n},r)=>{const i=_1();return S.jsx(hx,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Io({[hC.close]:!i.unstyled},e),unstyled:i.unstyled})});vwe.displayName="@mantine/core/ModalBaseCloseButton";const bwe=P.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=_1();return S.jsx(rg,{mounted:a.opened,transition:"pop",...a.transitionProps,onExited:()=>{var u,l,c;(u=a.onExitTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onExited)==null||c.call(l)},onEntered:()=>{var u,l,c;(u=a.onEnterTransitionEnd)==null||u.call(a),(c=(l=a.transitionProps)==null?void 0:l.onEntered)==null||c.call(l)},...e,children:u=>S.jsx("div",{...n,className:Io({[hC.inner]:!a.unstyled},n.className),children:S.jsx(rB,{active:a.opened&&a.trapFocus,innerRef:o,children:S.jsx(wA,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,style:[i,u],className:Io({[hC.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})});bwe.displayName="@mantine/core/ModalBaseContent";const xwe=P.forwardRef(({className:e,...t},n)=>{const r=_1();return S.jsx(je,{component:"header",ref:n,className:Io({[hC.header]:!r.unstyled},e),...t})});xwe.displayName="@mantine/core/ModalBaseHeader";const xWe={duration:200,timingFunction:"ease",transition:"fade"};function _We(e){const t=_1();return{...xWe,...t.transitionProps,...e}}const _we=P.forwardRef(({onClick:e,transitionProps:t,style:n,visible:r,...i},s)=>{const o=_1(),a=_We(t);return S.jsx(rg,{mounted:r!==void 0?r:o.opened,...a,transition:"fade",children:u=>S.jsx(dC,{ref:s,fixed:!0,style:[n,u],zIndex:o.zIndex,unstyled:o.unstyled,onClick:l=>{e==null||e(l),o.closeOnClickOutside&&o.onClose()},...i})})});_we.displayName="@mantine/core/ModalBaseOverlay";function wWe(){const e=_1();return P.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const wwe=P.forwardRef(({className:e,...t},n)=>{const r=wWe(),i=_1();return S.jsx(je,{component:"h2",ref:n,className:Io({[hC.title]:!i.unstyled},e),...t,id:r})});wwe.displayName="@mantine/core/ModalBaseTitle";function EWe({children:e}){return S.jsx(S.Fragment,{children:e})}const[TWe,SWe]=ux({size:"sm"}),CWe={},Ewe=At((e,t)=>{const n=Je("InputClearButton",CWe,e),{size:r,variant:i,vars:s,classNames:o,styles:a,...u}=n,l=SWe(),{resolvedClassNames:c,resolvedStyles:f}=AE({classNames:o,styles:a,props:n});return S.jsx(hx,{variant:i||"transparent",ref:t,size:r||(l==null?void 0:l.size)||"sm",classNames:c,styles:f,__staticSelector:"InputClearButton",...u})});Ewe.displayName="@mantine/core/InputClearButton";const[AWe,AA]=ux({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var bh={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const hle={},IWe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Va(t)} - ${Ke(2)})`}}),iB=At((e,t)=>{const n=Je("InputDescription",hle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Je("InputDescription",hle,n),p=AA(),m=Zt({name:["InputWrapper",c],props:n,classes:bh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:IWe}),g=f&&(p==null?void 0:p.getStyles)||m;return S.jsx(je,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});iB.classes=bh;iB.displayName="@mantine/core/InputDescription";const kWe={},RWe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Va(t)} - ${Ke(2)})`}}),sB=At((e,t)=>{const n=Je("InputError",kWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=Zt({name:["InputWrapper",c],props:n,classes:bh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:RWe}),m=AA(),g=f&&(m==null?void 0:m.getStyles)||p;return S.jsx(je,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});sB.classes=bh;sB.displayName="@mantine/core/InputError";const ple={labelElement:"label"},DWe=(e,{size:t})=>({label:{"--input-label-size":Va(t),"--input-asterisk-color":void 0}}),oB=At((e,t)=>{const n=Je("InputLabel",ple,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:v,...b}=Je("InputLabel",ple,n),w=Zt({name:["InputWrapper",m],props:n,classes:bh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:DWe}),E=AA(),T=(E==null?void 0:E.getStyles)||w;return S.jsxs(je,{...T("label",E!=null&&E.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},v],onMouseDown:C=>{h==null||h(C),!C.defaultPrevented&&C.detail>1&&C.preventDefault()},...b,children:[p,f&&S.jsx("span",{...T("required"),"aria-hidden":!0,children:" *"})]})});oB.classes=bh;oB.displayName="@mantine/core/InputLabel";const mle={},vQ=At((e,t)=>{const n=Je("InputPlaceholder",mle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Je("InputPlaceholder",mle,n),p=Zt({name:["InputPlaceholder",l],props:n,classes:bh,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return S.jsx(je,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});vQ.classes=bh;vQ.displayName="@mantine/core/InputPlaceholder";function NWe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const PWe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},OWe=(e,{size:t})=>({label:{"--input-label-size":Va(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Va(t)} - ${Ke(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Va(t)} - ${Ke(2)})`}}),bQ=At((e,t)=>{const n=Je("InputWrapper",PWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:v,descriptionProps:b,errorProps:w,labelElement:E,children:T,withAsterisk:C,id:I,required:R,__stylesApiProps:N,mod:O,...L}=n,B=Zt({name:["InputWrapper",f],props:N||n,classes:bh,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OWe}),F={size:l,variant:c,__staticSelector:f},H=yl(I),Q=typeof C=="boolean"?C:R,J=(w==null?void 0:w.id)||`${H}-error`,ne=(b==null?void 0:b.id)||`${H}-description`,Z=H,ie=!!m&&typeof m!="boolean",q=!!g,U=`${ie?J:""} ${q?ne:""}`,G=U.trim().length>0?U.trim():void 0,V=(v==null?void 0:v.id)||`${H}-label`,Y=p&&S.jsx(oB,{labelElement:E,id:V,htmlFor:Z,required:Q,...F,...v,children:p},"label"),ee=q&&S.jsx(iB,{...b,...F,size:(b==null?void 0:b.size)||F.size,id:(b==null?void 0:b.id)||ne,children:g},"description"),ae=S.jsx(P.Fragment,{children:d(T)},"input"),_e=ie&&P.createElement(sB,{...w,...F,size:(w==null?void 0:w.size)||F.size,key:"error",id:(w==null?void 0:w.id)||J},m),pe=h.map(Te=>{switch(Te){case"label":return Y;case"input":return ae;case"description":return ee;case"error":return _e;default:return null}});return S.jsx(AWe,{value:{getStyles:B,describedBy:G,inputId:Z,labelId:V,...NWe(h,{hasDescription:q,hasError:ie})},children:S.jsx(je,{ref:t,variant:c,size:l,mod:[{error:!!m},O],...B("root"),...L,children:pe})})});bQ.classes=bh;bQ.displayName="@mantine/core/InputWrapper";const MWe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},LWe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Kn(t.size,"input-height"),"--input-fz":Va(t.size),"--input-radius":t.radius===void 0?void 0:Ci(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Ke(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Ke(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Kn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Ki=Xo((e,t)=>{const n=Je("Input",MWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:v,rightSection:b,rightSectionProps:w,rightSectionWidth:E,rightSectionPointerEvents:T,leftSectionPointerEvents:C,variant:I,vars:R,pointer:N,multiline:O,radius:L,id:B,withAria:F,withErrorStyles:H,mod:Q,inputSize:J,__clearSection:ne,__clearable:Z,__defaultRightSection:ie,...q}=n,{styleProps:U,rest:G}=kE(q),V=AA(),Y={offsetBottom:V==null?void 0:V.offsetBottom,offsetTop:V==null?void 0:V.offsetTop},ee=Zt({name:["Input",l],props:c||n,classes:bh,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:Y,rootSelector:"wrapper",vars:R,varsResolver:LWe}),ae=F?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":V==null?void 0:V.describedBy,id:(V==null?void 0:V.inputId)||B}:{},_e=b||Z&&ne||ie;return S.jsx(TWe,{value:{size:f||"sm"},children:S.jsxs(je,{...ee("wrapper"),...U,...d,mod:[{error:!!h&&H,pointer:N,disabled:p,multiline:O,"data-with-right-section":!!b,"data-with-left-section":!!m},Q],variant:I,size:f,children:[m&&S.jsx("div",{...g,"data-position":"left",...ee("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),S.jsx(je,{component:"input",...G,...ae,ref:t,required:u,mod:{disabled:p,error:!!h&&H},variant:I,__size:J,...ee("input")}),_e&&S.jsx("div",{...w,"data-position":"right",...ee("section",{className:w==null?void 0:w.className,style:w==null?void 0:w.style}),children:_e})]})})});Ki.classes=bh;Ki.Wrapper=bQ;Ki.Label=oB;Ki.Error=sB;Ki.Description=iB;Ki.Placeholder=vQ;Ki.ClearButton=Ewe;Ki.displayName="@mantine/core/Input";function $We(e,t,n){const r=Je(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:v,id:b,size:w,style:E,inputContainer:T,inputWrapperOrder:C,withAsterisk:I,variant:R,vars:N,mod:O,...L}=r,{styleProps:B,rest:F}=kE(L),H={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:w,style:E,inputContainer:T,inputWrapperOrder:C,withAsterisk:I,variant:R,id:b,mod:O,...v};return{...F,classNames:u,styles:l,unstyled:f,wrapperProps:{...H,...B},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:w,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:R,id:b}}}const FWe={__staticSelector:"InputBase",withAria:!0},xh=Xo((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=$We("InputBase",FWe,e);return S.jsx(Ki.Wrapper,{...r,children:S.jsx(Ki,{...n,...i,ref:t})})});xh.classes={...Ki.classes,...Ki.Wrapper.classes};xh.displayName="@mantine/core/InputBase";const BWe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Twe={root:"m_8bffd616"};const jWe={},an=Xo((e,t)=>{const n=Je("Flex",jWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,v=Zt({name:"Flex",classes:Twe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),b=Po(),w=BP(),E=g_e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:b,data:BWe});return S.jsxs(S.Fragment,{children:[E.hasResponsiveStyles&&S.jsx(IE,{selector:`.${w}`,styles:E.styles,media:E.media}),S.jsx(je,{ref:t,...v("root",{className:w,style:ox(E.inlineStyles)}),...g})]})});an.classes=Twe;an.displayName="@mantine/core/Flex";function UWe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function zWe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=P.useRef(-1),[s,o]=P.useState(!1),[a,u]=P.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t||!n.current)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m=window.getComputedStyle(e),g=window.getComputedStyle(t),v=Kv(m.borderTopWidth)+Kv(g.borderTopWidth),b=Kv(m.borderLeftWidth)+Kv(g.borderLeftWidth),w={top:h.top-p.top-v,left:h.left-p.left-b,width:h.width,height:h.height};n.current.style.transform=`translateY(${w.top}px) translateX(${w.left}px)`,n.current.style.width=`${w.width}px`,n.current.style.height=`${w.height}px`},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=P.useRef(null),d=P.useRef(null);return P.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),P.useEffect(()=>{if(t){const h=p=>{UWe(p.target,t)&&(c(),u(!1))};return t.addEventListener("transitionend",h),()=>{t.removeEventListener("transitionend",h)}}},[t]),$ze(()=>{l_e()!=="test"&&o(!0)},20,{autoInvoke:!0}),Bze(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Swe={root:"m_96b553a6"};const VWe={},HWe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),xQ=At((e,t)=>{const n=Je("FloatingIndicator",VWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=Zt({name:"FloatingIndicator",classes:Swe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HWe}),g=P.useRef(null),{initialized:v,hidden:b}=zWe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),w=No(t,g);return!l||!c?null:S.jsx(je,{ref:w,mod:[{initialized:v,hidden:b},d],...m("root"),...p})});xQ.displayName="@mantine/core/FloatingIndicator";xQ.classes=Swe;const[qWe,_Q]=Iu("Accordion component was not found in the tree");function aB({style:e,size:t=16,...n}){return S.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Ke(t),height:Ke(t),display:"block"},...n,children:S.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}aB.displayName="@mantine/core/AccordionChevron";const[WWe,Cwe]=Iu("Accordion.Item component was not found in the tree");var UP={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const GWe={},wQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=Je("AccordionControl",GWe,e),{value:m}=Cwe(),g=_Q(),v=g.isItemActive(m),b=typeof g.order=="number",w=`h${g.order}`,E=S.jsxs(ud,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:v,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:T=>{l==null||l(T),g.onChange(m)},type:"button",disabled:d,"aria-expanded":v,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:BX({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[S.jsx(je,{component:"span",mod:{rotate:!g.disableChevronRotation&&v,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),S.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&S.jsx(je,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return b?S.jsx(w,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:E}):E});wQ.displayName="@mantine/core/AccordionControl";wQ.classes=UP;const YWe={},EQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=Je("AccordionItem",YWe,e),c=_Q();return S.jsx(WWe,{value:{value:a},children:S.jsx(je,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});EQ.displayName="@mantine/core/AccordionItem";EQ.classes=UP;const KWe={},TQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=Je("AccordionPanel",KWe,e),{value:l}=Cwe(),c=_Q();return S.jsx(J8,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:S.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});TQ.displayName="@mantine/core/AccordionPanel";TQ.classes=UP;const XWe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:S.jsx(aB,{})},QWe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Ke(n),"--accordion-radius":r===void 0?void 0:Ci(r)}});function Ju(e){const t=Je("Accordion",XWe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:v,chevronSize:b,order:w,chevron:E,variant:T,radius:C,...I}=t,R=yl(h),[N,O]=Yo({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),L=H=>Array.isArray(N)?N.includes(H):H===N,B=H=>{const Q=Array.isArray(N)?N.includes(H)?N.filter(J=>J!==H):[...N,H]:H===N?null:H;O(Q)},F=Zt({name:"Accordion",classes:UP,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:QWe});return S.jsx(qWe,{value:{isItemActive:L,onChange:B,getControlId:L$(`${R}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:L$(`${R}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:v,order:w,chevron:E,loop:p,getStyles:F,variant:T,unstyled:o},children:S.jsx(je,{...F("root"),id:R,...I,variant:T,"data-accordion":!0,children:u})})}const JWe=e=>e;Ju.extend=JWe;Ju.withProps=eHe(Ju);Ju.classes=UP;Ju.displayName="@mantine/core/Accordion";Ju.Item=EQ;Ju.Panel=TQ;Ju.Control=wQ;Ju.Chevron=aB;var Awe={root:"m_7f854edf"};const ZWe={position:{bottom:0,right:0},zIndex:ff("modal"),withinPortal:!0},eGe=(e,{zIndex:t,position:n})=>({root:{"--affix-z-index":t==null?void 0:t.toString(),"--affix-top":Ke(n==null?void 0:n.top),"--affix-left":Ke(n==null?void 0:n.left),"--affix-bottom":Ke(n==null?void 0:n.bottom),"--affix-right":Ke(n==null?void 0:n.right)}}),SQ=At((e,t)=>{const n=Je("Affix",ZWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,portalProps:l,zIndex:c,withinPortal:f,position:d,...h}=n,p=Zt({name:"Affix",classes:Awe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eGe});return S.jsx(fx,{...l,withinPortal:f,children:S.jsx(je,{ref:t,...p("root"),...h})})});SQ.classes=Awe;SQ.displayName="@mantine/core/Affix";var Iwe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const tGe={},nGe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Ci(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Oy=At((e,t)=>{const n=Je("Alert",tGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:v,variant:b,autoContrast:w,...E}=n,T=Zt({name:"Alert",classes:Iwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nGe}),C=yl(h),I=f&&`${C}-title`||void 0,R=`${C}-body`;return S.jsx(je,{id:C,...T("root",{variant:b}),variant:b,ref:t,...E,role:"alert","aria-describedby":R,"aria-labelledby":I,children:S.jsxs("div",{...T("wrapper"),children:[p&&S.jsx("div",{...T("icon"),children:p}),S.jsxs("div",{...T("body"),children:[f&&S.jsx("div",{...T("title"),"data-with-close-button":m||void 0,children:S.jsx("span",{id:I,...T("label"),children:f})}),d&&S.jsx("div",{id:R,...T("message"),"data-variant":b,children:d})]}),m&&S.jsx(hx,{...T("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":v,unstyled:a})]})})});Oy.classes=Iwe;Oy.displayName="@mantine/core/Alert";var kwe={root:"m_b6d8b162"};function rGe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const iGe={inherit:!1},sGe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Va(i),"--text-lh":t_e(i),"--text-gradient":t==="gradient"?Kq(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?qi(s,e):void 0}}),lt=Xo((e,t)=>{const n=Je("Text",iGe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:v,size:b,...w}=n,E=Zt({name:["Text",l],props:n,classes:kwe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:sGe});return S.jsx(je,{...E("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":rGe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},v],size:b,...w})});lt.classes=kwe;lt.displayName="@mantine/core/Text";var Rwe={root:"m_849cf0da"};const oGe={underline:"hover"},DE=Xo((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Je("Anchor",oGe,e);return S.jsx(lt,{component:"a",ref:t,className:Io({[Rwe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});DE.classes=Rwe;DE.displayName="@mantine/core/Anchor";const[aGe,IA]=Iu("AppShell was not found in tree");var px={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const uGe={},CQ=At((e,t)=>{const n=Je("AppShellAside",uGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=IA();return h.disabled?null:S.jsx(je,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});CQ.classes=px;CQ.displayName="@mantine/core/AppShellAside";const lGe={},AQ=At((e,t)=>{var p;const n=Je("AppShellFooter",lGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=IA();return h.disabled?null:S.jsx(je,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Io({[uC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});AQ.classes=px;AQ.displayName="@mantine/core/AppShellFooter";const cGe={},IQ=At((e,t)=>{var p;const n=Je("AppShellHeader",cGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=IA();return h.disabled?null:S.jsx(je,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Io({[uC.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});IQ.classes=px;IQ.displayName="@mantine/core/AppShellHeader";const fGe={},kQ=At((e,t)=>{const n=Je("AppShellMain",fGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=IA();return S.jsx(je,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});kQ.classes=px;kQ.displayName="@mantine/core/AppShellMain";function zP(e){return typeof e=="object"?e.base:e}function VP(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function HP(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function dGe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),VP(s)){const f=Ke(zP(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(HP(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Ke(s.base),e["--app-shell-aside-offset"]=Ke(s.base)),as(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Ke(s[f]),t[f]["--app-shell-aside-offset"]=Ke(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=UX(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function hGe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(VP(r)){const o=Ke(zP(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}HP(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Ke(r.base),s&&(e["--app-shell-footer-offset"]=Ke(r.base))),as(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Ke(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Ke(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function pGe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(VP(r)){const o=Ke(zP(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}HP(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Ke(r.base),s&&(e["--app-shell-header-offset"]=Ke(r.base))),as(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Ke(r[o]),s&&(t[o]["--app-shell-header-offset"]=Ke(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function mGe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),VP(s)){const f=Ke(zP(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(HP(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Ke(s.base),e["--app-shell-navbar-offset"]=Ke(s.base)),as(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Ke(s[f]),t[f]["--app-shell-navbar-offset"]=Ke(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=UX(r.breakpoint,i.breakpoints)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function cz(e){return Number(e)===0?"0px":Go(e)}function gGe({padding:e,baseStyles:t,minMediaStyles:n}){VP(e)&&(t["--app-shell-padding"]=cz(zP(e))),HP(e)&&(e.base&&(t["--app-shell-padding"]=cz(e.base)),as(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=cz(e[r]))}))}function yGe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};mGe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),dGe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),pGe({baseStyles:u,minMediaStyles:o,header:t}),hGe({baseStyles:u,minMediaStyles:o,footer:n}),gGe({baseStyles:u,minMediaStyles:o,padding:i});const l=pN(as(o),s.breakpoints).map(d=>({query:`(min-width: ${M$(d.px)})`,styles:o[d.value]})),c=pN(as(a),s.breakpoints).map(d=>({query:`(max-width: ${M$(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function vGe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Po(),o=lx(),{media:a,baseStyles:u}=yGe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return S.jsx(IE,{media:a,styles:u,selector:o.cssVariablesSelector})}const bGe={},RQ=At((e,t)=>{const n=Je("AppShellNavbar",bGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=IA();return h.disabled?null:S.jsx(je,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});RQ.classes=px;RQ.displayName="@mantine/core/AppShellNavbar";const xGe={},DQ=Xo((e,t)=>{const n=Je("AppShellSection",xGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=IA();return S.jsx(je,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});DQ.classes=px;DQ.displayName="@mantine/core/AppShellSection";function _Ge({transitionDuration:e,disabled:t}){const[n,r]=P.useState(!0),i=P.useRef(-1),s=P.useRef(-1);return o_e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>P.startTransition(()=>{r(!1)}),200)}),CE(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>P.startTransition(()=>{r(!1)}),e||0)},[t,e]),n}const wGe={withBorder:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:ff("app")},EGe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Vi=At((e,t)=>{const n=Je("AppShell",wGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:v,aside:b,footer:w,offsetScrollbars:E=g!=="alt",mod:T,...C}=n,I=Zt({name:"AppShell",classes:px,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EGe}),R=_Ge({disabled:v,transitionDuration:d});return S.jsxs(aGe,{value:{getStyles:I,withBorder:c,zIndex:m,disabled:v,offsetScrollbars:E},children:[S.jsx(vGe,{navbar:l,header:p,aside:b,footer:w,padding:f}),S.jsx(je,{ref:t,...I("root"),mod:[{resizing:R,layout:g,disabled:v},T],...C})]})});Vi.classes=px;Vi.displayName="@mantine/core/AppShell";Vi.Navbar=RQ;Vi.Header=IQ;Vi.Main=kQ;Vi.Aside=CQ;Vi.Footer=AQ;Vi.Section=DQ;function Dwe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Dwe(t))}:e}function Nwe(e){return e?e.map(t=>Dwe(t)):[]}function NQ(e){return e.reduce((t,n)=>"group"in n?{...t,...NQ(n.items)}:(t[n.value]=n,t),{})}var Jc={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const TGe={error:null},SGe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Kn(t,"combobox-chevron-size")}}),PQ=At((e,t)=>{const n=Je("ComboboxChevron",TGe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=Zt({name:"ComboboxChevron",classes:Jc,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:SGe,rootSelector:"chevron"});return S.jsx(je,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:S.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});PQ.classes=Jc;PQ.displayName="@mantine/core/ComboboxChevron";const[CGe,_h]=Iu("Combobox component was not found in tree"),Pwe=P.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>S.jsx(Ki.ClearButton,{ref:s,tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Pwe.displayName="@mantine/core/ComboboxClearButton";const AGe={},OQ=At((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Je("ComboboxDropdown",AGe,e),u=_h();return S.jsx(_u.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});OQ.classes=Jc;OQ.displayName="@mantine/core/ComboboxDropdown";const IGe={refProp:"ref"},Owe=At((e,t)=>{const{children:n,refProp:r}=Je("ComboboxDropdownTarget",IGe,e);if(_h(),!ax(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return S.jsx(_u.Target,{ref:t,refProp:r,children:n})});Owe.displayName="@mantine/core/ComboboxDropdownTarget";const kGe={},MQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxEmpty",kGe,e),u=_h();return S.jsx(je,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});MQ.classes=Jc;MQ.displayName="@mantine/core/ComboboxEmpty";function LQ({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=_h(),[a,u]=P.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()),o.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.dropdownOpened?o.store.listId:void 0,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const RGe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Mwe=At((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Je("ComboboxEventsTarget",RGe,e);if(!ax(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=_h(),f=LQ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return P.cloneElement(n,{...f,...l,[r]:No(t,c.store.targetRef,K8(n))})});Mwe.displayName="@mantine/core/ComboboxEventsTarget";const DGe={},$Q=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxFooter",DGe,e),u=_h();return S.jsx(je,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});$Q.classes=Jc;$Q.displayName="@mantine/core/ComboboxFooter";const NGe={},FQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Je("ComboboxGroup",NGe,e),c=_h();return S.jsxs(je,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&S.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});FQ.classes=Jc;FQ.displayName="@mantine/core/ComboboxGroup";const PGe={},BQ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ComboboxHeader",PGe,e),u=_h();return S.jsx(je,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});BQ.classes=Jc;BQ.displayName="@mantine/core/ComboboxHeader";function Lwe({value:e,valuesDivider:t=",",...n}){return S.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Lwe.displayName="@mantine/core/ComboboxHiddenInput";const OGe={},jQ=At((e,t)=>{const n=Je("ComboboxOption",OGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,v=_h(),b=P.useId(),w=l||b;return S.jsx(je,{...v.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:w,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:E=>{var T;h?E.preventDefault():((T=v.onOptionSubmit)==null||T.call(v,n.value,n),u==null||u(E))},onMouseDown:E=>{E.preventDefault(),f==null||f(E)},onMouseOver:E=>{v.resetSelectionOnOptionHover&&v.store.resetSelectedOption(),d==null||d(E)}})});jQ.classes=Jc;jQ.displayName="@mantine/core/ComboboxOption";const MGe={},UQ=At((e,t)=>{const n=Je("ComboboxOptions",MGe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=_h(),d=yl(a);return P.useEffect(()=>{f.store.setListId(d)},[d]),S.jsx(je,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});UQ.classes=Jc;UQ.displayName="@mantine/core/ComboboxOptions";const LGe={withAriaAttributes:!0,withKeyboardNavigation:!0},zQ=At((e,t)=>{const n=Je("ComboboxSearch",LGe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=_h(),h=d.getStyles("search"),p=LQ({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return S.jsx(Ki,{ref:No(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});zQ.classes=Jc;zQ.displayName="@mantine/core/ComboboxSearch";const $Ge={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},$we=At((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Je("ComboboxTarget",$Ge,e);if(!ax(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=_h(),f=LQ({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=P.cloneElement(n,{...f,...l});return S.jsx(_u.Target,{ref:No(t,c.store.targetRef),children:d})});$we.displayName="@mantine/core/ComboboxTarget";function FGe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function BGe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function jGe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function VQ({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=Yo({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=P.useRef(null),c=P.useRef(-1),f=P.useRef(null),d=P.useRef(null),h=P.useRef(-1),p=P.useRef(-1),m=P.useRef(-1),g=P.useCallback((J="unknown")=>{a||(u(!0),i==null||i(J))},[u,i,a]),v=P.useCallback((J="unknown")=>{a&&(u(!1),r==null||r(J))},[u,r,a]),b=P.useCallback((J="unknown")=>{a?v(J):g(J)},[v,g,a]),w=P.useCallback(()=>{const J=document.querySelector(`#${l.current} [data-combobox-selected]`);J==null||J.removeAttribute("data-combobox-selected"),J==null||J.removeAttribute("aria-selected")},[]),E=P.useCallback(J=>{const ne=document.getElementById(l.current),Z=ne==null?void 0:ne.querySelectorAll("[data-combobox-option]");if(!Z)return null;const ie=J>=Z.length?0:J<0?Z.length-1:J;return c.current=ie,Z!=null&&Z[ie]&&!Z[ie].hasAttribute("data-combobox-disabled")?(w(),Z[ie].setAttribute("data-combobox-selected","true"),Z[ie].setAttribute("aria-selected","true"),Z[ie].scrollIntoView({block:"nearest",behavior:o}),Z[ie].id):null},[o,w]),T=P.useCallback(()=>{const J=document.querySelector(`#${l.current} [data-combobox-active]`);if(J){const ne=document.querySelectorAll(`#${l.current} [data-combobox-option]`),Z=Array.from(ne).findIndex(ie=>ie===J);return E(Z)}return E(0)},[E]),C=P.useCallback(()=>E(BGe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),I=P.useCallback(()=>E(FGe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[E,s]),R=P.useCallback(()=>E(jGe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[E]),N=P.useCallback((J="selected",ne)=>{m.current=window.setTimeout(()=>{var q;const Z=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ie=Array.from(Z).findIndex(U=>U.hasAttribute(`data-combobox-${J}`));c.current=ie,ne!=null&&ne.scrollIntoView&&((q=Z[ie])==null||q.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),O=P.useCallback(()=>{c.current=-1,w()},[w]),L=P.useCallback(()=>{const J=document.querySelectorAll(`#${l.current} [data-combobox-option]`),ne=J==null?void 0:J[c.current];ne==null||ne.click()},[]),B=P.useCallback(J=>{l.current=J},[]),F=P.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),H=P.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),Q=P.useCallback(()=>c.current,[]);return P.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:v,toggleDropdown:b,selectedOptionIndex:c.current,getSelectedOptionIndex:Q,selectOption:E,selectFirstOption:R,selectActiveOption:T,selectNextOption:C,selectPreviousOption:I,resetSelectedOption:O,updateSelectedOptionIndex:N,listId:l.current,setListId:B,clickSelectedOption:L,searchRef:f,focusSearchInput:F,targetRef:d,focusTarget:H}}const UGe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},zGe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Va(t),"--combobox-option-padding":Kn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Ke(n),"--combobox-option-fz":Va(t),"--combobox-option-padding":Kn(t,"combobox-option-padding")}});function Wr(e){const t=Je("Combobox",UGe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=VQ(),v=o||g,b=Zt({name:h||"Combobox",classes:Jc,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:zGe}),w=()=>{l==null||l(),v.closeDropdown()};return S.jsx(CGe,{value:{getStyles:b,store:v,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:S.jsx(_u,{opened:v.dropdownOpened,...m,onChange:E=>!E&&w(),withRoles:!1,unstyled:i,children:s})})}const VGe=e=>e;Wr.extend=VGe;Wr.classes=Jc;Wr.displayName="@mantine/core/Combobox";Wr.Target=$we;Wr.Dropdown=OQ;Wr.Options=UQ;Wr.Option=jQ;Wr.Search=zQ;Wr.Empty=MQ;Wr.Chevron=PQ;Wr.Footer=$Q;Wr.Header=BQ;Wr.EventsTarget=Mwe;Wr.DropdownTarget=Owe;Wr.Group=FQ;Wr.ClearButton=Pwe;Wr.HiddenInput=Lwe;var Fwe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Bwe=Fwe,uB=P.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:v,vars:b,mod:w,...E},T)=>{const C=Zt({name:e,props:t,className:n,style:v,classes:Fwe,classNames:r,styles:i,unstyled:s});return S.jsx(je,{...C("root"),ref:T,__vars:{"--label-fz":Va(d),"--label-lh":Kn(d,"label-lh")},mod:[{"label-position":h},w],variant:g,size:d,...E,children:S.jsxs(je,{component:p,htmlFor:p==="label"?l:void 0,...C("body"),children:[o,S.jsxs("div",{...C("labelWrapper"),"data-disabled":c||void 0,children:[a&&S.jsx(je,{component:m,htmlFor:m==="label"?l:void 0,...C("label"),"data-disabled":c||void 0,children:a}),u&&S.jsx(Ki.Description,{size:d,__inheritStyles:!1,...C("description"),children:u}),f&&typeof f!="boolean"&&S.jsx(Ki.Error,{size:d,__inheritStyles:!1,...C("error"),children:f})]})]})})});uB.displayName="@mantine/core/InlineInput";const jwe=P.createContext(null),HGe=jwe.Provider,Uwe=()=>P.useContext(jwe),[qGe,WGe]=ux();var zwe={card:"m_26775b0a"};const GGe={withBorder:!0},YGe=(e,{radius:t})=>({card:{"--card-radius":Ci(t)}}),HQ=At((e,t)=>{const n=Je("CheckboxCard",GGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,defaultChecked:p,onChange:m,...g}=n,v=Zt({name:"CheckboxCard",classes:zwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YGe,rootSelector:"card"}),b=Uwe(),w=typeof l=="boolean"?l:b?b.value.includes(d||""):void 0,[E,T]=Yo({value:w,defaultValue:p,finalValue:!1,onChange:m});return S.jsx(qGe,{value:{checked:E},children:S.jsx(ud,{ref:t,mod:[{"with-border":f,checked:E},c],...v("card"),...g,role:"checkbox","aria-checked":E,onClick:C=>{h==null||h(C),b==null||b.onChange(d||""),T(!E)}})})});HQ.displayName="@mantine/core/CheckboxCard";HQ.classes=zwe;function qQ({children:e,role:t}){const n=AA();return n?S.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):S.jsx(S.Fragment,{children:e})}const KGe={},WQ=At((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Je("CheckboxGroup",KGe,e),[c,f]=Yo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return S.jsx(HGe,{value:{value:c,onChange:d,size:s},children:S.jsx(Ki.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:S.jsx(qQ,{role:"group",children:a})})})});WQ.classes=Ki.Wrapper.classes;WQ.displayName="@mantine/core/CheckboxGroup";function Vwe({size:e,style:t,...n}){const r=e!==void 0?{width:Ke(e),height:Ke(e),...t}:t;return S.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:S.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Hwe({indeterminate:e,...t}){return e?S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:S.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):S.jsx(Vwe,{...t})}var qwe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const XGe={icon:Hwe},QGe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ng({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Kn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ci(t),"--checkbox-color":s==="outline"?u:qi(n,e),"--checkbox-icon-color":i?qi(i,e):_A(o,e)?cx({color:n,theme:e,autoContrast:o}):void 0}}},GQ=At((e,t)=>{const n=Je("CheckboxIndicator",XGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:v,disabled:b,...w}=n,E=l,T=Zt({name:"CheckboxIndicator",classes:qwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QGe,rootSelector:"indicator"}),C=WGe(),I=typeof m=="boolean"||typeof c=="boolean"?m||c:(C==null?void 0:C.checked)||!1;return S.jsx(je,{ref:t,...T("indicator",{variant:v}),variant:v,mod:[{checked:I,disabled:b},g],...w,children:S.jsx(E,{indeterminate:c,...T("icon")})})});GQ.displayName="@mantine/core/CheckboxIndicator";GQ.classes=qwe;var Wwe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const JGe={labelPosition:"right",icon:Hwe},ZGe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ng({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Kn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ci(t),"--checkbox-color":s==="outline"?u:qi(n,e),"--checkbox-icon-color":i?qi(i,e):_A(o,e)?cx({color:n,theme:e,autoContrast:o}):void 0}}},sl=At((e,t)=>{const n=Je("Checkbox",JGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,checked:m,labelPosition:g,description:v,error:b,disabled:w,variant:E,indeterminate:T,icon:C,rootRef:I,iconColor:R,onChange:N,autoContrast:O,mod:L,...B}=n,F=Uwe(),H=d||(F==null?void 0:F.size),Q=C,J=Zt({name:"Checkbox",props:n,classes:Wwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZGe}),{styleProps:ne,rest:Z}=kE(B),ie=yl(f),q=F?{checked:F.value.includes(Z.value),onChange:U=>{F.onChange(U),N==null||N(U)}}:{};return S.jsx(uB,{...J("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:ie,size:H,labelPosition:g,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":q.checked||m||void 0,variant:E,ref:I,mod:L,...ne,...p,children:S.jsxs(je,{...J("inner"),mod:{"data-label-position":g},children:[S.jsx(je,{component:"input",id:ie,ref:t,checked:m,disabled:w,mod:{error:!!b,indeterminate:T},...J("input",{focusable:!0,variant:E}),onChange:N,...Z,...q,type:"checkbox"}),S.jsx(Q,{indeterminate:T,...J("icon")})]})})});sl.classes={...Wwe,...Bwe};sl.displayName="@mantine/core/Checkbox";sl.Group=WQ;sl.Indicator=GQ;sl.Card=HQ;function pC(e){return"group"in e}function Gwe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;pC(o)&&i.push({group:o.group,items:Gwe({options:o.items,search:t,limit:n-i.length})}),pC(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function eYe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Ywe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(pC(n))Ywe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function tYe(e,t){return Array.isArray(e)?e.includes(t):e===t}function Kwe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!pC(e)){const a=tYe(n,e.value),u=t&&a&&S.jsx(Vwe,{className:Jc.optionsDropdownCheckIcon}),l=S.jsxs(S.Fragment,{children:[r==="left"&&u,S.jsx("span",{children:e.label}),r==="right"&&u]});return S.jsx(Wr.Option,{value:e.value,disabled:e.disabled,className:Io({[Jc.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>S.jsx(Kwe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return S.jsx(Wr.Group,{label:e.group,children:o})}function Xwe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":v}){Ywe(e);const w=typeof i=="string"?(r||Gwe)({options:e,search:u?i:"",limit:s??1/0}):e,E=eYe(w),T=w.map(C=>S.jsx(Kwe,{data:C,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},pC(C)?C.group:C.value));return S.jsx(Wr.Dropdown,{hidden:t||n&&E,children:S.jsxs(Wr.Options,{labelledBy:p,"aria-label":v,children:[a?S.jsx(Yy.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:T}):T,E&&d&&S.jsx(Wr.Empty,{children:d})]})})}var Qwe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const nYe={},rYe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Kn(s,"badge-height"),"--badge-padding-x":Kn(s,"badge-padding-x"),"--badge-fz":Kn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Ci(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?qi(n,e):void 0}}},Rp=Xo((e,t)=>{const n=Je("Badge",nYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:v,circle:b,mod:w,...E}=n,T=Zt({name:"Badge",props:n,classes:Qwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rYe});return S.jsxs(je,{variant:m,mod:[{block:g,circle:b,"with-right-section":!!h,"with-left-section":!!d},w],...T("root",{variant:m}),ref:t,...E,children:[d&&S.jsx("span",{...T("section"),"data-position":"left",children:d}),S.jsx("span",{...T("label"),children:p}),h&&S.jsx("span",{...T("section"),"data-position":"right",children:h})]})});Rp.classes=Qwe;Rp.displayName="@mantine/core/Badge";var kA={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const gle={orientation:"horizontal"},iYe=(e,{borderWidth:t})=>({group:{"--button-border-width":Ke(t)}}),YQ=At((e,t)=>{const n=Je("ButtonGroup",gle,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Je("ButtonGroup",gle,e),p=Zt({name:"ButtonGroup",props:n,classes:kA,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:iYe,rootSelector:"group"});return S.jsx(je,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});YQ.classes=kA;YQ.displayName="@mantine/core/ButtonGroup";const yle={},sYe=(e,{radius:t,color:n,gradient:r,variant:i,autoContrast:s,size:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:s});return{groupSection:{"--section-height":Kn(o,"section-height"),"--section-padding-x":Kn(o,"section-padding-x"),"--section-fz":o!=null&&o.includes("compact")?Va(o.replace("compact-","")):Va(o),"--section-radius":t===void 0?void 0:Ci(t),"--section-bg":n||i?a.background:void 0,"--section-color":a.color,"--section-bd":n||i?a.border:void 0}}},KQ=At((e,t)=>{const n=Je("ButtonGroupSection",yle,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,variant:l,gradient:c,radius:f,autoContrast:d,...h}=Je("ButtonGroupSection",yle,e),p=Zt({name:"ButtonGroupSection",props:n,classes:kA,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:sYe,rootSelector:"groupSection"});return S.jsx(je,{...p("groupSection"),ref:t,variant:l,...h})});KQ.classes=kA;KQ.displayName="@mantine/core/ButtonGroupSection";const oYe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Ke(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},aYe={},uYe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Kn(s,"button-height"),"--button-padding-x":Kn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Va(s.replace("compact-","")):Va(s),"--button-radius":t===void 0?void 0:Ci(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},yn=Xo((e,t)=>{const n=Je("Button",aYe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:v,styles:b,unstyled:w,"data-disabled":E,autoContrast:T,mod:C,...I}=n,R=Zt({name:"Button",props:n,classes:kA,className:s,style:r,classNames:v,styles:b,unstyled:w,vars:i,varsResolver:uYe}),N=!!l,O=!!c;return S.jsxs(ud,{ref:t,...R("root",{active:!a&&!p&&!E}),unstyled:w,variant:d,disabled:a||p,mod:[{disabled:a||E,loading:p,block:f,"with-left-section":N,"with-right-section":O},C],...I,children:[S.jsx(rg,{mounted:!!p,transition:oYe,duration:150,children:L=>S.jsx(je,{component:"span",...R("loader",{style:L}),"aria-hidden":!0,children:S.jsx(df,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),S.jsxs("span",{...R("inner"),children:[l&&S.jsx(je,{component:"span",...R("section"),mod:{position:"left"},children:l}),S.jsx(je,{component:"span",mod:{loading:p},...R("label"),children:u}),c&&S.jsx(je,{component:"span",...R("section"),mod:{position:"right"},children:c})]})]})});yn.classes=kA;yn.displayName="@mantine/core/Button";yn.Group=YQ;yn.GroupSection=KQ;const[lYe,cYe]=Iu("Card component was not found in tree");var XQ={root:"m_e615b15f",section:"m_599a2148"};const fYe={},lB=Xo((e,t)=>{const n=Je("CardSection",fYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=cYe();return S.jsx(je,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});lB.classes=XQ;lB.displayName="@mantine/core/CardSection";const dYe={},hYe=(e,{padding:t})=>({root:{"--card-padding":Go(t)}}),RA=Xo((e,t)=>{const n=Je("Card",dYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=Zt({name:"Card",props:n,classes:XQ,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hYe}),h=P.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===lB?P.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return S.jsx(lYe,{value:{getStyles:d},children:S.jsx(wA,{ref:t,unstyled:a,...d("root"),...f,children:p})})});RA.classes=XQ;RA.displayName="@mantine/core/Card";RA.Section=lB;var Jwe={root:"m_4451eb3a"};const pYe={},ga=Xo((e,t)=>{const n=Je("Center",pYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=Zt({name:"Center",props:n,classes:Jwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return S.jsx(je,{ref:t,mod:[{inline:l},c],...d("root"),...f})});ga.classes=Jwe;ga.displayName="@mantine/core/Center";var Zwe={root:"m_b183c0a2"};const mYe={},gYe=(e,{color:t})=>({root:{"--code-bg":t?qi(t,e):void 0}}),DD=At((e,t)=>{const n=Je("Code",mYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=Zt({name:"Code",props:n,classes:Zwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gYe});return S.jsx(je,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});DD.classes=Zwe;DD.displayName="@mantine/core/Code";var eEe={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const vle={withShadow:!0},yYe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:Ci(t),"--cs-size":Ke(n)}}),QQ=Xo((e,t)=>{const n=Je("ColorSwatch",vle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...m}=Je("ColorSwatch",vle,n),g=Zt({name:"ColorSwatch",props:n,classes:eEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yYe});return S.jsxs(je,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[S.jsx("span",{...g("alphaOverlay")}),d&&S.jsx("span",{...g("shadowOverlay")}),S.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),S.jsx("span",{...g("childrenOverlay"),children:h})]})});QQ.classes=eEe;QQ.displayName="@mantine/core/ColorSwatch";var tEe={root:"m_7485cace"};const vYe={},bYe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Kn(t,"container-size")}}),Xy=At((e,t)=>{const n=Je("Container",vYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=Zt({name:"Container",classes:tEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bYe});return S.jsx(je,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Xy.classes=tEe;Xy.displayName="@mantine/core/Container";var nEe={root:"m_3eebeb36",label:"m_9e365f20"};const xYe={orientation:"horizontal"},_Ye=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?qi(t,e):void 0,"--divider-border-style":n,"--divider-size":Kn(r,"divider-size")}}),NE=At((e,t)=>{const n=Je("Divider",xYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=Zt({name:"Divider",classes:nEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Ye});return S.jsx(je,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&S.jsx(je,{component:"span",mod:{position:d},...m("label"),children:f})})});NE.classes=nEe;NE.displayName="@mantine/core/Divider";function wYe({open:e,close:t,openDelay:n,closeDelay:r}){const i=P.useRef(-1),s=P.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return P.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[ble,rEe]=Iu("Grid component was not found in tree"),sW=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,xle=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":sW(e,t),_le=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},wle=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function EYe({span:e,order:t,offset:n,selector:r}){var h;const i=Po(),s=rEe(),o=s.breakpoints||i.breakpoints,u=Ep(e)===void 0?12:Ep(e),l=ox({"--col-order":(h=Ep(t))==null?void 0:h.toString(),"--col-flex-grow":_le(u,s.grow),"--col-flex-basis":sW(u,s.columns),"--col-width":u==="content"?"auto":void 0,"--col-max-width":xle(u,s.columns,s.grow),"--col-offset":wle(Ep(n),s.columns)}),c=as(o).reduce((p,m)=>{var g;return p[m]||(p[m]={}),typeof t=="object"&&t[m]!==void 0&&(p[m]["--col-order"]=(g=t[m])==null?void 0:g.toString()),typeof e=="object"&&e[m]!==void 0&&(p[m]["--col-flex-grow"]=_le(e[m],s.grow),p[m]["--col-flex-basis"]=sW(e[m],s.columns),p[m]["--col-width"]=e[m]==="content"?"auto":void 0,p[m]["--col-max-width"]=xle(e[m],s.columns,s.grow)),typeof n=="object"&&n[m]!==void 0&&(p[m]["--col-offset"]=wle(n[m],s.columns)),p},{}),d=pN(as(c),o).filter(p=>as(c[p.value]).length>0).map(p=>({query:s.type==="container"?`mantine-grid (min-width: ${o[p.value]})`:`(min-width: ${o[p.value]})`,styles:c[p.value]}));return S.jsx(IE,{styles:l,media:s.type==="container"?void 0:d,container:s.type==="container"?d:void 0,selector:r})}var JQ={container:"m_8478a6da",root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const TYe={span:12},ZQ=At((e,t)=>{const n=Je("GridCol",TYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=rEe(),h=BP();return S.jsxs(S.Fragment,{children:[S.jsx(EYe,{selector:`.${h}`,span:u,order:l,offset:c}),S.jsx(je,{ref:t,...d.getStyles("col",{className:Io(i,h),style:s,classNames:r,styles:o}),...f})]})});ZQ.classes=JQ;ZQ.displayName="@mantine/core/GridCol";function Ele({gutter:e,selector:t,breakpoints:n,type:r}){const i=Po(),s=n||i.breakpoints,o=ox({"--grid-gutter":Go(Ep(e))}),a=as(s).reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--grid-gutter"]=Go(e[f])),c),{}),l=pN(as(a),s).filter(c=>as(a[c.value]).length>0).map(c=>({query:r==="container"?`mantine-grid (min-width: ${s[c.value]})`:`(min-width: ${s[c.value]})`,styles:a[c.value]}));return S.jsx(IE,{styles:o,media:r==="container"?void 0:l,container:r==="container"?l:void 0,selector:t})}const SYe={gutter:"md",grow:!1,columns:12},CYe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Xf=At((e,t)=>{const n=Je("Grid",SYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,breakpoints:m,type:g,...v}=n,b=Zt({name:"Grid",classes:JQ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CYe}),w=BP();return g==="container"&&m?S.jsxs(ble,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:m,type:g},children:[S.jsx(Ele,{selector:`.${w}`,...n}),S.jsx("div",{...b("container"),children:S.jsx(je,{ref:t,...b("root",{className:w}),...v,children:S.jsx("div",{...b("inner"),children:p})})})]}):S.jsxs(ble,{value:{getStyles:b,grow:l,columns:f||12,breakpoints:m,type:g},children:[S.jsx(Ele,{selector:`.${w}`,...n}),S.jsx(je,{ref:t,...b("root",{className:w}),...v,children:S.jsx("div",{...b("inner"),children:p})})]})});Xf.classes=JQ;Xf.displayName="@mantine/core/Grid";Xf.Col=ZQ;var iEe={root:"m_9e117634"};const AYe={},IYe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Ci(t),"--image-object-fit":n}}),mx=Xo((e,t)=>{const n=Je("Image",AYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,v]=P.useState(!c);P.useEffect(()=>v(!c),[c]);const b=Zt({name:"Image",classes:iEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IYe});return g&&h?S.jsx(je,{component:"img",ref:t,src:h,...b("root"),onError:l,mod:["fallback",p],...m}):S.jsx(je,{component:"img",ref:t,...b("root"),src:c,onError:w=>{l==null||l(w),v(!0)},mod:p,...m})});mx.classes=iEe;mx.displayName="@mantine/core/Image";function oW(){return oW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oW.apply(null,arguments)}function kYe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var RYe=P.useLayoutEffect,DYe=function(t){var n=P.useRef(t);return RYe(function(){n.current=t}),n},Tle=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},NYe=function(t,n){var r=P.useRef();return P.useCallback(function(i){t.current=i,r.current&&Tle(r.current,null),r.current=n,n&&Tle(n,i)},[n])},Sle={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},PYe=function(t){Object.keys(Sle).forEach(function(n){t.style.setProperty(n,Sle[n],"important")})},Cle=PYe,Dl=null,Ale=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function OYe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Dl||(Dl=document.createElement("textarea"),Dl.setAttribute("tabindex","-1"),Dl.setAttribute("aria-hidden","true"),Cle(Dl)),Dl.parentNode===null&&document.body.appendChild(Dl);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Dl.style[h]=o[h]}),Cle(Dl),Dl.value=t;var u=Ale(Dl,e);Dl.value=t,u=Ale(Dl,e),Dl.value="x";var l=Dl.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Ile=function(){},MYe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},LYe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],$Ye=!!document.documentElement.currentStyle,FYe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=MYe(LYe,n),i=r.boxSizing;if(i==="")return null;$Ye&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},BYe=FYe;function sEe(e,t,n){var r=DYe(n);P.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var jYe=function(t){sEe(window,"resize",t)},UYe=function(t){sEe(document.fonts,"loadingdone",t)},zYe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],VYe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Ile:o,u=t.onHeightChange,l=u===void 0?Ile:u,c=kYe(t,zYe),f=c.value!==void 0,d=P.useRef(null),h=NYe(d,n),p=P.useRef(0),m=P.useRef(),g=function(){var w=d.current,E=r&&m.current?m.current:BYe(w);if(E){m.current=E;var T=OYe(E,w.value||w.placeholder||"x",s,i),C=T[0],I=T[1];p.current!==C&&(p.current=C,w.style.setProperty("height",C+"px","important"),l(C,{rowHeight:I}))}},v=function(w){f||g(),a(w)};return P.useLayoutEffect(g),jYe(g),UYe(g),P.createElement("textarea",oW({},c,{onChange:v,ref:h}))},HYe=P.forwardRef(VYe);const qYe={},eJ=At((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Je("Textarea",qYe,e),u=n&&l_e()!=="test",l=u?{maxRows:r,minRows:i}:{};return S.jsx(xh,{component:u?HYe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});eJ.classes=xh.classes;eJ.displayName="@mantine/core/Textarea";const[WYe,GYe]=Iu("List component was not found in tree");var tJ={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const YYe={},nJ=At((e,t)=>{const n=Je("ListItem",YYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=GYe(),h=u||d.icon,p={classNames:r,styles:o};return S.jsx(je,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:S.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&S.jsx("span",{...d.getStyles("itemIcon",p),children:h}),S.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});nJ.classes=tJ;nJ.displayName="@mantine/core/ListItem";const KYe={type:"unordered"},XYe=(e,{size:t,spacing:n})=>({root:{"--list-fz":Va(t),"--list-lh":t_e(t),"--list-spacing":Go(n)}}),Dp=At((e,t)=>{const n=Je("List",KYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...v}=n,b=Zt({name:"List",classes:tJ,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XYe});return S.jsx(WYe,{value:{center:p,icon:d,getStyles:b},children:S.jsx(je,{...b("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...v,children:l})})});Dp.classes=tJ;Dp.displayName="@mantine/core/List";Dp.Item=nJ;var oEe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const kle={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:ff("overlay")},QYe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),ld=At((e,t)=>{const n=Je("LoadingOverlay",kle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Po(),g=Zt({name:"LoadingOverlay",classes:oEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QYe}),v={...kle.overlayProps,...f};return S.jsx(rg,{transition:"fade",...l,mounted:!!d,children:b=>S.jsxs(je,{...g("root",{style:b}),ref:t,...p,children:[S.jsx(df,{...g("loader"),unstyled:a,...c}),S.jsx(dC,{...v,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),S.jsx(dC,{...v,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});ld.classes=oEe;ld.displayName="@mantine/core/LoadingOverlay";const[JYe,qP]=Iu("Menu component was not found in the tree");var DA={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const ZYe={},rJ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("MenuDivider",ZYe,e),u=qP();return S.jsx(je,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});rJ.classes=DA;rJ.displayName="@mantine/core/MenuDivider";const eKe={},iJ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,onKeyDown:l,children:c,...f}=Je("MenuDropdown",eKe,e),d=P.useRef(null),h=qP(),p=f0(l,v=>{var b,w;(v.key==="ArrowUp"||v.key==="ArrowDown")&&(v.preventDefault(),(w=(b=d.current)==null?void 0:b.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||w.focus())}),m=f0(a,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.openDropdown()),g=f0(u,()=>(h.trigger==="hover"||h.trigger==="click-hover")&&h.closeDropdown());return S.jsxs(_u.Dropdown,{...f,onMouseEnter:m,onMouseLeave:g,role:"menu","aria-orientation":"vertical",ref:No(t,d),...h.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:p,children:[S.jsx("div",{tabIndex:-1,"data-autofocus":!0,"data-mantine-stop-propagation":!0,style:{outline:0}}),c]})});iJ.classes=DA;iJ.displayName="@mantine/core/MenuDropdown";const tKe={},sJ=Xo((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Je("MenuItem",tKe,e),p=qP(),m=Po(),{dir:g}=b1(),v=P.useRef(null),b=p.getItemIndex(v.current),w=h,E=f0(w.onMouseLeave,()=>p.setHovered(-1)),T=f0(w.onMouseEnter,()=>p.setHovered(p.getItemIndex(v.current))),C=f0(w.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),I=f0(w.onFocus,()=>p.setHovered(p.getItemIndex(v.current))),R=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,N=a?ng({color:a,theme:m}):null;return S.jsxs(ud,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:I,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:No(v,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===b?!0:void 0,"data-mantine-stop-propagation":!0,onMouseEnter:T,onMouseLeave:E,onClick:C,onKeyDown:BX({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:w.onKeyDown}),__vars:{"--menu-item-color":N!=null&&N.isThemeColor&&(N==null?void 0:N.shade)===void 0?`var(--mantine-color-${N.color}-6)`:R==null?void 0:R.color,"--menu-item-hover":R==null?void 0:R.hover},children:[l&&S.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&S.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&S.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});sJ.classes=DA;sJ.displayName="@mantine/core/MenuItem";const nKe={},oJ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("MenuLabel",nKe,e),u=qP();return S.jsx(je,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});oJ.classes=DA;oJ.displayName="@mantine/core/MenuLabel";const rKe={refProp:"ref"},aEe=P.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Je("MenuTarget",rKe,e);if(!ax(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=qP(),o=n.props,a=f0(o.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),u=f0(o.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=f0(o.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return S.jsx(_u.Target,{refProp:r,popupType:"menu",ref:t,...i,children:P.cloneElement(n,{onClick:a,onMouseEnter:u,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});aEe.displayName="@mantine/core/MenuTarget";const iKe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function $l(e){const t=Je("Menu",iKe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:v,variant:b,vars:w,menuItemTabIndex:E,keepMounted:T,...C}=t,I=Zt({name:"Menu",classes:DA,props:t,classNames:m,styles:g,unstyled:v}),[R,{setHovered:N,resetHovered:O}]=mze(),[L,B]=Yo({value:s,defaultValue:o,finalValue:!1,onChange:u}),[F,H]=P.useState(!1),Q=()=>{B(!1),H(!1),L&&(i==null||i())},J=()=>{B(!0),!L&&(r==null||r())},ne=()=>{L?Q():J()},{openDropdown:Z,closeDropdown:ie}=wYe({open:J,close:Q,closeDelay:p,openDelay:h}),q=V=>pze("[data-menu-item]","[data-menu-dropdown]",V),{resolvedClassNames:U,resolvedStyles:G}=AE({classNames:m,styles:g,props:t});return P0(()=>{O()},[L]),S.jsx(JYe,{value:{getStyles:I,opened:L,toggleDropdown:ne,getItemIndex:q,hovered:R,setHovered:N,openedViaClick:F,setOpenedViaClick:H,closeOnItemClick:l,closeDropdown:d==="click"?Q:ie,openDropdown:d==="click"?J:Z,closeDropdownImmediately:Q,loop:c,trigger:d,unstyled:v,menuItemTabIndex:E},children:S.jsx(_u,{...C,opened:L,onChange:ne,defaultOpened:o,trapFocus:T?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:U,styles:G,unstyled:v,variant:b,keepMounted:T,children:n})})}$l.extend=e=>e;$l.classes=DA;$l.displayName="@mantine/core/Menu";$l.Item=sJ;$l.Label=oJ;$l.Dropdown=iJ;$l.Target=aEe;$l.Divider=rJ;const[sKe,NA]=Iu("Modal component was not found in tree");var w1={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const oKe={},cB=At((e,t)=>{const n=Je("ModalBody",oKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=NA();return S.jsx(ywe,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});cB.classes=w1;cB.displayName="@mantine/core/ModalBody";const aKe={},fB=At((e,t)=>{const n=Je("ModalCloseButton",aKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=NA();return S.jsx(vwe,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});fB.classes=w1;fB.displayName="@mantine/core/ModalCloseButton";const uKe={},dB=At((e,t)=>{const n=Je("ModalContent",uKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,__hidden:l,...c}=n,f=NA(),d=f.scrollAreaComponent||EWe;return S.jsx(bwe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":f.fullScreen||void 0,"data-modal-content":!0,"data-hidden":l||void 0,ref:t,...c,children:S.jsx(d,{style:{maxHeight:f.fullScreen?"100dvh":`calc(100dvh - (${Ke(f.yOffset)} * 2))`},children:u})})});dB.classes=w1;dB.displayName="@mantine/core/ModalContent";const lKe={},hB=At((e,t)=>{const n=Je("ModalHeader",lKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=NA();return S.jsx(xwe,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});hB.classes=w1;hB.displayName="@mantine/core/ModalHeader";const cKe={},pB=At((e,t)=>{const n=Je("ModalOverlay",cKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=NA();return S.jsx(_we,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});pB.classes=w1;pB.displayName="@mantine/core/ModalOverlay";const fKe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ff("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},dKe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Ci(t),"--modal-size":Kn(n,"modal-size"),"--modal-y-offset":Ke(r),"--modal-x-offset":Ke(i)}}),mB=At((e,t)=>{const n=Je("ModalRoot",fKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,v=Zt({name:m,classes:w1,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dKe});return S.jsx(sKe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:v,fullScreen:d},children:S.jsx(gwe,{ref:t,...v("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});mB.classes=w1;mB.displayName="@mantine/core/ModalRoot";const[hKe,pKe]=ux();function uEe({children:e}){const[t,n]=P.useState([]),[r,i]=P.useState(ff("modal"));return S.jsx(hKe,{value:{stack:t,addModal:(s,o)=>{n(a=>[...new Set([...a,s])]),i(a=>typeof o=="number"&&typeof a=="number"?Math.max(a,o):a)},removeModal:s=>n(o=>o.filter(a=>a!==s)),getZIndex:s=>`calc(${r} + ${t.indexOf(s)} + 1)`,currentId:t[t.length-1],maxZIndex:r},children:e})}uEe.displayName="@mantine/core/ModalStack";const mKe={},gB=At((e,t)=>{const n=Je("ModalTitle",mKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=NA();return S.jsx(wwe,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});gB.classes=w1;gB.displayName="@mantine/core/ModalTitle";const gKe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ff("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Vs=At((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,opened:l,stackId:c,zIndex:f,...d}=Je("Modal",gKe,e),h=pKe(),p=!!n||s,m=h&&c?{closeOnEscape:h.currentId===c,trapFocus:h.currentId===c,zIndex:h.getZIndex(c)}:{},g=r===!1?!1:c&&h?h.currentId===c:l;return P.useEffect(()=>{h&&c&&(l?h.addModal(c,f||ff("modal")):h.removeModal(c))},[l,c,f]),S.jsxs(mB,{ref:t,radius:u,opened:l,zIndex:h&&c?h.getZIndex(c):f,...d,...m,children:[r&&S.jsx(pB,{visible:g,transitionProps:h&&c?{duration:0}:void 0,...i}),S.jsxs(dB,{radius:u,__hidden:h&&c&&l?c!==h.currentId:!1,children:[p&&S.jsxs(hB,{children:[n&&S.jsx(gB,{children:n}),s&&S.jsx(fB,{...o})]}),S.jsx(cB,{children:a})]})]})});Vs.classes=w1;Vs.displayName="@mantine/core/Modal";Vs.Root=mB;Vs.Overlay=pB;Vs.Content=dB;Vs.Body=cB;Vs.Header=hB;Vs.Title=gB;Vs.CloseButton=fB;Vs.Stack=uEe;const[yKe,aJ]=ux(),[vKe,bKe]=ux();var yB={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const xKe={},_Ke=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Kn(t):Kn(n,"pg-gap")}}),uJ=At((e,t)=>{const n=Je("PillGroup",xKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=aJ(),h=(d==null?void 0:d.size)||l||void 0,p=Zt({name:"PillGroup",classes:yB,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Ke,stylesCtx:{size:h},rootSelector:"group"});return S.jsx(vKe,{value:{size:h,disabled:c},children:S.jsx(je,{ref:t,size:h,...p("group"),...f})})});uJ.classes=yB;uJ.displayName="@mantine/core/PillGroup";const wKe={variant:"default"},EKe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Kn(n,"pill-fz"),"--pill-height":Kn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Ci(t)}}),yN=At((e,t)=>{const n=Je("Pill",wKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:v,...b}=n,w=bKe(),E=aJ(),T=m||(w==null?void 0:w.size)||void 0,C=(E==null?void 0:E.variant)==="filled"?"contrast":l||"default",I=Zt({name:"Pill",classes:yB,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EKe,stylesCtx:{size:T}});return S.jsxs(je,{component:"span",ref:t,variant:C,size:T,...I("root",{variant:C}),mod:[{"with-remove":f&&!g,disabled:g||(w==null?void 0:w.disabled)},v],...b,children:[S.jsx("span",{...I("label"),children:c}),f&&S.jsx(hx,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...I("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:R=>{var N;R.preventDefault(),R.stopPropagation(),(N=h==null?void 0:h.onMouseDown)==null||N.call(h,R)},onClick:R=>{var N;R.stopPropagation(),d==null||d(),(N=h==null?void 0:h.onClick)==null||N.call(h,R)}})]})});yN.classes=yB;yN.displayName="@mantine/core/Pill";yN.Group=uJ;var lEe={field:"m_45c4369d"};const TKe={type:"visible"},lJ=At((e,t)=>{const n=Je("PillsInputField",TKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=aJ(),g=AA(),v=Zt({name:"PillsInputField",classes:lEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),b=c||(m==null?void 0:m.disabled);return S.jsx(je,{component:"input",ref:No(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:b,mod:[{disabled:b,pointer:d},h],...v("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:w=>!d&&w.stopPropagation()})});lJ.classes=lEe;lJ.displayName="@mantine/core/PillsInputField";const SKe={},H$=At((e,t)=>{const n=Je("PillsInput",SKe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=P.useRef(null);return S.jsx(yKe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:S.jsx(xh,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});H$.displayName="@mantine/core/PillsInput";H$.Field=lJ;function CKe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(pC(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const AKe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},cJ=At((e,t)=>{const n=Je("MultiSelect",AKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:v,onDropdownOpen:b,onDropdownClose:w,selectFirstOptionOnChange:E,onOptionSubmit:T,comboboxProps:C,filter:I,limit:R,withScrollArea:N,maxDropdownHeight:O,searchValue:L,defaultSearchValue:B,onSearchChange:F,readOnly:H,disabled:Q,onFocus:J,onBlur:ne,onPaste:Z,radius:ie,rightSection:q,rightSectionWidth:U,rightSectionPointerEvents:G,rightSectionProps:V,leftSection:Y,leftSectionWidth:ee,leftSectionPointerEvents:ae,leftSectionProps:_e,inputContainer:pe,inputWrapperOrder:Te,withAsterisk:Le,labelProps:ye,descriptionProps:he,errorProps:$e,wrapperProps:De,description:tt,label:it,error:Me,maxValues:Ge,searchable:at,nothingFoundMessage:yt,withCheckIcon:Tt,checkIconPosition:Ot,hidePickedOptions:qe,withErrorStyles:dt,name:wt,form:ke,id:Oe,clearable:ht,clearButtonProps:Lt,hiddenInputProps:Ft,placeholder:dn,hiddenInputValuesDivider:Nn,required:Tr,mod:Ni,renderOption:Un,onRemove:tr,onClear:Ai,scrollAreaProps:Sr,...Lo}=n,Ji=yl(Oe),Pi=Nwe(m),Zi=NQ(Pi),Qr=VQ({opened:g,defaultOpened:v,onDropdownOpen:b,onDropdownClose:()=>{w==null||w(),Qr.resetSelectedOption()}}),{styleProps:$o,rest:{type:oc,autoComplete:xa,...Du}}=kE(Lo),[Jr,ji]=Yo({value:c,defaultValue:f,finalValue:[],onChange:d}),[oi,Ws]=Yo({value:L,defaultValue:B,finalValue:"",onChange:F}),Fr=Zt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:es,resolvedStyles:Fo}=AE({props:n,styles:o,classNames:r}),ho=Pr=>{h==null||h(Pr),Pr.key===" "&&!at&&(Pr.preventDefault(),Qr.toggleDropdown()),Pr.key==="Backspace"&&oi.length===0&&Jr.length>0&&(tr==null||tr(Jr[Jr.length-1]),ji(Jr.slice(0,Jr.length-1)))},Qo=Jr.map((Pr,ac)=>{var ms,Xa;return S.jsx(yN,{withRemoveButton:!H&&!((ms=Zi[Pr])!=null&&ms.disabled),onRemove:()=>{ji(Jr.filter(Jo=>Pr!==Jo)),tr==null||tr(Pr)},unstyled:a,disabled:Q,...Fr("pill"),children:((Xa=Zi[Pr])==null?void 0:Xa.label)||Pr},`${Pr}-${ac}`)});P.useEffect(()=>{E&&Qr.selectFirstOption()},[E,Jr]);const _l=S.jsx(Wr.ClearButton,{...Lt,onClear:()=>{Ai==null||Ai(),ji([]),Ws("")}}),Nh=CKe({data:Pi,value:Jr});return S.jsxs(S.Fragment,{children:[S.jsxs(Wr,{store:Qr,classNames:es,styles:Fo,unstyled:a,size:l,readOnly:H,__staticSelector:"MultiSelect",onOptionSubmit:Pr=>{T==null||T(Pr),Ws(""),Qr.updateSelectedOptionIndex("selected"),Jr.includes(Zi[Pr].value)?(ji(Jr.filter(ac=>ac!==Zi[Pr].value)),tr==null||tr(Zi[Pr].value)):Jr.length<Ge&&ji([...Jr,Zi[Pr].value])},...C,children:[S.jsx(Wr.DropdownTarget,{children:S.jsx(H$,{...$o,__staticSelector:"MultiSelect",classNames:es,styles:Fo,unstyled:a,size:l,className:i,style:s,variant:p,disabled:Q,radius:ie,__defaultRightSection:S.jsx(Wr.Chevron,{size:l,error:Me,unstyled:a}),__clearSection:_l,__clearable:ht&&Jr.length>0&&!Q&&!H,rightSection:q,rightSectionPointerEvents:G||(_l?"all":"none"),rightSectionWidth:U,rightSectionProps:V,leftSection:Y,leftSectionWidth:ee,leftSectionPointerEvents:ae,leftSectionProps:_e,inputContainer:pe,inputWrapperOrder:Te,withAsterisk:Le,labelProps:ye,descriptionProps:he,errorProps:$e,wrapperProps:De,description:tt,label:it,error:Me,multiline:!0,withErrorStyles:dt,__stylesApiProps:{...n,rightSectionPointerEvents:G||(_l?"all":"none"),multiline:!0},pointer:!at,onClick:()=>at?Qr.openDropdown():Qr.toggleDropdown(),"data-expanded":Qr.dropdownOpened||void 0,id:Ji,required:Tr,mod:Ni,children:S.jsxs(yN.Group,{disabled:Q,unstyled:a,...Fr("pillsList"),children:[Qo,S.jsx(Wr.EventsTarget,{autoComplete:xa,children:S.jsx(H$.Field,{...Du,ref:t,id:Ji,placeholder:dn,type:!at&&!dn?"hidden":"visible",...Fr("inputField"),unstyled:a,onFocus:Pr=>{J==null||J(Pr),at&&Qr.openDropdown()},onBlur:Pr=>{ne==null||ne(Pr),Qr.closeDropdown(),Ws("")},onKeyDown:ho,value:oi,onChange:Pr=>{Ws(Pr.currentTarget.value),at&&Qr.openDropdown(),E&&Qr.selectFirstOption()},disabled:Q,readOnly:H||!at,pointer:!at})})]})})}),S.jsx(Xwe,{data:qe?Nh:Pi,hidden:H||Q,filter:I,search:oi,limit:R,hiddenWhenEmpty:!yt,withScrollArea:N,maxDropdownHeight:O,filterOptions:at,value:Jr,checkIconPosition:Ot,withCheckIcon:Tt,nothingFoundMessage:yt,unstyled:a,labelId:it?`${Ji}-label`:void 0,"aria-label":it?void 0:Lo["aria-label"],renderOption:Un,scrollAreaProps:Sr})]}),S.jsx(Wr.HiddenInput,{name:wt,valuesDivider:Nn,value:Jr,form:ke,disabled:Q,...Ft})]})});cJ.classes={...xh.classes,...Wr.classes};cJ.displayName="@mantine/core/MultiSelect";var cEe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const IKe={},kKe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Go(r)}}},vB=Xo((e,t)=>{const n=Je("NavLink",IKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:v,label:b,description:w,disableRightSectionRotation:E,noWrap:T,childrenOffset:C,onKeyDown:I,autoContrast:R,mod:N,...O}=n,L=Zt({name:"NavLink",props:n,classes:cEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kKe}),[B,F]=Yo({value:l,defaultValue:c,finalValue:!1,onChange:f}),H=!!d,Q=J=>{h==null||h(J),H&&(J.preventDefault(),F(!B))};return S.jsxs(S.Fragment,{children:[S.jsxs(ud,{...L("root"),component:"a",ref:t,onClick:Q,onKeyDown:J=>{I==null||I(J),J.nativeEvent.code==="Space"&&H&&(J.preventDefault(),F(!B))},unstyled:a,mod:[{disabled:m,active:p,expanded:B},N],...O,children:[g&&S.jsx(je,{component:"span",...L("section"),mod:{position:"left"},children:g}),S.jsxs(je,{...L("body"),mod:{"no-wrap":T},children:[S.jsx(je,{component:"span",...L("label"),children:b}),S.jsx(je,{component:"span",mod:{active:p},...L("description"),children:w})]}),(H||v)&&S.jsx(je,{...L("section"),component:"span",mod:{rotate:B&&!E,position:"right"},children:H?v||S.jsx(aB,{...L("chevron")}):v})]}),H&&S.jsx(J8,{in:B,...L("collapse"),children:S.jsx("div",{...L("children"),children:d})})]})});vB.classes=cEe;vB.displayName="@mantine/core/NavLink";var fEe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const RKe={withCloseButton:!0},DKe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Ci(t),"--notification-color":n?qi(n,e):void 0}}),fJ=At((e,t)=>{const n=Je("Notification",RKe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:v,variant:b,vars:w,mod:E,...T}=n,C=Zt({name:"Notification",classes:fEe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:v,vars:w,varsResolver:DKe});return S.jsxs(je,{...C("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},E],ref:t,variant:b,...T,role:"alert",children:[c&&!o&&S.jsx("div",{...C("icon"),children:c}),o&&S.jsx(df,{size:28,color:i,...C("loader")}),S.jsxs("div",{...C("body"),children:[l&&S.jsx("div",{...C("title"),children:l}),S.jsx(je,{...C("description"),mod:{"data-with-title":!!l},children:f})]}),a&&S.jsx(hx,{iconSize:16,color:"gray",...h,unstyled:v,onClick:d,...C("closeButton")})]})});fJ.classes=fEe;fJ.displayName="@mantine/core/Notification";function dEe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var vN;(function(e){e.event="event",e.props="prop"})(vN||(vN={}));function zv(){}function NKe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function bN(e){return!!(e||"").match(/\d/)}function O2(e){return e==null}function PKe(e){return typeof e=="number"&&isNaN(e)}function hEe(e){return O2(e)||PKe(e)||typeof e=="number"&&!isFinite(e)}function pEe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function OKe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function MKe(e,t,n){var r=OKe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function LKe(e){var t=P.useRef(e);t.current=e;var n=P.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function dJ(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function $Ke(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function mEe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Rle(e,t){return Array(t+1).join(e)}function gEe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Rle("0",Math.abs(o))+i:o>=a?i=i+Rle("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Dle(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=dJ(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,v){return m.length>v?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=mEe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function iw(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var yEe=NKe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),FKe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function BKe(e,t,n){return Math.min(Math.max(e,t),n)}function fz(e){return Math.max(e.selectionStart,e.selectionEnd)}function jKe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function UKe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function zKe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function VKe(e,t,n,r,i,s,o){o===void 0&&(o=zKe);var a=i.findIndex(function(E){return E}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var v=r;v<l&&(d[v]===-1||!s(n[v]));)v++;var b=v===l||d[v]===-1?c:d[v];for(v=r-1;v>0&&d[v]===-1;)v--;var w=v===-1||d[v]===-1?0:d[v]+1;return w>b?b:r-w<b-r?w:b}function Nle(e,t,n,r){var i=e.length;if(t=BKe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function HKe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(bN(e[n])||bN(e[n-1]));return t}function vEe(e,t,n,r,i,s){s===void 0&&(s=zv);var o=LKe(function(p,m){var g,v;return hEe(p)?(v="",g=""):typeof p=="number"||m?(v=typeof p=="number"?gEe(p):p,g=r(v)):(v=i(p,void 0),g=r(v)),{formattedValue:g,numAsString:v}}),a=P.useState(function(){return o(O2(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;O2(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return P.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function qKe(e){return e.replace(/[^0-9]/g,"")}function WKe(e){return e}function GKe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=WKe);var a=e.removeFormatting;a===void 0&&(a=qKe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=zv);var h=e.onKeyDown;h===void 0&&(h=zv);var p=e.onMouseUp;p===void 0&&(p=zv);var m=e.onFocus;m===void 0&&(m=zv);var g=e.onBlur;g===void 0&&(g=zv);var v=e.value,b=e.getCaretBoundary;b===void 0&&(b=HKe);var w=e.isValidInputCharacter;w===void 0&&(w=bN);var E=e.isCharacterSame,T=dEe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),C=vEe(v,u,!!l,o,a,c),I=C[0],R=I.formattedValue,N=I.numAsString,O=C[1],L=P.useRef(),B=P.useRef({formattedValue:R,numAsString:N}),F=function(Me,Ge){B.current={formattedValue:Me.formattedValue,numAsString:Me.value},O(Me,Ge)},H=P.useState(!1),Q=H[0],J=H[1],ne=P.useRef(null),Z=P.useRef({setCaretTimeout:null,focusTimeout:null});P.useEffect(function(){return J(!0),function(){clearTimeout(Z.current.setCaretTimeout),clearTimeout(Z.current.focusTimeout)}},[]);var ie=o,q=function(Me,Ge){var at=parseFloat(Ge);return{formattedValue:Me,value:Ge,floatValue:isNaN(at)?void 0:at}},U=function(Me,Ge,at){Me.selectionStart===0&&Me.selectionEnd===Me.value.length||(iw(Me,Ge),Z.current.setCaretTimeout=setTimeout(function(){Me.value===at&&Me.selectionStart!==Ge&&iw(Me,Ge)},0))},G=function(Me,Ge,at){return Nle(Me,Ge,b(Me),at)},V=function(Me,Ge,at){var yt=b(Ge),Tt=VKe(Ge,R,Me,at,yt,w,E);return Tt=Nle(Ge,Tt,yt),Tt},Y=function(Me){var Ge=Me.formattedValue;Ge===void 0&&(Ge="");var at=Me.input,yt=Me.source,Tt=Me.event,Ot=Me.numAsString,qe;if(at){var dt=Me.inputValue||at.value,wt=fz(at);at.value=Ge,qe=V(dt,Ge,wt),qe!==void 0&&U(at,qe,Ge)}Ge!==R&&F(q(Ge,Ot),{event:Tt,source:yt})};P.useEffect(function(){var Me=B.current,Ge=Me.formattedValue,at=Me.numAsString;(R!==Ge||N!==at)&&F(q(R,N),{event:void 0,source:vN.props})},[R,N]);var ee=ne.current?fz(ne.current):void 0,ae=typeof window<"u"?P.useLayoutEffect:P.useEffect;ae(function(){var Me=ne.current;if(R!==B.current.formattedValue&&Me){var Ge=V(B.current.formattedValue,R,ee);Me.value=R,U(Me,Ge,R)}},[R]);var _e=function(Me,Ge,at){var yt=Ge.target,Tt=L.current?FKe(L.current,yt.selectionEnd):yEe(R,Me),Ot=Object.assign(Object.assign({},Tt),{lastValue:R}),qe=a(Me,Ot),dt=ie(qe);if(qe=a(dt,void 0),f&&!f(q(dt,qe))){var wt=Ge.target,ke=fz(wt),Oe=V(Me,R,ke);return wt.value=R,U(wt,Oe,R),!1}return Y({formattedValue:dt,numAsString:qe,inputValue:Me,event:Ge,source:at,input:Ge.target}),!0},pe=function(Me,Ge){Ge===void 0&&(Ge=0);var at=Me.selectionStart,yt=Me.selectionEnd;L.current={selectionStart:at,selectionEnd:yt+Ge}},Te=function(Me){var Ge=Me.target,at=Ge.value,yt=_e(at,Me,vN.event);yt&&d(Me),L.current=void 0},Le=function(Me){var Ge=Me.target,at=Me.key,yt=Ge.selectionStart,Tt=Ge.selectionEnd,Ot=Ge.value;Ot===void 0&&(Ot="");var qe;at==="ArrowLeft"||at==="Backspace"?qe=Math.max(yt-1,0):at==="ArrowRight"?qe=Math.min(yt+1,Ot.length):at==="Delete"&&(qe=yt);var dt=0;at==="Delete"&&yt===Tt&&(dt=1);var wt=at==="ArrowLeft"||at==="ArrowRight";if(qe===void 0||yt!==Tt&&!wt){h(Me),pe(Ge,dt);return}var ke=qe;if(wt){var Oe=at==="ArrowLeft"?"left":"right";ke=G(Ot,qe,Oe),ke!==qe&&Me.preventDefault()}else at==="Delete"&&!w(Ot[qe])?ke=G(Ot,qe,"right"):at==="Backspace"&&!w(Ot[qe])&&(ke=G(Ot,qe,"left"));ke!==qe&&U(Ge,ke,Ot),h(Me),pe(Ge,dt)},ye=function(Me){var Ge=Me.target,at=function(){var yt=Ge.selectionStart,Tt=Ge.selectionEnd,Ot=Ge.value;if(Ot===void 0&&(Ot=""),yt===Tt){var qe=G(Ot,yt);qe!==yt&&U(Ge,qe,Ot)}};at(),requestAnimationFrame(function(){at()}),p(Me),pe(Ge)},he=function(Me){Me.persist&&Me.persist();var Ge=Me.target,at=Me.currentTarget;ne.current=Ge,Z.current.focusTimeout=setTimeout(function(){var yt=Ge.selectionStart,Tt=Ge.selectionEnd,Ot=Ge.value;Ot===void 0&&(Ot="");var qe=G(Ot,yt);qe!==yt&&!(yt===0&&Tt===Ot.length)&&U(Ge,qe,Ot),m(Object.assign(Object.assign({},Me),{currentTarget:at}))},0)},$e=function(Me){ne.current=null,clearTimeout(Z.current.focusTimeout),clearTimeout(Z.current.setCaretTimeout),g(Me)},De=Q&&jKe()?"numeric":void 0,tt=Object.assign({inputMode:De},T,{type:t,value:R,onChange:Te,onKeyDown:Le,onMouseUp:ye,onFocus:he,onBlur:$e});if(n==="text")return i?ci.createElement(ci.Fragment,null,i(R,T)||null):ci.createElement("span",Object.assign({},T,{ref:s}),R);if(r){var it=r;return ci.createElement(it,Object.assign({},tt,{ref:s}))}return ci.createElement("input",Object.assign({},tt,{ref:s}))}function Ple(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=bB(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=dJ(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=mEe(p,n,!!r)),l&&(h=MKe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function bB(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function YKe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function KKe(e,t){return new RegExp("(^-)|[0-9]|"+pEe(e),"g")}function XKe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function QKe(e,t,n){var r;t===void 0&&(t=UKe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=bB(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(bN(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var v=function(ne,Z,ie){var q=!1,U=!1;s.startsWith("-")?q=!1:ne.startsWith("--")?(q=!1,U=!0):o.startsWith("-")&&ne.length===o.length?q=!1:ne[0]==="-"&&(q=!0);var G=q?1:0;return U&&(G=2),G&&(ne=ne.substring(G),Z-=G,ie-=G),{value:ne,start:Z,end:ie,hasNegation:q}},b=v(e,c,f),w=b.hasNegation;r=b,e=r.value,c=r.start,f=r.end;var E=v(t.lastValue,u.start,u.end),T=E.start,C=E.end,I=E.value,R=e.substring(c,f);e.length&&I.length&&(T>I.length-o.length||C<s.length)&&!(R&&o.startsWith(R))&&(e=I);var N=0;e.startsWith(s)?N+=s.length:c<s.length&&(N=c),e=e.substring(N),f-=N;var O=e.length,L=e.length-o.length;e.endsWith(o)?O=L:(f>L||f>e.length-o.length)&&(O=f),e=e.substring(0,O),e=YKe(w?"-"+e:e,i),e=(e.match(KKe(p))||[]).join("");var B=e.indexOf(p);e=e.replace(new RegExp(pEe(p),"g"),function(ne,Z){return Z===B?".":""});var F=dJ(e,i),H=F.beforeDecimal,Q=F.afterDecimal,J=F.addNegation;return l.end-l.start<u.end-u.start&&H===""&&m&&!parseFloat(Q)&&(e=J?"-":""),e}function JKe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function ZKe(e){var t=bB(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function eXe(e){e=ZKe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=zv);var s=e.onBlur;s===void 0&&(s=zv);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=dEe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=bB(e),g=m.decimalSeparator,v=m.allowedDecimalSeparators,b=function(J){return Ple(J,e)},w=function(J,ne){return QKe(J,ne,e)},E=O2(f)?c:f,T=d??XKe(E,l,t);O2(f)?O2(c)||(T=T||typeof c=="number"):T=T||typeof f=="number";var C=function(J){return hEe(J)?J:(typeof J=="number"&&(J=gEe(J)),T&&typeof a=="number"?Dle(J,a,!!u):J)},I=vEe(C(f),C(c),!!T,b,w,h),R=I[0],N=R.numAsString,O=R.formattedValue,L=I[1],B=function(J){var ne=J.target,Z=J.key,ie=ne.selectionStart,q=ne.selectionEnd,U=ne.value;if(U===void 0&&(U=""),(Z==="Backspace"||Z==="Delete")&&q<l.length){J.preventDefault();return}if(ie!==q){i(J);return}Z==="Backspace"&&U[0]==="-"&&ie===l.length+1&&n&&iw(ne,1),a&&u&&(Z==="Backspace"&&U[ie-1]===g?(iw(ne,ie-1),J.preventDefault()):Z==="Delete"&&U[ie]===g&&J.preventDefault()),v!=null&&v.includes(Z)&&U[ie]===g&&iw(ne,ie+1);var G=o===!0?",":o;Z==="Backspace"&&U[ie-1]===G&&iw(ne,ie-1),Z==="Delete"&&U[ie]===G&&iw(ne,ie+1),i(J)},F=function(J){var ne=N;if(ne.match(/\d/g)||(ne=""),r||(ne=$Ke(ne)),u&&a&&(ne=Dle(ne,a,u)),ne!==N){var Z=Ple(ne,e);L({formattedValue:Z,value:ne,floatValue:parseFloat(ne)},{event:J,source:vN.event})}s(J)},H=function(J){return J===g?!0:bN(J)},Q=function(J){var ne=J.currentValue,Z=J.lastValue,ie=J.formattedValue,q=J.currentValueIndex,U=J.formattedValueIndex,G=ne[q],V=ie[U],Y=yEe(Z,ne),ee=Y.to,ae=function(_e){return w(_e).indexOf(".")+l.length};return f===0&&u&&a&&ne[ee.start]===g&&ae(ne)<q&&ae(ie)>U?!1:q>=ee.start&&q<ee.end&&v&&v.includes(G)&&V===g?!0:G===V};return Object.assign(Object.assign({},p),{value:O,valueIsNumericString:!1,isValidInputCharacter:H,isCharacterSame:Q,onValueChange:L,format:b,removeFormatting:w,getCaretBoundary:function(J){return JKe(J,e)},onKeyDown:B,onBlur:F})}function tXe(e){var t=eXe(e);return ci.createElement(GKe,Object.assign({},t))}function Ole({direction:e,style:t,...n}){return S.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:S.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var aW={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const nXe=/^(0\.0*|-0(\.0*)?)$/,rXe=/^-?0\d+(\.\d+)?\.?$/;function uW(e){return typeof e=="string"&&e!==""&&!Number.isNaN(Number(e))}function dz(e){return typeof e=="number"?e<Number.MAX_SAFE_INTEGER:e===""||uW(e)&&Number(e)<Number.MAX_SAFE_INTEGER}function iXe(e){return e.toString().replace(".","").length}function sXe(e,t){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)&&iXe(t)<14&&t!==""}function Mle(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const oXe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},aXe=(e,{size:t})=>({controls:{"--ni-chevron-size":Kn(t,"ni-chevron-size")}}),hJ=At((e,t)=>{const n=Je("NumberInput",oXe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:v,clampBehavior:b,onBlur:w,allowDecimal:E,decimalScale:T,onKeyDown:C,onKeyDownCapture:I,handlersRef:R,startValue:N,disabled:O,rightSectionPointerEvents:L,allowNegative:B,readOnly:F,size:H,rightSectionWidth:Q,stepHoldInterval:J,stepHoldDelay:ne,allowLeadingZeros:Z,withKeyboardEvents:ie,trimLeadingZeroesOnBlur:q,...U}=n,G=Zt({name:"NumberInput",classes:aW,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:aXe}),{resolvedClassNames:V,resolvedStyles:Y}=AE({classNames:i,styles:s,props:n}),[ee,ae]=Yo({value:c,defaultValue:f,finalValue:"",onChange:u}),_e=ne!==void 0&&J!==void 0,pe=P.useRef(null),Te=P.useRef(null),Le=P.useRef(0),ye=(qe,dt)=>{dt.source==="event"&&ae(sXe(qe.floatValue,qe.value)&&!nXe.test(qe.value)&&!(Z&&rXe.test(qe.value))?qe.floatValue:qe.value),l==null||l(qe,dt)},he=qe=>{const dt=String(qe).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return dt?Math.max(0,(dt[1]?dt[1].length:0)-(dt[2]?+dt[2]:0)):0},$e=qe=>{pe.current&&typeof qe<"u"&&pe.current.setSelectionRange(qe,qe)},De=P.useRef(Wq);De.current=()=>{if(!dz(ee))return;let qe;const dt=he(ee),wt=he(p),ke=Math.max(dt,wt),Oe=10**ke;if(!uW(ee)&&(typeof ee!="number"||Number.isNaN(ee)))qe=Zm(N,h,d);else if(d!==void 0){const Lt=(Math.round(Number(ee)*Oe)+Math.round(p*Oe))/Oe;qe=Lt<=d?Lt:d}else qe=(Math.round(Number(ee)*Oe)+Math.round(p*Oe))/Oe;const ht=qe.toFixed(ke);ae(parseFloat(ht)),l==null||l({floatValue:parseFloat(ht),formattedValue:ht,value:ht},{source:"increment"}),setTimeout(()=>{var Lt;return $e((Lt=pe.current)==null?void 0:Lt.value.length)},0)};const tt=P.useRef(Wq);tt.current=()=>{if(!dz(ee))return;let qe;const dt=h!==void 0?h:B?Number.MIN_SAFE_INTEGER:0,wt=he(ee),ke=he(p),Oe=Math.max(wt,ke),ht=10**Oe;if(!uW(ee)&&typeof ee!="number"||Number.isNaN(ee))qe=Zm(N,dt,d);else{const Ft=(Math.round(Number(ee)*ht)-Math.round(p*ht))/ht;qe=dt!==void 0&&Ft<dt?dt:Ft}const Lt=qe.toFixed(Oe);ae(parseFloat(Lt)),l==null||l({floatValue:parseFloat(Lt),formattedValue:Lt,value:Lt},{source:"decrement"}),setTimeout(()=>{var Ft;return $e((Ft=pe.current)==null?void 0:Ft.value.length)},0)};const it=qe=>{C==null||C(qe),!(F||!ie)&&(qe.key==="ArrowUp"&&(qe.preventDefault(),De.current()),qe.key==="ArrowDown"&&(qe.preventDefault(),tt.current()))},Me=qe=>{if(I==null||I(qe),qe.key==="Backspace"){const dt=pe.current;dt.selectionStart===0&&dt.selectionStart===dt.selectionEnd&&(qe.preventDefault(),window.setTimeout(()=>$e(0),0))}};F$(R,{increment:De.current,decrement:tt.current});const Ge=qe=>{qe?De.current():tt.current(),Le.current+=1},at=qe=>{if(Ge(qe),_e){const dt=typeof J=="number"?J:J(Le.current);Te.current=window.setTimeout(()=>at(qe),dt)}},yt=(qe,dt)=>{var wt;qe.preventDefault(),(wt=pe.current)==null||wt.focus(),Ge(dt),_e&&(Te.current=window.setTimeout(()=>at(dt),ne))},Tt=()=>{Te.current&&window.clearTimeout(Te.current),Te.current=null,Le.current=0},Ot=S.jsxs("div",{...G("controls"),children:[S.jsx(ud,{...G("control"),tabIndex:-1,"aria-hidden":!0,disabled:O||typeof ee=="number"&&d!==void 0&&ee>=d,mod:{direction:"up"},onMouseDown:qe=>qe.preventDefault(),onPointerDown:qe=>{yt(qe,!0)},onPointerUp:Tt,onPointerLeave:Tt,children:S.jsx(Ole,{direction:"up"})}),S.jsx(ud,{...G("control"),tabIndex:-1,"aria-hidden":!0,disabled:O||typeof ee=="number"&&h!==void 0&&ee<=h,mod:{direction:"down"},onMouseDown:qe=>qe.preventDefault(),onPointerDown:qe=>{yt(qe,!1)},onPointerUp:Tt,onPointerLeave:Tt,children:S.jsx(Ole,{direction:"down"})})]});return S.jsx(xh,{component:tXe,allowNegative:B,className:Io(aW.root,r),size:H,...U,readOnly:F,disabled:O,value:ee,getInputRef:No(t,pe),onValueChange:ye,rightSection:m||F||!dz(ee)?g:g||Ot,classNames:V,styles:Y,unstyled:o,__staticSelector:"NumberInput",decimalScale:E?T:0,onKeyDown:it,onKeyDownCapture:Me,rightSectionPointerEvents:L??(O?"none":void 0),rightSectionWidth:Q??`var(--ni-right-section-width-${H||"sm"})`,allowLeadingZeros:Z,onBlur:qe=>{if(w==null||w(qe),b==="blur"&&typeof ee=="number"&&Zm(ee,h,d)!==ee&&ae(Zm(ee,h,d)),q&&typeof ee=="string"&&he(ee)<15){const dt=ee.replace(/^0+/,""),wt=parseFloat(dt);ae(Number.isNaN(wt)||wt>Number.MAX_SAFE_INTEGER?dt:Zm(wt,h,d))}},isAllowed:qe=>b==="strict"?v?v(qe)&&Mle(qe.floatValue,h,d):Mle(qe.floatValue,h,d):v?v(qe):!0})});hJ.classes={...xh.classes,...aW};hJ.displayName="@mantine/core/NumberInput";const[uXe,bEe]=Iu("Progress.Root component was not found in tree");var WP={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const lXe={},pJ=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Je("ProgressLabel",lXe,e),u=bEe();return S.jsx(je,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});pJ.classes=WP;pJ.displayName="@mantine/core/ProgressLabel";const cXe={},fXe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Kn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Ci(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),xB=At((e,t)=>{const n=Je("ProgressRoot",cXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=Zt({name:"Progress",classes:WP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fXe});return S.jsx(uXe,{value:{getStyles:d,autoContrast:l},children:S.jsx(je,{ref:t,...d("root"),...f})})});xB.classes=WP;xB.displayName="@mantine/core/ProgressRoot";const dXe={withAria:!0},_B=At((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Je("ProgressSection",dXe,e),p=bEe(),m=Po(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return S.jsx(je,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":qi(l,m),"--progress-label-color":_A(p.autoContrast,m)?cx({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});_B.classes=WP;_B.displayName="@mantine/core/ProgressSection";const hXe={},PA=At((e,t)=>{const n=Je("Progress",hXe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=AE({classNames:i,styles:s,props:n});return S.jsx(xB,{ref:t,classNames:d,styles:h,vars:o,...f,children:S.jsx(_B,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});PA.classes=WP;PA.displayName="@mantine/core/Progress";PA.Section=_B;PA.Root=xB;PA.Label=pJ;const[pXe,xEe]=ux(),[mXe,gXe]=ux();var _Ee={card:"m_9dc8ae12"};const yXe={withBorder:!0},vXe=(e,{radius:t})=>({card:{"--card-radius":Ci(t)}}),mJ=At((e,t)=>{const n=Je("RadioCard",yXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,v=Zt({name:"RadioCard",classes:_Ee,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vXe,rootSelector:"card"}),{dir:b}=b1(),w=xEe(),E=typeof l=="boolean"?l:(w==null?void 0:w.value)===d||!1,T=p||(w==null?void 0:w.name),C=I=>{if(m==null||m(I),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(I.nativeEvent.code)){I.preventDefault();const R=Array.from(document.querySelectorAll(`[role="radio"][name="${T||"__mantine"}"]`)),N=R.findIndex(B=>B===I.target),O=N+1>=R.length?0:N+1,L=N-1<0?R.length-1:N-1;I.nativeEvent.code==="ArrowDown"&&(R[O].focus(),R[O].click()),I.nativeEvent.code==="ArrowUp"&&(R[L].focus(),R[L].click()),I.nativeEvent.code==="ArrowLeft"&&(R[b==="ltr"?L:O].focus(),R[b==="ltr"?L:O].click()),I.nativeEvent.code==="ArrowRight"&&(R[b==="ltr"?O:L].focus(),R[b==="ltr"?O:L].click())}};return S.jsx(mXe,{value:{checked:E},children:S.jsx(ud,{ref:t,mod:[{"with-border":f,checked:E},c],...v("card"),...g,role:"radio","aria-checked":E,name:T,onClick:I=>{h==null||h(I),w==null||w.onChange(d||"")},onKeyDown:C})})});mJ.displayName="@mantine/core/RadioCard";mJ.classes=_Ee;const bXe={},gJ=At((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Je("RadioGroup",bXe,e),f=yl(u),[d,h]=Yo({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return S.jsx(pXe,{value:{value:d,onChange:p,size:s,name:f},children:S.jsx(Ki.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:S.jsx(qQ,{role:"radiogroup",children:a})})})});gJ.classes=Ki.Wrapper.classes;gJ.displayName="@mantine/core/RadioGroup";function wEe({size:e,style:t,...n}){return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Ke(e),height:Ke(e),...t},"aria-hidden":!0,...n,children:S.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var EEe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const xXe={icon:wEe},_Xe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ng({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Kn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Ci(t),"--radio-color":s==="outline"?u:qi(n,e),"--radio-icon-size":Kn(r,"radio-icon-size"),"--radio-icon-color":i?qi(i,e):_A(o,e)?cx({color:n,theme:e,autoContrast:o}):void 0}}},yJ=At((e,t)=>{const n=Je("RadioIndicator",xXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:v,...b}=n,w=l,E=Zt({name:"RadioIndicator",classes:EEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Xe,rootSelector:"indicator"}),T=gXe(),C=typeof p=="boolean"?p:(T==null?void 0:T.checked)||!1;return S.jsx(je,{ref:t,...E("indicator",{variant:g}),variant:g,mod:[{checked:C,disabled:v},m],...b,children:S.jsx(w,{...E("icon")})})});yJ.displayName="@mantine/core/RadioIndicator";yJ.classes=EEe;var TEe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const wXe={labelPosition:"right"},EXe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=ng({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Kn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Ci(n),"--radio-color":s==="outline"?u:qi(r,e),"--radio-icon-color":i?qi(i,e):_A(o,e)?cx({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Kn(t,"radio-icon-size")}}},b0=At((e,t)=>{const n=Je("Radio",wXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:v,disabled:b,wrapperProps:w,icon:E=wEe,rootRef:T,iconColor:C,onChange:I,mod:R,...N}=n,O=Zt({name:"Radio",classes:TEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EXe}),L=xEe(),B=(L==null?void 0:L.size)??c,F=n.size?c:B,{styleProps:H,rest:Q}=kE(N),J=yl(l),ne=L?{checked:L.value===Q.value,name:Q.name??L.name,onChange:Z=>{L.onChange(Z),I==null||I(Z)}}:{};return S.jsx(uB,{...O("root"),__staticSelector:"Radio",__stylesApiProps:n,id:J,size:F,labelPosition:d,label:f,description:h,error:p,disabled:b,classNames:r,styles:o,unstyled:a,"data-checked":ne.checked||void 0,variant:v,ref:T,mod:R,...H,...w,children:S.jsxs(je,{...O("inner"),mod:{"label-position":d},children:[S.jsx(je,{...O("radio",{focusable:!0,variant:v}),onChange:I,...Q,...ne,component:"input",mod:{error:!!p},ref:t,id:J,disabled:b,type:"radio"}),S.jsx(E,{...O("icon"),"aria-hidden":!0})]})})});b0.classes=TEe;b0.displayName="@mantine/core/Radio";b0.Group=gJ;b0.Card=mJ;b0.Indicator=yJ;const TXe={duration:100,transition:"fade"};function SXe(e,t){return{...TXe,...t,...e}}function CXe({offset:e,position:t,defaultOpened:n}){const[r,i]=P.useState(n),s=P.useRef(null),{x:o,y:a,elements:u,refs:l,update:c,placement:f}=hQ({placement:t,middleware:[lQ({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=P.useCallback(({clientX:m,clientY:g})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[u.reference]);return P.useEffect(()=>{if(l.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=Py(l.floating.current);return g.forEach(v=>{v.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(v=>{v.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:l.setFloating}}var wB={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const AXe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:ff("popover")},IXe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ci(t),"--tooltip-bg":n?qi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),vJ=At((e,t)=>{const n=Je("TooltipFloating",AXe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:v,disabled:b,defaultOpened:w,variant:E,vars:T,portalProps:C,...I}=n,R=Po(),N=Zt({name:"TooltipFloating",props:n,classes:wB,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:T,varsResolver:IXe}),{handleMouseMove:O,x:L,y:B,opened:F,boundaryRef:H,floating:Q,setOpened:J}=CXe({offset:p,position:m,defaultOpened:w});if(!ax(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ne=No(H,K8(r),t),Z=r.props,ie=U=>{var G;(G=Z.onMouseEnter)==null||G.call(Z,U),O(U),J(!0)},q=U=>{var G;(G=Z.onMouseLeave)==null||G.call(Z,U),J(!1)};return S.jsxs(S.Fragment,{children:[S.jsx(fx,{...C,withinPortal:s,children:S.jsx(je,{...I,...N("tooltip",{style:{...YX(o,R),zIndex:v,display:!b&&F?"block":"none",top:(B&&Math.round(B))??"",left:(L&&Math.round(L))??""}}),variant:E,ref:Q,mod:{multiline:g},children:h})}),P.cloneElement(r,{...Z,[i]:ne,onMouseEnter:ie,onMouseLeave:q})]})});vJ.classes=wB;vJ.displayName="@mantine/core/TooltipFloating";const SEe=P.createContext(!1),kXe=SEe.Provider,RXe=()=>P.useContext(SEe),DXe={openDelay:0,closeDelay:0};function bJ(e){const{openDelay:t,closeDelay:n,children:r}=Je("TooltipGroup",DXe,e);return S.jsx(kXe,{value:!0,children:S.jsx(Nqe,{delay:{open:t,close:n},children:r})})}bJ.displayName="@mantine/core/TooltipGroup";bJ.extend=e=>e;function NXe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function PXe(e){const t=NXe(e.middlewares),n=[K_e(e.offset)];return t.shift&&n.push(lQ(typeof t.shift=="boolean"?{padding:8}:{padding:8,...t.shift})),t.flip&&n.push(typeof t.flip=="boolean"?V$():V$(t.flip)),n.push(X_e({element:e.arrowRef,padding:e.arrowOffset})),t.inline?n.push(typeof t.inline=="boolean"?RD():RD(t.inline)):e.inline&&n.push(RD()),n}function OXe(e){var C,I,R;const[t,n]=P.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=RXe(),o=yl(),{delay:a,currentId:u,setCurrentId:l}=ewe(),c=P.useCallback(N=>{n(N),N&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:v,y:b}={}}}=hQ({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:PXe(e)});Pqe(h,{id:o});const{getReferenceProps:w,getFloatingProps:E}=jqe([Dqe(h,{enabled:(C=e.events)==null?void 0:C.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((I=e.events)!=null&&I.touch)}),Bqe(h,{enabled:(R=e.events)==null?void 0:R.focus,visibleOnly:!0}),zqe(h,{role:"tooltip"}),$qe(h,{enabled:typeof e.opened>"u"})]);uwe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),P0(()=>{var N;(N=e.onPositionChange)==null||N.call(e,g)},[g]);const T=i&&u&&u!==o;return{x:f,y:d,arrowX:v,arrowY:b,reference:p.setReference,floating:p.setFloating,getFloatingProps:E,getReferenceProps:w,isGroupPhase:T,opened:i,placement:g}}const Lle={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:ff("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},MXe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ci(t),"--tooltip-bg":n?qi(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ss=At((e,t)=>{const n=Je("Tooltip",Lle,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:v,style:b,className:w,withArrow:E,arrowSize:T,arrowOffset:C,arrowRadius:I,arrowPosition:R,offset:N,transitionProps:O,multiline:L,events:B,zIndex:F,disabled:H,positionDependencies:Q,onClick:J,onMouseEnter:ne,onMouseLeave:Z,inline:ie,variant:q,keepMounted:U,vars:G,portalProps:V,mod:Y,floatingStrategy:ee,middlewares:ae,..._e}=Je("Tooltip",Lle,n),{dir:pe}=b1(),Te=P.useRef(null),Le=OXe({position:twe(pe,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:f,events:B,arrowRef:Te,arrowOffset:C,offset:typeof N=="number"?N+(E?T/2:0):N,positionDependencies:[...Q,r],inline:ie,strategy:ee,middlewares:ae}),ye=Zt({name:"Tooltip",props:n,classes:wB,className:w,style:b,classNames:m,styles:g,unstyled:v,rootSelector:"tooltip",vars:G,varsResolver:MXe});if(!ax(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const he=No(Le.reference,K8(r),t),$e=SXe(O,{duration:100,transition:"fade"}),De=r.props;return S.jsxs(S.Fragment,{children:[S.jsx(fx,{...V,withinPortal:d,children:S.jsx(rg,{...$e,keepMounted:U,mounted:!H&&!!Le.opened,duration:Le.isGroupPhase?10:$e.duration,children:tt=>S.jsxs(je,{..._e,"data-fixed":ee==="fixed"||void 0,variant:q,mod:[{multiline:L},Y],...Le.getFloatingProps({ref:Le.floating,className:ye("tooltip").className,style:{...ye("tooltip").style,...tt,zIndex:F,top:Le.y??0,left:Le.x??0}}),children:[o,S.jsx(pQ,{ref:Te,arrowX:Le.arrowX,arrowY:Le.arrowY,visible:E,position:Le.placement,arrowSize:T,arrowOffset:C,arrowRadius:I,arrowPosition:R,...ye("arrow")})]})})}),P.cloneElement(r,Le.getReferenceProps({onClick:J,onMouseEnter:ne,onMouseLeave:Z,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:he,className:Io(w,De.className),...De}))]})});ss.classes=wB;ss.displayName="@mantine/core/Tooltip";ss.Floating=vJ;ss.Group=bJ;var CEe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const LXe={withItemsBorders:!0},$Xe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Ci(t),"--sc-color":n?qi(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Kn(i,"sc-padding"),"--sc-font-size":Va(i)}}),EB=At((e,t)=>{var ae,_e;const n=Je("SegmentedControl",LXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:v,orientation:b,radius:w,color:E,transitionDuration:T,transitionTimingFunction:C,variant:I,autoContrast:R,withItemsBorders:N,mod:O,...L}=n,B=Zt({name:"SegmentedControl",props:n,classes:CEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$Xe}),F=Po(),H=l.map(pe=>typeof pe=="string"?{label:pe,value:pe}:pe),Q=jze(),[J,ne]=P.useState(null),[Z,ie]=P.useState({}),q=(pe,Te)=>{Z[Te]=pe,ie(Z)},[U,G]=Yo({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ae=H.find(pe=>!pe.disabled))==null?void 0:ae.value)??((_e=l[0])==null?void 0:_e.value)??null:null,onChange:d}),V=yl(p),Y=H.map(pe=>P.createElement(je,{...B("control"),mod:{active:U===pe.value,orientation:b},key:pe.value},P.createElement("input",{...B("input"),disabled:m||pe.disabled,type:"radio",name:V,value:pe.value,id:`${V}-${pe.value}`,checked:U===pe.value,onChange:()=>!g&&G(pe.value),"data-focus-ring":F.focusRing,key:`${pe.value}-input`}),P.createElement(je,{component:"label",...B("label"),mod:{active:U===pe.value&&!(m||pe.disabled),disabled:m||pe.disabled,"read-only":g},htmlFor:`${V}-${pe.value}`,ref:Te=>q(Te,pe.value),__vars:{"--sc-label-color":E!==void 0?cx({color:E,theme:F,autoContrast:R}):void 0},key:`${pe.value}-label`},S.jsx("span",{...B("innerLabel"),children:pe.label})))),ee=No(t,pe=>ne(pe));return l.length===0?null:S.jsxs(je,{...B("root"),variant:I,size:h,ref:ee,mod:[{"full-width":v,orientation:b,initialized:Q,"with-items-borders":N},O],...L,role:"radiogroup","data-disabled":m,children:[typeof U=="string"&&S.jsx(xQ,{target:Z[U],parent:J,component:"span",transitionDuration:"var(--sc-transition-duration)",...B("indicator")}),Y]})});EB.classes=CEe;EB.displayName="@mantine/core/SegmentedControl";const FXe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},OA=At((e,t)=>{const n=Je("Select",FXe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:v,selectFirstOptionOnChange:b,onOptionSubmit:w,comboboxProps:E,readOnly:T,disabled:C,filter:I,limit:R,withScrollArea:N,maxDropdownHeight:O,size:L,searchable:B,rightSection:F,checkIconPosition:H,withCheckIcon:Q,nothingFoundMessage:J,name:ne,form:Z,searchValue:ie,defaultSearchValue:q,onSearchChange:U,allowDeselect:G,error:V,rightSectionPointerEvents:Y,id:ee,clearable:ae,clearButtonProps:_e,hiddenInputProps:pe,renderOption:Te,onClear:Le,autoComplete:ye,scrollAreaProps:he,__defaultRightSection:$e,__clearSection:De,__clearable:tt,...it}=n,Me=P.useMemo(()=>Nwe(m),[m]),Ge=P.useMemo(()=>NQ(Me),[Me]),at=yl(ee),[yt,Tt,Ot]=Yo({value:g,defaultValue:v,finalValue:null,onChange:p}),qe=typeof yt=="string"?Ge[yt]:void 0,dt=Fze(qe),[wt,ke]=Yo({value:ie,defaultValue:q,finalValue:qe?qe.label:"",onChange:U}),Oe=VQ({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Oe.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Oe.resetSelectedOption()}}),{resolvedClassNames:ht,resolvedStyles:Lt}=AE({props:n,styles:i,classNames:r});P.useEffect(()=>{b&&Oe.selectFirstOption()},[b,yt]),P.useEffect(()=>{g===null&&ke(""),typeof g=="string"&&qe&&((dt==null?void 0:dt.value)!==qe.value||(dt==null?void 0:dt.label)!==qe.label)&&ke(qe.label)},[g,qe]);const Ft=S.jsx(Wr.ClearButton,{..._e,onClear:()=>{Tt(null,null),ke(""),Le==null||Le()}});return S.jsxs(S.Fragment,{children:[S.jsxs(Wr,{store:Oe,__staticSelector:"Select",classNames:ht,styles:Lt,unstyled:s,readOnly:T,onOptionSubmit:dn=>{w==null||w(dn);const Nn=G&&Ge[dn].value===yt?null:Ge[dn],Tr=Nn?Nn.value:null;Tr!==yt&&Tt(Tr,Nn),!Ot&&ke(typeof Tr=="string"&&(Nn==null?void 0:Nn.label)||""),Oe.closeDropdown()},size:L,...E,children:[S.jsx(Wr.Target,{targetType:B?"input":"button",autoComplete:ye,children:S.jsx(xh,{id:at,ref:t,__defaultRightSection:S.jsx(Wr.Chevron,{size:L,error:V,unstyled:s}),__clearSection:Ft,__clearable:ae&&!!yt&&!C&&!T,rightSection:F,rightSectionPointerEvents:Y||(Ft?"all":"none"),...it,size:L,__staticSelector:"Select",disabled:C,readOnly:T||!B,value:wt,onChange:dn=>{ke(dn.currentTarget.value),Oe.openDropdown(),b&&Oe.selectFirstOption()},onFocus:dn=>{B&&Oe.openDropdown(),f==null||f(dn)},onBlur:dn=>{var Nn;B&&Oe.closeDropdown(),ke(yt!=null&&((Nn=Ge[yt])==null?void 0:Nn.label)||""),d==null||d(dn)},onClick:dn=>{B?Oe.openDropdown():Oe.toggleDropdown(),h==null||h(dn)},classNames:ht,styles:Lt,unstyled:s,pointer:!B,error:V})}),S.jsx(Xwe,{data:Me,hidden:T||C,filter:I,search:wt,limit:R,hiddenWhenEmpty:!J,withScrollArea:N,maxDropdownHeight:O,filterOptions:B&&(qe==null?void 0:qe.label)!==wt,value:yt,checkIconPosition:H,withCheckIcon:Q,nothingFoundMessage:J,unstyled:s,labelId:it.label?`${at}-label`:void 0,"aria-label":it.label?void 0:it["aria-label"],renderOption:Te,scrollAreaProps:he})]}),S.jsx(Wr.HiddenInput,{value:yt,name:ne,form:Z,disabled:C,...pe})]})});OA.classes={...xh.classes,...Wr.classes};OA.displayName="@mantine/core/Select";function BXe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=Po(),s=t===void 0?e:t,o=ox({"--sg-spacing-x":Go(Ep(e)),"--sg-spacing-y":Go(Ep(s)),"--sg-cols":(c=Ep(n))==null?void 0:c.toString()}),a=as(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=Go(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=Go(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=pN(as(a),i.breakpoints).filter(f=>as(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return S.jsx(IE,{styles:o,media:l,selector:r})}function hz(e){return typeof e=="object"&&e!==null?as(e):[]}function jXe(e){return e.sort((t,n)=>hN(t)-hN(n))}function UXe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...hz(e),...hz(t),...hz(n)]));return jXe(r)}function zXe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=ox({"--sg-spacing-x":Go(Ep(e)),"--sg-spacing-y":Go(Ep(i)),"--sg-cols":(l=Ep(n))==null?void 0:l.toString()}),o=UXe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=Go(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=Go(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return S.jsx(IE,{styles:s,container:u,selector:r})}var AEe={container:"m_925c2d2c",root:"m_2415a157"};const VXe={cols:1,spacing:"md",type:"media"},xJ=At((e,t)=>{const n=Je("SimpleGrid",VXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=Zt({name:"SimpleGrid",classes:AEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=BP();return d==="container"?S.jsxs(S.Fragment,{children:[S.jsx(zXe,{...n,selector:`.${m}`}),S.jsx("div",{...p("container"),children:S.jsx(je,{ref:t,...p("root",{className:m}),...h})})]}):S.jsxs(S.Fragment,{children:[S.jsx(BXe,{...n,selector:`.${m}`}),S.jsx(je,{ref:t,...p("root",{className:m}),...h})]})});xJ.classes=AEe;xJ.displayName="@mantine/core/SimpleGrid";const[IEe,TB]=Iu("SliderProvider was not found in tree"),_J=P.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=TB();return S.jsx(je,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});_J.displayName="@mantine/core/SliderRoot";const q$=P.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},v)=>{const{getStyles:b}=TB(),[w,E]=P.useState(!1),T=l||s||w||h&&p;return S.jsxs(je,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:v,__vars:{"--slider-thumb-offset":`${r}%`},...b("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:C=>{E(!0),typeof f=="function"&&f(C)},onBlur:C=>{E(!1),typeof d=="function"&&d(C)},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:C=>C.stopPropagation(),children:[m,S.jsx(rg,{mounted:i!=null&&!!T,transition:"fade",duration:0,...u,children:C=>S.jsx("div",{...b("label",{style:C}),children:i})})]})});q$.displayName="@mantine/core/SliderThumb";function W$({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function HXe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function kEe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=TB();if(!e)return null;const u=e.map((l,c)=>P.createElement(je,{...a("markWrapper"),__vars:{"--mark-offset":`${W$({value:l.value,min:t,max:n})}%`},key:c},S.jsx(je,{...a("mark"),mod:{filled:HXe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&S.jsx("div",{...a("markLabel"),children:l.label})));return S.jsx("div",{children:u})}kEe.displayName="@mantine/core/SliderMarks";function wJ({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=TB();return S.jsx(je,{...u("trackContainer"),mod:{disabled:r},...o,children:S.jsxs(je,{...u("track"),mod:{inverted:s,disabled:r},children:[S.jsx(je,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,S.jsx(kEe,{...a,offset:i,disabled:r,inverted:s})]})})}wJ.displayName="@mantine/core/SliderTrack";function lW({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function Kd(e,t){return parseFloat(e.toFixed(t))}function REe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}function mw(e,t){const r=[...t].sort((i,s)=>i.value-s.value).find(i=>i.value>e);return r?r.value:e}function gw(e,t){const r=[...t].sort((i,s)=>s.value-i.value).find(i=>i.value<e);return r?r.value:e}function cW(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[0].value:0}function fW(e){const t=[...e].sort((n,r)=>n.value-r.value);return t.length>0?t[t.length-1].value:100}var SB={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const qXe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},WXe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Kn(t,"slider-size"),"--slider-color":n?qi(n,e):void 0,"--slider-radius":i===void 0?void 0:Ci(i),"--slider-thumb-size":r!==void 0?Ke(r):"calc(var(--slider-size) * 2)"}}),CB=At((e,t)=>{const n=Je("Slider",qXe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,thumbChildren:T,disabled:C,unstyled:I,scale:R,inverted:N,className:O,style:L,vars:B,hiddenInputProps:F,restrictToMarks:H,thumbProps:Q,...J}=n,ne=Zt({name:"Slider",props:n,classes:SB,classNames:r,className:O,styles:i,style:L,vars:B,varsResolver:WXe,unstyled:I}),{dir:Z}=b1(),[ie,q]=P.useState(!1),[U,G]=Yo({value:typeof s=="number"?Zm(s,l,c):s,defaultValue:typeof h=="number"?Zm(h,l,c):h,finalValue:Zm(0,l,c),onChange:o}),V=P.useRef(U),Y=P.useRef(null),ee=P.useRef(null),ae=W$({value:U,min:l,max:c}),_e=R(U),pe=typeof g=="function"?g(_e):g,Te=d??REe(f),Le=P.useCallback(({x:De})=>{if(!C){const tt=lW({value:De,min:l,max:c,step:f,precision:Te});G(H&&(m!=null&&m.length)?Yq(tt,m.map(it=>it.value)):tt),V.current=tt}},[C,l,c,f,Te,G,m,H]),{ref:ye,active:he}=u_e(Le,{onScrubEnd:()=>a==null?void 0:a(H&&(m!=null&&m.length)?Yq(V.current,m.map(De=>De.value)):V.current)},Z),$e=De=>{var tt,it,Me,Ge,at,yt;if(!C)switch(De.key){case"ArrowUp":{if(De.preventDefault(),(tt=ee.current)==null||tt.focus(),H&&m){const Ot=mw(U,m);G(Ot),a==null||a(Ot);break}const Tt=Kd(Math.min(Math.max(U+f,l),c),Te);G(Tt),a==null||a(Tt);break}case"ArrowRight":{if(De.preventDefault(),(it=ee.current)==null||it.focus(),H&&m){const Ot=Z==="rtl"?gw(U,m):mw(U,m);G(Ot),a==null||a(Ot);break}const Tt=Kd(Math.min(Math.max(Z==="rtl"?U-f:U+f,l),c),Te);G(Tt),a==null||a(Tt);break}case"ArrowDown":{if(De.preventDefault(),(Me=ee.current)==null||Me.focus(),H&&m){const Ot=gw(U,m);G(Ot),a==null||a(Ot);break}const Tt=Kd(Math.min(Math.max(U-f,l),c),Te);G(Tt),a==null||a(Tt);break}case"ArrowLeft":{if(De.preventDefault(),(Ge=ee.current)==null||Ge.focus(),H&&m){const Ot=Z==="rtl"?mw(U,m):gw(U,m);G(Ot),a==null||a(Ot);break}const Tt=Kd(Math.min(Math.max(Z==="rtl"?U+f:U-f,l),c),Te);G(Tt),a==null||a(Tt);break}case"Home":{if(De.preventDefault(),(at=ee.current)==null||at.focus(),H&&m){G(cW(m)),a==null||a(cW(m));break}G(l),a==null||a(l);break}case"End":{if(De.preventDefault(),(yt=ee.current)==null||yt.focus(),H&&m){G(fW(m)),a==null||a(fW(m));break}G(c),a==null||a(c);break}}};return S.jsx(IEe,{value:{getStyles:ne},children:S.jsxs(_J,{...J,ref:No(t,Y),onKeyDownCapture:$e,onMouseDownCapture:()=>{var De;return(De=Y.current)==null?void 0:De.focus()},size:u,disabled:C,children:[S.jsx(wJ,{inverted:N,offset:0,filled:ae,marks:m,min:l,max:c,value:_e,disabled:C,containerProps:{ref:ye,onMouseEnter:E?()=>q(!0):void 0,onMouseLeave:E?()=>q(!1):void 0},children:S.jsx(q$,{max:c,min:l,value:_e,position:ae,dragging:he,label:pe,ref:ee,labelTransitionProps:v,labelAlwaysOn:b,thumbLabel:w,showLabelOnHover:E,isHovered:ie,disabled:C,...Q,children:T})}),S.jsx("input",{type:"hidden",name:p,value:_e,...F})]})})});CB.classes=SB;CB.displayName="@mantine/core/Slider";function GXe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const YXe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Kn(t,"slider-size"),"--slider-color":n?qi(n,e):void 0,"--slider-radius":i===void 0?void 0:Ci(i),"--slider-thumb-size":r!==void 0?Ke(r):"calc(var(--slider-size) * 2)"}}),KXe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},mC=At((e,t)=>{const n=Je("RangeSlider",KXe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:v,label:b,labelTransitionProps:w,labelAlwaysOn:E,thumbFromLabel:T,thumbToLabel:C,showLabelOnHover:I,thumbChildren:R,disabled:N,unstyled:O,scale:L,inverted:B,className:F,style:H,vars:Q,hiddenInputProps:J,restrictToMarks:ne,thumbProps:Z,...ie}=n,q=Zt({name:"Slider",props:n,classes:SB,classNames:r,className:F,styles:i,style:H,vars:Q,varsResolver:YXe,unstyled:O}),{dir:U}=b1(),[G,V]=P.useState(-1),[Y,ee]=P.useState(!1),[ae,_e]=Yo({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),pe=P.useRef(ae),Te=P.useRef([]),Le=P.useRef(void 0),ye=[W$({value:ae[0],min:l,max:c}),W$({value:ae[1],min:l,max:c})],he=p??REe(h),$e=dt=>{_e(dt),pe.current=dt};P.useEffect(()=>{Array.isArray(s)&&(pe.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const De=(dt,wt,ke)=>{if(wt===-1)return;const Oe=[...pe.current];if(ne&&v){const ht=Yq(dt,v.map(Tr=>Tr.value)),Lt=Oe[wt];Oe[wt]=ht;const Ft=wt===0?1:0,dn=fW(v),Nn=cW(v);ht===dn&&Oe[Ft]===dn||ht===Nn&&Oe[Ft]===Nn?Oe[wt]=Lt:ht===Oe[Ft]&&(Lt>Oe[Ft]?Oe[Ft]=gw(ht,v):Oe[Ft]=mw(ht,v))}else Oe[wt]=dt,wt===0&&(dt>Oe[1]-(f-1e-9)&&(Oe[1]=Math.min(dt+f,c)),dt>(c-(f-1e-9)||l)&&(Oe[wt]=pe.current[wt]),Oe[1]-dt>d&&(Oe[1]=dt+d)),wt===1&&(dt<Oe[0]+f&&(Oe[0]=Math.max(dt-f,l)),dt<Oe[0]+f&&(Oe[wt]=pe.current[wt]),dt-Oe[0]>d&&(Oe[0]=dt-d));if(Oe[0]=Kd(Oe[0],he),Oe[1]=Kd(Oe[1],he),Oe[0]>Oe[1]){const ht=Oe[0];Oe[0]=Oe[1],Oe[1]=ht}$e(Oe),ke&&(a==null||a(pe.current))},tt=dt=>{if(!N){const wt=lW({value:dt,min:l,max:c,step:h,precision:he});De(wt,Le.current,!1)}},{ref:it,active:Me}=u_e(({x:dt})=>tt(dt),{onScrubEnd:()=>a==null?void 0:a(pe.current)},U);function Ge(dt){Le.current=dt}const at=dt=>{it.current.focus();const wt=it.current.getBoundingClientRect(),ke=GXe(dt.nativeEvent),Oe=lW({value:ke-wt.left,max:c,min:l,step:h,containerWidth:wt.width}),ht=Math.abs(ae[0]-Oe)>Math.abs(ae[1]-Oe)?1:0,Lt=U==="ltr"?ht:ht===1?0:1;Le.current=Lt},yt=()=>G!==1&&G!==0?(V(0),0):G,Tt=dt=>{if(!N)switch(dt.key){case"ArrowUp":{dt.preventDefault();const wt=yt();Te.current[wt].focus();const ke=ne&&v?mw(pe.current[wt],v):Math.min(Math.max(pe.current[wt]+h,l),c);De(Kd(ke,he),wt,!0);break}case"ArrowRight":{dt.preventDefault();const wt=yt();Te.current[wt].focus();const ke=ne&&v?(U==="rtl"?gw:mw)(pe.current[wt],v):Math.min(Math.max(U==="rtl"?pe.current[wt]-h:pe.current[wt]+h,l),c);De(Kd(ke,he),wt,!0);break}case"ArrowDown":{dt.preventDefault();const wt=yt();Te.current[wt].focus();const ke=ne&&v?gw(pe.current[wt],v):Math.min(Math.max(pe.current[wt]-h,l),c);De(Kd(ke,he),wt,!0);break}case"ArrowLeft":{dt.preventDefault();const wt=yt();Te.current[wt].focus();const ke=ne&&v?(U==="rtl"?mw:gw)(pe.current[wt],v):Math.min(Math.max(U==="rtl"?pe.current[wt]+h:pe.current[wt]-h,l),c);De(Kd(ke,he),wt,!0);break}}},Ot={max:c,min:l,size:u,labelTransitionProps:w,labelAlwaysOn:E,onBlur:()=>V(-1)},qe=Array.isArray(R);return S.jsx(IEe,{value:{getStyles:q},children:S.jsxs(_J,{...ie,size:u,ref:t,disabled:N,children:[S.jsxs(wJ,{offset:ye[0],marksOffset:ae[0],filled:ye[1]-ye[0],marks:v,inverted:B,min:l,max:c,value:ae[1],disabled:N,containerProps:{ref:it,onMouseEnter:I?()=>ee(!0):void 0,onMouseLeave:I?()=>ee(!1):void 0,onTouchStartCapture:at,onTouchEndCapture:()=>{Le.current=-1},onMouseDownCapture:at,onMouseUpCapture:()=>{Le.current=-1},onKeyDownCapture:Tt},children:[S.jsx(q$,{...Ot,value:L(ae[0]),position:ye[0],dragging:Me,label:typeof b=="function"?b(Kd(L(ae[0]),he)):b,ref:dt=>{Te.current[0]=dt},thumbLabel:T,onMouseDown:()=>Ge(0),onFocus:()=>V(0),showLabelOnHover:I,isHovered:Y,disabled:N,...Z==null?void 0:Z(0),children:qe?R[0]:R}),S.jsx(q$,{...Ot,thumbLabel:C,value:L(ae[1]),position:ye[1],dragging:Me,label:typeof b=="function"?b(Kd(L(ae[1]),he)):b,ref:dt=>{Te.current[1]=dt},onMouseDown:()=>Ge(1),onFocus:()=>V(1),showLabelOnHover:I,isHovered:Y,disabled:N,...Z==null?void 0:Z(1),children:qe?R[1]:R})]}),S.jsx("input",{type:"hidden",name:`${g}_from`,value:ae[0],...J}),S.jsx("input",{type:"hidden",name:`${g}_to`,value:ae[1],...J})]})})});mC.classes=SB;mC.displayName="@mantine/core/RangeSlider";const XXe={},rd=At((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Je("Space",XXe,e);return S.jsx(je,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});rd.displayName="@mantine/core/Space";var DEe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const QXe={maxHeight:100,initialState:!1},JXe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),EJ=At((e,t)=>{const n=Je("Spoiler",QXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,expanded:v,onExpandedChange:b,...w}=n,E=Zt({name:"Spoiler",classes:DEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JXe}),T=yl(g),C=`${T}-region`,[I,R]=Yo({value:v,defaultValue:l,finalValue:!1,onChange:b}),{ref:N,height:O}=Nze(),L=I?f:d,B=L!==null&&c<O;return S.jsxs(je,{...E("root"),id:T,ref:t,"data-has-spoiler":B||void 0,...w,children:[B&&S.jsx(DE,{component:"button",type:"button",ref:p,onClick:()=>R(!I),"aria-expanded":I,"aria-controls":C,...E("control"),children:L}),S.jsx("div",{...E("content",{style:{maxHeight:I?O?Ke(O):void 0:Ke(c)}}),"data-reduce-motion":!0,role:"region",id:C,children:S.jsx("div",{ref:N,children:h})})]})});EJ.classes=DEe;EJ.displayName="@mantine/core/Spoiler";var NEe={root:"m_6d731127"};const ZXe={gap:"md",align:"stretch",justify:"flex-start"},eQe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Go(t),"--stack-align":n,"--stack-justify":r}}),uo=At((e,t)=>{const n=Je("Stack",ZXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=Zt({name:"Stack",props:n,classes:NEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eQe});return S.jsx(je,{ref:t,...p("root"),variant:d,...h})});uo.classes=NEe;uo.displayName="@mantine/core/Stack";const PEe=P.createContext(null),tQe=PEe.Provider,nQe=()=>P.useContext(PEe),rQe={},TJ=At((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Je("SwitchGroup",rQe,e),[c,f]=Yo({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return S.jsx(tQe,{value:{value:c,onChange:d,size:s},children:S.jsx(Ki.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:S.jsx(qQ,{role:"group",children:a})})})});TJ.classes=Ki.Wrapper.classes;TJ.displayName="@mantine/core/SwitchGroup";var OEe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const iQe={labelPosition:"right"},sQe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Ci(t),"--switch-height":Kn(r,"switch-height"),"--switch-width":Kn(r,"switch-width"),"--switch-thumb-size":Kn(r,"switch-thumb-size"),"--switch-label-font-size":Kn(r,"switch-label-font-size"),"--switch-track-label-padding":Kn(r,"switch-track-label-padding"),"--switch-color":n?qi(n,e):void 0}}),Ow=At((e,t)=>{const n=Je("Switch",iQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:T,description:C,error:I,disabled:R,variant:N,rootRef:O,mod:L,...B}=n,F=nQe(),H=p||(F==null?void 0:F.size),Q=Zt({name:"Switch",props:n,classes:OEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sQe}),{styleProps:J,rest:ne}=kE(B),Z=yl(h),ie=F?{checked:F.value.includes(ne.value),onChange:F.onChange}:{},[q,U]=Yo({value:ie.checked??b,defaultValue:w,finalValue:!1});return S.jsxs(uB,{...Q("root"),__staticSelector:"Switch",__stylesApiProps:n,id:Z,size:H,labelPosition:T,label:c,description:C,error:I,disabled:R,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":ie.checked||b||void 0,variant:N,ref:O,mod:L,...J,...g,children:[S.jsx("input",{...ne,disabled:R,checked:q,"data-checked":ie.checked||b||void 0,onChange:G=>{var V;F?(V=ie.onChange)==null||V.call(ie,G):E==null||E(G),U(G.currentTarget.checked)},id:Z,ref:t,type:"checkbox",role:"switch",...Q("input")}),S.jsxs(je,{"aria-hidden":"true",mod:{error:I,"label-position":T,"without-labels":!d&&!f},...Q("track"),children:[S.jsx(je,{component:"span",mod:"reduce-motion",...Q("thumb"),children:v}),S.jsx("span",{...Q("trackLabel"),children:q?d:f})]})]})});Ow.classes={...OEe,...Bwe};Ow.displayName="@mantine/core/Switch";Ow.Group=TJ;const[oQe,aQe]=Iu("Table component was not found in the tree");var GP={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function uQe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function PE(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=At((i,s)=>{const o=Je(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=aQe();return S.jsx(je,{component:e,ref:s,...uQe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=GP,r}const dW=PE("th",{columnBorder:!0}),MEe=PE("td",{columnBorder:!0}),XM=PE("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),LEe=PE("thead",{stickyHeader:!0}),$Ee=PE("tbody"),FEe=PE("tfoot"),BEe=PE("caption",{captionSide:!0});function SJ({data:e}){return S.jsxs(S.Fragment,{children:[e.caption&&S.jsx(BEe,{children:e.caption}),e.head&&S.jsx(LEe,{children:S.jsx(XM,{children:e.head.map((t,n)=>S.jsx(dW,{children:t},n))})}),e.body&&S.jsx($Ee,{children:e.body.map((t,n)=>S.jsx(XM,{children:t.map((r,i)=>S.jsx(MEe,{children:r},i))},n))}),e.foot&&S.jsx(FEe,{children:S.jsx(XM,{children:e.foot.map((t,n)=>S.jsx(dW,{children:t},n))})})]})}SJ.displayName="@mantine/core/TableDataRenderer";const lQe={type:"scrollarea"},cQe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Ke(t),"--table-overflow":n==="native"?"auto":void 0}}),CJ=At((e,t)=>{const n=Je("TableScrollContainer",lQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=Zt({name:"TableScrollContainer",classes:GP,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cQe,rootSelector:"scrollContainer"});return S.jsx(je,{component:f==="scrollarea"?Yy:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:S.jsx("div",{...h("scrollContainerInner"),children:l})})});CJ.classes=GP;CJ.displayName="@mantine/core/TableScrollContainer";const fQe={withRowBorders:!0,verticalSpacing:7},dQe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Go(r),"--table-vertical-spacing":Go(i),"--table-border-color":s?qi(s,e):void 0,"--table-striped-color":u&&o?qi(o,e):void 0,"--table-highlight-on-hover-color":l&&a?qi(a,e):void 0,"--table-sticky-header-offset":f?Ke(c):void 0}}),En=At((e,t)=>{const n=Je("Table",fQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:v,withTableBorder:b,borderColor:w,layout:E,variant:T,data:C,children:I,stickyHeader:R,stickyHeaderOffset:N,mod:O,tabularNums:L,...B}=n,F=Zt({name:"Table",props:n,className:i,style:s,classes:GP,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:dQe});return S.jsx(oQe,{value:{getStyles:F,stickyHeader:R,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:v,captionSide:f||"bottom"},children:S.jsx(je,{component:"table",variant:T,ref:t,mod:[{"data-with-table-border":b,"data-tabular-nums":L},O],...F("table"),...B,children:I||!!C&&S.jsx(SJ,{data:C})})})});En.classes=GP;En.displayName="@mantine/core/Table";En.Td=MEe;En.Th=dW;En.Tr=XM;En.Thead=LEe;En.Tbody=$Ee;En.Tfoot=FEe;En.Caption=BEe;En.ScrollContainer=CJ;En.DataRenderer=SJ;const[hQe,AJ]=Iu("Tabs component was not found in the tree");var YP={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const pQe={},IJ=At((e,t)=>{const n=Je("TabsList",pQe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=AJ();return S.jsx(je,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});IJ.classes=YP;IJ.displayName="@mantine/core/TabsList";const mQe={},kJ=At((e,t)=>{const n=Je("TabsPanel",mQe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,keepMounted:c,...f}=n,d=AJ(),h=d.value===s,p=d.keepMounted||c||h?r:null;return S.jsx(je,{...f,...d.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,h?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},l],role:"tabpanel",id:d.getPanelId(s),"aria-labelledby":d.getTabId(s),children:p})});kJ.classes=YP;kJ.displayName="@mantine/core/TabsPanel";const gQe={},RJ=At((e,t)=>{const n=Je("TabsTab",gQe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,tabIndex:v,...b}=n,w=Po(),{dir:E}=b1(),T=AJ(),C=a===T.value,I=N=>{T.onChange(T.allowTabDeactivation&&a===T.value?null:a),u==null||u(N)},R={classNames:h,styles:p,props:n};return S.jsxs(ud,{...b,...T.getStyles("tab",{className:r,style:d,variant:T.variant,...R}),disabled:c,unstyled:T.unstyled,variant:T.variant,mod:[{active:C,disabled:c,orientation:T.orientation,inverted:T.inverted,placement:T.orientation==="vertical"&&T.placement},g],ref:t,role:"tab",id:T.getTabId(a),"aria-selected":C,tabIndex:v||C||T.value===null?0:-1,"aria-controls":T.getPanelId(a),onClick:I,__vars:{"--tabs-color":f?qi(f,w):void 0},onKeyDown:BX({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:T.activateTabWithKeyboard,loop:T.loop,orientation:T.orientation||"horizontal",dir:E,onKeyDown:l}),children:[o&&S.jsx("span",{...T.getStyles("tabSection",R),"data-position":"left",children:o}),i&&S.jsx("span",{...T.getStyles("tabLabel",R),children:i}),s&&S.jsx("span",{...T.getStyles("tabSection",R),"data-position":"right",children:s})]})});RJ.classes=YP;RJ.displayName="@mantine/core/TabsTab";const $le="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",yQe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},vQe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Ci(t),"--tabs-color":qi(n,e),"--tabs-text-color":_A(r,e)?cx({color:n,theme:e,autoContrast:r}):void 0}}),Vr=At((e,t)=>{const n=Je("Tabs",yQe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:v,classNames:b,styles:w,unstyled:E,className:T,style:C,vars:I,autoContrast:R,mod:N,...O}=n,L=yl(l),[B,F]=Yo({value:i,defaultValue:r,finalValue:null,onChange:s}),H=Zt({name:"Tabs",props:n,classes:YP,className:T,style:C,classNames:b,styles:w,unstyled:E,vars:I,varsResolver:vQe});return S.jsx(hQe,{value:{placement:g,value:B,orientation:o,id:L,loop:u,activateTabWithKeyboard:c,getTabId:L$(`${L}-tab`,$le),getPanelId:L$(`${L}-panel`,$le),onChange:F,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:v,unstyled:E,getStyles:H},children:S.jsx(je,{ref:t,id:L,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},N],...H("root"),...O,children:a})})});Vr.classes=YP;Vr.displayName="@mantine/core/Tabs";Vr.Tab=RJ;Vr.Panel=kJ;Vr.List=IJ;const bQe={},Ey=At((e,t)=>{const n=Je("TextInput",bQe,e);return S.jsx(xh,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Ey.classes=xh.classes;Ey.displayName="@mantine/core/TextInput";const xQe=["h1","h2","h3","h4","h5","h6"],_Qe=["xs","sm","md","lg","xl"];function wQe(e,t){const n=t!==void 0?t:`h${e}`;return xQe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:_Qe.includes(n)?{fontSize:`var(--mantine-font-size-${n})`,fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}:{fontSize:Ke(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var jEe={root:"m_8a5d1357"};const EQe={order:1},TQe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=wQe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},oo=At((e,t)=>{const n=Je("Title",EQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=Zt({name:"Title",props:n,classes:jEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:TQe});return[1,2,3,4,5,6].includes(u)?S.jsx(je,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});oo.classes=jEe;oo.displayName="@mantine/core/Title";function SQe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function CQe(e){return P.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function AQe(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const IQe=()=>SQe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),OE=IQe(),kQe=(e=OE)=>CQe(e);function MA(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=AQe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function RQe(e,t=OE){const n=e.id||N2();return MA(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function UEe(e,t=OE){return MA(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function DQe(e,t=OE){return MA(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function NQe(e=OE){MA(e,()=>[])}function PQe(e=OE){MA(e,t=>t.slice(0,e.getState().limit))}const ME={show:RQe,hide:UEe,update:DQe,clean:NQe,cleanQueue:PQe,updateState:MA};function hW(){return hW=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hW.apply(null,arguments)}function zEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function pW(e,t){return pW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},pW(e,t)}function VEe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,pW(e,t)}var pz={exports:{}},mz,Fle;function OQe(){if(Fle)return mz;Fle=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return mz=e,mz}var gz,Ble;function MQe(){if(Ble)return gz;Ble=1;var e=OQe();function t(){}function n(){}return n.resetWarningCache=t,gz=function(){function r(o,a,u,l,c,f){if(f!==e){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return s.PropTypes=s,s},gz}var jle;function LQe(){return jle||(jle=1,pz.exports=MQe()()),pz.exports}var $Qe=LQe();const Ule=yh($Qe),zle={disabled:!1},G$=ci.createContext(null);var FQe=function(t){return t.scrollTop},jR="unmounted",V_="exited",H_="entering",r2="entered",mW="exiting",E1=function(e){VEe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=V_,s.appearStatus=H_):u=r2:r.unmountOnExit||r.mountOnEnter?u=jR:u=V_,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===jR?{status:V_}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==H_&&o!==r2&&(s=H_):(o===H_||o===r2)&&(s=mW)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===H_){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:BR.findDOMNode(this);o&&FQe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===V_&&this.setState({status:jR})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[BR.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||zle.disabled){this.safeSetState({status:r2},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:H_},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:r2},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:BR.findDOMNode(this);if(!s||zle.disabled){this.safeSetState({status:V_},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:mW},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:V_},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:BR.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===jR)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=zEe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ci.createElement(G$.Provider,{value:null},typeof o=="function"?o(i,a):ci.cloneElement(ci.Children.only(o),a))},t}(ci.Component);E1.contextType=G$;E1.propTypes={};function DS(){}E1.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:DS,onEntering:DS,onEntered:DS,onExit:DS,onExiting:DS,onExited:DS};E1.UNMOUNTED=jR;E1.EXITED=V_;E1.ENTERING=H_;E1.ENTERED=r2;E1.EXITING=mW;function BQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DJ(e,t){var n=function(s){return t&&P.isValidElement(s)?t(s):s},r=Object.create(null);return e&&P.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function jQe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function yw(e,t,n){return n[t]!=null?n[t]:e.props[t]}function UQe(e,t){return DJ(e.children,function(n){return P.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:yw(n,"appear",e),enter:yw(n,"enter",e),exit:yw(n,"exit",e)})})}function zQe(e,t,n){var r=DJ(e.children),i=jQe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(P.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=P.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:yw(o,"exit",e),enter:yw(o,"enter",e)}):!u&&a&&!c?i[s]=P.cloneElement(o,{in:!1}):u&&a&&P.isValidElement(l)&&(i[s]=P.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:yw(o,"exit",e),enter:yw(o,"enter",e)}))}}),i}var VQe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},HQe={component:"div",childFactory:function(t){return t}},Pv=function(e){VEe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(BQe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?UQe(i,a):zQe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=DJ(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=hW({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=zEe(i,["component","childFactory"]),u=this.state.contextValue,l=VQe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?ci.createElement(G$.Provider,{value:u},l):ci.createElement(G$.Provider,{value:u},ci.createElement(s,a,l))},t}(ci.Component);Pv.propTypes={};Pv.defaultProps=HQe;const HEe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function qQe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),HEe.reduce((n,r)=>(n[r]=[],n),{}))}const Vle={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},WQe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function GQe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Vle[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:WQe[o]},l={opacity:0,maxHeight:0,transform:Vle[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function YQe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const qEe=P.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=YQe(n,e.autoClose),l=P.useRef(-1),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return P.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),P.useEffect(()=>(d(),c),[u]),S.jsx(fJ,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});qEe.displayName="@mantine/notifications/NotificationContainer";var WEe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const KQe=E1,XQe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:ff("overlay"),store:OE,withinPortal:!0},QQe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Ke(n)}}),T1=At((e,t)=>{const n=Je("Notifications",XQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:v,withinPortal:b,...w}=n,E=Po(),T=kQe(g),C=Ize(),I=Y8(),R=P.useRef({}),N=P.useRef(0),L=(E.respectReducedMotion?I:!1)?1:f,B=Zt({name:"Notifications",classes:WEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QQe});P.useEffect(()=>{g==null||g.updateState(Q=>({...Q,limit:p||5,defaultPosition:l}))},[p,l]),P0(()=>{T.notifications.length>N.current&&setTimeout(()=>C(),0),N.current=T.notifications.length},[T.notifications]);const F=qQe(T.notifications,l),H=HEe.reduce((Q,J)=>(Q[J]=F[J].map(({style:ne,...Z})=>S.jsx(KQe,{timeout:L,onEnter:()=>R.current[Z.id].offsetHeight,nodeRef:{current:R.current[Z.id]},children:ie=>S.jsx(qEe,{ref:q=>{R.current[Z.id]=q},data:Z,onHide:q=>UEe(q,g),autoClose:c,...B("notification",{style:{...GQe({state:ie,position:J,transitionDuration:L,maxHeight:h}),...ne}})})},Z.id)),Q),{});return S.jsxs(fx,{withinPortal:b,...v,children:[S.jsx(je,{...B("root"),"data-position":"top-center",ref:t,...w,children:S.jsx(Pv,{children:H["top-center"]})}),S.jsx(je,{...B("root"),"data-position":"top-left",...w,children:S.jsx(Pv,{children:H["top-left"]})}),S.jsx(je,{...B("root",{className:uC.classNames.fullWidth}),"data-position":"top-right",...w,children:S.jsx(Pv,{children:H["top-right"]})}),S.jsx(je,{...B("root",{className:uC.classNames.fullWidth}),"data-position":"bottom-right",...w,children:S.jsx(Pv,{children:H["bottom-right"]})}),S.jsx(je,{...B("root"),"data-position":"bottom-left",...w,children:S.jsx(Pv,{children:H["bottom-left"]})}),S.jsx(je,{...B("root"),"data-position":"bottom-center",...w,children:S.jsx(Pv,{children:H["bottom-center"]})})]})});T1.classes=WEe;T1.displayName="@mantine/notifications/Notifications";T1.show=ME.show;T1.hide=ME.hide;T1.update=ME.update;T1.clean=ME.clean;T1.cleanQueue=ME.cleanQueue;T1.updateState=ME.updateState;const GEe=P.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Oo=()=>P.useContext(GEe);function JQe({children:e}){const[t,n]=P.useState(void 0),r=P.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return S.jsx(GEe.Provider,{value:r,children:e})}var Wk={},Hle;function ZQe(){if(Hle)return Wk;Hle=1,Object.defineProperty(Wk,"__esModule",{value:!0}),Wk.parse=o,Wk.serialize=l;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,i=Object.prototype.toString,s=(()=>{const d=function(){};return d.prototype=Object.create(null),d})();function o(d,h){const p=new s,m=d.length;if(m<2)return p;const g=(h==null?void 0:h.decode)||c;let v=0;do{const b=d.indexOf("=",v);if(b===-1)break;const w=d.indexOf(";",v),E=w===-1?m:w;if(b>E){v=d.lastIndexOf(";",b-1)+1;continue}const T=a(d,v,b),C=u(d,b,T),I=d.slice(T,C);if(p[I]===void 0){let R=a(d,b+1,E),N=u(d,E,R);const O=g(d.slice(R,N));p[I]=O}v=E+1}while(v<m);return p}function a(d,h,p){do{const m=d.charCodeAt(h);if(m!==32&&m!==9)return h}while(++h<p);return p}function u(d,h,p){for(;h>p;){const m=d.charCodeAt(--h);if(m!==32&&m!==9)return h+1}return p}function l(d,h,p){const m=(p==null?void 0:p.encode)||encodeURIComponent;if(!e.test(d))throw new TypeError(`argument name is invalid: ${d}`);const g=m(h);if(!t.test(g))throw new TypeError(`argument val is invalid: ${h}`);let v=d+"="+g;if(!p)return v;if(p.maxAge!==void 0){if(!Number.isInteger(p.maxAge))throw new TypeError(`option maxAge is invalid: ${p.maxAge}`);v+="; Max-Age="+p.maxAge}if(p.domain){if(!n.test(p.domain))throw new TypeError(`option domain is invalid: ${p.domain}`);v+="; Domain="+p.domain}if(p.path){if(!r.test(p.path))throw new TypeError(`option path is invalid: ${p.path}`);v+="; Path="+p.path}if(p.expires){if(!f(p.expires)||!Number.isFinite(p.expires.valueOf()))throw new TypeError(`option expires is invalid: ${p.expires}`);v+="; Expires="+p.expires.toUTCString()}if(p.httpOnly&&(v+="; HttpOnly"),p.secure&&(v+="; Secure"),p.partitioned&&(v+="; Partitioned"),p.priority)switch(typeof p.priority=="string"?p.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${p.priority}`)}if(p.sameSite)switch(typeof p.sameSite=="string"?p.sameSite.toLowerCase():p.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${p.sameSite}`)}return v}function c(d){if(d.indexOf("%")===-1)return d;try{return decodeURIComponent(d)}catch{return d}}function f(d){return i.call(d)==="[object Date]"}return Wk}ZQe();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qle="popstate";function eJe(e={}){function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return gW("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:xN(i)}return nJe(t,n,null,e)}function Ls(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function uh(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tJe(){return Math.random().toString(36).substring(2,10)}function Wle(e,t){return{usr:e.state,key:e.key,idx:t}}function gW(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?LA(t):t,state:n,key:t&&t.key||r||tJe()}}function xN({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function LA(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function nJe(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a="POP",u=null,l=c();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function c(){return(o.state||{idx:null}).idx}function f(){a="POP";let g=c(),v=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:v})}function d(g,v){a="PUSH";let b=gW(m.location,g,v);l=c()+1;let w=Wle(b,l),E=m.createHref(b);try{o.pushState(w,"",E)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;i.location.assign(E)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,v){a="REPLACE";let b=gW(m.location,g,v);l=c();let w=Wle(b,l),E=m.createHref(b);o.replaceState(w,"",E),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let v=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:xN(g);return b=b.replace(/ $/,"%20"),Ls(v,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,v)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(qle,f),u=g,()=>{i.removeEventListener(qle,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}function YEe(e,t,n="/"){return rJe(e,t,n,!1)}function rJe(e,t,n,r){let i=typeof t=="string"?LA(t):t,s=Eb(i.pathname||"/",n);if(s==null)return null;let o=KEe(e);iJe(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=mJe(s);a=hJe(o[u],l,r)}return a}function KEe(e,t=[],n=[],r=""){let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Ls(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let l=My([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(Ls(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${l}".`),KEe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:fJe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of XEe(s.path))i(s,o,u)}),t}function XEe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=XEe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function iJe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:dJe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var sJe=/^:[\w-]+$/,oJe=3,aJe=2,uJe=1,lJe=10,cJe=-2,Gle=e=>e==="*";function fJe(e,t){let n=e.split("/"),r=n.length;return n.some(Gle)&&(r+=cJe),t&&(r+=aJe),n.filter(i=>!Gle(i)).reduce((i,s)=>i+(sJe.test(s)?oJe:s===""?uJe:lJe),r)}function dJe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function hJe(e,t,n=!1){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",f=Y$({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=Y$({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:My([s,f.pathname]),pathnameBase:bJe(My([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=My([s,f.pathnameBase]))}return o}function Y$(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=pJe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:c,isOptional:f},d)=>{if(c==="*"){let p=a[d]||"";o=s.slice(0,s.length-p.length).replace(/(.)\/+$/,"$1")}const h=a[d];return f&&!h?l[c]=void 0:l[c]=(h||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function pJe(e,t=!1,n=!0){uh(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function mJe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return uh(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Eb(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function gJe(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?LA(e):e;return{pathname:n?n.startsWith("/")?n:yJe(n,t):t,search:xJe(r),hash:_Je(i)}}function yJe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function yz(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vJe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function NJ(e){let t=vJe(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function PJ(e,t,n,r=!1){let i;typeof e=="string"?i=LA(e):(i={...e},Ls(!i.pathname||!i.pathname.includes("?"),yz("?","pathname","search",i)),Ls(!i.pathname||!i.pathname.includes("#"),yz("#","pathname","hash",i)),Ls(!i.search||!i.search.includes("#"),yz("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=gJe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}var My=e=>e.join("/").replace(/\/\/+/g,"/"),bJe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),xJe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,_Je=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wJe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var QEe=["POST","PUT","PATCH","DELETE"];new Set(QEe);var EJe=["GET",...QEe];new Set(EJe);var $A=P.createContext(null);$A.displayName="DataRouter";var AB=P.createContext(null);AB.displayName="DataRouterState";var JEe=P.createContext({isTransitioning:!1});JEe.displayName="ViewTransition";var TJe=P.createContext(new Map);TJe.displayName="Fetchers";var SJe=P.createContext(null);SJe.displayName="Await";var Jp=P.createContext(null);Jp.displayName="Navigation";var KP=P.createContext(null);KP.displayName="Location";var wh=P.createContext({outlet:null,matches:[],isDataRoute:!1});wh.displayName="Route";var OJ=P.createContext(null);OJ.displayName="RouteError";function MJ(e,{relative:t}={}){Ls(FA(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=P.useContext(Jp),{hash:i,pathname:s,search:o}=XP(e,{relative:t}),a=s;return n!=="/"&&(a=s==="/"?n:My([n,s])),r.createHref({pathname:a,search:o,hash:i})}function FA(){return P.useContext(KP)!=null}function Eh(){return Ls(FA(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(KP).location}var ZEe="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eTe(e){P.useContext(Jp).static||P.useLayoutEffect(e)}function ig(){let{isDataRoute:e}=P.useContext(wh);return e?BJe():CJe()}function CJe(){Ls(FA(),"useNavigate() may be used only in the context of a <Router> component.");let e=P.useContext($A),{basename:t,navigator:n}=P.useContext(Jp),{matches:r}=P.useContext(wh),{pathname:i}=Eh(),s=JSON.stringify(NJ(r)),o=P.useRef(!1);return eTe(()=>{o.current=!0}),P.useCallback((u,l={})=>{if(uh(o.current,ZEe),!o.current)return;if(typeof u=="number"){n.go(u);return}let c=PJ(u,JSON.parse(s),i,l.relative==="path");e==null&&t!=="/"&&(c.pathname=c.pathname==="/"?t:My([t,c.pathname])),(l.replace?n.replace:n.push)(c,l.state,l)},[t,n,s,i,e])}var AJe=P.createContext(null);function IJe(e){let t=P.useContext(wh).outlet;return t&&P.createElement(AJe.Provider,{value:e},t)}function L0(){let{matches:e}=P.useContext(wh),t=e[e.length-1];return t?t.params:{}}function XP(e,{relative:t}={}){let{matches:n}=P.useContext(wh),{pathname:r}=Eh(),i=JSON.stringify(NJ(n));return P.useMemo(()=>PJ(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function tTe(e,t){return nTe(e,t)}function nTe(e,t,n,r){var v;Ls(FA(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=P.useContext(Jp),{matches:s}=P.useContext(wh),o=s[s.length-1],a=o?o.params:{},u=o?o.pathname:"/",l=o?o.pathnameBase:"/",c=o&&o.route;{let b=c&&c.path||"";rTe(u,!c||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=Eh(),d;if(t){let b=typeof t=="string"?LA(t):t;Ls(l==="/"||((v=b.pathname)==null?void 0:v.startsWith(l)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${l}" but pathname "${b.pathname}" was given in the \`location\` prop.`),d=b}else d=f;let h=d.pathname||"/",p=h;if(l!=="/"){let b=l.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=YEe(e,{pathname:p});uh(c||m!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),uh(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=PJe(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:My([l,i.encodeLocation?i.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:My([l,i.encodeLocation?i.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,n,r);return t&&g?P.createElement(KP.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},g):g}function kJe(){let e=FJe(),t=wJe(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},s={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:s},"ErrorBoundary")," or"," ",P.createElement("code",{style:s},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:i},n):null,o)}var RJe=P.createElement(kJe,null),DJe=class extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?P.createElement(wh.Provider,{value:this.props.routeContext},P.createElement(OJ.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function NJe({routeContext:e,match:t,children:n}){let r=P.useContext($A);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),P.createElement(wh.Provider,{value:e},n)}function PJe(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,s=n==null?void 0:n.errors;if(s!=null){let u=i.findIndex(l=>l.route.id&&(s==null?void 0:s[l.route.id])!==void 0);Ls(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),i=i.slice(0,Math.min(i.length,u+1))}let o=!1,a=-1;if(n)for(let u=0;u<i.length;u++){let l=i[u];if((l.route.HydrateFallback||l.route.hydrateFallbackElement)&&(a=u),l.route.id){let{loaderData:c,errors:f}=n,d=l.route.loader&&!c.hasOwnProperty(l.route.id)&&(!f||f[l.route.id]===void 0);if(l.route.lazy||d){o=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((u,l,c)=>{let f,d=!1,h=null,p=null;n&&(f=s&&l.route.id?s[l.route.id]:void 0,h=l.route.errorElement||RJe,o&&(a<0&&c===0?(rTe("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):a===c&&(d=!0,p=l.route.hydrateFallbackElement||null)));let m=t.concat(i.slice(0,c+1)),g=()=>{let v;return f?v=h:d?v=p:l.route.Component?v=P.createElement(l.route.Component,null):l.route.element?v=l.route.element:v=u,P.createElement(NJe,{match:l,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(l.route.ErrorBoundary||l.route.errorElement||c===0)?P.createElement(DJe,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}function LJ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function OJe(e){let t=P.useContext($A);return Ls(t,LJ(e)),t}function MJe(e){let t=P.useContext(AB);return Ls(t,LJ(e)),t}function LJe(e){let t=P.useContext(wh);return Ls(t,LJ(e)),t}function $J(e){let t=LJe(e),n=t.matches[t.matches.length-1];return Ls(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function $Je(){return $J("useRouteId")}function FJe(){var r;let e=P.useContext(OJ),t=MJe("useRouteError"),n=$J("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function BJe(){let{router:e}=OJe("useNavigate"),t=$J("useNavigate"),n=P.useRef(!1);return eTe(()=>{n.current=!0}),P.useCallback(async(i,s={})=>{uh(n.current,ZEe),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...s}))},[e,t])}var Yle={};function rTe(e,t,n){!t&&!Yle[e]&&(Yle[e]=!0,uh(!1,n))}P.memo(jJe);function jJe({routes:e,future:t,state:n}){return nTe(e,void 0,n,t)}function FJ({to:e,replace:t,state:n,relative:r}){Ls(FA(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=P.useContext(Jp);uh(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=P.useContext(wh),{pathname:o}=Eh(),a=ig(),u=PJ(e,NJ(s),o,r==="path"),l=JSON.stringify(u);return P.useEffect(()=>{a(JSON.parse(l),{replace:t,state:n,relative:r})},[a,l,r,t,n]),null}function UJe(e){return IJe(e.context)}function q_(e){Ls(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zJe({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:s=!1}){Ls(!FA(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=P.useMemo(()=>({basename:o,navigator:i,static:s,future:{}}),[o,i,s]);typeof n=="string"&&(n=LA(n));let{pathname:u="/",search:l="",hash:c="",state:f=null,key:d="default"}=n,h=P.useMemo(()=>{let p=Eb(u,o);return p==null?null:{location:{pathname:p,search:l,hash:c,state:f,key:d},navigationType:r}},[o,u,l,c,f,d,r]);return uh(h!=null,`<Router basename="${o}"> is not able to match the URL "${u}${l}${c}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:P.createElement(Jp.Provider,{value:a},P.createElement(KP.Provider,{children:t,value:h}))}function VJe({children:e,location:t}){return tTe(yW(e),t)}function yW(e,t=[]){let n=[];return P.Children.forEach(e,(r,i)=>{if(!P.isValidElement(r))return;let s=[...t,i];if(r.type===P.Fragment){n.push.apply(n,yW(r.props.children,s));return}Ls(r.type===q_,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ls(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=yW(r.props.children,s)),n.push(o)}),n}var QM="get",JM="application/x-www-form-urlencoded";function IB(e){return e!=null&&typeof e.tagName=="string"}function HJe(e){return IB(e)&&e.tagName.toLowerCase()==="button"}function qJe(e){return IB(e)&&e.tagName.toLowerCase()==="form"}function WJe(e){return IB(e)&&e.tagName.toLowerCase()==="input"}function GJe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function YJe(e,t){return e.button===0&&(!t||t==="_self")&&!GJe(e)}function vW(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function KJe(e,t){let n=vW(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}var F4=null;function XJe(){if(F4===null)try{new FormData(document.createElement("form"),0),F4=!1}catch{F4=!0}return F4}var QJe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vz(e){return e!=null&&!QJe.has(e)?(uh(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${JM}"`),null):e}function JJe(e,t){let n,r,i,s,o;if(qJe(e)){let a=e.getAttribute("action");r=a?Eb(a,t):null,n=e.getAttribute("method")||QM,i=vz(e.getAttribute("enctype"))||JM,s=new FormData(e)}else if(HJe(e)||WJe(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||a.getAttribute("action");if(r=u?Eb(u,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||QM,i=vz(e.getAttribute("formenctype"))||vz(a.getAttribute("enctype"))||JM,s=new FormData(a,e),!XJe()){let{name:l,type:c,value:f}=e;if(c==="image"){let d=l?`${l}.`:"";s.append(`${d}x`,"0"),s.append(`${d}y`,"0")}else l&&s.append(l,f)}}else{if(IB(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=QM,r=null,i=JM,o=e}return s&&i==="text/plain"&&(o=s,s=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:s,body:o}}function BJ(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function ZJe(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function eZe(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function tZe(e,t,n){let r=await Promise.all(e.map(async i=>{let s=t.routes[i.route.id];if(s){let o=await ZJe(s,n);return o.links?o.links():[]}return[]}));return sZe(r.flat(1).filter(eZe).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Kle(e,t,n,r,i,s){let o=(u,l)=>n[l]?u.route.id!==n[l].route.id:!0,a=(u,l)=>{var c;return n[l].pathname!==u.pathname||((c=n[l].route.path)==null?void 0:c.endsWith("*"))&&n[l].params["*"]!==u.params["*"]};return s==="assets"?t.filter((u,l)=>o(u,l)||a(u,l)):s==="data"?t.filter((u,l)=>{var f;let c=r.routes[u.route.id];if(!c||!c.hasLoader)return!1;if(o(u,l)||a(u,l))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function nZe(e,t){return rZe(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let i=[r.module];return r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function rZe(e){return[...new Set(e)]}function iZe(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function sZe(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let s=JSON.stringify(iZe(i));return n.has(s)||(n.add(s),r.push({key:s,link:i})),r},[])}function oZe(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function aZe(){let e=P.useContext($A);return BJ(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function uZe(){let e=P.useContext(AB);return BJ(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var jJ=P.createContext(void 0);jJ.displayName="FrameworkContext";function iTe(){let e=P.useContext(jJ);return BJ(e,"You must render this element inside a <HydratedRouter> element"),e}function lZe(e,t){let n=P.useContext(jJ),[r,i]=P.useState(!1),[s,o]=P.useState(!1),{onFocus:a,onBlur:u,onMouseEnter:l,onMouseLeave:c,onTouchStart:f}=t,d=P.useRef(null);P.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let m=v=>{v.forEach(b=>{o(b.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[e]),P.useEffect(()=>{if(r){let m=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{i(!0)},p=()=>{i(!1),o(!1)};return n?e!=="intent"?[s,d,{}]:[s,d,{onFocus:Gk(a,h),onBlur:Gk(u,p),onMouseEnter:Gk(l,h),onMouseLeave:Gk(c,p),onTouchStart:Gk(f,h)}]:[!1,d,{}]}function Gk(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function cZe({page:e,...t}){let{router:n}=aZe(),r=P.useMemo(()=>YEe(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?P.createElement(dZe,{page:e,matches:r,...t}):null}function fZe(e){let{manifest:t,routeModules:n}=iTe(),[r,i]=P.useState([]);return P.useEffect(()=>{let s=!1;return tZe(e,t,n).then(o=>{s||i(o)}),()=>{s=!0}},[e,t,n]),r}function dZe({page:e,matches:t,...n}){let r=Eh(),{manifest:i,routeModules:s}=iTe(),{loaderData:o,matches:a}=uZe(),u=P.useMemo(()=>Kle(e,t,a,i,r,"data"),[e,t,a,i,r]),l=P.useMemo(()=>Kle(e,t,a,i,r,"assets"),[e,t,a,i,r]),c=P.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,p=!1;if(t.forEach(g=>{var b;let v=i.routes[g.route.id];!v||!v.hasLoader||(!u.some(w=>w.route.id===g.route.id)&&g.route.id in o&&((b=s[g.route.id])!=null&&b.shouldRevalidate)||v.hasClientLoader?p=!0:h.add(g.route.id))}),h.size===0)return[];let m=oZe(e);return p&&h.size>0&&m.searchParams.set("_routes",t.filter(g=>h.has(g.route.id)).map(g=>g.route.id).join(",")),[m.pathname+m.search]},[o,r,i,u,t,e,s]),f=P.useMemo(()=>nZe(l,i),[l,i]),d=fZe(l);return P.createElement(P.Fragment,null,c.map(h=>P.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),f.map(h=>P.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),d.map(({key:h,link:p})=>P.createElement("link",{key:h,...p})))}function hZe(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var sTe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{sTe&&(window.__reactRouterVersion="7.1.3")}catch{}function pZe({basename:e,children:t,window:n}){let r=P.useRef();r.current==null&&(r.current=eJe({window:n,v5Compat:!0}));let i=r.current,[s,o]=P.useState({action:i.action,location:i.location}),a=P.useCallback(u=>{P.startTransition(()=>o(u))},[o]);return P.useLayoutEffect(()=>i.listen(a),[i,a]),P.createElement(zJe,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:i})}var oTe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aTe=P.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,viewTransition:f,...d},h){let{basename:p}=P.useContext(Jp),m=typeof l=="string"&&oTe.test(l),g,v=!1;if(typeof l=="string"&&m&&(g=l,sTe))try{let N=new URL(window.location.href),O=l.startsWith("//")?new URL(N.protocol+l):new URL(l),L=Eb(O.pathname,p);O.origin===N.origin&&L!=null?l=L+O.search+O.hash:v=!0}catch{uh(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=MJ(l,{relative:i}),[w,E,T]=lZe(r,d),C=vZe(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,viewTransition:f});function I(N){t&&t(N),N.defaultPrevented||C(N)}let R=P.createElement("a",{...d,...T,href:g||b,onClick:v||s?t:I,ref:hZe(h,E),target:u,"data-discover":!m&&n==="render"?"true":void 0});return w&&!m?P.createElement(P.Fragment,null,R,P.createElement(cZe,{page:b})):R});aTe.displayName="Link";var mZe=P.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:s,to:o,viewTransition:a,children:u,...l},c){let f=XP(o,{relative:l.relative}),d=Eh(),h=P.useContext(AB),{navigator:p,basename:m}=P.useContext(Jp),g=h!=null&&EZe(f)&&a===!0,v=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,b=d.pathname,w=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(b=b.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&m&&(w=Eb(w,m)||w);const E=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let T=b===v||!i&&b.startsWith(v)&&b.charAt(E)==="/",C=w!=null&&(w===v||!i&&w.startsWith(v)&&w.charAt(v.length)==="/"),I={isActive:T,isPending:C,isTransitioning:g},R=T?t:void 0,N;typeof r=="function"?N=r(I):N=[r,T?"active":null,C?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(I):s;return P.createElement(aTe,{...l,"aria-current":R,className:N,ref:c,style:O,to:o,viewTransition:a},typeof u=="function"?u(I):u)});mZe.displayName="NavLink";var gZe=P.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:s,method:o=QM,action:a,onSubmit:u,relative:l,preventScrollReset:c,viewTransition:f,...d},h)=>{let p=_Ze(),m=wZe(a,{relative:l}),g=o.toLowerCase()==="get"?"get":"post",v=typeof a=="string"&&oTe.test(a),b=w=>{if(u&&u(w),w.defaultPrevented)return;w.preventDefault();let E=w.nativeEvent.submitter,T=(E==null?void 0:E.getAttribute("formmethod"))||o;p(E||w.currentTarget,{fetcherKey:t,method:T,navigate:n,replace:i,state:s,relative:l,preventScrollReset:c,viewTransition:f})};return P.createElement("form",{ref:h,method:g,action:m,onSubmit:r?u:b,...d,"data-discover":!v&&e==="render"?"true":void 0})});gZe.displayName="Form";function yZe(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uTe(e){let t=P.useContext($A);return Ls(t,yZe(e)),t}function vZe(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:s,viewTransition:o}={}){let a=ig(),u=Eh(),l=XP(e,{relative:s});return P.useCallback(c=>{if(YJe(c,t)){c.preventDefault();let f=n!==void 0?n:xN(u)===xN(l);a(e,{replace:f,state:r,preventScrollReset:i,relative:s,viewTransition:o})}},[u,a,l,n,r,t,e,i,s,o])}function gx(e){uh(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=P.useRef(vW(e)),n=P.useRef(!1),r=Eh(),i=P.useMemo(()=>KJe(r.search,n.current?null:t.current),[r.search]),s=ig(),o=P.useCallback((a,u)=>{const l=vW(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}var bZe=0,xZe=()=>`__${String(++bZe)}__`;function _Ze(){let{router:e}=uTe("useSubmit"),{basename:t}=P.useContext(Jp),n=$Je();return P.useCallback(async(r,i={})=>{let{action:s,method:o,encType:a,formData:u,body:l}=JJe(r,t);if(i.navigate===!1){let c=i.fetcherKey||xZe();await e.fetch(c,n,i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,flushSync:i.flushSync})}else await e.navigate(i.action||s,{preventScrollReset:i.preventScrollReset,formData:u,body:l,formMethod:i.method||o,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function wZe(e,{relative:t}={}){let{basename:n}=P.useContext(Jp),r=P.useContext(wh);Ls(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),s={...XP(e||".",{relative:t})},o=Eh();if(e==null){s.search=o.search;let a=new URLSearchParams(s.search),u=a.getAll("index");if(u.some(c=>c==="")){a.delete("index"),u.filter(f=>f).forEach(f=>a.append("index",f));let c=a.toString();s.search=c?`?${c}`:""}}return(!e||e===".")&&i.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(s.pathname=s.pathname==="/"?n:My([n,s.pathname])),xN(s)}function EZe(e,t={}){let n=P.useContext(JEe);Ls(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=uTe("useViewTransitionState"),i=XP(e,{relative:t.relative});if(!n.isTransitioning)return!1;let s=Eb(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=Eb(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Y$(i.pathname,o)!=null||Y$(i.pathname,s)!=null}new TextEncoder;const UJ=P.createContext(null);UJ.displayName="@mantine/modals/ModalsContext";function TZe(){const e=P.useContext(UJ);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function SZe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=TZe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return S.jsxs(S.Fragment,{children:[l&&S.jsx(je,{mb:"md",children:l}),S.jsxs(Yr,{mt:l?0:"md",justify:"flex-end",...o,children:[S.jsx(yn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),S.jsx(yn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[CZe,zJ]=Hze("mantine-modals"),Xle=e=>{const t=e.modalId||N2();return zJ("openConfirmModal")({...e,modalId:t}),t};zJ("closeModal");zJ("closeAllModals");function Qle(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function AZe(e,t){var n;switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const r=e.modals.find(s=>s.id===t.modalId);if(!r)return e;Qle(r,t.canceled);const i=e.modals.filter(s=>s.id!==t.modalId);return{current:i[i.length-1]||e.current,modals:i}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(r=>{Qle(r,t.canceled)}),{current:e.current,modals:[]}):e;case"UPDATE":{const{modalId:r,newProps:i}=t,s=e.modals.map(a=>a.id!==r?a:a.type==="content"||a.type==="confirm"?{...a,props:{...a.props,...i}}:a.type==="context"?{...a,props:{...a.props,...i,innerProps:{...a.props.innerProps,...i.innerProps}}}:a),o=((n=e.current)==null?void 0:n.id)===r&&s.find(a=>a.id===r)||e.current;return{...e,modals:s,current:o}}default:return e}}function IZe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function kZe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=P.useReducer(AZe,{modals:[],current:null}),o=P.useRef(i);o.current=i;const a=P.useCallback(b=>{s({type:"CLOSE_ALL",canceled:b})},[o,s]),u=P.useCallback(({modalId:b,...w})=>{const E=b||N2();return s({type:"OPEN",modal:{id:E,type:"content",props:w}}),E},[s]),l=P.useCallback(({modalId:b,...w})=>{const E=b||N2();return s({type:"OPEN",modal:{id:E,type:"confirm",props:w}}),E},[s]),c=P.useCallback((b,{modalId:w,...E})=>{const T=w||N2();return s({type:"OPEN",modal:{id:T,type:"context",props:E,ctx:b}}),T},[s]),f=P.useCallback((b,w)=>{s({type:"CLOSE",modalId:b,canceled:w})},[o,s]),d=P.useCallback(({modalId:b,...w})=>{s({type:"UPDATE",modalId:b,newProps:w})},[s]),h=P.useCallback(({modalId:b,...w})=>{s({type:"UPDATE",modalId:b,newProps:w})},[s]);CZe({openModal:u,openConfirmModal:l,openContextModal:({modal:b,...w})=>c(b,w),closeModal:f,closeContextModal:f,closeAllModals:a,updateModal:d,updateContextModal:h});const p={modalProps:t||{},modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a,updateModal:d,updateContextModal:h},m=()=>{const b=o.current.current;switch(b==null?void 0:b.type){case"context":{const{innerProps:w,...E}=b.props,T=r[b.ctx];return{modalProps:E,content:S.jsx(T,{innerProps:w,context:p,id:b.id})}}case"confirm":{const{modalProps:w,confirmProps:E}=IZe(b.props);return{modalProps:w,content:S.jsx(SZe,{...E,id:b.id,labels:b.props.labels||n})}}case"content":{const{children:w,...E}=b.props;return{modalProps:E,content:w}}default:return{modalProps:{},content:null}}},{modalProps:g,content:v}=m();return S.jsxs(UJ.Provider,{value:p,children:[S.jsx(Vs,{zIndex:ff("modal")+1,...t,...g,opened:i.modals.length>0,onClose:()=>{var b;return f((b=i.current)==null?void 0:b.id)},children:v}),e]})}/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RZe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=(e,t,n,r)=>{const i=P.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:u,className:l,children:c,...f},d)=>P.createElement("svg",{ref:d,...RZe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...f},[u&&P.createElement("title",{key:"svg-title"},u),...r.map(([h,p])=>P.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DZe=Wn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NZe=Wn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ND=Wn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jle=Wn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zle=Wn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PZe=Wn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OZe=Wn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MZe=Wn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LZe=Wn("outline","brand-python","IconBrandPython",[["path",{d:"M12 9h-7a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h3",key:"svg-0"}],["path",{d:"M12 15h7a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-3",key:"svg-1"}],["path",{d:"M8 9v-4a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v5a2 2 0 0 1 -2 2h-4a2 2 0 0 0 -2 2v5a2 2 0 0 0 2 2h4a2 2 0 0 0 2 -2v-4",key:"svg-2"}],["path",{d:"M11 6l0 .01",key:"svg-3"}],["path",{d:"M13 18l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Ze=Wn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FZe=Wn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lTe=Wn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kB=Wn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BZe=Wn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ece=Wn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jZe=Wn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UZe=Wn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zZe=Wn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VZe=Wn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cTe=Wn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HZe=Wn("outline","hourglass-empty","IconHourglassEmpty",[["path",{d:"M6 20v-2a6 6 0 1 1 12 0v2a1 1 0 0 1 -1 1h-10a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M6 4v2a6 6 0 1 0 12 0v-2a1 1 0 0 0 -1 -1h-10a1 1 0 0 0 -1 1z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qZe=Wn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VJ=Wn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WZe=Wn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fTe=Wn("outline","list-check","IconListCheck",[["path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5",key:"svg-0"}],["path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5",key:"svg-1"}],["path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5",key:"svg-2"}],["path",{d:"M11 6l9 0",key:"svg-3"}],["path",{d:"M11 12l9 0",key:"svg-4"}],["path",{d:"M11 18l9 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GZe=Wn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YZe=Wn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KZe=Wn("outline","package-import","IconPackageImport",[["path",{d:"M12 21l-8 -4.5v-9l8 -4.5l8 4.5v4.5",key:"svg-0"}],["path",{d:"M12 12l8 -4.5",key:"svg-1"}],["path",{d:"M12 12v9",key:"svg-2"}],["path",{d:"M12 12l-8 -4.5",key:"svg-3"}],["path",{d:"M22 18h-7",key:"svg-4"}],["path",{d:"M18 15l-3 3l3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XZe=Wn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QZe=Wn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dTe=Wn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JZe=Wn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZZe=Wn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eet=Wn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tet=Wn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var net=Wn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hTe=Wn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ret=Wn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pTe=Wn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iet=Wn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mTe=Wn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HJ=Wn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tce=Wn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QP=Wn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var set=Wn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oet=Wn("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.28.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aet=Wn("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function gTe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const qa="/study/";function nce(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function yTe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const uet=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,cet=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,fet={};function rce(e,t){return(fet.jsx?cet:uet).test(e)}const det=/[ \t\n\f\r]/g;function het(e){return typeof e=="object"?e.type==="text"?ice(e.value):!1:ice(e)}function ice(e){return e.replace(det,"")===""}let JP=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};JP.prototype.property={};JP.prototype.normal={};JP.prototype.space=null;function vTe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new JP(n,r,t)}function _N(e){return e.toLowerCase()}let Th=class{constructor(t,n){this.property=t,this.attribute=n}};Th.prototype.space=null;Th.prototype.boolean=!1;Th.prototype.booleanish=!1;Th.prototype.overloadedBoolean=!1;Th.prototype.number=!1;Th.prototype.commaSeparated=!1;Th.prototype.spaceSeparated=!1;Th.prototype.commaOrSpaceSeparated=!1;Th.prototype.mustUseProperty=!1;Th.prototype.defined=!1;let pet=0;const ar=LE(),qo=LE(),bTe=LE(),Bt=LE(),fs=LE(),M2=LE(),jf=LE();function LE(){return 2**++pet}const bW=Object.freeze(Object.defineProperty({__proto__:null,boolean:ar,booleanish:qo,commaOrSpaceSeparated:jf,commaSeparated:M2,number:Bt,overloadedBoolean:bTe,spaceSeparated:fs},Symbol.toStringTag,{value:"Module"})),bz=Object.keys(bW);class qJ extends Th{constructor(t,n,r,i){let s=-1;if(super(t,n),sce(this,"space",i),typeof r=="number")for(;++s<bz.length;){const o=bz[s];sce(this,bz[s],(r&bW[o])===bW[o])}}}qJ.prototype.defined=!0;function sce(e,t,n){n&&(e[t]=n)}const met={}.hasOwnProperty;function BA(e){const t={},n={};let r;for(r in e.properties)if(met.call(e.properties,r)){const i=e.properties[r],s=new qJ(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[_N(r)]=r,n[_N(s.attribute)]=r}return new JP(t,n,e.space)}const xTe=BA({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),_Te=BA({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function wTe(e,t){return t in e?e[t]:t}function ETe(e,t){return wTe(e,t.toLowerCase())}const TTe=BA({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:ETe,properties:{xmlns:null,xmlnsXLink:null}}),STe=BA({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:qo,ariaAutoComplete:null,ariaBusy:qo,ariaChecked:qo,ariaColCount:Bt,ariaColIndex:Bt,ariaColSpan:Bt,ariaControls:fs,ariaCurrent:null,ariaDescribedBy:fs,ariaDetails:null,ariaDisabled:qo,ariaDropEffect:fs,ariaErrorMessage:null,ariaExpanded:qo,ariaFlowTo:fs,ariaGrabbed:qo,ariaHasPopup:null,ariaHidden:qo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:fs,ariaLevel:Bt,ariaLive:null,ariaModal:qo,ariaMultiLine:qo,ariaMultiSelectable:qo,ariaOrientation:null,ariaOwns:fs,ariaPlaceholder:null,ariaPosInSet:Bt,ariaPressed:qo,ariaReadOnly:qo,ariaRelevant:null,ariaRequired:qo,ariaRoleDescription:fs,ariaRowCount:Bt,ariaRowIndex:Bt,ariaRowSpan:Bt,ariaSelected:qo,ariaSetSize:Bt,ariaSort:null,ariaValueMax:Bt,ariaValueMin:Bt,ariaValueNow:Bt,ariaValueText:null,role:null}}),get=BA({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:ETe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:M2,acceptCharset:fs,accessKey:fs,action:null,allow:null,allowFullScreen:ar,allowPaymentRequest:ar,allowUserMedia:ar,alt:null,as:null,async:ar,autoCapitalize:null,autoComplete:fs,autoFocus:ar,autoPlay:ar,blocking:fs,capture:null,charSet:null,checked:ar,cite:null,className:fs,cols:Bt,colSpan:null,content:null,contentEditable:qo,controls:ar,controlsList:fs,coords:Bt|M2,crossOrigin:null,data:null,dateTime:null,decoding:null,default:ar,defer:ar,dir:null,dirName:null,disabled:ar,download:bTe,draggable:qo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:ar,formTarget:null,headers:fs,height:Bt,hidden:ar,high:Bt,href:null,hrefLang:null,htmlFor:fs,httpEquiv:fs,id:null,imageSizes:null,imageSrcSet:null,inert:ar,inputMode:null,integrity:null,is:null,isMap:ar,itemId:null,itemProp:fs,itemRef:fs,itemScope:ar,itemType:fs,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:ar,low:Bt,manifest:null,max:null,maxLength:Bt,media:null,method:null,min:null,minLength:Bt,multiple:ar,muted:ar,name:null,nonce:null,noModule:ar,noValidate:ar,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:ar,optimum:Bt,pattern:null,ping:fs,placeholder:null,playsInline:ar,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:ar,referrerPolicy:null,rel:fs,required:ar,reversed:ar,rows:Bt,rowSpan:Bt,sandbox:fs,scope:null,scoped:ar,seamless:ar,selected:ar,shadowRootClonable:ar,shadowRootDelegatesFocus:ar,shadowRootMode:null,shape:null,size:Bt,sizes:null,slot:null,span:Bt,spellCheck:qo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Bt,step:null,style:null,tabIndex:Bt,target:null,title:null,translate:null,type:null,typeMustMatch:ar,useMap:null,value:qo,width:Bt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:fs,axis:null,background:null,bgColor:null,border:Bt,borderColor:null,bottomMargin:Bt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:ar,declare:ar,event:null,face:null,frame:null,frameBorder:null,hSpace:Bt,leftMargin:Bt,link:null,longDesc:null,lowSrc:null,marginHeight:Bt,marginWidth:Bt,noResize:ar,noHref:ar,noShade:ar,noWrap:ar,object:null,profile:null,prompt:null,rev:null,rightMargin:Bt,rules:null,scheme:null,scrolling:qo,standby:null,summary:null,text:null,topMargin:Bt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Bt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:ar,disableRemotePlayback:ar,prefix:null,property:null,results:Bt,security:null,unselectable:null}}),yet=BA({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:wTe,properties:{about:jf,accentHeight:Bt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Bt,amplitude:Bt,arabicForm:null,ascent:Bt,attributeName:null,attributeType:null,azimuth:Bt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Bt,by:null,calcMode:null,capHeight:Bt,className:fs,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Bt,diffuseConstant:Bt,direction:null,display:null,dur:null,divisor:Bt,dominantBaseline:null,download:ar,dx:null,dy:null,edgeMode:null,editable:null,elevation:Bt,enableBackground:null,end:null,event:null,exponent:Bt,externalResourcesRequired:null,fill:null,fillOpacity:Bt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:M2,g2:M2,glyphName:M2,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Bt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Bt,horizOriginX:Bt,horizOriginY:Bt,id:null,ideographic:Bt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Bt,k:Bt,k1:Bt,k2:Bt,k3:Bt,k4:Bt,kernelMatrix:jf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Bt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Bt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Bt,overlineThickness:Bt,paintOrder:null,panose1:null,path:null,pathLength:Bt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:fs,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Bt,pointsAtY:Bt,pointsAtZ:Bt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:jf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:jf,rev:jf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:jf,requiredFeatures:jf,requiredFonts:jf,requiredFormats:jf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Bt,specularExponent:Bt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Bt,strikethroughThickness:Bt,string:null,stroke:null,strokeDashArray:jf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Bt,strokeOpacity:Bt,strokeWidth:null,style:null,surfaceScale:Bt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:jf,tabIndex:Bt,tableValues:null,target:null,targetX:Bt,targetY:Bt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:jf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Bt,underlineThickness:Bt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Bt,values:null,vAlphabetic:Bt,vMathematical:Bt,vectorEffect:null,vHanging:Bt,vIdeographic:Bt,version:null,vertAdvY:Bt,vertOriginX:Bt,vertOriginY:Bt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Bt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),vet=/^data[-\w.:]+$/i,oce=/-[a-z]/g,bet=/[A-Z]/g;function RB(e,t){const n=_N(t);let r=t,i=Th;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&vet.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(oce,_et);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!oce.test(s)){let o=s.replace(bet,xet);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=qJ}return new i(r,t)}function xet(e){return"-"+e.toLowerCase()}function _et(e){return e.charAt(1).toUpperCase()}const wet={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},ZP=vTe([_Te,xTe,TTe,STe,get],"html"),yx=vTe([_Te,xTe,TTe,STe,yet],"svg");function ace(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function CTe(e){return e.join(" ").trim()}var Yk={},xz,uce;function Eet(){if(uce)return xz;uce=1;var e=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,t=/\n/g,n=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,i=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,o=/^[;\s]*/,a=/^\s+|\s+$/g,u=`
`,l="/",c="*",f="",d="comment",h="declaration";xz=function(m,g){if(typeof m!="string")throw new TypeError("First argument must be a string");if(!m)return[];g=g||{};var v=1,b=1;function w(F){var H=F.match(t);H&&(v+=H.length);var Q=F.lastIndexOf(u);b=~Q?F.length-Q:b+F.length}function E(){var F={line:v,column:b};return function(H){return H.position=new T(F),R(),H}}function T(F){this.start=F,this.end={line:v,column:b},this.source=g.source}T.prototype.content=m;function C(F){var H=new Error(g.source+":"+v+":"+b+": "+F);if(H.reason=F,H.filename=g.source,H.line=v,H.column=b,H.source=m,!g.silent)throw H}function I(F){var H=F.exec(m);if(H){var Q=H[0];return w(Q),m=m.slice(Q.length),H}}function R(){I(n)}function N(F){var H;for(F=F||[];H=O();)H!==!1&&F.push(H);return F}function O(){var F=E();if(!(l!=m.charAt(0)||c!=m.charAt(1))){for(var H=2;f!=m.charAt(H)&&(c!=m.charAt(H)||l!=m.charAt(H+1));)++H;if(H+=2,f===m.charAt(H-1))return C("End of comment missing");var Q=m.slice(2,H-2);return b+=2,w(Q),m=m.slice(H),b+=2,F({type:d,comment:Q})}}function L(){var F=E(),H=I(r);if(H){if(O(),!I(i))return C("property missing ':'");var Q=I(s),J=F({type:h,property:p(H[0].replace(e,f)),value:Q?p(Q[0].replace(e,f)):f});return I(o),J}}function B(){var F=[];N(F);for(var H;H=L();)H!==!1&&(F.push(H),N(F));return F}return R(),B()};function p(m){return m?m.replace(a,f):f}return xz}var lce;function Tet(){if(lce)return Yk;lce=1;var e=Yk.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yk,"__esModule",{value:!0});var t=e(Eet());function n(r,i){var s=null;if(!r||typeof r!="string")return s;var o=(0,t.default)(r),a=typeof i=="function";return o.forEach(function(u){if(u.type==="declaration"){var l=u.property,c=u.value;a?i(l,c,u):c&&(s=s||{},s[l]=c)}}),s}return Yk.default=n,Yk}var Cet=Tet();const cce=yh(Cet),Aet=cce.default||cce,DB=ATe("end"),sg=ATe("start");function ATe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Iet(e){const t=sg(e),n=DB(e);if(t&&n)return{start:t,end:n}}function PD(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?fce(e.position):"start"in e||"end"in e?fce(e):"line"in e||"column"in e?xW(e):""}function xW(e){return dce(e&&e.line)+":"+dce(e&&e.column)}function fce(e){return xW(e&&e.start)+"-"+xW(e&&e.end)}function dce(e){return e&&typeof e=="number"?e:1}class vl extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=PD(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}vl.prototype.file="";vl.prototype.name="";vl.prototype.reason="";vl.prototype.message="";vl.prototype.stack="";vl.prototype.column=void 0;vl.prototype.line=void 0;vl.prototype.ancestors=void 0;vl.prototype.cause=void 0;vl.prototype.fatal=void 0;vl.prototype.place=void 0;vl.prototype.ruleId=void 0;vl.prototype.source=void 0;const WJ={}.hasOwnProperty,ket=new Map,Ret=/[A-Z]/g,Det=/-([a-z])/g,Net=new Set(["table","tbody","thead","tfoot","tr"]),Pet=new Set(["td","th"]),ITe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Oet(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=zet(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Uet(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?yx:ZP,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=kTe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function kTe(e,t,n){if(t.type==="element")return Met(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Let(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return Fet(e,t,n);if(t.type==="mdxjsEsm")return $et(e,t);if(t.type==="root")return Bet(e,t,n);if(t.type==="text")return jet(e,t)}function Met(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=yx,e.schema=i),e.ancestors.push(t);const s=DTe(e,t.tagName,!1),o=Vet(e,t);let a=YJ(e,t);return Net.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!het(u):!0})),RTe(e,o,s,t),GJ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Let(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}wN(e,t.position)}function $et(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);wN(e,t.position)}function Fet(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=yx,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:DTe(e,t.name,!0),o=Het(e,t),a=YJ(e,t);return RTe(e,o,s,t),GJ(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Bet(e,t,n){const r={};return GJ(r,YJ(e,t)),e.create(t,e.Fragment,r,n)}function jet(e,t){return t.value}function RTe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function GJ(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Uet(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function zet(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=sg(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function Vet(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&WJ.call(t.properties,i)){const s=qet(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Pet.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Het(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else wN(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else wN(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function YJ(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:ket;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=kTe(e,s,o);a!==void 0&&n.push(a)}return n}function qet(e,t,n){const r=RB(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?yTe(n):CTe(n)),r.property==="style"){let i=typeof n=="object"?n:Wet(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Get(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?wet[r.property]||r.property:r.attribute,n]}}function Wet(e,t){const n={};try{Aet(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new vl("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=ITe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(Det,Ket)),n[o]=s}}function DTe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=rce(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=rce(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return WJ.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);wN(e)}function wN(e,t){const n=new vl("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=ITe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Get(e){const t={};let n;for(n in e)WJ.call(e,n)&&(t[Yet(n)]=e[n]);return t}function Yet(e){let t=e.replace(Ret,Xet);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Ket(e,t){return t.toUpperCase()}function Xet(e){return"-"+e.toLowerCase()}const _z={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Qet={};function Jet(e,t){const n=Qet,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return NTe(e,r,i)}function NTe(e,t,n){if(Zet(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return hce(e.children,t,n)}return Array.isArray(e)?hce(e,t,n):""}function hce(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=NTe(e[i],t,n);return r.join("")}function Zet(e){return!!(e&&typeof e=="object")}const pce=document.createElement("i");function KJ(e){const t="&"+e+";";pce.innerHTML=t;const n=pce.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Qy(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function Xd(e,t){return e.length>0?(Qy(e,e.length,0,t),e):t}const mce={}.hasOwnProperty;function ett(e){const t={};let n=-1;for(;++n<e.length;)ttt(t,e[n]);return t}function ttt(e,t){let n;for(n in t){const i=(mce.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){mce.call(i,o)||(i[o]=[]);const a=s[o];ntt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function ntt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Qy(e,0,0,r)}function PTe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function L2(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const e0=vx(/[A-Za-z]/),Qf=vx(/[\dA-Za-z]/),rtt=vx(/[#-'*+\--9=?A-Z^-~]/);function _W(e){return e!==null&&(e<32||e===127)}const wW=vx(/\d/),itt=vx(/[\dA-Fa-f]/),stt=vx(/[!-/:-@[-`{-~]/);function Vn(e){return e!==null&&e<-2}function Kc(e){return e!==null&&(e<0||e===32)}function Ti(e){return e===-2||e===-1||e===32}const ott=vx(new RegExp("\\p{P}|\\p{S}","u")),att=vx(/\s/);function vx(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function jA(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&Qf(e.charCodeAt(n+1))&&Qf(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ds(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Ti(u)?(e.enter(n),a(u)):t(u)}function a(u){return Ti(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const utt={tokenize:ltt};function ltt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ds(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Vn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const ctt={tokenize:ftt},gce={tokenize:dtt};function ftt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(w){if(r<n.length){const E=n[r];return t.containerState=E[1],e.attempt(E[0].continuation,u,l)(w)}return l(w)}function u(w){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const E=t.events.length;let T=E,C;for(;T--;)if(t.events[T][0]==="exit"&&t.events[T][1].type==="chunkFlow"){C=t.events[T][1].end;break}v(r);let I=E;for(;I<t.events.length;)t.events[I][1].end=Object.assign({},C),I++;return Qy(t.events,T+1,0,t.events.slice(E)),t.events.length=I,l(w)}return a(w)}function l(w){if(r===n.length){if(!i)return d(w);if(i.currentConstruct&&i.currentConstruct.concrete)return p(w);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(gce,c,f)(w)}function c(w){return i&&b(),v(r),d(w)}function f(w){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(w)}function d(w){return t.containerState={},e.attempt(gce,h,p)(w)}function h(w){return r++,n.push([t.currentConstruct,t.containerState]),d(w)}function p(w){if(w===null){i&&b(),v(0),e.consume(w);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(w)}function m(w){if(w===null){g(e.exit("chunkFlow"),!0),v(0),e.consume(w);return}return Vn(w)?(e.consume(w),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(w),m)}function g(w,E){const T=t.sliceStream(w);if(E&&T.push(null),w.previous=s,s&&(s.next=w),s=w,i.defineSkip(w.start),i.write(T),t.parser.lazy[w.start.line]){let C=i.events.length;for(;C--;)if(i.events[C][1].start.offset<o&&(!i.events[C][1].end||i.events[C][1].end.offset>o))return;const I=t.events.length;let R=I,N,O;for(;R--;)if(t.events[R][0]==="exit"&&t.events[R][1].type==="chunkFlow"){if(N){O=t.events[R][1].end;break}N=!0}for(v(r),C=I;C<t.events.length;)t.events[C][1].end=Object.assign({},O),C++;Qy(t.events,R+1,0,t.events.slice(I)),t.events.length=C}}function v(w){let E=n.length;for(;E-- >w;){const T=n[E];t.containerState=T[1],T[0].exit.call(t,e)}n.length=w}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function dtt(e,t,n){return ds(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function yce(e){if(e===null||Kc(e)||att(e))return 1;if(ott(e))return 2}function XJ(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const EW={name:"attention",tokenize:ptt,resolveAll:htt};function htt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);vce(f,-u),vce(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=Xd(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=Xd(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=Xd(l,XJ(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=Xd(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=Xd(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,Qy(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function ptt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=yce(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=yce(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function vce(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const mtt={name:"autolink",tokenize:gtt};function gtt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return e0(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||Qf(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||Qf(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||_W(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):rtt(h)?(e.consume(h),l):n(h)}function c(h){return Qf(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||Qf(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const NB={tokenize:ytt,partial:!0};function ytt(e,t,n){return r;function r(s){return Ti(s)?ds(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Vn(s)?t(s):n(s)}}const OTe={name:"blockQuote",tokenize:vtt,continuation:{tokenize:btt},exit:xtt};function vtt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Ti(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function btt(e,t,n){const r=this;return i;function i(o){return Ti(o)?ds(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(OTe,t,n)(o)}}function xtt(e){e.exit("blockQuote")}const MTe={name:"characterEscape",tokenize:_tt};function _tt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return stt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const LTe={name:"characterReference",tokenize:wtt};function wtt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=Qf,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=itt,c):(e.enter("characterReferenceValue"),s=7,o=wW,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===Qf&&!KJ(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const bce={tokenize:Ttt,partial:!0},xce={name:"codeFenced",tokenize:Ett,concrete:!0};function Ett(e,t,n){const r=this,i={tokenize:T,partial:!0};let s=0,o=0,a;return u;function u(C){return l(C)}function l(C){const I=r.events[r.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,a=C,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(C)}function c(C){return C===a?(o++,e.consume(C),c):o<3?n(C):(e.exit("codeFencedFenceSequence"),Ti(C)?ds(e,f,"whitespace")(C):f(C))}function f(C){return C===null||Vn(C)?(e.exit("codeFencedFence"),r.interrupt?t(C):e.check(bce,m,E)(C)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(C))}function d(C){return C===null||Vn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(C)):Ti(C)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ds(e,h,"whitespace")(C)):C===96&&C===a?n(C):(e.consume(C),d)}function h(C){return C===null||Vn(C)?f(C):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(C))}function p(C){return C===null||Vn(C)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(C)):C===96&&C===a?n(C):(e.consume(C),p)}function m(C){return e.attempt(i,E,g)(C)}function g(C){return e.enter("lineEnding"),e.consume(C),e.exit("lineEnding"),v}function v(C){return s>0&&Ti(C)?ds(e,b,"linePrefix",s+1)(C):b(C)}function b(C){return C===null||Vn(C)?e.check(bce,m,E)(C):(e.enter("codeFlowValue"),w(C))}function w(C){return C===null||Vn(C)?(e.exit("codeFlowValue"),b(C)):(e.consume(C),w)}function E(C){return e.exit("codeFenced"),t(C)}function T(C,I,R){let N=0;return O;function O(Q){return C.enter("lineEnding"),C.consume(Q),C.exit("lineEnding"),L}function L(Q){return C.enter("codeFencedFence"),Ti(Q)?ds(C,B,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Q):B(Q)}function B(Q){return Q===a?(C.enter("codeFencedFenceSequence"),F(Q)):R(Q)}function F(Q){return Q===a?(N++,C.consume(Q),F):N>=o?(C.exit("codeFencedFenceSequence"),Ti(Q)?ds(C,H,"whitespace")(Q):H(Q)):R(Q)}function H(Q){return Q===null||Vn(Q)?(C.exit("codeFencedFence"),I(Q)):R(Q)}}}function Ttt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const wz={name:"codeIndented",tokenize:Ctt},Stt={tokenize:Att,partial:!0};function Ctt(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ds(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Vn(l)?e.attempt(Stt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Vn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Att(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Vn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ds(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Vn(o)?i(o):n(o)}}const Itt={name:"codeText",tokenize:Dtt,resolve:ktt,previous:Rtt};function ktt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Rtt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Dtt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Vn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Vn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class Ntt{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&Kk(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),Kk(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),Kk(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);Kk(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);Kk(this.left,n.reverse())}}}function Kk(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function $Te(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new Ntt(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Ptt(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return Qy(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function Ptt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const v=a.slice(g[d],g[d+1]),b=s.pop();u.push([b,b+v.length-1]),e.splice(b,2,v)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Ott={tokenize:$tt,resolve:Ltt},Mtt={tokenize:Ftt,partial:!0};function Ltt(e){return $Te(e),e}function $tt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Vn(a)?e.check(Mtt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function Ftt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ds(e,s,"linePrefix")}function s(o){if(o===null||Vn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function FTe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(v){return v===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(v),e.exit(s),d):v===null||v===32||v===41||_W(v)?n(v):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(v))}function d(v){return v===62?(e.enter(s),e.consume(v),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(v))}function h(v){return v===62?(e.exit("chunkString"),e.exit(a),d(v)):v===null||v===60||Vn(v)?n(v):(e.consume(v),v===92?p:h)}function p(v){return v===60||v===62||v===92?(e.consume(v),h):h(v)}function m(v){return!c&&(v===null||v===41||Kc(v))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(v)):c<l&&v===40?(e.consume(v),c++,m):v===41?(e.consume(v),c--,m):v===null||v===32||v===40||_W(v)?n(v):(e.consume(v),v===92?g:m)}function g(v){return v===40||v===41||v===92?(e.consume(v),m):m(v)}}function BTe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Vn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Vn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Ti(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function jTe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Vn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ds(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Vn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function OD(e,t){let n;return r;function r(i){return Vn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Ti(i)?ds(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Btt={name:"definition",tokenize:Utt},jtt={tokenize:ztt,partial:!0};function Utt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return BTe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=L2(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Kc(h)?OD(e,l)(h):l(h)}function l(h){return FTe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(jtt,f,f)(h)}function f(h){return Ti(h)?ds(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Vn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function ztt(e,t,n){return r;function r(a){return Kc(a)?OD(e,i)(a):n(a)}function i(a){return jTe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Ti(a)?ds(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Vn(a)?t(a):n(a)}}const Vtt={name:"hardBreakEscape",tokenize:Htt};function Htt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Vn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const qtt={name:"headingAtx",tokenize:Gtt,resolve:Wtt};function Wtt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Qy(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Gtt(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Kc(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Vn(c)?(e.exit("atxHeading"),t(c)):Ti(c)?ds(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Kc(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const Ytt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],_ce=["pre","script","style","textarea"],Ktt={name:"htmlFlow",tokenize:Ztt,resolveTo:Jtt,concrete:!0},Xtt={tokenize:tnt,partial:!0},Qtt={tokenize:ent,partial:!0};function Jtt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Ztt(e,t,n){const r=this;let i,s,o,a,u;return l;function l(V){return c(V)}function c(V){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(V),f}function f(V){return V===33?(e.consume(V),d):V===47?(e.consume(V),s=!0,m):V===63?(e.consume(V),i=3,r.interrupt?t:q):e0(V)?(e.consume(V),o=String.fromCharCode(V),g):n(V)}function d(V){return V===45?(e.consume(V),i=2,h):V===91?(e.consume(V),i=5,a=0,p):e0(V)?(e.consume(V),i=4,r.interrupt?t:q):n(V)}function h(V){return V===45?(e.consume(V),r.interrupt?t:q):n(V)}function p(V){const Y="CDATA[";return V===Y.charCodeAt(a++)?(e.consume(V),a===Y.length?r.interrupt?t:B:p):n(V)}function m(V){return e0(V)?(e.consume(V),o=String.fromCharCode(V),g):n(V)}function g(V){if(V===null||V===47||V===62||Kc(V)){const Y=V===47,ee=o.toLowerCase();return!Y&&!s&&_ce.includes(ee)?(i=1,r.interrupt?t(V):B(V)):Ytt.includes(o.toLowerCase())?(i=6,Y?(e.consume(V),v):r.interrupt?t(V):B(V)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(V):s?b(V):w(V))}return V===45||Qf(V)?(e.consume(V),o+=String.fromCharCode(V),g):n(V)}function v(V){return V===62?(e.consume(V),r.interrupt?t:B):n(V)}function b(V){return Ti(V)?(e.consume(V),b):O(V)}function w(V){return V===47?(e.consume(V),O):V===58||V===95||e0(V)?(e.consume(V),E):Ti(V)?(e.consume(V),w):O(V)}function E(V){return V===45||V===46||V===58||V===95||Qf(V)?(e.consume(V),E):T(V)}function T(V){return V===61?(e.consume(V),C):Ti(V)?(e.consume(V),T):w(V)}function C(V){return V===null||V===60||V===61||V===62||V===96?n(V):V===34||V===39?(e.consume(V),u=V,I):Ti(V)?(e.consume(V),C):R(V)}function I(V){return V===u?(e.consume(V),u=null,N):V===null||Vn(V)?n(V):(e.consume(V),I)}function R(V){return V===null||V===34||V===39||V===47||V===60||V===61||V===62||V===96||Kc(V)?T(V):(e.consume(V),R)}function N(V){return V===47||V===62||Ti(V)?w(V):n(V)}function O(V){return V===62?(e.consume(V),L):n(V)}function L(V){return V===null||Vn(V)?B(V):Ti(V)?(e.consume(V),L):n(V)}function B(V){return V===45&&i===2?(e.consume(V),J):V===60&&i===1?(e.consume(V),ne):V===62&&i===4?(e.consume(V),U):V===63&&i===3?(e.consume(V),q):V===93&&i===5?(e.consume(V),ie):Vn(V)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Xtt,G,F)(V)):V===null||Vn(V)?(e.exit("htmlFlowData"),F(V)):(e.consume(V),B)}function F(V){return e.check(Qtt,H,G)(V)}function H(V){return e.enter("lineEnding"),e.consume(V),e.exit("lineEnding"),Q}function Q(V){return V===null||Vn(V)?F(V):(e.enter("htmlFlowData"),B(V))}function J(V){return V===45?(e.consume(V),q):B(V)}function ne(V){return V===47?(e.consume(V),o="",Z):B(V)}function Z(V){if(V===62){const Y=o.toLowerCase();return _ce.includes(Y)?(e.consume(V),U):B(V)}return e0(V)&&o.length<8?(e.consume(V),o+=String.fromCharCode(V),Z):B(V)}function ie(V){return V===93?(e.consume(V),q):B(V)}function q(V){return V===62?(e.consume(V),U):V===45&&i===2?(e.consume(V),q):B(V)}function U(V){return V===null||Vn(V)?(e.exit("htmlFlowData"),G(V)):(e.consume(V),U)}function G(V){return e.exit("htmlFlow"),t(V)}}function ent(e,t,n){const r=this;return i;function i(o){return Vn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function tnt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(NB,t,n)}}const nnt={name:"htmlText",tokenize:rnt};function rnt(e,t,n){const r=this;let i,s,o;return a;function a(q){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(q),u}function u(q){return q===33?(e.consume(q),l):q===47?(e.consume(q),T):q===63?(e.consume(q),w):e0(q)?(e.consume(q),R):n(q)}function l(q){return q===45?(e.consume(q),c):q===91?(e.consume(q),s=0,p):e0(q)?(e.consume(q),b):n(q)}function c(q){return q===45?(e.consume(q),h):n(q)}function f(q){return q===null?n(q):q===45?(e.consume(q),d):Vn(q)?(o=f,ne(q)):(e.consume(q),f)}function d(q){return q===45?(e.consume(q),h):f(q)}function h(q){return q===62?J(q):q===45?d(q):f(q)}function p(q){const U="CDATA[";return q===U.charCodeAt(s++)?(e.consume(q),s===U.length?m:p):n(q)}function m(q){return q===null?n(q):q===93?(e.consume(q),g):Vn(q)?(o=m,ne(q)):(e.consume(q),m)}function g(q){return q===93?(e.consume(q),v):m(q)}function v(q){return q===62?J(q):q===93?(e.consume(q),v):m(q)}function b(q){return q===null||q===62?J(q):Vn(q)?(o=b,ne(q)):(e.consume(q),b)}function w(q){return q===null?n(q):q===63?(e.consume(q),E):Vn(q)?(o=w,ne(q)):(e.consume(q),w)}function E(q){return q===62?J(q):w(q)}function T(q){return e0(q)?(e.consume(q),C):n(q)}function C(q){return q===45||Qf(q)?(e.consume(q),C):I(q)}function I(q){return Vn(q)?(o=I,ne(q)):Ti(q)?(e.consume(q),I):J(q)}function R(q){return q===45||Qf(q)?(e.consume(q),R):q===47||q===62||Kc(q)?N(q):n(q)}function N(q){return q===47?(e.consume(q),J):q===58||q===95||e0(q)?(e.consume(q),O):Vn(q)?(o=N,ne(q)):Ti(q)?(e.consume(q),N):J(q)}function O(q){return q===45||q===46||q===58||q===95||Qf(q)?(e.consume(q),O):L(q)}function L(q){return q===61?(e.consume(q),B):Vn(q)?(o=L,ne(q)):Ti(q)?(e.consume(q),L):N(q)}function B(q){return q===null||q===60||q===61||q===62||q===96?n(q):q===34||q===39?(e.consume(q),i=q,F):Vn(q)?(o=B,ne(q)):Ti(q)?(e.consume(q),B):(e.consume(q),H)}function F(q){return q===i?(e.consume(q),i=void 0,Q):q===null?n(q):Vn(q)?(o=F,ne(q)):(e.consume(q),F)}function H(q){return q===null||q===34||q===39||q===60||q===61||q===96?n(q):q===47||q===62||Kc(q)?N(q):(e.consume(q),H)}function Q(q){return q===47||q===62||Kc(q)?N(q):n(q)}function J(q){return q===62?(e.consume(q),e.exit("htmlTextData"),e.exit("htmlText"),t):n(q)}function ne(q){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(q),e.exit("lineEnding"),Z}function Z(q){return Ti(q)?ds(e,ie,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):ie(q)}function ie(q){return e.enter("htmlTextData"),o(q)}}const QJ={name:"labelEnd",tokenize:lnt,resolveTo:unt,resolveAll:ant},int={tokenize:cnt},snt={tokenize:fnt},ont={tokenize:dnt};function ant(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function unt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=Xd(a,e.slice(s+1,s+r+3)),a=Xd(a,[["enter",c,t]]),a=Xd(a,XJ(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=Xd(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=Xd(a,e.slice(o+1)),a=Xd(a,[["exit",u,t]]),Qy(e,s,e.length,a),e}function lnt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(L2(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(int,c,o?c:f)(d):d===91?e.attempt(snt,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(ont,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function cnt(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Kc(f)?OD(e,s)(f):s(f)}function s(f){return f===41?c(f):FTe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Kc(f)?OD(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?jTe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Kc(f)?OD(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function fnt(e,t,n){const r=this;return i;function i(a){return BTe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(L2(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function dnt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const hnt={name:"labelStartImage",tokenize:pnt,resolveAll:QJ.resolveAll};function pnt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const mnt={name:"labelStartLink",tokenize:gnt,resolveAll:QJ.resolveAll};function gnt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Ez={name:"lineEnding",tokenize:ynt};function ynt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ds(e,t,"linePrefix")}}const ZM={name:"thematicBreak",tokenize:vnt};function vnt(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Vn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Ti(l)?ds(e,a,"whitespace")(l):a(l))}}const Pc={name:"list",tokenize:_nt,continuation:{tokenize:wnt},exit:Tnt},bnt={tokenize:Snt,partial:!0},xnt={tokenize:Ent,partial:!0};function _nt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:wW(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(ZM,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return wW(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(NB,r.interrupt?n:c,e.attempt(bnt,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Ti(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function wnt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(NB,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ds(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Ti(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(xnt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ds(e,e.attempt(Pc,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Ent(e,t,n){const r=this;return ds(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Tnt(e){e.exit(this.containerState.type)}function Snt(e,t,n){const r=this;return ds(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Ti(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const wce={name:"setextUnderline",tokenize:Ant,resolveTo:Cnt};function Cnt(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Ant(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Ti(l)?ds(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Vn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const Int={tokenize:knt};function knt(e){const t=this,n=e.attempt(NB,r,e.attempt(this.parser.constructs.flowInitial,i,ds(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Ott,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Rnt={resolveAll:zTe()},Dnt=UTe("string"),Nnt=UTe("text");function UTe(e){return{tokenize:t,resolveAll:zTe(e==="text"?Pnt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function zTe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Pnt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Ont(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:b,enter:w,exit:E,attempt:I(T),check:I(C),interrupt:I(C,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(L){return o=Xd(o,L),g(),o[o.length-1]!==null?[]:(R(t,0),l.events=XJ(s,l.events,l),l.events)}function d(L,B){return Lnt(h(L),B)}function h(L){return Mnt(o,L)}function p(){const{line:L,column:B,offset:F,_index:H,_bufferIndex:Q}=r;return{line:L,column:B,offset:F,_index:H,_bufferIndex:Q}}function m(L){i[L.line]=L.column,O()}function g(){let L;for(;r._index<o.length;){const B=o[r._index];if(typeof B=="string")for(L=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===L&&r._bufferIndex<B.length;)v(B.charCodeAt(r._bufferIndex));else v(B)}}function v(L){c=c(L)}function b(L){Vn(L)?(r.line++,r.column=1,r.offset+=L===-3?2:1,O()):L!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=L}function w(L,B){const F=B||{};return F.type=L,F.start=p(),l.events.push(["enter",F,l]),a.push(F),F}function E(L){const B=a.pop();return B.end=p(),l.events.push(["exit",B,l]),B}function T(L,B){R(L,B.from)}function C(L,B){B.restore()}function I(L,B){return F;function F(H,Q,J){let ne,Z,ie,q;return Array.isArray(H)?G(H):"tokenize"in H?G([H]):U(H);function U(ae){return _e;function _e(pe){const Te=pe!==null&&ae[pe],Le=pe!==null&&ae.null,ye=[...Array.isArray(Te)?Te:Te?[Te]:[],...Array.isArray(Le)?Le:Le?[Le]:[]];return G(ye)(pe)}}function G(ae){return ne=ae,Z=0,ae.length===0?J:V(ae[Z])}function V(ae){return _e;function _e(pe){return q=N(),ie=ae,ae.partial||(l.currentConstruct=ae),ae.name&&l.parser.constructs.disable.null.includes(ae.name)?ee():ae.tokenize.call(B?Object.assign(Object.create(l),B):l,u,Y,ee)(pe)}}function Y(ae){return L(ie,q),Q}function ee(ae){return q.restore(),++Z<ne.length?V(ne[Z]):J}}}function R(L,B){L.resolveAll&&!s.includes(L)&&s.push(L),L.resolve&&Qy(l.events,B,l.events.length-B,L.resolve(l.events.slice(B),l)),L.resolveTo&&(l.events=L.resolveTo(l.events,l))}function N(){const L=p(),B=l.previous,F=l.currentConstruct,H=l.events.length,Q=Array.from(a);return{restore:J,from:H};function J(){r=L,l.previous=B,l.currentConstruct=F,l.events.length=H,a=Q,O()}}function O(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function Mnt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Lnt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const $nt={42:Pc,43:Pc,45:Pc,48:Pc,49:Pc,50:Pc,51:Pc,52:Pc,53:Pc,54:Pc,55:Pc,56:Pc,57:Pc,62:OTe},Fnt={91:Btt},Bnt={[-2]:wz,[-1]:wz,32:wz},jnt={35:qtt,42:ZM,45:[wce,ZM],60:Ktt,61:wce,95:ZM,96:xce,126:xce},Unt={38:LTe,92:MTe},znt={[-5]:Ez,[-4]:Ez,[-3]:Ez,33:hnt,38:LTe,42:EW,60:[mtt,nnt],91:mnt,92:[Vtt,MTe],93:QJ,95:EW,96:Itt},Vnt={null:[EW,Rnt]},Hnt={null:[42,95]},qnt={null:[]},Wnt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Hnt,contentInitial:Fnt,disable:qnt,document:$nt,flow:jnt,flowInitial:Bnt,insideSpan:Vnt,string:Unt,text:znt},Symbol.toStringTag,{value:"Module"}));function Gnt(e){const n=ett([Wnt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(utt),document:i(ctt),flow:i(Int),string:i(Dnt),text:i(Nnt)};return r;function i(s){return o;function o(a){return Ont(r,s,a)}}}function Ynt(e){for(;!$Te(e););return e}const Ece=/[\0\t\n\r]/g;function Knt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Ece.lastIndex=f,l=Ece.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const Xnt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Qnt(e){return e.replace(Xnt,Jnt)}function Jnt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return PTe(n.slice(s?2:1),s?16:10)}return KJ(n)||e}const VTe={}.hasOwnProperty;function Znt(e,t,n){return typeof t!="string"&&(n=t,t=void 0),ert(n)(Ynt(Gnt(n).document().write(Knt()(e,t,!0))))}function ert(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(at),autolinkProtocol:N,autolinkEmail:N,atxHeading:s(tt),blockQuote:s(Le),characterEscape:N,characterReference:N,codeFenced:s(ye),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(ye,o),codeText:s(he,o),codeTextData:N,data:N,codeFlowValue:N,definition:s($e),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(De),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(Me,o),htmlFlowData:N,htmlText:s(Me,o),htmlTextData:N,image:s(Ge),label:o,link:s(at),listItem:s(Tt),listItemValue:d,listOrdered:s(yt,f),listUnordered:s(yt),paragraph:s(Ot),reference:V,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(tt),strong:s(qe),thematicBreak:s(wt)},exit:{atxHeading:u(),atxHeadingSequence:T,autolink:u(),autolinkEmail:Te,autolinkProtocol:pe,blockQuote:u(),characterEscapeValue:O,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:ae,characterReference:_e,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:O,codeIndented:u(v),codeText:u(Q),codeTextData:O,data:O,definition:u(),definitionDestinationString:E,definitionLabelString:b,definitionTitleString:w,emphasis:u(),hardBreakEscape:u(B),hardBreakTrailing:u(B),htmlFlow:u(F),htmlFlowData:O,htmlText:u(H),htmlTextData:O,image:u(ne),label:ie,labelText:Z,lineEnding:L,link:u(J),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:Y,resourceDestinationString:q,resourceTitleString:U,resource:G,setextHeading:u(R),setextHeadingLineSequence:I,setextHeadingText:C,strong:u(),thematicBreak:u()}};HTe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ke){let Oe={type:"root",children:[]};const ht={stack:[Oe],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Lt=[];let Ft=-1;for(;++Ft<ke.length;)if(ke[Ft][1].type==="listOrdered"||ke[Ft][1].type==="listUnordered")if(ke[Ft][0]==="enter")Lt.push(Ft);else{const dn=Lt.pop();Ft=i(ke,dn,Ft)}for(Ft=-1;++Ft<ke.length;){const dn=t[ke[Ft][0]];VTe.call(dn,ke[Ft][1].type)&&dn[ke[Ft][1].type].call(Object.assign({sliceSerialize:ke[Ft][2].sliceSerialize},ht),ke[Ft][1])}if(ht.tokenStack.length>0){const dn=ht.tokenStack[ht.tokenStack.length-1];(dn[1]||Tce).call(ht,void 0,dn[0])}for(Oe.position={start:wv(ke.length>0?ke[0][1].start:{line:1,column:1,offset:0}),end:wv(ke.length>0?ke[ke.length-2][1].end:{line:1,column:1,offset:0})},Ft=-1;++Ft<t.transforms.length;)Oe=t.transforms[Ft](Oe)||Oe;return Oe}function i(ke,Oe,ht){let Lt=Oe-1,Ft=-1,dn=!1,Nn,Tr,Ni,Un;for(;++Lt<=ht;){const tr=ke[Lt];switch(tr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{tr[0]==="enter"?Ft++:Ft--,Un=void 0;break}case"lineEndingBlank":{tr[0]==="enter"&&(Nn&&!Un&&!Ft&&!Ni&&(Ni=Lt),Un=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Un=void 0}if(!Ft&&tr[0]==="enter"&&tr[1].type==="listItemPrefix"||Ft===-1&&tr[0]==="exit"&&(tr[1].type==="listUnordered"||tr[1].type==="listOrdered")){if(Nn){let Ai=Lt;for(Tr=void 0;Ai--;){const Sr=ke[Ai];if(Sr[1].type==="lineEnding"||Sr[1].type==="lineEndingBlank"){if(Sr[0]==="exit")continue;Tr&&(ke[Tr][1].type="lineEndingBlank",dn=!0),Sr[1].type="lineEnding",Tr=Ai}else if(!(Sr[1].type==="linePrefix"||Sr[1].type==="blockQuotePrefix"||Sr[1].type==="blockQuotePrefixWhitespace"||Sr[1].type==="blockQuoteMarker"||Sr[1].type==="listItemIndent"))break}Ni&&(!Tr||Ni<Tr)&&(Nn._spread=!0),Nn.end=Object.assign({},Tr?ke[Tr][1].start:tr[1].end),ke.splice(Tr||Lt,0,["exit",Nn,tr[2]]),Lt++,ht++}if(tr[1].type==="listItemPrefix"){const Ai={type:"listItem",_spread:!1,start:Object.assign({},tr[1].start),end:void 0};Nn=Ai,ke.splice(Lt,0,["enter",Ai,tr[2]]),Lt++,ht++,Ni=void 0,Un=!0}}}return ke[Oe][1]._spread=dn,ht}function s(ke,Oe){return ht;function ht(Lt){a.call(this,ke(Lt),Lt),Oe&&Oe.call(this,Lt)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ke,Oe,ht){this.stack[this.stack.length-1].children.push(ke),this.stack.push(ke),this.tokenStack.push([Oe,ht]),ke.position={start:wv(Oe.start),end:void 0}}function u(ke){return Oe;function Oe(ht){ke&&ke.call(this,ht),l.call(this,ht)}}function l(ke,Oe){const ht=this.stack.pop(),Lt=this.tokenStack.pop();if(Lt)Lt[0].type!==ke.type&&(Oe?Oe.call(this,ke,Lt[0]):(Lt[1]||Tce).call(this,ke,Lt[0]));else throw new Error("Cannot close `"+ke.type+"` ("+PD({start:ke.start,end:ke.end})+"): its not open");ht.position.end=wv(ke.end)}function c(){return Jet(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(ke){if(this.data.expectingFirstListItemValue){const Oe=this.stack[this.stack.length-2];Oe.start=Number.parseInt(this.sliceSerialize(ke),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.lang=ke}function p(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.meta=ke}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function v(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke.replace(/(\r?\n|\r)$/g,"")}function b(ke){const Oe=this.resume(),ht=this.stack[this.stack.length-1];ht.label=Oe,ht.identifier=L2(this.sliceSerialize(ke)).toLowerCase()}function w(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=ke}function E(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=ke}function T(ke){const Oe=this.stack[this.stack.length-1];if(!Oe.depth){const ht=this.sliceSerialize(ke).length;Oe.depth=ht}}function C(){this.data.setextHeadingSlurpLineEnding=!0}function I(ke){const Oe=this.stack[this.stack.length-1];Oe.depth=this.sliceSerialize(ke).codePointAt(0)===61?1:2}function R(){this.data.setextHeadingSlurpLineEnding=void 0}function N(ke){const ht=this.stack[this.stack.length-1].children;let Lt=ht[ht.length-1];(!Lt||Lt.type!=="text")&&(Lt=dt(),Lt.position={start:wv(ke.start),end:void 0},ht.push(Lt)),this.stack.push(Lt)}function O(ke){const Oe=this.stack.pop();Oe.value+=this.sliceSerialize(ke),Oe.position.end=wv(ke.end)}function L(ke){const Oe=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ht=Oe.children[Oe.children.length-1];ht.position.end=wv(ke.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Oe.type)&&(N.call(this,ke),O.call(this,ke))}function B(){this.data.atHardBreak=!0}function F(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke}function H(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke}function Q(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.value=ke}function J(){const ke=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";ke.type+="Reference",ke.referenceType=Oe,delete ke.url,delete ke.title}else delete ke.identifier,delete ke.label;this.data.referenceType=void 0}function ne(){const ke=this.stack[this.stack.length-1];if(this.data.inReference){const Oe=this.data.referenceType||"shortcut";ke.type+="Reference",ke.referenceType=Oe,delete ke.url,delete ke.title}else delete ke.identifier,delete ke.label;this.data.referenceType=void 0}function Z(ke){const Oe=this.sliceSerialize(ke),ht=this.stack[this.stack.length-2];ht.label=Qnt(Oe),ht.identifier=L2(Oe).toLowerCase()}function ie(){const ke=this.stack[this.stack.length-1],Oe=this.resume(),ht=this.stack[this.stack.length-1];if(this.data.inReference=!0,ht.type==="link"){const Lt=ke.children;ht.children=Lt}else ht.alt=Oe}function q(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.url=ke}function U(){const ke=this.resume(),Oe=this.stack[this.stack.length-1];Oe.title=ke}function G(){this.data.inReference=void 0}function V(){this.data.referenceType="collapsed"}function Y(ke){const Oe=this.resume(),ht=this.stack[this.stack.length-1];ht.label=Oe,ht.identifier=L2(this.sliceSerialize(ke)).toLowerCase(),this.data.referenceType="full"}function ee(ke){this.data.characterReferenceType=ke.type}function ae(ke){const Oe=this.sliceSerialize(ke),ht=this.data.characterReferenceType;let Lt;ht?(Lt=PTe(Oe,ht==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Lt=KJ(Oe);const Ft=this.stack[this.stack.length-1];Ft.value+=Lt}function _e(ke){const Oe=this.stack.pop();Oe.position.end=wv(ke.end)}function pe(ke){O.call(this,ke);const Oe=this.stack[this.stack.length-1];Oe.url=this.sliceSerialize(ke)}function Te(ke){O.call(this,ke);const Oe=this.stack[this.stack.length-1];Oe.url="mailto:"+this.sliceSerialize(ke)}function Le(){return{type:"blockquote",children:[]}}function ye(){return{type:"code",lang:null,meta:null,value:""}}function he(){return{type:"inlineCode",value:""}}function $e(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function De(){return{type:"emphasis",children:[]}}function tt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function Me(){return{type:"html",value:""}}function Ge(){return{type:"image",title:null,url:"",alt:null}}function at(){return{type:"link",title:null,url:"",children:[]}}function yt(ke){return{type:"list",ordered:ke.type==="listOrdered",start:null,spread:ke._spread,children:[]}}function Tt(ke){return{type:"listItem",spread:ke._spread,checked:null,children:[]}}function Ot(){return{type:"paragraph",children:[]}}function qe(){return{type:"strong",children:[]}}function dt(){return{type:"text",value:""}}function wt(){return{type:"thematicBreak"}}}function wv(e){return{line:e.line,column:e.column,offset:e.offset}}function HTe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?HTe(e,r):trt(e,r)}}function trt(e,t){let n;for(n in t)if(VTe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Tce(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+PD({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+PD({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+PD({start:t.start,end:t.end})+") is still open")}function nrt(e){const t=this;t.parser=n;function n(r){return Znt(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function rrt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function irt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function srt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function ort(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function art(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function urt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=jA(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function lrt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function crt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function qTe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function frt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return qTe(e,t);const i={src:jA(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function drt(e,t){const n={src:jA(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function hrt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function prt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return qTe(e,t);const i={href:jA(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function mrt(e,t){const n={href:jA(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function grt(e,t,n){const r=e.all(t),i=n?yrt(n):WTe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function yrt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=WTe(n[r])}return t}function WTe(e){const t=e.spread;return t??e.children.length>1}function vrt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function brt(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function xrt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function _rt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function wrt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=sg(t.children[1]),u=DB(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Ert(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function Trt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Sce=9,Cce=32;function Srt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Ace(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Ace(t.slice(i),i>0,!1)),s.join("")}function Ace(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Sce||s===Cce;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Sce||s===Cce;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Crt(e,t){const n={type:"text",value:Srt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Art(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Irt={blockquote:rrt,break:irt,code:srt,delete:ort,emphasis:art,footnoteReference:urt,heading:lrt,html:crt,imageReference:frt,image:drt,inlineCode:hrt,linkReference:prt,link:mrt,listItem:grt,list:vrt,paragraph:brt,root:xrt,strong:_rt,table:wrt,tableCell:Trt,tableRow:Ert,text:Crt,thematicBreak:Art,toml:B4,yaml:B4,definition:B4,footnoteDefinition:B4};function B4(){}const GTe=-1,PB=0,K$=1,X$=2,JJ=3,ZJ=4,eZ=5,tZ=6,YTe=7,KTe=8,Ice=typeof self=="object"?self:globalThis,krt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case PB:case GTe:return n(o,i);case K$:{const a=n([],i);for(const u of o)a.push(r(u));return a}case X$:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case JJ:return n(new Date(o),i);case ZJ:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case eZ:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case tZ:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case YTe:{const{name:a,message:u}=o;return n(new Ice[a](u),i)}case KTe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Ice[s](o),i)};return r},kce=e=>krt(new Map,e)(0),NS="",{toString:Rrt}={},{keys:Drt}=Object,Xk=e=>{const t=typeof e;if(t!=="object"||!e)return[PB,t];const n=Rrt.call(e).slice(8,-1);switch(n){case"Array":return[K$,NS];case"Object":return[X$,NS];case"Date":return[JJ,NS];case"RegExp":return[ZJ,NS];case"Map":return[eZ,NS];case"Set":return[tZ,NS]}return n.includes("Array")?[K$,n]:n.includes("Error")?[YTe,n]:[X$,n]},j4=([e,t])=>e===PB&&(t==="function"||t==="symbol"),Nrt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=Xk(o);switch(a){case PB:{let c=o;switch(u){case"bigint":a=KTe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([GTe],o)}return i([a,c],o)}case K$:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case X$:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Drt(o))(e||!j4(Xk(o[d])))&&c.push([s(d),s(o[d])]);return f}case JJ:return i([a,o.toISOString()],o);case ZJ:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case eZ:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(j4(Xk(d))||j4(Xk(h))))&&c.push([s(d),s(h)]);return f}case tZ:{const c=[],f=i([a,c],o);for(const d of o)(e||!j4(Xk(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Rce=(e,{json:t,lossy:n}={})=>{const r=[];return Nrt(!(t||n),!!t,new Map,r)(e),r},gC=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?kce(Rce(e,t)):structuredClone(e):(e,t)=>kce(Rce(e,t));function Prt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Ort(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Mrt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Prt,r=e.options.footnoteBackLabel||Ort,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=jA(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let b=typeof n=="string"?n:n(u,h);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const b=g.children[g.children.length-1];b&&b.type==="text"?b.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const v={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,v),a.push(v)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...gC(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const XTe=function(e){if(e==null)return Brt;if(typeof e=="function")return OB(e);if(typeof e=="object")return Array.isArray(e)?Lrt(e):$rt(e);if(typeof e=="string")return Frt(e);throw new Error("Expected function, string, or object as test")};function Lrt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=XTe(e[n]);return OB(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function $rt(e){const t=e;return OB(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function Frt(e){return OB(t);function t(n){return n&&n.type===e}}function OB(e){return t;function t(n,r,i){return!!(jrt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Brt(){return!0}function jrt(e){return e!==null&&typeof e=="object"&&"type"in e}const QTe=[],Urt=!0,Dce=!1,zrt="skip";function Vrt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=XTe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=QTe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Hrt(n(u,c)),h[0]===Dce))return h;if("children"in u&&u.children){const v=u;if(v.children&&h[0]!==zrt)for(m=(r?v.children.length:-1)+o,g=c.concat(v);m>-1&&m<v.children.length;){const b=v.children[m];if(p=a(b,m,g)(),p[0]===Dce)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Hrt(e){return Array.isArray(e)?e:typeof e=="number"?[Urt,e]:e==null?QTe:[e]}function nZ(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Vrt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const TW={}.hasOwnProperty,qrt={};function Wrt(e,t){const n=t||qrt,r=new Map,i=new Map,s=new Map,o={...Irt,...n.handlers},a={all:l,applyData:Yrt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Grt,wrap:Xrt};return nZ(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(TW.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,v=gC(g);return v.children=a.all(c),v}return gC(c)}return(a.options.unknownHandler||Krt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Nce(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Nce(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Grt(e,t){e.position&&(t.position=Iet(e))}function Yrt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,gC(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Krt(e,t){const n=t.data||{},r="value"in t&&!(TW.call(n,"hProperties")||TW.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Xrt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Nce(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Pce(e,t){const n=Wrt(e,t),r=n.one(e,void 0),i=Mrt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Qrt(e,t){return e&&"run"in e?async function(n,r){const i=Pce(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Pce(n,{file:r,...t||e})}}function Oce(e){if(e)throw e}var Tz,Mce;function Jrt(){if(Mce)return Tz;Mce=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=Object.defineProperty,r=Object.getOwnPropertyDescriptor,i=function(l){return typeof Array.isArray=="function"?Array.isArray(l):t.call(l)==="[object Array]"},s=function(l){if(!l||t.call(l)!=="[object Object]")return!1;var c=e.call(l,"constructor"),f=l.constructor&&l.constructor.prototype&&e.call(l.constructor.prototype,"isPrototypeOf");if(l.constructor&&!c&&!f)return!1;var d;for(d in l);return typeof d>"u"||e.call(l,d)},o=function(l,c){n&&c.name==="__proto__"?n(l,c.name,{enumerable:!0,configurable:!0,value:c.newValue,writable:!0}):l[c.name]=c.newValue},a=function(l,c){if(c==="__proto__")if(e.call(l,c)){if(r)return r(l,c).value}else return;return l[c]};return Tz=function u(){var l,c,f,d,h,p,m=arguments[0],g=1,v=arguments.length,b=!1;for(typeof m=="boolean"&&(b=m,m=arguments[1]||{},g=2),(m==null||typeof m!="object"&&typeof m!="function")&&(m={});g<v;++g)if(l=arguments[g],l!=null)for(c in l)f=a(m,c),d=a(l,c),m!==d&&(b&&d&&(s(d)||(h=i(d)))?(h?(h=!1,p=f&&i(f)?f:[]):p=f&&s(f)?f:{},o(m,{name:c,newValue:u(b,p,d)})):typeof d<"u"&&o(m,{name:c,newValue:d}));return m},Tz}var Zrt=Jrt();const Sz=yh(Zrt);function SW(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function eit(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?tit(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function tit(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Vm={basename:nit,dirname:rit,extname:iit,join:sit,sep:"/"};function nit(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');e3(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function rit(e){if(e3(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function iit(e){e3(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function sit(...e){let t=-1,n;for(;++t<e.length;)e3(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":oit(n)}function oit(e){e3(e);const t=e.codePointAt(0)===47;let n=ait(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function ait(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function e3(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const uit={cwd:lit};function lit(){return"/"}function CW(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function cit(e){if(typeof e=="string")e=new URL(e);else if(!CW(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return fit(e)}function fit(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Cz=["history","path","basename","stem","extname","dirname"];class JTe{constructor(t){let n;t?CW(t)?n={path:t}:typeof t=="string"||dit(t)?n={value:t}:n=t:n={},this.cwd=uit.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Cz.length;){const s=Cz[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Cz.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Vm.basename(this.path):void 0}set basename(t){Iz(t,"basename"),Az(t,"basename"),this.path=Vm.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Vm.dirname(this.path):void 0}set dirname(t){Lce(this.basename,"dirname"),this.path=Vm.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Vm.extname(this.path):void 0}set extname(t){if(Az(t,"extname"),Lce(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Vm.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){CW(t)&&(t=cit(t)),Iz(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Vm.basename(this.path,this.extname):void 0}set stem(t){Iz(t,"stem"),Az(t,"stem"),this.path=Vm.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new vl(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Az(e,t){if(e&&e.includes(Vm.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Vm.sep+"`")}function Iz(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Lce(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function dit(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const hit=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},pit={}.hasOwnProperty;class rZ extends hit{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=eit()}copy(){const t=new rZ;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(Sz(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Dz("data",this.frozen),this.namespace[t]=n,this):pit.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Dz("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=U4(t),r=this.parser||this.Parser;return kz("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),kz("process",this.parser||this.Parser),Rz("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=U4(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);yit(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),kz("processSync",this.parser||this.Parser),Rz("processSync",this.compiler||this.Compiler),this.process(t,i),Fce("processSync","process",n),r;function i(s,o){n=!0,Oce(s),r=o}}run(t,n,r){$ce(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=U4(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Fce("runSync","run",r),i;function s(o,a){Oce(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=U4(n),i=this.compiler||this.Compiler;return Rz("stringify",i),$ce(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Dz("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=Sz(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];SW(m)&&SW(h)&&(h=Sz(!0,m,h)),r[d]=[l,h,...p]}}}}const mit=new rZ().freeze();function kz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Rz(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Dz(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function $ce(e){if(!SW(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Fce(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function U4(e){return git(e)?e:new JTe(e)}function git(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function yit(e){return typeof e=="string"||vit(e)}function vit(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const bit="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Bce=[],jce={allowDangerousHtml:!0},xit=/^(https?|ircs?|mailto|xmpp)$/i,_it=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function wit(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Bce,u=e.remarkPlugins||Bce,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...jce}:jce,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||Eit,h=mit().use(nrt).use(u).use(Qrt,l).use(a),p=new JTe;typeof r=="string"&&(p.value=r);for(const b of _it)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+bit+b.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),nZ(g,v),Oet(g,{Fragment:S.Fragment,components:s,ignoreInvalidStyle:!0,jsx:S.jsx,jsxs:S.jsxs,passKeys:!0,passNode:!0});function v(b,w,E){if(b.type==="raw"&&E&&typeof w=="number")return c?E.children.splice(w,1):E.children[w]={type:"text",value:b.value},w;if(b.type==="element"){let T;for(T in _z)if(Object.hasOwn(_z,T)&&Object.hasOwn(b.properties,T)){const C=b.properties[T],I=_z[T];(I===null||I.includes(b.tagName))&&(b.properties[T]=d(String(C||""),T,b))}}if(b.type==="element"){let T=t?!t.includes(b.tagName):o?o.includes(b.tagName):!1;if(!T&&n&&typeof w=="number"&&(T=!n(b,w,E)),T&&E&&typeof w=="number")return f&&b.children?E.children.splice(w,1,...b.children):E.children.splice(w,1),w}}}function Eit(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t===-1||i!==-1&&t>i||n!==-1&&t>n||r!==-1&&t>r||xit.test(e.slice(0,t))?e:""}const Uce=/[#.]/g;function Tit(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Uce.lastIndex=i;const a=Uce.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Sit=new Set(["button","menu","reset","submit"]),AW={}.hasOwnProperty;function ZTe(e,t,n){const r=n&&kit(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Tit(s,t),l.tagName=l.tagName.toLowerCase(),r&&AW.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Cit(o,l.tagName)){let c;for(c in o)AW.call(o,c)&&Ait(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)IW(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Cit(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Sit.has(e.type.toLowerCase()):!("value"in e)}function Ait(e,t,n,r){const i=RB(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=ace(r):i.commaSeparated?o=nce(r):i.commaOrSpaceSeparated?o=ace(nce(r).join(" ")):o=zce(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Iit(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=zce(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function IW(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)IW(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?IW(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function zce(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||_N(n)===_N(t)))return!0}return n}function Iit(e){const t=[];let n;for(n in e)AW.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function kit(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Rit=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Dit=ZTe(ZP,"div"),Nit=ZTe(yx,"g",Rit),Nz=/\r?\n|\r/g;function Pit(e){const t=String(e),n=[];for(Nz.lastIndex=0;Nz.test(t);)n.push(Nz.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const vw={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},eSe={}.hasOwnProperty,Oit=Object.prototype;function Mit(e,t){const n=t;return iZ({file:n.file||void 0,location:!1,schema:n.space==="svg"?yx:ZP,verbose:n.verbose||!1},e)}function iZ(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},eL(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:tSe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=Pit(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},eL(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},eL(e,r,n),n}default:return n=Lit(e,t),n}}function tSe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=iZ(e,t[n]);r.push(i)}return r}function Lit(e,t){const n=e.schema;e.schema=t.namespaceURI===vw.svg?yx:ZP;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;eSe.call(Oit,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Nit:Dit)(t.tagName,i,tSe(e,t.childNodes));if(eL(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&y2(u.startTag),c=u&&u.endTag&&y2(u.endTag),f=iZ(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function eL(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=$it(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function $it(e,t,n){const r=y2(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)eSe.call(n.attrs,o)&&(s[RB(e.schema,o).property]=y2(n.attrs[o]));n.startTag;const a=y2(n.startTag),u=n.endTag?y2(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function y2(e){const t=Vce({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Vce({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Vce(e){return e.line&&e.column?e:void 0}const Hce={}.hasOwnProperty;function nSe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Hce.call(i,e)){const u=String(i[e]);o=Hce.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Fit={}.hasOwnProperty,rSe=nSe("type",{handlers:{root:jit,element:qit,text:Vit,comment:Hit,doctype:zit}});function Bit(e,t){const r=t.space;return rSe(e,r==="svg"?yx:ZP)}function jit(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=sZ(e.children,n,t),UA(e,n),n}function Uit(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=sZ(e.children,n,t),UA(e,n),n}function zit(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return UA(e,t),t}function Vit(e){const t={nodeName:"#text",value:e.value,parentNode:null};return UA(e,t),t}function Hit(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return UA(e,t),t}function qit(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=yx);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&Fit.call(e.properties,s)){const u=Wit(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:vw[o],childNodes:[],parentNode:null};return a.childNodes=sZ(e.children,a,r),UA(e,a),e.tagName==="template"&&e.content&&(a.content=Uit(e.content,r)),a}function Wit(e,t,n){const r=RB(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?yTe(n):CTe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=vw[r.space]}return i}function sZ(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=rSe(e[r],n);s.parentNode=t,i.push(s)}return i}function UA(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Git=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],Yit=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Rs="";var de;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(de=de||(de={}));const Rc={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function iSe(e){return e>=55296&&e<=57343}function Kit(e){return e>=56320&&e<=57343}function Xit(e,t){return(e-55296)*1024+9216+t}function sSe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function oSe(e){return e>=64976&&e<=65007||Yit.has(e)}var et;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(et=et||(et={}));const Qit=65536;class Jit{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Qit,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Kit(n))return this.pos++,this._addGap(),Xit(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,de.EOF;return this._err(et.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,de.EOF;const r=this.html.charCodeAt(n);return r===de.CARRIAGE_RETURN?de.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,de.EOF;let t=this.html.charCodeAt(this.pos);return t===de.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,de.LINE_FEED):t===de.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,iSe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===de.LINE_FEED||t===de.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){sSe(t)?this._err(et.controlCharacterInInputStream):oSe(t)&&this._err(et.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var wr;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(wr=wr||(wr={}));function aSe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Av=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Zit=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Pz;const est=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),tst=(Pz=String.fromCodePoint)!==null&&Pz!==void 0?Pz:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function nst(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=est.get(e))!==null&&t!==void 0?t:e}var $a;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})($a||($a={}));const rst=32;var d0;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(d0||(d0={}));function kW(e){return e>=$a.ZERO&&e<=$a.NINE}function ist(e){return e>=$a.UPPER_A&&e<=$a.UPPER_F||e>=$a.LOWER_A&&e<=$a.LOWER_F}function sst(e){return e>=$a.UPPER_A&&e<=$a.UPPER_Z||e>=$a.LOWER_A&&e<=$a.LOWER_Z||kW(e)}function ost(e){return e===$a.EQUALS||sst(e)}var Da;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Da||(Da={}));var sw;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(sw||(sw={}));class ast{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Da.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=sw.Strict}startEntity(t){this.decodeMode=t,this.state=Da.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Da.EntityStart:return t.charCodeAt(n)===$a.NUM?(this.state=Da.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Da.NamedEntity,this.stateNamedEntity(t,n));case Da.NumericStart:return this.stateNumericStart(t,n);case Da.NumericDecimal:return this.stateNumericDecimal(t,n);case Da.NumericHex:return this.stateNumericHex(t,n);case Da.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|rst)===$a.LOWER_X?(this.state=Da.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Da.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(kW(i)||ist(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(kW(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===$a.SEMI)this.consumed+=1;else if(this.decodeMode===sw.Strict)return 0;return this.emitCodePoint(nst(this.result),this.consumed),this.errors&&(t!==$a.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&d0.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=lSe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===sw.Attribute&&(s===0||ost(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&d0.VALUE_LENGTH)>>14,s!==0){if(o===$a.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==sw.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&d0.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~d0.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Da.NamedEntity:return this.result!==0&&(this.decodeMode!==sw.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Da.NumericDecimal:return this.emitNumericEntity(0,2);case Da.NumericHex:return this.emitNumericEntity(0,3);case Da.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Da.EntityStart:return 0}}}function uSe(e){let t="";const n=new ast(e,r=>t+=tst(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function lSe(e,t,n,r){const i=(t&d0.BRANCH_LENGTH)>>7,s=t&d0.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}uSe(Av);uSe(Zit);var ct;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(ct=ct||(ct={}));var ab;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(ab=ab||(ab={}));var Hf;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Hf=Hf||(Hf={}));var He;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(He=He||(He={}));var j;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(j=j||(j={}));const ust=new Map([[He.A,j.A],[He.ADDRESS,j.ADDRESS],[He.ANNOTATION_XML,j.ANNOTATION_XML],[He.APPLET,j.APPLET],[He.AREA,j.AREA],[He.ARTICLE,j.ARTICLE],[He.ASIDE,j.ASIDE],[He.B,j.B],[He.BASE,j.BASE],[He.BASEFONT,j.BASEFONT],[He.BGSOUND,j.BGSOUND],[He.BIG,j.BIG],[He.BLOCKQUOTE,j.BLOCKQUOTE],[He.BODY,j.BODY],[He.BR,j.BR],[He.BUTTON,j.BUTTON],[He.CAPTION,j.CAPTION],[He.CENTER,j.CENTER],[He.CODE,j.CODE],[He.COL,j.COL],[He.COLGROUP,j.COLGROUP],[He.DD,j.DD],[He.DESC,j.DESC],[He.DETAILS,j.DETAILS],[He.DIALOG,j.DIALOG],[He.DIR,j.DIR],[He.DIV,j.DIV],[He.DL,j.DL],[He.DT,j.DT],[He.EM,j.EM],[He.EMBED,j.EMBED],[He.FIELDSET,j.FIELDSET],[He.FIGCAPTION,j.FIGCAPTION],[He.FIGURE,j.FIGURE],[He.FONT,j.FONT],[He.FOOTER,j.FOOTER],[He.FOREIGN_OBJECT,j.FOREIGN_OBJECT],[He.FORM,j.FORM],[He.FRAME,j.FRAME],[He.FRAMESET,j.FRAMESET],[He.H1,j.H1],[He.H2,j.H2],[He.H3,j.H3],[He.H4,j.H4],[He.H5,j.H5],[He.H6,j.H6],[He.HEAD,j.HEAD],[He.HEADER,j.HEADER],[He.HGROUP,j.HGROUP],[He.HR,j.HR],[He.HTML,j.HTML],[He.I,j.I],[He.IMG,j.IMG],[He.IMAGE,j.IMAGE],[He.INPUT,j.INPUT],[He.IFRAME,j.IFRAME],[He.KEYGEN,j.KEYGEN],[He.LABEL,j.LABEL],[He.LI,j.LI],[He.LINK,j.LINK],[He.LISTING,j.LISTING],[He.MAIN,j.MAIN],[He.MALIGNMARK,j.MALIGNMARK],[He.MARQUEE,j.MARQUEE],[He.MATH,j.MATH],[He.MENU,j.MENU],[He.META,j.META],[He.MGLYPH,j.MGLYPH],[He.MI,j.MI],[He.MO,j.MO],[He.MN,j.MN],[He.MS,j.MS],[He.MTEXT,j.MTEXT],[He.NAV,j.NAV],[He.NOBR,j.NOBR],[He.NOFRAMES,j.NOFRAMES],[He.NOEMBED,j.NOEMBED],[He.NOSCRIPT,j.NOSCRIPT],[He.OBJECT,j.OBJECT],[He.OL,j.OL],[He.OPTGROUP,j.OPTGROUP],[He.OPTION,j.OPTION],[He.P,j.P],[He.PARAM,j.PARAM],[He.PLAINTEXT,j.PLAINTEXT],[He.PRE,j.PRE],[He.RB,j.RB],[He.RP,j.RP],[He.RT,j.RT],[He.RTC,j.RTC],[He.RUBY,j.RUBY],[He.S,j.S],[He.SCRIPT,j.SCRIPT],[He.SECTION,j.SECTION],[He.SELECT,j.SELECT],[He.SOURCE,j.SOURCE],[He.SMALL,j.SMALL],[He.SPAN,j.SPAN],[He.STRIKE,j.STRIKE],[He.STRONG,j.STRONG],[He.STYLE,j.STYLE],[He.SUB,j.SUB],[He.SUMMARY,j.SUMMARY],[He.SUP,j.SUP],[He.TABLE,j.TABLE],[He.TBODY,j.TBODY],[He.TEMPLATE,j.TEMPLATE],[He.TEXTAREA,j.TEXTAREA],[He.TFOOT,j.TFOOT],[He.TD,j.TD],[He.TH,j.TH],[He.THEAD,j.THEAD],[He.TITLE,j.TITLE],[He.TR,j.TR],[He.TRACK,j.TRACK],[He.TT,j.TT],[He.U,j.U],[He.UL,j.UL],[He.SVG,j.SVG],[He.VAR,j.VAR],[He.WBR,j.WBR],[He.XMP,j.XMP]]);function zA(e){var t;return(t=ust.get(e))!==null&&t!==void 0?t:j.UNKNOWN}const Nt=j,lst={[ct.HTML]:new Set([Nt.ADDRESS,Nt.APPLET,Nt.AREA,Nt.ARTICLE,Nt.ASIDE,Nt.BASE,Nt.BASEFONT,Nt.BGSOUND,Nt.BLOCKQUOTE,Nt.BODY,Nt.BR,Nt.BUTTON,Nt.CAPTION,Nt.CENTER,Nt.COL,Nt.COLGROUP,Nt.DD,Nt.DETAILS,Nt.DIR,Nt.DIV,Nt.DL,Nt.DT,Nt.EMBED,Nt.FIELDSET,Nt.FIGCAPTION,Nt.FIGURE,Nt.FOOTER,Nt.FORM,Nt.FRAME,Nt.FRAMESET,Nt.H1,Nt.H2,Nt.H3,Nt.H4,Nt.H5,Nt.H6,Nt.HEAD,Nt.HEADER,Nt.HGROUP,Nt.HR,Nt.HTML,Nt.IFRAME,Nt.IMG,Nt.INPUT,Nt.LI,Nt.LINK,Nt.LISTING,Nt.MAIN,Nt.MARQUEE,Nt.MENU,Nt.META,Nt.NAV,Nt.NOEMBED,Nt.NOFRAMES,Nt.NOSCRIPT,Nt.OBJECT,Nt.OL,Nt.P,Nt.PARAM,Nt.PLAINTEXT,Nt.PRE,Nt.SCRIPT,Nt.SECTION,Nt.SELECT,Nt.SOURCE,Nt.STYLE,Nt.SUMMARY,Nt.TABLE,Nt.TBODY,Nt.TD,Nt.TEMPLATE,Nt.TEXTAREA,Nt.TFOOT,Nt.TH,Nt.THEAD,Nt.TITLE,Nt.TR,Nt.TRACK,Nt.UL,Nt.WBR,Nt.XMP]),[ct.MATHML]:new Set([Nt.MI,Nt.MO,Nt.MN,Nt.MS,Nt.MTEXT,Nt.ANNOTATION_XML]),[ct.SVG]:new Set([Nt.TITLE,Nt.FOREIGN_OBJECT,Nt.DESC]),[ct.XLINK]:new Set,[ct.XML]:new Set,[ct.XMLNS]:new Set};function cSe(e){return e===Nt.H1||e===Nt.H2||e===Nt.H3||e===Nt.H4||e===Nt.H5||e===Nt.H6}He.STYLE,He.SCRIPT,He.XMP,He.IFRAME,He.NOEMBED,He.NOFRAMES,He.PLAINTEXT;const cst=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var me;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(me||(me={}));const Ao={DATA:me.DATA,RCDATA:me.RCDATA,RAWTEXT:me.RAWTEXT,SCRIPT_DATA:me.SCRIPT_DATA,PLAINTEXT:me.PLAINTEXT,CDATA_SECTION:me.CDATA_SECTION};function MD(e){return e>=de.DIGIT_0&&e<=de.DIGIT_9}function UR(e){return e>=de.LATIN_CAPITAL_A&&e<=de.LATIN_CAPITAL_Z}function fst(e){return e>=de.LATIN_SMALL_A&&e<=de.LATIN_SMALL_Z}function Iv(e){return fst(e)||UR(e)}function RW(e){return Iv(e)||MD(e)}function fSe(e){return e>=de.LATIN_CAPITAL_A&&e<=de.LATIN_CAPITAL_F}function dSe(e){return e>=de.LATIN_SMALL_A&&e<=de.LATIN_SMALL_F}function dst(e){return MD(e)||fSe(e)||dSe(e)}function z4(e){return e+32}function hSe(e){return e===de.SPACE||e===de.LINE_FEED||e===de.TABULATION||e===de.FORM_FEED}function hst(e){return e===de.EQUALS_SIGN||RW(e)}function qce(e){return hSe(e)||e===de.SOLIDUS||e===de.GREATER_THAN_SIGN}class pst{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=me.DATA,this.returnState=me.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Jit(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:wr.START_TAG,tagName:"",tagID:j.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:wr.END_TAG,tagName:"",tagID:j.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:wr.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:wr.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(aSe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(et.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=zA(t.tagName),t.type===wr.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(et.endTagWithAttributes),t.selfClosing&&this._err(et.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case wr.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case wr.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case wr.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:wr.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=hSe(t)?wr.WHITESPACE_CHARACTER:t===de.NULL?wr.NULL_CHARACTER:wr.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(wr.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Av[0];s>=0&&(s=lSe(Av,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Av[s];const a=o&d0.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==de.SEMICOLON&&this._isCharacterReferenceInAttribute()&&hst(this.preprocessor.peek(1))?(n=[de.AMPERSAND],s+=u):(n=u===0?[Av[s]&~d0.VALUE_LENGTH]:u===1?[Av[++s]]:[Av[++s],Av[++s]],r=0,i=t!==de.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(et.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===me.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===me.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===me.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case me.DATA:{this._stateData(t);break}case me.RCDATA:{this._stateRcdata(t);break}case me.RAWTEXT:{this._stateRawtext(t);break}case me.SCRIPT_DATA:{this._stateScriptData(t);break}case me.PLAINTEXT:{this._statePlaintext(t);break}case me.TAG_OPEN:{this._stateTagOpen(t);break}case me.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case me.TAG_NAME:{this._stateTagName(t);break}case me.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case me.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case me.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case me.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case me.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case me.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case me.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case me.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case me.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case me.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case me.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case me.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case me.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case me.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case me.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case me.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case me.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case me.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case me.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case me.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case me.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case me.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case me.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case me.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case me.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case me.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case me.BOGUS_COMMENT:{this._stateBogusComment(t);break}case me.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case me.COMMENT_START:{this._stateCommentStart(t);break}case me.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case me.COMMENT:{this._stateComment(t);break}case me.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case me.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case me.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case me.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case me.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case me.COMMENT_END:{this._stateCommentEnd(t);break}case me.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case me.DOCTYPE:{this._stateDoctype(t);break}case me.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case me.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case me.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case me.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case me.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case me.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case me.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case me.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case me.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case me.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case me.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case me.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case me.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case me.CDATA_SECTION:{this._stateCdataSection(t);break}case me.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case me.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case me.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case me.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case me.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case me.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case me.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case me.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case me.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case me.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case de.LESS_THAN_SIGN:{this.state=me.TAG_OPEN;break}case de.AMPERSAND:{this.returnState=me.DATA,this.state=me.CHARACTER_REFERENCE;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitCodePoint(t);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case de.AMPERSAND:{this.returnState=me.RCDATA,this.state=me.CHARACTER_REFERENCE;break}case de.LESS_THAN_SIGN:{this.state=me.RCDATA_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case de.LESS_THAN_SIGN:{this.state=me.RAWTEXT_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Iv(t))this._createStartTagToken(),this.state=me.TAG_NAME,this._stateTagName(t);else switch(t){case de.EXCLAMATION_MARK:{this.state=me.MARKUP_DECLARATION_OPEN;break}case de.SOLIDUS:{this.state=me.END_TAG_OPEN;break}case de.QUESTION_MARK:{this._err(et.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=me.BOGUS_COMMENT,this._stateBogusComment(t);break}case de.EOF:{this._err(et.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(et.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=me.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Iv(t))this._createEndTagToken(),this.state=me.TAG_NAME,this._stateTagName(t);else switch(t){case de.GREATER_THAN_SIGN:{this._err(et.missingEndTagName),this.state=me.DATA;break}case de.EOF:{this._err(et.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(et.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=me.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_ATTRIBUTE_NAME;break}case de.SOLIDUS:{this.state=me.SELF_CLOSING_START_TAG;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentTagToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.tagName+=Rs;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(UR(t)?z4(t):t)}}_stateRcdataLessThanSign(t){t===de.SOLIDUS?this.state=me.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=me.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Iv(t)?(this.state=me.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=me.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=me.BEFORE_ATTRIBUTE_NAME,!1;case de.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=me.SELF_CLOSING_START_TAG,!1;case de.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=me.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===de.SOLIDUS?this.state=me.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=me.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Iv(t)?(this.state=me.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=me.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case de.SOLIDUS:{this.state=me.SCRIPT_DATA_END_TAG_OPEN;break}case de.EXCLAMATION_MARK:{this.state=me.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=me.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Iv(t)?(this.state=me.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===de.HYPHEN_MINUS?(this.state=me.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===de.HYPHEN_MINUS?(this.state=me.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=me.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_ESCAPED,this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case de.HYPHEN_MINUS:{this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case de.GREATER_THAN_SIGN:{this.state=me.SCRIPT_DATA,this._emitChars(">");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_ESCAPED,this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===de.SOLIDUS?this.state=me.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Iv(t)?(this._emitChars("<"),this.state=me.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Iv(t)?(this.state=me.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Rc.SCRIPT,!1)&&qce(this.preprocessor.peek(Rc.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Rc.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=me.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case de.HYPHEN_MINUS:{this._emitChars("-");break}case de.LESS_THAN_SIGN:{this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case de.GREATER_THAN_SIGN:{this.state=me.SCRIPT_DATA,this._emitChars(">");break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Rs);break}case de.EOF:{this._err(et.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===de.SOLIDUS?(this.state=me.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Rc.SCRIPT,!1)&&qce(this.preprocessor.peek(Rc.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Rc.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=me.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=me.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.SOLIDUS:case de.GREATER_THAN_SIGN:case de.EOF:{this.state=me.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case de.EQUALS_SIGN:{this._err(et.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=me.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=me.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:case de.SOLIDUS:case de.GREATER_THAN_SIGN:case de.EOF:{this._leaveAttrName(),this.state=me.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case de.EQUALS_SIGN:{this._leaveAttrName(),this.state=me.BEFORE_ATTRIBUTE_VALUE;break}case de.QUOTATION_MARK:case de.APOSTROPHE:case de.LESS_THAN_SIGN:{this._err(et.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.name+=Rs;break}default:this.currentAttr.name+=String.fromCodePoint(UR(t)?z4(t):t)}}_stateAfterAttributeName(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.SOLIDUS:{this.state=me.SELF_CLOSING_START_TAG;break}case de.EQUALS_SIGN:{this.state=me.BEFORE_ATTRIBUTE_VALUE;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=me.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{this.state=me.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this.state=me.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingAttributeValue),this.state=me.DATA,this.emitCurrentTagToken();break}default:this.state=me.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case de.QUOTATION_MARK:{this.state=me.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case de.AMPERSAND:{this.returnState=me.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=me.CHARACTER_REFERENCE;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case de.APOSTROPHE:{this.state=me.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case de.AMPERSAND:{this.returnState=me.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=me.CHARACTER_REFERENCE;break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this._leaveAttrValue(),this.state=me.BEFORE_ATTRIBUTE_NAME;break}case de.AMPERSAND:{this.returnState=me.ATTRIBUTE_VALUE_UNQUOTED,this.state=me.CHARACTER_REFERENCE;break}case de.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=me.DATA,this.emitCurrentTagToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),this.currentAttr.value+=Rs;break}case de.QUOTATION_MARK:case de.APOSTROPHE:case de.LESS_THAN_SIGN:case de.EQUALS_SIGN:case de.GRAVE_ACCENT:{this._err(et.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this._leaveAttrValue(),this.state=me.BEFORE_ATTRIBUTE_NAME;break}case de.SOLIDUS:{this._leaveAttrValue(),this.state=me.SELF_CLOSING_START_TAG;break}case de.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=me.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._err(et.missingWhitespaceBetweenAttributes),this.state=me.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case de.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=me.DATA,this.emitCurrentTagToken();break}case de.EOF:{this._err(et.eofInTag),this._emitEOFToken();break}default:this._err(et.unexpectedSolidusInTag),this.state=me.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentComment(n);break}case de.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.data+=Rs;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Rc.DASH_DASH,!0)?(this._createCommentToken(Rc.DASH_DASH.length+1),this.state=me.COMMENT_START):this._consumeSequenceIfMatch(Rc.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Rc.DOCTYPE.length+1),this.state=me.DOCTYPE):this._consumeSequenceIfMatch(Rc.CDATA_START,!0)?this.inForeignNode?this.state=me.CDATA_SECTION:(this._err(et.cdataInHtmlContent),this._createCommentToken(Rc.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=me.BOGUS_COMMENT):this._ensureHibernation()||(this._err(et.incorrectlyOpenedComment),this._createCommentToken(2),this.state=me.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_START_DASH;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptClosingOfEmptyComment),this.state=me.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=me.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_END;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptClosingOfEmptyComment),this.state=me.DATA,this.emitCurrentComment(n);break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=me.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_END_DASH;break}case de.LESS_THAN_SIGN:{n.data+="<",this.state=me.COMMENT_LESS_THAN_SIGN;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.data+=Rs;break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case de.EXCLAMATION_MARK:{n.data+="!",this.state=me.COMMENT_LESS_THAN_SIGN_BANG;break}case de.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=me.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===de.HYPHEN_MINUS?this.state=me.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=me.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===de.HYPHEN_MINUS?this.state=me.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=me.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==de.GREATER_THAN_SIGN&&t!==de.EOF&&this._err(et.nestedComment),this.state=me.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{this.state=me.COMMENT_END;break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=me.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentComment(n);break}case de.EXCLAMATION_MARK:{this.state=me.COMMENT_END_BANG;break}case de.HYPHEN_MINUS:{n.data+="-";break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=me.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case de.HYPHEN_MINUS:{n.data+="--!",this.state=me.COMMENT_END_DASH;break}case de.GREATER_THAN_SIGN:{this._err(et.incorrectlyClosedComment),this.state=me.DATA,this.emitCurrentComment(n);break}case de.EOF:{this._err(et.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=me.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this.state=me.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case de.EOF:{this._err(et.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingWhitespaceBeforeDoctypeName),this.state=me.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(UR(t))this._createDoctypeToken(String.fromCharCode(z4(t))),this.state=me.DOCTYPE_NAME;else switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.NULL:{this._err(et.unexpectedNullCharacter),this._createDoctypeToken(Rs),this.state=me.DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=me.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.AFTER_DOCTYPE_NAME;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.name+=Rs;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(UR(t)?z4(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Rc.PUBLIC,!1)?this.state=me.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Rc.SYSTEM,!1)?this.state=me.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(et.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.publicId="",this.state=me.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case de.QUOTATION_MARK:{this.state=me.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.publicId+=Rs;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case de.APOSTROPHE:{this.state=me.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.publicId+=Rs;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case de.GREATER_THAN_SIGN:{this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.QUOTATION_MARK:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:{this.state=me.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.QUOTATION_MARK:{this._err(et.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{this._err(et.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.QUOTATION_MARK:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case de.APOSTROPHE:{n.systemId="",this.state=me.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case de.GREATER_THAN_SIGN:{this._err(et.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.DATA,this.emitCurrentDoctype(n);break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case de.QUOTATION_MARK:{this.state=me.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.systemId+=Rs;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case de.APOSTROPHE:{this.state=me.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case de.NULL:{this._err(et.unexpectedNullCharacter),n.systemId+=Rs;break}case de.GREATER_THAN_SIGN:{this._err(et.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case de.SPACE:case de.LINE_FEED:case de.TABULATION:case de.FORM_FEED:break;case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.EOF:{this._err(et.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(et.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=me.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case de.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=me.DATA;break}case de.NULL:{this._err(et.unexpectedNullCharacter);break}case de.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case de.RIGHT_SQUARE_BRACKET:{this.state=me.CDATA_SECTION_BRACKET;break}case de.EOF:{this._err(et.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===de.RIGHT_SQUARE_BRACKET?this.state=me.CDATA_SECTION_END:(this._emitChars("]"),this.state=me.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case de.GREATER_THAN_SIGN:{this.state=me.DATA;break}case de.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=me.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===de.NUMBER_SIGN?this.state=me.NUMERIC_CHARACTER_REFERENCE:RW(t)?(this.state=me.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this.state=me.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){RW(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===de.SEMICOLON&&this._err(et.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===de.LATIN_SMALL_X||t===de.LATIN_CAPITAL_X?this.state=me.HEXADEMICAL_CHARACTER_REFERENCE_START:MD(t)?(this.state=me.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(et.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(de.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){dst(t)?(this.state=me.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(et.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(de.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(de.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){fSe(t)?this.charRefCode=this.charRefCode*16+t-55:dSe(t)?this.charRefCode=this.charRefCode*16+t-87:MD(t)?this.charRefCode=this.charRefCode*16+t-48:t===de.SEMICOLON?this.state=me.NUMERIC_CHARACTER_REFERENCE_END:(this._err(et.missingSemicolonAfterCharacterReference),this.state=me.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){MD(t)?this.charRefCode=this.charRefCode*10+t-48:t===de.SEMICOLON?this.state=me.NUMERIC_CHARACTER_REFERENCE_END:(this._err(et.missingSemicolonAfterCharacterReference),this.state=me.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===de.NULL)this._err(et.nullCharacterReference),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(et.characterReferenceOutsideUnicodeRange),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(iSe(this.charRefCode))this._err(et.surrogateCharacterReference),this.charRefCode=de.REPLACEMENT_CHARACTER;else if(oSe(this.charRefCode))this._err(et.noncharacterCharacterReference);else if(sSe(this.charRefCode)||this.charRefCode===de.CARRIAGE_RETURN){this._err(et.controlCharacterReference);const n=cst.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const pSe=new Set([j.DD,j.DT,j.LI,j.OPTGROUP,j.OPTION,j.P,j.RB,j.RP,j.RT,j.RTC]),Wce=new Set([...pSe,j.CAPTION,j.COLGROUP,j.TBODY,j.TD,j.TFOOT,j.TH,j.THEAD,j.TR]),V4=new Map([[j.APPLET,ct.HTML],[j.CAPTION,ct.HTML],[j.HTML,ct.HTML],[j.MARQUEE,ct.HTML],[j.OBJECT,ct.HTML],[j.TABLE,ct.HTML],[j.TD,ct.HTML],[j.TEMPLATE,ct.HTML],[j.TH,ct.HTML],[j.ANNOTATION_XML,ct.MATHML],[j.MI,ct.MATHML],[j.MN,ct.MATHML],[j.MO,ct.MATHML],[j.MS,ct.MATHML],[j.MTEXT,ct.MATHML],[j.DESC,ct.SVG],[j.FOREIGN_OBJECT,ct.SVG],[j.TITLE,ct.SVG]]),mst=[j.H1,j.H2,j.H3,j.H4,j.H5,j.H6],gst=[j.TR,j.TEMPLATE,j.HTML],yst=[j.TBODY,j.TFOOT,j.THEAD,j.TEMPLATE,j.HTML],vst=[j.TABLE,j.TEMPLATE,j.HTML],bst=[j.TD,j.TH];class xst{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=j.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===j.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===ct.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==ct.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(mst,ct.HTML)}popUntilTableCellPopped(){this.popUntilPopped(bst,ct.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(vst,ct.HTML)}clearBackToTableBodyContext(){this.clearBackTo(yst,ct.HTML)}clearBackToTableRowContext(){this.clearBackTo(gst,ct.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===j.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===j.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ct.HTML)return!0;if(V4.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(cSe(n)&&r===ct.HTML)return!0;if(V4.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ct.HTML)return!0;if((r===j.UL||r===j.OL)&&i===ct.HTML||V4.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===ct.HTML)return!0;if(r===j.BUTTON&&i===ct.HTML||V4.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ct.HTML){if(r===t)return!0;if(r===j.TABLE||r===j.TEMPLATE||r===j.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===ct.HTML){if(n===j.TBODY||n===j.THEAD||n===j.TFOOT)return!0;if(n===j.TABLE||n===j.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===ct.HTML){if(r===t)return!0;if(r!==j.OPTION&&r!==j.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;pSe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Wce.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Wce.has(this.currentTagId);)this.pop()}}const Oz=3;var pp;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(pp=pp||(pp={}));const Gce={type:pp.Marker};class _st{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===pp.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Oz)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Oz)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=Oz&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Gce)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:pp.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:pp.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Gce);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===pp.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===pp.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===pp.Element&&n.element===t)}}function Yce(e){return{nodeName:"#text",value:e,parentNode:null}}const i2={createDocument(){return{nodeName:"#document",mode:Hf.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};i2.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(i2.isTextNode(n)){n.value+=t;return}}i2.appendChild(e,Yce(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&i2.isTextNode(r)?r.value+=t:i2.insertBefore(e,Yce(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},mSe="html",wst="about:legacy-compat",Est="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",gSe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Tst=[...gSe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Sst=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),ySe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Cst=[...ySe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Kce(e,t){return t.some(n=>e.startsWith(n))}function Ast(e){return e.name===mSe&&e.publicId===null&&(e.systemId===null||e.systemId===wst)}function Ist(e){if(e.name!==mSe)return Hf.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Est)return Hf.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Sst.has(n))return Hf.QUIRKS;let r=t===null?Tst:gSe;if(Kce(n,r))return Hf.QUIRKS;if(r=t===null?ySe:Cst,Kce(n,r))return Hf.LIMITED_QUIRKS}return Hf.NO_QUIRKS}const Xce={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},kst="definitionurl",Rst="definitionURL",Dst=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Nst=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:ct.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:ct.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:ct.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:ct.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:ct.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:ct.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:ct.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:ct.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:ct.XML}],["xml:space",{prefix:"xml",name:"space",namespace:ct.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:ct.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:ct.XMLNS}]]),Pst=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Ost=new Set([j.B,j.BIG,j.BLOCKQUOTE,j.BODY,j.BR,j.CENTER,j.CODE,j.DD,j.DIV,j.DL,j.DT,j.EM,j.EMBED,j.H1,j.H2,j.H3,j.H4,j.H5,j.H6,j.HEAD,j.HR,j.I,j.IMG,j.LI,j.LISTING,j.MENU,j.META,j.NOBR,j.OL,j.P,j.PRE,j.RUBY,j.S,j.SMALL,j.SPAN,j.STRONG,j.STRIKE,j.SUB,j.SUP,j.TABLE,j.TT,j.U,j.UL,j.VAR]);function Mst(e){const t=e.tagID;return t===j.FONT&&e.attrs.some(({name:r})=>r===ab.COLOR||r===ab.SIZE||r===ab.FACE)||Ost.has(t)}function vSe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===kst){e.attrs[t].name=Rst;break}}function bSe(e){for(let t=0;t<e.attrs.length;t++){const n=Dst.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function oZ(e){for(let t=0;t<e.attrs.length;t++){const n=Nst.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Lst(e){const t=Pst.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=zA(e.tagName))}function $st(e,t){return t===ct.MATHML&&(e===j.MI||e===j.MO||e===j.MN||e===j.MS||e===j.MTEXT)}function Fst(e,t,n){if(t===ct.MATHML&&e===j.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===ab.ENCODING){const i=n[r].value.toLowerCase();return i===Xce.TEXT_HTML||i===Xce.APPLICATION_XML}}return t===ct.SVG&&(e===j.FOREIGN_OBJECT||e===j.DESC||e===j.TITLE)}function Bst(e,t,n,r){return(!r||r===ct.HTML)&&Fst(e,t,n)||(!r||r===ct.MATHML)&&$st(e,t)}const jst="hidden",Ust=8,zst=3;var Ee;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(Ee||(Ee={}));const Vst={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},xSe=new Set([j.TABLE,j.TBODY,j.TFOOT,j.THEAD,j.TR]),Qce={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:i2,onParseError:null};let Jce=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=Ee.INITIAL,this.originalInsertionMode=Ee.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Qce,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new pst(this.options,this),this.activeFormattingElements=new _st(this.treeAdapter),this.fragmentContextID=r?zA(this.treeAdapter.getTagName(r)):j.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new xst(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Qce,...n};t??(t=r.treeAdapter.createElement(He.TEMPLATE,ct.HTML,[]));const i=r.treeAdapter.createElement("documentmock",ct.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===j.TEMPLATE&&s.tmplInsertionModeStack.unshift(Ee.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Vst,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===ct.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,ct.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=Ee.TEXT}switchToPlaintextParsing(){this.insertionMode=Ee.TEXT,this.originalInsertionMode=Ee.IN_BODY,this.tokenizer.state=Ao.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===He.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==ct.HTML))switch(this.fragmentContextID){case j.TITLE:case j.TEXTAREA:{this.tokenizer.state=Ao.RCDATA;break}case j.STYLE:case j.XMP:case j.IFRAME:case j.NOEMBED:case j.NOFRAMES:case j.NOSCRIPT:{this.tokenizer.state=Ao.RAWTEXT;break}case j.SCRIPT:{this.tokenizer.state=Ao.SCRIPT_DATA;break}case j.PLAINTEXT:{this.tokenizer.state=Ao.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,ct.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,ct.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(He.HTML,ct.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,j.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===wr.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===j.SVG&&this.treeAdapter.getTagName(n)===He.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===ct.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===j.MGLYPH||t.tagID===j.MALIGNMARK)&&!this._isIntegrationPoint(r,n,ct.HTML)}_processToken(t){switch(t.type){case wr.CHARACTER:{this.onCharacter(t);break}case wr.NULL_CHARACTER:{this.onNullCharacter(t);break}case wr.COMMENT:{this.onComment(t);break}case wr.DOCTYPE:{this.onDoctype(t);break}case wr.START_TAG:{this._processStartTag(t);break}case wr.END_TAG:{this.onEndTag(t);break}case wr.EOF:{this.onEof(t);break}case wr.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Bst(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===pp.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=Ee.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(j.P),this.openElements.popUntilTagNamePopped(j.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case j.TR:{this.insertionMode=Ee.IN_ROW;return}case j.TBODY:case j.THEAD:case j.TFOOT:{this.insertionMode=Ee.IN_TABLE_BODY;return}case j.CAPTION:{this.insertionMode=Ee.IN_CAPTION;return}case j.COLGROUP:{this.insertionMode=Ee.IN_COLUMN_GROUP;return}case j.TABLE:{this.insertionMode=Ee.IN_TABLE;return}case j.BODY:{this.insertionMode=Ee.IN_BODY;return}case j.FRAMESET:{this.insertionMode=Ee.IN_FRAMESET;return}case j.SELECT:{this._resetInsertionModeForSelect(t);return}case j.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case j.HTML:{this.insertionMode=this.headElement?Ee.AFTER_HEAD:Ee.BEFORE_HEAD;return}case j.TD:case j.TH:{if(t>0){this.insertionMode=Ee.IN_CELL;return}break}case j.HEAD:{if(t>0){this.insertionMode=Ee.IN_HEAD;return}break}}this.insertionMode=Ee.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===j.TEMPLATE)break;if(r===j.TABLE){this.insertionMode=Ee.IN_SELECT_IN_TABLE;return}}this.insertionMode=Ee.IN_SELECT}_isElementCausesFosterParenting(t){return xSe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case j.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===ct.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case j.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return lst[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){bat(this,t);return}switch(this.insertionMode){case Ee.INITIAL:{Qk(this,t);break}case Ee.BEFORE_HTML:{LD(this,t);break}case Ee.BEFORE_HEAD:{$D(this,t);break}case Ee.IN_HEAD:{FD(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{BD(this,t);break}case Ee.AFTER_HEAD:{jD(this,t);break}case Ee.IN_BODY:case Ee.IN_CAPTION:case Ee.IN_CELL:case Ee.IN_TEMPLATE:{wSe(this,t);break}case Ee.TEXT:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case Ee.IN_TABLE:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:{Mz(this,t);break}case Ee.IN_TABLE_TEXT:{ISe(this,t);break}case Ee.IN_COLUMN_GROUP:{Q$(this,t);break}case Ee.AFTER_BODY:{J$(this,t);break}case Ee.AFTER_AFTER_BODY:{tL(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){vat(this,t);return}switch(this.insertionMode){case Ee.INITIAL:{Qk(this,t);break}case Ee.BEFORE_HTML:{LD(this,t);break}case Ee.BEFORE_HEAD:{$D(this,t);break}case Ee.IN_HEAD:{FD(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{BD(this,t);break}case Ee.AFTER_HEAD:{jD(this,t);break}case Ee.TEXT:{this._insertCharacters(t);break}case Ee.IN_TABLE:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:{Mz(this,t);break}case Ee.IN_COLUMN_GROUP:{Q$(this,t);break}case Ee.AFTER_BODY:{J$(this,t);break}case Ee.AFTER_AFTER_BODY:{tL(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){DW(this,t);return}switch(this.insertionMode){case Ee.INITIAL:case Ee.BEFORE_HTML:case Ee.BEFORE_HEAD:case Ee.IN_HEAD:case Ee.IN_HEAD_NO_SCRIPT:case Ee.AFTER_HEAD:case Ee.IN_BODY:case Ee.IN_TABLE:case Ee.IN_CAPTION:case Ee.IN_COLUMN_GROUP:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:case Ee.IN_CELL:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:case Ee.IN_TEMPLATE:case Ee.IN_FRAMESET:case Ee.AFTER_FRAMESET:{DW(this,t);break}case Ee.IN_TABLE_TEXT:{Jk(this,t);break}case Ee.AFTER_BODY:{Xst(this,t);break}case Ee.AFTER_AFTER_BODY:case Ee.AFTER_AFTER_FRAMESET:{Qst(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case Ee.INITIAL:{Jst(this,t);break}case Ee.BEFORE_HEAD:case Ee.IN_HEAD:case Ee.IN_HEAD_NO_SCRIPT:case Ee.AFTER_HEAD:{this._err(t,et.misplacedDoctype);break}case Ee.IN_TABLE_TEXT:{Jk(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,et.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?xat(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case Ee.INITIAL:{Qk(this,t);break}case Ee.BEFORE_HTML:{Zst(this,t);break}case Ee.BEFORE_HEAD:{tot(this,t);break}case Ee.IN_HEAD:{Zp(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{iot(this,t);break}case Ee.AFTER_HEAD:{oot(this,t);break}case Ee.IN_BODY:{bl(this,t);break}case Ee.IN_TABLE:{yC(this,t);break}case Ee.IN_TABLE_TEXT:{Jk(this,t);break}case Ee.IN_CAPTION:{nat(this,t);break}case Ee.IN_COLUMN_GROUP:{lZ(this,t);break}case Ee.IN_TABLE_BODY:{$B(this,t);break}case Ee.IN_ROW:{FB(this,t);break}case Ee.IN_CELL:{sat(this,t);break}case Ee.IN_SELECT:{DSe(this,t);break}case Ee.IN_SELECT_IN_TABLE:{aat(this,t);break}case Ee.IN_TEMPLATE:{lat(this,t);break}case Ee.AFTER_BODY:{fat(this,t);break}case Ee.IN_FRAMESET:{dat(this,t);break}case Ee.AFTER_FRAMESET:{pat(this,t);break}case Ee.AFTER_AFTER_BODY:{gat(this,t);break}case Ee.AFTER_AFTER_FRAMESET:{yat(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?_at(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case Ee.INITIAL:{Qk(this,t);break}case Ee.BEFORE_HTML:{eot(this,t);break}case Ee.BEFORE_HEAD:{not(this,t);break}case Ee.IN_HEAD:{rot(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{sot(this,t);break}case Ee.AFTER_HEAD:{aot(this,t);break}case Ee.IN_BODY:{LB(this,t);break}case Ee.TEXT:{Wot(this,t);break}case Ee.IN_TABLE:{EN(this,t);break}case Ee.IN_TABLE_TEXT:{Jk(this,t);break}case Ee.IN_CAPTION:{rat(this,t);break}case Ee.IN_COLUMN_GROUP:{iat(this,t);break}case Ee.IN_TABLE_BODY:{NW(this,t);break}case Ee.IN_ROW:{RSe(this,t);break}case Ee.IN_CELL:{oat(this,t);break}case Ee.IN_SELECT:{NSe(this,t);break}case Ee.IN_SELECT_IN_TABLE:{uat(this,t);break}case Ee.IN_TEMPLATE:{cat(this,t);break}case Ee.AFTER_BODY:{OSe(this,t);break}case Ee.IN_FRAMESET:{hat(this,t);break}case Ee.AFTER_FRAMESET:{mat(this,t);break}case Ee.AFTER_AFTER_BODY:{tL(this,t);break}}}onEof(t){switch(this.insertionMode){case Ee.INITIAL:{Qk(this,t);break}case Ee.BEFORE_HTML:{LD(this,t);break}case Ee.BEFORE_HEAD:{$D(this,t);break}case Ee.IN_HEAD:{FD(this,t);break}case Ee.IN_HEAD_NO_SCRIPT:{BD(this,t);break}case Ee.AFTER_HEAD:{jD(this,t);break}case Ee.IN_BODY:case Ee.IN_TABLE:case Ee.IN_CAPTION:case Ee.IN_COLUMN_GROUP:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:case Ee.IN_CELL:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:{CSe(this,t);break}case Ee.TEXT:{Got(this,t);break}case Ee.IN_TABLE_TEXT:{Jk(this,t);break}case Ee.IN_TEMPLATE:{PSe(this,t);break}case Ee.AFTER_BODY:case Ee.IN_FRAMESET:case Ee.AFTER_FRAMESET:case Ee.AFTER_AFTER_BODY:case Ee.AFTER_AFTER_FRAMESET:{uZ(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===de.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case Ee.IN_HEAD:case Ee.IN_HEAD_NO_SCRIPT:case Ee.AFTER_HEAD:case Ee.TEXT:case Ee.IN_COLUMN_GROUP:case Ee.IN_SELECT:case Ee.IN_SELECT_IN_TABLE:case Ee.IN_FRAMESET:case Ee.AFTER_FRAMESET:{this._insertCharacters(t);break}case Ee.IN_BODY:case Ee.IN_CAPTION:case Ee.IN_CELL:case Ee.IN_TEMPLATE:case Ee.AFTER_BODY:case Ee.AFTER_AFTER_BODY:case Ee.AFTER_AFTER_FRAMESET:{_Se(this,t);break}case Ee.IN_TABLE:case Ee.IN_TABLE_BODY:case Ee.IN_ROW:{Mz(this,t);break}case Ee.IN_TABLE_TEXT:{ASe(this,t);break}}}};function Hst(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):SSe(e,t),n}function qst(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Wst(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=zst;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Gst(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Gst(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function Yst(e,t,n){const r=e.treeAdapter.getTagName(t),i=zA(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===j.TEMPLATE&&s===ct.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Kst(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function aZ(e,t){for(let n=0;n<Ust;n++){const r=Hst(e,t);if(!r)break;const i=qst(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Wst(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&Yst(e,o,s),Kst(e,i,r)}}function DW(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Xst(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Qst(e,t){e._appendCommentNode(t,e.document)}function uZ(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Jst(e,t){e._setDocumentType(t);const n=t.forceQuirks?Hf.QUIRKS:Ist(t);Ast(t)||e._err(t,et.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=Ee.BEFORE_HTML}function Qk(e,t){e._err(t,et.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Hf.QUIRKS),e.insertionMode=Ee.BEFORE_HTML,e._processToken(t)}function Zst(e,t){t.tagID===j.HTML?(e._insertElement(t,ct.HTML),e.insertionMode=Ee.BEFORE_HEAD):LD(e,t)}function eot(e,t){const n=t.tagID;(n===j.HTML||n===j.HEAD||n===j.BODY||n===j.BR)&&LD(e,t)}function LD(e,t){e._insertFakeRootElement(),e.insertionMode=Ee.BEFORE_HEAD,e._processToken(t)}function tot(e,t){switch(t.tagID){case j.HTML:{bl(e,t);break}case j.HEAD:{e._insertElement(t,ct.HTML),e.headElement=e.openElements.current,e.insertionMode=Ee.IN_HEAD;break}default:$D(e,t)}}function not(e,t){const n=t.tagID;n===j.HEAD||n===j.BODY||n===j.HTML||n===j.BR?$D(e,t):e._err(t,et.endTagWithoutMatchingOpenElement)}function $D(e,t){e._insertFakeElement(He.HEAD,j.HEAD),e.headElement=e.openElements.current,e.insertionMode=Ee.IN_HEAD,e._processToken(t)}function Zp(e,t){switch(t.tagID){case j.HTML:{bl(e,t);break}case j.BASE:case j.BASEFONT:case j.BGSOUND:case j.LINK:case j.META:{e._appendElement(t,ct.HTML),t.ackSelfClosing=!0;break}case j.TITLE:{e._switchToTextParsing(t,Ao.RCDATA);break}case j.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,Ao.RAWTEXT):(e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_HEAD_NO_SCRIPT);break}case j.NOFRAMES:case j.STYLE:{e._switchToTextParsing(t,Ao.RAWTEXT);break}case j.SCRIPT:{e._switchToTextParsing(t,Ao.SCRIPT_DATA);break}case j.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=Ee.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(Ee.IN_TEMPLATE);break}case j.HEAD:{e._err(t,et.misplacedStartTagForHeadElement);break}default:FD(e,t)}}function rot(e,t){switch(t.tagID){case j.HEAD:{e.openElements.pop(),e.insertionMode=Ee.AFTER_HEAD;break}case j.BODY:case j.BR:case j.HTML:{FD(e,t);break}case j.TEMPLATE:{$E(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function $E(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==j.TEMPLATE&&e._err(t,et.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(j.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,et.endTagWithoutMatchingOpenElement)}function FD(e,t){e.openElements.pop(),e.insertionMode=Ee.AFTER_HEAD,e._processToken(t)}function iot(e,t){switch(t.tagID){case j.HTML:{bl(e,t);break}case j.BASEFONT:case j.BGSOUND:case j.HEAD:case j.LINK:case j.META:case j.NOFRAMES:case j.STYLE:{Zp(e,t);break}case j.NOSCRIPT:{e._err(t,et.nestedNoscriptInHead);break}default:BD(e,t)}}function sot(e,t){switch(t.tagID){case j.NOSCRIPT:{e.openElements.pop(),e.insertionMode=Ee.IN_HEAD;break}case j.BR:{BD(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function BD(e,t){const n=t.type===wr.EOF?et.openElementsLeftAfterEof:et.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=Ee.IN_HEAD,e._processToken(t)}function oot(e,t){switch(t.tagID){case j.HTML:{bl(e,t);break}case j.BODY:{e._insertElement(t,ct.HTML),e.framesetOk=!1,e.insertionMode=Ee.IN_BODY;break}case j.FRAMESET:{e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_FRAMESET;break}case j.BASE:case j.BASEFONT:case j.BGSOUND:case j.LINK:case j.META:case j.NOFRAMES:case j.SCRIPT:case j.STYLE:case j.TEMPLATE:case j.TITLE:{e._err(t,et.abandonedHeadElementChild),e.openElements.push(e.headElement,j.HEAD),Zp(e,t),e.openElements.remove(e.headElement);break}case j.HEAD:{e._err(t,et.misplacedStartTagForHeadElement);break}default:jD(e,t)}}function aot(e,t){switch(t.tagID){case j.BODY:case j.HTML:case j.BR:{jD(e,t);break}case j.TEMPLATE:{$E(e,t);break}default:e._err(t,et.endTagWithoutMatchingOpenElement)}}function jD(e,t){e._insertFakeElement(He.BODY,j.BODY),e.insertionMode=Ee.IN_BODY,MB(e,t)}function MB(e,t){switch(t.type){case wr.CHARACTER:{wSe(e,t);break}case wr.WHITESPACE_CHARACTER:{_Se(e,t);break}case wr.COMMENT:{DW(e,t);break}case wr.START_TAG:{bl(e,t);break}case wr.END_TAG:{LB(e,t);break}case wr.EOF:{CSe(e,t);break}}}function _Se(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function wSe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function uot(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function lot(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function cot(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_FRAMESET)}function fot(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,ct.HTML)}function dot(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),cSe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,ct.HTML)}function hot(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,ct.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function pot(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,ct.HTML),n||(e.formElement=e.openElements.current))}function mot(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===j.LI&&i===j.LI||(n===j.DD||n===j.DT)&&(i===j.DD||i===j.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==j.ADDRESS&&i!==j.DIV&&i!==j.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,ct.HTML)}function got(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,ct.HTML),e.tokenizer.state=Ao.PLAINTEXT}function yot(e,t){e.openElements.hasInScope(j.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(j.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML),e.framesetOk=!1}function vot(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(He.A);n&&(aZ(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function bot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function xot(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(j.NOBR)&&(aZ(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,ct.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function _ot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function wot(e,t){e.treeAdapter.getDocumentMode(e.document)!==Hf.QUIRKS&&e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._insertElement(t,ct.HTML),e.framesetOk=!1,e.insertionMode=Ee.IN_TABLE}function ESe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ct.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function TSe(e){const t=aSe(e,ab.TYPE);return t!=null&&t.toLowerCase()===jst}function Eot(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,ct.HTML),TSe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Tot(e,t){e._appendElement(t,ct.HTML),t.ackSelfClosing=!0}function Sot(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._appendElement(t,ct.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Cot(e,t){t.tagName=He.IMG,t.tagID=j.IMG,ESe(e,t)}function Aot(e,t){e._insertElement(t,ct.HTML),e.skipNextNewLine=!0,e.tokenizer.state=Ao.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=Ee.TEXT}function Iot(e,t){e.openElements.hasInButtonScope(j.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,Ao.RAWTEXT)}function kot(e,t){e.framesetOk=!1,e._switchToTextParsing(t,Ao.RAWTEXT)}function Zce(e,t){e._switchToTextParsing(t,Ao.RAWTEXT)}function Rot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===Ee.IN_TABLE||e.insertionMode===Ee.IN_CAPTION||e.insertionMode===Ee.IN_TABLE_BODY||e.insertionMode===Ee.IN_ROW||e.insertionMode===Ee.IN_CELL?Ee.IN_SELECT_IN_TABLE:Ee.IN_SELECT}function Dot(e,t){e.openElements.currentTagId===j.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML)}function Not(e,t){e.openElements.hasInScope(j.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,ct.HTML)}function Pot(e,t){e.openElements.hasInScope(j.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(j.RTC),e._insertElement(t,ct.HTML)}function Oot(e,t){e._reconstructActiveFormattingElements(),vSe(t),oZ(t),t.selfClosing?e._appendElement(t,ct.MATHML):e._insertElement(t,ct.MATHML),t.ackSelfClosing=!0}function Mot(e,t){e._reconstructActiveFormattingElements(),bSe(t),oZ(t),t.selfClosing?e._appendElement(t,ct.SVG):e._insertElement(t,ct.SVG),t.ackSelfClosing=!0}function efe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,ct.HTML)}function bl(e,t){switch(t.tagID){case j.I:case j.S:case j.B:case j.U:case j.EM:case j.TT:case j.BIG:case j.CODE:case j.FONT:case j.SMALL:case j.STRIKE:case j.STRONG:{bot(e,t);break}case j.A:{vot(e,t);break}case j.H1:case j.H2:case j.H3:case j.H4:case j.H5:case j.H6:{dot(e,t);break}case j.P:case j.DL:case j.OL:case j.UL:case j.DIV:case j.DIR:case j.NAV:case j.MAIN:case j.MENU:case j.ASIDE:case j.CENTER:case j.FIGURE:case j.FOOTER:case j.HEADER:case j.HGROUP:case j.DIALOG:case j.DETAILS:case j.ADDRESS:case j.ARTICLE:case j.SECTION:case j.SUMMARY:case j.FIELDSET:case j.BLOCKQUOTE:case j.FIGCAPTION:{fot(e,t);break}case j.LI:case j.DD:case j.DT:{mot(e,t);break}case j.BR:case j.IMG:case j.WBR:case j.AREA:case j.EMBED:case j.KEYGEN:{ESe(e,t);break}case j.HR:{Sot(e,t);break}case j.RB:case j.RTC:{Not(e,t);break}case j.RT:case j.RP:{Pot(e,t);break}case j.PRE:case j.LISTING:{hot(e,t);break}case j.XMP:{Iot(e,t);break}case j.SVG:{Mot(e,t);break}case j.HTML:{uot(e,t);break}case j.BASE:case j.LINK:case j.META:case j.STYLE:case j.TITLE:case j.SCRIPT:case j.BGSOUND:case j.BASEFONT:case j.TEMPLATE:{Zp(e,t);break}case j.BODY:{lot(e,t);break}case j.FORM:{pot(e,t);break}case j.NOBR:{xot(e,t);break}case j.MATH:{Oot(e,t);break}case j.TABLE:{wot(e,t);break}case j.INPUT:{Eot(e,t);break}case j.PARAM:case j.TRACK:case j.SOURCE:{Tot(e,t);break}case j.IMAGE:{Cot(e,t);break}case j.BUTTON:{yot(e,t);break}case j.APPLET:case j.OBJECT:case j.MARQUEE:{_ot(e,t);break}case j.IFRAME:{kot(e,t);break}case j.SELECT:{Rot(e,t);break}case j.OPTION:case j.OPTGROUP:{Dot(e,t);break}case j.NOEMBED:{Zce(e,t);break}case j.FRAMESET:{cot(e,t);break}case j.TEXTAREA:{Aot(e,t);break}case j.NOSCRIPT:{e.options.scriptingEnabled?Zce(e,t):efe(e,t);break}case j.PLAINTEXT:{got(e,t);break}case j.COL:case j.TH:case j.TD:case j.TR:case j.HEAD:case j.FRAME:case j.TBODY:case j.TFOOT:case j.THEAD:case j.CAPTION:case j.COLGROUP:break;default:efe(e,t)}}function Lot(e,t){if(e.openElements.hasInScope(j.BODY)&&(e.insertionMode=Ee.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function $ot(e,t){e.openElements.hasInScope(j.BODY)&&(e.insertionMode=Ee.AFTER_BODY,OSe(e,t))}function Fot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Bot(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(j.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(j.FORM):n&&e.openElements.remove(n))}function jot(e){e.openElements.hasInButtonScope(j.P)||e._insertFakeElement(He.P,j.P),e._closePElement()}function Uot(e){e.openElements.hasInListItemScope(j.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(j.LI),e.openElements.popUntilTagNamePopped(j.LI))}function zot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Vot(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Hot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function qot(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(He.BR,j.BR),e.openElements.pop(),e.framesetOk=!1}function SSe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==j.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function LB(e,t){switch(t.tagID){case j.A:case j.B:case j.I:case j.S:case j.U:case j.EM:case j.TT:case j.BIG:case j.CODE:case j.FONT:case j.NOBR:case j.SMALL:case j.STRIKE:case j.STRONG:{aZ(e,t);break}case j.P:{jot(e);break}case j.DL:case j.UL:case j.OL:case j.DIR:case j.DIV:case j.NAV:case j.PRE:case j.MAIN:case j.MENU:case j.ASIDE:case j.BUTTON:case j.CENTER:case j.FIGURE:case j.FOOTER:case j.HEADER:case j.HGROUP:case j.DIALOG:case j.ADDRESS:case j.ARTICLE:case j.DETAILS:case j.SECTION:case j.SUMMARY:case j.LISTING:case j.FIELDSET:case j.BLOCKQUOTE:case j.FIGCAPTION:{Fot(e,t);break}case j.LI:{Uot(e);break}case j.DD:case j.DT:{zot(e,t);break}case j.H1:case j.H2:case j.H3:case j.H4:case j.H5:case j.H6:{Vot(e);break}case j.BR:{qot(e);break}case j.BODY:{Lot(e,t);break}case j.HTML:{$ot(e,t);break}case j.FORM:{Bot(e);break}case j.APPLET:case j.OBJECT:case j.MARQUEE:{Hot(e,t);break}case j.TEMPLATE:{$E(e,t);break}default:SSe(e,t)}}function CSe(e,t){e.tmplInsertionModeStack.length>0?PSe(e,t):uZ(e,t)}function Wot(e,t){var n;t.tagID===j.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Got(e,t){e._err(t,et.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Mz(e,t){if(xSe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=Ee.IN_TABLE_TEXT,t.type){case wr.CHARACTER:{ISe(e,t);break}case wr.WHITESPACE_CHARACTER:{ASe(e,t);break}}else t3(e,t)}function Yot(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_CAPTION}function Kot(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_COLUMN_GROUP}function Xot(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(He.COLGROUP,j.COLGROUP),e.insertionMode=Ee.IN_COLUMN_GROUP,lZ(e,t)}function Qot(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_TABLE_BODY}function Jot(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(He.TBODY,j.TBODY),e.insertionMode=Ee.IN_TABLE_BODY,$B(e,t)}function Zot(e,t){e.openElements.hasInTableScope(j.TABLE)&&(e.openElements.popUntilTagNamePopped(j.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function eat(e,t){TSe(t)?e._appendElement(t,ct.HTML):t3(e,t),t.ackSelfClosing=!0}function tat(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,ct.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function yC(e,t){switch(t.tagID){case j.TD:case j.TH:case j.TR:{Jot(e,t);break}case j.STYLE:case j.SCRIPT:case j.TEMPLATE:{Zp(e,t);break}case j.COL:{Xot(e,t);break}case j.FORM:{tat(e,t);break}case j.TABLE:{Zot(e,t);break}case j.TBODY:case j.TFOOT:case j.THEAD:{Qot(e,t);break}case j.INPUT:{eat(e,t);break}case j.CAPTION:{Yot(e,t);break}case j.COLGROUP:{Kot(e,t);break}default:t3(e,t)}}function EN(e,t){switch(t.tagID){case j.TABLE:{e.openElements.hasInTableScope(j.TABLE)&&(e.openElements.popUntilTagNamePopped(j.TABLE),e._resetInsertionMode());break}case j.TEMPLATE:{$E(e,t);break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:case j.TBODY:case j.TD:case j.TFOOT:case j.TH:case j.THEAD:case j.TR:break;default:t3(e,t)}}function t3(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,MB(e,t),e.fosterParentingEnabled=n}function ASe(e,t){e.pendingCharacterTokens.push(t)}function ISe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function Jk(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)t3(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const kSe=new Set([j.CAPTION,j.COL,j.COLGROUP,j.TBODY,j.TD,j.TFOOT,j.TH,j.THEAD,j.TR]);function nat(e,t){const n=t.tagID;kSe.has(n)?e.openElements.hasInTableScope(j.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(j.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Ee.IN_TABLE,yC(e,t)):bl(e,t)}function rat(e,t){const n=t.tagID;switch(n){case j.CAPTION:case j.TABLE:{e.openElements.hasInTableScope(j.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(j.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Ee.IN_TABLE,n===j.TABLE&&EN(e,t));break}case j.BODY:case j.COL:case j.COLGROUP:case j.HTML:case j.TBODY:case j.TD:case j.TFOOT:case j.TH:case j.THEAD:case j.TR:break;default:LB(e,t)}}function lZ(e,t){switch(t.tagID){case j.HTML:{bl(e,t);break}case j.COL:{e._appendElement(t,ct.HTML),t.ackSelfClosing=!0;break}case j.TEMPLATE:{Zp(e,t);break}default:Q$(e,t)}}function iat(e,t){switch(t.tagID){case j.COLGROUP:{e.openElements.currentTagId===j.COLGROUP&&(e.openElements.pop(),e.insertionMode=Ee.IN_TABLE);break}case j.TEMPLATE:{$E(e,t);break}case j.COL:break;default:Q$(e,t)}}function Q$(e,t){e.openElements.currentTagId===j.COLGROUP&&(e.openElements.pop(),e.insertionMode=Ee.IN_TABLE,e._processToken(t))}function $B(e,t){switch(t.tagID){case j.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_ROW;break}case j.TH:case j.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(He.TR,j.TR),e.insertionMode=Ee.IN_ROW,FB(e,t);break}case j.CAPTION:case j.COL:case j.COLGROUP:case j.TBODY:case j.TFOOT:case j.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE,yC(e,t));break}default:yC(e,t)}}function NW(e,t){const n=t.tagID;switch(t.tagID){case j.TBODY:case j.TFOOT:case j.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE);break}case j.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE,EN(e,t));break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:case j.TD:case j.TH:case j.TR:break;default:EN(e,t)}}function FB(e,t){switch(t.tagID){case j.TH:case j.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,ct.HTML),e.insertionMode=Ee.IN_CELL,e.activeFormattingElements.insertMarker();break}case j.CAPTION:case j.COL:case j.COLGROUP:case j.TBODY:case j.TFOOT:case j.THEAD:case j.TR:{e.openElements.hasInTableScope(j.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY,$B(e,t));break}default:yC(e,t)}}function RSe(e,t){switch(t.tagID){case j.TR:{e.openElements.hasInTableScope(j.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY);break}case j.TABLE:{e.openElements.hasInTableScope(j.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY,NW(e,t));break}case j.TBODY:case j.TFOOT:case j.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(j.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=Ee.IN_TABLE_BODY,NW(e,t));break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:case j.TD:case j.TH:break;default:EN(e,t)}}function sat(e,t){const n=t.tagID;kSe.has(n)?(e.openElements.hasInTableScope(j.TD)||e.openElements.hasInTableScope(j.TH))&&(e._closeTableCell(),FB(e,t)):bl(e,t)}function oat(e,t){const n=t.tagID;switch(n){case j.TD:case j.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=Ee.IN_ROW);break}case j.TABLE:case j.TBODY:case j.TFOOT:case j.THEAD:case j.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),RSe(e,t));break}case j.BODY:case j.CAPTION:case j.COL:case j.COLGROUP:case j.HTML:break;default:LB(e,t)}}function DSe(e,t){switch(t.tagID){case j.HTML:{bl(e,t);break}case j.OPTION:{e.openElements.currentTagId===j.OPTION&&e.openElements.pop(),e._insertElement(t,ct.HTML);break}case j.OPTGROUP:{e.openElements.currentTagId===j.OPTION&&e.openElements.pop(),e.openElements.currentTagId===j.OPTGROUP&&e.openElements.pop(),e._insertElement(t,ct.HTML);break}case j.INPUT:case j.KEYGEN:case j.TEXTAREA:case j.SELECT:{e.openElements.hasInSelectScope(j.SELECT)&&(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode(),t.tagID!==j.SELECT&&e._processStartTag(t));break}case j.SCRIPT:case j.TEMPLATE:{Zp(e,t);break}}}function NSe(e,t){switch(t.tagID){case j.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===j.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===j.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===j.OPTGROUP&&e.openElements.pop();break}case j.OPTION:{e.openElements.currentTagId===j.OPTION&&e.openElements.pop();break}case j.SELECT:{e.openElements.hasInSelectScope(j.SELECT)&&(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode());break}case j.TEMPLATE:{$E(e,t);break}}}function aat(e,t){const n=t.tagID;n===j.CAPTION||n===j.TABLE||n===j.TBODY||n===j.TFOOT||n===j.THEAD||n===j.TR||n===j.TD||n===j.TH?(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode(),e._processStartTag(t)):DSe(e,t)}function uat(e,t){const n=t.tagID;n===j.CAPTION||n===j.TABLE||n===j.TBODY||n===j.TFOOT||n===j.THEAD||n===j.TR||n===j.TD||n===j.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(j.SELECT),e._resetInsertionMode(),e.onEndTag(t)):NSe(e,t)}function lat(e,t){switch(t.tagID){case j.BASE:case j.BASEFONT:case j.BGSOUND:case j.LINK:case j.META:case j.NOFRAMES:case j.SCRIPT:case j.STYLE:case j.TEMPLATE:case j.TITLE:{Zp(e,t);break}case j.CAPTION:case j.COLGROUP:case j.TBODY:case j.TFOOT:case j.THEAD:{e.tmplInsertionModeStack[0]=Ee.IN_TABLE,e.insertionMode=Ee.IN_TABLE,yC(e,t);break}case j.COL:{e.tmplInsertionModeStack[0]=Ee.IN_COLUMN_GROUP,e.insertionMode=Ee.IN_COLUMN_GROUP,lZ(e,t);break}case j.TR:{e.tmplInsertionModeStack[0]=Ee.IN_TABLE_BODY,e.insertionMode=Ee.IN_TABLE_BODY,$B(e,t);break}case j.TD:case j.TH:{e.tmplInsertionModeStack[0]=Ee.IN_ROW,e.insertionMode=Ee.IN_ROW,FB(e,t);break}default:e.tmplInsertionModeStack[0]=Ee.IN_BODY,e.insertionMode=Ee.IN_BODY,bl(e,t)}}function cat(e,t){t.tagID===j.TEMPLATE&&$E(e,t)}function PSe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(j.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):uZ(e,t)}function fat(e,t){t.tagID===j.HTML?bl(e,t):J$(e,t)}function OSe(e,t){var n;if(t.tagID===j.HTML){if(e.fragmentContext||(e.insertionMode=Ee.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===j.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else J$(e,t)}function J$(e,t){e.insertionMode=Ee.IN_BODY,MB(e,t)}function dat(e,t){switch(t.tagID){case j.HTML:{bl(e,t);break}case j.FRAMESET:{e._insertElement(t,ct.HTML);break}case j.FRAME:{e._appendElement(t,ct.HTML),t.ackSelfClosing=!0;break}case j.NOFRAMES:{Zp(e,t);break}}}function hat(e,t){t.tagID===j.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==j.FRAMESET&&(e.insertionMode=Ee.AFTER_FRAMESET))}function pat(e,t){switch(t.tagID){case j.HTML:{bl(e,t);break}case j.NOFRAMES:{Zp(e,t);break}}}function mat(e,t){t.tagID===j.HTML&&(e.insertionMode=Ee.AFTER_AFTER_FRAMESET)}function gat(e,t){t.tagID===j.HTML?bl(e,t):tL(e,t)}function tL(e,t){e.insertionMode=Ee.IN_BODY,MB(e,t)}function yat(e,t){switch(t.tagID){case j.HTML:{bl(e,t);break}case j.NOFRAMES:{Zp(e,t);break}}}function vat(e,t){t.chars=Rs,e._insertCharacters(t)}function bat(e,t){e._insertCharacters(t),e.framesetOk=!1}function MSe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==ct.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function xat(e,t){if(Mst(t))MSe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===ct.MATHML?vSe(t):r===ct.SVG&&(Lst(t),bSe(t)),oZ(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function _at(e,t){if(t.tagID===j.P||t.tagID===j.BR){MSe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===ct.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}He.AREA,He.BASE,He.BASEFONT,He.BGSOUND,He.BR,He.COL,He.EMBED,He.FRAME,He.HR,He.IMG,He.INPUT,He.KEYGEN,He.LINK,He.META,He.PARAM,He.SOURCE,He.TRACK,He.WBR;const wat=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),tfe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function LSe(e,t){const n=Nat(e),r=nSe("type",{handlers:{root:Eat,element:Tat,text:Sat,comment:FSe,doctype:Cat,raw:Iat},unknown:kat}),i={parser:n?new Jce(tfe):Jce.getFragmentParser(void 0,tfe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),VA(i,sg());const s=n?i.parser.document:i.parser.getFragment(),o=Mit(s,{file:i.options.file});return i.stitches&&nZ(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function $Se(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Eat(e,t){$Se(e.children,t)}function Tat(e,t){Rat(e,t),$Se(e.children,t),Dat(e,t)}function Sat(e,t){const n={type:wr.CHARACTER,chars:e.value,location:n3(e)};VA(t,sg(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Cat(e,t){const n={type:wr.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:n3(e)};VA(t,sg(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Aat(e,t){t.stitches=!0;const n=Pat(e);if("children"in e&&"children"in n){const r=LSe({type:"root",children:e.children},t.options);n.children=r.children}FSe({type:"comment",value:{stitch:n}},t)}function FSe(e,t){const n=e.value,r={type:wr.COMMENT,data:n,location:n3(e)};VA(t,sg(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Iat(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,BSe(t,sg(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function kat(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Aat(n,t);else{let r="";throw wat.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function VA(e,t){BSe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=Ao.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function BSe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Rat(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===Ao.PLAINTEXT)return;VA(t,sg(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:vw.html;i===vw.html&&n==="svg"&&(i=vw.svg);const s=Bit({...e,children:[]},{space:i===vw.svg?"svg":"html"}),o={type:wr.START_TAG,tagName:n,tagID:zA(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:n3(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Dat(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Git.includes(n)||t.parser.tokenizer.state===Ao.PLAINTEXT)return;VA(t,DB(e));const r={type:wr.END_TAG,tagName:n,tagID:zA(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:n3(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===Ao.RCDATA||t.parser.tokenizer.state===Ao.RAWTEXT||t.parser.tokenizer.state===Ao.SCRIPT_DATA)&&(t.parser.tokenizer.state=Ao.DATA)}function Nat(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function n3(e){const t=sg(e)||{line:void 0,column:void 0,offset:void 0},n=DB(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Pat(e){return"children"in e?gC({...e,children:[]}):gC(e)}function Oat(e){return function(t,n){return LSe(t,{...e,file:n})}}function dl({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return S.jsx(mx,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return S.jsx(lt,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return S.jsx(oo,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return S.jsx(oo,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return S.jsx(oo,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return S.jsx(oo,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return S.jsx(oo,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return S.jsx(oo,{...s,order:6,...s,pb:12})},a({node:i,...s}){return S.jsx(DE,{...s,ref:void 0})},ul({node:i,...s}){return S.jsx(Dp,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return S.jsx(Dp,{type:"ordered",withPadding:!0,...o,pb:8})}};return S.jsx(wit,{components:n,rehypePlugins:[Oat],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function nL({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return S.jsx(dl,{text:n})}const PS=14;function Mat({completed:e,inProgress:t,rejected:n}){return S.jsxs(an,{ml:4,gap:4,children:[S.jsx(ss,{label:"Completed",children:S.jsx(Rp,{variant:"light",color:"green",leftSection:S.jsx(kB,{width:PS,height:PS,style:{paddingTop:1}}),pb:1,children:e})}),S.jsx(ss,{label:"In Progress",children:S.jsx(Rp,{variant:"light",color:"orange",leftSection:S.jsx(dTe,{width:PS,height:PS,style:{paddingTop:1}}),pb:1,children:t})}),S.jsx(ss,{label:"Rejected",children:S.jsx(Rp,{variant:"light",color:"red",leftSection:S.jsx(QP,{width:PS,height:PS,style:{paddingTop:1}}),pb:1,children:n})})]})}const Lat="https://github.com/revisit-studies/study/tree/main/public/";function $at({configName:e,config:t,url:n}){const{storageEngine:r}=Oo(),[i,s]=P.useState(null);P.useEffect(()=>{r&&r.getParticipantsStatusCounts(e).then(f=>{s(f)})},[e,r]);const{minTime:o,maxTime:a}=P.useMemo(()=>{if(!i)return{minTime:null,maxTime:null};if(!i.minTime||!i.maxTime)return{minTime:null,maxTime:null};const f=typeof i.minTime=="number"?new Date(i.minTime):i.minTime.toDate(),d=typeof i.maxTime=="number"?new Date(i.maxTime):i.maxTime.toDate();return{minTime:f.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"}),maxTime:d.toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"long",day:"numeric"})}},[i]),[u,l]=P.useState(null);P.useEffect(()=>{r&&r.getModes(e).then(f=>{l(f)})},[e,r]);const c=P.useMemo(()=>u?u.dataCollectionEnabled?i&&(i.inProgress>0||i.completed>0)?"Collecting Data":"Ready to Collect Data":"Data Collection Disabled":"Unknown",[u,i]);return S.jsx(RA,{shadow:"sm",radius:"md",my:"sm",withBorder:!0,children:t.errors.length>0?S.jsxs(S.Fragment,{children:[S.jsx(lt,{fw:"bold",children:e}),S.jsxs(an,{align:"center",direction:"row",children:[S.jsx(ND,{color:"red"}),S.jsx(lt,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),S.jsx(nL,{issues:t.errors,type:"error"}),t.warnings.length>0&&S.jsxs(S.Fragment,{children:[S.jsxs(an,{align:"center",direction:"row",children:[S.jsx(ND,{color:"orange"}),S.jsx(lt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),S.jsx(nL,{issues:t.warnings,type:"warning"})]})]}):S.jsxs(S.Fragment,{children:[S.jsx(an,{direction:"row",justify:"space-between",children:S.jsx(lt,{fw:"bold",children:t.studyMetadata.title})}),S.jsxs(lt,{c:"dimmed",children:[S.jsx(lt,{span:!0,fw:500,children:"Authors: "}),t.studyMetadata.authors.join(", ")]}),S.jsx(lt,{c:"dimmed",children:t.studyMetadata.description}),S.jsx(lt,{c:"dimmed",ta:"right",style:{paddingRight:5},children:S.jsxs(DE,{target:"_blank",onClick:f=>f.stopPropagation(),href:`${Lat}${n}`,children:["View source:"," ",n,S.jsx(cTe,{style:{width:Ke(18),height:Ke(18),marginLeft:Ke(2),marginBottom:Ke(-3)}})]})}),t.warnings.length>0&&S.jsxs(S.Fragment,{children:[S.jsxs(an,{align:"center",direction:"row",children:[S.jsx(ND,{color:"orange"}),S.jsx(lt,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),S.jsx(nL,{issues:t.warnings,type:"warning"})]}),S.jsx(NE,{my:"md"}),S.jsxs(an,{direction:"row",gap:"sm",children:[S.jsxs(lt,{fw:"bold",size:"sm",opacity:.7,children:["Study Status:"," ",c]}),i&&S.jsx(Mat,{completed:i.completed,inProgress:i.inProgress,rejected:i.rejected})]}),o&&a&&S.jsxs(lt,{c:"dimmed",mt:4,children:["Activity:"," ",o," ",""," ",a]}),S.jsxs(an,{direction:"row",align:"end",gap:"sm",mt:"md",children:[S.jsx(yn,{leftSection:S.jsx(lTe,{}),style:{marginLeft:"auto"},variant:"default",component:"a",href:`${qa}analysis/stats/${n}`,children:"Analyze & Manage Study"}),S.jsx(yn,{leftSection:S.jsx(fTe,{}),component:"a",href:`${qa}${n}`,children:"Go to Study"})]})]})},e)}function OS({configNames:e,studyConfigs:t}){return e.map(n=>{const r=t[n];if(!r)return null;const i=gTe(n);return S.jsx($at,{configName:n,config:r,url:i},n)})}function Fat({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=n.filter(l=>l.startsWith("demo-")),i=n.filter(l=>l.startsWith("tutorial-")),s=n.filter(l=>l.startsWith("example-")),o=n.filter(l=>l.startsWith("test-")),a=n.filter(l=>l.startsWith("library-")),u=n.filter(l=>!l.startsWith("demo-")&&!l.startsWith("tutorial-")&&!l.startsWith("example-")&&!l.startsWith("test-")&&!l.startsWith("library-"));return S.jsx(Vi.Main,{children:S.jsxs(Xy,{size:"sm",px:0,children:[S.jsx(mx,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${qa}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),S.jsxs(Vr,{variant:"outline",defaultValue:u.length>0?"Others":"Demos",children:[S.jsxs(Vr.List,{children:[u.length>0&&S.jsx(Vr.Tab,{value:"Others",children:"Your Studies"}),S.jsx(Vr.Tab,{value:"Demos",children:"Demo Studies"}),S.jsx(Vr.Tab,{value:"Examples",children:"Example Studies"}),S.jsx(Vr.Tab,{value:"Tutorials",children:"Tutorials"}),S.jsx(Vr.Tab,{value:"Tests",children:"Tests"}),S.jsx(Vr.Tab,{value:"Libraries",children:"Libraries"})]}),u.length>0&&S.jsx(Vr.Panel,{value:"Others",children:S.jsx(OS,{configNames:u,studyConfigs:t})}),S.jsxs(Vr.Panel,{value:"Demos",children:[S.jsx(lt,{c:"dimmed",mt:"sm",children:"These studies show off individual features of the reVISit platform."}),S.jsx(OS,{configNames:r,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Examples",children:[S.jsx(lt,{c:"dimmed",mt:"sm",children:"These are full studies that demonstrate the capabilities of the reVISit platform."}),S.jsx(OS,{configNames:s,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Tutorials",children:[S.jsx(lt,{c:"dimmed",mt:"sm",children:"These studies are designed to help you learn how to use the reVISit platform."}),S.jsx(OS,{configNames:i,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Tests",children:[S.jsx(lt,{c:"dimmed",mt:"sm",children:"These studies exist for testing purposes."}),S.jsx(OS,{configNames:o,studyConfigs:t})]}),S.jsxs(Vr.Panel,{value:"Libraries",children:[S.jsx(lt,{c:"dimmed",mt:"sm",children:"Here you can see an example of every library that we publish."}),S.jsx(OS,{configNames:a,studyConfigs:t})]})]})]})})}var Lz={exports:{}},$z={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nfe;function Bat(){if(nfe)return $z;nfe=1;var e=q8();function t(u,l){return u===l&&(u!==0||1/u===1/l)||u!==u&&l!==l}var n=typeof Object.is=="function"?Object.is:t,r=e.useSyncExternalStore,i=e.useRef,s=e.useEffect,o=e.useMemo,a=e.useDebugValue;return $z.useSyncExternalStoreWithSelector=function(u,l,c,f,d){var h=i(null);if(h.current===null){var p={hasValue:!1,value:null};h.current=p}else p=h.current;h=o(function(){function g(T){if(!v){if(v=!0,b=T,T=f(T),d!==void 0&&p.hasValue){var C=p.value;if(d(C,T))return w=C}return w=T}if(C=w,n(b,T))return C;var I=f(T);return d!==void 0&&d(C,I)?(b=T,C):(b=T,w=I)}var v=!1,b,w,E=c===void 0?null:c;return[function(){return g(l())},E===null?void 0:function(){return g(E())}]},[l,c,f,d]);var m=r(u,h[0],h[1]);return s(function(){p.hasValue=!0,p.value=m},[m]),a(m),m},$z}var rfe;function jat(){return rfe||(rfe=1,Lz.exports=Bat()),Lz.exports}var Uat=jat();function zat(e){e()}function Vat(){let e=null,t=null;return{clear(){e=null,t=null},notify(){zat(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var ife={notify(){},get:()=>[]};function Hat(e,t){let n,r=ife,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let v=!1;return()=>{v||(v=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Vat())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=ife)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var qat=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Wat=qat(),Gat=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Yat=Gat(),Kat=()=>Wat||Yat?P.useLayoutEffect:P.useEffect,Xat=Kat(),Fz=Symbol.for("react-redux-context"),Bz=typeof globalThis<"u"?globalThis:{};function Qat(){if(!P.createContext)return{};const e=Bz[Fz]??(Bz[Fz]=new Map);let t=e.get(P.createContext);return t||(t=P.createContext(null),e.set(P.createContext,t)),t}var Tb=Qat();function Jat(e){const{children:t,context:n,serverState:r,store:i}=e,s=P.useMemo(()=>{const u=Hat(i);return{store:i,subscription:u,getServerState:r?()=>r:void 0}},[i,r]),o=P.useMemo(()=>i.getState(),[i]);Xat(()=>{const{subscription:u}=s;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),o!==i.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[s,o]);const a=n||Tb;return P.createElement(a.Provider,{value:s},t)}var Zat=Jat;function cZ(e=Tb){return function(){return P.useContext(e)}}var jSe=cZ();function USe(e=Tb){const t=e===Tb?jSe:cZ(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var eut=USe();function tut(e=Tb){const t=e===Tb?eut:USe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var zSe=tut(),nut=(e,t)=>e===t;function rut(e=Tb){const t=e===Tb?jSe:cZ(e),n=(r,i={})=>{const{equalityFn:s=nut}=typeof i=="function"?{equalityFn:i}:i,o=t(),{store:a,subscription:u,getServerState:l}=o;P.useRef(!0);const c=P.useCallback({[r.name](d){return r(d)}}[r.name],[r]),f=Uat.useSyncExternalStoreWithSelector(u.addNestedSub,a.getState,l||a.getState,c,s);return P.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var iut=rut();function cu(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var sut=typeof Symbol=="function"&&Symbol.observable||"@@observable",sfe=sut,jz=()=>Math.random().toString(36).substring(7).split("").join("."),out={INIT:`@@redux/INIT${jz()}`,REPLACE:`@@redux/REPLACE${jz()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${jz()}`},Z$=out;function fZ(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function VSe(e,t,n){if(typeof e!="function")throw new Error(cu(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(cu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(cu(1));return n(VSe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,v)=>{o.set(v,g)}))}function c(){if(u)throw new Error(cu(3));return i}function f(g){if(typeof g!="function")throw new Error(cu(4));if(u)throw new Error(cu(5));let v=!0;l();const b=a++;return o.set(b,g),function(){if(v){if(u)throw new Error(cu(6));v=!1,l(),o.delete(b),s=null}}}function d(g){if(!fZ(g))throw new Error(cu(7));if(typeof g.type>"u")throw new Error(cu(8));if(typeof g.type!="string")throw new Error(cu(17));if(u)throw new Error(cu(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(b=>{b()}),g}function h(g){if(typeof g!="function")throw new Error(cu(10));r=g,d({type:Z$.REPLACE})}function p(){const g=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(cu(11));function b(){const E=v;E.next&&E.next(c())}return b(),{unsubscribe:g(b)}},[sfe](){return this}}}return d({type:Z$.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[sfe]:p}}function aut(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:Z$.INIT})>"u")throw new Error(cu(12));if(typeof n(void 0,{type:Z$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(cu(13))})}function uut(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{aut(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(cu(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function eF(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function lut(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(cu(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=eF(...a)(i.dispatch),{...i,dispatch:s}}}function cut(e){return fZ(e)&&"type"in e&&typeof e.type=="string"}var HSe=Symbol.for("immer-nothing"),ofe=Symbol.for("immer-draftable"),cd=Symbol.for("immer-state");function yp(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var vC=Object.getPrototypeOf;function Gw(e){return!!e&&!!e[cd]}function Jy(e){var t;return e?qSe(e)||Array.isArray(e)||!!e[ofe]||!!((t=e.constructor)!=null&&t[ofe])||jB(e)||UB(e):!1}var fut=Object.prototype.constructor.toString();function qSe(e){if(!e||typeof e!="object")return!1;const t=vC(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===fut}function tF(e,t){BB(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function BB(e){const t=e[cd];return t?t.type_:Array.isArray(e)?1:jB(e)?2:UB(e)?3:0}function PW(e,t){return BB(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function WSe(e,t,n){const r=BB(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function dut(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function jB(e){return e instanceof Map}function UB(e){return e instanceof Set}function W_(e){return e.copy_||e.base_}function OW(e,t){if(jB(e))return new Map(e);if(UB(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=qSe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[cd];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(vC(e),r)}else{const r=vC(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function dZ(e,t=!1){return zB(e)||Gw(e)||!Jy(e)||(BB(e)>1&&(e.set=e.add=e.clear=e.delete=hut),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>dZ(r,!0))),e}function hut(){yp(2)}function zB(e){return Object.isFrozen(e)}var put={};function Yw(e){const t=put[e];return t||yp(0,e),t}var TN;function GSe(){return TN}function mut(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function afe(e,t){t&&(Yw("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function MW(e){LW(e),e.drafts_.forEach(gut),e.drafts_=null}function LW(e){e===TN&&(TN=e.parent_)}function ufe(e){return TN=mut(TN,e)}function gut(e){const t=e[cd];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function lfe(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[cd].modified_&&(MW(t),yp(4)),Jy(e)&&(e=nF(t,e),t.parent_||rF(t,e)),t.patches_&&Yw("Patches").generateReplacementPatches_(n[cd].base_,e,t.patches_,t.inversePatches_)):e=nF(t,n,[]),MW(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==HSe?e:void 0}function nF(e,t,n){if(zB(t))return t;const r=t[cd];if(!r)return tF(t,(i,s)=>cfe(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return rF(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),tF(s,(a,u)=>cfe(e,r,i,a,u,n,o)),rF(e,i,!1),n&&e.patches_&&Yw("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function cfe(e,t,n,r,i,s,o){if(Gw(i)){const a=s&&t&&t.type_!==3&&!PW(t.assigned_,r)?s.concat(r):void 0,u=nF(e,i,a);if(WSe(n,r,u),Gw(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Jy(i)&&!zB(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;nF(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&rF(e,i)}}function rF(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&dZ(t,n)}function yut(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:GSe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=hZ;n&&(i=[r],s=SN);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var hZ={get(e,t){if(t===cd)return e;const n=W_(e);if(!PW(n,t))return vut(e,n,t);const r=n[t];return e.finalized_||!Jy(r)?r:r===Uz(e.base_,t)?(zz(e),e.copy_[t]=FW(r,e)):r},has(e,t){return t in W_(e)},ownKeys(e){return Reflect.ownKeys(W_(e))},set(e,t,n){const r=YSe(W_(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=Uz(W_(e),t),s=i==null?void 0:i[cd];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(dut(n,i)&&(n!==void 0||PW(e.base_,t)))return!0;zz(e),$W(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Uz(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,zz(e),$W(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=W_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){yp(11)},getPrototypeOf(e){return vC(e.base_)},setPrototypeOf(){yp(12)}},SN={};tF(hZ,(e,t)=>{SN[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});SN.deleteProperty=function(e,t){return SN.set.call(this,e,t,void 0)};SN.set=function(e,t,n){return hZ.set.call(this,e[0],t,n,e[0])};function Uz(e,t){const n=e[cd];return(n?W_(n):e)[t]}function vut(e,t,n){var i;const r=YSe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function YSe(e,t){if(!(t in e))return;let n=vC(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=vC(n)}}function $W(e){e.modified_||(e.modified_=!0,e.parent_&&$W(e.parent_))}function zz(e){e.copy_||(e.copy_=OW(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var but=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&yp(6),r!==void 0&&typeof r!="function"&&yp(7);let i;if(Jy(t)){const s=ufe(this),o=FW(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?MW(s):LW(s)}return afe(s,r),lfe(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===HSe&&(i=void 0),this.autoFreeze_&&dZ(i,!0),r){const s=[],o=[];Yw("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else yp(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Jy(e)||yp(8),Gw(e)&&(e=xut(e));const t=ufe(this),n=FW(e,void 0);return n[cd].isManual_=!0,LW(t),n}finishDraft(e,t){const n=e&&e[cd];(!n||!n.isManual_)&&yp(9);const{scope_:r}=n;return afe(r,t),lfe(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Yw("Patches").applyPatches_;return Gw(e)?r(e,t):this.produce(e,i=>r(i,t))}};function FW(e,t){const n=jB(e)?Yw("MapSet").proxyMap_(e,t):UB(e)?Yw("MapSet").proxySet_(e,t):yut(e,t);return(t?t.scope_:GSe()).drafts_.push(n),n}function xut(e){return Gw(e)||yp(10,e),KSe(e)}function KSe(e){if(!Jy(e)||zB(e))return e;const t=e[cd];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=OW(e,t.scope_.immer_.useStrictShallowCopy_)}else n=OW(e,!0);return tF(n,(r,i)=>{WSe(n,r,KSe(i))}),t&&(t.finalized_=!1),n}var fd=new but,XSe=fd.produce;fd.produceWithPatches.bind(fd);fd.setAutoFreeze.bind(fd);fd.setUseStrictShallowCopy.bind(fd);fd.applyPatches.bind(fd);fd.createDraft.bind(fd);fd.finishDraft.bind(fd);function _ut(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function wut(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Eut(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var ffe=e=>Array.isArray(e)?e:[e];function Tut(e){const t=Array.isArray(e[0])?e[0]:e;return Eut(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Sut(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Cut=class{constructor(e){this.value=e}deref(){return this.value}},Aut=typeof WeakRef<"u"?WeakRef:Cut,Iut=0,dfe=1;function H4(){return{s:Iut,v:void 0,o:null,p:null}}function QSe(e,t={}){let n=H4();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=H4(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=H4(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===dfe)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Aut(c):c}return l.s=dfe,l.v=c,c}return o.clearCache=()=>{n=H4(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function kut(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),_ut(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=QSe,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=ffe(d),v=ffe(p),b=Tut(i),w=f(function(){return s++,l.apply(null,arguments)},...g),E=h(function(){o++;const C=Sut(b,arguments);return a=w.apply(null,C),a},...v);return Object.assign(E,{resultFunc:l,memoizedResultFunc:w,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var JSe=kut(QSe),Rut=Object.assign((e,t=JSe)=>{wut(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Rut});function ZSe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Dut=ZSe(),Nut=ZSe,Put=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?eF:eF.apply(null,arguments)};function hfe(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Ly(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>cut(r)&&r.type===e,n}var e2e=class zR extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,zR.prototype)}static get[Symbol.species](){return zR}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new zR(...t[0].concat(this)):new zR(...t.concat(this))}};function pfe(e){return Jy(e)?XSe(e,()=>{}):e}function mfe(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Out(e){return typeof e=="boolean"}var Mut=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new e2e;return n&&(Out(n)?o.push(Dut):o.push(Nut(n.extraArgument))),o},Lut="RTK_autoBatch",gfe=e=>t=>{setTimeout(t,e)},$ut=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gfe(10):e.type==="callback"?e.queueNotification:gfe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Lut]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Fut=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new e2e(e);return r&&i.push($ut(typeof r=="object"?r:void 0)),i};function But(e){const t=Mut(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e;let a;if(typeof n=="function")a=n;else if(fZ(n))a=uut(n);else throw new Error(Ly(1));let u;typeof r=="function"?u=r(t):u=t();let l=eF;i&&(l=Put({trace:!1,...typeof i=="object"&&i}));const c=lut(...u),f=Fut(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return VSe(a,s,h)}function t2e(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Ly(28));if(a in t)throw new Error(Ly(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function jut(e){return typeof e=="function"}function Uut(e,t){let[n,r,i]=t2e(t),s;if(jut(e))s=()=>pfe(e());else{const a=pfe(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(Gw(c)){const h=f(c,u);return h===void 0?c:h}else{if(Jy(c))return XSe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw Error("A case reducer on a non-draftable value must not return undefined")}return d}}return c},a)}return o.getInitialState=s,o}var zut=Symbol.for("rtk-slice-createasyncthunk");function Vut(e,t){return`${e}/${t}`}function Hut({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[zut];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Ly(11));const a=(typeof i.reducers=="function"?i.reducers(Gut()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(w,E){const T=typeof w=="string"?w:w.type;if(!T)throw new Error(Ly(12));if(T in l.sliceCaseReducersByType)throw new Error(Ly(13));return l.sliceCaseReducersByType[T]=E,c},addMatcher(w,E){return l.sliceMatchers.push({matcher:w,reducer:E}),c},exposeAction(w,E){return l.actionCreators[w]=E,c},exposeCaseReducer(w,E){return l.sliceCaseReducersByName[w]=E,c}};u.forEach(w=>{const E=a[w],T={reducerName:w,type:Vut(s,w),createNotation:typeof i.reducers=="function"};Kut(E)?Qut(T,E,c,t):Yut(T,E,c)});function f(){const[w={},E=[],T=void 0]=typeof i.extraReducers=="function"?t2e(i.extraReducers):[i.extraReducers],C={...w,...l.sliceCaseReducersByType};return Uut(i.initialState,I=>{for(let R in C)I.addCase(R,C[R]);for(let R of l.sliceMatchers)I.addMatcher(R.matcher,R.reducer);for(let R of E)I.addMatcher(R.matcher,R.reducer);T&&I.addDefaultCase(T)})}const d=w=>w,h=new Map;let p;function m(w,E){return p||(p=f()),p(w,E)}function g(){return p||(p=f()),p.getInitialState()}function v(w,E=!1){function T(I){let R=I[w];return typeof R>"u"&&E&&(R=g()),R}function C(I=d){const R=mfe(h,E,()=>new WeakMap);return mfe(R,I,()=>{const N={};for(const[O,L]of Object.entries(i.selectors??{}))N[O]=qut(L,I,g,E);return N})}return{reducerPath:w,getSelectors:C,get selectors(){return C(T)},selectSlice:T}}const b={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...v(o),injectInto(w,{reducerPath:E,...T}={}){const C=E??o;return w.inject({reducerPath:C,reducer:m},T),{...b,...v(C,!0)}}};return b}}function qut(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Wut=Hut();function Gut(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Yut({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Xut(r))throw new Error(Ly(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?hfe(e,o):hfe(e))}function Kut(e){return e._reducerDefinitionType==="asyncThunk"}function Xut(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Qut({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Ly(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||q4,pending:a||q4,rejected:u||q4,settled:l||q4})}function q4(){}function Ly(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function jp(e){return e.components.flatMap(t=>typeof t=="string"?t:jp(t))}function n2e(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:n2e(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function r2e(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+jp(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+jp(e).length-1}];r+=1}else{const o=r2e(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function pZ(e,t){const n=r2e(e,t,0);return typeof n=="number"?null:n}function i2e(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=i2e(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Jut(e,t){const n=i2e(e,t,0);return n.found?n.distance:-1}function s2e(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...s2e(i,`${t}-${s}`))}),n}function mZ(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>mZ(n,`${t}-${r}`))}}async function Zut(e,t,n,r,i,s,o){const a=jp(n),u=Object.fromEntries(a.filter(p=>p!=="end").map((p,m)=>[`${p}_${m}`,{answer:{},incorrectAnswers:{},startTime:0,endTime:-1,provenanceGraph:void 0,windowEvents:[],timedOut:!1,helpButtonClickedCount:0}])),l=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),c=Object.assign({},...a.map((p,m)=>({[`${p}_${m}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),f={studyId:e,isRecording:!1,answers:Object.keys(i).length>0?i:u,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?c:l,reactiveAnswers:{},reactiveProvenance:null,otherTexts:{},metadata:r,analysisProvState:null,analysisIsPlaying:!1,analysisHasAudio:!1,analysisHasProvenance:!1,modes:s,matrixAnswers:{},participantId:o},d=Wut({name:"storeSlice",initialState:f,reducers:{setConfig(p,m){p.config=m.payload},setIsRecording(p,m){p.isRecording=m.payload},toggleStudyBrowser:p=>{p.showStudyBrowser=!p.showStudyBrowser},toggleShowHelpText:p=>{p.showHelpText=!p.showHelpText},setAlertModal:(p,m)=>{p.alertModal=m.payload},setreactiveAnswers:(p,m)=>{p.reactiveAnswers=m.payload},setreactiveProvenance:(p,m)=>{p.reactiveProvenance=m.payload},setOtherText:(p,m)=>{p.otherTexts[m.payload.key]=m.payload.value},resetOtherText:p=>{p.otherTexts={}},saveAnalysisState(p,{payload:m}){p.analysisProvState=m},setAnalysisIsPlaying(p,{payload:m}){p.analysisIsPlaying=m},setAnalysisHasAudio(p,{payload:m}){p.analysisHasAudio=m},setAnalysisHasProvenance(p,{payload:m}){p.analysisHasProvenance=m},setMatrixAnswersRadio:(p,m)=>{if(m.payload){const{responseId:g,questionKey:v,val:b}=m.payload;p.matrixAnswers={...p.matrixAnswers,[g]:{...p.matrixAnswers[g],[v]:b}}}else p.matrixAnswers={}},setMatrixAnswersCheckbox:(p,m)=>{var g;if(m.payload){const{responseId:v,questionKey:b,value:w,isChecked:E,choiceOptions:T}=m.payload,C=((g=p.matrixAnswers[v])==null?void 0:g[b])??"";let I="";E?C.length>0?I=[...C.split("|"),w].sort((R,N)=>T.map(O=>O.value).indexOf(R)-T.map(O=>O.value).indexOf(N)).join("|"):I=`${w}`:I=C.split("|").filter(R=>R!==w).join("|"),p.matrixAnswers={...p.matrixAnswers,[v]:{...p.matrixAnswers[v],[b]:I}}}else p.matrixAnswers={}},updateResponseBlockValidation:(p,{payload:m})=>{p.trialValidation[m.identifier]||(p.trialValidation[m.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),p.trialValidation[m.identifier][m.location]={valid:m.status,values:m.values},m.provenanceGraph&&(p.trialValidation[m.identifier].provenanceGraph=m.provenanceGraph)},saveTrialAnswer(p,{payload:m}){const{identifier:g,answer:v,startTime:b,endTime:w,provenanceGraph:E,windowEvents:T,timedOut:C,incorrectAnswers:I,helpButtonClickedCount:R}=m;p.answers[g]={incorrectAnswers:I,answer:v,startTime:b,endTime:w,provenanceGraph:E,windowEvents:T,timedOut:C,helpButtonClickedCount:R}},incrementHelpCounter(p,{payload:m}){const{identifier:g}=m;p.answers[g].helpButtonClickedCount+=1},saveIncorrectAnswer(p,{payload:m}){const{identifier:g,answer:v,question:b}=m;p.answers[b].incorrectAnswers||(p.answers[b].incorrectAnswers={}),p.answers[b].incorrectAnswers[g]||(p.answers[b].incorrectAnswers[g]={id:g,value:[]}),p.answers[b].incorrectAnswers[g].value.push(v)}}});return{store:But({reducer:d.reducer,preloadedState:f}),actions:d.actions}}const o2e=P.createContext(null);function Su(){return P.useContext(o2e).actions}const xl=zSe,yi=iut;function elt(e){return yi(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}const tlt=JSe(e=>e.sequence,e=>jp(e));function gZ(){return yi(tlt)}var rL={exports:{}};function VR(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var iL={exports:{}};const nlt={},rlt=Object.freeze(Object.defineProperty({__proto__:null,default:nlt},Symbol.toStringTag,{value:"Module"})),a2e=uUe(rlt);var ilt=iL.exports,yfe;function Xr(){return yfe||(yfe=1,function(e,t){(function(n,r){e.exports=r()})(ilt,function(){var n=n||function(r,i){var s;if(typeof window<"u"&&window.crypto&&(s=window.crypto),typeof self<"u"&&self.crypto&&(s=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(s=globalThis.crypto),!s&&typeof window<"u"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof la<"u"&&la.crypto&&(s=la.crypto),!s&&typeof VR=="function")try{s=a2e}catch{}var o=function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function b(){}return function(w){var E;return b.prototype=w,E=new b,b.prototype=null,E}}(),u={},l=u.lib={},c=l.Base=function(){return{extend:function(b){var w=a(this);return b&&w.mixIn(b),(!w.hasOwnProperty("init")||this.init===w.init)&&(w.init=function(){w.$super.init.apply(this,arguments)}),w.init.prototype=w,w.$super=this,w},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var w in b)b.hasOwnProperty(w)&&(this[w]=b[w]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=c.extend({init:function(b,w){b=this.words=b||[],w!=i?this.sigBytes=w:this.sigBytes=b.length*4},toString:function(b){return(b||h).stringify(this)},concat:function(b){var w=this.words,E=b.words,T=this.sigBytes,C=b.sigBytes;if(this.clamp(),T%4)for(var I=0;I<C;I++){var R=E[I>>>2]>>>24-I%4*8&255;w[T+I>>>2]|=R<<24-(T+I)%4*8}else for(var N=0;N<C;N+=4)w[T+N>>>2]=E[N>>>2];return this.sigBytes+=C,this},clamp:function(){var b=this.words,w=this.sigBytes;b[w>>>2]&=4294967295<<32-w%4*8,b.length=r.ceil(w/4)},clone:function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var w=[],E=0;E<b;E+=4)w.push(o());return new f.init(w,b)}}),d=u.enc={},h=d.Hex={stringify:function(b){for(var w=b.words,E=b.sigBytes,T=[],C=0;C<E;C++){var I=w[C>>>2]>>>24-C%4*8&255;T.push((I>>>4).toString(16)),T.push((I&15).toString(16))}return T.join("")},parse:function(b){for(var w=b.length,E=[],T=0;T<w;T+=2)E[T>>>3]|=parseInt(b.substr(T,2),16)<<24-T%8*4;return new f.init(E,w/2)}},p=d.Latin1={stringify:function(b){for(var w=b.words,E=b.sigBytes,T=[],C=0;C<E;C++){var I=w[C>>>2]>>>24-C%4*8&255;T.push(String.fromCharCode(I))}return T.join("")},parse:function(b){for(var w=b.length,E=[],T=0;T<w;T++)E[T>>>2]|=(b.charCodeAt(T)&255)<<24-T%4*8;return new f.init(E,w)}},m=d.Utf8={stringify:function(b){try{return decodeURIComponent(escape(p.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(b){return p.parse(unescape(encodeURIComponent(b)))}},g=l.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(b){typeof b=="string"&&(b=m.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},_process:function(b){var w,E=this._data,T=E.words,C=E.sigBytes,I=this.blockSize,R=I*4,N=C/R;b?N=r.ceil(N):N=r.max((N|0)-this._minBufferSize,0);var O=N*I,L=r.min(O*4,C);if(O){for(var B=0;B<O;B+=I)this._doProcessBlock(T,B);w=T.splice(0,O),E.sigBytes-=L}return new f.init(w,L)},clone:function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0});l.Hasher=g.extend({cfg:c.extend(),init:function(b){this.cfg=this.cfg.extend(b),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);var w=this._doFinalize();return w},blockSize:16,_createHelper:function(b){return function(w,E){return new b.init(E).finalize(w)}},_createHmacHelper:function(b){return function(w,E){return new v.HMAC.init(b,E).finalize(w)}}});var v=u.algo={};return u}(Math);return n})}(iL)),iL.exports}var sL={exports:{}},slt=sL.exports,vfe;function VB(){return vfe||(vfe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(slt,function(n){return function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=i.x64={};u.Word=o.extend({init:function(l,c){this.high=l,this.low=c}}),u.WordArray=o.extend({init:function(l,c){l=this.words=l||[],c!=r?this.sigBytes=c:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,c=l.length,f=[],d=0;d<c;d++){var h=l[d];f.push(h.high),f.push(h.low)}return a.create(f,this.sigBytes)},clone:function(){for(var l=o.clone.call(this),c=l.words=this.words.slice(0),f=c.length,d=0;d<f;d++)c[d]=c[d].clone();return l}})}(),n})}(sL)),sL.exports}var oL={exports:{}},olt=oL.exports,bfe;function alt(){return bfe||(bfe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(olt,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,s=i.WordArray,o=s.init,a=s.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var l=u.byteLength,c=[],f=0;f<l;f++)c[f>>>2]|=u[f]<<24-f%4*8;o.call(this,c,l)}else o.apply(this,arguments)};a.prototype=s}}(),n.lib.WordArray})}(oL)),oL.exports}var aL={exports:{}},ult=aL.exports,xfe;function llt(){return xfe||(xfe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(ult,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=l[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return s.create(c,l*2)}},o.Utf16LE={stringify:function(u){for(var l=u.words,c=u.sigBytes,f=[],d=0;d<c;d+=2){var h=a(l[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var l=u.length,c=[],f=0;f<l;f++)c[f>>>1]|=a(u.charCodeAt(f)<<16-f%2*16);return s.create(c,l*2)}};function a(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(aL)),aL.exports}var uL={exports:{}},clt=uL.exports,_fe;function FE(){return _fe||(_fe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(clt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64={stringify:function(u){var l=u.words,c=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<c;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,m=l[h+1>>>2]>>>24-(h+1)%4*8&255,g=l[h+2>>>2]>>>24-(h+2)%4*8&255,v=p<<16|m<<8|g,b=0;b<4&&h+b*.75<c;b++)d.push(f.charAt(v>>>6*(3-b)&63));var w=f.charAt(64);if(w)for(;d.length%4;)d.push(w);return d.join("")},parse:function(u){var l=u.length,c=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<c.length;d++)f[c.charCodeAt(d)]=d}var h=c.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(l=p)}return a(u,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64})}(uL)),uL.exports}var lL={exports:{}},flt=lL.exports,wfe;function dlt(){return wfe||(wfe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(flt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.enc;o.Base64url={stringify:function(u,l){l===void 0&&(l=!0);var c=u.words,f=u.sigBytes,d=l?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=c[p>>>2]>>>24-p%4*8&255,g=c[p+1>>>2]>>>24-(p+1)%4*8&255,v=c[p+2>>>2]>>>24-(p+2)%4*8&255,b=m<<16|g<<8|v,w=0;w<4&&p+w*.75<f;w++)h.push(d.charAt(b>>>6*(3-w)&63));var E=d.charAt(64);if(E)for(;h.length%4;)h.push(E);return h.join("")},parse:function(u,l){l===void 0&&(l=!0);var c=u.length,f=l?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(c=m)}return a(u,c,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(u,l,c){for(var f=[],d=0,h=0;h<l;h++)if(h%4){var p=c[u.charCodeAt(h-1)]<<h%4*2,m=c[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return s.create(f,d)}}(),n.enc.Base64url})}(lL)),lL.exports}var cL={exports:{}},hlt=cL.exports,Efe;function BE(){return Efe||(Efe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(hlt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[];(function(){for(var m=0;m<64;m++)l[m]=r.abs(r.sin(m+1))*4294967296|0})();var c=u.MD5=a.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var v=0;v<16;v++){var b=g+v,w=m[b];m[b]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360}var E=this._hash.words,T=m[g+0],C=m[g+1],I=m[g+2],R=m[g+3],N=m[g+4],O=m[g+5],L=m[g+6],B=m[g+7],F=m[g+8],H=m[g+9],Q=m[g+10],J=m[g+11],ne=m[g+12],Z=m[g+13],ie=m[g+14],q=m[g+15],U=E[0],G=E[1],V=E[2],Y=E[3];U=f(U,G,V,Y,T,7,l[0]),Y=f(Y,U,G,V,C,12,l[1]),V=f(V,Y,U,G,I,17,l[2]),G=f(G,V,Y,U,R,22,l[3]),U=f(U,G,V,Y,N,7,l[4]),Y=f(Y,U,G,V,O,12,l[5]),V=f(V,Y,U,G,L,17,l[6]),G=f(G,V,Y,U,B,22,l[7]),U=f(U,G,V,Y,F,7,l[8]),Y=f(Y,U,G,V,H,12,l[9]),V=f(V,Y,U,G,Q,17,l[10]),G=f(G,V,Y,U,J,22,l[11]),U=f(U,G,V,Y,ne,7,l[12]),Y=f(Y,U,G,V,Z,12,l[13]),V=f(V,Y,U,G,ie,17,l[14]),G=f(G,V,Y,U,q,22,l[15]),U=d(U,G,V,Y,C,5,l[16]),Y=d(Y,U,G,V,L,9,l[17]),V=d(V,Y,U,G,J,14,l[18]),G=d(G,V,Y,U,T,20,l[19]),U=d(U,G,V,Y,O,5,l[20]),Y=d(Y,U,G,V,Q,9,l[21]),V=d(V,Y,U,G,q,14,l[22]),G=d(G,V,Y,U,N,20,l[23]),U=d(U,G,V,Y,H,5,l[24]),Y=d(Y,U,G,V,ie,9,l[25]),V=d(V,Y,U,G,R,14,l[26]),G=d(G,V,Y,U,F,20,l[27]),U=d(U,G,V,Y,Z,5,l[28]),Y=d(Y,U,G,V,I,9,l[29]),V=d(V,Y,U,G,B,14,l[30]),G=d(G,V,Y,U,ne,20,l[31]),U=h(U,G,V,Y,O,4,l[32]),Y=h(Y,U,G,V,F,11,l[33]),V=h(V,Y,U,G,J,16,l[34]),G=h(G,V,Y,U,ie,23,l[35]),U=h(U,G,V,Y,C,4,l[36]),Y=h(Y,U,G,V,N,11,l[37]),V=h(V,Y,U,G,B,16,l[38]),G=h(G,V,Y,U,Q,23,l[39]),U=h(U,G,V,Y,Z,4,l[40]),Y=h(Y,U,G,V,T,11,l[41]),V=h(V,Y,U,G,R,16,l[42]),G=h(G,V,Y,U,L,23,l[43]),U=h(U,G,V,Y,H,4,l[44]),Y=h(Y,U,G,V,ne,11,l[45]),V=h(V,Y,U,G,q,16,l[46]),G=h(G,V,Y,U,I,23,l[47]),U=p(U,G,V,Y,T,6,l[48]),Y=p(Y,U,G,V,B,10,l[49]),V=p(V,Y,U,G,ie,15,l[50]),G=p(G,V,Y,U,O,21,l[51]),U=p(U,G,V,Y,ne,6,l[52]),Y=p(Y,U,G,V,R,10,l[53]),V=p(V,Y,U,G,Q,15,l[54]),G=p(G,V,Y,U,C,21,l[55]),U=p(U,G,V,Y,F,6,l[56]),Y=p(Y,U,G,V,q,10,l[57]),V=p(V,Y,U,G,L,15,l[58]),G=p(G,V,Y,U,Z,21,l[59]),U=p(U,G,V,Y,N,6,l[60]),Y=p(Y,U,G,V,J,10,l[61]),V=p(V,Y,U,G,I,15,l[62]),G=p(G,V,Y,U,H,21,l[63]),E[0]=E[0]+U|0,E[1]=E[1]+G|0,E[2]=E[2]+V|0,E[3]=E[3]+Y|0},_doFinalize:function(){var m=this._data,g=m.words,v=this._nDataBytes*8,b=m.sigBytes*8;g[b>>>5]|=128<<24-b%32;var w=r.floor(v/4294967296),E=v;g[(b+64>>>9<<4)+15]=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,g[(b+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var T=this._hash,C=T.words,I=0;I<4;I++){var R=C[I];C[I]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360}return T},clone:function(){var m=a.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,v,b,w,E,T){var C=m+(g&v|~g&b)+w+T;return(C<<E|C>>>32-E)+g}function d(m,g,v,b,w,E,T){var C=m+(g&b|v&~b)+w+T;return(C<<E|C>>>32-E)+g}function h(m,g,v,b,w,E,T){var C=m+(g^v^b)+w+T;return(C<<E|C>>>32-E)+g}function p(m,g,v,b,w,E,T){var C=m+(v^(g|~b))+w+T;return(C<<E|C>>>32-E)+g}i.MD5=a._createHelper(c),i.HmacMD5=a._createHmacHelper(c)}(Math),n.MD5})}(cL)),cL.exports}var fL={exports:{}},plt=fL.exports,Tfe;function u2e(){return Tfe||(Tfe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(plt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.Hasher,a=r.algo,u=[],l=a.SHA1=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(c,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],v=d[4],b=0;b<80;b++){if(b<16)u[b]=c[f+b]|0;else{var w=u[b-3]^u[b-8]^u[b-14]^u[b-16];u[b]=w<<1|w>>>31}var E=(h<<5|h>>>27)+v+u[b];b<20?E+=(p&m|~p&g)+1518500249:b<40?E+=(p^m^g)+1859775393:b<60?E+=(p&m|p&g|m&g)-1894007588:E+=(p^m^g)-899497514,v=g,g=m,m=p<<30|p>>>2,p=h,h=E}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+v|0},_doFinalize:function(){var c=this._data,f=c.words,d=this._nDataBytes*8,h=c.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,c.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var c=o.clone.call(this);return c._hash=this._hash.clone(),c}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),n.SHA1})}(fL)),fL.exports}var dL={exports:{}},mlt=dL.exports,Sfe;function yZ(){return Sfe||(Sfe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(mlt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=[],c=[];(function(){function h(v){for(var b=r.sqrt(v),w=2;w<=b;w++)if(!(v%w))return!1;return!0}function p(v){return(v-(v|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(l[g]=p(r.pow(m,1/2))),c[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=a.extend({_doReset:function(){this._hash=new o.init(l.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],v=m[1],b=m[2],w=m[3],E=m[4],T=m[5],C=m[6],I=m[7],R=0;R<64;R++){if(R<16)f[R]=h[p+R]|0;else{var N=f[R-15],O=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,L=f[R-2],B=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;f[R]=O+f[R-7]+B+f[R-16]}var F=E&T^~E&C,H=g&v^g&b^v&b,Q=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),J=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),ne=I+J+F+c[R]+f[R],Z=Q+H;I=C,C=T,T=E,E=w+ne|0,w=b,b=v,v=g,g=ne+Z|0}m[0]=m[0]+g|0,m[1]=m[1]+v|0,m[2]=m[2]+b|0,m[3]=m[3]+w|0,m[4]=m[4]+E|0,m[5]=m[5]+T|0,m[6]=m[6]+C|0,m[7]=m[7]+I|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(d),i.HmacSHA256=a._createHmacHelper(d)}(Math),n.SHA256})}(dL)),dL.exports}var hL={exports:{}},glt=hL.exports,Cfe;function ylt(){return Cfe||(Cfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),yZ())})(glt,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=r.algo,a=o.SHA256,u=o.SHA224=a.extend({_doReset:function(){this._hash=new s.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(u),r.HmacSHA224=a._createHmacHelper(u)}(),n.SHA224})}(hL)),hL.exports}var pL={exports:{}},vlt=pL.exports,Afe;function l2e(){return Afe||(Afe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),VB())})(vlt,function(n){return function(){var r=n,i=r.lib,s=i.Hasher,o=r.x64,a=o.Word,u=o.WordArray,l=r.algo;function c(){return a.create.apply(a,arguments)}var f=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=c()})();var h=l.SHA512=s.extend({_doReset:function(){this._hash=new u.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,v=g[0],b=g[1],w=g[2],E=g[3],T=g[4],C=g[5],I=g[6],R=g[7],N=v.high,O=v.low,L=b.high,B=b.low,F=w.high,H=w.low,Q=E.high,J=E.low,ne=T.high,Z=T.low,ie=C.high,q=C.low,U=I.high,G=I.low,V=R.high,Y=R.low,ee=N,ae=O,_e=L,pe=B,Te=F,Le=H,ye=Q,he=J,$e=ne,De=Z,tt=ie,it=q,Me=U,Ge=G,at=V,yt=Y,Tt=0;Tt<80;Tt++){var Ot,qe,dt=d[Tt];if(Tt<16)qe=dt.high=p[m+Tt*2]|0,Ot=dt.low=p[m+Tt*2+1]|0;else{var wt=d[Tt-15],ke=wt.high,Oe=wt.low,ht=(ke>>>1|Oe<<31)^(ke>>>8|Oe<<24)^ke>>>7,Lt=(Oe>>>1|ke<<31)^(Oe>>>8|ke<<24)^(Oe>>>7|ke<<25),Ft=d[Tt-2],dn=Ft.high,Nn=Ft.low,Tr=(dn>>>19|Nn<<13)^(dn<<3|Nn>>>29)^dn>>>6,Ni=(Nn>>>19|dn<<13)^(Nn<<3|dn>>>29)^(Nn>>>6|dn<<26),Un=d[Tt-7],tr=Un.high,Ai=Un.low,Sr=d[Tt-16],Lo=Sr.high,Ji=Sr.low;Ot=Lt+Ai,qe=ht+tr+(Ot>>>0<Lt>>>0?1:0),Ot=Ot+Ni,qe=qe+Tr+(Ot>>>0<Ni>>>0?1:0),Ot=Ot+Ji,qe=qe+Lo+(Ot>>>0<Ji>>>0?1:0),dt.high=qe,dt.low=Ot}var Pi=$e&tt^~$e&Me,Zi=De&it^~De&Ge,Qr=ee&_e^ee&Te^_e&Te,$o=ae&pe^ae&Le^pe&Le,oc=(ee>>>28|ae<<4)^(ee<<30|ae>>>2)^(ee<<25|ae>>>7),xa=(ae>>>28|ee<<4)^(ae<<30|ee>>>2)^(ae<<25|ee>>>7),Du=($e>>>14|De<<18)^($e>>>18|De<<14)^($e<<23|De>>>9),Jr=(De>>>14|$e<<18)^(De>>>18|$e<<14)^(De<<23|$e>>>9),ji=f[Tt],oi=ji.high,Ws=ji.low,Fr=yt+Jr,es=at+Du+(Fr>>>0<yt>>>0?1:0),Fr=Fr+Zi,es=es+Pi+(Fr>>>0<Zi>>>0?1:0),Fr=Fr+Ws,es=es+oi+(Fr>>>0<Ws>>>0?1:0),Fr=Fr+Ot,es=es+qe+(Fr>>>0<Ot>>>0?1:0),Fo=xa+$o,ho=oc+Qr+(Fo>>>0<xa>>>0?1:0);at=Me,yt=Ge,Me=tt,Ge=it,tt=$e,it=De,De=he+Fr|0,$e=ye+es+(De>>>0<he>>>0?1:0)|0,ye=Te,he=Le,Te=_e,Le=pe,_e=ee,pe=ae,ae=Fr+Fo|0,ee=es+ho+(ae>>>0<Fr>>>0?1:0)|0}O=v.low=O+ae,v.high=N+ee+(O>>>0<ae>>>0?1:0),B=b.low=B+pe,b.high=L+_e+(B>>>0<pe>>>0?1:0),H=w.low=H+Le,w.high=F+Te+(H>>>0<Le>>>0?1:0),J=E.low=J+he,E.high=Q+ye+(J>>>0<he>>>0?1:0),Z=T.low=Z+De,T.high=ne+$e+(Z>>>0<De>>>0?1:0),q=C.low=q+it,C.high=ie+tt+(q>>>0<it>>>0?1:0),G=I.low=G+Ge,I.high=U+Me+(G>>>0<Ge>>>0?1:0),Y=R.low=Y+yt,R.high=V+at+(Y>>>0<yt>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,v=p.sigBytes*8;m[v>>>5]|=128<<24-v%32,m[(v+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(v+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var b=this._hash.toX32();return b},clone:function(){var p=s.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=s._createHelper(h),r.HmacSHA512=s._createHmacHelper(h)}(),n.SHA512})}(pL)),pL.exports}var mL={exports:{}},blt=mL.exports,Ife;function xlt(){return Ife||(Ife=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),VB(),l2e())})(blt,function(n){return function(){var r=n,i=r.x64,s=i.Word,o=i.WordArray,a=r.algo,u=a.SHA512,l=a.SHA384=u.extend({_doReset:function(){this._hash=new o.init([new s.init(3418070365,3238371032),new s.init(1654270250,914150663),new s.init(2438529370,812702999),new s.init(355462360,4144912697),new s.init(1731405415,4290775857),new s.init(2394180231,1750603025),new s.init(3675008525,1694076839),new s.init(1203062813,3204075428)])},_doFinalize:function(){var c=u._doFinalize.call(this);return c.sigBytes-=16,c}});r.SHA384=u._createHelper(l),r.HmacSHA384=u._createHmacHelper(l)}(),n.SHA384})}(mL)),mL.exports}var gL={exports:{}},_lt=gL.exports,kfe;function wlt(){return kfe||(kfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),VB())})(_lt,function(n){return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.x64,l=u.Word,c=i.algo,f=[],d=[],h=[];(function(){for(var g=1,v=0,b=0;b<24;b++){f[g+5*v]=(b+1)*(b+2)/2%64;var w=v%5,E=(2*g+3*v)%5;g=w,v=E}for(var g=0;g<5;g++)for(var v=0;v<5;v++)d[g+5*v]=v+(2*g+3*v)%5*5;for(var T=1,C=0;C<24;C++){for(var I=0,R=0,N=0;N<7;N++){if(T&1){var O=(1<<N)-1;O<32?R^=1<<O:I^=1<<O-32}T&128?T=T<<1^113:T<<=1}h[C]=l.create(I,R)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=l.create()})();var m=c.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],v=0;v<25;v++)g[v]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,v){for(var b=this._state,w=this.blockSize/2,E=0;E<w;E++){var T=g[v+2*E],C=g[v+2*E+1];T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360;var I=b[E];I.high^=C,I.low^=T}for(var R=0;R<24;R++){for(var N=0;N<5;N++){for(var O=0,L=0,B=0;B<5;B++){var I=b[N+5*B];O^=I.high,L^=I.low}var F=p[N];F.high=O,F.low=L}for(var N=0;N<5;N++)for(var H=p[(N+4)%5],Q=p[(N+1)%5],J=Q.high,ne=Q.low,O=H.high^(J<<1|ne>>>31),L=H.low^(ne<<1|J>>>31),B=0;B<5;B++){var I=b[N+5*B];I.high^=O,I.low^=L}for(var Z=1;Z<25;Z++){var O,L,I=b[Z],ie=I.high,q=I.low,U=f[Z];U<32?(O=ie<<U|q>>>32-U,L=q<<U|ie>>>32-U):(O=q<<U-32|ie>>>64-U,L=ie<<U-32|q>>>64-U);var G=p[d[Z]];G.high=O,G.low=L}var V=p[0],Y=b[0];V.high=Y.high,V.low=Y.low;for(var N=0;N<5;N++)for(var B=0;B<5;B++){var Z=N+5*B,I=b[Z],ee=p[Z],ae=p[(N+1)%5+5*B],_e=p[(N+2)%5+5*B];I.high=ee.high^~ae.high&_e.high,I.low=ee.low^~ae.low&_e.low}var I=b[0],pe=h[R];I.high^=pe.high,I.low^=pe.low}},_doFinalize:function(){var g=this._data,v=g.words;this._nDataBytes*8;var b=g.sigBytes*8,w=this.blockSize*32;v[b>>>5]|=1<<24-b%32,v[(r.ceil((b+1)/w)*w>>>5)-1]|=128,g.sigBytes=v.length*4,this._process();for(var E=this._state,T=this.cfg.outputLength/8,C=T/8,I=[],R=0;R<C;R++){var N=E[R],O=N.high,L=N.low;O=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360,L=(L<<8|L>>>24)&16711935|(L<<24|L>>>8)&4278255360,I.push(L),I.push(O)}return new o.init(I,T)},clone:function(){for(var g=a.clone.call(this),v=g._state=this._state.slice(0),b=0;b<25;b++)v[b]=v[b].clone();return g}});i.SHA3=a._createHelper(m),i.HmacSHA3=a._createHmacHelper(m)}(Math),n.SHA3})}(gL)),gL.exports}var yL={exports:{}},Elt=yL.exports,Rfe;function Tlt(){return Rfe||(Rfe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(Elt,function(n){/** @preserve
			(c) 2012 by Cdric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,s=i.lib,o=s.WordArray,a=s.Hasher,u=i.algo,l=o.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=o.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=o.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=o.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=o.create([0,1518500249,1859775393,2400959708,2840853838]),p=o.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=a.extend({_doReset:function(){this._hash=o.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,I){for(var R=0;R<16;R++){var N=I+R,O=C[N];C[N]=(O<<8|O>>>24)&16711935|(O<<24|O>>>8)&4278255360}var L=this._hash.words,B=h.words,F=p.words,H=l.words,Q=c.words,J=f.words,ne=d.words,Z,ie,q,U,G,V,Y,ee,ae,_e;V=Z=L[0],Y=ie=L[1],ee=q=L[2],ae=U=L[3],_e=G=L[4];for(var pe,R=0;R<80;R+=1)pe=Z+C[I+H[R]]|0,R<16?pe+=g(ie,q,U)+B[0]:R<32?pe+=v(ie,q,U)+B[1]:R<48?pe+=b(ie,q,U)+B[2]:R<64?pe+=w(ie,q,U)+B[3]:pe+=E(ie,q,U)+B[4],pe=pe|0,pe=T(pe,J[R]),pe=pe+G|0,Z=G,G=U,U=T(q,10),q=ie,ie=pe,pe=V+C[I+Q[R]]|0,R<16?pe+=E(Y,ee,ae)+F[0]:R<32?pe+=w(Y,ee,ae)+F[1]:R<48?pe+=b(Y,ee,ae)+F[2]:R<64?pe+=v(Y,ee,ae)+F[3]:pe+=g(Y,ee,ae)+F[4],pe=pe|0,pe=T(pe,ne[R]),pe=pe+_e|0,V=_e,_e=ae,ae=T(ee,10),ee=Y,Y=pe;pe=L[1]+q+ae|0,L[1]=L[2]+U+_e|0,L[2]=L[3]+G+V|0,L[3]=L[4]+Z+Y|0,L[4]=L[0]+ie+ee|0,L[0]=pe},_doFinalize:function(){var C=this._data,I=C.words,R=this._nDataBytes*8,N=C.sigBytes*8;I[N>>>5]|=128<<24-N%32,I[(N+64>>>9<<4)+14]=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,C.sigBytes=(I.length+1)*4,this._process();for(var O=this._hash,L=O.words,B=0;B<5;B++){var F=L[B];L[B]=(F<<8|F>>>24)&16711935|(F<<24|F>>>8)&4278255360}return O},clone:function(){var C=a.clone.call(this);return C._hash=this._hash.clone(),C}});function g(C,I,R){return C^I^R}function v(C,I,R){return C&I|~C&R}function b(C,I,R){return(C|~I)^R}function w(C,I,R){return C&R|I&~R}function E(C,I,R){return C^(I|~R)}function T(C,I){return C<<I|C>>>32-I}i.RIPEMD160=a._createHelper(m),i.HmacRIPEMD160=a._createHmacHelper(m)}(),n.RIPEMD160})}(yL)),yL.exports}var vL={exports:{}},Slt=vL.exports,Dfe;function vZ(){return Dfe||(Dfe=1,function(e,t){(function(n,r){e.exports=r(Xr())})(Slt,function(n){(function(){var r=n,i=r.lib,s=i.Base,o=r.enc,a=o.Utf8,u=r.algo;u.HMAC=s.extend({init:function(l,c){l=this._hasher=new l.init,typeof c=="string"&&(c=a.parse(c));var f=l.blockSize,d=f*4;c.sigBytes>d&&(c=l.finalize(c)),c.clamp();for(var h=this._oKey=c.clone(),p=this._iKey=c.clone(),m=h.words,g=p.words,v=0;v<f;v++)m[v]^=1549556828,g[v]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var c=this._hasher,f=c.finalize(l);c.reset();var d=c.finalize(this._oKey.clone().concat(f));return d}})})()})}(vL)),vL.exports}var bL={exports:{}},Clt=bL.exports,Nfe;function Alt(){return Nfe||(Nfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),yZ(),vZ())})(Clt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.SHA256,l=a.HMAC,c=a.PBKDF2=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=l.create(h.hasher,f),m=o.create(),g=o.create([1]),v=m.words,b=g.words,w=h.keySize,E=h.iterations;v.length<w;){var T=p.update(d).finalize(g);p.reset();for(var C=T.words,I=C.length,R=T,N=1;N<E;N++){R=p.finalize(R),p.reset();for(var O=R.words,L=0;L<I;L++)C[L]^=O[L]}m.concat(T),b[0]++}return m.sigBytes=w*4,m}});r.PBKDF2=function(f,d,h){return c.create(h).compute(f,d)}}(),n.PBKDF2})}(bL)),bL.exports}var xL={exports:{}},Ilt=xL.exports,Pfe;function bx(){return Pfe||(Pfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),u2e(),vZ())})(Ilt,function(n){return function(){var r=n,i=r.lib,s=i.Base,o=i.WordArray,a=r.algo,u=a.MD5,l=a.EvpKDF=s.extend({cfg:s.extend({keySize:128/32,hasher:u,iterations:1}),init:function(c){this.cfg=this.cfg.extend(c)},compute:function(c,f){for(var d,h=this.cfg,p=h.hasher.create(),m=o.create(),g=m.words,v=h.keySize,b=h.iterations;g.length<v;){d&&p.update(d),d=p.update(c).finalize(f),p.reset();for(var w=1;w<b;w++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=v*4,m}});r.EvpKDF=function(c,f,d){return l.create(d).compute(c,f)}}(),n.EvpKDF})}(xL)),xL.exports}var _L={exports:{}},klt=_L.exports,Ofe;function Ga(){return Ofe||(Ofe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),bx())})(klt,function(n){n.lib.Cipher||function(r){var i=n,s=i.lib,o=s.Base,a=s.WordArray,u=s.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var c=l.Base64,f=i.algo,d=f.EvpKDF,h=s.Cipher=u.extend({cfg:o.extend(),createEncryptor:function(O,L){return this.create(this._ENC_XFORM_MODE,O,L)},createDecryptor:function(O,L){return this.create(this._DEC_XFORM_MODE,O,L)},init:function(O,L,B){this.cfg=this.cfg.extend(B),this._xformMode=O,this._key=L,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(O){return this._append(O),this._process()},finalize:function(O){O&&this._append(O);var L=this._doFinalize();return L},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function O(L){return typeof L=="string"?N:C}return function(L){return{encrypt:function(B,F,H){return O(F).encrypt(L,B,F,H)},decrypt:function(B,F,H){return O(F).decrypt(L,B,F,H)}}}}()});s.StreamCipher=h.extend({_doFinalize:function(){var O=this._process(!0);return O},blockSize:1});var p=i.mode={},m=s.BlockCipherMode=o.extend({createEncryptor:function(O,L){return this.Encryptor.create(O,L)},createDecryptor:function(O,L){return this.Decryptor.create(O,L)},init:function(O,L){this._cipher=O,this._iv=L}}),g=p.CBC=function(){var O=m.extend();O.Encryptor=O.extend({processBlock:function(B,F){var H=this._cipher,Q=H.blockSize;L.call(this,B,F,Q),H.encryptBlock(B,F),this._prevBlock=B.slice(F,F+Q)}}),O.Decryptor=O.extend({processBlock:function(B,F){var H=this._cipher,Q=H.blockSize,J=B.slice(F,F+Q);H.decryptBlock(B,F),L.call(this,B,F,Q),this._prevBlock=J}});function L(B,F,H){var Q,J=this._iv;J?(Q=J,this._iv=r):Q=this._prevBlock;for(var ne=0;ne<H;ne++)B[F+ne]^=Q[ne]}return O}(),v=i.pad={},b=v.Pkcs7={pad:function(O,L){for(var B=L*4,F=B-O.sigBytes%B,H=F<<24|F<<16|F<<8|F,Q=[],J=0;J<F;J+=4)Q.push(H);var ne=a.create(Q,F);O.concat(ne)},unpad:function(O){var L=O.words[O.sigBytes-1>>>2]&255;O.sigBytes-=L}};s.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:b}),reset:function(){var O;h.reset.call(this);var L=this.cfg,B=L.iv,F=L.mode;this._xformMode==this._ENC_XFORM_MODE?O=F.createEncryptor:(O=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==O?this._mode.init(this,B&&B.words):(this._mode=O.call(F,this,B&&B.words),this._mode.__creator=O)},_doProcessBlock:function(O,L){this._mode.processBlock(O,L)},_doFinalize:function(){var O,L=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(L.pad(this._data,this.blockSize),O=this._process(!0)):(O=this._process(!0),L.unpad(O)),O},blockSize:128/32});var w=s.CipherParams=o.extend({init:function(O){this.mixIn(O)},toString:function(O){return(O||this.formatter).stringify(this)}}),E=i.format={},T=E.OpenSSL={stringify:function(O){var L,B=O.ciphertext,F=O.salt;return F?L=a.create([1398893684,1701076831]).concat(F).concat(B):L=B,L.toString(c)},parse:function(O){var L,B=c.parse(O),F=B.words;return F[0]==1398893684&&F[1]==1701076831&&(L=a.create(F.slice(2,4)),F.splice(0,4),B.sigBytes-=16),w.create({ciphertext:B,salt:L})}},C=s.SerializableCipher=o.extend({cfg:o.extend({format:T}),encrypt:function(O,L,B,F){F=this.cfg.extend(F);var H=O.createEncryptor(B,F),Q=H.finalize(L),J=H.cfg;return w.create({ciphertext:Q,key:B,iv:J.iv,algorithm:O,mode:J.mode,padding:J.padding,blockSize:O.blockSize,formatter:F.format})},decrypt:function(O,L,B,F){F=this.cfg.extend(F),L=this._parse(L,F.format);var H=O.createDecryptor(B,F).finalize(L.ciphertext);return H},_parse:function(O,L){return typeof O=="string"?L.parse(O,this):O}}),I=i.kdf={},R=I.OpenSSL={execute:function(O,L,B,F,H){if(F||(F=a.random(64/8)),H)var Q=d.create({keySize:L+B,hasher:H}).compute(O,F);else var Q=d.create({keySize:L+B}).compute(O,F);var J=a.create(Q.words.slice(L),B*4);return Q.sigBytes=L*4,w.create({key:Q,iv:J,salt:F})}},N=s.PasswordBasedCipher=C.extend({cfg:C.cfg.extend({kdf:R}),encrypt:function(O,L,B,F){F=this.cfg.extend(F);var H=F.kdf.execute(B,O.keySize,O.ivSize,F.salt,F.hasher);F.iv=H.iv;var Q=C.encrypt.call(this,O,L,H.key,F);return Q.mixIn(H),Q},decrypt:function(O,L,B,F){F=this.cfg.extend(F),L=this._parse(L,F.format);var H=F.kdf.execute(B,O.keySize,O.ivSize,L.salt,F.hasher);F.iv=H.iv;var Q=C.decrypt.call(this,O,L,H.key,F);return Q}})}()})}(_L)),_L.exports}var wL={exports:{}},Rlt=wL.exports,Mfe;function Dlt(){return Mfe||(Mfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ga())})(Rlt,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize;i.call(this,s,o,u,a),this._prevBlock=s.slice(o,o+u)}}),r.Decryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=s.slice(o,o+u);i.call(this,s,o,u,a),this._prevBlock=l}});function i(s,o,a,u){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,u.encryptBlock(l,0);for(var f=0;f<a;f++)s[o+f]^=l[f]}return r}(),n.mode.CFB})}(wL)),wL.exports}var EL={exports:{}},Nlt=EL.exports,Lfe;function Plt(){return Lfe||(Lfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ga())})(Nlt,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var f=c.slice(0);a.encryptBlock(f,0),c[u-1]=c[u-1]+1|0;for(var d=0;d<u;d++)s[o+d]^=f[d]}});return r.Decryptor=i,r}(),n.mode.CTR})}(EL)),EL.exports}var TL={exports:{}},Olt=TL.exports,$fe;function Mlt(){return $fe||($fe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ga())})(Olt,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var u=a>>16&255,l=a>>8&255,c=a&255;u===255?(u=0,l===255?(l=0,c===255?c=0:++c):++l):++u,a=0,a+=u<<16,a+=l<<8,a+=c}else a+=1<<24;return a}function s(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var o=r.Encryptor=r.extend({processBlock:function(a,u){var l=this._cipher,c=l.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),s(d);var h=d.slice(0);l.encryptBlock(h,0);for(var p=0;p<c;p++)a[u+p]^=h[p]}});return r.Decryptor=o,r}(),n.mode.CTRGladman})}(TL)),TL.exports}var SL={exports:{}},Llt=SL.exports,Ffe;function $lt(){return Ffe||(Ffe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ga())})(Llt,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(s,o){var a=this._cipher,u=a.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(c,0);for(var f=0;f<u;f++)s[o+f]^=c[f]}});return r.Decryptor=i,r}(),n.mode.OFB})}(SL)),SL.exports}var CL={exports:{}},Flt=CL.exports,Bfe;function Blt(){return Bfe||(Bfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ga())})(Flt,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,s){this._cipher.encryptBlock(i,s)}}),r.Decryptor=r.extend({processBlock:function(i,s){this._cipher.decryptBlock(i,s)}}),r}(),n.mode.ECB})}(CL)),CL.exports}var AL={exports:{}},jlt=AL.exports,jfe;function Ult(){return jfe||(jfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ga())})(jlt,function(n){return n.pad.AnsiX923={pad:function(r,i){var s=r.sigBytes,o=i*4,a=o-s%o,u=s+a-1;r.clamp(),r.words[u>>>2]|=a<<24-u%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(AL)),AL.exports}var IL={exports:{}},zlt=IL.exports,Ufe;function Vlt(){return Ufe||(Ufe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ga())})(zlt,function(n){return n.pad.Iso10126={pad:function(r,i){var s=i*4,o=s-r.sigBytes%s;r.concat(n.lib.WordArray.random(o-1)).concat(n.lib.WordArray.create([o<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(IL)),IL.exports}var kL={exports:{}},Hlt=kL.exports,zfe;function qlt(){return zfe||(zfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ga())})(Hlt,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(kL)),kL.exports}var RL={exports:{}},Wlt=RL.exports,Vfe;function Glt(){return Vfe||(Vfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ga())})(Wlt,function(n){return n.pad.ZeroPadding={pad:function(r,i){var s=i*4;r.clamp(),r.sigBytes+=s-(r.sigBytes%s||s)},unpad:function(r){for(var i=r.words,s=r.sigBytes-1,s=r.sigBytes-1;s>=0;s--)if(i[s>>>2]>>>24-s%4*8&255){r.sigBytes=s+1;break}}},n.pad.ZeroPadding})}(RL)),RL.exports}var DL={exports:{}},Ylt=DL.exports,Hfe;function Klt(){return Hfe||(Hfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ga())})(Ylt,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(DL)),DL.exports}var NL={exports:{}},Xlt=NL.exports,qfe;function Qlt(){return qfe||(qfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),Ga())})(Xlt,function(n){return function(r){var i=n,s=i.lib,o=s.CipherParams,a=i.enc,u=a.Hex,l=i.format;l.Hex={stringify:function(c){return c.ciphertext.toString(u)},parse:function(c){var f=u.parse(c);return o.create({ciphertext:f})}}}(),n.format.Hex})}(NL)),NL.exports}var PL={exports:{}},Jlt=PL.exports,Wfe;function Zlt(){return Wfe||(Wfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),FE(),BE(),bx(),Ga())})(Jlt,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo,a=[],u=[],l=[],c=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var w=[],E=0;E<256;E++)E<128?w[E]=E<<1:w[E]=E<<1^283;for(var T=0,C=0,E=0;E<256;E++){var I=C^C<<1^C<<2^C<<3^C<<4;I=I>>>8^I&255^99,a[T]=I,u[I]=T;var R=w[T],N=w[R],O=w[N],L=w[I]*257^I*16843008;l[T]=L<<24|L>>>8,c[T]=L<<16|L>>>16,f[T]=L<<8|L>>>24,d[T]=L;var L=O*16843009^N*65537^R*257^T*16843008;h[I]=L<<24|L>>>8,p[I]=L<<16|L>>>16,m[I]=L<<8|L>>>24,g[I]=L,T?(T=R^w[w[w[O^R]]],C^=w[w[C]]):T=C=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],b=o.AES=s.extend({_doReset:function(){var w;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,T=E.words,C=E.sigBytes/4,I=this._nRounds=C+6,R=(I+1)*4,N=this._keySchedule=[],O=0;O<R;O++)O<C?N[O]=T[O]:(w=N[O-1],O%C?C>6&&O%C==4&&(w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255]):(w=w<<8|w>>>24,w=a[w>>>24]<<24|a[w>>>16&255]<<16|a[w>>>8&255]<<8|a[w&255],w^=v[O/C|0]<<24),N[O]=N[O-C]^w);for(var L=this._invKeySchedule=[],B=0;B<R;B++){var O=R-B;if(B%4)var w=N[O];else var w=N[O-4];B<4||O<=4?L[B]=w:L[B]=h[a[w>>>24]]^p[a[w>>>16&255]]^m[a[w>>>8&255]]^g[a[w&255]]}}},encryptBlock:function(w,E){this._doCryptBlock(w,E,this._keySchedule,l,c,f,d,a)},decryptBlock:function(w,E){var T=w[E+1];w[E+1]=w[E+3],w[E+3]=T,this._doCryptBlock(w,E,this._invKeySchedule,h,p,m,g,u);var T=w[E+1];w[E+1]=w[E+3],w[E+3]=T},_doCryptBlock:function(w,E,T,C,I,R,N,O){for(var L=this._nRounds,B=w[E]^T[0],F=w[E+1]^T[1],H=w[E+2]^T[2],Q=w[E+3]^T[3],J=4,ne=1;ne<L;ne++){var Z=C[B>>>24]^I[F>>>16&255]^R[H>>>8&255]^N[Q&255]^T[J++],ie=C[F>>>24]^I[H>>>16&255]^R[Q>>>8&255]^N[B&255]^T[J++],q=C[H>>>24]^I[Q>>>16&255]^R[B>>>8&255]^N[F&255]^T[J++],U=C[Q>>>24]^I[B>>>16&255]^R[F>>>8&255]^N[H&255]^T[J++];B=Z,F=ie,H=q,Q=U}var Z=(O[B>>>24]<<24|O[F>>>16&255]<<16|O[H>>>8&255]<<8|O[Q&255])^T[J++],ie=(O[F>>>24]<<24|O[H>>>16&255]<<16|O[Q>>>8&255]<<8|O[B&255])^T[J++],q=(O[H>>>24]<<24|O[Q>>>16&255]<<16|O[B>>>8&255]<<8|O[F&255])^T[J++],U=(O[Q>>>24]<<24|O[B>>>16&255]<<16|O[F>>>8&255]<<8|O[H&255])^T[J++];w[E]=Z,w[E+1]=ie,w[E+2]=q,w[E+3]=U},keySize:256/32});r.AES=s._createHelper(b)}(),n.AES})}(PL)),PL.exports}var OL={exports:{}},ect=OL.exports,Gfe;function tct(){return Gfe||(Gfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),FE(),BE(),bx(),Ga())})(ect,function(n){return function(){var r=n,i=r.lib,s=i.WordArray,o=i.BlockCipher,a=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=o.extend({_doReset:function(){for(var v=this._key,b=v.words,w=[],E=0;E<56;E++){var T=u[E]-1;w[E]=b[T>>>5]>>>31-T%32&1}for(var C=this._subKeys=[],I=0;I<16;I++){for(var R=C[I]=[],N=c[I],E=0;E<24;E++)R[E/6|0]|=w[(l[E]-1+N)%28]<<31-E%6,R[4+(E/6|0)]|=w[28+(l[E+24]-1+N)%28]<<31-E%6;R[0]=R[0]<<1|R[0]>>>31;for(var E=1;E<7;E++)R[E]=R[E]>>>(E-1)*4+3;R[7]=R[7]<<5|R[7]>>>27}for(var O=this._invSubKeys=[],E=0;E<16;E++)O[E]=C[15-E]},encryptBlock:function(v,b){this._doCryptBlock(v,b,this._subKeys)},decryptBlock:function(v,b){this._doCryptBlock(v,b,this._invSubKeys)},_doCryptBlock:function(v,b,w){this._lBlock=v[b],this._rBlock=v[b+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var E=0;E<16;E++){for(var T=w[E],C=this._lBlock,I=this._rBlock,R=0,N=0;N<8;N++)R|=f[N][((I^T[N])&d[N])>>>0];this._lBlock=I,this._rBlock=C^R}var O=this._lBlock;this._lBlock=this._rBlock,this._rBlock=O,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),v[b]=this._lBlock,v[b+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(v,b){var w=(this._lBlock>>>v^this._rBlock)&b;this._rBlock^=w,this._lBlock^=w<<v}function m(v,b){var w=(this._rBlock>>>v^this._lBlock)&b;this._lBlock^=w,this._rBlock^=w<<v}r.DES=o._createHelper(h);var g=a.TripleDES=o.extend({_doReset:function(){var v=this._key,b=v.words;if(b.length!==2&&b.length!==4&&b.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var w=b.slice(0,2),E=b.length<4?b.slice(0,2):b.slice(2,4),T=b.length<6?b.slice(0,2):b.slice(4,6);this._des1=h.createEncryptor(s.create(w)),this._des2=h.createEncryptor(s.create(E)),this._des3=h.createEncryptor(s.create(T))},encryptBlock:function(v,b){this._des1.encryptBlock(v,b),this._des2.decryptBlock(v,b),this._des3.encryptBlock(v,b)},decryptBlock:function(v,b){this._des3.decryptBlock(v,b),this._des2.encryptBlock(v,b),this._des1.decryptBlock(v,b)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=o._createHelper(g)}(),n.TripleDES})}(OL)),OL.exports}var ML={exports:{}},nct=ML.exports,Yfe;function rct(){return Yfe||(Yfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),FE(),BE(),bx(),Ga())})(nct,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=o.RC4=s.extend({_doReset:function(){for(var c=this._key,f=c.words,d=c.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,v=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+v)%256;var b=h[p];h[p]=h[m],h[m]=b}this._i=this._j=0},_doProcessBlock:function(c,f){c[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var c=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+c[f])%256;var m=c[f];c[f]=c[d],c[d]=m,h|=c[(c[f]+c[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=s._createHelper(a);var l=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)u.call(this)}});r.RC4Drop=s._createHelper(l)}(),n.RC4})}(ML)),ML.exports}var LL={exports:{}},ict=LL.exports,Kfe;function sct(){return Kfe||(Kfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),FE(),BE(),bx(),Ga())})(ict,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.Rabbit=s.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=E>>>16|T&4294901760,I=T<<16|E&65535;g[0]^=E,g[1]^=C,g[2]^=T,g[3]^=I,g[4]^=E,g[5]^=C,g[6]^=T,g[7]^=I;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,v=m>>>16,b=((g*g>>>17)+g*v>>>15)+v*v,w=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=b^w}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=s._createHelper(c)}(),n.Rabbit})}(LL)),LL.exports}var $L={exports:{}},oct=$L.exports,Xfe;function act(){return Xfe||(Xfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),FE(),BE(),bx(),Ga())})(oct,function(n){return function(){var r=n,i=r.lib,s=i.StreamCipher,o=r.algo,a=[],u=[],l=[],c=o.RabbitLegacy=s.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var v=h.words,b=v[0],w=v[1],E=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,T=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=E>>>16|T&4294901760,I=T<<16|E&65535;m[0]^=E,m[1]^=C,m[2]^=T,m[3]^=I,m[4]^=E,m[5]^=C,m[6]^=T,m[7]^=I;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)a[m]=(a[m]<<8|a[m]>>>24)&16711935|(a[m]<<24|a[m]>>>8)&4278255360,d[h+m]^=a[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,v=m>>>16,b=((g*g>>>17)+g*v>>>15)+v*v,w=((m&4294901760)*m|0)+((m&65535)*m|0);l[p]=b^w}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=s._createHelper(c)}(),n.RabbitLegacy})}($L)),$L.exports}var FL={exports:{}},uct=FL.exports,Qfe;function lct(){return Qfe||(Qfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),FE(),BE(),bx(),Ga())})(uct,function(n){return function(){var r=n,i=r.lib,s=i.BlockCipher,o=r.algo;const a=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function f(g,v){let b=v>>24&255,w=v>>16&255,E=v>>8&255,T=v&255,C=g.sbox[0][b]+g.sbox[1][w];return C=C^g.sbox[2][E],C=C+g.sbox[3][T],C}function d(g,v,b){let w=v,E=b,T;for(let C=0;C<a;++C)w=w^g.pbox[C],E=f(g,w)^E,T=w,w=E,E=T;return T=w,w=E,E=T,E=E^g.pbox[a],w=w^g.pbox[a+1],{left:w,right:E}}function h(g,v,b){let w=v,E=b,T;for(let C=a+1;C>1;--C)w=w^g.pbox[C],E=f(g,w)^E,T=w,w=E,E=T;return T=w,w=E,E=T,E=E^g.pbox[1],w=w^g.pbox[0],{left:w,right:E}}function p(g,v,b){for(let I=0;I<4;I++){g.sbox[I]=[];for(let R=0;R<256;R++)g.sbox[I][R]=l[I][R]}let w=0;for(let I=0;I<a+2;I++)g.pbox[I]=u[I]^v[w],w++,w>=b&&(w=0);let E=0,T=0,C=0;for(let I=0;I<a+2;I+=2)C=d(g,E,T),E=C.left,T=C.right,g.pbox[I]=E,g.pbox[I+1]=T;for(let I=0;I<4;I++)for(let R=0;R<256;R+=2)C=d(g,E,T),E=C.left,T=C.right,g.sbox[I][R]=E,g.sbox[I][R+1]=T;return!0}var m=o.Blowfish=s.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,v=g.words,b=g.sigBytes/4;p(c,v,b)}},encryptBlock:function(g,v){var b=d(c,g[v],g[v+1]);g[v]=b.left,g[v+1]=b.right},decryptBlock:function(g,v){var b=h(c,g[v],g[v+1]);g[v]=b.left,g[v+1]=b.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=s._createHelper(m)}(),n.Blowfish})}(FL)),FL.exports}var cct=rL.exports,Jfe;function fct(){return Jfe||(Jfe=1,function(e,t){(function(n,r,i){e.exports=r(Xr(),VB(),alt(),llt(),FE(),dlt(),BE(),u2e(),yZ(),ylt(),l2e(),xlt(),wlt(),Tlt(),vZ(),Alt(),bx(),Ga(),Dlt(),Plt(),Mlt(),$lt(),Blt(),Ult(),Vlt(),qlt(),Glt(),Klt(),Qlt(),Zlt(),tct(),rct(),sct(),act(),lct())})(cct,function(n){return n})}(rL)),rL.exports}var BW=fct();function vp(e){const t=BW.AES.encrypt(e.toString(),"notSecret").toString();return btoa(t)}function dct(e){const t=BW.AES.decrypt(atob(e),"notSecret").toString(BW.enc.Utf8);return parseInt(t,10)}function jE(){const{studyId:e}=L0();return`${e}`}function Sh(){const{index:e}=L0();return e===void 0?0:e.startsWith("reviewer-")||e.startsWith("__")?e:dct(e)}function Ch(){const e=Sh(),t=gZ();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var HR={exports:{}};HR.exports;var Zfe;function hct(){return Zfe||(Zfe=1,function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",v="[object Null]",b="[object Object]",w="[object Proxy]",E="[object RegExp]",T="[object Set]",C="[object String]",I="[object Undefined]",R="[object WeakMap]",N="[object ArrayBuffer]",O="[object DataView]",L="[object Float32Array]",B="[object Float64Array]",F="[object Int8Array]",H="[object Int16Array]",Q="[object Int32Array]",J="[object Uint8Array]",ne="[object Uint8ClampedArray]",Z="[object Uint16Array]",ie="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,U=/^\[object .+?Constructor\]$/,G=/^(?:0|[1-9]\d*)$/,V={};V[L]=V[B]=V[F]=V[H]=V[Q]=V[J]=V[ne]=V[Z]=V[ie]=!0,V[a]=V[u]=V[N]=V[c]=V[O]=V[f]=V[d]=V[h]=V[m]=V[g]=V[b]=V[E]=V[T]=V[C]=V[R]=!1;var Y=typeof la=="object"&&la&&la.Object===Object&&la,ee=typeof self=="object"&&self&&self.Object===Object&&self,ae=Y||ee||Function("return this")(),_e=t&&!t.nodeType&&t,pe=_e&&!0&&e&&!e.nodeType&&e,Te=pe&&pe.exports===_e,Le=Te&&Y.process,ye=function(){try{var ve=pe&&pe.require&&pe.require("util").types;return ve||Le&&Le.binding&&Le.binding("util")}catch{}}(),he=ye&&ye.isTypedArray;function $e(ve,Ae,Qe){switch(Qe.length){case 0:return ve.call(Ae);case 1:return ve.call(Ae,Qe[0]);case 2:return ve.call(Ae,Qe[0],Qe[1]);case 3:return ve.call(Ae,Qe[0],Qe[1],Qe[2])}return ve.apply(Ae,Qe)}function De(ve,Ae){for(var Qe=-1,tn=Array(ve);++Qe<ve;)tn[Qe]=Ae(Qe);return tn}function tt(ve){return function(Ae){return ve(Ae)}}function it(ve,Ae){return ve==null?void 0:ve[Ae]}function Me(ve,Ae){return function(Qe){return ve(Ae(Qe))}}var Ge=Array.prototype,at=Function.prototype,yt=Object.prototype,Tt=ae["__core-js_shared__"],Ot=at.toString,qe=yt.hasOwnProperty,dt=function(){var ve=/[^.]+$/.exec(Tt&&Tt.keys&&Tt.keys.IE_PROTO||"");return ve?"Symbol(src)_1."+ve:""}(),wt=yt.toString,ke=Ot.call(Object),Oe=RegExp("^"+Ot.call(qe).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=Te?ae.Buffer:void 0,Lt=ae.Symbol,Ft=ae.Uint8Array;ht&&ht.allocUnsafe;var dn=Me(Object.getPrototypeOf,Object),Nn=Object.create,Tr=yt.propertyIsEnumerable,Ni=Ge.splice,Un=Lt?Lt.toStringTag:void 0,tr=function(){try{var ve=Et(Object,"defineProperty");return ve({},"",{}),ve}catch{}}(),Ai=ht?ht.isBuffer:void 0,Sr=Math.max,Lo=Date.now,Ji=Et(ae,"Map"),Pi=Et(Object,"create"),Zi=function(){function ve(){}return function(Ae){if(!fc(Ae))return{};if(Nn)return Nn(Ae);ve.prototype=Ae;var Qe=new ve;return ve.prototype=void 0,Qe}}();function Qr(ve){var Ae=-1,Qe=ve==null?0:ve.length;for(this.clear();++Ae<Qe;){var tn=ve[Ae];this.set(tn[0],tn[1])}}function $o(){this.__data__=Pi?Pi(null):{},this.size=0}function oc(ve){var Ae=this.has(ve)&&delete this.__data__[ve];return this.size-=Ae?1:0,Ae}function xa(ve){var Ae=this.__data__;if(Pi){var Qe=Ae[ve];return Qe===r?void 0:Qe}return qe.call(Ae,ve)?Ae[ve]:void 0}function Du(ve){var Ae=this.__data__;return Pi?Ae[ve]!==void 0:qe.call(Ae,ve)}function Jr(ve,Ae){var Qe=this.__data__;return this.size+=this.has(ve)?0:1,Qe[ve]=Pi&&Ae===void 0?r:Ae,this}Qr.prototype.clear=$o,Qr.prototype.delete=oc,Qr.prototype.get=xa,Qr.prototype.has=Du,Qr.prototype.set=Jr;function ji(ve){var Ae=-1,Qe=ve==null?0:ve.length;for(this.clear();++Ae<Qe;){var tn=ve[Ae];this.set(tn[0],tn[1])}}function oi(){this.__data__=[],this.size=0}function Ws(ve){var Ae=this.__data__,Qe=vf(Ae,ve);if(Qe<0)return!1;var tn=Ae.length-1;return Qe==tn?Ae.pop():Ni.call(Ae,Qe,1),--this.size,!0}function Fr(ve){var Ae=this.__data__,Qe=vf(Ae,ve);return Qe<0?void 0:Ae[Qe][1]}function es(ve){return vf(this.__data__,ve)>-1}function Fo(ve,Ae){var Qe=this.__data__,tn=vf(Qe,ve);return tn<0?(++this.size,Qe.push([ve,Ae])):Qe[tn][1]=Ae,this}ji.prototype.clear=oi,ji.prototype.delete=Ws,ji.prototype.get=Fr,ji.prototype.has=es,ji.prototype.set=Fo;function ho(ve){var Ae=-1,Qe=ve==null?0:ve.length;for(this.clear();++Ae<Qe;){var tn=ve[Ae];this.set(tn[0],tn[1])}}function Qo(){this.size=0,this.__data__={hash:new Qr,map:new(Ji||ji),string:new Qr}}function _l(ve){var Ae=bt(this,ve).delete(ve);return this.size-=Ae?1:0,Ae}function Nh(ve){return bt(this,ve).get(ve)}function Pr(ve){return bt(this,ve).has(ve)}function ac(ve,Ae){var Qe=bt(this,ve),tn=Qe.size;return Qe.set(ve,Ae),this.size+=Qe.size==tn?0:1,this}ho.prototype.clear=Qo,ho.prototype.delete=_l,ho.prototype.get=Nh,ho.prototype.has=Pr,ho.prototype.set=ac;function ms(ve){var Ae=this.__data__=new ji(ve);this.size=Ae.size}function Xa(){this.__data__=new ji,this.size=0}function Jo(ve){var Ae=this.__data__,Qe=Ae.delete(ve);return this.size=Ae.size,Qe}function hm(ve){return this.__data__.get(ve)}function Ph(ve){return this.__data__.has(ve)}function _d(ve,Ae){var Qe=this.__data__;if(Qe instanceof ji){var tn=Qe.__data__;if(!Ji||tn.length<n-1)return tn.push([ve,Ae]),this.size=++Qe.size,this;Qe=this.__data__=new ho(tn)}return Qe.set(ve,Ae),this.size=Qe.size,this}ms.prototype.clear=Xa,ms.prototype.delete=Jo,ms.prototype.get=hm,ms.prototype.has=Ph,ms.prototype.set=_d;function wd(ve,Ae){var Qe=jo(ve),tn=!Qe&&gs(ve),rr=!Qe&&!tn&&Za(ve),kr=!Qe&&!tn&&!rr&&wg(ve),fi=Qe||tn||rr||kr,cn=fi?De(ve.length,String):[],Br=cn.length;for(var Zr in ve)fi&&(Zr=="length"||rr&&(Zr=="offset"||Zr=="parent")||kr&&(Zr=="buffer"||Zr=="byteLength"||Zr=="byteOffset")||qt(Zr,Br))||cn.push(Zr);return cn}function gf(ve,Ae,Qe){(Qe!==void 0&&!Bo(ve[Ae],Qe)||Qe===void 0&&!(Ae in ve))&&fr(ve,Ae,Qe)}function yf(ve,Ae,Qe){var tn=ve[Ae];(!(qe.call(ve,Ae)&&Bo(tn,Qe))||Qe===void 0&&!(Ae in ve))&&fr(ve,Ae,Qe)}function vf(ve,Ae){for(var Qe=ve.length;Qe--;)if(Bo(ve[Qe][0],Ae))return Qe;return-1}function fr(ve,Ae,Qe){Ae=="__proto__"&&tr?tr(ve,Ae,{configurable:!0,enumerable:!0,value:Qe,writable:!0}):ve[Ae]=Qe}var Oh=rt();function po(ve){return ve==null?ve===void 0?I:v:Un&&Un in Object(ve)?xt(ve):Ys(ve)}function wl(ve){return Ts(ve)&&po(ve)==a}function Gs(ve){if(!fc(ve)||nr(ve))return!1;var Ae=Nu(ve)?Oe:U;return Ae.test($h(ve))}function uc(ve){return Ts(ve)&&U1(ve.length)&&!!V[po(ve)]}function Mh(ve){if(!fc(ve))return br(ve);var Ae=ln(ve),Qe=[];for(var tn in ve)tn=="constructor"&&(Ae||!qe.call(ve,tn))||Qe.push(tn);return Qe}function lc(ve,Ae,Qe,tn,rr){ve!==Ae&&Oh(Ae,function(kr,fi){if(rr||(rr=new ms),fc(kr))mo(ve,Ae,fi,Qe,lc,tn,rr);else{var cn=tn?tn(cc(ve,fi),kr,fi+"",ve,Ae,rr):void 0;cn===void 0&&(cn=kr),gf(ve,fi,cn)}},Ed)}function mo(ve,Ae,Qe,tn,rr,kr,fi){var cn=cc(ve,Qe),Br=cc(Ae,Qe),Zr=fi.get(Br);if(Zr){gf(ve,Qe,Zr);return}var Ks=kr?kr(cn,Br,Qe+"",ve,Ae,fi):void 0,Pu=Ks===void 0;if(Pu){var ts=jo(Br),Td=!ts&&Za(Br),Fs=!ts&&!Td&&wg(Br);Ks=Br,ts||Td||Fs?jo(cn)?Ks=cn:xf(cn)?Ks=Ne(cn):Td?(Pu=!1,Ks=ue(Br)):Fs?(Pu=!1,Ks=ge(Br)):Ks=[]:Vx(Br)||gs(Br)?(Ks=cn,gs(cn)?Ks=_f(cn):(!fc(cn)||Nu(cn))&&(Ks=Dt(Br))):Pu=!1}Pu&&(fi.set(Br,Ks),rr(Ks,Br,tn,kr,fi),fi.delete(Br)),gf(ve,Qe,Ks)}function pm(ve,Ae){return Lh(Qa(ve,Ae,dr),ve+"")}var go=tr?function(ve,Ae){return tr(ve,"toString",{configurable:!0,enumerable:!1,value:xr(Ae),writable:!0})}:dr;function ue(ve,Ae){return ve.slice()}function Se(ve){var Ae=new ve.constructor(ve.byteLength);return new Ft(Ae).set(new Ft(ve)),Ae}function ge(ve,Ae){var Qe=Se(ve.buffer);return new ve.constructor(Qe,ve.byteOffset,ve.length)}function Ne(ve,Ae){var Qe=-1,tn=ve.length;for(Ae||(Ae=Array(tn));++Qe<tn;)Ae[Qe]=ve[Qe];return Ae}function Be(ve,Ae,Qe,tn){var rr=!Qe;Qe||(Qe={});for(var kr=-1,fi=Ae.length;++kr<fi;){var cn=Ae[kr],Br=void 0;Br===void 0&&(Br=ve[cn]),rr?fr(Qe,cn,Br):yf(Qe,cn,Br)}return Qe}function Re(ve){return pm(function(Ae,Qe){var tn=-1,rr=Qe.length,kr=rr>1?Qe[rr-1]:void 0,fi=rr>2?Qe[2]:void 0;for(kr=ve.length>3&&typeof kr=="function"?(rr--,kr):void 0,fi&&In(Qe[0],Qe[1],fi)&&(kr=rr<3?void 0:kr,rr=1),Ae=Object(Ae);++tn<rr;){var cn=Qe[tn];cn&&ve(Ae,cn,tn,kr)}return Ae})}function rt(ve){return function(Ae,Qe,tn){for(var rr=-1,kr=Object(Ae),fi=tn(Ae),cn=fi.length;cn--;){var Br=fi[++rr];if(Qe(kr[Br],Br,kr)===!1)break}return Ae}}function bt(ve,Ae){var Qe=ve.__data__;return un(Ae)?Qe[typeof Ae=="string"?"string":"hash"]:Qe.map}function Et(ve,Ae){var Qe=it(ve,Ae);return Gs(Qe)?Qe:void 0}function xt(ve){var Ae=qe.call(ve,Un),Qe=ve[Un];try{ve[Un]=void 0;var tn=!0}catch{}var rr=wt.call(ve);return tn&&(Ae?ve[Un]=Qe:delete ve[Un]),rr}function Dt(ve){return typeof ve.constructor=="function"&&!ln(ve)?Zi(dn(ve)):{}}function qt(ve,Ae){var Qe=typeof ve;return Ae=Ae??o,!!Ae&&(Qe=="number"||Qe!="symbol"&&G.test(ve))&&ve>-1&&ve%1==0&&ve<Ae}function In(ve,Ae,Qe){if(!fc(Qe))return!1;var tn=typeof Ae;return(tn=="number"?Ja(Qe)&&qt(Ae,Qe.length):tn=="string"&&Ae in Qe)?Bo(Qe[Ae],ve):!1}function un(ve){var Ae=typeof ve;return Ae=="string"||Ae=="number"||Ae=="symbol"||Ae=="boolean"?ve!=="__proto__":ve===null}function nr(ve){return!!dt&&dt in ve}function ln(ve){var Ae=ve&&ve.constructor,Qe=typeof Ae=="function"&&Ae.prototype||yt;return ve===Qe}function br(ve){var Ae=[];if(ve!=null)for(var Qe in Object(ve))Ae.push(Qe);return Ae}function Ys(ve){return wt.call(ve)}function Qa(ve,Ae,Qe){return Ae=Sr(Ae===void 0?ve.length-1:Ae,0),function(){for(var tn=arguments,rr=-1,kr=Sr(tn.length-Ae,0),fi=Array(kr);++rr<kr;)fi[rr]=tn[Ae+rr];rr=-1;for(var cn=Array(Ae+1);++rr<Ae;)cn[rr]=tn[rr];return cn[Ae]=Qe(fi),$e(ve,this,cn)}}function cc(ve,Ae){if(!(Ae==="constructor"&&typeof ve[Ae]=="function")&&Ae!="__proto__")return ve[Ae]}var Lh=bf(go);function bf(ve){var Ae=0,Qe=0;return function(){var tn=Lo(),rr=s-(tn-Qe);if(Qe=tn,rr>0){if(++Ae>=i)return arguments[0]}else Ae=0;return ve.apply(void 0,arguments)}}function $h(ve){if(ve!=null){try{return Ot.call(ve)}catch{}try{return ve+""}catch{}}return""}function Bo(ve,Ae){return ve===Ae||ve!==ve&&Ae!==Ae}var gs=wl(function(){return arguments}())?wl:function(ve){return Ts(ve)&&qe.call(ve,"callee")&&!Tr.call(ve,"callee")},jo=Array.isArray;function Ja(ve){return ve!=null&&U1(ve.length)&&!Nu(ve)}function xf(ve){return Ts(ve)&&Ja(ve)}var Za=Ai||wf;function Nu(ve){if(!fc(ve))return!1;var Ae=po(ve);return Ae==h||Ae==p||Ae==l||Ae==w}function U1(ve){return typeof ve=="number"&&ve>-1&&ve%1==0&&ve<=o}function fc(ve){var Ae=typeof ve;return ve!=null&&(Ae=="object"||Ae=="function")}function Ts(ve){return ve!=null&&typeof ve=="object"}function Vx(ve){if(!Ts(ve)||po(ve)!=b)return!1;var Ae=dn(ve);if(Ae===null)return!0;var Qe=qe.call(Ae,"constructor")&&Ae.constructor;return typeof Qe=="function"&&Qe instanceof Qe&&Ot.call(Qe)==ke}var wg=he?tt(he):uc;function _f(ve){return Be(ve,Ed(ve))}function Ed(ve){return Ja(ve)?wd(ve):Mh(ve)}var z1=Re(function(ve,Ae,Qe){lc(ve,Ae,Qe)});function xr(ve){return function(){return ve}}function dr(ve){return ve}function wf(){return!1}e.exports=z1}(HR,HR.exports)),HR.exports}var pct=hct();const bZ=yh(pct);function $y(e){return structuredClone(e)}function xZ(){const e=Sh(),n=`${Ch()}_${e}`;return yi(i=>i.answers[n])}const c2e=P.createContext(null);function mct(){const e=P.useContext(c2e);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Zy(){return yi(e=>e.config)}function HA(){const[e]=gx();return!!e.get("participantId")}function ede(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function f2e(){const e=Sh(),t=gZ(),r=`${Ch()}_${e}`,i=yi(L=>L.trialValidation),s=yi(L=>L.sequence),o=yi(L=>L.answers),a=yi(L=>L.modes),u=yi(L=>L.otherTexts),l=xl(),{saveTrialAnswer:c,setreactiveAnswers:f,setMatrixAnswersRadio:d,setMatrixAnswersCheckbox:h,resetOtherText:p}=Su(),{storageEngine:m}=Oo(),g=jE(),v=P.useMemo(()=>a.dataCollectionEnabled,[a]),b=elt(r),w=HA(),E=typeof e!="number"||w||!b,T=xZ(),C=ig(),I=Zy(),R=P.useMemo(()=>Date.now(),[]),N=mct(),O=P.useCallback((L=!0)=>{if(typeof e!="number")return;const B=$y(i[r]),F=Object.values(B).reduce((V,Y)=>Object.hasOwn(Y,"values")?{...V,...Y.values}:V,{});Object.entries(u).forEach(([V,Y])=>{Array.isArray(F[V])&&F[V].includes("__other")&&(F[V]=F[V].filter(ee=>ee!=="__other"),F[V].push(`other:${Y}`)),typeof F[V]=="string"&&F[V]==="__other"&&(F[V]=`other:${Y}`)});const{provenanceGraph:H}=B,Q=Date.now(),{incorrectAnswers:J,helpButtonClickedCount:ne}=T,Z=N&&"current"in N&&N.current?N.current.splice(0,N.current.length):[];if(v&&T.endTime===-1){const V={answer:L?F:{},startTime:R,endTime:Q,incorrectAnswers:J,provenanceGraph:H,windowEvents:Z,timedOut:!L,helpButtonClickedCount:ne};l(c({identifier:r,...V})),m&&m.saveAnswers({...o,[r]:V}),l(f({})),l(p()),l(h(null)),l(d(null))}let ie=e+1;const q=pZ(s,e),U=q!==null&&q.some(V=>Object.hasOwn(V.currentBlock,"skip")&&V.currentBlock.skip!==void 0),G={...o,[r]:{answer:F,startTime:R,endTime:Q,provenanceGraph:H,windowEvents:Z}};U&&[...q.flatMap(Y=>Y.currentBlock.skip?Y.currentBlock.skip.map(ee=>({...ee,firstIndex:Y.firstIndex,lastIndex:Y.lastIndex})):[])].some(Y=>{let ee=!1;const ae=Object.fromEntries(Object.entries(G).filter(([pe])=>{const Te=parseInt(pe.slice(pe.lastIndexOf("_")+1),10);return Te>=Y.firstIndex&&Te<=e})),_e=Y.check!=="block"?Object.entries(ae).filter(([pe])=>pe.slice(0,pe.lastIndexOf("_"))===Y.name):Object.entries(ae);if(_e.length===0)return!1;if(_e.some(([pe,Te])=>!Te))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(Y,null,2)}`);if(Y.check==="response"||Y.check==="responses"){const[pe,Te]=_e[0];Y.check==="response"?ee=Y.comparison==="equal"?Y.value===Te.answer[Y.responseId]:Y.value!==Te.answer[Y.responseId]:ee=!ede(Te.answer,pe,I.components[pe.slice(0,pe.lastIndexOf("_"))],I)}else if(Y.check==="block"||Y.check==="repeatedComponent"){if(_e.length<Y.value)return!1;const pe=_e.map(([ye,he])=>ede(he.answer,ye,I.components[ye.slice(0,ye.lastIndexOf("_"))],I)),Te=pe.filter(ye=>ye).length,Le=pe.length-Te;ee=Y.condition==="numCorrect"&&Te===Y.value||Y.condition==="numIncorrect"&&Le===Y.value}if(ee){const pe=t.indexOf(Y.to),Te=pe===-1?Jut(s,Y.to):-1;return ie=pe===-1?Te:pe,!0}return!1}),C(`/${g}/${vp(ie)}${window.location.search}`)},[e,i,r,u,T,N,v,s,o,R,C,g,l,c,m,f,p,h,d,I,t]);return{isNextDisabled:E,goToNextStep:O}}function gct({label:e="Next",disabled:t=!1,onClick:n,configInUse:r}){const{isNextDisabled:i,goToNextStep:s}=f2e(),o=Zy(),a=ig(),u=P.useCallback(()=>{n&&n(),s()},[s,n]),l=r==null?void 0:r.nextButtonDisableTime,c=(r==null?void 0:r.nextButtonEnableTime)||0,[f,d]=P.useState(void 0);P.useEffect(()=>{let p=0;const m=setInterval(()=>{p+=100,d(p)},100);return()=>{clearInterval(m)}},[]),P.useEffect(()=>{f&&l&&f>=l&&o.uiConfig.timeoutReject&&a("./../__timedOut")},[l,f,a,o.uiConfig.timeoutReject]);const h=P.useMemo(()=>{const p=l&&f?f<=l:!0,m=f?f>=c:!0;return p&&m},[l,c,f]);return P.useEffect(()=>{const p=m=>{m.key==="Enter"&&!t&&!i&&h&&s()};return o.uiConfig.nextOnEnter?(window.addEventListener("keydown",p),()=>{window.removeEventListener("keydown",p)}):()=>{}},[t,i,h,s,o.uiConfig.nextOnEnter]),S.jsxs(S.Fragment,{children:[S.jsx(yn,{type:"submit",disabled:t||i||!h,onClick:u,children:e}),c>0&&f&&f<c&&S.jsxs(Oy,{mt:"md",title:"Please wait",color:"blue",icon:S.jsx(VJ,{}),children:["The next button will be enabled in"," ",Math.ceil((c-f)/1e3)," ","seconds."]}),l&&f&&l-f<1e4&&(l-f>0?S.jsxs(Oy,{mt:"md",title:"Next button disables soon",color:"yellow",icon:S.jsx(ND,{}),children:["The next button disables in"," ",Math.ceil((l-f)/1e3)," ","seconds."]}):!o.uiConfig.timeoutReject&&S.jsxs(Oy,{mt:"md",title:"Next button disabled",color:"red",icon:S.jsx(ND,{}),children:["The next button has timed out and is now disabled.",S.jsx(Yr,{justify:"right",mt:"sm",children:S.jsx(yn,{onClick:()=>s(!1),variant:"link",color:"red",children:"Proceed"})})]}))]})}function yct(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const vct=typeof window<"u"?P.useLayoutEffect:P.useEffect;function ou(e,t){vct(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function bct(e,t){e&&yct(e),ou(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),ou(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),ou(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),ou(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),ou(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),ou(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),ou(`mantine-form:${e}:clear-errors`,t.clearErrors),ou(`mantine-form:${e}:reset`,t.reset),ou(`mantine-form:${e}:validate`,t.validate),ou(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),ou(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),ou(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),ou(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),ou(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),ou(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),ou(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),ou(`mantine-form:${e}:reset-touched`,t.resetTouched)}function xct(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function jW(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function _ct(e){const[t,n]=P.useState(jW(e)),r=P.useRef(t),i=P.useCallback(u=>{n(l=>{const c=jW(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=P.useCallback(()=>i({}),[]),o=P.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=P.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function UW(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function tde(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function nde(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=UW(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=tde(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=tde(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function wct(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function rde(e,t,n){typeof n.value=="object"&&(n.value=v2(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function v2(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(v2(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(v2(a),v2(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(v2(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)rde(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||rde(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function d2e(e){return typeof e!="string"?[]:e.split(".")}function gu(e,t){const n=d2e(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!=null;i+=1)r=r[n[i]];return r}function r3(e,t,n){const r=d2e(e);if(r.length===0)return n;const i=v2(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Ect(e,{from:t,to:n},r){const i=gu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),r3(e,s,r)}function Tct(e,t,n,r){const i=gu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),r3(e,s,r)}function Sct(e,t,n){const r=gu(e,n);return Array.isArray(r)?r3(e,r.filter((i,s)=>s!==t),n):n}function Cct(e,t,n,r){const i=gu(e,r);if(!Array.isArray(i)||i.length<=n)return r;const s=[...i];return s[n]=t,r3(e,s,r)}function Act({$values:e,$errors:t,$status:n}){const r=P.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>wct(a,u,l)),e.setValues({values:Ect(a,u,e.refValues.current),updateState:!0})},[]),i=P.useCallback((a,u)=>{n.clearFieldDirty(a),t.setErrors(l=>nde(a,u,l,-1)),e.setValues({values:Sct(a,u,e.refValues.current),updateState:!0})},[]),s=P.useCallback((a,u,l)=>{n.clearFieldDirty(a),t.setErrors(c=>nde(a,l,c,1)),e.setValues({values:Tct(a,u,l,e.refValues.current),updateState:!0})},[]),o=P.useCallback((a,u,l)=>{n.clearFieldDirty(a),e.setValues({values:Cct(a,l,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s,replaceListItem:o}}var Vz,ide;function _Z(){return ide||(ide=1,Vz=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),Vz}var Ict=_Z();const qR=yh(Ict);function Zk(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function kct({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=P.useState(t),[o,a]=P.useState(e),u=P.useRef(t),l=P.useRef(e),c=P.useCallback(C=>{const I=typeof C=="function"?C(u.current):C;u.current=I,n==="controlled"&&s(I)},[]),f=P.useCallback((C,I=!1)=>{const R=typeof C=="function"?C(l.current):C;l.current=R,(n==="controlled"||I)&&a(R)},[]),d=P.useCallback(()=>c({}),[]),h=P.useCallback(C=>{const I=C?{...C,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(I),f({})},[]),p=P.useCallback((C,I)=>{c(R=>Zk(R,C)===I?R:{...R,[C]:I})},[]),m=P.useCallback((C,I,R)=>{f(N=>Zk(N,C)===I?N:{...N,[C]:I},R)},[]),g=P.useCallback((C,I)=>{const R=Zk(l.current,C),N=!qR(gu(C,r.getValuesSnapshot()),I),O=UW(C,l.current);O[C]=N,f(O,R!==N)},[]),v=P.useCallback(C=>Zk(u.current,C),[]),b=P.useCallback(C=>f(I=>{if(typeof C!="string")return I;const R=UW(C,I);return delete R[C],qR(R,I)?I:R}),[]),w=P.useCallback(C=>{if(C){const R=gu(C,l.current);if(typeof R=="boolean")return R;const N=gu(C,r.refValues.current),O=gu(C,r.valuesSnapshot.current);return!qR(N,O)}return Object.keys(l.current).length>0?Zk(l.current):!qR(r.refValues.current,r.valuesSnapshot.current)},[]),E=P.useCallback(()=>l.current,[]),T=P.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:v,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:b,isDirty:w,getDirty:E,getTouched:T,setCalculatedFieldDirty:g}}function Rct({initialValues:e,onValuesChange:t,mode:n}){const r=P.useRef(!1),[i,s]=P.useState(e||{}),o=P.useRef(i),a=P.useRef(i),u=P.useCallback(({values:m,subscribers:g,updateState:v=!0,mergeWithPreviousValues:b=!0})=>{const w=o.current,E=m instanceof Function?m(o.current):m,T=b?{...w,...E}:E;o.current=T,v&&s(T),t==null||t(T,w),g==null||g.filter(Boolean).forEach(C=>C({updatedValues:T,previousValues:w}))},[t]),l=P.useCallback(m=>{var b;const g=gu(m.path,o.current),v=m.value instanceof Function?m.value(g):m.value;if(g!==v){const w=o.current,E=r3(m.path,v,o.current);u({values:E,updateState:m.updateState}),(b=m.subscribers)==null||b.filter(Boolean).forEach(T=>T({path:m.path,updatedValues:E,previousValues:w}))}},[u]),c=P.useCallback(m=>{a.current=m},[]),f=P.useCallback((m,g)=>{r.current||(r.current=!0,u({values:m,updateState:n==="controlled"}),c(m),g())},[u]),d=P.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=P.useCallback(()=>o.current,[]),p=P.useCallback(()=>a.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h,getValuesSnapshot:p}}function Dct({$status:e}){const t=P.useRef({}),n=P.useCallback((i,s)=>{P.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=P.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:gu(i,o.previousValues),value:gu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function sde(e,t){return e?`${e}-${t.toString()}`:t.toString()}function ode(e){const t=jW(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function zW(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=gu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>zW(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||zW(o,t,a,i)),i},r)}function VW(e,t){return ode(typeof e=="function"?e(t):zW(e,t))}function W4(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=VW(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Nct="__MANTINE_FORM_INDEX__";function ade(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]+/g,`.${Nct}`)):!1:!1}function h2e({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=m=>m,enhanceGetInputProps:f,validate:d,onSubmitPreventDefault:h="always",touchTrigger:p="change"}={}){const m=_ct(r),g=Rct({initialValues:n,onValuesChange:l,mode:t}),v=kct({initialDirty:i,initialTouched:s,$values:g,mode:t}),b=Act({$values:g,$errors:m,$status:v}),w=Dct({$status:v}),[E,T]=P.useState(0),[C,I]=P.useState({}),[R,N]=P.useState(!1),O=P.useCallback(()=>{g.resetValues(),m.clearErrors(),v.resetDirty(),v.resetTouched(),t==="uncontrolled"&&T(ee=>ee+1)},[]),L=P.useCallback(ee=>{o&&m.clearErrors(),t==="uncontrolled"&&T(ae=>ae+1),Object.keys(w.subscribers.current).forEach(ae=>{const _e=gu(ae,g.refValues.current),pe=gu(ae,ee);_e!==pe&&w.getFieldSubscribers(ae).forEach(Te=>Te({previousValues:ee,updatedValues:g.refValues.current}))})},[o]),B=P.useCallback(ee=>{const ae=g.refValues.current;g.initialize(ee,()=>t==="uncontrolled"&&T(_e=>_e+1)),L(ae)},[L]),F=P.useCallback((ee,ae,_e)=>{const pe=ade(ee,a),Te=ae instanceof Function?ae(gu(ee,g.refValues.current)):ae;v.setCalculatedFieldDirty(ee,Te),p==="change"&&v.setFieldTouched(ee,!0),!pe&&o&&m.clearFieldError(ee),g.setFieldValue({path:ee,value:ae,updateState:t==="controlled",subscribers:[...w.getFieldSubscribers(ee),pe?Le=>{const ye=W4(ee,d,Le.updatedValues);ye.hasError?m.setFieldError(ee,ye.error):m.clearFieldError(ee)}:null,(_e==null?void 0:_e.forceUpdate)!==!1&&t!=="controlled"?()=>I(Le=>({...Le,[ee]:(Le[ee]||0)+1})):null]})},[l,d]),H=P.useCallback(ee=>{const ae=g.refValues.current;g.setValues({values:ee,updateState:t==="controlled"}),L(ae)},[l,L]),Q=P.useCallback(()=>{const ee=VW(d,g.refValues.current);return m.setErrors(ee.errors),ee},[d]),J=P.useCallback(ee=>{const ae=W4(ee,d,g.refValues.current);return ae.hasError?m.setFieldError(ee,ae.error):m.clearFieldError(ee),ae},[d]),ne=(ee,{type:ae="input",withError:_e=!0,withFocus:pe=!0,...Te}={})=>{const ye={onChange:xct(he=>F(ee,he,{forceUpdate:!1})),"data-path":sde(e,ee)};return _e&&(ye.error=m.errorsState[ee]),ae==="checkbox"?ye[t==="controlled"?"checked":"defaultChecked"]=gu(ee,g.refValues.current):ye[t==="controlled"?"value":"defaultValue"]=gu(ee,g.refValues.current),pe&&(ye.onFocus=()=>v.setFieldTouched(ee,!0),ye.onBlur=()=>{if(ade(ee,u)){const he=W4(ee,d,g.refValues.current);he.hasError?m.setFieldError(ee,he.error):m.clearFieldError(ee)}}),Object.assign(ye,f==null?void 0:f({inputProps:ye,field:ee,options:{type:ae,withError:_e,withFocus:pe,...Te},form:Y}))},Z=(ee,ae)=>_e=>{h==="always"&&(_e==null||_e.preventDefault());const pe=Q();if(pe.hasErrors)h==="validation-failed"&&(_e==null||_e.preventDefault()),ae==null||ae(pe.errors,g.refValues.current,_e);else{const Te=ee==null?void 0:ee(c(g.refValues.current),_e);Te instanceof Promise&&(N(!0),Te.finally(()=>N(!1)))}},ie=ee=>c(ee||g.refValues.current),q=P.useCallback(ee=>{ee.preventDefault(),O()},[]),U=P.useCallback(ee=>ee?!W4(ee,d,g.refValues.current).hasError:!VW(d,g.refValues.current).hasErrors,[d]),G=ee=>`${E}-${ee}-${C[ee]||0}`,V=P.useCallback(ee=>document.querySelector(`[data-path="${sde(e,ee)}"]`),[]),Y={watch:w.watch,initialized:g.initialized.current,values:g.stateValues,getValues:g.getValues,setInitialValues:g.setValuesSnapshot,initialize:B,setValues:H,setFieldValue:F,submitting:R,setSubmitting:N,errors:m.errorsState,setErrors:m.setErrors,setFieldError:m.setFieldError,clearFieldError:m.clearFieldError,clearErrors:m.clearErrors,resetDirty:v.resetDirty,setTouched:v.setTouched,setDirty:v.setDirty,isTouched:v.isTouched,resetTouched:v.resetTouched,isDirty:v.isDirty,getTouched:v.getTouched,getDirty:v.getDirty,reorderListItem:b.reorderListItem,insertListItem:b.insertListItem,removeListItem:b.removeListItem,replaceListItem:b.replaceListItem,reset:O,validate:Q,validateField:J,getInputProps:ne,onSubmit:Z,onReset:q,isValid:U,getTransformedValues:ie,key:G,getInputNode:V};return bct(e,Y),Y}function Pct(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Oct(e){return Pct(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function p2e(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Mct=new URLSearchParams(window.location.search),Lct=(e,t)=>{let n={};return e.forEach(r=>{const i=t[r.id];if(i)n={...n,[r.id]:i};else{let s="";r.paramCapture?s=Mct.get(r.paramCapture):r.type==="reactive"?s=[]:(r.type==="matrix-radio"||r.type==="matrix-checkbox")&&(s=Object.fromEntries(r.questionOptions.map(o=>[o,""]))),n={...n,[r.id]:s,[`${r.id}-dontKnow`]:""}}}),{...n}},$ct=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:(r,i)=>{if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.values(r).every(s=>s!=="")?null:"Empty Input";if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const s=[...n.requiredValue].sort(),o=[...r].sort();return s.every((a,u)=>a===o[u])?null:"Incorrect input"}return n.type==="checkbox"?p2e(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?(r==null||r==="")&&!i[`${n.id}-dontKnow`]?"Empty input":null:r===null?"Empty input":null}})}),t};function Fct(e,t,n){const[r,i]=P.useState(null),s=h2e({initialValues:Lct(e,n),validate:$ct(e)});return P.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function UE(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=p2e(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function m2e({horizontal:e,children:t,style:n}){return e?S.jsx(Yr,{mt:Ke(4),gap:"lg",style:n,children:t}):S.jsx(uo,{gap:"md",style:n,children:t})}function Bct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u,horizontal:l,withOther:c}=e,f=a.map(w=>typeof w=="string"?{value:w,label:w}:w),[d,h]=P.useState(!1),[p,m]=P.useState(""),{setOtherText:g}=Su(),v=xl();P.useEffect(()=>{v(g({key:e.id,value:p}))},[p,e.id,g,v]);const b=P.useMemo(()=>UE(e,n,f),[e,n,f]);return S.jsxs(sl.Group,{label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(dl,{text:s,required:o})})]}),description:u,...n,error:b,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[S.jsx(je,{mt:"xs",children:S.jsxs(m2e,{horizontal:!!l,style:{flexGrow:1},children:[f.map(w=>S.jsx(sl,{disabled:t,value:w.value,label:w.label},w.value)),c&&S.jsx(sl,{disabled:t,value:"__other",checked:d,onClick:w=>h(w.currentTarget.checked),label:l?"Other":S.jsx(Ki,{mt:-8,placeholder:"Other",disabled:!d,value:p,onChange:w=>m(w.currentTarget.value)})},"__other")]})}),l&&c&&S.jsx(Ki,{mt:"sm",placeholder:"Other",disabled:!d,value:p,onChange:w=>m(w.currentTarget.value),w:216})]})}function jct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return S.jsx(OA,{disabled:t,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(dl,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:UE(e,n,c)})}function Uct({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return S.jsx(Ki.Wrapper,{label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[r&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(dl,{text:i,required:s})})]}),description:o,size:"md",children:t.value&&S.jsx(Dp,{children:Array.isArray(t.value)?t.value.map(a=>S.jsx(Dp.Item,{children:a},a)):S.jsx(Dp.Item,{children:t.value})})})}function g2e({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i,stretch:s}){const{prompt:o,required:a,options:u,leftLabel:l,rightLabel:c,secondaryText:f,horizontal:d,withOther:h}=e,p=u.map(T=>typeof T=="string"?{value:T,label:T}:T),[m,g]=P.useState(!1),[v,b]=P.useState(""),{setOtherText:w}=Su(),E=xl();return P.useEffect(()=>{E(w({key:e.id,value:v}))},[v,e.id,w,E]),S.jsxs(b0.Group,{name:`radioInput${e.id}`,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(dl,{text:o,required:a})})]}),description:f,...n,error:UE(e,n,p),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:[S.jsxs(Yr,{gap:"lg",align:"flex-end",mt:d?0:"sm",children:[l?S.jsx(lt,{children:l}):null,S.jsxs(m2e,{horizontal:!!d,style:{flexGrow:1},children:[p.map(T=>S.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":Ke(12),flex:s?1:"unset",alignItems:"center"},children:[d&&S.jsx(lt,{size:"sm",children:T.label}),S.jsx(b0,{disabled:t,value:T.value,label:T.label,styles:{label:{display:"none"}},onChange:()=>g(!1)}),!d&&S.jsx(lt,{size:"sm",children:T.label})]},`${T.value}-${e.id}`)),h&&S.jsxs("div",{style:{display:"flex",flexDirection:d?"column":"row",gap:d?"unset":Ke(12),flex:s?1:"unset",alignItems:"center"},children:[d&&S.jsx(lt,{size:"sm",children:"Other"}),S.jsx(b0,{disabled:t,value:"other",checked:m,onClick:T=>g(T.currentTarget.checked),label:!d&&S.jsx(Ki,{mt:-8,placeholder:"Other",disabled:!m,value:v,onChange:T=>b(T.currentTarget.value)}),mt:0})]})]}),S.jsx(lt,{children:c})]}),d&&h&&S.jsx(Ki,{mt:"sm",placeholder:"Other",disabled:!m,value:v,onChange:T=>b(T.currentTarget.value),w:216})]},e.id)}function zct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o,horizontal:!0};return S.jsx(g2e,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i,stretch:!0})}function Vct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return S.jsx(hJ,{disabled:t,placeholder:l,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(dl,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:UE(e,n)})}function Hct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,[l,c]=P.useMemo(()=>[Math.min(...a.map(d=>d.value)),Math.max(...a.map(d=>d.value))],[a]),f=UE(e,n);return S.jsx(Ki.Wrapper,{label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(dl,{text:s,required:o})})]}),description:u,error:f,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:S.jsx(CB,{disabled:t,marks:a,min:l,max:c,...n,h:40,mt:4})})}function qct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return S.jsx(Ey,{disabled:t,placeholder:s,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(dl,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:UE(e,n)})}function Wct({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return S.jsx(eJ,{disabled:t,placeholder:s,label:S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${r}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(dl,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:UE(e,n)})}function Gct({_choices:e,_n:t,idx:n,question:r,answer:i,onChange:s,disabled:o}){return S.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(a=>S.jsx(sl,{disabled:o,checked:i.value[r.label].split("|").includes(a.value),onChange:u=>s(u,r.label,a),value:a.value},`${a.label}-${n}`))})}function Yct({_choices:e,_n:t,idx:n,question:r,response:i,answer:s,onChange:o,disabled:a}){return S.jsx(b0.Group,{name:`radioInput${i.id}-${n}`,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))",flex:1},onChange:u=>o(u,r.label),value:s.value[r.label],children:S.jsx("div",{style:{flex:1,display:"grid",gridTemplateColumns:`repeat(${t}, 1fr)`,justifyItems:"center"},children:e.map(u=>S.jsx(b0,{disabled:a,value:u.value},`${u.label}-${n}`))})},`${i.id}-${n}`)}function Kct({response:e,answer:t,index:n,disabled:r,enumerateQuestions:i}){const{setMatrixAnswersRadio:s,setMatrixAnswersCheckbox:o}=Su(),a=xl(),{answerOptions:u,questionOptions:l,prompt:c,secondaryText:f,required:d}=e,p=typeof u=="string"?{likely5:["Highly Unlikely","Unlikely","Neutral","Likely","Highly Likely"],likely7:["Highly Unlikely","Unlikely","Slightly Unlikely","Neutral","Slightly Likely","Likely","Highly Likely"],satisfaction5:["Highly Unsatisfied","Unsatisfied","Neutral","Satisfied","Highly Satisfied"],satisfaction7:["Highly Unsatisfied","Unsatisfied","Slightly Unsatisfied","Neutral","Slightly Satisfied","Satisfied","Highly Satisfied"]}[u].map(E=>({value:E,label:E})):u.map(E=>typeof E=="string"?{value:E,label:E}:E),m=l.map(E=>typeof E=="string"?{value:E,label:E}:E),g=(E,T)=>{const C={type:"radio",questionKey:T,val:E,responseId:e.id};a(s(C))},v=(E,T,C)=>{const I=E.target.checked,R={questionKey:T,responseId:e.id,value:C.value,label:C.label,isChecked:I,choiceOptions:p};a(o(R))},b=p.length,w=m.length;return S.jsxs(S.Fragment,{children:[S.jsxs(an,{direction:"row",wrap:"nowrap",gap:4,children:[i&&S.jsx(je,{style:{minWidth:"fit-content",fontSize:16,fontWeight:500},children:`${n}. `}),S.jsx(je,{style:{display:"block"},className:"no-last-child-bottom-padding",children:S.jsx(dl,{text:c,required:d})})]}),S.jsx(lt,{c:"dimmed",size:"sm",mt:0,children:f}),S.jsxs(je,{style:{display:"grid",gridTemplateColumns:"auto 1fr",gridTemplateRows:"auto 1fr"},m:"md",mt:"xs",children:[S.jsx("div",{style:{borderBottom:"1px solid var(--mantine-color-dark-0)",borderRight:"1px solid var(--mantine-color-dark-0)"}}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateColumns:`repeat(${b}, 1fr)`,alignItems:"center",justifyItems:"center",borderBottom:"1px solid var(--mantine-color-dark-0)"},children:p.map((E,T)=>S.jsx(lt,{style:{fontWeight:"bold",textAlign:"center",fontSize:"0.8em"},mb:"sm",ml:"xs",mr:"xs",children:E.label},`choice-${T}-label`))}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w}, 1fr)`},children:m.map((E,T)=>S.jsx(lt,{style:{height:"80px",width:"100%",display:"flex",alignItems:"center",justifyContent:"end",borderRight:"1px solid var(--mantine-color-dark-0)",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`,overflowY:"hidden"},ta:"right",p:"sm",miw:140,children:E.label},`question-${T}-label`))}),S.jsx("div",{style:{height:"100%",display:"grid",gridTemplateRows:`repeat(${w},1fr)`},children:m.map((E,T)=>S.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",backgroundColor:`${(T+1)%2===0?"var(--mantine-color-gray-2)":"white"}`},children:e.type==="matrix-radio"?S.jsx(Yct,{disabled:r,idx:T,question:E,answer:t,_choices:p,_n:b,onChange:g,response:e}):S.jsx(Gct,{disabled:r,idx:T,question:E,answer:t,_choices:p,_n:b,onChange:v})},`question-${T}`))})]})]})}function Xct({response:e,answer:t,storedAnswer:n,index:r,configInUse:i,form:s}){const o=(Object.keys(n||{}).length>0?{value:n[e.id]}:t)||{value:void 0},a=Object.keys(n||{}).length>0,[u]=gx(),c=Zy().uiConfig.enumerateQuestions??!1,f=P.useMemo(()=>{if(e.paramCapture){const p=u.get(e.paramCapture);return a||!!p}return a},[a,e.paramCapture,u]),[d,h]=P.useState(!!(n!=null&&n[`${e.id}-dontKnow`])||!1);return P.useEffect(()=>{s.setFieldValue(`${e.id}-dontKnow`,!!d),d&&s.setFieldValue(e.id,"")},[d,e.id]),S.jsxs(je,{mb:e.withDivider||i.responseDividers?"xl":"lg",children:[e.type==="numerical"&&S.jsx(Vct,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="shortText"&&S.jsx(qct,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="longText"&&S.jsx(Wct,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="likert"&&S.jsx(zct,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="dropdown"&&S.jsx(jct,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="slider"&&S.jsx(Hct,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="radio"&&S.jsx(g2e,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="checkbox"&&S.jsx(Bct,{response:e,disabled:f||d,answer:o,index:r,enumerateQuestions:c}),e.type==="reactive"&&S.jsx(Uct,{response:e,answer:o,index:r,enumerateQuestions:c}),(e.type==="matrix-radio"||e.type==="matrix-checkbox")&&S.jsx(Kct,{disabled:f||d,response:e,answer:o,index:r,enumerateQuestions:c}),e.withDontKnow&&S.jsx(sl,{mt:"xs",disabled:f,label:"I don't know",checked:d,onChange:p=>h(p.currentTarget.checked)}),(e.withDivider||i.responseDividers)&&S.jsx(NE,{mt:"xl",mb:"xs"})]})}function iF({config:e,location:t,status:n,style:r}){var q;const{storageEngine:i}=Oo(),s=xl(),{updateResponseBlockValidation:o,toggleShowHelpText:a,saveIncorrectAnswer:u,incrementHelpCounter:l}=Su(),c=Sh(),f=Ch(),d=n==null?void 0:n.answer,h=jE(),p=ig(),m=e,g=P.useMemo(()=>{var U;return((U=m==null?void 0:m.response)==null?void 0:U.filter(G=>G.location?G.location===t:t==="belowStimulus"))||[]},[m==null?void 0:m.response,t]),v=P.useMemo(()=>g.map(U=>({...U,required:U.required===void 0?!0:U.required})),[g]),b=Fct(v,c,d||{}),[w,E]=P.useState(void 0),T=yi(U=>U.reactiveAnswers),C=yi(U=>U.reactiveProvenance),I=yi(U=>U.matrixAnswers),R=(m==null?void 0:m.provideFeedback)&&(((q=m==null?void 0:m.correctAnswer)==null?void 0:q.length)||0)>0,N=(m==null?void 0:m.allowFailedTraining)===void 0?!0:m.allowFailedTraining,[O,L]=P.useState(0),B=(m==null?void 0:m.trainingAttempts)||2,[F,H]=P.useState(!1),Q=t===((m==null?void 0:m.nextButtonLocation)||"belowStimulus");P.useEffect(()=>{const U=v.find(G=>G.type==="reactive");if(T&&U){const G=U.id;b.setValues({...b.values,[G]:T[G]})}},[T]),P.useEffect(()=>{C&&E(C)},[C]),P.useEffect(()=>{const U=v.filter(G=>G.type==="matrix-radio"||G.type==="matrix-checkbox");if(I&&U.length>0){const G={...b.values};U.forEach(V=>{const{id:Y}=V;G[Y]={...b.getInputProps(Y).value,...I[Y]}}),b.setValues(G)}},[I]),P.useEffect(()=>{s(o({location:t,identifier:`${f}_${c}`,status:b.isValid(),values:$y(b.values),provenanceGraph:w}))},[b.values,f,c,t,s,o,w]);const[J,ne]=P.useState(Object.fromEntries(v.map(U=>[U.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),Z=(U,G,V,Y,ee)=>{ne(ae=>({...ae,[U]:{visible:G,title:V,message:Y,color:ee}}))},ie=()=>{const U=O+1;L(U);const G=Object.fromEntries(v.map(V=>{var ae,_e;const Y=(_e=(ae=m.correctAnswer)==null?void 0:ae.find(pe=>pe.id===V.id))==null?void 0:_e.answer,ee=b.values[V.id];return[V.id,Array.isArray(ee)?typeof Y=="string"?ee.length===1&&Y===ee[0]:ee.length===Y.length&&ee.every(pe=>Y.includes(pe)):Y===ee]}));R&&(v.forEach(V=>{var Y;if(G[V.id]&&!((Y=J[V.id])!=null&&Y.message.includes("You've failed to answer this question correctly")))Z(V.id,!0,"Correct Answer","You have answered the question correctly.","green");else{s(u({question:`${f}_${c}`,identifier:V.id,answer:b.values[V.id]}));let ee="";B===-1?ee="Please try again.":U>=B?(ee=`You didn't answer this question correctly after ${B} attempts. ${N?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,!N&&i&&i.rejectCurrentParticipant(h,"Failed training").then(()=>{setTimeout(()=>{p("./../__trainingFailed")},5e3)}).catch(()=>{console.error("Failed to reject participant who failed training"),setTimeout(()=>{p("./../__trainingFailed")},5e3)})):B-U===1?ee="Please try again. You have 1 attempt left.":ee=`Please try again. You have ${B-U} attempts left.`,Z(V.id,!0,"Incorrect Answer",ee,"red")}}),H(N&&U>=B||Object.values(G).every(V=>V)&&U<=B))};return S.jsxs("div",{style:r,children:[v.map((U,G)=>{var Y,ee;const V=(ee=(Y=m.correctAnswer)==null?void 0:Y.find(ae=>ae.id===U.id))==null?void 0:ee.answer;return S.jsx(ci.Fragment,{children:U.hidden?"":S.jsxs(S.Fragment,{children:[S.jsx(Xct,{storedAnswer:d,answer:{...b.getInputProps(U.id,{type:U.type==="checkbox"?"checkbox":"input"})},response:U,index:G+1,configInUse:m,form:b}),J[U.id].visible&&S.jsxs(Oy,{mb:"md",title:J[U.id].title,color:J[U.id].color,children:[J[U.id].message," ",J[U.id].message.includes("Please try again")&&S.jsxs(S.Fragment,{children:[S.jsx("br",{}),S.jsx("br",{}),"If you're unsure"," ",S.jsx(DE,{style:{fontSize:14},onClick:()=>{s(a()),s(l({identifier:`${f}_${c}`}))},children:"review the help text."})," "]}),S.jsx("br",{}),S.jsx("br",{}),O>=B&&B>=0&&V&&` The correct answer was: ${V}.`]})]})},`${U.id}-${c}`)}),S.jsxs(Yr,{justify:"right",gap:"xs",children:[R&&Q&&S.jsx(yn,{onClick:()=>ie(),disabled:!b.isValid()||O>=B&&B>=0,children:"Check Answer"}),Q&&S.jsx(gct,{disabled:R&&!F||!b.isValid(),label:m.nextButtonText||"Next",configInUse:m})]})]})}const eR="@REVISIT_COMMS",Qct={minHeight:"500px",width:"100%",border:0};function Jct({currentConfig:e}){const{setreactiveAnswers:t,setreactiveProvenance:n}=Su(),r=xl(),i=zSe(),s=P.useRef(null),o=P.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Ch(),u=P.useCallback((l,c)=>{var f,d;(d=(f=s.current)==null?void 0:f.contentWindow)==null||d.postMessage({error:!1,type:`${eR}/${l}`,iframeId:o,message:c},"*")},[s,o]);return P.useEffect(()=>{const l=c=>{const{data:f}=c;if(typeof f=="object"&&o===f.iframeId)switch(f.type){case`${eR}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${eR}/READY`:s.current&&(s.current.style.height=`${f.message.documentHeight}px`);break;case`${eR}/ANSWERS`:r(t(f.message));break;case`${eR}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",l),()=>window.removeEventListener("message",l)},[r,i,o,e,u,t,n]),S.jsx("iframe",{ref:s,src:e.path.startsWith("http")?e.path:`${qa}${e.path}?trialid=${a}&id=${o}`,style:Qct})}async function wZ(e){const n=await(await fetch(`${qa}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}async function Zct(e){const t=await fetch(`${qa}${e}`);let n;try{n=await t.json()}catch(r){console.error("Invalid JSON:",r)}return n}function Sb({email:e,path:t}){const n=Eh();return S.jsxs(Xy,{fluid:!0,my:50,maw:800,mx:"auto",children:[S.jsx(oo,{order:2,children:S.jsx(lt,{span:!0,c:"orange",children:"404"})}),S.jsxs(lt,{children:[S.jsx(lt,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),S.jsx(rd,{h:"lg"}),S.jsxs(Dp,{children:[S.jsx(Dp.Item,{children:S.jsx(lt,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),S.jsx(Dp.Item,{children:S.jsxs(lt,{children:["If you're a participant, please contact the study administrator"," ",e&&S.jsxs(S.Fragment,{children:["at"," ",S.jsxs(DE,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const eft={maxWidth:"100%"};function tft({currentConfig:e}){const t={...eft,...e.style},[n,r]=P.useState(!0),[i,s]=P.useState(!1);return P.useEffect(()=>{async function o(){const a=await wZ(e.path);s(!!a),r(!1)}o()},[e]),n||i?S.jsx(mx,{mx:"auto",src:`${qa}${e.path}`,style:t}):S.jsx(Sb,{path:e.path})}function Fy(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function nft(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function qA(e){let t,n,r;e.length!==2?(t=Fy,n=(a,u)=>Fy(e(a),u),r=(a,u)=>e(a)-u):(t=e===Fy||e===nft?e:rft,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function rft(){return 0}function y2e(e){return e===null?NaN:+e}function*ift(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const v2e=qA(Fy),Cb=v2e.right,sft=v2e.left;qA(y2e).center;function oft(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function aft(e,t){const n=oft(e,t);return n&&Math.sqrt(n)}function CN(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Gl{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class ude extends Map{constructor(t,n=_2e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(HW(this,t))}has(t){return super.has(HW(this,t))}set(t,n){return super.set(b2e(this,t),n)}delete(t){return super.delete(x2e(this,t))}}class sF extends Set{constructor(t,n=_2e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(HW(this,t))}add(t){return super.add(b2e(this,t))}delete(t){return super.delete(x2e(this,t))}}function HW({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function b2e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function x2e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function _2e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function uft(e,t){return Array.from(t,n=>e[n])}function lft(e=Fy){if(e===Fy)return w2e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function w2e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const cft=Math.sqrt(50),fft=Math.sqrt(10),dft=Math.sqrt(2);function oF(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=cft?10:s>=fft?5:s>=dft?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?oF(e,t,n*2):[a,u,l]}function qW(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?oF(t,e,n):oF(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function WW(e,t,n){return t=+t,e=+e,n=+n,oF(e,t,n)[2]}function Ab(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?WW(t,e,n):WW(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function By(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function GW(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function E2e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?w2e:lft(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));E2e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(tR(e,n,t),i(e[r],s)>0&&tR(e,n,r);o<a;){for(tR(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?tR(e,n,a):(++a,tR(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function tR(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function YW(e,t,n){if(e=Float64Array.from(ift(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return GW(e);if(t>=1)return By(e);var r,i=(r-1)*t,s=Math.floor(i),o=By(E2e(e,s).subarray(0,s+1)),a=GW(e.subarray(s+1));return o+(a-o)*(i-s)}}function T2e(e,t,n=y2e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function hft(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function S2e(e,t){return YW(e,.5,t)}function*pft(e){for(const t of e)yield*t}function C2e(e){return Array.from(pft(e))}function qc(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function A2e(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function mft(e,...t){e=new sF(e),t=t.map(gft);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function gft(e){return e instanceof sF?e:new sF(e)}function yft(...e){const t=new sF;for(const n of e)for(const r of n)t.add(r);return t}var vft={value:()=>{}};function HB(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new BL(n)}function BL(e){this._=e}function bft(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}BL.prototype=HB.prototype={constructor:BL,on:function(e,t){var n=this._,r=bft(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=xft(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=lde(n[i],e.name,t);else if(t==null)for(i in n)n[i]=lde(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new BL(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function xft(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function lde(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=vft,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var KW="http://www.w3.org/1999/xhtml";const cde={svg:"http://www.w3.org/2000/svg",xhtml:KW,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function qB(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),cde.hasOwnProperty(t)?{space:cde[t],local:e}:e}function _ft(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===KW&&t.documentElement.namespaceURI===KW?t.createElement(e):t.createElementNS(n,e)}}function wft(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function I2e(e){var t=qB(e);return(t.local?wft:_ft)(t)}function Eft(){}function EZ(e){return e==null?Eft:function(){return this.querySelector(e)}}function Tft(e){typeof e!="function"&&(e=EZ(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Xl(r,this._parents)}function k2e(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Sft(){return[]}function R2e(e){return e==null?Sft:function(){return this.querySelectorAll(e)}}function Cft(e){return function(){return k2e(e.apply(this,arguments))}}function Aft(e){typeof e=="function"?e=Cft(e):e=R2e(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Xl(r,i)}function D2e(e){return function(){return this.matches(e)}}function N2e(e){return function(t){return t.matches(e)}}var Ift=Array.prototype.find;function kft(e){return function(){return Ift.call(this.children,e)}}function Rft(){return this.firstElementChild}function Dft(e){return this.select(e==null?Rft:kft(typeof e=="function"?e:N2e(e)))}var Nft=Array.prototype.filter;function Pft(){return Array.from(this.children)}function Oft(e){return function(){return Nft.call(this.children,e)}}function Mft(e){return this.selectAll(e==null?Pft:Oft(typeof e=="function"?e:N2e(e)))}function Lft(e){typeof e!="function"&&(e=D2e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Xl(r,this._parents)}function P2e(e){return new Array(e.length)}function $ft(){return new Xl(this._enter||this._groups.map(P2e),this._parents)}function aF(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}aF.prototype={constructor:aF,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Fft(e){return function(){return e}}function Bft(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new aF(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function jft(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new aF(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Uft(e){return e.__data__}function zft(e,t){if(!arguments.length)return Array.from(this,Uft);var n=t?jft:Bft,r=this._parents,i=this._groups;typeof e!="function"&&(e=Fft(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Vft(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),v=u[l]=new Array(d);n(c,f,m,g,v,h,t);for(var b=0,w=0,E,T;b<p;++b)if(E=m[b]){for(b>=w&&(w=b+1);!(T=g[w])&&++w<p;);E._next=T||null}}return o=new Xl(o,r),o._enter=a,o._exit=u,o}function Vft(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hft(){return new Xl(this._exit||this._groups.map(P2e),this._parents)}function qft(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Wft(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Xl(a,this._parents)}function Gft(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Yft(e){e||(e=Kft);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Xl(i,this._parents).order()}function Kft(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xft(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Qft(){return Array.from(this)}function Jft(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Zft(){let e=0;for(const t of this)++e;return e}function edt(){return!this.node()}function tdt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function ndt(e){return function(){this.removeAttribute(e)}}function rdt(e){return function(){this.removeAttributeNS(e.space,e.local)}}function idt(e,t){return function(){this.setAttribute(e,t)}}function sdt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function odt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function adt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function udt(e,t){var n=qB(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?rdt:ndt:typeof t=="function"?n.local?adt:odt:n.local?sdt:idt)(n,t))}function O2e(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ldt(e){return function(){this.style.removeProperty(e)}}function cdt(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fdt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ddt(e,t,n){return arguments.length>1?this.each((t==null?ldt:typeof t=="function"?fdt:cdt)(e,t,n??"")):bC(this.node(),e)}function bC(e,t){return e.style.getPropertyValue(t)||O2e(e).getComputedStyle(e,null).getPropertyValue(t)}function hdt(e){return function(){delete this[e]}}function pdt(e,t){return function(){this[e]=t}}function mdt(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function gdt(e,t){return arguments.length>1?this.each((t==null?hdt:typeof t=="function"?mdt:pdt)(e,t)):this.node()[e]}function M2e(e){return e.trim().split(/^|\s+/)}function TZ(e){return e.classList||new L2e(e)}function L2e(e){this._node=e,this._names=M2e(e.getAttribute("class")||"")}L2e.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function $2e(e,t){for(var n=TZ(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function F2e(e,t){for(var n=TZ(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function ydt(e){return function(){$2e(this,e)}}function vdt(e){return function(){F2e(this,e)}}function bdt(e,t){return function(){(t.apply(this,arguments)?$2e:F2e)(this,e)}}function xdt(e,t){var n=M2e(e+"");if(arguments.length<2){for(var r=TZ(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?bdt:t?ydt:vdt)(n,t))}function _dt(){this.textContent=""}function wdt(e){return function(){this.textContent=e}}function Edt(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Tdt(e){return arguments.length?this.each(e==null?_dt:(typeof e=="function"?Edt:wdt)(e)):this.node().textContent}function Sdt(){this.innerHTML=""}function Cdt(e){return function(){this.innerHTML=e}}function Adt(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Idt(e){return arguments.length?this.each(e==null?Sdt:(typeof e=="function"?Adt:Cdt)(e)):this.node().innerHTML}function kdt(){this.nextSibling&&this.parentNode.appendChild(this)}function Rdt(){return this.each(kdt)}function Ddt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Ndt(){return this.each(Ddt)}function Pdt(e){var t=typeof e=="function"?e:I2e(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Odt(){return null}function Mdt(e,t){var n=typeof e=="function"?e:I2e(e),r=t==null?Odt:typeof t=="function"?t:EZ(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Ldt(){var e=this.parentNode;e&&e.removeChild(this)}function $dt(){return this.each(Ldt)}function Fdt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bdt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function jdt(e){return this.select(e?Bdt:Fdt)}function Udt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function zdt(e){return function(t){e.call(this,t,this.__data__)}}function Vdt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Hdt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function qdt(e,t,n){return function(){var r=this.__on,i,s=zdt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Wdt(e,t,n){var r=Vdt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?qdt:Hdt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function B2e(e,t,n){var r=O2e(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Gdt(e,t){return function(){return B2e(this,e,t)}}function Ydt(e,t){return function(){return B2e(this,e,t.apply(this,arguments))}}function Kdt(e,t){return this.each((typeof t=="function"?Ydt:Gdt)(e,t))}function*Xdt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var SZ=[null];function Xl(e,t){this._groups=e,this._parents=t}function i3(){return new Xl([[document.documentElement]],SZ)}function Qdt(){return this}Xl.prototype=i3.prototype={constructor:Xl,select:Tft,selectAll:Aft,selectChild:Dft,selectChildren:Mft,filter:Lft,data:zft,enter:$ft,exit:Hft,join:qft,merge:Wft,selection:Qdt,order:Gft,sort:Yft,call:Xft,nodes:Qft,node:Jft,size:Zft,empty:edt,each:tdt,attr:udt,style:ddt,property:gdt,classed:xdt,text:Tdt,html:Idt,raise:Rdt,lower:Ndt,append:Pdt,insert:Mdt,remove:$dt,clone:jdt,datum:Udt,on:Wdt,dispatch:Kdt,[Symbol.iterator]:Xdt};function hi(e){return typeof e=="string"?new Xl([[document.querySelector(e)]],[document.documentElement]):new Xl([[e]],SZ)}function Jdt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function uF(e,t){if(e=Jdt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function j2e(e){return typeof e=="string"?new Xl([document.querySelectorAll(e)],[document.documentElement]):new Xl([k2e(e)],SZ)}const XW={capture:!0,passive:!1};function QW(e){e.preventDefault(),e.stopImmediatePropagation()}function Zdt(e){var t=e.document.documentElement,n=hi(e).on("dragstart.drag",QW,XW);"onselectstart"in t?n.on("selectstart.drag",QW,XW):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function eht(e,t){var n=e.document.documentElement,r=hi(e).on("dragstart.drag",null);t&&(r.on("click.drag",QW,XW),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function WA(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function s3(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function xx(){}var Kw=.7,xC=1/Kw,$2="\\s*([+-]?\\d+)\\s*",AN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",x0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tht=/^#([0-9a-f]{3,8})$/,nht=new RegExp(`^rgb\\(${$2},${$2},${$2}\\)$`),rht=new RegExp(`^rgb\\(${x0},${x0},${x0}\\)$`),iht=new RegExp(`^rgba\\(${$2},${$2},${$2},${AN}\\)$`),sht=new RegExp(`^rgba\\(${x0},${x0},${x0},${AN}\\)$`),oht=new RegExp(`^hsl\\(${AN},${x0},${x0}\\)$`),aht=new RegExp(`^hsla\\(${AN},${x0},${x0},${AN}\\)$`),fde={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};WA(xx,Xw,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:dde,formatHex:dde,formatHex8:uht,formatHsl:lht,formatRgb:hde,toString:hde});function dde(){return this.rgb().formatHex()}function uht(){return this.rgb().formatHex8()}function lht(){return U2e(this).formatHsl()}function hde(){return this.rgb().formatRgb()}function Xw(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tht.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?pde(t):n===3?new Fa(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?G4(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?G4(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=nht.exec(e))?new Fa(t[1],t[2],t[3],1):(t=rht.exec(e))?new Fa(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=iht.exec(e))?G4(t[1],t[2],t[3],t[4]):(t=sht.exec(e))?G4(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=oht.exec(e))?yde(t[1],t[2]/100,t[3]/100,1):(t=aht.exec(e))?yde(t[1],t[2]/100,t[3]/100,t[4]):fde.hasOwnProperty(e)?pde(fde[e]):e==="transparent"?new Fa(NaN,NaN,NaN,0):null}function pde(e){return new Fa(e>>16&255,e>>8&255,e&255,1)}function G4(e,t,n,r){return r<=0&&(e=t=n=NaN),new Fa(e,t,n,r)}function CZ(e){return e instanceof xx||(e=Xw(e)),e?(e=e.rgb(),new Fa(e.r,e.g,e.b,e.opacity)):new Fa}function Ib(e,t,n,r){return arguments.length===1?CZ(e):new Fa(e,t,n,r??1)}function Fa(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}WA(Fa,Ib,s3(xx,{brighter(e){return e=e==null?xC:Math.pow(xC,e),new Fa(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Kw:Math.pow(Kw,e),new Fa(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Fa(Mw(this.r),Mw(this.g),Mw(this.b),lF(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mde,formatHex:mde,formatHex8:cht,formatRgb:gde,toString:gde}));function mde(){return`#${bw(this.r)}${bw(this.g)}${bw(this.b)}`}function cht(){return`#${bw(this.r)}${bw(this.g)}${bw(this.b)}${bw((isNaN(this.opacity)?1:this.opacity)*255)}`}function gde(){const e=lF(this.opacity);return`${e===1?"rgb(":"rgba("}${Mw(this.r)}, ${Mw(this.g)}, ${Mw(this.b)}${e===1?")":`, ${e})`}`}function lF(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Mw(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function bw(e){return e=Mw(e),(e<16?"0":"")+e.toString(16)}function yde(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bp(e,t,n,r)}function U2e(e){if(e instanceof bp)return new bp(e.h,e.s,e.l,e.opacity);if(e instanceof xx||(e=Xw(e)),!e)return new bp;if(e instanceof bp)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new bp(o,a,u,e.opacity)}function cF(e,t,n,r){return arguments.length===1?U2e(e):new bp(e,t,n,r??1)}function bp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}WA(bp,cF,s3(xx,{brighter(e){return e=e==null?xC:Math.pow(xC,e),new bp(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kw:Math.pow(Kw,e),new bp(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Fa(Hz(e>=240?e-240:e+120,i,r),Hz(e,i,r),Hz(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new bp(vde(this.h),Y4(this.s),Y4(this.l),lF(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=lF(this.opacity);return`${e===1?"hsl(":"hsla("}${vde(this.h)}, ${Y4(this.s)*100}%, ${Y4(this.l)*100}%${e===1?")":`, ${e})`}`}}));function vde(e){return e=(e||0)%360,e<0?e+360:e}function Y4(e){return Math.max(0,Math.min(1,e||0))}function Hz(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const z2e=Math.PI/180,V2e=180/Math.PI,fF=18,H2e=.96422,q2e=1,W2e=.82521,G2e=4/29,F2=6/29,Y2e=3*F2*F2,fht=F2*F2*F2;function K2e(e){if(e instanceof _0)return new _0(e.l,e.a,e.b,e.opacity);if(e instanceof Ty)return X2e(e);e instanceof Fa||(e=CZ(e));var t=Yz(e.r),n=Yz(e.g),r=Yz(e.b),i=qz((.2225045*t+.7168786*n+.0606169*r)/q2e),s,o;return t===n&&n===r?s=o=i:(s=qz((.4360747*t+.3850649*n+.1430804*r)/H2e),o=qz((.0139322*t+.0971045*n+.7141733*r)/W2e)),new _0(116*i-16,500*(s-i),200*(i-o),e.opacity)}function dF(e,t,n,r){return arguments.length===1?K2e(e):new _0(e,t,n,r??1)}function _0(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}WA(_0,dF,s3(xx,{brighter(e){return new _0(this.l+fF*(e??1),this.a,this.b,this.opacity)},darker(e){return new _0(this.l-fF*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=H2e*Wz(t),e=q2e*Wz(e),n=W2e*Wz(n),new Fa(Gz(3.1338561*t-1.6168667*e-.4906146*n),Gz(-.9787684*t+1.9161415*e+.033454*n),Gz(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function qz(e){return e>fht?Math.pow(e,1/3):e/Y2e+G2e}function Wz(e){return e>F2?e*e*e:Y2e*(e-G2e)}function Gz(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Yz(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function dht(e){if(e instanceof Ty)return new Ty(e.h,e.c,e.l,e.opacity);if(e instanceof _0||(e=K2e(e)),e.a===0&&e.b===0)return new Ty(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*V2e;return new Ty(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function hF(e,t,n,r){return arguments.length===1?dht(e):new Ty(e,t,n,r??1)}function Ty(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function X2e(e){if(isNaN(e.h))return new _0(e.l,0,0,e.opacity);var t=e.h*z2e;return new _0(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}WA(Ty,hF,s3(xx,{brighter(e){return new Ty(this.h,this.c,this.l+fF*(e??1),this.opacity)},darker(e){return new Ty(this.h,this.c,this.l-fF*(e??1),this.opacity)},rgb(){return X2e(this).rgb()}}));var Q2e=-.14861,AZ=1.78277,IZ=-.29227,WB=-.90649,IN=1.97294,bde=IN*WB,xde=IN*AZ,_de=AZ*IZ-WB*Q2e;function hht(e){if(e instanceof Lw)return new Lw(e.h,e.s,e.l,e.opacity);e instanceof Fa||(e=CZ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(_de*r+bde*t-xde*n)/(_de+bde-xde),s=r-i,o=(IN*(n-i)-IZ*s)/WB,a=Math.sqrt(o*o+s*s)/(IN*i*(1-i)),u=a?Math.atan2(o,s)*V2e-120:NaN;return new Lw(u<0?u+360:u,a,i,e.opacity)}function JW(e,t,n,r){return arguments.length===1?hht(e):new Lw(e,t,n,r??1)}function Lw(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}WA(Lw,JW,s3(xx,{brighter(e){return e=e==null?xC:Math.pow(xC,e),new Lw(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Kw:Math.pow(Kw,e),new Lw(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*z2e,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Fa(255*(t+n*(Q2e*r+AZ*i)),255*(t+n*(IZ*r+WB*i)),255*(t+n*(IN*r)),this.opacity)}}));function J2e(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function Z2e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return J2e((n-r/t)*t,o,i,s,a)}}function eCe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return J2e((n-r/t)*t,i,s,o,a)}}const GB=e=>()=>e;function tCe(e,t){return function(n){return e+n*t}}function pht(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function YB(e,t){var n=t-e;return n?tCe(e,n>180||n<-180?n-360*Math.round(n/360):n):GB(isNaN(e)?t:e)}function mht(e){return(e=+e)==1?Ba:function(t,n){return n-t?pht(t,n,e):GB(isNaN(t)?n:t)}}function Ba(e,t){var n=t-e;return n?tCe(e,n):GB(isNaN(e)?t:e)}const kN=function e(t){var n=mht(t);function r(i,s){var o=n((i=Ib(i)).r,(s=Ib(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Ba(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function nCe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=Ib(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var ght=nCe(Z2e),yht=nCe(eCe);function kZ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function rCe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vht(e,t){return(rCe(t)?kZ:iCe)(e,t)}function iCe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=S1(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function sCe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Qd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function oCe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=S1(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var ZW=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kz=new RegExp(ZW.source,"g");function bht(e){return function(){return e}}function xht(e){return function(t){return e(t)+""}}function RZ(e,t){var n=ZW.lastIndex=Kz.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=ZW.exec(e))&&(i=Kz.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:Qd(r,i)})),n=Kz.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?xht(u[0].x):bht(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function S1(e,t){var n=typeof t,r;return t==null||n==="boolean"?GB(t):(n==="number"?Qd:n==="string"?(r=Xw(t))?(t=r,kN):RZ:t instanceof Xw?kN:t instanceof Date?sCe:rCe(t)?kZ:Array.isArray(t)?iCe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?oCe:Qd)(e,t)}function _ht(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function wht(e,t){var n=YB(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function o3(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var wde=180/Math.PI,eG={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function aCe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*wde,skewX:Math.atan(u)*wde,scaleX:o,scaleY:a}}var K4;function Eht(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?eG:aCe(t.a,t.b,t.c,t.d,t.e,t.f)}function Tht(e){return e==null||(K4||(K4=document.createElementNS("http://www.w3.org/2000/svg","g")),K4.setAttribute("transform",e),!(e=K4.transform.baseVal.consolidate()))?eG:(e=e.matrix,aCe(e.a,e.b,e.c,e.d,e.e,e.f))}function uCe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Qd(l,f)},{i:m-2,x:Qd(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:Qd(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:Qd(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Qd(l,f)},{i:m-2,x:Qd(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var lCe=uCe(Eht,"px, ","px)","deg)"),cCe=uCe(Tht,", ",")",")"),Sht=1e-12;function Ede(e){return((e=Math.exp(e))+1/e)/2}function Cht(e){return((e=Math.exp(e))-1/e)/2}function Aht(e){return((e=Math.exp(2*e))-1)/(e+1)}const Iht=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,v;if(m<Sht)v=Math.log(d/l)/t,g=function(I){return[a+I*h,u+I*p,l*Math.exp(t*I*v)]};else{var b=Math.sqrt(m),w=(d*d-l*l+r*m)/(2*l*n*b),E=(d*d-l*l-r*m)/(2*d*n*b),T=Math.log(Math.sqrt(w*w+1)-w),C=Math.log(Math.sqrt(E*E+1)-E);v=(C-T)/t,g=function(I){var R=I*v,N=Ede(T),O=l/(n*b)*(N*Aht(t*R+T)-Cht(T));return[a+O*h,u+O*p,l*N/Ede(t*R+T)]}}return g.duration=v*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function fCe(e){return function(t,n){var r=e((t=cF(t)).h,(n=cF(n)).h),i=Ba(t.s,n.s),s=Ba(t.l,n.l),o=Ba(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const kht=fCe(YB);var Rht=fCe(Ba);function Dht(e,t){var n=Ba((e=dF(e)).l,(t=dF(t)).l),r=Ba(e.a,t.a),i=Ba(e.b,t.b),s=Ba(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function dCe(e){return function(t,n){var r=e((t=hF(t)).h,(n=hF(n)).h),i=Ba(t.c,n.c),s=Ba(t.l,n.l),o=Ba(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Nht=dCe(YB);var Pht=dCe(Ba);function hCe(e){return function t(n){n=+n;function r(i,s){var o=e((i=JW(i)).h,(s=JW(s)).h),a=Ba(i.s,s.s),u=Ba(i.l,s.l),l=Ba(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Oht=hCe(YB);var Mht=hCe(Ba);function DZ(e,t){t===void 0&&(t=e,e=S1);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Lht(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const $ht=Object.freeze(Object.defineProperty({__proto__:null,interpolate:S1,interpolateArray:vht,interpolateBasis:Z2e,interpolateBasisClosed:eCe,interpolateCubehelix:Oht,interpolateCubehelixLong:Mht,interpolateDate:sCe,interpolateDiscrete:_ht,interpolateHcl:Nht,interpolateHclLong:Pht,interpolateHsl:kht,interpolateHslLong:Rht,interpolateHue:wht,interpolateLab:Dht,interpolateNumber:Qd,interpolateNumberArray:kZ,interpolateObject:oCe,interpolateRgb:kN,interpolateRgbBasis:ght,interpolateRgbBasisClosed:yht,interpolateRound:o3,interpolateString:RZ,interpolateTransformCss:lCe,interpolateTransformSvg:cCe,interpolateZoom:Iht,piecewise:DZ,quantize:Lht},Symbol.toStringTag,{value:"Module"}));var _C=0,WR=0,nR=0,pCe=1e3,pF,GR,mF=0,Qw=0,KB=0,RN=typeof performance=="object"&&performance.now?performance:Date,mCe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function XB(){return Qw||(mCe(Fht),Qw=RN.now()+KB)}function Fht(){Qw=0}function DN(){this._call=this._time=this._next=null}DN.prototype=NZ.prototype={constructor:DN,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?XB():+n)+(t==null?0:+t),!this._next&&GR!==this&&(GR?GR._next=this:pF=this,GR=this),this._call=e,this._time=n,tG()},stop:function(){this._call&&(this._call=null,this._time=1/0,tG())}};function NZ(e,t,n){var r=new DN;return r.restart(e,t,n),r}function Bht(){XB(),++_C;for(var e=pF,t;e;)(t=Qw-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_C}function Tde(){Qw=(mF=RN.now())+KB,_C=WR=0;try{Bht()}finally{_C=0,Uht(),Qw=0}}function jht(){var e=RN.now(),t=e-mF;t>pCe&&(KB-=t,mF=e)}function Uht(){for(var e,t=pF,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:pF=n);GR=e,tG(r)}function tG(e){if(!_C){WR&&(WR=clearTimeout(WR));var t=e-Qw;t>24?(e<1/0&&(WR=setTimeout(Tde,e-RN.now()-KB)),nR&&(nR=clearInterval(nR))):(nR||(mF=RN.now(),nR=setInterval(jht,pCe)),_C=1,mCe(Tde))}}function Sde(e,t,n){var r=new DN;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function zht(e,t,n){var r=new DN,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?XB():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Vht=HB("start","end","cancel","interrupt"),Hht=[],gCe=0,Cde=1,nG=2,jL=3,Ade=4,rG=5,UL=6;function QB(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;qht(e,n,{name:t,index:r,group:i,on:Vht,tween:Hht,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:gCe})}function PZ(e,t){var n=em(e,t);if(n.state>gCe)throw new Error("too late; already scheduled");return n}function og(e,t){var n=em(e,t);if(n.state>jL)throw new Error("too late; already running");return n}function em(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function qht(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=NZ(s,0,n.time);function s(l){n.state=Cde,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Cde)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===jL)return Sde(o);h.state===Ade?(h.state=UL,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=UL,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(Sde(function(){n.state===jL&&(n.state=Ade,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=nG,n.on.call("start",e,e.__data__,n.index,n.group),n.state===nG){for(n.state=jL,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=rG,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===rG&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=UL,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function iG(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>nG&&r.state<rG,r.state=UL,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Wht(e){return this.each(function(){iG(this,e)})}function Ght(e,t){var n,r;return function(){var i=og(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Yht(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=og(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function Kht(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=em(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Ght:Yht)(n,e,t))}function OZ(e,t,n){var r=e._id;return e.each(function(){var i=og(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return em(i,r).value[t]}}function yCe(e,t){var n;return(typeof t=="number"?Qd:t instanceof Xw?kN:(n=Xw(t))?(t=n,kN):RZ)(e,t)}function Xht(e){return function(){this.removeAttribute(e)}}function Qht(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Jht(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Zht(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function ept(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function tpt(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function npt(e,t){var n=qB(e),r=n==="transform"?cCe:yCe;return this.attrTween(e,typeof t=="function"?(n.local?tpt:ept)(n,r,OZ(this,"attr."+e,t)):t==null?(n.local?Qht:Xht)(n):(n.local?Zht:Jht)(n,r,t))}function rpt(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ipt(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function spt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ipt(e,s)),n}return i._value=t,i}function opt(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&rpt(e,s)),n}return i._value=t,i}function apt(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=qB(e);return this.tween(n,(r.local?spt:opt)(r,t))}function upt(e,t){return function(){PZ(this,e).delay=+t.apply(this,arguments)}}function lpt(e,t){return t=+t,function(){PZ(this,e).delay=t}}function cpt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?upt:lpt)(t,e)):em(this.node(),t).delay}function fpt(e,t){return function(){og(this,e).duration=+t.apply(this,arguments)}}function dpt(e,t){return t=+t,function(){og(this,e).duration=t}}function hpt(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?fpt:dpt)(t,e)):em(this.node(),t).duration}function ppt(e,t){if(typeof t!="function")throw new Error;return function(){og(this,e).ease=t}}function mpt(e){var t=this._id;return arguments.length?this.each(ppt(t,e)):em(this.node(),t).ease}function gpt(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;og(this,e).ease=n}}function ypt(e){if(typeof e!="function")throw new Error;return this.each(gpt(this._id,e))}function vpt(e){typeof e!="function"&&(e=D2e(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new e1(r,this._parents,this._name,this._id)}function bpt(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new e1(o,this._parents,this._name,this._id)}function xpt(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function _pt(e,t,n){var r,i,s=xpt(t)?PZ:og;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function wpt(e,t){var n=this._id;return arguments.length<2?em(this.node(),n).on.on(e):this.each(_pt(n,e,t))}function Ept(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Tpt(){return this.on("end.remove",Ept(this._id))}function Spt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=EZ(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,QB(l[d],t,n,d,l,em(c,n)));return new e1(s,this._parents,t,n)}function Cpt(e){var t=this._name,n=this._id;typeof e!="function"&&(e=R2e(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=em(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&QB(h,t,n,m,d,p);s.push(d),o.push(c)}return new e1(s,o,t,n)}var Apt=i3.prototype.constructor;function Ipt(){return new Apt(this._groups,this._parents)}function kpt(e,t){var n,r,i;return function(){var s=bC(this,e),o=(this.style.removeProperty(e),bC(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function vCe(e){return function(){this.style.removeProperty(e)}}function Rpt(e,t,n){var r,i=n+"",s;return function(){var o=bC(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Dpt(e,t,n){var r,i,s;return function(){var o=bC(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),bC(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Npt(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=og(this,e),l=u.on,c=u.value[s]==null?a||(a=vCe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Ppt(e,t,n){var r=(e+="")=="transform"?lCe:yCe;return t==null?this.styleTween(e,kpt(e,r)).on("end.style."+e,vCe(e)):typeof t=="function"?this.styleTween(e,Dpt(e,r,OZ(this,"style."+e,t))).each(Npt(this._id,e)):this.styleTween(e,Rpt(e,r,t),n).on("end.style."+e,null)}function Opt(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Mpt(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Opt(e,o,n)),r}return s._value=t,s}function Lpt(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Mpt(e,t,n??""))}function $pt(e){return function(){this.textContent=e}}function Fpt(e){return function(){var t=e(this);this.textContent=t??""}}function Bpt(e){return this.tween("text",typeof e=="function"?Fpt(OZ(this,"text",e)):$pt(e==null?"":e+""))}function jpt(e){return function(t){this.textContent=e.call(this,t)}}function Upt(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&jpt(i)),t}return r._value=e,r}function zpt(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Upt(e))}function Vpt(){for(var e=this._name,t=this._id,n=bCe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=em(u,t);QB(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new e1(r,this._parents,e,n)}function Hpt(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=og(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var qpt=0;function e1(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function bCe(){return++qpt}var Qg=i3.prototype;e1.prototype={constructor:e1,select:Spt,selectAll:Cpt,selectChild:Qg.selectChild,selectChildren:Qg.selectChildren,filter:vpt,merge:bpt,selection:Ipt,transition:Vpt,call:Qg.call,nodes:Qg.nodes,node:Qg.node,size:Qg.size,empty:Qg.empty,each:Qg.each,on:wpt,attr:npt,attrTween:apt,style:Ppt,styleTween:Lpt,text:Bpt,textTween:zpt,remove:Tpt,tween:Kht,delay:cpt,duration:hpt,ease:mpt,easeVarying:ypt,end:Hpt,[Symbol.iterator]:Qg[Symbol.iterator]};const Wpt=e=>+e;function Gpt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Ypt={time:null,delay:0,duration:250,ease:Gpt};function Kpt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Xpt(e){var t,n;e instanceof e1?(t=e._id,e=e._name):(t=bCe(),(n=Ypt).time=XB(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&QB(u,e,t,l,o,n||Kpt(u,t));return new e1(r,this._parents,e,t)}i3.prototype.interrupt=Wht;i3.prototype.transition=Xpt;const Xz=e=>()=>e;function Qpt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function Jpt(e){e.stopImmediatePropagation()}function Qz(e){e.preventDefault(),e.stopImmediatePropagation()}var Ide={name:"drag"},Jz={name:"space"},MS={name:"handle"},LS={name:"center"};const{abs:kde,max:zu,min:Vu}=Math;function Rde(e){return[+e[0],+e[1]]}function sG(e){return[Rde(e[0]),Rde(e[1])]}var zL={name:"x",handles:["w","e"].map(NN),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},VL={name:"y",handles:["n","s"].map(NN),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Zpt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(NN),input:function(e){return e==null?null:sG(e)},output:function(e){return e}},Jg={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Dde={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Nde={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},emt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},tmt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function NN(e){return{type:e}}function nmt(e){return!e.ctrlKey&&!e.button}function rmt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function imt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Zz(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function smt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function xCe(){return MZ(zL)}function _Ce(){return MZ(VL)}function wCe(){return MZ(Zpt)}function MZ(e){var t=rmt,n=nmt,r=imt,i=!0,s=HB("start","brush","end"),o=6,a;function u(g){var v=g.property("__brush",m).selectAll(".overlay").data([NN("overlay")]);v.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Jg.overlay).merge(v).each(function(){var w=Zz(this).extent;hi(this).attr("x",w[0][0]).attr("y",w[0][1]).attr("width",w[1][0]-w[0][0]).attr("height",w[1][1]-w[0][1])}),g.selectAll(".selection").data([NN("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Jg.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var b=g.selectAll(".handle").data(e.handles,function(w){return w.type});b.exit().remove(),b.enter().append("rect").attr("class",function(w){return"handle handle--"+w.type}).attr("cursor",function(w){return Jg[w.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,v,b){g.tween?g.on("start.brush",function(w){c(this,arguments).beforestart().start(w)}).on("interrupt.brush end.brush",function(w){c(this,arguments).end(w)}).tween("brush",function(){var w=this,E=w.__brush,T=c(w,arguments),C=E.selection,I=e.input(typeof v=="function"?v.apply(this,arguments):v,E.extent),R=S1(C,I);function N(O){E.selection=O===1&&I===null?null:R(O),l.call(w),T.brush()}return C!==null&&I!==null?N:N(1)}):g.each(function(){var w=this,E=arguments,T=w.__brush,C=e.input(typeof v=="function"?v.apply(w,E):v,T.extent),I=c(w,E).beforestart();iG(w),T.selection=C===null?null:C,l.call(w),I.start(b).brush(b).end(b)})},u.clear=function(g,v){u.move(g,null,v)};function l(){var g=hi(this),v=Zz(this).selection;v?(g.selectAll(".selection").style("display",null).attr("x",v[0][0]).attr("y",v[0][1]).attr("width",v[1][0]-v[0][0]).attr("height",v[1][1]-v[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(b){return b.type[b.type.length-1]==="e"?v[1][0]-o/2:v[0][0]-o/2}).attr("y",function(b){return b.type[0]==="s"?v[1][1]-o/2:v[0][1]-o/2}).attr("width",function(b){return b.type==="n"||b.type==="s"?v[1][0]-v[0][0]+o:o}).attr("height",function(b){return b.type==="e"||b.type==="w"?v[1][1]-v[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,v,b){var w=g.__brush.emitter;return w&&(!b||!w.clean)?w:new f(g,v,b)}function f(g,v,b){this.that=g,this.args=v,this.state=g.__brush,this.active=0,this.clean=b}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,v){return this.starting?(this.starting=!1,this.emit("start",g,v)):this.emit("brush",g),this},brush:function(g,v){return this.emit("brush",g,v),this},end:function(g,v){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,v)),this},emit:function(g,v,b){var w=hi(this.that).datum();s.call(g,this.that,new Qpt(g,{sourceEvent:v,target:u,selection:e.output(this.state.selection),mode:b,dispatch:s}),w)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var v=this,b=g.target.__data__.type,w=(i&&g.metaKey?b="overlay":b)==="selection"?Ide:i&&g.altKey?LS:MS,E=e===VL?null:emt[b],T=e===zL?null:tmt[b],C=Zz(v),I=C.extent,R=C.selection,N=I[0][0],O,L,B=I[0][1],F,H,Q=I[1][0],J,ne,Z=I[1][1],ie,q,U=0,G=0,V,Y=E&&T&&i&&g.shiftKey,ee,ae,_e=Array.from(g.touches||[g],Me=>{const Ge=Me.identifier;return Me=uF(Me,v),Me.point0=Me.slice(),Me.identifier=Ge,Me});iG(v);var pe=c(v,arguments,!0).beforestart();if(b==="overlay"){R&&(V=!0);const Me=[_e[0],_e[1]||_e[0]];C.selection=R=[[O=e===VL?N:Vu(Me[0][0],Me[1][0]),F=e===zL?B:Vu(Me[0][1],Me[1][1])],[J=e===VL?Q:zu(Me[0][0],Me[1][0]),ie=e===zL?Z:zu(Me[0][1],Me[1][1])]],_e.length>1&&$e(g)}else O=R[0][0],F=R[0][1],J=R[1][0],ie=R[1][1];L=O,H=F,ne=J,q=ie;var Te=hi(v).attr("pointer-events","none"),Le=Te.selectAll(".overlay").attr("cursor",Jg[b]);if(g.touches)pe.moved=he,pe.ended=De;else{var ye=hi(g.view).on("mousemove.brush",he,!0).on("mouseup.brush",De,!0);i&&ye.on("keydown.brush",tt,!0).on("keyup.brush",it,!0),Zdt(g.view)}l.call(v),pe.start(g,w.name);function he(Me){for(const Ge of Me.changedTouches||[Me])for(const at of _e)at.identifier===Ge.identifier&&(at.cur=uF(Ge,v));if(Y&&!ee&&!ae&&_e.length===1){const Ge=_e[0];kde(Ge.cur[0]-Ge[0])>kde(Ge.cur[1]-Ge[1])?ae=!0:ee=!0}for(const Ge of _e)Ge.cur&&(Ge[0]=Ge.cur[0],Ge[1]=Ge.cur[1]);V=!0,Qz(Me),$e(Me)}function $e(Me){const Ge=_e[0],at=Ge.point0;var yt;switch(U=Ge[0]-at[0],G=Ge[1]-at[1],w){case Jz:case Ide:{E&&(U=zu(N-O,Vu(Q-J,U)),L=O+U,ne=J+U),T&&(G=zu(B-F,Vu(Z-ie,G)),H=F+G,q=ie+G);break}case MS:{_e[1]?(E&&(L=zu(N,Vu(Q,_e[0][0])),ne=zu(N,Vu(Q,_e[1][0])),E=1),T&&(H=zu(B,Vu(Z,_e[0][1])),q=zu(B,Vu(Z,_e[1][1])),T=1)):(E<0?(U=zu(N-O,Vu(Q-O,U)),L=O+U,ne=J):E>0&&(U=zu(N-J,Vu(Q-J,U)),L=O,ne=J+U),T<0?(G=zu(B-F,Vu(Z-F,G)),H=F+G,q=ie):T>0&&(G=zu(B-ie,Vu(Z-ie,G)),H=F,q=ie+G));break}case LS:{E&&(L=zu(N,Vu(Q,O-U*E)),ne=zu(N,Vu(Q,J+U*E))),T&&(H=zu(B,Vu(Z,F-G*T)),q=zu(B,Vu(Z,ie+G*T)));break}}ne<L&&(E*=-1,yt=O,O=J,J=yt,yt=L,L=ne,ne=yt,b in Dde&&Le.attr("cursor",Jg[b=Dde[b]])),q<H&&(T*=-1,yt=F,F=ie,ie=yt,yt=H,H=q,q=yt,b in Nde&&Le.attr("cursor",Jg[b=Nde[b]])),C.selection&&(R=C.selection),ee&&(L=R[0][0],ne=R[1][0]),ae&&(H=R[0][1],q=R[1][1]),(R[0][0]!==L||R[0][1]!==H||R[1][0]!==ne||R[1][1]!==q)&&(C.selection=[[L,H],[ne,q]],l.call(v),pe.brush(Me,w.name))}function De(Me){if(Jpt(Me),Me.touches){if(Me.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else eht(Me.view,V),ye.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Te.attr("pointer-events","all"),Le.attr("cursor",Jg.overlay),C.selection&&(R=C.selection),smt(R)&&(C.selection=null,l.call(v)),pe.end(Me,w.name)}function tt(Me){switch(Me.keyCode){case 16:{Y=E&&T;break}case 18:{w===MS&&(E&&(J=ne-U*E,O=L+U*E),T&&(ie=q-G*T,F=H+G*T),w=LS,$e(Me));break}case 32:{(w===MS||w===LS)&&(E<0?J=ne-U:E>0&&(O=L-U),T<0?ie=q-G:T>0&&(F=H-G),w=Jz,Le.attr("cursor",Jg.selection),$e(Me));break}default:return}Qz(Me)}function it(Me){switch(Me.keyCode){case 16:{Y&&(ee=ae=Y=!1,$e(Me));break}case 18:{w===LS&&(E<0?J=ne:E>0&&(O=L),T<0?ie=q:T>0&&(F=H),w=MS,$e(Me));break}case 32:{w===Jz&&(Me.altKey?(E&&(J=ne-U*E,O=L+U*E),T&&(ie=q-G*T,F=H+G*T),w=LS):(E<0?J=ne:E>0&&(O=L),T<0?ie=q:T>0&&(F=H),w=MS),Le.attr("cursor",Jg[b]),$e(Me));break}default:return}Qz(Me)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=sG(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:Xz(sG(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:Xz(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:Xz(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const oG=Math.PI,aG=2*oG,G_=1e-6,omt=aG-G_;function ECe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function amt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return ECe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let LZ=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?ECe:amt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>G_)if(!(Math.abs(f*u-l*c)>G_)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,v=Math.sqrt(m),b=Math.sqrt(d),w=s*Math.tan((oG-Math.acos((m+d-g)/(2*v*b)))/2),E=w/b,T=w/v;Math.abs(E-1)>G_&&this._append`L${t+E*c},${n+E*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+T*u},${this._y1=n+T*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>G_||Math.abs(this._y1-c)>G_)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%aG+aG),d>omt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>G_&&this._append`A${r},${r},0,${+(d>=oG)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function JB(){return new LZ}JB.prototype=LZ.prototype;const jy=11102230246251565e-32,Hu=134217729,umt=(3+8*jy)*jy;function eV(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function lmt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function a3(e){return new Float64Array(e)}const cmt=(3+16*jy)*jy,fmt=(2+12*jy)*jy,dmt=(9+64*jy)*jy*jy,$S=a3(4),Pde=a3(8),Ode=a3(12),Mde=a3(16),Nl=a3(4);function hmt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,v,b,w,E,T,C,I,R;const N=e-i,O=n-i,L=t-s,B=r-s;E=N*B,d=Hu*N,h=d-(d-N),p=N-h,d=Hu*B,m=d-(d-B),g=B-m,T=p*g-(E-h*m-p*m-h*g),C=L*O,d=Hu*L,h=d-(d-L),p=L-h,d=Hu*O,m=d-(d-O),g=O-m,I=p*g-(C-h*m-p*m-h*g),v=T-I,f=T-v,$S[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,$S[1]=w-(v+f)+(f-C),R=b+v,f=R-b,$S[2]=b-(R-f)+(v-f),$S[3]=R;let F=lmt(4,$S),H=fmt*o;if(F>=H||-F>=H||(f=e-N,a=e-(N+f)+(f-i),f=n-O,l=n-(O+f)+(f-i),f=t-L,u=t-(L+f)+(f-s),f=r-B,c=r-(B+f)+(f-s),a===0&&u===0&&l===0&&c===0)||(H=dmt*o+umt*Math.abs(F),F+=N*c+B*a-(L*l+O*u),F>=H||-F>=H))return F;E=a*B,d=Hu*a,h=d-(d-a),p=a-h,d=Hu*B,m=d-(d-B),g=B-m,T=p*g-(E-h*m-p*m-h*g),C=u*O,d=Hu*u,h=d-(d-u),p=u-h,d=Hu*O,m=d-(d-O),g=O-m,I=p*g-(C-h*m-p*m-h*g),v=T-I,f=T-v,Nl[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,Nl[1]=w-(v+f)+(f-C),R=b+v,f=R-b,Nl[2]=b-(R-f)+(v-f),Nl[3]=R;const Q=eV(4,$S,4,Nl,Pde);E=N*c,d=Hu*N,h=d-(d-N),p=N-h,d=Hu*c,m=d-(d-c),g=c-m,T=p*g-(E-h*m-p*m-h*g),C=L*l,d=Hu*L,h=d-(d-L),p=L-h,d=Hu*l,m=d-(d-l),g=l-m,I=p*g-(C-h*m-p*m-h*g),v=T-I,f=T-v,Nl[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,Nl[1]=w-(v+f)+(f-C),R=b+v,f=R-b,Nl[2]=b-(R-f)+(v-f),Nl[3]=R;const J=eV(Q,Pde,4,Nl,Ode);E=a*c,d=Hu*a,h=d-(d-a),p=a-h,d=Hu*c,m=d-(d-c),g=c-m,T=p*g-(E-h*m-p*m-h*g),C=u*l,d=Hu*u,h=d-(d-u),p=u-h,d=Hu*l,m=d-(d-l),g=l-m,I=p*g-(C-h*m-p*m-h*g),v=T-I,f=T-v,Nl[0]=T-(v+f)+(f-I),b=E+v,f=b-E,w=E-(b-f)+(v-f),v=w-C,f=w-v,Nl[1]=w-(v+f)+(f-C),R=b+v,f=R-b,Nl[2]=b-(R-f)+(v-f),Nl[3]=R;const ne=eV(J,Ode,4,Nl,Mde);return Mde[ne-1]}function X4(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=cmt*l?u:-hmt(e,t,n,r,i,s,l)}const Lde=Math.pow(2,-52),Q4=new Uint32Array(512);class gF{static from(t,n=vmt,r=bmt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new gF(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let N=0;N<o;N++){const O=t[2*N],L=t[2*N+1];O<a&&(a=O),L<u&&(u=L),O>l&&(l=O),L>c&&(c=L),this._ids[N]=N}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let N=0,O=1/0;N<o;N++){const L=tV(f,d,t[2*N],t[2*N+1]);L<O&&(h=N,O=L)}const g=t[2*h],v=t[2*h+1];for(let N=0,O=1/0;N<o;N++){if(N===h)continue;const L=tV(g,v,t[2*N],t[2*N+1]);L<O&&L>0&&(p=N,O=L)}let b=t[2*p],w=t[2*p+1],E=1/0;for(let N=0;N<o;N++){if(N===h||N===p)continue;const O=gmt(g,v,b,w,t[2*N],t[2*N+1]);O<E&&(m=N,E=O)}let T=t[2*m],C=t[2*m+1];if(E===1/0){for(let L=0;L<o;L++)this._dists[L]=t[2*L]-t[0]||t[2*L+1]-t[1];b2(this._ids,this._dists,0,o-1);const N=new Uint32Array(o);let O=0;for(let L=0,B=-1/0;L<o;L++){const F=this._ids[L],H=this._dists[F];H>B&&(N[O++]=F,B=H)}this.hull=N.subarray(0,O),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(X4(g,v,b,w,T,C)<0){const N=p,O=b,L=w;p=m,b=T,w=C,m=N,T=O,C=L}const I=ymt(g,v,b,w,T,C);this._cx=I.x,this._cy=I.y;for(let N=0;N<o;N++)this._dists[N]=tV(t[2*N],t[2*N+1],I.x,I.y);b2(this._ids,this._dists,0,o-1),this._hullStart=h;let R=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,v)]=h,s[this._hashKey(b,w)]=p,s[this._hashKey(T,C)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let N=0,O,L;N<this._ids.length;N++){const B=this._ids[N],F=t[2*B],H=t[2*B+1];if(N>0&&Math.abs(F-O)<=Lde&&Math.abs(H-L)<=Lde||(O=F,L=H,B===h||B===p||B===m))continue;let Q=0;for(let q=0,U=this._hashKey(F,H);q<this._hashSize&&(Q=s[(U+q)%this._hashSize],!(Q!==-1&&Q!==r[Q]));q++);Q=n[Q];let J=Q,ne;for(;ne=r[J],X4(F,H,t[2*J],t[2*J+1],t[2*ne],t[2*ne+1])>=0;)if(J=ne,J===Q){J=-1;break}if(J===-1)continue;let Z=this._addTriangle(J,B,r[J],-1,-1,i[J]);i[B]=this._legalize(Z+2),i[J]=Z,R++;let ie=r[J];for(;ne=r[ie],X4(F,H,t[2*ie],t[2*ie+1],t[2*ne],t[2*ne+1])<0;)Z=this._addTriangle(ie,B,ne,i[B],-1,i[ie]),i[B]=this._legalize(Z+2),r[ie]=ie,R--,ie=ne;if(J===Q)for(;ne=n[J],X4(F,H,t[2*ne],t[2*ne+1],t[2*J],t[2*J+1])<0;)Z=this._addTriangle(ne,B,J,-1,i[J],i[ne]),this._legalize(Z+2),i[ne]=Z,r[J]=J,R--,J=ne;this._hullStart=n[B]=J,r[J]=n[ie]=B,r[B]=ie,s[this._hashKey(F,H)]=B,s[this._hashKey(t[2*J],t[2*J+1])]=J}this.hull=new Uint32Array(R);for(let N=0,O=this._hullStart;N<R;N++)this.hull[N]=O,O=r[O];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(pmt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=Q4[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(mmt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const v=r[f];if(v===-1){let w=this._hullStart;do{if(this._hullTri[w]===f){this._hullTri[w]=t;break}w=this._hullPrev[w]}while(w!==this._hullStart)}this._link(t,v),this._link(a,r[o]),this._link(o,f);const b=l+(a+1)%3;s<Q4.length&&(Q4[s++]=b)}else{if(s===0)break;t=Q4[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function pmt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function tV(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function mmt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function gmt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function ymt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function b2(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;rR(e,i,s),t[e[n]]>t[e[r]]&&rR(e,n,r),t[e[s]]>t[e[r]]&&rR(e,s,r),t[e[n]]>t[e[s]]&&rR(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;rR(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(b2(e,t,s,r),b2(e,t,n,o-1)):(b2(e,t,n,o-1),b2(e,t,s,r))}}function rR(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function vmt(e){return e[0]}function bmt(e){return e[1]}const $de=1e-6;class xw{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>$de||Math.abs(this._y1-s)>$de)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class uG{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let xmt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,v=r.length,b,w;m<v;m+=3,g+=2){const E=r[m]*2,T=r[m+1]*2,C=r[m+2]*2,I=t[E],R=t[E+1],N=t[T],O=t[T+1],L=t[C],B=t[C+1],F=N-I,H=O-R,Q=L-I,J=B-R,ne=(F*J-H*Q)*2;if(Math.abs(ne)<1e-9){if(s===void 0){s=o=0;for(const ie of n)s+=t[ie*2],o+=t[ie*2+1];s/=n.length,o/=n.length}const Z=1e9*Math.sign((s-I)*J-(o-R)*Q);b=(I+L)/2-Z*J,w=(R+B)/2+Z*Q}else{const Z=1/ne,ie=F*F+H*H,q=Q*Q+J*J;b=I+(J*ie-H*q)*Z,w=R+(F*q-Q*ie)*Z}a[g]=b,a[g+1]=w}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new xw:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],v=o[p],b=o[p+1];this._renderSegment(m,g,v,b,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new xw:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new xw:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new uG;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,v,b;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,v,b]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[v,b,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(v,b),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(v,b):i=[v,b]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const _mt=2*Math.PI,FS=Math.pow;function wmt(e){return e[0]}function Emt(e){return e[1]}function Tmt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Smt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class $Z{static from(t,n=wmt,r=Emt,i){return new $Z("length"in t?Cmt(t,n,r,i):Float64Array.from(Amt(t,n,r,i)))}constructor(t){this._delaunator=new gF(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Tmt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Smt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new gF(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new xmt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=FS(n-l[t*2],2)+FS(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=FS(n-l[p*2],2)+FS(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&FS(n-l[h*2],2)+FS(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new xw:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new xw:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,_mt)}return r&&r.value()}renderHull(t){const n=t==null?t=new xw:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new uG;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new xw:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new uG;return this.renderTriangle(t,n),n.value()}}function Cmt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Amt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Fde={},nV={},rV=34,iR=10,iV=13;function TCe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Imt(e,t){var n=TCe(e);return function(r,i){return t(n(r),i,e)}}function Bde(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Oc(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function kmt(e){return e<0?"-"+Oc(-e,6):e>9999?"+"+Oc(e,6):Oc(e,4)}function Rmt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":kmt(e.getUTCFullYear())+"-"+Oc(e.getUTCMonth()+1,2)+"-"+Oc(e.getUTCDate(),2)+(i?"T"+Oc(t,2)+":"+Oc(n,2)+":"+Oc(r,2)+"."+Oc(i,3)+"Z":r?"T"+Oc(t,2)+":"+Oc(n,2)+":"+Oc(r,2)+"Z":n||t?"T"+Oc(t,2)+":"+Oc(n,2)+"Z":"")}function SCe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,v){if(h)return h(g,v-1);p=g,h=d?Imt(g,d):TCe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,v,b=p<=0,w=!1;f.charCodeAt(p-1)===iR&&--p,f.charCodeAt(p-1)===iV&&--p;function E(){if(b)return nV;if(w)return w=!1,Fde;var C,I=m,R;if(f.charCodeAt(I)===rV){for(;m++<p&&f.charCodeAt(m)!==rV||f.charCodeAt(++m)===rV;);return(C=m)>=p?b=!0:(R=f.charCodeAt(m++))===iR?w=!0:R===iV&&(w=!0,f.charCodeAt(m)===iR&&++m),f.slice(I+1,C-1).replace(/""/g,'"')}for(;m<p;){if((R=f.charCodeAt(C=m++))===iR)w=!0;else if(R===iV)w=!0,f.charCodeAt(m)===iR&&++m;else if(R!==n)continue;return f.slice(I,C)}return b=!0,f.slice(I,p)}for(;(v=E())!==nV;){for(var T=[];v!==Fde&&v!==nV;)T.push(v),v=E();d&&(T=d(T,g++))==null||h.push(T)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Bde(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Bde(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Rmt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Dmt=SCe(","),Nmt=Dmt.parse;function Pmt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Omt(e,t){return fetch(e,t).then(Pmt)}function Mmt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Omt(t,n).then(function(i){return e(i,r)})}}var CCe=Mmt(Nmt);function Lmt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function $mt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return ACe(this.cover(t,n),t,n,e)}function ACe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,v,b;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[v=g<<1|m]))return i[v]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[v]=o:e._root=o,e;do i=i?i[v]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((v=g<<1|m)===(b=(p>=d)<<1|h>=f));return i[b]=s,i[v]=o,e}function Fmt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)ACe(this,o[n],a[n],e[n]);return this}function Bmt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function jmt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Umt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function zl(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function zmt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new zl(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,v=(a+l)/2;d.push(new zl(h[3],g,v,u,l),new zl(h[2],o,v,g,l),new zl(h[1],g,a,u,v),new zl(h[0],o,a,g,v)),(m=(t>=v)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var b=e-+this._x.call(null,h.data),w=t-+this._y.call(null,h.data),E=b*b+w*w;if(E<n){var T=Math.sqrt(n=E);i=e-T,s=t-T,c=e+T,f=t+T,r=h.data}}return r}function Vmt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,v;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,v=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[v]=n:this._root=n),this):(this._root=s,this)}function Hmt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function qmt(){return this._root}function Wmt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Gmt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new zl(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new zl(i,l,c,a,u)),(i=r[2])&&t.push(new zl(i,s,c,l,u)),(i=r[1])&&t.push(new zl(i,l,o,a,c)),(i=r[0])&&t.push(new zl(i,s,o,l,c))}return this}function Ymt(e){var t=[],n=[],r;for(this._root&&t.push(new zl(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new zl(s,o,a,c,f)),(s=i[1])&&t.push(new zl(s,c,a,u,f)),(s=i[2])&&t.push(new zl(s,o,f,c,l)),(s=i[3])&&t.push(new zl(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Kmt(e){return e[0]}function Xmt(e){return arguments.length?(this._x=e,this):this._x}function Qmt(e){return e[1]}function Jmt(e){return arguments.length?(this._y=e,this):this._y}function FZ(e,t,n){var r=new BZ(t??Kmt,n??Qmt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function BZ(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function jde(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var nc=FZ.prototype=BZ.prototype;nc.copy=function(){var e=new BZ(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=jde(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=jde(r));return e};nc.add=$mt;nc.addAll=Fmt;nc.cover=Bmt;nc.data=jmt;nc.extent=Umt;nc.find=zmt;nc.remove=Vmt;nc.removeAll=Hmt;nc.root=qmt;nc.size=Wmt;nc.visit=Gmt;nc.visitAfter=Ymt;nc.x=Xmt;nc.y=Jmt;function Hl(e){return function(){return e}}function Xv(e){return(e()-.5)*1e-6}function Zmt(e){return e.x+e.vx}function e0t(e){return e.y+e.vy}function t0t(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Hl(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,v=0;v<s;++v)for(f=FZ(t,Zmt,e0t).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(b);function b(w,E,T,C,I){var R=w.data,N=w.r,O=m+N;if(R){if(R.index>d.index){var L=h-R.x-R.vx,B=p-R.y-R.vy,F=L*L+B*B;F<O*O&&(L===0&&(L=Xv(r),F+=L*L),B===0&&(B=Xv(r),F+=B*B),F=(O-(F=Math.sqrt(F)))/F*i,d.vx+=(L*=F)*(O=(N*=N)/(g+N)),d.vy+=(B*=F)*O,R.vx-=L*(O=1-O),R.vy-=B*O)}return}return E>h+O||C<h-O||T>p+O||I<p-O}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Hl(+l),u(),o):e},o}function n0t(e){return e.index}function Ude(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function r0t(e){var t=n0t,n=f,r,i=Hl(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var v=0,b=e.length;v<c;++v)for(var w=0,E,T,C,I,R,N,O;w<b;++w)E=e[w],T=E.source,C=E.target,I=C.x+C.vx-T.x-T.vx||Xv(l),R=C.y+C.vy-T.y-T.vy||Xv(l),N=Math.sqrt(I*I+R*R),N=(N-s[w])/N*g*r[w],I*=N,R*=N,C.vx-=I*(O=u[w]),C.vy-=R*O,T.vx+=I*(O=1-O),T.vy+=R*O}function h(){if(o){var g,v=o.length,b=e.length,w=new Map(o.map((T,C)=>[t(T,C,o),T])),E;for(g=0,a=new Array(v);g<b;++g)E=e[g],E.index=g,typeof E.source!="object"&&(E.source=Ude(w,E.source)),typeof E.target!="object"&&(E.target=Ude(w,E.target)),a[E.source.index]=(a[E.source.index]||0)+1,a[E.target.index]=(a[E.target.index]||0)+1;for(g=0,u=new Array(b);g<b;++g)E=e[g],u[g]=a[E.source.index]/(a[E.source.index]+a[E.target.index]);r=new Array(b),p(),s=new Array(b),m()}}function p(){if(o)for(var g=0,v=e.length;g<v;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,v=e.length;g<v;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,v){o=g,l=v,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Hl(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Hl(+g),m(),d):i},d}const i0t=1664525,s0t=1013904223,zde=4294967296;function o0t(){let e=1;return()=>(e=(i0t*e+s0t)%zde)/zde}function a0t(e){return e.x}function u0t(e){return e.y}var l0t=10,c0t=Math.PI*(3-Math.sqrt(5));function f0t(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=NZ(f),l=HB("tick","end"),c=o0t();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,v=e.length,b;m===void 0&&(m=1);for(var w=0;w<m;++w)for(n+=(s-n)*i,a.forEach(function(E){E(n)}),g=0;g<v;++g)b=e[g],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var m=0,g=e.length,v;m<g;++m){if(v=e[m],v.index=m,v.fx!=null&&(v.x=v.fx),v.fy!=null&&(v.y=v.fy),isNaN(v.x)||isNaN(v.y)){var b=l0t*Math.sqrt(.5+m),w=m*c0t;v.x=b*Math.cos(w),v.y=b*Math.sin(w)}(isNaN(v.vx)||isNaN(v.vy))&&(v.vx=v.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,v){var b=0,w=e.length,E,T,C,I,R;for(v==null?v=1/0:v*=v,b=0;b<w;++b)I=e[b],E=m-I.x,T=g-I.y,C=E*E+T*T,C<v&&(R=I,v=C);return R},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function d0t(){var e,t,n,r,i=Hl(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=FZ(e,a0t,u0t).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,v=0,b,w,E;if(h.length){for(b=w=E=0;E<4;++E)(m=h[E])&&(g=Math.abs(m.value))&&(p+=m.value,v+=g,b+=g*m.x,w+=g*m.y);h.x=b/v,h.y=w/v}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var v=h.x-t.x,b=h.y-t.y,w=g-p,E=v*v+b*b;if(w*w/u<E)return E<a&&(v===0&&(v=Xv(n),E+=v*v),b===0&&(b=Xv(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)),t.vx+=v*h.value*r/E,t.vy+=b*h.value*r/E),!0;if(h.length||E>=a)return;(h.data!==t||h.next)&&(v===0&&(v=Xv(n),E+=v*v),b===0&&(b=Xv(n),E+=b*b),E<o&&(E=Math.sqrt(o*E)));do h.data!==t&&(w=s[h.data.index]*r/E,t.vx+=v*w,t.vy+=b*w);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Hl(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function h0t(e){var t=Hl(.1),n,r,i;typeof e!="function"&&(e=Hl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Hl(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Hl(+a),o(),s):e},s}function p0t(e){var t=Hl(.1),n,r,i;typeof e!="function"&&(e=Hl(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Hl(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Hl(+a),o(),s):e},s}function m0t(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function yF(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function wC(e){return e=yF(Math.abs(e)),e?e[1]:NaN}function g0t(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function y0t(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var v0t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jw(e){if(!(t=v0t.exec(e)))throw new Error("invalid format: "+e);var t;return new jZ({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Jw.prototype=jZ.prototype;function jZ(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}jZ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function b0t(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ICe;function x0t(e,t){var n=yF(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(ICe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+yF(e,Math.max(0,t+s-1))[0]}function Vde(e,t){var n=yF(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Hde={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:m0t,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Vde(e*100,t),r:Vde,s:x0t,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function qde(e){return e}var Wde=Array.prototype.map,Gde=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function kCe(e){var t=e.grouping===void 0||e.thousands===void 0?qde:g0t(Wde.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?qde:y0t(Wde.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Jw(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,v=f.width,b=f.comma,w=f.precision,E=f.trim,T=f.type;T==="n"?(b=!0,T="g"):Hde[T]||(w===void 0&&(w=12),E=!0,T="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var C=m==="$"?n:m==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",I=m==="$"?r:/[%p]/.test(T)?o:"",R=Hde[T],N=/[defgprs%]/.test(T);w=w===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function O(L){var B=C,F=I,H,Q,J;if(T==="c")F=R(L)+F,L="";else{L=+L;var ne=L<0||1/L<0;if(L=isNaN(L)?u:R(Math.abs(L),w),E&&(L=b0t(L)),ne&&+L==0&&p!=="+"&&(ne=!1),B=(ne?p==="("?p:a:p==="-"||p==="("?"":p)+B,F=(T==="s"?Gde[8+ICe/3]:"")+F+(ne&&p==="("?")":""),N){for(H=-1,Q=L.length;++H<Q;)if(J=L.charCodeAt(H),48>J||J>57){F=(J===46?i+L.slice(H+1):L.slice(H))+F,L=L.slice(0,H);break}}}b&&!g&&(L=t(L,1/0));var Z=B.length+L.length+F.length,ie=Z<v?new Array(v-Z+1).join(d):"";switch(b&&g&&(L=t(ie+L,ie.length?v-F.length:1/0),ie=""),h){case"<":L=B+L+F+ie;break;case"=":L=B+ie+L+F;break;case"^":L=ie.slice(0,Z=ie.length>>1)+B+L+F+ie.slice(Z);break;default:L=ie+B+L+F;break}return s(L)}return O.toString=function(){return f+""},O}function c(f,d){var h=l((f=Jw(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(wC(d)/3)))*3,m=Math.pow(10,-p),g=Gde[8+p/3];return function(v){return h(m*v)+g}}return{format:l,formatPrefix:c}}var J4,_x,UZ;_0t({thousands:",",grouping:[3],currency:["$",""]});function _0t(e){return J4=kCe(e),_x=J4.format,UZ=J4.formatPrefix,J4}function RCe(e){return Math.max(0,-wC(Math.abs(e)))}function DCe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wC(t)/3)))*3-wC(Math.abs(e)))}function NCe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,wC(t)-wC(e))+1}var An=1e-6,lG=1e-12,Ar=Math.PI,ao=Ar/2,vF=Ar/4,Ql=Ar*2,So=180/Ar,Er=Ar/180,Gr=Math.abs,GA=Math.atan,lh=Math.atan2,Cn=Math.cos,Z4=Math.ceil,PCe=Math.exp,cG=Math.hypot,bF=Math.log,sV=Math.pow,xn=Math.sin,nh=Math.sign||function(e){return e>0?1:e<0?-1:0},Jl=Math.sqrt,zZ=Math.tan;function OCe(e){return e>1?0:e<-1?Ar:Math.acos(e)}function Zc(e){return e>1?ao:e<-1?-ao:Math.asin(e)}function bu(){}function xF(e,t){e&&Kde.hasOwnProperty(e.type)&&Kde[e.type](e,t)}var Yde={Feature:function(e,t){xF(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)xF(n[r].geometry,t)}},Kde={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){fG(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)fG(n[r],t,0)},Polygon:function(e,t){Xde(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Xde(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)xF(n[r],t)}};function fG(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Xde(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)fG(e[n],t,1);t.polygonEnd()}function yy(e,t){e&&Yde.hasOwnProperty(e.type)?Yde[e.type](e,t):xF(e,t)}var _F=new Gl,wF=new Gl,MCe,LCe,dG,hG,pG,$0={point:bu,lineStart:bu,lineEnd:bu,polygonStart:function(){_F=new Gl,$0.lineStart=w0t,$0.lineEnd=E0t},polygonEnd:function(){var e=+_F;wF.add(e<0?Ql+e:e),this.lineStart=this.lineEnd=this.point=bu},sphere:function(){wF.add(Ql)}};function w0t(){$0.point=T0t}function E0t(){$Ce(MCe,LCe)}function T0t(e,t){$0.point=$Ce,MCe=e,LCe=t,e*=Er,t*=Er,dG=e,hG=Cn(t=t/2+vF),pG=xn(t)}function $Ce(e,t){e*=Er,t*=Er,t=t/2+vF;var n=e-dG,r=n>=0?1:-1,i=r*n,s=Cn(t),o=xn(t),a=pG*o,u=hG*s+a*Cn(i),l=a*r*xn(i);_F.add(lh(l,u)),dG=e,hG=s,pG=o}function S0t(e){return wF=new Gl,yy(e,$0),wF*2}function EF(e){return[lh(e[1],e[0]),Zc(e[2])]}function Zw(e){var t=e[0],n=e[1],r=Cn(n);return[r*Cn(t),r*xn(t),xn(n)]}function e6(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function EC(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function oV(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function t6(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function TF(e){var t=Jl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Us,Uc,eo,qf,Y_,FCe,BCe,B2,UD,Ov,t1,fy={point:mG,lineStart:Qde,lineEnd:Jde,polygonStart:function(){fy.point=UCe,fy.lineStart=C0t,fy.lineEnd=A0t,UD=new Gl,$0.polygonStart()},polygonEnd:function(){$0.polygonEnd(),fy.point=mG,fy.lineStart=Qde,fy.lineEnd=Jde,_F<0?(Us=-(eo=180),Uc=-(qf=90)):UD>An?qf=90:UD<-1e-6&&(Uc=-90),t1[0]=Us,t1[1]=eo},sphere:function(){Us=-(eo=180),Uc=-(qf=90)}};function mG(e,t){Ov.push(t1=[Us=e,eo=e]),t<Uc&&(Uc=t),t>qf&&(qf=t)}function jCe(e,t){var n=Zw([e*Er,t*Er]);if(B2){var r=EC(B2,n),i=[r[1],-r[0],0],s=EC(i,r);TF(s),s=EF(s);var o=e-Y_,a=o>0?1:-1,u=s[0]*So*a,l,c=Gr(o)>180;c^(a*Y_<u&&u<a*e)?(l=s[1]*So,l>qf&&(qf=l)):(u=(u+360)%360-180,c^(a*Y_<u&&u<a*e)?(l=-s[1]*So,l<Uc&&(Uc=l)):(t<Uc&&(Uc=t),t>qf&&(qf=t))),c?e<Y_?Vf(Us,e)>Vf(Us,eo)&&(eo=e):Vf(e,eo)>Vf(Us,eo)&&(Us=e):eo>=Us?(e<Us&&(Us=e),e>eo&&(eo=e)):e>Y_?Vf(Us,e)>Vf(Us,eo)&&(eo=e):Vf(e,eo)>Vf(Us,eo)&&(Us=e)}else Ov.push(t1=[Us=e,eo=e]);t<Uc&&(Uc=t),t>qf&&(qf=t),B2=n,Y_=e}function Qde(){fy.point=jCe}function Jde(){t1[0]=Us,t1[1]=eo,fy.point=mG,B2=null}function UCe(e,t){if(B2){var n=e-Y_;UD.add(Gr(n)>180?n+(n>0?360:-360):n)}else FCe=e,BCe=t;$0.point(e,t),jCe(e,t)}function C0t(){$0.lineStart()}function A0t(){UCe(FCe,BCe),$0.lineEnd(),Gr(UD)>An&&(Us=-(eo=180)),t1[0]=Us,t1[1]=eo,B2=null}function Vf(e,t){return(t-=e)<0?t+360:t}function I0t(e,t){return e[0]-t[0]}function Zde(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function k0t(e){var t,n,r,i,s,o,a;if(qf=eo=-(Us=Uc=1/0),Ov=[],yy(e,fy),n=Ov.length){for(Ov.sort(I0t),t=1,r=Ov[0],s=[r];t<n;++t)i=Ov[t],Zde(r,i[0])||Zde(r,i[1])?(Vf(r[0],i[1])>Vf(r[0],r[1])&&(r[1]=i[1]),Vf(i[0],r[1])>Vf(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Vf(r[1],i[0]))>o&&(o=a,Us=i[0],eo=r[1])}return Ov=t1=null,Us===1/0||Uc===1/0?[[NaN,NaN],[NaN,NaN]]:[[Us,Uc],[eo,qf]]}var YR,SF,CF,AF,IF,kF,RF,DF,gG,yG,vG,zCe,VCe,Bl,jl,Ul,Sp={sphere:bu,point:VZ,lineStart:ehe,lineEnd:the,polygonStart:function(){Sp.lineStart=N0t,Sp.lineEnd=P0t},polygonEnd:function(){Sp.lineStart=ehe,Sp.lineEnd=the}};function VZ(e,t){e*=Er,t*=Er;var n=Cn(t);u3(n*Cn(e),n*xn(e),xn(t))}function u3(e,t,n){++YR,CF+=(e-CF)/YR,AF+=(t-AF)/YR,IF+=(n-IF)/YR}function ehe(){Sp.point=R0t}function R0t(e,t){e*=Er,t*=Er;var n=Cn(t);Bl=n*Cn(e),jl=n*xn(e),Ul=xn(t),Sp.point=D0t,u3(Bl,jl,Ul)}function D0t(e,t){e*=Er,t*=Er;var n=Cn(t),r=n*Cn(e),i=n*xn(e),s=xn(t),o=lh(Jl((o=jl*s-Ul*i)*o+(o=Ul*r-Bl*s)*o+(o=Bl*i-jl*r)*o),Bl*r+jl*i+Ul*s);SF+=o,kF+=o*(Bl+(Bl=r)),RF+=o*(jl+(jl=i)),DF+=o*(Ul+(Ul=s)),u3(Bl,jl,Ul)}function the(){Sp.point=VZ}function N0t(){Sp.point=O0t}function P0t(){HCe(zCe,VCe),Sp.point=VZ}function O0t(e,t){zCe=e,VCe=t,e*=Er,t*=Er,Sp.point=HCe;var n=Cn(t);Bl=n*Cn(e),jl=n*xn(e),Ul=xn(t),u3(Bl,jl,Ul)}function HCe(e,t){e*=Er,t*=Er;var n=Cn(t),r=n*Cn(e),i=n*xn(e),s=xn(t),o=jl*s-Ul*i,a=Ul*r-Bl*s,u=Bl*i-jl*r,l=cG(o,a,u),c=Zc(l),f=l&&-c/l;gG.add(f*o),yG.add(f*a),vG.add(f*u),SF+=c,kF+=c*(Bl+(Bl=r)),RF+=c*(jl+(jl=i)),DF+=c*(Ul+(Ul=s)),u3(Bl,jl,Ul)}function M0t(e){YR=SF=CF=AF=IF=kF=RF=DF=0,gG=new Gl,yG=new Gl,vG=new Gl,yy(e,Sp);var t=+gG,n=+yG,r=+vG,i=cG(t,n,r);return i<lG&&(t=kF,n=RF,r=DF,SF<An&&(t=CF,n=AF,r=IF),i=cG(t,n,r),i<lG)?[NaN,NaN]:[lh(n,t)*So,Zc(r/i)*So]}function bG(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function xG(e,t){return Gr(e)>Ar&&(e-=Math.round(e/Ql)*Ql),[e,t]}xG.invert=xG;function qCe(e,t,n){return(e%=Ql)?t||n?bG(rhe(e),ihe(t,n)):rhe(e):t||n?ihe(t,n):xG}function nhe(e){return function(t,n){return t+=e,Gr(t)>Ar&&(t-=Math.round(t/Ql)*Ql),[t,n]}}function rhe(e){var t=nhe(e);return t.invert=nhe(-e),t}function ihe(e,t){var n=Cn(e),r=xn(e),i=Cn(t),s=xn(t);function o(a,u){var l=Cn(u),c=Cn(a)*l,f=xn(a)*l,d=xn(u),h=d*n+c*r;return[lh(f*i-h*s,c*n-d*r),Zc(h*i+f*s)]}return o.invert=function(a,u){var l=Cn(u),c=Cn(a)*l,f=xn(a)*l,d=xn(u),h=d*i-f*s;return[lh(f*i+d*s,c*n+h*r),Zc(h*n-c*r)]},o}function L0t(e){e=qCe(e[0]*Er,e[1]*Er,e.length>2?e[2]*Er:0);function t(n){return n=e(n[0]*Er,n[1]*Er),n[0]*=So,n[1]*=So,n}return t.invert=function(n){return n=e.invert(n[0]*Er,n[1]*Er),n[0]*=So,n[1]*=So,n},t}function $0t(e,t,n,r,i,s){if(n){var o=Cn(t),a=xn(t),u=r*n;i==null?(i=t+r*Ql,s=t-u/2):(i=she(o,i),s=she(o,s),(r>0?i<s:i>s)&&(i+=r*Ql));for(var l,c=i;r>0?c>s:c<s;c-=u)l=EF([o,-a*Cn(c),-a*xn(c)]),e.point(l[0],l[1])}}function she(e,t){t=Zw(t),t[0]-=e,TF(t);var n=OCe(-t[1]);return((-t[2]<0?-n:n)+Ql-An)%Ql}function WCe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:bu,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function HL(e,t){return Gr(e[0]-t[0])<An&&Gr(e[1]-t[1])<An}function n6(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function GCe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],v=p[m],b;if(HL(g,v)){if(!g[2]&&!v[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}v[0]+=2*An}s.push(b=new n6(g,p,null,!0)),o.push(b.o=new n6(g,null,b,!1)),s.push(b=new n6(v,p,null,!1)),o.push(b.o=new n6(v,null,b,!0))}}),!!s.length){for(o.sort(t),ohe(s),ohe(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function ohe(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function aV(e){return Gr(e[0])<=Ar?e[0]:nh(e[0])*((Gr(e[0])+Ar)%Ql-Ar)}function F0t(e,t){var n=aV(t),r=t[1],i=xn(r),s=[xn(n),-Cn(n),0],o=0,a=0,u=new Gl;i===1?r=ao+An:i===-1&&(r=-ao-An);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=aV(h),m=h[1]/2+vF,g=xn(m),v=Cn(m),b=0;b<d;++b,p=E,g=C,v=I,h=w){var w=f[b],E=aV(w),T=w[1]/2+vF,C=xn(T),I=Cn(T),R=E-p,N=R>=0?1:-1,O=N*R,L=O>Ar,B=g*C;if(u.add(lh(B*N*xn(O),v*I+B*Cn(O))),o+=L?R+N*Ql:R,L^p>=n^E>=n){var F=EC(Zw(h),Zw(w));TF(F);var H=EC(s,F);TF(H);var Q=(L^R>=0?-1:1)*Zc(H[2]);(r>Q||r===Q&&(F[0]||F[1]))&&(a+=L^R>=0?1:-1)}}return(o<-1e-6||o<An&&u<-1e-12)^a&1}function YCe(e,t,n,r){return function(i){var s=t(i),o=WCe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=v,d.lineStart=b,d.lineEnd=w,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=C2e(c);var E=F0t(l,r);c.length?(u||(i.polygonStart(),u=!0),GCe(c,j0t,E,n,i)):E&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(E,T){e(E,T)&&i.point(E,T)}function p(E,T){s.point(E,T)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function v(E,T){f.push([E,T]),a.point(E,T)}function b(){a.lineStart(),f=[]}function w(){v(f[0][0],f[0][1]),a.lineEnd();var E=a.clean(),T=o.result(),C,I=T.length,R,N,O;if(f.pop(),l.push(f),f=null,!!I){if(E&1){if(N=T[0],(R=N.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),C=0;C<R;++C)i.point((O=N[C])[0],O[1]);i.lineEnd()}return}I>1&&E&2&&T.push(T.pop().concat(T.shift())),c.push(T.filter(B0t))}}return d}}function B0t(e){return e.length>1}function j0t(e,t){return((e=e.x)[0]<0?e[1]-ao-An:ao-e[1])-((t=t.x)[0]<0?t[1]-ao-An:ao-t[1])}const ahe=YCe(function(){return!0},U0t,V0t,[-Ar,-ao]);function U0t(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Ar:-Ar,u=Gr(s-t);Gr(u-Ar)<An?(e.point(t,n=(n+o)/2>0?ao:-ao),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Ar&&(Gr(t-r)<An&&(t-=r*An),Gr(s-a)<An&&(s-=a*An),n=z0t(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function z0t(e,t,n,r){var i,s,o=xn(e-n);return Gr(o)>An?GA((xn(t)*(s=Cn(r))*xn(n)-xn(r)*(i=Cn(t))*xn(e))/(i*s*o)):(t+r)/2}function V0t(e,t,n,r){var i;if(e==null)i=n*ao,r.point(-Ar,i),r.point(0,i),r.point(Ar,i),r.point(Ar,0),r.point(Ar,-i),r.point(0,-i),r.point(-Ar,-i),r.point(-Ar,0),r.point(-Ar,i);else if(Gr(e[0]-t[0])>An){var s=e[0]<t[0]?Ar:-Ar;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function H0t(e){var t=Cn(e),n=2*Er,r=t>0,i=Gr(t)>An;function s(c,f,d,h){$0t(h,e,n,d,c,f)}function o(c,f){return Cn(c)*Cn(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,v){var b=[g,v],w,E=o(g,v),T=r?E?0:l(g,v):E?l(g+(g<0?Ar:-Ar),v):0;if(!f&&(p=h=E)&&c.lineStart(),E!==h&&(w=u(f,b),(!w||HL(f,w)||HL(b,w))&&(b[2]=1)),E!==h)m=0,E?(c.lineStart(),w=u(b,f),c.point(w[0],w[1])):(w=u(f,b),c.point(w[0],w[1],2),c.lineEnd()),f=w;else if(i&&f&&r^E){var C;!(T&d)&&(C=u(b,f,!0))&&(m=0,r?(c.lineStart(),c.point(C[0][0],C[0][1]),c.point(C[1][0],C[1][1]),c.lineEnd()):(c.point(C[1][0],C[1][1]),c.lineEnd(),c.lineStart(),c.point(C[0][0],C[0][1],3)))}E&&(!f||!HL(f,b))&&c.point(b[0],b[1]),f=b,h=E,d=T},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=Zw(c),p=Zw(f),m=[1,0,0],g=EC(h,p),v=e6(g,g),b=g[0],w=v-b*b;if(!w)return!d&&c;var E=t*v/w,T=-t*b/w,C=EC(m,g),I=t6(m,E),R=t6(g,T);oV(I,R);var N=C,O=e6(I,N),L=e6(N,N),B=O*O-L*(e6(I,I)-1);if(!(B<0)){var F=Jl(B),H=t6(N,(-O-F)/L);if(oV(H,I),H=EF(H),!d)return H;var Q=c[0],J=f[0],ne=c[1],Z=f[1],ie;J<Q&&(ie=Q,Q=J,J=ie);var q=J-Q,U=Gr(q-Ar)<An,G=U||q<An;if(!U&&Z<ne&&(ie=ne,ne=Z,Z=ie),G?U?ne+Z>0^H[1]<(Gr(H[0]-Q)<An?ne:Z):ne<=H[1]&&H[1]<=Z:q>Ar^(Q<=H[0]&&H[0]<=J)){var V=t6(N,(-O+F)/L);return oV(V,I),[H,EF(V)]}}}function l(c,f){var d=r?e:Ar-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return YCe(o,a,s,r?[0,-e]:[-Ar,e-Ar])}function q0t(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var r6=1e9,i6=-1e9;function KCe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Gr(l[0]-e)<An?c>0?0:3:Gr(l[0]-n)<An?c>0?2:1:Gr(l[1]-t)<An?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=WCe(),d,h,p,m,g,v,b,w,E,T,C,I={point:R,lineStart:B,lineEnd:F,polygonStart:O,polygonEnd:L};function R(Q,J){i(Q,J)&&c.point(Q,J)}function N(){for(var Q=0,J=0,ne=h.length;J<ne;++J)for(var Z=h[J],ie=1,q=Z.length,U=Z[0],G,V,Y=U[0],ee=U[1];ie<q;++ie)G=Y,V=ee,U=Z[ie],Y=U[0],ee=U[1],V<=r?ee>r&&(Y-G)*(r-V)>(ee-V)*(e-G)&&++Q:ee<=r&&(Y-G)*(r-V)<(ee-V)*(e-G)&&--Q;return Q}function O(){c=f,d=[],h=[],C=!0}function L(){var Q=N(),J=C&&Q,ne=(d=C2e(d)).length;(J||ne)&&(l.polygonStart(),J&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),ne&&GCe(d,a,Q,s,l),l.polygonEnd()),c=l,d=h=p=null}function B(){I.point=H,h&&h.push(p=[]),T=!0,E=!1,b=w=NaN}function F(){d&&(H(m,g),v&&E&&f.rejoin(),d.push(f.result())),I.point=R,E&&c.lineEnd()}function H(Q,J){var ne=i(Q,J);if(h&&p.push([Q,J]),T)m=Q,g=J,v=ne,T=!1,ne&&(c.lineStart(),c.point(Q,J));else if(ne&&E)c.point(Q,J);else{var Z=[b=Math.max(i6,Math.min(r6,b)),w=Math.max(i6,Math.min(r6,w))],ie=[Q=Math.max(i6,Math.min(r6,Q)),J=Math.max(i6,Math.min(r6,J))];q0t(Z,ie,e,t,n,r)?(E||(c.lineStart(),c.point(Z[0],Z[1])),c.point(ie[0],ie[1]),ne||c.lineEnd(),C=!1):ne&&(c.lineStart(),c.point(Q,J),C=!1)}b=Q,w=J,E=ne}return I}}function uhe(e,t,n){var r=qc(e,t-An,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function lhe(e,t,n){var r=qc(e,t-An,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function W0t(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return qc(Z4(r/c)*c,n,c).map(p).concat(qc(Z4(a/f)*f,o,f).map(m)).concat(qc(Z4(t/u)*u,e,u).filter(function(w){return Gr(w%c)>An}).map(d)).concat(qc(Z4(s/l)*l,i,l).filter(function(w){return Gr(w%f)>An}).map(h))}return v.lines=function(){return b().map(function(w){return{type:"LineString",coordinates:w}})},v.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},v.extent=function(w){return arguments.length?v.extentMajor(w).extentMinor(w):v.extentMinor()},v.extentMajor=function(w){return arguments.length?(r=+w[0][0],n=+w[1][0],a=+w[0][1],o=+w[1][1],r>n&&(w=r,r=n,n=w),a>o&&(w=a,a=o,o=w),v.precision(g)):[[r,a],[n,o]]},v.extentMinor=function(w){return arguments.length?(t=+w[0][0],e=+w[1][0],s=+w[0][1],i=+w[1][1],t>e&&(w=t,t=e,e=w),s>i&&(w=s,s=i,i=w),v.precision(g)):[[t,s],[e,i]]},v.step=function(w){return arguments.length?v.stepMajor(w).stepMinor(w):v.stepMinor()},v.stepMajor=function(w){return arguments.length?(c=+w[0],f=+w[1],v):[c,f]},v.stepMinor=function(w){return arguments.length?(u=+w[0],l=+w[1],v):[u,l]},v.precision=function(w){return arguments.length?(g=+w,d=uhe(s,i,90),h=lhe(t,e,g),p=uhe(a,o,90),m=lhe(r,n,g),v):g},v.extentMajor([[-180,-90+An],[180,90-An]]).extentMinor([[-180,-80-An],[180,80+An]])}const PN=e=>e;var uV=new Gl,_G=new Gl,XCe,QCe,wG,EG,vy={point:bu,lineStart:bu,lineEnd:bu,polygonStart:function(){vy.lineStart=G0t,vy.lineEnd=K0t},polygonEnd:function(){vy.lineStart=vy.lineEnd=vy.point=bu,uV.add(Gr(_G)),_G=new Gl},result:function(){var e=uV/2;return uV=new Gl,e}};function G0t(){vy.point=Y0t}function Y0t(e,t){vy.point=JCe,XCe=wG=e,QCe=EG=t}function JCe(e,t){_G.add(EG*e-wG*t),wG=e,EG=t}function K0t(){JCe(XCe,QCe)}var TC=1/0,NF=TC,ON=-TC,PF=ON,OF={point:X0t,lineStart:bu,lineEnd:bu,polygonStart:bu,polygonEnd:bu,result:function(){var e=[[TC,NF],[ON,PF]];return ON=PF=-(NF=TC=1/0),e}};function X0t(e,t){e<TC&&(TC=e),e>ON&&(ON=e),t<NF&&(NF=t),t>PF&&(PF=t)}var TG=0,SG=0,KR=0,MF=0,LF=0,x2=0,CG=0,AG=0,XR=0,ZCe,eAe,t0,n0,eh={point:eE,lineStart:che,lineEnd:fhe,polygonStart:function(){eh.lineStart=Z0t,eh.lineEnd=egt},polygonEnd:function(){eh.point=eE,eh.lineStart=che,eh.lineEnd=fhe},result:function(){var e=XR?[CG/XR,AG/XR]:x2?[MF/x2,LF/x2]:KR?[TG/KR,SG/KR]:[NaN,NaN];return TG=SG=KR=MF=LF=x2=CG=AG=XR=0,e}};function eE(e,t){TG+=e,SG+=t,++KR}function che(){eh.point=Q0t}function Q0t(e,t){eh.point=J0t,eE(t0=e,n0=t)}function J0t(e,t){var n=e-t0,r=t-n0,i=Jl(n*n+r*r);MF+=i*(t0+e)/2,LF+=i*(n0+t)/2,x2+=i,eE(t0=e,n0=t)}function fhe(){eh.point=eE}function Z0t(){eh.point=tgt}function egt(){tAe(ZCe,eAe)}function tgt(e,t){eh.point=tAe,eE(ZCe=t0=e,eAe=n0=t)}function tAe(e,t){var n=e-t0,r=t-n0,i=Jl(n*n+r*r);MF+=i*(t0+e)/2,LF+=i*(n0+t)/2,x2+=i,i=n0*e-t0*t,CG+=i*(t0+e),AG+=i*(n0+t),XR+=i*3,eE(t0=e,n0=t)}function nAe(e){this._context=e}nAe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Ql);break}}},result:bu};var IG=new Gl,lV,rAe,iAe,QR,JR,MN={point:bu,lineStart:function(){MN.point=ngt},lineEnd:function(){lV&&sAe(rAe,iAe),MN.point=bu},polygonStart:function(){lV=!0},polygonEnd:function(){lV=null},result:function(){var e=+IG;return IG=new Gl,e}};function ngt(e,t){MN.point=sAe,rAe=QR=e,iAe=JR=t}function sAe(e,t){QR-=e,JR-=t,IG.add(Jl(QR*QR+JR*JR)),QR=e,JR=t}let dhe,$F,hhe,phe;class mhe{constructor(t){this._append=t==null?oAe:rgt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==hhe||this._append!==$F){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,hhe=r,$F=this._append,phe=this._,this._=i}this._+=phe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function oAe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function rgt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return oAe;if(t!==dhe){const n=10**t;dhe=t,$F=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return $F}function aAe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),yy(a,i(s))),s.result()}return o.area=function(a){return yy(a,i(vy)),vy.result()},o.measure=function(a){return yy(a,i(MN)),MN.result()},o.bounds=function(a){return yy(a,i(OF)),OF.result()},o.centroid=function(a){return yy(a,i(eh)),eh.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,PN):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new mhe(n)):new nAe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new mhe(n)),o},o.projection(e).digits(n).context(t)}function ZB(e){return function(t){var n=new kG;for(var r in e)n[r]=e[r];return n.stream=t,n}}function kG(){}kG.prototype={constructor:kG,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function HZ(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),yy(n,e.stream(OF)),t(OF.result()),r!=null&&e.clipExtent(r),e}function e9(e,t,n){return HZ(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function qZ(e,t,n){return e9(e,[[0,0],t],n)}function WZ(e,t,n){return HZ(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function GZ(e,t,n){return HZ(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var ghe=16,igt=Cn(30*Er);function yhe(e,t){return+t?ogt(e,t):sgt(e)}function sgt(e){return ZB({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ogt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var v=l-r,b=c-i,w=v*v+b*b;if(w>4*t&&m--){var E=o+d,T=a+h,C=u+p,I=Jl(E*E+T*T+C*C),R=Zc(C/=I),N=Gr(Gr(C)-1)<An||Gr(s-f)<An?(s+f)/2:lh(T,E),O=e(N,R),L=O[0],B=O[1],F=L-r,H=B-i,Q=b*F-v*H;(Q*Q/w>t||Gr((v*F+b*H)/w-.5)>.3||o*d+a*h+u*p<igt)&&(n(r,i,s,o,a,u,L,B,N,E/=I,T/=I,C,m,g),g.point(L,B),n(L,B,N,E,T,C,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:v,lineStart:b,lineEnd:E,polygonStart:function(){r.polygonStart(),g.lineStart=T},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function v(R,N){R=e(R,N),r.point(R[0],R[1])}function b(){f=NaN,g.point=w,r.lineStart()}function w(R,N){var O=Zw([R,N]),L=e(R,N);n(f,d,c,h,p,m,f=L[0],d=L[1],c=R,h=O[0],p=O[1],m=O[2],ghe,r),r.point(f,d)}function E(){g.point=v,r.lineEnd()}function T(){b(),g.point=C,g.lineEnd=I}function C(R,N){w(i=R,N),s=f,o=d,a=h,u=p,l=m,g.point=w}function I(){n(f,d,c,h,p,m,s,o,i,a,u,l,ghe,r),g.lineEnd=E,E()}return g}}var agt=ZB({point:function(e,t){this.stream.point(e*Er,t*Er)}});function ugt(e){return ZB({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function lgt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function vhe(e,t,n,r,i,s){if(!s)return lgt(e,t,n,r,i);var o=Cn(s),a=xn(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function ag(e){return uAe(function(){return e})()}function uAe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=ahe,g=null,v,b,w,E=PN,T=.5,C,I,R,N,O;function L(Q){return R(Q[0]*Er,Q[1]*Er)}function B(Q){return Q=R.invert(Q[0],Q[1]),Q&&[Q[0]*So,Q[1]*So]}L.stream=function(Q){return N&&O===Q?N:N=agt(ugt(c)(m(C(E(O=Q)))))},L.preclip=function(Q){return arguments.length?(m=Q,p=void 0,H()):m},L.postclip=function(Q){return arguments.length?(E=Q,g=v=b=w=null,H()):E},L.clipAngle=function(Q){return arguments.length?(m=+Q?H0t(p=Q*Er):(p=null,ahe),H()):p*So},L.clipExtent=function(Q){return arguments.length?(E=Q==null?(g=v=b=w=null,PN):KCe(g=+Q[0][0],v=+Q[0][1],b=+Q[1][0],w=+Q[1][1]),H()):g==null?null:[[g,v],[b,w]]},L.scale=function(Q){return arguments.length?(n=+Q,F()):n},L.translate=function(Q){return arguments.length?(r=+Q[0],i=+Q[1],F()):[r,i]},L.center=function(Q){return arguments.length?(s=Q[0]%360*Er,o=Q[1]%360*Er,F()):[s*So,o*So]},L.rotate=function(Q){return arguments.length?(a=Q[0]%360*Er,u=Q[1]%360*Er,l=Q.length>2?Q[2]%360*Er:0,F()):[a*So,u*So,l*So]},L.angle=function(Q){return arguments.length?(f=Q%360*Er,F()):f*So},L.reflectX=function(Q){return arguments.length?(d=Q?-1:1,F()):d<0},L.reflectY=function(Q){return arguments.length?(h=Q?-1:1,F()):h<0},L.precision=function(Q){return arguments.length?(C=yhe(I,T=Q*Q),H()):Jl(T)},L.fitExtent=function(Q,J){return e9(L,Q,J)},L.fitSize=function(Q,J){return qZ(L,Q,J)},L.fitWidth=function(Q,J){return WZ(L,Q,J)},L.fitHeight=function(Q,J){return GZ(L,Q,J)};function F(){var Q=vhe(n,0,0,d,h,f).apply(null,t(s,o)),J=vhe(n,r-Q[0],i-Q[1],d,h,f);return c=qCe(a,u,l),I=bG(t,J),R=bG(c,I),C=yhe(I,T),H()}function H(){return N=O=null,L}return function(){return t=e.apply(this,arguments),L.invert=t.invert&&B,F()}}function YZ(e){var t=0,n=Ar/3,r=uAe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Er,n=s[1]*Er):[t*So,n*So]},i}function cgt(e){var t=Cn(e);function n(r,i){return[r*t,xn(i)/t]}return n.invert=function(r,i){return[r/t,Zc(i*t)]},n}function fgt(e,t){var n=xn(e),r=(n+xn(t))/2;if(Gr(r)<An)return cgt(e);var i=1+n*(2*r-n),s=Jl(i)/r;function o(a,u){var l=Jl(i-2*r*xn(u))/r;return[l*xn(a*=r),s-l*Cn(a)]}return o.invert=function(a,u){var l=s-u,c=lh(a,Gr(l))*nh(l);return l*r<0&&(c-=Ar*nh(a)*nh(l)),[c/r,Zc((i-(a*a+l*l)*r*r)/(2*r))]},o}function FF(){return YZ(fgt).scale(155.424).center([0,33.6442])}function lAe(){return FF().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function dgt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function hgt(){var e,t,n=lAe(),r,i=FF().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=FF().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=dgt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+An,m+.12*h+An],[p-.214*h-An,m+.234*h-An]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+An,m+.166*h+An],[p-.115*h-An,m+.234*h-An]]).stream(l),f()},c.fitExtent=function(d,h){return e9(c,d,h)},c.fitSize=function(d,h){return qZ(c,d,h)},c.fitWidth=function(d,h){return WZ(c,d,h)},c.fitHeight=function(d,h){return GZ(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function cAe(e){return function(t,n){var r=Cn(t),i=Cn(n),s=e(r*i);return s===1/0?[2,0]:[s*i*xn(t),s*xn(n)]}}function l3(e){return function(t,n){var r=Jl(t*t+n*n),i=e(r),s=xn(i),o=Cn(i);return[lh(t*s,r*o),Zc(r&&n*s/r)]}}var fAe=cAe(function(e){return Jl(2/(1+e))});fAe.invert=l3(function(e){return 2*Zc(e/2)});function pgt(){return ag(fAe).scale(124.75).clipAngle(180-.001)}var dAe=cAe(function(e){return(e=OCe(e))&&e/xn(e)});dAe.invert=l3(function(e){return e});function mgt(){return ag(dAe).scale(79.4188).clipAngle(180-.001)}function t9(e,t){return[e,bF(zZ((ao+t)/2))]}t9.invert=function(e,t){return[e,2*GA(PCe(t))-ao]};function ggt(){return hAe(t9).scale(961/Ql)}function hAe(e){var t=ag(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Ar*r(),d=t(L0t(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===t9?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function s6(e){return zZ((ao+e)/2)}function ygt(e,t){var n=Cn(e),r=e===t?xn(e):bF(n/Cn(t))/bF(s6(t)/s6(e)),i=n*sV(s6(e),r)/r;if(!r)return t9;function s(o,a){i>0?a<-ao+An&&(a=-ao+An):a>ao-An&&(a=ao-An);var u=i/sV(s6(a),r);return[u*xn(r*o),i-u*Cn(r*o)]}return s.invert=function(o,a){var u=i-a,l=nh(r)*Jl(o*o+u*u),c=lh(o,Gr(u))*nh(u);return u*r<0&&(c-=Ar*nh(o)*nh(u)),[c/r,2*GA(sV(i/l,1/r))-ao]},s}function vgt(){return YZ(ygt).scale(109.5).parallels([30,30])}function BF(e,t){return[e,t]}BF.invert=BF;function bgt(){return ag(BF).scale(152.63)}function xgt(e,t){var n=Cn(e),r=e===t?xn(e):(n-Cn(t))/(t-e),i=n/r+e;if(Gr(r)<An)return BF;function s(o,a){var u=i-a,l=r*o;return[u*xn(l),i-u*Cn(l)]}return s.invert=function(o,a){var u=i-a,l=lh(o,Gr(u))*nh(u);return u*r<0&&(l-=Ar*nh(o)*nh(u)),[l/r,i-nh(r)*Jl(o*o+u*u)]},s}function _gt(){return YZ(xgt).scale(131.154).center([0,13.9389])}var zD=1.340264,VD=-.081106,HD=893e-6,qD=.003796,jF=Jl(3)/2,wgt=12;function pAe(e,t){var n=Zc(jF*xn(t)),r=n*n,i=r*r*r;return[e*Cn(n)/(jF*(zD+3*VD*r+i*(7*HD+9*qD*r))),n*(zD+VD*r+i*(HD+qD*r))]}pAe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<wgt&&(a=n*(zD+VD*r+i*(HD+qD*r))-t,u=zD+3*VD*r+i*(7*HD+9*qD*r),n-=o=a/u,r=n*n,i=r*r*r,!(Gr(o)<lG));++s);return[jF*e*(zD+3*VD*r+i*(7*HD+9*qD*r))/Cn(n),Zc(xn(n)/jF)]};function Egt(){return ag(pAe).scale(177.158)}function mAe(e,t){var n=Cn(t),r=Cn(e)*n;return[n*xn(e)/r,xn(t)/r]}mAe.invert=l3(GA);function Tgt(){return ag(mAe).scale(144.049).clipAngle(60)}function Sgt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=ZB({point:function(E,T){var C=w([E,T]);this.stream.point(C[0],C[1])}}),m=PN,g,v;function b(){return d=e*r,h=e*i,g=v=null,w}function w(E){var T=E[0]*d,C=E[1]*h;if(s){var I=C*o-T*a;T=T*o+C*a,C=I}return[T+t,C+n]}return w.invert=function(E){var T=E[0]-t,C=E[1]-n;if(s){var I=C*o+T*a;T=T*o-C*a,C=I}return[T/d,C/h]},w.stream=function(E){return g&&v===E?g:g=p(m(v=E))},w.postclip=function(E){return arguments.length?(m=E,u=l=c=f=null,b()):m},w.clipExtent=function(E){return arguments.length?(m=E==null?(u=l=c=f=null,PN):KCe(u=+E[0][0],l=+E[0][1],c=+E[1][0],f=+E[1][1]),b()):u==null?null:[[u,l],[c,f]]},w.scale=function(E){return arguments.length?(e=+E,b()):e},w.translate=function(E){return arguments.length?(t=+E[0],n=+E[1],b()):[t,n]},w.angle=function(E){return arguments.length?(s=E%360*Er,a=xn(s),o=Cn(s),b()):s*So},w.reflectX=function(E){return arguments.length?(r=E?-1:1,b()):r<0},w.reflectY=function(E){return arguments.length?(i=E?-1:1,b()):i<0},w.fitExtent=function(E,T){return e9(w,E,T)},w.fitSize=function(E,T){return qZ(w,E,T)},w.fitWidth=function(E,T){return WZ(w,E,T)},w.fitHeight=function(E,T){return GZ(w,E,T)},w}function gAe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}gAe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Gr(i)>An&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Cgt(){return ag(gAe).scale(175.295)}function yAe(e,t){return[Cn(t)*xn(e),xn(t)]}yAe.invert=l3(Zc);function Agt(){return ag(yAe).scale(249.5).clipAngle(90+An)}function vAe(e,t){var n=Cn(t),r=1+Cn(e)*n;return[n*xn(e)/r,xn(t)/r]}vAe.invert=l3(function(e){return 2*GA(e)});function Igt(){return ag(vAe).scale(250).clipAngle(142)}function bAe(e,t){return[bF(zZ((ao+t)/2)),-e]}bAe.invert=function(e,t){return[-t,2*GA(PCe(e))-ao]};function kgt(){var e=hAe(bAe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Rgt(e,t){return e.parent===t.parent?1:2}function Dgt(e){return e.reduce(Ngt,0)/e.length}function Ngt(e,t){return e+t.x}function Pgt(e){return 1+e.reduce(Ogt,0)}function Ogt(e,t){return Math.max(e,t.y)}function Mgt(e){for(var t;t=e.children;)e=t[0];return e}function Lgt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function $gt(){var e=Rgt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Dgt(h),d.y=Pgt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=Mgt(s),l=Lgt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Fgt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Bgt(){return this.eachAfter(Fgt)}function jgt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Ugt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function zgt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Vgt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Hgt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function qgt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Wgt(e){for(var t=this,n=Ggt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Ggt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Ygt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Kgt(){return Array.from(this)}function Xgt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Qgt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Jgt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function n9(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=tyt)):t===void 0&&(t=eyt);for(var n=new SC(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new SC(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(xAe)}function Zgt(){return n9(this).eachBefore(nyt)}function eyt(e){return e.children}function tyt(e){return Array.isArray(e)?e[1]:null}function nyt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function xAe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function SC(e){this.data=e,this.depth=this.height=0,this.parent=null}SC.prototype=n9.prototype={constructor:SC,count:Bgt,each:jgt,eachAfter:zgt,eachBefore:Ugt,find:Vgt,sum:Hgt,sort:qgt,path:Wgt,ancestors:Ygt,descendants:Kgt,leaves:Xgt,links:Qgt,copy:Zgt,[Symbol.iterator]:Jgt};function qL(e){return e==null?null:_Ae(e)}function _Ae(e){if(typeof e!="function")throw new Error;return e}function ow(){return 0}function s2(e){return function(){return e}}const ryt=1664525,iyt=1013904223,bhe=4294967296;function syt(){let e=1;return()=>(e=(ryt*e+iyt)%bhe)/bhe}function oyt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ayt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function uyt(e,t){for(var n=0,r=(e=ayt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&wAe(o,s)?++n:(o=cyt(i=lyt(i,s)),n=0);return o}function lyt(e,t){var n,r;if(cV(t,e))return[t];for(n=0;n<e.length;++n)if(o6(t,e[n])&&cV(ZR(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(o6(ZR(e[n],e[r]),t)&&o6(ZR(e[n],t),e[r])&&o6(ZR(e[r],t),e[n])&&cV(EAe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function o6(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function wAe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function cV(e,t){for(var n=0;n<t.length;++n)if(!wAe(e,t[n]))return!1;return!0}function cyt(e){switch(e.length){case 1:return fyt(e[0]);case 2:return ZR(e[0],e[1]);case 3:return EAe(e[0],e[1],e[2])}}function fyt(e){return{x:e.x,y:e.y,r:e.r}}function ZR(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function EAe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,v=f-s,b=r*r+i*i-s*s,w=b-o*o-a*a+u*u,E=b-l*l-c*c+f*f,T=h*p-d*m,C=(p*E-m*w)/(T*2)-r,I=(m*g-p*v)/T,R=(h*w-d*E)/(T*2)-i,N=(d*v-h*g)/T,O=I*I+N*N-1,L=2*(s+C*I+R*N),B=C*C+R*R-s*s,F=-(Math.abs(O)>1e-6?(L+Math.sqrt(L*L-4*O*B))/(2*O):B/L);return{x:r+C+I*F,y:i+R+N*F,r:F}}function xhe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function _he(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function whe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function a6(e){this._=e,this.next=null,this.previous=null}function dyt(e,t){if(!(s=(e=oyt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;xhe(r,n,i=e[2]),n=new a6(n),r=new a6(r),i=new a6(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){xhe(n._,r._,i=e[u]),i=new a6(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(_he(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(_he(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=whe(n);(i=i.next)!==r;)(a=whe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=uyt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function hyt(e){return Math.sqrt(e.value)}function TAe(){var e=null,t=1,n=1,r=ow;function i(s){const o=syt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Ehe(e)).eachAfter(fV(r,.5,o)).eachBefore(The(1)):s.eachBefore(Ehe(hyt)).eachAfter(fV(ow,1,o)).eachAfter(fV(r,s.r/Math.min(t,n),o)).eachBefore(The(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=qL(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:s2(+s),i):r},i}function Ehe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function fV(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=dyt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function The(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function SAe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function c3(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function pyt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(SAe),o}function s(o,a){return function(u){u.children&&c3(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var myt={depth:-1},She={},dV={};function gyt(e){return e.id}function yyt(e){return e.parentId}function Che(){var e=gyt,t=yyt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const v=s.map((E,T)=>vyt(n(E,T,i))),b=v.map(Ahe),w=new Set(v).add("");for(const E of b)w.has(E)||(w.add(E),v.push(E),b.push(Ahe(E)),s.push(dV));o=(E,T)=>v[T],a=(E,T)=>b[T]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new SC(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?She:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===She)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===dV&&f.children.length===1;)f=f.children[0],--u;for(let v=s.length-1;v>=0&&(h=s[v],h.data===dV);--v)h.data=null}if(f.parent=myt,f.eachBefore(function(v){v.depth=v.parent.depth+1,--u}).eachBefore(xAe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=qL(i),r):e},r.parentId=function(i){return arguments.length?(t=qL(i),r):t},r.path=function(i){return arguments.length?(n=qL(i),r):n},r}function vyt(e){e=`${e}`;let t=e.length;return RG(e,t-1)&&!RG(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Ahe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!RG(e,t););return e.slice(0,t)}function RG(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function byt(e,t){return e.parent===t.parent?1:2}function hV(e){var t=e.children;return t?t[0]:e.t}function pV(e){var t=e.children;return t?t[t.length-1]:e.t}function xyt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function _yt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function wyt(e,t,n){return e.a.parent===t.parent?e.a:n}function WL(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}WL.prototype=Object.create(SC.prototype);function Eyt(e){for(var t=new WL(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new WL(s[o],o)),i.parent=n;return(t.parent=new WL(null,0)).children=[t],t}function Tyt(){var e=byt,t=1,n=1,r=null;function i(l){var c=Eyt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(b){b.x<f.x&&(f=b),b.x>d.x&&(d=b),b.depth>h.depth&&(h=b)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),v=n/(h.depth||1);l.eachBefore(function(b){b.x=(b.x+m)*g,b.y=b.depth*v})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){_yt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,v=h.m,b=p.m,w=m.m,E;p=pV(p),d=hV(d),p&&d;)m=hV(m),h=pV(h),h.a=l,E=p.z+b-d.z-g+e(p._,d._),E>0&&(xyt(wyt(p,l,f),l,E),g+=E,v+=E),b+=p.m,g+=d.m,w+=m.m,v+=h.m;p&&!pV(h)&&(h.t=p,h.m+=b-v),d&&!hV(m)&&(m.t=d,m.m+=g-w,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function r9(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var CAe=(1+Math.sqrt(5))/2;function AAe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,v,b,w,E,T,C;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(v=b=g,T=Math.max(p/h,h/p)/(m*e),C=g*g*T,E=Math.max(b/C,C/v);f<d;++f){if(g+=l=a[f].value,l<v&&(v=l),l>b&&(b=l),C=g*g*T,w=Math.max(b/C,C/v),w>E){g-=l;break}E=w}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?c3(u,n,r,i,m?r+=p*g/m:s):r9(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const IAe=function e(t){function n(r,i,s,o,a){AAe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(CAe);function Syt(){var e=IAe,t=!1,n=1,r=1,i=[0],s=ow,o=ow,a=ow,u=ow,l=ow;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(SAe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,v=d.y1-h;g<p&&(p=g=(p+g)/2),v<m&&(m=v=(m+v)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=v,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,v-=u(d)-h,g<p&&(p=g=(p+g)/2),v<m&&(m=v=(m+v)/2),e(d,p,m,g,v))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=_Ae(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:s2(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:s2(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:s2(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:s2(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:s2(+d),c):l},c}function Cyt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,v){if(f>=d-1){var b=s[f];b.x0=p,b.y0=m,b.x1=g,b.y1=v;return}for(var w=l[f],E=h/2+w,T=f+1,C=d-1;T<C;){var I=T+C>>>1;l[I]<E?T=I+1:C=I}E-l[T-1]<l[T]-E&&f+1<T&&--T;var R=l[T]-w,N=h-R;if(g-p>v-m){var O=h?(p*N+g*R)/h:g;c(f,T,R,p,m,O,v),c(T,d,N,O,m,g,v)}else{var L=h?(m*N+v*R)/h:v;c(f,T,R,p,m,g,L),c(T,d,N,p,L,g,v)}}}function Ayt(e,t,n,r,i){(e.depth&1?r9:c3)(e,t,n,r,i)}const Iyt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?c3(l,i,s,o,m?s+=(a-s)*l.value/m:a):r9(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=AAe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(CAe);function tm(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function wx(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const DG=Symbol("implicit");function Ex(){var e=new ude,t=[],n=[],r=DG;function i(s){let o=e.get(s);if(o===void 0){if(r!==DG)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new ude;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Ex(t,n).unknown(r)},tm.apply(i,arguments),i}function YA(){var e=Ex().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=qc(d).map(function(v){return p+s*v});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return YA(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},tm.apply(f(),arguments)}function kyt(e){return function(){return e}}function NG(e){return+e}var Ihe=[0,1];function Wc(e){return e}function PG(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:kyt(isNaN(t)?NaN:.5)}function Ryt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Dyt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=PG(i,r),s=n(o,s)):(r=PG(r,i),s=n(s,o)),function(a){return s(r(a))}}function Nyt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=PG(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=Cb(e,a,1,r)-1;return s[u](i[u](a))}}function f3(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function i9(){var e=Ihe,t=Ihe,n=S1,r,i,s,o=Wc,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Wc&&(o=Ryt(e[0],e[d-1])),a=d>2?Nyt:Dyt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),Qd)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,NG),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=o3,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Wc,c()):o!==Wc},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function kAe(){return i9()(Wc,Wc)}function RAe(e,t,n,r){var i=Ab(e,t,n),s;switch(r=Jw(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=DCe(i,o))&&(r.precision=s),UZ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=NCe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=RCe(i))&&(r.precision=s-(r.type==="%")*2);break}}return _x(r)}function zE(e){var t=e.domain;return e.ticks=function(n){var r=t();return qW(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return RAe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=WW(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function ef(){var e=kAe();return e.copy=function(){return f3(e,ef())},tm.apply(e,arguments),zE(e)}function DAe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,NG),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return DAe(e).unknown(t)},e=arguments.length?Array.from(e,NG):[0,1],zE(n)}function NAe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function khe(e){return Math.log(e)}function Rhe(e){return Math.exp(e)}function Pyt(e){return-Math.log(-e)}function Oyt(e){return-Math.exp(-e)}function Myt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Lyt(e){return e===10?Myt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function $yt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Dhe(e){return(t,n)=>-e(-t,n)}function KZ(e){const t=e(khe,Rhe),n=t.domain;let r=10,i,s;function o(){return i=$yt(r),s=Lyt(r),n()[0]<0?(i=Dhe(i),s=Dhe(s),e(Pyt,Oyt)):e(khe,Rhe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let v=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;v.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;v.push(m)}v.length*2<g&&(v=qW(l,c,g))}else v=qW(d,h,Math.min(h-d,g)).map(s);return f?v.reverse():v},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=Jw(u)).precision==null&&(u.trim=!0),u=_x(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(NAe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function PAe(){const e=KZ(i9()).domain([1,10]);return e.copy=()=>f3(e,PAe()).base(e.base()),tm.apply(e,arguments),e}function Nhe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Phe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function XZ(e){var t=1,n=e(Nhe(t),Phe(t));return n.constant=function(r){return arguments.length?e(Nhe(t=+r),Phe(t)):t},zE(n)}function OAe(){var e=XZ(i9());return e.copy=function(){return f3(e,OAe()).constant(e.constant())},tm.apply(e,arguments)}function Ohe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Fyt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Byt(e){return e<0?-e*e:e*e}function QZ(e){var t=e(Wc,Wc),n=1;function r(){return n===1?e(Wc,Wc):n===.5?e(Fyt,Byt):e(Ohe(n),Ohe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},zE(t)}function JZ(){var e=QZ(i9());return e.copy=function(){return f3(e,JZ()).exponent(e.exponent())},tm.apply(e,arguments),e}function jyt(){return JZ.apply(null,arguments).exponent(.5)}function MAe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=T2e(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[Cb(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Fy),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return MAe().domain(e).range(t).unknown(r)},tm.apply(s,arguments)}function LAe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[Cb(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return LAe().domain([e,t]).range(i).unknown(s)},tm.apply(zE(o),arguments)}function $Ae(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[Cb(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return $Ae().domain(e).range(t).unknown(n)},tm.apply(i,arguments)}const mV=new Date,gV=new Date;function va(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>va(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(mV.setTime(+s),gV.setTime(+o),e(mV),e(gV),Math.floor(n(mV,gV))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const CC=va(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);CC.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?va(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):CC);CC.range;const Sy=1e3,rh=Sy*60,Cy=rh*60,n1=Cy*24,ZZ=n1*7,Mhe=n1*30,yV=n1*365,Ay=va(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Sy)},(e,t)=>(t-e)/Sy,e=>e.getUTCSeconds());Ay.range;const s9=va(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Sy)},(e,t)=>{e.setTime(+e+t*rh)},(e,t)=>(t-e)/rh,e=>e.getMinutes());s9.range;const o9=va(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*rh)},(e,t)=>(t-e)/rh,e=>e.getUTCMinutes());o9.range;const a9=va(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Sy-e.getMinutes()*rh)},(e,t)=>{e.setTime(+e+t*Cy)},(e,t)=>(t-e)/Cy,e=>e.getHours());a9.range;const u9=va(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Cy)},(e,t)=>(t-e)/Cy,e=>e.getUTCHours());u9.range;const Uy=va(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*rh)/n1,e=>e.getDate()-1);Uy.range;const ub=va(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/n1,e=>e.getUTCDate()-1);ub.range;const FAe=va(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/n1,e=>Math.floor(e/n1));FAe.range;function VE(e){return va(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*rh)/ZZ)}const KA=VE(0),UF=VE(1),Uyt=VE(2),zyt=VE(3),AC=VE(4),Vyt=VE(5),Hyt=VE(6);KA.range;UF.range;Uyt.range;zyt.range;AC.range;Vyt.range;Hyt.range;function HE(e){return va(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/ZZ)}const XA=HE(0),zF=HE(1),qyt=HE(2),Wyt=HE(3),IC=HE(4),Gyt=HE(5),Yyt=HE(6);XA.range;zF.range;qyt.range;Wyt.range;IC.range;Gyt.range;Yyt.range;const LN=va(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());LN.range;const $N=va(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());$N.range;const F0=va(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());F0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:va(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});F0.range;const B0=va(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());B0.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:va(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});B0.range;function BAe(e,t,n,r,i,s){const o=[[Ay,1,Sy],[Ay,5,5*Sy],[Ay,15,15*Sy],[Ay,30,30*Sy],[s,1,rh],[s,5,5*rh],[s,15,15*rh],[s,30,30*rh],[i,1,Cy],[i,3,3*Cy],[i,6,6*Cy],[i,12,12*Cy],[r,1,n1],[r,2,2*n1],[n,1,ZZ],[t,1,Mhe],[t,3,3*Mhe],[e,1,yV]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=qA(([,,g])=>g).right(o,d);if(h===o.length)return e.every(Ab(l/yV,c/yV,f));if(h===0)return CC.every(Math.max(Ab(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Kyt,Xyt]=BAe(B0,$N,XA,FAe,u9,o9),[Qyt,Jyt]=BAe(F0,LN,KA,Uy,a9,s9);function vV(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function bV(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sR(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function jAe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=oR(i),c=aR(i),f=oR(s),d=aR(s),h=oR(o),p=aR(o),m=oR(a),g=aR(a),v=oR(u),b=aR(u),w={a:ne,A:Z,b:ie,B:q,c:null,d:Uhe,e:Uhe,f:_1t,g:D1t,G:P1t,H:v1t,I:b1t,j:x1t,L:UAe,m:w1t,M:E1t,p:U,q:G,Q:Hhe,s:qhe,S:T1t,u:S1t,U:C1t,V:A1t,w:I1t,W:k1t,x:null,X:null,y:R1t,Y:N1t,Z:O1t,"%":Vhe},E={a:V,A:Y,b:ee,B:ae,c:null,d:zhe,e:zhe,f:F1t,g:Y1t,G:X1t,H:M1t,I:L1t,j:$1t,L:VAe,m:B1t,M:j1t,p:_e,q:pe,Q:Hhe,s:qhe,S:U1t,u:z1t,U:V1t,V:H1t,w:q1t,W:W1t,x:null,X:null,y:G1t,Y:K1t,Z:Q1t,"%":Vhe},T={a:O,A:L,b:B,B:F,c:H,d:Bhe,e:Bhe,f:p1t,g:Fhe,G:$he,H:jhe,I:jhe,j:c1t,L:h1t,m:l1t,M:f1t,p:N,q:u1t,Q:g1t,s:y1t,S:d1t,u:r1t,U:i1t,V:s1t,w:n1t,W:o1t,x:Q,X:J,y:Fhe,Y:$he,Z:a1t,"%":m1t};w.x=C(n,w),w.X=C(r,w),w.c=C(t,w),E.x=C(n,E),E.X=C(r,E),E.c=C(t,E);function C(Te,Le){return function(ye){var he=[],$e=-1,De=0,tt=Te.length,it,Me,Ge;for(ye instanceof Date||(ye=new Date(+ye));++$e<tt;)Te.charCodeAt($e)===37&&(he.push(Te.slice(De,$e)),(Me=Lhe[it=Te.charAt(++$e)])!=null?it=Te.charAt(++$e):Me=it==="e"?" ":"0",(Ge=Le[it])&&(it=Ge(ye,Me)),he.push(it),De=$e+1);return he.push(Te.slice(De,$e)),he.join("")}}function I(Te,Le){return function(ye){var he=sR(1900,void 0,1),$e=R(he,Te,ye+="",0),De,tt;if($e!=ye.length)return null;if("Q"in he)return new Date(he.Q);if("s"in he)return new Date(he.s*1e3+("L"in he?he.L:0));if(Le&&!("Z"in he)&&(he.Z=0),"p"in he&&(he.H=he.H%12+he.p*12),he.m===void 0&&(he.m="q"in he?he.q:0),"V"in he){if(he.V<1||he.V>53)return null;"w"in he||(he.w=1),"Z"in he?(De=bV(sR(he.y,0,1)),tt=De.getUTCDay(),De=tt>4||tt===0?zF.ceil(De):zF(De),De=ub.offset(De,(he.V-1)*7),he.y=De.getUTCFullYear(),he.m=De.getUTCMonth(),he.d=De.getUTCDate()+(he.w+6)%7):(De=vV(sR(he.y,0,1)),tt=De.getDay(),De=tt>4||tt===0?UF.ceil(De):UF(De),De=Uy.offset(De,(he.V-1)*7),he.y=De.getFullYear(),he.m=De.getMonth(),he.d=De.getDate()+(he.w+6)%7)}else("W"in he||"U"in he)&&("w"in he||(he.w="u"in he?he.u%7:"W"in he?1:0),tt="Z"in he?bV(sR(he.y,0,1)).getUTCDay():vV(sR(he.y,0,1)).getDay(),he.m=0,he.d="W"in he?(he.w+6)%7+he.W*7-(tt+5)%7:he.w+he.U*7-(tt+6)%7);return"Z"in he?(he.H+=he.Z/100|0,he.M+=he.Z%100,bV(he)):vV(he)}}function R(Te,Le,ye,he){for(var $e=0,De=Le.length,tt=ye.length,it,Me;$e<De;){if(he>=tt)return-1;if(it=Le.charCodeAt($e++),it===37){if(it=Le.charAt($e++),Me=T[it in Lhe?Le.charAt($e++):it],!Me||(he=Me(Te,ye,he))<0)return-1}else if(it!=ye.charCodeAt(he++))return-1}return he}function N(Te,Le,ye){var he=l.exec(Le.slice(ye));return he?(Te.p=c.get(he[0].toLowerCase()),ye+he[0].length):-1}function O(Te,Le,ye){var he=h.exec(Le.slice(ye));return he?(Te.w=p.get(he[0].toLowerCase()),ye+he[0].length):-1}function L(Te,Le,ye){var he=f.exec(Le.slice(ye));return he?(Te.w=d.get(he[0].toLowerCase()),ye+he[0].length):-1}function B(Te,Le,ye){var he=v.exec(Le.slice(ye));return he?(Te.m=b.get(he[0].toLowerCase()),ye+he[0].length):-1}function F(Te,Le,ye){var he=m.exec(Le.slice(ye));return he?(Te.m=g.get(he[0].toLowerCase()),ye+he[0].length):-1}function H(Te,Le,ye){return R(Te,t,Le,ye)}function Q(Te,Le,ye){return R(Te,n,Le,ye)}function J(Te,Le,ye){return R(Te,r,Le,ye)}function ne(Te){return o[Te.getDay()]}function Z(Te){return s[Te.getDay()]}function ie(Te){return u[Te.getMonth()]}function q(Te){return a[Te.getMonth()]}function U(Te){return i[+(Te.getHours()>=12)]}function G(Te){return 1+~~(Te.getMonth()/3)}function V(Te){return o[Te.getUTCDay()]}function Y(Te){return s[Te.getUTCDay()]}function ee(Te){return u[Te.getUTCMonth()]}function ae(Te){return a[Te.getUTCMonth()]}function _e(Te){return i[+(Te.getUTCHours()>=12)]}function pe(Te){return 1+~~(Te.getUTCMonth()/3)}return{format:function(Te){var Le=C(Te+="",w);return Le.toString=function(){return Te},Le},parse:function(Te){var Le=I(Te+="",!1);return Le.toString=function(){return Te},Le},utcFormat:function(Te){var Le=C(Te+="",E);return Le.toString=function(){return Te},Le},utcParse:function(Te){var Le=I(Te+="",!0);return Le.toString=function(){return Te},Le}}}var Lhe={"-":"",_:" ",0:"0"},Ya=/^\s*\d+/,Zyt=/^%/,e1t=/[\\^$*+?|[\]().{}]/g;function vi(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function t1t(e){return e.replace(e1t,"\\$&")}function oR(e){return new RegExp("^(?:"+e.map(t1t).join("|")+")","i")}function aR(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function n1t(e,t,n){var r=Ya.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function r1t(e,t,n){var r=Ya.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function i1t(e,t,n){var r=Ya.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function s1t(e,t,n){var r=Ya.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function o1t(e,t,n){var r=Ya.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function $he(e,t,n){var r=Ya.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Fhe(e,t,n){var r=Ya.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function a1t(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function u1t(e,t,n){var r=Ya.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function l1t(e,t,n){var r=Ya.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Bhe(e,t,n){var r=Ya.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function c1t(e,t,n){var r=Ya.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function jhe(e,t,n){var r=Ya.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function f1t(e,t,n){var r=Ya.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function d1t(e,t,n){var r=Ya.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function h1t(e,t,n){var r=Ya.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function p1t(e,t,n){var r=Ya.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function m1t(e,t,n){var r=Zyt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function g1t(e,t,n){var r=Ya.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function y1t(e,t,n){var r=Ya.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Uhe(e,t){return vi(e.getDate(),t,2)}function v1t(e,t){return vi(e.getHours(),t,2)}function b1t(e,t){return vi(e.getHours()%12||12,t,2)}function x1t(e,t){return vi(1+Uy.count(F0(e),e),t,3)}function UAe(e,t){return vi(e.getMilliseconds(),t,3)}function _1t(e,t){return UAe(e,t)+"000"}function w1t(e,t){return vi(e.getMonth()+1,t,2)}function E1t(e,t){return vi(e.getMinutes(),t,2)}function T1t(e,t){return vi(e.getSeconds(),t,2)}function S1t(e){var t=e.getDay();return t===0?7:t}function C1t(e,t){return vi(KA.count(F0(e)-1,e),t,2)}function zAe(e){var t=e.getDay();return t>=4||t===0?AC(e):AC.ceil(e)}function A1t(e,t){return e=zAe(e),vi(AC.count(F0(e),e)+(F0(e).getDay()===4),t,2)}function I1t(e){return e.getDay()}function k1t(e,t){return vi(UF.count(F0(e)-1,e),t,2)}function R1t(e,t){return vi(e.getFullYear()%100,t,2)}function D1t(e,t){return e=zAe(e),vi(e.getFullYear()%100,t,2)}function N1t(e,t){return vi(e.getFullYear()%1e4,t,4)}function P1t(e,t){var n=e.getDay();return e=n>=4||n===0?AC(e):AC.ceil(e),vi(e.getFullYear()%1e4,t,4)}function O1t(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+vi(t/60|0,"0",2)+vi(t%60,"0",2)}function zhe(e,t){return vi(e.getUTCDate(),t,2)}function M1t(e,t){return vi(e.getUTCHours(),t,2)}function L1t(e,t){return vi(e.getUTCHours()%12||12,t,2)}function $1t(e,t){return vi(1+ub.count(B0(e),e),t,3)}function VAe(e,t){return vi(e.getUTCMilliseconds(),t,3)}function F1t(e,t){return VAe(e,t)+"000"}function B1t(e,t){return vi(e.getUTCMonth()+1,t,2)}function j1t(e,t){return vi(e.getUTCMinutes(),t,2)}function U1t(e,t){return vi(e.getUTCSeconds(),t,2)}function z1t(e){var t=e.getUTCDay();return t===0?7:t}function V1t(e,t){return vi(XA.count(B0(e)-1,e),t,2)}function HAe(e){var t=e.getUTCDay();return t>=4||t===0?IC(e):IC.ceil(e)}function H1t(e,t){return e=HAe(e),vi(IC.count(B0(e),e)+(B0(e).getUTCDay()===4),t,2)}function q1t(e){return e.getUTCDay()}function W1t(e,t){return vi(zF.count(B0(e)-1,e),t,2)}function G1t(e,t){return vi(e.getUTCFullYear()%100,t,2)}function Y1t(e,t){return e=HAe(e),vi(e.getUTCFullYear()%100,t,2)}function K1t(e,t){return vi(e.getUTCFullYear()%1e4,t,4)}function X1t(e,t){var n=e.getUTCDay();return e=n>=4||n===0?IC(e):IC.ceil(e),vi(e.getUTCFullYear()%1e4,t,4)}function Q1t(){return"+0000"}function Vhe(){return"%"}function Hhe(e){return+e}function qhe(e){return Math.floor(+e/1e3)}var BS,eee,qAe,d3,WAe;J1t({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function J1t(e){return BS=jAe(e),eee=BS.format,qAe=BS.parse,d3=BS.utcFormat,WAe=BS.utcParse,BS}function Z1t(e){return new Date(e)}function evt(e){return e instanceof Date?+e:+new Date(+e)}function tee(e,t,n,r,i,s,o,a,u,l){var c=kAe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),b=l("%b %d"),w=l("%B"),E=l("%Y");function T(C){return(u(C)<C?h:a(C)<C?p:o(C)<C?m:s(C)<C?g:r(C)<C?i(C)<C?v:b:n(C)<C?w:E)(C)}return c.invert=function(C){return new Date(f(C))},c.domain=function(C){return arguments.length?d(Array.from(C,evt)):d().map(Z1t)},c.ticks=function(C){var I=d();return e(I[0],I[I.length-1],C??10)},c.tickFormat=function(C,I){return I==null?T:l(I)},c.nice=function(C){var I=d();return(!C||typeof C.range!="function")&&(C=t(I[0],I[I.length-1],C??10)),C?d(NAe(I,C)):c},c.copy=function(){return f3(c,tee(e,t,n,r,i,s,o,a,u,l))},c}function nee(){return tm.apply(tee(Qyt,Jyt,F0,LN,KA,Uy,a9,s9,Ay,eee).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function tvt(){return tm.apply(tee(Kyt,Xyt,B0,$N,XA,ub,u9,o9,Ay,d3).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function l9(){var e=0,t=1,n,r,i,s,o=Wc,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(S1),l.rangeRound=c(o3),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Tx(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ree(){var e=zE(l9()(Wc));return e.copy=function(){return Tx(e,ree())},wx.apply(e,arguments)}function GAe(){var e=KZ(l9()).domain([1,10]);return e.copy=function(){return Tx(e,GAe()).base(e.base())},wx.apply(e,arguments)}function YAe(){var e=XZ(l9());return e.copy=function(){return Tx(e,YAe()).constant(e.constant())},wx.apply(e,arguments)}function iee(){var e=QZ(l9());return e.copy=function(){return Tx(e,iee()).exponent(e.exponent())},wx.apply(e,arguments)}function nvt(){return iee.apply(null,arguments).exponent(.5)}function c9(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Wc,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var v,b,w;return arguments.length?([v,b,w]=g,l=DZ(m,[v,b,w]),h):[l(0),l(.5),l(1)]}}return h.range=p(S1),h.rangeRound=p(o3),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function KAe(){var e=zE(c9()(Wc));return e.copy=function(){return Tx(e,KAe())},wx.apply(e,arguments)}function XAe(){var e=KZ(c9()).domain([.1,1,10]);return e.copy=function(){return Tx(e,XAe()).base(e.base())},wx.apply(e,arguments)}function QAe(){var e=XZ(c9());return e.copy=function(){return Tx(e,QAe()).constant(e.constant())},wx.apply(e,arguments)}function see(){var e=QZ(c9());return e.copy=function(){return Tx(e,see()).exponent(e.exponent())},wx.apply(e,arguments)}function rvt(){return see.apply(null,arguments).exponent(.5)}function nm(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const ivt=nm("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),svt=nm("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),ovt=nm("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),avt=nm("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),uvt=nm("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),lvt=nm("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),cvt=nm("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),fvt=nm("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),dvt=nm("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),hvt=nm("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),f9=nm("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function mr(e){return function(){return e}}const Whe=Math.abs,qu=Math.atan2,k_=Math.cos,pvt=Math.max,xV=Math.min,Lm=Math.sin,_w=Math.sqrt,Yu=1e-12,kC=Math.PI,VF=kC/2,WD=2*kC;function mvt(e){return e>1?0:e<-1?kC:Math.acos(e)}function Ghe(e){return e>=1?VF:e<=-1?-VF:Math.asin(e)}function d9(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new LZ(t)}function gvt(e){return e.innerRadius}function yvt(e){return e.outerRadius}function vvt(e){return e.startAngle}function bvt(e){return e.endAngle}function xvt(e){return e&&e.padAngle}function _vt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Yu))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function u6(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/_w(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,v=(h+m)/2,b=p-d,w=m-h,E=b*b+w*w,T=i-s,C=d*m-p*h,I=(w<0?-1:1)*_w(pvt(0,T*T*E-C*C)),R=(C*w-b*I)/E,N=(-C*b-w*I)/E,O=(C*w+b*I)/E,L=(-C*b+w*I)/E,B=R-g,F=N-v,H=O-g,Q=L-v;return B*B+F*F>H*H+Q*Q&&(R=O,N=L),{cx:R,cy:N,x01:-c,y01:-f,x11:R*(i/T-1),y11:N*(i/T-1)}}function OG(){var e=gvt,t=yvt,n=mr(0),r=null,i=vvt,s=bvt,o=xvt,a=null,u=d9(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-VF,m=s.apply(this,arguments)-VF,g=Whe(m-p),v=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Yu))a.moveTo(0,0);else if(g>WD-Yu)a.moveTo(h*k_(p),h*Lm(p)),a.arc(0,0,h,p,m,!v),d>Yu&&(a.moveTo(d*k_(m),d*Lm(m)),a.arc(0,0,d,m,p,v));else{var b=p,w=m,E=p,T=m,C=g,I=g,R=o.apply(this,arguments)/2,N=R>Yu&&(r?+r.apply(this,arguments):_w(d*d+h*h)),O=xV(Whe(h-d)/2,+n.apply(this,arguments)),L=O,B=O,F,H;if(N>Yu){var Q=Ghe(N/d*Lm(R)),J=Ghe(N/h*Lm(R));(C-=Q*2)>Yu?(Q*=v?1:-1,E+=Q,T-=Q):(C=0,E=T=(p+m)/2),(I-=J*2)>Yu?(J*=v?1:-1,b+=J,w-=J):(I=0,b=w=(p+m)/2)}var ne=h*k_(b),Z=h*Lm(b),ie=d*k_(T),q=d*Lm(T);if(O>Yu){var U=h*k_(w),G=h*Lm(w),V=d*k_(E),Y=d*Lm(E),ee;if(g<kC)if(ee=_vt(ne,Z,V,Y,U,G,ie,q)){var ae=ne-ee[0],_e=Z-ee[1],pe=U-ee[0],Te=G-ee[1],Le=1/Lm(mvt((ae*pe+_e*Te)/(_w(ae*ae+_e*_e)*_w(pe*pe+Te*Te)))/2),ye=_w(ee[0]*ee[0]+ee[1]*ee[1]);L=xV(O,(d-ye)/(Le-1)),B=xV(O,(h-ye)/(Le+1))}else L=B=0}I>Yu?B>Yu?(F=u6(V,Y,ne,Z,h,B,v),H=u6(U,G,ie,q,h,B,v),a.moveTo(F.cx+F.x01,F.cy+F.y01),B<O?a.arc(F.cx,F.cy,B,qu(F.y01,F.x01),qu(H.y01,H.x01),!v):(a.arc(F.cx,F.cy,B,qu(F.y01,F.x01),qu(F.y11,F.x11),!v),a.arc(0,0,h,qu(F.cy+F.y11,F.cx+F.x11),qu(H.cy+H.y11,H.cx+H.x11),!v),a.arc(H.cx,H.cy,B,qu(H.y11,H.x11),qu(H.y01,H.x01),!v))):(a.moveTo(ne,Z),a.arc(0,0,h,b,w,!v)):a.moveTo(ne,Z),!(d>Yu)||!(C>Yu)?a.lineTo(ie,q):L>Yu?(F=u6(ie,q,U,G,d,-L,v),H=u6(ne,Z,V,Y,d,-L,v),a.lineTo(F.cx+F.x01,F.cy+F.y01),L<O?a.arc(F.cx,F.cy,L,qu(F.y01,F.x01),qu(H.y01,H.x01),!v):(a.arc(F.cx,F.cy,L,qu(F.y01,F.x01),qu(F.y11,F.x11),!v),a.arc(0,0,d,qu(F.cy+F.y11,F.cx+F.x11),qu(H.cy+H.y11,H.cx+H.x11),v),a.arc(H.cx,H.cy,L,qu(H.y11,H.x11),qu(H.y01,H.x01),!v))):a.arc(0,0,d,T,E,v)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-kC/2;return[k_(f)*c,Lm(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:mr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:mr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:mr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:mr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:mr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:mr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:mr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function h9(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JAe(e){this._context=e}JAe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function oee(e){return new JAe(e)}function ZAe(e){return e[0]}function eIe(e){return e[1]}function tIe(e,t){var n=mr(!0),r=null,i=oee,s=null,o=d9(a);e=typeof e=="function"?e:e===void 0?ZAe:mr(e),t=typeof t=="function"?t:t===void 0?eIe:mr(t);function a(u){var l,c=(u=h9(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:mr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:mr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:mr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function nIe(e,t,n){var r=null,i=mr(!0),s=null,o=oee,a=null,u=d9(l);e=typeof e=="function"?e:e===void 0?ZAe:mr(+e),t=typeof t=="function"?t:mr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?eIe:mr(+n);function l(f){var d,h,p,m=(f=h9(f)).length,g,v=!1,b,w=new Array(m),E=new Array(m);for(s==null&&(a=o(b=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===v)if(v=!v)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(w[p],E[p]);a.lineEnd(),a.areaEnd()}v&&(w[d]=+e(g,d,f),E[d]=+t(g,d,f),a.point(r?+r(g,d,f):w[d],n?+n(g,d,f):E[d]))}if(b)return a=null,b+""||null}function c(){return tIe().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:mr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:mr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:mr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:mr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:mr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:mr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:mr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function wvt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Evt(e){return e}function Tvt(){var e=Evt,t=wvt,n=null,r=mr(0),i=mr(WD),s=mr(0);function o(a){var u,l=(a=h9(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(WD,Math.max(-WD,i.apply(this,arguments)-m)),v,b=Math.min(Math.abs(g)/l,s.apply(this,arguments)),w=b*(g<0?-1:1),E;for(u=0;u<l;++u)(E=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=E);for(t!=null?h.sort(function(T,C){return t(p[T],p[C])}):n!=null&&h.sort(function(T,C){return n(a[T],a[C])}),u=0,f=d?(g-l*w)/d:0;u<l;++u,m=v)c=h[u],E=p[c],v=m+(E>0?E*f:0)+w,p[c]={data:a[c],index:u,value:E,startAngle:m,endAngle:v,padAngle:b};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:mr(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:mr(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:mr(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:mr(+a),o):s},o}const Svt={draw(e,t){const n=_w(t/kC);e.moveTo(n,0),e.arc(0,0,n,0,WD)}};function Cvt(e,t){let n=null,r=d9(i);e=typeof e=="function"?e:mr(e||Svt),t=typeof t=="function"?t:mr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:mr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:mr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function kb(){}function HF(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function p9(e){this._context=e}p9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:HF(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:HF(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Avt(e){return new p9(e)}function rIe(e){this._context=e}rIe.prototype={areaStart:kb,areaEnd:kb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:HF(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ivt(e){return new rIe(e)}function iIe(e){this._context=e}iIe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:HF(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kvt(e){return new iIe(e)}function sIe(e,t){this._basis=new p9(e),this._beta=t}sIe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Rvt=function e(t){function n(r){return t===1?new p9(r):new sIe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function qF(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function aee(e,t){this._context=e,this._k=(1-t)/6}aee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:qF(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:qF(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Dvt=function e(t){function n(r){return new aee(r,t)}return n.tension=function(r){return e(+r)},n}(0);function uee(e,t){this._context=e,this._k=(1-t)/6}uee.prototype={areaStart:kb,areaEnd:kb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:qF(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Nvt=function e(t){function n(r){return new uee(r,t)}return n.tension=function(r){return e(+r)},n}(0);function lee(e,t){this._context=e,this._k=(1-t)/6}lee.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qF(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Pvt=function e(t){function n(r){return new lee(r,t)}return n.tension=function(r){return e(+r)},n}(0);function cee(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Yu){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Yu){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function oIe(e,t){this._context=e,this._alpha=t}oIe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:cee(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ovt=function e(t){function n(r){return t?new oIe(r,t):new aee(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function aIe(e,t){this._context=e,this._alpha=t}aIe.prototype={areaStart:kb,areaEnd:kb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:cee(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Mvt=function e(t){function n(r){return t?new aIe(r,t):new uee(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function uIe(e,t){this._context=e,this._alpha=t}uIe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cee(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Lvt=function e(t){function n(r){return t?new uIe(r,t):new lee(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function lIe(e){this._context=e}lIe.prototype={areaStart:kb,areaEnd:kb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function $vt(e){return new lIe(e)}function Yhe(e){return e<0?-1:1}function Khe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Yhe(s)+Yhe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Xhe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function _V(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function WF(e){this._context=e}WF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_V(this,this._t0,Xhe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_V(this,Xhe(this,n=Khe(this,e,t)),n);break;default:_V(this,this._t0,n=Khe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function cIe(e){this._context=new fIe(e)}(cIe.prototype=Object.create(WF.prototype)).point=function(e,t){WF.prototype.point.call(this,t,e)};function fIe(e){this._context=e}fIe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Fvt(e){return new WF(e)}function Bvt(e){return new cIe(e)}function dIe(e){this._context=e}dIe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Qhe(e),i=Qhe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Qhe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function jvt(e){return new dIe(e)}function m9(e,t){this._context=e,this._t=t}m9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Uvt(e){return new m9(e,.5)}function zvt(e){return new m9(e,0)}function Vvt(e){return new m9(e,1)}function Jhe(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Zhe(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Hvt(e,t){return e[t]}function qvt(e){const t=[];return t.key=e,t}function Wvt(){var e=mr([]),t=Zhe,n=Jhe,r=Hvt;function i(s){var o=Array.from(e.apply(this,arguments),qvt),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=h9(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:mr(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:mr(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Zhe:typeof s=="function"?s:mr(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Jhe,i):n},i}function eD(e,t,n){this.k=e,this.x=t,this.y=n}eD.prototype={constructor:eD,scale:function(e){return e===1?this:new eD(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new eD(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};eD.prototype;function xp(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Rb(e){return!!e&&!!e[Ps]}function r1(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===tbt}(e)||Array.isArray(e)||!!e[ope]||!!(!((t=e.constructor)===null||t===void 0)&&t[ope])||fee(e)||dee(e))}function tE(e,t,n){n===void 0&&(n=!1),QA(e)===0?(n?Object.keys:U2)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function QA(e){var t=e[Ps];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:fee(e)?2:dee(e)?3:0}function j2(e,t){return QA(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Gvt(e,t){return QA(e)===2?e.get(t):e[t]}function hIe(e,t,n){var r=QA(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function pIe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function fee(e){return Zvt&&e instanceof Map}function dee(e){return ebt&&e instanceof Set}function K_(e){return e.o||e.t}function hee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=gIe(e);delete t[Ps];for(var n=U2(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function pee(e,t){return t===void 0&&(t=!1),mee(e)||Rb(e)||!r1(e)||(QA(e)>1&&(e.set=e.add=e.clear=e.delete=Yvt),Object.freeze(e),t&&tE(e,function(n,r){return pee(r,!0)},!0)),e}function Yvt(){xp(2)}function mee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function w0(e){var t=FG[e];return t||xp(18,e),t}function Kvt(e,t){FG[e]||(FG[e]=t)}function MG(){return FN}function wV(e,t){t&&(w0("Patches"),e.u=[],e.s=[],e.v=t)}function GF(e){LG(e),e.p.forEach(Xvt),e.p=null}function LG(e){e===FN&&(FN=e.l)}function epe(e){return FN={p:[],l:FN,h:e,m:!0,_:0}}function Xvt(e){var t=e[Ps];t.i===0||t.i===1?t.j():t.g=!0}function EV(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||w0("ES5").S(t,e,r),r?(n[Ps].P&&(GF(t),xp(4)),r1(e)&&(e=YF(t,e),t.l||KF(t,e)),t.u&&w0("Patches").M(n[Ps].t,e,t.u,t.s)):e=YF(t,n,[]),GF(t),t.u&&t.v(t.u,t.s),e!==mIe?e:void 0}function YF(e,t,n){if(mee(t))return t;var r=t[Ps];if(!r)return tE(t,function(a,u){return tpe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return KF(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=hee(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),tE(s,function(a,u){return tpe(e,r,i,a,u,n,o)}),KF(e,i,!1),n&&e.u&&w0("Patches").N(r,n,e.u,e.s)}return r.o}function tpe(e,t,n,r,i,s,o){if(Rb(i)){var a=YF(e,i,s&&t&&t.i!==3&&!j2(t.R,r)?s.concat(r):void 0);if(hIe(n,r,a),!Rb(a))return;e.m=!1}else o&&n.add(i);if(r1(i)&&!mee(i)){if(!e.h.D&&e._<1)return;YF(e,i),t&&t.A.l||KF(e,i)}}function KF(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&pee(t,n)}function TV(e,t){var n=e[Ps];return(n?K_(n):e)[t]}function npe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Vv(e){e.P||(e.P=!0,e.l&&Vv(e.l))}function SV(e){e.o||(e.o=hee(e.t))}function $G(e,t,n){var r=fee(t)?w0("MapSet").F(t,n):dee(t)?w0("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:MG(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=BN;o&&(u=[a],l=tD);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):w0("ES5").J(t,n);return(n?n.A:MG()).p.push(r),r}function Qvt(e){return Rb(e)||xp(22,e),function t(n){if(!r1(n))return n;var r,i=n[Ps],s=QA(n);if(i){if(!i.P&&(i.i<4||!w0("ES5").K(i)))return i.t;i.I=!0,r=rpe(n,s),i.I=!1}else r=rpe(n,s);return tE(r,function(o,a){i&&Gvt(i.t,o)===a||hIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function rpe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return hee(e)}function Jvt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Ps];return BN.get(u,s)},set:function(u){var l=this[Ps];BN.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Ps];if(!a.P)switch(a.i){case 5:r(a)&&Vv(a);break;case 4:n(a)&&Vv(a)}}}function n(s){for(var o=s.t,a=s.k,u=U2(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Ps){var f=o[c];if(f===void 0&&!j2(o,c))return!0;var d=a[c],h=d&&d[Ps];if(h?h.t!==f:!pIe(d,f))return!0}}var p=!!o[Ps];return u.length!==U2(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Kvt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=gIe(f);delete p[Ps];for(var m=U2(p),g=0;g<m.length;g++){var v=m[g];p[v]=e(v,c||!!p[v].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:MG(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Ps,{value:l,writable:!0}),u},S:function(s,o,a){a?Rb(o)&&o[Ps].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Ps];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)tE(d,function(w){w!==Ps&&(f[w]!==void 0||j2(f,w)?h[w]||u(d[w]):(h[w]=!0,Vv(c)))}),tE(f,function(w){d[w]!==void 0||j2(d,w)||(h[w]=!1,Vv(c))});else if(p===5){if(r(c)&&(Vv(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var v=Math.min(d.length,f.length),b=0;b<v;b++)d.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&u(d[b])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var ipe,FN,gee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Zvt=typeof Map<"u",ebt=typeof Set<"u",spe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",mIe=gee?Symbol.for("immer-nothing"):((ipe={})["immer-nothing"]=!0,ipe),ope=gee?Symbol.for("immer-draftable"):"__$immer_draftable",Ps=gee?Symbol.for("immer-state"):"__$immer_state",tbt=""+Object.prototype.constructor,U2=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,gIe=Object.getOwnPropertyDescriptors||function(e){var t={};return U2(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},FG={},BN={get:function(e,t){if(t===Ps)return e;var n=K_(e);if(!j2(n,t))return function(i,s,o){var a,u=npe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!r1(r)?r:r===TV(e.t,t)?(SV(e),e.o[t]=$G(e.A.h,r,e)):r},has:function(e,t){return t in K_(e)},ownKeys:function(e){return Reflect.ownKeys(K_(e))},set:function(e,t,n){var r=npe(K_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=TV(K_(e),t),s=i==null?void 0:i[Ps];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(pIe(n,i)&&(n!==void 0||j2(e.t,t)))return!0;SV(e),Vv(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return TV(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,SV(e),Vv(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=K_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){xp(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){xp(12)}},tD={};tE(BN,function(e,t){tD[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),tD.deleteProperty=function(e,t){return tD.set.call(this,e,t,void 0)},tD.set=function(e,t,n){return BN.set.call(this,e[0],t,n,e[0])};var nbt=function(){function e(n){var r=this;this.O=spe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(m,function(E){var T;return(T=s).call.apply(T,[g,E].concat(b))})}}var l;if(typeof s!="function"&&xp(6),o!==void 0&&typeof o!="function"&&xp(7),r1(i)){var c=epe(r),f=$G(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?GF(c):LG(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return wV(c,o),EV(m,c)},function(m){throw GF(c),m}):(wV(c,o),EV(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===mIe&&(l=void 0),r.D&&pee(l,!0),o){var h=[],p=[];w0("Patches").M(i,l,h,p),o(h,p)}return l}xp(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){r1(n)||xp(8),Rb(n)&&(n=Qvt(n));var r=epe(this),i=$G(this,n,void 0);return i[Ps].C=!0,LG(r),i},t.finishDraft=function(n,r){var i=n&&n[Ps],s=i.A;return wV(s,r),EV(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!spe&&xp(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=w0("Patches").$;return Rb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),dd=new nbt,yIe=dd.produce;dd.produceWithPatches.bind(dd);dd.setAutoFreeze.bind(dd);dd.setUseProxies.bind(dd);dd.applyPatches.bind(dd);dd.createDraft.bind(dd);dd.finishDraft.bind(dd);function jN(e){"@babel/helpers - typeof";return jN=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jN(e)}function rbt(e,t){if(jN(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(jN(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ibt(e){var t=rbt(e,"string");return jN(t)=="symbol"?t:t+""}function sbt(e,t,n){return(t=ibt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ape(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function upe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ape(Object(n),!0).forEach(function(r){sbt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ape(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xu(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var lpe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),CV=function(){return Math.random().toString(36).substring(7).split("").join(".")},XF={INIT:"@@redux/INIT"+CV(),REPLACE:"@@redux/REPLACE"+CV(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+CV()}};function obt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function vIe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Xu(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Xu(1));return n(vIe)(e,t)}if(typeof e!="function")throw new Error(Xu(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Xu(3));return s}function f(m){if(typeof m!="function")throw new Error(Xu(4));if(u)throw new Error(Xu(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Xu(6));g=!1,l();var b=a.indexOf(m);a.splice(b,1),o=null}}}function d(m){if(!obt(m))throw new Error(Xu(7));if(typeof m.type>"u")throw new Error(Xu(8));if(u)throw new Error(Xu(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,v=0;v<g.length;v++){var b=g[v];b()}return m}function h(m){if(typeof m!="function")throw new Error(Xu(10));i=m,d({type:XF.REPLACE})}function p(){var m,g=f;return m={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Xu(11));function w(){b.next&&b.next(c())}w();var E=g(w);return{unsubscribe:E}}},m[lpe]=function(){return this},m}return d({type:XF.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[lpe]=p,r}function abt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:XF.INIT});if(typeof r>"u")throw new Error(Xu(12));if(typeof n(void 0,{type:XF.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Xu(13))})}function ubt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{abt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Xu(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function QF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function lbt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Xu(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=QF.apply(void 0,a)(i.dispatch),upe(upe({},i),{},{dispatch:s})}}}function bIe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var BG=bIe();BG.withExtraArgument=bIe;var xIe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),h3=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},nE=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},cbt=Object.defineProperty,fbt=Object.defineProperties,dbt=Object.getOwnPropertyDescriptors,cpe=Object.getOwnPropertySymbols,hbt=Object.prototype.hasOwnProperty,pbt=Object.prototype.propertyIsEnumerable,fpe=function(e,t,n){return t in e?cbt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},lb=function(e,t){for(var n in t||(t={}))hbt.call(t,n)&&fpe(e,n,t[n]);if(cpe)for(var r=0,i=cpe(t);r<i.length;r++){var n=i[r];pbt.call(t,n)&&fpe(e,n,t[n])}return e},AV=function(e,t){return fbt(e,dbt(t))},p3=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},mbt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?QF:QF.apply(null,arguments)};function _Ie(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var gbt=function(e){return e&&typeof e.match=="function"};function E0(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return lb(lb({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function ybt(e){return _Ie(e)&&"type"in e}var vbt=function(e){xIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,nE([void 0],n[0].concat(this)))):new(t.bind.apply(t,nE([void 0],n.concat(this))))},t}(Array),bbt=function(e){xIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,nE([void 0],n[0].concat(this)))):new(t.bind.apply(t,nE([void 0],n.concat(this))))},t}(Array);function jG(e){return r1(e)?yIe(e,function(){}):e}function xbt(e){return typeof e=="boolean"}function _bt(){return function(t){return wbt(t)}}function wbt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new vbt;return n&&(xbt(n)?r.push(BG):r.push(BG.withExtraArgument(n.extraArgument))),r}function Ebt(e){var t=_bt(),n=e,r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(_Ie(i))h=ubt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=lbt.apply(void 0,p),g=QF;u&&(g=mbt(lb({trace:!1},typeof u=="object"&&u)));var v=new bbt(m),b=v;Array.isArray(d)?b=nE([m],d):typeof d=="function"&&(b=d(v));var w=g.apply(void 0,b);return vIe(h,c,w)}function wIe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function Tbt(e){return typeof e=="function"}function Sbt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?wIe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(Tbt(e))u=function(){return jG(e())};else{var l=jG(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=nE([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(Rb(p)){var g=p,v=m(g,d);return v===void 0?p:v}else{if(r1(p))return yIe(p,function(b){return m(b,d)});var v=m(p,d);if(v===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}return p},f)}return c.getInitialState=u,c}function Cbt(e,t){return e+"/"+t}function Abt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n=typeof e.initialState=="function"?e.initialState:jG(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=Cbt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?E0(d,p):E0(d)});function u(){var c=typeof e.extraReducers=="function"?wIe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,v=lb(lb({},d),o);return Sbt(n,function(b){for(var w in v)b.addCase(w,v[w]);for(var E=0,T=p;E<T.length;E++){var C=T[E];b.addMatcher(C.matcher,C.reducer)}g&&b.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var Ibt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",EIe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Ibt[Math.random()*64|0];return t},kbt=["name","message","stack","code"],IV=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),dpe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Rbt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=kbt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=E0(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:AV(lb({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=E0(t+"/pending",function(l,c,f){return{payload:void 0,meta:AV(lb({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=E0(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||Rbt)(l||"Rejected"),meta:AV(lb({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):EIe(),p=new a,m;function g(b){m=b,p.abort()}var v=function(){return p3(this,null,function(){var b,w,E,T,C,I,R;return h3(this,function(N){switch(N.label){case 0:return N.trys.push([0,4,,5]),T=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,l,{getState:f,extra:d}),Nbt(T)?[4,T]:[3,2];case 1:T=N.sent(),N.label=2;case 2:if(T===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(O,L){return p.signal.addEventListener("abort",function(){return L({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(w=r==null?void 0:r.getPendingMeta)==null?void 0:w.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([C,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(O,L){return new IV(O,L)},fulfillWithValue:function(O,L){return new dpe(O,L)}})).then(function(O){if(O instanceof IV)throw O;return O instanceof dpe?i(O.payload,h,l,O.meta):i(O,h,l)})])];case 3:return E=N.sent(),[3,5];case 4:return I=N.sent(),E=I instanceof IV?o(null,h,l,I.payload,I.meta):o(I,h,l),[3,5];case 5:return R=r&&!r.dispatchConditionRejection&&o.match(E)&&E.meta.condition,R||c(E),[2,E]}})})}();return Object.assign(v,{abort:g,requestId:h,arg:l,unwrap:function(){return v.then(Dbt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Dbt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Nbt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Pbt=function(e,t){return gbt(e)?e.match(t):e(t)};function hpe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return Pbt(r,n)})}}var yee=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},UG=function(){},TIe=function(e,t){return t===void 0&&(t=UG),e.catch(t),e},SIe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},z2=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Obt="task",CIe="listener",AIe="completed",vee="cancelled",Mbt="task-"+vee,Lbt="task-"+AIe,IIe=CIe+"-"+vee,$bt=CIe+"-"+AIe,g9=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Obt+" "+vee+" (reason: "+t+")"}return e}(),V2=function(e){if(e.aborted)throw new g9(e.reason)};function kIe(e,t){var n=UG;return new Promise(function(r,i){var s=function(){return i(new g9(e.reason))};if(e.aborted){s();return}n=SIe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=UG})}var Fbt=function(e,t){return p3(void 0,null,function(){var n,r;return h3(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof g9?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},JF=function(e){return function(t){return TIe(kIe(e,t).then(function(n){return V2(e),n}))}},RIe=function(e){var t=JF(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Bbt=Object.assign,ppe={},m3="listenerMiddleware",jbt=function(e,t){var n=function(r){return SIe(e,function(){return z2(r,e.reason)})};return function(r,i){yee(r,"taskExecutor");var s=new AbortController;n(s);var o=Fbt(function(){return p3(void 0,null,function(){var a;return h3(this,function(u){switch(u.label){case 0:return V2(e),V2(s.signal),[4,r({pause:JF(s.signal),delay:RIe(s.signal),signal:s.signal})];case 1:return a=u.sent(),V2(s.signal),[2,a]}})})},function(){return z2(s,Lbt)});return i!=null&&i.autoJoin&&t.push(o),{result:JF(e)(o),cancel:function(){z2(s,Mbt)}}}},Ubt=function(e,t){var n=function(r,i){return p3(void 0,null,function(){var s,o,a,u;return h3(this,function(l){switch(l.label){case 0:V2(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,kIe(t,Promise.race(a))];case 2:return u=l.sent(),V2(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return TIe(n(r,i))}},DIe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=E0(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return yee(s,"options.listener"),{predicate:i,type:t,effect:s}},zbt=function(e){var t=DIe(e),n=t.type,r=t.predicate,i=t.effect,s=EIe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},zG=function(e){e.pending.forEach(function(t){z2(t,IIe)})},Vbt=function(e){return function(){e.forEach(zG),e.clear()}},mpe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},Hbt=E0(m3+"/add"),qbt=E0(m3+"/removeAll"),Wbt=E0(m3+"/remove"),Gbt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,nE([m3+"/error"],e))};function Ybt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?Gbt:i;yee(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&zG(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=zbt(h)),o(p)},l=function(h){var p=DIe(h),m=p.type,g=p.effect,v=p.predicate,b=a(function(w){var E=typeof m=="string"?w.type===m:w.predicate===v;return E&&w.effect===g});return b&&(b.unsubscribe(),h.cancelActive&&zG(b)),!!b},c=function(h,p,m,g){return p3(t,null,function(){var v,b,w,E;return h3(this,function(T){switch(T.label){case 0:v=new AbortController,b=Ubt(u,v.signal),w=[],T.label=1;case 1:return T.trys.push([1,3,4,6]),h.pending.add(v),[4,Promise.resolve(h.effect(p,Bbt({},m,{getOriginalState:g,condition:function(C,I){return b(C,I).then(Boolean)},take:b,delay:RIe(v.signal),pause:JF(v.signal),extra:r,signal:v.signal,fork:jbt(v.signal,w),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(C,I,R){C!==v&&(z2(C,IIe),R.delete(C))})}})))];case 2:return T.sent(),[3,6];case 3:return E=T.sent(),E instanceof g9||mpe(s,E,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(w)];case 5:return T.sent(),z2(v,$bt),h.pending.delete(v),[7];case 6:return[2]}})})},f=Vbt(n),d=function(h){return function(p){return function(m){if(!ybt(m))return p(m);if(Hbt.match(m))return u(m.payload);if(qbt.match(m)){f();return}if(Wbt.match(m))return l(m.payload);var g=h.getState(),v=function(){if(g===ppe)throw new Error(m3+": getOriginalState can only be called synchronously");return g},b;try{if(b=p(m),n.size>0)for(var w=h.getState(),E=Array.from(n.values()),T=0,C=E;T<C.length;T++){var I=C[T],R=!1;try{R=I.predicate(m,w,g)}catch(N){R=!1,mpe(s,N,{raisedBy:"predicate"})}R&&c(I,m,h,v)}}finally{g=ppe}return b}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var gpe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Jvt();function Kbt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let l6;const Xbt=new Uint8Array(16);function Qbt(){if(!l6&&(l6=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!l6))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l6(Xbt)}const uu=[];for(let e=0;e<256;++e)uu.push((e+256).toString(16).slice(1));function Jbt(e,t=0){return(uu[e[t+0]]+uu[e[t+1]]+uu[e[t+2]]+uu[e[t+3]]+"-"+uu[e[t+4]]+uu[e[t+5]]+"-"+uu[e[t+6]]+uu[e[t+7]]+"-"+uu[e[t+8]]+uu[e[t+9]]+"-"+uu[e[t+10]]+uu[e[t+11]]+uu[e[t+12]]+uu[e[t+13]]+uu[e[t+14]]+uu[e[t+15]]).toLowerCase()}const Zbt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ype={randomUUID:Zbt};function vpe(e,t,n){if(ype.randomUUID&&!e)return ype.randomUUID();e=e||{};const r=e.random||(e.rng||Qbt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Jbt(r)}class T0{static get(){let t=vpe();for(;this.ids.has(t);)t=vpe();return this.ids.set(t,!0),t}}T0.ids=new Map;function Np(e){return"parent"in e}function ext(e){return!Np(e)}function txt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:T0.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:T0.get(),createdOn:Date.now(),val:r}]:[];return{id:T0.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function nxt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:T0.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:T0.get(),createdOn:Date.now(),val:s}]:[];return{id:T0.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function io(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=fxt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function rE(e){return!!e&&!!e[hd]}function Db(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===dxt}(e)||Array.isArray(e)||!!e[GD]||!!(!((t=e.constructor)===null||t===void 0)&&t[GD])||y9(e)||v9(e))}function RC(e,t,n){n===void 0&&(n=!1),Nb(e)===0?(n?Object.keys:Tee)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Nb(e){var t=e[hd];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:y9(e)?2:v9(e)?3:0}function UN(e,t){return Nb(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function GL(e,t){return Nb(e)===2?e.get(t):e[t]}function NIe(e,t,n){var r=Nb(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function rxt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function y9(e){return lxt&&e instanceof Map}function v9(e){return cxt&&e instanceof Set}function X_(e){return e.o||e.t}function bee(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=hxt(e);delete t[hd];for(var n=Tee(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function xee(e,t){return t===void 0&&(t=!1),_ee(e)||rE(e)||!Db(e)||(Nb(e)>1&&(e.set=e.add=e.clear=e.delete=ixt),Object.freeze(e),t&&RC(e,function(n,r){return xee(r,!0)},!0)),e}function ixt(){io(2)}function _ee(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function S0(e){var t=WG[e];return t||io(18,e),t}function sxt(e,t){WG[e]||(WG[e]=t)}function bpe(){return{}.NODE_ENV==="production"||DC||io(0),DC}function kV(e,t){t&&(S0("Patches"),e.u=[],e.s=[],e.v=t)}function ZF(e){VG(e),e.p.forEach(oxt),e.p=null}function VG(e){e===DC&&(DC=e.l)}function xpe(e){return DC={p:[],l:DC,h:e,m:!0,_:0}}function oxt(e){var t=e[hd];t.i===0||t.i===1?t.j():t.O=!0}function RV(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||S0("ES5").S(t,e,r),r?(n[hd].P&&(ZF(t),io(4)),Db(e)&&(e=e5(t,e),t.l||t5(t,e)),t.u&&S0("Patches").M(n[hd].t,e,t.u,t.s)):e=e5(t,n,[]),ZF(t),t.u&&t.v(t.u,t.s),e!==Eee?e:void 0}function e5(e,t,n){if(_ee(t))return t;var r=t[hd];if(!r)return RC(t,function(s,o){return _pe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return t5(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=bee(r.k):r.o;RC(r.i===3?new Set(i):i,function(s,o){return _pe(e,r,i,s,o,n)}),t5(e,i,!1),n&&e.u&&S0("Patches").R(r,n,e.u,e.s)}return r.o}function _pe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&io(5),rE(i)){var o=e5(e,i,s&&t&&t.i!==3&&!UN(t.D,r)?s.concat(r):void 0);if(NIe(n,r,o),!rE(o))return;e.m=!1}if(Db(i)&&!_ee(i)){if(!e.h.F&&e._<1)return;e5(e,i),t&&t.A.l||t5(e,i)}}function t5(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&xee(t,n)}function DV(e,t){var n=e[hd];return(n?X_(n):e)[t]}function wpe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function HG(e){e.P||(e.P=!0,e.l&&HG(e.l))}function NV(e){e.o||(e.o=bee(e.t))}function qG(e,t,n){var r=y9(t)?S0("MapSet").N(t,n):v9(t)?S0("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:bpe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=GG;o&&(u=[a],l=nD);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):S0("ES5").J(t,n);return(n?n.A:bpe()).p.push(r),r}function axt(e){return rE(e)||io(22,e),function t(n){if(!Db(n))return n;var r,i=n[hd],s=Nb(n);if(i){if(!i.P&&(i.i<4||!S0("ES5").K(i)))return i.t;i.I=!0,r=Epe(n,s),i.I=!1}else r=Epe(n,s);return RC(r,function(o,a){i&&GL(i.t,o)===a||NIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Epe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return bee(e)}function uxt(){function e(r){if(!Db(r))return r;if(Array.isArray(r))return r.map(e);if(y9(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(v9(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return UN(r,GD)&&(i[GD]=r[GD]),i}function t(r){return rE(r)?e(r):r}var n="add";sxt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=Nb(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||io(24),typeof u=="function"&&f==="prototype"&&io(24),typeof(u=GL(u,f))!="object"&&io(15,o.join("/"))}var d=Nb(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:io(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:io(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;RC(a.D,function(h,p){var m=GL(f,h),g=GL(d,h),v=p?UN(f,h)?"replace":n:"remove";if(m!==g||v!=="replace"){var b=u.concat(h);l.push(v==="remove"?{op:v,path:b}:{op:v,path:b,value:g}),c.push(v===n?{op:"remove",path:b}:v==="remove"?{op:n,path:b,value:t(m)}:{op:"replace",path:b,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var v=u.concat([g]);l.push({op:"replace",path:v,value:t(h[g])}),c.push({op:"replace",path:v,value:t(f[g])})}for(var b=f.length;b<h.length;b++){var w=u.concat([b]);l.push({op:n,path:w,value:t(h[b])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===Eee?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Tpe,DC,wee=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",lxt=typeof Map<"u",cxt=typeof Set<"u",Spe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Eee=wee?Symbol.for("immer-nothing"):((Tpe={})["immer-nothing"]=!0,Tpe),GD=wee?Symbol.for("immer-draftable"):"__$immer_draftable",hd=wee?Symbol.for("immer-state"):"__$immer_state",fxt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},dxt=""+Object.prototype.constructor,Tee=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,hxt=Object.getOwnPropertyDescriptors||function(e){var t={};return Tee(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},WG={},GG={get:function(e,t){if(t===hd)return e;var n=X_(e);if(!UN(n,t))return function(i,s,o){var a,u=wpe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Db(r)?r:r===DV(e.t,t)?(NV(e),e.o[t]=qG(e.A.h,r,e)):r},has:function(e,t){return t in X_(e)},ownKeys:function(e){return Reflect.ownKeys(X_(e))},set:function(e,t,n){var r=wpe(X_(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=DV(X_(e),t),s=i==null?void 0:i[hd];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(rxt(n,i)&&(n!==void 0||UN(e.t,t)))return!0;NV(e),HG(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return DV(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,NV(e),HG(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=X_(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){io(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){io(12)}},nD={};RC(GG,function(e,t){nD[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),nD.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&io(13),nD.set.call(this,e,t,void 0)},nD.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&io(14),GG.set.call(this,e[0],t,n,e[0])};var pxt=function(){function e(n){var r=this;this.g=Spe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var v=arguments.length,b=Array(v>1?v-1:0),w=1;w<v;w++)b[w-1]=arguments[w];return u.produce(m,function(E){var T;return(T=s).call.apply(T,[g,E].concat(b))})}}var l;if(typeof s!="function"&&io(6),o!==void 0&&typeof o!="function"&&io(7),Db(i)){var c=xpe(r),f=qG(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?ZF(c):VG(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return kV(c,o),RV(m,c)},function(m){throw ZF(c),m}):(kV(c,o),RV(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===Eee&&(l=void 0),r.F&&xee(l,!0),o){var h=[],p=[];S0("Patches").M(i,l,h,p),o(h,p)}return l}io(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Db(n)||io(8),rE(n)&&(n=axt(n));var r=xpe(this),i=qG(this,n,void 0);return i[hd].C=!0,VG(r),i},t.finishDraft=function(n,r){var i=n&&n[hd];({}).NODE_ENV!=="production"&&(i&&i.C||io(9),i.I&&io(10));var s=i.A;return kV(s,r),RV(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Spe&&io(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=S0("Patches").$;return rE(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),pd=new pxt,mxt=pd.produce;pd.produceWithPatches.bind(pd);pd.setAutoFreeze.bind(pd);pd.setUseProxies.bind(pd);pd.applyPatches.bind(pd);pd.createDraft.bind(pd);pd.finishDraft.bind(pd);function gxt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=txt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return Abt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:T0.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:T0.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function yxt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=gxt(e),s=Ybt();s.startListening({matcher:hpe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=hpe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=Ebt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:T0.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var vxt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bxt=Object.prototype.hasOwnProperty;function YG(e,t){return bxt.call(e,t)}function KG(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)YG(e,i)&&r.push(i);return r}function Gc(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function XG(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Q_(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function PIe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function QG(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(QG(e[t]))return!0}else if(typeof e=="object"){for(var r=KG(e),i=r.length,s=0;s<i;s++)if(QG(e[r[s]]))return!0}}return!1}function Cpe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var OIe=function(e){vxt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Cpe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Cpe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),to=OIe,xxt=Gc,_2={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=n5(n,this.path);r&&(r=Gc(r));var i=$w(n,{op:"remove",path:this.from}).removed;return $w(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=n5(n,this.from);return $w(n,{op:"add",path:this.path,value:Gc(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:zN(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},_xt={add:function(e,t,n){return XG(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:_2.move,copy:_2.copy,test:_2.test,_get:_2._get};function n5(e,t){if(t=="")return e;var n={op:"_get",path:t};return $w(e,n),n.value}function $w(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):r5(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=n5(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=zN(e,t.value),o.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new to("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Gc(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=r5;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=PIe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!XG(h))throw new to("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);XG(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new to("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=_xt[t.op].call(t,l,h,e);if(o.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=_2[t.op].call(t,l,h,e);if(o.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new to("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function b9(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new to("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Gc(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=$w(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function wxt(e,t,n){var r=$w(e,t);if(r.test===!1)throw new to("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function r5(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new to("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(_2[e.op]){if(typeof e.path!="string")throw new to("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new to('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new to("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new to("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&QG(e.value))throw new to("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new to("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new to("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=MIe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new to("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new to("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function MIe(e,t,n){try{if(!Array.isArray(e))throw new to("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)b9(Gc(t),Gc(e),n||!0);else{n=n||r5;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof to)return i;throw i}}function zN(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!zN(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!zN(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const Ext=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:to,_areEquals:zN,applyOperation:$w,applyPatch:b9,applyReducer:wxt,deepClone:xxt,getValueByPointer:n5,validate:MIe,validator:r5},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var See=new WeakMap,Txt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),Sxt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function Cxt(e){return See.get(e)}function Axt(e,t){return e.observers.get(t)}function Ixt(e,t){e.observers.delete(t.callback)}function kxt(e,t){t.unobserve()}function Rxt(e,t){var n=[],r,i=Cxt(e);if(!i)i=new Txt(e),See.set(e,i);else{var s=Axt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Gc(e),t){r.callback=t,r.next=null;var o=function(){JG(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){JG(r),clearTimeout(r.next),Ixt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new Sxt(t,r)),r}function JG(e,t){t===void 0&&(t=!1);var n=See.get(e.object);Cee(n.value,e.object,e.patches,"",t),e.patches.length&&b9(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Cee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=KG(t),o=KG(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(YG(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Cee(c,f,n,r+"/"+Q_(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Q_(l),value:Gc(c)}),n.push({op:"replace",path:r+"/"+Q_(l),value:Gc(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Q_(l),value:Gc(c)}),n.push({op:"remove",path:r+"/"+Q_(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!YG(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Q_(l),value:Gc(t[l])})}}}function LIe(e,t,n){n===void 0&&(n=!1);var r=[];return Cee(e,t,r,"",n),r}const Dxt=Object.freeze(Object.defineProperty({__proto__:null,compare:LIe,generate:JG,observe:Rxt,unobserve:kxt},Symbol.toStringTag,{value:"Module"}));Object.assign({},Ext,Dxt,{JsonPatchError:OIe,deepClone:Gc,escapePathComponent:Q_,unescapePathComponent:PIe});var rD=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(rD||{});function YL(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=$Ie(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=YL(i,t);return b9(a,Gc(o),!0,!1).newDocument}function Nxt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function g3({registry:e,initialState:t}){let n=!1;const r=Kbt(),i=yxt(t);function s(c){return i.backend.nodes[c]}r.listen(rD.TRAVERSAL_START,()=>{n=!0}),r.listen(rD.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return YL(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const v=YL(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const b=LIe(v,f);if(Nxt(f,b)==="checkpoint")g={type:"checkpoint",val:f};else{const w=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:b,checkpointRef:w}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=nxt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=YL(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(rD.TRAVERSAL_START);const f=$Ie(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);Oxt(p,m)?Np(p)&&d.push(...p.sideEffects.undo):Np(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(rD.TRAVERSAL_END)},undo(){const{current:c}=i;return Np(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return FIe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function Pxt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Np(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Np(r)&&(r=n[r.parent]),Np(i)&&(i=n[i.parent]);return r.id}function $Ie(e,t,n){const r=Pxt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Np(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Np(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function Oxt(e,t){if(Np(e)&&e.parent===t.id)return!0;if(Np(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function FIe(e,t){return{...e,children:e.children.map(n=>FIe(t[n],t)),name:`${e.label}`}}uxt();function Mxt(e){return e.length===2?mxt(e):e}class qE{static create(){return new qE}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:Mxt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),E0(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}const Ape=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},JA=e=>{const t=P.useRef(null),n=Ape(e),[r,i]=P.useState(0),[s,o]=P.useState(0);P.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Ape({...n,width:n.width||r,height:n.height||s});return[t,a]},Lxt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:JA},Symbol.toStringTag,{value:"Module"})),$xt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function Fxt({parameters:e,setAnswer:t}){const[n,r]=JA($xt),[i,s]=P.useState(100),[o,a]=P.useState(100),[u,l]=P.useState(e.speed),{taskid:c}=e,{actions:f,trrack:d}=P.useMemo(()=>{const p=qE.create(),m=p.register("click",(v,b)=>(v.clickX=b.clickX,v.clickY=b.clickY,v.distance=b.distance,v)),g=g3({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=P.useCallback(p=>{const m=hi("#movingCircle"),g=hi("#clickAccuracySvg"),v=uF(p,g.node()),b=[+m.attr("cx"),+m.attr("cy")],w=`${Math.round(Math.sqrt((v[0]-b[0])**2+(v[1]-b[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+w,clickX:v[0],clickY:v[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:w}})},[f,t,c,d]);return P.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,v=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;hi(n.current).select("circle").transition().duration(v).ease(Wpt).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:S.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:S.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[S.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),S.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),S.jsxs(je,{children:["Adjust speed (px/s):",S.jsx(CB,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const Bxt=Object.freeze(Object.defineProperty({__proto__:null,default:Fxt},Symbol.toStringTag,{value:"Module"}));function Aee({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=P.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=P.useCallback(c=>(s?d3("%B"):_x(".2s"))(c),[s]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:S.jsx(ga,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?S.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>S.jsxs("g",{transform:`translate(${f}, ${n})`,children:[S.jsx("line",{y2:"6",stroke:"currentColor"}),o?S.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,S.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:S.jsx(ga,{children:S.jsx(ss,{withinPortal:!0,label:c,children:S.jsx(lt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const jxt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:Aee},Symbol.toStringTag,{value:"Module"}));function BIe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=P.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:S.jsx(ga,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?S.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>S.jsxs("g",{transform:`translate(${n}, ${l})`,children:[S.jsx("line",{x2:"-6",stroke:"currentColor"}),s?S.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,S.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:S.jsx("foreignObject",{width:a,height:20,children:S.jsx(Yr,{style:{width:"100%",height:"100%"},justify:"right",children:S.jsx(lt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const Uxt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:BIe},Symbol.toStringTag,{value:"Module"})),Ud={top:15,left:100,right:50,bottom:50};function ZG({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=td(),o=P.useMemo(()=>s-Ud.left-Ud.right,[s]),a=P.useMemo(()=>i-Ud.top-Ud.bottom,[i]),u=P.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Ex(f9).domain(d)},[n,t.category]),l=P.useMemo(()=>e?ef([Ud.left,o+Ud.left]).domain([0,By(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=P.useMemo(()=>e?YA([Ud.top,a+Ud.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=P.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:S.jsxs("g",{children:[S.jsx("rect",{x:Ud.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Ud.left},h),S.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?S.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[S.jsx(Aee,{xScale:l,yRange:c.range(),vertPosition:a+Ud.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?S.jsx(BIe,{yScale:c,horizontalPosition:Ud.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):S.jsx(df,{})}const zxt=Object.freeze(Object.defineProperty({__proto__:null,Bar:ZG,default:ZG},Symbol.toStringTag,{value:"Module"})),pi=Array.isArray;function tf(e){return e!=null?pi(e)?e:[e]:[]}function Vxt(e=0,t=1/0){return`${Ipe(e)} < row_number() && row_number() <= ${Ipe(t)}`}function Ipe(e){return e<0?`count() + ${e}`:e}class jIe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(Vxt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,tf(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function gr(e){throw Error(e)}function Zl(e){return typeof e=="number"}function Es(e){return typeof e=="function"}function x9(e,t){const n=Array(e);if(Es(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let Hxt=class extends jIe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){gr("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){gr("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){gr("Not implemented")}getter(t){gr("Not implemented")}objects(t){gr("Not implemented")}object(t){gr("Not implemented")}[Symbol.iterator](){gr("Not implemented")}print(t={}){Zl(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=x9(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},qxt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},Wxt=function(e){return e&&Es(e.get)?e:new qxt(e)};function i1(e){return e instanceof Date}function hl(e){return e===Object(e)}function i5(e){return e instanceof RegExp}function ku(e){return typeof e=="string"}function Gxt(e,t){const n=r=>gr(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?kpe(e.entries(),t):i1(e)?n("Date"):i5(e)?n("RegExp"):ku(e)?n():pi(e)?Yxt(e,t):Es(e[Symbol.iterator])?Kxt(e,t):hl(e)?kpe(Object.entries(e),t):n()}function kpe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function Yxt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function Kxt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:Xxt}=Object.prototype;function Up(e,t){return Xxt.call(e,t)}function xd(e){return e?new Rpe({...e.data()},e.columnNames()):new Rpe}class Rpe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Up(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const li=void 0,Qxt=Object.getPrototypeOf(Int8Array);function y3(e){return e instanceof Qxt}function ww(e){return pi(e)||y3(e)}function Cp(e){return e!=null&&e===e}const uR=e=>ww(e)||ku(e),Jxt={compact:e=>ww(e)?e.filter(t=>Cp(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>uR(e)?e.includes(t,n):!1,indexof:(e,t)=>uR(e)?e.indexOf(t):-1,join:(e,t)=>ww(e)?e.join(t):li,lastindexof:(e,t)=>uR(e)?e.lastIndexOf(t):-1,length:e=>uR(e)?e.length:0,pluck:(e,t)=>ww(e)?e.map(n=>Cp(n)?n[t]:li):li,reverse:e=>ww(e)?e.slice().reverse():ku(e)?e.split("").reverse().join(""):li,slice:(e,t,n)=>uR(e)?e.slice(t,n):li};function Zxt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function KL(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const $m=e=>(e<10?"0":"")+e,e_t=e=>e<0?"-"+KL(-e,6):e>9999?"+"+KL(e,6):KL(e,4);function UIe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return e_t(e)+"-"+$m(t+1)+"-"+$m(n)+(!u||o?"T"+$m(r)+":"+$m(i)+":"+$m(s)+"."+KL(o,3)+l:s?"T"+$m(r)+":"+$m(i)+":"+$m(s)+l:i||r||!a?"T"+$m(r)+":"+$m(i)+l:"")}function zIe(e,t){return isNaN(e)?"Invalid Date":UIe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function _9(e,t){return isNaN(e)?"Invalid Date":UIe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const t_t=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function n_t(e){return e.match(t_t)&&!isNaN(Date.parse(e))}function r_t(e,t=Date.parse){return n_t(e)?t(e):e}const VIe=6e4,HIe=864e5,qIe=6048e5,ro=new Date,so=new Date,To=e=>(ro.setTime(typeof e=="string"?r_t(e):e),ro);function i_t(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function s_t(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function o_t(e){so.setTime(+e),so.setHours(0,0,0,0),ro.setTime(+so),ro.setMonth(0),ro.setDate(1);const t=(so.getTimezoneOffset()-ro.getTimezoneOffset())*VIe;return Math.floor(1+(so-ro-t)/HIe)}function a_t(e){so.setTime(+e),so.setUTCHours(0,0,0,0);const t=Date.UTC(so.getUTCFullYear(),0,1);return Math.floor(1+(so-t)/HIe)}function u_t(e,t){const n=t||0;so.setTime(+e),so.setDate(so.getDate()-(so.getDay()+7-n)%7),so.setHours(0,0,0,0),ro.setTime(+e),ro.setMonth(0),ro.setDate(1),ro.setDate(1-(ro.getDay()+7-n)%7),ro.setHours(0,0,0,0);const r=(so.getTimezoneOffset()-ro.getTimezoneOffset())*VIe;return Math.floor((1+(so-ro)-r)/qIe)}function l_t(e,t){const n=t||0;return so.setTime(+e),so.setUTCDate(so.getUTCDate()-(so.getUTCDay()+7-n)%7),so.setUTCHours(0,0,0,0),ro.setTime(+e),ro.setUTCMonth(0),ro.setUTCDate(1),ro.setUTCDate(1-(ro.getUTCDay()+7-n)%7),ro.setUTCHours(0,0,0,0),Math.floor((1+(so-ro))/qIe)}const c_t={format_date:(e,t)=>zIe(To(e),!t),format_utcdate:(e,t)=>_9(To(e),!t),timestamp:e=>+To(e),year:e=>To(e).getFullYear(),quarter:e=>Math.floor(To(e).getMonth()/3),month:e=>To(e).getMonth(),date:e=>To(e).getDate(),dayofweek:e=>To(e).getDay(),hours:e=>To(e).getHours(),minutes:e=>To(e).getMinutes(),seconds:e=>To(e).getSeconds(),milliseconds:e=>To(e).getMilliseconds(),utcyear:e=>To(e).getUTCFullYear(),utcquarter:e=>Math.floor(To(e).getUTCMonth()/3),utcmonth:e=>To(e).getUTCMonth(),utcdate:e=>To(e).getUTCDate(),utcdayofweek:e=>To(e).getUTCDay(),utchours:e=>To(e).getUTCHours(),utcminutes:e=>To(e).getUTCMinutes(),utcseconds:e=>To(e).getUTCSeconds(),utcmilliseconds:e=>To(e).getUTCMilliseconds(),datetime:i_t,dayofyear:o_t,week:u_t,utcdatetime:s_t,utcdayofyear:a_t,utcweek:l_t,now:Date.now};function Iee(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:i1(e)||i1(t)?+e==+t:i5(e)&&i5(t)?e+""==t+"":hl(e)&&hl(t)?f_t(e,t):!1}function f_t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Dpe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Dpe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!Iee(e[o],t[o]))return!1}return!0}function Dpe(e,t,n=Iee){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const d_t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let h_t=Math.random;function ZA(){return h_t()}const p_t={random:ZA,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function kee(e){return e instanceof Map}function m_t(e){return e instanceof Set}function XL(e){return kee(e)||m_t(e)}function PV(e){return Array.from(e)}const g_t={has:(e,t)=>XL(e)?e.has(t):e!=null?Up(e,t):!1,keys:e=>kee(e)?PV(e.keys()):e!=null?Object.keys(e):[],values:e=>XL(e)?PV(e.values()):e!=null?Object.values(e):[],entries:e=>XL(e)?PV(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):li};function y_t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Up(t,e))return t[e];return n!==void 0?n:e}function v_t(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const b_t={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},w2={bin:Zxt,equal:Iee,recode:y_t,sequence:v_t,...Jxt,...c_t,...d_t,...p_t,...g_t,...b_t};function VN(e){return typeof e=="bigint"}function j0(e){return e===void 0?e+"":VN(e)?e+"n":JSON.stringify(e)}function ur(e,t=[],n=[]){return new x_t(e,tf(t),tf(n))}let x_t=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${j0(n)}]`),...this.params.map(j0)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const WIe=e=>ur("any",e),GIe=()=>ur("count"),YIe=e=>ur("array_agg",e),KIe=e=>ur("array_agg_distinct",e),XIe=(e,t)=>ur("map_agg",[e,t]),QIe=(e,t)=>ur("object_agg",[e,t]),JIe=(e,t)=>ur("entries_agg",[e,t]);({...w2});function __t(e,t){e=XL(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function w_t(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function E_t(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function T_t(e,t,n,r){const i=r==="map"||r===!0?XIe:r==="entries"?JIe:r==="object"?QIe:gr('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=__t(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:YIe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const S_t="ArrayPattern",C_t="ArrowFunctionExpression",A_t="FunctionExpression",cb="Identifier",eI="Literal",ZIe="MemberExpression",I_t="ObjectExpression",eke="ObjectPattern",tke="Property",v3="Column",k_t="Constant",R_t="Dictionary",D_t="Function",N_t="Parameter",nke="Op",cs=(e,t)=>{const n=P_t[e.type];return n?n(e,t):gr(`Unsupported expression construct: ${e.type}`)},OV=(e,t)=>"("+cs(e.left,t)+" "+e.operator+" "+cs(e.right,t)+")",MV=(e,t)=>"("+Hm(e.params,t)+")=>"+cs(e.body,t),Npe=(e,t)=>cs(e.callee,t)+"("+Hm(e.arguments,t)+")",Hm=(e,t,n=",")=>e.map(r=>cs(r,t)).join(n),rke=e=>e.computed?`[${j0(e.name)}]`:`.${e.name}`,Ppe=(e,t,n)=>{const r=e.table||"";return`data${r}${rke(e)}.${n}(${t.index}${r})`},P_t={Constant:e=>e.raw,Column:(e,t)=>Ppe(e,t,"get"),Dictionary:(e,t)=>Ppe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${rke(e)}`,Op:(e,t)=>`op(${j0(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+cs(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=cs(e.object,t),i=cs(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Npe,NewExpression:(e,t)=>"new "+Npe(e,t),ArrayExpression:(e,t)=>"["+Hm(e.elements,t)+"]",AssignmentExpression:OV,BinaryExpression:OV,LogicalExpression:OV,UnaryExpression:(e,t)=>"("+e.operator+cs(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+cs(e.test,t)+"?"+cs(e.consequent,t)+":"+cs(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Hm(e.properties,t)+"})",Property:(e,t)=>{const n=cs(e.key,t);return(e.computed?`[${n}]`:n)+":"+cs(e.value,t)},ArrowFunctionExpression:MV,FunctionExpression:MV,FunctionDeclaration:MV,ArrayPattern:(e,t)=>"["+Hm(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Hm(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Hm(e.declarations,t,","),VariableDeclarator:(e,t)=>cs(e.id,t)+"="+cs(e.init,t),SpreadElement:(e,t)=>"..."+cs(e.argument,t),BlockStatement:(e,t)=>"{"+Hm(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>cs(e.expression,t),IfStatement:(e,t)=>"if ("+cs(e.test,t)+")"+cs(e.consequent,t)+(e.alternate?" else "+cs(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+cs(e.discriminant,t)+") {"+Hm(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+cs(e.test,t):"default")+": "+Hm(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+cs(e.argument,t),Program:(e,t)=>cs(e.body[0],t)};function s5(e,t={index:"row"}){return cs(e,t)}function O_t(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function NC(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:i1(e)?+e:pi(e)||y3(e)?`[${e.map(NC)}]`:i5(e)?e+"":M_t(e)}function M_t(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${NC(e[r])}`;return t+="}",t}function o5(e,t){const n=e.length;return n===1?(r,i)=>NC(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=NC(a)}return s}}function L_t(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=NC(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=NC(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function dy(){}function $_t(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function ia(e){return e.init=e.init||dy,e.add=e.add||dy,e.rem=e.rem||dy,e}function Ope(e,t){return e.product_v=!1,e.product=t}const ike={count:{create:()=>ia({value:e=>e.count}),param:[]},array_agg:{create:()=>ia({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>ia({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>ia({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>ia({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>ia({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:li}),param:[1]},valid:{create:()=>ia({value:e=>e.valid}),param:[1]},invalid:{create:()=>ia({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=L_t(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>ia({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>ia({value:e=>{let t=li,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:li,add:(e,t)=>VN(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Ope(e,1),value:e=>e.valid?e.product_v?Ope(e,$_t(e.list.values())):e.product:void 0,add:(e,t)=>VN(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:li,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>ia({value:e=>e.valid?e.mean:li}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):li,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>ia({value:e=>e.valid>1?e.dev/e.valid:li}),param:[1],req:["variance"]},stdev:{create:()=>ia({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):li}),param:[1],req:["variance"]},stdevp:{create:()=>ia({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):li}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=li,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===li)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=li,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===li)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>ia({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>ia({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):li,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>ia({value:e=>e.valid>1?e.cov/e.valid:li}),param:[2],req:["covariance"]},corr:{create:()=>ia({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):li}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>ia({value:i=>O_t(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Mpe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Lpe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},ske={row_number:{create(){return{init:dy,value:e=>e.index+1}},param:[]},rank:Mpe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Mpe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Lpe,ntile:{create(e){e=+e,e>0||gr("ntile num must be greater than zero.");const{init:t,value:n}=Lpe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=li){return e=+e||1,{init:dy,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=li){return e=+e||1,{init:dy,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:dy,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:dy,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||gr("nth_value nth must be greater than zero."),{init:dy,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):li}}},param:[1,1]},fill_down:{create(e=li){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Cp(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=li){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=F_t(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function F_t(e,t,n){for(const r=e.size;n<r;++n)if(Cp(e.value(n,t)))return n;return-1}function Ree(e){return Up(ike,e)}function Dee(e){return Up(ske,e)}function oke(e){return Up(w2,e)||e==="row_object"}function ake(e){return Ree(e)&&ike[e]}function uke(e){return Dee(e)&&ske[e]}function lR(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const Nee={escape:(e,t,n)=>lR(e,t,n),expr:(e,t)=>lR(`(row,data,op)=>${e}`,w2,t),expr2:(e,t)=>lR(`(row0,data0,row,data)=>${e}`,w2,t),join:(e,t)=>lR(`(row1,data1,row2,data2)=>${e}`,w2,t),param:(e,t)=>lR(e,w2,t)},B_t={"==":1,"!=":1,"===":1,"!==":1};function lke(e,t,n=0,r,i){if(e.type=v3,e.name=t,e.table=n,i&&r&&Es(r.keyFor)){const s=B_t[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===eI&&j_t(i,e,s,r.keyFor(s.value))}return e}function j_t(e,t,n,r){return r<0?(e.type=eI,e.value=!1,e.raw="false"):(t.type=R_t,n.value=r,n.raw=r+""),!0}function w9(e){return pi(e)?e:kee(e)?e.entries():e?Object.entries(e):[]}const cke="row_object";function fke(e,t){e.type=I_t;const n=e.properties=[];for(const r of w9(t)){const[i,s]=pi(r)?r:[r,r];n.push({type:tke,key:{type:eI,raw:j0(s)},value:lke({computed:!0},i)})}return e}function dke(e){return s5(fke({},e))}function hke(e){return Nee.expr(dke(e))}const U_t=new TextDecoder("utf-8"),eY=e=>U_t.decode(e),z_t=new TextEncoder,Pee=e=>z_t.encode(e),V_t=e=>typeof e=="boolean",$c=e=>typeof e=="function",Sx=e=>e!=null&&Object(e)===e,E9=e=>Sx(e)&&$c(e.then),Oee=e=>Sx(e)&&$c(e[Symbol.iterator]),T9=e=>Sx(e)&&$c(e[Symbol.asyncIterator]),H_t=e=>Sx(e)&&"done"in e&&"value"in e,pke=e=>"_getDOMStream"in e&&"_getNodeStream"in e,q_t=e=>Sx(e)&&$c(e.abort)&&$c(e.getWriter)&&!pke(e),W_t=e=>Sx(e)&&$c(e.end)&&$c(e.write)&&V_t(e.writable)&&!pke(e),G_t=e=>Sx(e)&&$c(e.clear)&&$c(e.bytes)&&$c(e.position)&&$c(e.setPosition)&&$c(e.capacity)&&$c(e.getBufferIdentifier)&&$c(e.createLong),Mee=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Y_t(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function a5(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function U0(e,t){const n=Y_t(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?a5(o,s,a):o=s;break}a5(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Pa(e,t){let n=H_t(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Pee(n)),n instanceof ArrayBuffer?new e(n):n instanceof Mee?new e(n):G_t(n)?Pa(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const cR=e=>Pa(Int32Array,e),Li=e=>Pa(Uint8Array,e),tY=e=>(e.next(),e);function*K_t(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Mee?n(t):Oee(t)?t:n(t);return yield*tY(function*(i){let s=null;do s=i.next(yield Pa(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const X_t=e=>K_t(Uint8Array,e);function mke(e,t){return hw(this,arguments,function*(){if(E9(t))return yield Hr(yield Hr(yield*qU(kD(mke(e,yield Hr(t))))));const r=function(o){return hw(this,arguments,function*(){yield yield Hr(yield Hr(o))})},i=function(o){return hw(this,arguments,function*(){yield Hr(yield*qU(kD(tY(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof Mee?r(t):Oee(t)?i(t):T9(t)?t:r(t);return yield Hr(yield*qU(kD(tY(function(o){return hw(this,arguments,function*(){let a=null;do a=yield Hr(o.next(yield yield Hr(Pa(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Hr(new e)})}const Q_t=e=>mke(Uint8Array,e);function gke(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function J_t(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const $pe={fromIterable(e){return c6(Z_t(e))},fromAsyncIterable(e){return c6(ewt(e))},fromDOMStream(e){return c6(twt(e))},fromNodeStream(e){return c6(rwt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},c6=e=>(e.next(),e);function*Z_t(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?U0(r,o)[0]:([i,r,a]=U0(r,o),i)}({cmd:s,size:o}=yield null);const l=X_t(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function ewt(e){return hw(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?U0(i,a)[0]:([s,i,u]=U0(i,a),s)}({cmd:o,size:a}=yield yield Hr(null));const c=Q_t(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Hr(c.next()):yield Hr(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Hr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Hr(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Hr(c.return(new Uint8Array(0))))}return yield Hr(null)})}function twt(e){return hw(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?U0(i,a)[0]:([s,i,u]=U0(i,a),s)}({cmd:o,size:a}=yield yield Hr(null));const c=new nwt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Hr(c.read()):yield Hr(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Li(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Hr(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Hr(c.cancel(f)))}finally{r===!1?yield Hr(c.cancel()):e.locked&&c.releaseLock()}return yield Hr(null)})}class nwt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return my(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return my(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Li(n)),n})}}const LV=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function rwt(e){return hw(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?U0(l,a)[0]:([c,l,u]=U0(l,a),c)}if({cmd:o,size:a}=yield yield Hr(null),e.isTTY)return yield yield Hr(new Uint8Array(0)),yield Hr(null);try{n[0]=LV(e,"end"),n[1]=LV(e,"error");do{if(n[2]=LV(e,"readable"),[r,s]=yield Hr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Li(e.read(a-u)),c.byteLength<a-u&&(c=Li(e.read()))):c=Li(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Hr(f()));while(a<u)}while(!i)}finally{yield Hr(d(n,r==="error"?s:null))}return yield Hr(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[v,b]of h)e.off(v,b);try{const v=e.destroy;v&&v.call(e,p),p=void 0}catch(v){p=v||p}finally{p!=null?g(p):m()}})}})}var Vl;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Vl||(Vl={}));var nf;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(nf||(nf={}));var wu;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(wu||(wu={}));var z0;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(z0||(z0={}));var Pn;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Pn||(Pn={}));var V0;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(V0||(V0={}));var Ma;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ma||(Ma={}));var we;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(we||(we={}));var ay;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(ay||(ay={}));const iwt=void 0;function iE(e){if(e===null)return"null";if(e===iwt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>iE(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const swt=Symbol.for("isArrowBigNum");function rm(e,...t){return t.length===0?Object.setPrototypeOf(Pa(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}rm.prototype[swt]=!0;rm.prototype.toJSON=function(){return`"${qN(this)}"`};rm.prototype.valueOf=function(){return yke(this)};rm.prototype.toString=function(){return qN(this)};rm.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return yke(this);case"string":return qN(this);case"default":return owt(this)}return qN(this)};function H2(...e){return rm.apply(this,e)}function q2(...e){return rm.apply(this,e)}function HN(...e){return rm.apply(this,e)}Object.setPrototypeOf(H2.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(q2.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(HN.prototype,Object.create(Uint32Array.prototype));Object.assign(H2.prototype,rm.prototype,{constructor:H2,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(q2.prototype,rm.prototype,{constructor:q2,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(HN.prototype,rm.prototype,{constructor:HN,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function yke(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const qN=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return $V(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return $V(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${$V(t)}`},owt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:qN(e);function $V(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class Lee{static new(t,n){switch(n){case!0:return new H2(t);case!1:return new q2(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new H2(t)}return t.byteLength===16?new HN(t):new q2(t)}static signed(t){return new H2(t)}static unsigned(t){return new q2(t)}static decimal(t){return new HN(t)}constructor(t,n){return Lee.new(t,n)}}function zp(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var vke,bke,xke,_ke,wke,Eke,Tke,Ske,Cke,Ake,Ike,kke,Rke,Dke,Nke,Pke,Oke,Mke,Lke,$ke;class or{static isNull(t){return(t==null?void 0:t.typeId)===we.Null}static isInt(t){return(t==null?void 0:t.typeId)===we.Int}static isFloat(t){return(t==null?void 0:t.typeId)===we.Float}static isBinary(t){return(t==null?void 0:t.typeId)===we.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===we.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===we.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===we.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===we.Date}static isTime(t){return(t==null?void 0:t.typeId)===we.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===we.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===we.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===we.Duration}static isList(t){return(t==null?void 0:t.typeId)===we.List}static isStruct(t){return(t==null?void 0:t.typeId)===we.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===we.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===we.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===we.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===we.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===we.Dictionary}static isDenseUnion(t){return or.isUnion(t)&&t.mode===nf.Dense}static isSparseUnion(t){return or.isUnion(t)&&t.mode===nf.Sparse}get typeId(){return we.NONE}}vke=Symbol.toStringTag;or[vke]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(or.prototype);let s1=class extends or{toString(){return"Null"}get typeId(){return we.Null}};bke=Symbol.toStringTag;s1[bke]=(e=>e[Symbol.toStringTag]="Null")(s1.prototype);class ec extends or{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return we.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}xke=Symbol.toStringTag;ec[xke]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(ec.prototype);class $ee extends ec{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Fee extends ec{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Pb extends ec{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class Bee extends ec{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class jee extends ec{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class Uee extends ec{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class zee extends ec{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class Vee extends ec{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty($ee.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Fee.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(Pb.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Bee.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(jee.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Uee.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(zee.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(Vee.prototype,"ArrayType",{value:BigUint64Array});class Ob extends or{constructor(t){super(),this.precision=t}get typeId(){return we.Float}get ArrayType(){switch(this.precision){case wu.HALF:return Uint16Array;case wu.SINGLE:return Float32Array;case wu.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}_ke=Symbol.toStringTag;Ob[_ke]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(Ob.prototype);class Fke extends Ob{constructor(){super(wu.HALF)}}class Hee extends Ob{constructor(){super(wu.SINGLE)}}class qee extends Ob{constructor(){super(wu.DOUBLE)}}Object.defineProperty(Fke.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Hee.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(qee.prototype,"ArrayType",{value:Float64Array});let WN=class extends or{constructor(){super()}get typeId(){return we.Binary}toString(){return"Binary"}};wke=Symbol.toStringTag;WN[wke]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(WN.prototype);let PC=class extends or{constructor(){super()}get typeId(){return we.Utf8}toString(){return"Utf8"}};Eke=Symbol.toStringTag;PC[Eke]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(PC.prototype);let GN=class extends or{constructor(){super()}get typeId(){return we.Bool}toString(){return"Bool"}};Tke=Symbol.toStringTag;GN[Tke]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(GN.prototype);let u5=class extends or{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return we.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};Ske=Symbol.toStringTag;u5[Ske]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(u5.prototype);class OC extends or{constructor(t){super(),this.unit=t}get typeId(){return we.Date}toString(){return`Date${(this.unit+1)*32}<${z0[this.unit]}>`}}Cke=Symbol.toStringTag;OC[Cke]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(OC.prototype);class awt extends OC{constructor(){super(z0.DAY)}}class uwt extends OC{constructor(){super(z0.MILLISECOND)}}class o1 extends or{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return we.Time}toString(){return`Time${this.bitWidth}<${Pn[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}Ake=Symbol.toStringTag;o1[Ake]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(o1.prototype);class lwt extends o1{constructor(){super(Pn.SECOND,32)}}class cwt extends o1{constructor(){super(Pn.MILLISECOND,32)}}class fwt extends o1{constructor(){super(Pn.MICROSECOND,64)}}class dwt extends o1{constructor(){super(Pn.NANOSECOND,64)}}class l5 extends or{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return we.Timestamp}toString(){return`Timestamp<${Pn[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}Ike=Symbol.toStringTag;l5[Ike]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(l5.prototype);class MC extends or{constructor(t){super(),this.unit=t}get typeId(){return we.Interval}toString(){return`Interval<${V0[this.unit]}>`}}kke=Symbol.toStringTag;MC[kke]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(MC.prototype);class hwt extends MC{constructor(){super(V0.DAY_TIME)}}class pwt extends MC{constructor(){super(V0.YEAR_MONTH)}}let c5=class extends or{constructor(t){super(),this.unit=t}get typeId(){return we.Duration}toString(){return`Duration<${Pn[this.unit]}>`}};Rke=Symbol.toStringTag;c5[Rke]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(c5.prototype);let LC=class extends or{constructor(t){super(),this.children=[t]}get typeId(){return we.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};Dke=Symbol.toStringTag;LC[Dke]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(LC.prototype);class nl extends or{constructor(t){super(),this.children=t}get typeId(){return we.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Nke=Symbol.toStringTag;nl[Nke]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(nl.prototype);class YN extends or{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return we.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}Pke=Symbol.toStringTag;YN[Pke]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(YN.prototype);let f5=class extends or{constructor(t){super(),this.byteWidth=t}get typeId(){return we.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};Oke=Symbol.toStringTag;f5[Oke]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(f5.prototype);let $C=class extends or{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return we.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};Mke=Symbol.toStringTag;$C[Mke]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))($C.prototype);class KN extends or{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return we.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}Lke=Symbol.toStringTag;KN[Lke]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(KN.prototype);const mwt=(e=>()=>++e)(-1);class Mb extends or{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?mwt():zp(r)}get typeId(){return we.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}$ke=Symbol.toStringTag;Mb[$ke]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Mb.prototype);function Gm(e){const t=e;switch(e.typeId){case we.Decimal:return e.bitWidth/32;case we.Timestamp:return 2;case we.Date:return 1+t.unit;case we.Interval:return 1+t.unit;case we.FixedSizeList:return t.listSize;case we.FixedSizeBinary:return t.byteWidth;default:return 1}}class vr{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return gwt(this,t,n)}getVisitFnByTypeId(t,n=!0){return o2(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function gwt(e,t,n=!0){return typeof t=="number"?o2(e,t,n):typeof t=="string"&&t in we?o2(e,we[t],n):t&&t instanceof or?o2(e,Fpe(t),n):t!=null&&t.type&&t.type instanceof or?o2(e,Fpe(t.type),n):o2(e,we.NONE,n)}function o2(e,t,n=!0){let r=null;switch(t){case we.Null:r=e.visitNull;break;case we.Bool:r=e.visitBool;break;case we.Int:r=e.visitInt;break;case we.Int8:r=e.visitInt8||e.visitInt;break;case we.Int16:r=e.visitInt16||e.visitInt;break;case we.Int32:r=e.visitInt32||e.visitInt;break;case we.Int64:r=e.visitInt64||e.visitInt;break;case we.Uint8:r=e.visitUint8||e.visitInt;break;case we.Uint16:r=e.visitUint16||e.visitInt;break;case we.Uint32:r=e.visitUint32||e.visitInt;break;case we.Uint64:r=e.visitUint64||e.visitInt;break;case we.Float:r=e.visitFloat;break;case we.Float16:r=e.visitFloat16||e.visitFloat;break;case we.Float32:r=e.visitFloat32||e.visitFloat;break;case we.Float64:r=e.visitFloat64||e.visitFloat;break;case we.Utf8:r=e.visitUtf8;break;case we.Binary:r=e.visitBinary;break;case we.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case we.Date:r=e.visitDate;break;case we.DateDay:r=e.visitDateDay||e.visitDate;break;case we.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case we.Timestamp:r=e.visitTimestamp;break;case we.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case we.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case we.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case we.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case we.Time:r=e.visitTime;break;case we.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case we.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case we.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case we.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case we.Decimal:r=e.visitDecimal;break;case we.List:r=e.visitList;break;case we.Struct:r=e.visitStruct;break;case we.Union:r=e.visitUnion;break;case we.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case we.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case we.Dictionary:r=e.visitDictionary;break;case we.Interval:r=e.visitInterval;break;case we.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case we.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case we.Duration:r=e.visitDuration;break;case we.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case we.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case we.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case we.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case we.FixedSizeList:r=e.visitFixedSizeList;break;case we.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${we[t]}'`)}function Fpe(e){switch(e.typeId){case we.Null:return we.Null;case we.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?we.Int8:we.Uint8;case 16:return n?we.Int16:we.Uint16;case 32:return n?we.Int32:we.Uint32;case 64:return n?we.Int64:we.Uint64}return we.Int}case we.Float:switch(e.precision){case wu.HALF:return we.Float16;case wu.SINGLE:return we.Float32;case wu.DOUBLE:return we.Float64}return we.Float;case we.Binary:return we.Binary;case we.Utf8:return we.Utf8;case we.Bool:return we.Bool;case we.Decimal:return we.Decimal;case we.Time:switch(e.unit){case Pn.SECOND:return we.TimeSecond;case Pn.MILLISECOND:return we.TimeMillisecond;case Pn.MICROSECOND:return we.TimeMicrosecond;case Pn.NANOSECOND:return we.TimeNanosecond}return we.Time;case we.Timestamp:switch(e.unit){case Pn.SECOND:return we.TimestampSecond;case Pn.MILLISECOND:return we.TimestampMillisecond;case Pn.MICROSECOND:return we.TimestampMicrosecond;case Pn.NANOSECOND:return we.TimestampNanosecond}return we.Timestamp;case we.Date:switch(e.unit){case z0.DAY:return we.DateDay;case z0.MILLISECOND:return we.DateMillisecond}return we.Date;case we.Interval:switch(e.unit){case V0.DAY_TIME:return we.IntervalDayTime;case V0.YEAR_MONTH:return we.IntervalYearMonth}return we.Interval;case we.Duration:switch(e.unit){case Pn.SECOND:return we.DurationSecond;case Pn.MILLISECOND:return we.DurationMillisecond;case Pn.MICROSECOND:return we.DurationMicrosecond;case Pn.NANOSECOND:return we.DurationNanosecond}return we.Duration;case we.Map:return we.Map;case we.List:return we.List;case we.Struct:return we.Struct;case we.Union:switch(e.mode){case nf.Dense:return we.DenseUnion;case nf.Sparse:return we.SparseUnion}return we.Union;case we.FixedSizeBinary:return we.FixedSizeBinary;case we.FixedSizeList:return we.FixedSizeList;case we.Dictionary:return we.Dictionary}throw new Error(`Unrecognized type '${we[e.typeId]}'`)}vr.prototype.visitInt8=null;vr.prototype.visitInt16=null;vr.prototype.visitInt32=null;vr.prototype.visitInt64=null;vr.prototype.visitUint8=null;vr.prototype.visitUint16=null;vr.prototype.visitUint32=null;vr.prototype.visitUint64=null;vr.prototype.visitFloat16=null;vr.prototype.visitFloat32=null;vr.prototype.visitFloat64=null;vr.prototype.visitDateDay=null;vr.prototype.visitDateMillisecond=null;vr.prototype.visitTimestampSecond=null;vr.prototype.visitTimestampMillisecond=null;vr.prototype.visitTimestampMicrosecond=null;vr.prototype.visitTimestampNanosecond=null;vr.prototype.visitTimeSecond=null;vr.prototype.visitTimeMillisecond=null;vr.prototype.visitTimeMicrosecond=null;vr.prototype.visitTimeNanosecond=null;vr.prototype.visitDenseUnion=null;vr.prototype.visitSparseUnion=null;vr.prototype.visitIntervalDayTime=null;vr.prototype.visitIntervalYearMonth=null;vr.prototype.visitDuration=null;vr.prototype.visitDurationSecond=null;vr.prototype.visitDurationMillisecond=null;vr.prototype.visitDurationMicrosecond=null;vr.prototype.visitDurationNanosecond=null;const Bke=new Float64Array(1),jS=new Uint32Array(Bke.buffer);function jke(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function Uke(e){if(e!==e)return 32256;Bke[0]=e;const t=(jS[1]&2147483648)>>16&65535;let n=jS[1]&2146435072,r=0;return n>=1089470464?jS[0]>0?n=31744:(n=(n&2080374784)>>16,r=(jS[1]&1048575)>>10):n<=1056964608?(r=1048576+(jS[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(jS[1]&1048575)+512>>10),t|n|r&65535}class Fn extends vr{}function Gn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const ywt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},Wee=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},vwt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},bwt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},zke=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},xwt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},C1=({values:e},t,n)=>{e[t]=n},Gee=({values:e},t,n)=>{e[t]=n},Vke=({values:e},t,n)=>{e[t]=Uke(n)},_wt=(e,t,n)=>{switch(e.type.precision){case wu.HALF:return Vke(e,t,n);case wu.SINGLE:case wu.DOUBLE:return Gee(e,t,n)}},Yee=({values:e},t,n)=>{ywt(e,t,n.valueOf())},Kee=({values:e},t,n)=>{Wee(e,t*2,n.valueOf())},Hke=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},wwt=({values:e,valueOffsets:t},n,r)=>zke(e,t,n,r),Ewt=({values:e,valueOffsets:t},n,r)=>{zke(e,t,n,Pee(r))},qke=(e,t,n)=>{e.type.unit===z0.DAY?Yee(e,t,n):Kee(e,t,n)},Xee=({values:e},t,n)=>Wee(e,t*2,n/1e3),Qee=({values:e},t,n)=>Wee(e,t*2,n),Jee=({values:e},t,n)=>vwt(e,t*2,n),Zee=({values:e},t,n)=>bwt(e,t*2,n),Wke=(e,t,n)=>{switch(e.type.unit){case Pn.SECOND:return Xee(e,t,n);case Pn.MILLISECOND:return Qee(e,t,n);case Pn.MICROSECOND:return Jee(e,t,n);case Pn.NANOSECOND:return Zee(e,t,n)}},ete=({values:e},t,n)=>{e[t]=n},tte=({values:e},t,n)=>{e[t]=n},nte=({values:e},t,n)=>{e[t]=n},rte=({values:e},t,n)=>{e[t]=n},Gke=(e,t,n)=>{switch(e.type.unit){case Pn.SECOND:return ete(e,t,n);case Pn.MILLISECOND:return tte(e,t,n);case Pn.MICROSECOND:return nte(e,t,n);case Pn.NANOSECOND:return rte(e,t,n)}},Yke=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},Twt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=ch.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},Swt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=ch.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},Cwt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),Awt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),Iwt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),kwt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),Rwt=(e,t,n)=>{const r=e.type.children.map(s=>ch.getVisitFn(s.type)),i=n instanceof Map?Iwt(t,n):n instanceof mi?Awt(t,n):Array.isArray(n)?Cwt(t,n):kwt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},Dwt=(e,t,n)=>{e.type.mode===nf.Dense?Kke(e,t,n):Xke(e,t,n)},Kke=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ch.visit(i,e.valueOffsets[t],n)},Xke=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ch.visit(i,t,n)},Nwt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},Qke=(e,t,n)=>{e.type.unit===V0.DAY_TIME?ite(e,t,n):ste(e,t,n)},ite=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},ste=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},ote=({values:e},t,n)=>{e[t]=n},ate=({values:e},t,n)=>{e[t]=n},ute=({values:e},t,n)=>{e[t]=n},lte=({values:e},t,n)=>{e[t]=n},Jke=(e,t,n)=>{switch(e.type.unit){case Pn.SECOND:return ote(e,t,n);case Pn.MILLISECOND:return ate(e,t,n);case Pn.MICROSECOND:return ute(e,t,n);case Pn.NANOSECOND:return lte(e,t,n)}},Pwt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=ch.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Fn.prototype.visitBool=Gn(xwt);Fn.prototype.visitInt=Gn(C1);Fn.prototype.visitInt8=Gn(C1);Fn.prototype.visitInt16=Gn(C1);Fn.prototype.visitInt32=Gn(C1);Fn.prototype.visitInt64=Gn(C1);Fn.prototype.visitUint8=Gn(C1);Fn.prototype.visitUint16=Gn(C1);Fn.prototype.visitUint32=Gn(C1);Fn.prototype.visitUint64=Gn(C1);Fn.prototype.visitFloat=Gn(_wt);Fn.prototype.visitFloat16=Gn(Vke);Fn.prototype.visitFloat32=Gn(Gee);Fn.prototype.visitFloat64=Gn(Gee);Fn.prototype.visitUtf8=Gn(Ewt);Fn.prototype.visitBinary=Gn(wwt);Fn.prototype.visitFixedSizeBinary=Gn(Hke);Fn.prototype.visitDate=Gn(qke);Fn.prototype.visitDateDay=Gn(Yee);Fn.prototype.visitDateMillisecond=Gn(Kee);Fn.prototype.visitTimestamp=Gn(Wke);Fn.prototype.visitTimestampSecond=Gn(Xee);Fn.prototype.visitTimestampMillisecond=Gn(Qee);Fn.prototype.visitTimestampMicrosecond=Gn(Jee);Fn.prototype.visitTimestampNanosecond=Gn(Zee);Fn.prototype.visitTime=Gn(Gke);Fn.prototype.visitTimeSecond=Gn(ete);Fn.prototype.visitTimeMillisecond=Gn(tte);Fn.prototype.visitTimeMicrosecond=Gn(nte);Fn.prototype.visitTimeNanosecond=Gn(rte);Fn.prototype.visitDecimal=Gn(Yke);Fn.prototype.visitList=Gn(Twt);Fn.prototype.visitStruct=Gn(Rwt);Fn.prototype.visitUnion=Gn(Dwt);Fn.prototype.visitDenseUnion=Gn(Kke);Fn.prototype.visitSparseUnion=Gn(Xke);Fn.prototype.visitDictionary=Gn(Nwt);Fn.prototype.visitInterval=Gn(Qke);Fn.prototype.visitIntervalDayTime=Gn(ite);Fn.prototype.visitIntervalYearMonth=Gn(ste);Fn.prototype.visitDuration=Gn(Jke);Fn.prototype.visitDurationSecond=Gn(ote);Fn.prototype.visitDurationMillisecond=Gn(ate);Fn.prototype.visitDurationMicrosecond=Gn(ute);Fn.prototype.visitDurationNanosecond=Gn(lte);Fn.prototype.visitFixedSizeList=Gn(Pwt);Fn.prototype.visitMap=Gn(Swt);const ch=new Fn,fp=Symbol.for("parent"),W2=Symbol.for("rowIndex");class cte{constructor(t,n){return this[fp]=t,this[W2]=n,new Proxy(this,new Mwt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[W2],n=this[fp],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=rf.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${iE(t)}: ${iE(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Owt(this[fp],this[W2])}}class Owt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,rf.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(cte.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[fp]:{writable:!0,enumerable:!1,configurable:!1,value:null},[W2]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Mwt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[fp].type.children.map(n=>n.name)}has(t,n){return t[fp].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[fp].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[fp].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=rf.visit(t[fp].children[r],t[W2]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[fp].type.children.findIndex(s=>s.name===n);return i!==-1?(ch.visit(t[fp].children[i],t[W2],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class On extends vr{}function Bn(e){return(t,n)=>t.getValid(n)?e(t,n):null}const Lwt=(e,t)=>864e5*e[t],fte=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),$wt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,Fwt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,Zke=e=>new Date(e),Bwt=(e,t)=>Zke(Lwt(e,t)),jwt=(e,t)=>Zke(fte(e,t)),Uwt=(e,t)=>null,eRe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},zwt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},tRe=({values:e},t)=>Bwt(e,t),nRe=({values:e},t)=>jwt(e,t*2),Cx=({stride:e,values:t},n)=>t[e*n],Vwt=({stride:e,values:t},n)=>jke(t[e*n]),rRe=({values:e},t)=>e[t],Hwt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),qwt=({values:e,valueOffsets:t},n)=>eRe(e,t,n),Wwt=({values:e,valueOffsets:t},n)=>{const r=eRe(e,t,n);return r!==null?eY(r):null},Gwt=({values:e},t)=>e[t],Ywt=({type:e,values:t},n)=>e.precision!==wu.HALF?t[n]:jke(t[n]),Kwt=(e,t)=>e.type.unit===z0.DAY?tRe(e,t):nRe(e,t),iRe=({values:e},t)=>1e3*fte(e,t*2),sRe=({values:e},t)=>fte(e,t*2),oRe=({values:e},t)=>$wt(e,t*2),aRe=({values:e},t)=>Fwt(e,t*2),Xwt=(e,t)=>{switch(e.type.unit){case Pn.SECOND:return iRe(e,t);case Pn.MILLISECOND:return sRe(e,t);case Pn.MICROSECOND:return oRe(e,t);case Pn.NANOSECOND:return aRe(e,t)}},uRe=({values:e},t)=>e[t],lRe=({values:e},t)=>e[t],cRe=({values:e},t)=>e[t],fRe=({values:e},t)=>e[t],Qwt=(e,t)=>{switch(e.type.unit){case Pn.SECOND:return uRe(e,t);case Pn.MILLISECOND:return lRe(e,t);case Pn.MICROSECOND:return cRe(e,t);case Pn.NANOSECOND:return fRe(e,t)}},Jwt=({values:e,stride:t},n)=>Lee.decimal(e.subarray(t*n,t*(n+1))),Zwt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new mi([u])},eEt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new S9(o.slice(i,s-i))},tEt=(e,t)=>new cte(e,t),nEt=(e,t)=>e.type.mode===nf.Dense?dRe(e,t):hRe(e,t),dRe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return rf.visit(r,e.valueOffsets[t])},hRe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return rf.visit(r,t)},rEt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},iEt=(e,t)=>e.type.unit===V0.DAY_TIME?pRe(e,t):mRe(e,t),pRe=({values:e},t)=>e.subarray(2*t,2*(t+1)),mRe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},gRe=({values:e},t)=>e[t],yRe=({values:e},t)=>e[t],vRe=({values:e},t)=>e[t],bRe=({values:e},t)=>e[t],sEt=(e,t)=>{switch(e.type.unit){case Pn.SECOND:return gRe(e,t);case Pn.MILLISECOND:return yRe(e,t);case Pn.MICROSECOND:return vRe(e,t);case Pn.NANOSECOND:return bRe(e,t)}},oEt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new mi([s])};On.prototype.visitNull=Bn(Uwt);On.prototype.visitBool=Bn(zwt);On.prototype.visitInt=Bn(Gwt);On.prototype.visitInt8=Bn(Cx);On.prototype.visitInt16=Bn(Cx);On.prototype.visitInt32=Bn(Cx);On.prototype.visitInt64=Bn(rRe);On.prototype.visitUint8=Bn(Cx);On.prototype.visitUint16=Bn(Cx);On.prototype.visitUint32=Bn(Cx);On.prototype.visitUint64=Bn(rRe);On.prototype.visitFloat=Bn(Ywt);On.prototype.visitFloat16=Bn(Vwt);On.prototype.visitFloat32=Bn(Cx);On.prototype.visitFloat64=Bn(Cx);On.prototype.visitUtf8=Bn(Wwt);On.prototype.visitBinary=Bn(qwt);On.prototype.visitFixedSizeBinary=Bn(Hwt);On.prototype.visitDate=Bn(Kwt);On.prototype.visitDateDay=Bn(tRe);On.prototype.visitDateMillisecond=Bn(nRe);On.prototype.visitTimestamp=Bn(Xwt);On.prototype.visitTimestampSecond=Bn(iRe);On.prototype.visitTimestampMillisecond=Bn(sRe);On.prototype.visitTimestampMicrosecond=Bn(oRe);On.prototype.visitTimestampNanosecond=Bn(aRe);On.prototype.visitTime=Bn(Qwt);On.prototype.visitTimeSecond=Bn(uRe);On.prototype.visitTimeMillisecond=Bn(lRe);On.prototype.visitTimeMicrosecond=Bn(cRe);On.prototype.visitTimeNanosecond=Bn(fRe);On.prototype.visitDecimal=Bn(Jwt);On.prototype.visitList=Bn(Zwt);On.prototype.visitStruct=Bn(tEt);On.prototype.visitUnion=Bn(nEt);On.prototype.visitDenseUnion=Bn(dRe);On.prototype.visitSparseUnion=Bn(hRe);On.prototype.visitDictionary=Bn(rEt);On.prototype.visitInterval=Bn(iEt);On.prototype.visitIntervalDayTime=Bn(pRe);On.prototype.visitIntervalYearMonth=Bn(mRe);On.prototype.visitDuration=Bn(sEt);On.prototype.visitDurationSecond=Bn(gRe);On.prototype.visitDurationMillisecond=Bn(yRe);On.prototype.visitDurationMicrosecond=Bn(vRe);On.prototype.visitDurationNanosecond=Bn(bRe);On.prototype.visitFixedSizeList=Bn(oEt);On.prototype.visitMap=Bn(eEt);const rf=new On,_p=Symbol.for("keys"),G2=Symbol.for("vals");class S9{constructor(t){return this[_p]=new mi([t.children[0]]).memoize(),this[G2]=t.children[1],new Proxy(this,new uEt)}[Symbol.iterator](){return new aEt(this[_p],this[G2])}get size(){return this[_p].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[_p],n=this[G2],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=rf.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${iE(t)}: ${iE(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class aEt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),rf.visit(this.vals,t)]})}}class uEt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[_p].toArray().map(String)}has(t,n){return t[_p].includes(n)}getOwnPropertyDescriptor(t,n){if(t[_p].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[_p].indexOf(n);if(r!==-1){const i=rf.visit(Reflect.get(t,G2),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[_p].indexOf(n);return i!==-1?(ch.visit(Reflect.get(t,G2),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(S9.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[_p]:{writable:!0,enumerable:!1,configurable:!1,value:null},[G2]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Bpe;function xRe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Bpe=s,s=o,o=Bpe),o>i&&(o=i),r?r(e,s,o):[s,o]}const jpe=e=>e!==e;function tI(e){if(typeof e!=="object"||e===null)return jpe(e)?jpe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?J_t(e,n):!1:e instanceof Map?cEt(e):Array.isArray(e)?lEt(e):e instanceof mi?fEt(e):dEt(e,!0)}function lEt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=tI(e[n]);return C9(t)}function cEt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=tI(r);return C9(n)}function fEt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=tI(e.get(n));return C9(t)}function dEt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=tI(e[n[i]]);return C9(r,n)}function C9(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return hEt(e,n);case Map:return Upe(e,n,n.keys());case S9:case cte:case Object:case void 0:return Upe(e,n,t||Object.keys(n))}return n instanceof mi?pEt(e,n):!1}}function hEt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function pEt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Upe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function _Re(e,t,n,r){return(n&1<<r)!==0}function mEt(e,t,n,r){return(n&1<<r)>>r}function d5(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):wRe(new dte(n,e,t,null,_Re)).subarray(0,r)),i}return n}function wRe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class dte{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function nY(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new dte(e,t,n-t,e,mEt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return nY(e,t,i)+nY(e,r,n)+gEt(e,i>>3,r-i>>3)}function gEt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=FV(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=FV(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=FV(s.getUint8(i)),i+=1;return r}function FV(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const yEt=-1;class Mi{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return or.isSparseUnion(t)?this.children.some(n=>n.nullable):or.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(or.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=yEt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-nY(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Mi?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Gm(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(or.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===nf.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(or.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===nf.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(d5(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Mi(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===we.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(d5(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[ay.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[ay.TYPE])&&(o[ay.TYPE]=s.subarray(t,t+n)),(s=o[ay.OFFSET])&&(o[ay.OFFSET]=s.subarray(t,t+n+1))||(s=o[ay.DATA])&&(o[ay.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Mi.prototype.children=Object.freeze([]);class YD extends vr{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Mi(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Pa(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Pa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Pa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.data),s=Li(t.nullBitmap),o=cR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.data),s=Li(t.nullBitmap),o=cR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Pa(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Pa(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Pa(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Pa(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Pa(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Li(t.nullBitmap),o=cR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Li(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Pa(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(or.isSparseUnion(n))return new Mi(n,r,o,a,[void 0,void 0,void 0,s],i);const u=cR(t.valueOffsets);return new Mi(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Pa(n.indices.ArrayType,t.data),{["dictionary"]:o=new mi([new YD().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Pa(n.ArrayType,t.data),{["length"]:o=s.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Li(t.nullBitmap),s=Pa(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new YD().visit({type:n.valueType})}=t,s=Li(t.nullBitmap),{["length"]:o=i.length/Gm(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Mi(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new YD().visit({type:n.childType})}=t,s=Li(t.nullBitmap),o=cR(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Mi(n,r,a,u,[o,void 0,s],[i])}}const vEt=new YD;function Zu(e){return vEt.visit(e)}class zpe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function ERe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function TRe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function SRe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function hte(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function pte(e,t){return e.getValid(t)}function Y2(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return hte(r,this._offsets,n,t)}}function CRe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=hte(s,this._offsets,r,n);return t=void 0,o}}function ARe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):hte(s,this._offsets,i,n);return t=void 0,o}}class Mn extends vr{}function bEt(e,t){return t===null&&e.length>0?0:-1}function xEt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new dte(n,e.offset+(t||0),e.length,n,_Re)){if(!i)return r;++r}return-1}function er(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case we.Union:break;case we.Dictionary:break;default:return xEt(e,n)}const r=rf.getVisitFn(e),i=tI(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function IRe(e,t,n){const r=rf.getVisitFn(e),i=tI(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Mn.prototype.visitNull=bEt;Mn.prototype.visitBool=er;Mn.prototype.visitInt=er;Mn.prototype.visitInt8=er;Mn.prototype.visitInt16=er;Mn.prototype.visitInt32=er;Mn.prototype.visitInt64=er;Mn.prototype.visitUint8=er;Mn.prototype.visitUint16=er;Mn.prototype.visitUint32=er;Mn.prototype.visitUint64=er;Mn.prototype.visitFloat=er;Mn.prototype.visitFloat16=er;Mn.prototype.visitFloat32=er;Mn.prototype.visitFloat64=er;Mn.prototype.visitUtf8=er;Mn.prototype.visitBinary=er;Mn.prototype.visitFixedSizeBinary=er;Mn.prototype.visitDate=er;Mn.prototype.visitDateDay=er;Mn.prototype.visitDateMillisecond=er;Mn.prototype.visitTimestamp=er;Mn.prototype.visitTimestampSecond=er;Mn.prototype.visitTimestampMillisecond=er;Mn.prototype.visitTimestampMicrosecond=er;Mn.prototype.visitTimestampNanosecond=er;Mn.prototype.visitTime=er;Mn.prototype.visitTimeSecond=er;Mn.prototype.visitTimeMillisecond=er;Mn.prototype.visitTimeMicrosecond=er;Mn.prototype.visitTimeNanosecond=er;Mn.prototype.visitDecimal=er;Mn.prototype.visitList=er;Mn.prototype.visitStruct=er;Mn.prototype.visitUnion=er;Mn.prototype.visitDenseUnion=IRe;Mn.prototype.visitSparseUnion=IRe;Mn.prototype.visitDictionary=er;Mn.prototype.visitInterval=er;Mn.prototype.visitIntervalDayTime=er;Mn.prototype.visitIntervalYearMonth=er;Mn.prototype.visitDuration=er;Mn.prototype.visitDurationSecond=er;Mn.prototype.visitDurationMillisecond=er;Mn.prototype.visitDurationMicrosecond=er;Mn.prototype.visitDurationNanosecond=er;Mn.prototype.visitFixedSizeList=er;Mn.prototype.visitMap=er;const h5=new Mn;class Ln extends vr{}function jn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===we.Timestamp||t instanceof ec&&t.bitWidth!==64||t instanceof o1&&t.bitWidth!==64||t instanceof Ob&&t.precision!==wu.HALF))return new zpe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new zpe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new _Et(o)})}class _Et{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Ln.prototype.visitNull=jn;Ln.prototype.visitBool=jn;Ln.prototype.visitInt=jn;Ln.prototype.visitInt8=jn;Ln.prototype.visitInt16=jn;Ln.prototype.visitInt32=jn;Ln.prototype.visitInt64=jn;Ln.prototype.visitUint8=jn;Ln.prototype.visitUint16=jn;Ln.prototype.visitUint32=jn;Ln.prototype.visitUint64=jn;Ln.prototype.visitFloat=jn;Ln.prototype.visitFloat16=jn;Ln.prototype.visitFloat32=jn;Ln.prototype.visitFloat64=jn;Ln.prototype.visitUtf8=jn;Ln.prototype.visitBinary=jn;Ln.prototype.visitFixedSizeBinary=jn;Ln.prototype.visitDate=jn;Ln.prototype.visitDateDay=jn;Ln.prototype.visitDateMillisecond=jn;Ln.prototype.visitTimestamp=jn;Ln.prototype.visitTimestampSecond=jn;Ln.prototype.visitTimestampMillisecond=jn;Ln.prototype.visitTimestampMicrosecond=jn;Ln.prototype.visitTimestampNanosecond=jn;Ln.prototype.visitTime=jn;Ln.prototype.visitTimeSecond=jn;Ln.prototype.visitTimeMillisecond=jn;Ln.prototype.visitTimeMicrosecond=jn;Ln.prototype.visitTimeNanosecond=jn;Ln.prototype.visitDecimal=jn;Ln.prototype.visitList=jn;Ln.prototype.visitStruct=jn;Ln.prototype.visitUnion=jn;Ln.prototype.visitDenseUnion=jn;Ln.prototype.visitSparseUnion=jn;Ln.prototype.visitDictionary=jn;Ln.prototype.visitInterval=jn;Ln.prototype.visitIntervalDayTime=jn;Ln.prototype.visitIntervalYearMonth=jn;Ln.prototype.visitDuration=jn;Ln.prototype.visitDurationSecond=jn;Ln.prototype.visitDurationMillisecond=jn;Ln.prototype.visitDurationMicrosecond=jn;Ln.prototype.visitDurationNanosecond=jn;Ln.prototype.visitFixedSizeList=jn;Ln.prototype.visitMap=jn;const mte=new Ln,wEt=(e,t)=>e+t;class Ax extends vr{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Pn.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+H0.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+H0.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const EEt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),TEt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),SEt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=H0.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},CEt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=H0.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},AEt=(e,t)=>e.type.mode===nf.Dense?kRe(e,t):RRe(e,t),kRe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+H0.visit(t[s],r[i])},RRe=({children:e},t)=>4+H0.visitMany(e,e.map(()=>t)).reduce(wEt,0);Ax.prototype.visitUtf8=EEt;Ax.prototype.visitBinary=TEt;Ax.prototype.visitList=SEt;Ax.prototype.visitFixedSizeList=CEt;Ax.prototype.visitUnion=AEt;Ax.prototype.visitDenseUnion=kRe;Ax.prototype.visitSparseUnion=RRe;const H0=new Ax;var DRe;const NRe={},PRe={};class mi{constructor(t){var n,r,i;const s=t[0]instanceof mi?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Mi)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=NRe[o.typeId],f=s[0];this.isValid=d=>pte(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,PRe[o.typeId]),this._offsets=TRe(s);break}this.data=s,this.type=o,this.stride=Gm(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return ERe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${we[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return mte.visit(this)}concat(...t){return new mi(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new mi(xRe(this,t,n,({data:r,_offsets:i},s,o)=>SRe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case we.Int:case we.Float:case we.Decimal:case we.Time:case we.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new mi(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return or.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(or.isDictionary(this.type)){const t=new p5(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mi(n)}return new p5(this)}unmemoize(){if(or.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mi(n)}return this}}DRe=Symbol.toStringTag;mi[DRe]=(e=>{e.type=or.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(we).map(n=>we[n]).filter(n=>typeof n=="number"&&n!==we.NONE);for(const n of t){const r=rf.getVisitFnByTypeId(n),i=ch.getVisitFnByTypeId(n),s=h5.getVisitFnByTypeId(n),o=H0.getVisitFnByTypeId(n);NRe[n]={get:r,set:i,indexOf:s,byteLength:o},PRe[n]=Object.create(e,{isValid:{value:Y2(pte)},get:{value:Y2(rf.getVisitFnByTypeId(n))},set:{value:CRe(ch.getVisitFnByTypeId(n))},indexOf:{value:ARe(h5.getVisitFnByTypeId(n))},getByteLength:{value:Y2(H0.getVisitFnByTypeId(n))}})}return"Vector"})(mi.prototype);class p5 extends mi{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new p5(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new mi(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function IEt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${kEt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function kEt(e){return typeof e!="bigint"?iE(e):`${iE(e)}n`}const BV=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,REt=(e,t=0)=>e.length>=t?e.subarray(0,t):a5(new e.constructor(t),e,0);class A9{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?BV(r*1,this.BYTES_PER_ELEMENT):BV(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=BV(t*this.stride,this.BYTES_PER_ELEMENT);const n=REt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=a5(new this.ArrayType(t),this.buffer)}}A9.prototype.offset=0;class b3 extends A9{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class ORe extends b3{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class MRe extends b3{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let hf=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Gm(t),this._nulls=new ORe,n&&n.length>0&&(this._isValid=IEt(n))}toVector(){return new mi([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),Zu({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};hf.prototype.length=1;hf.prototype.stride=1;hf.prototype.children=null;hf.prototype.finished=!1;hf.prototype.nullValues=null;hf.prototype._isValid=()=>!0;class A1 extends hf{constructor(t){super(t),this._values=new b3(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class I9 extends hf{constructor(t){super(t),this._pendingLength=0,this._offsets=new MRe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof S9?n[_p].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class rY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const jV=2,r0=4,by=4,Xi=4,Mv=new Int32Array(2),Vpe=new Float32Array(Mv.buffer),Hpe=new Float64Array(Mv.buffer),f6=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var iY;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(iY||(iY={}));let m5=class LRe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new LRe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Mv[0]=this.readInt32(t),Vpe[0]}readFloat64(t){return Mv[f6?0:1]=this.readInt32(t),Mv[f6?1:0]=this.readInt32(t+4),Hpe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Vpe[0]=n,this.writeInt32(t,Mv[0])}writeFloat64(t,n){Hpe[0]=n,this.writeInt32(t,Mv[f6?0:1]),this.writeInt32(t+4,Mv[f6?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+r0+by)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<by;n++)t+=String.fromCharCode(this.readInt8(this.position_+r0+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=r0;const i=this.bytes_.subarray(t,t+r);return n===iY.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+r0}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=by)throw new Error("FlatBuffers: file identifier must be length "+by);for(let n=0;n<by;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+r0+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},$Re=class FRe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=m5.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=FRe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=m5.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(r0,0),this.writeInt32(this.offset()-t+r0)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*jV;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=jV;l<s;l+=jV)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Xi:0;if(n){const s=n;if(this.prep(this.minalign,r0+by+i),s.length!=by)throw new TypeError("FlatBuffers: file identifier must be length "+by);for(let o=by-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,r0+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(r0,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class sa{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new sa).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Xi),(n||new sa).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return sa.startKeyValue(t),sa.addKey(t,n),sa.addValue(t,r),sa.endKeyValue(t)}}var FC;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(FC||(FC={}));var BC;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(BC||(BC={}));var g5;(function(e){e[e.DenseArray=0]="DenseArray"})(g5||(g5={}));class Wf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Wf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Xi),(n||new Wf).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Wf.startInt(t),Wf.addBitWidth(t,n),Wf.addIsSigned(t,r),Wf.endInt(t)}}class xy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new xy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Xi),(n||new xy).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Wf).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):g5.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,g5.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Ew{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Ew).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Xi),(n||new Ew).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Ew.startBinary(t),Ew.endBinary(t)}}class Tw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Tw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Xi),(n||new Tw).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Tw.startBool(t),Tw.endBool(t)}}var y5;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(y5||(y5={}));let QL=class a2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new a2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Xi),(n||new a2).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):y5.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,y5.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return a2.startDate(t),a2.addUnit(t,n),a2.endDate(t)}};class Fc{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Fc).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Xi),(n||new Fc).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Fc.startDecimal(t),Fc.addPrecision(t,n),Fc.addScale(t,r),Fc.addBitWidth(t,i),Fc.endDecimal(t)}}var Lb;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Lb||(Lb={}));class i0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new i0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Xi),(n||new i0).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Lb.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Lb.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return i0.startDuration(t),i0.addUnit(t,n),i0.endDuration(t)}}class s0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new s0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Xi),(n||new s0).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return s0.startFixedSizeBinary(t),s0.addByteWidth(t,n),s0.endFixedSizeBinary(t)}}class o0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new o0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Xi),(n||new o0).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return o0.startFixedSizeList(t),o0.addListSize(t,n),o0.endFixedSizeList(t)}}var v5;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(v5||(v5={}));class a0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new a0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Xi),(n||new a0).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):v5.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,v5.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return a0.startFloatingPoint(t),a0.addPrecision(t,n),a0.endFloatingPoint(t)}}var b5;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(b5||(b5={}));class u0{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new u0).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Xi),(n||new u0).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):b5.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,b5.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return u0.startInterval(t),u0.addUnit(t,n),u0.endInterval(t)}}class Sw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new Sw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Xi),(n||new Sw).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Sw.startList(t),Sw.endList(t)}}let JL=class u2{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new u2).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Xi),(n||new u2).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return u2.startMap(t),u2.addKeysSorted(t,n),u2.endMap(t)}};class Cw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Cw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Xi),(n||new Cw).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Cw.startNull(t),Cw.endNull(t)}}class Aw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Aw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Xi),(n||new Aw).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Aw.startStruct_(t),Aw.endStruct_(t)}}let iD=class J_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new J_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Xi),(n||new J_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Lb.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Lb.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return J_.startTime(t),J_.addUnit(t,n),J_.addBitWidth(t,r),J_.endTime(t)}},sD=class Z_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Z_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Xi),(n||new Z_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Lb.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Lb.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Z_.startTimestamp(t),Z_.addUnit(t,n),Z_.addTimezone(t,r),Z_.endTimestamp(t)}};var x5;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(x5||(x5={}));let ew=class tw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new tw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Xi),(n||new tw).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):x5.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,x5.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return tw.startUnion(t),tw.addMode(t,n),tw.addTypeIds(t,r),tw.endUnion(t)}};class Iw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Iw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Xi),(n||new Iw).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Iw.startUtf8(t),Iw.endUtf8(t)}}var Ds;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Ds||(Ds={}));let Gd=class ZL{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new ZL).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Xi),(n||new ZL).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Ds.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new xy).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new ZL).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Ds.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},qm=class oy{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new oy).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Xi),(n||new oy).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):BC.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Gd).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,BC.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return oy.startSchema(t),oy.addEndianness(t,n),oy.addFields(t,r),oy.addCustomMetadata(t,i),oy.addFeatures(t,s),oy.endSchema(t)}};class zf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new zf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Xi),(n||new zf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):FC.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new qm).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new rY).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new rY).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,FC.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Ri{constructor(t=[],n,r,i=Vl.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=oY(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Ri(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Ri(n,this.metadata)}assign(...t){const n=t[0]instanceof Ri?t[0]:Array.isArray(t[0])?new Ri(t[0]):new Ri(t),r=[...this.fields],i=d6(d6(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:d6(d6(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=oY(s,new Map);return new Ri([...r,...s],i,new Map([...this.dictionaries,...o]))}}Ri.prototype.fields=null;Ri.prototype.metadata=null;Ri.prototype.dictionaries=null;let Wi=class sY{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new sY(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],sY.new(n,r,i,s)}};Wi.prototype.type=null;Wi.prototype.name=null;Wi.prototype.nullable=null;Wi.prototype.metadata=null;function d6(e,t){return new Map([...e||new Map,...t||new Map])}function oY(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(or.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&oY(s.children,t)}return t}var DEt=$Re,NEt=m5;class aY{static decode(t){t=new NEt(Li(t));const n=zf.getRootAsFooter(t),r=Ri.decode(n.schema(),new Map,n.version());return new PEt(r,n)}static encode(t){const n=new DEt,r=Ri.encode(n,t.schema);zf.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())$b.encode(n,o);const i=n.endVector();zf.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())$b.encode(n,o);const s=n.endVector();return zf.startFooter(n),zf.addSchema(n,r),zf.addVersion(n,Vl.V5),zf.addRecordBatches(n,i),zf.addDictionaries(n,s),zf.finishFooterBuffer(n,zf.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Vl.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class PEt extends aY{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return $b.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return $b.decode(n)}return null}}class $b{static decode(t){return new $b(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return rY.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=zp(r),this.bodyLength=zp(n)}}const h6=Object.freeze({done:!0,value:void 0});class BRe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class OEt extends BRe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return my(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(h6);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return $pe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return $pe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return my(this,void 0,void 0,function*(){return yield this.abort(t),h6})}return(t){return my(this,void 0,void 0,function*(){return yield this.close(),h6})}read(t){return my(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return my(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(h6)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class UV extends OEt{write(t){if((t=Li(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?eY(this.toUint8Array(!0)):this.toUint8Array(!1).then(eY)}toUint8Array(t=!1){return t?U0(this._values)[0]:my(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=kD(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return U0(o,a)[0]})}}class jRe extends I9{constructor(t){super(t),this._values=new A9(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Li(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class MEt extends hf{constructor(t){super(t),this._values=new ORe}setValue(t,n){this._values.set(t,+n)}}class k9 extends A1{}k9.prototype._setValue=qke;class URe extends k9{}URe.prototype._setValue=Yee;class zRe extends k9{}zRe.prototype._setValue=Kee;class VRe extends A1{}VRe.prototype._setValue=Yke;class LEt extends hf{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Mb(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=_5({type:this.type.indices,nullValues:n}),this.dictionary=_5({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class HRe extends A1{}HRe.prototype._setValue=Hke;class $Et extends hf{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new $C(this.type.listSize,new Wi(n,t.type,!0)),r}}class R9 extends A1{setValue(t,n){this._values.set(t,n)}}class FEt extends R9{setValue(t,n){super.setValue(t,Uke(n))}}class BEt extends R9{}class jEt extends R9{}class D9 extends A1{}D9.prototype._setValue=Qke;class qRe extends D9{}qRe.prototype._setValue=ite;class WRe extends D9{}WRe.prototype._setValue=ste;class nI extends A1{}nI.prototype._setValue=Jke;class GRe extends nI{}GRe.prototype._setValue=ote;class YRe extends nI{}YRe.prototype._setValue=ate;class KRe extends nI{}KRe.prototype._setValue=ute;class XRe extends nI{}XRe.prototype._setValue=lte;class I1 extends A1{setValue(t,n){this._values.set(t,n)}}class UEt extends I1{}class zEt extends I1{}class VEt extends I1{}class HEt extends I1{}class qEt extends I1{}class WEt extends I1{}class GEt extends I1{}class YEt extends I1{}class KEt extends I9{constructor(t){super(t),this._offsets=new MRe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new LC(new Wi(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class XEt extends I9{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new KN(new Wi(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class QEt extends hf{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class JEt extends hf{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new nl([...this.type.children,new Wi(n,t.type,!0)]),r}}class rI extends A1{}rI.prototype._setValue=Wke;class QRe extends rI{}QRe.prototype._setValue=Xee;class JRe extends rI{}JRe.prototype._setValue=Qee;class ZRe extends rI{}ZRe.prototype._setValue=Jee;class eDe extends rI{}eDe.prototype._setValue=Zee;class iI extends A1{}iI.prototype._setValue=Gke;class tDe extends iI{}tDe.prototype._setValue=ete;class nDe extends iI{}nDe.prototype._setValue=tte;class rDe extends iI{}rDe.prototype._setValue=nte;class iDe extends iI{}iDe.prototype._setValue=rte;class gte extends hf{constructor(t){super(t),this._typeIds=new b3(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Wi(n,t.type)];return this.type=new YN(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class ZEt extends gte{}class eTt extends gte{constructor(t){super(t),this._offsets=new b3(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class sDe extends I9{constructor(t){super(t),this._values=new A9(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Pee(n))}_flushPending(t,n){}}sDe.prototype._flushPending=jRe.prototype._flushPending;class tTt extends vr{visitNull(){return QEt}visitBool(){return MEt}visitInt(){return I1}visitInt8(){return UEt}visitInt16(){return zEt}visitInt32(){return VEt}visitInt64(){return HEt}visitUint8(){return qEt}visitUint16(){return WEt}visitUint32(){return GEt}visitUint64(){return YEt}visitFloat(){return R9}visitFloat16(){return FEt}visitFloat32(){return BEt}visitFloat64(){return jEt}visitUtf8(){return sDe}visitBinary(){return jRe}visitFixedSizeBinary(){return HRe}visitDate(){return k9}visitDateDay(){return URe}visitDateMillisecond(){return zRe}visitTimestamp(){return rI}visitTimestampSecond(){return QRe}visitTimestampMillisecond(){return JRe}visitTimestampMicrosecond(){return ZRe}visitTimestampNanosecond(){return eDe}visitTime(){return iI}visitTimeSecond(){return tDe}visitTimeMillisecond(){return nDe}visitTimeMicrosecond(){return rDe}visitTimeNanosecond(){return iDe}visitDecimal(){return VRe}visitList(){return KEt}visitStruct(){return JEt}visitUnion(){return gte}visitDenseUnion(){return eTt}visitSparseUnion(){return ZEt}visitDictionary(){return LEt}visitInterval(){return D9}visitIntervalDayTime(){return qRe}visitIntervalYearMonth(){return WRe}visitDuration(){return nI}visitDurationSecond(){return GRe}visitDurationMillisecond(){return YRe}visitDurationMicrosecond(){return KRe}visistDurationNanosecond(){return XRe}visitFixedSizeList(){return $Et}visitMap(){return XEt}}const nTt=new tTt;class $n extends vr{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function rc(e,t){return t instanceof e.constructor}function x3(e,t){return e===t||rc(e,t)}function k1(e,t){return e===t||rc(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function N9(e,t){return e===t||rc(e,t)&&e.precision===t.precision}function rTt(e,t){return e===t||rc(e,t)&&e.byteWidth===t.byteWidth}function yte(e,t){return e===t||rc(e,t)&&e.unit===t.unit}function _3(e,t){return e===t||rc(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function w3(e,t){return e===t||rc(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function iTt(e,t){return e===t||rc(e,t)&&e.children.length===t.children.length&&Fb.compareManyFields(e.children,t.children)}function sTt(e,t){return e===t||rc(e,t)&&e.children.length===t.children.length&&Fb.compareManyFields(e.children,t.children)}function vte(e,t){return e===t||rc(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Fb.compareManyFields(e.children,t.children)}function oTt(e,t){return e===t||rc(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Fb.visit(e.indices,t.indices)&&Fb.visit(e.dictionary,t.dictionary)}function bte(e,t){return e===t||rc(e,t)&&e.unit===t.unit}function E3(e,t){return e===t||rc(e,t)&&e.unit===t.unit}function aTt(e,t){return e===t||rc(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Fb.compareManyFields(e.children,t.children)}function uTt(e,t){return e===t||rc(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Fb.compareManyFields(e.children,t.children)}$n.prototype.visitNull=x3;$n.prototype.visitBool=x3;$n.prototype.visitInt=k1;$n.prototype.visitInt8=k1;$n.prototype.visitInt16=k1;$n.prototype.visitInt32=k1;$n.prototype.visitInt64=k1;$n.prototype.visitUint8=k1;$n.prototype.visitUint16=k1;$n.prototype.visitUint32=k1;$n.prototype.visitUint64=k1;$n.prototype.visitFloat=N9;$n.prototype.visitFloat16=N9;$n.prototype.visitFloat32=N9;$n.prototype.visitFloat64=N9;$n.prototype.visitUtf8=x3;$n.prototype.visitBinary=x3;$n.prototype.visitFixedSizeBinary=rTt;$n.prototype.visitDate=yte;$n.prototype.visitDateDay=yte;$n.prototype.visitDateMillisecond=yte;$n.prototype.visitTimestamp=_3;$n.prototype.visitTimestampSecond=_3;$n.prototype.visitTimestampMillisecond=_3;$n.prototype.visitTimestampMicrosecond=_3;$n.prototype.visitTimestampNanosecond=_3;$n.prototype.visitTime=w3;$n.prototype.visitTimeSecond=w3;$n.prototype.visitTimeMillisecond=w3;$n.prototype.visitTimeMicrosecond=w3;$n.prototype.visitTimeNanosecond=w3;$n.prototype.visitDecimal=x3;$n.prototype.visitList=iTt;$n.prototype.visitStruct=sTt;$n.prototype.visitUnion=vte;$n.prototype.visitDenseUnion=vte;$n.prototype.visitSparseUnion=vte;$n.prototype.visitDictionary=oTt;$n.prototype.visitInterval=bte;$n.prototype.visitIntervalDayTime=bte;$n.prototype.visitIntervalYearMonth=bte;$n.prototype.visitDuration=E3;$n.prototype.visitDurationSecond=E3;$n.prototype.visitDurationMillisecond=E3;$n.prototype.visitDurationMicrosecond=E3;$n.prototype.visitDurationNanosecond=E3;$n.prototype.visitFixedSizeList=aTt;$n.prototype.visitMap=uTt;const Fb=new $n;function uY(e,t){return Fb.compareSchemas(e,t)}function _5(e){const t=e.type,n=new(nTt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(_5(Object.assign(Object.assign({},l),{type:u})))}}return n}function zV(e,t){return lTt(e,t.map(n=>n.data.concat()))}function lTt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=cTt(n,o,c,t,i),o>0&&(r[s++]=Zu({type:new nl(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Gf(e,f))]}function cTt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:Zu({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var oDe;class zc{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Ri([]),this._offsets=[0],this;let i,s;t[0]instanceof Ri&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Gf)return[u];if(u instanceof zc)return u.batches;if(u instanceof Mi){if(u.type instanceof nl)return[new Gf(new Ri(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new mi([u[h]])),f=new Ri(l.map((h,p)=>new Wi(String(h),c[p].type))),[,d]=zV(f,c);return d.length===0?[new Gf(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Ri([]),!(i instanceof Ri))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Gf))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!uY(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??TRe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=ERe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?mte.visit(new mi(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new zc(n,r.map(i=>new Gf(n,i)))}slice(t,n){const r=this.schema;[t,n]=xRe({length:this.numRows},t,n);const i=SRe(this.data,this._offsets,t,n);return new zc(r,i.map(s=>new Gf(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=Zu({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new mi(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new mi([Zu({type:new s1,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=zV(r,a)}return new zc(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new zc(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new zc(...zV(s,o))}}oDe=Symbol.toStringTag;zc[oDe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Y2(pte),e.get=Y2(rf.getVisitFn(we.Struct)),e.set=CRe(ch.getVisitFn(we.Struct)),e.indexOf=ARe(h5.getVisitFn(we.Struct)),e.getByteLength=Y2(H0.getVisitFn(we.Struct)),"Table"))(zc.prototype);var aDe;let Gf=class oD{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Ri))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=Zu({nullCount:0,type:new nl(this.schema.fields),children:this.schema.fields.map(n=>Zu({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Mi))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=qpe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Wi.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Ri(r),a=Zu({type:new nl(r),length:s,children:i,nullCount:0});[this.schema,this.data]=qpe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=uDe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return rf.visit(this.data,t)}set(t,n){return ch.visit(this.data,t,n)}indexOf(t,n){return h5.visit(this.data,t,n)}getByteLength(t){return H0.visit(this.data,t)}[Symbol.iterator](){return mte.visit(new mi([this.data]))}toArray(){return[...this]}concat(...t){return new zc(this.schema,[this,...t])}slice(t,n){const[r]=new mi([this.data]).slice(t,n).data;return new oD(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new mi([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new mi([Zu({type:new s1,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Ri(s,new Map(this.schema.metadata)),i=Zu({type:new nl(s),children:o})}return new oD(r,i)}select(t){const n=this.schema.select(t),r=new nl(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new oD(n,Zu({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=Zu({type:new nl(n.fields),length:this.numRows,children:r});return new oD(n,i)}};aDe=Symbol.toStringTag;Gf[aDe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Gf.prototype);function qpe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:Zu({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),Zu({type:new nl(i),length:n,children:s})]}function uDe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])uDe(a.children,l==null?void 0:l.children,n);if(or.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class fTt extends Gf{constructor(t){const n=t.fields.map(i=>Zu({type:i.type})),r=Zu({type:new nl(t.fields),nullCount:0,children:n});super(t,r)}}var w5;(function(e){e[e.BUFFER=0]="BUFFER"})(w5||(w5={}));var E5;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(E5||(E5={}));class Lv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Lv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Xi),(n||new Lv).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):E5.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):w5.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,E5.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,w5.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Lv.startBodyCompression(t),Lv.addCodec(t,n),Lv.addMethod(t,r),Lv.endBodyCompression(t)}}let lDe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},cDe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},uy=class lY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new lY).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Xi),(n||new lY).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new cDe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new lDe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Lv).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},l2=class cY{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new cY).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Xi),(n||new cY).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new uy).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var T5;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(T5||(T5={}));let Ev=class Bm{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Bm).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Xi),(n||new Bm).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):FC.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):T5.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new sa).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,FC.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,T5.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Bm.startMessage(t),Bm.addVersion(t,n),Bm.addHeaderType(t,r),Bm.addHeader(t,i),Bm.addBodyLength(t,s),Bm.addCustomMetadata(t,o),Bm.endMessage(t)}};class dTt extends vr{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Cw.startNull(n),Cw.endNull(n)}visitInt(t,n){return Wf.startInt(n),Wf.addBitWidth(n,t.bitWidth),Wf.addIsSigned(n,t.isSigned),Wf.endInt(n)}visitFloat(t,n){return a0.startFloatingPoint(n),a0.addPrecision(n,t.precision),a0.endFloatingPoint(n)}visitBinary(t,n){return Ew.startBinary(n),Ew.endBinary(n)}visitBool(t,n){return Tw.startBool(n),Tw.endBool(n)}visitUtf8(t,n){return Iw.startUtf8(n),Iw.endUtf8(n)}visitDecimal(t,n){return Fc.startDecimal(n),Fc.addScale(n,t.scale),Fc.addPrecision(n,t.precision),Fc.addBitWidth(n,t.bitWidth),Fc.endDecimal(n)}visitDate(t,n){return QL.startDate(n),QL.addUnit(n,t.unit),QL.endDate(n)}visitTime(t,n){return iD.startTime(n),iD.addUnit(n,t.unit),iD.addBitWidth(n,t.bitWidth),iD.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return sD.startTimestamp(n),sD.addUnit(n,t.unit),r!==void 0&&sD.addTimezone(n,r),sD.endTimestamp(n)}visitInterval(t,n){return u0.startInterval(n),u0.addUnit(n,t.unit),u0.endInterval(n)}visitDuration(t,n){return i0.startDuration(n),i0.addUnit(n,t.unit),i0.endDuration(n)}visitList(t,n){return Sw.startList(n),Sw.endList(n)}visitStruct(t,n){return Aw.startStruct_(n),Aw.endStruct_(n)}visitUnion(t,n){ew.startTypeIdsVector(n,t.typeIds.length);const r=ew.createTypeIdsVector(n,t.typeIds);return ew.startUnion(n),ew.addMode(n,t.mode),ew.addTypeIds(n,r),ew.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return xy.startDictionaryEncoding(n),xy.addId(n,BigInt(t.id)),xy.addIsOrdered(n,t.isOrdered),r!==void 0&&xy.addIndexType(n,r),xy.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return s0.startFixedSizeBinary(n),s0.addByteWidth(n,t.byteWidth),s0.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return o0.startFixedSizeList(n),o0.addListSize(n,t.listSize),o0.endFixedSizeList(n)}visitMap(t,n){return JL.startMap(n),JL.addKeysSorted(n,t.keysSorted),JL.endMap(n)}}const VV=new dTt;function hTt(e,t=new Map){return new Ri(mTt(e,t),e$(e.metadata),t)}function fDe(e){return new md(e.count,dDe(e.columns),hDe(e.columns))}function pTt(e){return new q0(fDe(e.data),e.id,e.isDelta)}function mTt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Wi.fromJSON(n,t))}function Wpe(e,t){return(e.children||[]).filter(Boolean).map(n=>Wi.fromJSON(n,t))}function dDe(e){return(e||[]).reduce((t,n)=>[...t,new Bb(n.count,gTt(n.VALIDITY)),...dDe(n.children)],[])}function hDe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new h0(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new h0(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new h0(t.length,i.OFFSET.length)),i.DATA&&t.push(new h0(t.length,i.DATA.length)),t=hDe(i.children,t)}return t}function gTt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function yTt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Ype(e,Wpe(e,t)),i=new Wi(e.name,o,e.nullable,e$(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Gpe(r):new Pb,a=new Mb(t.get(n),r,n,s.isOrdered),i=new Wi(e.name,a,e.nullable,e$(e.metadata))):(r=(r=s.indexType)?Gpe(r):new Pb,t.set(n,o=Ype(e,Wpe(e,t))),a=new Mb(o,r,n,s.isOrdered),i=new Wi(e.name,a,e.nullable,e$(e.metadata))),i||null}function e$(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Gpe(e){return new ec(e.isSigned,e.bitWidth)}function Ype(e,t){const n=e.type.name;switch(n){case"NONE":return new s1;case"null":return new s1;case"binary":return new WN;case"utf8":return new PC;case"bool":return new GN;case"list":return new LC((t||[])[0]);case"struct":return new nl(t||[]);case"struct_":return new nl(t||[])}switch(n){case"int":{const r=e.type;return new ec(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new Ob(wu[r.precision])}case"decimal":{const r=e.type;return new u5(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new OC(z0[r.unit])}case"time":{const r=e.type;return new o1(Pn[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new l5(Pn[r.unit],r.timezone)}case"interval":{const r=e.type;return new MC(V0[r.unit])}case"duration":{const r=e.type;return new c5(Pn[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new YN(nf[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new f5(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new $C(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new KN((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var vTt=$Re,bTt=m5;class l0{static fromJSON(t,n){const r=new l0(0,Vl.V5,n);return r._createHeader=xTt(t,n),r}static decode(t){t=new bTt(Li(t));const n=Ev.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new l0(r,i,s);return o._createHeader=_Tt(n,s),o}static encode(t){const n=new vTt;let r=-1;return t.isSchema()?r=Ri.encode(n,t.header()):t.isRecordBatch()?r=md.encode(n,t.header()):t.isDictionaryBatch()&&(r=q0.encode(n,t.header())),Ev.startMessage(n),Ev.addVersion(n,Vl.V5),Ev.addHeader(n,r),Ev.addHeaderType(n,t.headerType),Ev.addBodyLength(n,BigInt(t.bodyLength)),Ev.finishMessageBuffer(n,Ev.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Ri)return new l0(0,Vl.V5,Ma.Schema,t);if(t instanceof md)return new l0(n,Vl.V5,Ma.RecordBatch,t);if(t instanceof q0)return new l0(n,Vl.V5,Ma.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ma.Schema}isRecordBatch(){return this.headerType===Ma.RecordBatch}isDictionaryBatch(){return this.headerType===Ma.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=zp(t)}}class md{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=zp(t)}}class q0{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=zp(n)}}class h0{constructor(t,n){this.offset=zp(t),this.length=zp(n)}}class Bb{constructor(t,n){this.length=zp(t),this.nullCount=zp(n)}}function xTt(e,t){return()=>{switch(t){case Ma.Schema:return Ri.fromJSON(e);case Ma.RecordBatch:return md.fromJSON(e);case Ma.DictionaryBatch:return q0.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Ma[t]}, type: ${t} }`)}}function _Tt(e,t){return()=>{switch(t){case Ma.Schema:return Ri.decode(e.header(new qm),new Map,e.version());case Ma.RecordBatch:return md.decode(e.header(new uy),e.version());case Ma.DictionaryBatch:return q0.decode(e.header(new l2),e.version())}throw new Error(`Unrecognized Message type: { name: ${Ma[t]}, type: ${t} }`)}}Wi.encode=NTt;Wi.decode=RTt;Wi.fromJSON=yTt;Ri.encode=DTt;Ri.decode=wTt;Ri.fromJSON=hTt;md.encode=PTt;md.decode=ETt;md.fromJSON=fDe;q0.encode=OTt;q0.decode=TTt;q0.fromJSON=pTt;Bb.encode=MTt;Bb.decode=CTt;h0.encode=LTt;h0.decode=STt;function wTt(e,t=new Map,n=Vl.V5){const r=kTt(e,t);return new Ri(r,t$(e),t,n)}function ETt(e,t=Vl.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new md(e.length(),ATt(e),ITt(e,t))}function TTt(e,t=Vl.V5){return new q0(md.decode(e.data(),t),e.id(),e.isDelta())}function STt(e){return new h0(e.offset(),e.length())}function CTt(e){return new Bb(e.length(),e.nullCount())}function ATt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=Bb.decode(n));return t}function ITt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Vl.V4&&(r.bb_pos+=8*(i+1)),n[++s]=h0.decode(r));return n}function kTt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Wi.decode(r,t));return n}function Kpe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Wi.decode(r,t));return n}function RTt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Qpe(e,Kpe(e,t)),r=new Wi(e.name(),i,e.nullable(),t$(e))):t.has(n=zp(a.id()))?(s=(s=a.indexType())?Xpe(s):new Pb,o=new Mb(t.get(n),s,n,a.isOrdered()),r=new Wi(e.name(),o,e.nullable(),t$(e))):(s=(s=a.indexType())?Xpe(s):new Pb,t.set(n,i=Qpe(e,Kpe(e,t))),o=new Mb(i,s,n,a.isOrdered()),r=new Wi(e.name(),o,e.nullable(),t$(e))),r||null}function t$(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Xpe(e){return new ec(e.isSigned(),e.bitWidth())}function Qpe(e,t){const n=e.typeType();switch(n){case Ds.NONE:return new s1;case Ds.Null:return new s1;case Ds.Binary:return new WN;case Ds.Utf8:return new PC;case Ds.Bool:return new GN;case Ds.List:return new LC((t||[])[0]);case Ds.Struct_:return new nl(t||[])}switch(n){case Ds.Int:{const r=e.type(new Wf);return new ec(r.isSigned(),r.bitWidth())}case Ds.FloatingPoint:{const r=e.type(new a0);return new Ob(r.precision())}case Ds.Decimal:{const r=e.type(new Fc);return new u5(r.scale(),r.precision(),r.bitWidth())}case Ds.Date:{const r=e.type(new QL);return new OC(r.unit())}case Ds.Time:{const r=e.type(new iD);return new o1(r.unit(),r.bitWidth())}case Ds.Timestamp:{const r=e.type(new sD);return new l5(r.unit(),r.timezone())}case Ds.Interval:{const r=e.type(new u0);return new MC(r.unit())}case Ds.Duration:{const r=e.type(new i0);return new c5(r.unit())}case Ds.Union:{const r=e.type(new ew);return new YN(r.mode(),r.typeIdsArray()||[],t||[])}case Ds.FixedSizeBinary:{const r=e.type(new s0);return new f5(r.byteWidth())}case Ds.FixedSizeList:{const r=e.type(new o0);return new $C(r.listSize(),(t||[])[0])}case Ds.Map:{const r=e.type(new JL);return new KN((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Ds[n]}" (${n})`)}function DTt(e,t){const n=t.fields.map(s=>Wi.encode(e,s));qm.startFieldsVector(e,n.length);const r=qm.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?qm.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return sa.startKeyValue(e),sa.addKey(e,a),sa.addValue(e,u),sa.endKeyValue(e)})):-1;return qm.startSchema(e),qm.addFields(e,r),qm.addEndianness(e,$Tt?BC.Little:BC.Big),i!==-1&&qm.addCustomMetadata(e,i),qm.endSchema(e)}function NTt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;or.isDictionary(s)?(o=s.dictionary.typeId,i=VV.visit(s,e),r=VV.visit(s.dictionary,e)):r=VV.visit(s,e);const a=(s.children||[]).map(c=>Wi.encode(e,c)),u=Gd.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Gd.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return sa.startKeyValue(e),sa.addKey(e,d),sa.addValue(e,h),sa.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Gd.startField(e),Gd.addType(e,r),Gd.addTypeType(e,o),Gd.addChildren(e,u),Gd.addNullable(e,!!t.nullable),n!==-1&&Gd.addName(e,n),i!==-1&&Gd.addDictionary(e,i),l!==-1&&Gd.addCustomMetadata(e,l),Gd.endField(e)}function PTt(e,t){const n=t.nodes||[],r=t.buffers||[];uy.startNodesVector(e,n.length);for(const o of n.slice().reverse())Bb.encode(e,o);const i=e.endVector();uy.startBuffersVector(e,r.length);for(const o of r.slice().reverse())h0.encode(e,o);const s=e.endVector();return uy.startRecordBatch(e),uy.addLength(e,BigInt(t.length)),uy.addNodes(e,i),uy.addBuffers(e,s),uy.endRecordBatch(e)}function OTt(e,t){const n=md.encode(e,t.data);return l2.startDictionaryBatch(e),l2.addId(e,BigInt(t.id)),l2.addIsDelta(e,t.isDelta),l2.addData(e,n),l2.endDictionaryBatch(e)}function MTt(e,t){return cDe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function LTt(e,t){return lDe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const $Tt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),fY="ARROW1",xte=new Uint8Array(fY.length);for(let e=0;e<fY.length;e+=1)xte[e]=fY.codePointAt(e);xte.length;class ko extends vr{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Gf?s.data.children:s.data),r=new ko;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof mi)return this.visitMany(t.data),this;const{type:n}=t;if(!or.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(or.isUnion(n))this.nodes.push(new Bb(r,0));else{const{nullCount:i}=t;or.isNull(n)||Pp.call(this,i<=0?new Uint8Array(0):d5(t.offset,r,t.nullBitmap)),this.nodes.push(new Bb(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Pp(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new h0(this._byteLength,t)),this._byteLength+=t,this}function FTt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Pp.call(this,i),n.mode===nf.Sparse)return dY.call(this,e);if(n.mode===nf.Dense){if(e.offset<=0)return Pp.call(this,s),dY.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Pp.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function BTt(e){let t;return e.nullCount>=e.length?Pp.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Pp.call(this,d5(e.offset,e.length,t)):Pp.call(this,wRe(e.values))}function R1(e){return Pp.call(this,e.values.subarray(0,e.length*e.stride))}function pDe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Pp.call(this,gke(-i,t+1,r)),Pp.call(this,n.subarray(i,i+o)),this}function _te(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Pp.call(this,gke(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function dY(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ko.prototype.visitBool=BTt;ko.prototype.visitInt=R1;ko.prototype.visitFloat=R1;ko.prototype.visitUtf8=pDe;ko.prototype.visitBinary=pDe;ko.prototype.visitFixedSizeBinary=R1;ko.prototype.visitDate=R1;ko.prototype.visitTimestamp=R1;ko.prototype.visitTime=R1;ko.prototype.visitDecimal=R1;ko.prototype.visitList=_te;ko.prototype.visitStruct=dY;ko.prototype.visitUnion=FTt;ko.prototype.visitInterval=R1;ko.prototype.visitDuration=R1;ko.prototype.visitFixedSizeList=_te;ko.prototype.visitMap=_te;class mDe extends BRe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new UV,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Sx(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return E9(t)?t.then(n=>this.writeAll(n)):T9(t)?Ste(this,t):Tte(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof UV?this._sink=t:(this._sink=new UV,t&&q_t(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&W_t(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!uY(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof zc&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Gf&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!uY(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Gf?t instanceof fTt||this._writeRecordBatch(t):t instanceof zc?this.writeAll(t.batches):Oee(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=l0.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Ma.RecordBatch?this._recordBatchBlocks.push(new $b(a,t.bodyLength,this._position)):t.headerType===Ma.DictionaryBatch&&this._dictionaryBlocks.push(new $b(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Li(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(l0.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(xte)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ko.assemble(t),o=new md(t.numRows,r,i),a=l0.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ko.assemble(new mi([t])),u=new md(t.length,s,o),l=new q0(u,n,r),c=l0.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class wte extends mDe{static writeAll(t,n){const r=new wte(n);return E9(t)?t.then(i=>r.writeAll(i)):T9(t)?Ste(r,t):Tte(r,t)}}class Ete extends mDe{static writeAll(t){const n=new Ete;return E9(t)?t.then(r=>n.writeAll(r)):T9(t)?Ste(n,t):Tte(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=aY.encode(new aY(t,Vl.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function Tte(e,t){let n=t;t instanceof zc&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function Ste(e,t){var n,r,i,s,o,a,u;return my(this,void 0,void 0,function*(){try{for(n=!0,r=kD(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function jTt(e,t="stream"){return(t==="stream"?wte:Ete).writeAll(e).toUint8Array(!0)}function Cte(e,t=1){return(e*t+63&-64||64)/t}function jb(e,t,n=e.BYTES_PER_ELEMENT){return new e(Cte(t,n))}function Ate(e){return e instanceof Mi?e:new Mi(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function UTt(e){return new mi([Ate(e)])}const Ite=new TextEncoder;function zTt(e,t,n){const r=Ite.encode(n);return e.set(r,t),r.length}function VTt(e,t,n){return Ite.encodeInto(n,e.subarray(t)).written}const HTt=Ite.encodeInto?VTt:zTt;function Jpe(e,t){const n=jb(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function qTt(e,t){const n=jb(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function WTt(e,t){const n=jb(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function GTt(e,t){const n=jb(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function YTt(e){const t=_5({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function KTt(e,t,n){const r=jb(Int32Array,t+1),i=jb(Uint8Array,3*n);let s=0;return{set(o,a){s+=HTt(i,s,o),r[a+1]=s},data:()=>{const o=Cte(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function XTt(e,t){const n=[],r=jb(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:QTt(e.dictionary,n,o)})}}function QTt(e,t,n){const r=KTt(e,t.length,n);return t.forEach(r.set),UTt(r.data())}function JTt(e,t){const n=jb(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function ZTt(e,t,n=!0){let r;switch(e.typeId){case we.Int:r=e.bitWidth<64?Jpe:null;break;case we.Float:r=e.precision>0?Jpe:null;break;case we.Dictionary:r=e.dictionary.typeId===we.Utf8&&e.indices.typeId===we.Int&&e.indices.bitWidth<64?XTt:null;break;case we.Bool:r=qTt;break;case we.Date:r=e.unit?GTt:WTt;break}return r==null?YTt(e):n?JTt(r(e,t),t):r(e,t)}function eSt(e,t){const n=e.length,r=Cte(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),Ate({type:t,length:n,buffers:[null,i]})}function gDe(e,t,n,r,i=!0){const s=ZTt(r,e,i);return t(n,s.set),Ate(s.data())}function kte(e){if(e instanceof or||e==null)return e;switch(e){case we.Binary:return new WN;case we.Bool:return new GN;case we.DateDay:return new awt;case we.DateMillisecond:case we.Date:return new uwt;case we.Dictionary:return new Mb(new PC,new Pb);case we.Float16:return new Fke;case we.Float32:return new Hee;case we.Float64:case we.Float:return new qee;case we.Int8:return new $ee;case we.Int16:return new Fee;case we.Int32:case we.Int:return new Pb;case we.Int64:return new Bee;case we.IntervalDayTime:return new hwt;case we.Interval:case we.IntervalYearMonth:return new pwt;case we.Null:return new s1;case we.TimeMicrosecond:return new fwt;case we.TimeMillisecond:case we.Time:return new cwt;case we.TimeNanosecond:return new dwt;case we.TimeSecond:return new lwt;case we.Uint8:return new jee;case we.Uint16:return new Uee;case we.Uint32:return new zee;case we.Uint64:return new Vee;case we.Utf8:return new PC;default:gr(`Unsupported type code: ${j0(e)}. Use a data type constructor instead?`)}}function tSt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function yDe(e,t){const n=hY();return e(t,n.add),n}function hY(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(i1(t))++e.dates,tSt(t)&&++e.utcdays;else if(ww(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=hY());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=hY())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return kte(nSt(e))}};return e}function nSt(e){const t=e.count-e.nulls;if(t===0)return we.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?we.Float64:n<128?we.Int8:n<32768?we.Int16:we.Int32:n>=2**32?we.Float64:n<256?we.Uint8:n<65536?we.Uint16:we.Uint32}else{if(e.nums===t)return we.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?we.Int64:gr(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?we.Uint64:gr(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return we.Bool;if(e.utcdays===t)return we.DateDay;if(e.dates===t)return we.DateMillisecond;if(e.arrays===t){const n=Wi.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new $C(e.minlen,n):new LC(n)}else if(e.structs===t){const n=e.struct_prof;return new nl(Object.keys(n).map(r=>Wi.new(r,n[r].type(),!0)))}else{if(e.strings>0)return we.Dictionary;gr("Type inference failure")}}}}function rSt(e,t,n,r,i,s=!0){if(i=kte(i),!i){const o=yDe(r,t);s=o.nulls>0,i=o.type()}return gDe(n,r,t,i,s)}function iSt(e,t,n,r,i,s=!0){i=kte(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=sSt(o);if(u&&a&&Zpe(u.type,i))return u;const l=o.data;if(y3(l)){const c=oSt(l);if(a&&c&&Zpe(c,i))return eSt(l,c);i=i||c,s=!1}if(!i){const c=yDe(r,o);s=c.nulls>0,i=c.type()}return gDe(n,r,o,i,s)}function sSt(e){return e instanceof mi?e:e.vector instanceof mi?e.vector:null}function oSt(e){const n={Float32Array:Hee,Float64Array:qee,Int8Array:$ee,Int16Array:Fee,Int32Array:Pb,Uint8Array:jee,Uint16Array:Uee,Uint32Array:zee,BigInt64Array:Bee,BigUint64Array:Vee}[e.constructor.name];return n?new n:null}function Zpe(e,t){return!e||!t?!0:e.compareTo(t)}function aSt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function uSt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&ww(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const lSt=()=>gr("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function cSt(){try{return zc}catch{lSt()}}function vDe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=fSt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&gr("Column length mismatch"),a[l]=c});const u=cSt();return new u(a)}function fSt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=Es(n)?n(e):pi(n)?n:null;if(pi(e))return{dataFrom:rSt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:aSt(e,r,i)};if(dSt(e))return{dataFrom:iSt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:uSt(e,r,i)};gr("Unsupported input data type")}function dSt(e){return e&&Es(e.reify)}function hSt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return jTt(vDe(e,r),n)}function pSt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function mSt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&i1(u))++i,pSt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function P9(e,t){return Es(t)?t(e):t||e.columnNames()}function bDe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=mSt(gSt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function gSt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function Rte(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function ySt(e,t={}){const n=P9(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":i1(l)?_9(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return Rte(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function xDe(e,t={}){if(Es(t))return t(e)+"";const n=typeof e;if(n==="object"){if(i1(e))return t.utc?_9(e):zIe(e);{const r=JSON.stringify(e,(s,o)=>y3(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function O9(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function vSt(e,t={}){const n=P9(e,t.columns),{align:r,format:i}=bDe(e,n,t),s=bSt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(xDe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,v)=>{const b=v?a(r[g]):"",w=s[m]&&s[m](g,d,f)||"",E=(b?`text-align: ${b};`+(w?" ":""):"")+w;return`<${m}${E?` style="${E}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return Rte(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function bSt(e){return O9(e.style,t=>Es(t)?t:()=>t)}function xSt(e,t=!0,n=!1){return e===void 0||e?t:n}const _St=e=>i1(e)?_9(e,!0):e;function wSt(e,t={}){const n=xSt(t.schema),r=t.format||{},i=P9(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||_St;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function ESt(e,t={}){const n=P9(e,t.columns),{align:r,format:i}=bDe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return Rte(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(xDe(u,i[l]))+"|"}}),a+`
`}function _De(e,t){for(const[n,r]of w9(t))e.set(n,r);return e}function TSt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function a1(e,t,n=new Map){return t=Zl(t)?e.columnName(t):t,ku(t)?n.set(t,t):pi(t)?t.forEach(r=>a1(e,r,n)):Es(t)?a1(e,t(e),n):hl(t)?_De(n,t):gr(`Invalid column selection: ${j0(t)}`),n}function M9(e,t){return e.toObject=t,e}function wDe(e){return pi(e)?e.map(wDe):e&&e.toObject?e.toObject():e}function jC(){return M9(e=>e.columnNames(),()=>({all:[]}))}function EDe(...e){return e=e.flat(),M9(t=>{const n=a1(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:wDe(e)}))}function SSt(e,t){return M9(n=>{let r=Zl(e)?e:n.columnIndex(e),i=Zl(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function CSt(e){return ku(e)&&(e=RegExp(TSt(e))),M9(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function ASt(e){return y3(e.data)?e.data.constructor:Array}class _y extends Hxt{static from(t,n){return new _y(Gxt(t,n),n)}static new(t,n){if(t instanceof _y)return t;const r={},i=[];for(const[s,o]of w9(t))r[s]=o,i.push(s);return new _y(r,n||i)}constructor(t,n,r,i,s,o){O9(t,Wxt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new _y(t||this._data,n||(t?null:this._names),o,i!==void 0?i:w_t(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=xd(r).groupby(r.groups());return t.forEach(s=>{s=_y.new(s),s.numRows()!==n&&gr("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):gr(`Unrecognized column: ${t}`)}object(t=0){return eme(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=a1(this,t.columns||jC()),o=hke(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),T_t(this,u,a,n)}return a}*[Symbol.iterator](){const t=eme(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(ASt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=E_t(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return vDe(this,t)}toArrowBuffer(t){return hSt(this,t)}toCSV(t){return ySt(this,t)}toHTML(t){return vSt(this,t)}toJSON(t){return wSt(this,t)}toMarkdown(t){return ESt(this,t)}}function eme(e){let t=e._builder;if(!t){const n=hke(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class ISt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function ii(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=kSt[e.type];s&&s(e,t,n)}const p6=(e,t,n)=>{ii(e.argument,t,n,e)},HV=(e,t,n)=>{ii(e.left,t,n,e),ii(e.right,t,n,e)},tme=(e,t,n)=>{ii(e.test,t,n,e),ii(e.consequent,t,n,e),e.alternate&&ii(e.alternate,t,n,e)},qV=(e,t,n)=>{Wm(e.params,t,n,e),ii(e.body,t,n,e)},nme=(e,t,n)=>{ii(e.callee,t,n,e),Wm(e.arguments,t,n,e)},Wm=(e,t,n,r)=>{e.forEach(i=>ii(i,t,n,r))},kSt={TemplateLiteral:(e,t,n)=>{Wm(e.expressions,t,n,e),Wm(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{ii(e.object,t,n,e),ii(e.property,t,n,e)},CallExpression:nme,NewExpression:nme,ArrayExpression:(e,t,n)=>{Wm(e.elements,t,n,e)},AssignmentExpression:HV,AwaitExpression:p6,BinaryExpression:HV,LogicalExpression:HV,UnaryExpression:p6,UpdateExpression:p6,ConditionalExpression:tme,ObjectExpression:(e,t,n)=>{Wm(e.properties,t,n,e)},Property:(e,t,n)=>{ii(e.key,t,n,e),ii(e.value,t,n,e)},ArrowFunctionExpression:qV,FunctionExpression:qV,FunctionDeclaration:qV,VariableDeclaration:(e,t,n)=>{Wm(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{ii(e.id,t,n,e),ii(e.init,t,n,e)},SpreadElement:(e,t,n)=>{ii(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Wm(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{ii(e.expression,t,n,e)},IfStatement:tme,ForStatement:(e,t,n)=>{ii(e.init,t,n,e),ii(e.test,t,n,e),ii(e.update,t,n,e),ii(e.body,t,n,e)},WhileStatement:(e,t,n)=>{ii(e.test,t,n,e),ii(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{ii(e.body,t,n,e),ii(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{ii(e.discriminant,t,n,e),Wm(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&ii(e.test,t,n,e),Wm(e.consequent,t,n,e)},ReturnStatement:p6,Program:(e,t,n)=>{ii(e.body[0],t,n,e)}};function TDe(e){delete e.start,delete e.end,delete e.optional}function rme(e){TDe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function RSt(e){return ii(e,null,{Column:rme,Constant:rme,Default:TDe}),e}function aa(e,t){return t&&t.type===e}function DSt(e){return aa(A_t,e)||aa(C_t,e)}function NSt(e){return Es(e)?e:()=>e}const PSt="Escaped functions are not valid as rollup or pivot values.";function OSt(e,t,n){e.aggronly&&gr(PSt);const r="(row,data)=>fn("+dke(e.table.columnNames())+",$)";return{escape:Nee.escape(r,NSt(t.expr),n)}}var MSt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],SDe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],LSt="-----------------------------------------------------------------------------------------------------------------------------------------------------",CDe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",WV={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},GV="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",$St={5:GV,"5module":GV+" export import",6:GV+" const class extends export import super"},FSt=/^in(stanceof)?$/,BSt=new RegExp("["+CDe+"]"),jSt=new RegExp("["+CDe+LSt+"]");function pY(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function u1(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&BSt.test(String.fromCharCode(e)):t===!1?!1:pY(e,SDe)}function UC(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&jSt.test(String.fromCharCode(e)):t===!1?!1:pY(e,SDe)||pY(e,MSt)}var ui=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function zd(e,t){return new ui(e,{beforeExpr:!0,binop:t})}var Vd={beforeExpr:!0},Dc={startsExpr:!0},Dte={};function zr(e,t){return t===void 0&&(t={}),t.keyword=e,Dte[e]=new ui(e,t)}var le={num:new ui("num",Dc),regexp:new ui("regexp",Dc),string:new ui("string",Dc),name:new ui("name",Dc),privateId:new ui("privateId",Dc),eof:new ui("eof"),bracketL:new ui("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ui("]"),braceL:new ui("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ui("}"),parenL:new ui("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ui(")"),comma:new ui(",",Vd),semi:new ui(";",Vd),colon:new ui(":",Vd),dot:new ui("."),question:new ui("?",Vd),questionDot:new ui("?."),arrow:new ui("=>",Vd),template:new ui("template"),invalidTemplate:new ui("invalidTemplate"),ellipsis:new ui("...",Vd),backQuote:new ui("`",Dc),dollarBraceL:new ui("${",{beforeExpr:!0,startsExpr:!0}),eq:new ui("=",{beforeExpr:!0,isAssign:!0}),assign:new ui("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ui("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ui("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:zd("||",1),logicalAND:zd("&&",2),bitwiseOR:zd("|",3),bitwiseXOR:zd("^",4),bitwiseAND:zd("&",5),equality:zd("==/!=/===/!==",6),relational:zd("</>/<=/>=",7),bitShift:zd("<</>>/>>>",8),plusMin:new ui("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:zd("%",10),star:zd("*",10),slash:zd("/",10),starstar:new ui("**",{beforeExpr:!0}),coalesce:zd("??",1),_break:zr("break"),_case:zr("case",Vd),_catch:zr("catch"),_continue:zr("continue"),_debugger:zr("debugger"),_default:zr("default",Vd),_do:zr("do",{isLoop:!0,beforeExpr:!0}),_else:zr("else",Vd),_finally:zr("finally"),_for:zr("for",{isLoop:!0}),_function:zr("function",Dc),_if:zr("if"),_return:zr("return",Vd),_switch:zr("switch"),_throw:zr("throw",Vd),_try:zr("try"),_var:zr("var"),_const:zr("const"),_while:zr("while",{isLoop:!0}),_with:zr("with"),_new:zr("new",{beforeExpr:!0,startsExpr:!0}),_this:zr("this",Dc),_super:zr("super",Dc),_class:zr("class",Dc),_extends:zr("extends",Vd),_export:zr("export"),_import:zr("import",Dc),_null:zr("null",Dc),_true:zr("true",Dc),_false:zr("false",Dc),_in:zr("in",{beforeExpr:!0,binop:7}),_instanceof:zr("instanceof",{beforeExpr:!0,binop:7}),_typeof:zr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:zr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:zr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ah=/\r\n?|\n|\u2028|\u2029/,USt=new RegExp(Ah.source,"g");function sI(e){return e===10||e===13||e===8232||e===8233}function ADe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(sI(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var IDe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Jd=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,kDe=Object.prototype,zSt=kDe.hasOwnProperty,VSt=kDe.toString,T3=Object.hasOwn||function(e,t){return zSt.call(e,t)},ime=Array.isArray||function(e){return VSt.call(e)==="[object Array]"},sme=Object.create(null);function Qv(e){return sme[e]||(sme[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function Ub(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var HSt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,XN=function(t,n){this.line=t,this.column=n};XN.prototype.offset=function(t){return new XN(this.line,this.column+t)};var L9=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function RDe(e,t){for(var n=1,r=0;;){var i=ADe(e,r,t);if(i<0)return new XN(n,t-r);++n,r=i}}var mY={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ome=!1;function qSt(e){var t={};for(var n in mY)t[n]=e&&T3(e,n)?e[n]:mY[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!ome&&typeof console=="object"&&console.warn&&(ome=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),ime(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return ime(t.onComment)&&(t.onComment=WSt(t,t.onComment)),t}function WSt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new L9(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var QN=1,oI=2,Nte=4,DDe=8,NDe=16,PDe=32,Pte=64,ODe=128,S3=256,Ote=QN|oI|S3;function Mte(e,t){return oI|(e?Nte:0)|(t?DDe:0)}var S5=0,Lte=1,D1=2,MDe=3,LDe=4,$De=5,ya=function(t,n,r){this.options=t=qSt(t),this.sourceFile=t.sourceFile,this.keywords=Qv($St[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=WV[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Qv(i);var s=(i?i+" ":"")+WV.strict;this.reservedWordsStrict=Qv(s),this.reservedWordsStrictBind=Qv(s+" "+WV.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ah).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=le.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(QN),this.regexpState=null,this.privateNameStack=[]},ug={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};ya.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};ug.inFunction.get=function(){return(this.currentVarScope().flags&oI)>0};ug.inGenerator.get=function(){return(this.currentVarScope().flags&DDe)>0&&!this.currentVarScope().inClassFieldInit};ug.inAsync.get=function(){return(this.currentVarScope().flags&Nte)>0&&!this.currentVarScope().inClassFieldInit};ug.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&S3)return!1;if(t.flags&oI)return(t.flags&Nte)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};ug.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&Pte)>0||n||this.options.allowSuperOutsideMethod};ug.allowDirectSuper.get=function(){return(this.currentThisScope().flags&ODe)>0};ug.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};ug.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(oI|S3))>0||n};ug.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&S3)>0};ya.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};ya.parse=function(t,n){return new this(n,t).parse()};ya.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};ya.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(ya.prototype,ug);var ic=ya.prototype,GSt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;ic.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Jd.lastIndex=e,e+=Jd.exec(this.input)[0].length;var t=GSt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Jd.lastIndex=e+t[0].length;var n=Jd.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Ah.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Jd.lastIndex=e,e+=Jd.exec(this.input)[0].length,this.input[e]===";"&&e++}};ic.eat=function(e){return this.type===e?(this.next(),!0):!1};ic.isContextual=function(e){return this.type===le.name&&this.value===e&&!this.containsEsc};ic.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};ic.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};ic.canInsertSemicolon=function(){return this.type===le.eof||this.type===le.braceR||Ah.test(this.input.slice(this.lastTokEnd,this.start))};ic.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};ic.semicolon=function(){!this.eat(le.semi)&&!this.insertSemicolon()&&this.unexpected()};ic.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};ic.expect=function(e){this.eat(e)||this.unexpected()};ic.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var $9=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ic.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};ic.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};ic.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};ic.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var gn=ya.prototype;gn.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==le.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var $te={kind:"loop"},YSt={kind:"switch"};gn.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Jd.lastIndex=this.pos;var t=Jd.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(u1(r,!0)){for(var i=n+1;UC(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!FSt.test(s))return!0}return!1};gn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Jd.lastIndex=this.pos;var e=Jd.exec(this.input),t=this.pos+e[0].length,n;return!Ah.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(UC(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};gn.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=le._var,s="let"),r){case le._break:case le._continue:return this.parseBreakContinueStatement(i,r.keyword);case le._debugger:return this.parseDebuggerStatement(i);case le._do:return this.parseDoStatement(i);case le._for:return this.parseForStatement(i);case le._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case le._class:return e&&this.unexpected(),this.parseClass(i,!0);case le._if:return this.parseIfStatement(i);case le._return:return this.parseReturnStatement(i);case le._switch:return this.parseSwitchStatement(i);case le._throw:return this.parseThrowStatement(i);case le._try:return this.parseTryStatement(i);case le._const:case le._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case le._while:return this.parseWhileStatement(i);case le._with:return this.parseWithStatement(i);case le.braceL:return this.parseBlock(!0,i);case le.semi:return this.parseEmptyStatement(i);case le._export:case le._import:if(this.options.ecmaVersion>10&&r===le._import){Jd.lastIndex=this.pos;var o=Jd.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===le._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===le.name&&c.type==="Identifier"&&this.eat(le.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};gn.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(le.semi)||this.insertSemicolon()?e.label=null:this.type!==le.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};gn.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};gn.parseDoStatement=function(e){return this.next(),this.labels.push($te),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(le._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(le.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};gn.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push($te),this.enterScope(0),this.expect(le.parenL),this.type===le.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===le._var||this.type===le._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===le._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===le._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new $9,u=this.parseExpression(t>-1?"await":!0,a);return this.type===le._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===le._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};gn.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,KD|(n?0:gY),!1,t)};gn.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(le._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};gn.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(le.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};gn.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(le.braceL),this.labels.push(YSt),this.enterScope(0);for(var t,n=!1;this.type!==le.braceR;)if(this.type===le._case||this.type===le._default){var r=this.type===le._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(le.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};gn.parseThrowStatement=function(e){return this.next(),Ah.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var KSt=[];gn.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?PDe:0),this.checkLValPattern(e,t?LDe:D1),this.expect(le.parenR),e};gn.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===le._catch){var t=this.startNode();this.next(),this.eat(le.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(le._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};gn.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};gn.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push($te),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};gn.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};gn.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};gn.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===le._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};gn.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};gn.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(le.braceL),e&&this.enterScope(0);this.type!==le.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};gn.parseFor=function(e,t){return e.init=t,this.expect(le.semi),e.test=this.type===le.semi?null:this.parseExpression(),this.expect(le.semi),e.update=this.type===le.parenR?null:this.parseExpression(),this.expect(le.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};gn.parseForIn=function(e,t){var n=this.type===le._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(le.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};gn.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(le.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===le._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===le._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(le.comma))break}return e};gn.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?Lte:D1,!1)};var KD=1,gY=2,FDe=4;gn.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===le.star&&t&gY&&this.unexpected(),e.generator=this.eat(le.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&KD&&(e.id=t&FDe&&this.type!==le.name?null:this.parseIdent(),e.id&&!(t&gY)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?Lte:D1:MDe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Mte(e.async,e.generator)),t&KD||(e.id=this.type===le.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&KD?"FunctionDeclaration":"FunctionExpression")};gn.parseFunctionParams=function(e){this.expect(le.parenL),e.params=this.parseBindingList(le.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};gn.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(le.braceL);this.type!==le.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&XSt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};gn.parseClassElement=function(e){if(this.eat(le.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(le.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===le.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===le.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(le.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===le.parenL||o!=="method"||i||s){var l=!n.static&&C5(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};gn.isClassElementNameStart=function(){return this.type===le.name||this.type===le.privateId||this.type===le.num||this.type===le.string||this.type===le.bracketL||this.type.keyword};gn.parseClassElementName=function(e){this.type===le.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};gn.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&C5(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};gn.parseClassField=function(e){if(C5(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&C5(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(le.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};gn.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(S3|Pte);this.type!==le.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};gn.parseClassId=function(e,t){this.type===le.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,D1,!1)):(t===!0&&this.unexpected(),e.id=null)};gn.parseClassSuper=function(e){e.superClass=this.eat(le._extends)?this.parseExprSubscripts(null,!1):null};gn.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};gn.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];T3(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function XSt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function C5(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}gn.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==le.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};gn.parseExport=function(e,t){if(this.next(),this.eat(le.star))return this.parseExportAllDeclaration(e,t);if(this.eat(le._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==le.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};gn.parseExportDeclaration=function(e){return this.parseStatement(null)};gn.parseExportDefaultDeclaration=function(){var e;if(this.type===le._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,KD|FDe,!1,e)}else if(this.type===le._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};gn.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),T3(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};gn.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};gn.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};gn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};gn.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};gn.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(le.braceL);!this.eat(le.braceR);){if(n)n=!1;else if(this.expect(le.comma),this.afterTrailingComma(le.braceR))break;t.push(this.parseExportSpecifier(e))}return t};gn.parseImport=function(e){return this.next(),this.type===le.string?(e.specifiers=KSt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===le.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};gn.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,D1),this.finishNode(e,"ImportSpecifier")};gn.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,D1),this.finishNode(e,"ImportDefaultSpecifier")};gn.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,D1),this.finishNode(e,"ImportNamespaceSpecifier")};gn.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===le.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(le.comma)))return e;if(this.type===le.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(le.braceL);!this.eat(le.braceR);){if(t)t=!1;else if(this.expect(le.comma),this.afterTrailingComma(le.braceR))break;e.push(this.parseImportSpecifier())}return e};gn.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===le.string){var e=this.parseLiteral(this.value);return HSt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};gn.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};gn.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Ih=ya.prototype;Ih.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Ih.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Ih.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Ih.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==le.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Ih.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case le.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(le.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case le.braceL:return this.parseObj(!0)}return this.parseIdent()};Ih.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(le.comma),t&&this.type===le.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===le.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===le.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Ih.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Ih.parseBindingListItem=function(e){return e};Ih.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(le.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Ih.checkLValSimple=function(e,t,n){t===void 0&&(t=S5);var r=t!==S5;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===D1&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(T3(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==$De&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Ih.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=S5),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Ih.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=S5),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var ip=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Os={b_stat:new ip("{",!1),b_expr:new ip("{",!0),b_tmpl:new ip("${",!1),p_stat:new ip("(",!1),p_expr:new ip("(",!0),q_tmpl:new ip("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new ip("function",!1),f_expr:new ip("function",!0),f_expr_gen:new ip("function",!0,!1,null,!0),f_gen:new ip("function",!1,!1,null,!0)},aI=ya.prototype;aI.initialContext=function(){return[Os.b_stat]};aI.curContext=function(){return this.context[this.context.length-1]};aI.braceIsBlock=function(e){var t=this.curContext();return t===Os.f_expr||t===Os.f_stat?!0:e===le.colon&&(t===Os.b_stat||t===Os.b_expr)?!t.isExpr:e===le._return||e===le.name&&this.exprAllowed?Ah.test(this.input.slice(this.lastTokEnd,this.start)):e===le._else||e===le.semi||e===le.eof||e===le.parenR||e===le.arrow?!0:e===le.braceL?t===Os.b_stat:e===le._var||e===le._const||e===le.name?!1:!this.exprAllowed};aI.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};aI.updateContext=function(e){var t,n=this.type;n.keyword&&e===le.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};aI.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};le.parenR.updateContext=le.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Os.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};le.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Os.b_stat:Os.b_expr),this.exprAllowed=!0};le.dollarBraceL.updateContext=function(){this.context.push(Os.b_tmpl),this.exprAllowed=!0};le.parenL.updateContext=function(e){var t=e===le._if||e===le._for||e===le._with||e===le._while;this.context.push(t?Os.p_stat:Os.p_expr),this.exprAllowed=!0};le.incDec.updateContext=function(){};le._function.updateContext=le._class.updateContext=function(e){e.beforeExpr&&e!==le._else&&!(e===le.semi&&this.curContext()!==Os.p_stat)&&!(e===le._return&&Ah.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===le.colon||e===le.braceL)&&this.curContext()===Os.b_stat)?this.context.push(Os.f_expr):this.context.push(Os.f_stat),this.exprAllowed=!1};le.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};le.backQuote.updateContext=function(){this.curContext()===Os.q_tmpl?this.context.pop():this.context.push(Os.q_tmpl),this.exprAllowed=!1};le.star.updateContext=function(e){if(e===le._function){var t=this.context.length-1;this.context[t]===Os.f_expr?this.context[t]=Os.f_expr_gen:this.context[t]=Os.f_gen}this.exprAllowed=!0};le.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==le.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Xn=ya.prototype;Xn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};Xn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===le.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(le.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};Xn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new $9,r=!0);var a=this.start,u=this.startLoc;(this.type===le.parenL||this.type===le.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===le.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===le.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};Xn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(le.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(le.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};Xn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};Xn.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==le._in)&&s>r){var o=this.type===le.logicalOR||this.type===le.logicalAND,a=this.type===le.coalesce;a&&(s=le.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===le.coalesce||a&&(this.type===le.logicalOR||this.type===le.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};Xn.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};Xn.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===le.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&BDe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===le.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==le._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(le.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function BDe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&BDe(e.expression)}Xn.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};Xn.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};Xn.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(le.arrow)};Xn.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};Xn.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(le.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(le.bracketL);if(l||u&&this.type!==le.parenL&&this.type!==le.backQuote||this.eat(le.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(le.bracketR)):this.type===le.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(le.parenL)){var f=new $9,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(le.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===le.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(t,n);v.tag=e,v.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(v,"TaggedTemplateExpression")}return e};Xn.parseExprAtom=function(e,t,n){this.type===le.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case le._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===le.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==le.dot&&this.type!==le.bracketL&&this.type!==le.parenL&&this.unexpected(),this.finishNode(r,"Super");case le._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case le.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(le._function))return this.overrideContext(Os.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(le.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===le.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(le.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case le.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case le.num:case le.string:return this.parseLiteral(this.value);case le._null:case le._true:case le._false:return r=this.startNode(),r.value=this.type===le._null?null:this.type===le._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case le.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case le.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(le.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case le.braceL:return this.overrideContext(Os.b_expr),this.parseObj(!1,e);case le._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case le._class:return this.parseClass(this.startNode(),!1);case le._new:return this.parseNew();case le.backQuote:return this.parseTemplate();case le._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};Xn.parseExprAtomDefault=function(){this.unexpected()};Xn.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===le.parenL&&!e)return this.parseDynamicImport(t);if(this.type===le.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};Xn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(le.parenR)){var t=this.start;this.eat(le.comma)&&this.eat(le.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Xn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Xn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Xn.parseParenExpression=function(){this.expect(le.parenL);var e=this.parseExpression();return this.expect(le.parenR),e};Xn.shouldParseArrow=function(e){return!this.canInsertSemicolon()};Xn.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new $9,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==le.parenR;)if(l?l=!1:this.expect(le.comma),s&&this.afterTrailingComma(le.parenR,!0)){c=!0;break}else if(this.type===le.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===le.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(le.parenR),e&&this.shouldParseArrow(u)&&this.eat(le.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(n,r);return v.expression=i,this.finishNode(v,"ParenthesizedExpression")}else return i};Xn.parseParenItem=function(e){return e};Xn.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var QSt=[];Xn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===le.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(le.parenL)?e.arguments=this.parseExprList(le.parenR,this.options.ecmaVersion>=8,!1):e.arguments=QSt,this.finishNode(e,"NewExpression")};Xn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===le.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===le.backQuote,this.finishNode(n,"TemplateElement")};Xn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===le.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(le.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(le.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Xn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===le.name||this.type===le.num||this.type===le.string||this.type===le.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===le.star)&&!Ah.test(this.input.slice(this.lastTokEnd,this.start))};Xn.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(le.braceR);){if(r)r=!1;else if(this.expect(le.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(le.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Xn.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(le.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===le.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===le.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(le.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(le.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};Xn.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};Xn.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===le.colon&&this.unexpected(),this.eat(le.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===le.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==le.comma&&this.type!==le.braceR&&this.type!==le.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===le.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};Xn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(le.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(le.bracketR),e.key;e.computed=!1}return e.key=this.type===le.num||this.type===le.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Xn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Xn.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Mte(t,r.generator)|Pte|(n?ODe:0)),this.expect(le.parenL),r.params=this.parseBindingList(le.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Xn.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(Mte(n,!1)|NDe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};Xn.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==le.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,$De),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};Xn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Xn.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,Lte,t?null:n)}};Xn.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(le.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===le.comma?o=null:this.type===le.ellipsis?(o=this.parseSpread(r),r&&this.type===le.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};Xn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Xn.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};Xn.parseIdentNode=function(){var e=this.startNode();return this.type===le.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=le.name):this.unexpected(),e};Xn.parsePrivateIdent=function(){var e=this.startNode();return this.type===le.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};Xn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===le.semi||this.canInsertSemicolon()||this.type!==le.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(le.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Xn.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var A5=ya.prototype;A5.raise=function(e,t){var n=RDe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};A5.raiseRecoverable=A5.raise;A5.curPosition=function(){if(this.options.locations)return new XN(this.curLine,this.pos-this.lineStart)};var Ix=ya.prototype,JSt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Ix.enterScope=function(e){this.scopeStack.push(new JSt(e))};Ix.exitScope=function(){this.scopeStack.pop()};Ix.treatFunctionsAsVarInScope=function(e){return e.flags&oI||!this.inModule&&e.flags&QN};Ix.declareName=function(e,t,n){var r=!1;if(t===D1){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&QN&&delete this.undefinedExports[e]}else if(t===LDe){var s=this.currentScope();s.lexical.push(e)}else if(t===MDe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&PDe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&QN&&delete this.undefinedExports[e],u.flags&Ote)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Ix.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Ix.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Ix.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Ote)return t}};Ix.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&Ote&&!(t.flags&NDe))return t}};var F9=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new L9(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},C3=ya.prototype;C3.startNode=function(){return new F9(this,this.start,this.startLoc)};C3.startNodeAt=function(e,t){return new F9(this,e,t)};function jDe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}C3.finishNode=function(e,t){return jDe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};C3.finishNodeAt=function(e,t,n,r){return jDe.call(this,e,t,n,r)};C3.copyNode=function(e){var t=new F9(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var UDe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",zDe=UDe+" Extended_Pictographic",VDe=zDe,HDe=VDe+" EBase EComp EMod EPres ExtPict",qDe=HDe,ZSt=qDe,e2t={9:UDe,10:zDe,11:VDe,12:HDe,13:qDe,14:ZSt},t2t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",n2t={9:"",10:"",11:"",12:"",13:"",14:t2t},ame="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",WDe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",GDe=WDe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",YDe=GDe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",KDe=YDe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",XDe=KDe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",r2t=XDe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",i2t={9:WDe,10:GDe,11:YDe,12:KDe,13:XDe,14:r2t},QDe={};function s2t(e){var t=QDe[e]={binary:Qv(e2t[e]+" "+ame),binaryOfStrings:Qv(n2t[e]),nonBinary:{General_Category:Qv(ame),Script:Qv(i2t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var YV=0,ume=[9,10,11,12,13,14];YV<ume.length;YV+=1){var o2t=ume[YV];s2t(o2t)}var fn=ya.prototype,lg=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=QDe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};lg.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};lg.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};lg.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};lg.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};lg.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};lg.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};lg.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};lg.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};lg.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};fn.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};fn.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};fn.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};fn.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};fn.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};fn.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};fn.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};fn.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};fn.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};fn.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};fn.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};fn.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};fn.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};fn.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};fn.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};fn.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};fn.regexp_eatSyntaxCharacter=function(e){var t=e.current();return JDe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function JDe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}fn.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!JDe(n);)e.advance();return e.pos!==t};fn.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};fn.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};fn.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};fn.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=Ub(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=Ub(e.lastIntValue);return!0}return!1};fn.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),a2t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function a2t(e){return u1(e,!0)||e===36||e===95}fn.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),u2t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function u2t(e){return UC(e,!0)||e===36||e===95||e===8204||e===8205}fn.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};fn.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};fn.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};fn.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};fn.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};fn.regexp_eatZero=function(e){return e.current()===48&&!B9(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};fn.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};fn.regexp_eatControlLetter=function(e){var t=e.current();return ZDe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function ZDe(e){return e>=65&&e<=90||e>=97&&e<=122}fn.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&l2t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function l2t(e){return e>=0&&e<=1114111}fn.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};fn.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var eNe=0,l1=1,th=2;fn.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(c2t(t))return e.lastIntValue=-1,e.advance(),l1;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===th&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return eNe};function c2t(e){return e===100||e===68||e===115||e===83||e===119||e===87}fn.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),l1}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return eNe};fn.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){T3(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};fn.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return l1;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return th;e.raise("Invalid property name")};fn.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";tNe(t=e.current());)e.lastStringValue+=Ub(t),e.advance();return e.lastStringValue!==""};function tNe(e){return ZDe(e)||e===95}fn.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";f2t(t=e.current());)e.lastStringValue+=Ub(t),e.advance();return e.lastStringValue!==""};function f2t(e){return tNe(e)||B9(e)}fn.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};fn.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===th&&e.raise("Negated character class may contain strings"),!0}return!1};fn.regexp_classContents=function(e){return e.current()===93?l1:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),l1)};fn.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};fn.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||iNe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};fn.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};fn.regexp_classSetExpression=function(e){var t=l1,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===th&&(t=th);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==th&&(t=l1);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===th&&(t=th)}};fn.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};fn.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?l1:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};fn.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===th&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};fn.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};fn.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===th&&(t=th);return t};fn.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?l1:th};fn.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&d2t(n)||h2t(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function d2t(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function h2t(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}fn.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return p2t(t)?(e.lastIntValue=t,e.advance(),!0):!1};function p2t(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}fn.regexp_eatClassControlLetter=function(e){var t=e.current();return B9(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};fn.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};fn.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;B9(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function B9(e){return e>=48&&e<=57}fn.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;nNe(n=e.current());)e.lastIntValue=16*e.lastIntValue+rNe(n),e.advance();return e.pos!==t};function nNe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function rNe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}fn.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};fn.regexp_eatOctalDigit=function(e){var t=e.current();return iNe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function iNe(e){return e>=48&&e<=55}fn.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!nNe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+rNe(i),e.advance()}return!0};var Fte=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new L9(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},$r=ya.prototype;$r.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Fte(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};$r.getToken=function(){return this.next(),new Fte(this)};typeof Symbol<"u"&&($r[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===le.eof,value:t}}}});$r.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(le.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};$r.readToken=function(e){return u1(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};$r.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};$r.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=ADe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};$r.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!sI(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};$r.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&IDe.test(String.fromCharCode(e)))++this.pos;else break e}}};$r.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};$r.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(le.ellipsis)):(++this.pos,this.finishToken(le.dot))};$r.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(le.assign,2):this.finishOp(le.slash,1)};$r.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?le.star:le.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=le.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(le.assign,n+1):this.finishOp(r,n)};$r.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(le.assign,3)}return this.finishOp(e===124?le.logicalOR:le.logicalAND,2)}return t===61?this.finishOp(le.assign,2):this.finishOp(e===124?le.bitwiseOR:le.bitwiseAND,1)};$r.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(le.assign,2):this.finishOp(le.bitwiseXOR,1)};$r.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ah.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(le.incDec,2):t===61?this.finishOp(le.assign,2):this.finishOp(le.plusMin,1)};$r.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(le.assign,n+1):this.finishOp(le.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(le.relational,n))};$r.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(le.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(le.arrow)):this.finishOp(e===61?le.eq:le.prefix,1)};$r.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(le.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(le.assign,3)}return this.finishOp(le.coalesce,2)}}return this.finishOp(le.question,1)};$r.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),u1(t,!0)||t===92))return this.finishToken(le.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Ub(t)+"'")};$r.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(le.parenL);case 41:return++this.pos,this.finishToken(le.parenR);case 59:return++this.pos,this.finishToken(le.semi);case 44:return++this.pos,this.finishToken(le.comma);case 91:return++this.pos,this.finishToken(le.bracketL);case 93:return++this.pos,this.finishToken(le.bracketR);case 123:return++this.pos,this.finishToken(le.braceL);case 125:return++this.pos,this.finishToken(le.braceR);case 58:return++this.pos,this.finishToken(le.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(le.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(le.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Ub(e)+"'")};$r.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};$r.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Ah.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new lg(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(le.regexp,{pattern:i,flags:o,value:u})};$r.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function m2t(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function sNe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}$r.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=sNe(this.input.slice(t,this.pos)),++this.pos):u1(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(le.num,n)};$r.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=sNe(this.input.slice(t,this.pos));return++this.pos,u1(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(le.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),u1(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=m2t(this.input.slice(t,this.pos),n);return this.finishToken(le.num,s)};$r.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};$r.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(sI(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(le.string,t)};var oNe={};$r.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===oNe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};$r.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw oNe;this.raise(e,t)};$r.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===le.template||this.type===le.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(le.dollarBraceL)):(++this.pos,this.finishToken(le.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(le.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(sI(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};$r.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(le.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};$r.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Ub(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return sI(t)?"":String.fromCharCode(t)}};$r.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};$r.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(UC(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?u1:UC)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=Ub(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};$r.readWord=function(){var e=this.readWord1(),t=le.name;return this.keywords.test(e)&&(t=Dte[e]),this.finishToken(t,e)};var g2t="8.11.3";ya.acorn={Parser:ya,version:g2t,defaultOptions:mY,Position:XN,SourceLocation:L9,getLineInfo:RDe,Node:F9,TokenType:ui,tokTypes:le,keywordTypes:Dte,TokContext:ip,tokContexts:Os,isIdentifierChar:UC,isIdentifierStart:u1,Token:Fte,isNewLine:sI,lineBreak:Ah,lineBreakG:USt,nonASCIIwhitespace:IDe};function y2t(e,t){return ya.parse(e,t)}const Bte={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},v2t={ecmaVersion:11},lme="$",b2t="d",x2t="d1",_2t="d2",fu=e=>(t,n)=>n.error(t,e+" not allowed"),w2t=fu("Aggregate function"),E2t=fu("Window function"),T2t="Invalid argument",jte="Invalid column reference",S2t=jte+" (must be input to an aggregate function)",aNe="Invalid function call",C2t="Invalid member expression",A2t="Invalid operator parameter",I2t="Invalid param reference",k2t="Invalid variable reference",R2t="Variable not accessible in operator call",D2t="Unsupported variable declaration",N2t="Unsupported destructuring pattern",uNe="Table expressions do not support closures",lNe="Use aq.escape(fn) to use a function as-is (including closures)",P2t="use table.params({ name: value }) to define dynamic parameters",O2t="use aq.addFunction(name, fn) to add new op functions",M2t=`
Note: ${uNe}. ${lNe}, or ${P2t}.`,cNe=`
Note: ${uNe}. ${lNe}, or ${O2t}.`,L2t=`The ${cke} method is not valid in multi-table expressions.`;function $2t(e,t){const n=F2t(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,DSt(r)?(j2t(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=x2t),e.scope.add(e.tuple2=_2t),e.scope.add(e.$param=lme)):(e.scope.add(e.tuple=b2t),e.scope.add(e.$param=lme)),ii(r,e,Ute),e.root}function F2t(e){try{const t=e.field?B2t(e):pi(e)?j0(e):e;return y2t(`expr=(${t})`,v2t).body[0].expression.right}catch{gr(`Expression parse error: ${e+""}`)}}function B2t(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const Ute={FunctionDeclaration:fu("Function definitions"),ForStatement:fu("For loops"),ForOfStatement:fu("For-of loops"),ForInStatement:fu("For-in loops"),WhileStatement:fu("While loops"),DoWhileStatement:fu("Do-while loops"),AwaitExpression:fu("Await expressions"),ArrowFunctionExpression:fu("Function definitions"),AssignmentExpression:fu("Assignments"),FunctionExpression:fu("Function definitions"),NewExpression:fu('Use of "new"'),UpdateExpression:fu("Update expressions"),VariableDeclarator(e,t){bY(e.id,t)},Identifier(e,t,n){hNe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,k2t,M2t)},CallExpression(e,t){const n=fNe(e.callee),r=ake(n)||uke(n);if(r){if((t.join||t.aggregate===!1)&&Ree(n)&&w2t(e,t),(t.join||t.window===!1)&&Dee(n)&&E2t(e,t),t.$op=1,t.ast)vY(e,n,t),e.arguments.forEach(i=>ii(i,t,yY));else{const i=t.op(U2t(t,r,n,e.arguments));Object.assign(e,{type:nke,name:i.id})}return t.$op=0,!1}else oke(n)?vY(e,n,t):t.error(e,aNe,cNe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!aa(cb,r))return;const{name:s}=r;if(dNe(e)&&aa(cb,i)&&Up(Bte,i.name)){gNe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return cme(e,o,t,pNe,n);if(s===t.$param)return cme(e,o,t,V2t);t.paramsRef.has(s)?JN(e,t.paramsRef.get(s)):t.columnRef.has(s)?mNe(r,s,t,e):Up(t.params,s)&&JN(r,s)}};function cme(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(aa(eI,s))a=s.value;else try{ii(s,n,Ute,e),a=n.param(s)}catch{n.error(e,C2t)}return r(e,a,t,n,i),!1}const yY={...Ute,VariableDeclarator:fu("Variable declaration in operator call"),Identifier(e,t,n){hNe(e,t,n)&&t.error(e,R2t)},CallExpression(e,t){const n=fNe(e.callee);oke(n)?vY(e,n,t):t.error(e,aNe,cNe)}};function j2t(e,t){e.generator&&fu("Generator functions")(e,t),e.async&&fu("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(fR(t,n[0],"tuple1",i(1)),r>1&&fR(t,n[1],"tuple2",i(2)),r>2&&fR(t,n[2],"$param",s)):(fR(t,n[0],"tuple",i(0)),r>1&&fR(t,n[1],"$param",s))),t.root=e.body}function fR(e,t,n,r){aa(cb,t)?(e.scope.add(t.name),e[n]=t.name):aa(eke,t)&&t.properties.forEach(i=>{const s=aa(cb,i.key)?i.key.name:aa(eI,i.key)?i.key.value:e.error(i,T2t);aa(cb,i.value)||e.error(i.value,N2t),r(i.value.name,s)})}function U2t(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(ii(u,e,yY),i.push(e.field(u))):l<a?(ii(u,e,yY),s.push(e.param(u))):e.error(u,A2t)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function fNe(e){return aa(cb,e)?e.name:aa(ZIe,e)?dNe(e)?z2t(e.property.name):e.property.name:null}function dNe(e){return aa(cb,e.object)&&e.object.name==="Math"}function z2t(e){return e==="max"?"greatest":e==="min"?"least":e}function hNe(e,t,n){const{name:r}=e;if(!(aa(ZIe,n)&&n.property===e)){if(!(aa(tke,n)&&n.key===e))if(t.paramsRef.has(r))JN(e,t.paramsRef.get(r));else if(t.columnRef.has(r))mNe(e,r,t,n);else if(Up(t.params,r))JN(e,r);else if(Up(Bte,r))gNe(e,r);else return!0}}function pNe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,jte),r.aggronly&&!r.$op&&r.error(e,S2t),lke(e,t,n,o,i)}function mNe(e,t,n,r){const[i,s]=n.columnRef.get(t);pNe(e,i,s,n,r)}function V2t(e,t,n,r){r.params&&!Up(r.params,t)&&r.error(e,I2t),JN(e,t)}function JN(e,t){e.type=N_t,e.name=t}function gNe(e,t){e.type=k_t,e.name=t,e.raw=Bte[t]}function vY(e,t,n){if(t===cke){const r=n.table;r||n.error(e,L2t),fke(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Zl(s)?r.columnName(s):s;return r.column(o)||n.error(i,jte),o}):r.columnNames())}else e.callee={type:D_t,name:t}}function bY(e,t){aa(cb,e)?t.scope.add(e.name):aa(S_t,e)?e.elements.forEach(n=>bY(n,t)):aa(eke,e)?e.properties.forEach(n=>bY(n.value,t)):t.error(e.id,D2t)}const H2t={[v3]:1,[nke]:1};function sf(e,t={}){const n=t.generate||s5,r=t.compiler||Nee,i=W2t(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=q2t(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return aa(eI,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const v=g.escape||(t.ast?RSt(g):f(n(g),i));u.push(v),H2t[g.type]&&v!==g&&hl(v)&&(v.field=g.name)},error(m,g,v=""){const b=m.start-6,w=m.end-6,E=String(d.spec).slice(b,w);gr(`${g}: "${E}"${v}`)}};Object.assign(d,t,{params:i});for(const[m,g]of w9(e))d.value(m+"",g.escape?OSt(d,g,i):$2t(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function q2t(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function W2t(e){return(e.table?KV(e.table):e.join?{...KV(e.join[1]),...KV(e.join[0])}:{})||{}}function KV(e){return e&&Es(e.params)?e.params():{}}const yNe="Expr",sp="ExprList",vNe="ExprNumber",aD="ExprObject",E2="JoinKeys",I5="JoinValues",Yd="Options",zte="OrderKeys",kv="SelectionList",aw="TableRef",T2="TableRefList",G2t="Descending",Y2t="Query",K2t="Selection",X2t="Verb",Q2t="Window";function j9(e,t){return e&&e.expr?new fme({...e,...t}):new fme(t,e)}class fme{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Es(this.expr)?{func:!0}:{}}}}function J2t(e){return j9(e,{desc:!0})}function sE(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return j9(e,t?{expr:t,...r}:r)}function Z2t(e,t,n){return j9(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function eCt(e){const t=n=>n;return t.toString=()=>e,t}function dme(e,t){return t=t&&Es(t.query)?t.query():t,t&&Es(t.evaluate)?t.evaluate(null,e):e(t)}function bNe(e){return hl(e)&&(pi(e.all)||pi(e.matches)||pi(e.not)||pi(e.range))}function ZN(e){return e&&Es(e.toObject)?e.toObject():Es(e)?{expr:String(e),func:!0}:pi(e)?e.map(ZN):hl(e)?O9(e,t=>ZN(t)):e}function Vte(e){return pi(e)?e.map(Vte):hl(e)?pi(e.verbs)?qte.from(e):pi(e.all)?jC():pi(e.range)?SSt(...e.range):pi(e.match)?CSt(RegExp(...e.match)):pi(e.not)?EDe(e.not.map(ZN)):tCt(e):e}function tCt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=sE(n):e.func===!0&&(t=n=eCt(n)),hl(e.window)){const{frame:r,peers:i}=e.window;t=n=Z2t(n,r,i)}e.desc===!0&&(t=J2t(n))}return e===t?O9(e,r=>Vte(r)):t}function nCt(e){return pi(e)?e.map(rCt):e}function rCt(e){const t=[];return tf(e).forEach(n=>{Zl(n)?t.push(n):ku(n)?t.push(sE(n,null)):hl(n)&&n.expr||Es(n)?t.push(n):gr(`Invalid key value: ${n+""}`)}),t}function iCt(e){return pi(e)?e.map(sCt):e}function sCt(e,t){return t<2?tf(e):e}function oCt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(hl(r)&&!Es(r))for(const i in r)t.push(r[i]);else n=Zl(r)?r:ku(r)?sE(n):Es(r)?n:gr(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const aCt={[yNe]:ENe,[sp]:zC,[vNe]:hCt,[aD]:zb,[E2]:pCt,[I5]:mCt,[zte]:zC,[kv]:fCt};function uCt(e,t,n){return t===aw?hme(e):t===T2?e.map(hme):xNe(ZN(e),t,n)}function xNe(e,t,n){return t===Yd?e&&lCt(e,n):aCt[t](e)}function lCt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?xNe(i,t[r]):i}return n}function cCt(e,t){return sf({expr:e},{...t,ast:!0}).exprs[0]}function Hte(e){return{type:v3,name:e}}function _Ne(e){return{type:v3,index:e}}function zb(e,t){if(ku(e))return cCt(e,t);if(e.expr){let n;if(e.field===!0?n=Hte(e.expr):e.func===!0&&(n=zb(e.expr,t)),n)return e.desc&&(n={type:G2t,expr:n}),e.window&&(n={type:Q2t,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...zb(e[n],t),as:n}))}function wNe(e){const t=K2t;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:zC(e.not)}:e.range?{type:t,operator:"range",arguments:zC(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:gr("Invalid input")}function fCt(e){return tf(e).map(dCt).flat()}function dCt(e){return bNe(e)?wNe(e):Zl(e)?_Ne(e):ku(e)?Hte(e):hl(e)?Object.keys(e).map(t=>({type:v3,name:t,as:e[t]})):gr("Invalid input")}function ENe(e){return bNe(e)?wNe(e):Zl(e)?_Ne(e):ku(e)?Hte(e):hl(e)?zb(e):gr("Invalid input")}function zC(e){return tf(e).map(ENe).flat()}function hCt(e){return Zl(e)?e:zb(e)}function pCt(e){return pi(e)?e.map(zC):zb(e,{join:!0})}function mCt(e){return pi(e)?e.map((t,n)=>n<2?zC(t):zb(t,{join:!0})):zb(e,{join:!0})}function hme(e){return e&&Es(e.toAST)?e.toAST():e}class TNe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===E2?nCt(a):o===I5?iCt(a):o===zte?oCt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=xY[t.verb],r=(n.schema||[]).map(({name:i})=>Vte(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===aw?dme(n,o):s===T2?o.map(a=>dme(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=ZN(this[n])}),t}toAST(){const t={type:X2t,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=uCt(this[n],r,i)}),t}}function zi(e,t){return Object.assign((...n)=>new TNe(e,t,n),{schema:t})}const xY={count:zi("count",[{name:"options",type:Yd}]),derive:zi("derive",[{name:"values",type:aD},{name:"options",type:Yd,props:{before:kv,after:kv}}]),filter:zi("filter",[{name:"criteria",type:aD}]),groupby:zi("groupby",[{name:"keys",type:sp}]),orderby:zi("orderby",[{name:"keys",type:zte}]),relocate:zi("relocate",[{name:"columns",type:kv},{name:"options",type:Yd,props:{before:kv,after:kv}}]),rename:zi("rename",[{name:"columns",type:kv}]),rollup:zi("rollup",[{name:"values",type:aD}]),sample:zi("sample",[{name:"size",type:vNe},{name:"options",type:Yd,props:{weight:yNe}}]),select:zi("select",[{name:"columns",type:kv}]),ungroup:zi("ungroup"),unorder:zi("unorder"),reify:zi("reify"),dedupe:zi("dedupe",[{name:"keys",type:sp,default:[]}]),impute:zi("impute",[{name:"values",type:aD},{name:"options",type:Yd,props:{expand:sp}}]),fold:zi("fold",[{name:"values",type:sp},{name:"options",type:Yd}]),pivot:zi("pivot",[{name:"keys",type:sp},{name:"values",type:sp},{name:"options",type:Yd}]),spread:zi("spread",[{name:"values",type:sp},{name:"options",type:Yd}]),unroll:zi("unroll",[{name:"values",type:sp},{name:"options",type:Yd,props:{drop:sp}}]),lookup:zi("lookup",[{name:"table",type:aw},{name:"on",type:E2},{name:"values",type:sp}]),join:zi("join",[{name:"table",type:aw},{name:"on",type:E2},{name:"values",type:I5},{name:"options",type:Yd}]),cross:zi("cross",[{name:"table",type:aw},{name:"values",type:I5},{name:"options",type:Yd}]),semijoin:zi("semijoin",[{name:"table",type:aw},{name:"on",type:E2}]),antijoin:zi("antijoin",[{name:"table",type:aw},{name:"on",type:E2}]),concat:zi("concat",[{name:"tables",type:T2}]),union:zi("union",[{name:"tables",type:T2}]),intersect:zi("intersect",[{name:"tables",type:T2}]),except:zi("except",[{name:"tables",type:T2}])};let qte=class SNe extends jIe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new SNe(t.map(TNe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return pme(this,"toObject")}toJSON(){return this.toObject()}toAST(){return pme(this,"toAST",{type:Y2t})}};function pme(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function gCt(e,t){return new qte(e._verbs.concat(t),e._params,e._table)}for(const e in xY){const t=xY[e];qte.prototype["__"+e]=function(n,...r){return gCt(n,t(...r))}}function uI(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function yCt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function Wte(e,t){const n=xd();return t.forEach((r,i)=>{const s=ku(r)?r:i;if(s){const o=e.column(i)||gr(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function CNe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||gr("relocate requires a before or after option."),i&&s&&gr("relocate accepts only one of the before or after options."),t=a1(e,t);const o=[...a1(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),Wte(e,u)}function A3(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function Gte(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vCt(e,t=0,n=e.length){let r=n?e[t++]:li;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function bCt(e,t=0,n=e.length){let r=n?e[t++]:li;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function m6(e){return VN(e)?e:+e}function xCt(e,t){const n=e.length;if(!n)return li;if((t=+t)<=0||n<2)return m6(e[0]);if(t>=1)return m6(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=m6(e[i]);return VN(s)?s:s+(m6(e[i+1])-s)*(r-i)}class _Ct{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:vCt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:bCt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(Gte)),xCt(this._sorted,t)}}const k5=(e,t,n)=>uI(t,"{"+A3(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function wCt(e,t){const{ops:n,output:r}=ECt(e,t),i=e[0].fields,s=i.length,o=s===0?Yte:s===1?TCt:s===2?SCt:gr("Unsupported field count: "+s);return new o(i,n,r,t)}function ECt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=ake(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class Yte extends ISt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new _Ct),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class TCt extends Yte{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=k5(n,s,"add"),this._rem=k5(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Cp(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Cp(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class SCt extends Yte{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=k5(n,s,"add"),this._rem=k5(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Cp(i)&&Cp(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Cp(i)&&Cp(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function WE(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=lI(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function lI(e,t,n){if(!t.length)return n;const r=ANe(t),i=e.groups(),s=i?i.size:1;return n=n||x9(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=kNe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=INe(e,o);o.write(a,n,0)}),n}function ANe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(wCt(r[i],t));return n}function INe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function kNe(e,t,n){const{keys:r,size:i}=n,s=x9(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function RNe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function DNe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const mme=DNe(Gte);function CCt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?uI(["w","r","k"],"{"+A3(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,v,b){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=v,l=b,a=i.map(w=>w.init());for(let w=0;w<f;++w)r[w].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,v]=t,b=p.size,w=p.i0,E=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=v!=null?Math.min(b,m+Math.abs(v)+1):b,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=mme.left(o,o[p.i0])),p.i1<b&&c(p.i1)&&(p.i1=mme.right(o,o[p.i1-1])));for(let T=0;T<d;++T){const C=i[T],I=a[T];for(let R=w;R<p.i0;++R)C.rem(I,s[R],e);for(let R=E;R<p.i1;++R)C.add(I,s[R],e);C.write(I,u,l)}return h(p,u,l),u}};return p}const ACt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),ICt=e=>!!e.peers;function kCt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=uke(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function RCt(e,t,n,r={},i){const s=e.data(),o=DCt(i,s),a=o.length,u=uI(["r","d","op"],"{"+A3(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=NCt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function DCt(e,t){const n={};return e.forEach(r=>{const i=ACt(r),s=ICt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});Ree(r.name)?a.push(r):u.push(kCt(r))}),Object.values(n).map(r=>CCt(t,r.frame,r.peers,r.winOps,ANe(r.aggOps,r.frame[0]!=null?-1:1)))}function NCt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function PCt(e){return Dee(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function Kte(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=xd(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=OCt(r),c=e.isGrouped()?e.groups().size:1,f=lI(e,u,x9(r.length,()=>Array(c)));return l.length?RCt(e,a,n,f,l):MCt(e,a,n,f),e.create(o)}function OCt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(PCt(s)?n:t).push(s)}return[t,n]}function MCt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function LCt(e,t,n={}){const r=Kte(e,sf(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:CNe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function $Ct(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const g6=2147483648,FCt=4294967295;class NNe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&g6>>>t}set(t){this._bits[t>>5]|=g6>>>t}clear(t){this._bits[t>>5]&=~(g6>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&FCt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=g6>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function BCt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new NNe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function jCt(e,t){const n=sf({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=Kte(e,n,{drop:!0}).column("p");r=s=>i[s]}return BCt(e,r)}function PNe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=WE(e,r,n),l=xd(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(E=>{if(!a.has(E)){const T=l.add(E,[]);c.has(E)||(f.push(e.column(E)),d.push(T))}}),t.forEach(E=>{a.has(E)||(l.has(E)||l.add(E,[]),h.push(l.data[E]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,v=h.length,b=(E,T)=>{for(let C=0;C<g;++C)d[C].length=m+T,d[C].fill(f[C].get(E),m,m+T)},w=p?(E,T)=>{for(let C=0;C<T;++C)p[E+C]=C}:()=>{};if(v===1){const E=u[0],T=h[0];e.scan((C,I)=>{const R=tf(E(C,I)),N=Math.min(R.length,s);b(C,N);for(let O=0;O<N;++O)T[m+O]=R[O];w(m,N),m+=N})}else e.scan((E,T)=>{let C=0;const I=u.map(R=>{const N=tf(R(E,T));return C=Math.min(Math.max(C,N.length),s),N});b(E,C);for(let R=0;R<v;++R){const N=h[R],O=I[R];for(let L=0;L<C;++L)N[m+L]=O[L]}w(m,C),m+=C});return e.create(l.new())}function UCt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=WE(e,r,n);return PNe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Vp(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Zl(o)?t.columnName(o):o,ku(o)?i.set(o,sE(o)):Es(o)?a1(t,o).forEach(s):hl(o)?_De(i,o):gr(`Invalid ${e} value: ${o+""}`)};return tf(n).forEach(s),r.preparse&&r.preparse(i),sf(i,{table:t,...r})}function zCt(e,t,n){return UCt(e,Vp("fold",e,t),n)}function gme(e,t,n,r){const i=n&&n.length;return VCt(i?HCt(e,n,r):e,t,i)}function VCt(e,{names:t,exprs:n,ops:r},i){const s=WE(e,r,n),o=i?null:xd(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Cp(p)?p:d(h)})}),i?e:e.create(o)}function HCt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=o5(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=xd(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],v=f[m];e.scan(b=>v.push(g.get(b)))});const d=o5(o.map((p,m)=>g=>g[m])),h=uI("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((v,b)=>v*b.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),yme(r,n,(v,b)=>{a.has(d(v))||(h(v),g[p++]=b[0])}),c.groupby({...r,keys:g})}else yme(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function yme(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function Xte(e,{names:t,exprs:n,ops:r}){const i=xd(),s=e.groups();return s&&RNe(i,s),qCt(t,n,s,lI(e,r),i),e.create(i.new())}function qCt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function WCt(e,t,n={}){if(t=sf(t,{table:e}),t.names.forEach(r=>e.column(r)?0:gr(`Invalid impute column ${j0(r)}`)),n.expand){const r={preparse:GCt,aggronly:!0},i=Vp("impute",e,n.expand,r),s=Xte(e.ungroup(),i);return gme(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return gme(e,t)}function GCt(e){e.forEach((t,n)=>t.field?e.set(n,KIe(t+"")):0)}function YCt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function ONe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function KCt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function XCt(e,t){const n=["i","a","j","b"];return uI(n,"{"+A3(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function QCt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=xd(),g=Array(p),v=Array(p);for(let E=0;E<r.length;++E)g[E]=m.add(r[E],[]),v[E]=i[E];const b=XCt(g,v);if((pi(n)?ZCt:JCt)(b,n,o,c,a,f,l,h,u,d),s.left)for(let E=0;E<u;++E)l[E]||b(a[E],o,-1,c);if(s.right)for(let E=0;E<d;++E)h[E]||b(-1,o,f[E],c);return e.create(m.new())}function JCt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function ZCt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,v,b,w=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,v=u,b=o):(f=i,d=n,h=u,p=o,m=r,g=t,v=a,b=s,w=(C,I,R,N)=>e(R,N,C,I));const E=KCt(b,m,g),T=p.length;for(let C=0;C<T;++C){const I=p[C],R=E.get(d(I,f));if(R){const N=R.length;for(let O=0;O<N;++O){const L=R[O];w(I,f,b[L],m),v[L]=1}h[C]=1}}}function R5(e,t,n){const r=new Map;tf(n).forEach((s,o)=>{s=Zl(s)?t.columnName(s):s,ku(s)?r.set(o,sE(s)):Es(s)||hl(s)&&s.expr?r.set(o,s):gr(`Invalid ${e} key value: ${s+""}`)});const i=sf(r,{table:t,aggregate:!1,window:!1});return o5(i.exprs,!0)}function eAt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function Qte(e,t,n){if(n)ku(n)?n=[n,n]:pi(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=eAt(e.columnNames(),t.columnNames());r.length||gr("Natural join requires shared column names."),n=[r,r]}return n}function MNe(e,t,n,r){return n.length!==r.length&&gr("Mismatched number of join keys"),[R5("join",e,n),R5("join",t,r)]}const tAt={aggregate:!1,window:!1},nAt={...tAt,index:1};function vme(e,t,n,r,i={}){n=Qte(e,t,n);const s={join:[e,t]};let o;if(pi(n)){const[a,u]=n.map(tf);o=MNe(e,t,a,u),r||(r=rAt(e,a,u,i))}else o=sf({on:n},s).exprs[0],r||(r=[jC(),jC()]);return QCt(e,t,o,iAt(e,t,r,s,i&&i.suffix),i)}function rAt(e,t,n,r){const i=[];t.forEach((o,a)=>ku(o)&&o===n[a]?i.push(o):0);const s=EDe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${j0(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,jC()]:[jC(),s]}function iAt(e,t,n,r,i=[]){if(pi(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Vp("join",e,n[0],r)),u--&&(o=Vp("join",t,n[1],nAt)),u--&&(a=sf(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&bme(s.names,l,i[0]||"_1"),i[1]!==""&&bme(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return sf(n,r)}function bme(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function sAt(e,t,n,r={}){const i=new NNe(e.totalRows());return(pi(n)?oAt:aAt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function oAt(e,t,n,[r,i]){const s=ONe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function aAt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function xme(e,t,n,r){n=Qte(e,t,n);const i=pi(n)?MNe(e,t,...n.map(tf)):sf({on:n},{join:[e,t]}).exprs[0];return sAt(e,t,i,r)}function uAt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=xd(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(li)));const l=ONe(t,r),c=uI(["lr","rr","data"],"{"+A3(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),WE(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function lAt(e,t,n,r){return n=Qte(e,t,n),uAt(e,t,[R5("lookup",e,n[0]),R5("lookup",t,n[1])],Vp("lookup",t,r))}const _Y=(e,t)=>e??t;function cAt(e,t,n,r={}){const{keys:i,keyColumn:s}=fAt(e,t,r),o=_Y(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>lI(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(dAt(n,a,e.groups(),u))}function fAt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=_Y(n.sort,!0),s=_Y(n.keySeparator,"_"),o=WE(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=lI(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function dAt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=xd(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&RNe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function hAt(e,t,n,r){return cAt(e,Vp("fold",e,t),Vp("fold",e,n,{preparse:pAt,aggronly:!0}),r)}function pAt(e){e.forEach((t,n)=>t.field?e.set(n,WIe(t+"")):0)}function mAt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),Wte(e,a1(e,t,n))}function _me(e,t){return Xte(e,sf(t,{table:e,aggronly:!0,window:!1}))}function gAt(e,t,n,r){return(t?r?vAt:yAt:r?xAt:bAt)(e.length,e,n,r)}function yAt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*ZA()|0];return t}function vAt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=DNe(Gte).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*ZA())];return t}function bAt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*ZA();s<e&&(t[s|0]=n[i])}return t}function xAt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(ZA())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function _At(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=ZA()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function wAt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):gAt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&_At(u),e.reify(u)}function EAt(e,t,n={}){return wAt(e,TAt(e,t),SAt(e,n.weight),n)}const LNe=e=>t=>e.get(t)||0;function TAt(e,t){return Zl(t)?()=>t:LNe(Xte(e,sf({size:t},{table:e,window:!1})).column("size"))}function SAt(e,t){return t==null?null:(t=Zl(t)?e.columnName(t):t,LNe(ku(t)?e.column(t):Kte(e,sf({w:t},{table:e}),{drop:!0}).column("w")))}function CAt(e,t){return Wte(e,a1(e,t))}function AAt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=WE(e,r,n),l=xd(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=IAt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function IAt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=tf(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(li));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function kAt(e,t,n){return AAt(e,Vp("spread",e,t),n)}function RAt(e,t){return e.concat(t).dedupe()}function DAt(e,t,n){return PNe(e,Vp("unroll",e,t),n&&n.drop?{...n,drop:Vp("unroll",e,n.drop).names}:n)}function NAt(e,t){return e.create({groups:PAt(e,t)})}function PAt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=WE(e,r,n);const o=o5(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function OAt(e,t){return NAt(e,Vp("groupby",e,t))}function MAt(e,t){return e.create({order:t})}const LAt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function $At(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=sf(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([s5(p,{index:"a",op:o}),s5(p,{index:"b",op:a})])},window:!1}),l=lI(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=LAt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function FAt(e,t){return MAt(e,BAt(e,t))}function BAt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(hl(o)&&!Es(o))for(const a in o)i(o[a]);else i(Zl(o)?sE(s,e.columnName(o)):ku(o)?sE(s):Es(o)?s:gr(`Invalid orderby field: ${s+""}`))}),$At(e,r)}function jAt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=xd();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>li};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function UAt(e,t){const n=xd(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?kNe(e,t,r):[INe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let v=0,b=0;v<a;++v)m.fill(g(o[v],d),b,b+=u[v+1])})}return e.create(n.new())}function zAt(e){return e.isGrouped()?e.create({groups:null}):e}function VAt(e){return e.isOrdered()?e.create({order:null}):e}const HAt={__antijoin:(e,t,n)=>xme(e,t,n,{anti:!0}),__count:(e,t={})=>_me(e,{[t.as||"count"]:GIe()}),__cross:(e,t,n,r)=>vme(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:jAt,__dedupe:yCt,__derive:LCt,__except:$Ct,__filter:jCt,__fold:zCt,__impute:WCt,__intersect:YCt,__join:vme,__lookup:lAt,__pivot:hAt,__relocate:CNe,__rename:mAt,__rollup:_me,__sample:EAt,__select:CAt,__semijoin:xme,__spread:kAt,__union:RAt,__unroll:DAt,__groupby:OAt,__orderby:FAt,__ungroup:zAt,__unorder:VAt,__reduce:UAt};Object.assign(_y.prototype,HAt);function $Ne(e,t){return _y.from(e,t)}function K2(e){return j9(e,{escape:!0,toString(){gr("Escaped values can not be serialized.")}})}_y.prototype;var XV,wme;function qAt(){if(wme)return XV;wme=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=parseInt,u=typeof la=="object"&&la&&la.Object===Object&&la,l=typeof self=="object"&&self&&self.Object===Object&&self,c=u||l||Function("return this")(),f=Object.prototype,d=f.toString,h=Math.max,p=Math.min,m=function(){return c.Date.now()};function g(T,C,I){var R,N,O,L,B,F,H=0,Q=!1,J=!1,ne=!0;if(typeof T!="function")throw new TypeError(e);C=E(C)||0,v(I)&&(Q=!!I.leading,J="maxWait"in I,O=J?h(E(I.maxWait)||0,C):O,ne="trailing"in I?!!I.trailing:ne);function Z(_e){var pe=R,Te=N;return R=N=void 0,H=_e,L=T.apply(Te,pe),L}function ie(_e){return H=_e,B=setTimeout(G,C),Q?Z(_e):L}function q(_e){var pe=_e-F,Te=_e-H,Le=C-pe;return J?p(Le,O-Te):Le}function U(_e){var pe=_e-F,Te=_e-H;return F===void 0||pe>=C||pe<0||J&&Te>=O}function G(){var _e=m();if(U(_e))return V(_e);B=setTimeout(G,q(_e))}function V(_e){return B=void 0,ne&&R?Z(_e):(R=N=void 0,L)}function Y(){B!==void 0&&clearTimeout(B),H=0,R=F=N=B=void 0}function ee(){return B===void 0?L:V(m())}function ae(){var _e=m(),pe=U(_e);if(R=arguments,N=this,F=_e,pe){if(B===void 0)return ie(F);if(J)return B=setTimeout(G,C),Z(F)}return B===void 0&&(B=setTimeout(G,C)),L}return ae.cancel=Y,ae.flush=ee,ae}function v(T){var C=typeof T;return!!T&&(C=="object"||C=="function")}function b(T){return!!T&&typeof T=="object"}function w(T){return typeof T=="symbol"||b(T)&&d.call(T)==n}function E(T){if(typeof T=="number")return T;if(w(T))return t;if(v(T)){var C=typeof T.valueOf=="function"?T.valueOf():T;T=v(C)?C+"":C}if(typeof T!="string")return T===0?T:+T;T=T.replace(r,"");var I=s.test(T);return I||o.test(T)?a(T.slice(2),I?2:8):i.test(T)?t:+T}return XV=g,XV}var WAt=qAt();const up=yh(WAt);function FNe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=P.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=P.useMemo(()=>_x(".2s"),[]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:S.jsx(ga,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),S.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>S.jsxs("g",{transform:`translate(${n}, ${a})`,children:[S.jsx("line",{x2:"-6",stroke:"currentColor"}),S.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),S.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const GAt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:FNe},Symbol.toStringTag,{value:"Module"})),QV=15;function BNe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=P.useState([0,0]),[l,c]=P.useState(!1);return P.useEffect(()=>{const f=hi("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<QV&&Math.abs(t(g[r.y])-p[1])<QV);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(b=>{g.has(b[r.ids])&&g.delete(b[r.ids])});const v=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,v.length===0?"clear":"drag",v)}else{const g=Array.from(new Set([...s.ids,...m.map(v=>v[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),S.jsx("circle",{style:{cursor:l?"pointer":"default"},r:QV,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const YAt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:BNe},Symbol.toStringTag,{value:"Module"})),Is={top:15,left:100,right:15,bottom:70};function wY({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=td(),[c]=td(),[f]=td(),[d,h]=P.useState(!0),p=P.useMemo(()=>l-Is.left-Is.right,[l]),m=P.useMemo(()=>u-Is.top-Is.bottom,[u]),g=P.useMemo(()=>{const O=Array.from(new Set(s.map(L=>L[i.category])));return Ex(f9).domain(O)},[s,i.category]),{xMin:v,yMin:b,xMax:w,yMax:E}=P.useMemo(()=>{const O=s.map(J=>+J[i.x]).filter(J=>J!==null),[L,B]=CN(O),F=s.map(J=>+J[i.y]).filter(J=>J!==null),[H,Q]=CN(F);return{xMin:L,xMax:B,yMin:H,yMax:Q}},[s,i.x,i.y]),T=P.useMemo(()=>{const O=w-v;return p<=0?null:i.dataType==="date"?nee([Is.left,p+Is.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):ef([Is.left,p+Is.left]).domain([v-O/10,w+O/10]).nice()},[i.dataType,p,w,v]),C=P.useMemo(()=>{const O=E-b;return m<=0?null:ef([m+Is.top,Is.top]).domain([b-O/10,E+O/10]).nice()},[m,E,b]),I=P.useMemo(()=>{if(!T||!C)return()=>null;if(r==="Axis Selection"){const O=xCe().extent([[Is.left,Is.top+m-5],[Is.left+p,Is.top+m+5]]).on("brush end",B=>{B.sourceEvent!==void 0&&n([[B.selection[0],null],[B.selection[1],null]],T,C,B.mode)}),L=_Ce().extent([[Is.left-5,Is.top],[Is.left+5,Is.top+m]]).on("brush end",B=>{B.sourceEvent!==void 0&&n([[null,B.selection[0]],[null,B.selection[1]]],T,C,B.mode)});return c.current&&f.current&&(hi(f.current).call(L),hi(c.current).call(O),t.hasBrush||(hi(f.current).call(L.move,[C(E),C(b)]),hi(c.current).call(O.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),C(E)],[T(new Date("2015-12-31")),C(b)]],T,C,"drag"))),()=>{hi(f.current).call(L.move,[C(E),C(b)]),hi(c.current).call(O.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),C(E)],[T(new Date("2015-12-31")),C(b)]],T,C,"clear")}}if(r==="Rectangular Selection"){const O=wCe().extent([[Is.left,Is.top],[Is.left+p,Is.top+m]]).on("brush",L=>{L.sourceEvent!==void 0&&n([[L.selection[0][0],L.selection[0][1]],[L.selection[1][0],L.selection[1][1]]],T,C,L.mode)}).on("end",L=>{L.selection===null&&L.sourceEvent!==void 0&&(hi(a.current).call(O.move,null),e(null))});return hi(a.current).call(O),()=>{hi(a.current).call(O.move,null),n([[null,null],[null,null]],T,C,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[T(v),C(E)],[T(w),C(b)]],T,C,null),()=>n([[T(v),C(E)],[T(w),C(b)]],T,C,"clear")):r==="Paintbrush Selection"?()=>n([[T(v),C(E)],[T(w),C(b)]],T,C,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,w,v,T,E,b,C]),R=P.useMemo(()=>o.length===0?null:new Set(o),[o]),N=P.useMemo(()=>!T||!C?null:s.map((O,L)=>{if(O[i.x]===null||O[i.y]===null)return null;const B=i.dataType==="date"?T(new Date(O[i.x])):T(O[i.x]);return S.jsx("circle",{opacity:R&&!R.has(O[i.ids])?.3:1,r:3,fill:R&&!R.has(O[i.ids])?"lightgray":g(O[i.category]),cx:B,cy:C(O[i.y])},L)}),[R,g,s,i.category,i.dataType,i.ids,i.x,i.y,T,C]);return P.useEffect(()=>{r==="Axis Selection"&&j2e(".handle").style("fill","darkgrey")},[t,r]),S.jsxs(uo,{children:[S.jsxs(Yr,{children:[S.jsx(yn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),I==null||I()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?S.jsx(EB,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:O=>h(O==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),S.jsxs(Yr,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[S.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[T&&C?S.jsxs("g",{children:[S.jsx(FNe,{yScale:C,label:i.y,horizontalPosition:Is.left,xRange:T.range()}),S.jsx(Aee,{xScale:T,yRange:C.range(),isDate:i.dataType==="date",vertPosition:m+Is.top,label:i.x,ticks:T.ticks(i.brushType==="Axis Selection"?12:5).map(O=>({value:O.toString(),offset:T(O)}))})]}):null,N,S.jsx("g",{id:"brushXRef",ref:c}),S.jsx("g",{id:"brushYRef",ref:f}),T&&C&&r==="Paintbrush Selection"?S.jsx(BNe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:T,yScale:C}):null]}),r==="Slider Selection"&&T&&C?S.jsxs(uo,{style:{flexGrow:1},gap:50,children:[S.jsxs(uo,{gap:0,children:[S.jsx(lt,{children:i.x}),S.jsx(mC,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],labelAlwaysOn:!1,onChange:O=>{n([[T(O[0]),t.y1],[T(O[1]),t.y2]],T,C,"drag")},style:{width:"300px"},marks:T.ticks(5).map(O=>({value:O,label:O})),value:[T.invert(t.x1),T.invert(t.x2)]})]}),S.jsxs(uo,{gap:0,children:[S.jsx(lt,{children:i.y}),S.jsx(mC,{minRange:1,label:null,min:C.domain()[0],max:C.domain()[1],onChange:O=>{n([[t.x1,C(O[1])],[t.x2,C(O[0])]],T,C,"drag")},style:{width:"300px"},marks:C.ticks(5).map(O=>({value:O,label:O})),value:[C.invert(t.y2),C.invert(t.y1)]})]})]}):null]})]})}const KAt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:wY,default:wY},Symbol.toStringTag,{value:"Module"}));function Eme({parameters:e,setAnswer:t,provenanceState:n}){const[r,i]=P.useState(null),[s,o]=P.useState(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]});P.useEffect(()=>{o(n?n.all.brush||n.all:{hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]})},[n]);const[a,u]=P.useState(null);P.useEffect(()=>{CCe(`./data/${e.dataset}.csv`).then(v=>{u(v)})},[e]);const l=P.useMemo(()=>a?$Ne(a):null,[a]),{actions:c,trrack:f}=P.useMemo(()=>{const v=qE.create(),b=v.register("brush",(I,R)=>(I.all={brush:R},I)),w=v.register("brushMove",(I,R)=>(I.all={brush:R},I)),E=v.register("brushResize",(I,R)=>(I.all={brush:R},I)),T=v.register("brushClear",(I,R)=>(I.all={brush:R},I)),C=g3({registry:v,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:b,brushMove:w,brushResize:E,clearBrush:T},trrack:C}},[]),d=P.useCallback((v,b)=>{v==="drag"?f.apply("Move Brush",c.brushMove(b)):v==="handle"&&f.apply("Brush",c.brush(b))},[c,f]),h=P.useMemo(()=>up(d,100,{maxWait:100}),[d]),p=P.useCallback((v,b,w,E,T)=>{if(!b||!w)return;const C=b.invert(v[0][0]||s.x1),I=b.invert(v[1][0]||s.x2),R=w.invert(v[1][1]||s.y2),N=w.invert(v[0][1]||s.y1);let O=null;if(E==="clear")O=l;else if(T){const B=new Set(T);O=l.filter(K2(F=>B.has(F[e.ids])))}else e.brushType==="Axis Selection"?O=l.filter(K2(B=>new Date(B[e.x])>=new Date(C)&&new Date(B[e.x])<=new Date(I)&&B[e.y]>=R&&B[e.y]<=N)):O=l.filter(K2(B=>B[e.x]>=C&&B[e.x]<=I&&B[e.y]>=R&&B[e.y]<=N));const L={x1:v[0][0]||(s==null?void 0:s.x1)||0,x2:v[1][0]||(s==null?void 0:s.x2)||0,y1:v[0][1]||(s==null?void 0:s.y1)||0,y2:v[1][1]||(s==null?void 0:s.y2)||0,hasBrush:E!=="clear",ids:E!=="clear"?O==null?void 0:O.array("id"):[]};o(L),E==="drag"||E==="handle"?h(E,L):E==="clear"&&f.apply("Clear Brush",c.clearBrush(L)),i(O),t({status:!0,provenanceGraph:f.graph.backend,answers:{}})},[s,l,e,f,t,h,c]),m=P.useMemo(()=>r?r==null?void 0:r.groupby(e.category).count():l?l==null?void 0:l.groupby(e.category).count():null,[r,l,e.category]),g=P.useCallback(v=>{i(v)},[]);return a?S.jsxs(uo,{gap:"xs",children:[S.jsx(wY,{brushedPoints:s==null?void 0:s.ids,data:a,params:e,brushType:e.brushType,setBrushedSpace:p,brushState:s,setFilteredTable:g}),S.jsx(ZG,{data:a,parameters:e,barsTable:m})]}):S.jsx(df,{})}const XAt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Eme,default:Eme},Symbol.toStringTag,{value:"Module"})),QAt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function jNe({data:e,xScale:t,yScale:n,height:r}){return S.jsx("g",{children:e.map((i,s)=>S.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const JAt=Object.freeze(Object.defineProperty({__proto__:null,Bars:jNe},Symbol.toStringTag,{value:"Module"}));function Jte({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=ef().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return S.jsxs("g",{children:[S.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>S.jsxs("g",{transform:`translate(0,${a})`,children:[S.jsx("line",{x2:`${r}`,stroke:"currentColor"}),S.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const ZAt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:Jte},Symbol.toStringTag,{value:"Module"}));function UNe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=YA().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return S.jsxs("g",{children:[S.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>S.jsx("g",{transform:`translate(${a}, 10)`,children:S.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const eIt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:UNe},Symbol.toStringTag,{value:"Module"})),tIt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function nIt({parameters:e}){const[n,r]=JA(tIt),i=YA().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=ef().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return S.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:S.jsx("svg",{width:r.width,height:r.height,children:S.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[S.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:S.jsx(UNe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),S.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:S.jsx(Jte,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),S.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:S.jsx(jNe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const rIt=Object.freeze(Object.defineProperty({__proto__:null,default:nIt},Symbol.toStringTag,{value:"Module"}));function zNe({data:e}){return S.jsx("g",{children:e.map(({bubble:t},n)=>S.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const iIt=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:zNe},Symbol.toStringTag,{value:"Module"}));function Zte({positions:e}){return S.jsx("g",{children:e.map((t,n)=>S.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const sIt=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:Zte},Symbol.toStringTag,{value:"Module"})),oIt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},aIt=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=TAe().size([t-10,n-10]).padding(1.5),o=n9(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},uIt=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function lIt({parameters:e}){const[t,n]=JA(oIt),r=aIt(e,n.width,n.height),i=uIt(r,e.selectedIndices);return S.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:S.jsx("svg",{width:n.width,height:n.height,children:S.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[S.jsx(zNe,{data:r}),S.jsx(Zte,{positions:i})]})})})}const cIt=Object.freeze(Object.defineProperty({__proto__:null,default:lIt},Symbol.toStringTag,{value:"Module"}));function VNe({arcs:e}){return S.jsx("g",{children:e.map((t,n)=>S.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const fIt=Object.freeze(Object.defineProperty({__proto__:null,Slices:VNe},Symbol.toStringTag,{value:"Module"}));function HNe({positions:e}){return S.jsx("g",{children:e.map((t,n)=>S.jsx("g",{transform:`translate(${t.centroid()})`,children:S.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const dIt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:HNe},Symbol.toStringTag,{value:"Module"})),hIt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},pIt=Tvt().value(e=>e.value),dR=150;function mIt({parameters:e}){const[t,n]=JA(hIt),r=pIt(e.data),i=r.map(o=>OG().innerRadius(0).outerRadius(dR).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>OG().outerRadius(dR+10).innerRadius(dR+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return S.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:S.jsx("svg",{width:n.width,height:n.height,children:S.jsxs("g",{transform:`translate(${[n.marginLeft+dR,n.marginTop+dR].join(",")})`,children:[S.jsx(VNe,{arcs:i}),S.jsx(HNe,{positions:s})]})})})}const gIt=Object.freeze(Object.defineProperty({__proto__:null,default:mIt},Symbol.toStringTag,{value:"Module"}));function qNe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=P.useMemo(()=>{const o=ef().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return S.jsxs("g",{children:[S.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>S.jsxs("g",{transform:`translate(${a}, 0)`,children:[S.jsx("line",{y2:`${r}`,stroke:"currentColor"}),S.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const yIt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:qNe},Symbol.toStringTag,{value:"Module"}));function WNe({data:e,barWidth:t,yScale:n}){return S.jsx("g",{children:e.map((r,i)=>S.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const vIt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:WNe},Symbol.toStringTag,{value:"Module"})),bIt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function xIt({parameters:e}){const[n,r]=JA(bIt),i=YA().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=ef().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(w=>+w.value),g=p.reduce((w,E)=>Number(w)+Number(E))/100,v={};p.forEach((w,E)=>{v[String.fromCharCode(E+65)]=w/g});const b=[v];return Wvt().keys(e.data.map(w=>w.name))(b)},l=(h,p,m)=>h.filter((v,b)=>p.includes(b)).map(v=>({x:m,y:s(v[0][1])+.5*(s(v[0][0])-s(v[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return S.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:S.jsx("svg",{width:r.width,height:r.height,children:S.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[S.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:S.jsx(qNe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),S.jsx("g",{transform:"translate(0, 0)",children:S.jsx(Jte,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),S.jsxs("g",{transform:"translate(0, 0)",children:[S.jsx(WNe,{data:c,barWidth:f,yScale:s}),S.jsx(Zte,{positions:d})]})]})})})}const _It=Object.freeze(Object.defineProperty({__proto__:null,default:xIt},Symbol.toStringTag,{value:"Module"}));function Tme({rankings:e}){return S.jsx("div",{style:{fontFamily:"sans-serif"},children:S.jsx("div",{children:e.map((t,n)=>S.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function wIt({parameters:e,setAnswer:t}){const n=Ch(),[r,i]=P.useState(""),{goToNextStep:s,isNextDisabled:o}=f2e(),a=P.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=P.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=P.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=P.useCallback(()=>{o||s()},[o,s]);P.useEffect(()=>{const h=Lze([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),S.jsxs("div",{children:[S.jsxs(Xf,{children:[S.jsxs(Xf.Col,{span:2,children:[S.jsx(Tme,{rankings:a==="r1"?e.data.r1:e.data.r2}),S.jsx(yn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?S.jsx(ece,{}):"Select this ranking"}),l&&r&&S.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),S.jsxs(Xf.Col,{span:2,children:[S.jsx(Tme,{rankings:a==="r1"?e.data.r2:e.data.r1}),S.jsx(yn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?S.jsx(ece,{}):"Select this ranking"}),l&&r&&S.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&S.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const EIt=Object.freeze(Object.defineProperty({__proto__:null,default:wIt},Symbol.toStringTag,{value:"Module"})),TIt=P.createContext(null);function rl(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,t||[])).next())})}let I3=class{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}};const y6={decode:function(e,t){return rl(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})},createBuffer:function(e,t){return typeof e[0]=="number"&&(e=[e]),function(n){const r=n[0];if(r.some(i=>i>1||i<-1)){const i=r.length;let s=0;for(let o=0;o<i;o++){const a=Math.abs(r[o]);a>s&&(s=a)}for(const o of n)for(let a=0;a<i;a++)o[a]/=s}}(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function GNe(e,t){const n=t.xmlns?document.createElementNS(t.xmlns,e):document.createElement(e);for(const[r,i]of Object.entries(t))if(r==="children")for(const[s,o]of Object.entries(t))typeof o=="string"?n.appendChild(document.createTextNode(o)):n.appendChild(GNe(s,o));else r==="style"?Object.assign(n.style,i):r==="textContent"?n.textContent=i:n.setAttribute(r,i.toString());return n}function Sme(e,t,n){const r=GNe(e,t||{});return n==null||n.appendChild(r),r}var SIt=Object.freeze({__proto__:null,createElement:Sme,default:Sme});const CIt={fetchBlob:function(e,t,n){return rl(this,void 0,void 0,function*(){const r=yield fetch(e,n);if(r.status>=400)throw new Error(`Failed to fetch ${e}: ${r.status} (${r.statusText})`);return function(i,s){rl(this,void 0,void 0,function*(){if(!i.body||!i.headers)return;const o=i.body.getReader(),a=Number(i.headers.get("Content-Length"))||0;let u=0;const l=f=>rl(this,void 0,void 0,function*(){u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);s(d)}),c=()=>rl(this,void 0,void 0,function*(){let f;try{f=yield o.read()}catch{return}f.done||(l(f.value),yield c())});c()})}(r.clone(),t),r.blob()})}};class AIt extends I3{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)},{once:!0})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}canPlayType(t){return this.media.canPlayType(t)!==""}setSrc(t,n){const r=this.getSrc();if(t&&r===t)return;this.revokeSrc();const i=n instanceof Blob&&(this.canPlayType(n.type)||!t)?URL.createObjectURL(n):t;try{this.media.src=i}catch{this.media.src=t}}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return rl(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}let EY=class TY extends I3{constructor(t,n){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=n=>{const r=this.wrapper.getBoundingClientRect(),i=n.clientX-r.left,s=n.clientY-r.top;return[i/r.width,s/r.height]};if(this.wrapper.addEventListener("click",n=>{const[r,i]=t(n);this.emit("click",r,i)}),this.wrapper.addEventListener("dblclick",n=>{const[r,i]=t(n);this.emit("dblclick",r,i)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:n,scrollWidth:r,clientWidth:i}=this.scrollContainer,s=n/r,o=(n+i)/r;this.emit("scroll",s,o,n,n+i)}),typeof ResizeObserver=="function"){const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const t=this.parent.clientWidth;t===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=t,this.reRender())}initDrag(){this.subscriptions.push(function(t,n,r,i,s=3,o=0,a=100){if(!t)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let l=()=>{};const c=f=>{if(f.button!==o)return;f.preventDefault(),f.stopPropagation();let d=f.clientX,h=f.clientY,p=!1;const m=Date.now(),g=T=>{if(T.preventDefault(),T.stopPropagation(),u&&Date.now()-m<a)return;const C=T.clientX,I=T.clientY,R=C-d,N=I-h;if(p||Math.abs(R)>s||Math.abs(N)>s){const O=t.getBoundingClientRect(),{left:L,top:B}=O;p||(r==null||r(d-L,h-B),p=!0),n(R,N,C-L,I-B),d=C,h=I}},v=T=>{if(p){const C=T.clientX,I=T.clientY,R=t.getBoundingClientRect(),{left:N,top:O}=R;i==null||i(C-N,I-O)}l()},b=T=>{T.relatedTarget&&T.relatedTarget!==document.documentElement||v(T)},w=T=>{p&&(T.stopPropagation(),T.preventDefault())},E=T=>{p&&T.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",v),document.addEventListener("pointerout",b),document.addEventListener("pointercancel",b),document.addEventListener("touchmove",E,{passive:!1}),document.addEventListener("click",w,{capture:!0}),l=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",v),document.removeEventListener("pointerout",b),document.removeEventListener("pointercancel",b),document.removeEventListener("touchmove",E),setTimeout(()=>{document.removeEventListener("click",w,{capture:!0})},10)}};return t.addEventListener("pointerdown",c),()=>{l(),t.removeEventListener("pointerdown",c)}}(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))},t=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,t/this.wrapper.getBoundingClientRect().width)))}))}getHeight(t,n){var r;const i=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(t==null)return 128;if(!isNaN(Number(t)))return Number(t);if(t==="auto"){const s=this.parent.clientHeight||128;return n!=null&&n.every(o=>!o.overlay)?s/i:s}return 128}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return n.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(t){this.scrollContainer.scrollLeft=t}setScrollPercentage(t){const{scrollWidth:n}=this.scrollContainer,r=n*t;this.setScroll(r)}destroy(){var t,n;this.subscriptions.forEach(r=>r()),this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect(),(n=this.unsubscribeOnScroll)===null||n===void 0||n.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(t=10){let n,r;const i=()=>{n&&clearTimeout(n),r&&r()};return this.timeouts.push(i),()=>new Promise((s,o)=>{i(),r=o,n=setTimeout(()=>{n=void 0,r=void 0,s()},t)})}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),r=n.getContext("2d"),i=n.height*(window.devicePixelRatio||1),s=r.createLinearGradient(0,0,0,i),o=1/(t.length-1);return t.forEach((a,u)=>{const l=u*o;s.addColorStop(l,a)}),s}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=this.getPixelRatio(),d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let v=0,b=0,w=0;for(let E=0;E<=a;E++){const T=Math.round(E*m);if(T>v){const R=Math.round(b*c*i),N=R+Math.round(w*c*i)||1;let O=c-R;n.barAlign==="top"?O=0:n.barAlign==="bottom"&&(O=l-N),r[g](v*(d+h),O,d,N,p),v=T,b=0,w=0}const C=Math.abs(s[E]||0),I=Math.abs(o[E]||0);C>b&&(b=C),I>w&&(w=I)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const v=c+(Math.round(h*c*i)||1)*(o===0?-1:1);r.lineTo(d,v),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction)return void n.renderFunction(t,r);let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}n.barWidth||n.barGap||n.barAlign?this.renderBarWaveform(t,n,r,i):this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a){const u=this.getPixelRatio(),l=document.createElement("canvas");l.width=Math.round(r*u),l.height=Math.round(i*u),l.style.width=`${r}px`,l.style.height=`${i}px`,l.style.left=`${Math.round(s)}px`,o.appendChild(l);const c=l.getContext("2d");if(this.renderWaveform(t,n,c),l.width>0&&l.height>0){const f=l.cloneNode(),d=f.getContext("2d");d.drawImage(l,0,0),d.globalCompositeOperation="source-in",d.fillStyle=this.convertColorValues(n.progressColor),d.fillRect(0,0,l.width,l.height),a.appendChild(f)}}renderMultiCanvas(t,n,r,i,s,o){const a=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,l=r/a;let c=Math.min(TY.MAX_CANVAS_WIDTH,u,l),f={};if(c===0)return;if(n.barWidth||n.barGap){const g=n.barWidth||.5,v=g+(n.barGap||g/2);c%v!=0&&(c=Math.floor(c/v)*v)}const d=g=>{if(g<0||g>=h||f[g])return;f[g]=!0;const v=g*c,b=Math.min(l-v,c);if(b<=0)return;const w=t.map(E=>{const T=Math.floor(v/l*E.length),C=Math.floor((v+b)/l*E.length);return E.slice(T,C)});this.renderSingleCanvas(w,n,b,i,v,s,o)},h=Math.ceil(l/c);if(!this.isScrollable){for(let g=0;g<h;g++)d(g);return}const p=this.scrollContainer.scrollLeft/l,m=Math.floor(p*h);if(d(m-1),d(m),d(m+1),h>1){const g=this.on("scroll",()=>{const{scrollLeft:v}=this.scrollContainer,b=Math.floor(v/l*h);Object.keys(f).length>TY.MAX_NODES&&(s.innerHTML="",o.innerHTML="",f={}),d(b-1),d(b),d(b+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(t,n,r,i){var{overlay:s}=n,o=function(c,f){var d={};for(var h in c)Object.prototype.hasOwnProperty.call(c,h)&&f.indexOf(h)<0&&(d[h]=c[h]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(h=Object.getOwnPropertySymbols(c);p<h.length;p++)f.indexOf(h[p])<0&&Object.prototype.propertyIsEnumerable.call(c,h[p])&&(d[h[p]]=c[h[p]])}return d}(n,["overlay"]);const a=document.createElement("div"),u=this.getHeight(o.height,o.splitChannels);a.style.height=`${u}px`,s&&i>0&&(a.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(a);const l=a.cloneNode();this.progressWrapper.appendChild(l),this.renderMultiCanvas(t,o,r,u,a,l)}render(t){return rl(this,void 0,void 0,function*(){var n;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),i=this.scrollContainer.clientWidth,s=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrollable=s>i;const o=this.options.fillParent&&!this.isScrollable,a=(o?i:s)*r;if(this.wrapper.style.width=o?"100%":`${s}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=t,this.emit("render"),this.options.splitChannels)for(let u=0;u<t.numberOfChannels;u++){const l=Object.assign(Object.assign({},this.options),(n=this.options.splitChannels)===null||n===void 0?void 0:n[u]);this.renderChannel([t.getChannelData(u)],l,a,u)}else{const u=[t.getChannelData(0)];t.numberOfChannels>1&&u.push(t.getChannelData(1)),this.renderChannel(u,this.options,a,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:t}=this.scrollContainer,{right:n}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&t!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let i=r-n;i*=2,i=i<0?Math.floor(i):Math.ceil(i),i/=2,this.scrollContainer.scrollLeft+=i}}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=t*i,a=r,u=r+s,l=s/2;if(this.isDragging)o+30>u?this.scrollContainer.scrollLeft+=30:o-30<a&&(this.scrollContainer.scrollLeft-=30);else{(o<a||o>u)&&(this.scrollContainer.scrollLeft=o-(this.options.autoCenter?l:0));const c=o-r-l;n&&this.options.autoCenter&&c>0&&(this.scrollContainer.scrollLeft+=Math.min(c,10))}{const c=this.scrollContainer.scrollLeft,f=c/i,d=(c+s)/i;this.emit("scroll",f,d,c,c+s)}}renderProgress(t,n){if(isNaN(t))return;const r=100*t;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(t,n)}exportImage(t,n,r){return rl(this,void 0,void 0,function*(){const i=this.canvasWrapper.querySelectorAll("canvas");if(!i.length)throw new Error("No waveform data");if(r==="dataURL"){const s=Array.from(i).map(o=>o.toDataURL(t,n));return Promise.resolve(s)}return Promise.all(Array.from(i).map(s=>new Promise((o,a)=>{s.toBlob(u=>{u?o(u):a(new Error("Could not export image"))},t,n)})))})}};EY.MAX_CANVAS_WIDTH=8e3,EY.MAX_NODES=10;class IIt extends I3{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Cme extends I3{constructor(t=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return rl(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){if(this.currentSrc=t,this._duration=void 0,!t)return this.buffer=null,void this.emit("emptied");fetch(t).then(n=>{if(n.status>=400)throw new Error(`Failed to fetch ${t}: ${n.status} (${n.statusText})`);return n.arrayBuffer()}).then(n=>this.currentSrc!==t?null:this.audioContext.decodeAudioData(n)).then(n=>{this.currentSrc===t&&(this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var t;if(!this.paused)return;this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let n=this.playedDuration*this._playbackRate;n>=this.duration&&(n=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,n),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var t;this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return rl(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(t){var n,r;const i=t-this.currentTime;(n=this.bufferNode)===null||n===void 0||n.stop(this.audioContext.currentTime+i),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(t){return rl(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(t){const n=!this.paused;n&&this._pause(),this.playedDuration=t/this._playbackRate,n&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var t,n;return(t=this._duration)!==null&&t!==void 0?t:((n=this.buffer)===null||n===void 0?void 0:n.duration)||0}set duration(t){this._duration=t}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(t){return/^(audio|video)\//.test(t)}getGainNode(){return this.gainNode}getChannelData(){const t=[];if(!this.buffer)return t;const n=this.buffer.numberOfChannels;for(let r=0;r<n;r++)t.push(this.buffer.getChannelData(r));return t}}const kIt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class eP extends AIt{static create(t){return new eP(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Cme:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},kIt,t),this.timer=new IIt;const r=n?void 0:this.getMediaElement();this.renderer=new EY(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:s,duration:o}=this.options;(i||s&&o)&&this.load(i,s,o).catch(()=>null)})}updateProgress(t=this.getCurrentTime()){return this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),t}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const t=this.updateProgress();this.emit("timeupdate",t),this.emit("audioprocess",t)}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.updateProgress();this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",t=>{var n;this.emit("error",(n=this.getMediaElement().error)!==null&&n!==void 0?n:new Error("Media error"))}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n,r,i)=>{const s=this.getDuration();this.emit("scroll",t*s,n*s,r,i)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",t=>{this.emit("dragstart",t)}),this.renderer.on("dragend",t=>{this.emit("dragend",t)}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(n),clearTimeout(t),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),t=setTimeout(()=>{this.seekTo(n)},r),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),t.duration&&!t.peaks&&(this.decodedData=y6.createBuffer(this.exportPeaks(),t.duration)),t.peaks&&t.duration&&(this.decodedData=y6.createBuffer(t.peaks,t.duration)),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t._init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(t){return this.renderer.setScroll(t)}setScrollTime(t){const n=t/this.getDuration();this.renderer.setScrollPercentage(n)}getActivePlugins(){return this.plugins}loadAudio(t,n,r,i){return rl(this,void 0,void 0,function*(){var s;if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=(s=this.abortController)===null||s===void 0?void 0:s.signal);const u=c=>this.emit("loading",c);n=yield CIt.fetchBlob(t,u,a);const l=this.options.blobMimeType;l&&(n=new Blob([n],{type:l}))}this.setSrc(t,n);const o=yield new Promise(a=>{const u=i||this.getDuration();u?a(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!t&&!n){const a=this.getMediaElement();a instanceof Cme&&(a.duration=o)}if(r)this.decodedData=y6.createBuffer(r,o||0);else if(n){const a=yield n.arrayBuffer();this.decodedData=yield y6.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(t,n,r){return rl(this,void 0,void 0,function*(){try{return yield this.loadAudio(t,void 0,n,r)}catch(i){throw this.emit("error",i),i}})}loadBlob(t,n,r){return rl(this,void 0,void 0,function*(){try{return yield this.loadAudio("",t,n,r)}catch(i){throw this.emit("error",i),i}})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=a.length/n;for(let c=0;c<n;c++){const f=a.slice(Math.floor(c*l),Math.ceil((c+1)*l));let d=0;for(let h=0;h<f.length;h++){const p=f[h];Math.abs(p)>Math.abs(d)&&(d=p)}u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return t!==0&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}setTime(t){super.setTime(t),this.updateProgress(t),this.emit("timeupdate",t)}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return rl(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}exportImage(){return rl(this,arguments,void 0,function*(t="image/png",n=1,r="dataURL"){return this.renderer.exportImage(t,n,r)})}destroy(){var t;this.emit("destroy"),(t=this.abortController)===null||t===void 0||t.abort(),this.plugins.forEach(n=>n.destroy()),this.subscriptions.forEach(n=>n()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}eP.BasePlugin=class extends I3{constructor(e){super(),this.subscriptions=[],this.options=e}onInit(){}_init(e){this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e())}},eP.dom=SIt;function RIt(e){return eP.create(e)}function DIt(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const Ame=e=>e.reduce((t,n)=>(t[n[0]]=n[1],t),{}),NIt=(e,t)=>{const n=Object.entries(e),r=Object.entries(t),i=n.filter(([o])=>r.findIndex(([a])=>a===o)===-1),s=r.filter(([o])=>n.findIndex(([a])=>a===o)===-1);return{disabled:Ame(i),enabled:Ame(s)}};function Ime(e,t){const n={},r=[...t];for(;r.length>=1;){const i=r.shift();!!e[i.key]?n[i.key]=e[i.key]:n[i.key]=DIt(i)}return n}function PIt({container:e,plugins:t=[],onMount:n,...r}){const i=P.useRef(!1),[s,o]=P.useState({}),a=P.useRef([]),[u,l]=P.useState(null);return P.useEffect(()=>{if(!e)return;const c=e;if(i.current)return;i.current=!0;const f=Ime(s,t);a.current=Object.keys(f);const d=RIt({container:e,...r,plugins:Object.values(f)});return n==null||n(d),o(f),l(d),()=>{c!==e&&d.destroy()}},[e]),P.useEffect(()=>{if(u){const c=Ime(s,t),{disabled:f,enabled:d}=NIt(s,c);Object.keys(f).forEach(h=>{f[h].destroy()}),Object.keys(d).forEach(h=>{a.current.includes(h)||(console.log("register plugin",h,d[h]),u==null||u.registerPlugin(d[h]))}),a.current=Object.keys(d),o(c)}},[t]),[u,s,Object.values(s)]}function YNe({children:e,plugins:t=[],onMount:n,...r}){const i=PIt({plugins:t,onMount:n,...r});return ci.createElement(TIt.Provider,{value:i},e)}const KNe=({id:e="waveform",children:t})=>ci.createElement("div",{id:e},t);function JV(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}class XNe{constructor(){this.listeners={}}on(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.un(t,i),this.un(t,n)};return this.on(t,i),i}return()=>this.un(t,n)}un(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}let OIt=class extends XNe{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}_init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};class MIt extends XNe{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}const LIt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];class ene extends OIt{constructor(t){var n,r,i,s,o,a;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3,scrollingWaveform:(r=t.scrollingWaveform)!==null&&r!==void 0&&r,scrollingWaveformWindow:(i=t.scrollingWaveformWindow)!==null&&i!==void 0?i:5,continuousWaveform:(s=t.continuousWaveform)!==null&&s!==void 0&&s,renderRecordedAudio:(o=t.renderRecordedAudio)===null||o===void 0||o,mediaRecorderTimeslice:(a=t.mediaRecorderTimeslice)!==null&&a!==void 0?a:void 0})),this.stream=null,this.mediaRecorder=null,this.dataWindow=null,this.isWaveformPaused=!1,this.lastStartTime=0,this.lastDuration=0,this.duration=0,this.timer=new MIt,this.subscriptions.push(this.timer.on("tick",()=>{const u=performance.now()-this.lastStartTime;this.duration=this.isPaused()?this.duration:this.lastDuration+u,this.emit("record-progress",this.duration)}))}static create(t){return new ene(t||{})}renderMicStream(t){var n;const r=new AudioContext,i=r.createMediaStreamSource(t),s=r.createAnalyser();i.connect(s),this.options.continuousWaveform&&(s.fftSize=32);const o=s.frequencyBinCount,a=new Float32Array(o);let u=0;this.wavesurfer&&((n=this.originalOptions)!==null&&n!==void 0||(this.originalOptions=Object.assign({},this.wavesurfer.options)),this.wavesurfer.options.interact=!1,this.options.scrollingWaveform&&(this.wavesurfer.options.cursorWidth=0));const l=setInterval(()=>{var c,f,d,h;if(!this.isWaveformPaused){if(s.getFloatTimeDomainData(a),this.options.scrollingWaveform){const p=Math.floor((this.options.scrollingWaveformWindow||0)*r.sampleRate),m=Math.min(p,this.dataWindow?this.dataWindow.length+o:o),g=new Float32Array(p);if(this.dataWindow){const v=Math.max(0,p-this.dataWindow.length);g.set(this.dataWindow.slice(-m+o),v)}g.set(a,p-o),this.dataWindow=g}else if(this.options.continuousWaveform){if(!this.dataWindow){const m=this.options.continuousWaveformDuration?Math.round(100*this.options.continuousWaveformDuration):((f=(c=this.wavesurfer)===null||c===void 0?void 0:c.getWidth())!==null&&f!==void 0?f:0)*window.devicePixelRatio;this.dataWindow=new Float32Array(m)}let p=0;for(let m=0;m<o;m++){const g=Math.abs(a[m]);g>p&&(p=g)}if(u+1>this.dataWindow.length){const m=new Float32Array(2*this.dataWindow.length);m.set(this.dataWindow,0),this.dataWindow=m}this.dataWindow[u]=p,u++}else this.dataWindow=a;if(this.wavesurfer){const p=((h=(d=this.dataWindow)===null||d===void 0?void 0:d.length)!==null&&h!==void 0?h:0)/100;this.wavesurfer.load("",[this.dataWindow],this.options.scrollingWaveform?this.options.scrollingWaveformWindow:p).then(()=>{this.wavesurfer&&this.options.continuousWaveform&&(this.wavesurfer.setTime(this.getDuration()/1e3),this.wavesurfer.options.minPxPerSec||this.wavesurfer.setOptions({minPxPerSec:this.wavesurfer.getWidth()/this.wavesurfer.getDuration()}))}).catch(m=>{console.error("Error rendering real-time recording data:",m)})}}},10);return{onDestroy:()=>{clearInterval(l),i==null||i.disconnect(),r==null||r.close()},onEnd:()=>{this.isWaveformPaused=!0,clearInterval(l),this.stopMic()}}}startMic(t){return JV(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(s){throw new Error("Error accessing the microphone: "+s.message)}const{onDestroy:r,onEnd:i}=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.subscriptions.push(this.once("record-end",i)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return JV(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t));this.dataWindow=null;const r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||LIt.find(o=>MediaRecorder.isTypeSupported(o)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=o=>{o.data.size>0&&i.push(o.data),this.emit("record-data-available",o.data)};const s=o=>{var a;const u=new Blob(i,{type:r.mimeType});this.emit(o,u),this.options.renderRecordedAudio&&(this.applyOriginalOptionsIfNeeded(),(a=this.wavesurfer)===null||a===void 0||a.load(URL.createObjectURL(u)))};r.onpause=()=>s("record-pause"),r.onstop=()=>s("record-end"),r.start(this.options.mediaRecorderTimeslice),this.lastStartTime=performance.now(),this.lastDuration=0,this.duration=0,this.isWaveformPaused=!1,this.timer.start(),this.emit("record-start")})}getDuration(){return this.duration}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}isActive(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)!=="inactive"}stopRecording(){var t;this.isActive()&&((t=this.mediaRecorder)===null||t===void 0||t.stop(),this.timer.stop())}pauseRecording(){var t,n;this.isRecording()&&(this.isWaveformPaused=!0,(t=this.mediaRecorder)===null||t===void 0||t.requestData(),(n=this.mediaRecorder)===null||n===void 0||n.pause(),this.timer.stop(),this.lastDuration=this.duration)}resumeRecording(){var t;this.isPaused()&&(this.isWaveformPaused=!1,(t=this.mediaRecorder)===null||t===void 0||t.resume(),this.timer.start(),this.lastStartTime=performance.now(),this.emit("record-resume"))}static getAvailableAudioDevices(){return JV(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){this.applyOriginalOptionsIfNeeded(),super.destroy(),this.stopRecording(),this.stopMic()}applyOriginalOptionsIfNeeded(){this.wavesurfer&&this.originalOptions&&(this.wavesurfer.setOptions(this.originalOptions),delete this.originalOptions)}}function QNe({width:e=70,height:t=36}){const n=P.useRef(null),r=P.useRef(null),[i,s]=P.useState(!1);P.useEffect(()=>{if(i&&n.current){const a=n.current.registerPlugin(ene.create({scrollingWaveform:!0,renderRecordedAudio:!1}));r.current=a,navigator.userAgent.includes("Firefox")||a.startRecording(),n.current.setOptions({height:t,waveColor:"#FA5252"})}return()=>{var a,u;i&&n.current&&((a=r.current)==null||a.stopRecording(),(u=r.current)==null||u.destroy(),n.current.destroy())}},[i]);const o=P.useCallback(a=>{n.current=a,s(!0)},[]);return S.jsx(je,{id:"waveformDiv",style:{width:`${e}px`,height:`${t}px`},children:S.jsx(YNe,{onMount:o,plugins:[],container:"#waveformDiv",height:t,children:S.jsx(KNe,{id:"waveform",height:t})})})}function kme({setAnswer:e}){return P.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{new MediaRecorder(n).start();const i=new AudioContext,s=i.createMediaStreamSource(n),o=i.createAnalyser();o.minDecibels=-45,s.connect(o);const a=o.frequencyBinCount,u=new Uint8Array(a);let l=!1;const c=()=>{if(!l){o.getByteFrequencyData(u);for(let f=0;f<a;f+=1)u[f]>0&&(l=!0,e({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(c)}};window.requestAnimationFrame(c)})},[e]),S.jsx(ga,{style:{height:"70%",width:"100%"},children:S.jsxs(uo,{children:[S.jsx(lt,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),S.jsx(lt,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),S.jsx(lt,{ta:"center",style:{fontWeight:700},children:"If you are not comfortable or able to speak English during this study, please return the study."}),S.jsx(ga,{children:S.jsx(QNe,{height:200,width:400})})]})})}const $It=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:kme,default:kme},Symbol.toStringTag,{value:"Module"}));function FIt(){return S.jsx("div",{children:"test react file"})}const BIt=Object.freeze(Object.defineProperty({__proto__:null,default:FIt},Symbol.toStringTag,{value:"Module"}));function jIt({parameters:e,setAnswer:t}){const{taskid:n,cx:r,cy:i}=e,s=P.useRef(null),o=10,a=P.useCallback(u=>{const l=hi("#Circle"),c=hi("#click_svg"),f=uF(u,c.node()),d=[+l.attr("cx"),+l.attr("cy")],h=`${Math.round(Math.sqrt((f[0]-d[0])**2+(f[1]-d[1])**2))}px`;t({status:!0,answers:{[n]:h}})},[t,n]);return S.jsx("div",{className:"Chart__wrapper",ref:s,onClick:a,style:{height:"650px"},children:S.jsx("svg",{id:"click_svg",width:400,height:400,children:S.jsx("circle",{id:"Circle",cx:r,cy:i,r:o,stroke:"black",strokeWidth:"2",fill:"white"})})})}const UIt=Object.freeze(Object.defineProperty({__proto__:null,default:jIt},Symbol.toStringTag,{value:"Module"}));function tne({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=P.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=P.useCallback(c=>(s?d3("%B"):_x(".2s"))(c),[s]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:S.jsx(ga,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?S.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>S.jsxs("g",{transform:`translate(${f}, ${n})`,children:[S.jsx("line",{y2:"6",stroke:"currentColor"}),o?S.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,S.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:S.jsx(ga,{children:S.jsx(ss,{withinPortal:!0,label:c,children:S.jsx(lt,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const zIt=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:tne},Symbol.toStringTag,{value:"Module"}));function JNe({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=P.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:S.jsx(ga,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?S.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>S.jsxs("g",{transform:`translate(${n}, ${l})`,children:[S.jsx("line",{x2:"-6",stroke:"currentColor"}),s?S.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,S.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:S.jsx("foreignObject",{width:a,height:20,children:S.jsx(Yr,{style:{width:"100%",height:"100%"},justify:"right",children:S.jsx(lt,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const VIt=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:JNe},Symbol.toStringTag,{value:"Module"})),Hd={top:15,left:100,right:50,bottom:50};function SY({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=td(),o=P.useMemo(()=>s-Hd.left-Hd.right,[s]),a=P.useMemo(()=>i-Hd.top-Hd.bottom,[i]),u=P.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return Ex(f9).domain(d)},[n,t.category]),l=P.useMemo(()=>e?ef([Hd.left,o+Hd.left]).domain([0,By(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=P.useMemo(()=>e?YA([Hd.top,a+Hd.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=P.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:S.jsxs("g",{children:[S.jsx("rect",{x:Hd.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-Hd.left},h),S.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?S.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[S.jsx(tne,{xScale:l,yRange:c.range(),vertPosition:a+Hd.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?S.jsx(JNe,{yScale:c,horizontalPosition:Hd.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):S.jsx(df,{})}const HIt=Object.freeze(Object.defineProperty({__proto__:null,Bar:SY,default:SY},Symbol.toStringTag,{value:"Module"}));function ZNe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=P.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=P.useMemo(()=>_x(".2s"),[]);return S.jsxs(S.Fragment,{children:[S.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:S.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:S.jsx(ga,{children:S.jsx(Yr,{gap:3,children:S.jsx(lt,{size:"14px",style:{color:"#878E95"},children:r})})})})}),S.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),S.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>S.jsxs("g",{transform:`translate(${n}, ${a})`,children:[S.jsx("line",{x2:"-6",stroke:"currentColor"}),S.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),S.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const qIt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:ZNe},Symbol.toStringTag,{value:"Module"})),ZV=15;function ePe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=P.useState([0,0]),[l,c]=P.useState(!1);return P.useEffect(()=>{const f=hi("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<ZV&&Math.abs(t(g[r.y])-p[1])<ZV);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(b=>{g.has(b[r.ids])&&g.delete(b[r.ids])});const v=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,v.length===0?"clear":"drag",v)}else{const g=Array.from(new Set([...s.ids,...m.map(v=>v[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),S.jsx("circle",{style:{cursor:l?"pointer":"default"},r:ZV,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const WIt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:ePe},Symbol.toStringTag,{value:"Module"})),ks={top:15,left:100,right:15,bottom:70};function CY({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=td(),[c]=td(),[f]=td(),[d,h]=P.useState(!0),p=P.useMemo(()=>l-ks.left-ks.right,[l]),m=P.useMemo(()=>u-ks.top-ks.bottom,[u]),g=P.useMemo(()=>{const O=Array.from(new Set(s.map(L=>L[i.category])));return Ex(f9).domain(O)},[s,i.category]),{xMin:v,yMin:b,xMax:w,yMax:E}=P.useMemo(()=>{const O=s.map(J=>+J[i.x]).filter(J=>J!==null),[L,B]=CN(O),F=s.map(J=>+J[i.y]).filter(J=>J!==null),[H,Q]=CN(F);return{xMin:L,xMax:B,yMin:H,yMax:Q}},[s,i.x,i.y]),T=P.useMemo(()=>{const O=w-v;return p<=0?null:i.dataType==="date"?nee([ks.left,p+ks.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):ef([ks.left,p+ks.left]).domain([v-O/10,w+O/10]).nice()},[i.dataType,p,w,v]),C=P.useMemo(()=>{const O=E-b;return m<=0?null:ef([m+ks.top,ks.top]).domain([b-O/10,E+O/10]).nice()},[m,E,b]),I=P.useMemo(()=>{if(!T||!C)return()=>null;if(r==="Axis Selection"){const O=xCe().extent([[ks.left,ks.top+m-5],[ks.left+p,ks.top+m+5]]).on("brush end",B=>{B.sourceEvent!==void 0&&n([[B.selection[0],null],[B.selection[1],null]],T,C,B.mode)}),L=_Ce().extent([[ks.left-5,ks.top],[ks.left+5,ks.top+m]]).on("brush end",B=>{B.sourceEvent!==void 0&&n([[null,B.selection[0]],[null,B.selection[1]]],T,C,B.mode)});return c.current&&f.current&&(hi(f.current).call(L),hi(c.current).call(O),t.hasBrush||(hi(f.current).call(L.move,[C(E),C(b)]),hi(c.current).call(O.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),C(E)],[T(new Date("2015-12-31")),C(b)]],T,C,"drag"))),()=>{hi(f.current).call(L.move,[C(E),C(b)]),hi(c.current).call(O.move,[T(new Date("2015-01-02")),T(new Date("2015-12-31"))]),n([[T(new Date("2015-01-02")),C(E)],[T(new Date("2015-12-31")),C(b)]],T,C,"clear")}}if(r==="Rectangular Selection"){const O=wCe().extent([[ks.left,ks.top],[ks.left+p,ks.top+m]]).on("brush",L=>{L.sourceEvent!==void 0&&n([[L.selection[0][0],L.selection[0][1]],[L.selection[1][0],L.selection[1][1]]],T,C,L.mode)}).on("end",L=>{L.selection===null&&L.sourceEvent!==void 0&&(hi(a.current).call(O.move,null),e(null))});return hi(a.current).call(O),()=>{hi(a.current).call(O.move,null),n([[null,null],[null,null]],T,C,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[T(v),C(E)],[T(w),C(b)]],T,C,null),()=>n([[T(v),C(E)],[T(w),C(b)]],T,C,"clear")):r==="Paintbrush Selection"?()=>n([[T(v),C(E)],[T(w),C(b)]],T,C,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,w,v,T,E,b,C]),R=P.useMemo(()=>o.length===0?null:new Set(o),[o]),N=P.useMemo(()=>!T||!C?null:s.map((O,L)=>{if(O[i.x]===null||O[i.y]===null)return null;const B=i.dataType==="date"?T(new Date(O[i.x])):T(O[i.x]);return S.jsx("circle",{opacity:R&&!R.has(O[i.ids])?.3:1,r:3,fill:R&&!R.has(O[i.ids])?"lightgray":g(O[i.category]),cx:B,cy:C(O[i.y])},L)}),[R,g,s,i.category,i.dataType,i.ids,i.x,i.y,T,C]);return P.useEffect(()=>{r==="Axis Selection"&&j2e(".handle").style("fill","darkgrey")},[t,r]),S.jsxs(uo,{children:[S.jsxs(Yr,{children:[S.jsx(yn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),I==null||I()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?S.jsx(EB,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:O=>h(O==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),S.jsxs(Yr,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[S.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[T&&C?S.jsxs("g",{children:[S.jsx(ZNe,{yScale:C,label:i.y,horizontalPosition:ks.left,xRange:T.range()}),S.jsx(tne,{xScale:T,yRange:C.range(),isDate:i.dataType==="date",vertPosition:m+ks.top,label:i.x,ticks:T.ticks(i.brushType==="Axis Selection"?12:5).map(O=>({value:O.toString(),offset:T(O)}))})]}):null,N,S.jsx("g",{id:"brushXRef",ref:c}),S.jsx("g",{id:"brushYRef",ref:f}),T&&C&&r==="Paintbrush Selection"?S.jsx(ePe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:T,yScale:C}):null]}),r==="Slider Selection"&&T&&C?S.jsxs(uo,{style:{flexGrow:1},gap:50,children:[S.jsxs(uo,{gap:0,children:[S.jsx(lt,{children:i.x}),S.jsx(mC,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],labelAlwaysOn:!1,onChange:O=>{n([[T(O[0]),t.y1],[T(O[1]),t.y2]],T,C,"drag")},style:{width:"300px"},marks:T.ticks(5).map(O=>({value:O,label:O})),value:[T.invert(t.x1),T.invert(t.x2)]})]}),S.jsxs(uo,{gap:0,children:[S.jsx(lt,{children:i.y}),S.jsx(mC,{minRange:1,label:null,min:C.domain()[0],max:C.domain()[1],onChange:O=>{n([[t.x1,C(O[1])],[t.x2,C(O[0])]],T,C,"drag")},style:{width:"300px"},marks:C.ticks(5).map(O=>({value:O,label:O})),value:[C.invert(t.y2),C.invert(t.y1)]})]})]}):null]})]})}const GIt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:CY,default:CY},Symbol.toStringTag,{value:"Module"}));function Rme({parameters:e,setAnswer:t}){const[n,r]=P.useState(null),[i,s]=P.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=P.useState(null);P.useEffect(()=>{CCe(`../tutorial/react-and-randomization/data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=P.useMemo(()=>o?$Ne(o):null,[o]),{actions:l,trrack:c}=P.useMemo(()=>{const g=qE.create(),v=g.register("brush",(C,I)=>(C.all={brush:I},C)),b=g.register("brushMove",(C,I)=>(C.all={brush:I},C)),w=g.register("brushResize",(C,I)=>(C.all={brush:I},C)),E=g.register("brushClear",(C,I)=>(C.all={brush:I},C)),T=g3({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:v,brushMove:b,brushResize:w,clearBrush:E},trrack:T}},[]),f=P.useCallback((g,v)=>{g==="drag"?c.apply("Move Brush",l.brushMove(v)):g==="handle"&&c.apply("Brush",l.brush(v))},[l,c]),d=P.useMemo(()=>up(f,100,{maxWait:100}),[f]),h=P.useCallback((g,v,b,w,E)=>{if(!v||!b)return;const T=v.invert(g[0][0]||i.x1),C=v.invert(g[1][0]||i.x2),I=b.invert(g[1][1]||i.y2),R=b.invert(g[0][1]||i.y1);let N=null;if(w==="clear")N=u;else if(E){const L=new Set(E);N=u.filter(K2(B=>L.has(B[e.ids])))}else e.brushType==="Axis Selection"?N=u.filter(K2(L=>new Date(L[e.x])>=new Date(T)&&new Date(L[e.x])<=new Date(C)&&L[e.y]>=I&&L[e.y]<=R)):N=u.filter(K2(L=>L[e.x]>=T&&L[e.x]<=C&&L[e.y]>=I&&L[e.y]<=R));const O={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:w!=="clear",ids:w!=="clear"?N==null?void 0:N.array("id"):[]};s(O),w==="drag"||w==="handle"?d(w,O):w==="clear"&&c.apply("Clear Brush",l.clearBrush(O)),r(N),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=P.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=P.useCallback(g=>{r(g)},[]);return o?S.jsxs(uo,{gap:"xs",children:[S.jsx(CY,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),S.jsx(SY,{data:o,parameters:e,barsTable:p})]}):S.jsx(df,{})}const YIt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:Rme,default:Rme},Symbol.toStringTag,{value:"Module"})),KIt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),XIt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class QIt extends ci.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}render(){return this.state.hasError?S.jsx(lt,{children:this.state.error.toString()}):this.props.children}}const Dme=Object.assign({"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":Bxt,"../public/example-brush-interactions/assets/Bar.tsx":zxt,"../public/example-brush-interactions/assets/BrushPlot.tsx":XAt,"../public/example-brush-interactions/assets/Paintbrush.tsx":YAt,"../public/example-brush-interactions/assets/Scatter.tsx":KAt,"../public/example-brush-interactions/assets/XAxisBar.tsx":jxt,"../public/example-brush-interactions/assets/YAxis.tsx":GAt,"../public/example-brush-interactions/assets/YAxisBar.tsx":Uxt,"../public/example-brush-interactions/assets/types.ts":QAt,"../public/example-cleveland/assets/BarChart.tsx":rIt,"../public/example-cleveland/assets/BubbleChart.tsx":cIt,"../public/example-cleveland/assets/PieChart.tsx":gIt,"../public/example-cleveland/assets/StackedBarChart.tsx":_It,"../public/example-cleveland/assets/chartcomponents/Bars.tsx":JAt,"../public/example-cleveland/assets/chartcomponents/Bubbles.tsx":iIt,"../public/example-cleveland/assets/chartcomponents/DotMarks.tsx":sIt,"../public/example-cleveland/assets/chartcomponents/NumericAxisH.tsx":yIt,"../public/example-cleveland/assets/chartcomponents/NumericAxisV.tsx":ZAt,"../public/example-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":eIt,"../public/example-cleveland/assets/chartcomponents/Slices.tsx":fIt,"../public/example-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":dIt,"../public/example-cleveland/assets/chartcomponents/StackedBars.tsx":vIt,"../public/example-cleveland/assets/hooks/useChartDimensions.tsx":Lxt,"../public/example-fairness-jnd/assets/FairnessJND.tsx":EIt,"../public/libraries/mic-check/assets/AudioTest.tsx":$It,"../public/libraries/test/assets/test.tsx":BIt,"../public/tutorial/advanced-react-component/assets/ClickCircle.tsx":UIt,"../public/tutorial/react-and-randomization/assets/Bar.tsx":HIt,"../public/tutorial/react-and-randomization/assets/BrushPlot.tsx":YIt,"../public/tutorial/react-and-randomization/assets/Paintbrush.tsx":WIt,"../public/tutorial/react-and-randomization/assets/Scatter.tsx":GIt,"../public/tutorial/react-and-randomization/assets/XAxisBar.tsx":zIt,"../public/tutorial/react-and-randomization/assets/YAxis.tsx":qIt,"../public/tutorial/react-and-randomization/assets/YAxisBar.tsx":VIt,"../public/tutorial/react-and-randomization/assets/some.tsx":KIt,"../public/tutorial/react-and-randomization/assets/types.ts":XIt});function JIt({currentConfig:e,provState:t}){const n=Sh(),r=Ch(),i=`../public/${e.path}`,s=i in Dme?Dme[i].default:null,o=xl(),{updateResponseBlockValidation:a,setreactiveAnswers:u}=Su(),l=P.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[r,n,u,o,a]);return S.jsx(P.Suspense,{fallback:S.jsx("div",{children:"Loading..."}),children:s?S.jsx(QIt,{children:S.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t})}):S.jsx(Sb,{path:e.path})})}function ZIt({currentConfig:e}){const[t,n]=P.useState(""),[r,i]=P.useState(!0);return P.useEffect(()=>{async function s(){const o=await wZ(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?S.jsx(dl,{text:t}):S.jsx(Sb,{path:e.path})}function cI(e){return e.baseComponent!==void 0}function tPe(){const e=Sh(),{setAlertModal:t}=Su(),n=xl();P.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Nme=Object.prototype.hasOwnProperty;function Pme(e,t,n){for(n of e.keys())if(XD(n,t))return n}function XD(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&XD(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Pme(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Pme(t,i),!i)||!XD(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Nme.call(e,n)&&++r&&!Nme.call(t,n)||!(n in t)||!XD(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function ekt(e){var t=P.useRef(e),n=P.useRef(0);return XD(e,t.current)||(t.current=e,n.current+=1),P.useMemo(function(){return t.current},[n.current])}function tkt(e,t){return P.useEffect(e,ekt(t))}const D5=(e,t=null)=>{const[n,r]=P.useState("idle"),[i,s]=P.useState(null),[o,a]=P.useState(null),u=P.useRef(null),l=P.useRef(!1);P.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=P.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return tkt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}};function nPe(e){const t=e.endTime===-1?void 0:e.endTime-e.startTime,n=(e.windowEvents||[]).filter(o=>o!==void 0).filter(([o,a,u])=>a==="visibility");let r=0,i=0;for(;i<n.length-1;){if(n[i][2]==="hidden"){for(let o=i+1;o<n.length;o+=1)if(n[o][2]==="visible"){r+=n[o][0]-n[i][0],i=o;break}}i+=1}return t?t-r:void 0}const nkt="_root_1spq0_1",rkt="_description_1spq0_9",ikt="_title_1spq0_10",skt="_closeButton_1spq0_14",okt={root:nkt,description:rkt,title:ikt,closeButton:skt},tP=e=>{const{title:t,message:n,color:r}=e;ME.show({title:t,message:n,position:"top-center",classNames:okt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})},Ome=["status","rejectReason","rejectTime","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","cleanedDuration","meta","configHash"],rPe=["participantId","trialId","trialOrder","responseId"];function nne(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function akt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==-1).length/(jp(e.sequence).length-1)*100).toFixed(2);return[{participantId:e.participantId,trialId:"participantTags",trialOrder:null,responseId:"participantTags",answer:JSON.stringify(e.participantTags)},...Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=cI(u)&&u.baseComponent&&n.baseComponents?bZ({},n.baseComponents[u.baseComponent],u):u,c=s.endTime===-1?void 0:s.endTime-s.startTime,f=nPe(s);return Object.entries(s.answer).map(([h,p])=>{var v,b;const m={participantId:e.participantId,trialId:o,trialOrder:a,responseId:h},g=l.response.find(w=>w.id===h);if(t.includes("status")&&(m.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("rejectReason")&&(m.rejectReason=e.rejected?e.rejected.reason:void 0),t.includes("rejectTime")&&(m.rejectTime=e.rejected?new Date(e.rejected.timestamp).toISOString():void 0),t.includes("configHash")&&(m.configHash=e.participantConfigHash),t.includes("percentComplete")&&(m.percentComplete=r),t.includes("description")&&(m.description=l.description),t.includes("instruction")&&(m.instruction=l.instruction),t.includes("responsePrompt")&&(m.responsePrompt=g==null?void 0:g.prompt),t.includes("answer")&&(m.answer=p),t.includes("correctAnswer")){const w=(b=(v=l.correctAnswer)==null?void 0:v.find(E=>E.id===h))==null?void 0:b.answer;m.correctAnswer=typeof w=="object"?JSON.stringify(w):w}return t.includes("responseMin")&&(m.responseMin=(g==null?void 0:g.type)==="numerical"?g.min:void 0),t.includes("responseMax")&&(m.responseMax=(g==null?void 0:g.type)==="numerical"?g.max:void 0),t.includes("startTime")&&(m.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(m.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(m.duration=c),t.includes("cleanedDuration")&&(m.cleanedDuration=f),t.includes("meta")&&(m.meta=JSON.stringify(l.meta,null,2)),m}).flat()}).flat()]}async function ukt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...rPe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await akt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function lkt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=P.useState([...Ome].filter(p=>p!=="meta")),a=Oo(),{value:u,status:l,error:c}=D5(ukt,[s,r,a.storageEngine,i]),f=P.useCallback(()=>{if(!u)return;const p=[u.header.join(","),...u.rows.map(m=>u.header.map(g=>`"${`${m[g]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);nne(p,n)},[n,u]),d=P.useCallback(()=>{u&&(window.parent.postMessage({type:"revisitWidget/PYTHON_EXPORT_TIDY",payload:u},"*"),tP({title:"Success",message:"Data sent to python notebook",color:"green"}))},[u]),h=P.useMemo(()=>{if(!u)return"";const p=u.rows.length>5?5:u.rows.length,m=p===1?"":"s";return`This is a preview of the first ${m?p:""} row${m} of the CSV. The full CSV contains ${u.rows.length} row${m}.`},[u]);return S.jsxs(Vs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[S.jsx(cJ,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Ome],value:s,onChange:p=>o(p),label:"Included optional columns:",leftSection:S.jsx(WZe,{}),variant:"filled"}),S.jsx(rd,{h:"md"}),S.jsxs(je,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?S.jsxs(En,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[S.jsx(En.Thead,{children:S.jsx(En.Tr,{children:u.header.map(p=>S.jsx(En.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(p)?200:void 0},children:S.jsxs(an,{direction:"row",justify:"space-between",align:"center",children:[p,!rPe.includes(p)&&S.jsx(dx,{onClick:()=>o(s.filter(m=>m!==p)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:S.jsx(QP,{size:16})})]})},p))})}),S.jsx(En.Tbody,{children:u.rows.slice(0,5).map((p,m)=>S.jsx(En.Tr,{children:u.header.map(g=>S.jsx(En.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(g)?"normal":"nowrap"},children:p[g]},`${m}-${g}`))},m))})]}):l==="error"&&c?S.jsx(Oy,{variant:"light",children:c.message}):null,S.jsx(ld,{visible:l==="pending"||l==="idle"})]}),S.jsx(rd,{h:"sm"}),S.jsx(an,{justify:"center",fz:"sm",c:"dimmed",children:S.jsx(lt,{children:h})}),S.jsx(rd,{h:"md"}),S.jsxs(Yr,{justify:"right",children:[S.jsx(yn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),S.jsx(yn,{leftSection:S.jsx(pTe,{}),onClick:f,"data-autofocus":!0,children:"Download"}),i==="__revisit-widget"&&S.jsx(yn,{onClick:d,children:S.jsx(LZe,{})})]})]})}function ckt(){const e=Zy(),{storageEngine:t}=Oo(),n=yi(w=>w.answers),r=HA(),[i,s]=P.useState(!1);P.useEffect(()=>{if(r){s(!0);return}const w=setInterval(async()=>{await t.verifyCompletion(n)&&(s(!0),clearInterval(w))},1e3)},[]),tPe();const[o,a]=P.useState(),[u,l]=P.useState(""),c=e.studyMetadata.title.replace(" ","_");P.useEffect(()=>{async function w(){if(t){const E=await t.getCurrentParticipantId(),T=await t.getParticipantData();l(E),a(T)}}w()},[t]);const f=P.useCallback(async()=>{nne(JSON.stringify(o,null,2),`${c}_${u}.json`)},[c,o,u]),d=e.uiConfig.autoDownloadStudy||!1,h=d&&e.uiConfig.autoDownloadTime||-1,[p,m]=P.useState(Math.floor(h/1e3));P.useEffect(()=>{if(i){const w=setInterval(()=>{m(E=>E-1)},1e3);return p<=0?(d&&f(),clearInterval(w),()=>clearInterval(w)):()=>clearInterval(w)}return()=>{}},[d,i,p,f]);const g=jE(),[v,b]=P.useState(!1);return P.useEffect(()=>{(async()=>{if(t){const E=await t.getModes(g);b(E.dataCollectionEnabled)}})()},[t,g]),S.jsx(ga,{style:{height:"100%"},children:S.jsx(an,{direction:"column",children:i||!v?e.uiConfig.studyEndMsg?S.jsx(dl,{text:e.uiConfig.studyEndMsg}):S.jsx(lt,{size:"xl",display:"block",children:"Thank you for completing the study. You may close this window now."}):S.jsxs(S.Fragment,{children:[S.jsx(lt,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),S.jsx(rd,{h:"lg"}),S.jsx(ga,{children:S.jsx(df,{color:"blue"})})]})})})}function fkt(){return S.jsx(lt,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function dkt(){return S.jsx(lt,{children:"Thank you for participating. Unfortunately, you have not answered the questions within the given time limit. Because of this, you are no longer eligible to participate in the study. You may close this window now."})}const Mme={};function AY(e,t){e===void 0&&(e=Mme),t===void 0&&(t=Mme);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var hkt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pkt=Object.prototype.hasOwnProperty;function IY(e,t){return pkt.call(e,t)}function kY(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)IY(e,i)&&r.push(i);return r}function Jf(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function RY(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function nw(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function iPe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function DY(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(DY(e[t]))return!0}else if(typeof e=="object"){for(var r=kY(e),i=r.length,s=0;s<i;s++)if(DY(e[r[s]]))return!0}}return!1}function Lme(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var sPe=function(e){hkt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Lme(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Lme(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),no=sPe,mkt=Jf,S2={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=N5(n,this.path);r&&(r=Jf(r));var i=Fw(n,{op:"remove",path:this.from}).removed;return Fw(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=N5(n,this.from);return Fw(n,{op:"add",path:this.path,value:Jf(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:nP(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},gkt={add:function(e,t,n){return RY(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:S2.move,copy:S2.copy,test:S2.test,_get:S2._get};function N5(e,t){if(t=="")return e;var n={op:"_get",path:t};return Fw(e,n),n.value}function Fw(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):P5(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=N5(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=nP(e,t.value),o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new no("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Jf(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=P5;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=iPe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!RY(h))throw new no("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);RY(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new no("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=gkt[t.op].call(t,l,h,e);if(o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=S2[t.op].call(t,l,h,e);if(o.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new no("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function U9(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new no("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Jf(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=Fw(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function ykt(e,t,n){var r=Fw(e,t);if(r.test===!1)throw new no("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function P5(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new no("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(S2[e.op]){if(typeof e.path!="string")throw new no("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new no('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new no("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new no("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&DY(e.value))throw new no("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new no("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new no("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=oPe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new no("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new no("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function oPe(e,t,n){try{if(!Array.isArray(e))throw new no("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)U9(Jf(t),Jf(e),n||!0);else{n=n||P5;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof no)return i;throw i}}function nP(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!nP(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!nP(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const vkt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:no,_areEquals:nP,applyOperation:Fw,applyPatch:U9,applyReducer:ykt,deepClone:mkt,getValueByPointer:N5,validate:oPe,validator:P5},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var rne=new WeakMap,bkt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),xkt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function _kt(e){return rne.get(e)}function wkt(e,t){return e.observers.get(t)}function Ekt(e,t){e.observers.delete(t.callback)}function Tkt(e,t){t.unobserve()}function Skt(e,t){var n=[],r,i=_kt(e);if(!i)i=new bkt(e),rne.set(e,i);else{var s=wkt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Jf(e),t){r.callback=t,r.next=null;var o=function(){NY(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){NY(r),clearTimeout(r.next),Ekt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new xkt(t,r)),r}function NY(e,t){t===void 0&&(t=!1);var n=rne.get(e.object);ine(n.value,e.object,e.patches,"",t),e.patches.length&&U9(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function ine(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=kY(t),o=kY(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(IY(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?ine(c,f,n,r+"/"+nw(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+nw(l),value:Jf(c)}),n.push({op:"replace",path:r+"/"+nw(l),value:Jf(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+nw(l),value:Jf(c)}),n.push({op:"remove",path:r+"/"+nw(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!IY(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+nw(l),value:Jf(t[l])})}}}function Ckt(e,t,n){n===void 0&&(n=!1);var r=[];return ine(e,t,r,"",n),r}const Akt=Object.freeze(Object.defineProperty({__proto__:null,compare:Ckt,generate:NY,observe:Skt,unobserve:Tkt},Symbol.toStringTag,{value:"Module"}));Object.assign({},vkt,Akt,{JsonPatchError:sPe,deepClone:Jf,escapePathComponent:nw,unescapePathComponent:iPe});var eH,$me;function Ikt(){if($me)return eH;$me=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return eH=function(n,r){var i,s,o;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),s=i===""?1/0:r.maxLength===void 0?80:r.maxLength,o=r.replacer,function a(u,l,c){var f,d,h,p,m,g,v,b,w,E,T,C;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),T=JSON.stringify(u,o),T===void 0)return T;if(v=s-l.length-c,T.length<=v&&(w=T.replace(e,function(I,R){return R||I+" "}),w.length<=v))return w;if(o!=null&&(u=JSON.parse(T),o=void 0),typeof u=="object"&&u!==null){if(b=l+i,h=[],d=0,Array.isArray(u))for(E="[",f="]",v=u.length;d<v;d++)h.push(a(u[d],b,d===v-1?0:1)||"null");else for(E="{",f="}",g=Object.keys(u),v=g.length;d<v;d++)p=g[d],m=JSON.stringify(p)+": ",C=a(u[p],b,m.length+(d===v-1?0:1)),C!==void 0&&h.push(m+C);if(h.length>0)return[E,i+h.join(`,
`+b),f].join(`
`+l)}return T}(n,"",0)},eH}var kkt=Ikt();const tH=yh(kkt);function pf(e,t,n){return e.fields=t||[],e.fname=n,e}function lo(e){return e==null?null:e.fname}function ul(e){return e==null?null:e.fields}function aPe(e){return e.length===1?Rkt(e[0]):Dkt(e)}const Rkt=e=>function(t){return t[e]},Dkt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function ut(e){throw Error(e)}function cg(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||ut("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&ut("Access path missing closing bracket: "+e),r&&ut("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function fh(e,t,n){const r=cg(e);return e=r.length===1?r[0]:e,pf((n&&n.get||aPe)(r),[e],t||e)}const k3=fh("id"),pl=pf(e=>e,[],"identity"),Hv=pf(()=>0,[],"zero"),fI=pf(()=>1,[],"one"),dh=pf(()=>!0,[],"true"),Rv=pf(()=>!1,[],"false");function Nkt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const uPe=0,sne=1,one=2,lPe=3,cPe=4;function ane(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nkt,r=e||uPe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=sne&&n(t||"error","ERROR",arguments),this},warn(){return r>=one&&n(t||"warn","WARN",arguments),this},info(){return r>=lPe&&n(t||"log","INFO",arguments),this},debug(){return r>=cPe&&n(t||"log","DEBUG",arguments),this}}}var ft=Array.isArray;function Ht(e){return e===Object(e)}const Fme=e=>e!=="__proto__";function dI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=Pkt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;hI(r,s,i[s],o)}return r},{})}function hI(e,t,n,r){if(!Fme(t))return;let i,s;if(Ht(n)&&!ft(n)){s=Ht(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?hI(s,i,n[i]):Fme(i)&&(s[i]=n[i])}else e[t]=n}function Pkt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Kr(e){return e[e.length-1]}function ol(e){return e==null||e===""?null:+e}const fPe=e=>t=>e*Math.exp(t),dPe=e=>t=>Math.log(e*t),hPe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),pPe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,O5=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function z9(e,t,n,r){const i=n(e[0]),s=n(Kr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function mPe(e,t){return z9(e,t,ol,pl)}function gPe(e,t){var n=Math.sign(e[0]);return z9(e,t,dPe(n),fPe(n))}function yPe(e,t,n){return z9(e,t,O5(n),O5(1/n))}function vPe(e,t,n){return z9(e,t,hPe(n),pPe(n))}function V9(e,t,n,r,i){const s=r(e[0]),o=r(Kr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function une(e,t,n){return V9(e,t,n,ol,pl)}function lne(e,t,n){const r=Math.sign(e[0]);return V9(e,t,n,dPe(r),fPe(r))}function M5(e,t,n,r){return V9(e,t,n,O5(r),O5(1/r))}function cne(e,t,n,r){return V9(e,t,n,hPe(r),pPe(r))}function bPe(e){return 1+~~(new Date(e).getMonth()/3)}function xPe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Wt(e){return e!=null?ft(e)?e:[e]:[]}function _Pe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function cr(e){return typeof e=="function"}const Okt="descending";function fne(e,t,n){n=n||{},t=Wt(t)||[];const r=[],i=[],s={},o=n.comparator||Mkt;return Wt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===Okt?-1:1),i.push(a=cr(a)?a:fh(a,null,n)),(ul(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:pf(o(i,r),Object.keys(s))}const H9=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),Mkt=(e,t)=>e.length===1?Lkt(e[0],t[0]):$kt(e,t,e.length),Lkt=(e,t)=>function(n,r){return H9(e(n),e(r))*t},$kt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=H9(s(r),s(i));return o*t[a]});function ml(e){return cr(e)?e:()=>e}function dne(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function lr(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function W0(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function wPe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const Fkt=Object.prototype.hasOwnProperty;function Jt(e,t){return Fkt.call(e,t)}const v6={};function pI(e){let t={},n;function r(s){return Jt(t,s)&&t[s]!==v6}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===v6&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=v6),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==v6&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function EPe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Kr(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function zt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),lr(r,n)}function C2(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function kx(e){return typeof e=="boolean"}function fb(e){return Object.prototype.toString.call(e)==="[object Date]"}function TPe(e){return e&&cr(e[Symbol.iterator])}function bi(e){return typeof e=="number"}function SPe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Gt(e){return typeof e=="string"}function hne(e,t,n){e&&(e=t?Wt(e).map(a=>a.replace(/\\(.)/g,"$1")):Wt(e));const r=e&&e.length,i=n&&n.get||aPe,s=a=>i(t?[a]:cg(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return pf(o,e,"key")}function CPe(e,t){const n=e[0],r=Kr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const Bkt=1e4;function APe(e){e=+e||Bkt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Jt(t,o)||Jt(n,o),get:o=>Jt(t,o)?t[o]:Jt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Jt(t,o)?t[o]=a:s(o,a)}}function IPe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function uD(e,t){let n="";for(;--t>=0;)n+=e;return n}function kPe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?uD(i,o)+s:r==="center"?uD(i,~~(o/2))+s+uD(i,Math.ceil(o/2)):s+uD(i,o)}function R3(e){return e&&Kr(e)-e[0]||0}function jt(e){return ft(e)?"["+e.map(jt)+"]":Ht(e)||Gt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function pne(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const jkt=e=>bi(e)||fb(e)?e:Date.parse(e);function mne(e,t){return t=t||jkt,e==null||e===""?null:t(e)}function gne(e){return e==null||e===""?null:e+""}function Hp(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function RPe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function $v(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function Ukt(e){return e}function zkt(e){if(e==null)return Ukt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function Vkt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Hkt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Bme(e,n)})}:Bme(e,t)}function Bme(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=DPe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function DPe(e,t){var n=zkt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&Vkt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function qkt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function Wkt(e){return DPe(e,Gkt.apply(this,arguments))}function Gkt(e,t,n){var r,i,s;if(arguments.length>1)r=Ykt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:qkt(e,r)}}function Ykt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Eu="year",of="quarter",ll="month",ca="week",af="date",il="day",G0="dayofyear",gd="hours",yd="minutes",hh="seconds",qp="milliseconds",yne=[Eu,of,ll,ca,af,il,G0,gd,yd,hh,qp],nH=yne.reduce((e,t,n)=>(e[t]=1+n,e),{});function vne(e){const t=Wt(e).slice(),n={};return t.length||ut("Missing time unit."),t.forEach(i=>{Jt(nH,i)?n[i]=1:ut(`Invalid time unit: ${i}.`)}),(n[ca]||n[il]?1:0)+(n[of]||n[ll]||n[af]?1:0)+(n[G0]?1:0)>1&&ut(`Incompatible time units: ${e}`),t.sort((i,s)=>nH[i]-nH[s]),t}const Kkt={[Eu]:"%Y ",[of]:"Q%q ",[ll]:"%b ",[af]:"%d ",[ca]:"W%U ",[il]:"%a ",[G0]:"%j ",[gd]:"%H:00",[yd]:"00:%M",[hh]:":%S",[qp]:".%L",[`${Eu}-${ll}`]:"%Y-%m ",[`${Eu}-${ll}-${af}`]:"%Y-%m-%d ",[`${gd}-${yd}`]:"%H:%M"};function NPe(e,t){const n=lr({},Kkt,t),r=vne(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const uw=new Date;function bne(e){return uw.setFullYear(e),uw.setMonth(0),uw.setDate(1),uw.setHours(0,0,0,0),uw}function PPe(e){return MPe(new Date(e))}function OPe(e){return PY(new Date(e))}function MPe(e){return Uy.count(bne(e.getFullYear())-1,e)}function PY(e){return KA.count(bne(e.getFullYear())-1,e)}function OY(e){return bne(e).getDay()}function Xkt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function LPe(e){return FPe(new Date(e))}function $Pe(e){return MY(new Date(e))}function FPe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return ub.count(t-1,e)}function MY(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return XA.count(t-1,e)}function LY(e){return uw.setTime(Date.UTC(e,0,1)),uw.getUTCDay()}function Qkt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function BPe(e,t,n,r,i){const s=t||1,o=Kr(e),a=(v,b,w)=>(w=w||v,Jkt(n[w],r[w],v===o&&s,b)),u=new Date,l=Hp(e),c=l[Eu]?a(Eu):ml(2012),f=l[ll]?a(ll):l[of]?a(of):Hv,d=l[ca]&&l[il]?a(il,1,ca+il):l[ca]?a(ca,1):l[il]?a(il,1):l[af]?a(af,1):l[G0]?a(G0,1):fI,h=l[gd]?a(gd):Hv,p=l[yd]?a(yd):Hv,m=l[hh]?a(hh):Hv,g=l[qp]?a(qp):Hv;return function(v){u.setTime(+v);const b=c(u);return i(b,f(u),d(u,b),h(u),p(u),m(u),g(u))}}function Jkt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function VC(e,t,n){return t+e*7-(n+6)%7}const Zkt={[Eu]:e=>e.getFullYear(),[of]:e=>Math.floor(e.getMonth()/3),[ll]:e=>e.getMonth(),[af]:e=>e.getDate(),[gd]:e=>e.getHours(),[yd]:e=>e.getMinutes(),[hh]:e=>e.getSeconds(),[qp]:e=>e.getMilliseconds(),[G0]:e=>MPe(e),[ca]:e=>PY(e),[ca+il]:(e,t)=>VC(PY(e),e.getDay(),OY(t)),[il]:(e,t)=>VC(1,e.getDay(),OY(t))},eRt={[of]:e=>3*e,[ca]:(e,t)=>VC(e,0,OY(t))};function jPe(e,t){return BPe(e,t||1,Zkt,eRt,Xkt)}const tRt={[Eu]:e=>e.getUTCFullYear(),[of]:e=>Math.floor(e.getUTCMonth()/3),[ll]:e=>e.getUTCMonth(),[af]:e=>e.getUTCDate(),[gd]:e=>e.getUTCHours(),[yd]:e=>e.getUTCMinutes(),[hh]:e=>e.getUTCSeconds(),[qp]:e=>e.getUTCMilliseconds(),[G0]:e=>FPe(e),[ca]:e=>MY(e),[il]:(e,t)=>VC(1,e.getUTCDay(),LY(t)),[ca+il]:(e,t)=>VC(MY(e),e.getUTCDay(),LY(t))},nRt={[of]:e=>3*e,[ca]:(e,t)=>VC(e,0,LY(t))};function UPe(e,t){return BPe(e,t||1,tRt,nRt,Qkt)}const rRt={[Eu]:F0,[of]:LN.every(3),[ll]:LN,[ca]:KA,[af]:Uy,[il]:Uy,[G0]:Uy,[gd]:a9,[yd]:s9,[hh]:Ay,[qp]:CC},iRt={[Eu]:B0,[of]:$N.every(3),[ll]:$N,[ca]:XA,[af]:ub,[il]:ub,[G0]:ub,[gd]:u9,[yd]:o9,[hh]:Ay,[qp]:CC};function mI(e){return rRt[e]}function gI(e){return iRt[e]}function zPe(e,t,n){return e?e.offset(t,n):void 0}function VPe(e,t,n){return zPe(mI(e),t,n)}function HPe(e,t,n){return zPe(gI(e),t,n)}function qPe(e,t,n,r){return e?e.range(t,n,r):void 0}function WPe(e,t,n,r){return qPe(mI(e),t,n,r)}function GPe(e,t,n,r){return qPe(gI(e),t,n,r)}const lD=1e3,cD=lD*60,fD=cD*60,q9=fD*24,sRt=q9*7,jme=q9*30,$Y=q9*365,YPe=[Eu,ll,af,gd,yd,hh,qp],dD=YPe.slice(0,-1),hD=dD.slice(0,-1),pD=hD.slice(0,-1),oRt=pD.slice(0,-1),aRt=[Eu,ca],Ume=[Eu,ll],KPe=[Eu],hR=[[dD,1,lD],[dD,5,5*lD],[dD,15,15*lD],[dD,30,30*lD],[hD,1,cD],[hD,5,5*cD],[hD,15,15*cD],[hD,30,30*cD],[pD,1,fD],[pD,3,3*fD],[pD,6,6*fD],[pD,12,12*fD],[oRt,1,q9],[aRt,1,sRt],[Ume,1,jme],[Ume,3,3*jme],[KPe,1,$Y]];function XPe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(R3(t))/n;let i=qA(a=>a[2]).right(hR,r),s,o;return i===hR.length?(s=KPe,o=Ab(t[0]/$Y,t[1]/$Y,n)):i?(i=hR[r/hR[i-1][2]<hR[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=YPe,o=Math.max(Ab(t[0],t[1],n),1)),{units:s,step:o}}function mD(e){const t={};return n=>t[n]||(t[n]=e(n))}function uRt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=lRt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function lRt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function QPe(e){const t=mD(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Jw(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return uRt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=Jw(o??",f");const a=Ab(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=DCe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=NCe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=RCe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let FY;JPe();function JPe(){return FY=QPe({format:_x,formatPrefix:UZ})}function ZPe(e){return QPe(kCe(e))}function L5(e){return arguments.length?FY=ZPe(e):FY}function zme(e,t,n){n=n||{},Ht(n)||ut(`Invalid time multi-format specifier: ${n}`);const r=t(hh),i=t(yd),s=t(gd),o=t(af),a=t(ca),u=t(ll),l=t(of),c=t(Eu),f=e(n[qp]||".%L"),d=e(n[hh]||":%S"),h=e(n[yd]||"%I:%M"),p=e(n[gd]||"%I %p"),m=e(n[af]||n[il]||"%a %d"),g=e(n[ca]||"%b %d"),v=e(n[ll]||"%B"),b=e(n[of]||"%B"),w=e(n[Eu]||"%Y");return E=>(r(E)<E?f:i(E)<E?d:s(E)<E?h:o(E)<E?p:u(E)<E?a(E)<E?m:g:c(E)<E?l(E)<E?v:b:w)(E)}function e3e(e){const t=mD(e.format),n=mD(e.utcFormat);return{timeFormat:r=>Gt(r)?t(r):zme(t,mI,r),utcFormat:r=>Gt(r)?n(r):zme(n,gI,r),timeParse:mD(e.parse),utcParse:mD(e.utcParse)}}let BY;t3e();function t3e(){return BY=e3e({format:eee,parse:qAe,utcFormat:d3,utcParse:WAe})}function n3e(e){return e3e(jAe(e))}function rP(e){return arguments.length?BY=n3e(e):BY}const jY=(e,t)=>lr({},e,t);function r3e(e,t){const n=e?ZPe(e):L5(),r=t?n3e(t):rP();return jY(n,r)}function xne(e,t){const n=arguments.length;return n&&n!==2&&ut("defaultLocale expects either zero or two arguments."),n?jY(L5(e),rP(t)):jY(L5(),rP())}function cRt(){return JPe(),t3e(),xne()}const fRt=/^(data:|([A-Za-z]+:)?\/\/)/,dRt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,hRt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Vme="file://";function pRt(e,t){return n=>({options:n||{},sanitize:gRt,load:mRt,fileAccess:!1,file:yRt(t),http:bRt(e)})}async function mRt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function gRt(e,t){t=lr({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=dRt.test(e.replace(hRt,""));(e==null||typeof e!="string"||!a)&&ut("Sanitize failure, invalid URI: "+jt(e));const u=fRt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Vme))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Vme.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function yRt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):vRt}async function vRt(){ut("No file system access.")}function bRt(e){return e?async function(t,n){const r=lr({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?cr(s[i])?s[i]():s.text():ut(s.status+""+s.statusText)}:xRt}async function xRt(){ut("No HTTP fetch method available.")}const _Rt=e=>e!=null&&e===e,wRt=e=>e==="true"||e==="false"||e===!0||e===!1,ERt=e=>!Number.isNaN(Date.parse(e)),i3e=e=>!Number.isNaN(+e)&&!(e instanceof Date),TRt=e=>i3e(e)&&Number.isInteger(+e),UY={boolean:pne,integer:ol,number:ol,date:mne,string:gne,unknown:pl},b6=[wRt,TRt,i3e,ERt],SRt=["boolean","integer","number","date"];function s3e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=b6.length,i=b6.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&_Rt(u)&&!b6[a](u)&&(i[a]=0,++o,o===b6.length))return"string";return SRt[i.reduce((s,o)=>s===0?o:s,0)-1]}function o3e(e,t){return t.reduce((n,r)=>(n[r]=s3e(e,r),n),{})}function Hme(e){const t=function(n,r){const i={delimiter:e};return _ne(n,r?lr(r,i):i)};return t.responseType="text",t}function _ne(e,t){return t.header&&(e=t.header.map(jt).join(t.delimiter)+`
`+e),SCe(t.delimiter).parse(e+"")}_ne.responseType="text";function CRt(e){return typeof Buffer=="function"&&cr(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function wne(e,t){const n=t&&t.property?fh(t.property):pl;return Ht(e)&&!CRt(e)?ARt(n(e),t):n(JSON.parse(e))}wne.responseType="json";function ARt(e,t){return!ft(e)&&TPe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const IRt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function a3e(e,t){let n,r,i,s;return e=wne(e,t),t&&t.feature?(n=Hkt,i=t.feature):t&&t.mesh?(n=Wkt,i=t.mesh,s=IRt[t.filter]):ut("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):ut("Invalid TopoJSON object: "+i),r&&r.features||[r]}a3e.responseType="json";const n$={dsv:_ne,csv:Hme(","),tsv:Hme("	"),json:wne,topojson:a3e};function Ene(e,t){return arguments.length>1?(n$[e]=t,this):Jt(n$,e)?n$[e]:null}function u3e(e){const t=Ene(e);return t&&t.responseType||"text"}function l3e(e,t,n,r){t=t||{};const i=Ene(t.type||"json");return i||ut("Unknown data format type: "+t.type),e=i(e,t),t.parse&&kRt(e,t.parse,n,r),Jt(e,"columns")&&delete e.columns,e}function kRt(e,t,n,r){if(!e.length)return;const i=rP();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=o3e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!UY[p])throw Error("Illegal format pattern: "+h+":"+p);return UY[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const W9=pRt(typeof fetch<"u"&&fetch,null);function G9(e){const t=e||pl,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function r$(e,t){try{await t(e)}catch(n){e.error(n)}}const c3e=Symbol("vega_id");let RRt=1;function Y9(e){return!!(e&&bn(e))}function bn(e){return e[c3e]}function f3e(e,t){return e[c3e]=t,e}function Si(e){const t=e===Object(e)?e:{data:e};return bn(t)?t:f3e(t,RRt++)}function Tne(e){return K9(e,Si({}))}function K9(e,t){for(const n in e)t[n]=e[n];return t}function d3e(e,t){return f3e(t,bn(e))}function GE(e,t){return e?t?(n,r)=>e(n,r)||bn(t(n))-bn(t(r)):(n,r)=>e(n,r)||bn(n)-bn(r):null}function h3e(e){return e&&e.constructor===YE}function YE(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:YE,insert(a){const u=Wt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=cr(a)?r:t,l=Wt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:ml(l)};return cr(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return cr(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[bn(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[bn(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(b=>{p(b)&&(l[bn(b)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=bn(m),l[g]?l[g]=1:a.add.push(Si(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[bn(m)]<0&&a.rem.push(m);function v(b,w,E){E?b[w]=E(b):a.encode=w,o||(c[bn(b)]=b)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[bn(m)],g>0&&(v(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(b=>{p(b)&&l[bn(b)]>0&&v(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(b=>l[bn(b)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const i$="_:mod:_";function X9(){Object.defineProperty(this,i$,{writable:!0,value:{}})}X9.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[i$];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=ft(n)?1+n.length:-1),i},modified(e,t){const n=this[i$];if(arguments.length){if(ft(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[i$]={},this}};let DRt=0;const NRt="pulse",PRt=new X9,ORt=1,MRt=2;function os(e,t,n,r){this.id=++DRt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function qme(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}os.prototype={targets(){return this._targets||(this._targets=G9(k3))},set(e){return this.value!==e?(this.value=e,1):0},skip:qme(ORt),modified:qme(MRt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new X9,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof os?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===NRt)Wt(a).forEach(f=>{f instanceof os?f!==this&&(f.targets().add(this),s.push(f)):ut("Pulse parameters must be operator instances.")}),this.source=a;else if(ft(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||PRt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function LRt(e,t,n,r){let i=1,s;return e instanceof os?s=e:e&&e.prototype instanceof os?s=new e:cr(e)?s=new os(null,e):(i=0,s=new os(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function $Rt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let FRt=0;function Q9(e,t,n){this.id=++FRt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Dv(e,t,n){return new Q9(e,t,n)}Q9.prototype={_filter:dh,_apply:pl,targets(){return this._targets||(this._targets=G9(k3))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Dv(e);return this.targets().add(t),t},apply(e){const t=Dv(null,e);return this.targets().add(t),t},merge(){const e=Dv();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Dv();return this.targets().add(Dv(null,null,dne(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Dv(null,null,()=>n=!0)),t.targets().add(Dv(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=dh,this._targets=null}};function BRt(e,t,n,r){const i=this,s=Dv(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=Wt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function jRt(e,t){const n=this.locale();return l3e(e,t,n.timeParse,n.utcParse)}function URt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function zRt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:u3e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function VRt(e,t,n){const r=this,i=r._pending||HRt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(dh).insert(s.data||[])),i.done(),s}function HRt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const qRt={skip:!0};function WRt(e,t,n,r,i){return(e instanceof os?YRt:GRt)(this,e,t,n,r,i),this}function GRt(e,t,n,r,i,s){const o=lr({},s,qRt);let a,u;cr(n)||(n=ml(n)),r===void 0?a=l=>e.touch(n(l)):cr(r)?(u=new os(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;h3e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function YRt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new os(null,KRt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function KRt(e,t){return t=cr(t)?t:ml(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function XRt(e){e.rank=++this._rank}function QRt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&ut("Cycle detected in dataflow graph.")}const $5={},Ym=1,Fv=2,ly=4,JRt=Ym|Fv,Wme=Ym|ly,US=Ym|Fv|ly,Gme=8,pR=16,Yme=32,Kme=64;function db(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function rH(e,t){const n=[];return $v(e,t,r=>n.push(r)),n}function Xme(e,t){const n={};return e.visit(t,r=>{n[bn(r)]=1}),r=>n[bn(r)]?null:r}function x6(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}db.prototype={StopPropagation:$5,ADD:Ym,REM:Fv,MOD:ly,ADD_REM:JRt,ADD_MOD:Wme,ALL:US,REFLOW:Gme,SOURCE:pR,NO_SOURCE:Yme,NO_FIELDS:Kme,fork(e){return new db(this.dataflow).init(this,e)},clone(){const e=this.fork(US);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(US|pR)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new db(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Kme)&&(n.fields=e.fields),t&Ym?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Fv?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ly?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Yme?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||US;return t&Ym&&this.add.length||t&Fv&&this.rem.length||t&ly&&this.mod.length},reflow(e){if(e)return this.fork(US).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ly,Xme(this,Ym))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ft(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ft(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ym&&(n.addF=x6(n.addF,t)),e&Fv&&(n.remF=x6(n.remF,t)),e&ly&&(n.modF=x6(n.modF,t)),e&pR&&(n.srcF=x6(n.srcF,t)),n},materialize(e){e=e||US;const t=this;return e&Ym&&t.addF&&(t.add=rH(t.add,t.addF),t.addF=null),e&Fv&&t.remF&&(t.rem=rH(t.rem,t.remF),t.remF=null),e&ly&&t.modF&&(t.mod=rH(t.mod,t.modF),t.modF=null),e&pR&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&pR)return $v(n.source,n.srcF,r),n;e&Ym&&$v(n.add,n.addF,r),e&Fv&&$v(n.rem,n.remF,r),e&ly&&$v(n.mod,n.modF,r);const i=n.source;if(e&Gme&&i){const s=n.add.length+n.mod.length;s===i.length||(s?$v(i,Xme(n,Wme),r):$v(i,n.srcF,r))}return n}};function Sne(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}zt(Sne,db,{fork(e){const t=new db(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ft(e)?e.some(r=>n[r]):n[e]:0},filter(){ut("MultiPulse does not support filtering.")},materialize(){ut("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function ZRt(e,t,n){const r=this,i=[];if(r._pulse)return p3e(r);if(r._pending&&await r._pending,t&&await r$(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new db(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=G9(k3);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=$5),u!==$5&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await r$(r,c[f].callback)}return n&&await r$(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function eDt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function tDt(e,t,n){return this._pulse?p3e(this):(this.evaluate(e,t,n),this)}function nDt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function p3e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function rDt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function iDt(e,t){const n=e.source,r=this._clock;return n&&ft(n)?new Sne(this,r,n.map(i=>i.pulse),t):this._input[e.id]||sDt(this._pulse,n&&n.pulse)}function sDt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==$5&&(e.source=t.source),e)}const Cne={skip:!1,force:!1};function oDt(e,t){const n=t||Cne;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function aDt(e,t,n){const r=n||Cne;return(e.set(t)||r.force)&&this.touch(e,r),this}function uDt(e,t,n){this.touch(e,n||Cne);const r=new db(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function lDt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),m3e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,cDt(t,0,e)):r=n,r}}}function m3e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function cDt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,m3e(e,r,t,n)}function X2(){this.logger(ane()),this.logLevel(sne),this._clock=0,this._rank=0,this._locale=xne();try{this._loader=W9()}catch{}this._touched=G9(k3),this._input={},this._pulse=null,this._heap=lDt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function mR(e){return function(){return this._log[e].apply(this,arguments)}}X2.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:mR("error"),warn:mR("warn"),info:mR("info"),debug:mR("debug"),logLevel:mR("level"),cleanThreshold:1e4,add:LRt,connect:$Rt,rank:XRt,rerank:QRt,pulse:uDt,touch:oDt,update:aDt,changeset:YE,ingest:URt,parse:jRt,preload:VRt,request:zRt,events:BRt,on:WRt,evaluate:ZRt,run:tDt,runAsync:eDt,runAfter:nDt,_enqueue:rDt,_getPulse:iDt};function nt(e,t){os.call(this,e,null,t)}zt(nt,os,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const HC={};function g3e(e){const t=y3e(e);return t&&t.Definition||null}function y3e(e){return e=e&&e.toLowerCase(),Jt(HC,e)?HC[e]:null}function*v3e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function Ane(e,t,n){const r=Float64Array.from(v3e(e,n));return r.sort(Fy),t.map(i=>T2e(r,i))}function Ine(e,t){return Ane(e,[.25,.5,.75],t)}function kne(e,t){const n=e.length,r=aft(e,t),i=Ine(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function b3e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var ph=Math.random;function fDt(e){ph=e}function x3e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(v3e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(ph()*s)];c[l]=a/s}return c.sort(Fy),[YW(c,n/2),YW(c,1-n/2)]}function _3e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?dDt(s,t+t/4):s}function dDt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function hDt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function pDt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*ph())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const w3e=Math.sqrt(2*Math.PI),mDt=Math.SQRT2;let gR=NaN;function J9(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(gR===gR)n=gR,gR=NaN;else{do n=ph()*2-1,r=ph()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,gR=r*s}return e+n*t}function Rne(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*w3e)}function Z9(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function ej(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*mDt*gDt(2*e-1)}function gDt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function Dne(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>J9(n,r),pdf:s=>Rne(s,n,r),cdf:s=>Z9(s,n,r),icdf:s=>ej(s,n,r)};return i.mean(e).stdev(t)}function Nne(e,t){const n=Dne();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=kne(e)),i):t},sample(){return e[~~(ph()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Pne(e,t){return e=e||0,t=t??1,Math.exp(e+J9()*t)}function One(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*w3e*e)}function Mne(e,t,n){return Z9(Math.log(e),t,n)}function Lne(e,t,n){return Math.exp(ej(e,t,n))}function E3e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Pne(n,r),pdf:s=>One(s,n,r),cdf:s=>Mne(s,n,r),icdf:s=>Lne(s,n,r)};return i.mean(e).stdev(t)}function T3e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=ph();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function $ne(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*ph()}function Fne(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Bne(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function jne(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function S3e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>$ne(n,r),pdf:s=>Fne(s,n,r),cdf:s=>Bne(s,n,r),icdf:s=>jne(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Une(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function D3(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function tj(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function N3(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function yI(e,t,n,r,i){let s=0,o=0;return N3(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function zne(e,t,n){let r=0,i=0,s=0,o=0,a=0;N3(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=D3(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:yI(e,t,n,i,l)}}function C3e(e,t,n){let r=0,i=0,s=0,o=0,a=0;N3(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=D3(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:yI(e,t,n,i,l)}}function A3e(e,t,n){const[r,i,s,o]=tj(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;N3(e,t,n,(b,w)=>{d=r[f++],h=Math.log(w),p=d*w,a+=(w*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=D3(u/o,a/o,l/o,c/o),v=b=>Math.exp(m+g*(b-s));return{coef:[Math.exp(m-g*s),g],predict:v,rSquared:yI(e,t,n,o,v)}}function I3e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;N3(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=D3(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:yI(e,t,n,a,c)}}function Vne(e,t,n){const[r,i,s,o]=tj(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const v=c-u*u,b=u*v-l*l,w=(d*u-f*l)/b,E=(f*v-d*l)/b,T=-w*u,C=I=>(I=I-s,w*I*I+E*I+T+o);return{coef:[T-E*s+w*s*s+o,E-2*w*s,w],predict:C,rSquared:yI(e,t,n,o,C)}}function k3e(e,t,n,r){if(r===0)return Une(e,t,n);if(r===1)return zne(e,t,n);if(r===2)return Vne(e,t,n);const[i,s,o,a]=tj(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const v=vDt(c),b=w=>{w-=o;let E=a+v[0]+v[1]*w+v[2]*w*w;for(d=3;d<f;++d)E+=v[d]*Math.pow(w,d);return E};return{coef:yDt(f,v,-o,a),predict:b,rSquared:yI(e,t,n,a,b)}}function yDt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function vDt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Qme=2,Jme=1e-12;function R3e(e,t,n,r){const[i,s,o,a]=tj(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Qme;){const p=[0,l-1];for(let g=0;g<u;++g){const v=i[g],b=p[0],w=p[1],E=v-i[b]>i[w]-v?b:w;let T=0,C=0,I=0,R=0,N=0;const O=1/Math.abs(i[E]-v||1);for(let F=b;F<=w;++F){const H=i[F],Q=s[F],J=bDt(Math.abs(v-H)*O)*d[F],ne=H*J;T+=J,C+=ne,I+=Q*J,R+=Q*ne,N+=H*ne}const[L,B]=D3(C/T,I/T,R/T,N/T);c[g]=L+B*v,f[g]=Math.abs(s[g]-c[g]),xDt(i,g+1,p)}if(h===Qme)break;const m=S2e(f);if(Math.abs(m)<Jme)break;for(let g=0,v,b;g<u;++g)v=f[g]/(6*m),d[g]=v>=1?Jme:(b=1-v*v)*b}return _Dt(i,c,o,a)}function bDt(e){return(e=1-e*e*e)*e*e}function xDt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function _Dt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const wDt=.5*Math.PI/180;function nj(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=EDt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&TDt(f,m,d,h,p)>wDt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function EDt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function TDt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function SDt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function zY(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:SDt(e)}function D3e(e,t,n){return n||e+(t?"_"+t:"")}const iH=()=>{},CDt={init:iH,add:iH,rem:iH,idx:0},iP={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},P3=Object.keys(iP).filter(e=>e!=="__count__");function ADt(e,t){return(n,r)=>lr({name:e,aggregate_param:r,out:n||e},CDt,t)}[...P3,"__count__"].forEach(e=>{iP[e]=ADt(e,iP[e])});function N3e(e,t,n){return iP[e](n,t)}function P3e(e,t){return e.idx-t.idx}function IDt(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=iP[i]())})};return e.forEach(n),Object.values(t).sort(P3e)}function kDt(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function RDt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function DDt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function NDt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function O3e(e,t){const n=t||pl,r=IDt(e),i=e.slice().sort(P3e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=kDt,s.prototype.add=RDt,s.prototype.rem=DDt,s.prototype.set=NDt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function Hne(e){this._key=e?fh(e):bn,this.reset()}const Ru=Hne.prototype;Ru.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Ru.add=function(e){this._add.push(e)};Ru.rem=function(e){this._rem.push(e)};Ru.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Ru.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Jt(n,s)||(n[s]=1,++i);return i};Ru.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=wPe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Ru.argmin=function(e){return this.extent(e)[0]||{}};Ru.argmax=function(e){return this.extent(e)[1]||{}};Ru.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Ru.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Ru.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Ine(this.values(),e),this._get=e),this._q};Ru.q1=function(e){return this.quartile(e)[0]};Ru.q2=function(e){return this.quartile(e)[1]};Ru.q3=function(e){return this.quartile(e)[2]};Ru.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=x3e(this.values(),1e3,.05,e),this._get=e),this._ci};Ru.ci0=function(e){return this.ci(e)[0]};Ru.ci1=function(e){return this.ci(e)[1]};function Vb(e){nt.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Vb.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:P3},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};zt(Vb,nt,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const w=Wt(ul(b)),E=w.length;let T=0,C;for(;T<E;++T)r[C=w[T]]||(r[C]=1,t.push(C))}this._dims=Wt(e.groupby),this._dnames=this._dims.map(b=>{const w=lo(b);return i(b),n.push(w),w}),this.cellkey=e.key?e.key:zY(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,v;for(l!==o.length&&ut("Unmatched number of fields and aggregate ops."),v=0;v<l;++v){if(f=s[v],d=o[v],h=a[v]||null,f==null&&d!=="count"&&ut("Null aggregate field specified."),m=lo(f),g=D3e(d,m,u[v]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(N3e(d,h,g))}return this._measures=this._measures.map(b=>O3e(b,b.field)),Object.create(null)},cellkey:zY(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new Hne),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?d3e(t.tuple,s):Si(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const PDt=1e-14;function qne(e){nt.call(this,null,e)}qne.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};zt(qne,nt,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ul(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=b3e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ol(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(PDt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=pf(u,ul(t),e.name||"bin_"+lo(t))}});function M3e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?IPe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Wne(e){nt.call(this,[],e)}Wne.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};zt(Wne,nt,{transform(e,t){const n=t.fork(t.ALL),r=M3e(bn,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(GE(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function L3e(e){os.call(this,null,ODt,e)}zt(L3e,os);function ODt(e){return this.value&&!e.modified()?this.value:fne(e.fields,e.orders)}function Gne(e){nt.call(this,null,e)}Gne.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function MDt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}zt(Gne,nt,{transform(e,t){const n=f=>d=>{for(var h=MDt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Si({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Yne(e){nt.call(this,null,e)}Yne.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};zt(Yne,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=LDt(a,i,s,e.filter||dh)):n.mod=a,n.source=this.value,n.modifies(r)}});function LDt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Si(s)),s={},s[t]=l);return i}const Zme={kde:Nne,mixture:T3e,normal:Dne,lognormal:E3e,uniform:S3e},$Dt="distributions",e0e="function",FDt="field";function $3e(e,t){const n=e[e0e];Jt(Zme,n)||ut("Unknown distribution function: "+n);const r=Zme[n]();for(const i in e)i===FDt?r.data((e.from||t()).map(e[i])):i===$Dt?r[i](e[i].map(s=>$3e(s,t))):typeof r[i]===e0e&&r[i](e[i]);return r}function Kne(e){nt.call(this,null,e)}const F3e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],BDt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:F3e},{name:"weights",type:"number",array:!0}]};Kne.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:F3e.concat(BDt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};zt(Kne,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=$3e(e.distribution,jDt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&ut("Invalid density method: "+o),!e.extent&&!r.data&&ut("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||W0(r.data()),l=nj(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Si(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function jDt(e){return()=>e.materialize(e.SOURCE).source}function B3e(e,t){return e?e.map((n,r)=>t[r]||lo(n)):null}function Xne(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const j3e="bin";function Qne(e){nt.call(this,null,e)}Qne.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:j3e}]};const UDt=(e,t)=>R3(W0(e,t))/30;zt(Qne,nt,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=Xne(t.source,e.groupby,pl),i=e.smooth||!1,s=e.field,o=e.step||UDt(n,s),a=GE((p,m)=>s(p)-s(m)),u=e.as||j3e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of _3e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function U3e(e){os.call(this,null,zDt,e),this.modified(!0)}zt(U3e,os);function zDt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:pf(n=>t(n,e),ul(t),lo(t))}function Jne(e){nt.call(this,[void 0,void 0],e)}Jne.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};zt(Jne,nt,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ol(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=lo(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Zne(e,t){os.call(this,e),this.parent=t,this.count=0}zt(Zne,os,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function rj(e){nt.call(this,{},e),this._keys=pI();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}zt(rj,nt,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Jt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Zne(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=bn(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(bn(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=bn(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(bn(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=bn(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function z3e(e){os.call(this,null,VDt,e)}zt(z3e,os);function VDt(e){return this.value&&!e.modified()?this.value:ft(e.name)?Wt(e.name).map(t=>fh(t)):fh(e.name,e.as)}function ere(e){nt.call(this,pI(),e)}ere.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};zt(ere,nt,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=bn(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(bn(f),1)});function c(f){const d=bn(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function tre(e){nt.call(this,[],e)}tre.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};zt(tre,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=B3e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=Tne(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function nre(e){nt.call(this,[],e)}nre.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};zt(nre,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(lo),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=Tne(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function rre(e){nt.call(this,null,e)}rre.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};zt(rre,nt,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function V3e(e){nt.call(this,[],e)}zt(V3e,nt,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Si(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const _6={value:"value",median:S2e,mean:hft,min:GW,max:By},HDt=[];function ire(e){nt.call(this,[],e)}ire.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function qDt(e){var t=e.method||_6.value,n;if(_6[t]==null)ut("Unrecognized imputation method: "+t);else return t===_6.value?(n=e.value!==void 0?e.value:0,()=>n):_6[t]}function WDt(e){const t=e.field;return n=>n?t(n):NaN}zt(ire,nt,{transform(e,t){var n=t.fork(t.ALL),r=qDt(e),i=WDt(e),s=lo(e.field),o=lo(e.key),a=(e.groupby||[]).map(lo),u=GDt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,v,b,w,E,T;for(g=0,w=u.length;g<w;++g)for(d=u[g],p=d.values,h=NaN,b=0;b<f;++b)if(d[b]==null){for(m=u.domain[b],T={_impute:!0},v=0,E=p.length;v<E;++v)T[a[v]]=p[v];T[o]=m,T[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Si(T))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function GDt(e,t,n,r){var i=v=>v(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((v,b)=>a[v]=b+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):HDt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function sre(e){Vb.call(this,e)}sre.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:P3},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};zt(sre,Vb,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{lr(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function ore(e){nt.call(this,null,e)}ore.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};zt(ore,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=Xne(r,e.groupby,e.field),s=(e.groupby||[]).map(lo),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&ut("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=W0(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=Nne(h,o)[a],m=e.counts?h.length:1,g=c||W0(h);nj(p,g,f,d).forEach(v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[u[0]]=v[0],b[u[1]]=v[1]*m,l.push(Si(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function H3e(e){os.call(this,null,YDt,e)}zt(H3e,os);function YDt(e){return this.value&&!e.modified()?this.value:hne(e.fields,e.flat)}function q3e(e){nt.call(this,[],e),this._pending=null}zt(q3e,nt,{transform(e,t){const n=t.dataflow;return this._pending?sH(this,t,this._pending):KDt(e)?t.StopPropagation:e.values?sH(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Wt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>sH(this,t,Wt(r.data)))}});function KDt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function sH(e,t,n){n.forEach(Si);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function are(e){nt.call(this,{},e)}are.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};zt(are,nt,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&ut('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&ut('The "as" parameter has too few output field names.'),c=c||i.map(lo),f=function(p){for(var m=0,g=0,v,b;m<a;++m)if(b=r.get(n[m](p)),b==null)for(v=0;v<d;++v,++g)p[c[g]]=s;else for(v=0;v<d;++v,++g)p[c[g]]=i[v](b)}):(c||ut("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function W3e(e){os.call(this,null,XDt,e)}zt(W3e,os);function XDt(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function G3e(e){os.call(this,null,QDt,e)}zt(G3e,os);function QDt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function Y3e(e){nt.call(this,null,e)}zt(Y3e,nt,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ure(e){Vb.call(this,e)}ure.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:P3,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};zt(ure,Vb,{_transform:Vb.prototype.transform,transform(e,t){return this._transform(JDt(e,t),t)}});function JDt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ul(n).concat(ul(r)),o=eNt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>ZDt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function ZDt(e,t,n,r){return pf(i=>t(i)===e?n(i):NaN,r,e+"")}function eNt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(H9),t?i.slice(0,t):i}function K3e(e){rj.call(this,e)}zt(K3e,rj,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(bn(s),n,t,s);return(e.modified("field")||r&&t.modified(ul(r)))&&ut("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Si(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function lre(e){nt.call(this,null,e)}lre.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};zt(lre,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=B3e(e.fields,e.as||[]),s=r?(a,u)=>tNt(a,u,r,i):K9;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=bn(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Si({}));o[bn(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[bn(a)]))}),n}});function tNt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function X3e(e){nt.call(this,null,e)}zt(X3e,nt,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function cre(e){nt.call(this,null,e)}cre.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const nNt=1e-14;zt(cre,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=Xne(i,e.groupby,e.field),o=(e.groupby||[]).map(lo),a=[],u=e.step||.01,l=e.probs||qc(u/2,1-nNt,u),c=l.length;return s.forEach(f=>{const d=Ane(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Si(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function Q3e(e){nt.call(this,null,e)}zt(Q3e,nt,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=bn(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Tne(i);r[bn(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[bn(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function fre(e){nt.call(this,[],e),this.count=0}fre.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};zt(fre,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[bn(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*ph()),d<o.length&&d>=u&&(f=o[d],s[bn(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=bn(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[bn(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[bn(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[bn(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[bn(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[bn(c)])),this.count=a,this.value=n.source=o,n}});function dre(e){nt.call(this,null,e)}dre.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};zt(dre,nt,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=qc(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Si(s)}),n.add=t.add.concat(this.value),n}});function J3e(e){nt.call(this,null,e),this.modified(!0)}zt(J3e,nt,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function hre(e){nt.call(this,null,e)}const Z3e=["unit0","unit1"];hre.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:yne,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Z3e}]};zt(hre,nt,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?gI:mI)(s.unit).offset,a=e.as||Z3e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ul(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,v;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=v=s(m),r&&(p[l]=v=o(g,c)),g<f&&(f=g),v>d&&(d=v))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:XPe({extent:e.extent||W0(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=vne(r),o=this.value||{},a=(n?UPe:jPe)(s,i);return a.unit=Kr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function eOe(e){nt.call(this,pI(),e)}zt(eOe,nt,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function tOe(e){nt.call(this,null,e)}zt(tOe,nt,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(GE(e.sort)):t.source).map(e.field))}});function rNt(e,t,n,r){const i=sP[e](t,n);return{init:i.init||Hv,update:function(s,o){o[r]=i.next(s)}}}const sP={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=sP.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||ut("ntile num must be greater than zero.");const n=sP.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||ut("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=iNt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function iNt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const sNt=Object.keys(sP);function nOe(e){const t=Wt(e.ops),n=Wt(e.fields),r=Wt(e.params),i=Wt(e.aggregate_params),s=Wt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){Wt(ul(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],v=r[m],b=i[m]||null,w=lo(g),E=D3e(p,w,s[m]);if(h(g),o.push(E),Jt(sP,p))a.push(rNt(p,g,v,E));else{if(g==null&&p!=="count"&&ut("Null aggregate field specified."),p==="count"){c.push(E);return}d=!1;let T=l[w];T||(T=l[w]=[],T.field=g,f.push(T)),T.push(N3e(p,b,E))}}),(c.length||f.length)&&(this.cell=oNt(f,c,d)),this.inputs=Object.keys(u)}const rOe=nOe.prototype;rOe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};rOe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function oNt(e,t,n){e=e.map(u=>O3e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new Hne;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function pre(e){nt.call(this,{},e),this._mlen=0,this._mods=[]}pre.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:sNt.concat(P3)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};zt(pre,nt,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=GE(e.sort),i=zY(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new nOe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)aNt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=M3e(bn),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function aNt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?qA(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ml(-1)};t.init();for(let f=0;f<u;++f)uNt(c,o,f,u),s&&lNt(c,l),t.update(c,a[f])}function uNt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function lNt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const cNt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Vb,bin:qne,collect:Wne,compare:L3e,countpattern:Gne,cross:Yne,density:Kne,dotbin:Qne,expression:U3e,extent:Jne,facet:rj,field:z3e,filter:ere,flatten:tre,fold:nre,formula:rre,generate:V3e,impute:ire,joinaggregate:sre,kde:ore,key:H3e,load:q3e,lookup:are,multiextent:W3e,multivalues:G3e,params:Y3e,pivot:ure,prefacet:K3e,project:lre,proxy:X3e,quantile:cre,relay:Q3e,sample:fre,sequence:dre,sieve:J3e,subflow:Zne,timeunit:hre,tupleindex:eOe,values:tOe,window:pre},Symbol.toStringTag,{value:"Module"}));function hb(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const fNt=()=>typeof Image<"u"?Image:null;function mre(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const dNt="identity",qC="linear",c1="log",O3="pow",M3="sqrt",ij="symlog",oE="time",aE="utc",C0="sequential",vI="diverging",WC="quantile",sj="quantize",oj="threshold",gre="ordinal",VY="point",iOe="band",yre="bin-ordinal",ba="continuous",L3="discrete",$3="discretizing",kh="interpolating",vre="temporal";function hNt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function pNt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function bre(){const e=Ex().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=mre(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=qc(f).map(v=>m+i*v);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],v,b,w;if(!(m!==m||g!==g)&&(g<m&&(w=m,m=g,g=w),!(g<h[0]||m>r[1-d])))return v=Math.max(0,Cb(h,m)-1),b=m===g?v:Cb(h,g)-1,m-h[v]>s+1e-10&&++v,d&&(w=v,v=p-b,b=p-w),v>b?void 0:t().slice(v,b+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return bre().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function sOe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return sOe(t())},e}function mNt(){return sOe(bre().paddingInner(1))}var gNt=Array.prototype.map;function yNt(e){return gNt.call(e,ol)}const vNt=Array.prototype.slice;function oOe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Cb(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=yNt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=vNt.call(r),n):t.slice()},n.tickFormat=function(r,i){return RAe(e[0],Kr(e),r??10,i)},n.copy=function(){return oOe().domain(n.domain()).range(n.range())},n}const F5=new Map,aOe=Symbol("vega_scale");function uOe(e){return e[aOe]=!0,e}function bNt(e){return e&&e[aOe]===!0}function xNt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?hNt(s):s.invertExtent?pNt(s):void 0),s.type=e,uOe(s)};return r.metadata=Hp(Wt(n)),r}function xi(e,t,n){return arguments.length>1?(F5.set(e,xNt(e,t,n)),this):lOe(e)?F5.get(e):void 0}xi(dNt,DAe);xi(qC,ef,ba);xi(c1,PAe,[ba,c1]);xi(O3,JZ,ba);xi(M3,jyt,ba);xi(ij,OAe,ba);xi(oE,nee,[ba,vre]);xi(aE,tvt,[ba,vre]);xi(C0,ree,[ba,kh]);xi(`${C0}-${qC}`,ree,[ba,kh]);xi(`${C0}-${c1}`,GAe,[ba,kh,c1]);xi(`${C0}-${O3}`,iee,[ba,kh]);xi(`${C0}-${M3}`,nvt,[ba,kh]);xi(`${C0}-${ij}`,YAe,[ba,kh]);xi(`${vI}-${qC}`,KAe,[ba,kh]);xi(`${vI}-${c1}`,XAe,[ba,kh,c1]);xi(`${vI}-${O3}`,see,[ba,kh]);xi(`${vI}-${M3}`,rvt,[ba,kh]);xi(`${vI}-${ij}`,QAe,[ba,kh]);xi(WC,MAe,[$3,WC]);xi(sj,LAe,$3);xi(oj,$Ae,$3);xi(yre,oOe,[L3,$3]);xi(gre,Ex,L3);xi(iOe,bre,L3);xi(VY,mNt,L3);function lOe(e){return F5.has(e)}function KE(e,t){const n=F5.get(e);return n&&n.metadata[t]}function xre(e){return KE(e,ba)}function GC(e){return KE(e,L3)}function HY(e){return KE(e,$3)}function cOe(e){return KE(e,c1)}function _Nt(e){return KE(e,vre)}function fOe(e){return KE(e,kh)}function dOe(e){return KE(e,WC)}const wNt=["clamp","base","constant","exponent"];function hOe(e,t){const n=t[0],r=Kr(t)-n;return function(i){return e(n+i*r)}}function aj(e,t,n){return DZ(_re(t||"rgb",n),e)}function pOe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function mOe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?ml(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=xi(s)().domain([t,n]).range([0,1]),wNt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function _re(e,t){const n=$ht[ENt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function ENt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const TNt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},SNt={accent:svt,category10:ivt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:ovt,observable10:avt,paired:uvt,pastel1:lvt,pastel2:cvt,set1:fvt,set2:dvt,set3:hvt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function gOe(e){if(ft(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function yOe(e,t){for(const n in e)wre(n,t(e[n]))}const t0e={};yOe(SNt,gOe);yOe(TNt,e=>aj(gOe(e)));function wre(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(t0e[e]=t,this):t0e[e]}const s$="symbol",CNt="discrete",ANt="gradient",INt=e=>ft(e)?e.map(t=>String(t)):String(e),kNt=(e,t)=>e[1]-t[1],RNt=(e,t)=>t[1]-e[1];function Ere(e,t,n){let r;return bi(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(R3(e.domain())/n||1)+1))),Ht(t)&&(r=t.step,t=t.interval),Gt(t)&&(t=e.type===oE?mI(t):e.type==aE?gI(t):ut("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function vOe(e,t,n){let r=e.range(),i=r[0],s=Kr(r),o=kNt;if(i>s&&(r=s,s=i,i=r,o=RNt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Kr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function Tre(e,t){return e.bins?vOe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function bOe(e,t,n,r,i,s){const o=t.type;let a=INt;if(o===oE||i===oE)a=e.timeFormat(r);else if(o===aE||i===aE)a=e.utcFormat(r);else if(cOe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=xOe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function xOe(e,t,n){const r=Tre(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const qY={[WC]:"quantiles",[sj]:"thresholds",[oj]:"domain"},_Oe={[WC]:"quantiles",[sj]:"domain"};function wOe(e,t){return e.bins?PNt(e.bins):e.type===c1?xOe(e,t,!0):qY[e.type]?NNt(e[qY[e.type]]()):Tre(e,t)}function DNt(e,t,n){const r=t[_Oe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function NNt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function PNt(e){const t=e.slice(0,-1);return t.max=Kr(e),t}const ONt=e=>qY[e.type]||e.bins;function EOe(e,t,n,r,i,s,o){const a=_Oe[t.type]&&s!==oE&&s!==aE?DNt(e,t,i):bOe(e,t,n,i,s,o);return r===s$&&ONt(t)?MNt(a):r===CNt?LNt(a):$Nt(a)}const MNt=e=>(t,n,r)=>{const i=n0e(r[n+1],n0e(r.max,1/0)),s=r0e(t,e),o=r0e(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},n0e=(e,t)=>e??t,LNt=e=>(t,n)=>n?e(t):null,$Nt=e=>t=>e(t),r0e=(e,t)=>Number.isFinite(e)?t(e):null;function FNt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Kr(t),s=i-r;if(e.type===oj){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function BNt(e,t,n,r){const i=r||t.type;return Gt(n)&&_Nt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===oE?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===aE?e.utcFormat("%A, %d %B %Y, %X UTC"):EOe(e,t,5,null,n,r,!0)}function TOe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=BNt(e,t,n.format,n.formatType);if(HY(t.type)){const s=wOe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(GC(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Kr(s))}`}}let SOe=0;function jNt(){SOe=0}const B5="p_";function Sre(e){return e&&e.gradient}function COe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?B5:"";return i||(i=e.id="gradient_"+SOe++,r==="radial"?(e.x1=Fm(e.x1,.5),e.y1=Fm(e.y1,.5),e.r1=Fm(e.r1,0),e.x2=Fm(e.x2,.5),e.y2=Fm(e.y2,.5),e.r2=Fm(e.r2,.5),s=B5):(e.x1=Fm(e.x1,0),e.y1=Fm(e.y1,0),e.x2=Fm(e.x2,1),e.y2=Fm(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Fm(e,t){return e??t}function AOe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const i0e={basis:{curve:Avt},"basis-closed":{curve:Ivt},"basis-open":{curve:kvt},bundle:{curve:Rvt,tension:"beta",value:.85},cardinal:{curve:Dvt,tension:"tension",value:0},"cardinal-open":{curve:Pvt,tension:"tension",value:0},"cardinal-closed":{curve:Nvt,tension:"tension",value:0},"catmull-rom":{curve:Ovt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Mvt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Lvt,tension:"alpha",value:.5},linear:{curve:oee},"linear-closed":{curve:$vt},monotone:{horizontal:Bvt,vertical:Fvt},natural:{curve:jvt},step:{curve:Uvt},"step-after":{curve:Vvt},"step-before":{curve:zvt}};function Cre(e,t,n){var r=Jt(i0e,e)&&i0e[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const UNt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},zNt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,VNt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,HNt=/^((\s+,?\s*)|(,\s*))/,qNt=/^[01]/;function YC(e){const t=[];return(e.match(zNt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=UNt[s],a=WNt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function WNt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?qNt:VNt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(HNt);u!==null&&(i+=u[0].length)}return r}const Hb=Math.PI/180,GNt=1e-14,lw=Math.PI/2,c0=Math.PI*2,zS=Math.sqrt(3)/2;var oH={},aH={},IOe=[].join;function YNt(e,t,n,r,i,s,o,a,u){const l=IOe.call(arguments);if(oH[l])return oH[l];const c=o*Hb,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,v=f/n,b=-f/r,w=d/r,E=g*a+v*u,T=b*a+w*u,C=g*e+v*t,I=b*e+w*t;let N=1/((C-E)*(C-E)+(I-T)*(I-T))-.25;N<0&&(N=0);let O=Math.sqrt(N);s==i&&(O=-O);const L=.5*(E+C)-O*(I-T),B=.5*(T+I)+O*(C-E),F=Math.atan2(T-B,E-L);let Q=Math.atan2(I-B,C-L)-F;Q<0&&s===1?Q+=c0:Q>0&&s===0&&(Q-=c0);const J=Math.ceil(Math.abs(Q/(lw+.001))),ne=[];for(let Z=0;Z<J;++Z){const ie=F+Z*Q/J,q=F+(Z+1)*Q/J;ne[Z]=[L,B,ie,q,n,r,f,d]}return oH[l]=ne}function KNt(e){const t=IOe.call(e);if(aH[t])return aH[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),v=Math.sin(s),b=.5*(s-i),w=Math.sin(b*.5),E=8/3*w*w/Math.sin(b),T=n+p-E*m,C=r+m+E*p,I=n+g,R=r+v,N=I+E*v,O=R-E*g;return aH[t]=[c*T+f*C,d*T+h*C,c*N+f*O,d*N+h*O,c*I+f*R,d*I+h*R]}const qd=["l",0,0,0,0,0,0,0];function XNt(e,t,n){const r=qd[0]=e[0];if(r==="a"||r==="A")qd[1]=t*e[1],qd[2]=n*e[2],qd[3]=e[3],qd[4]=e[4],qd[5]=e[5],qd[6]=t*e[6],qd[7]=n*e[7];else if(r==="h"||r==="H")qd[1]=t*e[1];else if(r==="v"||r==="V")qd[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)qd[i]=(i%2==1?t:n)*e[i];return qd}function oP(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,v=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var b=0,w=t.length;b<w;++b){switch(o=t[b],(i!==1||s!==1)&&(o=XNt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,v=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,v=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":s0e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":s0e(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=v,e.closePath();break}a=o}}function s0e(e,t,n,r){const i=YNt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=KNt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const o0e=.5773502691896257,a0e={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,c0)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=zS*n,i=r-n*o0e,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=zS*n,i=r-n*o0e;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=zS*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=zS*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=zS*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=zS*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function kOe(e){return Jt(a0e,e)?a0e[e]:QNt(e)}var uH={};function QNt(e){if(!Jt(uH,e)){const t=YC(e);uH[e]={draw:function(n,r){oP(n,t,0,0,Math.sqrt(r)/2)}}}return uH[e]}const Tv=.448084975506;function JNt(e){return e.x}function ZNt(e){return e.y}function ePt(e){return e.width}function tPt(e){return e.height}function Zg(e){return typeof e=="function"?e:()=>+e}function w6(e,t,n){return Math.max(t,Math.min(e,n))}function ROe(){var e=JNt,t=ZNt,n=ePt,r=tPt,i=Zg(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),v=+r.call(this,c),b=Math.min(g,v)/2,w=w6(+i.call(this,c),0,b),E=w6(+s.call(this,c),0,b),T=w6(+o.call(this,c),0,b),C=w6(+a.call(this,c),0,b);if(u||(u=h=JB()),w<=0&&E<=0&&T<=0&&C<=0)u.rect(p,m,g,v);else{var I=p+g,R=m+v;u.moveTo(p+w,m),u.lineTo(I-E,m),u.bezierCurveTo(I-Tv*E,m,I,m+Tv*E,I,m+E),u.lineTo(I,R-C),u.bezierCurveTo(I,R-Tv*C,I-Tv*C,R,I-C,R),u.lineTo(p+T,R),u.bezierCurveTo(p+Tv*T,R,p,R-Tv*T,p,R-T),u.lineTo(p,m+w),u.bezierCurveTo(p,m+Tv*w,p+Tv*w,m,p+w,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Zg(c),l):e},l.y=function(c){return arguments.length?(t=Zg(c),l):t},l.width=function(c){return arguments.length?(n=Zg(c),l):n},l.height=function(c){return arguments.length?(r=Zg(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Zg(c),s=f!=null?Zg(f):i,a=d!=null?Zg(d):i,o=h!=null?Zg(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function DOe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var v=Math.hypot(m,g),b=(m/=v)*u,w=(g/=v)*u,E=Math.atan2(g,m);i.moveTo(o-b,a-w),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,E-Math.PI,E),i.lineTo(o+b,a+w),i.arc(o,a,u,E,E+Math.PI)}else i.arc(f,d,p,0,c0);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=JB()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function F3(e,t){return e??t}const B3=e=>e.x||0,j3=e=>e.y||0,nPt=e=>e.width||0,rPt=e=>e.height||0,iPt=e=>(e.x||0)+(e.width||0),sPt=e=>(e.y||0)+(e.height||0),oPt=e=>e.startAngle||0,aPt=e=>e.endAngle||0,uPt=e=>e.padAngle||0,lPt=e=>e.innerRadius||0,cPt=e=>e.outerRadius||0,fPt=e=>e.cornerRadius||0,dPt=e=>F3(e.cornerRadiusTopLeft,e.cornerRadius)||0,hPt=e=>F3(e.cornerRadiusTopRight,e.cornerRadius)||0,pPt=e=>F3(e.cornerRadiusBottomRight,e.cornerRadius)||0,mPt=e=>F3(e.cornerRadiusBottomLeft,e.cornerRadius)||0,gPt=e=>F3(e.size,64),yPt=e=>e.size||1,uj=e=>e.defined!==!1,vPt=e=>kOe(e.shape||"circle"),bPt=OG().startAngle(oPt).endAngle(aPt).padAngle(uPt).innerRadius(lPt).outerRadius(cPt).cornerRadius(fPt),xPt=nIe().x(B3).y1(j3).y0(sPt).defined(uj),_Pt=nIe().y(j3).x1(B3).x0(iPt).defined(uj),wPt=tIe().x(B3).y(j3).defined(uj),EPt=ROe().x(B3).y(j3).width(nPt).height(rPt).cornerRadius(dPt,hPt,pPt,mPt),TPt=Cvt().type(vPt).size(gPt),SPt=DOe().x(B3).y(j3).defined(uj).size(yPt);function Are(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function CPt(e,t){return bPt.context(e)(t)}function APt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?_Pt:xPt).curve(Cre(r,n.orient,n.tension)).context(e)(t)}function IPt(e,t){const n=t[0],r=n.interpolate||"linear";return wPt.curve(Cre(r,n.orient,n.tension)).context(e)(t)}function bI(e,t,n,r){return EPt.context(e)(t,n,r)}function kPt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function RPt(e,t){return TPt.context(e)(t)}function DPt(e,t){return SPt.context(e)(t)}var NOe=1;function POe(){NOe=1}function Ire(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+NOe++),o=i.clipping[s]||(i.clipping[s]={id:s});return cr(r)?o.path=r(null):Are(n)?o.path=bI(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ko(e){this.clear(),e&&this.union(e)}Ko.prototype={clone(){return new Ko(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function lj(e){this.mark=e,this.bounds=this.bounds||new Ko}function cj(e){lj.call(this,e),this.items=this.items||[]}zt(cj,lj);class OOe{constructor(t){this._pending=0,this._loader=t||W9()}pending(){return this._pending}sanitizeURL(t){const n=this;return u0e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(yR(n),r)).catch(()=>(yR(n),null))}loadImage(t){const n=this,r=fNt();return u0e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Jt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>yR(n),o.onerror=()=>yR(n),o.src=s,o}).catch(i=>(yR(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function u0e(e){e._pending+=1}function yR(e){e._pending-=1}function N1(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?NPt(t,r):0))}return e}function NPt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const PPt=c0-1e-8;let fj,o$,a$,kw,WY,u$,GY,YY;const Jv=(e,t)=>fj.add(e,t),l$=(e,t)=>Jv(o$=e,a$=t),l0e=e=>Jv(e,fj.y1),c0e=e=>Jv(fj.x1,e),cw=(e,t)=>WY*e+GY*t,fw=(e,t)=>u$*e+YY*t,lH=(e,t)=>Jv(cw(e,t),fw(e,t)),cH=(e,t)=>l$(cw(e,t),fw(e,t));function U3(e,t){return fj=e,t?(kw=t*Hb,WY=YY=Math.cos(kw),u$=Math.sin(kw),GY=-u$):(WY=YY=1,kw=u$=GY=0),OPt}const OPt={beginPath(){},closePath(){},moveTo:cH,lineTo:cH,rect(e,t,n,r){kw?(lH(e+n,t),lH(e+n,t+r),lH(e,t+r),cH(e,t)):(Jv(e+n,t+r),l$(e,t))},quadraticCurveTo(e,t,n,r){const i=cw(e,t),s=fw(e,t),o=cw(n,r),a=fw(n,r);f0e(o$,i,o,l0e),f0e(a$,s,a,c0e),l$(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=cw(e,t),a=fw(e,t),u=cw(n,r),l=fw(n,r),c=cw(i,s),f=fw(i,s);d0e(o$,o,u,c,l0e),d0e(a$,a,l,f,c0e),l$(c,f)},arc(e,t,n,r,i,s){if(r+=kw,i+=kw,o$=n*Math.cos(i)+e,a$=n*Math.sin(i)+t,Math.abs(i-r)>PPt)Jv(e-n,t-n),Jv(e+n,t+n);else{const o=l=>Jv(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%c0,r<0&&(r+=c0),i=i%c0,i<0&&(i+=c0),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=c0,a=r-r%lw,u=0;u<4&&a>i;++u,a-=lw)o(a);else for(a=r-r%lw+lw,u=0;u<4&&a<i;++u,a=a+lw)o(a)}}};function f0e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function d0e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>GNt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(h0e(u,e,t,n,r)),0<l&&l<1&&i(h0e(l,e,t,n,r))}function h0e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var pb=(pb=hb(1,1))?pb.getContext("2d"):null;const KY=new Ko;function kre(e){return function(t,n){if(!pb)return!0;e(pb,t),KY.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=KY;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(pb.isPointInPath(u,a))return!0;return!1}}function Rre(e,t){return t.contains(e.x||0,e.y||0)}function MOe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(KY.set(n,r,n+i,r+s))}function LOe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return A2(t,n,r,i,s)}function A2(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function KC(e,t){e.globalCompositeOperation=t.blend||"source-over"}function op(e,t){return e??t}function p0e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function MPt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+op(t.x1,.5)*r,n.y1+op(t.y1,.5)*i,Math.max(r,i)*op(t.r1,0),n.x1+op(t.x2,.5)*r,n.y1+op(t.y2,.5)*i,Math.max(r,i)*op(t.r2,.5));else{const o=op(t.x1,0),a=op(t.y1,0),u=op(t.x2,1),l=op(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=hb(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=p0e(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return p0e(s,t.stops)}function $Oe(e,t,n){return Sre(n)?MPt(e,n,t.bounds):n}function j5(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=$Oe(e,t,t.fill),!0):!1}var LPt=[];function XC(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=$Oe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||LPt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function $Pt(e,t){return e.zindex-t.zindex||e.index-t.index}function Dre(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort($Pt)}function Wp(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Dre(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function U5(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Dre(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Nre(e){return function(t,n,r){Wp(n,i=>{(!r||r.intersects(i.bounds))&&FOe(e,t,i,i)})}}function FPt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&FOe(e,t,n.items[0],n.items)}}function FOe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(KC(t,n),n.fill&&j5(t,n,i)&&t.fill(),n.stroke&&XC(t,n,i)&&t.stroke()))}function dj(e){return e=e||dh,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,U5(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function z3(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Pre(e){return dj(z3(e))}function Bw(e,t){return"translate("+e+","+t+")"}function Ore(e){return"rotate("+e+")"}function BPt(e,t){return"scale("+e+","+t+")"}function BOe(e){return Bw(e.x||0,e.y||0)}function jPt(e){return Bw(e.x||0,e.y||0)+(e.angle?" "+Ore(e.angle):"")}function UPt(e){return Bw(e.x||0,e.y||0)+(e.angle?" "+Ore(e.angle):"")+(e.scaleX||e.scaleY?" "+BPt(e.scaleX||1,e.scaleY||1):"")}function Mre(e,t,n){function r(o,a){o("transform",jPt(a)),o("d",t(null,a))}function i(o,a){return t(U3(o,a.angle),a),N1(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Hb),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Nre(s),pick:Pre(s),isect:n||kre(s)}}var zPt=Mre("arc",CPt);function VPt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function HPt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function qPt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Lre(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(U3(u),c),N1(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=z3(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:FPt(s),pick:a,isect:Rre,tip:n}}var WPt=Lre("area",APt,VPt);function GPt(e,t){var n=t.clip;e.save(),cr(n)?(e.beginPath(),n(e),e.clip()):jOe(e,t.group)}function jOe(e,t){e.beginPath(),Are(t)?bI(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function UOe(e){const t=op(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function YPt(e,t){e("transform",BOe(t))}function zOe(e,t){const n=UOe(t);e("d",bI(null,t,n,n))}function KPt(e,t){e("class","background"),e("aria-hidden",!0),zOe(e,t)}function XPt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?zOe(e,t):e("d","")}function QPt(e,t,n){const r=t.clip?Ire(n,t,t):null;e("clip-path",r)}function JPt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),N1(e,t),e.translate(t.x||0,t.y||0)}function aP(e,t,n,r){const i=UOe(t);e.beginPath(),bI(e,t,(n||0)+i,(r||0)+i)}const ZPt=z3(aP),e3t=z3(aP,!1),t3t=z3(aP,!0);function n3t(e,t,n,r){Wp(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(aP(e,i,s,o),KC(e,i),i.fill&&j5(e,i,u)&&e.fill(),i.stroke&&!a&&XC(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&jOe(e,i),n&&n.translate(-s,-o),Wp(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(aP(e,i,s,o),KC(e,i),XC(e,i,u)&&e.stroke())})}function r3t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return U5(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Are(u)&&!t3t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,v=t.interactive!==!1;return v&&g&&u.stroke&&e3t(e,u,o,a)?(e.restore(),u):(l=U5(u,b=>i3t(b,c,f)?this.pick(b,n,r,c,f):null),!l&&v&&(u.fill||!g&&u.stroke)&&ZPt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function i3t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var s3t={type:"group",tag:"g",nested:!1,attr:YPt,bound:JPt,draw:n3t,pick:r3t,isect:MOe,content:QPt,background:KPt,foreground:XPt},uP={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function $re(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Fre(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Bre(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function hj(e,t){return e==="center"?t/2:e==="right"?t:0}function pj(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function o3t(e,t,n){const r=$re(t,n),i=Fre(t,r),s=Bre(t,r),o=(t.x||0)-hj(t.align,i),a=(t.y||0)-pj(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,uP["xmlns:xlink"],"xlink:href"),e("transform",Bw(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function a3t(e,t){const n=t.image,r=Fre(t,n),i=Bre(t,n),s=(t.x||0)-hj(t.align,r),o=(t.y||0)-pj(t.baseline,i);return e.set(s,o,s+r,o+i)}function u3t(e,t,n){Wp(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=$re(r,this);let s=Fre(r,i),o=Bre(r,i);if(s===0||o===0)return;let a=(r.x||0)-hj(r.align,s),u=(r.y||0)-pj(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(KC(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var l3t={type:"image",tag:"image",nested:!1,attr:o3t,bound:a3t,draw:u3t,pick:dj(),isect:dh,get:$re,xOffset:hj,yOffset:pj},c3t=Lre("line",IPt,HPt);function f3t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",UPt(t)),e("d",t.path)}function c$(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Hb,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=YC(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),oP(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):oP(e,u,r,i,s,o)}function d3t(e,t){return c$(U3(e,t.angle),t)?e.set(0,0,0,0):N1(e,t,!0)}var h3t={type:"path",tag:"path",nested:!1,attr:f3t,bound:d3t,draw:Nre(c$),pick:Pre(c$),isect:kre(c$)};function p3t(e,t){e("d",bI(null,t))}function m3t(e,t){var n,r;return N1(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function m0e(e,t){e.beginPath(),bI(e,t)}var g3t={type:"rect",tag:"path",nested:!1,attr:p3t,bound:m3t,draw:Nre(m0e),pick:Pre(m0e),isect:MOe};function y3t(e,t){e("transform",BOe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function v3t(e,t){var n,r;return N1(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function VOe(e,t,n){var r,i,s,o;return t.stroke&&XC(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function b3t(e,t,n){Wp(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&VOe(e,r,i)&&(KC(e,r),e.stroke())}})}function x3t(e,t,n,r){return e.isPointInStroke?VOe(e,t,1)&&e.isPointInStroke(n,r):!1}var _3t={type:"rule",tag:"line",nested:!1,attr:y3t,bound:v3t,draw:b3t,pick:dj(x3t),isect:LOe},w3t=Mre("shape",kPt),E3t=Mre("symbol",RPt,Rre);const g0e=APe();var id={height:fg,measureWidth:jre,estimateWidth:z5,width:z5,canvas:HOe};HOe(!0);function HOe(e){id.width=e&&pb?jre:z5}function z5(e,t){return qOe(Wb(e,t),fg(e))}function qOe(e,t){return~~(.8*e.length*t)}function jre(e,t){return fg(e)<=0||!(t=Wb(e,t))?0:WOe(t,mj(e))}function WOe(e,t){const n=`(${t}) ${e}`;let r=g0e.get(n);return r===void 0&&(pb.font=t,r=pb.measureText(e).width,g0e.set(n,r)),r}function fg(e){return e.fontSize!=null?+e.fontSize||0:11}function qb(e){return e.lineHeight!=null?e.lineHeight:fg(e)+2}function T3t(e){return ft(e)?e.length>1?e:e[0]:e}function V3(e){return T3t(e.lineBreak&&e.text&&!ft(e.text)?e.text.split(e.lineBreak):e.text)}function Ure(e){const t=V3(e);return(ft(t)?t.length-1:0)*qb(e)}function Wb(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?C3t(e,n):n}function S3t(e){if(id.width===jre){const t=mj(e);return n=>WOe(n,t)}else if(id.width===z5){const t=fg(e);return n=>qOe(n,t)}else return t=>id.width(e,t)}function C3t(e,t){var n=+e.limit,r=S3t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function H3(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function mj(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+fg(e)+"px "+H3(e,t)}function zre(e){var t=e.baseline,n=fg(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*qb(e):t==="line-bottom"?.29*n-.5*qb(e):0)}const A3t={left:"start",center:"middle",right:"end"},QD=new Ko;function gj(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-lw,t+=r*Math.cos(i),n+=r*Math.sin(i)),QD.x1=t,QD.y1=n,QD}function I3t(e,t){var n=t.dx||0,r=(t.dy||0)+zre(t),i=gj(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",A3t[t.align]||"start"),a?(u=Bw(s,o)+" "+Ore(a),(n||r)&&(u+=" "+Bw(n,r))):u=Bw(s+n,o+r),e("transform",u)}function Vre(e,t,n){var r=id.height(t),i=t.align,s=gj(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+zre(t)-Math.round(.8*r),c=V3(t),f;if(ft(c)?(r+=qb(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,id.width(t,h)),0)):f=id.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Hb,o,a);else if(n===2)return e.rotatedPoints(t.angle*Hb,o,a);return e}function k3t(e,t,n){Wp(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=mj(r),e.textAlign=r.align||"left",s=gj(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Hb),o=a=0),o+=r.dx||0,a+=(r.dy||0)+zre(r),c=V3(r),KC(e,r),ft(c))for(l=qb(r),u=0;u<c.length;++u)f=Wb(r,c[u]),r.fill&&j5(e,r,i)&&e.fillText(f,o,a),r.stroke&&XC(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Wb(r,c),r.fill&&j5(e,r,i)&&e.fillText(f,o,a),r.stroke&&XC(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function R3t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=gj(t),a=o.x1,u=o.y1,l=Vre(QD,t,1),c=-t.angle*Hb,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function D3t(e,t){const n=Vre(QD,e,2);return A2(t,n[0],n[1],n[2],n[3])||A2(t,n[0],n[1],n[4],n[5])||A2(t,n[4],n[5],n[6],n[7])||A2(t,n[2],n[3],n[6],n[7])}var N3t={type:"text",tag:"text",nested:!1,attr:I3t,bound:Vre,draw:k3t,pick:dj(R3t),isect:D3t},P3t=Lre("trail",DPt,qPt),vd={arc:zPt,area:WPt,group:s3t,image:l3t,line:c3t,path:h3t,rect:g3t,rule:_3t,shape:w3t,symbol:E3t,text:N3t,trail:P3t};function XY(e,t,n){var r=vd[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ko),e,n)}var y0e={mark:null};function GOe(e,t,n){var r=vd[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(y0e.mark=e,l=y0e),c=XY(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ko,o)for(a=0,u=s.length;a<u;++a)t.union(XY(s[a],i,n));return e.bounds=t}const O3t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function YOe(e,t){return JSON.stringify(e,O3t,t)}function KOe(e){const t=typeof e=="string"?JSON.parse(e):e;return XOe(t)}function XOe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&XOe(n[i]);return t&&GOe(e),e}class QOe{constructor(t){arguments.length?this.root=KOe(t):(this.root=v0e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new cj(this.root)])}toJSON(t){return YOe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=v0e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function v0e(e,t){const n={bounds:new Ko,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Zv(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Hre(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function ua(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Zv(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Zd(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function JOe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function yj(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function M3t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=vd[i.marktype]).tip){for(o=yj(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let qre=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||W9(),this._tooltip=n||L3t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Zv(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=M3t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function L3t(e,t,n,r){e.element().setAttribute("title",r||"")}class q3{constructor(t){this._el=null,this._bgcolor=null,this._loader=new OOe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const $3t="keydown",F3t="keypress",B3t="keyup",ZOe="dragenter",f$="dragleave",e4e="dragover",QY="pointerdown",j3t="pointerup",V5="pointermove",d$="pointerout",t4e="pointerover",JY="mousedown",U3t="mouseup",n4e="mousemove",H5="mouseout",r4e="mouseover",q5="click",z3t="dblclick",V3t="wheel",i4e="mousewheel",W5="touchstart",G5="touchmove",Y5="touchend",H3t=[$3t,F3t,B3t,ZOe,f$,e4e,QY,j3t,V5,d$,t4e,JY,U3t,n4e,H5,r4e,q5,z3t,V3t,i4e,W5,G5,Y5],ZY=V5,JD=H5,eK=q5;class W3 extends qre{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=H3t,this.pointermove=x0e([V5,n4e],[t4e,r4e],[d$,H5]),this.dragover=x0e([e4e],[ZOe],[f$]),this.pointerout=_0e([d$,H5]),this.dragleave=_0e([f$])}initialize(t,n,r){return this._canvas=t&&Hre(t,"canvas"),[q5,JY,QY,V5,d$,f$].forEach(i=>b0e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(i4e,t)}pointerdown(t){this._down=this._active,this.fire(QY,t)}mousedown(t){this._down=this._active,this.fire(JY,t)}click(t){this._down===this._active&&(this.fire(q5,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(W5,t,!0)}touchmove(t){this.fire(G5,t,!0)}touchend(t){this.fire(Y5,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===eK&&i&&i.href?this.handleHref(n,i,i.href):(t===ZY||t===JD)&&this.handleTooltip(n,i,t!==JD),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(b0e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=yj(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return vd[t.marktype].pick.call(this,o,t,n,r,i,s)}}const q3t=e=>e===W5||e===G5||e===Y5?[W5,G5,Y5]:[e];function b0e(e,t){q3t(t).forEach(n=>W3t(e,n))}function W3t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function gD(e,t,n){t.forEach(r=>e.fire(r,n))}function x0e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?gD(this,e,r):((!i||!i.exit)&&gD(this,n,r),this._active=s,gD(this,t,r),gD(this,e,r))}}function _0e(e){return function(t){gD(this,e,t),this._active=null}}function G3t(){return typeof window<"u"&&window.devicePixelRatio||1}function Y3t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?G3t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class K5 extends q3{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ko,this._tempb=new Ko}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:hb(1,1,this._options.type),t&&this._canvas&&(Zd(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Y3t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||ut("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=K3t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):X3t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=vd[n.marktype];n.clip&&GPt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const K3t=(e,t,n)=>new Ko().set(0,0,t,n).translate(-e[0],-e[1]);function X3t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class s4e extends qre{constructor(t,n){super(t,n);const r=this;r._hrefHandler=fH(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=fH(r,(i,s)=>{r.handleTooltip(i,s,i.type!==JD)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(eK,this._hrefHandler),i.removeEventListener(ZY,this._tooltipHandler),i.removeEventListener(JD,this._tooltipHandler)),this._svg=i=t&&Hre(t,"svg"),i&&(i.addEventListener(eK,this._hrefHandler),i.addEventListener(ZY,this._tooltipHandler),i.addEventListener(JD,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:fH(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const fH=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},o4e="aria-hidden",Wre="aria-label",Gre="role",Yre="aria-roledescription",a4e="graphics-object",Kre="graphics-symbol",u4e=(e,t,n)=>({[Gre]:e,[Yre]:t,[Wre]:n||void 0}),Q3t=Hp(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),w0e={axis:{desc:"axis",caption:eOt},legend:{desc:"legend",caption:tOt},"title-text":{desc:"title",caption:e=>`Title text '${T0e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${T0e(e)}'`}},E0e={ariaRole:Gre,ariaRoleDescription:Yre,description:Wre};function l4e(e,t){const n=t.aria===!1;if(e(o4e,n||void 0),n||t.description==null)for(const r in E0e)e(E0e[r],void 0);else{const r=t.mark.marktype;e(Wre,t.description),e(Gre,t.ariaRole||(r==="group"?a4e:Kre)),e(Yre,t.ariaRoleDescription||`${r} mark`)}}function c4e(e){return e.aria===!1?{[o4e]:!0}:Q3t[e.role]?null:w0e[e.role]?Z3t(e,w0e[e.role]):J3t(e)}function J3t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return u4e(n?a4e:Kre,`${t} mark container`,e.description)}function Z3t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return u4e(t.role||Kre,t.desc,n.description||r(n))}catch{return null}}function T0e(e){return Wt(e.text).join(" ")}function eOt(e){const t=e.datum,n=e.orient,r=t.title?f4e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${GC(a)?"discrete":a} scale with ${TOe(o,s,e)}`}function tOt(e){const t=e.datum,n=t.title?f4e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return rOt(r)+(n?` titled '${n}'`:"")+` for ${nOt(s)} with ${TOe(u,a,e)}`}function f4e(e){try{return Wt(Kr(e.items).items[0].text).join(" ")}catch{return null}}function nOt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Kr(e)}function rOt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const d4e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),iOt=e=>d4e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Xre(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${iOt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=d4e(u),a),toString:()=>e};return a}const h4e=e=>p4e(Xre(),e)+"";function p4e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):p4e(e,r)}return e.close()}const X5={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Q5={blend:"mix-blend-mode"},m4e={fill:"none","stroke-miterlimit":10},vR=0,S0e="http://www.w3.org/2000/xmlns/",oa=uP.xmlns;class Qre extends q3{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=ua(t,0,"svg",oa),this._svg.setAttributeNS(S0e,"xmlns",oa),this._svg.setAttributeNS(S0e,"xmlns:xlink",uP["xmlns:xlink"]),this._svg.setAttribute("version",uP.version),this._svg.setAttribute("class","marks"),Zd(t,1),this._root=ua(this._svg,vR,"g",oa),eb(this._root,m4e),Zd(this._svg,vR+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(eb(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=ua(t,vR,"rect",oa),eb(r,{width:this._width,height:this._height,fill:n}));const i=h4e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Zd(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=vd[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,C0e(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,C0e(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=vd[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=A0e(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Zd(c,0),n._svg;c.setAttribute("class",JOe(n));const f=c4e(n);for(const m in f)Ll(c,m,f[m]);l||Ll(c,"pointer-events",u),Ll(c,"clip-path",n.clip?Ire(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),v=A0e(m,c,d,a.tag,s);g&&(this._update(a,v,m),l&&aOt(this,v,m,i)),d=v,++h};return a.nested?n.items.length&&p(n.items[0]):Wp(n,p),Zd(c,h),c}_update(t,n,r){Iy=n,Qu=n.__values__,l4e(ZD,r),t.attr(ZD,r,this);const i=lOt[t.type];i&&i.call(this,t,n,r),Iy&&this.style(Iy,r)}style(t,n){if(n!=null){for(const r in X5){let i=r==="font"?H3(n):n[r];if(i===Qu[r])continue;const s=X5[r];i==null?t.removeAttribute(s):(Sre(i)&&(i=COe(i,this._defs.gradient,g4e())),t.setAttribute(s,i+"")),Qu[r]=i}for(const r in Q5)h$(t,Q5[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=ua(t,vR+1,"defs",oa)),i=sOt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=ua(t,vR+1,"defs",oa)),i=oOt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Zd(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function C0e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function sOt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=ua(e,n++,"pattern",oa);eb(o,{id:B5+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=ua(o,0,"rect",oa),eb(o,{width:1,height:1,fill:`url(${g4e()}#${t.id})`}),e=ua(e,n++,"radialGradient",oa),eb(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=ua(e,n++,"linearGradient",oa),eb(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=ua(e,r,"stop",oa),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Zd(e,r),n}function oOt(e,t,n){let r;return e=ua(e,n,"clipPath",oa),e.setAttribute("id",t.id),t.path?(r=ua(e,0,"path",oa),r.setAttribute("d",t.path)):(r=ua(e,0,"rect",oa),eb(r,{x:0,y:0,width:t.width,height:t.height})),Zd(e,1),n+1}function aOt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Wp(n,o=>{i=e.mark(t,o,i,r),++s}),Zd(t,1+s)}function A0e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Zv(o,r,oa),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Zv(o,"path",oa);s.appendChild(a),a.__data__=e;const u=Zv(o,"g",oa);s.appendChild(u),u.__data__=e;const l=Zv(o,"path",oa);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||uOt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function uOt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Iy=null,Qu=null;const lOt={group(e,t,n){const r=Iy=t.childNodes[2];Qu=r.__values__,e.foreground(ZD,n,this),Qu=t.__values__,Iy=t.childNodes[1],e.content(ZD,n,this);const i=Iy=t.childNodes[0];e.background(ZD,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Qu.events&&(Ll(r,"pointer-events",s),Ll(i,"pointer-events",s),Qu.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ll(r,"display",null),this.style(i,n),Ll(i,"stroke",null),o&&(n.fill=null),Qu=r.__values__,this.style(r,n),o&&(n.fill=o),Iy=null}else Ll(r,"display","none")},image(e,t,n){n.smooth===!1?(h$(t,"image-rendering","optimizeSpeed"),h$(t,"image-rendering","pixelated")):h$(t,"image-rendering",null)},text(e,t,n){const r=V3(n);let i,s,o,a;ft(r)?(s=r.map(u=>Wb(n,u)),i=s.join(`
`),i!==Qu.text&&(Zd(t,0),o=t.ownerDocument,a=qb(n),s.forEach((u,l)=>{const c=Zv(o,"tspan",oa);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Qu.text=i)):(s=Wb(n,r),s!==Qu.text&&(t.textContent=s,Qu.text=s)),Ll(t,"font-family",H3(n)),Ll(t,"font-size",fg(n)+"px"),Ll(t,"font-style",n.fontStyle),Ll(t,"font-variant",n.fontVariant),Ll(t,"font-weight",n.fontWeight)}};function ZD(e,t,n){t!==Qu[e]&&(n?cOt(Iy,e,t,n):Ll(Iy,e,t),Qu[e]=t)}function h$(e,t,n){n!==Qu[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Qu[t]=n)}function eb(e,t){for(const n in t)Ll(e,n,t[n])}function Ll(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function cOt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function g4e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class y4e extends q3{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Xre();n.open("svg",lr({},uP,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",m4e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=vd[n.marktype],i=r.tag,s=[l4e,r.attr];t.open("g",{class:JOe(n),"clip-path":n.clip?Ire(this,n,n.group):null},c4e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=V3(a);if(ft(l)){const c={x:0,dy:qb(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Wb(a,l[f])).close()}else t.text(Wb(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Wp(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Wp(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&fOt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:B5+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function fOt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=H3(t),e["font-size"]=fg(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in X5){let a=t[o];const u=X5[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Sre(a)&&(a=COe(a,i.gradient,"")),e[u]=a)}for(const o in Q5){const a=t[o];a!=null&&(s=s||[],s.push(`${Q5[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const dp={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function dOt(e){dp.svgMarkTypes=e.svgMarkTypes??["text"],dp.svgOnTop=e.svgOnTop??!0,dp.debug=e.debug??!1}class tK extends q3{constructor(t){super(t),this._svgRenderer=new Qre(t),this._canvasRenderer=new K5(t)}initialize(t,n,r,i,s){this._root_el=ua(t,0,"div");const o=ua(this._root_el,0,"div"),a=ua(this._root_el,1,"div");return this._root_el.style.position="relative",dp.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=dp.svgOnTop?a:o,this._canvasEl=dp.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return dp.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!dp.svgMarkTypes.includes(s));this._svgRenderer.render(t,dp.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return dp.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class v4e extends W3{constructor(t,n){super(t,n)}initialize(t,n,r){const i=ua(ua(t,0,"div"),dp.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const b4e="canvas",x4e="hybrid",_4e="png",w4e="svg",E4e="none",tb={Canvas:b4e,PNG:_4e,SVG:w4e,Hybrid:x4e,None:E4e},uE={};uE[b4e]=uE[_4e]={renderer:K5,headless:K5,handler:W3};uE[w4e]={renderer:Qre,headless:y4e,handler:s4e};uE[x4e]={renderer:tK,headless:tK,handler:v4e};uE[E4e]={};function vj(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(uE[e]=t,this):uE[e]}function T4e(e,t,n){const r=[],i=new Ko().union(t),s=e.marktype;return s?S4e(e,i,n,r):s==="group"?C4e(e,i,n,r):ut("Intersect scene must be mark node or group item.")}function S4e(e,t,n,r){if(hOt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)C4e(i[a],t,n,r);else for(const u=vd[s].isect;a<o;++a){const l=i[a];A4e(l,t,u)&&r.push(l)}}return r}function hOt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function C4e(e,t,n,r){n&&n(e.mark)&&A4e(e,t,vd.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)S4e(i[u],t,n,r);t.translate(o,a)}return r}function A4e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const dH=new Ko;function I4e(e){const t=e.clip;if(cr(t))t(U3(dH.clear()));else if(t)dH.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(dH)}const pOt=1e-9;function Jre(e,t,n){return e===t?!0:n==="path"?k4e(e,t):e instanceof Date&&t instanceof Date?+e==+t:bi(e)&&bi(t)?Math.abs(e-t)<=pOt:!e||!t||!Ht(e)&&!Ht(t)?e==t:mOt(e,t)}function k4e(e,t){return Jre(YC(e),YC(t))}function mOt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Jre(e[i],t[i],i))return!1;return typeof e==typeof t}function gOt(){POe(),jNt()}const QC="top",wp="left",Ap="right",Gb="bottom",yOt="top-left",vOt="top-right",bOt="bottom-left",xOt="bottom-right",Zre="start",nK="middle",Fl="end",_Ot="x",wOt="y",bj="group",eie="axis",tie="title",EOt="frame",TOt="scope",nie="legend",R4e="row-header",D4e="row-footer",N4e="row-title",P4e="column-header",O4e="column-footer",M4e="column-title",SOt="padding",COt="symbol",L4e="fit",$4e="fit-x",F4e="fit-y",AOt="pad",rie="none",E6="all",rK="each",iie="flush",nb="column",rb="row";function B4e(e){nt.call(this,null,e)}zt(B4e,nt,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=vd[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=T6(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===bj||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(T6(l,o))),r.role){case eie:case nie:case tie:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(T6(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(T6(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return I4e(r),t.modifies("bounds")}});function T6(e,t,n){return t(e.bounds.clear(),e,n)}const I0e=":vega_identifier:";function sie(e){nt.call(this,0,e)}sie.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};zt(sie,nt,{transform(e,t){const n=IOt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function IOt(e){return e._signals[I0e]||(e._signals[I0e]=e.add(0))}function j4e(e){nt.call(this,null,e)}zt(j4e,nt,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,kOt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===bj?cj:lj;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function kOt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function U4e(e){nt.call(this,null,e)}const k0e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!z4e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},z4e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),R0e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(z4e(i,s=e[n].bounds,t))return!0},ROt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},DOt=(e,t,n)=>{var r=e.range(),i=new Ko;return t===QC||t===Gb?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},D0e=e=>(e.forEach(t=>t.opacity=1),e),N0e=(e,t)=>e.reflow(t.modified()).modifies("opacity");zt(U4e,nt,{transform(e,t){const n=k0e[e.method]||k0e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(D0e(i),t=N0e(t,e)),t;if(i=i.filter(ROt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=D0e(i),t=N0e(t,e),s.length>=3&&R0e(s,r)){do s=n(s,r);while(s.length>=3&&R0e(s,r));s.length<3&&!Kr(i).opacity&&(s.length>1&&(Kr(s).opacity=0),Kr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=DOt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function V4e(e){nt.call(this,null,e)}zt(V4e,nt,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Ku=new Ko;function I2(e,t,n){return e[t]===n?0:(e[t]=n,1)}function NOt(e){var t=e.items[0].orient;return t===wp||t===Ap}function POt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function OOt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=POt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,v=p&&Ure(p),b=0,w=0,E,T;switch(Ku.clear().union(g),g.clear(),(E=u[0])>-1&&g.union(i.items[E].bounds),(E=u[1])>-1&&g.union(i.items[E].bounds),a){case QC:b=f||0,w=-c,T=Math.max(d,Math.min(h,-g.y1)),g.add(0,-T).add(l,0),p&&S6(e,p,T,m,v,0,-1,g);break;case wp:b=-c,w=f||0,T=Math.max(d,Math.min(h,-g.x1)),g.add(-T,0).add(0,l),p&&S6(e,p,T,m,v,1,-1,g);break;case Ap:b=n+c,w=f||0,T=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(T,l),p&&S6(e,p,T,m,v,1,1,g);break;case Gb:b=f||0,w=r+c,T=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,T),p&&S6(e,p,T,m,0,0,1,g);break;default:b=i.x,w=i.y}return N1(g.translate(b,w),i),I2(i,"x",b+o)|I2(i,"y",w+o)&&(i.bounds=Ku,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function S6(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const P0e=(e,t)=>Math.floor(Math.min(e,t)),O0e=(e,t)=>Math.ceil(Math.max(e,t));function MOt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===bj)switch(i.role){case eie:case nie:case tie:break;case R4e:o.rowheaders.push(...s);break;case D4e:o.rowfooters.push(...s);break;case P4e:o.colheaders.push(...s);break;case O4e:o.colfooters.push(...s);break;case N4e:o.rowtitle=s[0];break;case M4e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function LOt(e){return new Ko().set(0,0,e.width||0,e.height||0)}function $Ot(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Ns(e,t,n){const r=Ht(e)?e[t]:e;return r??(n!==void 0?n:0)}function M0e(e){return e<0?Math.ceil(-e):0}function H4e(e,t,n){var r=!n.nodirty,i=n.bounds===iie?LOt:$Ot,s=Ku.set(0,0,0,0),o=Ns(n.align,nb),a=Ns(n.align,rb),u=Ns(n.padding,nb),l=Ns(n.padding,rb),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),v=Array(f),b=0,w=Array(d),E=Array(d),T=Array(d),C,I,R,N,O,L,B,F,H,Q,J;for(I=0;I<c;++I)p[I]=0;for(I=0;I<f;++I)v[I]=0;for(I=0;I<d;++I)L=t[I],O=T[I]=i(L),L.x=L.x||0,w[I]=0,L.y=L.y||0,E[I]=0,R=I%c,N=~~(I/c),m=Math.max(m,B=Math.ceil(O.x2)),b=Math.max(b,F=Math.ceil(O.y2)),p[R]=Math.max(p[R],B),v[N]=Math.max(v[N],F),h[I]=u+M0e(O.x1),g[I]=l+M0e(O.y1),r&&e.dirty(t[I]);for(I=0;I<d;++I)I%c===0&&(h[I]=0),I<c&&(g[I]=0);if(o===rK)for(R=1;R<c;++R){for(J=0,I=R;I<d;I+=c)J<h[I]&&(J=h[I]);for(I=R;I<d;I+=c)h[I]=J+p[R-1]}else if(o===E6){for(J=0,I=0;I<d;++I)I%c&&J<h[I]&&(J=h[I]);for(I=0;I<d;++I)I%c&&(h[I]=J+m)}else for(o=!1,R=1;R<c;++R)for(I=R;I<d;I+=c)h[I]+=p[R-1];if(a===rK)for(N=1;N<f;++N){for(J=0,I=N*c,C=I+c;I<C;++I)J<g[I]&&(J=g[I]);for(I=N*c;I<C;++I)g[I]=J+v[N-1]}else if(a===E6){for(J=0,I=c;I<d;++I)J<g[I]&&(J=g[I]);for(I=c;I<d;++I)g[I]=J+b}else for(a=!1,N=1;N<f;++N)for(I=N*c,C=I+c;I<C;++I)g[I]+=v[N-1];for(H=0,I=0;I<d;++I)H=h[I]+(I%c?H:0),w[I]+=H-t[I].x;for(R=0;R<c;++R)for(Q=0,I=R;I<d;I+=c)Q+=g[I],E[I]+=Q-t[I].y;if(o&&Ns(n.center,nb)&&f>1)for(I=0;I<d;++I)O=o===E6?m:p[I%c],H=O-T[I].x2-t[I].x-w[I],H>0&&(w[I]+=H/2);if(a&&Ns(n.center,rb)&&c!==1)for(I=0;I<d;++I)O=a===E6?b:v[~~(I/c)],Q=O-T[I].y2-t[I].y-E[I],Q>0&&(E[I]+=Q/2);for(I=0;I<d;++I)s.union(T[I].translate(w[I],E[I]));switch(H=Ns(n.anchor,_Ot),Q=Ns(n.anchor,wOt),Ns(n.anchor,nb)){case Fl:H-=s.width();break;case nK:H-=s.width()/2}switch(Ns(n.anchor,rb)){case Fl:Q-=s.height();break;case nK:Q-=s.height()/2}for(H=Math.round(H),Q=Math.round(Q),s.clear(),I=0;I<d;++I)t[I].mark.bounds.clear();for(I=0;I<d;++I)L=t[I],L.x+=w[I]+=H,L.y+=E[I]+=Q,s.union(L.mark.bounds.union(L.bounds.translate(w[I],E[I]))),r&&e.dirty(L);return s}function FOt(e,t,n){var r=MOt(t),i=r.marks,s=n.bounds===iie?BOt:jOt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const v=H4e(e,i,n);v.empty()&&v.set(0,0,0,0),r.rowheaders&&(m=Ns(n.headerBand,rb,null),c=C6(e,r.rowheaders,i,a,u,-Ns(o,"rowHeader"),P0e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Ns(n.headerBand,nb,null),f=C6(e,r.colheaders,i,a,a,-Ns(o,"columnHeader"),P0e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Ns(n.footerBand,rb,null),d=C6(e,r.rowfooters,i,a,u,Ns(o,"rowFooter"),O0e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Ns(n.footerBand,nb,null),h=C6(e,r.colfooters,i,a,a,Ns(o,"columnFooter"),O0e,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=Ns(n.titleAnchor,rb),g=Ns(o,"rowTitle"),g=p===Fl?d+g:c-g,m=Ns(n.titleBand,rb,.5),L0e(e,r.rowtitle,g,0,v,m)),r.coltitle&&(p=Ns(n.titleAnchor,nb),g=Ns(o,"columnTitle"),g=p===Fl?h+g:f-g,m=Ns(n.titleBand,nb,.5),L0e(e,r.coltitle,g,1,v,m))}function BOt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function jOt(e,t){return e.bounds[t]}function C6(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,v,b,w,E,T,C,I,R,N;if(!p)return m;for(v=c;v<p;v+=f)n[v]&&(m=o(m,u(n[v],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,b=0,E=t.length;b<E;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(v=c,b=0,E=t.length;b<E;++b,v+=f){for(C=t[b],T=C.mark.bounds,w=v;w>=0&&(I=n[w])==null;w-=d);a?(R=h==null?I.x:Math.round(I.bounds.x1+h*I.bounds.width()),N=m):(R=m,N=h==null?I.y:Math.round(I.bounds.y1+h*I.bounds.height())),T.union(C.bounds.translate(R-(C.x||0),N-(C.y||0))),C.x=R,C.y=N,e.dirty(C),g=o(g,T[l])}return g}function L0e(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function UOt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function zOt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function VOt(e,t,n,r,i,s,o){const a=UOt(n,t),u=zOt(e,a("offset",0)),l=a("anchor",Zre),c=l===Fl?1:l===nK?.5:0,f={align:rK,bounds:a("bounds",iie),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case wp:f.anchor={x:Math.floor(r.x1)-u,column:Fl,y:c*(o||r.height()+2*r.y1),row:l};break;case Ap:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case QC:f.anchor={y:Math.floor(i.y1)-u,row:Fl,x:c*(s||i.width()+2*i.x1),column:l};break;case Gb:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case yOt:f.anchor={x:u,y:u};break;case vOt:f.anchor={x:s-u,y:u,column:Fl};break;case bOt:f.anchor={x:u,y:o-u,row:Fl};break;case xOt:f.anchor={x:s-u,y:o-u,column:Fl,row:Fl};break}return f}function HOt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),WOt(e,n,n.items[0].items[0]),s=qOt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===COt&&GOt(n.items[0].items[0].items[0].items),i!==rie&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,N1(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function qOt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function WOt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&bR(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case wp:i+=Math.ceil(o.bounds.width())+u;break;case Ap:case Gb:break;default:s+=o.bounds.height()+u}switch((i||s)&&bR(e,n,i,s),o.orient){case wp:c+=VS(t,n,o,a,1,1);break;case Ap:l+=VS(t,n,o,Fl,0,0)+u,c+=VS(t,n,o,a,1,1);break;case Gb:l+=VS(t,n,o,a,0,0),c+=VS(t,n,o,Fl,-1,0,1)+u;break;default:l+=VS(t,n,o,a,0,0)}(l||c)&&bR(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(bR(e,n,-l,0),bR(e,o,-l,0))}}function VS(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Ure(n);return Math.round(r===Zre?f:r===Fl?d-h:.5*(c-h))}function bR(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function GOt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function YOt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===wp||a===Ap?r:n,p=0,m=0,g=0,v=0,b=0,w;if(o!==bj?a===wp?(p=i.y2,h=i.y1):a===Ap?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===wp&&(p=r,h=0),w=u===Zre?p:u===Fl?h:(p+h)/2,d&&d.text){switch(a){case QC:case Gb:b=f.bounds.height()+c;break;case wp:v=f.bounds.width()+c;break;case Ap:v=-f.bounds.width()-c;break}Ku.clear().union(d.bounds),Ku.translate(v-(d.x||0),b-(d.y||0)),I2(d,"x",v)|I2(d,"y",b)&&(e.dirty(d),d.bounds.clear().union(Ku),d.mark.bounds.clear().union(Ku),e.dirty(d)),Ku.clear().union(d.bounds)}else Ku.clear();switch(Ku.union(f.bounds),a){case QC:m=w,g=i.y1-Ku.height()-l;break;case wp:m=i.x1-Ku.width()-l,g=w;break;case Ap:m=i.x2+Ku.width()+l,g=w;break;case Gb:m=w,g=i.y2+l;break;default:m=s.x,g=s.y}return I2(s,"x",m)|I2(s,"y",g)&&(Ku.translate(m,g),e.dirty(s),s.bounds.clear().union(Ku),t.bounds.clear().union(Ku),e.dirty(s)),s.bounds}function q4e(e){nt.call(this,null,e)}zt(q4e,nt,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&FOt(n,r,e.layout),XOt(n,r,e)}),KOt(e.mark.group)?t.reflow():t}});function KOt(e){return e&&e.mark.role!=="legend-entry"}function XOt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ko().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case eie:h=NOt(f)?a:u,h.union(OOt(e,f,i,s));break;case tie:c=f;break;case nie:l.push(HOt(e,f));break;case EOt:case TOt:case R4e:case D4e:case N4e:case P4e:case O4e:case M4e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(v=>{d=v.orient||Ap,d!==rie&&(g[d]||(g[d]=[])).push(v)});for(const v in g){const b=g[v];H4e(e,b,VOt(b,v,n.legends,a,u,i,s))}l.forEach(v=>{const b=v.bounds;if(b.equals(v._bounds)||(v.bounds=v._bounds,e.dirty(v),v.bounds=b,e.dirty(v)),n.autosize&&(n.autosize.type===L4e||n.autosize.type===$4e||n.autosize.type===F4e))switch(v.orient){case wp:case Ap:o.add(b.x1,0).add(b.x2,0);break;case QC:case Gb:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(u),c&&o.union(YOt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),QOt(e,t,o,n)}function QOt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===SOt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===rie?(l=0,f=0,u=o,c=a):s===L4e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===$4e?(u=Math.max(0,o-l-d),a=c+f+h):s===F4e?(o=u+l+d,c=Math.max(0,a-f-h)):s===AOt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const JOt=Object.freeze(Object.defineProperty({__proto__:null,bound:B4e,identifier:sie,mark:j4e,overlap:U4e,render:V4e,viewlayout:q4e},Symbol.toStringTag,{value:"Module"}));function W4e(e){nt.call(this,null,e)}zt(W4e,nt,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Ere(s,o,e.minstep),u=e.format||bOe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?vOe(s,e.values,a):Tre(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Si({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Si({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function G4e(e){nt.call(this,null,e)}function ZOt(){return Si({})}function e4t(e){const t=pI().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}zt(G4e,nt,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||ZOt,s=e.key||bn,o=this.value;return ft(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&ut("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=e4t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function Y4e(e){nt.call(this,null,e)}zt(Y4e,nt,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(ft(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Rv,u=i.enter||Rv,l=i.exit||Rv,c=(s&&!o?i[s]:a)||Rv;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Rv&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Rv&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Rv){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function K4e(e){nt.call(this,[],e)}zt(K4e,nt,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||s$,o=e.scale,a=+e.limit,u=Ere(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===s$,c=e.format||EOe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||wOe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===s$?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,cr(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((v,b)=>Math.max(v,p(b,e)),0)):p=ml(m=p||8),i=i.map((v,b)=>Si({index:b,label:c(v,b,i),value:v,offset:m,size:p(v,e)})),g&&(g=f[i.length],i.push(Si({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===ANt?(d=o.domain(),h=mOe(o,d[0],Kr(d)),f.length<3&&!e.values&&d[0]!==Kr(d)&&(f=[d[0],Kr(d)]),i=f.map((v,b)=>Si({index:b,label:c(v,b,f),value:v,perc:h(v)}))):(p=f.length-1,h=FNt(o),i=f.map((v,b)=>Si({index:b,label:c(v,b,f),value:v,perc:b?h(v):0,perc2:b===p?1:h(f[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const t4t=e=>e.source.x,n4t=e=>e.source.y,r4t=e=>e.target.x,i4t=e=>e.target.y;function oie(e){nt.call(this,{},e)}oie.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};zt(oie,nt,{transform(e,t){var n=e.sourceX||t4t,r=e.sourceY||n4t,i=e.targetX||r4t,s=e.targetY||i4t,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=$0e.get(u+"-"+a)||$0e.get(u);return l||ut("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const X4e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,s4t=(e,t,n,r)=>X4e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Q4e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},o4t=(e,t,n,r)=>Q4e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),J4e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},a4t=(e,t,n,r)=>J4e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),u4t=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,l4t=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,c4t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},f4t=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},d4t=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},h4t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},$0e=pI({line:X4e,"line-radial":s4t,arc:Q4e,"arc-radial":o4t,curve:J4e,"curve-radial":a4t,"orthogonal-horizontal":u4t,"orthogonal-vertical":l4t,"orthogonal-radial":c4t,"diagonal-horizontal":f4t,"diagonal-vertical":d4t,"diagonal-radial":h4t});function aie(e){nt.call(this,null,e)}aie.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};zt(aie,nt,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||fI,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/A2e(l),h=qc(c),p,m,g;for(e.sort&&h.sort((v,b)=>l[v]-l[b]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const p4t=5;function m4t(e){const t=e.type;return!e.bins&&(t===qC||t===O3||t===M3)}function Z4e(e){return xre(e)&&e!==C0}const g4t=Hp(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function e6e(e){nt.call(this,null,e),this.modified(!0)}zt(e6e,nt,{transform(e,t){var n=t.dataflow,r=this.value,i=y4t(e);(!r||i!==r.type)&&(this.value=r=xi(i)());for(i in e)if(!g4t[i]){if(i==="padding"&&Z4e(r.type))continue;cr(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return E4t(r,e,w4t(r,e,b4t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function y4t(e){var t=e.type,n="",r;return t===C0?C0+"-"+qC:(v4t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?C0+"-":r===3?vI+"-":""),(n+t||qC).toLowerCase())}function v4t(e){const t=e.type;return xre(t)&&t!==oE&&t!==aE&&(e.scheme||e.range&&e.range.length&&e.range.every(Gt))}function b4t(e,t,n){const r=x4t(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&m4t(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return Z4e(s)&&t.padding&&i[0]!==Kr(i)&&(i=_4t(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(t6e(s,i,n)),s===gre&&e.unknown(t.domainImplicit?DG:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Ere(e,t.nice)||null),i.length}function x4t(e,t,n){return t?(e.domain(t6e(e.type,t,n)),t.length):-1}function _4t(e,t,n,r,i,s){var o=Math.abs(Kr(n)-n[0]),a=o/(o-2*r),u=e===c1?lne(t,null,a):e===M3?M5(t,null,a,.5):e===O3?M5(t,null,a,i||1):e===ij?cne(t,null,a,s||1):une(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function t6e(e,t,n){if(cOe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+jt(t))}return t}function w4t(e,t,n){let r=t.bins;if(r&&!ft(r)){const i=e.domain(),s=i[0],o=Kr(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||ut("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=qc(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===yre&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function E4t(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=T4t(r,t,n);else if(t.scheme&&(s=S4t(r,t,n),cr(s))){if(e.interpolator)return e.interpolator(s);ut(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&fOe(r))return e.interpolator(aj(iK(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(_re(t.interpolate,t.interpolateGamma)):cr(e.round)?e.round(i):cr(e.rangeRound)&&e.interpolate(i?o3:S1),s&&e.range(iK(s,t.reverse))}function T4t(e,t,n){e!==iOe&&e!==VY&&ut("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===VY?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*mre(n,i,r)]}function S4t(e,t,n){var r=t.schemeExtent,i,s;return ft(t.scheme)?s=aj(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=wre(i),s||ut(`Unrecognized scheme name: ${t.scheme}`)),n=e===oj?n+1:e===yre?n-1:e===WC||e===sj?+t.schemeCount||p4t:n,fOe(e)?F0e(s,r,t.reverse):cr(s)?pOe(F0e(s,r),n):e===gre?s:s.slice(0,n)}function F0e(e,t,n){return cr(e)&&(t||n)?hOe(e,iK(t||[0,1],n)):e}function iK(e,t){return t?e.slice().reverse():e}function n6e(e){nt.call(this,null,e)}zt(n6e,nt,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(GE(e.sort)),this.modified(n),t}});const B0e="zero",r6e="center",i6e="normalize",s6e=["y0","y1"];function uie(e){nt.call(this,null,e)}uie.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:B0e,values:[B0e,r6e,i6e]},{name:"as",type:"string",array:!0,length:2,default:s6e}]};zt(uie,nt,{transform(e,t){var n=e.as||s6e,r=n[0],i=n[1],s=GE(e.sort),o=e.field||fI,a=e.offset===r6e?C4t:e.offset===i6e?A4t:I4t,u,l,c,f;for(u=k4t(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function C4t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function A4t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function I4t(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function k4t(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const R4t=Object.freeze(Object.defineProperty({__proto__:null,axisticks:W4e,datajoin:G4e,encode:Y4e,legendentries:K4e,linkpath:oie,pie:aie,scale:e6e,sortitems:n6e,stack:uie},Symbol.toStringTag,{value:"Module"}));var D4t=Math.abs,sK=Math.cos,J5=Math.sin,N4t=1e-6,o6e=Math.PI,oK=o6e/2,j0e=P4t(2);function U0e(e){return e>1?oK:e<-1?-oK:Math.asin(e)}function P4t(e){return e>0?Math.sqrt(e):0}function O4t(e,t){var n=e*J5(t),r=30,i;do t-=i=(t+J5(t)-n)/(1+sK(t));while(D4t(i)>N4t&&--r>0);return t/2}function M4t(e,t,n){function r(i,s){return[e*i*sK(s=O4t(n,s)),t*J5(s)]}return r.invert=function(i,s){return s=U0e(s/t),[i/(e*sK(s)),U0e((2*s+J5(2*s))/n)]},r}var L4t=M4t(j0e/oK,j0e,o6e);function $4t(){return ag(L4t).scale(169.529)}const F4t=aAe(),aK=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function B4t(e,t){return function n(){const r=t();return r.type=e,r.path=aAe().projection(r),r.copy=r.copy||function(){const i=n();return aK.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},uOe(r)}}function lie(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Z5[e]=B4t(e,t),this):Z5[e]||null}function a6e(e){return e&&e.path||F4t}const Z5={albers:lAe,albersusa:hgt,azimuthalequalarea:pgt,azimuthalequidistant:mgt,conicconformal:vgt,conicequalarea:FF,conicequidistant:_gt,equalEarth:Egt,equirectangular:bgt,gnomonic:Tgt,identity:Sgt,mercator:ggt,mollweide:$4t,naturalEarth1:Cgt,orthographic:Agt,stereographic:Igt,transversemercator:kgt};for(const e in Z5)lie(e,Z5[e]);function j4t(){}const ey=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function u6e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),U4t(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(z4t((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=[],d=[],h,p,m,g,v,b;for(h=p=-1,g=u[0]>=l,ey[g<<1].forEach(w);++h<e-1;)m=g,g=u[h+1]>=l,ey[m|g<<1].forEach(w);for(ey[g<<0].forEach(w);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,v=u[p*e]>=l,ey[g<<1|v<<2].forEach(w);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,b=v,v=u[p*e+h+1]>=l,ey[m|g<<1|v<<2|b<<3].forEach(w);ey[g|v<<3].forEach(w)}for(h=-1,v=u[p*e]>=l,ey[v<<2].forEach(w);++h<e-1;)b=v,v=u[p*e+h+1]>=l,ey[v<<2|b<<3].forEach(w);ey[v<<3].forEach(w);function w(E){var T=[E[0][0]+h,E[0][1]+p],C=[E[1][0]+h,E[1][1]+p],I=o(T),R=o(C),N,O;(N=d[I])?(O=f[R])?(delete d[N.end],delete f[O.start],N===O?(N.ring.push(C),c(N.ring)):f[N.start]=d[O.end]={start:N.start,end:O.end,ring:N.ring.concat(O.ring)}):(delete d[N.end],N.ring.push(C),d[N.end=R]=N):(N=f[R])?(O=d[I])?(delete f[N.start],delete d[O.end],N===O?(N.ring.push(C),c(N.ring)):f[O.start]=d[N.end]={start:O.start,end:N.end,ring:O.ring.concat(N.ring)}):(delete f[N.start],N.ring.unshift(T),f[N.start=I]=N):f[I]=d[R]={start:I,end:R,ring:[T,C]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,v=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(v-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(v-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||ut("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:j4t,r):n===a},r}function U4t(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function z4t(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=V4t(e,t[n]))return i;return 0}function V4t(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(H4t(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function H4t(e,t,n){var r;return q4t(e,t,n)&&W4t(e[r=+(e[0]===t[0])],n[r],t[r])}function q4t(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function W4t(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function l6e(e,t,n){return function(r){var i=W0(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?Ab(s,o,e):a/(e+1);return qc(s+u,o,u)}}function cie(e){nt.call(this,null,e)}cie.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};zt(cie,nt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||pl,s=u6e().smooth(e.smooth!==!1),o=e.thresholds||G4t(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,ft(o)?o:o(c.values));Y4t(f,c,l,e),f.forEach(d=>{u.push(K9(l,Si(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function G4t(e,t,n){const r=l6e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>By(t(i).values)))}function Y4t(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(cr(i)&&(i=i(n,r)),cr(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(bi(i)?i:i[0])||1,a=(bi(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(c6e(t,o,a,u,l))}function c6e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function z0e(e,t,n){const r=e>=0?e:kne(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function hH(e){return cr(e)?e:ml(+e)}function f6e(){var e=u=>u[0],t=u=>u[1],n=fI,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=z0e(r[0],u,e)>>o,f=z0e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),v=new Float32Array(p*m);let b=g;u.forEach(E=>{const T=d+(+e(E)>>o),C=h+(+t(E)>>o);T>=0&&T<p&&C>=0&&C<m&&(g[T+C*p]+=+n(E))}),c>0&&f>0?(HS(p,m,g,v,c),qS(p,m,v,g,f),HS(p,m,g,v,c),qS(p,m,v,g,f),HS(p,m,g,v,c),qS(p,m,v,g,f)):c>0?(HS(p,m,g,v,c),HS(p,m,v,g,c),HS(p,m,g,v,c),b=v):f>0&&(qS(p,m,g,v,f),qS(p,m,v,g,f),qS(p,m,g,v,f),b=v);const w=l?Math.pow(2,-2*o):1/A2e(b);for(let E=0,T=p*m;E<T;++E)b[E]*=w;return{values:b,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=hH(u),a):e},a.y=function(u){return arguments.length?(t=hH(u),a):t},a.weight=function(u){return arguments.length?(n=hH(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||ut("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||ut("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=Wt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&ut("invalid bandwidth"),r=u,a):r},a}function HS(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function qS(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function fie(e){nt.call(this,null,e)}fie.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const K4t=["x","y","weight","size","cellSize","bandwidth"];function d6e(e,t){return K4t.forEach(n=>t[n]!=null?e[n](t[n]):0),e}zt(fie,nt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=X4t(r,e.groupby),s=(e.groupby||[]).map(lo),o=d6e(f6e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Si(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function X4t(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function die(e){nt.call(this,null,e)}die.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};zt(die,nt,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=u6e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||l6e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=d6e(f6e(),e)(i,!0),u=c6e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=ft(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Si),n}});const uK="Feature",hie="FeatureCollection",Q4t="MultiPoint";function pie(e){nt.call(this,null,e)}pie.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};zt(pie,nt,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&pl,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ul(a))||s&&t.modified(ul(s))||o&&t.modified(ul(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:uK,geometry:{type:Q4t,coordinates:r}})),this.value={type:hie,features:n}}});function mie(e){nt.call(this,null,e)}mie.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};zt(mie,nt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||pl,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=a6e(e.projection),n.materialize().reflow()):o=i===pl||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=J4t(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function J4t(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function gie(e){nt.call(this,null,e)}gie.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};zt(gie,nt,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function yie(e){nt.call(this,null,e)}yie.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};zt(yie,nt,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=Z4t(a6e(e.projection),e.field||fh("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function Z4t(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function vie(e){nt.call(this,[],e),this.generator=W0t()}vie.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};zt(vie,nt,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)cr(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(d3e(n[0],i)):t.add.push(Si(i)),n[0]=i,t}});function bie(e){nt.call(this,null,e)}bie.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};zt(bie,nt,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||pl,s=t6t(e.opacity,e),o=e6t(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?By(n.map(l=>By(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=lr({},l,u);r||(f.$max=By(c.values||[])),l[a]=n6t(c,f,o.dep?o:ml(o(f)),s.dep?s:ml(s(f)))}),t.reflow(!0).modifies(a)}});function e6t(e,t){let n;return cr(e)?(n=r=>Ib(e(r,t)),n.dep=h6e(e)):n=ml(Ib(e||"#888")),n}function t6t(e,t){let n;return cr(e)?(n=r=>e(r,t),n.dep=h6e(e)):e?n=ml(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function h6e(e){if(!cr(e))return!1;const t=Hp(ul(e));return t.$x||t.$y||t.$value||t.$max}function n6t(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Hv,d=hb(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,v=0;g<l;++g){t.$y=g-a;for(let b=o,w=g*i;b<u;++b,v+=4){t.$x=b-o,t.$value=f(b+w);const E=n(t);m[v+0]=E.r,m[v+1]=E.g,m[v+2]=E.b,m[v+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function p6e(e){nt.call(this,null,e),this.modified(!0)}zt(p6e,nt,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=i6t(e.type),aK.forEach(r=>{e[r]!=null&&V0e(n,r,e[r])})):aK.forEach(r=>{e.modified(r)&&V0e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&r6t(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function r6t(e,t){const n=s6t(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function i6t(e){const t=lie((e||"mercator").toLowerCase());return t||ut("Unrecognized projection type: "+e),t()}function V0e(e,t,n){cr(e[t])&&e[t](n)}function s6t(e){return e=Wt(e),e.length===1?e[0]:{type:hie,features:e.reduce((t,n)=>t.concat(o6t(n)),[])}}function o6t(e){return e.type===hie?e.features:Wt(e).filter(t=>t!=null).map(t=>t.type===uK?t:{type:uK,geometry:t})}const a6t=Object.freeze(Object.defineProperty({__proto__:null,contour:die,geojson:pie,geopath:mie,geopoint:gie,geoshape:yie,graticule:vie,heatmap:bie,isocontour:cie,kde2d:fie,projection:p6e},Symbol.toStringTag,{value:"Module"})),H0e={center:Lmt,collide:t0t,nbody:d0t,link:r0t,x:h0t,y:p0t},yD="forces",lK=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],u6t=["static","iterations"],m6e=["x","y","vx","vy"];function xie(e){nt.call(this,null,e)}xie.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:m6e}]};zt(xie,nt,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(lK),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&g6e(n,e,0,t)):(this.value=n=c6t(t.source,e),n.on("tick",l6t(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(u6t)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==yD||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(m6e)}});function l6t(e,t){return()=>e.touch(t).run()}function c6t(e,t){const n=f0t(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),g6e(n,t,!0).on("end",()=>s=!0)}function g6e(e,t,n,r){var i=Wt(t.forces),s,o,a,u;for(s=0,o=lK.length;s<o;++s)a=lK[s],a!==yD&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=yD+s,a=n||t.modified(yD,s)?d6t(i[s]):r&&f6t(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(yD+s,null);return e.numForces=i.length,e}function f6t(e,t){var n,r;for(n in e)if(cr(r=e[n])&&t.modified(ul(r)))return 1;return 0}function d6t(e){var t,n;Jt(H0e,e.force)||ut("Unrecognized force: "+e.force),t=H0e[e.force]();for(n in e)cr(t[n])&&h6t(t[n],e[n],e);return t}function h6t(e,t,n){e(cr(t)?r=>t(r,n):t)}const p6t=Object.freeze(Object.defineProperty({__proto__:null,force:xie},Symbol.toStringTag,{value:"Module"}));function cK(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function _ie(e){nt.call(this,null,e)}_ie.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const m6t=e=>e.values;zt(_ie,nt,{transform(e,t){t.source||ut("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&Y9(o.data)&&i.rem.push(o.data)}),this.value=s=n9({values:Wt(e.keys).reduce((o,a)=>(o.key(a),o),g6t()).entries(i.source)},m6t),n&&s.each(o=>{o.children&&(o=Si(o.data),i.add.push(o),i.source.push(o))}),cK(s,bn,bn)),i.source.root=s,i}});function g6t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function P1(e){nt.call(this,null,e)}const y6t=(e,t)=>e.parent===t.parent?1:2;zt(P1,nt,{transform(e,t){(!t.source||!t.source.root)&&ut(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(GE(e.sort,o=>o.data)),v6t(n,this.params,e),n.separation&&n.separation(e.separation!==!1?y6t:fI);try{this.value=n(i)}catch(o){ut(o)}return i.each(o=>b6t(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function v6t(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function b6t(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const fK=["x","y","r","depth","children"];function wie(e){P1.call(this,e)}wie.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:fK.length,default:fK}]};zt(wie,P1,{layout:TAe,params:["radius","size","padding"],fields:fK});const dK=["x0","y0","x1","y1","depth","children"];function Eie(e){P1.call(this,e)}Eie.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:dK.length,default:dK}]};zt(Eie,P1,{layout:pyt,params:["size","round","padding"],fields:dK});function Tie(e){nt.call(this,null,e)}Tie.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};zt(Tie,nt,{transform(e,t){t.source||ut("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?cK(Che().id(e.key).parentId(e.parentKey)(i.source),e.key,dh):cK(Che()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const q0e={tidy:Tyt,cluster:$gt},hK=["x","y","depth","children"];function Sie(e){P1.call(this,e)}Sie.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:hK.length,default:hK}]};zt(Sie,P1,{layout(e){const t=e||"tidy";if(Jt(q0e,t))return q0e[t]();ut("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:hK});function Cie(e){nt.call(this,[],e)}Cie.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};zt(Cie,nt,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||ut("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[bn(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[bn(a)]&&s[bn(u)]&&i.add.push(Si({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[bn(o)]=1),n.forEach(o=>{(s[bn(o.source)]||s[bn(o.target)])&&i.mod.push(o)})),i}});const W0e={binary:Cyt,dice:c3,slice:r9,slicedice:Ayt,squarify:IAe,resquarify:Iyt},pK=["x0","y0","x1","y1","depth","children"];function Aie(e){P1.call(this,e)}Aie.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:pK.length,default:pK}]};zt(Aie,P1,{layout(){const e=Syt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Jt(W0e,t)?e.tile(W0e[t]):ut("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:pK});const x6t=Object.freeze(Object.defineProperty({__proto__:null,nest:_ie,pack:wie,partition:Eie,stratify:Tie,tree:Sie,treelinks:Cie,treemap:Aie},Symbol.toStringTag,{value:"Module"})),pH=4278190080;function _6t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function w6t(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=hb(s,o).getContext("2d"),l=hb(s,o).getContext("2d"),c=a&&hb(s,o).getContext("2d");n.forEach(R=>p$(u,R,!1)),p$(l,t,!1),a&&p$(c,t,!0);const f=mH(u,s,o),d=mH(l,s,o),h=a&&mH(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,v,b,w,E,T,C,I;for(v=0;v<o;++v)for(g=0;g<s;++g)E=v*s+g,T=f[E]&pH,I=d[E]&pH,C=a&&h[E]&pH,(T||C||I)&&(b=e(g),w=e(v),!i&&(T||I)&&p.set(b,w),a&&(T||C)&&m.set(b,w));return[p,m]}function mH(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function p$(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>p$(e,s.items,n))}):vd[r].draw(e,{items:n?t.map(E6t):t})}function E6t(e){const t=K9(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const ty=5,Pl=31,lP=32,Bv=new Uint32Array(lP+1),mp=new Uint32Array(lP+1);mp[0]=0;Bv[0]=~mp[0];for(let e=1;e<=lP;++e)mp[e]=mp[e-1]<<1|1,Bv[e]=~mp[e];function T6t(e,t){const n=new Uint32Array(~~((e*t+lP)/lP));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>ty]&1<<(a&Pl)},set:(s,o)=>{const a=o*e+s;r(a>>>ty,1<<(a&Pl))},clear:(s,o)=>{const a=o*e+s;i(a>>>ty,~(1<<(a&Pl)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>ty,h=f>>>ty,d===h){if(n[d]&Bv[c&Pl]&mp[(f&Pl)+1])return!0}else{if(n[d]&Bv[c&Pl]||n[h]&mp[(f&Pl)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>ty,d=c>>>ty,f===d)r(f,Bv[l&Pl]&mp[(c&Pl)+1]);else for(r(f,Bv[l&Pl]),r(d,mp[(c&Pl)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>ty,d=c>>>ty,f===d)i(f,mp[l&Pl]|Bv[(c&Pl)+1]);else for(i(f,mp[l&Pl]),i(d,Bv[(c&Pl)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function S6t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>T6t(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function C6t(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=id.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,v,b;for(let w=0;w<u;++w)d=a[w].x,p=a[w].y,h=a[w].x2===void 0?d:a[w].x2,m=a[w].y2===void 0?p:a[w].y2,g=(d+h)/2,v=(p+m)/2,b=Math.abs(h-d+m-p),b>=f&&(f=b,o.x=g,o.y=v);return g=c/2,v=l/2,d=o.x-g,h=o.x+g,p=o.y-v,m=o.y+v,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function e8(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function ib(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function A6t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,v=s,b;if(!e8(p,m,d,h,i,s)&&!ib(e,p,m,h,d,g,o,a)&&!ib(e,p,m,h,d,h,o,null)){for(;v-g>=1;)b=(g+v)/2,ib(e,p,m,h,d,b,o,a)?v=b:g=b;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=id.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,v=0,b,w,E,T,C,I,R,N,O,L,B,F,H,Q,J,ne,Z;for(let ie=0;ie<f;++ie){for(b=c[ie].x,E=c[ie].y,w=c[ie].x2===void 0?b:c[ie].x2,T=c[ie].y2===void 0?E:c[ie].y2,b>w&&(Z=b,b=w,w=Z),E>T&&(Z=E,E=T,T=Z),O=e(b),B=e(w),L=~~((O+B)/2),F=e(E),Q=e(T),H=~~((F+Q)/2),R=L;R>=O;--R)for(N=H;N>=F;--N)ne=u(R,N,p,h,d),ne&&([l.x,l.y,p,m]=ne);for(R=L;R<=B;++R)for(N=H;N<=Q;++N)ne=u(R,N,p,h,d),ne&&([l.x,l.y,p,m]=ne);!m&&!n&&(J=Math.abs(w-b+T-E),C=(b+w)/2,I=(E+T)/2,J>=v&&!e8(C,I,h,d,i,s)&&!ib(e,C,I,d,h,d,o,null)&&(v=J,l.x=C,l.y=I,g=!0))}return m||g?(C=h/2,I=d/2,o.setRange(e(l.x-C),e(l.y-I),e(l.x+C),e(l.y+I)),l.align="center",l.baseline="middle",!0):!1}}const I6t=[-1,-1,1,1],k6t=[-1,1,-1,1];function R6t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=id.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,v=!1,b=0,w,E,T,C,I,R,N,O,L,B,F,H;for(let Q=0;Q<f;++Q){for(w=c[Q].x,T=c[Q].y,E=c[Q].x2===void 0?w:c[Q].x2,C=c[Q].y2===void 0?T:c[Q].y2,p.push([e((w+E)/2),e((T+C)/2)]);p.length;)if([N,O]=p.pop(),!(o.get(N,O)||a.get(N,O)||u.get(N,O))){u.set(N,O);for(let J=0;J<4;++J)I=N+I6t[J],R=O+k6t[J],u.outOfBounds(I,R,I,R)||p.push([I,R]);if(I=e.invert(N),R=e.invert(O),L=m,B=s,!e8(I,R,h,d,i,s)&&!ib(e,I,R,d,h,L,o,a)&&!ib(e,I,R,d,h,d,o,null)){for(;B-L>=1;)F=(L+B)/2,ib(e,I,R,d,h,F,o,a)?B=F:L=F;L>m&&(l.x=I,l.y=R,m=L,g=!0)}}!g&&!n&&(H=Math.abs(E-w+C-T),I=(w+E)/2,R=(T+C)/2,H>=b&&!e8(I,R,h,d,i,s)&&!ib(e,I,R,d,h,d,o,null)&&(b=H,l.x=I,l.y=R,v=!0))}return g||v?(I=h/2,R=d/2,o.setRange(e(l.x-I),e(l.y-R),e(l.x+I),e(l.y+R)),l.align="center",l.baseline="middle",!0):!1}}const D6t=["right","center","left"],N6t=["bottom","middle","top"];function P6t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,v,b,w,E,T,C,I,R,N,O,L;for(let B=0;B<u;++B){if(h=(n[B]&3)-1,p=(n[B]>>>2&3)-1,m=h===0&&p===0||r[B]<0,g=h&&p?Math.SQRT1_2:1,v=r[B]<0?-1:1,b=c[1+h]+r[B]*h*g,I=c[4+p]+v*f*p/2+r[B]*p*g,E=I-f/2,T=I+f/2,R=e(b),O=e(E),L=e(T),!d)if(G0e(R,R,O,L,o,a,b,b,E,T,c,m))d=id.width(l.datum,l.datum.text);else continue;if(C=b+v*d*h/2,b=C-d/2,w=C+d/2,R=e(b),N=e(w),G0e(R,N,O,L,o,a,b,w,E,T,c,m))return l.x=h?h*v<0?w:b:C,l.y=p?p*v<0?T:E:I,l.align=D6t[h*v+1],l.baseline=N6t[p*v+1],o.setRange(R,O,N,L),!0}return!1}}function G0e(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const gH=0,yH=4,vH=8,bH=0,xH=1,_H=2,O6t={"top-left":gH+bH,top:gH+xH,"top-right":gH+_H,left:yH+bH,middle:yH+xH,right:yH+_H,"bottom-left":vH+bH,bottom:vH+xH,"bottom-right":vH+_H},M6t={naive:C6t,"reduced-search":A6t,floodfill:R6t};function L6t(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=$6t(r,f),h=F6t(i,f),p=B6t(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",v=j6t(p,m,a,u),b=l===null||l===1/0,w=g&&c==="naive";let E=-1,T=-1;const C=e.map(O=>{const L=b?id.width(O,O.text):void 0;return E=Math.max(E,L),T=Math.max(T,O.fontSize),{datum:O,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:v(O),textWidth:L}});l=l===null||l===1/0?Math.max(E,T)+Math.max(...r):l;const I=S6t(t[0],t[1],l);let R;if(!w){n&&C.sort((B,F)=>n(B.datum,F.datum));let O=!1;for(let B=0;B<h.length&&!O;++B)O=h[B]===5||d[B]<0;const L=(p&&o||g)&&e.map(B=>B.datum);R=s.length||L?w6t(I,L||[],s,O,g):_6t(I,o&&C)}const N=g?M6t[c](I,R,o,u):P6t(I,R,h,d);return C.forEach(O=>O.opacity=+N(O)),C}function $6t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function F6t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=O6t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function B6t(e){return e&&e.mark&&e.mark.marktype}function j6t(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const mK=["x","y","opacity","align","baseline"],y6e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Iie(e){nt.call(this,null,e)}Iie.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:y6e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:mK.length,default:mK}]};zt(Iie,nt,{transform(e,t){function n(s){const o=e[s];return cr(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&ut("Size parameter should be specified as a [width, height] array.");const i=e.as||mK;return L6t(t.materialize(t.SOURCE).source||[],e.size,e.sort,Wt(e.offset==null?1:e.offset),Wt(e.anchor||y6e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const U6t=Object.freeze(Object.defineProperty({__proto__:null,label:Iie},Symbol.toStringTag,{value:"Module"}));function v6e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function kie(e){nt.call(this,null,e)}kie.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};zt(kie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=v6e(r,e.groupby),s=(e.groupby||[]).map(lo),o=s.length,a=e.as||[lo(e.x),lo(e.y)],u=[];i.forEach(l=>{R3e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Si(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const gK={constant:Une,linear:zne,log:C3e,exp:A3e,pow:I3e,quad:Vne,poly:k3e},z6t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Rie(e){nt.call(this,null,e)}Rie.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(gK)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};zt(Rie,nt,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=v6e(r,e.groupby),s=(e.groupby||[]).map(lo),o=e.method||"linear",a=e.order==null?3:e.order,u=z6t(o,a),l=e.as||[lo(e.x),lo(e.y)],c=gK[o],f=[];let d=e.extent;Jt(gK,o)||ut("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Si({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||W0(h,e.x),v=b=>{const w={};for(let E=0;E<s.length;++E)w[s[E]]=h.dims[E];w[l[0]]=b[0],w[l[1]]=b[1],f.push(Si(w))};o==="linear"||o==="constant"?g.forEach(b=>v([b,m.predict(b)])):nj(m.predict,g,25,200).forEach(v)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const V6t=Object.freeze(Object.defineProperty({__proto__:null,loess:kie,regression:Rie},Symbol.toStringTag,{value:"Module"}));function Die(e){nt.call(this,null,e)}Die.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const H6t=[-1e5,-1e5,1e5,1e5];zt(Die,nt,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:H6t;const s=this.value=$Z.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!W6t(u)?q6t(u):null}return t.reflow(e.modified()).modifies(n)}});function q6t(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function W6t(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const G6t=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Die},Symbol.toStringTag,{value:"Module"}));var wH=Math.PI/180,vD=64,m$=2048;function Y6t(){var e=[256,256],t,n,r,i,s,o,a,u=b6e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(hb()),m=eMt((e[0]>>5)*e[1]),g=null,v=l.length,b=-1,w=[],E=l.map(C=>({text:t(C),font:n(C),style:i(C),weight:s(C),rotate:o(C),size:~~(r(C)+1e-14),padding:a(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,I)=>I.size-C.size);++b<v;){var T=E[b];T.x=e[0]*(c()+.5)>>1,T.y=e[1]*(c()+.5)>>1,K6t(p,T,E,b),T.hasText&&h(m,T,g)&&(w.push(T),g?Q6t(g,T):g=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=e[0]>>1,T.y-=e[1]>>1)}return w};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(vD<<5)/m,p.height=m$/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var v=m.x,b=m.y,w=Math.hypot(e[0],e[1]),E=u(e),T=c()<.5?1:-1,C=-T,I,R,N;(I=E(C+=T))&&(R=~~I[0],N=~~I[1],!(Math.min(Math.abs(R),Math.abs(N))>=w));)if(m.x=v+R,m.y=b+N,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!X6t(m,p,e[0]))&&(!g||J6t(m,g))){for(var O=m.sprite,L=m.width>>5,B=e[0]>>5,F=m.x-(L<<4),H=F&127,Q=32-H,J=m.y1-m.y0,ne=(m.y+m.y0)*B+(F>>5),Z,ie=0;ie<J;ie++){Z=0;for(var q=0;q<=L;q++)p[ne+q]|=Z<<Q|(q<L?(Z=O[ie*L+q])>>>H:0);ne+=B}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=R_(p),f):n},f.fontStyle=function(p){return arguments.length?(i=R_(p),f):i},f.fontWeight=function(p){return arguments.length?(s=R_(p),f):s},f.rotate=function(p){return arguments.length?(o=R_(p),f):o},f.text=function(p){return arguments.length?(t=R_(p),f):t},f.spiral=function(p){return arguments.length?(u=tMt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=R_(p),f):r},f.padding=function(p){return arguments.length?(a=R_(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function K6t(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(vD<<5)/s,m$/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*wH),g=Math.cos(t.rotate*wH),v=c*g,b=c*m,w=d*g,E=d*m;c=Math.max(Math.abs(v+E),Math.abs(v-E))+31>>5<<5,d=~~Math.max(Math.abs(b+w),Math.abs(b-w))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=vD<<5&&(o=0,a+=u,u=0),a+d>=m$)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*wH),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var T=i.getImageData(0,0,(vD<<5)/s,m$/s).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)C[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var I=0,R=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var N=f*p+(h>>5),O=T[(a+p)*(vD<<5)+(o+h)<<2]?1<<31-h%32:0;C[N]|=O,I|=O}I?R=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+R,t.sprite=C.slice(0,(t.y1-t.y0)*f)}}}function X6t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function Q6t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function J6t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function b6e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function Z6t(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function eMt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function R_(e){return typeof e=="function"?e:function(){return e}}var tMt={archimedean:b6e,rectangular:Z6t};const x6e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],nMt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Nie(e){nt.call(this,Y6t(),e)}Nie.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:x6e}]};zt(Nie,nt,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&ut("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return cr(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||nMt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||x6e;let a=e.fontSize||14,u;if(cr(a)?u=e.fontSizeRange:a=ml(a),u){const p=a,m=xi("sqrt")().domain(W0(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(ph).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const rMt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Nie},Symbol.toStringTag,{value:"Module"})),iMt=e=>new Uint8Array(e),sMt=e=>new Uint16Array(e),eN=e=>new Uint32Array(e);function oMt(){let e=8,t=[],n=eN(0),r=A6(0,e),i=A6(0,e);return{data:()=>t,seen:()=>n=aMt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=A6(s,e,r),i=A6(s,e))}}}function aMt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function A6(e,t,n){const r=(t<257?iMt:t<65537?sMt:eN)(e);return n&&r.set(n),r}function Y0e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function K0e(){let e=eN(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=eN(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=uMt(h,d),c)p=t,m=e,t=Array(c+f),e=eN(c+f),lMt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[sft(u,a[0],0,l),Cb(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function uMt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),uft(e,t)}function lMt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Pie(e){nt.call(this,oMt(),e),this._indices=null,this._dims=null}Pie.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};zt(Pie,nt,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=K0e()),s.push(Y0e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,v,b,w,E,T,C,I;if(l.set(u),t.rem.length&&(w=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(E={},b=t.mod,T=0,C=b.length;T<C;++T)E[b[T]._index]=1;for(T=0;T<h;++T)I=r[T],(!o[T]||e.modified("fields",T)||t.modified(I.fields))&&(v=I.fname,(m=p[v])||(s[v]=g=K0e(),p[v]=m=g.insert(I,t.source,0)),o[T]=Y0e(g,T,i[T]).onAdd(m,u));for(T=0,C=a.data().length;T<C;++T)w[T]||(l[T]!==u[T]?f.push(T):E[T]&&u[T]!==c&&d.push(T));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),v=i.prev(),b=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)v[d]=b,g[d]!==b&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,v,b;if(f<h)for(g=f,v=Math.min(h,d);g<v;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(f>h)for(g=h,v=Math.min(f,p);g<v;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;if(d>p)for(g=Math.max(f,p),v=d;g<v;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(d<p)for(g=Math.max(h,d),v=p;g<v;++g)b=u[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Oie(e){nt.call(this,null,e)}Oie.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};zt(Oie,nt,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const cMt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Pie,resolvefilter:Oie},Symbol.toStringTag,{value:"Module"})),fMt="RawCode",JC="Literal",dMt="Property",hMt="Identifier",pMt="ArrayExpression",mMt="BinaryExpression",_6e="CallExpression",gMt="ConditionalExpression",yMt="LogicalExpression",vMt="MemberExpression",bMt="ObjectExpression",xMt="UnaryExpression";function im(e){this.type=e}im.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=_Mt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function _Mt(e){switch(e.type){case pMt:return e.elements;case mMt:case yMt:return[e.left,e.right];case _6e:return[e.callee].concat(e.arguments);case gMt:return[e.test,e.consequent,e.alternate];case vMt:return[e.object,e.property];case bMt:return e.properties;case dMt:return[e.key,e.value];case xMt:return[e.argument];case hMt:case JC:case fMt:default:return[]}}var dg,hn,ot,cl,Fi,xj=1,G3=2,lE=3,Rx=4,_j=5,XE=6,Bc=7,Y3=8,wMt=9;dg={};dg[xj]="Boolean";dg[G3]="<end>";dg[lE]="Identifier";dg[Rx]="Keyword";dg[_j]="Null";dg[XE]="Numeric";dg[Bc]="Punctuator";dg[Y3]="String";dg[wMt]="RegularExpression";var EMt="ArrayExpression",TMt="BinaryExpression",SMt="CallExpression",CMt="ConditionalExpression",w6e="Identifier",AMt="Literal",IMt="LogicalExpression",kMt="MemberExpression",RMt="ObjectExpression",DMt="Property",NMt="UnaryExpression",ja="Unexpected token %0",PMt="Unexpected number",OMt="Unexpected string",MMt="Unexpected identifier",LMt="Unexpected reserved word",$Mt="Unexpected end of input",yK="Invalid regular expression",EH="Invalid regular expression: missing /",E6e="Octal literals are not allowed in strict mode.",FMt="Duplicate data property in object literal not allowed in strict mode",xu="ILLEGAL",cP="Disabled.",BMt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),jMt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function wj(e,t){if(!e)throw new Error("ASSERT: "+t)}function hy(e){return e>=48&&e<=57}function Mie(e){return"0123456789abcdefABCDEF".includes(e)}function tN(e){return"01234567".includes(e)}function UMt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function fP(e){return e===10||e===13||e===8232||e===8233}function K3(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&BMt.test(String.fromCharCode(e))}function t8(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&jMt.test(String.fromCharCode(e))}const zMt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function T6e(){for(;ot<cl;){const e=hn.charCodeAt(ot);if(UMt(e)||fP(e))++ot;else break}}function vK(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ot<cl&&Mie(hn[ot])?(r=hn[ot++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):gi({},ja,xu);return String.fromCharCode(i)}function VMt(){var e,t,n,r;for(e=hn[ot],t=0,e==="}"&&gi({},ja,xu);ot<cl&&(e=hn[ot++],!!Mie(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&gi({},ja,xu),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function S6e(){var e,t;for(e=hn.charCodeAt(ot++),t=String.fromCharCode(e),e===92&&(hn.charCodeAt(ot)!==117&&gi({},ja,xu),++ot,e=vK("u"),(!e||e==="\\"||!K3(e.charCodeAt(0)))&&gi({},ja,xu),t=e);ot<cl&&(e=hn.charCodeAt(ot),!!t8(e));)++ot,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),hn.charCodeAt(ot)!==117&&gi({},ja,xu),++ot,e=vK("u"),(!e||e==="\\"||!t8(e.charCodeAt(0)))&&gi({},ja,xu),t+=e);return t}function HMt(){var e,t;for(e=ot++;ot<cl;){if(t=hn.charCodeAt(ot),t===92)return ot=e,S6e();if(t8(t))++ot;else break}return hn.slice(e,ot)}function qMt(){var e,t,n;return e=ot,t=hn.charCodeAt(ot)===92?S6e():HMt(),t.length===1?n=lE:zMt.hasOwnProperty(t)?n=Rx:t==="null"?n=_j:t==="true"||t==="false"?n=xj:n=lE,{type:n,value:t,start:e,end:ot}}function TH(){var e=ot,t=hn.charCodeAt(ot),n,r=hn[ot],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ot,{type:Bc,value:String.fromCharCode(t),start:e,end:ot};default:if(n=hn.charCodeAt(ot+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ot+=2,{type:Bc,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ot};case 33:case 61:return ot+=2,hn.charCodeAt(ot)===61&&++ot,{type:Bc,value:hn.slice(e,ot),start:e,end:ot}}}if(o=hn.substr(ot,4),o===">>>=")return ot+=4,{type:Bc,value:o,start:e,end:ot};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ot+=3,{type:Bc,value:s,start:e,end:ot};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return ot+=2,{type:Bc,value:i,start:e,end:ot};if(i==="//"&&gi({},ja,xu),"<>=!+-*%&|^/".includes(r))return++ot,{type:Bc,value:r,start:e,end:ot};gi({},ja,xu)}function WMt(e){let t="";for(;ot<cl&&Mie(hn[ot]);)t+=hn[ot++];return t.length===0&&gi({},ja,xu),K3(hn.charCodeAt(ot))&&gi({},ja,xu),{type:XE,value:parseInt("0x"+t,16),start:e,end:ot}}function GMt(e){let t="0"+hn[ot++];for(;ot<cl&&tN(hn[ot]);)t+=hn[ot++];return(K3(hn.charCodeAt(ot))||hy(hn.charCodeAt(ot)))&&gi({},ja,xu),{type:XE,value:parseInt(t,8),octal:!0,start:e,end:ot}}function X0e(){var e,t,n;if(n=hn[ot],wj(hy(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ot,e="",n!=="."){if(e=hn[ot++],n=hn[ot],e==="0"){if(n==="x"||n==="X")return++ot,WMt(t);if(tN(n))return GMt(t);n&&hy(n.charCodeAt(0))&&gi({},ja,xu)}for(;hy(hn.charCodeAt(ot));)e+=hn[ot++];n=hn[ot]}if(n==="."){for(e+=hn[ot++];hy(hn.charCodeAt(ot));)e+=hn[ot++];n=hn[ot]}if(n==="e"||n==="E")if(e+=hn[ot++],n=hn[ot],(n==="+"||n==="-")&&(e+=hn[ot++]),hy(hn.charCodeAt(ot)))for(;hy(hn.charCodeAt(ot));)e+=hn[ot++];else gi({},ja,xu);return K3(hn.charCodeAt(ot))&&gi({},ja,xu),{type:XE,value:parseFloat(e),start:t,end:ot}}function YMt(){var e="",t,n,r,i,s=!1;for(t=hn[ot],wj(t==="'"||t==='"',"String literal must starts with a quote"),n=ot,++ot;ot<cl;)if(r=hn[ot++],r===t){t="";break}else if(r==="\\")if(r=hn[ot++],!r||!fP(r.charCodeAt(0)))switch(r){case"u":case"x":hn[ot]==="{"?(++ot,e+=VMt()):e+=vK(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:tN(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),ot<cl&&tN(hn[ot])&&(s=!0,i=i*8+"01234567".indexOf(hn[ot++]),"0123".includes(r)&&ot<cl&&tN(hn[ot])&&(i=i*8+"01234567".indexOf(hn[ot++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&hn[ot]===`
`&&++ot;else{if(fP(r.charCodeAt(0)))break;e+=r}return t!==""&&gi({},ja,xu),{type:Y3,value:e,octal:s,start:n,end:ot}}function KMt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";gi({},yK)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{gi({},yK)}try{return new RegExp(e,t)}catch{return null}}function XMt(){var e,t,n,r,i;for(e=hn[ot],wj(e==="/","Regular expression literal must start with a slash"),t=hn[ot++],n=!1,r=!1;ot<cl;)if(e=hn[ot++],t+=e,e==="\\")e=hn[ot++],fP(e.charCodeAt(0))&&gi({},EH),t+=e;else if(fP(e.charCodeAt(0)))gi({},EH);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||gi({},EH),i=t.substr(1,t.length-2),{value:i,literal:t}}function QMt(){var e,t,n;for(t="",n="";ot<cl&&(e=hn[ot],!!t8(e.charCodeAt(0)));)++ot,e==="\\"&&ot<cl?gi({},ja,xu):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&gi({},yK,n),{value:n,literal:t}}function JMt(){var e,t,n,r;return Fi=null,T6e(),e=ot,t=XMt(),n=QMt(),r=KMt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ot}}function ZMt(e){return e.type===lE||e.type===Rx||e.type===xj||e.type===_j}function C6e(){if(T6e(),ot>=cl)return{type:G3,start:ot,end:ot};const e=hn.charCodeAt(ot);return K3(e)?qMt():e===40||e===41||e===59?TH():e===39||e===34?YMt():e===46?hy(hn.charCodeAt(ot+1))?X0e():TH():hy(e)?X0e():TH()}function Vc(){const e=Fi;return ot=e.end,Fi=C6e(),ot=e.end,e}function A6e(){const e=ot;Fi=C6e(),ot=e}function eLt(e){const t=new im(EMt);return t.elements=e,t}function Q0e(e,t,n){const r=new im(e==="||"||e==="&&"?IMt:TMt);return r.operator=e,r.left=t,r.right=n,r}function tLt(e,t){const n=new im(SMt);return n.callee=e,n.arguments=t,n}function nLt(e,t,n){const r=new im(CMt);return r.test=e,r.consequent=t,r.alternate=n,r}function Lie(e){const t=new im(w6e);return t.name=e,t}function bD(e){const t=new im(AMt);return t.value=e.value,t.raw=hn.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function J0e(e,t,n){const r=new im(kMt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function rLt(e){const t=new im(RMt);return t.properties=e,t}function Z0e(e,t,n){const r=new im(DMt);return r.key=t,r.value=n,r.kind=e,r}function iLt(e,t){const n=new im(NMt);return n.operator=e,n.argument=t,n.prefix=!0,n}function gi(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(wj(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=ot,n.description=i,n}function Ej(e){e.type===G3&&gi(e,$Mt),e.type===XE&&gi(e,PMt),e.type===Y3&&gi(e,OMt),e.type===lE&&gi(e,MMt),e.type===Rx&&gi(e,LMt),gi(e,ja,e.value)}function fl(e){const t=Vc();(t.type!==Bc||t.value!==e)&&Ej(t)}function xs(e){return Fi.type===Bc&&Fi.value===e}function SH(e){return Fi.type===Rx&&Fi.value===e}function sLt(){const e=[];for(ot=Fi.start,fl("[");!xs("]");)xs(",")?(Vc(),e.push(null)):(e.push(cE()),xs("]")||fl(","));return Vc(),eLt(e)}function ege(){ot=Fi.start;const e=Vc();return e.type===Y3||e.type===XE?(e.octal&&gi(e,E6e),bD(e)):Lie(e.value)}function oLt(){var e,t,n,r;if(ot=Fi.start,e=Fi,e.type===lE)return n=ege(),fl(":"),r=cE(),Z0e("init",n,r);if(e.type===G3||e.type===Bc)Ej(e);else return t=ege(),fl(":"),r=cE(),Z0e("init",t,r)}function aLt(){var e=[],t,n,r,i={},s=String;for(ot=Fi.start,fl("{");!xs("}");)t=oLt(),t.key.type===w6e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?gi({},FMt):i[r]=!0,e.push(t),xs("}")||fl(",");return fl("}"),rLt(e)}function uLt(){fl("(");const e=$ie();return fl(")"),e}const lLt={if:1};function cLt(){var e,t,n;if(xs("("))return uLt();if(xs("["))return sLt();if(xs("{"))return aLt();if(e=Fi.type,ot=Fi.start,e===lE||lLt[Fi.value])n=Lie(Vc().value);else if(e===Y3||e===XE)Fi.octal&&gi(Fi,E6e),n=bD(Vc());else{if(e===Rx)throw new Error(cP);e===xj?(t=Vc(),t.value=t.value==="true",n=bD(t)):e===_j?(t=Vc(),t.value=null,n=bD(t)):xs("/")||xs("/=")?(n=bD(JMt()),A6e()):Ej(Vc())}return n}function fLt(){const e=[];if(fl("("),!xs(")"))for(;ot<cl&&(e.push(cE()),!xs(")"));)fl(",");return fl(")"),e}function dLt(){ot=Fi.start;const e=Vc();return ZMt(e)||Ej(e),Lie(e.value)}function hLt(){return fl("."),dLt()}function pLt(){fl("[");const e=$ie();return fl("]"),e}function mLt(){var e,t,n;for(e=cLt();;)if(xs("."))n=hLt(),e=J0e(".",e,n);else if(xs("("))t=fLt(),e=tLt(e,t);else if(xs("["))n=pLt(),e=J0e("[",e,n);else break;return e}function tge(){const e=mLt();if(Fi.type===Bc&&(xs("++")||xs("--")))throw new Error(cP);return e}function g$(){var e,t;if(Fi.type!==Bc&&Fi.type!==Rx)t=tge();else{if(xs("++")||xs("--"))throw new Error(cP);if(xs("+")||xs("-")||xs("~")||xs("!"))e=Vc(),t=g$(),t=iLt(e.value,t);else{if(SH("delete")||SH("void")||SH("typeof"))throw new Error(cP);t=tge()}}return t}function nge(e){let t=0;if(e.type!==Bc&&e.type!==Rx)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function gLt(){var e,t,n,r,i,s,o,a,u,l;if(e=Fi,u=g$(),r=Fi,i=nge(r),i===0)return u;for(r.prec=i,Vc(),t=[e,Fi],o=g$(),s=[u,r,o];(i=nge(Fi))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Q0e(a,u,o),s.push(n);r=Vc(),r.prec=i,s.push(r),t.push(Fi),n=g$(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Q0e(s[l-1].value,s[l-2],n),l-=2;return n}function cE(){var e,t,n;return e=gLt(),xs("?")&&(Vc(),t=cE(),fl(":"),n=cE(),e=nLt(e,t,n)),e}function $ie(){const e=cE();if(xs(","))throw new Error(cP);return e}function Fie(e){hn=e,ot=0,cl=hn.length,Fi=null,A6e();const t=$ie();if(Fi.type!==G3)throw new Error("Unexpect token after expression.");return t}var I6e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function k6e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&ut("Missing arguments to clamp function."),o.length>3&&ut("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&ut("Missing arguments to if function."),o.length>3&&ut("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function yLt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function R6e(e){e=e||{};const t=e.allowed?Hp(e.allowed):{},n=e.forbidden?Hp(e.forbidden):{},r=e.constants||I6e,i=(e.functions||k6e)(f),s=e.globalvar,o=e.fieldvar,a=cr(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(Gt(p))return p;const m=d[p.type];return m==null&&ut("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Jt(n,m)?ut("Illegal identifier: "+m):Jt(r,m)?r[m]:Jt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const v=f(p.property);return g===o&&(l[yLt(v)]=1),m&&(c-=1),g+(m?"."+v:"["+v+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&ut("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,v=Jt(i,m)&&i[m];return v||ut("Unrecognized function: "+m),cr(v)?v(g):v+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const vLt="Literal";var hg,bLt=1,xLt=2,_Lt=3,wLt=4,ELt=5,TLt=6,SLt=7,CLt=8,ALt=9;hg={};hg[bLt]="Boolean";hg[xLt]="<end>";hg[_Lt]="Identifier";hg[wLt]="Keyword";hg[ELt]="Null";hg[TLt]="Numeric";hg[SLt]="Punctuator";hg[CLt]="String";hg[ALt]="RegularExpression";const rge=Symbol("vega_selection_getter");function D6e(e){return(!e.getter||!e.getter[rge])&&(e.getter=fh(e.field),e.getter[rge]=!0),e.getter}const Bie="intersect",ige="union",ILt="vlMulti",kLt="vlPoint",sge="or",RLt="and",Qm="_vgsid_",dP=fh(Qm),DLt="E",NLt="R",PLt="R-E",OLt="R-LE",MLt="R-RE",n8="index:unit";function oge(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=D6e(a)(e),fb(o)&&(o=ol(o)),fb(r[s])&&(r[s]=ol(r[s])),ft(r[s])&&fb(r[s][0])&&(r[s]=r[s].map(ol)),a.type===DLt){if(ft(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===NLt){if(!C2(o,r[s]))return!1}else if(a.type===MLt){if(!C2(o,r[s],!0,!1))return!1}else if(a.type===PLt){if(!C2(o,r[s],!1,!1))return!1}else if(a.type===OLt&&!C2(o,r[s],!1,!0))return!1;return!0}function LLt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[n8]&&r[n8].value:void 0,o=n===Bie,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=oge(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=oge(t,l),o^h)return h;return a&&o}const N6e=qA(dP),$Lt=N6e.left,FLt=N6e.right;function BLt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[n8]&&r[n8].value:void 0,o=n===Bie,a=dP(t),u=$Lt(i,a);if(u===i.length||dP(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(FLt(i,a)-u<s.size)return!1}return!0}function jLt(e,t){return e.map(n=>lr(t.fields?{values:t.fields.map(r=>D6e(r)(n.datum))}:{[Qm]:dP(n.datum)},t))}function ULt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,v,b,w=s.length,E=0,T,C;E<w;++E)if(l=s[E],d=l.unit,c=l.fields,f=l.values,c&&f){for(T=0,C=c.length;T<C;++T)h=c[T],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=v=h.type.charAt(0),b=CH[`${v}_union`],m[d]=b(g,Wt(f[T]));n&&(g=a[d]||(a[d]=[]),g.push(Wt(f).reduce((I,R,N)=>(I[c[N].field]=R,I),{})))}else h=Qm,p=dP(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Qm]:p}));if(t=t||ige,o[Qm]?o[Qm]=CH[`${Qm}_${t}`](...Object.values(o[Qm])):Object.keys(o).forEach(I=>{o[I]=Object.keys(o[I]).map(R=>o[I][R]).reduce((R,N)=>R===void 0?N:CH[`${u[I]}_${t}`](R,N))}),s=Object.keys(a),n&&s.length){const I=r?kLt:ILt;o[I]=t===ige?{[sge]:s.reduce((R,N)=>(R.push(...a[N]),R),[])}:{[RLt]:s.map(R=>({[sge]:a[R]}))}}return o}var CH={[`${Qm}_union`]:yft,[`${Qm}_intersect`]:mft,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ol(t[0]),r=ol(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ol(t[0]),r=ol(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const zLt=":",VLt="@";function jie(e,t,n,r){t[0].type!==vLt&&ut("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Kr(t).value,o="unit",a=VLt+o,u=zLt+i;s===Bie&&!Jt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Jt(r,u)||(r[u]=n.getData(i).tuplesRef())}function P6e(e){const t=this.context.data[e];return t?t.values.value:[]}function HLt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function qLt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(dh).insert(t)),1}function WLt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const X3=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},GLt=X3("format"),O6e=X3("timeFormat"),YLt=X3("utcFormat"),KLt=X3("timeParse"),XLt=X3("utcParse"),I6=new Date(2e3,0,1);function Tj(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(I6.setYear(2e3),I6.setMonth(e),I6.setDate(t),O6e.call(this,I6,n))}function QLt(e){return Tj.call(this,e,1,"%B")}function JLt(e){return Tj.call(this,e,1,"%b")}function ZLt(e){return Tj.call(this,0,2+e,"%A")}function e$t(e){return Tj.call(this,0,2+e,"%a")}const t$t=":",n$t="@",bK="%",M6e="$";function Uie(e,t,n,r){t[0].type!==JC&&ut("First argument to data functions must be a string literal.");const i=t[0].value,s=t$t+i;if(!Jt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function r$t(e,t,n,r){t[0].type!==JC&&ut("First argument to indata must be a string literal."),t[1].type!==JC&&ut("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=n$t+s;Jt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Yl(e,t,n,r){if(t[0].type===JC)age(n,r,t[0].value);else for(e in n.scales)age(n,r,e)}function age(e,t,n){const r=bK+n;if(!Jt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function pg(e,t){if(cr(e))return e;if(Gt(e)){const n=t.scales[e];return n&&bNt(n.value)?n.value:void 0}}function i$t(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Yl,n._range=Yl,n._scale=Yl;const r=i=>"_["+(i.type===JC?jt(bK+i.value):jt(bK)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function zie(e,t){return function(n,r,i){if(n){const s=pg(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const s$t=zie("area",S0t),o$t=zie("bounds",k0t),a$t=zie("centroid",M0t);function u$t(e,t){const n=pg(e,(t||this).context);return n&&n.scale()}function l$t(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Vie(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function c$t(){return Vie(this.context.dataflow,"warn",arguments)}function f$t(){return Vie(this.context.dataflow,"info",arguments)}function d$t(){return Vie(this.context.dataflow,"debug",arguments)}function AH(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function xK(e){const t=Ib(e),n=AH(t.r),r=AH(t.g),i=AH(t.b);return .2126*n+.7152*r+.0722*i}function h$t(e,t){const n=xK(e),r=xK(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function p$t(){const e=[].slice.call(arguments);return e.unshift({}),lr(...e)}function L6e(e,t){return e===t||e!==e&&t!==t?!0:ft(e)?ft(t)&&e.length===t.length?m$t(e,t):!1:Ht(e)&&Ht(t)?$6e(e,t):!1}function m$t(e,t){for(let n=0,r=e.length;n<r;++n)if(!L6e(e[n],t[n]))return!1;return!0}function $6e(e,t){for(const n in e)if(!L6e(e[n],t[n]))return!1;return!0}function uge(e){return t=>$6e(e,t)}function g$t(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?dh:ft(n)||Y9(n)?n:uge(n),c.remove(f)),t&&c.insert(t),r&&(f=uge(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function y$t(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function v$t(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const lge={};function b$t(e,t){const n=lge[t]||(lge[t]=fh(t));return ft(e)?e.map(n):n(e)}function Hie(e){return ft(e)||ArrayBuffer.isView(e)?e:null}function qie(e){return Hie(e)||(Gt(e)?e:null)}function x$t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Hie(e).join(...n)}function _$t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qie(e).indexOf(...n)}function w$t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qie(e).lastIndexOf(...n)}function E$t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qie(e).slice(...n)}function T$t(e,t,n){return cr(n)&&ut("Function argument passed to replace."),String(e).replace(t,n)}function S$t(e){return Hie(e).slice().reverse()}function C$t(e,t,n){return mre(e||0,t||0,n||0)}function A$t(e,t){const n=pg(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function I$t(e,t){const n=pg(e,(t||this).context);return n?n.copy():void 0}function k$t(e,t){const n=pg(e,(t||this).context);return n?n.domain():[]}function R$t(e,t,n){const r=pg(e,(n||this).context);return r?ft(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function D$t(e,t){const n=pg(e,(t||this).context);return n&&n.range?n.range():[]}function N$t(e,t,n){const r=pg(e,(n||this).context);return r?r(t):void 0}function P$t(e,t,n,r,i){e=pg(e,(i||this).context);const s=AOe(t,n);let o=e.domain(),a=o[0],u=Kr(o),l=pl;return u-a?l=mOe(e,a,u):e=(e.interpolator?xi("sequential")().interpolator(e.interpolator()):xi("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Kr(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function O$t(e,t,n){const r=pg(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function M$t(e){let t=null;return function(n){return n?oP(n,t=t||YC(e)):e}}const F6e=e=>e.data;function B6e(e,t){const n=P6e.call(t,e);return n.root&&n.root.lookup||{}}function L$t(e,t,n){const r=B6e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(F6e):void 0}function $$t(e,t){const n=B6e(e,this)[t];return n?n.ancestors().map(F6e):void 0}const j6e=()=>typeof window<"u"&&window||null;function F$t(){const e=j6e();return e?e.screen:{}}function B$t(){const e=j6e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function j$t(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function U6e(e,t,n){if(!e)return[];const[r,i]=e,s=new Ko().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return T4e(o,s,U$t(t))}function U$t(e){let t=null;if(e){const n=Wt(e.marktype),r=Wt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function z$t(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Wt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function V$t(e){return Wt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function H$t(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ko().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),U6e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>q$t(u.x,u.y,t))}function q$t(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const hP={random(){return ph()},cumulativeNormal:Z9,cumulativeLogNormal:Mne,cumulativeUniform:Bne,densityNormal:Rne,densityLogNormal:One,densityUniform:Fne,quantileNormal:ej,quantileLogNormal:Lne,quantileUniform:jne,sampleNormal:J9,sampleLogNormal:Pne,sampleUniform:$ne,isArray:ft,isBoolean:kx,isDate:fb,isDefined(e){return e!==void 0},isNumber:bi,isObject:Ht,isRegExp:SPe,isString:Gt,isTuple:Y9,isValid(e){return e!=null&&e===e},toBoolean:pne,toDate(e){return mne(e)},toNumber:ol,toString:gne,indexof:_$t,join:x$t,lastindexof:w$t,replace:T$t,reverse:S$t,slice:E$t,flush:EPe,lerp:CPe,merge:p$t,pad:kPe,peek:Kr,pluck:b$t,span:R3,inrange:C2,truncate:RPe,rgb:Ib,lab:dF,hcl:hF,hsl:cF,luminance:xK,contrast:h$t,sequence:qc,format:GLt,utcFormat:YLt,utcParse:XLt,utcOffset:HPe,utcSequence:GPe,timeFormat:O6e,timeParse:KLt,timeOffset:VPe,timeSequence:WPe,timeUnitSpecifier:NPe,monthFormat:QLt,monthAbbrevFormat:JLt,dayFormat:ZLt,dayAbbrevFormat:e$t,quarter:bPe,utcquarter:xPe,week:OPe,utcweek:$Pe,dayofyear:PPe,utcdayofyear:LPe,warn:c$t,info:f$t,debug:d$t,extent(e){return W0(e)},inScope:l$t,intersect:U6e,clampRange:_Pe,pinchDistance:y$t,pinchAngle:v$t,screen:F$t,containerSize:j$t,windowSize:B$t,bandspace:C$t,setdata:qLt,pathShape:M$t,panLinear:mPe,panLog:gPe,panPow:yPe,panSymlog:vPe,zoomLinear:une,zoomLog:lne,zoomPow:M5,zoomSymlog:cne,encode:WLt,modify:g$t,lassoAppend:z$t,lassoPath:V$t,intersectLasso:H$t},W$t=["view","item","group","xy","x","y"],G$t="event.vega.",z6e="this.",Wie={},V6e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${jt(M6e+e)}]`,functions:Y$t,constants:I6e,visitors:Wie},H6e=R6e(V6e);function Y$t(e){const t=k6e(e);W$t.forEach(n=>t[n]=G$t+n);for(const n in hP)t[n]=z6e+n;return lr(t,i$t(e,hP,Wie)),t}function Mo(e,t,n){return arguments.length===1?hP[e]:(hP[e]=t,n&&(Wie[e]=n),H6e.functions[e]=z6e+e,this)}Mo("bandwidth",A$t,Yl);Mo("copy",I$t,Yl);Mo("domain",k$t,Yl);Mo("range",D$t,Yl);Mo("invert",R$t,Yl);Mo("scale",N$t,Yl);Mo("gradient",P$t,Yl);Mo("geoArea",s$t,Yl);Mo("geoBounds",o$t,Yl);Mo("geoCentroid",a$t,Yl);Mo("geoShape",O$t,Yl);Mo("geoScale",u$t,Yl);Mo("indata",HLt,r$t);Mo("data",P6e,Uie);Mo("treePath",L$t,Uie);Mo("treeAncestors",$$t,Uie);Mo("vlSelectionTest",LLt,jie);Mo("vlSelectionIdTest",BLt,jie);Mo("vlSelectionResolve",ULt,jie);Mo("vlSelectionTuples",jLt);function Y0(e,t){const n={};let r;try{e=Gt(e)?e:jt(e)+"",r=Fie(e)}catch{ut("Expression parse error: "+e)}r.visit(s=>{if(s.type!==_6e)return;const o=s.callee.name,a=V6e.visitors[o];a&&a(o,s.arguments,t,n)});const i=H6e(r);return i.globals.forEach(s=>{const o=M6e+s;!Jt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:lr({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function K$t(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const X$t=Hp(["rule"]),cge=Hp(["group","image","rect"]);function Q$t(e,t){let n="";return X$t[t]||(e.x2&&(e.x?(cge[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(cge[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Gie(e){return(e+"").toLowerCase()}function J$t(e){return Gie(e)==="operator"}function Z$t(e){return Gie(e)==="collect"}function xR(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function eFt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var tFt={operator:(e,t)=>xR(e,["_"],t.code),parameter:(e,t)=>xR(e,["datum","_"],t.code),event:(e,t)=>xR(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return xR(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+jt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=Q$t(r,n),i+="return m;",xR(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(jt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),eFt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function nFt(e){const t=this;J$t(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function rFt(e){const t=this;if(e.params){const n=t.get(e.id);n||ut("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function iFt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ft(i)?i.map(s=>fge(s,n,t)):fge(i,n,t)}return t}function fge(e,t,n){if(!e||!Ht(e))return e;for(let r=0,i=dge.length,s;r<i;++r)if(s=dge[r],Jt(e,s.key))return s.parse(e,t,n);return e}var dge=[{key:"$ref",parse:sFt},{key:"$key",parse:aFt},{key:"$expr",parse:oFt},{key:"$field",parse:uFt},{key:"$encode",parse:cFt},{key:"$compare",parse:lFt},{key:"$context",parse:fFt},{key:"$subflow",parse:dFt},{key:"$tupleid",parse:hFt}];function sFt(e,t){return t.get(e.$ref)||ut("Operator not defined: "+e.$ref)}function oFt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=pf(t.parameterExpression(e.$expr),e.$fields))}function aFt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=hne(e.$key,e.$flat,t.expr.codegen))}function uFt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=fh(e.$field,e.$name,t.expr.codegen))}function lFt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Wt(e.$compare).map(i=>i&&i.$tupleid?bn:i);return t.fn[n]||(t.fn[n]=fne(r,e.$order,t.expr.codegen))}function cFt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=pf(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function fFt(e,t){return t}function dFt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function hFt(){return bn}function pFt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&ut("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function mFt(e){var t=this,n=Ht(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||ut("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const gFt={skip:!0};function yFt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function vFt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],gFt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(dh).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function q6e(e,t,n,r){return new W6e(e,t,n,r)}function W6e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||tFt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function hge(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}W6e.prototype=hge.prototype={fork(){const e=new hge(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),Z$t(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Gie(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:K$t,parseOperator:nFt,parseOperatorParameters:rFt,parseParameters:iFt,parseStream:pFt,parseUpdate:mFt,getState:yFt,setState:vFt};function bFt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),G6e(t,e.description()))}function G6e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function xFt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const IH="default";function _Ft(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:IH,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Gt(i)?i:i.user:IH,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Gt(r)||(i=r.item,r=r.user),_K(e,r&&r!==IH?r:i||r),i},{cursor:t})}function _K(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function r8(e,t){var n=e._runtime.data;return Jt(n,t)||ut("Unrecognized data set: "+t),n[t]}function wFt(e,t){return arguments.length<2?r8(this,e).values.value:Sj.call(this,e,YE().remove(dh).insert(t))}function Sj(e,t){h3e(t)||ut("Second argument to changes must be a changeset.");const n=r8(this,e);return n.modified=!0,this.pulse(n.input,t)}function EFt(e,t){return Sj.call(this,e,YE().insert(t))}function TFt(e,t){return Sj.call(this,e,YE().remove(t))}function Y6e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function K6e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Cj(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function SFt(e){var t=Cj(e),n=Y6e(e),r=K6e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function CFt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=Cj(e),o=t.changedTouches?t.changedTouches[0]:t,s=yj(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=AFt(e,n,s),t}function AFt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Gt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:ml(e),item:ml(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const pge="view",IFt="timer",kFt="window",RFt={trap:!1};function DFt(e){const t=lr({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{ft(r[s])&&(r[s]=Hp(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function X6e(e,t,n,r){e._eventListeners.push({type:n,sources:Wt(t),handler:r})}function NFt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function k6(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||Ht(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function PFt(e,t,n){var r=this,i=new Q9(n),s=function(l,c){r.runAsync(null,()=>{e===pge&&NFt(r,t)&&l.preventDefault(),i.receive(CFt(r,l,c))})},o;if(e===IFt)k6(r,"timer",t)&&r.timer(s,t);else if(e===pge)k6(r,"view",t)&&r.addEventListener(t,s,RFt);else if(e===kFt?k6(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&k6(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);X6e(r,o,t,s)}return i}function mge(e){return e.item}function gge(e){return e.item.mark.source}function yge(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function OFt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",mge),gge,yge(e)),this.on(this.events("view","pointerout",mge),gge,yge(t)),this}function MFt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function sd(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const LFt="vega-bind",$Ft="vega-bind-name",FFt="vega-bind-radio";function BFt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=dne(r.debounce,i.update))),(r.input==null&&r.element?jFt:zFt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function jFt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),X6e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(UFt(i))}}function UFt(e){return typeof Event<"u"?new Event(e):{type:e}}function zFt(e,t,n,r){const i=r.signal(n.signal),s=sd("div",{class:LFt}),o=n.input==="radio"?s:s.appendChild(sd("label"));o.appendChild(sd("span",{class:$Ft},n.name||n.signal)),t.appendChild(s);let a=VFt;switch(n.input){case"checkbox":a=HFt;break;case"select":a=qFt;break;case"radio":a=WFt;break;case"range":a=GFt;break}a(e,o,n,i)}function VFt(e,t,n,r){const i=sd("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function HFt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=sd("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function qFt(e,t,n,r){const i=sd("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};i8(o,r)&&(u.selected=!0),i.appendChild(sd("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(i8(n.options[a],o)){i.selectedIndex=a;return}}}function WFt(e,t,n,r){const i=sd("span",{class:FFt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};i8(o,r)&&(u.checked=!0);const l=sd("input",u);l.addEventListener("change",()=>e.update(o));const c=sd("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)i8(a[l].value,o)&&(a[l].checked=!0)}}function GFt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||Ab(s,i,100),a=sd("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=sd("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function i8(e,t){return e===t||e+""==t+""}function Q6e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,Y6e(e),K6e(e),Cj(e),i,s).background(e.background())}function Yie(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function YFt(e,t,n,r){const i=new r(e.loader(),Yie(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Cj(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function KFt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=vj(r);e=n._el=e?kH(n,e,!0):null,bFt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||W3,a=e?s.renderer:s.headless;return n._renderer=a?Q6e(n,n._renderer,e,a):null,n._handler=YFt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=kH(n,t,!0):e.appendChild(sd("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=kH(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{BFt(n,u.element||t,u)})),n}function kH(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const _R=e=>+e||0,XFt=e=>({top:e,bottom:e,left:e,right:e});function vge(e){return Ht(e)?{top:_R(e.top),bottom:_R(e.bottom),left:_R(e.left),right:_R(e.right)}:XFt(_R(e))}async function Kie(e,t,n,r){const i=vj(t),s=i&&i.headless;return s||ut("Unrecognized renderer type: "+t),await e.runAsync(),Q6e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function QFt(e,t){e!==tb.Canvas&&e!==tb.SVG&&e!==tb.PNG&&ut("Unrecognized image type: "+e);const n=await Kie(this,e,t);return e===tb.SVG?JFt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function JFt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function ZFt(e,t){return(await Kie(this,tb.Canvas,e,t)).canvas()}async function e5t(e){return(await Kie(this,tb.SVG,e)).svg()}function t5t(e,t,n){return q6e(e,HC,hP,n).parse(t)}function n5t(e){var t=this._runtime.scales;return Jt(t,e)||ut("Unrecognized scale or projection: "+e),t[e].value}var J6e="width",Z6e="height",Xie="padding",bge={skip:!0};function eMe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Xie?r.left+r.right:0)}function tMe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Xie?r.top+r.bottom:0)}function r5t(e){var t=e._signals,n=t[J6e],r=t[Z6e],i=t[Xie];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=eMe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=tMe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function i5t(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(J6e,n,bge),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(Z6e,r,bge),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function s5t(e){return this._runtime.getState(e||{data:o5t,signals:a5t,recurse:!0})}function o5t(e,t){return t.modified&&ft(t.input.value)&&!e.startsWith("_:vega:_")}function a5t(e,t){return!(e==="parent"||t instanceof HC.proxy)}function u5t(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function l5t(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(zht(n,t))}function c5t(e,t,n,r){const i=e.element();i&&i.setAttribute("title",f5t(r))}function f5t(e){return e==null?"":ft(e)?nMe(e):Ht(e)&&!fb(e)?d5t(e):e+""}function d5t(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ft(n)?nMe(n):rMe(n))}).join(`
`)}function nMe(e){return"["+e.map(rMe).join(", ")+"]"}function rMe(e){return ft(e)?"[]":Ht(e)&&!fb(e)?"{}":e}function h5t(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function iMe(e,t){const n=this;if(t=t||{},X2.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=lr({},e.locale,t.locale);n.locale(r3e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||tb.Canvas,n._scenegraph=new QOe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||c5t,n._redraw=!0,n._handler=new W3().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=DFt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=t5t(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:lr({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=eMe(n,n._width),n._viewHeight=tMe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,r5t(n),xFt(n),_Ft(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function R6(e,t){return Jt(e._signals,t)?e._signals[t]:ut("Unrecognized signal name: "+jt(t))}function sMe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function xge(e,t,n,r){let i=sMe(n,r);return i||(i=Yie(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function _ge(e,t,n){const r=sMe(t,n);return r&&t._targets.remove(r),e}zt(iMe,X2,{async evaluate(e,t,n){if(await X2.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,SFt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&r$(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&G6e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=R6(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",vge(e)):vge(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(vj(e)||ut("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(X2.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(R6(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:i5t,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Yie(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return xge(this,e,R6(this,e),t)},removeSignalListener(e,t){return _ge(this,R6(this,e),t)},addDataListener(e,t){return xge(this,e,r8(this,e).values,t)},removeDataListener(e,t){return _ge(this,r8(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=_K(this,null);this._globalCursor=!!e,t&&_K(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:l5t,events:PFt,finalize:MFt,hover:OFt,data:wFt,change:Sj,insert:EFt,remove:TFt,scale:n5t,initialize:KFt,toImageURL:QFt,toCanvas:ZFt,toSVG:e5t,getState:s5t,setState:u5t,_watchPixelRatio:h5t});const p5t="view",s8="[",o8="]",oMe="{",aMe="}",m5t=":",uMe=",",g5t="@",y5t=">",v5t=/[[\]{}]/,b5t={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let lMe,cMe;function Dx(e,t,n){return lMe=t||p5t,cMe=n||b5t,fMe(e.trim()).map(wK)}function x5t(e){return cMe[e]}function nN(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function fMe(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=nN(e,i,uMe,s8+oMe,o8+aMe),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function wK(e){return e[0]==="["?_5t(e):w5t(e)}function _5t(e){const t=e.length;let n=1,r;if(n=nN(e,n,o8,s8,o8),n===t)throw"Empty between selector: "+e;if(r=fMe(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==y5t)throw"Expected '>' after between selector: "+e;r=r.map(wK);const i=wK(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function w5t(e){const t={source:lMe},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===aMe){if(a=e.lastIndexOf(oMe),a>=0){try{r=E5t(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===g5t&&(i=++a),u=nN(e,a,m5t),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=nN(e,a,s8),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=nN(e,a,o8),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==s8)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||v5t.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):x5t(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function E5t(e){const t=e.split(uMe);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function T5t(e){return Ht(e)?e:{type:e||"pad"}}const wR=e=>+e||0,S5t=e=>({top:e,bottom:e,left:e,right:e});function C5t(e){return Ht(e)?e.signal?e:{top:wR(e.top),bottom:wR(e.bottom),left:wR(e.left),right:wR(e.right)}:S5t(wR(e))}const Ua=e=>Ht(e)&&!ft(e)?lr({},e):{value:e};function wge(e,t,n,r){return n!=null?(Ht(n)&&!ft(n)||ft(n)&&n.length&&Ht(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Cu(e,t,n){for(const r in t)wge(e,r,t[r]);for(const r in n)wge(e,r,n[r],"update")}function xI(e,t,n){for(const r in t)n&&Jt(n,r)||(e[r]=lr(e[r]||{},t[r]));return e}function c2(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Qie="mark",Jie="frame",Zie="scope",A5t="axis",I5t="axis-domain",k5t="axis-grid",R5t="axis-label",D5t="axis-tick",N5t="axis-title",P5t="legend",O5t="legend-band",M5t="legend-entry",L5t="legend-gradient",dMe="legend-label",$5t="legend-symbol",F5t="legend-title",B5t="title",j5t="title-text",U5t="title-subtitle";function z5t(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!c2(u,e)&&RH(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Jie?i.group:n===Qie?lr({},i.mark,i[t]):null;for(u in c)l=c2(u,e)||(u==="fill"||u==="stroke")&&(c2("fill",e)||c2("stroke",e)),l||RH(s,u,c[u]);Wt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)c2(h,e)||RH(s,h,d[h])}),e=lr({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=lr(o,e.enter),a&&(e.update=lr(a,e.update)),e}function RH(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const hMe=e=>Gt(e)?jt(e):e.signal?`(${e.signal})`:pMe(e);function Aj(e){if(e.gradient!=null)return H5t(e);let t=e.signal?`(${e.signal})`:e.color?V5t(e.color):e.field!=null?pMe(e.field):e.value!==void 0?jt(e.value):void 0;return e.scale!=null&&(t=q5t(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${y$(e.exponent)})`),e.mult!=null&&(t+=`*${y$(e.mult)}`),e.offset!=null&&(t+=`+${y$(e.offset)}`),e.round&&(t=`round(${t})`),t}const D6=(e,t,n,r)=>`(${e}(${[t,n,r].map(Aj).join(",")})+'')`;function V5t(e){return e.c?D6("hcl",e.h,e.c,e.l):e.h||e.s?D6("hsl",e.h,e.s,e.l):e.l||e.a?D6("lab",e.l,e.a,e.b):e.r||e.g||e.b?D6("rgb",e.r,e.g,e.b):null}function H5t(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:jt(n));for(;t.length&&Kr(t)==null;)t.pop();return t.unshift(hMe(e.gradient)),`gradient(${t.join(",")})`}function y$(e){return Ht(e)?"("+Aj(e)+")":e}function pMe(e){return mMe(Ht(e)?e:{datum:e})}function mMe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):ut("Invalid field reference: "+jt(e));return e.signal||(r=Gt(r)?cg(r).map(jt).join("]["):mMe(r)),t+"["+r+"]"}function q5t(e,t){const n=hMe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+y$(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function W5t(e){let t="";return e.forEach(n=>{const r=Aj(n);t+=n.test?`(${n.test})?${r}:`:r}),Kr(t)===":"&&(t+="null"),t}function gMe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=z5t(e,t,n,r,i.config);for(const a in e)o[a]=G5t(e[a],t,s,i);return s}function G5t(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=K5t(Y5t(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function Y5t(e){return ft(e)?W5t(e):Aj(e)}function K5t(e,t,n,r){const i=Y0(e,t);return i.$fields.forEach(s=>r[s]=1),lr(n,i.$params),i.$expr}const X5t="outer",Q5t=["value","update","init","react","bind"];function Ege(e,t){ut(e+' for "outer" push: '+jt(t))}function yMe(e,t){const n=e.name;if(e.push===X5t)t.signals[n]||Ege("No prior signal definition",n),Q5t.forEach(r=>{e[r]!==void 0&&Ege("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function EK(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function Ij(e,t,n,r){return new EK(e,t,n,r)}function a8(e,t){return Ij("operator",e,t)}function vn(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function pP(e,t){return t?{$field:e,$name:t}:{$field:e}}const TK=pP("key");function Tge(e,t){return{$compare:e,$order:t}}function J5t(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const Z5t="ascending",e8t="descending";function t8t(e){return Ht(e)?(e.order===e8t?"-":"+")+kj(e.op,e.field):""}function kj(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const ese="scope",SK="view";function da(e){return e&&e.signal}function n8t(e){return e&&e.expr}function v$(e){if(da(e))return!0;if(Ht(e)){for(const t in e)if(v$(e[t]))return!0}return!1}function hp(e,t){return e??t}function jw(e){return e&&e.signal||e}const Sge="timer";function mP(e,t){return(e.merge?i8t:e.stream?s8t:e.type?o8t:ut("Invalid stream specification: "+jt(e)))(e,t)}function r8t(e){return e===ese?SK:e||SK}function i8t(e,t){const n=e.merge.map(i=>mP(i,t)),r=tse({merge:n},e,t);return t.addStream(r).id}function s8t(e,t){const n=mP(e.stream,t),r=tse({stream:n},e,t);return t.addStream(r).id}function o8t(e,t){let n;e.type===Sge?(n=t.event(Sge,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(r8t(e.source),e.type);const r=tse({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function tse(e,t,n){let r=t.between;return r&&(r.length!==2&&ut('Stream "between" parameter must have 2 entries: '+jt(t)),e.between=[mP(r[0],n),mP(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(a8t(t.marktype,t.markname,t.markrole)),t.source===ese&&r.push("inScope(event.item)"),r.length&&(e.filter=Y0("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function a8t(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const u8t={code:"_.$value",ast:{type:"Identifier",value:"value"}};function l8t(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||ut("Signal update missing events specification."),Gt(s)&&(s=Dx(s,t.isSubscope()?ese:SK)),s=Wt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[f8t(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&ut("Signal encode and update are mutually exclusive."),o="encode(item(),"+jt(r)+")"),i.update=Gt(o)?Y0(o,t):o.expr!=null?Y0(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:u8t,$params:{$value:t.signalRef(o.signal)}}:ut("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(lr(c8t(u,t),i)))}function c8t(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):mP(e,t)}}function f8t(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function d8t(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?ut("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Y0(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>l8t(i,t,n.id))}const Qi=e=>(t,n,r)=>Ij(e,n,t||void 0,r),vMe=Qi("aggregate"),h8t=Qi("axisticks"),bMe=Qi("bound"),sm=Qi("collect"),Cge=Qi("compare"),p8t=Qi("datajoin"),xMe=Qi("encode"),m8t=Qi("expression"),g8t=Qi("facet"),y8t=Qi("field"),v8t=Qi("key"),b8t=Qi("legendentries"),x8t=Qi("load"),_8t=Qi("mark"),w8t=Qi("multiextent"),E8t=Qi("multivalues"),T8t=Qi("overlap"),S8t=Qi("params"),_Me=Qi("prefacet"),C8t=Qi("projection"),A8t=Qi("proxy"),I8t=Qi("relay"),wMe=Qi("render"),k8t=Qi("scale"),QE=Qi("sieve"),R8t=Qi("sortitems"),EMe=Qi("viewlayout"),D8t=Qi("values");let N8t=0;const TMe={min:"min",max:"max",count:"sum"};function P8t(e,t){const n=e.type||"linear";lOe(n)||ut("Unrecognized scale type: "+jt(n)),t.addScale(e.name,{type:n,domain:void 0})}function O8t(e,t){const n=t.getScale(e.name).params;let r;n.domain=SMe(e.domain,e,t),e.range!=null&&(n.range=AMe(e,t,n)),e.interpolate!=null&&H8t(e.interpolate,n),e.nice!=null&&(n.nice=V8t(e.nice,t)),e.bins!=null&&(n.bins=z8t(e.bins,t));for(r in e)Jt(n,r)||r==="name"||(n[r]=ih(e[r],t))}function ih(e,t){return Ht(e)?e.signal?t.signalRef(e.signal):ut("Unsupported object: "+jt(e)):e}function b$(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>ih(n,t))}function Rj(e){ut("Can not find data set: "+jt(e))}function SMe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&ut("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ft(e)?M8t:e.fields?$8t:L8t)(e,t,n)}function M8t(e,t,n){return e.map(r=>ih(r,n))}function L8t(e,t,n){const r=n.getData(e.data);return r||Rj(e.data),GC(t.type)?r.valuesRef(n,e.field,CMe(e.sort,!1)):dOe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function $8t(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Gt(o)?{data:r,field:o}:ft(o)||o.signal?F8t(o,n):o,s.push(o),s),[]);return(GC(t.type)?B8t:dOe(t.type)?j8t:U8t)(e,n,i)}function F8t(e,t){const n="_:vega:_"+N8t++,r=sm({});if(ft(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+jt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,QE({})]),{data:n,field:"data"}}function B8t(e,t,n){const r=CMe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||Rj(l.data),c.countsRef(t,l.field,r)}),a={groupby:TK,pulse:o};r&&(i=r.op||"count",s=r.field?kj(i,r.field):"count",a.ops=[TMe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(vMe(a));const u=t.add(sm({pulse:vn(i)}));return s=t.add(D8t({field:TK,sort:t.sortRef(r),pulse:vn(u)})),vn(s)}function CMe(e,t){return e&&(!e.field&&!e.op?Ht(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?ut("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!TMe[e.op]&&ut("Multiple domain scales can not be sorted using "+e.op)),e}function j8t(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Rj(i.data),s.domainRef(t,i.field)});return vn(t.add(E8t({values:r})))}function U8t(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Rj(i.data),s.extentRef(t,i.field)});return vn(t.add(w8t({extents:r})))}function z8t(e,t){return e.signal||ft(e)?b$(e,t):t.objectProperty(e)}function V8t(e,t){return e.signal?t.signalRef(e.signal):Ht(e)?{interval:ih(e.interval),step:ih(e.step)}:ih(e)}function H8t(e,t){t.interpolate=ih(e.type||e),e.gamma!=null&&(t.interpolateGamma=ih(e.gamma))}function AMe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Gt(i)){if(r&&Jt(r,i))return e=lr({},e,{range:r[i]}),AMe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=GC(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:ut("Unrecognized scale range value: "+jt(i))}else if(i.scheme){n.scheme=ft(i.scheme)?b$(i.scheme,t):ih(i.scheme,t),i.extent&&(n.schemeExtent=b$(i.extent,t)),i.count&&(n.schemeCount=ih(i.count,t));return}else if(i.step){n.rangeStep=ih(i.step,t);return}else{if(GC(e.type)&&!ft(i))return SMe(i,e,t);ft(i)||ut("Unsupported range type: "+jt(i))}return i.map(s=>(ft(s)?b$:ih)(s,t))}function q8t(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=CK(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=CK(n[i],i,t));t.addProjection(e.name,r)}function CK(e,t,n){return ft(e)?e.map(r=>CK(r,t,n)):Ht(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:ut("Unsupported parameter object: "+jt(e)):e}const om="top",_I="left",wI="right",Yb="bottom",IMe="center",W8t="vertical",G8t="start",Y8t="middle",K8t="end",AK="index",nse="label",X8t="offset",ZC="perc",Q8t="perc2",oh="value",Q3="guide-label",rse="guide-title",J8t="group-title",Z8t="group-subtitle",Age="symbol",x$="gradient",IK="discrete",kK="size",eBt="shape",tBt="fill",nBt="stroke",rBt="strokeWidth",iBt="strokeDash",sBt="opacity",ise=[kK,eBt,tBt,nBt,rBt,iBt,sBt],J3={name:1,style:1,interactive:1},si={value:0},ah={value:1},Dj="group",kMe="rect",sse="rule",oBt="symbol",JE="text";function gP(e){return e.type=Dj,e.interactive=e.interactive||!1,e}function mf(e,t){const n=(r,i)=>hp(e[r],hp(t[r],i));return n.isVertical=r=>W8t===hp(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>hp(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>hp(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>hp(e.columns,hp(t.columns,+n.isVertical(!0))),n}function RMe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function aBt(e,t,n){const r=t.config.style[n];return r&&r[e]}function Nj(e,t,n){return`item.anchor === '${G8t}' ? ${e} : item.anchor === '${K8t}' ? ${t} : ${n}`}const ose=Nj(jt(_I),jt(wI),jt(IMe));function uBt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},Ht(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function DMe(e,t){return t?e?Ht(e)?Object.assign({},e,{offset:DMe(e.offset,t)}):{value:e,offset:t}:t:e}function bd(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=xI(e.encode,t,J3)):e.interactive=!1,e}function lBt(e,t,n,r){const i=mf(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:si,x:si,y:si,width:Ua(f),height:Ua(d)},update:lr({},u,{opacity:ah,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:si}};return Cu(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),bd({type:kMe,role:L5t,encode:h},r)}function cBt(e,t,n,r,i){const s=mf(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:si,fill:{scale:t,field:oh}};p[l]={signal:h+"datum."+ZC,mult:u},p[c]=si,p[f]={signal:h+"datum."+Q8t,mult:u},p[d]=Ua(a);const m={enter:p,update:lr({},p,{opacity:ah}),exit:{opacity:si}};return Cu(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),bd({type:kMe,role:O5t,key:oh,from:i,encode:m},r)}const fBt=`datum.${ZC}<=0?"${_I}":datum.${ZC}>=1?"${wI}":"${IMe}"`,dBt=`datum.${ZC}<=0?"${Yb}":datum.${ZC}>=1?"${om}":"${Y8t}"`;function Ige(e,t,n,r){const i=mf(e,t),s=i.isVertical(),o=Ua(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:si},update:c={opacity:ah,text:{field:nse}},exit:{opacity:si}};return Cu(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:hp(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:dBt},f="y",d="x",h="1-"):(l.align=c.align={signal:fBt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+ZC,mult:a},l[d]=c[d]=o,o.offset=hp(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+AK}:void 0,bd({type:JE,role:dMe,style:Q3,key:oh,from:r,encode:p,overlap:u},n)}function hBt(e,t,n,r,i){const s=mf(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${X8t} : datum.${kK}`,h=l?Ua(l):{field:kK},p=`datum.${AK}`,m=`max(1, ${i})`;let g,v,b,w,E;h.mult=.5,g={enter:v={opacity:si,x:{signal:d,mult:.5,offset:c},y:h},update:b={opacity:ah,x:v.x,y:v.y},exit:{opacity:si}};let T=null,C=null;e.fill||(T=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),Cu(g,{fill:s("symbolFillColor",T),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",C),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),ise.forEach(O=>{e[O]&&(b[O]=v[O]={scale:e[O],field:oh})});const I=bd({type:oBt,role:$5t,key:oh,from:f,clip:l?!0:void 0,encode:g},n.symbols),R=Ua(c);R.offset=s("labelOffset"),g={enter:v={opacity:si,x:{signal:d,offset:R},y:h},update:b={opacity:ah,text:{field:nse},x:v.x,y:v.y},exit:{opacity:si}},Cu(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const N=bd({type:JE,role:dMe,style:Q3,key:oh,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:si,height:l?Ua(l):si,opacity:si},exit:{opacity:si},update:b={opacity:ah,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(w=`ceil(item.mark.items.length / ${m})`,b.row.signal=`${p}%${w}`,b.column.signal=`floor(${p} / ${w})`,E={field:["row",p]}):(b.row.signal=`floor(${p} / ${m})`,b.column.signal=`${p} % ${m}`,E={field:p}),b.column.signal=`(${i})?${b.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:AK}},gP({role:Zie,from:r,encode:xI(g,o,J3),marks:[I,N],name:u,interactive:a,sort:E})}function pBt(e,t){const n=mf(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const ase='item.orient === "left"',use='item.orient === "right"',Pj=`(${ase} || ${use})`,mBt=`datum.vgrad && ${Pj}`,gBt=Nj('"top"','"bottom"','"middle"'),yBt=Nj('"right"','"left"','"center"'),vBt=`datum.vgrad && ${use} ? (${yBt}) : (${Pj} && !(datum.vgrad && ${ase})) ? "left" : ${ose}`,bBt=`item._anchor || (${Pj} ? "middle" : "start")`,xBt=`${mBt} ? (${ase} ? -90 : 90) : 0`,_Bt=`${Pj} ? (datum.vgrad ? (${use} ? "bottom" : "top") : ${gBt}) : "top"`;function wBt(e,t,n,r){const i=mf(e,t),s={enter:{opacity:si},update:{opacity:ah,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:si}};return Cu(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:bBt},angle:{signal:xBt},align:{signal:vBt},baseline:{signal:_Bt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),bd({type:JE,role:F5t,style:rse,from:r,encode:s},n)}function EBt(e,t){let n;return Ht(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+kge(e.path)+")":e.sphere&&(n="geoShape("+kge(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function kge(e){return Ht(e)&&e.signal?e.signal:jt(e)}function NMe(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Dj?Zie:t||Qie}function TBt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||NMe(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function SBt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function lse(e,t){const n=g3e(e.type);n||ut("Unrecognized transform type: "+jt(e.type));const r=Ij(n.type.toLowerCase(),null,PMe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function PMe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=CBt(o,t,n)}return r}function CBt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return ABt(e,t,n);if(i===void 0){e.required&&ut("Missing required "+jt(t.type)+" parameter: "+jt(e.name));return}else{if(r==="param")return IBt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!da(i)?i.map(s=>Rge(e,s,n)):Rge(e,i,n)}function Rge(e,t,n){const r=e.type;if(da(t))return Nge(r)?ut("Expression references can not be signals."):DH(r)?n.fieldRef(t):Pge(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||DH(r);return i&&kBt(t)?n.exprRef(t.expr,t.as):i&&RBt(t)?pP(t.field,t.as):Nge(r)?Y0(t,n):DBt(r)?vn(n.getData(t).values):DH(r)?pP(t):Pge(r)?n.compareRef(t):t}}function ABt(e,t,n){return Gt(t.from)||ut('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function IBt(e,t,n){const r=t[e.name];return e.array?(ft(r)||ut("Expected an array of sub-parameters. Instead: "+jt(r)),r.map(i=>Dge(e,i,n))):Dge(e,r,n)}function Dge(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||ut("Unsupported parameter: "+jt(t));const s=lr(PMe(i,t,n),i.key);return vn(n.add(S8t(s)))}const kBt=e=>e&&e.expr,RBt=e=>e&&e.field,DBt=e=>e==="data",Nge=e=>e==="expr",DH=e=>e==="field",Pge=e=>e==="compare";function NBt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||ut("Only group marks can be faceted."),r.field!=null?o=a=_$(r,n):(e.data?a=vn(n.getData(e.data).aggregate):(s=lse(lr({type:"aggregate",groupby:Wt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=_$(r,n),o=a=vn(n.add(s))),i=n.keyRef(r.groupby,!0))):o=vn(n.add(sm(null,[{}]))),o||(o=_$(e,n)),{key:i,pulse:o,parent:a}}function _$(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:vn(t.getData(e.data).output)}function fE(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}fE.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=vn(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new fE(e,s,i,r,o)};function OMe(e){return Gt(e)?e:null}function Oge(e,t,n){const r=kj(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function ER(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=t8t(s);let l=OMe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:TK,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:vn(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(Ij(r,void 0,d)),o&&(t.index[i]=f),c=vn(f),l!=null&&(a[l]=c)}return c}fE.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=OMe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Oge(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:vn(r.output)},n&&n.field&&Oge(e,u,n),a=e.add(vMe(u)),o=e.add(sm({pulse:vn(a)})),o={agg:a,ref:vn(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return vn(this.values)},extentRef(e,t){return ER(e,this,"extent","extent",t,!1)},domainRef(e,t){return ER(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return ER(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return ER(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return ER(e,this,"indata","tupleindex",t,!0,!0)}};function PBt(e,t,n){const r=e.from.facet,i=r.name,s=_$(r,t);let o;r.name||ut("Facet must have a name: "+jt(r)),r.data||ut("Facet must reference a data set: "+jt(r)),r.field?o=t.add(_Me({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(g8t({key:t.keyRef(r.groupby),group:vn(t.proxy(n.parent)),pulse:s})):ut("Facet must specify groupby or field: "+jt(r));const a=t.fork(),u=a.add(sm()),l=a.add(QE({pulse:vn(u)}));a.addData(i,new fE(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function OBt(e,t,n){const r=t.add(_Me({pulse:n.pulse})),i=t.fork();i.add(QE()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function MMe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(a8()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Y0(l,t);u.update=c.$expr,u.params=c.$params}function Oj(e,t){const n=NMe(e),r=e.type===Dj,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Zie||n===Jie,a,u,l,c,f,d,h;const p=n===Qie||o||i,m=NBt(e.from,r,t);u=t.add(p8t({key:m.key||(e.key?pP(e.key):void 0),pulse:m.pulse,clean:!r}));const g=vn(u);u=l=t.add(sm({pulse:g})),u=t.add(_8t({markdef:TBt(e),interactive:SBt(e.interactive,t),clip:EBt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:vn(u)}));const v=vn(u);u=c=t.add(xMe(gMe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:v}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const I=lse(C,t),R=I.metadata;(R.generates||R.changes)&&ut("Mark transforms should not generate new data."),R.nomod||(c.params.mod=!0),I.params.pulse=vn(u),t.add(u=I)}),e.sort&&(u=t.add(R8t({sort:t.compareRef(e.sort),pulse:vn(u)})));const b=vn(u);(i||o)&&(o=t.add(EMe({layout:t.objectProperty(e.layout),legends:t.legends,mark:v,pulse:b})),d=vn(o));const w=t.add(bMe({mark:v,pulse:d||b}));h=vn(w),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,d||h,g),i?PBt(e,t,m):p?OBt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(w))),s&&(h=MBt(s,h,t));const E=t.add(wMe({pulse:h})),T=t.add(QE({pulse:vn(E)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new fE(t,l,E,T)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&ut("Marks only support modify triggers."),MMe(C,t,f)}))}function MBt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:da(s)?n.signalRef(s.signal):s,method:da(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=da(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return vn(n.add(T8t(o)))}function LBt(e,t){const n=t.config.legend,r=e.encode||{},i=mf(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;ise.forEach(w=>e[w]?(l[w]=e[w],c=c||e[w]):0),c||ut("Missing valid scale for legend.");const p=$Bt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=vn(t.add(sm(null,[m]))),v={enter:{x:{value:0},y:{value:0}}},b=vn(t.add(b8t(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===x$?(h=[lBt(e,c,n,r.gradient),Ige(e,n,r.labels,b)],d.count=d.count||t.signalRef(`max(2,2*floor((${jw(i.gradientLength())})/100))`)):p===IK?h=[cBt(e,c,n,r.gradient,b),Ige(e,n,r.labels,b)]:(f=pBt(e,n),h=[hBt(e,n,r,b,jw(f.columns))],d.size=jBt(e,t,h[0].marks)),h=[gP({role:M5t,from:g,encode:v,marks:h,layout:f,interactive:a})],m.title&&h.push(wBt(e,n,r.title,g)),Oj(gP({role:P5t,from:g,encode:xI(BBt(i,e,n),s,J3),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function $Bt(e,t){let n=e.type||Age;return!e.type&&FBt(e)===1&&(e.fill||e.stroke)&&(n=xre(t)?x$:HY(t)?IK:Age),n!==x$?n:HY(t)?IK:x$}function FBt(e){return ise.reduce((t,n)=>t+(e[n]?1:0),0)}function BBt(e,t,n){const r={enter:{},update:{}};return Cu(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function jBt(e,t,n){const r=jw(Mge("size",e,n)),i=jw(Mge("strokeWidth",e,n)),s=jw(UBt(n[1].encode,t,Q3));return Y0(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Mge(e,t,n){return t[e]?`scale("${t[e]}",datum)`:RMe(e,n[0].encode)}function UBt(e,t,n){return RMe("fontSize",e)||aBt("fontSize",t,n)}const zBt=`item.orient==="${_I}"?-90:item.orient==="${wI}"?90:0`;function VBt(e,t){e=Gt(e)?{text:e}:e;const n=mf(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=vn(t.add(sm(null,[l])));return u.push(WBt(e,n,HBt(e),c)),e.subtitle&&u.push(GBt(e,n,r.subtitle,c)),Oj(gP({role:B5t,from:c,encode:qBt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function HBt(e){const t=e.encode;return t&&t.title||lr({name:e.name,interactive:e.interactive,style:e.style},t)}function qBt(e,t){const n={enter:{},update:{}};return Cu(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:ose},angle:{signal:zBt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),xI(n,t,J3)}function WBt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Cu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),bd({type:JE,role:j5t,style:J8t,from:r,encode:o},n)}function GBt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Cu(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),bd({type:JE,role:U5t,style:Z8t,from:r,encode:o},n)}function YBt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(lse(r,t))}),e.on&&e.on.forEach(r=>{MMe(r,t,e.name)}),t.addDataPipeline(e.name,KBt(e,t,n))}function KBt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?da(e.values)||v$(e.format)?(r.push(Lge(t,e)),r.push(i=D_())):r.push(i=D_({$ingest:e.values,$format:e.format})):e.url?v$(e.url)||v$(e.format)?(r.push(Lge(t,e)),r.push(i=D_())):r.push(i=D_({$request:e.url,$format:e.format})):e.source&&(i=a=Wt(e.source).map(d=>vn(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=D_()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=I8t({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,D_())),i||r.push(D_()),r.push(QE({})),r}function D_(e){const t=sm({},e);return t.metadata={source:!0},t}function Lge(e,t){return x8t({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const LMe=e=>e===Yb||e===om,Mj=(e,t,n)=>da(e)?ZBt(e.signal,t,n):e===_I||e===om?t:n,za=(e,t,n)=>da(e)?QBt(e.signal,t,n):LMe(e)?t:n,Op=(e,t,n)=>da(e)?JBt(e.signal,t,n):LMe(e)?n:t,$Me=(e,t,n)=>da(e)?e9t(e.signal,t,n):e===om?{value:t}:{value:n},XBt=(e,t,n)=>da(e)?t9t(e.signal,t,n):e===wI?{value:t}:{value:n},QBt=(e,t,n)=>FMe(`${e} === '${om}' || ${e} === '${Yb}'`,t,n),JBt=(e,t,n)=>FMe(`${e} !== '${om}' && ${e} !== '${Yb}'`,t,n),ZBt=(e,t,n)=>cse(`${e} === '${_I}' || ${e} === '${om}'`,t,n),e9t=(e,t,n)=>cse(`${e} === '${om}'`,t,n),t9t=(e,t,n)=>cse(`${e} === '${wI}'`,t,n),FMe=(e,t,n)=>(t=t!=null?Ua(t):t,n=n!=null?Ua(n):n,$ge(t)&&$ge(n)?(t=t?t.signal||jt(t.value):null,n=n?n.signal||jt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[lr({test:e},t)].concat(n||[])),$ge=e=>e==null||Object.keys(e).length===1,cse=(e,t,n)=>({signal:`${e} ? (${k2(t)}) : (${k2(n)})`}),n9t=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${_I}' ? (${k2(r)}) : `:"")+(n!=null?`${e} === '${Yb}' ? (${k2(n)}) : `:"")+(i!=null?`${e} === '${wI}' ? (${k2(i)}) : `:"")+(t!=null?`${e} === '${om}' ? (${k2(t)}) : `:"")+"(null)"}),k2=e=>da(e)?e.signal:e==null?null:jt(e),r9t=(e,t)=>t===0?0:da(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Q2=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function WS(e,t,n,r){let i;if(t&&Jt(t,e))return t[e];if(Jt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[rse][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Q3][i]}return null}function Fge(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function i9t(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(da(o)){const f=Fge([n.axisX,n.axisY]),d=Fge([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=za(o,WS(l,n.axisX,i,r),WS(l,n.axisY,i,r));u={};for(l of d)u[l]=n9t(o.signal,WS(l,n.axisTop,i,r),WS(l,n.axisBottom,i,r),WS(l,n.axisLeft,i,r),WS(l,n.axisRight,i,r))}else a=o===om||o===Yb?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?lr({},i,a,u,s):i}function s9t(e,t,n,r){const i=mf(e,t),s=e.orient;let o,a;const u={enter:o={opacity:si},update:a={opacity:ah},exit:{opacity:si}};Cu(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=Bge(e,0),c=Bge(e,1);return o.x=a.x=za(s,l,si),o.x2=a.x2=za(s,c),o.y=a.y=Op(s,l,si),o.y2=a.y2=Op(s,c),bd({type:sse,role:I5t,from:r,encode:u},n)}function Bge(e,t){return{scale:e.scale,range:t}}function o9t(e,t,n,r,i){const s=mf(e,t),o=e.orient,a=e.gridScale,u=Mj(o,1,-1),l=a9t(e.offset,u);let c,f,d;const h={enter:c={opacity:si},update:d={opacity:ah},exit:f={opacity:si}};Cu(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:oh,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=za(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},v=a?{scale:a,range:1,mult:u,offset:l}:lr(m,{mult:u,offset:l});return c.x=d.x=za(o,p,g),c.y=d.y=Op(o,p,g),c.x2=d.x2=Op(o,v),c.y2=d.y2=za(o,v),f.x=za(o,p),f.y=Op(o,p),bd({type:sse,role:k5t,key:oh,from:r,encode:h},n)}function a9t(e,t){if(t!==1)if(!Ht(e))e=da(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=lr({},e);for(;n.mult!=null;)if(Ht(n.mult))n=n.mult=lr({},n.mult);else return n.mult=da(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function u9t(e,t,n,r,i,s){const o=mf(e,t),a=e.orient,u=Mj(a,-1,1);let l,c,f;const d={enter:l={opacity:si},update:f={opacity:ah},exit:c={opacity:si}};Cu(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=Ua(i);h.mult=u;const p={scale:e.scale,field:oh,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=za(a,si,p),f.y2=l.y2=za(a,h),c.x=za(a,p),f.x=l.x=Op(a,si,p),f.x2=l.x2=Op(a,h),c.y=Op(a,p),bd({type:sse,role:D5t,key:oh,from:r,encode:d},n)}function NH(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function l9t(e,t,n,r,i,s){const o=mf(e,t),a=e.orient,u=e.scale,l=Mj(a,-1,1),c=jw(o("labelFlush")),f=jw(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=Ua(i);g.mult=l,g.offset=Ua(o("labelPadding")||0),g.offset.mult=l;const v={scale:u,field:oh,band:.5,offset:DMe(s.offset,o("labelOffset"))},b=za(a,p?NH(u,c,'"left"','"right"','"center"'):{value:"center"},XBt(a,"left","right")),w=za(a,$Me(a,"bottom","top"),p?NH(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),E=NH(u,c,`-(${f})`,f,0);p=p&&f;const T={opacity:si,x:za(a,v,g),y:Op(a,v,g)},C={enter:T,update:m={opacity:ah,text:{field:nse},x:T.x,y:T.y,align:b,baseline:w},exit:{opacity:si,x:T.x,y:T.y}};Cu(C,{dx:!d&&p?za(a,E):null,dy:!h&&p?Op(a,E):null}),Cu(C,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const I=o("labelBound");let R=o("labelOverlap");return R=R||I?{separation:o("labelSeparation"),method:R,order:"datum.index",bound:I?{scale:u,orient:a,tolerance:I}:null}:void 0,m.align!==b&&(m.align=Q2(m.align,b)),m.baseline!==w&&(m.baseline=Q2(m.baseline,w)),bd({type:JE,role:R5t,style:Q3,key:oh,from:r,encode:C,overlap:R},n)}function c9t(e,t,n,r){const i=mf(e,t),s=e.orient,o=Mj(s,-1,1);let a,u;const l={enter:a={opacity:si,anchor:Ua(i("titleAnchor",null)),align:{signal:ose}},update:u=lr({},a,{opacity:ah,text:Ua(e.title)}),exit:{opacity:si}},c={signal:`lerp(range("${e.scale}"), ${Nj(0,1,.5)})`};return u.x=za(s,c),u.y=Op(s,c),a.angle=za(s,si,r9t(o,90)),a.baseline=za(s,$Me(s,Yb,om),{value:Yb}),u.angle=a.angle,u.baseline=a.baseline,Cu(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),f9t(i,s,l,n),l.update.align=Q2(l.update.align,a.align),l.update.angle=Q2(l.update.angle,a.angle),l.update.baseline=Q2(l.update.baseline,a.baseline),bd({type:JE,role:N5t,style:rse,from:r,encode:l},n)}function f9t(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Q2(Ua(a),n.update[u]),!1):!c2(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?Ua(o):za(t,Ua(o),Ua(s))}function d9t(e,t){const n=i9t(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=mf(e,n),l=uBt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=vn(t.add(sm({},[c]))),d=vn(t.add(h8t({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(o9t(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(u9t(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(l9t(e,n,r.labels,d,p,l))),c.domain&&h.push(s9t(e,n,r.domain,f)),c.title&&h.push(c9t(e,n,r.title,f)),Oj(gP({role:A5t,from:f,encode:xI(h9t(u,e),i,J3),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function h9t(e,t){const n={enter:{},update:{}};return Cu(n,{orient:e("orient"),offset:e("offset")||0,position:hp(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function BMe(e,t,n){const r=Wt(e.signals),i=Wt(e.scales);return n||r.forEach(s=>yMe(s,t)),Wt(e.projections).forEach(s=>q8t(s,t)),i.forEach(s=>P8t(s,t)),Wt(e.data).forEach(s=>YBt(s,t)),i.forEach(s=>O8t(s,t)),(n||r).forEach(s=>d8t(s,t)),Wt(e.axes).forEach(s=>d9t(s,t)),Wt(e.marks).forEach(s=>Oj(s,t)),Wt(e.legends).forEach(s=>LBt(s,t)),e.title&&VBt(e.title,t),t.parseLambdas(),t}const p9t=e=>xI({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function m9t(e,t){const n=t.config,r=vn(t.root=t.add(a8())),i=g9t(e,n);i.forEach(l=>yMe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(sm()),o=t.add(xMe(gMe(p9t(e.encode),Dj,Jie,e.style,t,{pulse:vn(s)}))),a=t.add(EMe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:vn(o)}));t.operators.pop(),t.pushState(vn(o),vn(a),null),BMe(e,t,i),t.operators.push(a);let u=t.add(bMe({mark:r,pulse:vn(a)}));return u=t.add(wMe({pulse:vn(u)})),u=t.add(QE({pulse:vn(u)})),t.addData("root",new fE(t,s,s,u)),t}function TR(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function g9t(e,t){const n=o=>hp(e[o],t[o]),r=[TR("background",n("background")),TR("autosize",T5t(n("autosize"))),TR("padding",C5t(n("padding"))),TR("width",n("width")||0),TR("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return Wt(e.signals).forEach(o=>{Jt(i,o.name)?o=lr(i[o.name],o):r.push(o),s[o.name]=o}),Wt(t.signals).forEach(o=>{!Jt(s,o.name)&&!Jt(i,o.name)&&r.push(o)}),r}function jMe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function jge(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}jMe.prototype=jge.prototype={parse(e){return BMe(e,this)},fork(){return new jge(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof EK?vn(e):e;return this.add(A8t({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(vn(this.add(QE({pulse:e})))),this._parent.push(t),this._lookup.push(n?vn(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Kr(this._parent)},encode(){return Kr(this._encode)},lookup(){return Kr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Gt(e))return pP(e,t);e.signal||ut("Unsupported field reference: "+jt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=vn(this.add(y8t(i)))}return r},compareRef(e){let t=!1;const n=s=>da(s)?(t=!0,this.signalRef(s.signal)):n8t(s)?(t=!0,this.exprRef(s.expr)):s,r=Wt(e.field).map(n),i=Wt(e.order).map(n);return t?vn(this.add(Cge({fields:r,orders:i}))):Tge(r,i)},keyRef(e,t){let n=!1;const r=s=>da(s)?(n=!0,vn(i[s.signal])):s,i=this.signals;return e=Wt(e).map(r),n?vn(this.add(v8t({fields:e,flat:t}))):J5t(e,t)},sortRef(e){if(!e)return e;const t=kj(e.op,e.field),n=e.order||Z5t;return n.signal?vn(this.add(Cge({fields:t,orders:this.signalRef(n.signal)}))):Tge(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Jt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&ut("Duplicate signal name: "+jt(e));const n=t instanceof EK?t:this.add(a8(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||ut("Unrecognized signal name: "+jt(e)),this.signals[e]},signalRef(e){return this.signals[e]?vn(this.signals[e]):(Jt(this.lambdas,e)||(this.lambdas[e]=this.add(a8(null))),vn(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Y0(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Ht(e)?e:this.signalRef(e.signal||fse(e))},exprRef(e,t){const n={expr:Y0(e,this)};return t&&(n.expr.$name=t),vn(this.add(m8t(n)))},addBinding(e,t){this.bindings||ut("Nested signals do not support binding: "+jt(e)),this.bindings.push(lr({signal:e},t))},addScaleProj(e,t){Jt(this.scales,e)&&ut("Duplicate scale or projection name: "+jt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,k8t(t))},addProjection(e,t){this.addScaleProj(e,C8t(t))},getScale(e){return this.scales[e]||ut("Unrecognized scale name: "+jt(e)),this.scales[e]},scaleRef(e){return vn(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Jt(this.data,e)&&ut("Duplicate data set name: "+jt(e)),this.data[e]=t},getData(e){return this.data[e]||ut("Undefined data set name: "+jt(e)),this.data[e]},addDataPipeline(e,t){return Jt(this.data,e)&&ut("Duplicate data set name: "+jt(e)),this.addData(e,fE.fromEntries(this,t))}};function fse(e){return(ft(e)?y9t:v9t)(e)}function y9t(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(Ht(i)?i.signal||fse(i):jt(i))}return n+"]"}function v9t(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+jt(r)+":"+(Ht(i)?i.signal||fse(i):jt(i));return t+"}"}function b9t(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function x9t(e,t,n){return Ht(e)||ut("Input Vega specification must be an object."),t=dI(b9t(),t,e.config),m9t(e,new jMe(t,n)).toRuntime()}var _9t="5.30.0";lr(HC,cNt,JOt,R4t,a6t,p6t,U6t,x6t,V6t,G6t,rMt,cMt);const w9t=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ko,CanvasHandler:W3,CanvasRenderer:K5,DATE:af,DAY:il,DAYOFYEAR:G0,Dataflow:X2,Debug:cPe,Error:sne,EventStream:Q9,Gradient:AOe,GroupItem:cj,HOURS:gd,Handler:qre,HybridHandler:v4e,HybridRenderer:tK,Info:lPe,Item:lj,MILLISECONDS:qp,MINUTES:yd,MONTH:ll,Marks:vd,MultiPulse:Sne,None:uPe,Operator:os,Parameters:X9,Pulse:db,QUARTER:of,RenderType:tb,Renderer:q3,ResourceLoader:OOe,SECONDS:hh,SVGHandler:s4e,SVGRenderer:Qre,SVGStringRenderer:y4e,Scenegraph:QOe,TIME_UNITS:yne,Transform:nt,View:iMe,WEEK:ca,Warn:one,YEAR:Eu,accessor:pf,accessorFields:ul,accessorName:lo,array:Wt,ascending:H9,bandwidthNRD:kne,bin:b3e,bootstrapCI:x3e,boundClip:I4e,boundContext:U3,boundItem:XY,boundMark:GOe,boundStroke:N1,changeset:YE,clampRange:_Pe,codegenExpression:R6e,compare:fne,constant:ml,cumulativeLogNormal:Mne,cumulativeNormal:Z9,cumulativeUniform:Bne,dayofyear:PPe,debounce:dne,defaultLocale:xne,definition:g3e,densityLogNormal:One,densityNormal:Rne,densityUniform:Fne,domChild:ua,domClear:Zd,domCreate:Zv,domFind:Hre,dotbin:_3e,error:ut,expressionFunction:Mo,extend:lr,extent:W0,extentIndex:wPe,falsy:Rv,fastmap:pI,field:fh,flush:EPe,font:mj,fontFamily:H3,fontSize:fg,format:n$,formatLocale:L5,formats:Ene,hasOwnProperty:Jt,id:k3,identity:pl,inferType:s3e,inferTypes:o3e,ingest:Si,inherits:zt,inrange:C2,interpolate:_re,interpolateColors:aj,interpolateRange:hOe,intersect:T4e,intersectBoxLine:A2,intersectPath:kre,intersectPoint:Rre,intersectRule:LOe,isArray:ft,isBoolean:kx,isDate:fb,isFunction:cr,isIterable:TPe,isNumber:bi,isObject:Ht,isRegExp:SPe,isString:Gt,isTuple:Y9,key:hne,lerp:CPe,lineHeight:qb,loader:W9,locale:r3e,logger:ane,lruCache:APe,markup:Xre,merge:IPe,mergeConfig:dI,multiLineOffset:Ure,one:fI,pad:kPe,panLinear:mPe,panLog:gPe,panPow:yPe,panSymlog:vPe,parse:x9t,parseExpression:Fie,parseSelector:Dx,path:JB,pathCurves:Cre,pathEqual:k4e,pathParse:YC,pathRectangle:ROe,pathRender:oP,pathSymbols:kOe,pathTrail:DOe,peek:Kr,point:yj,projection:lie,quantileLogNormal:Lne,quantileNormal:ej,quantileUniform:jne,quantiles:Ane,quantizeInterpolator:pOe,quarter:bPe,quartiles:Ine,get random(){return ph},randomInteger:pDt,randomKDE:Nne,randomLCG:hDt,randomLogNormal:E3e,randomMixture:T3e,randomNormal:Dne,randomUniform:S3e,read:l3e,regressionConstant:Une,regressionExp:A3e,regressionLinear:zne,regressionLoess:R3e,regressionLog:C3e,regressionPoly:k3e,regressionPow:I3e,regressionQuad:Vne,renderModule:vj,repeat:uD,resetDefaultLocale:cRt,resetSVGClipId:POe,resetSVGDefIds:gOt,responseType:u3e,runtimeContext:q6e,sampleCurve:nj,sampleLogNormal:Pne,sampleNormal:J9,sampleUniform:$ne,scale:xi,sceneEqual:Jre,sceneFromJSON:KOe,scenePickVisit:U5,sceneToJSON:YOe,sceneVisit:Wp,sceneZOrder:Dre,scheme:wre,serializeXML:h4e,setHybridRendererOptions:dOt,setRandom:fDt,span:R3,splitAccessPath:cg,stringValue:jt,textMetrics:id,timeBin:XPe,timeFloor:jPe,timeFormatLocale:rP,timeInterval:mI,timeOffset:VPe,timeSequence:WPe,timeUnitSpecifier:NPe,timeUnits:vne,toBoolean:pne,toDate:mne,toNumber:ol,toSet:Hp,toString:gne,transform:y3e,transforms:HC,truncate:RPe,truthy:dh,tupleid:bn,typeParsers:UY,utcFloor:UPe,utcInterval:gI,utcOffset:HPe,utcSequence:GPe,utcdayofyear:LPe,utcquarter:xPe,utcweek:$Pe,version:_9t,visitArray:$v,week:OPe,writeConfig:hI,zero:Hv,zoomLinear:une,zoomLog:lne,zoomPow:M5,zoomSymlog:cne},Symbol.toStringTag,{value:"Module"}));function E9t(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var T9t={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},S9t={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},C9t={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const A9t=Array.prototype.slice,N_=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,A9t.call(t,1))},I9t=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var k9t={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:I9t,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return N_("join",arguments)},indexof:function(){return N_("indexOf",arguments)},lastindexof:function(){return N_("lastIndexOf",arguments)},slice:function(){return N_("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return N_("substring",arguments,String)},split:function(){return N_("split",arguments,String)},replace:function(){return N_("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const R9t=["view","item","group","xy","x","y"],RK=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&RK.add(setImmediate);const D9t={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:T9t[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),RK.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||k9t[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>S9t[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>C9t[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,RK.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function SR(e,t,n,r,i,s){const o=a=>D9t[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,R9t.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var N9t={operator(e,t){const n=t.ast,r=e.functions;return i=>SR(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>SR(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>SR(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return SR(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=SR(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&E9t(o,r,s),l}}};const P9t="vega-lite",O9t='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',M9t="5.23.0",L9t=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],$9t="https://vega.github.io/vega-lite/",F9t="Vega-Lite is a concise high-level language for interactive visualization.",B9t=["vega","chart","visualization"],j9t="build/vega-lite.js",U9t="build/vega-lite.min.js",z9t="build/vega-lite.min.js",V9t="build/src/index",H9t="build/src/index.d.ts",q9t={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},W9t=["bin","build","src","vega-lite*","tsconfig.json"],G9t={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Y9t={type:"git",url:"https://github.com/vega/vega-lite.git"},K9t="BSD-3-Clause",X9t={url:"https://github.com/vega/vega-lite/issues"},Q9t={"@babel/core":"^7.26.0","@babel/preset-env":"^7.26.0","@babel/preset-typescript":"^7.26.0","@release-it/conventional-changelog":"^9.0.3","@rollup/plugin-alias":"^5.1.1","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^28.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.3.0","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.14","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.17.0","@typescript-eslint/parser":"^7.17.0",ajv:"^8.17.1","ajv-formats":"^3.0.1",cheerio:"^1.0.0","conventional-changelog-cli":"^5.0.0",d3:"^7.9.0","del-cli":"^6.0.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.2.1","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.10.0",jest:"^29.7.0","jest-dev-server":"^10.1.4",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.3",puppeteer:"^15.0.0","release-it":"17.10.0",rollup:"^4.27.3","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.4",terser:"^5.36.0","ts-jest":"^29.2.5","ts-json-schema-generator":"^2.3.0",typescript:"~5.7.2","vega-cli":"^5.30.0","vega-datasets":"^2.11.0","vega-embed":"^6.28.0","vega-tooltip":"^0.35.2","yaml-front-matter":"^4.1.1"},J9t={"json-stringify-pretty-compact":"~4.0.0",tslib:"~2.8.1","vega-event-selector":"~3.0.1","vega-expression":"~5.1.1","vega-util":"~1.17.2",yargs:"~17.7.2"},Z9t={vega:"^5.24.0"},ejt={node:">=18"},tjt="yarn@1.22.22",njt={name:P9t,author:O9t,version:M9t,collaborators:L9t,homepage:$9t,description:F9t,keywords:B9t,main:j9t,unpkg:U9t,jsdelivr:z9t,module:V9t,types:H9t,bin:q9t,files:W9t,scripts:G9t,repository:Y9t,license:K9t,bugs:X9t,devDependencies:Q9t,dependencies:J9t,peerDependencies:Z9t,engines:ejt,packageManager:tjt};function dse(e){return Rt(e,"or")}function hse(e){return Rt(e,"and")}function pse(e){return Rt(e,"not")}function w$(e,t){if(pse(e))w$(e.not,t);else if(hse(e))for(const n of e.and)w$(n,t);else if(dse(e))for(const n of e.or)w$(n,t);else t(e)}function J2(e,t){return pse(e)?{not:J2(e.not,t)}:hse(e)?{and:e.and.map(n=>J2(n,t))}:dse(e)?{or:e.or.map(n=>J2(n,t))}:t(e)}const qn=structuredClone;function UMe(e){throw new Error(e)}function eA(e,t){const n={};for(const r of t)Jt(e,r)&&(n[r]=e[r]);return n}function Xc(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Yi(e)).join(",")})`};function Lr(e){if(bi(e))return e;const t=Gt(e)?e:Yi(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function DK(e){return e===!1||e===null}function Ir(e,t){return e.includes(t)}function tA(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function mse(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function zMe(e,...t){for(const n of t)rjt(e,n??{});return e}function rjt(e,t){for(const n of It(t))hI(e,n,t[n],!0)}function p0(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function ijt(e,t){const n=It(e),r=It(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function VMe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function gse(e,t){for(const n of e)if(t.has(n))return!0;return!1}function NK(e){const t=new Set;for(const n of e){const i=cg(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function yse(e,t){return e===void 0||t===void 0?!0:gse(NK(e),NK(t))}function Gi(e){return It(e).length===0}const It=Object.keys,Tu=Object.values,Kb=Object.entries;function yP(e){return e===!0||e===!1}function Ms(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function rN(e,t){return pse(e)?`!(${rN(e.not,t)})`:hse(e)?`(${e.and.map(n=>rN(n,t)).join(") && (")})`:dse(e)?`(${e.or.map(n=>rN(n,t)).join(") || (")})`:t(e)}function u8(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&u8(e[n],t)&&delete e[n],Gi(e)}function Z3(e){return e.charAt(0).toUpperCase()+e.substr(1)}function vse(e,t="datum"){const n=cg(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(jt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function HMe(e,t="datum"){return`${t}[${jt(cg(e).join("."))}]`}function $i(e){return`datum['${e.replaceAll("'","\\'")}']`}function sjt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function mh(e){return`${cg(e).map(sjt).join("\\.")}`}function dE(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function EI(e){return`${cg(e).join(".")}`}function nA(e){return e?cg(e).length:0}function Ro(...e){return e.find(t=>t!==void 0)}let qMe=42;function WMe(e){const t=++qMe;return e?String(e)+t:t}function ojt(){qMe=42}function GMe(e){return YMe(e)?e:`__${e}`}function YMe(e){return e.startsWith("__")}function vP(e){if(e!==void 0)return(e%360+360)%360}function Lj(e){return bi(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Uge=Object.getPrototypeOf(structuredClone({}));function Zf(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Zf(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;for(const s of e.entries())if(!Zf(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Uge.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Uge.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Zf(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Yi(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}function Rt(e,t){return Ht(e)&&Jt(e,t)&&e[t]!==void 0}const zy="row",Vy="column",$j="facet",$s="x",Ka="y",am="x2",mg="y2",Nx="xOffset",TI="yOffset",um="radius",O1="radius2",Rh="theta",M1="theta2",lm="latitude",cm="longitude",fm="latitude2",gh="longitude2",Px="time",uf="color",gg="fill",yg="stroke",lf="shape",L1="size",ZE="angle",$1="opacity",Ox="fillOpacity",Mx="strokeOpacity",Lx="strokeWidth",$x="strokeDash",eO="text",rA="order",tO="detail",Fj="key",hE="tooltip",Bj="href",jj="url",Uj="description",ajt={x:1,y:1,x2:1,y2:1},KMe={theta:1,theta2:1,radius:1,radius2:1};function XMe(e){return Jt(KMe,e)}const bse={longitude:1,longitude2:1,latitude:1,latitude2:1};function QMe(e){switch(e){case lm:return"y";case fm:return"y2";case cm:return"x";case gh:return"x2"}}function JMe(e){return Jt(bse,e)}const ujt=It(bse),xse={...ajt,...KMe,...bse,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Z2(e){return e===uf||e===gg||e===yg}const ZMe={row:1,column:1,facet:1},sh=It(ZMe),_se={...xse,...ZMe},ljt=It(_se),{order:aun,detail:uun,tooltip:lun,...cjt}=_se,{row:cun,column:fun,facet:dun,...fjt}=cjt;function djt(e){return Jt(fjt,e)}function eLe(e){return Jt(_se,e)}const hjt=[am,mg,fm,gh,M1,O1];function tLe(e){return eT(e)!==e}function eT(e){switch(e){case am:return $s;case mg:return Ka;case fm:return lm;case gh:return cm;case M1:return Rh;case O1:return um}return e}function Xb(e){if(XMe(e))switch(e){case Rh:return"startAngle";case M1:return"endAngle";case um:return"outerRadius";case O1:return"innerRadius"}return e}function vg(e){switch(e){case $s:return am;case Ka:return mg;case lm:return fm;case cm:return gh;case Rh:return M1;case um:return O1}}function cf(e){switch(e){case $s:case am:return"width";case Ka:case mg:return"height"}}function nLe(e){switch(e){case $s:return"xOffset";case Ka:return"yOffset";case am:return"x2Offset";case mg:return"y2Offset";case Rh:return"thetaOffset";case um:return"radiusOffset";case M1:return"theta2Offset";case O1:return"radius2Offset"}}function wse(e){switch(e){case $s:return"xOffset";case Ka:return"yOffset"}}function pjt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const mjt=It(xse),{x:hun,y:pun,x2:mun,y2:gun,xOffset:yun,yOffset:vun,latitude:bun,longitude:xun,latitude2:_un,longitude2:wun,theta:Eun,theta2:Tun,radius:Sun,radius2:Cun,...Ese}=xse,gjt=It(Ese),Tse={x:1,y:1},F1=It(Tse);function Do(e){return Jt(Tse,e)}const Sse={theta:1,radius:1},yjt=It(Sse);function zj(e){return e==="width"?$s:Ka}const rLe={xOffset:1,yOffset:1};function nO(e){return Jt(rLe,e)}const vjt={time:1};function PH(e){return e in vjt}const{text:Aun,tooltip:Iun,href:kun,url:Run,description:Dun,detail:Nun,key:Pun,order:Oun,...iLe}=Ese,bjt=It(iLe);function xjt(e){return Jt(Ese,e)}function _jt(e){switch(e){case uf:case gg:case yg:case L1:case lf:case $1:case Lx:case $x:return!0;case Ox:case Mx:case ZE:case Px:return!1}}const sLe={...Tse,...Sse,...rLe,...iLe},Cse=It(sLe);function bg(e){return Jt(sLe,e)}function wjt(e,t){return Tjt(e)[t]}const oLe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Mun,...Ejt}=oLe;function Tjt(e){switch(e){case uf:case gg:case yg:case Uj:case tO:case Fj:case hE:case Bj:case rA:case $1:case Ox:case Mx:case Lx:case $j:case zy:case Vy:return oLe;case $s:case Ka:case Nx:case TI:case lm:case cm:case Px:return Ejt;case am:case mg:case fm:case gh:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case L1:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case $x:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case lf:return{point:"always",geoshape:"always"};case eO:return{text:"always"};case ZE:return{point:"always",square:"always",text:"always"};case jj:return{image:"always"};case Rh:return{text:"always",arc:"always"};case um:return{text:"always",arc:"always"};case M1:case O1:return{arc:"always"}}}function OH(e){switch(e){case $s:case Ka:case Rh:case um:case Nx:case TI:case L1:case ZE:case Lx:case $1:case Ox:case Mx:case Px:case am:case mg:case M1:case O1:return;case $j:case zy:case Vy:case lf:case $x:case eO:case hE:case Bj:case jj:case Uj:return"discrete";case uf:case gg:case yg:return"flexible";case lm:case cm:case fm:case gh:case tO:case Fj:case rA:return}}const Sjt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Cjt={count:1,min:1,max:1};function f1(e){return Rt(e,"argmin")}function Fx(e){return Rt(e,"argmax")}function Ase(e){return Gt(e)&&Jt(Sjt,e)}const Ajt=new Set(["count","valid","missing","distinct"]);function Vj(e){return Gt(e)&&Ajt.has(e)}function Ijt(e){return Gt(e)&&Ir(["min","max"],e)}const kjt=new Set(["count","sum","distinct","valid","missing"]),Rjt=new Set(["mean","average","median","q1","q3","min","max"]);function aLe(e){return kx(e)&&(e=t7(e,void 0)),"bin"+It(e).map(t=>Hj(e[t])?Ms(`_${t}_${Kb(e[t])}`):Ms(`_${t}_${e[t]}`)).join("")}function hs(e){return e===!0||tT(e)&&!e.binned}function du(e){return e==="binned"||tT(e)&&e.binned===!0}function tT(e){return Ht(e)}function Hj(e){return Rt(e,"param")}function zge(e){switch(e){case zy:case Vy:case L1:case uf:case gg:case yg:case Lx:case $1:case Ox:case Mx:case lf:return 6;case $x:return 4;default:return 10}}function rO(e){return Rt(e,"expr")}function pu(e,{level:t}={level:0}){const n=It(e||{}),r={};for(const i of n)r[i]=t===0?Yf(e[i]):pu(e[i],{level:t-1});return r}function uLe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},v={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},b={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},w=eA(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:w,nonMarkTitleProperties:v,subtitle:b}}function jv(e){return Gt(e)||ft(e)&&Gt(e[0])}function pn(e){return Rt(e,"signal")}function nT(e){return Rt(e,"step")}function Djt(e){return ft(e)?!1:Rt(e,"fields")&&!Rt(e,"data")}function Njt(e){return ft(e)?!1:Rt(e,"fields")&&Rt(e,"data")}function ky(e){return ft(e)?!1:Rt(e,"field")&&Rt(e,"data")}const Pjt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Ojt=It(Pjt),Mjt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},PK=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function lLe(e){const t=ft(e.condition)?e.condition.map(Vge):Vge(e.condition);return{...Yf(e),condition:t}}function Yf(e){if(rO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Vge(e){if(rO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function _s(e){if(rO(e)){const{expr:t,...n}=e;return{signal:t,...n}}return pn(e)?e:e!==void 0?{value:e}:void 0}function Ljt(e){return pn(e)?e.signal:jt(e)}function Hge(e){return pn(e)?e.signal:jt(e.value)}function Ip(e){return pn(e)?e.signal:e==null?null:jt(e)}function $jt(e,t,n){for(const r of n){const i=K0(r,t.markDef,t.config);i!==void 0&&(e[r]=_s(i))}return e}function cLe(e){return[].concat(e.type,e.style??[])}function Hi(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&Rt(t,i)?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:K0(e,t,n,r)}function K0(e,t,n,{vgChannel:r}={}){const i=OK(e,t,n.style);return Ro(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function OK(e,t,n){return fLe(e,cLe(t),n)}function fLe(e,t,n){t=Wt(t);let r;for(const i of t){const s=n[i];Rt(s,e)&&(r=s[e])}return r}function dLe(e,t){return Wt(e).reduce((n,r)=>(n.field.push(Vt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function hLe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Zf(i,r))return;n.push(r)}),n}function pLe(e,t){return Zf(e,t)||!t?e:e?[...Wt(e),...Wt(t)].join(", "):t}function mLe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((jv(n)||pn(n))&&(jv(r)||pn(r)))return{explicit:e.explicit,value:pLe(n,r)};if(jv(n)||pn(n))return{explicit:e.explicit,value:n};if(jv(r)||pn(r))return{explicit:e.explicit,value:r};if(!jv(n)&&!pn(n)&&!jv(r)&&!pn(r))return{explicit:e.explicit,value:hLe(n,r)};throw new Error("It should never reach here")}function Ise(e){return`Invalid specification ${Yi(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Fjt='Autosize "fit" only works for single views and layered views.';function qge(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Wge(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Gge(e){return e?`Dropping "fit-${e}" because spec has discrete ${cf(e)}.`:'Dropping "fit" because spec has discrete size.'}function kse(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Yge(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Bjt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function jjt(e){return`The "nearest" transform is not supported for ${e} marks.`}function gLe(e){return`Selection not supported for ${e} yet.`}function Ujt(e){return`Cannot find a selection named "${e}".`}const zjt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Vjt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Hjt="Legend bindings are only supported for selections over an individual field or encoding channel.";function qjt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Wjt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Gjt="The same selection must be used to override scale domains in a layered view.",Yjt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Kjt(e){return`Unknown repeated value "${e}".`}function Kge(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Xjt="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",Rse="Animation involving facet, layer, or concat is currently unsupported.";function Qjt(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${jt(e)}.`}function Jjt(e,t,n,r){return(e.length?"Multiple ":"No ")+`matching ${jt(t)} encoding found for selection ${jt(n.param)}. Using "field": ${jt(r)}.`}const Zjt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function e7t(e){return`Unrecognized parse "${e}".`}function Xge(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const t7t="Attempt to add the same child twice.";function n7t(e){return`Ignoring an invalid transform: ${Yi(e)}.`}const r7t='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Qge(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function i7t(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Yi(t)} is overridden by a child projection ${Yi(n)}.`}const s7t="Arc marks uses theta channel rather than angle, replacing angle with theta.";function o7t(e){return`${e}Offset dropped because ${e} is continuous`}function a7t(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Yi(n)}}.`}function yLe(e){return`Invalid field type "${e}".`}function u7t(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function l7t(e){return`Invalid aggregation operator "${e}".`}function vLe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function c7t(e){return`Position range does not support relative band size for ${e}.`}function MK(e,t){return`Dropping ${Yi(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const f7t="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function qj(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function d7t(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function h7t(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function p7t(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function m7t(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function MH(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function g7t(e){return`The ${e} for range marks cannot be an expression`}function y7t(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function v7t(e,t){return`Specified orient "${e}" overridden with "${t}".`}function b7t(e){return`Cannot use the scale property "${e}" with non-color channel.`}function x7t(e){return`Cannot use the relative band size with ${e} scale.`}function _7t(e){return`Using unaggregated domain with raw field has no effect (${Yi(e)}).`}function w7t(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function E7t(e){return`Unaggregated domain is currently unsupported for log scale (${Yi(e)}).`}function T7t(e){return`Cannot apply size to non-oriented mark "${e}".`}function S7t(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function C7t(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function bLe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function xLe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function A7t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yi(n)} and ${Yi(r)}). Using ${Yi(n)}.`}function I7t(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Yi(n)} and ${Yi(r)}). Using the union of the two domains.`}function k7t(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function R7t(e){return`Dropping sort property ${Yi(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Jge="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",D7t="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",N7t="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",P7t="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function O7t(e){return`Cannot stack "${e}" if there is already "${e}2".`}function M7t(e){return`Stack is applied to a non-linear scale (${e}).`}function L7t(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function l8(e,t){return`Invalid ${e}: ${Yi(t)}.`}function $7t(e){return`Dropping day from datetime ${Yi(e)} as day cannot be combined with other units.`}function F7t(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function B7t(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function j7t(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Zge(e){return`1D error band does not support ${e}.`}function _Le(e){return`Channel ${e} is required for "binned" bin.`}function U7t(e){return`Channel ${e} should not be used with "binned" bin.`}function z7t(e){return`Domain for ${e} is required for threshold scale.`}const wLe=ane(one);let pE=wLe;function V7t(e){return pE=e,pE}function H7t(){return pE=wLe,pE}function Dse(...e){pE.error(...e)}function Pt(...e){pE.warn(...e)}function q7t(...e){pE.debug(...e)}function rT(e){if(e&&Ht(e)){for(const t of Pse)if(Rt(e,t))return!0}return!1}const ELe=["january","february","march","april","may","june","july","august","september","october","november","december"],W7t=ELe.map(e=>e.substr(0,3)),TLe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],G7t=TLe.map(e=>e.substr(0,3));function Y7t(e){if(Lj(e)&&(e=+e),bi(e))return e>4&&Pt(l8("quarter",e)),e-1;throw new Error(l8("quarter",e))}function K7t(e){if(Lj(e)&&(e=+e),bi(e))return e-1;{const t=e.toLowerCase(),n=ELe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=W7t.indexOf(r);if(i!==-1)return i;throw new Error(l8("month",e))}}function X7t(e){if(Lj(e)&&(e=+e),bi(e))return e%7;{const t=e.toLowerCase(),n=TLe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=G7t.indexOf(r);if(i!==-1)return i;throw new Error(l8("day",e))}}function Nse(e,t){const n=[];if(t&&e.day!==void 0&&It(e).length>1&&(Pt($7t(e)),e=qn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?K7t(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Y7t(e.quarter):e.quarter;n.push(bi(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?X7t(e.day):e.day;n.push(bi(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function mE(e){const n=Nse(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Q7t(e){const n=Nse(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function J7t(e){const t=Nse(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const SLe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Pse=It(SLe);function Z7t(e){return Jt(SLe,e)}function iT(e){return Ht(e)?e.binned:CLe(e)}function CLe(e){return e&&e.startsWith("binned")}function Ose(e){return e.startsWith("utc")}function eUt(e){return e.substring(3)}const tUt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Wj(e){return Pse.filter(t=>ILe(e,t))}function ALe(e){const t=Wj(e);return t[t.length-1]}function ILe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function nUt(e,t,{end:n}={end:!1}){const r=vse(t),i=Ose(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Pse)ILe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),Q7t(a)}function kLe(e){if(!e)return;const t=Wj(e);return`timeUnitSpecifier(${Yi(t)}, ${Yi(tUt)})`}function rUt(e,t,n){if(!e)return;const r=kLe(e);return`${n||Ose(e)?"utc":"time"}Format(${t}, ${r})`}function Ha(e){if(!e)return;let t;return Gt(e)?CLe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Ht(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Ose(t.unit)&&(t.utc=!0,t.unit=eUt(t.unit)),t}function iUt(e){const{utc:t,...n}=Ha(e);return n.unit?(t?"utc":"")+It(n).map(r=>Ms(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+It(n).map(r=>Ms(`_${r}_${n[r]}`)).join("")}function RLe(e,t=n=>n){const n=Ha(e),r=ALe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=DLe(r,n.step),a={...i,[o]:+i[o]+s};return`${t(mE(a))} - ${t(mE(i))}`}}const sUt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function oUt(e){return Jt(sUt,e)}function DLe(e,t=1){if(oUt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function aUt(e){return Rt(e,"param")}function Mse(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Lse(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function $se(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Fse(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Bse(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function jse(e){if(e!=null&&e.field){if(ft(e.range)&&e.range.length===2)return!0;if(pn(e.range))return!0}return!1}function Use(e){return!!(e!=null&&e.field)&&(ft(e.oneOf)||ft(e.in))}function uUt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function NLe(e){return Use(e)||Mse(e)||jse(e)||Lse(e)||Fse(e)||$se(e)||Bse(e)}function jm(e,t){return n7(e,{timeUnit:t,wrapTime:!0})}function lUt(e,t){return e.map(n=>jm(n,t))}function PLe(e,t=!0){const{field:n}=e,r=Ha(e.timeUnit),{unit:i,binned:s}=r||{},o=Vt(e,{expr:"datum"}),a=i?`time(${s?o:nUt(i,n)})`:o;if(Mse(e))return`${a}===${jm(e.equal,i)}`;if(Lse(e)){const u=e.lt;return`${a}<${jm(u,i)}`}else if(Fse(e)){const u=e.gt;return`${a}>${jm(u,i)}`}else if($se(e)){const u=e.lte;return`${a}<=${jm(u,i)}`}else if(Bse(e)){const u=e.gte;return`${a}>=${jm(u,i)}`}else{if(Use(e))return`indexof([${lUt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(uUt(e))return Gj(a,e.valid);if(jse(e)){const{range:u}=pu(e),l=pn(u)?{signal:`${u.signal}[0]`}:u[0],c=pn(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+jm(l,i)+", "+jm(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${jm(l,i)}`),c!==null&&f.push(`${a} <= ${jm(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Yi(e)}`)}function Gj(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function cUt(e){return NLe(e)&&e.timeUnit?{...e,timeUnit:Ha(e.timeUnit)}:e}const iO={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function fUt(e){return e==="quantitative"||e==="temporal"}function OLe(e){return e==="ordinal"||e==="nominal"}const gE=iO.quantitative,zse=iO.ordinal,iA=iO.temporal,Vse=iO.nominal,SI=iO.geojson;function dUt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case gE:return"quantitative";case"t":case iA:return"temporal";case"o":case zse:return"ordinal";case"n":case Vse:return"nominal";case SI:return"geojson"}}const mu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},LK={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function hUt(e,t){const n=LK[e],r=LK[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const pUt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function eye(e){return pUt[e]}const MLe=new Set(["linear","log","pow","sqrt","symlog"]),LLe=new Set([...MLe,"time","utc"]);function $Le(e){return MLe.has(e)}const FLe=new Set(["quantile","quantize","threshold"]),mUt=new Set([...LLe,...FLe,"sequential","identity"]),gUt=new Set(["ordinal","bin-ordinal","point","band"]);function Wa(e){return gUt.has(e)}function Gp(e){return mUt.has(e)}function m0(e){return LLe.has(e)}function sA(e){return FLe.has(e)}const yUt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function vUt(e){return!Gt(e)&&Rt(e,"name")}function BLe(e){return Rt(e,"param")}function bUt(e){return Rt(e,"unionWith")}function xUt(e){return Ht(e)&&"field"in e}const _Ut={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Lun,domain:$un,range:Fun,rangeMax:Bun,rangeMin:jun,scheme:Uun,...wUt}=_Ut,EUt=It(wUt);function $K(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return m0(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return m0(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return m0(e);case"nice":return m0(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Gp(e)&&!Ir(["log","time","utc","threshold","quantile"],e)}}function jLe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Z2(e)?void 0:b7t(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function TUt(e,t){return Ir([zse,Vse],t)?e===void 0||Wa(e):t===iA?Ir([mu.TIME,mu.UTC,void 0],e):t===gE?$Le(e)||sA(e)||e===void 0:!0}function SUt(e,t,n=!1){if(!bg(e))return!1;switch(e){case $s:case Ka:case Nx:case TI:case Rh:case um:return m0(t)||t==="band"?!0:t==="point"?!n:!1;case Px:return Ir(["linear","band"],t);case L1:case Lx:case $1:case Ox:case Mx:case ZE:return m0(t)||sA(t)||Ir(["band","point","ordinal"],t);case uf:case gg:case yg:return t!=="band";case $x:case lf:return t==="ordinal"||sA(t)}}function CUt(e){return Ht(e)&&"value"in e}const sc={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},ULe=sc.arc,Yj=sc.area,Kj=sc.bar,AUt=sc.image,Xj=sc.line,Qj=sc.point,IUt=sc.rect,c8=sc.rule,zLe=sc.text,Hse=sc.tick,kUt=sc.trail,qse=sc.circle,Wse=sc.square,VLe=sc.geoshape;function Bx(e){return["line","area","trail"].includes(e)}function bP(e){return["rect","bar","image","arc","tick"].includes(e)}const RUt=new Set(It(sc));function X0(e){return Rt(e,"type")}const DUt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],NUt=["fill","fillOpacity"],PUt=[...DUt,...NUt],OUt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},tye=It(OUt),LH=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],MUt={area:["line","point"],bar:LH,rect:LH,line:["point"],tick:["bandSize","thickness",...LH]},LUt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},$Ut={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},HLe=It($Ut);function yE(e){return Rt(e,"band")}const FUt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},BUt=5,Gse={binSpacing:0,continuousBandSize:BUt,minBandSize:.25,timeUnitBandPosition:.5},jUt={...Gse,binSpacing:1},UUt={...Gse,thickness:1};function zUt(e){return X0(e)?e.type:e}function qLe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function Yse({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!Gp(r)||i)return"always-valid";const s=qLe(Hi("invalid",e,t),{isPath:Bx(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function VUt(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function WLe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function GLe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=Kp(t),u=Vj(a==null?void 0:a.aggregate),l=Yse({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const f=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:Gj(Vt(a,{expr:"datum"}),!1),...HUt(f,n,r)}}}function HUt(e,t,n){if(CUt(e)){const{value:r}=e;return pn(r)?{signal:r.signal}:{value:r}}return WLe({scale:t,scaleName:n,mode:"zeroOrMin"})}function Kse(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=eT(t),u=Xse(e),l=GLe({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return l!==void 0?[l,u]:u}function qUt(e){const{datum:t}=e;return rT(t)?mE(t):`${Yi(t)}`}function Uw(e,t,n,r){const i={};if(t&&(i.scale=t),xg(e)){const{datum:s}=e;rT(s)?i.signal=mE(s):pn(s)?i.signal=s.signal:rO(s)?i.signal=s.expr:i.value=s}else i.field=Vt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function f8({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!pn(o)&&0<o&&o<1?"datum":void 0,u=Vt(t,{expr:a,suffix:i}),l=n!==void 0?Vt(n,{expr:a}):Vt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=pn(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function WUt({scaleName:e,fieldDef:t}){const n=Vt(t,{expr:"datum"}),r=Vt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Xse({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(Qn(t)){const f=o==null?void 0:o.get("type");if(tc(t)){c??(c=Qb({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(hs(d)||c&&h&&p===iA)return a!=null&&a.impute?Uw(t,s,{binSuffix:"mid"},{offset:u}):c&&!Wa(f)?f8({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Uw(t,s,lO(t,e)?{binSuffix:"range"}:{},{offset:u});if(du(d)){if($t(n))return f8({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Pt(_Le(e===$s?am:mg))}}return Uw(t,s,Wa(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Yp(t)){const f=t.value,d=u?{offset:u}:{};return{...iN(e,f),...d}}}return cr(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function iN(e,t){return Ir(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ir(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:_s(t)}function vE(e){return e&&e!=="number"&&e!=="time"}function YLe(e,t,n){return`${e}(${t}${n?`, ${Yi(n)}`:""})`}const GUt="  ";function Qse({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(vE(n))return kp({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=KLe(e,r,i),a=oA(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return kp({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return kp({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&$t(e)&&e.timeUnit===void 0)return kp({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(uA(e)){const c=KUt({field:o,timeUnit:$t(e)?(u=Ha(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:sT(e)&&((l=e.scale)==null?void 0:l.type)===mu.UTC});return c?{signal:c}:void 0}if(t=FK({type:a,specifiedFormat:t,config:s,normalizeStack:i}),$t(e)&&hs(e.bin)){const c=Vt(e,{expr:r,binSuffix:"end"});return{signal:sO(o,c,t,n,s)}}else return t||oA(e)==="quantitative"?{signal:`${JLe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function KLe(e,t,n){return $t(e)?n?`${Vt(e,{expr:t,suffix:"end"})}-${Vt(e,{expr:t,suffix:"start"})}`:Vt(e,{expr:t}):qUt(e)}function kp({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=KLe(e,r,i)),o!=="datum.value"&&$t(e)&&hs(e.bin)){const a=Vt(e,{expr:r,binSuffix:"end"});return{signal:sO(o,a,t,n,s)}}return{signal:YLe(n,o,t)}}function XLe(e,t,n,r,i,s){var o;if(!(Gt(r)&&vE(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&oA(e)==="quantitative"&&(i.normalizedNumberFormatType&&aA(e)&&e.stack==="normalize"||i.numberFormatType))){if(aA(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return FK({type:"quantitative",config:i,normalizeStack:!0});if(uA(e)){const a=$t(e)?(o=Ha(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:YUt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return FK({type:t,specifiedFormat:n,config:i})}}function QLe(e,t,n){var r;if(e&&(pn(e)||e==="number"||e==="time"))return e;if(uA(t)&&n!=="time"&&n!=="utc")return $t(t)&&((r=Ha(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function FK({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Gt(t))return t;if(e===gE)return r?n.normalizedNumberFormat:n.numberFormat}function YUt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:kLe(t)}:r?void 0:n.timeFormat)}function JLe(e,t){return`format(${e}, "${t||""}")`}function nye(e,t,n,r){return vE(n)?YLe(n,e,t):JLe(e,(Gt(t)?t:void 0)??r.numberFormat)}function sO(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return sO(e,t,i.numberFormat,i.numberFormatType,i);const s=nye(e,n,r,i),o=nye(t,n,r,i);return`${Gj(e,!1)} ? "null" : ${s} + "${GUt}" + ${o}`}function KUt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Gt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):rUt(t,e,s)}const Jj="min",XUt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function rye(e){return Jt(XUt,e)}function QUt(e){return Rt(e,"encoding")}function Hy(e){return e&&(e.op==="count"||Rt(e,"field"))}function ZLe(e){return e&&ft(e)}function oO(e){return Rt(e,"row")||Rt(e,"column")}function Jse(e){return Rt(e,"header")}function Zj(e){return Rt(e,"facet")}function JUt(e){return Rt(e,"param")}function ZUt(e){return!Gt(e)&&Rt(e,"repeat")}function iye(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Zse(e){return Rt(e,"sort")}function Qb({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Qn(e)&&e.bandPosition!==void 0)return e.bandPosition;if($t(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return K0("timeUnitBandPosition",n,r);if(hs(s))return .5}}function e$e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=cf(e),u=Hi(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if($t(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:K0("timeUnitBandSize",r,i)};if(hs(h)&&!Wa(s))return{band:1}}if(bP(r.type))return s?Wa(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function t$e(e,t,n,r){return hs(e.bin)||e.timeUnit&&tc(e)&&e.type==="temporal"?Qb({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function n$e(e){return Rt(e,"sort")&&!Rt(e,"field")}function aO(e){return Rt(e,"condition")}function e7(e){const t=e==null?void 0:e.condition;return!!t&&!ft(t)&&$t(t)}function uO(e){const t=e==null?void 0:e.condition;return!!t&&!ft(t)&&Qn(t)}function ezt(e){const t=e==null?void 0:e.condition;return!!t&&(ft(t)||Yp(t))}function $t(e){return Rt(e,"field")||(e==null?void 0:e.aggregate)==="count"}function oA(e){return e==null?void 0:e.type}function xg(e){return Rt(e,"datum")}function sb(e){return tc(e)&&!h8(e)||d8(e)}function sye(e){return tc(e)&&e.type==="quantitative"&&!e.bin||d8(e)}function d8(e){return xg(e)&&bi(e.datum)}function Qn(e){return $t(e)||xg(e)}function tc(e){return e&&(Rt(e,"field")||e.aggregate==="count")&&Rt(e,"type")}function Yp(e){return Rt(e,"value")}function sT(e){return Rt(e,"scale")||Rt(e,"sort")}function aA(e){return Rt(e,"axis")||Rt(e,"stack")||Rt(e,"impute")}function r$e(e){return Rt(e,"legend")}function i$e(e){return Rt(e,"format")||Rt(e,"formatType")}function tzt(e){return Xc(e,["legend","axis","header","scale"])}function nzt(e){return Rt(e,"op")}function Vt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(izt(e))n=GMe("count");else{let o;if(!t.nofn)if(nzt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;hs(a)?(o=aLe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Fx(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):f1(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!iT(l)&&(o=iUt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?EI(n):t.expr?HMe(n,t.expr)+s:mh(n)+s}function h8(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return $t(e)&&!!e.bin;case"temporal":return!1}throw new Error(yLe(e.type))}function rzt(e){var t;return sT(e)&&sA((t=e.scale)==null?void 0:t.type)}function izt(e){return e.aggregate==="count"}function szt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(hs(r))return`${n} (binned)`;if(i&&!iT(i)){const a=(o=Ha(i))==null?void 0:o.unit;if(a)return`${n} (${Wj(a).join("-")})`}else if(s)return Fx(s)?`${n} for max ${s.argmax}`:f1(s)?`${n} for min ${s.argmin}`:`${Z3(s)} of ${n}`;return n}function ozt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Fx(t))return`${i} for argmax(${t.argmax})`;if(f1(t))return`${i} for argmin(${t.argmin})`;const s=r&&!iT(r)?Ha(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||hs(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const s$e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return ozt(e);default:return szt(e,t)}};let o$e=s$e;function a$e(e){o$e=e}function azt(){a$e(s$e)}function eC(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=eoe(e))==null?void 0:a.title;if(!$t(e))return i??e.title;const s=e,o=r?toe(s,t):void 0;return n?Ro(i,s.title,o):i??s.title??o}function eoe(e){if(aA(e)&&e.axis)return e.axis;if(r$e(e)&&e.legend)return e.legend;if(Jse(e)&&e.header)return e.header}function toe(e,t){return o$e(e,t)}function p8(e){if(i$e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=eoe(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function uzt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Zse(e)&&ft(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Fx(n)&&!f1(n))return"quantitative";if(sT(e)&&((s=e.scale)!=null&&s.type))switch(LK[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Kp(e){if($t(e))return e;if(e7(e))return e.condition}function fa(e){if(Qn(e))return e;if(uO(e))return e.condition}function u$e(e,t,n,r={}){if(Gt(e)||bi(e)||kx(e)){const i=Gt(e)?"string":bi(e)?"number":"boolean";return Pt(a7t(t,i,e)),{value:e}}return Qn(e)?m8(e,t,n,r):uO(e)?{...e,condition:m8(e.condition,t,n,r)}:e}function m8(e,t,n,r){if(i$e(e)){const{format:i,formatType:s,...o}=e;if(vE(s)&&!n.customFormatTypes)return Pt(Qge(t)),m8(o,t,n,r)}else{const i=aA(e)?"axis":r$e(e)?"legend":Jse(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(vE(o)&&!n.customFormatTypes)return Pt(Qge(t)),m8({...e,[i]:a},t,n,r)}}return $t(e)?noe(e,t,r):lzt(e)}function lzt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=bi(n)?"quantitative":Gt(n)?"nominal":rT(n)?"temporal":void 0,{...e,type:t}}function noe(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Ase(r)&&!Fx(r)&&!f1(r)&&(Pt(l7t(r)),delete a.aggregate),i&&(a.timeUnit=Ha(i)),o&&(a.field=`${o}`),hs(s)&&(a.bin=t7(s,t)),du(s)&&!Do(t)&&Pt(U7t(t)),tc(a)){const{type:u}=a,l=dUt(u);u!==l&&(a.type=l),u!=="quantitative"&&Vj(r)&&(Pt(u7t(u,r)),a.type="quantitative")}else if(!tLe(t)){const u=uzt(a,t);a.type=u}if(tc(a)){const{compatible:u,warning:l}=czt(a,t)||{};u===!1&&Pt(l)}if(Zse(a)&&Gt(a.sort)){const{sort:u}=a;if(rye(u))return{...a,sort:{encoding:u}};const l=u.substring(1);if(u.charAt(0)==="-"&&rye(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Jse(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function t7(e,t){return kx(e)?{maxbins:zge(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:zge(t)}:e}const GS={compatible:!0};function czt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case zy:case Vy:case $j:return h8(e)?GS:{compatible:!1,warning:h7t(t)};case $s:case Ka:case Nx:case TI:case uf:case gg:case yg:case eO:case tO:case Fj:case hE:case Bj:case jj:case ZE:case Rh:case um:case Uj:return GS;case cm:case gh:case lm:case fm:return n!==gE?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:GS;case $1:case Ox:case Mx:case Lx:case L1:case M1:case O1:case am:case mg:case Px:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:GS;case lf:case $x:return!h8(e)&&!rzt(e)?{compatible:!1,warning:p7t(t)}:GS;case rA:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:GS}}function uA(e){const{formatType:t}=p8(e);return t==="time"||!t&&fzt(e)}function fzt(e){return e&&(e.type==="temporal"||$t(e)&&!!e.timeUnit)}function n7(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=Ha(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return rO(e)?a=e.expr:pn(e)?a=e.signal:rT(e)?(o=!0,a=mE(e)):(Gt(e)||bi(e))&&o&&(a=`datetime(${Yi(e)})`,Z7t(s)&&(bi(e)&&e<1e4||Gt(e)&&isNaN(Date.parse(e)))&&(a=mE({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Yi(e)}function l$e(e,t){const{type:n}=e;return t.map(r=>{const i=$t(e)&&!iT(e.timeUnit)?e.timeUnit:void 0,s=n7(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function lO(e,t){return hs(e.bin)?bg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const oye={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function cO(e){return e==null?void 0:e.condition}const c$e=["domain","grid","labels","ticks","title"],dzt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},f$e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},hzt={...f$e,style:1,labelExpr:1,encoding:1};function aye(e){return Jt(hzt,e)}const pzt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},d$e=It(pzt);function B1(e){return Rt(e,"mark")}class r7{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return B1(t)?zUt(t.mark)===this.name:!1}}function zw(e,t){const n=e&&e[t];return n?ft(n)?tA(n,r=>!!r.field):$t(n)||e7(n):!1}function h$e(e,t){const n=e&&e[t];return n?ft(n)?tA(n,r=>!!r.field):$t(n)||xg(n)||uO(n):!1}function p$e(e,t){if(Do(t)){const n=e[t];if(($t(n)||xg(n))&&(OLe(n.type)||$t(n)&&n.timeUnit)){const r=wse(t);return h$e(e,r)}}return!1}function m$e(e){return tA(ljt,t=>{if(zw(e,t)){const n=e[t];if(ft(n))return tA(n,r=>!!r.aggregate);{const r=Kp(n);return r&&!!r.aggregate}}return!1})}function g$e(e,t){const n=[],r=[],i=[],s=[],o={};return roe(e,(a,u)=>{if($t(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=eoe(a),m=p==null?void 0:p.title;let g=Vt(a,{forAs:!0});const v={...m?[]:{title:eC(a,t,{allowDisabling:!0})},...h,field:g};if(c){let b;if(Fx(c)?(b="argmax",g=Vt({op:"argmax",field:c.argmax},{forAs:!0}),v.field=`${g}.${l}`):f1(c)?(b="argmin",g=Vt({op:"argmin",field:c.argmin},{forAs:!0}),v.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const w={op:b,as:g};l&&(w.field=l),s.push(w)}}else if(n.push(g),tc(a)&&hs(f)){if(r.push({bin:f,field:l,as:g}),n.push(Vt(a,{binSuffix:"end"})),lO(a,u)&&n.push(Vt(a,{binSuffix:"range"})),Do(u)){const b={field:`${g}_end`};o[`${u}2`]=b}v.bin="binned",tLe(u)||(v.type=gE)}else if(d&&!iT(d)){i.push({timeUnit:d,field:l,as:g});const b=tc(a)&&a.type!==iA&&"time";b&&(u===eO||u===hE?v.formatType=b:xjt(u)?v.legend={formatType:b,...v.legend}:Do(u)&&(v.axis={formatType:b,...v.axis}))}o[u]=v}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function mzt(e,t,n){const r=wjt(t,n);if(r){if(r==="binned"){const i=e[t===am?$s:Ka];return!!($t(i)&&$t(e[t])&&du(i.bin))}}else return!1;return!0}function gzt(e,t,n,r){const i={};for(const s of It(e))eLe(s)||Pt(d7t(s));for(let s of mjt){if(!e[s])continue;const o=e[s];if(nO(s)){const a=pjt(s),u=i[a];if($t(u)&&fUt(u.type)&&$t(o)&&!u.timeUnit){Pt(o7t(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Pt(s7t),s=Rh),!mzt(e,s,t)){Pt(qj(s,t));continue}if(s===L1&&t==="line"){const a=Kp(e[s]);if(a!=null&&a.aggregate){Pt(f7t);continue}}if(s===uf&&(n?"fill"in e:"stroke"in e)){Pt(vLe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===tO||s===rA&&!ft(o)&&!Yp(o)||s===hE&&ft(o)){if(o){if(s===rA){const a=e[s];if(n$e(a)){i[s]=a;continue}}i[s]=Wt(o).reduce((a,u)=>($t(u)?a.push(noe(u,s)):Pt(MK(u,s)),a),[])}}else{if(s===hE&&o===null)i[s]=null;else if(!$t(o)&&!xg(o)&&!Yp(o)&&!aO(o)&&!pn(o)){Pt(MK(o,s));continue}i[s]=u$e(o,s,r)}}return i}function i7(e,t){const n={};for(const r of It(e)){const i=u$e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function yzt(e){const t=[];for(const n of It(e))if(zw(e,n)){const r=e[n],i=Wt(r);for(const s of i)$t(s)?t.push(s):e7(s)&&t.push(s.condition)}return t}function roe(e,t,n){if(e)for(const r of It(e)){const i=e[r];if(ft(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function vzt(e,t,n,r){return e?It(e).reduce((i,s)=>{const o=e[s];return ft(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function y$e(e,t){return It(t).reduce((n,r)=>{switch(r){case $s:case Ka:case Bj:case Uj:case jj:case am:case mg:case Nx:case TI:case Rh:case M1:case um:case O1:case Px:case lm:case cm:case fm:case gh:case eO:case lf:case ZE:case hE:return n;case rA:if(e==="line"||e==="trail")return n;case tO:case Fj:{const i=t[r];if(ft(i)||$t(i))for(const s of Wt(i))s.aggregate||n.push(Vt(s,{}));return n}case L1:if(e==="trail")return n;case uf:case gg:case yg:case $1:case Ox:case Mx:case $x:case Lx:{const i=Kp(t[r]);return i&&!i.aggregate&&n.push(Vt(i,{})),n}}},[])}function bzt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ft(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ft(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function BK(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${ioe(t)}`:"";return{field:o+t.field,type:t.type,title:pn(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=yzt(n).map(tzt);return{tooltip:[...i,...p0(s,Lr)]}}function ioe(e){const{title:t,field:n}=e;return Ro(t,n)}function soe(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=ioe(n);return v$e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Gt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function v$e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...X0(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...kx(e[t])?{}:e[t]}}]:[]}function b$e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:N6(s,n),continuousAxisChannelDef2:N6(o,n),continuousAxisChannelDefError:N6(a,n),continuousAxisChannelDefError2:N6(u,n),continuousAxis:i}}function N6(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Pt(j7t(n,t)),r}else return e}function x$e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(X0(n)&&n.orient)return n.orient;if(sb(i)){if(sb(s)){const o=$t(i)&&i.aggregate,a=$t(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return uA(s)&&!uA(i)?"horizontal":"vertical"}return"horizontal"}else{if(sb(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const g8="boxplot",xzt=["box","median","outliers","rule","ticks"],_zt=new r7(g8,w$e);function _$e(e){return bi(e)?"tukey":e}function w$e(e,{config:t}){e={...e,encoding:i7(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=X0(n)?n:{type:n};i&&Pt(gLe("boxplot"));const u=a.extent??t.boxplot.extent,l=Hi("size",a,t),c=a.invalid,f=_$e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:v,aggregate:b,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:T,customTooltipWithoutAggregatedField:C}=wzt(e,u,t),I=EI(m.field),{color:R,size:N,...O}=w,L=Ge=>soe(a,g,m,Ge,t.boxplot),B=L(O),F=L(w),H=(Ht(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",Q=L({...O,...N?{size:N}:{},color:{condition:{test:`${$i(`lower_box_${m.field}`)} >= ${$i(`upper_box_${m.field}`)}`,...R||{value:H}}}}),J=BK([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,w),ne={type:"tick",color:"black",opacity:1,orient:E,invalid:c,aria:!1},Z=f==="min-max"?J:BK([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,w),ie=[...B({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Z}),...B({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Z}),...B({partName:"ticks",mark:ne,positionPrefix:"lower_whisker",extraEncoding:Z}),...B({partName:"ticks",mark:ne,positionPrefix:"upper_whisker",extraEncoding:Z})],q=[...f!=="tukey"?ie:[],...F({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:T,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:J}),...Q({partName:"median",mark:{type:"tick",invalid:c,...Ht(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:E,aria:!1},positionPrefix:"mid_box",extraEncoding:J})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:q};const U=$i(`lower_box_${m.field}`),G=$i(`upper_box_${m.field}`),V=`(${G} - ${U})`,Y=`${U} - ${u} * ${V}`,ee=`${G} + ${u} * ${V}`,ae=$i(m.field),_e={joinaggregate:E$e(m.field),groupby:v},pe={transform:[{filter:`(${Y} <= ${ae}) && (${ae} <= ${ee})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${I}`},{op:"max",field:m.field,as:`upper_whisker_${I}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${I}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${I}`},...b],groupby:v}],layer:ie},{tooltip:Te,...Le}=O,{scale:ye,axis:he}=m,$e=ioe(m),De=Xc(he,["title"]),tt=v$e(a,"outliers",t.boxplot,{transform:[{filter:`(${ae} < ${Y}) || (${ae} > ${ee})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...$e!==void 0?{title:$e}:{},...ye!==void 0?{scale:ye}:{},...Gi(De)?{}:{axis:De}},...Le,...R?{color:R}:{},...C?{tooltip:C}:{}}})[0];let it;const Me=[...d,...h,_e];return tt?it={transform:Me,layer:[tt,pe]}:(it=pe,it.transform.unshift(...Me)),{...o,layer:[it,{transform:p,layer:q}]}}function E$e(e){const t=EI(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function wzt(e,t,n){const r=x$e(e,g8),{continuousAxisChannelDef:i,continuousAxis:s}=b$e(e,r,g8),o=i.field,a=EI(o),u=_$e(t),l=[...E$e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`${$i(`upper_box_${a}`)} - ${$i(`lower_box_${a}`)}`,as:`iqr_${a}`},{calculate:`min(${$i(`upper_box_${a}`)} + ${$i(`iqr_${a}`)} * ${t}, ${$i(`max_${a}`)})`,as:`upper_whisker_${a}`},{calculate:`max(${$i(`lower_box_${a}`)} - ${$i(`iqr_${a}`)} * ${t}, ${$i(`min_${a}`)})`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=bzt(d),{bins:m,timeUnits:g,aggregate:v,groupby:b,encoding:w}=g$e(p,n),E=r==="vertical"?"horizontal":"vertical",T=r,C=[...m,...g,{aggregate:[...v,...l],groupby:b},...c];return{bins:m,timeUnits:g,transform:C,groupby:b,aggregate:v,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:w,ticksOrient:E,boxOrient:T,customTooltipWithoutAggregatedField:h}}const ooe="errorbar",Ezt=["ticks","rule"],Tzt=new r7(ooe,T$e);function T$e(e,{config:t}){e={...e,encoding:i7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=S$e(e,ooe,t);delete s.size;const c=soe(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Szt(e,t){const{encoding:n}=e;if(Czt(n))return{orient:x$e(e,t),inputType:"raw"};const r=Azt(n),i=Izt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(Qn(a)&&Qn(u))throw new Error(`${t} cannot have both x2 and y2`);if(Qn(a)){if(sb(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Qn(u)){if(sb(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(Qn(u)&&!Qn(a))throw new Error(`${t} cannot have xError2 without xError`);if(Qn(c)&&!Qn(l))throw new Error(`${t} cannot have yError2 without yError`);if(Qn(a)&&Qn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Qn(a)){if(sb(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Qn(l)){if(sb(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Czt(e){return(Qn(e.x)||Qn(e.y))&&!Qn(e.x2)&&!Qn(e.y2)&&!Qn(e.xError)&&!Qn(e.xError2)&&!Qn(e.yError)&&!Qn(e.yError2)}function Azt(e){return Qn(e.x2)||Qn(e.y2)}function Izt(e){return Qn(e.xError)||Qn(e.xError2)||Qn(e.yError)||Qn(e.yError2)}function S$e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=X0(r)?r:{type:r};s&&Pt(gLe(t));const{orient:l,inputType:c}=Szt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=b$e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:v,tooltipSummary:b,tooltipTitleWithFieldName:w}=kzt(u,f,d,h,p,c,t,n),{[m]:E,[m==="x"?"x2":"y2"]:T,[m==="x"?"xError":"yError"]:C,[m==="x"?"xError2":"yError2"]:I,...R}=i,{bins:N,timeUnits:O,aggregate:L,groupby:B,encoding:F}=g$e(R,n),H=[...L,...g],Q=c!=="raw"?[]:B,J=BK(b,f,F,w);return{transform:[...a.transform??[],...N,...O,...H.length===0?[]:[{aggregate:H,groupby:Q}],...v],groupby:Q,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:F,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:J}}function kzt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Pt(B7t(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`${$i(`center_${c}`)} + ${$i(`extent_${c}`)}`,as:`upper_${c}`},{calculate:`${$i(`center_${c}`)} - ${$i(`extent_${c}`)}`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Z3(h)},{fieldPrefix:"upper_",titlePrefix:uye(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:uye(h,p,"-")}],d=!0;else{let m,g,v;p==="ci"?(m="mean",g="ci0",v="ci1"):(m="median",g="q1",v="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:v,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:eC({field:c,aggregate:v,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:eC({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:eC({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Pt(F7t(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:$i(n.field),as:`upper_${c}`},{calculate:$i(c),as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`${$i(c)} + ${$i(r.field)}`,as:`upper_${c}`}],i?l.push({calculate:`${$i(c)} + ${$i(i.field)}`,as:`lower_${c}`}):l.push({calculate:`${$i(c)} - ${$i(r.field)}`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:dE(dE(h.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function uye(e,t,n){return`${Z3(e)} ${n} ${t}`}const aoe="errorband",Rzt=["band","borders"],Dzt=new r7(aoe,C$e);function C$e(e,{config:t}){e={...e,encoding:i7(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=S$e(e,aoe,t),l=o,c=soe(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Pt(Zge("interpolate")):l.tension&&Pt(Zge("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const A$e={};function uoe(e,t,n){const r=new r7(e,t);A$e[e]={normalizer:r,parts:n}}function Nzt(){return It(A$e)}uoe(g8,w$e,xzt);uoe(ooe,T$e,Ezt);uoe(aoe,C$e,Rzt);const Pzt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],I$e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},k$e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Ozt=It(I$e),Mzt=It(k$e),Lzt={header:1,headerRow:1,headerColumn:1,headerFacet:1},R$e=It(Lzt),D$e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],$zt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Fzt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Xp="_vgsid_",Bzt={point:{on:"click",fields:[Xp],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function loe(e){return e==="legend"||!!(e!=null&&e.legend)}function $H(e){return loe(e)&&Ht(e)}function coe(e){return!!(e!=null&&e.select)}function N$e(e){const t=[];for(const n of e||[]){if(coe(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function jzt(e){return s7(e)||doe(e)||foe(e)}function foe(e){return Rt(e,"concat")}function s7(e){return Rt(e,"vconcat")}function doe(e){return Rt(e,"hconcat")}function P$e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Q0(e){return Rt(e,"step")}function lye(e){return Rt(e,"view")||Rt(e,"width")||Rt(e,"height")}const cye=20,Uzt={align:1,bounds:1,center:1,columns:1,spacing:1},zzt=It(Uzt);function Vzt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(Zj(e)&&!oO(e.facet)||foe(e))&&(i.columns=o),s7(e)&&(i.columns=1);for(const a of zzt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=bi(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function jK(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function UK(e,t){const n=y8(e,t);return Q0(n)?n.step:O$e}function y8(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Ro(n,{step:e.step})}const O$e=20,Hzt={continuousWidth:200,continuousHeight:200,step:O$e},qzt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Hzt,mark:LUt,arc:{},area:{},bar:jUt,circle:{},geoshape:{},image:{},line:{},point:{},rect:Gse,rule:{color:"black"},square:{},text:{color:"black"},tick:UUt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:yUt,projection:{},legend:$zt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Bzt,style:{},title:{},facet:{spacing:cye},concat:{spacing:cye},normalizedNumberFormat:".0%"},ny=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],fye={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},dye={blue:ny[0],orange:ny[1],red:ny[2],teal:ny[3],green:ny[4],yellow:ny[5],purple:ny[6],pink:ny[7],brown:ny[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Wzt(e={}){return{signals:[{name:"color",value:Ht(e)?{...dye,...e}:dye}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Gzt(e){return{signals:[{name:"fontSize",value:Ht(e)?{...fye,...e}:fye}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Yzt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function M$e(e){const t=It(e||{}),n={};for(const r of t){const i=e[r];n[r]=cO(i)?lLe(i):Yf(i)}return n}function Kzt(e){const t=It(e),n={};for(const r of t)n[r]=M$e(e[r]);return n}const Xzt=[...HLe,...d$e,...R$e,"background","padding","legend","lineBreak","scale","style","title","view"];function L$e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=dI({},qn(qzt),n?Yzt(n):{},t?Wzt(t):{},r?Gzt(r):{},s||{});i&&hI(o,"selection",i,!0);const a=Xc(o,Xzt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Yf(o[u]));for(const u of HLe)o[u]&&(a[u]=pu(o[u]));for(const u of d$e)o[u]&&(a[u]=M$e(o[u]));for(const u of R$e)o[u]&&(a[u]=pu(o[u]));if(o.legend&&(a.legend=pu(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=pu(u,{level:1});a.scale={...pu(l),...It(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=Kzt(o.style)),o.title&&(a.title=pu(o.title)),o.view&&(a.view=pu(o.view)),a}const Qzt=new Set(["view",...RUt]),Jzt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Zzt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...MUt};function eVt(e){e=qn(e);for(const t of Jzt)delete e[t];if(e.axis)for(const t in e.axis)cO(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Pzt)delete e.legend[t];if(e.mark){for(const t of tye)delete e.mark[t];e.mark.tooltip&&Ht(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(N$e(e.params)),delete e.params);for(const t of Qzt){for(const r of tye)delete e[t][r];const n=Zzt[t];if(n)for(const r of n)delete e[t][r];nVt(e,t)}for(const t of Nzt())delete e[t];tVt(e);for(const t in e)Ht(e[t])&&Gi(e[t])&&delete e[t];return Gi(e)?void 0:e}function tVt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=uLe(e.title);Gi(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Gi(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Gi(r)?delete e.title:e.title=r}function nVt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Gi(s)||(e.style[n??t]=s),delete e[t]}function o7(e){return Rt(e,"layer")}function rVt(e){return Rt(e,"repeat")}function iVt(e){return!ft(e.repeat)&&Rt(e.repeat,"layer")}class hoe{map(t,n){return Zj(t)?this.mapFacet(t,n):rVt(t)?this.mapRepeat(t,n):doe(t)?this.mapHConcat(t,n):s7(t)?this.mapVConcat(t,n):foe(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(o7(t))return this.mapLayer(t,n);if(B1(t))return this.mapUnit(t,n);throw new Error(Ise(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const sVt={zero:1,center:1,normalize:1};function oVt(e){return Jt(sVt,e)}const aVt=new Set([ULe,Kj,Yj,c8,Qj,qse,Wse,Xj,zLe,Hse]),uVt=new Set([Kj,Yj,ULe]);function YS(e){return $t(e)&&oA(e)==="quantitative"&&!e.bin}function hye(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if($t(o)&&$t(a))if(YS(o)&&YS(a)){if(o.stack)return t;if(a.stack)return i;const u=$t(o)&&!!o.aggregate,l=$t(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(YS(o))return t;if(YS(a))return i}else{if(YS(o))return s&&n==="vertical"?void 0:t;if(YS(a))return s&&n==="horizontal"?void 0:i}}function lVt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function $$e(e,t){var m,g;const n=X0(e)?e:{type:e},r=n.type;if(!aVt.has(r))return null;const i=hye(t,"x",n)||hye(t,"theta",n);if(!i)return null;const s=t[i],o=$t(s)?Vt(s,{}):void 0,a=lVt(i),u=[],l=new Set;if(t[a]){const v=t[a],b=$t(v)?Vt(v,{}):void 0;b&&b!==o&&(u.push(a),l.add(b))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=$t(f)?Vt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=gjt.reduce((v,b)=>{if(b!=="tooltip"&&zw(t,b)){const w=t[b];for(const E of Wt(w)){const T=Kp(E);if(T.aggregate)continue;const C=Vt(T,{});(!C||!l.has(C))&&v.push({channel:b,fieldDef:T})}}return v},[]);let p;return s.stack!==void 0?kx(s.stack)?p=s.stack?"zero":null:p=s.stack:uVt.has(r)&&(p="zero"),!p||!oVt(p)||m$e(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==mu.LINEAR&&s!=null&&s.stack&&Pt(M7t(s.scale.type)),Qn(t[vg(i)])?(s.stack!==void 0&&Pt(O7t(i)),null):($t(s)&&s.aggregate&&!kjt.has(s.aggregate)&&Pt(L7t(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Bx(r),stackBy:h,offset:p}))}function F$e(e,t,n){const r=pu(e),i=Hi("orient",r,n);if(r.orient=hVt(r.type,t,i),i!==void 0&&i!==r.orient&&Pt(v7t(r.orient,i)),r.type==="bar"&&r.orient){const u=Hi("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:FUt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Hi("opacity",r,n),o=Hi("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=fVt(r.type,t)),Hi("cursor",r,n)===void 0&&(r.cursor=cVt(r,t,n)),r}function cVt(e,t,n){return t.href||e.href||Hi("href",e,n)?"pointer":e.cursor}function fVt(e,t){if(Ir([Qj,Hse,qse,Wse],e)&&!m$e(t))return .7}function dVt(e,t,{graticule:n}){if(n)return!1;const r=K0("filled",e,t),i=e.type;return Ro(r,i!==Qj&&i!==Xj&&i!==c8)}function hVt(e,t,n){switch(e){case Qj:case qse:case Wse:case zLe:case IUt:case AUt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case Kj:if($t(r)&&(du(r.bin)||$t(i)&&i.aggregate&&!r.aggregate))return"vertical";if($t(i)&&(du(i.bin)||$t(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return($t(r)&&r.type===gE&&!hs(r.bin)||d8(r))&&$t(i)&&du(i.bin)?"horizontal":"vertical";if(!o)return($t(i)&&i.type===gE&&!hs(i.bin)||d8(i))&&$t(r)&&du(r.bin)?"vertical":"horizontal"}case c8:if(s&&!($t(r)&&du(r.bin))&&o&&!($t(i)&&du(i.bin)))return;case Yj:if(o)return $t(i)&&du(i.bin)?"horizontal":"vertical";if(s)return $t(r)&&du(r.bin)?"vertical":"horizontal";if(e===c8){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case Xj:case Hse:{const a=sye(r),u=sye(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=tc(r)&&r.type===iA,c=tc(i)&&i.type===iA;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function pVt(e){const{point:t,line:n,...r}=e;return It(r).length>1?r:r.type}function mVt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Xc(e[t],["point","line"])});return e}function FH(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Ht(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Ht(t.point)?t.point:{}:void 0}function pye(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class gVt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(B1(t)){const{mark:r,encoding:i}=t,s=X0(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!FH(s,n[s.type],i);case"area":return!!FH(s,n[s.type],i)||!!pye(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=i7(l,i),d=X0(a)?a:{type:a},h=FH(d,i[d.type],f),p=d.type==="area"&&pye(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:pVt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Xc(f,["shape"])}],g=$$e(F$e(d,f,i),f);let v=f;if(g){const{fieldChannel:b,offset:w}=g;v={...f,[b]:{...f[b],...w?{stack:w}:{}}}}return v=Xc(v,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...eA(d,["clip","interpolate","tension","tooltip"]),...p},encoding:v}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...eA(d,["clip","tooltip"]),...h},encoding:v}),r({...c,layer:m},{...n,config:mVt(i)})}}function yVt(e,t){return t?oO(e)?j$e(e,t):B$e(e,t):e}function BH(e,t){return t?j$e(e,t):e}function zK(e,t,n){const r=t[e];if(ZUt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Pt(Kjt(r.repeat));return}return t}function B$e(e,t){if(e=zK("field",e,t),e!==void 0){if(e===null)return null;if(Zse(e)&&Hy(e.sort)){const n=zK("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function mye(e,t){if($t(e))return B$e(e,t);{const n=zK("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function gye(e,t){if(Qn(e)){const n=mye(e,t);if(n)return n;if(aO(e))return{condition:e.condition}}else{if(uO(e)){const n=mye(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function j$e(e,t){const n={};for(const r in e)if(Rt(e,r)){const i=e[r];if(ft(i))n[r]=i.map(s=>gye(s,t)).filter(s=>s);else{const s=gye(i,t);s!==void 0&&(n[r]=s)}}return n}class vVt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(B1(t)){const{encoding:n,mark:r}=t;if(r==="line"||X0(r)&&r.type==="line")for(const i of hjt){const s=eT(i),o=n[s];if(n[i]&&($t(o)&&!du(o.bin)||xg(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Pt(y7t(!!i.x2,!!i.y2)),r({...t,mark:Ht(s)?{...s,type:"rule"}:"rule"},n)}}class bVt extends hoe{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[_zt,Tzt,Dzt,new gVt,new vVt]}map(t,n){if(B1(t)){const r=zw(t.encoding,zy),i=zw(t.encoding,Vy),s=zw(t.encoding,$j);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=BH(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return iVt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ms(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!ft(r)&&t.columns&&(t=Xc(t,["columns"]),Pt(Kge("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!ft(r)&&r.row||[u?u.row:null],f=!ft(r)&&r.column||[u?u.column:null],d=ft(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const v={repeat:p,row:m,column:g,layer:u.layer},b=(i.name?`${i.name}_`:"")+l+"child__"+(ft(r)?`${Ms(p)}`:(r.row?`row_${Ms(m)}`:"")+(r.column?`column_${Ms(g)}`:"")),w=this.map(i,{...n,repeater:v,repeaterPrefix:b});w.name=b,a.push(Xc(w,["data"]))}const h=ft(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return oO(r)&&t.columns&&(t=Xc(t,["columns"]),Pt(Kge("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=vye({parentProjection:o,projection:i}),l=yye({parentEncoding:s,encoding:BH(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),v=BH(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:v,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Pt(m7t([...r?[zy]:[],...i?[Vy]:[]]));const o={},a={};for(const u of[zy,Vy]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:yVt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:yye({parentEncoding:n,encoding:s,layer:!0}),parentProjection:vye({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function yye({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...It(e),...It(t)]);for(const s of i){const o=t[s],a=e[s];if(Qn(o)){const u={...a,...o};r[s]=u}else uO(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Yp(a)||pn(a)||Qn(a)||ft(a))&&(r[s]=a)}}else r=t;return!r||Gi(r)?void 0:r}function vye(e){const{parentProjection:t,projection:n}=e;return t&&n&&Pt(i7t({parentProjection:t,projection:n})),n??t}function poe(e){return Rt(e,"filter")}function xVt(e){return Rt(e,"stop")}function U$e(e){return Rt(e,"lookup")}function _Vt(e){return Rt(e,"data")}function wVt(e){return Rt(e,"param")}function EVt(e){return Rt(e,"pivot")}function TVt(e){return Rt(e,"density")}function SVt(e){return Rt(e,"quantile")}function CVt(e){return Rt(e,"regression")}function AVt(e){return Rt(e,"loess")}function IVt(e){return Rt(e,"sample")}function kVt(e){return Rt(e,"window")}function RVt(e){return Rt(e,"joinaggregate")}function DVt(e){return Rt(e,"flatten")}function NVt(e){return Rt(e,"calculate")}function z$e(e){return Rt(e,"bin")}function PVt(e){return Rt(e,"impute")}function OVt(e){return Rt(e,"timeUnit")}function MVt(e){return Rt(e,"aggregate")}function LVt(e){return Rt(e,"stack")}function $Vt(e){return Rt(e,"fold")}function FVt(e){return Rt(e,"extent")&&!Rt(e,"density")&&!Rt(e,"regression")}function BVt(e){return e.map(t=>poe(t)?{filter:J2(t.filter,cUt)}:t)}class jVt extends hoe{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=bye(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=bye(t,n),t.encoding){const r={};for(const[i,s]of Kb(t.encoding))r[i]=V$e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Kb(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Tu(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function bye(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(poe(s))return{filter:VK(s,t)};if(z$e(s)&&tT(s.bin))return{...s,bin:H$e(s.bin)};if(U$e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function V$e(e,t){var r,i;const n=qn(e);if($t(n)&&tT(n.bin)&&(n.bin=H$e(n.bin)),sT(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(aO(n))if(ft(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:VK(s,t)}});else{const{selection:s,param:o,test:a,...u}=V$e(n.condition,t);n.condition=o?n.condition:{...u,test:VK(n.condition,t)}}return n}function H$e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function VK(e,t){const n=r=>J2(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):J2(e.test||e.filter,r=>r.selection?n(r.selection):r)}class HK extends hoe{map(t,n){const r=n.selections??[];if(t.params&&!B1(t)){const i=[];for(const s of t.params)coe(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Gt(a)&&(a===t.name||i.includes(a))||ft(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=HK.prototype[e];HK.prototype[e]=function(n,r){return t.call(this,n,UVt(n,r))}}function UVt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function q$e(e,t){t===void 0&&(t=L$e(e.config));const n=qVt(e,t),{width:r,height:i}=e,s=WVt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const zVt=new bVt,VVt=new jVt,HVt=new HK;function qVt(e,t={}){const n={config:t};return HVt.map(zVt.map(VVt.map(e,n),n),n)}function xye(e){return Gt(e)?{type:e}:e??{}}function WVt(e,t,n){let{width:r,height:i}=t;const s=B1(e)||o7(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Pt(qge("width")),r=void 0),i=="container"&&(Pt(qge("height")),i=void 0));const a={type:"pad",...o,...n?xye(n.autosize):{},...xye(e.autosize)};if(a.type==="fit"&&!s&&(Pt(Fjt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Pt(Wge("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Pt(Wge("height")),!Zf(a,{type:"pad"}))return a}function GVt(e){return["fit","fit-x","fit-y"].includes(e)}function YVt(e){return e?`fit-${zj(e)}`:"fit"}const KVt=["background","padding"];function _ye(e,t){const n={};for(const r of KVt)e&&e[r]!==void 0&&(n[r]=Yf(e[r]));return t&&(n.params=e.params),n}class j1{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new j1(qn(this.explicit),qn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Ro(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of It(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Km(e){return{explicit:!0,value:e}}function Uf(e){return{explicit:!1,value:e}}function W$e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:a7(t,n,r,i)}}function a7(e,t,n,r){return e.explicit&&t.explicit&&Pt(A7t(n,r,e.value,t.value)),e}function Jb(e,t,n,r,i=a7){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Zf(e.value,t.value)?e:i(e,t,n,r)}class XVt extends j1{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function lA(e){return Rt(e,"url")}function xP(e){return Rt(e,"values")}function G$e(e){return Rt(e,"name")&&!lA(e)&&!xP(e)&&!mb(e)}function mb(e){return e&&(Y$e(e)||K$e(e)||moe(e))}function Y$e(e){return Rt(e,"sequence")}function K$e(e){return Rt(e,"sphere")}function moe(e){return Rt(e,"graticule")}var Hs;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Hs||(Hs={}));function X$e({invalid:e,isPath:t}){switch(qLe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function QVt(e){const{marks:t,scales:n}=X$e(e);return t===n?Hs.Main:n==="include-invalid-values"?Hs.PreFilterInvalid:Hs.PostFilterInvalid}class Bi{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Pt(t7t);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Qc extends Bi{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${WMe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function jH(e){return e.as!==void 0}function wye(e){return`${e}_end`}class A0 extends Bi{clone(){return new A0(null,qn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(iT(u)){if(zs(n)){const{mark:c,markDef:f,config:d}=n,h=Qb({fieldDef:s,markDef:f,config:d});(bP(c)||h)&&(l={timeUnit:Ha(u),field:a})}}else l={as:Vt(s,{forAs:!0}),field:a,timeUnit:u};if(zs(n)){const{mark:c,markDef:f,config:d}=n,h=Qb({fieldDef:s,markDef:f,config:d});bP(c)&&Do(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Lr(l)]=l)}return i},{});return Gi(r)?null:new A0(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=Ha(r),o={...i,timeUnit:s};return new A0(t,{[Lr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Kb(this.timeUnits)){const s=jH(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Tu(this.timeUnits).map(t=>jH(t)?t.as:wye(t.field)))}dependentFields(){return new Set(Tu(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Lr(this.timeUnits)}`}assemble(){const t=[];for(const n of Tu(this.timeUnits)){const{rectBandPosition:r}=n,i=Ha(n.timeUnit);if(jH(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:mh(s),type:"timeunit",...a?{units:Wj(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Eye(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=Q$e({timeUnit:i,field:o}),u=wye(o);t.push({type:"formula",expr:a,as:u}),t.push(...Eye([o,u],r,i))}}return t}}const u7="offsetted_rect_start",l7="offsetted_rect_end";function Q$e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=ALe(r),{part:o,step:a}=DLe(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', ${$i(t)}, ${n?-a:a})`}function Eye([e,t],n,r){if(n!==void 0&&n!==.5){const i=$i(e),s=$i(t);return[{type:"formula",expr:Tye([Q$e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${u7}`},{type:"formula",expr:Tye([i,s],n+.5),as:`${e}_${l7}`}]}return[]}function Tye([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const fO="_tuple_fields";class JVt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const ZVt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new JVt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let v=Ms(`${r}_${g}`);for(let b=1;a.has(v);b++)v=Ms(`${r}_${g}_${b}`);return a.add(v),{[m]:v}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?Wt(n.value):null;let{fields:d,encodings:h}=Ht(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(Ht(p))for(const m of It(p))djt(m)?(h||(h=[])).push(m):l==="interval"?(Pt(Yjt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Pt(Bjt(p,m.aggregate));continue}else if(!g){Pt(Yge(p));continue}if(m.timeUnit&&!iT(m.timeUnit)){g=e.vgField(p);const v={timeUnit:m.timeUnit,as:g,field:m.field};o[Lr(v)]=v}if(!s[g]){const v=l==="interval"&&bg(p)&&Gp(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",b={field:g,channel:p,type:v,index:i.items.length};b.signals={...u(b,"data"),...u(b,"visual")},i.items.push(s[g]=b),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Xp,JMe(p)?(b.geoChannel=p,b.channel=QMe(p),i.hasChannel[b.channel]=s[g]):i.hasChannel[p]=s[g]}}else Pt(Yge(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Xp}f&&(t.init=f.map(p=>i.items.map(m=>Ht(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Gi(o)||(i.timeUnit=new A0(null,o))},signals:(e,t,n)=>{const r=t.name+fO;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(tFe)})}},J$e="_curr",E$="anim_value",f2="anim_clock",qK="eased_anim_clock",Z$e="min_extent",eFe="max_range_extent",UH="last_tick_at",zH="is_playing",eHt=1/60*1e3,tHt=(e,t)=>[{name:qK,update:f2},{name:`${e}_domain`,init:`domain('${t}')`},{name:Z$e,init:`extent(${e}_domain)[0]`},{name:eFe,init:`extent(range('${t}'))[1]`},{name:E$,update:`invert('${t}', ${qK})`}],nHt={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(I0(t)&&(n=n.concat([{name:f2,init:"0",on:[{events:{type:"timer",throttle:eHt},update:`${zH} ? (${f2} + (now() - ${UH}) > ${eFe} ? 0 : ${f2} + (now() - ${UH})) : ${f2}`}]},{name:UH,init:"now()",on:[{events:[{signal:f2},{signal:zH}],update:"now()"}]},{name:zH,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+fO,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Tu(e.component.selection??{}).reduce((c,f)=>f.type==="interval"?c.concat(f.name+tC):c,[]).map(c=>`indexof(item().mark.name, '${c}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${Vw(e)}, `;if(t.project.hasSelectionId)l+=`${Xp}: ${o}[${jt(Xp)}]`;else if(I0(t))l+=`fields: ${i}, values: [${E$} ? ${E$} : ${Z$e}]`;else{const c=s.items.map(f=>{const d=e.fieldDef(f.channel);return d!=null&&d.bin?`[${o}[${jt(e.vgField(f.channel,{}))}], ${o}[${jt(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${jt(f.field)}]`}).join(", ");l+=`fields: ${i}, values: [${c}]`}if(I0(t))return n.concat(tHt(t.name,e.scaleName(Px)),[{name:r+h1,on:[{events:[{signal:qK},{signal:E$}],update:`{${l}}`,force:!0}]}]);{const c=t.events;return n.concat([{name:r+h1,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}}};function tFe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=mh(i.field),i}function bE(e,t=!0,n=pl){if(ft(e)){const r=e.map(i=>bE(i,t,n));return t?`[${r.join(", ")}]`:r}else if(rT(e))return n(t?mE(e):J7t(e));return t?n(Yi(e)):e}function rHt(e,t){for(const n of Tu(e.component.selection??{})){const r=n.name;let i=`${r}${h1}, ${n.resolve==="global"?"true":`{unit: ${Vw(e)}}`}`;for(const s of f7)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+RHt,on:[{events:{signal:n.name+h1},update:`modify(${jt(n.name+xE)}, ${i})`}]})}return goe(t)}function iHt(e,t){if(e.component.selection&&It(e.component.selection).length){const n=jt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Dx("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return goe(t)}function sHt(e,t){let n=!1;for(const r of Tu(e.component.selection??{})){const i=r.name,s=jt(i+xE);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${vFe}(${s}, ${jt(a)}${u}`})}n=!0;for(const a of f7)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),goe(t)}function oHt(e,t){const n=[],r=[],i=Vw(e,{escape:!1});for(const s of Tu(e.component.selection??{})){const o={name:s.name+xE};if(s.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Xp}}]),s.init){const u=s.project.items.map(tFe);o.values=s.project.hasSelectionId?s.init.map(l=>({unit:i,[Xp]:bE(l,!1)[0]})):s.init.map(l=>({unit:i,fields:u,values:bE(l,!1)}))}if([...n,...t].filter(u=>u.name===s.name+xE).length||n.push(o),I0(s)&&t.length){const u=e.lookupDataSource(e.getDataName(Hs.Main)),l=t.find(f=>f.name===u),c=l.transform.find(f=>f.type==="filter"&&f.expr.includes("vlSelectionTest"));if(c){l.transform=l.transform.filter(d=>d!==c);const f={name:l.name+J$e,source:l.name,transform:[c]};r.push(f)}}}return n.concat(t,r)}function nFe(e,t){for(const n of Tu(e.component.selection??{}))for(const r of f7)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function aHt(e,t){for(const n of e.children)zs(n)&&(t=nFe(n,t));return t}function uHt(e,t,n,r){const i=EFe(e,t.param,t);return{signal:Gp(n.get("type"))&&ft(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function goe(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const qy={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!bg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Pt(Vjt),!s||!Gp(o)){Pt(zjt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||GK(e)||r.length===0)return n;const i=n.find(o=>o.name===t.name);let s=i.update;if(s.includes(vFe))i.update=`{${r.map(o=>`${jt(mh(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${jt(mh(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!GK(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function WK(e,t){return`domain(${jt(e.scaleName(t))})`}function GK(e){return e.parent&&RI(e.parent)&&(!e.parent.parent||GK(e.parent.parent))}const tC="_brush",rFe="_scale_trigger",CR="geo_interval_init_tick",iFe="_init",lHt="_center",cHt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...Ht(n.select)?n.select:{}};i.fields=[Xp],i.encodings||(i.encodings=n.value?It(n.value):[cm,lm]),n.select={type:"interval",...i}}if(t.translate&&!qy.defined(t)){const i=`!event.item || event.item.mark.name !== ${jt(t.name+tC)}`;for(const s of t.events){if(!s.between){Pt(`${s} is not an ordered event stream for interval selections.`);continue}const o=Wt((r=s.between[0]).filter??(r.filter=[]));o.includes(i)||o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+h1,s=Tu(t.project.hasChannel).filter(a=>a.channel===$s||a.channel===Ka),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(fHt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=jt(e.projectionName()),u=e.projectionName()+lHt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=T=>e.getSizeSignalRef(T).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+iFe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(C=>C.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const v=`intersect(${g}, {markname: ${jt(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${Vw(e)}}`,w=`vlSelectionTuples(${v}, ${b})`,E=s.map(T=>T.signals.visual);return n.concat({name:i,on:[{events:[...E.length?[{signal:E.join(" || ")}]:[],...o?[{signal:CR}]:[]],update:w}]})}else{if(!qy.defined(t)){const l=r+rFe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=jt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),v=Gp(g)?"+":"";return`(!isArray(${h}) || (${v}invert(${m}, ${p})[0] === ${v}${h}[0] && ${v}invert(${m}, ${p})[1] === ${v}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${Vw(e)}, fields: ${r+fO}, values`;return n.concat({name:i,...o?{init:`{${u}: ${bE(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(zs(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===CR).length||n.unshift({name:CR,value:null,on:[{events:"timer{1}",update:`${CR} === null ? {} : ${CR}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${jt(t.name+xE)})`;if(qy.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of It(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${Vw(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=It(h).reduce((g,v)=>(g[v]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[v]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+tC}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+tC,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function fHt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=jt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===$s?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=qy.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:bE(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+rFe},update:Gp(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:bE(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===$s?0:1,h=t.name+iFe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}function CI({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=aO(t)&&t.condition;let o=[];s&&(o=Wt(s).map(l=>{const c=i(l);if(JUt(l)){const{param:f,empty:d}=l;return{test:wFe(e,{param:f,empty:d}),...c}}else return{test:x8(e,l.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function yoe(e,t="text"){const n=e.encoding[t];return CI({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>c7(r,e.config),invalidValueRef:void 0})}function c7(e,t,n="datum"){if(e){if(Yp(e))return _s(e.value);if(Qn(e)){const{format:r,formatType:i}=p8(e);return Qse({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function sFe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(ft(o))return{tooltip:Sye({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return CI({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=c7(l,i,a);if(c)return c;if(l===null)return;let f=Hi("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),Gt(f))return{value:f};if(Ht(f))return pn(f)?f:f.content==="encoding"?Sye(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function oFe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s=new Set,o=r?"datum.datum":"datum",a=[];function u(c,f){const d=eT(f),h=tc(c)?c:{...c,type:e[d].type},p=h.title||toe(h,i),m=Wt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Do(f)){const v=f==="x"?"x2":"y2",b=Kp(e[v]);if(du(h.bin)&&b){const w=Vt(h,{expr:o}),E=Vt(b,{expr:o}),{format:T,formatType:C}=p8(h);g=sO(w,E,T,C,i),s.add(v)}}if((Do(f)||f===Rh||f===um)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:v,formatType:b}=p8(h);g=Qse({fieldOrDatumDef:h,format:v,formatType:b,expr:o,config:i,normalizeStack:!0}).signal}g??(g=c7(h,i,o).signal),a.push({channel:f,key:m,value:g})}roe(e,(c,f)=>{$t(c)?u(c,f):e7(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s.has(c)&&!l[f]&&(l[f]=d);return l}function Sye(e,t,n,{reactiveGeom:r}={}){const i=oFe(e,t,n,{reactiveGeom:r}),s=Kb(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function dHt(e){const{markDef:t,config:n}=e,r=Hi("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...hHt(e),...pHt(e)}}function hHt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Hi("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:Jt(Mjt,t)?{}:{ariaRoleDescription:{value:t}}}function pHt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return CI({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>c7(u,e.config),invalidValueRef:void 0});const o=Hi("description",n,r);if(o!=null)return{description:_s(o)};if(r.aria===!1)return{};const a=oFe(t,i,r);if(!Gi(a))return{description:{signal:Kb(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function yu(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;const l=i[e];a===void 0&&(u??(u=Hi(e,r,s,{vgChannel:o,ignoreVgConfig:!aO(l)})),u!==void 0&&(a=_s(u)));const c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=GLe({...c,scaleChannel:e,channelDef:l});return CI({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:f,mainRefFn:h=>Xse({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function aFe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Hi("filled",n,i),a=Ir(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Hi(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Hi(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:_s(u)}:{},...l?{stroke:_s(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Pt(vLe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...yu("color",e,{vgChannel:c,defaultValue:o?u:l}),...yu("fill",e,{defaultValue:r.fill?u:void 0}),...yu("stroke",e,{defaultValue:r.stroke?l:void 0})}}function mHt(e){const{encoding:t,mark:n}=e,r=t.order;return!Bx(n)&&Yp(r)?CI({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>_s(i.value),invalidValueRef:void 0}):{}}function cA({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Xse({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:_s(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ql(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[vg(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=cA({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=voe({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&Do(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:gHt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function gHt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(Qn(n)&&i&&t===i.fieldChannel){if($t(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return f8({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Uw(n,r,{suffix:"end"},{offset:s})}return Kse(e)}function voe({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=eT(n),u=Xb(n),l=Hi(n,s,o,{vgChannel:u});if(l!==void 0)return iN(n,l);switch(t){case"zeroOrMin":return Cye({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return Cye({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[cf(n)],mult:.5}}}}function Cye({mainChannel:e,config:t,...n}){const r=WLe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const yHt={left:"x",center:"xc",right:"x2"},vHt={top:"y",middle:"yc",bottom:"y2"};function uFe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Xb(e);const i=e==="x"?"align":"baseline",s=Hi(i,t,n);let o;return pn(s)?(Pt(g7t(i)),o=void 0):o=s,e==="x"?yHt[o||(r==="top"?"left":"center")]:vHt[o||r]}function v8(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?lFe(e,t,{defaultPos:n,defaultPos2:r}):ql(e,t,{defaultPos:n})}function lFe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=vg(e),a=cf(e),u=bHt(t,r,o),l=u[a]?uFe(e,i,s):Xb(e);return{...ql(e,t,{defaultPos:n,vgChannel:l}),...u}}function bHt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=eT(n),l=cf(n),c=Xb(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?cA({channel:n,markDef:s,encoding:r,model:e}):cA({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=cf(n),v=e.markDef[g];return v!=null?{[g]:{value:v}}:{[c]:{field:e.getName(n)}}}const m=xHt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:P6(n,s)||P6(n,{[n]:OK(n,s,a.style),[l]:OK(l,s,a.style)})||P6(n,a[i])||P6(n,a.mark)||{[c]:voe({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function xHt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return Qn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Uw(t,s,{suffix:"start"},{offset:u}):Kse({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function P6(e,t){const n=cf(e),r=Xb(e);if(t[r]!==void 0)return{[r]:iN(e,t[r])};if(t[e]!==void 0)return{[r]:iN(e,t[e])};if(t[n]){const i=t[n];if(yE(i))Pt(c7t(n));else return{[n]:iN(e,i)}}}function d1(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=vg(t),a=cf(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Hi("size",i,n,{vgChannel:a}),p=nLe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal")||s==="tick"&&(t==="y"?d==="vertical":d==="horizontal");return $t(u)&&(hs(u.bin)||du(u.bin)||u.timeUnit&&!l)&&!(h&&!yE(h))&&!r[p]&&!Wa(f)?EHt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(Qn(u)&&Wa(f)||m)&&!l?wHt(u,t,e):lFe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function _Ht(e,t,n,r,i,s,o){if(yE(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=K0("minBandSize",{type:o},r);return{signal:c?`max(${Ip(c)}, ${l})`:l}}else i.band!==1&&(Pt(x7t(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(pn(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(nT(u)&&bi(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c,tickBandPaddingInner:f}=r.scale,d=Ro(u,o==="tick"?f:o==="bar"?l:c);if(pn(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(bi(d))return{signal:`${1-d} * ${e}`}}return{value:UK(r.view,e)-2}}function wHt(e,t,n){var N,O;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=cf(t),f=vg(t),d=nLe(t),h=n.scaleName(d),p=n.getScaleComponent(wse(t)),m=r.type==="tick"||a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=yu("size",n,{vgChannel:c,defaultRef:_s(r.size)}):Pt(T7t(r.type)));const v=!!g,b=e$e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(N=l||p)==null?void 0:N.get("type"),useVlSizeChannel:m});g=g||{[c]:_Ht(c,h||u,p||l,s,b,!!e,r.type)};const w=((O=l||p)==null?void 0:O.get("type"))==="band"&&yE(b)&&!v?"top":"middle",E=uFe(t,r,s,w),T=E==="xc"||E==="yc",{offset:C,offsetType:I}=cA({channel:t,markDef:r,encoding:i,model:n,bandPosition:T?.5:0}),R=Kse({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:C,defaultRef:voe({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:T?I==="encoding"?0:.5:pn(b)?{signal:`(1-${b})/2`}:yE(b)?(1-b.band)/2:0});if(c)return{[E]:R,...g};{const L=Xb(f),B=g[c],F=C?{...B,offset:C}:B;return{[E]:R,[L]:ft(R)?[R[0],{...R[1],offset:F}]:{...R,offset:F}}}}function Aye(e,t,n,r,i,s,o){if(XMe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(pn(n)||pn(i)||pn(r)||s){const l=Ip(n),c=Ip(i),f=Ip(r),d=Ip(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",v=c?`(${c} + ${p})`:p;return{signal:m+g+v}}else return i=i||0,r+(n?-i-u:+i+u)}function EHt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var O;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=e$e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(O=r.component.axes[n])==null?void 0:O[0],h=(d==null?void 0:d.get("translate"))??.5,p=Do(n)?Hi("binSpacing",s,i)??0:0,m=vg(n),g=Xb(n),v=Xb(m),b=K0("minBandSize",s,i),{offset:w}=cA({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:E}=cA({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),T=WUt({fieldDef:e,scaleName:u}),C=Aye(n,p,c,h,w,b,T),I=Aye(m,p,c,h,E??w,b,T),R=pn(f)?{signal:`(1-${f.signal})/2`}:yE(f)?(1-f.band)/2:.5,N=Qb({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(hs(e.bin)||e.timeUnit){const L=e.timeUnit&&N!==.5;return{[v]:Iye({fieldDef:e,scaleName:u,bandPosition:R,offset:I,useRectOffsetField:L}),[g]:Iye({fieldDef:e,scaleName:u,bandPosition:pn(R)?{signal:`1-${R.signal}`}:1-R,offset:C,useRectOffsetField:L})}}else if(du(e.bin)){const L=Uw(e,u,{},{offset:I});if($t(t))return{[v]:L,[g]:Uw(t,u,{},{offset:C})};if(tT(e.bin)&&e.bin.step)return{[v]:L,[g]:{signal:`scale("${u}", ${Vt(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}Pt(_Le(m))}function Iye({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return f8({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:u7,endSuffix:l7}:{}})}const THt=new Set(["aria","width","height"]);function Dh(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?aFe(e):{};return{...SHt(e.markDef,t),...kye("fill",n),...kye("stroke",r),...yu("opacity",e),...yu("fillOpacity",e),...yu("strokeOpacity",e),...yu("strokeWidth",e),...yu("strokeDash",e),...mHt(e),...sFe(e),...yoe(e,"href"),...dHt(e)}}function kye(e,t){return t?{[e]:t}:{}}function SHt(e,t){return Ojt.reduce((n,r)=>(!THt.has(r)&&Rt(e,r)&&t[r]!=="ignore"&&(n[r]=_s(e[r])),n),{})}function boe(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var l;let o;if(!bg(s)||!(o=e.getScaleType(s)))return;const a=Vj(i.aggregate),u=Yse({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(VUt(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>Gj(s,!0)).join(" && ")}}}function Rye(e,t){if(t!==void 0)return{[e]:_s(t)}}const VH="voronoi",cFe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(VH)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Bx(s))return Pt(jjt(s)),n;const o={name:e.getName(VH),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...sFe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.includes(VH)&&(u=!0)}),u||n.splice(a+1,0,o),n}},fFe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!loe(e.bind),parse:(e,t,n)=>bFe(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=cFe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ms(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:bE(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${jt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(l=>l.name===r+h1),o=r+fO,a=i.items.map(l=>Ms(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},b8="_toggle",dFe={defined:e=>e.type==="point"&&!I0(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+b8,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+h1,r=t.name+b8;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Vw(e)}}, `)+`${r} ? ${n} : null`}},CHt={defined:e=>e.clear!==void 0&&e.clear!==!1&&!I0(e),parse:(e,t)=>{t.clear&&(t.clear=Gt(t.clear)?Dx(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(fFe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ms(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+h1);r(i,"null"),dFe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+b8),r(i,"false"))}return n}},hFe={defined:e=>{const t=e.resolve==="global"&&e.bind&&loe(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Xp;return t&&!n&&Pt(Hjt),t&&n},parse:(e,t,n)=>{const r=qn(n);if(r.select=Gt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},bFe(t,r),Ht(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=Wt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=$H(t.bind)?t.bind.legend:"click",s=Gt(i)?Dx(i,"view"):Wt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=$H(t.bind)&&t.bind.legend,s=o=>a=>{const u=qn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ms(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+h1),o=r+fO,a=i.items.filter(d=>d.hasLegend).map(d=>Ms(`${r}_${Ms(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+b8),f=$H(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function AHt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Tu(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&hFe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const pFe="_translate_anchor",mFe="_translate_delta",IHt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=qy.defined(t),s=r+pFe,{x:o,y:a}=t.project.hasChannel;let u=Dx(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+tC,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?WK(e,$s):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?WK(e,Ka):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+mFe,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Dye(e,t,o,"width",n),a!==void 0&&Dye(e,t,a,"height",n),n}};function Dye(e,t,n,r,i){const s=t.name,o=s+pFe,a=s+mFe,u=n.channel,l=qy.defined(t),c=i.find(T=>T.name===n.signals[l?"data":"visual"]),f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===$s?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,v=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,b=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",w=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",E=`${b}(${g}, ${v}${w})`;c.on.push({events:{signal:a},update:l?E:`clampRange(${E}, 0, ${f})`})}const gFe="_zoom_anchor",yFe="_zoom_delta",kHt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=qy.defined(t),s=r+yFe,{x:o,y:a}=t.project.hasChannel,u=jt(e.scaleName($s)),l=jt(e.scaleName(Ka));let c=Dx(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+tC,f))),n.push({name:r+gFe,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Nye(e,t,o,"width",n),a!==void 0&&Nye(e,t,a,"height",n),n}};function Nye(e,t,n,r,i){const s=t.name,o=n.channel,a=qy.defined(t),u=i.find(b=>b.name===n.signals[a?"data":"visual"]),l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?WK(e,o):u.name,h=s+yFe,p=`${s}${gFe}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",v=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?v:`clampRange(${v}, 0, ${l})`})}const xE="_store",h1="_tuple",RHt="_modify",vFe="vlSelectionResolve",f7=[nHt,cHt,ZVt,dFe,fFe,qy,hFe,CHt,IHt,kHt,cFe];function DHt(e){let t=e.parent;for(;t&&!od(t);)t=t.parent;return t}function Vw(e,{escape:t}={escape:!0}){let n=t?jt(e.name):e.name;const r=DHt(e);if(r){const{facet:i}=r;for(const s of sh)i[s]&&(n+=` + '__facet_${s}_' + (facet[${jt(r.vgField(s))}])`)}return n}function xoe(e){return Tu(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function bFe(e,t){(Gt(t.select)||!t.select.on)&&delete e.events,(Gt(t.select)||!t.select.clear)&&delete e.clear,(Gt(t.select)||!t.select.toggle)&&delete e.toggle}function I0(e){var t;return(t=e.events)==null?void 0:t.find(n=>"type"in n&&n.type==="timer")}function YK(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...YK(e.object)),t.push(...YK(e.property))),t)}function xFe(e){return e.object.type==="MemberExpression"?xFe(e.object):e.object.name==="datum"}function _Fe(e){const t=Fie(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&xFe(r)&&n.add(YK(r).slice(1).join("."))}),n}class AI extends Bi{clone(){return new AI(null,this.model,qn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=x8(this.model,this.filter,this),this._dependentFields=_Fe(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function NHt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const s of t){const o=Ms(s.name),a=s.select,u=Gt(a)?a:a.type,l=Ht(a)?qn(a):{type:u},c=r[u];for(const h in c)h==="fields"||h==="encodings"||(h==="mark"&&(l.mark={...c.mark,...l.mark}),(l[h]===void 0||l[h]===!0)&&(l[h]=qn(c[h]??l[h])));const f=n[o]={...l,name:o,type:u,init:s.value,bind:s.bind,events:Gt(l.on)?Dx(l.on,"scope"):Wt(qn(l.on))};if(I0(f)&&(i++,i>1)){delete n[o];continue}const d=qn(s);for(const h of f7)h.defined(f)&&h.parse&&h.parse(e,f,d)}return i>1&&Pt(Xjt),n}function wFe(e,t,n,r="datum"){const i=Gt(t)?t:t.param,s=Ms(i),o=jt(s+xE);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${jt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function EFe(e,t,n){const r=Ms(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Pt(Qjt(s));else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Pt(Jjt(a,i,n,s))):s=a[0].field}return`${o.name}[${jt(mh(s))}]`}function PHt(e,t){for(const[n,r]of Kb(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Qc(new AI(t,e,{param:n}),i,Hs.Lookup,e.component.data.outputNodeRefCounts)}}function x8(e,t,n){return rN(t,r=>Gt(r)?r:aUt(r)?wFe(e,r,n):PLe(r))}function OHt(e,t){if(e)return ft(e)&&!jv(e)?e.map(n=>toe(n,t)).join(", "):e}function HH(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function xD(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=h,m=dzt[p],g=c[p];if(m&&m!==t&&m!=="both")delete c[p];else if(cO(g)){const{condition:v,...b}=g,w=Wt(v),E=oye[p];if(E){const{vgProp:T,part:C}=E,I=[...w.map(R=>{const{test:N,...O}=R;return{test:x8(null,N),...O}}),b];HH(c,C,T,I),delete c[p]}else if(E===null){const T={signal:w.map(C=>{const{test:I,...R}=C;return`${x8(null,I)} ? ${Hge(R)} : `}).join("")+Hge(b)};c[p]=T}}else if(pn(g)){const v=oye[p];if(v){const{vgProp:b,part:w}=v;HH(c,w,b,g),delete c[p]}}Ir(["labelAlign","labelBaseline"],p)&&c[p]===null&&delete c[p]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Gi(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ro(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&pn(c.encode.labels.update.text)&&(p=dE(a,"datum.label",c.encode.labels.update.text.signal)),HH(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of c$e)e.hasAxisPart(p)||delete c.encode[p];Gi(c.encode)&&delete c.encode}const h=OHt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Ro(l,0)}}}}function TFe(e){const{axes:t}=e.component,n=[];for(const r of F1)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function MHt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>xD(i,"grid",t)),...r.map(i=>xD(i,"grid",t)),...n.map(i=>xD(i,"main",t)),...r.map(i=>xD(i,"main",t))].filter(i=>i)}function Pye(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...It(o),...It(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Ip(o[c])} : ${Ip(a[c])}`};return l}return t[i]})])}function LHt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:$Le(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=pn(n)?"axisOrient":`axis${Z3(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Pye(a,r,e,n),vgAxisConfig:Pye(u,r,e,n),axisConfigStyle:$Ht([...u,...a],r)}}function $Ht(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=Wt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function KK(e,t,n,r={}){var s;const i=fLe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Oye={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??FHt(n,e),gridScale:({model:e,channel:t})=>BHt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||CFe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||SFe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??UHt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??zHt(t.type,n,$t(t)&&!!t.timeUnit,$t(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??HHt({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:qHt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=AFe(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return hLe(i?[iye(i)]:[],$t(o)?[iye(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>WHt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??GHt(n,t)};function FHt(e,t){return!Wa(e)&&$t(t)&&!hs(t==null?void 0:t.bin)&&!du(t==null?void 0:t.bin)}function BHt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function jHt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return pn(s)?s:vP(s);{const{configValue:o}=KK("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?vP(o):n===$s&&Ir([Vse,zse],e.type)&&!($t(e)&&e.timeUnit)?270:void 0}}function XK(e){return`(((${e.signal} % 360) + 360) % 360)`}function SFe(e,t,n,r){if(e!==void 0)if(n==="x"){if(pn(e)){const i=XK(e),s=pn(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(pn(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(pn(e)){const i=XK(e),s=pn(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(pn(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function CFe(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(pn(e)){const o=XK(e),a=pn(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(pn(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function UHt(e,t){if(t==="x"&&Ir(["quantitative","temporal"],e))return!0}function zHt(e,t,n,r){if(n&&!Ht(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function VHt(e){return e==="x"?"bottom":"left"}function HHt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!Wa(t)&&t!=="log"){if($t(e)){if(hs(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ir(["month","hours","day","quarter"],(i=Ha(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function qHt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if($t(t)){const{timeUnit:n}=t;if(n){const r=RLe(n);if(r)return{signal:r}}}}function AFe(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return pLe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function WHt(e,t){const n=e.values;if(ft(n))return l$e(t,n);if(pn(n))return n}function GHt(e,t){return e==="rect"&&h8(t)?1:0}class fA extends Bi{clone(){return new fA(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=_Fe(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(sT(r)&&ZLe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${PLe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new fA(t,{calculate:u,as:dA(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Lr(this.transform)}`}}function dA(e,t,n){return Vt(e,{prefix:t,suffix:"sort_index",...n})}function d7(e,t){return Ir(["top","bottom"],t)?"column":Ir(["left","right"],t)||e==="row"?"row":"column"}function hA(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ro((t||{})[e],i[e],n.header[e])}function h7(e,t,n,r){const i={};for(const s of e){const o=hA(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const _oe=["row","column"],woe=["header","footer"];function YHt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=h7(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=d7(t,a),l=vP(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...kFe(l,u),...IFe(u,l,s),...RFe(r,i,t,Ozt,I$e)}}}function IFe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=CFe(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function kFe(e,t){const n=SFe(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function KHt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of woe)if(n[i])for(const s of n[i]){const o=QHt(e,t,i,n,s);o!=null&&r.push(o)}return r}function XHt(e,t){const{sort:n}=e;return Hy(n)?{field:Vt(n,{expr:"datum"}),order:n.order??"ascending"}:ft(n)?{field:dA(e,t,{expr:"datum"}),order:"ascending"}:{field:Vt(e,{expr:"datum"}),order:n??"ascending"}}function QK(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=h7(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Qse({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=d7(t,a);return{text:{signal:u?dE(dE(u,"datum.label",l),"datum.value",Vt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...kFe(s,c),...IFe(c,s,o),...RFe(n,e,t,Mzt,k$e)}}function QHt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=h7(["labelOrient"],o.header,a,t);(t==="row"&&!Ir(["top","bottom"],f)||t==="column"&&!Ir(["left","right"],f))&&(s=QK(o,t,a))}const u=od(e)&&!oO(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:XHt(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const JHt={column:{start:0,end:1},row:{start:1,end:0}};function ZHt(e,t){return JHt[t][e]}function eqt(e,t){const n={};for(const r of sh){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=h7(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=d7(r,o),u=ZHt(s,a);u!==void 0&&(n[a]=u)}}return Gi(n)?void 0:n}function RFe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=hA(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Eoe(e){return[...O6(e,"width"),...O6(e,"height"),...O6(e,"childWidth"),...O6(e,"childHeight")]}function O6(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(Wa(o)&&nT(a)){const u=e.scaleName(n);return od(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Mye(u,a)]:[Mye(u,a),{name:i,update:DFe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=jK(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Mye(e,t){const n=`${e}_step`;return pn(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function DFe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Ro(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Ip(o)}, ${Ip(s)}) * ${e}_step`}function NFe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function PFe(e,t){return It(e).reduce((n,r)=>({...n,...CI({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>_s(i.value),invalidValueRef:void 0})}),{})}function OFe(e,t){if(od(t))return e==="theta"?"independent":"shared";if(RI(t))return"shared";if(Roe(t))return Do(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Toe(e,t){const n=e.scale[t],r=Do(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Pt(k7t(t)),"independent"):e[r][t]||"shared"}const tqt={...Fzt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},MFe=It(tqt);class nqt extends j1{}const Lye={symbols:rqt,gradient:iqt,labels:sqt,entries:oqt};function rqt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...$jt({},n,PUt),...aFe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?LFe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===uf)delete f.fill;else if(Rt(f.fill,"field"))h?delete f.fill:(f.fill=_s(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=_s(m??1));else if(ft(f.fill)){const g=JK(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=_s(g))}}if(f.stroke){if(r==="stroke"||!c&&r===uf)delete f.stroke;else if(Rt(f.stroke,"field")||p)delete f.stroke;else if(ft(f.stroke)){const g=Ro(JK(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==$1){const g=$t(t)&&FFe(n,i,t);g?f.opacity=[{test:g,..._s(m??1)},_s(u.legend.unselectedOpacity)]:m&&(f.opacity=_s(m))}return f={...f,...e},Gi(f)?void 0:f}function iqt(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?LFe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=_s(l)),a={...a,...e},Gi(a)?void 0:a}function sqt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=$t(t)?FFe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;vE(c)?f=kp({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=kp({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&$t(t)&&t.timeUnit===void 0&&(f=kp({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Gi(d)?void 0:d}function oqt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function LFe(e){return $Fe(e,(t,n)=>Math.max(t,n.value))}function JK(e){return $Fe(e,(t,n)=>Ro(t,n.value))}function $Fe(e,t){if(ezt(e))return Wt(e.condition).reduce(t,e.value);if(Yp(e))return e.value}function FFe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=jt(n.field);return r.map(s=>`(!length(data(${jt(Ms(s)+xE)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const $ye={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return XLe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return QLe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??hqt(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??pqt(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??uqt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>eC(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Z2(n)&&m0(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>aqt(t,e)};function aqt(e,t){const n=e.values;if(ft(n))return l$e(t,n);if(pn(n))return n}function uqt(e,t,n,r){if(t!=="shape"){const i=JK(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function lqt(e){const{legend:t}=e;return Ro(t.type,cqt(e))}function cqt({channel:e,timeUnit:t,scaleType:n}){if(Z2(e)){if(Ir(["quarter","month","day"],t))return"symbol";if(m0(n))return"gradient"}return"symbol"}function fqt({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??dqt(n,t)}function dqt(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function hqt({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(m0(i))return n==="horizontal"?r==="top"||r==="bottom"?Fye(t,"width",o,s):o:Fye(t,"height",u,a)}function Fye(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function pqt(e){if(Ir(["quantile","threshold","log","symlog"],e))return"greedy"}function BFe(e){const t=zs(e)?mqt(e):bqt(e);return e.component.legends=t,t}function mqt(e){const{encoding:t}=e,n={};for(const r of[uf,...D$e]){const i=fa(t[r]);!i||!e.getScaleComponent(r)||r===lf&&$t(i)&&i.type===SI||(n[r]=vqt(e,r))}return n}function gqt(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function yqt(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function vqt(e,t){var E;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new nqt({},gqt(e,t));AHt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=fa(i[t]),f=$t(c)?(E=Ha(c.timeUnit))==null?void 0:E.unit:void 0,d=n.orient||s.legend.orient||"right",h=lqt({legend:n,channel:t,timeUnit:f,scaleType:l}),p=fqt({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const T of MFe){if(h==="gradient"&&T.startsWith("symbol")||h==="symbol"&&T.startsWith("gradient"))continue;const C=T in $ye?$ye[T](m):n[T];if(C!==void 0){const I=yqt(C,T,n,e.fieldDef(t));(I||s.legend[T]===void 0)&&a.set(T,C,I)}}const g=(n==null?void 0:n.encoding)??{},v=a.get("selections"),b={},w={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const T of["labels","legend","title","symbols","gradient","entries"]){const C=PFe(g[T]??{},e),I=T in Lye?Lye[T](C,w):C;I!==void 0&&!Gi(I)&&(b[T]={...v!=null&&v.length&&$t(c)?{name:`${Ms(c.field)}_legend_${T}`}:{},...v!=null&&v.length?{interactive:!!v}:{},update:I})}return Gi(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function bqt(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){BFe(r);for(const i of It(r.component.legends))n.legend[i]=Toe(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=jFe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of It(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function jFe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of MFe){const c=Jb(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return xqt(f,d);case"title":return mLe(f,d);case"type":return i=!0,Uf("symbol")}return a7(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&u8(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&u8(e.explicit,["encode","gradient"])),e}function xqt(e,t){return t.value==="circle"?t:e}function _qt(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function UFe(e){const t=e.component.legends,n={};for(const i of It(t)){const s=e.getScaleComponent(i),o=Yi(s.get("domains"));if(n[o])for(const a of n[o])jFe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Tu(n).flat().map(i=>wqt(i,e.config)).filter(i=>i!==void 0)}function wqt(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of D$e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&pn(s.encode.labels.update.text)&&(l=dE(r,"datum.label",s.encode.labels.update.text.signal)),_qt(s,"labels","text",{signal:l})}return s}}function Eqt(e){return RI(e)||Roe(e)?Tqt(e):zFe(e)}function Tqt(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),zFe(e))}function zFe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=pn(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Ir(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Sqt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class VFe extends j1{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function HFe(e){e.component.projection=zs(e)?Cqt(e):kqt(e)}function Cqt(e){if(e.hasProjection){const t=pu(e.specifiedProjection),n=!(t.scale!=null||t.translate!=null),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Aqt(e):void 0,s=new VFe(e.projectionName(!0),{...pu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Aqt(e){const t=[],{encoding:n}=e;for(const r of[[cm,lm],[gh,fm]])(fa(n[r[0]])||fa(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(lf)&&e.typedFieldDef(lf).type===SI&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Hs.Main)),t}function Iqt(e,t){const n=mse(Sqt,i=>!!(!Jt(e.explicit,i)&&!Jt(t.explicit,i)||Jt(e.explicit,i)&&Jt(t.explicit,i)&&Zf(e.get(i),t.get(i))));if(Zf(e.size,t.size)){if(n)return e;if(Zf(e.explicit,{}))return t;if(Zf(t.explicit,{}))return e}return null}function kqt(e){if(e.children.length===0)return;let t;for(const r of e.children)HFe(r);const n=mse(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Iqt(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new VFe(r,t.specifiedProjection,t.size,qn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Rqt(e,t,n,r){if(lO(t,n)){const i=zs(e)?e.axis(n)??e.legend(n)??{}:{},s=Vt(t,{expr:"datum"}),o=Vt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Vt(t,{binSuffix:"range",forAs:!0}),formula:sO(s,o,i.format,i.formatType,r)}}return{}}function qFe(e,t){return`${aLe(e)}_${t}`}function Dqt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Soe(e,t,n){const r=t7(n,void 0)??{},i=qFe(r,t);return e.getName(`${i}_bins`)}function Nqt(e){return"as"in e}function Bye(e,t,n){let r,i;Nqt(e)?r=Gt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[Vt(e,{forAs:!0}),Vt(e,{binSuffix:"end",forAs:!0})];const s={...t7(t,void 0)},o=qFe(s,e.field),{signal:a,extentSignal:u}=Dqt(n,o);if(Hj(s.extent)){const c=s.extent;i=EFe(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class k0 extends Bi{clone(){return new k0(null,qn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(tc(s)&&hs(s.bin)){const{key:a,binComponent:u}=Bye(s,s.bin,n);i[a]={...u,...i[a],...Rqt(n,s,o,n.config)}}return i},{});return Gi(r)?null:new k0(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Bye(n,n.bin,r);return new k0(t,{[i]:s})}merge(t,n){for(const r of It(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=p0([...this.bins[r].as,...t.bins[r].as],Lr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Tu(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Tu(this.bins).map(t=>t.field))}hash(){return`Bin ${Lr(this.bins)}`}assemble(){return Tu(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:mh(t.field),as:r,signal:t.signal,...Hj(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:mh(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:Vt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Pqt(e,t,n,r){var s;const i=zs(r)?r.encoding[vg(t)]:void 0;if(tc(n)&&zs(r)&&t$e(n,i,r.markDef,r.config)){e.add(Vt(n,{})),e.add(Vt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Qb({fieldDef:n,markDef:a,config:u});bP(o)&&l!==.5&&Do(t)&&(e.add(Vt(n,{suffix:u7})),e.add(Vt(n,{suffix:l7}))),n.bin&&lO(n,t)&&e.add(Vt(n,{binSuffix:"range"}))}else if(JMe(t)){const o=QMe(t);e.add(r.getName(o))}else e.add(Vt(n));return sT(n)&&xUt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Oqt(e,t){for(const n of It(t)){const r=t[n];for(const i of It(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Mp extends Bi{clone(){return new Mp(null,new Set(this.dimensions),qn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([Vt(o,{forAs:!0})]);else{if(f1(u)||Fx(u)){const c=f1(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([Vt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([Vt(o,{forAs:!0})]);bg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([Vt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([Vt({field:l,aggregate:"max"},{forAs:!0})]))}else Pqt(s,a,o,n)}),s.size+It(i).length===0)?null:new Mp(t,s,i)}static makeFromTransform(t,n){var r;const i=new Set,s={};for(const o of n.aggregate){const{op:a,field:u,as:l}=o;a&&(a==="count"?(s["*"]??(s["*"]={}),s["*"].count=new Set([l||Vt(o,{forAs:!0})])):(s[u]??(s[u]={}),(r=s[u])[a]??(r[a]=new Set),s[u][a].add(l||Vt(o,{forAs:!0}))))}for(const o of n.groupby??[])i.add(o);return i.size+It(s).length===0?null:new Mp(t,i,s)}merge(t){return VMe(this.dimensions,t.dimensions)?(Oqt(this.measures,t.measures),!0):(q7t("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...It(this.measures)])}producedFields(){const t=new Set;for(const n of It(this.measures))for(const r of It(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Lr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of It(this.measures))for(const o of It(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:mh(s));return{type:"aggregate",groupby:[...this.dimensions].map(mh),ops:t,fields:n,as:r}}}class II extends Bi{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of sh){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[Vt(o),...hs(a)?[Vt(o,{binSuffix:"end"})]:[]],...Hy(u)?{sortField:u}:ft(u)?{sortIndexField:dA(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of sh)this[n]&&(t+=` ${n.charAt(0)}:${Lr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of sh)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of sh)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of F1){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(Wa(i)&&nT(s)){const o=p7(this.childModel,n),a=koe(o);a?t[n]=a:Pt(kse(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=Jj,field:f}=u;s.push(f),o.push(c),a.push(Vt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of _oe){for(const c of woe){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Vy,zy])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function jye(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Mqt(e,t){const n=vse(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=jye(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=jye(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Pt(e7t(t)),null}function Lqt(e){const t={};return w$(e.filter,n=>{if(NLe(n)){let r=null;Mse(n)?r=Yf(n.equal):$se(n)?r=Yf(n.lte):Lse(n)?r=Yf(n.lt):Fse(n)?r=Yf(n.gt):Bse(n)?r=Yf(n.gte):jse(n)?r=n.range[0]:Use(n)&&(r=(n.oneOf??n.in)[0]),r&&(rT(r)?t[n.field]="date":bi(r)?t[n.field]="number":Gt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function $qt(e){const t={};function n(r){uA(r)?t[r.field]="date":r.type==="quantitative"&&Ijt(r.aggregate)?t[r.field]="number":nA(r.field)>1?r.field in t||(t[r.field]="flatten"):sT(r)&&Hy(r.sort)&&nA(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((zs(e)||od(e))&&e.forEachFieldDef((r,i)=>{if(tc(r))n(r);else{const s=eT(i),o=e.fieldDef(s);n({...r,type:o.type})}}),zs(e)){const{mark:r,markDef:i,encoding:s}=e;if(Bx(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];$t(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Fqt(e){const t={};if(zs(e)&&e.component.selection)for(const n of It(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&nA(i.field)>1&&(t[i.field]="flatten")}return t}class al extends Bi{clone(){return new al(null,qn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Lr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!mb(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of It(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Pt(Xge(a,r[a],u.value)))}for(const a of It(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Pt(Xge(a,n[a],u)))}const s=new j1(n,r);i.copyAll(s);const o={};for(const a of It(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return It(o).length===0||i.parseNothing?null:new al(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of It(this._parse)){const r=this._parse[n];nA(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(It(this._parse))}dependentFields(){return new Set(It(this._parse))}assembleTransforms(t=!1){return It(this._parse).filter(n=>t?nA(n)>1:!0).map(n=>{const r=Mqt(n,this._parse[n]);return r?{type:"formula",expr:r,as:EI(n)}:null}).filter(n=>n!==null)}}class Zb extends Bi{clone(){return new Zb(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Xp])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Xp}}}class dO extends Bi{clone(){return new dO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Lr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class hO extends Bi{clone(){return new hO(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Lr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class _E extends Bi{constructor(t){super(null),t??(t={name:"source"});let n;if(mb(t)||(n=t.format?{...Xc(t.format,["parse"])}:{}),xP(t))this._data={values:t.values};else if(lA(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Ir(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else K$e(t)?this._data={values:[{type:"Sphere"}]}:(G$e(t)||mb(t))&&(this._data={});this._generator=mb(t),t.name&&(this._name=t.name),n&&!Gi(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Uye=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Bqt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},_D;function Coe(e){return e instanceof _E||e instanceof dO||e instanceof hO}class Aoe{constructor(){_D.set(this,void 0),Uye(this,_D,!1,"f")}setModified(){Uye(this,_D,!0,"f")}get modifiedFlag(){return Bqt(this,_D,"f")}}_D=new WeakMap;class oT extends Aoe{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Ioe extends Aoe{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class jqt extends Ioe{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of It(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Uqt extends Ioe{constructor(t){super(),this.requiresSelectionId=t&&xoe(t)}run(t){t instanceof Zb&&(this.requiresSelectionId&&(Coe(t.parent)||t.parent instanceof Mp||t.parent instanceof al)||(this.setModified(),t.remove()))}}class zqt extends Aoe{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof A0&&(r=t.producedFields(),gse(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Vqt extends Ioe{constructor(){super()}run(t){t instanceof Qc&&!t.isRequired()&&(this.setModified(),t.remove())}}class Hqt extends oT{run(t){if(!Coe(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof al)if(t instanceof al)this.setModified(),t.merge(n);else{if(yse(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class qqt extends oT{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof al);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of It(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Gi(i)){this.setModified();const o=new al(t,i);for(const a of n){if(a instanceof al)for(const u of It(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof al&&It(a.parse).length===0&&a.remove()}}}}}class Wqt extends oT{run(t){t instanceof Qc||t.numChildren()>0||t instanceof II||t instanceof _E||(this.setModified(),t.remove())}}class Gqt extends oT{run(t){const n=t.children.filter(i=>i instanceof A0),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Yqt extends oT{run(t){const n=t.children.filter(i=>i instanceof Mp),r={};for(const i of n){const s=Lr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of It(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class Kqt extends oT{constructor(t){super(),this.model=t}run(t){const n=!(Coe(t)||t instanceof AI||t instanceof al||t instanceof Zb),r=[],i=[];for(const s of t.children)s instanceof k0&&(n&&!yse(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof k0?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Xqt extends oT{run(t){const n=[...t.children];if(!tA(n,o=>o instanceof Qc)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Qc){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Qc)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class aT extends Bi{clone(){return new aT(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=p0(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Vt(t)}hash(){return`JoinAggregateTransform ${Lr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class pA extends Bi{clone(){return new pA(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=bg(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,m=Yse({scaleChannel:f,markDef:s,config:i,scaleType:h,isCountAggregate:Vj(p)});m!=="show"&&m!=="always-valid"&&(l[c.field]=c)}return l},{});return It(u).length?new pA(t,u):null}dependentFields(){return new Set(It(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Lr(this.filter)}`}assemble(){const t=It(this.filter).reduce((n,r)=>{const i=this.filter[r],s=Vt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${ZK(s)}))`):i.type==="quantitative"&&n.push(ZK(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function ZK(e){return`isValid(${e}) && isFinite(+${e})`}function Qqt(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=Vt(r);return i&&t.push(i),t},[])}function Jqt(e){return ft(e)&&e.every(t=>Gt(t))&&e.length>1}class Wy extends Bi{clone(){return new Wy(null,qn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(Ro(f.order,"ascending"));const l={field:a,order:u};let c;return Jqt(s)?c=s:Gt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Wy(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Kp(p)}).filter(h=>!!h),c=Qqt(n),f=n.encoding.order;let d;if(ft(f)||$t(f))d=dLe(f);else{const h=n$e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Wy(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Lr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[Vt(i,{binSuffix:"mid"})]:[Vt(i,{}),Vt(i,{binSuffix:"end"})]:[Vt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=Vt(c,{expr:"datum"}),p=Vt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${ZK(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:Vt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:Vt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class kI extends Bi{clone(){return new kI(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=p0(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Vt(t)}hash(){return`WindowTransform ${Lr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Ase(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Zqt(e){function t(n){if(!(n instanceof II)){const r=n.clone();if(r instanceof Qc){const i=tX+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Mp||r instanceof Wy||r instanceof kI||r instanceof aT)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function eX(e){if(e instanceof II)if(e.numChildren()===1&&!(e.children[0]instanceof Qc)){const t=e.children[0];(t instanceof Mp||t instanceof Wy||t instanceof kI||t instanceof aT)&&t.addDimensions(e.fields),t.swapWithParent(),eX(e)}else{const t=e.model.component.data.main;WFe(t);const n=Zqt(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(eX)}function WFe(e){if(e instanceof Qc&&e.type===Hs.Main&&e.numChildren()===1){const t=e.children[0];t instanceof II||(t.swapWithParent(),WFe(e))}}const tX="scale_",M6=5;function nX(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!nX(t.children))return!1}return!0}function np(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function zye(e,t,n){let r=e.sources,i=!1;return i=np(new Vqt,r)||i,i=np(new Uqt(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=np(new Wqt,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=np(new Hqt,r)||i,i=np(new Kqt(t),r)||i,i=np(new zqt,r)||i,i=np(new qqt,r)||i,i=np(new Yqt,r)||i,i=np(new Gqt,r)||i,i=np(new jqt,r)||i,i=np(new Xqt,r)||i),e.sources=r,i}function eWt(e,t){nX(e.sources);let n=0,r=0;for(let i=0;i<M6&&zye(e,t,!0);i++)n++;e.sources.map(eX);for(let i=0;i<M6&&zye(e,t,!1);i++)r++;nX(e.sources),Math.max(n,r)===M6&&Pt(`Maximum optimization runs(${M6}) reached.`)}class La{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new La(()=>t(n))}}function GFe(e){zs(e)?tWt(e):nWt(e)}function tWt(e){const t=e.component.scales;for(const n of It(t)){const r=iWt(e,n);if(t[n].setWithExplicit("domains",r),oWt(e,n),e.component.data.isFaceted){let s=e;for(;!od(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)ky(a)&&(a.data=tX+a.data.replace(tX,""))}}}function nWt(e){for(const n of e.children)GFe(n);const t=e.component.scales;for(const n of It(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Jb(r,o.getWithExplicit("domains"),"domains","scale",rX);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Pt(Gjt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function rWt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Vye(t,n);if(!i){Pt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Vye(t,n);if(i)return"unaggregated"}return e}function iWt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=rWt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&fa(r.x2)?fa(r.x)?Jb(Nv(n,i,e,"x"),Nv(n,i,e,"x2"),"domain","scale",rX):Nv(n,i,e,"x2"):t==="y"&&fa(r.y2)?fa(r.y)?Jb(Nv(n,i,e,"y"),Nv(n,i,e,"y2"),"domain","scale",rX):Nv(n,i,e,"y2"):Nv(n,i,e,t)}function sWt(e,t,n){return e.map(r=>({signal:`{data: ${n7(r,{timeUnit:n,type:t})}}`}))}function qH(e,t,n){var i;const r=(i=Ha(n))==null?void 0:i.unit;return t==="temporal"||r?sWt(e,t,r):[e]}function Nv(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=fa(i[r]),{type:c}=l,f=l.timeUnit,d=QVt({invalid:K0("invalid",s,a),isPath:Bx(o)});if(bUt(t)){const m=Nv(e,void 0,n,r),g=qH(t.unionWith,c,f);return Km([...g,...m.value])}else{if(pn(t))return Km([t]);if(t&&t!=="unaggregated"&&!BLe(t))return Km(qH(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return Uf([[0,1]]);const m=n.requestDataName(d);return Uf([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=bg(r)&&$t(l)?aWt(n,r,e):void 0;if(xg(l)){const m=qH([l.datum],c,f);return Uf(m)}const p=l;if(t==="unaggregated"){const{field:m}=l;return Uf([{data:n.requestDataName(d),field:Vt({field:m,aggregate:"min"})},{data:n.requestDataName(d),field:Vt({field:m,aggregate:"max"})}])}else if(hs(p.bin)){if(Wa(e))return Uf(e==="bin-ordinal"?[]:[{data:yP(h)?n.requestDataName(d):n.requestDataName(Hs.Raw),field:n.vgField(r,lO(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!Ht(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(hs(m)){const g=Soe(n,p.field,m);return Uf([new La(()=>{const v=n.getSignalName(g);return`[${v}.start, ${v}.stop]`})])}else return Uf([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Ir(["time","utc"],e)){const m=i[vg(r)];if(t$e(p,m,s,a)){const g=n.requestDataName(d),v=Qb({fieldDef:p,fieldDef2:m,markDef:s,config:a}),b=bP(o)&&v!==.5&&Do(r);return Uf([{data:g,field:n.vgField(r,b?{suffix:u7}:{})},{data:g,field:n.vgField(r,{suffix:b?l7:"end"})}])}}return Uf(h?[{data:yP(h)?n.requestDataName(d):n.requestDataName(Hs.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function WH(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":Jj),...r?{field:mh(r)}:{},...i?{order:i}:{}}}function oWt(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=BLe(r)?r:void 0,o=tT(i)&&Hj(i.extent)?i.extent:void 0;(s||o)&&n.set("selectionExtent",s??o,!0)}function aWt(e,t,n){if(!Wa(n))return;const r=e.fieldDef(t),i=r.sort;if(ZLe(i))return{op:"min",field:dA(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Hy(i)){const a=s&&!o.has(i.field);return WH(i,a)}else if(QUt(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(f1(c)||Fx(c))return WH({field:Vt(l),order:u},d);if(Ase(c)||!c)return WH({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ir(["ascending",void 0],i))return!0}}function Vye(e,t){const{aggregate:n,type:r}=e;return n?Gt(n)&&!Rjt.has(n)?{valid:!1,reason:w7t(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:E7t(e)}:{valid:!0}:{valid:!1,reason:_7t(e)}}function rX(e,t,n,r){return e.explicit&&t.explicit&&Pt(I7t(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function uWt(e){const t=p0(e.map(o=>{if(ky(o)){const{sort:a,...u}=o;return u}return o}),Lr),n=p0(e.map(o=>{if(ky(o)){const a=o.sort;return a!==void 0&&!yP(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Lr);if(t.length===0)return;if(t.length===1){const o=e[0];if(ky(o)&&n.length>0){let a=n[0];if(n.length>1){Pt(Jge);const u=n.filter(l=>Ht(l)&&"op"in l&&l.op!=="min");n.every(l=>Ht(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(Ht(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=p0(n.map(o=>yP(o)||!("op"in o)||Gt(o.op)&&Jt(Cjt,o.op)?o:(Pt(R7t(o)),!0)),Lr);let i;r.length===1?i=r[0]:r.length>1&&(Pt(Jge),i=!0);const s=p0(e.map(o=>ky(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function koe(e){if(ky(e)&&Gt(e.field))return e.field;if(Djt(e)){let t;for(const n of e.fields)if(ky(n)&&Gt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Pt(D7t),t}return Pt(N7t),t}else if(Njt(e)){Pt(P7t);const t=e.fields[0];return Gt(t)?t:void 0}}function p7(e,t){const r=e.component.scales[t].get("domains").map(i=>(ky(i)&&(i.data=e.lookupDataSource(i.data)),i));return uWt(r)}function YFe(e){return RI(e)||Roe(e)?e.children.reduce((t,n)=>t.concat(YFe(n)),Hye(e)):Hye(e)}function Hye(e){return It(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=lWt(i.range,s,n,e),h=p7(e,n),p=a?uHt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function lWt(e,t,n,r){if(Do(n)){if(nT(e))return{step:{signal:`${t}_step`}}}else if(Ht(e)&&ky(e))return{...e,data:r.lookupDataSource(e.data)};return e}class KFe extends j1{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Ir([mu.LOG,mu.TIME,mu.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Ir([mu.LINEAR,mu.SQRT,mu.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(ft(a)){const u=a[0],l=a[a.length-1];if(bi(u)&&bi(l))if(u<=0&&l>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const cWt=["range","scheme"];function fWt(e){const t=e.component.scales;for(const n of Cse){const r=t[n];if(!r)continue;const i=dWt(n,e);r.setWithExplicit("range",i)}}function qye(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=cf(t),o=e.getName(s);if(Ht(r)&&r.binned&&r.step!==void 0)return new La(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(hs(r)){const a=Soe(e,i,r);return new La(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function dWt(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of cWt)if(n[f]!==void 0){const d=$K(s,f),h=jLe(e,f);if(!d)Pt(bLe(s,f,e));else if(h)Pt(h);else switch(f){case"range":{const p=n.range;if(ft(p)){if(Do(e))return Km(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),v=t.getSignalName.bind(t);return La.fromName(v,g)}return m}))}else if(Ht(p))return Km({data:t.requestDataName(Hs.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Km(p)}case"scheme":return Km(hWt(n[f]))}}const o=e===$s||e==="xOffset"?"width":"height",a=r[o];if(Q0(a)){if(Do(e))if(Wa(s)){const f=QFe(a,t,e);if(f)return Km({step:f})}else Pt(xLe(o));else if(nO(e)){const f=e===Nx?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=JFe(a,s);if(p)return Km(p)}}}const{rangeMin:u,rangeMax:l}=n,c=pWt(e,t);return(u!==void 0||l!==void 0)&&$K(s,"rangeMin")&&ft(c)&&c.length===2?Km([u??c[0],l??c[1]]):Uf(c)}function hWt(e){return vUt(e)?{scheme:e.name,...Xc(e,["name"])}:{scheme:e}}function XFe(e,t,n,{center:r}={}){const i=cf(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Ka&&Gp(n)?r?[La.fromName(a=>`${o(a)}/2`,s),La.fromName(a=>`-${o(a)}/2`,s)]:[La.fromName(o,s),0]:r?[La.fromName(a=>`-${o(a)}/2`,s),La.fromName(a=>`${o(a)}/2`,s)]:[0,La.fromName(o,s)]}function pWt(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=fa(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case $s:case Ka:{if(Ir(["point","band"],u)){const f=ZFe(e,n,r.view);if(Q0(f))return{step:QFe(f,t,e)}}return XFe(e,t,u)}case Nx:case TI:return mWt(e,t,u);case L1:{const f=vWt(i,r),d=bWt(i,n,t,r);return sA(u)?yWt(f,d,gWt(u,r,l,e)):[f,d]}case Rh:return[0,Math.PI*2];case ZE:return[0,360];case um:return[0,new La(()=>{const f=t.getSignalName(od(t.parent)?"child_width":"width"),d=t.getSignalName(od(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Px:return{step:1e3/r.scale.framesPerSecond};case Lx:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case $x:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case lf:return"symbol";case uf:case gg:case yg:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case $1:case Ox:case Mx:return[r.scale.minOpacity,r.scale.maxOpacity]}}function QFe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=wse(n),o=r[s];if(P$e({step:e,offsetIsDiscrete:Qn(o)&&OLe(o.type)})==="offset"&&h$e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${Ljt(f)})`}}else return e.step}function JFe(e,t){if(P$e({step:e,offsetIsDiscrete:Wa(t)})==="offset")return{step:e.step}}function mWt(e,t,n){const r=e===Nx?"x":"y",i=t.getScaleComponent(r);if(!i)return XFe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=ZFe(r,t.size,t.config.view);if(Q0(l)){const c=JFe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if($t(l)&&l.timeUnit){const c=RLe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Qb({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=pn(f)?`${f.signal}/2`+h:`${f/2+d}`,m=pn(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return UMe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function ZFe(e,t,n){const r=e===$s?"width":"height",i=t[r];return i||y8(n,r)}function gWt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ft(n)?n.length+1:(Pt(z7t(r)),3)}}function yWt(e,t,n){const r=()=>{const i=Ip(t),s=Ip(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return pn(t)?new La(r):{signal:r()}}function vWt(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(qj("size",e))}const Wye=.95;function bWt(e,t,n,r){const i={x:qye(n,"x"),y:qye(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Gye(t,i,r.view);return bi(s)?s-1:new La(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Gye(t,i,r.view);return bi(s)?Math.pow(Wye*s,2):new La(()=>`pow(${Wye} * ${s.signal}, 2)`)}}throw new Error(qj("size",e))}function Gye(e,t,n){const r=Q0(e.width)?e.width.step:UK(n,"width"),i=Q0(e.height)?e.height.step:UK(n,"height");return t.x||t.y?new La(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function e5e(e,t){zs(e)?xWt(e,t):n5e(e,t)}function xWt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of It(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=fa(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=$K(h,t),v=jLe(a,t);if(d!==void 0&&(g?v&&Pt(v):Pt(bLe(h,t,a))),g&&v===void 0)if(d!==void 0){const b=f.timeUnit,w=f.type;switch(t){case"domainMax":case"domainMin":rT(u[t])||w==="temporal"||b?l.set(t,{signal:n7(u[t],{type:w,timeUnit:b})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const b=Rt(Yye,t)?Yye[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:p$e(i,a),hasSecondaryRangeChannel:!!i[vg(a)]}):r.scale[t];b!==void 0&&l.set(t,b,!1)}}}const Yye={bins:({model:e,fieldOrDatumDef:t})=>$t(t)?_Wt(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>wWt(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>EWt(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>TWt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>SWt(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>CWt(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=$t(e)?e.sort:void 0;return AWt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>IWt(e,t,n,r,i,s.scale,o)};function t5e(e){zs(e)?fWt(e):n5e(e,"range")}function n5e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?t5e(r):e5e(r,t);for(const r of It(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Jb(i,a,t,"scale",W$e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function _Wt(e,t){const n=t.bin;if(hs(n)){const r=Soe(e,t.field,n);return new La(()=>e.getSignalName(r))}else if(du(n)&&tT(n)&&n.step!==void 0)return{step:n.step}}function wWt(e,t){if(Ir([uf,gg,yg],e)&&t!=="nominal")return"hcl"}function EWt(e,t,n,r,i,s){var o;if(!((o=Kp(s))!=null&&o.bin||ft(n)||i!=null||r!=null||Ir([mu.TIME,mu.UTC],e)))return Do(t)?!0:void 0}function TWt(e,t,n,r,i,s){if(Do(e)){if(m0(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!($t(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===mu.POINT)return n.pointPadding}}function SWt(e,t,n,r,i,s=!1){if(e===void 0){if(Do(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:c}=i;return s?c:Ro(o,n==="bar"?a:n==="tick"?l:u)}else if(nO(t)&&r===mu.BAND)return i.offsetBandPaddingInner}}function CWt(e,t,n,r,i,s=!1){if(e===void 0){if(Do(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===mu.BAND)return Ro(o,pn(r)?{signal:`${r.signal}/2`}:r/2)}else if(nO(t)){if(n===mu.POINT)return .5;if(n===mu.BAND)return i.offsetBandPaddingOuter}}}function AWt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Gp(e)&&t==="descending"?pn(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Gp(e)&&t==="descending")return!0}function IWt(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Gp(i)){if(ft(n)){const u=n[0],l=n[n.length-1];if(bi(u)&&u<=0&&bi(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!sA(i))return!0;if(!($t(t)&&t.bin)&&Ir([...F1,...yjt],e)){const{orient:u,type:l}=r;return Ir(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Ir(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function kWt(e,t,n,r,i=!1){const s=RWt(t,n,r,i),{type:o}=e;return bg(t)?o!==void 0?SUt(t,o)?$t(n)&&!TUt(o,n.type)?(Pt(C7t(o,s)),s):o:(Pt(S7t(t,o,s)),s):s:null}function RWt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Z2(e)||OH(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Pt(MH(e,"ordinal")),"ordinal";if(PH(e))return"band";if(Do(e)||nO(e)){if(Ir(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Sse)return"band";const s=n[cf(e)];return yE(s)||aA(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Z2(e)?"time":OH(e)==="discrete"?(Pt(MH(e,"temporal")),"ordinal"):$t(t)&&t.timeUnit&&Ha(t.timeUnit).utc?"utc":PH(e)?"band":"time";case"quantitative":return Z2(e)?$t(t)&&hs(t.bin)?"bin-ordinal":"linear":OH(e)==="discrete"?(Pt(MH(e,"quantitative")),"ordinal"):PH(e)?"band":"linear";case"geojson":return}throw new Error(yLe(t.type))}function DWt(e,{ignoreRange:t}={}){r5e(e),GFe(e);for(const n of EUt)e5e(e,n);t||t5e(e)}function r5e(e){zs(e)?e.component.scales=NWt(e):e.component.scales=OWt(e)}function NWt(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of Cse){const o=fa(t[s]);if(o&&n===VLe&&s===lf&&o.type===SI)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=p$e(t,s),l=kWt(a,s,o,r,u);i[s]=new KFe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const PWt=W$e((e,t)=>eye(e)-eye(t));function OWt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){r5e(s);for(const o of It(s.component.scales))if((t=i.scale)[o]??(t[o]=OFe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?hUt(a.value,u.value)?r[o]=Jb(a,u,"type","scale",PWt):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of It(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new KFe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class GH{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function zs(e){return(e==null?void 0:e.type)==="unit"}function od(e){return(e==null?void 0:e.type)==="facet"}function Roe(e){return(e==null?void 0:e.type)==="concat"}function RI(e){return(e==null?void 0:e.type)==="layer"}class Doe{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.parent=r,this.config=s,this.view=pu(a),this.name=t.name??i,this.title=jv(t.title)?{text:t.title}:t.title?pu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new GH,this.projectionNameMap=r?r.projectionNameMap:new GH,this.signalNameMap=r?r.signalNameMap:new GH,this.data=t.data,this.description=t.description,this.transforms=BVt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Vzt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:Zj(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new j1,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?qn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){DWt(this)}parseProjection(){HFe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){BFe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of It(r)){const o=r[s];o!==void 0&&(i[s]=_s(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=_s(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Gi(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=eqt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of sh)t[r].title&&n.push(YHt(this,r));for(const r of _oe)n=n.concat(KHt(this,r));return n}assembleAxes(){return MHt(this.component.axes,this.config)}assembleLegends(){return UFe(this)}assembleProjections(){return Eqt(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...uLe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Ir(["unit","layer"],this.type)?Ir(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Gi(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||od(this.parent)?YFe(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ms((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Hs[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(od(this.parent)){const n=NFe(t),r=zj(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(Wa(s)&&nT(o)){const a=i.get("name"),u=p7(this,r),l=koe(u);if(l){const c=Vt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:DFe(a,i,c)}}else return Pt(kse(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(eLe(t)&&bg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Ujt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class i5e extends Doe{vgField(t,n={}){const r=this.fieldDef(t);if(r)return Vt(r,n)}reduceFieldDef(t,n){return vzt(this.getMapping(),(r,i,s)=>{const o=Kp(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){roe(this.getMapping(),(r,i)=>{const s=Kp(r);s&&t(s,i)},n)}}class m7 extends Bi{clone(){return new m7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Lr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class g7 extends Bi{clone(){return new g7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Lr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class y7 extends Bi{clone(){return new y7(this.parent,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Lr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class v7 extends Bi{clone(){return new v7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Lr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class nC extends Bi{clone(){return new nC(null,qn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[cm,lm],[gh,fm]]){const s=i.map(o=>{const a=fa(n.encoding[o]);return $t(a)?a.field:xg(a)?{expr:`${a.datum}`}:Yp(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new nC(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(lf)){const i=n.typedFieldDef(lf);i.type===SI&&(t=new nC(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Gt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Lr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class _P extends Bi{clone(){return new _P(null,this.projection,qn(this.fields),qn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[cm,lm],[gh,fm]]){const i=r.map(o=>{const a=fa(n.encoding[o]);return $t(a)?a.field:xg(a)?{expr:`${a.datum}`}:Yp(a)?{expr:`${a.value}`}:void 0}),s=r[0]===gh?"2":"";(i[0]||i[1])&&(t=new _P(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Gt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Lr(this.fields)} ${Lr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Hw extends Bi{clone(){return new Hw(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Hw(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if($t(i)&&$t(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=y$e(n.mark,r);return new Hw(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Lr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:xVt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class b7 extends Bi{clone(){return new b7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Lr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class wP extends Bi{clone(){return new wP(null,qn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(_Vt(o)){let u=a5e(o.data,s);u||(u=new _E(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Qc(u,l,Hs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(wVt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ms(u),u)}catch{throw new Error(qjt(u))}if(a=l.materialized,!a)throw new Error(Wjt(u))}return new wP(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Wt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Lr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Wt(this.transform.as)}:{}};else{let n=this.transform.as;Gt(n)||(Pt(r7t),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class x7 extends Bi{clone(){return new x7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Lr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class _7 extends Bi{clone(){return new _7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=qn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Lr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class w7 extends Bi{clone(){return new w7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=p0((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Lr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class E7 extends Bi{clone(){return new E7(null,qn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Lr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function s5e(e){let t=0;function n(r,i){if(r instanceof _E&&!r.isGenerator&&!lA(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof al&&(r.parent instanceof _E&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof II){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof dO||r instanceof hO||r instanceof pA||r instanceof AI||r instanceof fA||r instanceof _P||r instanceof Mp||r instanceof wP||r instanceof kI||r instanceof aT||r instanceof v7||r instanceof y7||r instanceof m7||r instanceof b7||r instanceof x7||r instanceof _7||r instanceof Zb||r instanceof E7||r instanceof w7||r instanceof g7)&&i.transform.push(r.assemble()),(r instanceof k0||r instanceof A0||r instanceof Hw||r instanceof Wy||r instanceof nC)&&i.transform.push(...r.assemble()),r instanceof Qc&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Qc?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Qc&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function MWt(e){const t=[],n=s5e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function LWt(e,t){const n=[],r=s5e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function $Wt(e){return e==="top"||e==="left"||pn(e)?"header":"footer"}function FWt(e){for(const t of sh)BWt(e,t);Kye(e,"x"),Kye(e,"y")}function BWt(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=hA("title",null,r,t);let l=eC(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=ft(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=hA("labelOrient",a.header,r,t),f=a.header!==null?Ro((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Ir(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[o5e(e,t,f)]}}}function o5e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Kye(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Toe(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=$Wt(a.get("orient"));o[u]??(o[u]=[o5e(e,s,!1)]);const l=xD(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function jWt(e){Noe(e),_8(e,"width"),_8(e,"height")}function UWt(e){Noe(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";_8(e,t),_8(e,n)}function Noe(e){for(const t of e.children)t.parseLayoutSize()}function _8(e,t){const n=NFe(t),r=zj(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??OFe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=Jb(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function zWt(e){const{size:t,component:n}=e;for(const r of F1){const i=cf(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Q0(s)?"step":s,!0)}else{const s=VWt(e,i);n.layoutSize.set(i,s,!1)}}}function VWt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(Wa(s)){const a=y8(r.view,t);return nT(o)||Q0(a)?"step":a}else return jK(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return jK(r.view,t);{const s=y8(r.view,t);return Q0(s)?s.step:s}}}function iX(e,t,n){return Vt(t,{suffix:`by_${Vt(e)}`,...n})}class sN extends i5e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=$oe(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!oO(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=It(t),r={};for(const i of n){if(![zy,Vy].includes(i)){Pt(qj(i,"facet"));break}const s=t[i];if(s.field===void 0){Pt(MK(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=noe(t,n);return r.header?r.header=pu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return Rt(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=T7(this),this.child.parseData()}parseLayoutSize(){Noe(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Object.values(this.component.selection).some(t=>I0(t))&&Dse(Rse)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),FWt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of sh)for(const r of woe){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=hA("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=d7(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof sN))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof sN?{...this.channelHasField("column")?{encode:{update:{columns:{field:Vt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof sN){if(this.child.channelHasField("column")){const i=Vt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of F1){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(Wa(o)&&nT(a)){const u=p7(this.child,i),l=koe(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Pt(kse(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of sh){const f=this.facet[c];if(f){u.push(Vt(f));const{bin:d,sort:h}=f;if(hs(d)&&u.push(Vt(f,{binSuffix:"end"})),Hy(h)){const{field:p,op:m=Jj}=h,g=iX(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(ft(h)){const p=dA(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Hy(r.sort)?[iX(r,r.sort,{expr:"datum"})]:ft(r.sort)?[dA(r,t,{expr:"datum"})]:[Vt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Hy(i)?i.order:!ft(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return QK(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of _oe)if(t[s]){const o=hA("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return QK(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=MWt(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:sh.map(u=>this.facetSortFields(u)).flat(),order:sh.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(iHt(this,[]))}]}getMapping(){return this.facet}}function HWt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Hy(s.sort)){const{field:o,op:a=Jj}=s.sort;e=i=new aT(e,{joinaggregate:[{op:a,field:o,as:iX(s,s.sort,{forAs:!0})}],groupby:[Vt(s)]})}return i}return null}function a5e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(xP(e)&&xP(a)){if(Zf(e.values,a.values))return o}else if(lA(e)&&lA(a)){if(e.url===a.url)return o}else if(G$e(e)&&e.name===o.dataName)return o}}return null}function qWt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new _E({values:[]});return t.push(r),r}const n=a5e(e.data,t);if(n)return mb(e.data)||(n.data.format=zMe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new _E(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function WWt(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(NVt(i))o=e=new fA(e,i),s="derived";else if(poe(i)){const a=Lqt(i);o=e=al.makeWithAncestors(e,{},a,n)??e,e=new AI(e,t,i.filter)}else if(z$e(i))o=e=k0.makeFromTransform(e,i,t),s="number";else if(OVt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new al(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=A0.makeFromTransform(e,i);else if(MVt(i))o=e=Mp.makeFromTransform(e,i),s="number",xoe(t)&&(e=new Zb(e));else if(U$e(i))o=e=wP.make(e,t,i,r++),s="derived";else if(kVt(i))o=e=new kI(e,i),s="number";else if(RVt(i))o=e=new aT(e,i),s="number";else if(LVt(i))o=e=Wy.makeFromTransform(e,i),s="derived";else if($Vt(i))o=e=new v7(e,i),s="derived";else if(FVt(i))o=e=new g7(e,i),s="derived";else if(DVt(i))o=e=new y7(e,i),s="derived";else if(EVt(i))o=e=new w7(e,i),s="derived";else if(IVt(i))e=new E7(e,i);else if(PVt(i))o=e=Hw.makeFromTransform(e,i),s="derived";else if(TVt(i))o=e=new m7(e,i),s="derived";else if(SVt(i))o=e=new x7(e,i),s="derived";else if(CVt(i))o=e=new _7(e,i),s="derived";else if(AVt(i))o=e=new b7(e,i),s="derived";else{Pt(n7t(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function T7(e){var g;let t=qWt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(mb(i)||lA(i)||xP(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new XVt;mb(i)?(Y$e(i)?t=new hO(t,i.sequence):moe(i)&&(t=new dO(t,i.graticule)),o.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),t=al.makeExplicit(t,e,o)??t,t=new Zb(t);const a=e.parent&&RI(e.parent);(zs(e)||od(e))&&a&&(t=k0.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=WWt(t,e,o));const u=Fqt(e),l=$qt(e);t=al.makeWithAncestors(t,{},{...u,...l},o)??t,zs(e)&&(t=nC.parseAll(t,e),t=_P.parseAll(t,e)),(zs(e)||od(e))&&(a||(t=k0.makeFromEncoding(t,e)??t),t=A0.makeFromEncoding(t,e)??t,t=fA.parseAllForSortIndex(t,e));const c=t=L6(Hs.Raw,e,t);if(zs(e)){const v=Mp.makeFromEncoding(t,e);v&&(t=v,xoe(e)&&(t=new Zb(t))),t=Hw.makeFromEncoding(t,e)??t,t=Wy.makeFromEncoding(t,e)??t}let f,d;if(zs(e)){const{markDef:v,mark:b,config:w}=e,E=Hi("invalid",v,w),{marks:T,scales:C}=d=X$e({invalid:E,isPath:Bx(b)});T!==C&&C==="include-invalid-values"&&(f=t=L6(Hs.PreFilterInvalid,e,t)),T==="exclude-invalid-values"&&(t=pA.make(t,e,d)??t)}const h=t=L6(Hs.Main,e,t);let p;if(zs(e)&&d){const{marks:v,scales:b}=d;v==="include-invalid-values"&&b==="exclude-invalid-values"&&(t=pA.make(t,e,d)??t,p=t=L6(Hs.PostFilterInvalid,e,t))}zs(e)&&PHt(e,h);let m=null;if(od(e)){const v=e.getName("facet");t=HWt(t,e.facet)??t,m=new II(t,e,v,h.getSource()),n[v]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:p}}function L6(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Qc(n,s,e,i);return r[s]=o,o}class GWt extends Doe{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Pt(Zjt),this.children=this.getChildren(t).map((l,c)=>$oe(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=T7(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of It(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>I0(t))&&Dse(Rse)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return s7(t)?t.vconcat:doe(t)?t.hconcat:t.concat}parseLayoutSize(){UWt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Eoe(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function YWt(e){return e===!1||e===null}const KWt={disable:1,gridScale:1,scale:1,...f$e,labelExpr:1,encode:1},u5e=It(KWt);class Poe extends j1{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Poe(qn(this.explicit),qn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!YWt(this.get(t))}hasOrientSignalRef(){return pn(this.explicit.orient)}}function XWt(e,t,n){const{encoding:r,config:i}=e,s=fa(r[t])??fa(r[vg(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(vE(u))return{text:kp({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(oA(s)==="quantitative"){if(aA(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:kp({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:kp({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(oA(s)==="temporal"&&i.timeFormatType&&$t(s)&&!s.timeUnit)return{text:kp({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function QWt(e){return F1.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[iGt(n,e)]),t),{})}const JWt={bottom:"top",top:"bottom",left:"right",right:"left"};function ZWt(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of It(i.component.axes))n.axis[s]=Toe(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=eGt(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of F1){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!pn(a)){if(r[a]>0&&!u){const l=JWt[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function eGt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=tGt(i,s)}}}else return t.map(n=>n.clone());return e}function tGt(e,t){for(const n of u5e){const r=Jb(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return mLe(i,s);case"gridScale":return{explicit:i.explicit,value:Ro(i.value,s.value)}}return a7(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function nGt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(pn(n.labelAngle)?n.labelAngle:vP(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===AFe(r,i))return!0}return e===n[t]}const rGt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function iGt(e,t){var v,b;let n=t.axis(e);const r=new Poe,i=fa(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((v=o[e==="x"?"axisX":"axisY"])==null?void 0:v.orient)||((b=o.axis)==null?void 0:b.orient)||VHt(e),u=t.getScaleComponent(e).get("type"),l=LHt(e,u,a,t.config),c=n!==void 0?!n:KK("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=jHt(i,n,e,o.style,l),d=QLe(n.formatType,i,u),h=XLe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const w of u5e){const E=w in Oye?Oye[w](p):aye(w)?n[w]:void 0,T=E!==void 0,C=nGt(E,w,n,t,e);if(T&&C)r.set(w,E,C);else{const{configValue:I=void 0,configFrom:R=void 0}=aye(w)&&w!=="values"?KK(w,o.style,n.style,l):{},N=I!==void 0;T&&!N?r.set(w,E,C):(R!=="vgAxisConfig"||rGt.has(w)&&N||cO(I)||pn(I))&&r.set(w,I,!1)}}const m=n.encoding??{},g=c$e.reduce((w,E)=>{if(!r.hasAxisPart(E))return w;const T=PFe(m[E]??{},t),C=E==="labels"?XWt(t,e,T):T;return C!==void 0&&!Gi(C)&&(w[E]={update:C}),w},{});return Gi(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function sGt({encoding:e,size:t}){for(const n of F1){const r=cf(n);Q0(t[r])&&sb(e[n])&&(delete t[r],Pt(xLe(r)))}return t}const oGt={vgMark:"arc",encodeEntry:e=>({...Dh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ql("x",e,{defaultPos:"mid"}),...ql("y",e,{defaultPos:"mid"}),...d1(e,"radius"),...d1(e,"theta")})},aGt={vgMark:"area",encodeEntry:e=>({...Dh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...v8("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...v8("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...boe(e)})},uGt={vgMark:"rect",encodeEntry:e=>({...Dh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...d1(e,"x"),...d1(e,"y")})},lGt={vgMark:"shape",encodeEntry:e=>({...Dh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&$t(n)&&n.type===SI?{field:Vt(n,{expr:"datum"})}:{}}]}},cGt={vgMark:"image",encodeEntry:e=>({...Dh(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...d1(e,"x"),...d1(e,"y"),...yoe(e,"url")})},fGt={vgMark:"line",encodeEntry:e=>({...Dh(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ql("x",e,{defaultPos:"mid"}),...ql("y",e,{defaultPos:"mid"}),...yu("size",e,{vgChannel:"strokeWidth"}),...boe(e)})},dGt={vgMark:"trail",encodeEntry:e=>({...Dh(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ql("x",e,{defaultPos:"mid"}),...ql("y",e,{defaultPos:"mid"}),...yu("size",e),...boe(e)})};function Ooe(e,t){const{config:n}=e;return{...Dh(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ql("x",e,{defaultPos:"mid"}),...ql("y",e,{defaultPos:"mid"}),...yu("size",e),...yu("angle",e),...hGt(e,n,t)}}function hGt(e,t,n){return n?{shape:{value:n}}:yu("shape",e)}const pGt={vgMark:"symbol",encodeEntry:e=>Ooe(e)},mGt={vgMark:"symbol",encodeEntry:e=>Ooe(e,"circle")},gGt={vgMark:"symbol",encodeEntry:e=>Ooe(e,"square")},yGt={vgMark:"rect",encodeEntry:e=>({...Dh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...d1(e,"x"),...d1(e,"y")})},vGt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Dh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...v8("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...v8("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...yu("size",e,{vgChannel:"strokeWidth"})}}},bGt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Dh(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ql("x",e,{defaultPos:"mid"}),...ql("y",e,{defaultPos:"mid"}),...yoe(e),...yu("size",e,{vgChannel:"fontSize"}),...yu("angle",e),...Rye("align",xGt(e.markDef,n,t)),...Rye("baseline",_Gt(e.markDef,n,t)),...ql("radius",e,{defaultPos:null}),...ql("theta",e,{defaultPos:null})}}};function xGt(e,t,n){if(Hi("align",e,n)===void 0)return"center"}function _Gt(e,t,n){if(Hi("baseline",e,n)===void 0)return"middle"}const wGt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",s=r==="horizontal"?"y":"x",o=r==="horizontal"?"height":"width";return{...Dh(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...d1(e,i),...ql(s,e,{defaultPos:"mid",vgChannel:s==="y"?"yc":"xc"}),[o]:_s(Hi("thickness",n,t))}}},$6={arc:oGt,area:aGt,bar:uGt,circle:mGt,geoshape:lGt,image:cGt,line:fGt,point:pGt,rect:yGt,rule:vGt,square:gGt,text:bGt,tick:wGt,trail:dGt};function EGt(e){if(Ir([Xj,Yj,kUt],e.mark)){const t=y$e(e.mark,e.encoding);if(t.length>0)return TGt(e,t)}else if(e.mark===Kj){const t=PK.some(n=>Hi(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return SGt(e)}return Moe(e)}const Xye="faceted_path_";function TGt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Xye+e.requestDataName(Hs.Main),data:e.requestDataName(Hs.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Moe(e,{fromPrefix:Xye})}]}const Qye="stack_group_";function SGt(e){var l;const[t]=Moe(e,{fromPrefix:Qye}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...eA(t.encode.update,["y","yc","y2","height",...PK]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Xc(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...eA(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Xc(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of PK){const f=K0(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=_s(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=Vt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(Vt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=K0(f,e.markDef,e.config);return d!==void 0?{...c,[f]:_s(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Hs.Main),name:Qye+e.requestDataName(Hs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function CGt(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!ft(o)&&Yp(o)&&DK(o.value)||!o&&DK(Hi("order",i,s)))){if((ft(o)||$t(o))&&!n)return dLe(o,{expr:"datum"});if(Bx(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if($t(u))return{field:a}}}}function Moe(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Ro(r.clip,AGt(e),IGt(e)),a=cLe(r),u=i.key,l=CGt(e),c=kGt(e),f=Hi("aria",r,s),d=$6[n].postEncodingTransform?$6[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:$6[n].vgMark,...o?{clip:o}:{},style:a,...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Hs.Main)},encode:{update:$6[n].encodeEntry(e)},...d?{transform:d}:{}}]}function AGt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function IGt(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function kGt(e){if(!e.component.selection)return null;const t=It(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=It(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class l5e extends i5e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,lye(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[],this.correctDataNames=l=>{var c,f,d;return(c=l.from)!=null&&c.data&&(l.from.data=this.lookupDataSource(l.from.data),"time"in this.encoding&&(l.from.data=l.from.data+J$e)),(d=(f=l.from)==null?void 0:f.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l};const o=X0(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=dVt(o,s,{graticule:t.data&&moe(t.data)}));const u=this.encoding=gzt(t.encoding||{},a,o.filled,s);this.markDef=F$e(o,u,s),this.size=sGt({encoding:u,size:lye(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=$$e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>coe(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===VLe,r=t&&ujt.some(i=>Qn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Cse.reduce((r,i)=>{const s=fa(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=pu(t);return ft(n)&&(i.domain=n.map(Yf)),ft(r)&&(i.range=r.map(Yf)),i}initAxes(t){return F1.reduce((n,r)=>{const i=t[r];if(Qn(i)||r===$s&&Qn(t.x2)||r===Ka&&Qn(t.y2)){const s=Qn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=It(t),r={};for(const i of n){const s=t[i];r[i]=cO(s)?lLe(s):Yf(s)}return r}initLegends(t){return bjt.reduce((n,r)=>{const i=fa(t[r]);if(i&&_jt(r)){const s=i.legend;n[r]=s&&pu(s)}return n},{})}parseData(){this.component.data=T7(this)}parseLayoutSize(){zWt(this)}parseSelections(){this.component.selection=NHt(this,this.selection)}parseMarkGroup(){this.component.mark=EGt(this)}parseAxesAndHeaders(){this.component.axes=QWt(this)}assembleSelectionTopLevelSignals(t){return sHt(this,t)}assembleSignals(){return[...TFe(this),...rHt(this,[])]}assembleSelectionData(t){return oHt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Eoe(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!RI(this.parent))&&(t=nFe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return zw(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Kp(n)}typedFieldDef(t){const n=this.fieldDef(t);return tc(n)?n:null}}class Loe extends Doe{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(o7(a))return new Loe(a,this,this.getName(`layer_${u}`),o,s);if(B1(a))return new l5e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Ise(a))})}parseData(){this.component.data=T7(this);for(const t of this.children)t.parseData()}parseLayoutSize(){jWt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of It(t.component.selection))this.component.selection[n]=t.component.selection[n]}Object.values(this.component.selection).some(t=>I0(t))&&Dse(Rse)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){ZWt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),TFe(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Eoe(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Wt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return aHt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),UFe(this))}}function $oe(e,t,n,r,i){if(Zj(e))return new sN(e,t,n,i);if(o7(e))return new Loe(e,t,n,r,i);if(B1(e))return new l5e(e,t,n,r,i);if(jzt(e))return new GWt(e,t,n,i);throw new Error(Ise(e))}function RGt(e,t={}){t.logger&&V7t(t.logger),t.fieldTitle&&a$e(t.fieldTitle);try{const n=L$e(dI(t.config,e.config)),r=q$e(e,n),i=$oe(r,null,"",void 0,n);return i.parse(),eWt(i.component.data,i),{spec:NGt(i,DGt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&H7t(),t.fieldTitle&&azt()}}function DGt(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Gt(t)&&(t={type:t}),i&&s&&GVt(t.type)){if(i==="step"&&s==="step")Pt(Gge()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Pt(Gge(zj(o)));const a=o==="width"?"height":"width";t.type=YVt(a)}}return{...It(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},..._ye(n,!1),..._ye(e,!0)}}function NGt(e,t,n={},r){const i=e.config?eVt(e.config):void 0,s=LWt(e.component.data,n),o=e.assembleSelectionData(s),a=e.assembleProjections(),u=e.assembleTitle(),l=e.assembleGroupStyle(),c=e.assembleGroupEncodeEntry(!0);let f=e.assembleLayoutSignals();f=f.filter(p=>(p.name==="width"||p.name==="height")&&p.value!==void 0?(t[p.name]=+p.value,!1):!0);const{params:d,...h}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...h,...u?{title:u}:{},...l?{style:l}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...f,...e.assembleSelectionTopLevelSignals([]),...N$e(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const PGt=njt.version,OGt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:nA,accessPathWithDatum:vse,accessWithDatumToUnescapedPath:$i,compile:RGt,contains:Ir,deepEqual:Zf,deleteNestedProperty:u8,duplicate:qn,entries:Kb,every:mse,fieldIntersection:yse,flatAccessWithDatum:HMe,getFirstDefined:Ro,hasIntersection:gse,hasProperty:Rt,hash:Lr,internalField:GMe,isBoolean:yP,isEmpty:Gi,isEqual:ijt,isInternalField:YMe,isNullOrFalse:DK,isNumeric:Lj,keys:It,logicalExpr:rN,mergeDeep:zMe,never:UMe,normalize:q$e,normalizeAngle:vP,omit:Xc,pick:eA,prefixGenerator:NK,removePathFromField:EI,replaceAll:dE,replacePathInField:mh,resetIdCounter:ojt,setEqual:VMe,some:tA,stringify:Yi,titleCase:Z3,unique:p0,uniqueId:WMe,vals:Tu,varName:Ms,version:PGt},Symbol.toStringTag,{value:"Module"}));function c5e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var MGt="vega-themes",LGt="2.15.0",$Gt="Themes for stylized Vega and Vega-Lite visualizations.",FGt=["vega","vega-lite","themes","style"],BGt="BSD-3-Clause",jGt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},UGt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],zGt="build/vega-themes.js",Foe="build/vega-themes.module.js",VGt="build/vega-themes.min.js",HGt="build/vega-themes.min.js",qGt="build/vega-themes.module.d.ts",WGt={type:"git",url:"https://github.com/vega/vega-themes.git"},GGt=["src","build"],YGt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},KGt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},XGt={vega:"*","vega-lite":"*"},QGt={},JGt={name:MGt,version:LGt,description:$Gt,keywords:FGt,license:BGt,author:jGt,contributors:UGt,main:zGt,module:Foe,unpkg:VGt,jsdelivr:HGt,types:qGt,repository:WGt,files:GGt,scripts:YGt,devDependencies:KGt,peerDependencies:XGt,dependencies:QGt};const KS="#fff",Jye="#888",ZGt={background:"#333",view:{stroke:Jye},title:{color:KS,subtitleColor:KS},style:{"guide-label":{fill:KS},"guide-title":{fill:KS}},axis:{domainColor:KS,gridColor:Jye,tickColor:KS}},P_="#4572a7",eYt={background:"#fff",arc:{fill:P_},area:{fill:P_},line:{stroke:P_,strokeWidth:2},path:{stroke:P_},rect:{fill:P_},shape:{stroke:P_},symbol:{fill:P_,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},O_="#30a2da",YH="#cbcbcb",tYt="#999",nYt="#333",Zye="#f0f0f0",e1e="#333",rYt={arc:{fill:O_},area:{fill:O_},axis:{domainColor:YH,grid:!0,gridColor:YH,gridWidth:1,labelColor:tYt,labelFontSize:10,titleColor:nYt,tickColor:YH,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Zye,group:{fill:Zye},legend:{labelColor:e1e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:e1e,titleFontSize:14,titlePadding:10},line:{stroke:O_,strokeWidth:2},path:{stroke:O_,strokeWidth:.5},rect:{fill:O_},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:O_},bar:{binSpacing:2,fill:O_,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},M_="#000",iYt={group:{fill:"#e5e5e5"},arc:{fill:M_},area:{fill:M_},line:{stroke:M_},path:{stroke:M_},rect:{fill:M_},shape:{stroke:M_},symbol:{fill:M_,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},sYt=22,oYt="normal",t1e="Benton Gothic, sans-serif",n1e=11.5,aYt="normal",L_="#82c6df",KH="Benton Gothic Bold, sans-serif",r1e="normal",i1e=13,AR={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},uYt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:KH,fontSize:sYt,fontWeight:oYt},arc:{fill:L_},area:{fill:L_},line:{stroke:L_,strokeWidth:2},path:{stroke:L_},rect:{fill:L_},shape:{stroke:L_},symbol:{fill:L_,size:30},axis:{labelFont:t1e,labelFontSize:n1e,labelFontWeight:aYt,titleFont:KH,titleFontSize:i1e,titleFontWeight:r1e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:t1e,labelFontSize:n1e,symbolType:"square",titleFont:KH,titleFontSize:i1e,titleFontWeight:r1e},range:{category:AR["category-6"],diverging:AR["fireandice-6"],heatmap:AR["fire-7"],ordinal:AR["fire-7"],ramp:AR["fire-7"]}},$_="#ab5787",F6="#979797",lYt={background:"#f9f9f9",arc:{fill:$_},area:{fill:$_},line:{stroke:$_},path:{stroke:$_},rect:{fill:$_},shape:{stroke:$_},symbol:{fill:$_,size:30},axis:{domainColor:F6,domainWidth:.5,gridWidth:.2,labelColor:F6,tickColor:F6,tickWidth:.2,titleColor:F6},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},F_="#3e5c69",cYt={background:"#fff",arc:{fill:F_},area:{fill:F_},line:{stroke:F_},path:{stroke:F_},rect:{fill:F_},shape:{stroke:F_},symbol:{fill:F_},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Wd="#1696d2",s1e="#000000",fYt="#FFFFFF",B6="Lato",XH="Lato",dYt="Lato",hYt="#DEDDDD",pYt=18,IR={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},mYt={background:fYt,title:{anchor:"start",fontSize:pYt,font:B6},axisX:{domain:!0,domainColor:s1e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:XH,labelAngle:0,tickColor:s1e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:B6},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:hYt,gridWidth:1,labelFontSize:12,labelFont:XH,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:B6,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:XH,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:B6,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:IR["six-groups-cat-1"],diverging:IR["diverging-colors"],heatmap:IR["diverging-colors"],ordinal:IR["six-groups-seq"],ramp:IR["shades-blue"]},area:{fill:Wd},rect:{fill:Wd},line:{color:Wd,stroke:Wd,strokeWidth:5},trail:{color:Wd,stroke:Wd,strokeWidth:0,size:1},path:{stroke:Wd,strokeWidth:.5},point:{filled:!0},text:{font:dYt,color:Wd,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Wd,stroke:null}},arc:{fill:Wd},shape:{stroke:Wd},symbol:{fill:Wd,size:30}},B_="#3366CC",o1e="#ccc",j6="Arial, sans-serif",gYt={arc:{fill:B_},area:{fill:B_},path:{stroke:B_},rect:{fill:B_},shape:{stroke:B_},symbol:{stroke:B_},circle:{fill:B_},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:j6,fontSize:12},"guide-title":{font:j6,fontSize:12},"group-title":{font:j6,fontSize:12}},title:{font:j6,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:o1e,tickColor:o1e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Boe=e=>e*(1/3+1),a1e=Boe(9),u1e=Boe(10),l1e=Boe(12),kR="Segoe UI",c1e="wf_standard-font, helvetica, arial, sans-serif",f1e="#252423",RR="#605E5C",d1e="transparent",yYt="#C8C6C4",ap="#118DFF",vYt="#12239E",bYt="#E66C37",xYt="#6B007B",_Yt="#E044A7",wYt="#744EC2",EYt="#D9B300",TYt="#D64550",f5e=ap,d5e="#DEEFFF",h1e=[d5e,f5e],SYt=[d5e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",f5e],CYt={view:{stroke:d1e},background:d1e,font:kR,header:{titleFont:c1e,titleFontSize:l1e,titleColor:f1e,labelFont:kR,labelFontSize:u1e,labelColor:RR},axis:{ticks:!1,grid:!1,domain:!1,labelColor:RR,labelFontSize:a1e,titleFont:c1e,titleColor:f1e,titleFontSize:l1e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:yYt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ap},line:{stroke:ap,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:kR,fontSize:a1e,fill:RR},arc:{fill:ap},area:{fill:ap,line:!0,opacity:.6},path:{stroke:ap},rect:{fill:ap},point:{fill:ap,filled:!0,size:75},shape:{stroke:ap},symbol:{fill:ap,strokeWidth:1.5,size:50},legend:{titleFont:kR,titleFontWeight:"bold",titleColor:RR,labelFont:kR,labelFontSize:u1e,labelColor:RR,symbolType:"circle",symbolSize:75},range:{category:[ap,vYt,bYt,xYt,_Yt,wYt,EYt,TYt],diverging:h1e,heatmap:h1e,ordinal:SYt}},QH='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',AYt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',JH=400,U6={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},IYt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],kYt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function S7({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=U6.gridBg[e],i=U6.textPrimary[e],s=U6.textSecondary[e],o=n==="dark"?IYt:kYt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:QH,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:AYt,labelFontWeight:JH,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:U6.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:QH,fill:s,fontWeight:JH},"guide-title":{font:QH,fill:s,fontWeight:JH}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const RYt=S7({theme:"white",background:"#ffffff"}),DYt=S7({theme:"g10",background:"#f4f4f4"}),NYt=S7({theme:"g90",background:"#262626"}),PYt=S7({theme:"g100",background:"#161616"}),OYt=JGt.version,MYt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:DYt,carbong100:PYt,carbong90:NYt,carbonwhite:RYt,dark:ZGt,excel:eYt,fivethirtyeight:rYt,ggplot2:iYt,googlecharts:gYt,latimes:uYt,powerbi:CYt,quartz:lYt,urbaninstitute:mYt,version:OYt,vox:cYt},Symbol.toStringTag,{value:"Module"}));function LYt(e,t,n,r){if(ft(e))return`[${e.map(i=>t(Gt(i)?i:p1e(i,n))).join(", ")}]`;if(Ht(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(Ht(c)&&(c=p1e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function $Yt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function p1e(e,t){return JSON.stringify(e,$Yt(t))}var FYt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const h5e="vg-tooltip-element",BYt={offsetX:10,offsetY:10,id:h5e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:jYt,maxDepth:2,formatTooltip:LYt,baseURL:""};function jYt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function UYt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return FYt.toString().replace(h5e,e)}function zYt(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class VYt{constructor(t){this.options={...BYt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=UYt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=zYt(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var ZH={};function HYt(e){return e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var eq,m1e;function qYt(){return m1e||(m1e=1,eq=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),eq}var WYt=_i;_i.Node=wE;_i.create=_i;function _i(e){var t=this;if(t instanceof _i||(t=new _i),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}_i.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};_i.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};_i.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};_i.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)YYt(this,arguments[e]);return this.length};_i.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)KYt(this,arguments[e]);return this.length};_i.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};_i.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};_i.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};_i.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};_i.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};_i.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};_i.prototype.map=function(e,t){t=t||this;for(var n=new _i,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};_i.prototype.mapReverse=function(e,t){t=t||this;for(var n=new _i,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};_i.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};_i.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};_i.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};_i.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};_i.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new _i;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};_i.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new _i;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};_i.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=GYt(this,i,n[r]);return s};_i.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function GYt(e,t,n){var r=t===e.head?new wE(n,null,t,e):new wE(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function YYt(e,t){e.tail=new wE(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function KYt(e,t){e.head=new wE(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function wE(e,t,n,r){if(!(this instanceof wE))return new wE(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{qYt()(_i)}catch{}const XYt=WYt,dw=Symbol("max"),py=Symbol("length"),XS=Symbol("lengthCalculator"),oN=Symbol("allowStale"),Rw=Symbol("maxAge"),cy=Symbol("dispose"),g1e=Symbol("noDisposeOnSet"),Na=Symbol("lruList"),lp=Symbol("cache"),p5e=Symbol("updateAgeOnGet"),tq=()=>1;class QYt{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[dw]=t.max||1/0;const n=t.length||tq;if(this[XS]=typeof n!="function"?tq:n,this[oN]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Rw]=t.maxAge||0,this[cy]=t.dispose,this[g1e]=t.noDisposeOnSet||!1,this[p5e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[dw]=t||1/0,DR(this)}get max(){return this[dw]}set allowStale(t){this[oN]=!!t}get allowStale(){return this[oN]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Rw]=t,DR(this)}get maxAge(){return this[Rw]}set lengthCalculator(t){typeof t!="function"&&(t=tq),t!==this[XS]&&(this[XS]=t,this[py]=0,this[Na].forEach(n=>{n.length=this[XS](n.value,n.key),this[py]+=n.length})),DR(this)}get lengthCalculator(){return this[XS]}get length(){return this[py]}get itemCount(){return this[Na].length}rforEach(t,n){n=n||this;for(let r=this[Na].tail;r!==null;){const i=r.prev;y1e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Na].head;r!==null;){const i=r.next;y1e(this,t,r,n),r=i}}keys(){return this[Na].toArray().map(t=>t.key)}values(){return this[Na].toArray().map(t=>t.value)}reset(){this[cy]&&this[Na]&&this[Na].length&&this[Na].forEach(t=>this[cy](t.key,t.value)),this[lp]=new Map,this[Na]=new XYt,this[py]=0}dump(){return this[Na].map(t=>w8(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Na]}set(t,n,r){if(r=r||this[Rw],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[XS](n,t);if(this[lp].has(t)){if(s>this[dw])return rC(this,this[lp].get(t)),!1;const u=this[lp].get(t).value;return this[cy]&&(this[g1e]||this[cy](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[py]+=s-u.length,u.length=s,this.get(t),DR(this),!0}const o=new JYt(t,n,s,i,r);return o.length>this[dw]?(this[cy]&&this[cy](t,n),!1):(this[py]+=o.length,this[Na].unshift(o),this[lp].set(t,this[Na].head),DR(this),!0)}has(t){if(!this[lp].has(t))return!1;const n=this[lp].get(t).value;return!w8(this,n)}get(t){return nq(this,t,!0)}peek(t){return nq(this,t,!1)}pop(){const t=this[Na].tail;return t?(rC(this,t),t.value):null}del(t){rC(this,this[lp].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[lp].forEach((t,n)=>nq(this,n,!1))}}const nq=(e,t,n)=>{const r=e[lp].get(t);if(r){const i=r.value;if(w8(e,i)){if(rC(e,r),!e[oN])return}else n&&(e[p5e]&&(r.value.now=Date.now()),e[Na].unshiftNode(r));return i.value}},w8=(e,t)=>{if(!t||!t.maxAge&&!e[Rw])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Rw]&&n>e[Rw]},DR=e=>{if(e[py]>e[dw])for(let t=e[Na].tail;e[py]>e[dw]&&t!==null;){const n=t.prev;rC(e,t),t=n}},rC=(e,t)=>{if(t){const n=t.value;e[cy]&&e[cy](n.key,n.value),e[py]-=n.length,e[lp].delete(n.key),e[Na].removeNode(t)}};class JYt{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const y1e=(e,t,n,r)=>{let i=n.value;w8(e,i)&&(rC(e,n),e[oN]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var ZYt=QYt;const eKt=Object.freeze({loose:!0}),tKt=Object.freeze({}),nKt=e=>e?typeof e!="object"?eKt:e:tKt;var joe=nKt,sX={exports:{}};const rKt="2.0.0",m5e=256,iKt=Number.MAX_SAFE_INTEGER||9007199254740991,sKt=16,oKt=m5e-6,aKt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Uoe={MAX_LENGTH:m5e,MAX_SAFE_COMPONENT_LENGTH:sKt,MAX_SAFE_BUILD_LENGTH:oKt,MAX_SAFE_INTEGER:iKt,RELEASE_TYPES:aKt,SEMVER_SPEC_VERSION:rKt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const uKt=typeof process=="object"&&ZH&&ZH.NODE_DEBUG&&/\bsemver\b/i.test(ZH.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var C7=uKt;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Uoe,s=C7;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,v]of d)m=m.split(`${g}*`).join(`${g}{0,${v}}`).split(`${g}+`).join(`${g}{1,${v}}`);return m},p=(m,g,v)=>{const b=h(g),w=c++;s(m,w,g),l[m]=w,u[w]=g,o[w]=new RegExp(g,v?"g":void 0),a[w]=new RegExp(b,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(sX,sX.exports);var zoe=sX.exports;const v1e=/^[0-9]+$/,g5e=(e,t)=>{const n=v1e.test(e),r=v1e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},lKt=(e,t)=>g5e(t,e);var cKt={compareIdentifiers:g5e,rcompareIdentifiers:lKt};const z6=C7,{MAX_LENGTH:b1e,MAX_SAFE_INTEGER:V6}=Uoe,{safeRe:x1e,t:_1e}=zoe,fKt=joe,{compareIdentifiers:QS}=cKt;let dKt=class Um{constructor(t,n){if(n=fKt(n),t instanceof Um){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>b1e)throw new TypeError(`version is longer than ${b1e} characters`);z6("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?x1e[_1e.LOOSE]:x1e[_1e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>V6||this.major<0)throw new TypeError("Invalid major version");if(this.minor>V6||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>V6||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<V6)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(z6("SemVer.compare",this.version,this.options,t),!(t instanceof Um)){if(typeof t=="string"&&t===this.version)return 0;t=new Um(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Um||(t=new Um(t,this.options)),QS(this.major,t.major)||QS(this.minor,t.minor)||QS(this.patch,t.patch)}comparePre(t){if(t instanceof Um||(t=new Um(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(z6("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return QS(r,i)}while(++n)}compareBuild(t){t instanceof Um||(t=new Um(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(z6("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return QS(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),QS(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Voe=dKt;const w1e=Voe,hKt=(e,t,n)=>new w1e(e,n).compare(new w1e(t,n));var DI=hKt;const pKt=DI,mKt=(e,t,n)=>pKt(e,t,n)===0;var gKt=mKt;const yKt=DI,vKt=(e,t,n)=>yKt(e,t,n)!==0;var bKt=vKt;const xKt=DI,_Kt=(e,t,n)=>xKt(e,t,n)>0;var wKt=_Kt;const EKt=DI,TKt=(e,t,n)=>EKt(e,t,n)>=0;var SKt=TKt;const CKt=DI,AKt=(e,t,n)=>CKt(e,t,n)<0;var IKt=AKt;const kKt=DI,RKt=(e,t,n)=>kKt(e,t,n)<=0;var DKt=RKt;const NKt=gKt,PKt=bKt,OKt=wKt,MKt=SKt,LKt=IKt,$Kt=DKt,FKt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return NKt(e,n,r);case"!=":return PKt(e,n,r);case">":return OKt(e,n,r);case">=":return MKt(e,n,r);case"<":return LKt(e,n,r);case"<=":return $Kt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var BKt=FKt,rq,E1e;function jKt(){if(E1e)return rq;E1e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}rq=t;const n=joe,{safeRe:r,t:i}=zoe,s=BKt,o=C7,a=Voe,u=y5e();return rq}var iq,T1e;function y5e(){if(T1e)return iq;T1e=1;class e{constructor(H,Q){if(Q=r(Q),H instanceof e)return H.loose===!!Q.loose&&H.includePrerelease===!!Q.includePrerelease?H:new e(H.raw,Q);if(H instanceof i)return this.raw=H.value,this.set=[[H]],this.format(),this;if(this.options=Q,this.loose=!!Q.loose,this.includePrerelease=!!Q.includePrerelease,this.raw=H.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(J=>this.parseRange(J.trim())).filter(J=>J.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const J=this.set[0];if(this.set=this.set.filter(ne=>!p(ne[0])),this.set.length===0)this.set=[J];else if(this.set.length>1){for(const ne of this.set)if(ne.length===1&&m(ne[0])){this.set=[ne];break}}}this.format()}format(){return this.range=this.set.map(H=>H.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(H){const J=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+H,ne=n.get(J);if(ne)return ne;const Z=this.options.loose,ie=Z?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];H=H.replace(ie,L(this.options.includePrerelease)),s("hyphen replace",H),H=H.replace(a[u.COMPARATORTRIM],l),s("comparator trim",H),H=H.replace(a[u.TILDETRIM],c),s("tilde trim",H),H=H.replace(a[u.CARETTRIM],f),s("caret trim",H);let q=H.split(" ").map(Y=>v(Y,this.options)).join(" ").split(/\s+/).map(Y=>O(Y,this.options));Z&&(q=q.filter(Y=>(s("loose invalid filter",Y,this.options),!!Y.match(a[u.COMPARATORLOOSE])))),s("range list",q);const U=new Map,G=q.map(Y=>new i(Y,this.options));for(const Y of G){if(p(Y))return[Y];U.set(Y.value,Y)}U.size>1&&U.has("")&&U.delete("");const V=[...U.values()];return n.set(J,V),V}intersects(H,Q){if(!(H instanceof e))throw new TypeError("a Range is required");return this.set.some(J=>g(J,Q)&&H.set.some(ne=>g(ne,Q)&&J.every(Z=>ne.every(ie=>Z.intersects(ie,Q)))))}test(H){if(!H)return!1;if(typeof H=="string")try{H=new o(H,this.options)}catch{return!1}for(let Q=0;Q<this.set.length;Q++)if(B(this.set[Q],H,this.options))return!0;return!1}}iq=e;const t=ZYt,n=new t({max:1e3}),r=joe,i=jKt(),s=C7,o=Voe,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=zoe,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Uoe,p=F=>F.value==="<0.0.0-0",m=F=>F.value==="",g=(F,H)=>{let Q=!0;const J=F.slice();let ne=J.pop();for(;Q&&J.length;)Q=J.every(Z=>ne.intersects(Z,H)),ne=J.pop();return Q},v=(F,H)=>(s("comp",F,H),F=T(F,H),s("caret",F),F=w(F,H),s("tildes",F),F=I(F,H),s("xrange",F),F=N(F,H),s("stars",F),F),b=F=>!F||F.toLowerCase()==="x"||F==="*",w=(F,H)=>F.trim().split(/\s+/).map(Q=>E(Q,H)).join(" "),E=(F,H)=>{const Q=H.loose?a[u.TILDELOOSE]:a[u.TILDE];return F.replace(Q,(J,ne,Z,ie,q)=>{s("tilde",F,J,ne,Z,ie,q);let U;return b(ne)?U="":b(Z)?U=`>=${ne}.0.0 <${+ne+1}.0.0-0`:b(ie)?U=`>=${ne}.${Z}.0 <${ne}.${+Z+1}.0-0`:q?(s("replaceTilde pr",q),U=`>=${ne}.${Z}.${ie}-${q} <${ne}.${+Z+1}.0-0`):U=`>=${ne}.${Z}.${ie} <${ne}.${+Z+1}.0-0`,s("tilde return",U),U})},T=(F,H)=>F.trim().split(/\s+/).map(Q=>C(Q,H)).join(" "),C=(F,H)=>{s("caret",F,H);const Q=H.loose?a[u.CARETLOOSE]:a[u.CARET],J=H.includePrerelease?"-0":"";return F.replace(Q,(ne,Z,ie,q,U)=>{s("caret",F,ne,Z,ie,q,U);let G;return b(Z)?G="":b(ie)?G=`>=${Z}.0.0${J} <${+Z+1}.0.0-0`:b(q)?Z==="0"?G=`>=${Z}.${ie}.0${J} <${Z}.${+ie+1}.0-0`:G=`>=${Z}.${ie}.0${J} <${+Z+1}.0.0-0`:U?(s("replaceCaret pr",U),Z==="0"?ie==="0"?G=`>=${Z}.${ie}.${q}-${U} <${Z}.${ie}.${+q+1}-0`:G=`>=${Z}.${ie}.${q}-${U} <${Z}.${+ie+1}.0-0`:G=`>=${Z}.${ie}.${q}-${U} <${+Z+1}.0.0-0`):(s("no pr"),Z==="0"?ie==="0"?G=`>=${Z}.${ie}.${q}${J} <${Z}.${ie}.${+q+1}-0`:G=`>=${Z}.${ie}.${q}${J} <${Z}.${+ie+1}.0-0`:G=`>=${Z}.${ie}.${q} <${+Z+1}.0.0-0`),s("caret return",G),G})},I=(F,H)=>(s("replaceXRanges",F,H),F.split(/\s+/).map(Q=>R(Q,H)).join(" ")),R=(F,H)=>{F=F.trim();const Q=H.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return F.replace(Q,(J,ne,Z,ie,q,U)=>{s("xRange",F,J,ne,Z,ie,q,U);const G=b(Z),V=G||b(ie),Y=V||b(q),ee=Y;return ne==="="&&ee&&(ne=""),U=H.includePrerelease?"-0":"",G?ne===">"||ne==="<"?J="<0.0.0-0":J="*":ne&&ee?(V&&(ie=0),q=0,ne===">"?(ne=">=",V?(Z=+Z+1,ie=0,q=0):(ie=+ie+1,q=0)):ne==="<="&&(ne="<",V?Z=+Z+1:ie=+ie+1),ne==="<"&&(U="-0"),J=`${ne+Z}.${ie}.${q}${U}`):V?J=`>=${Z}.0.0${U} <${+Z+1}.0.0-0`:Y&&(J=`>=${Z}.${ie}.0${U} <${Z}.${+ie+1}.0-0`),s("xRange return",J),J})},N=(F,H)=>(s("replaceStars",F,H),F.trim().replace(a[u.STAR],"")),O=(F,H)=>(s("replaceGTE0",F,H),F.trim().replace(a[H.includePrerelease?u.GTE0PRE:u.GTE0],"")),L=F=>(H,Q,J,ne,Z,ie,q,U,G,V,Y,ee,ae)=>(b(J)?Q="":b(ne)?Q=`>=${J}.0.0${F?"-0":""}`:b(Z)?Q=`>=${J}.${ne}.0${F?"-0":""}`:ie?Q=`>=${Q}`:Q=`>=${Q}${F?"-0":""}`,b(G)?U="":b(V)?U=`<${+G+1}.0.0-0`:b(Y)?U=`<${G}.${+V+1}.0-0`:ee?U=`<=${G}.${V}.${Y}-${ee}`:F?U=`<${G}.${V}.${+Y+1}-0`:U=`<=${U}`,`${Q} ${U}`.trim()),B=(F,H,Q)=>{for(let J=0;J<F.length;J++)if(!F[J].test(H))return!1;if(H.prerelease.length&&!Q.includePrerelease){for(let J=0;J<F.length;J++)if(s(F[J].semver),F[J].semver!==i.ANY&&F[J].semver.prerelease.length>0){const ne=F[J].semver;if(ne.major===H.major&&ne.minor===H.minor&&ne.patch===H.patch)return!0}return!1}return!0};return iq}const UKt=y5e(),zKt=(e,t,n)=>{try{t=new UKt(t,n)}catch{return!1}return t.test(e)};var VKt=zKt,v5e=HYt(VKt);function HKt(e,t,n){const r=e.open(t),i=250,{origin:s}=new URL(t);let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function u(){o<=0||(r.postMessage(n,s),setTimeout(u,i),o-=1)}setTimeout(u,i)}var qKt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function b5e(e,...t){for(const n of t)WKt(e,n);return e}function WKt(e,t){for(const n of Object.keys(t))hI(e,n,t[n],!0)}const cp=w9t;let EP=OGt;const H6=typeof window<"u"?window:void 0;var qxe;EP===void 0&&((qxe=H6==null?void 0:H6.vl)!=null&&qxe.compile)&&(EP=H6.vl);const GKt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},YKt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},wD={vega:"Vega","vega-lite":"Vega-Lite"},E8={vega:cp.version,"vega-lite":EP?EP.version:"not available"},KKt={vega:e=>e,"vega-lite":(e,t)=>EP.compile(e,{config:t}).spec},XKt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,QKt="chart-wrapper";function JKt(e){return typeof e=="function"}function S1e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${wD[r]} JSON Source`}function ZKt(e,t){if(e.$schema){const n=c5e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${wD[n.library]}, but mode argument sets ${wD[t]??t}.`);const r=n.library;return v5e(E8[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${wD[r]} ${n.version}, but the current version of ${wD[r]} is v${E8[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function x5e(e){return!!(e&&"load"in e)}function C1e(e){return x5e(e)?e:cp.loader(e)}function eXt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Gt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function tXt(e,t,n={}){let r,i;Gt(t)?(i=C1e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=eXt(r),o=s.loader;(!i||o)&&(i=C1e(n.loader??o));const a=await A1e(s,i),u=await A1e(n,i),l={...b5e(u,a),config:dI(u.config??{},a.config??{})};return await rXt(e,r,l,i)}async function A1e(e,t){const n=Gt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Gt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function nXt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function rXt(e,t,n={},r){const i=n.theme?dI(MYt[n.theme],n.config??{}):n.config,s=kx(n.actions)?n.actions:b5e({},GKt,n.actions??{}),o={...YKt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??cp.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const T="vega-embed-style",{root:C,rootContainer:I}=nXt(c);if(!C.getElementById(T)){const R=document.createElement("style");R.id=T,R.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?qKt.toString():n.defaultStyle,I.appendChild(R)}}const f=ZKt(t,n.mode);let d=KKt[f](t,i);if(f==="vega-lite"&&d.$schema){const T=c5e(d.$schema);v5e(E8.vega,`^${T.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${T.version}, but current version is v${E8.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const T=document.createElement("div");T.classList.add(QKt),c.appendChild(T),h=T}const p=n.patch;if(p&&(d=p instanceof Function?p(d):U9(d,p,!0,!1).newDocument),n.formatLocale&&cp.formatLocale(n.formatLocale),n.timeFormatLocale&&cp.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const T in n.expressionFunctions){const C=n.expressionFunctions[T];"fn"in C?cp.expressionFunction(T,C.fn,C.visitor):C instanceof Function&&cp.expressionFunction(T,C)}const{ast:m}=n,g=cp.parse(d,f==="vega-lite"?{}:i,{ast:m}),v=new(n.viewClass||cp.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:cp.expressionInterpreter??n.expr??N9t}:{}});if(v.addSignalListener("autosize",(T,C)=>{const{type:I}=C;I=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):I=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):I=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:T,tooltip:C}=n,I=T&&!x5e(T)?T==null?void 0:T.baseURL:void 0,R=JKt(C)?C:new VYt({baseURL:I,...C===!0?{}:C}).call;v.tooltip(R)}let{hover:b}=n;if(b===void 0&&(b=f==="vega"),b){const{hoverSet:T,updateSet:C}=typeof b=="boolean"?{}:b;v.hover(T,C)}n&&(n.width!=null&&v.width(n.width),n.height!=null&&v.height(n.height),n.padding!=null&&v.padding(n.padding)),await v.initialize(h,n.bind).runAsync();let w;if(s!==!1){let T=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const I=document.createElement("details");I.title=o.CLICK_TO_VIEW_ACTIONS,c.append(I),T=I;const R=document.createElement("summary");R.innerHTML=XKt,I.append(R),w=N=>{I.contains(N.target)||I.removeAttribute("open")},document.addEventListener("click",w)}const C=document.createElement("div");if(T.append(C),C.classList.add("vega-actions"),s===!0||s.export!==!1){for(const I of["svg","png"])if(s===!0||s.export===!0||s.export[I]){const R=o[`${I.toUpperCase()}_ACTION`],N=document.createElement("a"),O=Ht(n.scaleFactor)?n.scaleFactor[I]:n.scaleFactor;N.text=R,N.href="#",N.target="_blank",N.download=`${l}.${I}`,N.addEventListener("mousedown",async function(L){L.preventDefault();const B=await v.toImageURL(I,O);this.href=B}),C.append(N)}}if(s===!0||s.source!==!1){const I=document.createElement("a");I.text=o.SOURCE_ACTION,I.href="#",I.addEventListener("click",function(R){S1e(tH(t),n.sourceHeader??"",n.sourceFooter??"",f),R.preventDefault()}),C.append(I)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const I=document.createElement("a");I.text=o.COMPILED_ACTION,I.href="#",I.addEventListener("click",function(R){S1e(tH(d),n.sourceHeader??"",n.sourceFooter??"","vega"),R.preventDefault()}),C.append(I)}if(s===!0||s.editor!==!1){const I=n.editorUrl??"https://vega.github.io/editor/",R=document.createElement("a");R.text=o.EDITOR_ACTION,R.href="#",R.addEventListener("click",function(N){HKt(window,I,{config:i,mode:f,renderer:a,spec:tH(t)}),N.preventDefault()}),C.append(R)}}function E(){w&&document.removeEventListener("click",w),v.finalize()}return{view:v,spec:t,vgSpec:d,finalize:E,embedOptions:n}}function iXt(e){return!!e&&{}.toString.call(e)==="[object Function]"}function sXt(e,t,n){n&&(iXt(n)?n(e.data(t)):e.change(t,cp.changeset().remove(()=>!0).insert(n)))}function oXt(e,t){Object.keys(t).forEach(n=>{sXt(e,n,t[n])})}function _5e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const w5e=()=>{};function sq(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function aXt(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=_5e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!qR(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function I1e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function oq(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function ED(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class E5e extends ci.PureComponent{constructor(){super(...arguments),ED(this,"containerRef",ci.createRef()),ED(this,"resultPromise",void 0),ED(this,"handleError",t=>{const{onError:n=w5e}=this.props;n(t,this.containerRef.current),console.warn(t)}),ED(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=_5e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=aXt(oq(this.props),oq(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!AY(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&I1e(a,s),i&&sq(a,i)),a.run()})}else AY(i,s)||this.modifyView(o=>{s&&I1e(o,s),i&&sq(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=oq(this.props);this.resultPromise=tXt(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;sq(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return ci.createElement("div",{ref:this.containerRef,className:t,style:n})}}ED(E5e,"propTypes",{className:Ule.string,onError:Ule.func});function oX(){return oX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oX.apply(this,arguments)}function aX(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const uXt={};class Hoe extends ci.PureComponent{constructor(){super(...arguments),aX(this,"vegaEmbed",ci.createRef()),aX(this,"handleNewView",t=>{this.update();const{onNewView:n=w5e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){AY(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{oXt(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return ci.createElement(E5e,oX({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}aX(Hoe,"defaultProps",{data:uXt});function uX(){return uX=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uX.apply(this,arguments)}function k1e(e){return ci.createElement(Hoe,uX({},e,{mode:"vega-lite"}))}function lXt({currentConfig:e,provState:t}){const n=Sh(),r=Ch(),i=xl(),[s,o]=P.useState(null),[a,u]=P.useState(!0),{updateResponseBlockValidation:l,setreactiveAnswers:c}=Su(),[f,d]=P.useState(),{actions:h,trrack:p}=P.useMemo(()=>{const w=qE.create(),E=w.register("signal",(C,I)=>(C.event=I,C)),T=g3({registry:w,initialState:{event:{}}});return{actions:{signalAction:E},trrack:T}},[]),m=P.useCallback(({status:w,provenanceGraph:E,answers:T})=>{i(l({location:"sidebar",identifier:`${r}_${n}`,status:w,values:T,provenanceGraph:E})),i(c(T))},[r,n,i,c,l]),g=P.useCallback((w,E)=>{p.apply(w,h.signalAction({key:w,value:E}))},[h,p]),v=P.useCallback((w,E)=>{const{responseId:T,response:C}=E;m({status:!0,provenanceGraph:p.graph.backend,answers:{[T]:C}})},[m,p.graph.backend]),b=P.useMemo(()=>{var E;const w=(E=s==null?void 0:s.config)==null?void 0:E.signals;return w?w.reduce((T,C)=>(C.name==="revisitAnswer"?T[C.name]=v:T[C.name]=g,T),{}):{}},[v,g,s]);return P.useEffect(()=>{async function w(){u(!0);let E;"path"in e?E=await Zct(e.path):E=e.config,E!==void 0&&o(E),u(!1)}e&&w()},[e]),P.useEffect(()=>{f&&t&&t.event&&t.event.key&&f.signal(t.event.key,t.event.value).run()},[f,t]),a?S.jsx("div",{children:"Loading..."}):"path"in e&&!s?S.jsx(Sb,{path:e.path}):s?S.jsx(Hoe,{spec:structuredClone(s),signalListeners:b,onNewView:w=>d(w)}):S.jsx("div",{children:"Failed to load vega config"})}function cXt(){const e=Zy(),t=Sh(),n=Ch()||"Notfound",r=e.components[n],{storageEngine:i}=Oo(),s=P.useRef(null),[o,a]=P.useState(null),{setIsRecording:u}=Su(),l=yi(N=>N.analysisProvState),c=HA(),f=xZ(),d=yi(N=>N.sequence),[h]=gx(),p=yi(N=>N.participantId),m=P.useMemo(()=>h.get("participantId"),[h]);tPe();const g=xl(),{setAlertModal:v}=Su();P.useEffect(()=>{(i==null?void 0:i.getEngine())!=="firebase"&&g(v({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[v,i,g]),P.useEffect(()=>{!e||!e.uiConfig.recordStudyAudio||!i||i.getEngine()!=="firebase"||f&&f.endTime>0||c||(s.current&&o&&i.saveAudio(s.current,o),s.current&&(s.current.stream.getTracks().forEach(N=>{var O;N.stop(),(O=s.current)==null||O.stream.removeTrack(N)}),s.current.stream.getAudioTracks().forEach(N=>{var O;N.stop(),(O=s.current)==null||O.stream.removeTrack(N)}),s.current.stop(),s.current=null),r&&r.recordAudio!==void 0&&!r.recordAudio||n==="end"?(a(null),g(u(!1))):navigator.mediaDevices.getUserMedia({audio:!0}).then(N=>{const O=new MediaRecorder(N);s.current=O,s.current.start(),g(u(!0)),a(`${n}_${t}`)}))},[n,t]);const[b,w]=P.useState([]),E=P.useRef([]);P.useEffect(()=>{async function N(){var B;const L=((B=pZ(d,t))==null?void 0:B.map(F=>F.currentBlock.id).filter(F=>F!==void 0))||[];w(L)}async function O(){const L=E.current;JSON.stringify(L)!==JSON.stringify(b)&&b.length>0&&i&&await i.addParticipantTags(b),E.current=b}N().then(O)},[t,i,d]);const T=P.useMemo(()=>{var N;return n!=="end"&&!n.startsWith("__")&&cI(r)&&e.baseComponents?bZ({},(N=e.baseComponents)==null?void 0:N[r.baseComponent],r):r},[r,e]);if(n==="end")return S.jsx(ckt,{});if(n==="__trainingFailed")return S.jsx(fkt,{});if(n==="__timedOut")return S.jsx(dkt,{});if(n==="Notfound")return S.jsx(Sb,{email:e.uiConfig.contactEmail});if(m&&p!==m)return S.jsx(ga,{style:{height:"80vh"},children:S.jsx(df,{})});const C=T.instruction||"",{instructionLocation:I}=T,R=e.uiConfig.sidebar&&(I==="sidebar"||I===void 0);return S.jsxs(S.Fragment,{children:[I==="aboveStimulus"&&S.jsx(dl,{text:C}),S.jsx(iF,{status:f,config:T,location:"aboveStimulus"},`${t}-above-response-block`),S.jsxs(P.Suspense,{fallback:S.jsx("div",{children:"Loading..."}),children:[T.type==="markdown"&&S.jsx(ZIt,{currentConfig:T}),T.type==="website"&&S.jsx(Jct,{currentConfig:T}),T.type==="image"&&S.jsx(tft,{currentConfig:T}),T.type==="react-component"&&S.jsx(JIt,{currentConfig:T,provState:l}),T.type==="vega"&&S.jsx(lXt,{currentConfig:T,provState:l})]},`${t}-stimulus`),(I==="belowStimulus"||I===void 0&&!R)&&S.jsx(dl,{text:C}),S.jsx(iF,{status:f,config:T,location:"belowStimulus"},`${t}-below-response-block`)]})}function T5e(e){const[t]=gx();return S.jsx(FJ,{...e,to:{pathname:e.to,search:t.toString()}})}function S5e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=S5e(o,t,n,r),r.includes(o.orderPath))break}return i}function C5e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=C5e(s,r)}}),n}function fXt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function dXt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=jE(),c=ig(),f=Sh(),[d,{close:h,open:p}]=zX(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?S5e(n,e,r,a.orderPath):-1,{trialId:v}=L0(),[b]=gx(),w=P.useMemo(()=>b.get("participantId"),[b]),E=v===e,T=s?f===g:f===`reviewer-${e}`,C=u?E:T,I=P.useCallback(()=>c(v?`./../${e}`:`./${e}`),[c,e,v]),N=u?I:()=>c(s?w?`/${l}/${vp(g)}?participantId=${w}`:`/${l}/${vp(g)}`:`/${l}/reviewer-${e}`),O=e.includes(".co.")?".co.":e.includes(".components.")?".components.":!1,L=e.includes("$")&&O&&e.includes(O)?e.split(O).at(-1):e;return S.jsxs(_u,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[S.jsx(_u.Target,{children:S.jsx(je,{onMouseEnter:p,onMouseLeave:h,children:S.jsx(vB,{active:C,style:{lineHeight:"32px",height:"32px"},label:S.jsxs(je,{children:[i&&S.jsx(MZe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),e!==L&&S.jsx(KZe,{size:16,style:{marginRight:4,marginBottom:-2},color:"var(--mantine-color-blue-outline)"}),S.jsx(lt,{size:"sm",span:C,fw:C?"700":void 0,display:"inline",children:L})]}),onClick:N,disabled:t})})}),m&&(m.description||m.meta)&&S.jsx(_u.Dropdown,{onMouseLeave:h,children:S.jsxs(je,{children:[m.description&&S.jsxs(je,{children:[S.jsx(lt,{fw:900,display:"inline-block",mr:2,children:"Description:"}),S.jsx(lt,{fw:400,component:"span",children:m.description})]}),m.meta&&S.jsxs(je,{children:[S.jsx(lt,{fw:"900",component:"span",children:"Task Meta: "}),S.jsx(lt,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})]})}function T8({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=$y(e.components);return n&&r&&(o=fXt($y(e.components),$y(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),S.jsx(S.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return S.jsx(dXt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?jp(c).length-C5e(u,c):0,d=jp(u);return S.jsx(vB,{label:S.jsxs(je,{style:{opacity:f>0?1:.5},children:[S.jsx(lt,{size:"sm",display:"inline",fw:700,children:u.id?u.id:u.order}),u.order==="random"||u.order==="latinSquare"?S.jsx(ss,{label:u.order,position:"right",withArrow:!0,children:S.jsx(PZe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}})}):null,r&&S.jsxs(Rp,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&S.jsx(Rp,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:S.jsx(je,{style:{borderLeft:"1px solid #e9ecef"},children:S.jsx(T8,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function A5e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function R1e({text:e}){return S.jsx(ss,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:S.jsx(VJ,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function hXt(){const e=yi(h=>h.sequence),t=yi(h=>h.metadata),{toggleStudyBrowser:n}=Su(),r=Zy(),i=xl(),s=jE(),o=MJ(`/${s}`),{storageEngine:a}=Oo(),u=HA(),l=P.useMemo(()=>{let h=$y(r.sequence);return h=mZ(h,"root"),h.components.push("end"),h},[r.sequence]),[c,f]=P.useState("participant"),d=P.useMemo(()=>c==="allTrials"||u,[c,u]);return S.jsxs(Vi.Aside,{p:"0",children:[S.jsx(Vi.Section,{p:"md",children:S.jsxs(an,{direction:"row",justify:"space-between",children:[S.jsx(lt,{size:"md",fw:700,pt:3,children:"Study Browser"}),S.jsx(ss,{label:"Go to the sequence of the next participant in the experiment. Sequences can be different between participants due to randomization, etc.",w:280,multiline:!0,disabled:d,children:S.jsx(yn,{variant:"light",leftSection:S.jsx(HJ,{size:14}),onClick:()=>A5e(a,r,t,o),size:"xs",disabled:d,children:"Next Participant"})}),S.jsx(hx,{onClick:()=>i(n()),mt:1})]})}),S.jsx(Vi.Section,{grow:!0,component:Yy,p:"md",children:S.jsxs(Vr,{value:c,onChange:f,children:[S.jsx(je,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:S.jsxs(Vr.List,{grow:!0,children:[S.jsxs(Vr.Tab,{value:"participant",children:["Participant View",S.jsx(R1e,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),S.jsxs(Vr.Tab,{value:"allTrials",disabled:u,children:["All Trials View",S.jsx(R1e,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),S.jsx(Vr.Panel,{value:"participant",children:S.jsx(T8,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),S.jsx(Vr.Panel,{value:"allTrials",children:S.jsx(T8,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function pXt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const n=yi(R=>R.config),r=yi(R=>R.metadata),i=gZ(),s=xl(),{toggleShowHelpText:o,toggleStudyBrowser:a,incrementHelpCounter:u}=Su(),{storageEngine:l}=Oo(),c=Ch(),f=Sh(),d=i.length-1,h=typeof f=="number"?f/d*100:0,[p,m]=P.useState(!1),g=n==null?void 0:n.uiConfig.logoPath,v=n==null?void 0:n.uiConfig.withProgressBar,b=jE(),w=MJ(`/${b}`),E=P.useRef(null),[T,C]=P.useState(!1),I=yi(R=>R.isRecording);return P.useEffect(()=>{const R=E.current;R&&C(R.scrollWidth>R.offsetWidth)},[n]),S.jsx(Vi.Header,{p:"md",children:S.jsxs(Xf,{mt:-7,align:"center",children:[S.jsx(Xf.Col,{span:4,children:S.jsxs(an,{align:"center",children:[S.jsx(mx,{w:40,src:`${qa}${g}`,alt:"Study Logo"}),S.jsx(rd,{w:"md"}),S.jsx(oo,{ref:E,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:T?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),S.jsx(Xf.Col,{span:4,children:v&&S.jsx(PA,{radius:"md",size:"lg",value:h})}),S.jsx(Xf.Col,{span:4,children:S.jsxs(Yr,{wrap:"nowrap",justify:"right",children:[I?S.jsxs(Yr,{ml:"xl",gap:20,wrap:"nowrap",children:[S.jsx(lt,{color:"red",children:"Recording audio"}),S.jsx(QNe,{})]}):null,!t&&S.jsx(ss,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:S.jsx(Rp,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&S.jsx(yn,{variant:"outline",onClick:()=>{s(o()),s(u({identifier:`${c}_${f}`}))},children:"Help"}),S.jsxs($l,{shadow:"md",width:200,withinPortal:!0,opened:p,onChange:m,children:[S.jsx($l.Target,{children:S.jsx(dx,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:S.jsx(zZe,{})})}),S.jsxs($l.Dropdown,{children:[e&&S.jsx($l.Item,{leftSection:S.jsx(eet,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),S.jsx($l.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:S.jsx(GZe,{size:14}),children:"Contact"}),e&&S.jsx($l.Item,{leftSection:S.jsx(HJ,{size:14}),onClick:()=>A5e(l,n,r,w),children:"Next Participant"}),e&&S.jsx($l.Item,{leftSection:S.jsx(lTe,{size:14}),component:"a",href:`${qa}analysis/stats/${b}`,children:"Analyze & Manage"})]})]})]})})]})})}function I5e(e,t){var n;return cI(e)&&t.baseComponents?bZ({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function mXt(){var u;const e=(u=Zy())==null?void 0:u.uiConfig.sidebar,t=Zy(),n=Ch(),r=t.components[n],i=P.useMemo(()=>r?I5e(r,t):null,[r,t]),s=xZ(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?S.jsxs(Vi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&S.jsxs(Vi.Section,{bg:"gray.3",p:"md",children:[S.jsx(lt,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),S.jsx(dl,{text:o})]}),S.jsx(Vi.Section,{p:"md",children:S.jsx(iF,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):S.jsx(Vi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:S.jsx(iF,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function gXt(){const e=yi(u=>u.showHelpText),t=yi(u=>u.config),n=xl(),{toggleShowHelpText:r}=Su(),[i,s]=P.useState(""),[o,a]=P.useState(!0);return P.useEffect(()=>{async function u(){if(!t.uiConfig.helpTextPath){a(!1);return}const l=await wZ(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),S.jsx(Vs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?S.jsx(dl,{text:i}):S.jsx(Sb,{path:t.uiConfig.helpTextPath})})}function yXt(){const e=yi(o=>o.alertModal),{setAlertModal:t}=Su(),n=xl(),[r,i]=P.useState(e.show),s=P.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return P.useEffect(()=>i(e.show),[e.show]),S.jsx(Vs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:S.jsxs(Oy,{color:"red",radius:"xs",title:"Alert",icon:S.jsx(NZe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[S.jsx(lt,{my:"md",children:e.message}),S.jsx(Yr,{w:"100%",justify:"end",children:S.jsx(yn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}const D1e=15,N1e=3;function vXt({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){const o=["var(--mantine-color-yellow-8)","var(--mantine-color-green-8)","var(--mantine-color-indigo-8)","var(--mantine-color-violet-8)","var(--mantine-color-cyan-8)","var(--mantine-color-orange-3)","var(--mantine-color-lime-3)","var(--mantine-color-teal-3)","var(--mantine-color-pink-3)"],a=new Map;if(a.set("Root","var(--mantine-color-grape-3)"),t.provenanceGraph){let u=0;Object.entries(t.provenanceGraph.nodes).forEach(l=>{const[,c]=l;a.has(c.label)||(a.set(c.label,o[u]),u=(u+1)%o.length)})}return S.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(u=>{const[l,c]=u;return S.jsx("g",{onClick:()=>i(l,c.createdOn,s),children:S.jsx("rect",{fill:l===r?"#e15759":a.get(c.label),x:e(c.createdOn)-N1e/2,y:n/2-D1e/2,width:N1e,height:D1e})},l)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?S.jsx("rect",{fill:"var(--mantine-color-blue-filled)",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null,S.jsx(SQ,{position:{bottom:10,left:10},children:S.jsxs(_u,{width:200,position:"bottom",withArrow:!0,shadow:"md",children:[S.jsx(_u.Target,{children:S.jsx(yn,{children:"Show Legend"})}),S.jsx(_u.Dropdown,{children:S.jsx(uo,{children:Array.from(a.keys()).map(u=>S.jsxs(Yr,{children:[S.jsx(QQ,{color:a.get(u)}),S.jsx("span",{children:u})]},u))})})]})})]})}const P1e={left:5,top:0,right:5,bottom:0};function bXt({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,setPlayTime:o,trialName:a}){const u=P.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),l=P.useCallback((f,d)=>{o(d,(d-e.domain()[0])/u),s(f)},[s,o,u,e]),c=P.useMemo(()=>Object.entries(t.answers).filter(f=>a?a===f[0]:!0).map(f=>{const[d,h]=f;return S.jsx(vXt,{taskName:d,answer:h,height:r,currentNode:i,setCurrentNode:l,xScale:e},d)}),[i,l,r,t.answers,a,e]);return S.jsxs("svg",{style:{width:n,height:r},children:[S.jsx("line",{stroke:"black",strokeWidth:1,x1:P1e.left,x2:n+P1e.left,y1:r/2,y2:r/2}),c]})}function xXt(e){const t=P.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return P.useLayoutEffect(()=>{t.current=e}),P.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function _Xt({width:e,height:t,updateTimer:n,duration:r,isPlaying:i,xScale:s,startTime:o}){const a=P.useRef(0),u=P.useRef(Date.now()),[l,c]=P.useState(0);P.useEffect(()=>{o&&(a.current=0,n(o,0))},[o,n]);const f=xXt(()=>{if(a.current>=r)return;const h=Date.now();a.current=h-u.current,n(o+a.current,void 0),c(l+1)});P.useEffect(()=>{i&&a.current>=r&&(n(o,0),u.current=Date.now()-a.current,a.current=0)},[o,i,r,n]),P.useEffect(()=>{let h=null;return i&&a.current<r&&(u.current=Date.now()-a.current,h=setInterval(()=>{i&&f()},30)),()=>{h&&clearInterval(h)}},[r,f,i]);const d=P.useCallback(h=>{a.current=s.invert(h.clientX-10)-s.domain()[0],u.current=Date.now()-a.current,c(l+1),n(o+a.current,a.current/r)},[r,l,o,n,s]);return S.jsx("svg",{onClick:d,style:{width:e,height:t,position:"absolute",zIndex:1e4},children:S.jsx("line",{stroke:"#e15759",strokeWidth:3,y1:0,y2:t,x1:s(o+a.current),x2:s(o+a.current)})})}function lX(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`,o=t<10?`0${t}`:`${t}`;return`${t>0?`${o}h`:""} ${n>0?`${s}m`:""} ${i}s`}const aq={left:0,top:0,right:0,bottom:0};function wXt(e,t){return t?t.getParticipantData(e):null}function EXt({setTimeString:e}){const[t]=gx(),n=P.useMemo(()=>t.get("participantId")||void 0,[t]),{storageEngine:r}=Oo(),i=yi(G=>G.analysisIsPlaying),s=yi(G=>G.analysisHasAudio),o=yi(G=>G.analysisHasProvenance),{saveAnalysisState:a,setAnalysisHasAudio:u,setAnalysisHasProvenance:l,setAnalysisIsPlaying:c}=Su(),f=xl(),d=Ch(),h=Sh();P.useEffect(()=>{f(a(null))},[h,a,f]);const[p,{width:m}]=td(),[g,v]=P.useState(0),[b,w]=P.useState(null),[E,T]=P.useState(0),{value:C,status:I}=D5(wXt,[n,r]),[R,N]=zze(0,100),O=P.useRef(null),[L,B]=P.useState(!0),F=P.useRef(null),H=P.useMemo(()=>`${d}_${h}`,[d,h]);P.useEffect(()=>{f(c(!1))},[n,d,h,f,c]),P.useEffect(()=>{var G;if(H&&C&&((G=C.answers[H])!=null&&G.provenanceGraph)){const V=qE.create(),Y=g3({registry:V,initialState:{}});C.answers[H].provenanceGraph&&(Y.importObject($y(C.answers[H].provenanceGraph)),f(l(!0)),F.current=Y)}else f(l(!1))},[C,H,f,l]);const Q=P.useCallback(G=>{var V;G&&(H&&C&&F.current&&(f(a(F.current.getState((V=C.answers[H].provenanceGraph)==null?void 0:V.nodes[G]))),F.current.to(G)),w(G))},[C,a,f,H]);P.useEffect(()=>{var Y;if(!H||!C||!F.current||!((Y=C.answers[H])!=null&&Y.provenanceGraph))return;const G=C.answers[H].provenanceGraph;if(!G)return;if(!b||!G.nodes[b]){Q(G.root);return}let V=G.nodes[b];for(;;)if(R<V.createdOn){if(ext(V))break;{const ee=V.parent;V=G.nodes[ee]}}else if(V.children.length>0){const ee=V.children[0];if(R>G.nodes[ee].createdOn)V=G.nodes[ee];else break}else break;V.id!==b&&Q(V.id)},[Q,b,C,n,R,H]);const J=P.useMemo(()=>(C==null?void 0:C.answers[H].startTime)||0,[C,H]);P.useEffect(()=>{E===0?e(""):R!==0&&e(`${lX(R-J)} / ${lX(E*1e3)}`)},[H,C,R,e,J,E]),P.useEffect(()=>{if(!s&&o&&C){const G=C.answers[H].endTime-C.answers[H].startTime;T(G>-1?G/1e3:0)}},[s,o,H,C]);const ne=HA(),Z=P.useRef(null),ie=P.useCallback(async G=>{if(Z.current=G,G&&C&&ne&&H&&r)try{const V=await r.getAudio(H,n);await G.load(V),B(!1),f(u(!0)),T(G.getDuration()),v(G.getWidth()),G.seekTo(0),G.on("redrawcomplete",()=>v(G.getWidth()))}catch(V){throw f(u(!1)),new Error(V)}else f(u(!1)),T(0)},[C,ne,H,r,n,f,u]),q=P.useCallback((G,V)=>{if(G>E*1e3+J){f(c(!1)),N(G);return}N(G),Z.current&&V!==void 0&&setTimeout(()=>{var Y;(Y=Z.current)==null||Y.seekTo(V)})},[c,N,J,f,E]);P.useEffect(()=>{Z.current&&(i?Z.current.play():Z.current.pause())},[Z,i,E,J,N]);const U=P.useMemo(()=>{var Y,ee;if(!C||!((Y=C.answers[H])!=null&&Y.startTime)||!((ee=C.answers[H])!=null&&ee.endTime))return null;const G=E>0?C.answers[H].startTime+E*1e3:C.answers[H].endTime;return ef([aq.left,m+aq.left+aq.right]).domain([C.answers[H].startTime,G]).clamp(!0)},[C,H,m,E]);return P.useEffect(()=>{ie(Z.current)},[q,ie,C,n,Z]),S.jsx(Yr,{wrap:"nowrap",gap:10,mx:10,children:S.jsxs(uo,{ref:p,style:{width:"100%"},gap:0,children:[S.jsx(ga,{}),C!==null&&H?S.jsxs(je,{ref:O,style:{overflow:"hidden",width:"100%",pointerEvents:"none"},display:s?"block":"none",id:"waveformDiv",children:[S.jsx(YNe,{onMount:ie,plugins:[],container:"#waveformDiv",height:50,waveColor:"#484848",progressColor:"#e15759",barHeight:0,cursorColor:"rgba(0, 0, 0, 0)",children:S.jsx(KNe,{id:"waveform",height:50})}),L?S.jsx(df,{}):null]}):null,I==="success"&&C&&U&&H&&C.answers[H].provenanceGraph?S.jsx(bXt,{xScale:U,trialName:H,setPlayTime:q,currentNode:b,setCurrentNode:Q,participantData:C,width:g||m,height:25}):null,U&&C&&(s||o)?S.jsx(_Xt,{duration:E*1e3,height:(s?50:0)+(o?25:0),isPlaying:i,startTime:J,width:m,xScale:U,updateTimer:q}):null]})})}function TXt(e,t){return t?t.getParticipantData(e):null}function SXt(e){return e?e.getAllParticipantsData():null}function CXt(){const[e]=gx(),t=P.useMemo(()=>e.get("participantId")||void 0,[e]),n=Ch(),r=Sh(),i=ig(),{setAnalysisIsPlaying:s}=Su(),o=xl(),a=yi(v=>v.analysisIsPlaying),{storageEngine:u}=Oo(),{value:l,status:c}=D5(TXt,[t,u]),{value:f}=D5(SXt,[u]),[d,h]=P.useMemo(()=>{if(f&&l&&t&&n){const v=f.filter(T=>T.participantConfigHash===l.participantConfigHash),b=v.findIndex(T=>T.participantId===t),w=b<v.length-1?v[b+1]:v[0],E=b>0?v[b-1]:v[v.length-1];return[[w.participantId,jp(w.sequence).indexOf(n)],[E.participantId,jp(E.sequence).indexOf(n)]]}return[["",0],["",0]]},[f,n,l,t]),p=P.useMemo(()=>{const v={};return f==null||f.forEach(b=>{v[b.participantConfigHash]||(v[b.participantConfigHash]=new Set),v[b.participantConfigHash].add(b.participantId)}),Object.keys(v).sort((b,w)=>b===(l==null?void 0:l.participantConfigHash)?-1:w===(l==null?void 0:l.participantConfigHash)?1:0).map(b=>({group:`Config version: ${b}`,items:[...v[b]].map(w=>({value:w,label:w,disabled:b!==(l==null?void 0:l.participantConfigHash)}))}))},[f,l==null?void 0:l.participantConfigHash]),[m,g]=P.useState("");return S.jsx(Vi.Footer,{zIndex:101,withBorder:!1,children:S.jsxs(je,{style:{backgroundColor:"var(--mantine-color-blue-1)",height:"150px"},children:[S.jsx(ld,{visible:c!=="success",overlayProps:{backgroundOpacity:.4}}),S.jsx(EXt,{setTimeString:g}),S.jsx(ga,{children:S.jsxs(Yr,{gap:"xs",style:{height:"50px"},children:[S.jsx(lt,{size:"sm",ff:"monospace",children:m}),S.jsx(dx,{variant:"filled",size:30,onClick:()=>o(s(!a)),children:a?S.jsx(oet,{}):S.jsx(aet,{})}),S.jsx(lt,{mx:"0",children:"Participant:"}),S.jsx(OA,{style:{width:"300px"},value:(l==null?void 0:l.participantId)||"",onChange:v=>{i(`./../${vp(0)}?participantId=${v}`)},data:p}),S.jsx(yn,{onClick:()=>i(`../${vp(+r-1)}?participantId=${t}`,{relative:"path"}),children:S.jsx(Jle,{})}),S.jsx(yn,{onClick:()=>i(`../${vp(+r+1)}?participantId=${t}`,{relative:"path"}),children:S.jsx(Zle,{})}),S.jsxs(yn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${vp(h[1])}?participantId=${h[0]}`),children:[S.jsx(Jle,{}),S.jsx(tce,{})]}),S.jsxs(yn,{px:"xs",disabled:!l||d[0]===l.participantId,onClick:()=>i(`./../${vp(d[1])}?participantId=${d[0]}`),children:[S.jsx(tce,{}),S.jsx(Zle,{})]})]})})]})})}function AXt(){const e=P.useRef([]),t=Zy(),n=t.uiConfig.windowEventDebounceTime??100,r=yi(d=>d.showStudyBrowser),i=yi(d=>d.analysisHasAudio),s=yi(d=>d.analysisHasProvenance),o=yi(d=>d.modes);P.useEffect(()=>{const d=up(T=>{e.current.push([Date.now(),"focus",T.target instanceof HTMLElement?T.target.tagName:""])},n,{maxWait:n}),h=up(T=>{e.current.push([Date.now(),"input",T.data??""])},n,{maxWait:n}),p=up(T=>{e.current.push([Date.now(),"keypress",T.key])},n,{maxWait:n}),m=up(T=>{e.current.push([Date.now(),"mousedown",[T.clientX,T.clientY]])},n,{maxWait:n}),g=up(T=>{e.current.push([Date.now(),"mouseup",[T.clientX,T.clientY]])},n,{maxWait:n}),v=up(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),b=up(T=>{e.current.push([Date.now(),"mousemove",[T.clientX,T.clientY]])},n,{maxWait:n}),w=up(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),E=up(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",v),window.addEventListener("mousemove",b),window.addEventListener("scroll",w),document.addEventListener("visibilitychange",E),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",v),window.removeEventListener("mousemove",b),window.removeEventListener("scroll",w),document.removeEventListener("visibilitychange",E)}},[]);const a=t.uiConfig.sidebarWidth??300,{studyNavigatorEnabled:u,dataCollectionEnabled:l}=P.useMemo(()=>o,[o]),c=P.useMemo(()=>u&&r,[u,r]),f=HA();return S.jsx(c2e.Provider,{value:e,children:S.jsxs(Vi,{padding:"md",header:{height:70},navbar:{width:a,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!c,mobile:!c}},footer:{height:(f?50:0)+(i?50:0)+(s?25:0)},children:[S.jsx(mXt,{}),S.jsx(hXt,{}),S.jsx(pXt,{studyNavigatorEnabled:u,dataCollectionEnabled:l}),S.jsx(gXt,{}),S.jsx(yXt,{}),S.jsx(Vi.Main,{children:S.jsx(UJe,{})}),f&&S.jsx(CXt,{})]})})}function IXt(e,t=!1){return typeof e=="number"?O1e(e,t):O1e(e.length,t).map(r=>r.map(i=>e[i]))}function O1e(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function k5e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=k5e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function kXt(e,t){const n=$y(e);return k5e(n,t,"root")}function R5e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&R5e(s,t,i,o)})}function RXt(e){const t=[];return R5e(e,t,"",0),t}function M1e(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return IXt(i.sort(()=>.5-Math.random()),!0)}function L1e(e){const n=RXt(e.sequence).map(s=>({[s]:M1e(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=kXt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=M1e(e,o))})}),i}var q6={exports:{}},uq={},ry={},j_={},lq={},cq={},fq={},$1e;function S8(){return $1e||($1e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((w,E)=>`${w}${E}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((w,E)=>(E instanceof n&&(w[E.str]=(w[E.str]||0)+1),w),{})}}e._Code=r,e.nil=new r("");function i(v,...b){const w=[v[0]];let E=0;for(;E<b.length;)a(w,b[E]),w.push(v[++E]);return new r(w)}e._=i;const s=new r("+");function o(v,...b){const w=[h(v[0])];let E=0;for(;E<b.length;)w.push(s),a(w,b[E]),w.push(s,h(v[++E]));return u(w),new r(w)}e.str=o;function a(v,b){b instanceof r?v.push(...b._items):b instanceof n?v.push(b):v.push(f(b))}e.addCodeArg=a;function u(v){let b=1;for(;b<v.length-1;){if(v[b]===s){const w=l(v[b-1],v[b+1]);if(w!==void 0){v.splice(b-1,3,w);continue}v[b++]="+"}b++}}function l(v,b){if(b==='""')return v;if(v==='""')return b;if(typeof v=="string")return b instanceof n||v[v.length-1]!=='"'?void 0:typeof b!="string"?`${v.slice(0,-1)}${b}"`:b[0]==='"'?v.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(v instanceof n))return`"${v}${b.slice(1)}`}function c(v,b){return b.emptyStr()?v:v.emptyStr()?b:o`${v}${b}`}e.strConcat=c;function f(v){return typeof v=="number"||typeof v=="boolean"||v===null?v:h(Array.isArray(v)?v.join(","):v)}function d(v){return new r(h(v))}e.stringify=d;function h(v){return JSON.stringify(v).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(v){return typeof v=="string"&&e.IDENTIFIER.test(v)?new r(`.${v}`):i`[${v}]`}e.getProperty=p;function m(v){if(typeof v=="string"&&e.IDENTIFIER.test(v))return new r(`${v}`);throw new Error(`CodeGen: invalid export name: ${v}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(v){return new r(v.toString())}e.regexpCode=g}(fq)),fq}var dq={},F1e;function B1e(){return F1e||(F1e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=S8();class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const b=m.get(p);if(b)return b}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),v=g.length;return g[v]=c.ref,d.setValue(c,{property:h,itemIndex:v}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(v=>{if(g.has(v))return;g.set(v,r.Started);let b=c(v);if(b){const w=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${w} ${v} = ${b};${this.opts._n}`}else if(b=d==null?void 0:d(v))h=(0,t._)`${h}${b}${this.opts._n}`;else throw new n(v);g.set(v,r.Completed)})}return h}}e.ValueScope=a}(dq)),dq}var j1e;function Nr(){return j1e||(j1e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=S8(),n=B1e();var r=S8();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=B1e();Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(Y,ee){return this}}class o extends s{constructor(Y,ee,ae){super(),this.varKind=Y,this.name=ee,this.rhs=ae}render({es5:Y,_n:ee}){const ae=Y?n.varKinds.var:this.varKind,_e=this.rhs===void 0?"":` = ${this.rhs}`;return`${ae} ${this.name}${_e};`+ee}optimizeNames(Y,ee){if(Y[this.name.str])return this.rhs&&(this.rhs=H(this.rhs,Y,ee)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(Y,ee,ae){super(),this.lhs=Y,this.rhs=ee,this.sideEffects=ae}render({_n:Y}){return`${this.lhs} = ${this.rhs};`+Y}optimizeNames(Y,ee){if(!(this.lhs instanceof t.Name&&!Y[this.lhs.str]&&!this.sideEffects))return this.rhs=H(this.rhs,Y,ee),this}get names(){const Y=this.lhs instanceof t.Name?{}:{...this.lhs.names};return F(Y,this.rhs)}}class u extends a{constructor(Y,ee,ae,_e){super(Y,ae,_e),this.op=ee}render({_n:Y}){return`${this.lhs} ${this.op}= ${this.rhs};`+Y}}class l extends s{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`${this.label}:`+Y}}class c extends s{constructor(Y){super(),this.label=Y,this.names={}}render({_n:Y}){return`break${this.label?` ${this.label}`:""};`+Y}}class f extends s{constructor(Y){super(),this.error=Y}render({_n:Y}){return`throw ${this.error};`+Y}get names(){return this.error.names}}class d extends s{constructor(Y){super(),this.code=Y}render({_n:Y}){return`${this.code};`+Y}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(Y,ee){return this.code=H(this.code,Y,ee),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(Y=[]){super(),this.nodes=Y}render(Y){return this.nodes.reduce((ee,ae)=>ee+ae.render(Y),"")}optimizeNodes(){const{nodes:Y}=this;let ee=Y.length;for(;ee--;){const ae=Y[ee].optimizeNodes();Array.isArray(ae)?Y.splice(ee,1,...ae):ae?Y[ee]=ae:Y.splice(ee,1)}return Y.length>0?this:void 0}optimizeNames(Y,ee){const{nodes:ae}=this;let _e=ae.length;for(;_e--;){const pe=ae[_e];pe.optimizeNames(Y,ee)||(Q(Y,pe.names),ae.splice(_e,1))}return ae.length>0?this:void 0}get names(){return this.nodes.reduce((Y,ee)=>B(Y,ee.names),{})}}class p extends h{render(Y){return"{"+Y._n+super.render(Y)+"}"+Y._n}}class m extends h{}class g extends p{}g.kind="else";class v extends p{constructor(Y,ee){super(ee),this.condition=Y}render(Y){let ee=`if(${this.condition})`+super.render(Y);return this.else&&(ee+="else "+this.else.render(Y)),ee}optimizeNodes(){super.optimizeNodes();const Y=this.condition;if(Y===!0)return this.nodes;let ee=this.else;if(ee){const ae=ee.optimizeNodes();ee=this.else=Array.isArray(ae)?new g(ae):ae}if(ee)return Y===!1?ee instanceof v?ee:ee.nodes:this.nodes.length?this:new v(J(Y),ee instanceof v?[ee]:ee.nodes);if(!(Y===!1||!this.nodes.length))return this}optimizeNames(Y,ee){var ae;if(this.else=(ae=this.else)===null||ae===void 0?void 0:ae.optimizeNames(Y,ee),!!(super.optimizeNames(Y,ee)||this.else))return this.condition=H(this.condition,Y,ee),this}get names(){const Y=super.names;return F(Y,this.condition),this.else&&B(Y,this.else.names),Y}}v.kind="if";class b extends p{}b.kind="for";class w extends b{constructor(Y){super(),this.iteration=Y}render(Y){return`for(${this.iteration})`+super.render(Y)}optimizeNames(Y,ee){if(super.optimizeNames(Y,ee))return this.iteration=H(this.iteration,Y,ee),this}get names(){return B(super.names,this.iteration.names)}}class E extends b{constructor(Y,ee,ae,_e){super(),this.varKind=Y,this.name=ee,this.from=ae,this.to=_e}render(Y){const ee=Y.es5?n.varKinds.var:this.varKind,{name:ae,from:_e,to:pe}=this;return`for(${ee} ${ae}=${_e}; ${ae}<${pe}; ${ae}++)`+super.render(Y)}get names(){const Y=F(super.names,this.from);return F(Y,this.to)}}class T extends b{constructor(Y,ee,ae,_e){super(),this.loop=Y,this.varKind=ee,this.name=ae,this.iterable=_e}render(Y){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(Y)}optimizeNames(Y,ee){if(super.optimizeNames(Y,ee))return this.iterable=H(this.iterable,Y,ee),this}get names(){return B(super.names,this.iterable.names)}}class C extends p{constructor(Y,ee,ae){super(),this.name=Y,this.args=ee,this.async=ae}render(Y){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(Y)}}C.kind="func";class I extends h{render(Y){return"return "+super.render(Y)}}I.kind="return";class R extends p{render(Y){let ee="try"+super.render(Y);return this.catch&&(ee+=this.catch.render(Y)),this.finally&&(ee+=this.finally.render(Y)),ee}optimizeNodes(){var Y,ee;return super.optimizeNodes(),(Y=this.catch)===null||Y===void 0||Y.optimizeNodes(),(ee=this.finally)===null||ee===void 0||ee.optimizeNodes(),this}optimizeNames(Y,ee){var ae,_e;return super.optimizeNames(Y,ee),(ae=this.catch)===null||ae===void 0||ae.optimizeNames(Y,ee),(_e=this.finally)===null||_e===void 0||_e.optimizeNames(Y,ee),this}get names(){const Y=super.names;return this.catch&&B(Y,this.catch.names),this.finally&&B(Y,this.finally.names),Y}}class N extends p{constructor(Y){super(),this.error=Y}render(Y){return`catch(${this.error})`+super.render(Y)}}N.kind="catch";class O extends p{render(Y){return"finally"+super.render(Y)}}O.kind="finally";class L{constructor(Y,ee={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...ee,_n:ee.lines?`
`:""},this._extScope=Y,this._scope=new n.Scope({parent:Y}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(Y){return this._scope.name(Y)}scopeName(Y){return this._extScope.name(Y)}scopeValue(Y,ee){const ae=this._extScope.value(Y,ee);return(this._values[ae.prefix]||(this._values[ae.prefix]=new Set)).add(ae),ae}getScopeValue(Y,ee){return this._extScope.getValue(Y,ee)}scopeRefs(Y){return this._extScope.scopeRefs(Y,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(Y,ee,ae,_e){const pe=this._scope.toName(ee);return ae!==void 0&&_e&&(this._constants[pe.str]=ae),this._leafNode(new o(Y,pe,ae)),pe}const(Y,ee,ae){return this._def(n.varKinds.const,Y,ee,ae)}let(Y,ee,ae){return this._def(n.varKinds.let,Y,ee,ae)}var(Y,ee,ae){return this._def(n.varKinds.var,Y,ee,ae)}assign(Y,ee,ae){return this._leafNode(new a(Y,ee,ae))}add(Y,ee){return this._leafNode(new u(Y,e.operators.ADD,ee))}code(Y){return typeof Y=="function"?Y():Y!==t.nil&&this._leafNode(new d(Y)),this}object(...Y){const ee=["{"];for(const[ae,_e]of Y)ee.length>1&&ee.push(","),ee.push(ae),(ae!==_e||this.opts.es5)&&(ee.push(":"),(0,t.addCodeArg)(ee,_e));return ee.push("}"),new t._Code(ee)}if(Y,ee,ae){if(this._blockNode(new v(Y)),ee&&ae)this.code(ee).else().code(ae).endIf();else if(ee)this.code(ee).endIf();else if(ae)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(Y){return this._elseNode(new v(Y))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(v,g)}_for(Y,ee){return this._blockNode(Y),ee&&this.code(ee).endFor(),this}for(Y,ee){return this._for(new w(Y),ee)}forRange(Y,ee,ae,_e,pe=this.opts.es5?n.varKinds.var:n.varKinds.let){const Te=this._scope.toName(Y);return this._for(new E(pe,Te,ee,ae),()=>_e(Te))}forOf(Y,ee,ae,_e=n.varKinds.const){const pe=this._scope.toName(Y);if(this.opts.es5){const Te=ee instanceof t.Name?ee:this.var("_arr",ee);return this.forRange("_i",0,(0,t._)`${Te}.length`,Le=>{this.var(pe,(0,t._)`${Te}[${Le}]`),ae(pe)})}return this._for(new T("of",_e,pe,ee),()=>ae(pe))}forIn(Y,ee,ae,_e=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(Y,(0,t._)`Object.keys(${ee})`,ae);const pe=this._scope.toName(Y);return this._for(new T("in",_e,pe,ee),()=>ae(pe))}endFor(){return this._endBlockNode(b)}label(Y){return this._leafNode(new l(Y))}break(Y){return this._leafNode(new c(Y))}return(Y){const ee=new I;if(this._blockNode(ee),this.code(Y),ee.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(I)}try(Y,ee,ae){if(!ee&&!ae)throw new Error('CodeGen: "try" without "catch" and "finally"');const _e=new R;if(this._blockNode(_e),this.code(Y),ee){const pe=this.name("e");this._currNode=_e.catch=new N(pe),ee(pe)}return ae&&(this._currNode=_e.finally=new O,this.code(ae)),this._endBlockNode(N,O)}throw(Y){return this._leafNode(new f(Y))}block(Y,ee){return this._blockStarts.push(this._nodes.length),Y&&this.code(Y).endBlock(ee),this}endBlock(Y){const ee=this._blockStarts.pop();if(ee===void 0)throw new Error("CodeGen: not in self-balancing block");const ae=this._nodes.length-ee;if(ae<0||Y!==void 0&&ae!==Y)throw new Error(`CodeGen: wrong number of nodes: ${ae} vs ${Y} expected`);return this._nodes.length=ee,this}func(Y,ee=t.nil,ae,_e){return this._blockNode(new C(Y,ee,ae)),_e&&this.code(_e).endFunc(),this}endFunc(){return this._endBlockNode(C)}optimize(Y=1){for(;Y-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(Y){return this._currNode.nodes.push(Y),this}_blockNode(Y){this._currNode.nodes.push(Y),this._nodes.push(Y)}_endBlockNode(Y,ee){const ae=this._currNode;if(ae instanceof Y||ee&&ae instanceof ee)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${ee?`${Y.kind}/${ee.kind}`:Y.kind}"`)}_elseNode(Y){const ee=this._currNode;if(!(ee instanceof v))throw new Error('CodeGen: "else" without "if"');return this._currNode=ee.else=Y,this}get _root(){return this._nodes[0]}get _currNode(){const Y=this._nodes;return Y[Y.length-1]}set _currNode(Y){const ee=this._nodes;ee[ee.length-1]=Y}}e.CodeGen=L;function B(V,Y){for(const ee in Y)V[ee]=(V[ee]||0)+(Y[ee]||0);return V}function F(V,Y){return Y instanceof t._CodeOrName?B(V,Y.names):V}function H(V,Y,ee){if(V instanceof t.Name)return ae(V);if(!_e(V))return V;return new t._Code(V._items.reduce((pe,Te)=>(Te instanceof t.Name&&(Te=ae(Te)),Te instanceof t._Code?pe.push(...Te._items):pe.push(Te),pe),[]));function ae(pe){const Te=ee[pe.str];return Te===void 0||Y[pe.str]!==1?pe:(delete Y[pe.str],Te)}function _e(pe){return pe instanceof t._Code&&pe._items.some(Te=>Te instanceof t.Name&&Y[Te.str]===1&&ee[Te.str]!==void 0)}}function Q(V,Y){for(const ee in Y)V[ee]=(V[ee]||0)-(Y[ee]||0)}function J(V){return typeof V=="boolean"||typeof V=="number"||V===null?!V:(0,t._)`!${G(V)}`}e.not=J;const ne=U(e.operators.AND);function Z(...V){return V.reduce(ne)}e.and=Z;const ie=U(e.operators.OR);function q(...V){return V.reduce(ie)}e.or=q;function U(V){return(Y,ee)=>Y===t.nil?ee:ee===t.nil?Y:(0,t._)`${G(Y)} ${V} ${G(ee)}`}function G(V){return V instanceof t.Name?V:(0,t._)`(${V})`}}(cq)),cq}var _r={},U1e;function wi(){if(U1e)return _r;U1e=1,Object.defineProperty(_r,"__esModule",{value:!0}),_r.checkStrictMode=_r.getErrorPath=_r.Type=_r.useFunc=_r.setEvaluated=_r.evaluatedPropsToName=_r.mergeEvaluated=_r.eachItem=_r.unescapeJsonPointer=_r.escapeJsonPointer=_r.escapeFragment=_r.unescapeFragment=_r.schemaRefOrVal=_r.schemaHasRulesButRef=_r.schemaHasRules=_r.checkUnknownRules=_r.alwaysValidSchema=_r.toHash=void 0;const e=Nr(),t=S8();function n(T){const C={};for(const I of T)C[I]=!0;return C}_r.toHash=n;function r(T,C){return typeof C=="boolean"?C:Object.keys(C).length===0?!0:(i(T,C),!s(C,T.self.RULES.all))}_r.alwaysValidSchema=r;function i(T,C=T.schema){const{opts:I,self:R}=T;if(!I.strictSchema||typeof C=="boolean")return;const N=R.RULES.keywords;for(const O in C)N[O]||E(T,`unknown keyword: "${O}"`)}_r.checkUnknownRules=i;function s(T,C){if(typeof T=="boolean")return!T;for(const I in T)if(C[I])return!0;return!1}_r.schemaHasRules=s;function o(T,C){if(typeof T=="boolean")return!T;for(const I in T)if(I!=="$ref"&&C.all[I])return!0;return!1}_r.schemaHasRulesButRef=o;function a({topSchemaRef:T,schemaPath:C},I,R,N){if(!N){if(typeof I=="number"||typeof I=="boolean")return I;if(typeof I=="string")return(0,e._)`${I}`}return(0,e._)`${T}${C}${(0,e.getProperty)(R)}`}_r.schemaRefOrVal=a;function u(T){return f(decodeURIComponent(T))}_r.unescapeFragment=u;function l(T){return encodeURIComponent(c(T))}_r.escapeFragment=l;function c(T){return typeof T=="number"?`${T}`:T.replace(/~/g,"~0").replace(/\//g,"~1")}_r.escapeJsonPointer=c;function f(T){return T.replace(/~1/g,"/").replace(/~0/g,"~")}_r.unescapeJsonPointer=f;function d(T,C){if(Array.isArray(T))for(const I of T)C(I);else C(T)}_r.eachItem=d;function h({mergeNames:T,mergeToName:C,mergeValues:I,resultToName:R}){return(N,O,L,B)=>{const F=L===void 0?O:L instanceof e.Name?(O instanceof e.Name?T(N,O,L):C(N,O,L),L):O instanceof e.Name?(C(N,L,O),O):I(O,L);return B===e.Name&&!(F instanceof e.Name)?R(N,F):F}}_r.mergeEvaluated={props:h({mergeNames:(T,C,I)=>T.if((0,e._)`${I} !== true && ${C} !== undefined`,()=>{T.if((0,e._)`${C} === true`,()=>T.assign(I,!0),()=>T.assign(I,(0,e._)`${I} || {}`).code((0,e._)`Object.assign(${I}, ${C})`))}),mergeToName:(T,C,I)=>T.if((0,e._)`${I} !== true`,()=>{C===!0?T.assign(I,!0):(T.assign(I,(0,e._)`${I} || {}`),m(T,I,C))}),mergeValues:(T,C)=>T===!0?!0:{...T,...C},resultToName:p}),items:h({mergeNames:(T,C,I)=>T.if((0,e._)`${I} !== true && ${C} !== undefined`,()=>T.assign(I,(0,e._)`${C} === true ? true : ${I} > ${C} ? ${I} : ${C}`)),mergeToName:(T,C,I)=>T.if((0,e._)`${I} !== true`,()=>T.assign(I,C===!0?!0:(0,e._)`${I} > ${C} ? ${I} : ${C}`)),mergeValues:(T,C)=>T===!0?!0:Math.max(T,C),resultToName:(T,C)=>T.var("items",C)})};function p(T,C){if(C===!0)return T.var("props",!0);const I=T.var("props",(0,e._)`{}`);return C!==void 0&&m(T,I,C),I}_r.evaluatedPropsToName=p;function m(T,C,I){Object.keys(I).forEach(R=>T.assign((0,e._)`${C}${(0,e.getProperty)(R)}`,!0))}_r.setEvaluated=m;const g={};function v(T,C){return T.scopeValue("func",{ref:C,code:g[C.code]||(g[C.code]=new t._Code(C.code))})}_r.useFunc=v;var b;(function(T){T[T.Num=0]="Num",T[T.Str=1]="Str"})(b||(_r.Type=b={}));function w(T,C,I){if(T instanceof e.Name){const R=C===b.Num;return I?R?(0,e._)`"[" + ${T} + "]"`:(0,e._)`"['" + ${T} + "']"`:R?(0,e._)`"/" + ${T}`:(0,e._)`"/" + ${T}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return I?(0,e.getProperty)(T).toString():"/"+c(T)}_r.getErrorPath=w;function E(T,C,I=T.opts.strictSchema){if(I){if(C=`strict mode: ${C}`,I===!0)throw new Error(C);T.self.logger.warn(C)}}return _r.checkStrictMode=E,_r}var W6={},z1e;function jx(){if(z1e)return W6;z1e=1,Object.defineProperty(W6,"__esModule",{value:!0});const e=Nr(),t={data:new e.Name("data"),valCxt:new e.Name("valCxt"),instancePath:new e.Name("instancePath"),parentData:new e.Name("parentData"),parentDataProperty:new e.Name("parentDataProperty"),rootData:new e.Name("rootData"),dynamicAnchors:new e.Name("dynamicAnchors"),vErrors:new e.Name("vErrors"),errors:new e.Name("errors"),this:new e.Name("this"),self:new e.Name("self"),scope:new e.Name("scope"),json:new e.Name("json"),jsonPos:new e.Name("jsonPos"),jsonLen:new e.Name("jsonLen"),jsonPart:new e.Name("jsonPart")};return W6.default=t,W6}var V1e;function A7(){return V1e||(V1e=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Nr(),n=wi(),r=jx();e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:v})=>v?(0,t.str)`"${g}" keyword must be ${v} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,v=e.keywordError,b,w){const{it:E}=g,{gen:T,compositeRule:C,allErrors:I}=E,R=f(g,v,b);w??(C||I)?u(T,R):l(E,(0,t._)`[${R}]`)}e.reportError=i;function s(g,v=e.keywordError,b){const{it:w}=g,{gen:E,compositeRule:T,allErrors:C}=w,I=f(g,v,b);u(E,I),T||C||l(w,r.default.vErrors)}e.reportExtraError=s;function o(g,v){g.assign(r.default.errors,v),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(v,()=>g.assign((0,t._)`${r.default.vErrors}.length`,v),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:v,schemaValue:b,data:w,errsCount:E,it:T}){if(E===void 0)throw new Error("ajv implementation error");const C=g.name("err");g.forRange("i",E,r.default.errors,I=>{g.const(C,(0,t._)`${r.default.vErrors}[${I}]`),g.if((0,t._)`${C}.instancePath === undefined`,()=>g.assign((0,t._)`${C}.instancePath`,(0,t.strConcat)(r.default.instancePath,T.errorPath))),g.assign((0,t._)`${C}.schemaPath`,(0,t.str)`${T.errSchemaPath}/${v}`),T.opts.verbose&&(g.assign((0,t._)`${C}.schema`,b),g.assign((0,t._)`${C}.data`,w))})}e.extendErrors=a;function u(g,v){const b=g.const("err",v);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${r.default.vErrors}.push(${b})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,v){const{gen:b,validateName:w,schemaEnv:E}=g;E.$async?b.throw((0,t._)`new ${g.ValidationError}(${v})`):(b.assign((0,t._)`${w}.errors`,v),b.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,v,b){const{createErrors:w}=g.it;return w===!1?(0,t._)`{}`:d(g,v,b)}function d(g,v,b={}){const{gen:w,it:E}=g,T=[h(E,b),p(g,b)];return m(g,v,T),w.object(...T)}function h({errorPath:g},{instancePath:v}){const b=v?(0,t.str)`${g}${(0,n.getErrorPath)(v,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)]}function p({keyword:g,it:{errSchemaPath:v}},{schemaPath:b,parentSchema:w}){let E=w?v:(0,t.str)`${v}/${g}`;return b&&(E=(0,t.str)`${E}${(0,n.getErrorPath)(b,n.Type.Str)}`),[c.schemaPath,E]}function m(g,{params:v,message:b},w){const{keyword:E,data:T,schemaValue:C,it:I}=g,{opts:R,propertyName:N,topSchemaRef:O,schemaPath:L}=I;w.push([c.keyword,E],[c.params,typeof v=="function"?v(g):v||(0,t._)`{}`]),R.messages&&w.push([c.message,typeof b=="function"?b(g):b]),R.verbose&&w.push([c.schema,C],[c.parentSchema,(0,t._)`${O}${L}`],[r.default.data,T]),N&&w.push([c.propertyName,N])}}(lq)),lq}var H1e;function DXt(){if(H1e)return j_;H1e=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.boolOrEmptySchema=j_.topBoolOrEmptySchema=void 0;const e=A7(),t=Nr(),n=jx(),r={message:"boolean schema is false"};function i(a){const{gen:u,schema:l,validateName:c}=a;l===!1?o(a,!1):typeof l=="object"&&l.$async===!0?u.return(n.default.data):(u.assign((0,t._)`${c}.errors`,null),u.return(!0))}j_.topBoolOrEmptySchema=i;function s(a,u){const{gen:l,schema:c}=a;c===!1?(l.var(u,!1),o(a)):l.var(u,!0)}j_.boolOrEmptySchema=s;function o(a,u){const{gen:l,data:c}=a,f={gen:l,keyword:"false schema",data:c,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:a};(0,e.reportError)(f,r,void 0,u)}return j_}var au={},U_={},q1e;function D5e(){if(q1e)return U_;q1e=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.getRules=U_.isJSONType=void 0;const e=["string","number","integer","boolean","null","object","array"],t=new Set(e);function n(i){return typeof i=="string"&&t.has(i)}U_.isJSONType=n;function r(){const i={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...i,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},i.number,i.string,i.array,i.object],post:{rules:[]},all:{},keywords:{}}}return U_.getRules=r,U_}var iy={},W1e;function N5e(){if(W1e)return iy;W1e=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.shouldUseRule=iy.shouldUseGroup=iy.schemaHasRulesForType=void 0;function e({schema:r,self:i},s){const o=i.RULES.types[s];return o&&o!==!0&&t(r,o)}iy.schemaHasRulesForType=e;function t(r,i){return i.rules.some(s=>n(r,s))}iy.shouldUseGroup=t;function n(r,i){var s;return r[i.keyword]!==void 0||((s=i.definition.implements)===null||s===void 0?void 0:s.some(o=>r[o]!==void 0))}return iy.shouldUseRule=n,iy}var G1e;function C8(){if(G1e)return au;G1e=1,Object.defineProperty(au,"__esModule",{value:!0}),au.reportTypeError=au.checkDataTypes=au.checkDataType=au.coerceAndCheckDataType=au.getJSONTypes=au.getSchemaTypes=au.DataType=void 0;const e=D5e(),t=N5e(),n=A7(),r=Nr(),i=wi();var s;(function(b){b[b.Correct=0]="Correct",b[b.Wrong=1]="Wrong"})(s||(au.DataType=s={}));function o(b){const w=a(b.type);if(w.includes("null")){if(b.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!w.length&&b.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');b.nullable===!0&&w.push("null")}return w}au.getSchemaTypes=o;function a(b){const w=Array.isArray(b)?b:b?[b]:[];if(w.every(e.isJSONType))return w;throw new Error("type must be JSONType or JSONType[]: "+w.join(","))}au.getJSONTypes=a;function u(b,w){const{gen:E,data:T,opts:C}=b,I=c(w,C.coerceTypes),R=w.length>0&&!(I.length===0&&w.length===1&&(0,t.schemaHasRulesForType)(b,w[0]));if(R){const N=p(w,T,C.strictNumbers,s.Wrong);E.if(N,()=>{I.length?f(b,w,I):g(b)})}return R}au.coerceAndCheckDataType=u;const l=new Set(["string","number","integer","boolean","null"]);function c(b,w){return w?b.filter(E=>l.has(E)||w==="array"&&E==="array"):[]}function f(b,w,E){const{gen:T,data:C,opts:I}=b,R=T.let("dataType",(0,r._)`typeof ${C}`),N=T.let("coerced",(0,r._)`undefined`);I.coerceTypes==="array"&&T.if((0,r._)`${R} == 'object' && Array.isArray(${C}) && ${C}.length == 1`,()=>T.assign(C,(0,r._)`${C}[0]`).assign(R,(0,r._)`typeof ${C}`).if(p(w,C,I.strictNumbers),()=>T.assign(N,C))),T.if((0,r._)`${N} !== undefined`);for(const L of E)(l.has(L)||L==="array"&&I.coerceTypes==="array")&&O(L);T.else(),g(b),T.endIf(),T.if((0,r._)`${N} !== undefined`,()=>{T.assign(C,N),d(b,N)});function O(L){switch(L){case"string":T.elseIf((0,r._)`${R} == "number" || ${R} == "boolean"`).assign(N,(0,r._)`"" + ${C}`).elseIf((0,r._)`${C} === null`).assign(N,(0,r._)`""`);return;case"number":T.elseIf((0,r._)`${R} == "boolean" || ${C} === null
              || (${R} == "string" && ${C} && ${C} == +${C})`).assign(N,(0,r._)`+${C}`);return;case"integer":T.elseIf((0,r._)`${R} === "boolean" || ${C} === null
              || (${R} === "string" && ${C} && ${C} == +${C} && !(${C} % 1))`).assign(N,(0,r._)`+${C}`);return;case"boolean":T.elseIf((0,r._)`${C} === "false" || ${C} === 0 || ${C} === null`).assign(N,!1).elseIf((0,r._)`${C} === "true" || ${C} === 1`).assign(N,!0);return;case"null":T.elseIf((0,r._)`${C} === "" || ${C} === 0 || ${C} === false`),T.assign(N,null);return;case"array":T.elseIf((0,r._)`${R} === "string" || ${R} === "number"
              || ${R} === "boolean" || ${C} === null`).assign(N,(0,r._)`[${C}]`)}}}function d({gen:b,parentData:w,parentDataProperty:E},T){b.if((0,r._)`${w} !== undefined`,()=>b.assign((0,r._)`${w}[${E}]`,T))}function h(b,w,E,T=s.Correct){const C=T===s.Correct?r.operators.EQ:r.operators.NEQ;let I;switch(b){case"null":return(0,r._)`${w} ${C} null`;case"array":I=(0,r._)`Array.isArray(${w})`;break;case"object":I=(0,r._)`${w} && typeof ${w} == "object" && !Array.isArray(${w})`;break;case"integer":I=R((0,r._)`!(${w} % 1) && !isNaN(${w})`);break;case"number":I=R();break;default:return(0,r._)`typeof ${w} ${C} ${b}`}return T===s.Correct?I:(0,r.not)(I);function R(N=r.nil){return(0,r.and)((0,r._)`typeof ${w} == "number"`,N,E?(0,r._)`isFinite(${w})`:r.nil)}}au.checkDataType=h;function p(b,w,E,T){if(b.length===1)return h(b[0],w,E,T);let C;const I=(0,i.toHash)(b);if(I.array&&I.object){const R=(0,r._)`typeof ${w} != "object"`;C=I.null?R:(0,r._)`!${w} || ${R}`,delete I.null,delete I.array,delete I.object}else C=r.nil;I.number&&delete I.integer;for(const R in I)C=(0,r.and)(C,h(R,w,E,T));return C}au.checkDataTypes=p;const m={message:({schema:b})=>`must be ${b}`,params:({schema:b,schemaValue:w})=>typeof b=="string"?(0,r._)`{type: ${b}}`:(0,r._)`{type: ${w}}`};function g(b){const w=v(b);(0,n.reportError)(w,m)}au.reportTypeError=g;function v(b){const{gen:w,data:E,schema:T}=b,C=(0,i.schemaRefOrVal)(b,T,"type");return{gen:w,keyword:"type",data:E,schema:T.type,schemaCode:C,schemaValue:C,parentSchema:T,params:{},it:b}}return au}var NR={},Y1e;function NXt(){if(Y1e)return NR;Y1e=1,Object.defineProperty(NR,"__esModule",{value:!0}),NR.assignDefaults=void 0;const e=Nr(),t=wi();function n(i,s){const{properties:o,items:a}=i.schema;if(s==="object"&&o)for(const u in o)r(i,u,o[u].default);else s==="array"&&Array.isArray(a)&&a.forEach((u,l)=>r(i,l,u.default))}NR.assignDefaults=n;function r(i,s,o){const{gen:a,compositeRule:u,data:l,opts:c}=i;if(o===void 0)return;const f=(0,e._)`${l}${(0,e.getProperty)(s)}`;if(u){(0,t.checkStrictMode)(i,`default is ignored for: ${f}`);return}let d=(0,e._)`${f} === undefined`;c.useDefaults==="empty"&&(d=(0,e._)`${d} || ${f} === null || ${f} === ""`),a.if(d,(0,e._)`${f} = ${(0,e.stringify)(o)}`)}return NR}var rp={},Oi={},K1e;function dm(){if(K1e)return Oi;K1e=1,Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.validateUnion=Oi.validateArray=Oi.usePattern=Oi.callValidateCode=Oi.schemaProperties=Oi.allSchemaProperties=Oi.noPropertyInData=Oi.propertyInData=Oi.isOwnProperty=Oi.hasPropFunc=Oi.reportMissingProp=Oi.checkMissingProp=Oi.checkReportMissingProp=void 0;const e=Nr(),t=wi(),n=jx(),r=wi();function i(b,w){const{gen:E,data:T,it:C}=b;E.if(c(E,T,w,C.opts.ownProperties),()=>{b.setParams({missingProperty:(0,e._)`${w}`},!0),b.error()})}Oi.checkReportMissingProp=i;function s({gen:b,data:w,it:{opts:E}},T,C){return(0,e.or)(...T.map(I=>(0,e.and)(c(b,w,I,E.ownProperties),(0,e._)`${C} = ${I}`)))}Oi.checkMissingProp=s;function o(b,w){b.setParams({missingProperty:w},!0),b.error()}Oi.reportMissingProp=o;function a(b){return b.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,e._)`Object.prototype.hasOwnProperty`})}Oi.hasPropFunc=a;function u(b,w,E){return(0,e._)`${a(b)}.call(${w}, ${E})`}Oi.isOwnProperty=u;function l(b,w,E,T){const C=(0,e._)`${w}${(0,e.getProperty)(E)} !== undefined`;return T?(0,e._)`${C} && ${u(b,w,E)}`:C}Oi.propertyInData=l;function c(b,w,E,T){const C=(0,e._)`${w}${(0,e.getProperty)(E)} === undefined`;return T?(0,e.or)(C,(0,e.not)(u(b,w,E))):C}Oi.noPropertyInData=c;function f(b){return b?Object.keys(b).filter(w=>w!=="__proto__"):[]}Oi.allSchemaProperties=f;function d(b,w){return f(w).filter(E=>!(0,t.alwaysValidSchema)(b,w[E]))}Oi.schemaProperties=d;function h({schemaCode:b,data:w,it:{gen:E,topSchemaRef:T,schemaPath:C,errorPath:I},it:R},N,O,L){const B=L?(0,e._)`${b}, ${w}, ${T}${C}`:w,F=[[n.default.instancePath,(0,e.strConcat)(n.default.instancePath,I)],[n.default.parentData,R.parentData],[n.default.parentDataProperty,R.parentDataProperty],[n.default.rootData,n.default.rootData]];R.opts.dynamicRef&&F.push([n.default.dynamicAnchors,n.default.dynamicAnchors]);const H=(0,e._)`${B}, ${E.object(...F)}`;return O!==e.nil?(0,e._)`${N}.call(${O}, ${H})`:(0,e._)`${N}(${H})`}Oi.callValidateCode=h;const p=(0,e._)`new RegExp`;function m({gen:b,it:{opts:w}},E){const T=w.unicodeRegExp?"u":"",{regExp:C}=w.code,I=C(E,T);return b.scopeValue("pattern",{key:I.toString(),ref:I,code:(0,e._)`${C.code==="new RegExp"?p:(0,r.useFunc)(b,C)}(${E}, ${T})`})}Oi.usePattern=m;function g(b){const{gen:w,data:E,keyword:T,it:C}=b,I=w.name("valid");if(C.allErrors){const N=w.let("valid",!0);return R(()=>w.assign(N,!1)),N}return w.var(I,!0),R(()=>w.break()),I;function R(N){const O=w.const("len",(0,e._)`${E}.length`);w.forRange("i",0,O,L=>{b.subschema({keyword:T,dataProp:L,dataPropType:t.Type.Num},I),w.if((0,e.not)(I),N)})}}Oi.validateArray=g;function v(b){const{gen:w,schema:E,keyword:T,it:C}=b;if(!Array.isArray(E))throw new Error("ajv implementation error");if(E.some(O=>(0,t.alwaysValidSchema)(C,O))&&!C.opts.unevaluated)return;const R=w.let("valid",!1),N=w.name("_valid");w.block(()=>E.forEach((O,L)=>{const B=b.subschema({keyword:T,schemaProp:L,compositeRule:!0},N);w.assign(R,(0,e._)`${R} || ${N}`),b.mergeValidEvaluated(B,N)||w.if((0,e.not)(R))})),b.result(R,()=>b.reset(),()=>b.error(!0))}return Oi.validateUnion=v,Oi}var X1e;function PXt(){if(X1e)return rp;X1e=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.validateKeywordUsage=rp.validSchemaType=rp.funcKeywordCode=rp.macroKeywordCode=void 0;const e=Nr(),t=jx(),n=dm(),r=A7();function i(d,h){const{gen:p,keyword:m,schema:g,parentSchema:v,it:b}=d,w=h.macro.call(b.self,g,v,b),E=l(p,m,w);b.opts.validateSchema!==!1&&b.self.validateSchema(w,!0);const T=p.name("valid");d.subschema({schema:w,schemaPath:e.nil,errSchemaPath:`${b.errSchemaPath}/${m}`,topSchemaRef:E,compositeRule:!0},T),d.pass(T,()=>d.error(!0))}rp.macroKeywordCode=i;function s(d,h){var p;const{gen:m,keyword:g,schema:v,parentSchema:b,$data:w,it:E}=d;u(E,h);const T=!w&&h.compile?h.compile.call(E.self,v,b,E):h.validate,C=l(m,g,T),I=m.let("valid");d.block$data(I,R),d.ok((p=h.valid)!==null&&p!==void 0?p:I);function R(){if(h.errors===!1)L(),h.modifying&&o(d),B(()=>d.error());else{const F=h.async?N():O();h.modifying&&o(d),B(()=>a(d,F))}}function N(){const F=m.let("ruleErrs",null);return m.try(()=>L((0,e._)`await `),H=>m.assign(I,!1).if((0,e._)`${H} instanceof ${E.ValidationError}`,()=>m.assign(F,(0,e._)`${H}.errors`),()=>m.throw(H))),F}function O(){const F=(0,e._)`${C}.errors`;return m.assign(F,null),L(e.nil),F}function L(F=h.async?(0,e._)`await `:e.nil){const H=E.opts.passContext?t.default.this:t.default.self,Q=!("compile"in h&&!w||h.schema===!1);m.assign(I,(0,e._)`${F}${(0,n.callValidateCode)(d,C,H,Q)}`,h.modifying)}function B(F){var H;m.if((0,e.not)((H=h.valid)!==null&&H!==void 0?H:I),F)}}rp.funcKeywordCode=s;function o(d){const{gen:h,data:p,it:m}=d;h.if(m.parentData,()=>h.assign(p,(0,e._)`${m.parentData}[${m.parentDataProperty}]`))}function a(d,h){const{gen:p}=d;p.if((0,e._)`Array.isArray(${h})`,()=>{p.assign(t.default.vErrors,(0,e._)`${t.default.vErrors} === null ? ${h} : ${t.default.vErrors}.concat(${h})`).assign(t.default.errors,(0,e._)`${t.default.vErrors}.length`),(0,r.extendErrors)(d)},()=>d.error())}function u({schemaEnv:d},h){if(h.async&&!d.$async)throw new Error("async keyword in sync schema")}function l(d,h,p){if(p===void 0)throw new Error(`keyword "${h}" failed to compile`);return d.scopeValue("keyword",typeof p=="function"?{ref:p}:{ref:p,code:(0,e.stringify)(p)})}function c(d,h,p=!1){return!h.length||h.some(m=>m==="array"?Array.isArray(d):m==="object"?d&&typeof d=="object"&&!Array.isArray(d):typeof d==m||p&&typeof d>"u")}rp.validSchemaType=c;function f({schema:d,opts:h,self:p,errSchemaPath:m},g,v){if(Array.isArray(g.keyword)?!g.keyword.includes(v):g.keyword!==v)throw new Error("ajv implementation error");const b=g.dependencies;if(b!=null&&b.some(w=>!Object.prototype.hasOwnProperty.call(d,w)))throw new Error(`parent schema must have dependencies of ${v}: ${b.join(",")}`);if(g.validateSchema&&!g.validateSchema(d[v])){const E=`keyword "${v}" value is invalid at path "${m}": `+p.errorsText(g.validateSchema.errors);if(h.validateSchema==="log")p.logger.error(E);else throw new Error(E)}}return rp.validateKeywordUsage=f,rp}var sy={},Q1e;function OXt(){if(Q1e)return sy;Q1e=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.extendSubschemaMode=sy.extendSubschemaData=sy.getSubschema=void 0;const e=Nr(),t=wi();function n(s,{keyword:o,schemaProp:a,schema:u,schemaPath:l,errSchemaPath:c,topSchemaRef:f}){if(o!==void 0&&u!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(o!==void 0){const d=s.schema[o];return a===void 0?{schema:d,schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}`,errSchemaPath:`${s.errSchemaPath}/${o}`}:{schema:d[a],schemaPath:(0,e._)`${s.schemaPath}${(0,e.getProperty)(o)}${(0,e.getProperty)(a)}`,errSchemaPath:`${s.errSchemaPath}/${o}/${(0,t.escapeFragment)(a)}`}}if(u!==void 0){if(l===void 0||c===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:u,schemaPath:l,topSchemaRef:f,errSchemaPath:c}}throw new Error('either "keyword" or "schema" must be passed')}sy.getSubschema=n;function r(s,o,{dataProp:a,dataPropType:u,data:l,dataTypes:c,propertyName:f}){if(l!==void 0&&a!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:d}=o;if(a!==void 0){const{errorPath:p,dataPathArr:m,opts:g}=o,v=d.let("data",(0,e._)`${o.data}${(0,e.getProperty)(a)}`,!0);h(v),s.errorPath=(0,e.str)`${p}${(0,t.getErrorPath)(a,u,g.jsPropertySyntax)}`,s.parentDataProperty=(0,e._)`${a}`,s.dataPathArr=[...m,s.parentDataProperty]}if(l!==void 0){const p=l instanceof e.Name?l:d.let("data",l,!0);h(p),f!==void 0&&(s.propertyName=f)}c&&(s.dataTypes=c);function h(p){s.data=p,s.dataLevel=o.dataLevel+1,s.dataTypes=[],o.definedProperties=new Set,s.parentData=o.data,s.dataNames=[...o.dataNames,p]}}sy.extendSubschemaData=r;function i(s,{jtdDiscriminator:o,jtdMetadata:a,compositeRule:u,createErrors:l,allErrors:c}){u!==void 0&&(s.compositeRule=u),l!==void 0&&(s.createErrors=l),c!==void 0&&(s.allErrors=c),s.jtdDiscriminator=o,s.jtdMetadata=a}return sy.extendSubschemaMode=i,sy}var Ol={},hq={exports:{}},J1e;function MXt(){if(J1e)return hq.exports;J1e=1;var e=hq.exports=function(r,i,s){typeof i=="function"&&(s=i,i={}),s=i.cb||s;var o=typeof s=="function"?s:s.pre||function(){},a=s.post||function(){};t(i,o,a,r,"",r)};e.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},e.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},e.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},e.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function t(r,i,s,o,a,u,l,c,f,d){if(o&&typeof o=="object"&&!Array.isArray(o)){i(o,a,u,l,c,f,d);for(var h in o){var p=o[h];if(Array.isArray(p)){if(h in e.arrayKeywords)for(var m=0;m<p.length;m++)t(r,i,s,p[m],a+"/"+h+"/"+m,u,a,h,o,m)}else if(h in e.propsKeywords){if(p&&typeof p=="object")for(var g in p)t(r,i,s,p[g],a+"/"+h+"/"+n(g),u,a,h,o,g)}else(h in e.keywords||r.allKeys&&!(h in e.skipKeywords))&&t(r,i,s,p,a+"/"+h,u,a,h,o)}s(o,a,u,l,c,f,d)}}function n(r){return r.replace(/~/g,"~0").replace(/\//g,"~1")}return hq.exports}var Z1e;function I7(){if(Z1e)return Ol;Z1e=1,Object.defineProperty(Ol,"__esModule",{value:!0}),Ol.getSchemaRefs=Ol.resolveUrl=Ol.normalizeId=Ol._getFullPath=Ol.getFullPath=Ol.inlineRef=void 0;const e=wi(),t=_Z(),n=MXt(),r=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function i(m,g=!0){return typeof m=="boolean"?!0:g===!0?!o(m):g?a(m)<=g:!1}Ol.inlineRef=i;const s=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function o(m){for(const g in m){if(s.has(g))return!0;const v=m[g];if(Array.isArray(v)&&v.some(o)||typeof v=="object"&&o(v))return!0}return!1}function a(m){let g=0;for(const v in m){if(v==="$ref")return 1/0;if(g++,!r.has(v)&&(typeof m[v]=="object"&&(0,e.eachItem)(m[v],b=>g+=a(b)),g===1/0))return 1/0}return g}function u(m,g="",v){v!==!1&&(g=f(g));const b=m.parse(g);return l(m,b)}Ol.getFullPath=u;function l(m,g){return m.serialize(g).split("#")[0]+"#"}Ol._getFullPath=l;const c=/#\/?$/;function f(m){return m?m.replace(c,""):""}Ol.normalizeId=f;function d(m,g,v){return v=f(v),m.resolve(g,v)}Ol.resolveUrl=d;const h=/^[a-z_][-a-z0-9._]*$/i;function p(m,g){if(typeof m=="boolean")return{};const{schemaId:v,uriResolver:b}=this.opts,w=f(m[v]||g),E={"":w},T=u(b,w,!1),C={},I=new Set;return n(m,{allKeys:!0},(O,L,B,F)=>{if(F===void 0)return;const H=T+L;let Q=E[F];typeof O[v]=="string"&&(Q=J.call(this,O[v])),ne.call(this,O.$anchor),ne.call(this,O.$dynamicAnchor),E[L]=Q;function J(Z){const ie=this.opts.uriResolver.resolve;if(Z=f(Q?ie(Q,Z):Z),I.has(Z))throw N(Z);I.add(Z);let q=this.refs[Z];return typeof q=="string"&&(q=this.refs[q]),typeof q=="object"?R(O,q.schema,Z):Z!==f(H)&&(Z[0]==="#"?(R(O,C[Z],Z),C[Z]=O):this.refs[Z]=H),Z}function ne(Z){if(typeof Z=="string"){if(!h.test(Z))throw new Error(`invalid anchor "${Z}"`);J.call(this,`#${Z}`)}}}),C;function R(O,L,B){if(L!==void 0&&!t(O,L))throw N(B)}function N(O){return new Error(`reference "${O}" resolves to more than one schema`)}}return Ol.getSchemaRefs=p,Ol}var eve;function k7(){if(eve)return ry;eve=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.getData=ry.KeywordCxt=ry.validateFunctionCode=void 0;const e=DXt(),t=C8(),n=N5e(),r=C8(),i=NXt(),s=PXt(),o=OXt(),a=Nr(),u=jx(),l=I7(),c=wi(),f=A7();function d(ye){if(T(ye)&&(I(ye),E(ye))){g(ye);return}h(ye,()=>(0,e.topBoolOrEmptySchema)(ye))}ry.validateFunctionCode=d;function h({gen:ye,validateName:he,schema:$e,schemaEnv:De,opts:tt},it){tt.code.es5?ye.func(he,(0,a._)`${u.default.data}, ${u.default.valCxt}`,De.$async,()=>{ye.code((0,a._)`"use strict"; ${b($e,tt)}`),m(ye,tt),ye.code(it)}):ye.func(he,(0,a._)`${u.default.data}, ${p(tt)}`,De.$async,()=>ye.code(b($e,tt)).code(it))}function p(ye){return(0,a._)`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${ye.dynamicRef?(0,a._)`, ${u.default.dynamicAnchors}={}`:a.nil}}={}`}function m(ye,he){ye.if(u.default.valCxt,()=>{ye.var(u.default.instancePath,(0,a._)`${u.default.valCxt}.${u.default.instancePath}`),ye.var(u.default.parentData,(0,a._)`${u.default.valCxt}.${u.default.parentData}`),ye.var(u.default.parentDataProperty,(0,a._)`${u.default.valCxt}.${u.default.parentDataProperty}`),ye.var(u.default.rootData,(0,a._)`${u.default.valCxt}.${u.default.rootData}`),he.dynamicRef&&ye.var(u.default.dynamicAnchors,(0,a._)`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{ye.var(u.default.instancePath,(0,a._)`""`),ye.var(u.default.parentData,(0,a._)`undefined`),ye.var(u.default.parentDataProperty,(0,a._)`undefined`),ye.var(u.default.rootData,u.default.data),he.dynamicRef&&ye.var(u.default.dynamicAnchors,(0,a._)`{}`)})}function g(ye){const{schema:he,opts:$e,gen:De}=ye;h(ye,()=>{$e.$comment&&he.$comment&&F(ye),O(ye),De.let(u.default.vErrors,null),De.let(u.default.errors,0),$e.unevaluated&&v(ye),R(ye),H(ye)})}function v(ye){const{gen:he,validateName:$e}=ye;ye.evaluated=he.const("evaluated",(0,a._)`${$e}.evaluated`),he.if((0,a._)`${ye.evaluated}.dynamicProps`,()=>he.assign((0,a._)`${ye.evaluated}.props`,(0,a._)`undefined`)),he.if((0,a._)`${ye.evaluated}.dynamicItems`,()=>he.assign((0,a._)`${ye.evaluated}.items`,(0,a._)`undefined`))}function b(ye,he){const $e=typeof ye=="object"&&ye[he.schemaId];return $e&&(he.code.source||he.code.process)?(0,a._)`/*# sourceURL=${$e} */`:a.nil}function w(ye,he){if(T(ye)&&(I(ye),E(ye))){C(ye,he);return}(0,e.boolOrEmptySchema)(ye,he)}function E({schema:ye,self:he}){if(typeof ye=="boolean")return!ye;for(const $e in ye)if(he.RULES.all[$e])return!0;return!1}function T(ye){return typeof ye.schema!="boolean"}function C(ye,he){const{schema:$e,gen:De,opts:tt}=ye;tt.$comment&&$e.$comment&&F(ye),L(ye),B(ye);const it=De.const("_errs",u.default.errors);R(ye,it),De.var(he,(0,a._)`${it} === ${u.default.errors}`)}function I(ye){(0,c.checkUnknownRules)(ye),N(ye)}function R(ye,he){if(ye.opts.jtd)return J(ye,[],!1,he);const $e=(0,t.getSchemaTypes)(ye.schema),De=(0,t.coerceAndCheckDataType)(ye,$e);J(ye,$e,!De,he)}function N(ye){const{schema:he,errSchemaPath:$e,opts:De,self:tt}=ye;he.$ref&&De.ignoreKeywordsWithRef&&(0,c.schemaHasRulesButRef)(he,tt.RULES)&&tt.logger.warn(`$ref: keywords ignored in schema at path "${$e}"`)}function O(ye){const{schema:he,opts:$e}=ye;he.default!==void 0&&$e.useDefaults&&$e.strictSchema&&(0,c.checkStrictMode)(ye,"default is ignored in the schema root")}function L(ye){const he=ye.schema[ye.opts.schemaId];he&&(ye.baseId=(0,l.resolveUrl)(ye.opts.uriResolver,ye.baseId,he))}function B(ye){if(ye.schema.$async&&!ye.schemaEnv.$async)throw new Error("async schema in sync schema")}function F({gen:ye,schemaEnv:he,schema:$e,errSchemaPath:De,opts:tt}){const it=$e.$comment;if(tt.$comment===!0)ye.code((0,a._)`${u.default.self}.logger.log(${it})`);else if(typeof tt.$comment=="function"){const Me=(0,a.str)`${De}/$comment`,Ge=ye.scopeValue("root",{ref:he.root});ye.code((0,a._)`${u.default.self}.opts.$comment(${it}, ${Me}, ${Ge}.schema)`)}}function H(ye){const{gen:he,schemaEnv:$e,validateName:De,ValidationError:tt,opts:it}=ye;$e.$async?he.if((0,a._)`${u.default.errors} === 0`,()=>he.return(u.default.data),()=>he.throw((0,a._)`new ${tt}(${u.default.vErrors})`)):(he.assign((0,a._)`${De}.errors`,u.default.vErrors),it.unevaluated&&Q(ye),he.return((0,a._)`${u.default.errors} === 0`))}function Q({gen:ye,evaluated:he,props:$e,items:De}){$e instanceof a.Name&&ye.assign((0,a._)`${he}.props`,$e),De instanceof a.Name&&ye.assign((0,a._)`${he}.items`,De)}function J(ye,he,$e,De){const{gen:tt,schema:it,data:Me,allErrors:Ge,opts:at,self:yt}=ye,{RULES:Tt}=yt;if(it.$ref&&(at.ignoreKeywordsWithRef||!(0,c.schemaHasRulesButRef)(it,Tt))){tt.block(()=>_e(ye,"$ref",Tt.all.$ref.definition));return}at.jtd||Z(ye,he),tt.block(()=>{for(const qe of Tt.rules)Ot(qe);Ot(Tt.post)});function Ot(qe){(0,n.shouldUseGroup)(it,qe)&&(qe.type?(tt.if((0,r.checkDataType)(qe.type,Me,at.strictNumbers)),ne(ye,qe),he.length===1&&he[0]===qe.type&&$e&&(tt.else(),(0,r.reportTypeError)(ye)),tt.endIf()):ne(ye,qe),Ge||tt.if((0,a._)`${u.default.errors} === ${De||0}`))}}function ne(ye,he){const{gen:$e,schema:De,opts:{useDefaults:tt}}=ye;tt&&(0,i.assignDefaults)(ye,he.type),$e.block(()=>{for(const it of he.rules)(0,n.shouldUseRule)(De,it)&&_e(ye,it.keyword,it.definition,he.type)})}function Z(ye,he){ye.schemaEnv.meta||!ye.opts.strictTypes||(ie(ye,he),ye.opts.allowUnionTypes||q(ye,he),U(ye,ye.dataTypes))}function ie(ye,he){if(he.length){if(!ye.dataTypes.length){ye.dataTypes=he;return}he.forEach($e=>{V(ye.dataTypes,$e)||ee(ye,`type "${$e}" not allowed by context "${ye.dataTypes.join(",")}"`)}),Y(ye,he)}}function q(ye,he){he.length>1&&!(he.length===2&&he.includes("null"))&&ee(ye,"use allowUnionTypes to allow union type keyword")}function U(ye,he){const $e=ye.self.RULES.all;for(const De in $e){const tt=$e[De];if(typeof tt=="object"&&(0,n.shouldUseRule)(ye.schema,tt)){const{type:it}=tt.definition;it.length&&!it.some(Me=>G(he,Me))&&ee(ye,`missing type "${it.join(",")}" for keyword "${De}"`)}}}function G(ye,he){return ye.includes(he)||he==="number"&&ye.includes("integer")}function V(ye,he){return ye.includes(he)||he==="integer"&&ye.includes("number")}function Y(ye,he){const $e=[];for(const De of ye.dataTypes)V(he,De)?$e.push(De):he.includes("integer")&&De==="number"&&$e.push("integer");ye.dataTypes=$e}function ee(ye,he){const $e=ye.schemaEnv.baseId+ye.errSchemaPath;he+=` at "${$e}" (strictTypes)`,(0,c.checkStrictMode)(ye,he,ye.opts.strictTypes)}class ae{constructor(he,$e,De){if((0,s.validateKeywordUsage)(he,$e,De),this.gen=he.gen,this.allErrors=he.allErrors,this.keyword=De,this.data=he.data,this.schema=he.schema[De],this.$data=$e.$data&&he.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,c.schemaRefOrVal)(he,this.schema,De,this.$data),this.schemaType=$e.schemaType,this.parentSchema=he.schema,this.params={},this.it=he,this.def=$e,this.$data)this.schemaCode=he.gen.const("vSchema",Le(this.$data,he));else if(this.schemaCode=this.schemaValue,!(0,s.validSchemaType)(this.schema,$e.schemaType,$e.allowUndefined))throw new Error(`${De} value must be ${JSON.stringify($e.schemaType)}`);("code"in $e?$e.trackErrors:$e.errors!==!1)&&(this.errsCount=he.gen.const("_errs",u.default.errors))}result(he,$e,De){this.failResult((0,a.not)(he),$e,De)}failResult(he,$e,De){this.gen.if(he),De?De():this.error(),$e?(this.gen.else(),$e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(he,$e){this.failResult((0,a.not)(he),void 0,$e)}fail(he){if(he===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(he),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(he){if(!this.$data)return this.fail(he);const{schemaCode:$e}=this;this.fail((0,a._)`${$e} !== undefined && (${(0,a.or)(this.invalid$data(),he)})`)}error(he,$e,De){if($e){this.setParams($e),this._error(he,De),this.setParams({});return}this._error(he,De)}_error(he,$e){(he?f.reportExtraError:f.reportError)(this,this.def.error,$e)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(he){this.allErrors||this.gen.if(he)}setParams(he,$e){$e?Object.assign(this.params,he):this.params=he}block$data(he,$e,De=a.nil){this.gen.block(()=>{this.check$data(he,De),$e()})}check$data(he=a.nil,$e=a.nil){if(!this.$data)return;const{gen:De,schemaCode:tt,schemaType:it,def:Me}=this;De.if((0,a.or)((0,a._)`${tt} === undefined`,$e)),he!==a.nil&&De.assign(he,!0),(it.length||Me.validateSchema)&&(De.elseIf(this.invalid$data()),this.$dataError(),he!==a.nil&&De.assign(he,!1)),De.else()}invalid$data(){const{gen:he,schemaCode:$e,schemaType:De,def:tt,it}=this;return(0,a.or)(Me(),Ge());function Me(){if(De.length){if(!($e instanceof a.Name))throw new Error("ajv implementation error");const at=Array.isArray(De)?De:[De];return(0,a._)`${(0,r.checkDataTypes)(at,$e,it.opts.strictNumbers,r.DataType.Wrong)}`}return a.nil}function Ge(){if(tt.validateSchema){const at=he.scopeValue("validate$data",{ref:tt.validateSchema});return(0,a._)`!${at}(${$e})`}return a.nil}}subschema(he,$e){const De=(0,o.getSubschema)(this.it,he);(0,o.extendSubschemaData)(De,this.it,he),(0,o.extendSubschemaMode)(De,he);const tt={...this.it,...De,items:void 0,props:void 0};return w(tt,$e),tt}mergeEvaluated(he,$e){const{it:De,gen:tt}=this;De.opts.unevaluated&&(De.props!==!0&&he.props!==void 0&&(De.props=c.mergeEvaluated.props(tt,he.props,De.props,$e)),De.items!==!0&&he.items!==void 0&&(De.items=c.mergeEvaluated.items(tt,he.items,De.items,$e)))}mergeValidEvaluated(he,$e){const{it:De,gen:tt}=this;if(De.opts.unevaluated&&(De.props!==!0||De.items!==!0))return tt.if($e,()=>this.mergeEvaluated(he,a.Name)),!0}}ry.KeywordCxt=ae;function _e(ye,he,$e,De){const tt=new ae(ye,$e,he);"code"in $e?$e.code(tt,De):tt.$data&&$e.validate?(0,s.funcKeywordCode)(tt,$e):"macro"in $e?(0,s.macroKeywordCode)(tt,$e):($e.compile||$e.validate)&&(0,s.funcKeywordCode)(tt,$e)}const pe=/^\/(?:[^~]|~0|~1)*$/,Te=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Le(ye,{dataLevel:he,dataNames:$e,dataPathArr:De}){let tt,it;if(ye==="")return u.default.rootData;if(ye[0]==="/"){if(!pe.test(ye))throw new Error(`Invalid JSON-pointer: ${ye}`);tt=ye,it=u.default.rootData}else{const yt=Te.exec(ye);if(!yt)throw new Error(`Invalid JSON-pointer: ${ye}`);const Tt=+yt[1];if(tt=yt[2],tt==="#"){if(Tt>=he)throw new Error(at("property/index",Tt));return De[he-Tt]}if(Tt>he)throw new Error(at("data",Tt));if(it=$e[he-Tt],!tt)return it}let Me=it;const Ge=tt.split("/");for(const yt of Ge)yt&&(it=(0,a._)`${it}${(0,a.getProperty)((0,c.unescapeJsonPointer)(yt))}`,Me=(0,a._)`${Me} && ${it}`);return Me;function at(yt,Tt){return`Cannot access ${yt} ${Tt} levels up, current level is ${he}`}}return ry.getData=Le,ry}var G6={},tve;function qoe(){if(tve)return G6;tve=1,Object.defineProperty(G6,"__esModule",{value:!0});class e extends Error{constructor(n){super("validation failed"),this.errors=n,this.ajv=this.validation=!0}}return G6.default=e,G6}var Y6={},nve;function R7(){if(nve)return Y6;nve=1,Object.defineProperty(Y6,"__esModule",{value:!0});const e=I7();class t extends Error{constructor(r,i,s,o){super(o||`can't resolve reference ${s} from id ${i}`),this.missingRef=(0,e.resolveUrl)(r,i,s),this.missingSchema=(0,e.normalizeId)((0,e.getFullPath)(r,this.missingRef))}}return Y6.default=t,Y6}var Ff={},rve;function Woe(){if(rve)return Ff;rve=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.resolveSchema=Ff.getCompilingSchema=Ff.resolveRef=Ff.compileSchema=Ff.SchemaEnv=void 0;const e=Nr(),t=qoe(),n=jx(),r=I7(),i=wi(),s=k7();class o{constructor(v){var b;this.refs={},this.dynamicAnchors={};let w;typeof v.schema=="object"&&(w=v.schema),this.schema=v.schema,this.schemaId=v.schemaId,this.root=v.root||this,this.baseId=(b=v.baseId)!==null&&b!==void 0?b:(0,r.normalizeId)(w==null?void 0:w[v.schemaId||"$id"]),this.schemaPath=v.schemaPath,this.localRefs=v.localRefs,this.meta=v.meta,this.$async=w==null?void 0:w.$async,this.refs={}}}Ff.SchemaEnv=o;function a(g){const v=c.call(this,g);if(v)return v;const b=(0,r.getFullPath)(this.opts.uriResolver,g.root.baseId),{es5:w,lines:E}=this.opts.code,{ownProperties:T}=this.opts,C=new e.CodeGen(this.scope,{es5:w,lines:E,ownProperties:T});let I;g.$async&&(I=C.scopeValue("Error",{ref:t.default,code:(0,e._)`require("ajv/dist/runtime/validation_error").default`}));const R=C.scopeName("validate");g.validateName=R;const N={gen:C,allErrors:this.opts.allErrors,data:n.default.data,parentData:n.default.parentData,parentDataProperty:n.default.parentDataProperty,dataNames:[n.default.data],dataPathArr:[e.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:C.scopeValue("schema",this.opts.code.source===!0?{ref:g.schema,code:(0,e.stringify)(g.schema)}:{ref:g.schema}),validateName:R,ValidationError:I,schema:g.schema,schemaEnv:g,rootId:b,baseId:g.baseId||b,schemaPath:e.nil,errSchemaPath:g.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,e._)`""`,opts:this.opts,self:this};let O;try{this._compilations.add(g),(0,s.validateFunctionCode)(N),C.optimize(this.opts.code.optimize);const L=C.toString();O=`${C.scopeRefs(n.default.scope)}return ${L}`,this.opts.code.process&&(O=this.opts.code.process(O,g));const F=new Function(`${n.default.self}`,`${n.default.scope}`,O)(this,this.scope.get());if(this.scope.value(R,{ref:F}),F.errors=null,F.schema=g.schema,F.schemaEnv=g,g.$async&&(F.$async=!0),this.opts.code.source===!0&&(F.source={validateName:R,validateCode:L,scopeValues:C._values}),this.opts.unevaluated){const{props:H,items:Q}=N;F.evaluated={props:H instanceof e.Name?void 0:H,items:Q instanceof e.Name?void 0:Q,dynamicProps:H instanceof e.Name,dynamicItems:Q instanceof e.Name},F.source&&(F.source.evaluated=(0,e.stringify)(F.evaluated))}return g.validate=F,g}catch(L){throw delete g.validate,delete g.validateName,O&&this.logger.error("Error compiling schema, function code:",O),L}finally{this._compilations.delete(g)}}Ff.compileSchema=a;function u(g,v,b){var w;b=(0,r.resolveUrl)(this.opts.uriResolver,v,b);const E=g.refs[b];if(E)return E;let T=d.call(this,g,b);if(T===void 0){const C=(w=g.localRefs)===null||w===void 0?void 0:w[b],{schemaId:I}=this.opts;C&&(T=new o({schema:C,schemaId:I,root:g,baseId:v}))}if(T!==void 0)return g.refs[b]=l.call(this,T)}Ff.resolveRef=u;function l(g){return(0,r.inlineRef)(g.schema,this.opts.inlineRefs)?g.schema:g.validate?g:a.call(this,g)}function c(g){for(const v of this._compilations)if(f(v,g))return v}Ff.getCompilingSchema=c;function f(g,v){return g.schema===v.schema&&g.root===v.root&&g.baseId===v.baseId}function d(g,v){let b;for(;typeof(b=this.refs[v])=="string";)v=b;return b||this.schemas[v]||h.call(this,g,v)}function h(g,v){const b=this.opts.uriResolver.parse(v),w=(0,r._getFullPath)(this.opts.uriResolver,b);let E=(0,r.getFullPath)(this.opts.uriResolver,g.baseId,void 0);if(Object.keys(g.schema).length>0&&w===E)return m.call(this,b,g);const T=(0,r.normalizeId)(w),C=this.refs[T]||this.schemas[T];if(typeof C=="string"){const I=h.call(this,g,C);return typeof(I==null?void 0:I.schema)!="object"?void 0:m.call(this,b,I)}if(typeof(C==null?void 0:C.schema)=="object"){if(C.validate||a.call(this,C),T===(0,r.normalizeId)(v)){const{schema:I}=C,{schemaId:R}=this.opts,N=I[R];return N&&(E=(0,r.resolveUrl)(this.opts.uriResolver,E,N)),new o({schema:I,schemaId:R,root:g,baseId:E})}return m.call(this,b,C)}}Ff.resolveSchema=h;const p=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function m(g,{baseId:v,schema:b,root:w}){var E;if(((E=g.fragment)===null||E===void 0?void 0:E[0])!=="/")return;for(const I of g.fragment.slice(1).split("/")){if(typeof b=="boolean")return;const R=b[(0,i.unescapeFragment)(I)];if(R===void 0)return;b=R;const N=typeof b=="object"&&b[this.opts.schemaId];!p.has(I)&&N&&(v=(0,r.resolveUrl)(this.opts.uriResolver,v,N))}let T;if(typeof b!="boolean"&&b.$ref&&!(0,i.schemaHasRulesButRef)(b,this.RULES)){const I=(0,r.resolveUrl)(this.opts.uriResolver,v,b.$ref);T=h.call(this,w,I)}const{schemaId:C}=this.opts;if(T=T||new o({schema:b,schemaId:C,root:w,baseId:v}),T.schema!==T.root.schema)return T}return Ff}const LXt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",$Xt="Meta-schema for $data reference (JSON AnySchema extension proposal)",FXt="object",BXt=["$data"],jXt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},UXt=!1,zXt={$id:LXt,description:$Xt,type:FXt,required:BXt,properties:jXt,additionalProperties:UXt};var K6={},PR={exports:{}},pq,ive;function VXt(){return ive||(ive=1,pq={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),pq}var mq,sve;function HXt(){if(sve)return mq;sve=1;const{HEX:e}=VXt(),t=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function n(m){if(a(m,".")<3)return{host:m,isIPV4:!1};const g=m.match(t)||[],[v]=g;return v?{host:o(v,"."),isIPV4:!0}:{host:m,isIPV4:!1}}function r(m,g=!1){let v="",b=!0;for(const w of m){if(e[w]===void 0)return;w!=="0"&&b===!0&&(b=!1),b||(v+=w)}return g&&v.length===0&&(v="0"),v}function i(m){let g=0;const v={error:!1,address:"",zone:""},b=[],w=[];let E=!1,T=!1,C=!1;function I(){if(w.length){if(E===!1){const R=r(w);if(R!==void 0)b.push(R);else return v.error=!0,!1}w.length=0}return!0}for(let R=0;R<m.length;R++){const N=m[R];if(!(N==="["||N==="]"))if(N===":"){if(T===!0&&(C=!0),!I())break;if(g++,b.push(":"),g>7){v.error=!0;break}R-1>=0&&m[R-1]===":"&&(T=!0);continue}else if(N==="%"){if(!I())break;E=!0}else{w.push(N);continue}}return w.length&&(E?v.zone=w.join(""):C?b.push(w.join("")):b.push(r(w))),v.address=b.join(""),v}function s(m){if(a(m,":")<2)return{host:m,isIPV6:!1};const g=i(m);if(g.error)return{host:m,isIPV6:!1};{let v=g.address,b=g.address;return g.zone&&(v+="%"+g.zone,b+="%25"+g.zone),{host:v,escapedHost:b,isIPV6:!0}}}function o(m,g){let v="",b=!0;const w=m.length;for(let E=0;E<w;E++){const T=m[E];T==="0"&&b?(E+1<=w&&m[E+1]===g||E+1===w)&&(v+=T,b=!1):(T===g?b=!0:b=!1,v+=T)}return v}function a(m,g){let v=0;for(let b=0;b<m.length;b++)m[b]===g&&v++;return v}const u=/^\.\.?\//u,l=/^\/\.(?:\/|$)/u,c=/^\/\.\.(?:\/|$)/u,f=/^\/?(?:.|\n)*?(?=\/|$)/u;function d(m){const g=[];for(;m.length;)if(m.match(u))m=m.replace(u,"");else if(m.match(l))m=m.replace(l,"/");else if(m.match(c))m=m.replace(c,"/"),g.pop();else if(m==="."||m==="..")m="";else{const v=m.match(f);if(v){const b=v[0];m=m.slice(b.length),g.push(b)}else throw new Error("Unexpected dot segment condition")}return g.join("")}function h(m,g){const v=g!==!0?escape:unescape;return m.scheme!==void 0&&(m.scheme=v(m.scheme)),m.userinfo!==void 0&&(m.userinfo=v(m.userinfo)),m.host!==void 0&&(m.host=v(m.host)),m.path!==void 0&&(m.path=v(m.path)),m.query!==void 0&&(m.query=v(m.query)),m.fragment!==void 0&&(m.fragment=v(m.fragment)),m}function p(m){const g=[];if(m.userinfo!==void 0&&(g.push(m.userinfo),g.push("@")),m.host!==void 0){let v=unescape(m.host);const b=n(v);if(b.isIPV4)v=b.host;else{const w=s(b.host);w.isIPV6===!0?v=`[${w.escapedHost}]`:v=m.host}g.push(v)}return(typeof m.port=="number"||typeof m.port=="string")&&(g.push(":"),g.push(String(m.port))),g.length?g.join(""):void 0}return mq={recomposeAuthority:p,normalizeComponentEncoding:h,removeDotSegments:d,normalizeIPv4:n,normalizeIPv6:s,stringArrayToHexStripped:r},mq}var gq,ove;function qXt(){if(ove)return gq;ove=1;const e=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,t=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function n(b){return typeof b.secure=="boolean"?b.secure:String(b.scheme).toLowerCase()==="wss"}function r(b){return b.host||(b.error=b.error||"HTTP URIs must have a host."),b}function i(b){const w=String(b.scheme).toLowerCase()==="https";return(b.port===(w?443:80)||b.port==="")&&(b.port=void 0),b.path||(b.path="/"),b}function s(b){return b.secure=n(b),b.resourceName=(b.path||"/")+(b.query?"?"+b.query:""),b.path=void 0,b.query=void 0,b}function o(b){if((b.port===(n(b)?443:80)||b.port==="")&&(b.port=void 0),typeof b.secure=="boolean"&&(b.scheme=b.secure?"wss":"ws",b.secure=void 0),b.resourceName){const[w,E]=b.resourceName.split("?");b.path=w&&w!=="/"?w:void 0,b.query=E,b.resourceName=void 0}return b.fragment=void 0,b}function a(b,w){if(!b.path)return b.error="URN can not be parsed",b;const E=b.path.match(t);if(E){const T=w.scheme||b.scheme||"urn";b.nid=E[1].toLowerCase(),b.nss=E[2];const C=`${T}:${w.nid||b.nid}`,I=v[C];b.path=void 0,I&&(b=I.parse(b,w))}else b.error=b.error||"URN can not be parsed.";return b}function u(b,w){const E=w.scheme||b.scheme||"urn",T=b.nid.toLowerCase(),C=`${E}:${w.nid||T}`,I=v[C];I&&(b=I.serialize(b,w));const R=b,N=b.nss;return R.path=`${T||w.nid}:${N}`,w.skipEscape=!0,R}function l(b,w){const E=b;return E.uuid=E.nss,E.nss=void 0,!w.tolerant&&(!E.uuid||!e.test(E.uuid))&&(E.error=E.error||"UUID is not valid."),E}function c(b){const w=b;return w.nss=(b.uuid||"").toLowerCase(),w}const f={scheme:"http",domainHost:!0,parse:r,serialize:i},d={scheme:"https",domainHost:f.domainHost,parse:r,serialize:i},h={scheme:"ws",domainHost:!0,parse:s,serialize:o},p={scheme:"wss",domainHost:h.domainHost,parse:h.parse,serialize:h.serialize},v={http:f,https:d,ws:h,wss:p,urn:{scheme:"urn",parse:a,serialize:u,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:l,serialize:c,skipNormalize:!0}};return gq=v,gq}var ave;function WXt(){if(ave)return PR.exports;ave=1;const{normalizeIPv6:e,normalizeIPv4:t,removeDotSegments:n,recomposeAuthority:r,normalizeComponentEncoding:i}=HXt(),s=qXt();function o(g,v){return typeof g=="string"?g=c(p(g,v),v):typeof g=="object"&&(g=p(c(g,v),v)),g}function a(g,v,b){const w=Object.assign({scheme:"null"},b),E=u(p(g,w),p(v,w),w,!0);return c(E,{...w,skipEscape:!0})}function u(g,v,b,w){const E={};return w||(g=p(c(g,b),b),v=p(c(v,b),b)),b=b||{},!b.tolerant&&v.scheme?(E.scheme=v.scheme,E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.userinfo!==void 0||v.host!==void 0||v.port!==void 0?(E.userinfo=v.userinfo,E.host=v.host,E.port=v.port,E.path=n(v.path||""),E.query=v.query):(v.path?(v.path.charAt(0)==="/"?E.path=n(v.path):((g.userinfo!==void 0||g.host!==void 0||g.port!==void 0)&&!g.path?E.path="/"+v.path:g.path?E.path=g.path.slice(0,g.path.lastIndexOf("/")+1)+v.path:E.path=v.path,E.path=n(E.path)),E.query=v.query):(E.path=g.path,v.query!==void 0?E.query=v.query:E.query=g.query),E.userinfo=g.userinfo,E.host=g.host,E.port=g.port),E.scheme=g.scheme),E.fragment=v.fragment,E}function l(g,v,b){return typeof g=="string"?(g=unescape(g),g=c(i(p(g,b),!0),{...b,skipEscape:!0})):typeof g=="object"&&(g=c(i(g,!0),{...b,skipEscape:!0})),typeof v=="string"?(v=unescape(v),v=c(i(p(v,b),!0),{...b,skipEscape:!0})):typeof v=="object"&&(v=c(i(v,!0),{...b,skipEscape:!0})),g.toLowerCase()===v.toLowerCase()}function c(g,v){const b={host:g.host,scheme:g.scheme,userinfo:g.userinfo,port:g.port,path:g.path,query:g.query,nid:g.nid,nss:g.nss,uuid:g.uuid,fragment:g.fragment,reference:g.reference,resourceName:g.resourceName,secure:g.secure,error:""},w=Object.assign({},v),E=[],T=s[(w.scheme||b.scheme||"").toLowerCase()];T&&T.serialize&&T.serialize(b,w),b.path!==void 0&&(w.skipEscape?b.path=unescape(b.path):(b.path=escape(b.path),b.scheme!==void 0&&(b.path=b.path.split("%3A").join(":")))),w.reference!=="suffix"&&b.scheme&&E.push(b.scheme,":");const C=r(b);if(C!==void 0&&(w.reference!=="suffix"&&E.push("//"),E.push(C),b.path&&b.path.charAt(0)!=="/"&&E.push("/")),b.path!==void 0){let I=b.path;!w.absolutePath&&(!T||!T.absolutePath)&&(I=n(I)),C===void 0&&(I=I.replace(/^\/\//u,"/%2F")),E.push(I)}return b.query!==void 0&&E.push("?",b.query),b.fragment!==void 0&&E.push("#",b.fragment),E.join("")}const f=Array.from({length:127},(g,v)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(v)));function d(g){let v=0;for(let b=0,w=g.length;b<w;++b)if(v=g.charCodeAt(b),v>126||f[v])return!0;return!1}const h=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function p(g,v){const b=Object.assign({},v),w={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},E=g.indexOf("%")!==-1;let T=!1;b.reference==="suffix"&&(g=(b.scheme?b.scheme+":":"")+"//"+g);const C=g.match(h);if(C){if(w.scheme=C[1],w.userinfo=C[3],w.host=C[4],w.port=parseInt(C[5],10),w.path=C[6]||"",w.query=C[7],w.fragment=C[8],isNaN(w.port)&&(w.port=C[5]),w.host){const R=t(w.host);if(R.isIPV4===!1){const N=e(R.host);w.host=N.host.toLowerCase(),T=N.isIPV6}else w.host=R.host,T=!0}w.scheme===void 0&&w.userinfo===void 0&&w.host===void 0&&w.port===void 0&&!w.path&&w.query===void 0?w.reference="same-document":w.scheme===void 0?w.reference="relative":w.fragment===void 0?w.reference="absolute":w.reference="uri",b.reference&&b.reference!=="suffix"&&b.reference!==w.reference&&(w.error=w.error||"URI is not a "+b.reference+" reference.");const I=s[(b.scheme||w.scheme||"").toLowerCase()];if(!b.unicodeSupport&&(!I||!I.unicodeSupport)&&w.host&&(b.domainHost||I&&I.domainHost)&&T===!1&&d(w.host))try{w.host=URL.domainToASCII(w.host.toLowerCase())}catch(R){w.error=w.error||"Host's domain name can not be converted to ASCII: "+R}(!I||I&&!I.skipNormalize)&&(E&&w.scheme!==void 0&&(w.scheme=unescape(w.scheme)),E&&w.host!==void 0&&(w.host=unescape(w.host)),w.path&&w.path.length&&(w.path=escape(unescape(w.path))),w.fragment&&w.fragment.length&&(w.fragment=encodeURI(decodeURIComponent(w.fragment)))),I&&I.parse&&I.parse(w,b)}else w.error=w.error||"URI can not be parsed.";return w}const m={SCHEMES:s,normalize:o,resolve:a,resolveComponents:u,equal:l,serialize:c,parse:p};return PR.exports=m,PR.exports.default=m,PR.exports.fastUri=m,PR.exports}var uve;function GXt(){if(uve)return K6;uve=1,Object.defineProperty(K6,"__esModule",{value:!0});const e=WXt();return e.code='require("ajv/dist/runtime/uri").default',K6.default=e,K6}var lve;function YXt(){return lve||(lve=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=k7();Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Nr();Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=qoe(),i=R7(),s=D5e(),o=Woe(),a=Nr(),u=I7(),l=C8(),c=wi(),f=zXt,d=GXt(),h=(q,U)=>new RegExp(q,U);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},v={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function w(q){var U,G,V,Y,ee,ae,_e,pe,Te,Le,ye,he,$e,De,tt,it,Me,Ge,at,yt,Tt,Ot,qe,dt,wt;const ke=q.strict,Oe=(U=q.code)===null||U===void 0?void 0:U.optimize,ht=Oe===!0||Oe===void 0?1:Oe||0,Lt=(V=(G=q.code)===null||G===void 0?void 0:G.regExp)!==null&&V!==void 0?V:h,Ft=(Y=q.uriResolver)!==null&&Y!==void 0?Y:d.default;return{strictSchema:(ae=(ee=q.strictSchema)!==null&&ee!==void 0?ee:ke)!==null&&ae!==void 0?ae:!0,strictNumbers:(pe=(_e=q.strictNumbers)!==null&&_e!==void 0?_e:ke)!==null&&pe!==void 0?pe:!0,strictTypes:(Le=(Te=q.strictTypes)!==null&&Te!==void 0?Te:ke)!==null&&Le!==void 0?Le:"log",strictTuples:(he=(ye=q.strictTuples)!==null&&ye!==void 0?ye:ke)!==null&&he!==void 0?he:"log",strictRequired:(De=($e=q.strictRequired)!==null&&$e!==void 0?$e:ke)!==null&&De!==void 0?De:!1,code:q.code?{...q.code,optimize:ht,regExp:Lt}:{optimize:ht,regExp:Lt},loopRequired:(tt=q.loopRequired)!==null&&tt!==void 0?tt:b,loopEnum:(it=q.loopEnum)!==null&&it!==void 0?it:b,meta:(Me=q.meta)!==null&&Me!==void 0?Me:!0,messages:(Ge=q.messages)!==null&&Ge!==void 0?Ge:!0,inlineRefs:(at=q.inlineRefs)!==null&&at!==void 0?at:!0,schemaId:(yt=q.schemaId)!==null&&yt!==void 0?yt:"$id",addUsedSchema:(Tt=q.addUsedSchema)!==null&&Tt!==void 0?Tt:!0,validateSchema:(Ot=q.validateSchema)!==null&&Ot!==void 0?Ot:!0,validateFormats:(qe=q.validateFormats)!==null&&qe!==void 0?qe:!0,unicodeRegExp:(dt=q.unicodeRegExp)!==null&&dt!==void 0?dt:!0,int32range:(wt=q.int32range)!==null&&wt!==void 0?wt:!0,uriResolver:Ft}}class E{constructor(U={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,U=this.opts={...U,...w(U)};const{es5:G,lines:V}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:G,lines:V}),this.logger=B(U.logger);const Y=U.validateFormats;U.validateFormats=!1,this.RULES=(0,s.getRules)(),T.call(this,g,U,"NOT SUPPORTED"),T.call(this,v,U,"DEPRECATED","warn"),this._metaOpts=O.call(this),U.formats&&R.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),U.keywords&&N.call(this,U.keywords),typeof U.meta=="object"&&this.addMetaSchema(U.meta),I.call(this),U.validateFormats=Y}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:U,meta:G,schemaId:V}=this.opts;let Y=f;V==="id"&&(Y={...f},Y.id=Y.$id,delete Y.$id),G&&U&&this.addMetaSchema(Y,Y[V],!1)}defaultMeta(){const{meta:U,schemaId:G}=this.opts;return this.opts.defaultMeta=typeof U=="object"?U[G]||U:void 0}validate(U,G){let V;if(typeof U=="string"){if(V=this.getSchema(U),!V)throw new Error(`no schema with key or ref "${U}"`)}else V=this.compile(U);const Y=V(G);return"$async"in V||(this.errors=V.errors),Y}compile(U,G){const V=this._addSchema(U,G);return V.validate||this._compileSchemaEnv(V)}compileAsync(U,G){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:V}=this.opts;return Y.call(this,U,G);async function Y(Le,ye){await ee.call(this,Le.$schema);const he=this._addSchema(Le,ye);return he.validate||ae.call(this,he)}async function ee(Le){Le&&!this.getSchema(Le)&&await Y.call(this,{$ref:Le},!0)}async function ae(Le){try{return this._compileSchemaEnv(Le)}catch(ye){if(!(ye instanceof i.default))throw ye;return _e.call(this,ye),await pe.call(this,ye.missingSchema),ae.call(this,Le)}}function _e({missingSchema:Le,missingRef:ye}){if(this.refs[Le])throw new Error(`AnySchema ${Le} is loaded but ${ye} cannot be resolved`)}async function pe(Le){const ye=await Te.call(this,Le);this.refs[Le]||await ee.call(this,ye.$schema),this.refs[Le]||this.addSchema(ye,Le,G)}async function Te(Le){const ye=this._loading[Le];if(ye)return ye;try{return await(this._loading[Le]=V(Le))}finally{delete this._loading[Le]}}}addSchema(U,G,V,Y=this.opts.validateSchema){if(Array.isArray(U)){for(const ae of U)this.addSchema(ae,void 0,V,Y);return this}let ee;if(typeof U=="object"){const{schemaId:ae}=this.opts;if(ee=U[ae],ee!==void 0&&typeof ee!="string")throw new Error(`schema ${ae} must be string`)}return G=(0,u.normalizeId)(G||ee),this._checkUnique(G),this.schemas[G]=this._addSchema(U,V,G,Y,!0),this}addMetaSchema(U,G,V=this.opts.validateSchema){return this.addSchema(U,G,!0,V),this}validateSchema(U,G){if(typeof U=="boolean")return!0;let V;if(V=U.$schema,V!==void 0&&typeof V!="string")throw new Error("$schema must be a string");if(V=V||this.opts.defaultMeta||this.defaultMeta(),!V)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const Y=this.validate(V,U);if(!Y&&G){const ee="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(ee);else throw new Error(ee)}return Y}getSchema(U){let G;for(;typeof(G=C.call(this,U))=="string";)U=G;if(G===void 0){const{schemaId:V}=this.opts,Y=new o.SchemaEnv({schema:{},schemaId:V});if(G=o.resolveSchema.call(this,Y,U),!G)return;this.refs[U]=G}return G.validate||this._compileSchemaEnv(G)}removeSchema(U){if(U instanceof RegExp)return this._removeAllSchemas(this.schemas,U),this._removeAllSchemas(this.refs,U),this;switch(typeof U){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const G=C.call(this,U);return typeof G=="object"&&this._cache.delete(G.schema),delete this.schemas[U],delete this.refs[U],this}case"object":{const G=U;this._cache.delete(G);let V=U[this.opts.schemaId];return V&&(V=(0,u.normalizeId)(V),delete this.schemas[V],delete this.refs[V]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(U){for(const G of U)this.addKeyword(G);return this}addKeyword(U,G){let V;if(typeof U=="string")V=U,typeof G=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),G.keyword=V);else if(typeof U=="object"&&G===void 0){if(G=U,V=G.keyword,Array.isArray(V)&&!V.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(H.call(this,V,G),!G)return(0,c.eachItem)(V,ee=>Q.call(this,ee)),this;ne.call(this,G);const Y={...G,type:(0,l.getJSONTypes)(G.type),schemaType:(0,l.getJSONTypes)(G.schemaType)};return(0,c.eachItem)(V,Y.type.length===0?ee=>Q.call(this,ee,Y):ee=>Y.type.forEach(ae=>Q.call(this,ee,Y,ae))),this}getKeyword(U){const G=this.RULES.all[U];return typeof G=="object"?G.definition:!!G}removeKeyword(U){const{RULES:G}=this;delete G.keywords[U],delete G.all[U];for(const V of G.rules){const Y=V.rules.findIndex(ee=>ee.keyword===U);Y>=0&&V.rules.splice(Y,1)}return this}addFormat(U,G){return typeof G=="string"&&(G=new RegExp(G)),this.formats[U]=G,this}errorsText(U=this.errors,{separator:G=", ",dataVar:V="data"}={}){return!U||U.length===0?"No errors":U.map(Y=>`${V}${Y.instancePath} ${Y.message}`).reduce((Y,ee)=>Y+G+ee)}$dataMetaSchema(U,G){const V=this.RULES.all;U=JSON.parse(JSON.stringify(U));for(const Y of G){const ee=Y.split("/").slice(1);let ae=U;for(const _e of ee)ae=ae[_e];for(const _e in V){const pe=V[_e];if(typeof pe!="object")continue;const{$data:Te}=pe.definition,Le=ae[_e];Te&&Le&&(ae[_e]=ie(Le))}}return U}_removeAllSchemas(U,G){for(const V in U){const Y=U[V];(!G||G.test(V))&&(typeof Y=="string"?delete U[V]:Y&&!Y.meta&&(this._cache.delete(Y.schema),delete U[V]))}}_addSchema(U,G,V,Y=this.opts.validateSchema,ee=this.opts.addUsedSchema){let ae;const{schemaId:_e}=this.opts;if(typeof U=="object")ae=U[_e];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof U!="boolean")throw new Error("schema must be object or boolean")}let pe=this._cache.get(U);if(pe!==void 0)return pe;V=(0,u.normalizeId)(ae||V);const Te=u.getSchemaRefs.call(this,U,V);return pe=new o.SchemaEnv({schema:U,schemaId:_e,meta:G,baseId:V,localRefs:Te}),this._cache.set(pe.schema,pe),ee&&!V.startsWith("#")&&(V&&this._checkUnique(V),this.refs[V]=pe),Y&&this.validateSchema(U,!0),pe}_checkUnique(U){if(this.schemas[U]||this.refs[U])throw new Error(`schema with key or id "${U}" already exists`)}_compileSchemaEnv(U){if(U.meta?this._compileMetaSchema(U):o.compileSchema.call(this,U),!U.validate)throw new Error("ajv implementation error");return U.validate}_compileMetaSchema(U){const G=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,U)}finally{this.opts=G}}}E.ValidationError=r.default,E.MissingRefError=i.default,e.default=E;function T(q,U,G,V="error"){for(const Y in q){const ee=Y;ee in U&&this.logger[V](`${G}: option ${Y}. ${q[ee]}`)}}function C(q){return q=(0,u.normalizeId)(q),this.schemas[q]||this.refs[q]}function I(){const q=this.opts.schemas;if(q)if(Array.isArray(q))this.addSchema(q);else for(const U in q)this.addSchema(q[U],U)}function R(){for(const q in this.opts.formats){const U=this.opts.formats[q];U&&this.addFormat(q,U)}}function N(q){if(Array.isArray(q)){this.addVocabulary(q);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const U in q){const G=q[U];G.keyword||(G.keyword=U),this.addKeyword(G)}}function O(){const q={...this.opts};for(const U of p)delete q[U];return q}const L={log(){},warn(){},error(){}};function B(q){if(q===!1)return L;if(q===void 0)return console;if(q.log&&q.warn&&q.error)return q;throw new Error("logger must implement log, warn and error methods")}const F=/^[a-z_$][a-z0-9_$:-]*$/i;function H(q,U){const{RULES:G}=this;if((0,c.eachItem)(q,V=>{if(G.keywords[V])throw new Error(`Keyword ${V} is already defined`);if(!F.test(V))throw new Error(`Keyword ${V} has invalid name`)}),!!U&&U.$data&&!("code"in U||"validate"in U))throw new Error('$data keyword must have "code" or "validate" function')}function Q(q,U,G){var V;const Y=U==null?void 0:U.post;if(G&&Y)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:ee}=this;let ae=Y?ee.post:ee.rules.find(({type:pe})=>pe===G);if(ae||(ae={type:G,rules:[]},ee.rules.push(ae)),ee.keywords[q]=!0,!U)return;const _e={keyword:q,definition:{...U,type:(0,l.getJSONTypes)(U.type),schemaType:(0,l.getJSONTypes)(U.schemaType)}};U.before?J.call(this,ae,_e,U.before):ae.rules.push(_e),ee.all[q]=_e,(V=U.implements)===null||V===void 0||V.forEach(pe=>this.addKeyword(pe))}function J(q,U,G){const V=q.rules.findIndex(Y=>Y.keyword===G);V>=0?q.rules.splice(V,0,U):(q.rules.push(U),this.logger.warn(`rule ${G} is not defined`))}function ne(q){let{metaSchema:U}=q;U!==void 0&&(q.$data&&this.opts.$data&&(U=ie(U)),q.validateSchema=this.compile(U,!0))}const Z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ie(q){return{anyOf:[q,Z]}}}(uq)),uq}var X6={},Q6={},J6={},cve;function KXt(){if(cve)return J6;cve=1,Object.defineProperty(J6,"__esModule",{value:!0});const e={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return J6.default=e,J6}var Sv={},fve;function XXt(){if(fve)return Sv;fve=1,Object.defineProperty(Sv,"__esModule",{value:!0}),Sv.callRef=Sv.getValidate=void 0;const e=R7(),t=dm(),n=Nr(),r=jx(),i=Woe(),s=wi(),o={keyword:"$ref",schemaType:"string",code(l){const{gen:c,schema:f,it:d}=l,{baseId:h,schemaEnv:p,validateName:m,opts:g,self:v}=d,{root:b}=p;if((f==="#"||f==="#/")&&h===b.baseId)return E();const w=i.resolveRef.call(v,b,h,f);if(w===void 0)throw new e.default(d.opts.uriResolver,h,f);if(w instanceof i.SchemaEnv)return T(w);return C(w);function E(){if(p===b)return u(l,m,p,p.$async);const I=c.scopeValue("root",{ref:b});return u(l,(0,n._)`${I}.validate`,b,b.$async)}function T(I){const R=a(l,I);u(l,R,I,I.$async)}function C(I){const R=c.scopeValue("schema",g.code.source===!0?{ref:I,code:(0,n.stringify)(I)}:{ref:I}),N=c.name("valid"),O=l.subschema({schema:I,dataTypes:[],schemaPath:n.nil,topSchemaRef:R,errSchemaPath:f},N);l.mergeEvaluated(O),l.ok(N)}}};function a(l,c){const{gen:f}=l;return c.validate?f.scopeValue("validate",{ref:c.validate}):(0,n._)`${f.scopeValue("wrapper",{ref:c})}.validate`}Sv.getValidate=a;function u(l,c,f,d){const{gen:h,it:p}=l,{allErrors:m,schemaEnv:g,opts:v}=p,b=v.passContext?r.default.this:n.nil;d?w():E();function w(){if(!g.$async)throw new Error("async schema referenced by sync schema");const I=h.let("valid");h.try(()=>{h.code((0,n._)`await ${(0,t.callValidateCode)(l,c,b)}`),C(c),m||h.assign(I,!0)},R=>{h.if((0,n._)`!(${R} instanceof ${p.ValidationError})`,()=>h.throw(R)),T(R),m||h.assign(I,!1)}),l.ok(I)}function E(){l.result((0,t.callValidateCode)(l,c,b),()=>C(c),()=>T(c))}function T(I){const R=(0,n._)`${I}.errors`;h.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${R} : ${r.default.vErrors}.concat(${R})`),h.assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`)}function C(I){var R;if(!p.opts.unevaluated)return;const N=(R=f==null?void 0:f.validate)===null||R===void 0?void 0:R.evaluated;if(p.props!==!0)if(N&&!N.dynamicProps)N.props!==void 0&&(p.props=s.mergeEvaluated.props(h,N.props,p.props));else{const O=h.var("props",(0,n._)`${I}.evaluated.props`);p.props=s.mergeEvaluated.props(h,O,p.props,n.Name)}if(p.items!==!0)if(N&&!N.dynamicItems)N.items!==void 0&&(p.items=s.mergeEvaluated.items(h,N.items,p.items));else{const O=h.var("items",(0,n._)`${I}.evaluated.items`);p.items=s.mergeEvaluated.items(h,O,p.items,n.Name)}}}return Sv.callRef=u,Sv.default=o,Sv}var dve;function QXt(){if(dve)return Q6;dve=1,Object.defineProperty(Q6,"__esModule",{value:!0});const e=KXt(),t=XXt(),n=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",e.default,t.default];return Q6.default=n,Q6}var Z6={},eM={},hve;function JXt(){if(hve)return eM;hve=1,Object.defineProperty(eM,"__esModule",{value:!0});const e=Nr(),t=e.operators,n={maximum:{okStr:"<=",ok:t.LTE,fail:t.GT},minimum:{okStr:">=",ok:t.GTE,fail:t.LT},exclusiveMaximum:{okStr:"<",ok:t.LT,fail:t.GTE},exclusiveMinimum:{okStr:">",ok:t.GT,fail:t.LTE}},r={message:({keyword:s,schemaCode:o})=>(0,e.str)`must be ${n[s].okStr} ${o}`,params:({keyword:s,schemaCode:o})=>(0,e._)`{comparison: ${n[s].okStr}, limit: ${o}}`},i={keyword:Object.keys(n),type:"number",schemaType:"number",$data:!0,error:r,code(s){const{keyword:o,data:a,schemaCode:u}=s;s.fail$data((0,e._)`${a} ${n[o].fail} ${u} || isNaN(${a})`)}};return eM.default=i,eM}var tM={},pve;function ZXt(){if(pve)return tM;pve=1,Object.defineProperty(tM,"__esModule",{value:!0});const e=Nr(),n={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must be multiple of ${r}`,params:({schemaCode:r})=>(0,e._)`{multipleOf: ${r}}`},code(r){const{gen:i,data:s,schemaCode:o,it:a}=r,u=a.opts.multipleOfPrecision,l=i.let("res"),c=u?(0,e._)`Math.abs(Math.round(${l}) - ${l}) > 1e-${u}`:(0,e._)`${l} !== parseInt(${l})`;r.fail$data((0,e._)`(${o} === 0 || (${l} = ${s}/${o}, ${c}))`)}};return tM.default=n,tM}var nM={},rM={},mve;function eQt(){if(mve)return rM;mve=1,Object.defineProperty(rM,"__esModule",{value:!0});function e(t){const n=t.length;let r=0,i=0,s;for(;i<n;)r++,s=t.charCodeAt(i++),s>=55296&&s<=56319&&i<n&&(s=t.charCodeAt(i),(s&64512)===56320&&i++);return r}return rM.default=e,e.code='require("ajv/dist/runtime/ucs2length").default',rM}var gve;function tQt(){if(gve)return nM;gve=1,Object.defineProperty(nM,"__esModule",{value:!0});const e=Nr(),t=wi(),n=eQt(),i={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:s,schemaCode:o}){const a=s==="maxLength"?"more":"fewer";return(0,e.str)`must NOT have ${a} than ${o} characters`},params:({schemaCode:s})=>(0,e._)`{limit: ${s}}`},code(s){const{keyword:o,data:a,schemaCode:u,it:l}=s,c=o==="maxLength"?e.operators.GT:e.operators.LT,f=l.opts.unicode===!1?(0,e._)`${a}.length`:(0,e._)`${(0,t.useFunc)(s.gen,n.default)}(${a})`;s.fail$data((0,e._)`${f} ${c} ${u}`)}};return nM.default=i,nM}var iM={},yve;function nQt(){if(yve)return iM;yve=1,Object.defineProperty(iM,"__esModule",{value:!0});const e=dm(),t=Nr(),r={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:i})=>(0,t.str)`must match pattern "${i}"`,params:({schemaCode:i})=>(0,t._)`{pattern: ${i}}`},code(i){const{data:s,$data:o,schema:a,schemaCode:u,it:l}=i,c=l.opts.unicodeRegExp?"u":"",f=o?(0,t._)`(new RegExp(${u}, ${c}))`:(0,e.usePattern)(i,a);i.fail$data((0,t._)`!${f}.test(${s})`)}};return iM.default=r,iM}var sM={},vve;function rQt(){if(vve)return sM;vve=1,Object.defineProperty(sM,"__esModule",{value:!0});const e=Nr(),n={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxProperties"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} properties`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxProperties"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`Object.keys(${s}).length ${a} ${o}`)}};return sM.default=n,sM}var oM={},bve;function iQt(){if(bve)return oM;bve=1,Object.defineProperty(oM,"__esModule",{value:!0});const e=dm(),t=Nr(),n=wi(),i={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:s}})=>(0,t.str)`must have required property '${s}'`,params:({params:{missingProperty:s}})=>(0,t._)`{missingProperty: ${s}}`},code(s){const{gen:o,schema:a,schemaCode:u,data:l,$data:c,it:f}=s,{opts:d}=f;if(!c&&a.length===0)return;const h=a.length>=d.loopRequired;if(f.allErrors?p():m(),d.strictRequired){const b=s.parentSchema.properties,{definedProperties:w}=s.it;for(const E of a)if((b==null?void 0:b[E])===void 0&&!w.has(E)){const T=f.schemaEnv.baseId+f.errSchemaPath,C=`required property "${E}" is not defined at "${T}" (strictRequired)`;(0,n.checkStrictMode)(f,C,f.opts.strictRequired)}}function p(){if(h||c)s.block$data(t.nil,g);else for(const b of a)(0,e.checkReportMissingProp)(s,b)}function m(){const b=o.let("missing");if(h||c){const w=o.let("valid",!0);s.block$data(w,()=>v(b,w)),s.ok(w)}else o.if((0,e.checkMissingProp)(s,a,b)),(0,e.reportMissingProp)(s,b),o.else()}function g(){o.forOf("prop",u,b=>{s.setParams({missingProperty:b}),o.if((0,e.noPropertyInData)(o,l,b,d.ownProperties),()=>s.error())})}function v(b,w){s.setParams({missingProperty:b}),o.forOf(b,u,()=>{o.assign(w,(0,e.propertyInData)(o,l,b,d.ownProperties)),o.if((0,t.not)(w),()=>{s.error(),o.break()})},t.nil)}}};return oM.default=i,oM}var aM={},xve;function sQt(){if(xve)return aM;xve=1,Object.defineProperty(aM,"__esModule",{value:!0});const e=Nr(),n={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:r,schemaCode:i}){const s=r==="maxItems"?"more":"fewer";return(0,e.str)`must NOT have ${s} than ${i} items`},params:({schemaCode:r})=>(0,e._)`{limit: ${r}}`},code(r){const{keyword:i,data:s,schemaCode:o}=r,a=i==="maxItems"?e.operators.GT:e.operators.LT;r.fail$data((0,e._)`${s}.length ${a} ${o}`)}};return aM.default=n,aM}var uM={},lM={},_ve;function Goe(){if(_ve)return lM;_ve=1,Object.defineProperty(lM,"__esModule",{value:!0});const e=_Z();return e.code='require("ajv/dist/runtime/equal").default',lM.default=e,lM}var wve;function oQt(){if(wve)return uM;wve=1,Object.defineProperty(uM,"__esModule",{value:!0});const e=C8(),t=Nr(),n=wi(),r=Goe(),s={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:o,j:a}})=>(0,t.str)`must NOT have duplicate items (items ## ${a} and ${o} are identical)`,params:({params:{i:o,j:a}})=>(0,t._)`{i: ${o}, j: ${a}}`},code(o){const{gen:a,data:u,$data:l,schema:c,parentSchema:f,schemaCode:d,it:h}=o;if(!l&&!c)return;const p=a.let("valid"),m=f.items?(0,e.getSchemaTypes)(f.items):[];o.block$data(p,g,(0,t._)`${d} === false`),o.ok(p);function g(){const E=a.let("i",(0,t._)`${u}.length`),T=a.let("j");o.setParams({i:E,j:T}),a.assign(p,!0),a.if((0,t._)`${E} > 1`,()=>(v()?b:w)(E,T))}function v(){return m.length>0&&!m.some(E=>E==="object"||E==="array")}function b(E,T){const C=a.name("item"),I=(0,e.checkDataTypes)(m,C,h.opts.strictNumbers,e.DataType.Wrong),R=a.const("indices",(0,t._)`{}`);a.for((0,t._)`;${E}--;`,()=>{a.let(C,(0,t._)`${u}[${E}]`),a.if(I,(0,t._)`continue`),m.length>1&&a.if((0,t._)`typeof ${C} == "string"`,(0,t._)`${C} += "_"`),a.if((0,t._)`typeof ${R}[${C}] == "number"`,()=>{a.assign(T,(0,t._)`${R}[${C}]`),o.error(),a.assign(p,!1).break()}).code((0,t._)`${R}[${C}] = ${E}`)})}function w(E,T){const C=(0,n.useFunc)(a,r.default),I=a.name("outer");a.label(I).for((0,t._)`;${E}--;`,()=>a.for((0,t._)`${T} = ${E}; ${T}--;`,()=>a.if((0,t._)`${C}(${u}[${E}], ${u}[${T}])`,()=>{o.error(),a.assign(p,!1).break(I)})))}}};return uM.default=s,uM}var cM={},Eve;function aQt(){if(Eve)return cM;Eve=1,Object.defineProperty(cM,"__esModule",{value:!0});const e=Nr(),t=wi(),n=Goe(),i={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:s})=>(0,e._)`{allowedValue: ${s}}`},code(s){const{gen:o,data:a,$data:u,schemaCode:l,schema:c}=s;u||c&&typeof c=="object"?s.fail$data((0,e._)`!${(0,t.useFunc)(o,n.default)}(${a}, ${l})`):s.fail((0,e._)`${c} !== ${a}`)}};return cM.default=i,cM}var fM={},Tve;function uQt(){if(Tve)return fM;Tve=1,Object.defineProperty(fM,"__esModule",{value:!0});const e=Nr(),t=wi(),n=Goe(),i={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:s})=>(0,e._)`{allowedValues: ${s}}`},code(s){const{gen:o,data:a,$data:u,schema:l,schemaCode:c,it:f}=s;if(!u&&l.length===0)throw new Error("enum must have non-empty array");const d=l.length>=f.opts.loopEnum;let h;const p=()=>h??(h=(0,t.useFunc)(o,n.default));let m;if(d||u)m=o.let("valid"),s.block$data(m,g);else{if(!Array.isArray(l))throw new Error("ajv implementation error");const b=o.const("vSchema",c);m=(0,e.or)(...l.map((w,E)=>v(b,E)))}s.pass(m);function g(){o.assign(m,!1),o.forOf("v",c,b=>o.if((0,e._)`${p()}(${a}, ${b})`,()=>o.assign(m,!0).break()))}function v(b,w){const E=l[w];return typeof E=="object"&&E!==null?(0,e._)`${p()}(${a}, ${b}[${w}])`:(0,e._)`${a} === ${E}`}}};return fM.default=i,fM}var Sve;function lQt(){if(Sve)return Z6;Sve=1,Object.defineProperty(Z6,"__esModule",{value:!0});const e=JXt(),t=ZXt(),n=tQt(),r=nQt(),i=rQt(),s=iQt(),o=sQt(),a=oQt(),u=aQt(),l=uQt(),c=[e.default,t.default,n.default,r.default,i.default,s.default,o.default,a.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,l.default];return Z6.default=c,Z6}var dM={},JS={},Cve;function P5e(){if(Cve)return JS;Cve=1,Object.defineProperty(JS,"__esModule",{value:!0}),JS.validateAdditionalItems=void 0;const e=Nr(),t=wi(),r={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:s}})=>(0,e.str)`must NOT have more than ${s} items`,params:({params:{len:s}})=>(0,e._)`{limit: ${s}}`},code(s){const{parentSchema:o,it:a}=s,{items:u}=o;if(!Array.isArray(u)){(0,t.checkStrictMode)(a,'"additionalItems" is ignored when "items" is not an array of schemas');return}i(s,u)}};function i(s,o){const{gen:a,schema:u,data:l,keyword:c,it:f}=s;f.items=!0;const d=a.const("len",(0,e._)`${l}.length`);if(u===!1)s.setParams({len:o.length}),s.pass((0,e._)`${d} <= ${o.length}`);else if(typeof u=="object"&&!(0,t.alwaysValidSchema)(f,u)){const p=a.var("valid",(0,e._)`${d} <= ${o.length}`);a.if((0,e.not)(p),()=>h(p)),s.ok(p)}function h(p){a.forRange("i",o.length,d,m=>{s.subschema({keyword:c,dataProp:m,dataPropType:t.Type.Num},p),f.allErrors||a.if((0,e.not)(p),()=>a.break())})}}return JS.validateAdditionalItems=i,JS.default=r,JS}var hM={},ZS={},Ave;function O5e(){if(Ave)return ZS;Ave=1,Object.defineProperty(ZS,"__esModule",{value:!0}),ZS.validateTuple=void 0;const e=Nr(),t=wi(),n=dm(),r={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(s){const{schema:o,it:a}=s;if(Array.isArray(o))return i(s,"additionalItems",o);a.items=!0,!(0,t.alwaysValidSchema)(a,o)&&s.ok((0,n.validateArray)(s))}};function i(s,o,a=s.schema){const{gen:u,parentSchema:l,data:c,keyword:f,it:d}=s;m(l),d.opts.unevaluated&&a.length&&d.items!==!0&&(d.items=t.mergeEvaluated.items(u,a.length,d.items));const h=u.name("valid"),p=u.const("len",(0,e._)`${c}.length`);a.forEach((g,v)=>{(0,t.alwaysValidSchema)(d,g)||(u.if((0,e._)`${p} > ${v}`,()=>s.subschema({keyword:f,schemaProp:v,dataProp:v},h)),s.ok(h))});function m(g){const{opts:v,errSchemaPath:b}=d,w=a.length,E=w===g.minItems&&(w===g.maxItems||g[o]===!1);if(v.strictTuples&&!E){const T=`"${f}" is ${w}-tuple, but minItems or maxItems/${o} are not specified or different at path "${b}"`;(0,t.checkStrictMode)(d,T,v.strictTuples)}}}return ZS.validateTuple=i,ZS.default=r,ZS}var Ive;function cQt(){if(Ive)return hM;Ive=1,Object.defineProperty(hM,"__esModule",{value:!0});const e=O5e(),t={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:n=>(0,e.validateTuple)(n,"items")};return hM.default=t,hM}var pM={},kve;function fQt(){if(kve)return pM;kve=1,Object.defineProperty(pM,"__esModule",{value:!0});const e=Nr(),t=wi(),n=dm(),r=P5e(),s={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:o}})=>(0,e.str)`must NOT have more than ${o} items`,params:({params:{len:o}})=>(0,e._)`{limit: ${o}}`},code(o){const{schema:a,parentSchema:u,it:l}=o,{prefixItems:c}=u;l.items=!0,!(0,t.alwaysValidSchema)(l,a)&&(c?(0,r.validateAdditionalItems)(o,c):o.ok((0,n.validateArray)(o)))}};return pM.default=s,pM}var mM={},Rve;function dQt(){if(Rve)return mM;Rve=1,Object.defineProperty(mM,"__esModule",{value:!0});const e=Nr(),t=wi(),r={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:i,max:s}})=>s===void 0?(0,e.str)`must contain at least ${i} valid item(s)`:(0,e.str)`must contain at least ${i} and no more than ${s} valid item(s)`,params:({params:{min:i,max:s}})=>s===void 0?(0,e._)`{minContains: ${i}}`:(0,e._)`{minContains: ${i}, maxContains: ${s}}`},code(i){const{gen:s,schema:o,parentSchema:a,data:u,it:l}=i;let c,f;const{minContains:d,maxContains:h}=a;l.opts.next?(c=d===void 0?1:d,f=h):c=1;const p=s.const("len",(0,e._)`${u}.length`);if(i.setParams({min:c,max:f}),f===void 0&&c===0){(0,t.checkStrictMode)(l,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(f!==void 0&&c>f){(0,t.checkStrictMode)(l,'"minContains" > "maxContains" is always invalid'),i.fail();return}if((0,t.alwaysValidSchema)(l,o)){let w=(0,e._)`${p} >= ${c}`;f!==void 0&&(w=(0,e._)`${w} && ${p} <= ${f}`),i.pass(w);return}l.items=!0;const m=s.name("valid");f===void 0&&c===1?v(m,()=>s.if(m,()=>s.break())):c===0?(s.let(m,!0),f!==void 0&&s.if((0,e._)`${u}.length > 0`,g)):(s.let(m,!1),g()),i.result(m,()=>i.reset());function g(){const w=s.name("_valid"),E=s.let("count",0);v(w,()=>s.if(w,()=>b(E)))}function v(w,E){s.forRange("i",0,p,T=>{i.subschema({keyword:"contains",dataProp:T,dataPropType:t.Type.Num,compositeRule:!0},w),E()})}function b(w){s.code((0,e._)`${w}++`),f===void 0?s.if((0,e._)`${w} >= ${c}`,()=>s.assign(m,!0).break()):(s.if((0,e._)`${w} > ${f}`,()=>s.assign(m,!1).break()),c===1?s.assign(m,!0):s.if((0,e._)`${w} >= ${c}`,()=>s.assign(m,!0)))}}};return mM.default=r,mM}var yq={},Dve;function hQt(){return Dve||(Dve=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Nr(),n=wi(),r=dm();e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const v of m)(0,r.checkReportMissingProp)(u,v)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i}(yq)),yq}var gM={},Nve;function pQt(){if(Nve)return gM;Nve=1,Object.defineProperty(gM,"__esModule",{value:!0});const e=Nr(),t=wi(),r={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:i})=>(0,e._)`{propertyName: ${i.propertyName}}`},code(i){const{gen:s,schema:o,data:a,it:u}=i;if((0,t.alwaysValidSchema)(u,o))return;const l=s.name("valid");s.forIn("key",a,c=>{i.setParams({propertyName:c}),i.subschema({keyword:"propertyNames",data:c,dataTypes:["string"],propertyName:c,compositeRule:!0},l),s.if((0,e.not)(l),()=>{i.error(!0),u.allErrors||s.break()})}),i.ok(l)}};return gM.default=r,gM}var yM={},Pve;function M5e(){if(Pve)return yM;Pve=1,Object.defineProperty(yM,"__esModule",{value:!0});const e=dm(),t=Nr(),n=jx(),r=wi(),s={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:o})=>(0,t._)`{additionalProperty: ${o.additionalProperty}}`},code(o){const{gen:a,schema:u,parentSchema:l,data:c,errsCount:f,it:d}=o;if(!f)throw new Error("ajv implementation error");const{allErrors:h,opts:p}=d;if(d.props=!0,p.removeAdditional!=="all"&&(0,r.alwaysValidSchema)(d,u))return;const m=(0,e.allSchemaProperties)(l.properties),g=(0,e.allSchemaProperties)(l.patternProperties);v(),o.ok((0,t._)`${f} === ${n.default.errors}`);function v(){a.forIn("key",c,C=>{!m.length&&!g.length?E(C):a.if(b(C),()=>E(C))})}function b(C){let I;if(m.length>8){const R=(0,r.schemaRefOrVal)(d,l.properties,"properties");I=(0,e.isOwnProperty)(a,R,C)}else m.length?I=(0,t.or)(...m.map(R=>(0,t._)`${C} === ${R}`)):I=t.nil;return g.length&&(I=(0,t.or)(I,...g.map(R=>(0,t._)`${(0,e.usePattern)(o,R)}.test(${C})`))),(0,t.not)(I)}function w(C){a.code((0,t._)`delete ${c}[${C}]`)}function E(C){if(p.removeAdditional==="all"||p.removeAdditional&&u===!1){w(C);return}if(u===!1){o.setParams({additionalProperty:C}),o.error(),h||a.break();return}if(typeof u=="object"&&!(0,r.alwaysValidSchema)(d,u)){const I=a.name("valid");p.removeAdditional==="failing"?(T(C,I,!1),a.if((0,t.not)(I),()=>{o.reset(),w(C)})):(T(C,I),h||a.if((0,t.not)(I),()=>a.break()))}}function T(C,I,R){const N={keyword:"additionalProperties",dataProp:C,dataPropType:r.Type.Str};R===!1&&Object.assign(N,{compositeRule:!0,createErrors:!1,allErrors:!1}),o.subschema(N,I)}}};return yM.default=s,yM}var vM={},Ove;function mQt(){if(Ove)return vM;Ove=1,Object.defineProperty(vM,"__esModule",{value:!0});const e=k7(),t=dm(),n=wi(),r=M5e(),i={keyword:"properties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,parentSchema:u,data:l,it:c}=s;c.opts.removeAdditional==="all"&&u.additionalProperties===void 0&&r.default.code(new e.KeywordCxt(c,r.default,"additionalProperties"));const f=(0,t.allSchemaProperties)(a);for(const g of f)c.definedProperties.add(g);c.opts.unevaluated&&f.length&&c.props!==!0&&(c.props=n.mergeEvaluated.props(o,(0,n.toHash)(f),c.props));const d=f.filter(g=>!(0,n.alwaysValidSchema)(c,a[g]));if(d.length===0)return;const h=o.name("valid");for(const g of d)p(g)?m(g):(o.if((0,t.propertyInData)(o,l,g,c.opts.ownProperties)),m(g),c.allErrors||o.else().var(h,!0),o.endIf()),s.it.definedProperties.add(g),s.ok(h);function p(g){return c.opts.useDefaults&&!c.compositeRule&&a[g].default!==void 0}function m(g){s.subschema({keyword:"properties",schemaProp:g,dataProp:g},h)}}};return vM.default=i,vM}var bM={},Mve;function gQt(){if(Mve)return bM;Mve=1,Object.defineProperty(bM,"__esModule",{value:!0});const e=dm(),t=Nr(),n=wi(),r=wi(),i={keyword:"patternProperties",type:"object",schemaType:"object",code(s){const{gen:o,schema:a,data:u,parentSchema:l,it:c}=s,{opts:f}=c,d=(0,e.allSchemaProperties)(a),h=d.filter(E=>(0,n.alwaysValidSchema)(c,a[E]));if(d.length===0||h.length===d.length&&(!c.opts.unevaluated||c.props===!0))return;const p=f.strictSchema&&!f.allowMatchingProperties&&l.properties,m=o.name("valid");c.props!==!0&&!(c.props instanceof t.Name)&&(c.props=(0,r.evaluatedPropsToName)(o,c.props));const{props:g}=c;v();function v(){for(const E of d)p&&b(E),c.allErrors?w(E):(o.var(m,!0),w(E),o.if(m))}function b(E){for(const T in p)new RegExp(E).test(T)&&(0,n.checkStrictMode)(c,`property ${T} matches pattern ${E} (use allowMatchingProperties)`)}function w(E){o.forIn("key",u,T=>{o.if((0,t._)`${(0,e.usePattern)(s,E)}.test(${T})`,()=>{const C=h.includes(E);C||s.subschema({keyword:"patternProperties",schemaProp:E,dataProp:T,dataPropType:r.Type.Str},m),c.opts.unevaluated&&g!==!0?o.assign((0,t._)`${g}[${T}]`,!0):!C&&!c.allErrors&&o.if((0,t.not)(m),()=>o.break())})})}}};return bM.default=i,bM}var xM={},Lve;function yQt(){if(Lve)return xM;Lve=1,Object.defineProperty(xM,"__esModule",{value:!0});const e=wi(),t={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(n){const{gen:r,schema:i,it:s}=n;if((0,e.alwaysValidSchema)(s,i)){n.fail();return}const o=r.name("valid");n.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),n.failResult(o,()=>n.reset(),()=>n.error())},error:{message:"must NOT be valid"}};return xM.default=t,xM}var _M={},$ve;function vQt(){if($ve)return _M;$ve=1,Object.defineProperty(_M,"__esModule",{value:!0});const t={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:dm().validateUnion,error:{message:"must match a schema in anyOf"}};return _M.default=t,_M}var wM={},Fve;function bQt(){if(Fve)return wM;Fve=1,Object.defineProperty(wM,"__esModule",{value:!0});const e=Nr(),t=wi(),r={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:i})=>(0,e._)`{passingSchemas: ${i.passing}}`},code(i){const{gen:s,schema:o,parentSchema:a,it:u}=i;if(!Array.isArray(o))throw new Error("ajv implementation error");if(u.opts.discriminator&&a.discriminator)return;const l=o,c=s.let("valid",!1),f=s.let("passing",null),d=s.name("_valid");i.setParams({passing:f}),s.block(h),i.result(c,()=>i.reset(),()=>i.error(!0));function h(){l.forEach((p,m)=>{let g;(0,t.alwaysValidSchema)(u,p)?s.var(d,!0):g=i.subschema({keyword:"oneOf",schemaProp:m,compositeRule:!0},d),m>0&&s.if((0,e._)`${d} && ${c}`).assign(c,!1).assign(f,(0,e._)`[${f}, ${m}]`).else(),s.if(d,()=>{s.assign(c,!0),s.assign(f,m),g&&i.mergeEvaluated(g,e.Name)})})}}};return wM.default=r,wM}var EM={},Bve;function xQt(){if(Bve)return EM;Bve=1,Object.defineProperty(EM,"__esModule",{value:!0});const e=wi(),t={keyword:"allOf",schemaType:"array",code(n){const{gen:r,schema:i,it:s}=n;if(!Array.isArray(i))throw new Error("ajv implementation error");const o=r.name("valid");i.forEach((a,u)=>{if((0,e.alwaysValidSchema)(s,a))return;const l=n.subschema({keyword:"allOf",schemaProp:u},o);n.ok(o),n.mergeEvaluated(l)})}};return EM.default=t,EM}var TM={},jve;function _Qt(){if(jve)return TM;jve=1,Object.defineProperty(TM,"__esModule",{value:!0});const e=Nr(),t=wi(),r={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:s})=>(0,e.str)`must match "${s.ifClause}" schema`,params:({params:s})=>(0,e._)`{failingKeyword: ${s.ifClause}}`},code(s){const{gen:o,parentSchema:a,it:u}=s;a.then===void 0&&a.else===void 0&&(0,t.checkStrictMode)(u,'"if" without "then" and "else" is ignored');const l=i(u,"then"),c=i(u,"else");if(!l&&!c)return;const f=o.let("valid",!0),d=o.name("_valid");if(h(),s.reset(),l&&c){const m=o.let("ifClause");s.setParams({ifClause:m}),o.if(d,p("then",m),p("else",m))}else l?o.if(d,p("then")):o.if((0,e.not)(d),p("else"));s.pass(f,()=>s.error(!0));function h(){const m=s.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);s.mergeEvaluated(m)}function p(m,g){return()=>{const v=s.subschema({keyword:m},d);o.assign(f,d),s.mergeValidEvaluated(v,f),g?o.assign(g,(0,e._)`${m}`):s.setParams({ifClause:m})}}}};function i(s,o){const a=s.schema[o];return a!==void 0&&!(0,t.alwaysValidSchema)(s,a)}return TM.default=r,TM}var SM={},Uve;function wQt(){if(Uve)return SM;Uve=1,Object.defineProperty(SM,"__esModule",{value:!0});const e=wi(),t={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:n,parentSchema:r,it:i}){r.if===void 0&&(0,e.checkStrictMode)(i,`"${n}" without "if" is ignored`)}};return SM.default=t,SM}var zve;function EQt(){if(zve)return dM;zve=1,Object.defineProperty(dM,"__esModule",{value:!0});const e=P5e(),t=cQt(),n=O5e(),r=fQt(),i=dQt(),s=hQt(),o=pQt(),a=M5e(),u=mQt(),l=gQt(),c=yQt(),f=vQt(),d=bQt(),h=xQt(),p=_Qt(),m=wQt();function g(v=!1){const b=[c.default,f.default,d.default,h.default,p.default,m.default,o.default,a.default,s.default,u.default,l.default];return v?b.push(t.default,r.default):b.push(e.default,n.default),b.push(i.default),b}return dM.default=g,dM}var CM={},AM={},Vve;function TQt(){if(Vve)return AM;Vve=1,Object.defineProperty(AM,"__esModule",{value:!0});const e=Nr(),n={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:r})=>(0,e.str)`must match format "${r}"`,params:({schemaCode:r})=>(0,e._)`{format: ${r}}`},code(r,i){const{gen:s,data:o,$data:a,schema:u,schemaCode:l,it:c}=r,{opts:f,errSchemaPath:d,schemaEnv:h,self:p}=c;if(!f.validateFormats)return;a?m():g();function m(){const v=s.scopeValue("formats",{ref:p.formats,code:f.code.formats}),b=s.const("fDef",(0,e._)`${v}[${l}]`),w=s.let("fType"),E=s.let("format");s.if((0,e._)`typeof ${b} == "object" && !(${b} instanceof RegExp)`,()=>s.assign(w,(0,e._)`${b}.type || "string"`).assign(E,(0,e._)`${b}.validate`),()=>s.assign(w,(0,e._)`"string"`).assign(E,b)),r.fail$data((0,e.or)(T(),C()));function T(){return f.strictSchema===!1?e.nil:(0,e._)`${l} && !${E}`}function C(){const I=h.$async?(0,e._)`(${b}.async ? await ${E}(${o}) : ${E}(${o}))`:(0,e._)`${E}(${o})`,R=(0,e._)`(typeof ${E} == "function" ? ${I} : ${E}.test(${o}))`;return(0,e._)`${E} && ${E} !== true && ${w} === ${i} && !${R}`}}function g(){const v=p.formats[u];if(!v){T();return}if(v===!0)return;const[b,w,E]=C(v);b===i&&r.pass(I());function T(){if(f.strictSchema===!1){p.logger.warn(R());return}throw new Error(R());function R(){return`unknown format "${u}" ignored in schema at path "${d}"`}}function C(R){const N=R instanceof RegExp?(0,e.regexpCode)(R):f.code.formats?(0,e._)`${f.code.formats}${(0,e.getProperty)(u)}`:void 0,O=s.scopeValue("formats",{key:u,ref:R,code:N});return typeof R=="object"&&!(R instanceof RegExp)?[R.type||"string",R.validate,(0,e._)`${O}.validate`]:["string",R,O]}function I(){if(typeof v=="object"&&!(v instanceof RegExp)&&v.async){if(!h.$async)throw new Error("async format in sync schema");return(0,e._)`await ${E}(${o})`}return typeof w=="function"?(0,e._)`${E}(${o})`:(0,e._)`${E}.test(${o})`}}}};return AM.default=n,AM}var Hve;function SQt(){if(Hve)return CM;Hve=1,Object.defineProperty(CM,"__esModule",{value:!0});const t=[TQt().default];return CM.default=t,CM}var z_={},qve;function CQt(){return qve||(qve=1,Object.defineProperty(z_,"__esModule",{value:!0}),z_.contentVocabulary=z_.metadataVocabulary=void 0,z_.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],z_.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),z_}var Wve;function AQt(){if(Wve)return X6;Wve=1,Object.defineProperty(X6,"__esModule",{value:!0});const e=QXt(),t=lQt(),n=EQt(),r=SQt(),i=CQt(),s=[e.default,t.default,(0,n.default)(),r.default,i.metadataVocabulary,i.contentVocabulary];return X6.default=s,X6}var IM={},OR={},Gve;function IQt(){if(Gve)return OR;Gve=1,Object.defineProperty(OR,"__esModule",{value:!0}),OR.DiscrError=void 0;var e;return function(t){t.Tag="tag",t.Mapping="mapping"}(e||(OR.DiscrError=e={})),OR}var Yve;function kQt(){if(Yve)return IM;Yve=1,Object.defineProperty(IM,"__esModule",{value:!0});const e=Nr(),t=IQt(),n=Woe(),r=R7(),i=wi(),o={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:a,tagName:u}})=>a===t.DiscrError.Tag?`tag "${u}" must be string`:`value of tag "${u}" must be in oneOf`,params:({params:{discrError:a,tag:u,tagName:l}})=>(0,e._)`{error: ${a}, tag: ${l}, tagValue: ${u}}`},code(a){const{gen:u,data:l,schema:c,parentSchema:f,it:d}=a,{oneOf:h}=f;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const p=c.propertyName;if(typeof p!="string")throw new Error("discriminator: requires propertyName");if(c.mapping)throw new Error("discriminator: mapping is not supported");if(!h)throw new Error("discriminator: requires oneOf keyword");const m=u.let("valid",!1),g=u.const("tag",(0,e._)`${l}${(0,e.getProperty)(p)}`);u.if((0,e._)`typeof ${g} == "string"`,()=>v(),()=>a.error(!1,{discrError:t.DiscrError.Tag,tag:g,tagName:p})),a.ok(m);function v(){const E=w();u.if(!1);for(const T in E)u.elseIf((0,e._)`${g} === ${T}`),u.assign(m,b(E[T]));u.else(),a.error(!1,{discrError:t.DiscrError.Mapping,tag:g,tagName:p}),u.endIf()}function b(E){const T=u.name("valid"),C=a.subschema({keyword:"oneOf",schemaProp:E},T);return a.mergeEvaluated(C,e.Name),T}function w(){var E;const T={},C=R(f);let I=!0;for(let L=0;L<h.length;L++){let B=h[L];if(B!=null&&B.$ref&&!(0,i.schemaHasRulesButRef)(B,d.self.RULES)){const H=B.$ref;if(B=n.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,H),B instanceof n.SchemaEnv&&(B=B.schema),B===void 0)throw new r.default(d.opts.uriResolver,d.baseId,H)}const F=(E=B==null?void 0:B.properties)===null||E===void 0?void 0:E[p];if(typeof F!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${p}"`);I=I&&(C||R(B)),N(F,L)}if(!I)throw new Error(`discriminator: "${p}" must be required`);return T;function R({required:L}){return Array.isArray(L)&&L.includes(p)}function N(L,B){if(L.const)O(L.const,B);else if(L.enum)for(const F of L.enum)O(F,B);else throw new Error(`discriminator: "properties/${p}" must have "const" or "enum"`)}function O(L,B){if(typeof L!="string"||L in T)throw new Error(`discriminator: "${p}" values must be unique strings`);T[L]=B}}}};return IM.default=o,IM}const RQt="http://json-schema.org/draft-07/schema#",DQt="http://json-schema.org/draft-07/schema#",NQt="Core schema meta-schema",PQt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},OQt=["object","boolean"],MQt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},LQt={$schema:RQt,$id:DQt,title:NQt,definitions:PQt,type:OQt,properties:MQt,default:!0};var Kve;function $Qt(){return Kve||(Kve=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=YXt(),r=AQt(),i=kQt(),s=LQt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=k7();Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Nr();Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=qoe();Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=R7();Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})}(q6,q6.exports)),q6.exports}var FQt=$Qt();const Yoe=yh(FQt),BQt="#/definitions/StudyConfig",jQt="http://json-schema.org/draft-07/schema#",UQt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc6/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc6/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"StudyConfig":{"additionalProperties":false,"description":"The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\\n\\n```js { \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc6/src/parser/StudyConfigSchema.json\\", \\"studyMetadata\\": {  ... }, \\"uiConfig\\": {  ... }, \\"components\\": {  ... }, \\"sequence\\": {  ... } } ```\\n\\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\\n\\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"importedLibraries":{"description":"A list of libraries that are used in the study. This is used to import external libraries into the study. Library names are valid namespaces to be used later.","items":{"type":"string"},"type":"array"},"sequence":{"$ref":"#/definitions/ComponentBlock","description":"The order of the components in the study. This might include some randomness."},"studyMetadata":{"$ref":"#/definitions/StudyMetadata","description":"The metadata for the study. This is used to identify the study and version in the data file."},"uiConfig":{"$ref":"#/definitions/UIConfig","description":"The UI configuration for the study. This is used to configure the UI of the app."}},"required":["$schema","studyMetadata","uiConfig","components","sequence"],"type":"object"},"StudyMetadata":{"additionalProperties":false,"description":"The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\\n\\n```js \\"studyMetadata\\" : { \\"title\\": \\"My New Study\\", \\"version\\": \\"pilot\\", \\"authors\\": [  \\"Jane Doe\\",  \\"John Doe\\" ], \\"date\\": \\"2024-04-01\\", \\"description\\": \\"This study is meant to test your ability.\\", \\"organizations\\": [  \\"The reVISit Team\\",  \\"The Other Team\\" ] } ```","properties":{"authors":{"description":"The authors of your study.","items":{"type":"string"},"type":"array"},"date":{"description":"The date of your study, may be useful for the researcher.","type":"string"},"description":{"description":"The description of your study, shown on the landing page.","type":"string"},"organizations":{"description":"The organizations that are associated with your study.","items":{"type":"string"},"type":"array"},"title":{"description":"The title of your study, shown on the landing page.","type":"string"},"version":{"description":"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.","type":"string"}},"required":["title","version","authors","date","description","organizations"],"type":"object"},"UIConfig":{"additionalProperties":false,"description":"The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ \\"contactEmail\\": \\"contact@revisit.dev\\", \\"helpTextPath\\": \\"<study-name>/assets/help.md\\", \\"logoPath\\": \\"<study-name>/assets/logo.jpg\\", \\"withProgressBar\\": true, \\"autoDownloadStudy\\": true \\"autoDownloadTime\\": 5000, \\"studyEndMsg\\": \\"Thank you for completing this study. You\'re the best!\\", \\"sidebar\\": true, \\"windowEventDebounceTime\\": 500, \\"urlParticipantIdParam\\": \\"PROLIFIC_ID\\", \\"numSequences\\": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)","properties":{"autoDownloadStudy":{"description":"Controls whether the study data is automatically downloaded at the end of the study.","type":"boolean"},"autoDownloadTime":{"description":"The time in milliseconds to wait before automatically downloading the study data.","type":"number"},"contactEmail":{"description":"The email address that used during the study if a participant clicks contact.","type":"string"},"enumerateQuestions":{"description":"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.","type":"boolean"},"helpTextPath":{"description":"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.","type":"string"},"logoPath":{"description":"The path to the logo image. This is displayed on the landing page and the header.","type":"string"},"nextOnEnter":{"description":"Whether enter key should move to the next question. Defaults to false.","type":"boolean"},"numSequences":{"description":"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.","type":"number"},"participantNameField":{"description":"The default name field for a participant. Directs revisit to use the task and response id as a name in UI elements. For example, if you wanted the response \'prolificId\' from the task \'introduction\' to be the name, this field would be \'introduction.prolificId\'","type":"string"},"recordStudyAudio":{"description":"Whether or not we want to utilize think-aloud features. If true, will record audio on all components unless deactivated on individual components. Defaults to false.","type":"boolean"},"sidebar":{"description":"Controls whether the left sidebar is rendered at all. Required to be true if your response\'s location is set to sidebar for any question.","type":"boolean"},"sidebarWidth":{"description":"The width of the left sidebar. Defaults to 300.","type":"number"},"studyEndMsg":{"description":"The message to display when the study ends.","type":"string"},"timeoutReject":{"description":"Whether to redirect a timed out participant to a rejection page. This only works for components where the `nextButtonDisableTime` field is set.","type":"boolean"},"urlParticipantIdParam":{"description":"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.","type":"string"},"windowEventDebounceTime":{"description":"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second","type":"number"},"withProgressBar":{"description":"Controls whether the progress bar is rendered in the study.","type":"boolean"}},"required":["contactEmail","logoPath","withProgressBar","sidebar"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),zQt={$ref:BQt,$schema:jQt,definitions:UQt},VQt="#/definitions/GlobalConfig",HQt="http://json-schema.org/draft-07/schema#",qQt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},WQt={$ref:VQt,$schema:HQt,definitions:qQt};var TD={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var GQt=TD.exports,Xve;function YQt(){return Xve||(Xve=1,function(e,t){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",l=500,c="__lodash_placeholder__",f=1,d=2,h=4,p=1,m=2,g=1,v=2,b=4,w=8,E=16,T=32,C=64,I=128,R=256,N=512,O=30,L="...",B=800,F=16,H=1,Q=2,J=3,ne=1/0,Z=9007199254740991,ie=17976931348623157e292,q=NaN,U=4294967295,G=U-1,V=U>>>1,Y=[["ary",I],["bind",g],["bindKey",v],["curry",w],["curryRight",E],["flip",N],["partial",T],["partialRight",C],["rearg",R]],ee="[object Arguments]",ae="[object Array]",_e="[object AsyncFunction]",pe="[object Boolean]",Te="[object Date]",Le="[object DOMException]",ye="[object Error]",he="[object Function]",$e="[object GeneratorFunction]",De="[object Map]",tt="[object Number]",it="[object Null]",Me="[object Object]",Ge="[object Promise]",at="[object Proxy]",yt="[object RegExp]",Tt="[object Set]",Ot="[object String]",qe="[object Symbol]",dt="[object Undefined]",wt="[object WeakMap]",ke="[object WeakSet]",Oe="[object ArrayBuffer]",ht="[object DataView]",Lt="[object Float32Array]",Ft="[object Float64Array]",dn="[object Int8Array]",Nn="[object Int16Array]",Tr="[object Int32Array]",Ni="[object Uint8Array]",Un="[object Uint8ClampedArray]",tr="[object Uint16Array]",Ai="[object Uint32Array]",Sr=/\b__p \+= '';/g,Lo=/\b(__p \+=) '' \+/g,Ji=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Pi=/&(?:amp|lt|gt|quot|#39);/g,Zi=/[&<>"']/g,Qr=RegExp(Pi.source),$o=RegExp(Zi.source),oc=/<%-([\s\S]+?)%>/g,xa=/<%([\s\S]+?)%>/g,Du=/<%=([\s\S]+?)%>/g,Jr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ji=/^\w*$/,oi=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ws=/[\\^$.*+?()[\]{}|]/g,Fr=RegExp(Ws.source),es=/^\s+/,Fo=/\s/,ho=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qo=/\{\n\/\* \[wrapped with (.+)\] \*/,_l=/,? & /,Nh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pr=/[()=,{}\[\]\/\s]/,ac=/\\(\\)?/g,ms=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Xa=/\w*$/,Jo=/^[-+]0x[0-9a-f]+$/i,hm=/^0b[01]+$/i,Ph=/^\[object .+?Constructor\]$/,_d=/^0o[0-7]+$/i,wd=/^(?:0|[1-9]\d*)$/,gf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yf=/($^)/,vf=/['\n\r\u2028\u2029\\]/g,fr="\\ud800-\\udfff",Oh="\\u0300-\\u036f",po="\\ufe20-\\ufe2f",wl="\\u20d0-\\u20ff",Gs=Oh+po+wl,uc="\\u2700-\\u27bf",Mh="a-z\\xdf-\\xf6\\xf8-\\xff",lc="\\xac\\xb1\\xd7\\xf7",mo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",pm="\\u2000-\\u206f",go=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ue="A-Z\\xc0-\\xd6\\xd8-\\xde",Se="\\ufe0e\\ufe0f",ge=lc+mo+pm+go,Ne="[']",Be="["+fr+"]",Re="["+ge+"]",rt="["+Gs+"]",bt="\\d+",Et="["+uc+"]",xt="["+Mh+"]",Dt="[^"+fr+ge+bt+uc+Mh+ue+"]",qt="\\ud83c[\\udffb-\\udfff]",In="(?:"+rt+"|"+qt+")",un="[^"+fr+"]",nr="(?:\\ud83c[\\udde6-\\uddff]){2}",ln="[\\ud800-\\udbff][\\udc00-\\udfff]",br="["+ue+"]",Ys="\\u200d",Qa="(?:"+xt+"|"+Dt+")",cc="(?:"+br+"|"+Dt+")",Lh="(?:"+Ne+"(?:d|ll|m|re|s|t|ve))?",bf="(?:"+Ne+"(?:D|LL|M|RE|S|T|VE))?",$h=In+"?",Bo="["+Se+"]?",gs="(?:"+Ys+"(?:"+[un,nr,ln].join("|")+")"+Bo+$h+")*",jo="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ja="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",xf=Bo+$h+gs,Za="(?:"+[Et,nr,ln].join("|")+")"+xf,Nu="(?:"+[un+rt+"?",rt,nr,ln,Be].join("|")+")",U1=RegExp(Ne,"g"),fc=RegExp(rt,"g"),Ts=RegExp(qt+"(?="+qt+")|"+Nu+xf,"g"),Vx=RegExp([br+"?"+xt+"+"+Lh+"(?="+[Re,br,"$"].join("|")+")",cc+"+"+bf+"(?="+[Re,br+Qa,"$"].join("|")+")",br+"?"+Qa+"+"+Lh,br+"+"+bf,Ja,jo,bt,Za].join("|"),"g"),wg=RegExp("["+Ys+fr+Gs+Se+"]"),_f=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ed=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],z1=-1,xr={};xr[Lt]=xr[Ft]=xr[dn]=xr[Nn]=xr[Tr]=xr[Ni]=xr[Un]=xr[tr]=xr[Ai]=!0,xr[ee]=xr[ae]=xr[Oe]=xr[pe]=xr[ht]=xr[Te]=xr[ye]=xr[he]=xr[De]=xr[tt]=xr[Me]=xr[yt]=xr[Tt]=xr[Ot]=xr[wt]=!1;var dr={};dr[ee]=dr[ae]=dr[Oe]=dr[ht]=dr[pe]=dr[Te]=dr[Lt]=dr[Ft]=dr[dn]=dr[Nn]=dr[Tr]=dr[De]=dr[tt]=dr[Me]=dr[yt]=dr[Tt]=dr[Ot]=dr[qe]=dr[Ni]=dr[Un]=dr[tr]=dr[Ai]=!0,dr[ye]=dr[he]=dr[wt]=!1;var wf={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ae={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},tn=parseFloat,rr=parseInt,kr=typeof la=="object"&&la&&la.Object===Object&&la,fi=typeof self=="object"&&self&&self.Object===Object&&self,cn=kr||fi||Function("return this")(),Br=t&&!t.nodeType&&t,Zr=Br&&!0&&e&&!e.nodeType&&e,Ks=Zr&&Zr.exports===Br,Pu=Ks&&kr.process,ts=function(){try{var Fe=Zr&&Zr.require&&Zr.require("util").types;return Fe||Pu&&Pu.binding&&Pu.binding("util")}catch{}}(),Td=ts&&ts.isArrayBuffer,Fs=ts&&ts.isDate,dc=ts&&ts.isMap,Eg=ts&&ts.isRegExp,Ef=ts&&ts.isSet,hT=ts&&ts.isTypedArray;function Uo(Fe,st,Ye){switch(Ye.length){case 0:return Fe.call(st);case 1:return Fe.call(st,Ye[0]);case 2:return Fe.call(st,Ye[0],Ye[1]);case 3:return Fe.call(st,Ye[0],Ye[1],Ye[2])}return Fe.apply(st,Ye)}function Fh(Fe,st,Ye,Kt){for(var zn=-1,ei=Fe==null?0:Fe.length;++zn<ei;){var Xs=Fe[zn];st(Kt,Xs,Ye(Xs),Fe)}return Kt}function yo(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length;++Ye<Kt&&st(Fe[Ye],Ye,Fe)!==!1;);return Fe}function Tg(Fe,st){for(var Ye=Fe==null?0:Fe.length;Ye--&&st(Fe[Ye],Ye,Fe)!==!1;);return Fe}function Sg(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length;++Ye<Kt;)if(!st(Fe[Ye],Ye,Fe))return!1;return!0}function hc(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length,zn=0,ei=[];++Ye<Kt;){var Xs=Fe[Ye];st(Xs,Ye,Fe)&&(ei[zn++]=Xs)}return ei}function Cg(Fe,st){var Ye=Fe==null?0:Fe.length;return!!Ye&&Bh(Fe,st,0)>-1}function mm(Fe,st,Ye){for(var Kt=-1,zn=Fe==null?0:Fe.length;++Kt<zn;)if(Ye(st,Fe[Kt]))return!0;return!1}function Ei(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length,zn=Array(Kt);++Ye<Kt;)zn[Ye]=st(Fe[Ye],Ye,Fe);return zn}function Tf(Fe,st){for(var Ye=-1,Kt=st.length,zn=Fe.length;++Ye<Kt;)Fe[zn+Ye]=st[Ye];return Fe}function Sf(Fe,st,Ye,Kt){var zn=-1,ei=Fe==null?0:Fe.length;for(Kt&&ei&&(Ye=Fe[++zn]);++zn<ei;)Ye=st(Ye,Fe[zn],zn,Fe);return Ye}function pT(Fe,st,Ye,Kt){var zn=Fe==null?0:Fe.length;for(Kt&&zn&&(Ye=Fe[--zn]);zn--;)Ye=st(Ye,Fe[zn],zn,Fe);return Ye}function V1(Fe,st){for(var Ye=-1,Kt=Fe==null?0:Fe.length;++Ye<Kt;)if(st(Fe[Ye],Ye,Fe))return!0;return!1}var mT=te("length");function Hx(Fe){return Fe.split("")}function H1(Fe){return Fe.match(Nh)||[]}function _a(Fe,st,Ye){var Kt;return Ye(Fe,function(zn,ei,Xs){if(st(zn,ei,Xs))return Kt=ei,!1}),Kt}function Ag(Fe,st,Ye,Kt){for(var zn=Fe.length,ei=Ye+(Kt?1:-1);Kt?ei--:++ei<zn;)if(st(Fe[ei],ei,Fe))return ei;return-1}function Bh(Fe,st,Ye){return st===st?yT(Fe,st,Ye):Ag(Fe,D,Ye)}function Sd(Fe,st,Ye,Kt){for(var zn=Ye-1,ei=Fe.length;++zn<ei;)if(Kt(Fe[zn],st))return zn;return-1}function D(Fe){return Fe!==Fe}function W(Fe,st){var Ye=Fe==null?0:Fe.length;return Ye?Ut(Fe,st)/Ye:q}function te(Fe){return function(st){return st==null?n:st[Fe]}}function ce(Fe){return function(st){return Fe==null?n:Fe[st]}}function ze(Fe,st,Ye,Kt,zn){return zn(Fe,function(ei,Xs,Ii){Ye=Kt?(Kt=!1,ei):st(Ye,ei,Xs,Ii)}),Ye}function Ze(Fe,st){var Ye=Fe.length;for(Fe.sort(st);Ye--;)Fe[Ye]=Fe[Ye].value;return Fe}function Ut(Fe,st){for(var Ye,Kt=-1,zn=Fe.length;++Kt<zn;){var ei=st(Fe[Kt]);ei!==n&&(Ye=Ye===n?ei:Ye+ei)}return Ye}function ai(Fe,st){for(var Ye=-1,Kt=Array(Fe);++Ye<Fe;)Kt[Ye]=st(Ye);return Kt}function vo(Fe,st){return Ei(st,function(Ye){return[Ye,Fe[Ye]]})}function Rr(Fe){return Fe&&Fe.slice(0,vT(Fe)+1).replace(es,"")}function di(Fe){return function(st){return Fe(st)}}function Ss(Fe,st){return Ei(st,function(Ye){return Fe[Ye]})}function wa(Fe,st){return Fe.has(st)}function Ou(Fe,st){for(var Ye=-1,Kt=Fe.length;++Ye<Kt&&Bh(st,Fe[Ye],0)>-1;);return Ye}function gm(Fe,st){for(var Ye=Fe.length;Ye--&&Bh(st,Fe[Ye],0)>-1;);return Ye}function q1(Fe,st){for(var Ye=Fe.length,Kt=0;Ye--;)Fe[Ye]===st&&++Kt;return Kt}var kO=ce(wf),RO=ce(ve);function DO(Fe){return"\\"+Qe[Fe]}function W1(Fe,st){return Fe==null?n:Fe[st]}function G1(Fe){return wg.test(Fe)}function nU(Fe){return _f.test(Fe)}function rU(Fe){for(var st,Ye=[];!(st=Fe.next()).done;)Ye.push(st.value);return Ye}function gT(Fe){var st=-1,Ye=Array(Fe.size);return Fe.forEach(function(Kt,zn){Ye[++st]=[zn,Kt]}),Ye}function jI(Fe,st){return function(Ye){return Fe(st(Ye))}}function pc(Fe,st){for(var Ye=-1,Kt=Fe.length,zn=0,ei=[];++Ye<Kt;){var Xs=Fe[Ye];(Xs===st||Xs===c)&&(Fe[Ye]=c,ei[zn++]=Ye)}return ei}function ym(Fe){var st=-1,Ye=Array(Fe.size);return Fe.forEach(function(Kt){Ye[++st]=Kt}),Ye}function iU(Fe){var st=-1,Ye=Array(Fe.size);return Fe.forEach(function(Kt){Ye[++st]=[Kt,Kt]}),Ye}function yT(Fe,st,Ye){for(var Kt=Ye-1,zn=Fe.length;++Kt<zn;)if(Fe[Kt]===st)return Kt;return-1}function sU(Fe,st,Ye){for(var Kt=Ye+1;Kt--;)if(Fe[Kt]===st)return Kt;return Kt}function Ig(Fe){return G1(Fe)?PO(Fe):mT(Fe)}function El(Fe){return G1(Fe)?OO(Fe):Hx(Fe)}function vT(Fe){for(var st=Fe.length;st--&&Fo.test(Fe.charAt(st)););return st}var NO=ce(Ae);function PO(Fe){for(var st=Ts.lastIndex=0;Ts.test(Fe);)++st;return st}function OO(Fe){return Fe.match(Ts)||[]}function oU(Fe){return Fe.match(Vx)||[]}var aU=function Fe(st){st=st==null?cn:Y1.defaults(cn.Object(),st,Y1.pick(cn,Ed));var Ye=st.Array,Kt=st.Date,zn=st.Error,ei=st.Function,Xs=st.Math,Ii=st.Object,qx=st.RegExp,uU=st.String,mc=st.TypeError,jh=Ye.prototype,UI=ei.prototype,Cd=Ii.prototype,K1=st["__core-js_shared__"],Wx=UI.toString,ti=Cd.hasOwnProperty,X1=0,bT=function(){var _=/[^.]+$/.exec(K1&&K1.keys&&K1.keys.IE_PROTO||"");return _?"Symbol(src)_1."+_:""}(),Gx=Cd.toString,xT=Wx.call(Ii),MO=cn._,LO=qx("^"+Wx.call(ti).replace(Ws,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Yx=Ks?st.Buffer:n,Uh=st.Symbol,Kx=st.Uint8Array,zI=Yx?Yx.allocUnsafe:n,Cf=jI(Ii.getPrototypeOf,Ii),_T=Ii.create,wT=Cd.propertyIsEnumerable,ET=jh.splice,$O=Uh?Uh.isConcatSpreadable:n,zh=Uh?Uh.iterator:n,kg=Uh?Uh.toStringTag:n,Xx=function(){try{var _=Im(Ii,"defineProperty");return _({},"",{}),_}catch{}}(),FO=st.clearTimeout!==cn.clearTimeout&&st.clearTimeout,ns=Kt&&Kt.now!==cn.Date.now&&Kt.now,VI=st.setTimeout!==cn.setTimeout&&st.setTimeout,Rg=Xs.ceil,vm=Xs.floor,TT=Ii.getOwnPropertySymbols,HI=Yx?Yx.isBuffer:n,Q1=st.isFinite,ST=jh.join,J1=jI(Ii.keys,Ii),Qs=Xs.max,Ea=Xs.min,lU=Kt.now,BO=st.parseInt,Qx=Xs.random,CT=jh.reverse,Jx=Im(st,"DataView"),Dg=Im(st,"Map"),Zx=Im(st,"Promise"),bm=Im(st,"Set"),e_=Im(st,"WeakMap"),Z1=Im(Ii,"create"),AT=e_&&new e_,ev={},qI=km(Jx),xm=km(Dg),jO=km(Zx),tv=km(bm),Ad=km(e_),_m=Uh?Uh.prototype:n,Tl=_m?_m.valueOf:n,IT=_m?_m.toString:n;function oe(_){if(Zs(_)&&!sr(_)&&!(_ instanceof ir)){if(_ instanceof Ta)return _;if(ti.call(_,"__wrapped__"))return p4(_)}return new Ta(_)}var nv=function(){function _(){}return function(A){if(!js(A))return{};if(_T)return _T(A);_.prototype=A;var $=new _;return _.prototype=n,$}}();function Id(){}function Ta(_,A){this.__wrapped__=_,this.__actions__=[],this.__chain__=!!A,this.__index__=0,this.__values__=n}oe.templateSettings={escape:oc,evaluate:xa,interpolate:Du,variable:"",imports:{_:oe}},oe.prototype=Id.prototype,oe.prototype.constructor=oe,Ta.prototype=nv(Id.prototype),Ta.prototype.constructor=Ta;function ir(_){this.__wrapped__=_,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function kT(){var _=new ir(this.__wrapped__);return _.__actions__=tu(this.__actions__),_.__dir__=this.__dir__,_.__filtered__=this.__filtered__,_.__iteratees__=tu(this.__iteratees__),_.__takeCount__=this.__takeCount__,_.__views__=tu(this.__views__),_}function WI(){if(this.__filtered__){var _=new ir(this);_.__dir__=-1,_.__filtered__=!0}else _=this.clone(),_.__dir__*=-1;return _}function rv(){var _=this.__wrapped__.value(),A=this.__dir__,$=sr(_),X=A<0,re=$?_.length:0,fe=xk(0,re,this.__views__),xe=fe.start,Ie=fe.end,Ue=Ie-xe,pt=X?Ie:xe-1,gt=this.__iteratees__,Ct=gt.length,Yt=0,mn=Ea(Ue,this.__takeCount__);if(!$||!X&&re==Ue&&mn==Ue)return fv(_,this.__actions__);var Rn=[];e:for(;Ue--&&Yt<mn;){pt+=A;for(var yr=-1,Dn=_[pt];++yr<Ct;){var Dr=gt[yr],Ur=Dr.iteratee,Lf=Dr.type,kl=Ur(Dn);if(Lf==Q)Dn=kl;else if(!kl){if(Lf==H)continue e;break e}}Rn[Yt++]=Dn}return Rn}ir.prototype=nv(Id.prototype),ir.prototype.constructor=ir;function Mu(_){var A=-1,$=_==null?0:_.length;for(this.clear();++A<$;){var X=_[A];this.set(X[0],X[1])}}function rs(){this.__data__=Z1?Z1(null):{},this.size=0}function Ui(_){var A=this.has(_)&&delete this.__data__[_];return this.size-=A?1:0,A}function wm(_){var A=this.__data__;if(Z1){var $=A[_];return $===u?n:$}return ti.call(A,_)?A[_]:n}function Sa(_){var A=this.__data__;return Z1?A[_]!==n:ti.call(A,_)}function Lu(_,A){var $=this.__data__;return this.size+=this.has(_)?0:1,$[_]=Z1&&A===n?u:A,this}Mu.prototype.clear=rs,Mu.prototype.delete=Ui,Mu.prototype.get=wm,Mu.prototype.has=Sa,Mu.prototype.set=Lu;function eu(_){var A=-1,$=_==null?0:_.length;for(this.clear();++A<$;){var X=_[A];this.set(X[0],X[1])}}function iv(){this.__data__=[],this.size=0}function $u(_){var A=this.__data__,$=Aa(A,_);if($<0)return!1;var X=A.length-1;return $==X?A.pop():ET.call(A,$,1),--this.size,!0}function RT(_){var A=this.__data__,$=Aa(A,_);return $<0?n:A[$][1]}function UO(_){return Aa(this.__data__,_)>-1}function zO(_,A){var $=this.__data__,X=Aa($,_);return X<0?(++this.size,$.push([_,A])):$[X][1]=A,this}eu.prototype.clear=iv,eu.prototype.delete=$u,eu.prototype.get=RT,eu.prototype.has=UO,eu.prototype.set=zO;function gc(_){var A=-1,$=_==null?0:_.length;for(this.clear();++A<$;){var X=_[A];this.set(X[0],X[1])}}function VO(){this.size=0,this.__data__={hash:new Mu,map:new(Dg||eu),string:new Mu}}function Vh(_){var A=g_(this,_).delete(_);return this.size-=A?1:0,A}function DT(_){return g_(this,_).get(_)}function GI(_){return g_(this,_).has(_)}function HO(_,A){var $=g_(this,_),X=$.size;return $.set(_,A),this.size+=$.size==X?0:1,this}gc.prototype.clear=VO,gc.prototype.delete=Vh,gc.prototype.get=DT,gc.prototype.has=GI,gc.prototype.set=HO;function Ng(_){var A=-1,$=_==null?0:_.length;for(this.__data__=new gc;++A<$;)this.add(_[A])}function Em(_){return this.__data__.set(_,u),this}function sv(_){return this.__data__.has(_)}Ng.prototype.add=Ng.prototype.push=Em,Ng.prototype.has=sv;function Ca(_){var A=this.__data__=new eu(_);this.size=A.size}function NT(){this.__data__=new eu,this.size=0}function PT(_){var A=this.__data__,$=A.delete(_);return this.size=A.size,$}function yc(_){return this.__data__.get(_)}function vc(_){return this.__data__.has(_)}function Pg(_,A){var $=this.__data__;if($ instanceof eu){var X=$.__data__;if(!Dg||X.length<i-1)return X.push([_,A]),this.size=++$.size,this;$=this.__data__=new gc(X)}return $.set(_,A),this.size=$.size,this}Ca.prototype.clear=NT,Ca.prototype.delete=PT,Ca.prototype.get=yc,Ca.prototype.has=vc,Ca.prototype.set=Pg;function kd(_,A){var $=sr(_),X=!$&&I_(_),re=!$&&!X&&_v(_),fe=!$&&!X&&!re&&TS(_),xe=$||X||re||fe,Ie=xe?ai(_.length,uU):[],Ue=Ie.length;for(var pt in _)(A||ti.call(_,pt))&&!(xe&&(pt=="length"||re&&(pt=="offset"||pt=="parent")||fe&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||ls(pt,Ue)))&&Ie.push(pt);return Ie}function Rd(_){var A=_.length;return A?_[lv(0,A-1)]:n}function Og(_,A){return sS(tu(_),Hh(A,0,_.length))}function qO(_){return sS(tu(_))}function t_(_,A,$){($!==n&&!ep(_[A],$)||$===n&&!(A in _))&&Dd(_,A,$)}function Mg(_,A,$){var X=_[A];(!(ti.call(_,A)&&ep(X,$))||$===n&&!(A in _))&&Dd(_,A,$)}function Aa(_,A){for(var $=_.length;$--;)if(ep(_[$][0],A))return $;return-1}function Sl(_,A,$,X){return Pd(_,function(re,fe,xe){A(X,re,$(re),xe)}),X}function is(_,A){return _&&If(A,Ra(A),_)}function Af(_,A){return _&&If(A,Ac(A),_)}function Dd(_,A,$){A=="__proto__"&&Xx?Xx(_,A,{configurable:!0,enumerable:!0,value:$,writable:!0}):_[A]=$}function OT(_,A){for(var $=-1,X=A.length,re=Ye(X),fe=_==null;++$<X;)re[$]=fe?n:DU(_,A[$]);return re}function Hh(_,A,$){return _===_&&($!==n&&(_=_<=$?_:$),A!==n&&(_=_>=A?_:A)),_}function Fu(_,A,$,X,re,fe){var xe,Ie=A&f,Ue=A&d,pt=A&h;if($&&(xe=re?$(_,X,re,fe):$(_)),xe!==n)return xe;if(!js(_))return _;var gt=sr(_);if(gt){if(xe=v_(_),!Ie)return tu(_,xe)}else{var Ct=ta(_),Yt=Ct==he||Ct==$e;if(_v(_))return uk(_,Ie);if(Ct==Me||Ct==ee||Yt&&!re){if(xe=Ue||Yt?{}:na(_),!Ie)return Ue?fU(_,Af(xe,_)):GT(_,is(xe,_))}else{if(!dr[Ct])return re?_:{};xe=dU(_,Ct,Ie)}}fe||(fe=new Ca);var mn=fe.get(_);if(mn)return mn;fe.set(_,xe),oue(_)?_.forEach(function(Dn){xe.add(Fu(Dn,A,$,Dn,_,fe))}):iue(_)&&_.forEach(function(Dn,Dr){xe.set(Dr,Fu(Dn,A,$,Dr,_,fe))});var Rn=pt?Ue?m_:p_:Ue?Ac:Ra,yr=gt?n:Rn(_);return yo(yr||_,function(Dn,Dr){yr&&(Dr=Dn,Dn=_[Dr]),Mg(xe,Dr,Fu(Dn,A,$,Dr,_,fe))}),xe}function WO(_){var A=Ra(_);return function($){return n_($,_,A)}}function n_(_,A,$){var X=$.length;if(_==null)return!X;for(_=Ii(_);X--;){var re=$[X],fe=A[re],xe=_[re];if(xe===n&&!(re in _)||!fe(xe))return!1}return!0}function YI(_,A,$){if(typeof _!="function")throw new mc(o);return vv(function(){_.apply(n,$)},A)}function Nd(_,A,$,X){var re=-1,fe=Cg,xe=!0,Ie=_.length,Ue=[],pt=A.length;if(!Ie)return Ue;$&&(A=Ei(A,di($))),X?(fe=mm,xe=!1):A.length>=i&&(fe=wa,xe=!1,A=new Ng(A));e:for(;++re<Ie;){var gt=_[re],Ct=$==null?gt:$(gt);if(gt=X||gt!==0?gt:0,xe&&Ct===Ct){for(var Yt=pt;Yt--;)if(A[Yt]===Ct)continue e;Ue.push(gt)}else fe(A,Ct,X)||Ue.push(gt)}return Ue}var Pd=Ec(Cl),GO=Ec(Tm,!0);function r_(_,A){var $=!0;return Pd(_,function(X,re,fe){return $=!!A(X,re,fe),$}),$}function Lg(_,A,$){for(var X=-1,re=_.length;++X<re;){var fe=_[X],xe=A(fe);if(xe!=null&&(Ie===n?xe===xe&&!Mf(xe):$(xe,Ie)))var Ie=xe,Ue=fe}return Ue}function YO(_,A,$,X){var re=_.length;for($=pr($),$<0&&($=-$>re?0:re+$),X=X===n||X>re?re:pr(X),X<0&&(X+=re),X=$>X?0:uue(X);$<X;)_[$++]=A;return _}function KI(_,A){var $=[];return Pd(_,function(X,re,fe){A(X,re,fe)&&$.push(X)}),$}function Cs(_,A,$,X,re){var fe=-1,xe=_.length;for($||($=nS),re||(re=[]);++fe<xe;){var Ie=_[fe];A>0&&$(Ie)?A>1?Cs(Ie,A-1,$,X,re):Tf(re,Ie):X||(re[re.length]=Ie)}return re}var MT=KT(),i_=KT(!0);function Cl(_,A){return _&&MT(_,A,Ra)}function Tm(_,A){return _&&i_(_,A,Ra)}function ov(_,A){return hc(A,function($){return Yg(_[$])})}function qh(_,A){A=Ld(A,_);for(var $=0,X=A.length;_!=null&&$<X;)_=_[Nf(A[$++])];return $&&$==X?_:n}function LT(_,A,$){var X=A(_);return sr(_)?X:Tf(X,$(_))}function Zo(_){return _==null?_===n?dt:it:kg&&kg in Ii(_)?tS(_):wk(_)}function Sm(_,A){return _>A}function bc(_,A){return _!=null&&ti.call(_,A)}function $g(_,A){return _!=null&&A in Ii(_)}function XI(_,A,$){return _>=Ea(A,$)&&_<Qs(A,$)}function $T(_,A,$){for(var X=$?mm:Cg,re=_[0].length,fe=_.length,xe=fe,Ie=Ye(fe),Ue=1/0,pt=[];xe--;){var gt=_[xe];xe&&A&&(gt=Ei(gt,di(A))),Ue=Ea(gt.length,Ue),Ie[xe]=!$&&(A||re>=120&&gt.length>=120)?new Ng(xe&&gt):n}gt=_[0];var Ct=-1,Yt=Ie[0];e:for(;++Ct<re&&pt.length<Ue;){var mn=gt[Ct],Rn=A?A(mn):mn;if(mn=$||mn!==0?mn:0,!(Yt?wa(Yt,Rn):X(pt,Rn,$))){for(xe=fe;--xe;){var yr=Ie[xe];if(!(yr?wa(yr,Rn):X(_[xe],Rn,$)))continue e}Yt&&Yt.push(Rn),pt.push(mn)}}return pt}function Wh(_,A,$,X){return Cl(_,function(re,fe,xe){A(X,$(re),fe,xe)}),X}function xc(_,A,$){A=Ld(A,_),_=zo(_,A);var X=_==null?_:_[Nf(iu(A))];return X==null?n:Uo(X,_,$)}function FT(_){return Zs(_)&&Zo(_)==ee}function KO(_){return Zs(_)&&Zo(_)==Oe}function Gh(_){return Zs(_)&&Zo(_)==Te}function _c(_,A,$,X,re){return _===A?!0:_==null||A==null||!Zs(_)&&!Zs(A)?_!==_&&A!==A:BT(_,A,$,X,_c,re)}function BT(_,A,$,X,re,fe){var xe=sr(_),Ie=sr(A),Ue=xe?ae:ta(_),pt=Ie?ae:ta(A);Ue=Ue==ee?Me:Ue,pt=pt==ee?Me:pt;var gt=Ue==Me,Ct=pt==Me,Yt=Ue==pt;if(Yt&&_v(_)){if(!_v(A))return!1;xe=!0,gt=!1}if(Yt&&!gt)return fe||(fe=new Ca),xe||TS(_)?vk(_,A,$,X,re,fe):bk(_,A,Ue,$,X,re,fe);if(!($&p)){var mn=gt&&ti.call(_,"__wrapped__"),Rn=Ct&&ti.call(A,"__wrapped__");if(mn||Rn){var yr=mn?_.value():_,Dn=Rn?A.value():A;return fe||(fe=new Ca),re(yr,Dn,$,X,fe)}}return Yt?(fe||(fe=new Ca),o4(_,A,$,X,re,fe)):!1}function XO(_){return Zs(_)&&ta(_)==De}function av(_,A,$,X){var re=$.length,fe=re,xe=!X;if(_==null)return!fe;for(_=Ii(_);re--;){var Ie=$[re];if(xe&&Ie[2]?Ie[1]!==_[Ie[0]]:!(Ie[0]in _))return!1}for(;++re<fe;){Ie=$[re];var Ue=Ie[0],pt=_[Ue],gt=Ie[1];if(xe&&Ie[2]){if(pt===n&&!(Ue in _))return!1}else{var Ct=new Ca;if(X)var Yt=X(pt,gt,Ue,_,A,Ct);if(!(Yt===n?_c(gt,pt,p|m,X,Ct):Yt))return!1}}return!0}function QI(_){if(!js(_)||l4(_))return!1;var A=Yg(_)?LO:Ph;return A.test(km(_))}function s_(_){return Zs(_)&&Zo(_)==yt}function Od(_){return Zs(_)&&ta(_)==Tt}function o_(_){return Zs(_)&&I4(_.length)&&!!xr[Zo(_)]}function uv(_){return typeof _=="function"?_:_==null?Ic:typeof _=="object"?sr(_)?us(_[0],_[1]):jT(_):bue(_)}function Yh(_){if(!Jh(_))return J1(_);var A=[];for(var $ in Ii(_))ti.call(_,$)&&$!="constructor"&&A.push($);return A}function JI(_){if(!js(_))return d4(_);var A=Jh(_),$=[];for(var X in _)X=="constructor"&&(A||!ti.call(_,X))||$.push(X);return $}function Cm(_,A){return _<A}function ZI(_,A){var $=-1,X=Cc(_)?Ye(_.length):[];return Pd(_,function(re,fe,xe){X[++$]=A(re,fe,xe)}),X}function jT(_){var A=y_(_);return A.length==1&&A[0][2]?rS(A[0][0],A[0][1]):function($){return $===_||av($,_,A)}}function us(_,A){return en(_)&&x_(A)?rS(Nf(_),A):function($){var X=DU($,_);return X===n&&X===A?NU($,_):_c(A,X,p|m)}}function Fg(_,A,$,X,re){_!==A&&MT(A,function(fe,xe){if(re||(re=new Ca),js(fe))ek(_,A,xe,$,Fg,X,re);else{var Ie=X?X(Bd(_,xe),fe,xe+"",_,A,re):n;Ie===n&&(Ie=fe),t_(_,xe,Ie)}},Ac)}function ek(_,A,$,X,re,fe,xe){var Ie=Bd(_,$),Ue=Bd(A,$),pt=xe.get(Ue);if(pt){t_(_,$,pt);return}var gt=fe?fe(Ie,Ue,$+"",_,A,xe):n,Ct=gt===n;if(Ct){var Yt=sr(Ue),mn=!Yt&&_v(Ue),Rn=!Yt&&!mn&&TS(Ue);gt=Ue,Yt||mn||Rn?sr(Ie)?gt=Ie:wo(Ie)?gt=tu(Ie):mn?(Ct=!1,gt=uk(Ue,!0)):Rn?(Ct=!1,gt=t4(Ue,!0)):gt=[]:jk(Ue)||I_(Ue)?(gt=Ie,I_(Ie)?gt=lue(Ie):(!js(Ie)||Yg(Ie))&&(gt=na(Ue))):Ct=!1}Ct&&(xe.set(Ue,gt),re(gt,Ue,X,fe,xe),xe.delete(Ue)),t_(_,$,gt)}function UT(_,A){var $=_.length;if($)return A+=A<0?$:0,ls(A,$)?_[A]:n}function a_(_,A,$){A.length?A=Ei(A,function(fe){return sr(fe)?function(xe){return qh(xe,fe.length===1?fe[0]:fe)}:fe}):A=[Ic];var X=-1;A=Ei(A,di(Sn()));var re=ZI(_,function(fe,xe,Ie){var Ue=Ei(A,function(pt){return pt(fe)});return{criteria:Ue,index:++X,value:fe}});return Ze(re,function(fe,xe){return cU(fe,xe,$)})}function tk(_,A){return Am(_,A,function($,X){return NU(_,X)})}function Am(_,A,$){for(var X=-1,re=A.length,fe={};++X<re;){var xe=A[X],Ie=qh(_,xe);$(Ie,xe)&&jg(fe,Ld(xe,_),Ie)}return fe}function ys(_){return function(A){return qh(A,_)}}function Bs(_,A,$,X){var re=X?Sd:Bh,fe=-1,xe=A.length,Ie=_;for(_===A&&(A=tu(A)),$&&(Ie=Ei(_,di($)));++fe<xe;)for(var Ue=0,pt=A[fe],gt=$?$(pt):pt;(Ue=re(Ie,gt,Ue,X))>-1;)Ie!==_&&ET.call(Ie,Ue,1),ET.call(_,Ue,1);return _}function bo(_,A){for(var $=_?A.length:0,X=$-1;$--;){var re=A[$];if($==X||re!==fe){var fe=re;ls(re)?ET.call(_,re,1):HT(_,re)}}return _}function lv(_,A){return _+vm(Qx()*(A-_+1))}function u_(_,A,$,X){for(var re=-1,fe=Qs(Rg((A-_)/($||1)),0),xe=Ye(fe);fe--;)xe[X?fe:++re]=_,_+=$;return xe}function Bg(_,A){var $="";if(!_||A<1||A>Z)return $;do A%2&&($+=_),A=vm(A/2),A&&(_+=_);while(A);return $}function hr(_,A){return Al(iS(_,A,Ic),_+"")}function Ia(_){return Rd(SS(_))}function nk(_,A){var $=SS(_);return sS($,Hh(A,0,$.length))}function jg(_,A,$,X){if(!js(_))return _;A=Ld(A,_);for(var re=-1,fe=A.length,xe=fe-1,Ie=_;Ie!=null&&++re<fe;){var Ue=Nf(A[re]),pt=$;if(Ue==="__proto__"||Ue==="constructor"||Ue==="prototype")return _;if(re!=xe){var gt=Ie[Ue];pt=X?X(gt,Ue,Ie):n,pt===n&&(pt=js(gt)?gt:ls(A[re+1])?[]:{})}Mg(Ie,Ue,pt),Ie=Ie[Ue]}return _}var zT=AT?function(_,A){return AT.set(_,A),_}:Ic,Md=Xx?function(_,A){return Xx(_,"toString",{configurable:!0,enumerable:!1,value:OU(A),writable:!0})}:Ic;function wc(_){return sS(SS(_))}function ka(_,A,$){var X=-1,re=_.length;A<0&&(A=-A>re?0:re+A),$=$>re?re:$,$<0&&($+=re),re=A>$?0:$-A>>>0,A>>>=0;for(var fe=Ye(re);++X<re;)fe[X]=_[X+A];return fe}function rk(_,A){var $;return Pd(_,function(X,re,fe){return $=A(X,re,fe),!$}),!!$}function cv(_,A,$){var X=0,re=_==null?X:_.length;if(typeof A=="number"&&A===A&&re<=V){for(;X<re;){var fe=X+re>>>1,xe=_[fe];xe!==null&&!Mf(xe)&&($?xe<=A:xe<A)?X=fe+1:re=fe}return re}return VT(_,A,Ic,$)}function VT(_,A,$,X){var re=0,fe=_==null?0:_.length;if(fe===0)return 0;A=$(A);for(var xe=A!==A,Ie=A===null,Ue=Mf(A),pt=A===n;re<fe;){var gt=vm((re+fe)/2),Ct=$(_[gt]),Yt=Ct!==n,mn=Ct===null,Rn=Ct===Ct,yr=Mf(Ct);if(xe)var Dn=X||Rn;else pt?Dn=Rn&&(X||Yt):Ie?Dn=Rn&&Yt&&(X||!mn):Ue?Dn=Rn&&Yt&&!mn&&(X||!yr):mn||yr?Dn=!1:Dn=X?Ct<=A:Ct<A;Dn?re=gt+1:fe=gt}return Ea(fe,G)}function ik(_,A){for(var $=-1,X=_.length,re=0,fe=[];++$<X;){var xe=_[$],Ie=A?A(xe):xe;if(!$||!ep(Ie,Ue)){var Ue=Ie;fe[re++]=xe===0?0:xe}}return fe}function sk(_){return typeof _=="number"?_:Mf(_)?q:+_}function Bu(_){if(typeof _=="string")return _;if(sr(_))return Ei(_,Bu)+"";if(Mf(_))return IT?IT.call(_):"";var A=_+"";return A=="0"&&1/_==-1/0?"-0":A}function Kh(_,A,$){var X=-1,re=Cg,fe=_.length,xe=!0,Ie=[],Ue=Ie;if($)xe=!1,re=mm;else if(fe>=i){var pt=A?null:s4(_);if(pt)return ym(pt);xe=!1,re=wa,Ue=new Ng}else Ue=A?[]:Ie;e:for(;++X<fe;){var gt=_[X],Ct=A?A(gt):gt;if(gt=$||gt!==0?gt:0,xe&&Ct===Ct){for(var Yt=Ue.length;Yt--;)if(Ue[Yt]===Ct)continue e;A&&Ue.push(Ct),Ie.push(gt)}else re(Ue,Ct,$)||(Ue!==Ie&&Ue.push(Ct),Ie.push(gt))}return Ie}function HT(_,A){return A=Ld(A,_),_=zo(_,A),_==null||delete _[Nf(iu(A))]}function ok(_,A,$,X){return jg(_,A,$(qh(_,A)),X)}function l_(_,A,$,X){for(var re=_.length,fe=X?re:-1;(X?fe--:++fe<re)&&A(_[fe],fe,_););return $?ka(_,X?0:fe,X?fe+1:re):ka(_,X?fe+1:0,X?re:fe)}function fv(_,A){var $=_;return $ instanceof ir&&($=$.value()),Sf(A,function(X,re){return re.func.apply(re.thisArg,Tf([X],re.args))},$)}function qT(_,A,$){var X=_.length;if(X<2)return X?Kh(_[0]):[];for(var re=-1,fe=Ye(X);++re<X;)for(var xe=_[re],Ie=-1;++Ie<X;)Ie!=re&&(fe[re]=Nd(fe[re]||xe,_[Ie],A,$));return Kh(Cs(fe,1),A,$)}function c_(_,A,$){for(var X=-1,re=_.length,fe=A.length,xe={};++X<re;){var Ie=X<fe?A[X]:n;$(xe,_[X],Ie)}return xe}function dv(_){return wo(_)?_:[]}function WT(_){return typeof _=="function"?_:Ic}function Ld(_,A){return sr(_)?_:en(_,A)?[_]:Sk(ki(_))}var QO=hr;function Xh(_,A,$){var X=_.length;return $=$===n?X:$,!A&&$>=X?_:ka(_,A,$)}var ak=FO||function(_){return cn.clearTimeout(_)};function uk(_,A){if(A)return _.slice();var $=_.length,X=zI?zI($):new _.constructor($);return _.copy(X),X}function f_(_){var A=new _.constructor(_.byteLength);return new Kx(A).set(new Kx(_)),A}function JO(_,A){var $=A?f_(_.buffer):_.buffer;return new _.constructor($,_.byteOffset,_.byteLength)}function ZO(_){var A=new _.constructor(_.source,Xa.exec(_));return A.lastIndex=_.lastIndex,A}function e4(_){return Tl?Ii(Tl.call(_)):{}}function t4(_,A){var $=A?f_(_.buffer):_.buffer;return new _.constructor($,_.byteOffset,_.length)}function lk(_,A){if(_!==A){var $=_!==n,X=_===null,re=_===_,fe=Mf(_),xe=A!==n,Ie=A===null,Ue=A===A,pt=Mf(A);if(!Ie&&!pt&&!fe&&_>A||fe&&xe&&Ue&&!Ie&&!pt||X&&xe&&Ue||!$&&Ue||!re)return 1;if(!X&&!fe&&!pt&&_<A||pt&&$&&re&&!X&&!fe||Ie&&$&&re||!xe&&re||!Ue)return-1}return 0}function cU(_,A,$){for(var X=-1,re=_.criteria,fe=A.criteria,xe=re.length,Ie=$.length;++X<xe;){var Ue=lk(re[X],fe[X]);if(Ue){if(X>=Ie)return Ue;var pt=$[X];return Ue*(pt=="desc"?-1:1)}}return _.index-A.index}function n4(_,A,$,X){for(var re=-1,fe=_.length,xe=$.length,Ie=-1,Ue=A.length,pt=Qs(fe-xe,0),gt=Ye(Ue+pt),Ct=!X;++Ie<Ue;)gt[Ie]=A[Ie];for(;++re<xe;)(Ct||re<fe)&&(gt[$[re]]=_[re]);for(;pt--;)gt[Ie++]=_[re++];return gt}function ck(_,A,$,X){for(var re=-1,fe=_.length,xe=-1,Ie=$.length,Ue=-1,pt=A.length,gt=Qs(fe-Ie,0),Ct=Ye(gt+pt),Yt=!X;++re<gt;)Ct[re]=_[re];for(var mn=re;++Ue<pt;)Ct[mn+Ue]=A[Ue];for(;++xe<Ie;)(Yt||re<fe)&&(Ct[mn+$[xe]]=_[re++]);return Ct}function tu(_,A){var $=-1,X=_.length;for(A||(A=Ye(X));++$<X;)A[$]=_[$];return A}function If(_,A,$,X){var re=!$;$||($={});for(var fe=-1,xe=A.length;++fe<xe;){var Ie=A[fe],Ue=X?X($[Ie],_[Ie],Ie,$,_):n;Ue===n&&(Ue=_[Ie]),re?Dd($,Ie,Ue):Mg($,Ie,Ue)}return $}function GT(_,A){return If(_,kf(_),A)}function fU(_,A){return If(_,a4(_),A)}function YT(_,A){return function($,X){var re=sr($)?Fh:Sl,fe=A?A():{};return re($,_,Sn(X,2),fe)}}function hv(_){return hr(function(A,$){var X=-1,re=$.length,fe=re>1?$[re-1]:n,xe=re>2?$[2]:n;for(fe=_.length>3&&typeof fe=="function"?(re--,fe):n,xe&&ru($[0],$[1],xe)&&(fe=re<3?n:fe,re=1),A=Ii(A);++X<re;){var Ie=$[X];Ie&&_(A,Ie,X,fe)}return A})}function Ec(_,A){return function($,X){if($==null)return $;if(!Cc($))return _($,X);for(var re=$.length,fe=A?re:-1,xe=Ii($);(A?fe--:++fe<re)&&X(xe[fe],fe,xe)!==!1;);return $}}function KT(_){return function(A,$,X){for(var re=-1,fe=Ii(A),xe=X(A),Ie=xe.length;Ie--;){var Ue=xe[_?Ie:++re];if($(fe[Ue],Ue,fe)===!1)break}return A}}function XT(_,A,$){var X=A&g,re=pv(_);function fe(){var xe=this&&this!==cn&&this instanceof fe?re:_;return xe.apply(X?$:this,arguments)}return fe}function fk(_){return function(A){A=ki(A);var $=G1(A)?El(A):n,X=$?$[0]:A.charAt(0),re=$?Xh($,1).join(""):A.slice(1);return X[_]()+re}}function Ug(_){return function(A){return Sf(yue(gue(A).replace(U1,"")),_,"")}}function pv(_){return function(){var A=arguments;switch(A.length){case 0:return new _;case 1:return new _(A[0]);case 2:return new _(A[0],A[1]);case 3:return new _(A[0],A[1],A[2]);case 4:return new _(A[0],A[1],A[2],A[3]);case 5:return new _(A[0],A[1],A[2],A[3],A[4]);case 6:return new _(A[0],A[1],A[2],A[3],A[4],A[5]);case 7:return new _(A[0],A[1],A[2],A[3],A[4],A[5],A[6])}var $=nv(_.prototype),X=_.apply($,A);return js(X)?X:$}}function dk(_,A,$){var X=pv(_);function re(){for(var fe=arguments.length,xe=Ye(fe),Ie=fe,Ue=Qh(re);Ie--;)xe[Ie]=arguments[Ie];var pt=fe<3&&xe[0]!==Ue&&xe[fe-1]!==Ue?[]:pc(xe,Ue);if(fe-=pt.length,fe<$)return nu(_,A,mv,re.placeholder,n,xe,pt,n,n,$-fe);var gt=this&&this!==cn&&this instanceof re?X:_;return Uo(gt,this,xe)}return re}function zg(_){return function(A,$,X){var re=Ii(A);if(!Cc(A)){var fe=Sn($,3);A=Ra(A),$=function(Ie){return fe(re[Ie],Ie,re)}}var xe=_(A,$,X);return xe>-1?re[fe?A[xe]:xe]:n}}function QT(_){return Fd(function(A){var $=A.length,X=$,re=Ta.prototype.thru;for(_&&A.reverse();X--;){var fe=A[X];if(typeof fe!="function")throw new mc(o);if(re&&!xe&&gv(fe)=="wrapper")var xe=new Ta([],!0)}for(X=xe?X:$;++X<$;){fe=A[X];var Ie=gv(fe),Ue=Ie=="wrapper"?eS(fe):n;Ue&&b_(Ue[0])&&Ue[1]==(I|w|T|R)&&!Ue[4].length&&Ue[9]==1?xe=xe[gv(Ue[0])].apply(xe,Ue[3]):xe=fe.length==1&&b_(fe)?xe[Ie]():xe.thru(fe)}return function(){var pt=arguments,gt=pt[0];if(xe&&pt.length==1&&sr(gt))return xe.plant(gt).value();for(var Ct=0,Yt=$?A[Ct].apply(this,pt):gt;++Ct<$;)Yt=A[Ct].call(this,Yt);return Yt}})}function mv(_,A,$,X,re,fe,xe,Ie,Ue,pt){var gt=A&I,Ct=A&g,Yt=A&v,mn=A&(w|E),Rn=A&N,yr=Yt?n:pv(_);function Dn(){for(var Dr=arguments.length,Ur=Ye(Dr),Lf=Dr;Lf--;)Ur[Lf]=arguments[Lf];if(mn)var kl=Qh(Dn),$f=q1(Ur,kl);if(X&&(Ur=n4(Ur,X,re,mn)),fe&&(Ur=ck(Ur,fe,xe,mn)),Dr-=$f,mn&&Dr<pt){var Eo=pc(Ur,kl);return nu(_,A,mv,Dn.placeholder,$,Ur,Eo,Ie,Ue,pt-Dr)}var tp=Ct?$:this,Xg=Yt?tp[_]:_;return Dr=Ur.length,Ie?Ur=Rf(Ur,Ie):Rn&&Dr>1&&Ur.reverse(),gt&&Ue<Dr&&(Ur.length=Ue),this&&this!==cn&&this instanceof Dn&&(Xg=yr||pv(Xg)),Xg.apply(tp,Ur)}return Dn}function r4(_,A){return function($,X){return Wh($,_,A(X),{})}}function d_(_,A){return function($,X){var re;if($===n&&X===n)return A;if($!==n&&(re=$),X!==n){if(re===n)return X;typeof $=="string"||typeof X=="string"?($=Bu($),X=Bu(X)):($=sk($),X=sk(X)),re=_($,X)}return re}}function JT(_){return Fd(function(A){return A=Ei(A,di(Sn())),hr(function($){var X=this;return _(A,function(re){return Uo(re,X,$)})})})}function h_(_,A){A=A===n?" ":Bu(A);var $=A.length;if($<2)return $?Bg(A,_):A;var X=Bg(A,Rg(_/Ig(A)));return G1(A)?Xh(El(X),0,_).join(""):X.slice(0,_)}function i4(_,A,$,X){var re=A&g,fe=pv(_);function xe(){for(var Ie=-1,Ue=arguments.length,pt=-1,gt=X.length,Ct=Ye(gt+Ue),Yt=this&&this!==cn&&this instanceof xe?fe:_;++pt<gt;)Ct[pt]=X[pt];for(;Ue--;)Ct[pt++]=arguments[++Ie];return Uo(Yt,re?$:this,Ct)}return xe}function hk(_){return function(A,$,X){return X&&typeof X!="number"&&ru(A,$,X)&&($=X=n),A=Kg(A),$===n?($=A,A=0):$=Kg($),X=X===n?A<$?1:-1:Kg(X),u_(A,$,X,_)}}function ZT(_){return function(A,$){return typeof A=="string"&&typeof $=="string"||(A=jd(A),$=jd($)),_(A,$)}}function nu(_,A,$,X,re,fe,xe,Ie,Ue,pt){var gt=A&w,Ct=gt?xe:n,Yt=gt?n:xe,mn=gt?fe:n,Rn=gt?n:fe;A|=gt?T:C,A&=~(gt?C:T),A&b||(A&=-4);var yr=[_,A,re,mn,Ct,Rn,Yt,Ie,Ue,pt],Dn=$.apply(n,yr);return b_(_)&&Ek(Dn,yr),Dn.placeholder=X,Tk(Dn,_,A)}function ea(_){var A=Xs[_];return function($,X){if($=jd($),X=X==null?0:Ea(pr(X),292),X&&Q1($)){var re=(ki($)+"e").split("e"),fe=A(re[0]+"e"+(+re[1]+X));return re=(ki(fe)+"e").split("e"),+(re[0]+"e"+(+re[1]-X))}return A($)}}var s4=bm&&1/ym(new bm([,-0]))[1]==ne?function(_){return new bm(_)}:$U;function pk(_){return function(A){var $=ta(A);return $==De?gT(A):$==Tt?iU(A):vo(A,_(A))}}function $d(_,A,$,X,re,fe,xe,Ie){var Ue=A&v;if(!Ue&&typeof _!="function")throw new mc(o);var pt=X?X.length:0;if(pt||(A&=-97,X=re=n),xe=xe===n?xe:Qs(pr(xe),0),Ie=Ie===n?Ie:pr(Ie),pt-=re?re.length:0,A&C){var gt=X,Ct=re;X=re=n}var Yt=Ue?n:eS(_),mn=[_,A,$,X,re,gt,Ct,fe,xe,Ie];if(Yt&&f4(mn,Yt),_=mn[0],A=mn[1],$=mn[2],X=mn[3],re=mn[4],Ie=mn[9]=mn[9]===n?Ue?0:_.length:Qs(mn[9]-pt,0),!Ie&&A&(w|E)&&(A&=-25),!A||A==g)var Rn=XT(_,A,$);else A==w||A==E?Rn=dk(_,A,Ie):(A==T||A==(g|T))&&!re.length?Rn=i4(_,A,$,X):Rn=mv.apply(n,mn);var yr=Yt?zT:Ek;return Tk(yr(Rn,mn),_,A)}function mk(_,A,$,X){return _===n||ep(_,Cd[$])&&!ti.call(X,$)?A:_}function gk(_,A,$,X,re,fe){return js(_)&&js(A)&&(fe.set(A,_),Fg(_,A,n,gk,fe),fe.delete(A)),_}function yk(_){return jk(_)?n:_}function vk(_,A,$,X,re,fe){var xe=$&p,Ie=_.length,Ue=A.length;if(Ie!=Ue&&!(xe&&Ue>Ie))return!1;var pt=fe.get(_),gt=fe.get(A);if(pt&&gt)return pt==A&&gt==_;var Ct=-1,Yt=!0,mn=$&m?new Ng:n;for(fe.set(_,A),fe.set(A,_);++Ct<Ie;){var Rn=_[Ct],yr=A[Ct];if(X)var Dn=xe?X(yr,Rn,Ct,A,_,fe):X(Rn,yr,Ct,_,A,fe);if(Dn!==n){if(Dn)continue;Yt=!1;break}if(mn){if(!V1(A,function(Dr,Ur){if(!wa(mn,Ur)&&(Rn===Dr||re(Rn,Dr,$,X,fe)))return mn.push(Ur)})){Yt=!1;break}}else if(!(Rn===yr||re(Rn,yr,$,X,fe))){Yt=!1;break}}return fe.delete(_),fe.delete(A),Yt}function bk(_,A,$,X,re,fe,xe){switch($){case ht:if(_.byteLength!=A.byteLength||_.byteOffset!=A.byteOffset)return!1;_=_.buffer,A=A.buffer;case Oe:return!(_.byteLength!=A.byteLength||!fe(new Kx(_),new Kx(A)));case pe:case Te:case tt:return ep(+_,+A);case ye:return _.name==A.name&&_.message==A.message;case yt:case Ot:return _==A+"";case De:var Ie=gT;case Tt:var Ue=X&p;if(Ie||(Ie=ym),_.size!=A.size&&!Ue)return!1;var pt=xe.get(_);if(pt)return pt==A;X|=m,xe.set(_,A);var gt=vk(Ie(_),Ie(A),X,re,fe,xe);return xe.delete(_),gt;case qe:if(Tl)return Tl.call(_)==Tl.call(A)}return!1}function o4(_,A,$,X,re,fe){var xe=$&p,Ie=p_(_),Ue=Ie.length,pt=p_(A),gt=pt.length;if(Ue!=gt&&!xe)return!1;for(var Ct=Ue;Ct--;){var Yt=Ie[Ct];if(!(xe?Yt in A:ti.call(A,Yt)))return!1}var mn=fe.get(_),Rn=fe.get(A);if(mn&&Rn)return mn==A&&Rn==_;var yr=!0;fe.set(_,A),fe.set(A,_);for(var Dn=xe;++Ct<Ue;){Yt=Ie[Ct];var Dr=_[Yt],Ur=A[Yt];if(X)var Lf=xe?X(Ur,Dr,Yt,A,_,fe):X(Dr,Ur,Yt,_,A,fe);if(!(Lf===n?Dr===Ur||re(Dr,Ur,$,X,fe):Lf)){yr=!1;break}Dn||(Dn=Yt=="constructor")}if(yr&&!Dn){var kl=_.constructor,$f=A.constructor;kl!=$f&&"constructor"in _&&"constructor"in A&&!(typeof kl=="function"&&kl instanceof kl&&typeof $f=="function"&&$f instanceof $f)&&(yr=!1)}return fe.delete(_),fe.delete(A),yr}function Fd(_){return Al(iS(_,n,aS),_+"")}function p_(_){return LT(_,Ra,kf)}function m_(_){return LT(_,Ac,a4)}var eS=AT?function(_){return AT.get(_)}:$U;function gv(_){for(var A=_.name+"",$=ev[A],X=ti.call(ev,A)?$.length:0;X--;){var re=$[X],fe=re.func;if(fe==null||fe==_)return re.name}return A}function Qh(_){var A=ti.call(oe,"placeholder")?oe:_;return A.placeholder}function Sn(){var _=oe.iteratee||MU;return _=_===MU?uv:_,arguments.length?_(arguments[0],arguments[1]):_}function g_(_,A){var $=_.__data__;return yv(A)?$[typeof A=="string"?"string":"hash"]:$.map}function y_(_){for(var A=Ra(_),$=A.length;$--;){var X=A[$],re=_[X];A[$]=[X,re,x_(re)]}return A}function Im(_,A){var $=W1(_,A);return QI($)?$:n}function tS(_){var A=ti.call(_,kg),$=_[kg];try{_[kg]=n;var X=!0}catch{}var re=Gx.call(_);return X&&(A?_[kg]=$:delete _[kg]),re}var kf=TT?function(_){return _==null?[]:(_=Ii(_),hc(TT(_),function(A){return wT.call(_,A)}))}:FU,a4=TT?function(_){for(var A=[];_;)Tf(A,kf(_)),_=Cf(_);return A}:FU,ta=Zo;(Jx&&ta(new Jx(new ArrayBuffer(1)))!=ht||Dg&&ta(new Dg)!=De||Zx&&ta(Zx.resolve())!=Ge||bm&&ta(new bm)!=Tt||e_&&ta(new e_)!=wt)&&(ta=function(_){var A=Zo(_),$=A==Me?_.constructor:n,X=$?km($):"";if(X)switch(X){case qI:return ht;case xm:return De;case jO:return Ge;case tv:return Tt;case Ad:return wt}return A});function xk(_,A,$){for(var X=-1,re=$.length;++X<re;){var fe=$[X],xe=fe.size;switch(fe.type){case"drop":_+=xe;break;case"dropRight":A-=xe;break;case"take":A=Ea(A,_+xe);break;case"takeRight":_=Qs(_,A-xe);break}}return{start:_,end:A}}function u4(_){var A=_.match(Qo);return A?A[1].split(_l):[]}function _k(_,A,$){A=Ld(A,_);for(var X=-1,re=A.length,fe=!1;++X<re;){var xe=Nf(A[X]);if(!(fe=_!=null&&$(_,xe)))break;_=_[xe]}return fe||++X!=re?fe:(re=_==null?0:_.length,!!re&&I4(re)&&ls(xe,re)&&(sr(_)||I_(_)))}function v_(_){var A=_.length,$=new _.constructor(A);return A&&typeof _[0]=="string"&&ti.call(_,"index")&&($.index=_.index,$.input=_.input),$}function na(_){return typeof _.constructor=="function"&&!Jh(_)?nv(Cf(_)):{}}function dU(_,A,$){var X=_.constructor;switch(A){case Oe:return f_(_);case pe:case Te:return new X(+_);case ht:return JO(_,$);case Lt:case Ft:case dn:case Nn:case Tr:case Ni:case Un:case tr:case Ai:return t4(_,$);case De:return new X;case tt:case Ot:return new X(_);case yt:return ZO(_);case Tt:return new X;case qe:return e4(_)}}function hU(_,A){var $=A.length;if(!$)return _;var X=$-1;return A[X]=($>1?"& ":"")+A[X],A=A.join($>2?", ":" "),_.replace(ho,`{
/* [wrapped with `+A+`] */
`)}function nS(_){return sr(_)||I_(_)||!!($O&&_&&_[$O])}function ls(_,A){var $=typeof _;return A=A??Z,!!A&&($=="number"||$!="symbol"&&wd.test(_))&&_>-1&&_%1==0&&_<A}function ru(_,A,$){if(!js($))return!1;var X=typeof A;return(X=="number"?Cc($)&&ls(A,$.length):X=="string"&&A in $)?ep($[A],_):!1}function en(_,A){if(sr(_))return!1;var $=typeof _;return $=="number"||$=="symbol"||$=="boolean"||_==null||Mf(_)?!0:ji.test(_)||!Jr.test(_)||A!=null&&_ in Ii(A)}function yv(_){var A=typeof _;return A=="string"||A=="number"||A=="symbol"||A=="boolean"?_!=="__proto__":_===null}function b_(_){var A=gv(_),$=oe[A];if(typeof $!="function"||!(A in ir.prototype))return!1;if(_===$)return!0;var X=eS($);return!!X&&_===X[0]}function l4(_){return!!bT&&bT in _}var pU=K1?Yg:BU;function Jh(_){var A=_&&_.constructor,$=typeof A=="function"&&A.prototype||Cd;return _===$}function x_(_){return _===_&&!js(_)}function rS(_,A){return function($){return $==null?!1:$[_]===A&&(A!==n||_ in Ii($))}}function c4(_){var A=Mt(_,function(X){return $.size===l&&$.clear(),X}),$=A.cache;return A}function f4(_,A){var $=_[1],X=A[1],re=$|X,fe=re<(g|v|I),xe=X==I&&$==w||X==I&&$==R&&_[7].length<=A[8]||X==(I|R)&&A[7].length<=A[8]&&$==w;if(!(fe||xe))return _;X&g&&(_[2]=A[2],re|=$&g?0:b);var Ie=A[3];if(Ie){var Ue=_[3];_[3]=Ue?n4(Ue,Ie,A[4]):Ie,_[4]=Ue?pc(_[3],c):A[4]}return Ie=A[5],Ie&&(Ue=_[5],_[5]=Ue?ck(Ue,Ie,A[6]):Ie,_[6]=Ue?pc(_[5],c):A[6]),Ie=A[7],Ie&&(_[7]=Ie),X&I&&(_[8]=_[8]==null?A[8]:Ea(_[8],A[8])),_[9]==null&&(_[9]=A[9]),_[0]=A[0],_[1]=re,_}function d4(_){var A=[];if(_!=null)for(var $ in Ii(_))A.push($);return A}function wk(_){return Gx.call(_)}function iS(_,A,$){return A=Qs(A===n?_.length-1:A,0),function(){for(var X=arguments,re=-1,fe=Qs(X.length-A,0),xe=Ye(fe);++re<fe;)xe[re]=X[A+re];re=-1;for(var Ie=Ye(A+1);++re<A;)Ie[re]=X[re];return Ie[A]=$(xe),Uo(_,this,Ie)}}function zo(_,A){return A.length<2?_:qh(_,ka(A,0,-1))}function Rf(_,A){for(var $=_.length,X=Ea(A.length,$),re=tu(_);X--;){var fe=A[X];_[X]=ls(fe,$)?re[fe]:n}return _}function Bd(_,A){if(!(A==="constructor"&&typeof _[A]=="function")&&A!="__proto__")return _[A]}var Ek=Df(zT),vv=VI||function(_,A){return cn.setTimeout(_,A)},Al=Df(Md);function Tk(_,A,$){var X=A+"";return Al(_,hU(X,h4(u4(X),$)))}function Df(_){var A=0,$=0;return function(){var X=lU(),re=F-(X-$);if($=X,re>0){if(++A>=B)return arguments[0]}else A=0;return _.apply(n,arguments)}}function sS(_,A){var $=-1,X=_.length,re=X-1;for(A=A===n?X:A;++$<A;){var fe=lv($,re),xe=_[fe];_[fe]=_[$],_[$]=xe}return _.length=A,_}var Sk=c4(function(_){var A=[];return _.charCodeAt(0)===46&&A.push(""),_.replace(oi,function($,X,re,fe){A.push(re?fe.replace(ac,"$1"):X||$)}),A});function Nf(_){if(typeof _=="string"||Mf(_))return _;var A=_+"";return A=="0"&&1/_==-1/0?"-0":A}function km(_){if(_!=null){try{return Wx.call(_)}catch{}try{return _+""}catch{}}return""}function h4(_,A){return yo(Y,function($){var X="_."+$[0];A&$[1]&&!Cg(_,X)&&_.push(X)}),_.sort()}function p4(_){if(_ instanceof ir)return _.clone();var A=new Ta(_.__wrapped__,_.__chain__);return A.__actions__=tu(_.__actions__),A.__index__=_.__index__,A.__values__=_.__values__,A}function oS(_,A,$){($?ru(_,A,$):A===n)?A=1:A=Qs(pr(A),0);var X=_==null?0:_.length;if(!X||A<1)return[];for(var re=0,fe=0,xe=Ye(Rg(X/A));re<X;)xe[fe++]=ka(_,re,re+=A);return xe}function Ck(_){for(var A=-1,$=_==null?0:_.length,X=0,re=[];++A<$;){var fe=_[A];fe&&(re[X++]=fe)}return re}function Tc(){var _=arguments.length;if(!_)return[];for(var A=Ye(_-1),$=arguments[0],X=_;X--;)A[X-1]=arguments[X];return Tf(sr($)?tu($):[$],Cs(A,1))}var jr=hr(function(_,A){return wo(_)?Nd(_,Cs(A,1,wo,!0)):[]}),Vo=hr(function(_,A){var $=iu(A);return wo($)&&($=n),wo(_)?Nd(_,Cs(A,1,wo,!0),Sn($,2)):[]}),Js=hr(function(_,A){var $=iu(A);return wo($)&&($=n),wo(_)?Nd(_,Cs(A,1,wo,!0),n,$):[]});function ra(_,A,$){var X=_==null?0:_.length;return X?(A=$||A===n?1:pr(A),ka(_,A<0?0:A,X)):[]}function Il(_,A,$){var X=_==null?0:_.length;return X?(A=$||A===n?1:pr(A),A=X-A,ka(_,0,A<0?0:A)):[]}function bv(_,A){return _&&_.length?l_(_,Sn(A,3),!0,!0):[]}function xo(_,A){return _&&_.length?l_(_,Sn(A,3),!0):[]}function __(_,A,$,X){var re=_==null?0:_.length;return re?($&&typeof $!="number"&&ru(_,A,$)&&($=0,X=re),YO(_,A,$,X)):[]}function Rm(_,A,$){var X=_==null?0:_.length;if(!X)return-1;var re=$==null?0:pr($);return re<0&&(re=Qs(X+re,0)),Ag(_,Sn(A,3),re)}function w_(_,A,$){var X=_==null?0:_.length;if(!X)return-1;var re=X-1;return $!==n&&(re=pr($),re=$<0?Qs(X+re,0):Ea(re,X-1)),Ag(_,Sn(A,3),re,!0)}function aS(_){var A=_==null?0:_.length;return A?Cs(_,1):[]}function E_(_){var A=_==null?0:_.length;return A?Cs(_,ne):[]}function ju(_,A){var $=_==null?0:_.length;return $?(A=A===n?1:pr(A),Cs(_,A)):[]}function Ak(_){for(var A=-1,$=_==null?0:_.length,X={};++A<$;){var re=_[A];X[re[0]]=re[1]}return X}function Vg(_){return _&&_.length?_[0]:n}function Zh(_,A,$){var X=_==null?0:_.length;if(!X)return-1;var re=$==null?0:pr($);return re<0&&(re=Qs(X+re,0)),Bh(_,A,re)}function uS(_){var A=_==null?0:_.length;return A?ka(_,0,-1):[]}var Ik=hr(function(_){var A=Ei(_,dv);return A.length&&A[0]===_[0]?$T(A):[]}),Dm=hr(function(_){var A=iu(_),$=Ei(_,dv);return A===iu($)?A=n:$.pop(),$.length&&$[0]===_[0]?$T($,Sn(A,2)):[]}),lS=hr(function(_){var A=iu(_),$=Ei(_,dv);return A=typeof A=="function"?A:n,A&&$.pop(),$.length&&$[0]===_[0]?$T($,n,A):[]});function Nm(_,A){return _==null?"":ST.call(_,A)}function iu(_){var A=_==null?0:_.length;return A?_[A-1]:n}function T_(_,A,$){var X=_==null?0:_.length;if(!X)return-1;var re=X;return $!==n&&(re=pr($),re=re<0?Qs(X+re,0):Ea(re,X-1)),A===A?sU(_,A,re):Ag(_,D,re,!0)}function kk(_,A){return _&&_.length?UT(_,pr(A)):n}var cS=hr(S_);function S_(_,A){return _&&_.length&&A&&A.length?Bs(_,A):_}function su(_,A,$){return _&&_.length&&A&&A.length?Bs(_,A,Sn($,2)):_}function Pm(_,A,$){return _&&_.length&&A&&A.length?Bs(_,A,n,$):_}var Pf=Fd(function(_,A){var $=_==null?0:_.length,X=OT(_,A);return bo(_,Ei(A,function(re){return ls(re,$)?+re:re}).sort(lk)),X});function Uu(_,A){var $=[];if(!(_&&_.length))return $;var X=-1,re=[],fe=_.length;for(A=Sn(A,3);++X<fe;){var xe=_[X];A(xe,X,_)&&($.push(xe),re.push(X))}return bo(_,re),$}function fS(_){return _==null?_:CT.call(_)}function Rk(_,A,$){var X=_==null?0:_.length;return X?($&&typeof $!="number"&&ru(_,A,$)?(A=0,$=X):(A=A==null?0:pr(A),$=$===n?X:pr($)),ka(_,A,$)):[]}function Dk(_,A){return cv(_,A)}function mU(_,A,$){return VT(_,A,Sn($,2))}function Om(_,A){var $=_==null?0:_.length;if($){var X=cv(_,A);if(X<$&&ep(_[X],A))return X}return-1}function m4(_,A){return cv(_,A,!0)}function Nk(_,A,$){return VT(_,A,Sn($,2),!0)}function Hg(_,A){var $=_==null?0:_.length;if($){var X=cv(_,A,!0)-1;if(ep(_[X],A))return X}return-1}function Pk(_){return _&&_.length?ik(_):[]}function qg(_,A){return _&&_.length?ik(_,Sn(A,2)):[]}function g4(_){var A=_==null?0:_.length;return A?ka(_,1,A):[]}function y4(_,A,$){return _&&_.length?(A=$||A===n?1:pr(A),ka(_,0,A<0?0:A)):[]}function Ok(_,A,$){var X=_==null?0:_.length;return X?(A=$||A===n?1:pr(A),A=X-A,ka(_,A<0?0:A,X)):[]}function dS(_,A){return _&&_.length?l_(_,Sn(A,3),!1,!0):[]}function gU(_,A){return _&&_.length?l_(_,Sn(A,3)):[]}var yU=hr(function(_){return Kh(Cs(_,1,wo,!0))}),v4=hr(function(_){var A=iu(_);return wo(A)&&(A=n),Kh(Cs(_,1,wo,!0),Sn(A,2))}),b4=hr(function(_){var A=iu(_);return A=typeof A=="function"?A:n,Kh(Cs(_,1,wo,!0),n,A)});function Wg(_){return _&&_.length?Kh(_):[]}function vU(_,A){return _&&_.length?Kh(_,Sn(A,2)):[]}function xv(_,A){return A=typeof A=="function"?A:n,_&&_.length?Kh(_,n,A):[]}function hS(_){if(!(_&&_.length))return[];var A=0;return _=hc(_,function($){if(wo($))return A=Qs($.length,A),!0}),ai(A,function($){return Ei(_,te($))})}function vs(_,A){if(!(_&&_.length))return[];var $=hS(_);return A==null?$:Ei($,function(X){return Uo(A,n,X)})}var bU=hr(function(_,A){return wo(_)?Nd(_,A):[]}),x4=hr(function(_){return qT(hc(_,wo))}),xU=hr(function(_){var A=iu(_);return wo(A)&&(A=n),qT(hc(_,wo),Sn(A,2))}),_U=hr(function(_){var A=iu(_);return A=typeof A=="function"?A:n,qT(hc(_,wo),n,A)}),_4=hr(hS);function w4(_,A){return c_(_||[],A||[],Mg)}function wU(_,A){return c_(_||[],A||[],jg)}var Sc=hr(function(_){var A=_.length,$=A>1?_[A-1]:n;return $=typeof $=="function"?(_.pop(),$):n,vs(_,$)});function pS(_){var A=oe(_);return A.__chain__=!0,A}function EU(_,A){return A(_),_}function Of(_,A){return A(_)}var mS=Fd(function(_){var A=_.length,$=A?_[0]:0,X=this.__wrapped__,re=function(fe){return OT(fe,_)};return A>1||this.__actions__.length||!(X instanceof ir)||!ls($)?this.thru(re):(X=X.slice($,+$+(A?1:0)),X.__actions__.push({func:Of,args:[re],thisArg:n}),new Ta(X,this.__chain__).thru(function(fe){return A&&!fe.length&&fe.push(n),fe}))});function Gg(){return pS(this)}function gS(){return new Ta(this.value(),this.__chain__)}function Mk(){this.__values__===n&&(this.__values__=aue(this.value()));var _=this.__index__>=this.__values__.length,A=_?n:this.__values__[this.__index__++];return{done:_,value:A}}function Lk(){return this}function TU(_){for(var A,$=this;$ instanceof Id;){var X=p4($);X.__index__=0,X.__values__=n,A?re.__wrapped__=X:A=X;var re=X;$=$.__wrapped__}return re.__wrapped__=_,A}function $k(){var _=this.__wrapped__;if(_ instanceof ir){var A=_;return this.__actions__.length&&(A=new ir(this)),A=A.reverse(),A.__actions__.push({func:Of,args:[fS],thisArg:n}),new Ta(A,this.__chain__)}return this.thru(fS)}function SU(){return fv(this.__wrapped__,this.__actions__)}var E4=YT(function(_,A,$){ti.call(_,$)?++_[$]:Dd(_,$,1)});function T4(_,A,$){var X=sr(_)?Sg:r_;return $&&ru(_,A,$)&&(A=n),X(_,Sn(A,3))}function yS(_,A){var $=sr(_)?hc:KI;return $(_,Sn(A,3))}var vS=zg(Rm),S4=zg(w_);function Fk(_,A){return Cs(wS(_,A),1)}function C4(_,A){return Cs(wS(_,A),ne)}function Bk(_,A,$){return $=$===n?1:pr($),Cs(wS(_,A),$)}function C_(_,A){var $=sr(_)?yo:Pd;return $(_,Sn(A,3))}function bS(_,A){var $=sr(_)?Tg:GO;return $(_,Sn(A,3))}var xS=YT(function(_,A,$){ti.call(_,$)?_[$].push(A):Dd(_,$,[A])});function A4(_,A,$,X){_=Cc(_)?_:SS(_),$=$&&!X?pr($):0;var re=_.length;return $<0&&($=Qs(re+$,0)),k4(_)?$<=re&&_.indexOf(A,$)>-1:!!re&&Bh(_,A,$)>-1}var CU=hr(function(_,A,$){var X=-1,re=typeof A=="function",fe=Cc(_)?Ye(_.length):[];return Pd(_,function(xe){fe[++X]=re?Uo(A,xe,$):xc(xe,A,$)}),fe}),_S=YT(function(_,A,$){Dd(_,$,A)});function wS(_,A){var $=sr(_)?Ei:ZI;return $(_,Sn(A,3))}function A_(_,A,$,X){return _==null?[]:(sr(A)||(A=A==null?[]:[A]),$=X?n:$,sr($)||($=$==null?[]:[$]),a_(_,A,$))}var AU=YT(function(_,A,$){_[$?0:1].push(A)},function(){return[[],[]]});function ES(_,A,$){var X=sr(_)?Sf:ze,re=arguments.length<3;return X(_,Sn(A,4),$,re,Pd)}function y(_,A,$){var X=sr(_)?pT:ze,re=arguments.length<3;return X(_,Sn(A,4),$,re,GO)}function x(_,A){var $=sr(_)?hc:KI;return $(_,on(Sn(A,3)))}function k(_){var A=sr(_)?Rd:Ia;return A(_)}function M(_,A,$){($?ru(_,A,$):A===n)?A=1:A=pr(A);var X=sr(_)?Og:nk;return X(_,A)}function z(_){var A=sr(_)?qO:wc;return A(_)}function K(_){if(_==null)return 0;if(Cc(_))return k4(_)?Ig(_):_.length;var A=ta(_);return A==De||A==Tt?_.size:Yh(_).length}function se(_,A,$){var X=sr(_)?V1:rk;return $&&ru(_,A,$)&&(A=n),X(_,Sn(A,3))}var be=hr(function(_,A){if(_==null)return[];var $=A.length;return $>1&&ru(_,A[0],A[1])?A=[]:$>2&&ru(A[0],A[1],A[2])&&(A=[A[0]]),a_(_,Cs(A,1),[])}),Ce=ns||function(){return cn.Date.now()};function Xe(_,A){if(typeof A!="function")throw new mc(o);return _=pr(_),function(){if(--_<1)return A.apply(this,arguments)}}function St(_,A,$){return A=$?n:A,A=_&&A==null?_.length:A,$d(_,I,n,n,n,n,A)}function kt(_,A){var $;if(typeof A!="function")throw new mc(o);return _=pr(_),function(){return--_>0&&($=A.apply(this,arguments)),_<=1&&(A=n),$}}var _t=hr(function(_,A,$){var X=g;if($.length){var re=pc($,Qh(_t));X|=T}return $d(_,X,A,$,re)}),Xt=hr(function(_,A,$){var X=g|v;if($.length){var re=pc($,Qh(Xt));X|=T}return $d(A,X,_,$,re)});function rn(_,A,$){A=$?n:A;var X=$d(_,w,n,n,n,n,n,A);return X.placeholder=rn.placeholder,X}function sn(_,A,$){A=$?n:A;var X=$d(_,E,n,n,n,n,n,A);return X.placeholder=sn.placeholder,X}function As(_,A,$){var X,re,fe,xe,Ie,Ue,pt=0,gt=!1,Ct=!1,Yt=!0;if(typeof _!="function")throw new mc(o);A=jd(A)||0,js($)&&(gt=!!$.leading,Ct="maxWait"in $,fe=Ct?Qs(jd($.maxWait)||0,A):fe,Yt="trailing"in $?!!$.trailing:Yt);function mn(Eo){var tp=X,Xg=re;return X=re=n,pt=Eo,xe=_.apply(Xg,tp),xe}function Rn(Eo){return pt=Eo,Ie=vv(Dr,A),gt?mn(Eo):xe}function yr(Eo){var tp=Eo-Ue,Xg=Eo-pt,xue=A-tp;return Ct?Ea(xue,fe-Xg):xue}function Dn(Eo){var tp=Eo-Ue,Xg=Eo-pt;return Ue===n||tp>=A||tp<0||Ct&&Xg>=fe}function Dr(){var Eo=Ce();if(Dn(Eo))return Ur(Eo);Ie=vv(Dr,yr(Eo))}function Ur(Eo){return Ie=n,Yt&&X?mn(Eo):(X=re=n,xe)}function Lf(){Ie!==n&&ak(Ie),pt=0,X=Ue=re=Ie=n}function kl(){return Ie===n?xe:Ur(Ce())}function $f(){var Eo=Ce(),tp=Dn(Eo);if(X=arguments,re=this,Ue=Eo,tp){if(Ie===n)return Rn(Ue);if(Ct)return ak(Ie),Ie=vv(Dr,A),mn(Ue)}return Ie===n&&(Ie=vv(Dr,A)),xe}return $f.cancel=Lf,$f.flush=kl,$f}var Ve=hr(function(_,A){return YI(_,1,A)}),Pe=hr(function(_,A,$){return YI(_,jd(A)||0,$)});function We(_){return $d(_,N)}function Mt(_,A){if(typeof _!="function"||A!=null&&typeof A!="function")throw new mc(o);var $=function(){var X=arguments,re=A?A.apply(this,X):X[0],fe=$.cache;if(fe.has(re))return fe.get(re);var xe=_.apply(this,X);return $.cache=fe.set(re,xe)||fe,xe};return $.cache=new(Mt.Cache||gc),$}Mt.Cache=gc;function on(_){if(typeof _!="function")throw new mc(o);return function(){var A=arguments;switch(A.length){case 0:return!_.call(this);case 1:return!_.call(this,A[0]);case 2:return!_.call(this,A[0],A[1]);case 3:return!_.call(this,A[0],A[1],A[2])}return!_.apply(this,A)}}function _n(_){return kt(2,_)}var wn=QO(function(_,A){A=A.length==1&&sr(A[0])?Ei(A[0],di(Sn())):Ei(Cs(A,1),di(Sn()));var $=A.length;return hr(function(X){for(var re=-1,fe=Ea(X.length,$);++re<fe;)X[re]=A[re].call(this,X[re]);return Uo(_,this,X)})}),kn=hr(function(_,A){var $=pc(A,Qh(kn));return $d(_,T,n,A,$)}),_o=hr(function(_,A){var $=pc(A,Qh(_o));return $d(_,C,n,A,$)}),ni=Fd(function(_,A){return $d(_,R,n,n,n,A)});function Mm(_,A){if(typeof _!="function")throw new mc(o);return A=A===n?A:pr(A),hr(_,A)}function IU(_,A){if(typeof _!="function")throw new mc(o);return A=A==null?0:Qs(pr(A),0),hr(function($){var X=$[A],re=Xh($,0,A);return X&&Tf(re,X),Uo(_,this,re)})}function O9e(_,A,$){var X=!0,re=!0;if(typeof _!="function")throw new mc(o);return js($)&&(X="leading"in $?!!$.leading:X,re="trailing"in $?!!$.trailing:re),As(_,A,{leading:X,maxWait:A,trailing:re})}function M9e(_){return St(_,1)}function L9e(_,A){return kn(WT(A),_)}function $9e(){if(!arguments.length)return[];var _=arguments[0];return sr(_)?_:[_]}function F9e(_){return Fu(_,h)}function B9e(_,A){return A=typeof A=="function"?A:n,Fu(_,h,A)}function j9e(_){return Fu(_,f|h)}function U9e(_,A){return A=typeof A=="function"?A:n,Fu(_,f|h,A)}function z9e(_,A){return A==null||n_(_,A,Ra(A))}function ep(_,A){return _===A||_!==_&&A!==A}var V9e=ZT(Sm),H9e=ZT(function(_,A){return _>=A}),I_=FT(function(){return arguments}())?FT:function(_){return Zs(_)&&ti.call(_,"callee")&&!wT.call(_,"callee")},sr=Ye.isArray,q9e=Td?di(Td):KO;function Cc(_){return _!=null&&I4(_.length)&&!Yg(_)}function wo(_){return Zs(_)&&Cc(_)}function W9e(_){return _===!0||_===!1||Zs(_)&&Zo(_)==pe}var _v=HI||BU,G9e=Fs?di(Fs):Gh;function Y9e(_){return Zs(_)&&_.nodeType===1&&!jk(_)}function K9e(_){if(_==null)return!0;if(Cc(_)&&(sr(_)||typeof _=="string"||typeof _.splice=="function"||_v(_)||TS(_)||I_(_)))return!_.length;var A=ta(_);if(A==De||A==Tt)return!_.size;if(Jh(_))return!Yh(_).length;for(var $ in _)if(ti.call(_,$))return!1;return!0}function X9e(_,A){return _c(_,A)}function Q9e(_,A,$){$=typeof $=="function"?$:n;var X=$?$(_,A):n;return X===n?_c(_,A,n,$):!!X}function kU(_){if(!Zs(_))return!1;var A=Zo(_);return A==ye||A==Le||typeof _.message=="string"&&typeof _.name=="string"&&!jk(_)}function J9e(_){return typeof _=="number"&&Q1(_)}function Yg(_){if(!js(_))return!1;var A=Zo(_);return A==he||A==$e||A==_e||A==at}function rue(_){return typeof _=="number"&&_==pr(_)}function I4(_){return typeof _=="number"&&_>-1&&_%1==0&&_<=Z}function js(_){var A=typeof _;return _!=null&&(A=="object"||A=="function")}function Zs(_){return _!=null&&typeof _=="object"}var iue=dc?di(dc):XO;function Z9e(_,A){return _===A||av(_,A,y_(A))}function eje(_,A,$){return $=typeof $=="function"?$:n,av(_,A,y_(A),$)}function tje(_){return sue(_)&&_!=+_}function nje(_){if(pU(_))throw new zn(s);return QI(_)}function rje(_){return _===null}function ije(_){return _==null}function sue(_){return typeof _=="number"||Zs(_)&&Zo(_)==tt}function jk(_){if(!Zs(_)||Zo(_)!=Me)return!1;var A=Cf(_);if(A===null)return!0;var $=ti.call(A,"constructor")&&A.constructor;return typeof $=="function"&&$ instanceof $&&Wx.call($)==xT}var RU=Eg?di(Eg):s_;function sje(_){return rue(_)&&_>=-9007199254740991&&_<=Z}var oue=Ef?di(Ef):Od;function k4(_){return typeof _=="string"||!sr(_)&&Zs(_)&&Zo(_)==Ot}function Mf(_){return typeof _=="symbol"||Zs(_)&&Zo(_)==qe}var TS=hT?di(hT):o_;function oje(_){return _===n}function aje(_){return Zs(_)&&ta(_)==wt}function uje(_){return Zs(_)&&Zo(_)==ke}var lje=ZT(Cm),cje=ZT(function(_,A){return _<=A});function aue(_){if(!_)return[];if(Cc(_))return k4(_)?El(_):tu(_);if(zh&&_[zh])return rU(_[zh]());var A=ta(_),$=A==De?gT:A==Tt?ym:SS;return $(_)}function Kg(_){if(!_)return _===0?_:0;if(_=jd(_),_===ne||_===-1/0){var A=_<0?-1:1;return A*ie}return _===_?_:0}function pr(_){var A=Kg(_),$=A%1;return A===A?$?A-$:A:0}function uue(_){return _?Hh(pr(_),0,U):0}function jd(_){if(typeof _=="number")return _;if(Mf(_))return q;if(js(_)){var A=typeof _.valueOf=="function"?_.valueOf():_;_=js(A)?A+"":A}if(typeof _!="string")return _===0?_:+_;_=Rr(_);var $=hm.test(_);return $||_d.test(_)?rr(_.slice(2),$?2:8):Jo.test(_)?q:+_}function lue(_){return If(_,Ac(_))}function fje(_){return _?Hh(pr(_),-9007199254740991,Z):_===0?_:0}function ki(_){return _==null?"":Bu(_)}var dje=hv(function(_,A){if(Jh(A)||Cc(A)){If(A,Ra(A),_);return}for(var $ in A)ti.call(A,$)&&Mg(_,$,A[$])}),cue=hv(function(_,A){If(A,Ac(A),_)}),R4=hv(function(_,A,$,X){If(A,Ac(A),_,X)}),hje=hv(function(_,A,$,X){If(A,Ra(A),_,X)}),pje=Fd(OT);function mje(_,A){var $=nv(_);return A==null?$:is($,A)}var gje=hr(function(_,A){_=Ii(_);var $=-1,X=A.length,re=X>2?A[2]:n;for(re&&ru(A[0],A[1],re)&&(X=1);++$<X;)for(var fe=A[$],xe=Ac(fe),Ie=-1,Ue=xe.length;++Ie<Ue;){var pt=xe[Ie],gt=_[pt];(gt===n||ep(gt,Cd[pt])&&!ti.call(_,pt))&&(_[pt]=fe[pt])}return _}),yje=hr(function(_){return _.push(n,gk),Uo(fue,n,_)});function vje(_,A){return _a(_,Sn(A,3),Cl)}function bje(_,A){return _a(_,Sn(A,3),Tm)}function xje(_,A){return _==null?_:MT(_,Sn(A,3),Ac)}function _je(_,A){return _==null?_:i_(_,Sn(A,3),Ac)}function wje(_,A){return _&&Cl(_,Sn(A,3))}function Eje(_,A){return _&&Tm(_,Sn(A,3))}function Tje(_){return _==null?[]:ov(_,Ra(_))}function Sje(_){return _==null?[]:ov(_,Ac(_))}function DU(_,A,$){var X=_==null?n:qh(_,A);return X===n?$:X}function Cje(_,A){return _!=null&&_k(_,A,bc)}function NU(_,A){return _!=null&&_k(_,A,$g)}var Aje=r4(function(_,A,$){A!=null&&typeof A.toString!="function"&&(A=Gx.call(A)),_[A]=$},OU(Ic)),Ije=r4(function(_,A,$){A!=null&&typeof A.toString!="function"&&(A=Gx.call(A)),ti.call(_,A)?_[A].push($):_[A]=[$]},Sn),kje=hr(xc);function Ra(_){return Cc(_)?kd(_):Yh(_)}function Ac(_){return Cc(_)?kd(_,!0):JI(_)}function Rje(_,A){var $={};return A=Sn(A,3),Cl(_,function(X,re,fe){Dd($,A(X,re,fe),X)}),$}function Dje(_,A){var $={};return A=Sn(A,3),Cl(_,function(X,re,fe){Dd($,re,A(X,re,fe))}),$}var Nje=hv(function(_,A,$){Fg(_,A,$)}),fue=hv(function(_,A,$,X){Fg(_,A,$,X)}),Pje=Fd(function(_,A){var $={};if(_==null)return $;var X=!1;A=Ei(A,function(fe){return fe=Ld(fe,_),X||(X=fe.length>1),fe}),If(_,m_(_),$),X&&($=Fu($,f|d|h,yk));for(var re=A.length;re--;)HT($,A[re]);return $});function Oje(_,A){return due(_,on(Sn(A)))}var Mje=Fd(function(_,A){return _==null?{}:tk(_,A)});function due(_,A){if(_==null)return{};var $=Ei(m_(_),function(X){return[X]});return A=Sn(A),Am(_,$,function(X,re){return A(X,re[0])})}function Lje(_,A,$){A=Ld(A,_);var X=-1,re=A.length;for(re||(re=1,_=n);++X<re;){var fe=_==null?n:_[Nf(A[X])];fe===n&&(X=re,fe=$),_=Yg(fe)?fe.call(_):fe}return _}function $je(_,A,$){return _==null?_:jg(_,A,$)}function Fje(_,A,$,X){return X=typeof X=="function"?X:n,_==null?_:jg(_,A,$,X)}var hue=pk(Ra),pue=pk(Ac);function Bje(_,A,$){var X=sr(_),re=X||_v(_)||TS(_);if(A=Sn(A,4),$==null){var fe=_&&_.constructor;re?$=X?new fe:[]:js(_)?$=Yg(fe)?nv(Cf(_)):{}:$={}}return(re?yo:Cl)(_,function(xe,Ie,Ue){return A($,xe,Ie,Ue)}),$}function jje(_,A){return _==null?!0:HT(_,A)}function Uje(_,A,$){return _==null?_:ok(_,A,WT($))}function zje(_,A,$,X){return X=typeof X=="function"?X:n,_==null?_:ok(_,A,WT($),X)}function SS(_){return _==null?[]:Ss(_,Ra(_))}function Vje(_){return _==null?[]:Ss(_,Ac(_))}function Hje(_,A,$){return $===n&&($=A,A=n),$!==n&&($=jd($),$=$===$?$:0),A!==n&&(A=jd(A),A=A===A?A:0),Hh(jd(_),A,$)}function qje(_,A,$){return A=Kg(A),$===n?($=A,A=0):$=Kg($),_=jd(_),XI(_,A,$)}function Wje(_,A,$){if($&&typeof $!="boolean"&&ru(_,A,$)&&(A=$=n),$===n&&(typeof A=="boolean"?($=A,A=n):typeof _=="boolean"&&($=_,_=n)),_===n&&A===n?(_=0,A=1):(_=Kg(_),A===n?(A=_,_=0):A=Kg(A)),_>A){var X=_;_=A,A=X}if($||_%1||A%1){var re=Qx();return Ea(_+re*(A-_+tn("1e-"+((re+"").length-1))),A)}return lv(_,A)}var Gje=Ug(function(_,A,$){return A=A.toLowerCase(),_+($?mue(A):A)});function mue(_){return PU(ki(_).toLowerCase())}function gue(_){return _=ki(_),_&&_.replace(gf,kO).replace(fc,"")}function Yje(_,A,$){_=ki(_),A=Bu(A);var X=_.length;$=$===n?X:Hh(pr($),0,X);var re=$;return $-=A.length,$>=0&&_.slice($,re)==A}function Kje(_){return _=ki(_),_&&$o.test(_)?_.replace(Zi,RO):_}function Xje(_){return _=ki(_),_&&Fr.test(_)?_.replace(Ws,"\\$&"):_}var Qje=Ug(function(_,A,$){return _+($?"-":"")+A.toLowerCase()}),Jje=Ug(function(_,A,$){return _+($?" ":"")+A.toLowerCase()}),Zje=fk("toLowerCase");function e7e(_,A,$){_=ki(_),A=pr(A);var X=A?Ig(_):0;if(!A||X>=A)return _;var re=(A-X)/2;return h_(vm(re),$)+_+h_(Rg(re),$)}function t7e(_,A,$){_=ki(_),A=pr(A);var X=A?Ig(_):0;return A&&X<A?_+h_(A-X,$):_}function n7e(_,A,$){_=ki(_),A=pr(A);var X=A?Ig(_):0;return A&&X<A?h_(A-X,$)+_:_}function r7e(_,A,$){return $||A==null?A=0:A&&(A=+A),BO(ki(_).replace(es,""),A||0)}function i7e(_,A,$){return($?ru(_,A,$):A===n)?A=1:A=pr(A),Bg(ki(_),A)}function s7e(){var _=arguments,A=ki(_[0]);return _.length<3?A:A.replace(_[1],_[2])}var o7e=Ug(function(_,A,$){return _+($?"_":"")+A.toLowerCase()});function a7e(_,A,$){return $&&typeof $!="number"&&ru(_,A,$)&&(A=$=n),$=$===n?U:$>>>0,$?(_=ki(_),_&&(typeof A=="string"||A!=null&&!RU(A))&&(A=Bu(A),!A&&G1(_))?Xh(El(_),0,$):_.split(A,$)):[]}var u7e=Ug(function(_,A,$){return _+($?" ":"")+PU(A)});function l7e(_,A,$){return _=ki(_),$=$==null?0:Hh(pr($),0,_.length),A=Bu(A),_.slice($,$+A.length)==A}function c7e(_,A,$){var X=oe.templateSettings;$&&ru(_,A,$)&&(A=n),_=ki(_),A=R4({},A,X,mk);var re=R4({},A.imports,X.imports,mk),fe=Ra(re),xe=Ss(re,fe),Ie,Ue,pt=0,gt=A.interpolate||yf,Ct="__p += '",Yt=qx((A.escape||yf).source+"|"+gt.source+"|"+(gt===Du?ms:yf).source+"|"+(A.evaluate||yf).source+"|$","g"),mn="//# sourceURL="+(ti.call(A,"sourceURL")?(A.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++z1+"]")+`
`;_.replace(Yt,function(Dn,Dr,Ur,Lf,kl,$f){return Ur||(Ur=Lf),Ct+=_.slice(pt,$f).replace(vf,DO),Dr&&(Ie=!0,Ct+=`' +
__e(`+Dr+`) +
'`),kl&&(Ue=!0,Ct+=`';
`+kl+`;
__p += '`),Ur&&(Ct+=`' +
((__t = (`+Ur+`)) == null ? '' : __t) +
'`),pt=$f+Dn.length,Dn}),Ct+=`';
`;var Rn=ti.call(A,"variable")&&A.variable;if(!Rn)Ct=`with (obj) {
`+Ct+`
}
`;else if(Pr.test(Rn))throw new zn(a);Ct=(Ue?Ct.replace(Sr,""):Ct).replace(Lo,"$1").replace(Ji,"$1;"),Ct="function("+(Rn||"obj")+`) {
`+(Rn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Ie?", __e = _.escape":"")+(Ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ct+`return __p
}`;var yr=vue(function(){return ei(fe,mn+"return "+Ct).apply(n,xe)});if(yr.source=Ct,kU(yr))throw yr;return yr}function f7e(_){return ki(_).toLowerCase()}function d7e(_){return ki(_).toUpperCase()}function h7e(_,A,$){if(_=ki(_),_&&($||A===n))return Rr(_);if(!_||!(A=Bu(A)))return _;var X=El(_),re=El(A),fe=Ou(X,re),xe=gm(X,re)+1;return Xh(X,fe,xe).join("")}function p7e(_,A,$){if(_=ki(_),_&&($||A===n))return _.slice(0,vT(_)+1);if(!_||!(A=Bu(A)))return _;var X=El(_),re=gm(X,El(A))+1;return Xh(X,0,re).join("")}function m7e(_,A,$){if(_=ki(_),_&&($||A===n))return _.replace(es,"");if(!_||!(A=Bu(A)))return _;var X=El(_),re=Ou(X,El(A));return Xh(X,re).join("")}function g7e(_,A){var $=O,X=L;if(js(A)){var re="separator"in A?A.separator:re;$="length"in A?pr(A.length):$,X="omission"in A?Bu(A.omission):X}_=ki(_);var fe=_.length;if(G1(_)){var xe=El(_);fe=xe.length}if($>=fe)return _;var Ie=$-Ig(X);if(Ie<1)return X;var Ue=xe?Xh(xe,0,Ie).join(""):_.slice(0,Ie);if(re===n)return Ue+X;if(xe&&(Ie+=Ue.length-Ie),RU(re)){if(_.slice(Ie).search(re)){var pt,gt=Ue;for(re.global||(re=qx(re.source,ki(Xa.exec(re))+"g")),re.lastIndex=0;pt=re.exec(gt);)var Ct=pt.index;Ue=Ue.slice(0,Ct===n?Ie:Ct)}}else if(_.indexOf(Bu(re),Ie)!=Ie){var Yt=Ue.lastIndexOf(re);Yt>-1&&(Ue=Ue.slice(0,Yt))}return Ue+X}function y7e(_){return _=ki(_),_&&Qr.test(_)?_.replace(Pi,NO):_}var v7e=Ug(function(_,A,$){return _+($?" ":"")+A.toUpperCase()}),PU=fk("toUpperCase");function yue(_,A,$){return _=ki(_),A=$?n:A,A===n?nU(_)?oU(_):H1(_):_.match(A)||[]}var vue=hr(function(_,A){try{return Uo(_,n,A)}catch($){return kU($)?$:new zn($)}}),b7e=Fd(function(_,A){return yo(A,function($){$=Nf($),Dd(_,$,_t(_[$],_))}),_});function x7e(_){var A=_==null?0:_.length,$=Sn();return _=A?Ei(_,function(X){if(typeof X[1]!="function")throw new mc(o);return[$(X[0]),X[1]]}):[],hr(function(X){for(var re=-1;++re<A;){var fe=_[re];if(Uo(fe[0],this,X))return Uo(fe[1],this,X)}})}function _7e(_){return WO(Fu(_,f))}function OU(_){return function(){return _}}function w7e(_,A){return _==null||_!==_?A:_}var E7e=QT(),T7e=QT(!0);function Ic(_){return _}function MU(_){return uv(typeof _=="function"?_:Fu(_,f))}function S7e(_){return jT(Fu(_,f))}function C7e(_,A){return us(_,Fu(A,f))}var A7e=hr(function(_,A){return function($){return xc($,_,A)}}),I7e=hr(function(_,A){return function($){return xc(_,$,A)}});function LU(_,A,$){var X=Ra(A),re=ov(A,X);$==null&&!(js(A)&&(re.length||!X.length))&&($=A,A=_,_=this,re=ov(A,Ra(A)));var fe=!(js($)&&"chain"in $)||!!$.chain,xe=Yg(_);return yo(re,function(Ie){var Ue=A[Ie];_[Ie]=Ue,xe&&(_.prototype[Ie]=function(){var pt=this.__chain__;if(fe||pt){var gt=_(this.__wrapped__),Ct=gt.__actions__=tu(this.__actions__);return Ct.push({func:Ue,args:arguments,thisArg:_}),gt.__chain__=pt,gt}return Ue.apply(_,Tf([this.value()],arguments))})}),_}function k7e(){return cn._===this&&(cn._=MO),this}function $U(){}function R7e(_){return _=pr(_),hr(function(A){return UT(A,_)})}var D7e=JT(Ei),N7e=JT(Sg),P7e=JT(V1);function bue(_){return en(_)?te(Nf(_)):ys(_)}function O7e(_){return function(A){return _==null?n:qh(_,A)}}var M7e=hk(),L7e=hk(!0);function FU(){return[]}function BU(){return!1}function $7e(){return{}}function F7e(){return""}function B7e(){return!0}function j7e(_,A){if(_=pr(_),_<1||_>Z)return[];var $=U,X=Ea(_,U);A=Sn(A),_-=U;for(var re=ai(X,A);++$<_;)A($);return re}function U7e(_){return sr(_)?Ei(_,Nf):Mf(_)?[_]:tu(Sk(ki(_)))}function z7e(_){var A=++X1;return ki(_)+A}var V7e=d_(function(_,A){return _+A},0),H7e=ea("ceil"),q7e=d_(function(_,A){return _/A},1),W7e=ea("floor");function G7e(_){return _&&_.length?Lg(_,Ic,Sm):n}function Y7e(_,A){return _&&_.length?Lg(_,Sn(A,2),Sm):n}function K7e(_){return W(_,Ic)}function X7e(_,A){return W(_,Sn(A,2))}function Q7e(_){return _&&_.length?Lg(_,Ic,Cm):n}function J7e(_,A){return _&&_.length?Lg(_,Sn(A,2),Cm):n}var Z7e=d_(function(_,A){return _*A},1),eUe=ea("round"),tUe=d_(function(_,A){return _-A},0);function nUe(_){return _&&_.length?Ut(_,Ic):0}function rUe(_,A){return _&&_.length?Ut(_,Sn(A,2)):0}return oe.after=Xe,oe.ary=St,oe.assign=dje,oe.assignIn=cue,oe.assignInWith=R4,oe.assignWith=hje,oe.at=pje,oe.before=kt,oe.bind=_t,oe.bindAll=b7e,oe.bindKey=Xt,oe.castArray=$9e,oe.chain=pS,oe.chunk=oS,oe.compact=Ck,oe.concat=Tc,oe.cond=x7e,oe.conforms=_7e,oe.constant=OU,oe.countBy=E4,oe.create=mje,oe.curry=rn,oe.curryRight=sn,oe.debounce=As,oe.defaults=gje,oe.defaultsDeep=yje,oe.defer=Ve,oe.delay=Pe,oe.difference=jr,oe.differenceBy=Vo,oe.differenceWith=Js,oe.drop=ra,oe.dropRight=Il,oe.dropRightWhile=bv,oe.dropWhile=xo,oe.fill=__,oe.filter=yS,oe.flatMap=Fk,oe.flatMapDeep=C4,oe.flatMapDepth=Bk,oe.flatten=aS,oe.flattenDeep=E_,oe.flattenDepth=ju,oe.flip=We,oe.flow=E7e,oe.flowRight=T7e,oe.fromPairs=Ak,oe.functions=Tje,oe.functionsIn=Sje,oe.groupBy=xS,oe.initial=uS,oe.intersection=Ik,oe.intersectionBy=Dm,oe.intersectionWith=lS,oe.invert=Aje,oe.invertBy=Ije,oe.invokeMap=CU,oe.iteratee=MU,oe.keyBy=_S,oe.keys=Ra,oe.keysIn=Ac,oe.map=wS,oe.mapKeys=Rje,oe.mapValues=Dje,oe.matches=S7e,oe.matchesProperty=C7e,oe.memoize=Mt,oe.merge=Nje,oe.mergeWith=fue,oe.method=A7e,oe.methodOf=I7e,oe.mixin=LU,oe.negate=on,oe.nthArg=R7e,oe.omit=Pje,oe.omitBy=Oje,oe.once=_n,oe.orderBy=A_,oe.over=D7e,oe.overArgs=wn,oe.overEvery=N7e,oe.overSome=P7e,oe.partial=kn,oe.partialRight=_o,oe.partition=AU,oe.pick=Mje,oe.pickBy=due,oe.property=bue,oe.propertyOf=O7e,oe.pull=cS,oe.pullAll=S_,oe.pullAllBy=su,oe.pullAllWith=Pm,oe.pullAt=Pf,oe.range=M7e,oe.rangeRight=L7e,oe.rearg=ni,oe.reject=x,oe.remove=Uu,oe.rest=Mm,oe.reverse=fS,oe.sampleSize=M,oe.set=$je,oe.setWith=Fje,oe.shuffle=z,oe.slice=Rk,oe.sortBy=be,oe.sortedUniq=Pk,oe.sortedUniqBy=qg,oe.split=a7e,oe.spread=IU,oe.tail=g4,oe.take=y4,oe.takeRight=Ok,oe.takeRightWhile=dS,oe.takeWhile=gU,oe.tap=EU,oe.throttle=O9e,oe.thru=Of,oe.toArray=aue,oe.toPairs=hue,oe.toPairsIn=pue,oe.toPath=U7e,oe.toPlainObject=lue,oe.transform=Bje,oe.unary=M9e,oe.union=yU,oe.unionBy=v4,oe.unionWith=b4,oe.uniq=Wg,oe.uniqBy=vU,oe.uniqWith=xv,oe.unset=jje,oe.unzip=hS,oe.unzipWith=vs,oe.update=Uje,oe.updateWith=zje,oe.values=SS,oe.valuesIn=Vje,oe.without=bU,oe.words=yue,oe.wrap=L9e,oe.xor=x4,oe.xorBy=xU,oe.xorWith=_U,oe.zip=_4,oe.zipObject=w4,oe.zipObjectDeep=wU,oe.zipWith=Sc,oe.entries=hue,oe.entriesIn=pue,oe.extend=cue,oe.extendWith=R4,LU(oe,oe),oe.add=V7e,oe.attempt=vue,oe.camelCase=Gje,oe.capitalize=mue,oe.ceil=H7e,oe.clamp=Hje,oe.clone=F9e,oe.cloneDeep=j9e,oe.cloneDeepWith=U9e,oe.cloneWith=B9e,oe.conformsTo=z9e,oe.deburr=gue,oe.defaultTo=w7e,oe.divide=q7e,oe.endsWith=Yje,oe.eq=ep,oe.escape=Kje,oe.escapeRegExp=Xje,oe.every=T4,oe.find=vS,oe.findIndex=Rm,oe.findKey=vje,oe.findLast=S4,oe.findLastIndex=w_,oe.findLastKey=bje,oe.floor=W7e,oe.forEach=C_,oe.forEachRight=bS,oe.forIn=xje,oe.forInRight=_je,oe.forOwn=wje,oe.forOwnRight=Eje,oe.get=DU,oe.gt=V9e,oe.gte=H9e,oe.has=Cje,oe.hasIn=NU,oe.head=Vg,oe.identity=Ic,oe.includes=A4,oe.indexOf=Zh,oe.inRange=qje,oe.invoke=kje,oe.isArguments=I_,oe.isArray=sr,oe.isArrayBuffer=q9e,oe.isArrayLike=Cc,oe.isArrayLikeObject=wo,oe.isBoolean=W9e,oe.isBuffer=_v,oe.isDate=G9e,oe.isElement=Y9e,oe.isEmpty=K9e,oe.isEqual=X9e,oe.isEqualWith=Q9e,oe.isError=kU,oe.isFinite=J9e,oe.isFunction=Yg,oe.isInteger=rue,oe.isLength=I4,oe.isMap=iue,oe.isMatch=Z9e,oe.isMatchWith=eje,oe.isNaN=tje,oe.isNative=nje,oe.isNil=ije,oe.isNull=rje,oe.isNumber=sue,oe.isObject=js,oe.isObjectLike=Zs,oe.isPlainObject=jk,oe.isRegExp=RU,oe.isSafeInteger=sje,oe.isSet=oue,oe.isString=k4,oe.isSymbol=Mf,oe.isTypedArray=TS,oe.isUndefined=oje,oe.isWeakMap=aje,oe.isWeakSet=uje,oe.join=Nm,oe.kebabCase=Qje,oe.last=iu,oe.lastIndexOf=T_,oe.lowerCase=Jje,oe.lowerFirst=Zje,oe.lt=lje,oe.lte=cje,oe.max=G7e,oe.maxBy=Y7e,oe.mean=K7e,oe.meanBy=X7e,oe.min=Q7e,oe.minBy=J7e,oe.stubArray=FU,oe.stubFalse=BU,oe.stubObject=$7e,oe.stubString=F7e,oe.stubTrue=B7e,oe.multiply=Z7e,oe.nth=kk,oe.noConflict=k7e,oe.noop=$U,oe.now=Ce,oe.pad=e7e,oe.padEnd=t7e,oe.padStart=n7e,oe.parseInt=r7e,oe.random=Wje,oe.reduce=ES,oe.reduceRight=y,oe.repeat=i7e,oe.replace=s7e,oe.result=Lje,oe.round=eUe,oe.runInContext=Fe,oe.sample=k,oe.size=K,oe.snakeCase=o7e,oe.some=se,oe.sortedIndex=Dk,oe.sortedIndexBy=mU,oe.sortedIndexOf=Om,oe.sortedLastIndex=m4,oe.sortedLastIndexBy=Nk,oe.sortedLastIndexOf=Hg,oe.startCase=u7e,oe.startsWith=l7e,oe.subtract=tUe,oe.sum=nUe,oe.sumBy=rUe,oe.template=c7e,oe.times=j7e,oe.toFinite=Kg,oe.toInteger=pr,oe.toLength=uue,oe.toLower=f7e,oe.toNumber=jd,oe.toSafeInteger=fje,oe.toString=ki,oe.toUpper=d7e,oe.trim=h7e,oe.trimEnd=p7e,oe.trimStart=m7e,oe.truncate=g7e,oe.unescape=y7e,oe.uniqueId=z7e,oe.upperCase=v7e,oe.upperFirst=PU,oe.each=C_,oe.eachRight=bS,oe.first=Vg,LU(oe,function(){var _={};return Cl(oe,function(A,$){ti.call(oe.prototype,$)||(_[$]=A)}),_}(),{chain:!1}),oe.VERSION=r,yo(["bind","bindKey","curry","curryRight","partial","partialRight"],function(_){oe[_].placeholder=oe}),yo(["drop","take"],function(_,A){ir.prototype[_]=function($){$=$===n?1:Qs(pr($),0);var X=this.__filtered__&&!A?new ir(this):this.clone();return X.__filtered__?X.__takeCount__=Ea($,X.__takeCount__):X.__views__.push({size:Ea($,U),type:_+(X.__dir__<0?"Right":"")}),X},ir.prototype[_+"Right"]=function($){return this.reverse()[_]($).reverse()}}),yo(["filter","map","takeWhile"],function(_,A){var $=A+1,X=$==H||$==J;ir.prototype[_]=function(re){var fe=this.clone();return fe.__iteratees__.push({iteratee:Sn(re,3),type:$}),fe.__filtered__=fe.__filtered__||X,fe}}),yo(["head","last"],function(_,A){var $="take"+(A?"Right":"");ir.prototype[_]=function(){return this[$](1).value()[0]}}),yo(["initial","tail"],function(_,A){var $="drop"+(A?"":"Right");ir.prototype[_]=function(){return this.__filtered__?new ir(this):this[$](1)}}),ir.prototype.compact=function(){return this.filter(Ic)},ir.prototype.find=function(_){return this.filter(_).head()},ir.prototype.findLast=function(_){return this.reverse().find(_)},ir.prototype.invokeMap=hr(function(_,A){return typeof _=="function"?new ir(this):this.map(function($){return xc($,_,A)})}),ir.prototype.reject=function(_){return this.filter(on(Sn(_)))},ir.prototype.slice=function(_,A){_=pr(_);var $=this;return $.__filtered__&&(_>0||A<0)?new ir($):(_<0?$=$.takeRight(-_):_&&($=$.drop(_)),A!==n&&(A=pr(A),$=A<0?$.dropRight(-A):$.take(A-_)),$)},ir.prototype.takeRightWhile=function(_){return this.reverse().takeWhile(_).reverse()},ir.prototype.toArray=function(){return this.take(U)},Cl(ir.prototype,function(_,A){var $=/^(?:filter|find|map|reject)|While$/.test(A),X=/^(?:head|last)$/.test(A),re=oe[X?"take"+(A=="last"?"Right":""):A],fe=X||/^find/.test(A);re&&(oe.prototype[A]=function(){var xe=this.__wrapped__,Ie=X?[1]:arguments,Ue=xe instanceof ir,pt=Ie[0],gt=Ue||sr(xe),Ct=function(Dr){var Ur=re.apply(oe,Tf([Dr],Ie));return X&&Yt?Ur[0]:Ur};gt&&$&&typeof pt=="function"&&pt.length!=1&&(Ue=gt=!1);var Yt=this.__chain__,mn=!!this.__actions__.length,Rn=fe&&!Yt,yr=Ue&&!mn;if(!fe&&gt){xe=yr?xe:new ir(this);var Dn=_.apply(xe,Ie);return Dn.__actions__.push({func:Of,args:[Ct],thisArg:n}),new Ta(Dn,Yt)}return Rn&&yr?_.apply(this,Ie):(Dn=this.thru(Ct),Rn?X?Dn.value()[0]:Dn.value():Dn)})}),yo(["pop","push","shift","sort","splice","unshift"],function(_){var A=jh[_],$=/^(?:push|sort|unshift)$/.test(_)?"tap":"thru",X=/^(?:pop|shift)$/.test(_);oe.prototype[_]=function(){var re=arguments;if(X&&!this.__chain__){var fe=this.value();return A.apply(sr(fe)?fe:[],re)}return this[$](function(xe){return A.apply(sr(xe)?xe:[],re)})}}),Cl(ir.prototype,function(_,A){var $=oe[A];if($){var X=$.name+"";ti.call(ev,X)||(ev[X]=[]),ev[X].push({name:A,func:$})}}),ev[mv(n,v).name]=[{name:"wrapper",func:n}],ir.prototype.clone=kT,ir.prototype.reverse=WI,ir.prototype.value=rv,oe.prototype.at=mS,oe.prototype.chain=Gg,oe.prototype.commit=gS,oe.prototype.next=Mk,oe.prototype.plant=TU,oe.prototype.reverse=$k,oe.prototype.toJSON=oe.prototype.valueOf=oe.prototype.value=SU,oe.prototype.first=oe.prototype.head,zh&&(oe.prototype[zh]=Lk),oe},Y1=aU();Zr?((Zr.exports=Y1)._=Y1,Br._=Y1):cn._=Y1}).call(GQt)}(TD,TD.exports)),TD.exports}var KQt=YQt();const XQt="#/definitions/LibraryConfig",QQt="http://json-schema.org/draft-07/schema#",JQt=JSON.parse('{"Answer":{"additionalProperties":false,"description":"The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.\\n\\nAnswers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.\\n\\nHere\'s an example of how to use the Answer interface to define the correct answer to a question:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/question.md\\", \\"response\\": [  {    \\"id\\": \\"response1\\",    \\"prompt\\": \\"What is 2 + 2?\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"numerical\\"  } ] \\"correctAnswer\\": [{  \\"id\\": \\"response1\\",  \\"answer\\": 4 }] } ```\\n\\nIn this example, the correct answer to the question \\"What is 2 + 2?\\" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.","properties":{"acceptableHigh":{"description":"The acceptable high value for the answer. This is used to define a range of acceptable answers.","type":"number"},"acceptableLow":{"description":"The acceptable low value for the answer. This is used to define a range of acceptable answers.","type":"number"},"answer":{"description":"The correct answer to the question."},"id":{"description":"The id of the answer. This is used to identify the answer in the data file.","type":"string"}},"required":["id","answer"],"type":"object"},"BaseComponents":{"additionalProperties":{"additionalProperties":false,"properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"type":"object"},"description":"The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\\n\\n Using baseComponents:\\n\\n```js \\"baseComponents\\": { \\"my-image-component\\": { \\"instructionLocation\\": \\"sidebar\\", \\"nextButtonLocation\\": \\"sidebar\\", \\"path\\": \\"<study-name>/assets/my-image.jpg\\", \\"response\\": [   {     \\"id\\": \\"my-image-id\\",     \\"options\\": [\\"Europe\\", \\"Japan\\", \\"USA\\"],     \\"prompt\\": \\"Your Selected Answer:\\",     \\"type\\": \\"dropdown\\"   } ], \\"type\\": \\"image\\" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `\\"baseComponent\\":\\"my-image-component\\"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js \\"components\\": { \\"q1\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with largest GDP\\", \\"instruction\\": \\"Which region has the largest GDP?\\" }, \\"q2\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with lowest GDP\\", \\"instruction\\": \\"Which region has the lowest GDP?\\" }, \\"q3\\": { \\"baseComponent\\": \\"my-image-component\\", \\"description\\": \\"Choosing section with highest exports of Wheat\\", \\"instruction\\": \\"Which region had the most Wheat exported in 2022?\\" } } ```","type":"object"},"CheckboxResponse":{"additionalProperties":false,"description":"The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\\n\\n```js { \\"id\\": \\"q7\\", \\"prompt\\": \\"Checkbox example (not required)\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"checkbox\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\", \\"Option 3\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the checkboxes horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"maxSelections":{"description":"The maximum number of selections that are required.","type":"number"},"minSelections":{"description":"The minimum number of selections that are required.","type":"number"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"checkbox","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the checkboxes with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ComponentBlock":{"additionalProperties":false,"description":"The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\\n\\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\\n\\nHere\'s a snippet that shows how to use the random order:\\n\\n```js { \\"order\\": \\"random\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\\n\\n```js [ [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component1\\", \\"component3\\", \\"component2\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component2\\", \\"component3\\", \\"component1\\"], [\\"component3\\", \\"component1\\", \\"component2\\"], ... ] ```\\n\\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ] } ```\\n\\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], [\\"component1\\", \\"component2\\", \\"component3\\"], ... ] ```\\n\\nIn addition to the order property, the ComponentBlock interface also includes the `\\"numSamples\\"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `\\"numSamples\\"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\\n\\n```js { \\"order\\": \\"latinSquare\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\" ], \\"numSamples\\": 2 } ```\\n\\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\"], [\\"component2\\", \\"component3\\"], [\\"component3\\", \\"component1\\"], ... ] ```\\n\\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\\n\\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.","properties":{"components":{"description":"The components that are included in the order.","items":{"anyOf":[{"type":"string"},{"$ref":"#/definitions/ComponentBlock"}]},"type":"array"},"id":{"description":"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.","type":"string"},"interruptions":{"description":"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.","items":{"$ref":"#/definitions/InterruptionBlock"},"type":"array"},"numSamples":{"description":"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.","type":"number"},"order":{"description":"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.","enum":["random","latinSquare","fixed"],"type":"string"},"skip":{"$ref":"#/definitions/SkipConditions","description":"The skip conditions for the block."}},"required":["order","components"],"type":"object"},"ComponentBlockCondition":{"additionalProperties":false,"description":"The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.\\n\\nAnswers are checked against the correct answers defined in the IndividualComponent\'s [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.\\n\\nYou might use this if a participant answers two questions in a block incorrectly. Here\'s an example of how to use the ComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"check\\": \\"block\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.\\n\\nWhen the condition is met, the participant will immediately be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"block","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["check","condition","value","to"],"type":"object"},"DeterministicInterruption":{"additionalProperties":false,"description":"The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.\\n\\nFor example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.\\n\\nThe components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the DeterministicInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"firstLocation\\": 2,   \\"spacing\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], [\\"component1\\", \\"component2\\", \\"interruption1\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption2\\", \\"component6\\"], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"firstLocation":{"description":"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).","type":"number"},"spacing":{"description":"The number of components between breaks.","type":"number"}},"required":["firstLocation","spacing","components"],"type":"object"},"DropdownResponse":{"additionalProperties":false,"description":"The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\\n\\nExample: ```js { \\"id\\": \\"q-color\\", \\"prompt\\": \\"What is your favorite color?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"dropdown\\", \\"placeholder\\": \\"Please choose your favorite color\\", \\"options\\": [\\"Red\\", \\"Blue\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed in the dropdown.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"dropdown","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"ImageComponent":{"additionalProperties":false,"description":"The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\\n\\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { \\"type\\": \\"image\\", \\"path\\": \\"<study-name>/assets/image.jpg\\", \\"style\\": { \\"maxWidth\\": \\"50%\\" } } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"image","type":"string"}},"required":["path","response","type"],"type":"object"},"IndividualComponent":{"anyOf":[{"$ref":"#/definitions/MarkdownComponent"},{"$ref":"#/definitions/ReactComponent"},{"$ref":"#/definitions/ImageComponent"},{"$ref":"#/definitions/WebsiteComponent"},{"$ref":"#/definitions/QuestionnaireComponent"},{"$ref":"#/definitions/VegaComponent"}]},"IndividualComponentAllResponsesCondition":{"additionalProperties":false,"description":"The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\n\\nHere\'s an example of how to use the IndividualComponentAllResponsesCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"responses\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, if all responses to the component with the ID \\"attentionCheck\\" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"responses","description":"The check we\'ll perform.","type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"}},"required":["name","check","to"],"type":"object"},"IndividualComponentSingleResponseCondition":{"additionalProperties":false,"description":"The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.\\n\\n:::info\\n\\nIf you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.\\n\\n:::\\n\\nFor example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here\'s an example of how to use the IndividualComponentSingleResponseCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"response\\",   \\"responseId\\": \\"attentionCheckResponse\\",   \\"value\\": \\"the right answer\\",   \\"comparison\\": \\"equal\\",   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, we assign our skip logic to the component whose ID is \\"attentionCheck\\". If the answer given to the response \\"attentionCheckResponse\\" is equal to \\"the right answer\\", then the user will be redirected to the end of the study. If the response is _not_ equal to \\"the right answer\\", then the participant will continue to the next component in the sequence.","properties":{"check":{"const":"response","description":"The check we\'ll perform.","type":"string"},"comparison":{"description":"The comparison to use.","enum":["equal","notEqual"],"type":"string"},"name":{"description":"The name of the component to check.","type":"string"},"responseId":{"description":"The response id to check.","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The value to check.","type":["string","number"]}},"required":["name","check","responseId","value","comparison","to"],"type":"object"},"InheritedComponent":{"additionalProperties":false,"description":"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"baseComponent":{"type":"string"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"anyOf":[{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"}],"description":"The parameters that are passed to the react component. These can be used within your react component to render different things."},"path":{"anyOf":[{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},{"description":"The path to the image. This should be a relative path from the public folder.","type":"string"},{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"}],"description":"The path to the markdown file. This should be a relative path from the public folder."},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"style":{"additionalProperties":{"type":"string"},"description":"The style of the image. This is an object with css properties as keys and css values as values.","type":"object"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"enum":["markdown","react-component","image","website","questionnaire","vega"],"type":"string"}},"required":["baseComponent"],"type":"object"},"InterruptionBlock":{"anyOf":[{"$ref":"#/definitions/DeterministicInterruption"},{"$ref":"#/definitions/RandomInterruption"}],"description":"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},"LibraryConfig":{"additionalProperties":false,"description":"LibraryConfig is used to define the properties of a library configuration. This is a JSON object with three main components: baseComponents, components, and the sequences. Libraries are useful for defining components and sequences of these components that are to be reused across multiple studies. We (the reVISit team) provide several libraries that can be used in your study configurations. Check the public/libraries folder in the reVISit-studies repository for available libraries. We also plan to accept community contributions for libraries. If you have a library that you think would be useful for others, please reach out to us. We would love to include it in our repository.\\n\\nBelow is the general template that should be followed when constructing a Library configuration file.\\n\\n```js {  \\"$schema\\": \\"https://raw.githubusercontent.com/revisit-studies/study/v2.0.0-rc6/src/parser/LibraryConfigSchema.json\\",  \\"baseComponents\\": {    // BaseComponents here are defined exactly as is in the StudyConfig  },  \\"components\\": {    // Components here are defined exactly as is in the StudyConfig  },  \\"sequences\\": {   // Sequences here are defined as \\"key\\": \\"value\\" pairs where the key is the name of the sequence and the value is a ComponentBlock, just like in the StudyConfig  } } ```","properties":{"$schema":{"description":"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information","type":"string"},"baseComponents":{"$ref":"#/definitions/BaseComponents","description":"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},"components":{"additionalProperties":{"anyOf":[{"$ref":"#/definitions/IndividualComponent"},{"$ref":"#/definitions/InheritedComponent"}]},"description":"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.","type":"object"},"description":{"description":"A description of the library.","type":"string"},"doi":{"description":"The DOI of the paper where the content of the library is based on.","type":"string"},"externalLink":{"description":"The external link to the paper/website where the content of the library is based on.","type":"string"},"reference":{"description":"The reference to the paper where the content of the library is based on.","type":"string"},"sequences":{"additionalProperties":{"$ref":"#/definitions/ComponentBlock"},"description":"The order of the components in the study. This might include some randomness.","type":"object"}},"required":["$schema","description","components","sequences"],"type":"object"},"LikertResponse":{"additionalProperties":false,"description":"The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as \'Strongly Disagree\' and \'Strongly Agree\'.\\n\\nExample for a five-point Likert Scale:\\n\\n```js { \\"id\\": \\"q-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"likert\\", \\"leftLabel\\": \\"Not Enjoyable\\", \\"rightLabel\\": \\"Very Enjoyable\\", \\"numItems\\": 5 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the likert scale. E.g Strongly Disagree","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"numItems":{"description":"The number of options to render.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the likert scale. E.g Strongly Agree","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"likert","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","numItems","prompt","type"],"type":"object"},"LongTextResponse":{"additionalProperties":false,"description":"The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { \\"id\\": \\"q-name\\", \\"prompt\\": \\"What is your first name?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"longText\\", \\"placeholder\\": \\"Please enter your first name\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"longText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"MarkdownComponent":{"additionalProperties":false,"description":"The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\\n\\n```js { \\"type\\": \\"markdown\\", \\"path\\": \\"<study-name>/assets/help.md\\", \\"response\\": [] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the markdown file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"markdown","type":"string"}},"required":["path","response","type"],"type":"object"},"MatrixResponse":{"additionalProperties":false,"description":"The MatrixResponse interface is used to define the properties of a matrix radio or matrix checkbox response. Question options are rendered as rows of the matrix, each row containing its own radio/checkbox group. Answer options are rendered as column headers of the matrix. These can be customized by passing in the custom strings into the answer options. Alternatively, `answerOptions` can be set to one of the following custom strings: \'satisfaction5\',\'satisfaction7\', \'likely5\', \'likely7\'. This will automatically generate the appropriate headers for the matrix.\\n\\nExample for a 5-scale satisfaction matrix with three questions:\\n\\n```js { \\"id\\": \\"multi-satisfaction\\", \\"prompt\\": \\"Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable) for the following items.\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-radio\\", \\"answerOptions\\": \\"satisfaction5\\", \\"questionOptions\\": [  \\"The tool we created\\",  \\"The technique we developed\\",  \\"The authors of the tools\\" ] } ```\\n\\nHere\'s an example using custom columns (answerOptions):\\n\\n```js { \\"id\\": \\"multi-custom\\", \\"prompt\\": \\"Which categories do the following items belong to?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"matrix-checkbox\\", \\"answerOptions\\": [  \\"Has Legs\\",  \\"Has Wings\\",  \\"Can Swim\\" ], \\"questionOptions\\": [  \\"Dog\\",  \\"Snake\\",  \\"Eagle\\",  \\"Salmon\\",  \\"Platypus\\" ]\\n\\n} ```","properties":{"answerOptions":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"const":"likely5","type":"string"},{"const":"likely7","type":"string"},{"const":"satisfaction5","type":"string"},{"const":"satisfaction7","type":"string"}],"description":"The answer options (columns). We provide some shortcuts for a likelihood scale (ranging from highly unlikely to highly likely) and a satisfaction scale (ranging from highly unsatisfied to highly satisfied) with either 5 or 7 options to choose from."},"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"questionOptions":{"description":"The question options (rows) are the prompts for each response you\'d like to record.","items":{"type":"string"},"type":"array"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"enum":["matrix-radio","matrix-checkbox"],"type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["answerOptions","id","prompt","questionOptions","type"],"type":"object"},"NumberOption":{"additionalProperties":false,"description":"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"number"}},"required":["label","value"],"type":"object"},"NumericalResponse":{"additionalProperties":false,"description":"The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\\n\\nExample: ```js { \\"id\\": \\"q-numerical\\", \\"prompt\\": \\"Numerical example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"numerical\\", \\"placeholder\\": \\"Enter your age, range from 0 - 120\\", \\"max\\": 120, \\"min\\": 0 } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"max":{"description":"The maximum value that is accepted in the input.","type":"number"},"min":{"description":"The minimum value that is accepted in the input.","type":"number"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"numerical","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"QuestionnaireComponent":{"additionalProperties":false,"description":"A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\\n\\n```js { \\"type\\": \\"questionnaire\\", \\"response\\": [  {    \\"id\\": \\"gender\\",    \\"prompt\\": \\"Gender:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"checkbox\\",    \\"options\\": [\\"Man\\", \\"Woman\\", \\"Genderqueer\\", \\"Third-gender\\", ...]  } ] } ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"questionnaire","type":"string"}},"required":["response","type"],"type":"object"},"RadioResponse":{"additionalProperties":false,"description":"The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\\n\\nExample: ```js { \\"id\\": \\"q-radio\\", \\"prompt\\": \\"Radio button example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"radio\\", \\"options\\": [\\"Option 1\\", \\"Option 2\\"] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"horizontal":{"description":"Whether to render the radio buttons horizontally. Defaults to false, so they render horizontally.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"leftLabel":{"description":"The left label of the radio group. Used in Likert scales for example","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.","items":{"anyOf":[{"$ref":"#/definitions/StringOption"},{"type":"string"}]},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"rightLabel":{"description":"The right label of the radio group. Used in Likert scales for example","type":"string"},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"radio","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"},"withOther":{"description":"Whether to render the radios with an \\"other\\" option.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"RandomInterruption":{"additionalProperties":false,"description":"The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\\n\\nFor example, if you want to show a single interruption randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 1. If you want to show 3 interruptions randomly in the block, you would set `\\"spacing\\"` to \\"random\\" and `\\"numInterruptions\\"` to 3.\\n\\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\\n\\nHere\'s an example of how to use the RandomInterruption:\\n\\n```js { \\"order\\": \\"fixed\\", \\"components\\": [ \\"component1\\", \\"component2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"component6\\" ], \\"interruptions\\": [ {   \\"spacing\\": \\"random\\",   \\"numInterruptions\\": 3,   \\"components\\": [     \\"interruption1\\",     \\"interruption2\\"   ] } ] } ```\\n\\nThe resulting sequence array could be:\\n\\n```js [ [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], [\\"component1\\", \\"interruption1\\", \\"interruption2\\", \\"component2\\", \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"component4\\", \\"interruption1\\", \\"interruption2\\", \\"component5\\", \\"component6], [\\"component1\\", \\"component2\\" \\"interruption1\\", \\"interruption2\\", \\"component3\\", \\"interruption1\\", \\"interruption2\\", \\"component4\\", \\"component5\\", \\"interruption1\\", \\"interruption2\\", \\"component6], ... ] ```","properties":{"components":{"description":"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.","items":{"type":"string"},"type":"array"},"numInterruptions":{"description":"The number of times the interruption will be randomly added","type":"number"},"spacing":{"const":"random","description":"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.","type":"string"}},"required":["spacing","numInterruptions","components"],"type":"object"},"ReactComponent":{"additionalProperties":false,"description":"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\\n\\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\\n\\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\\n\\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\\n\\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don\'t use the default answer interface, and instead have something more unique.\\n\\nSo, for example, if I had the following ReactComponent in my config ```js { type: \'react-component\'; path: \'my_study/CoolComponent.tsx\'; parameters: {  name: \'Zach\';  age: 26; } } ```\\n\\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\\n\\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\\n\\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v2.0.0-rc6/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/example-brush-interactions (https://github.com/revisit-studies/study/tree/v2.0.0-rc6/src/public/example-brush-interactions/assets)","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the react component. These can be used within your react component to render different things.","type":"object"},"path":{"description":"The path to the react component. This should be a relative path from the src/public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"react-component","type":"string"}},"required":["path","response","type"],"type":"object"},"ReactiveResponse":{"additionalProperties":false,"description":"The ReactiveResponse interface is used to define the properties of a reactive response. ReactiveResponses render as a list, that is connected to a WebsiteComponent, VegaComponent, or ReactComponent. When data is sent from the components, it is displayed in the list.\\n\\n```js { \\"id\\": \\"reactiveResponse\\", \\"prompt\\": \\"Answer clicked in the stimulus\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"reactive\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"reactive","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"RepeatedComponentBlockCondition":{"additionalProperties":false,"description":"The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.\\n\\nHere\'s an example of how to use the RepeatedComponentBlockCondition:\\n\\n```js { ... \\"skip\\": [ {   \\"name\\": \\"attentionCheck\\",   \\"check\\": \\"repeatedComponent\\",   \\"condition\\": \\"numIncorrect\\",   \\"value\\": 2,   \\"to\\": \\"end\\" } ] ... } ```\\n\\nIn this example, when the number of incorrect responses to the repeated component with the name \\"attentionCheck\\" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.","properties":{"check":{"const":"repeatedComponent","description":"The check we\'ll perform.","type":"string"},"condition":{"description":"The condition to check.","enum":["numCorrect","numIncorrect"],"type":"string"},"name":{"description":"The name of the repeated component to check (e.g. attentionCheck).","type":"string"},"to":{"description":"The id of the component or block to skip to","type":"string"},"value":{"description":"The number of correct or incorrect responses to check for.","type":"number"}},"required":["name","check","condition","value","to"],"type":"object"},"Response":{"anyOf":[{"$ref":"#/definitions/NumericalResponse"},{"$ref":"#/definitions/ShortTextResponse"},{"$ref":"#/definitions/LongTextResponse"},{"$ref":"#/definitions/LikertResponse"},{"$ref":"#/definitions/DropdownResponse"},{"$ref":"#/definitions/SliderResponse"},{"$ref":"#/definitions/RadioResponse"},{"$ref":"#/definitions/CheckboxResponse"},{"$ref":"#/definitions/ReactiveResponse"},{"$ref":"#/definitions/MatrixResponse"}]},"ResponseBlockLocation":{"enum":["sidebar","aboveStimulus","belowStimulus"],"type":"string"},"ShortTextResponse":{"additionalProperties":false,"description":"The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\\n\\n```js { \\"id\\": \\"q-short-text\\", \\"prompt\\": \\"Short text example\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"shortText\\", \\"placeholder\\": \\"Enter your answer here\\" } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"placeholder":{"description":"The placeholder text that is displayed in the input.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"shortText","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","prompt","type"],"type":"object"},"SkipConditions":{"description":"The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks\' skip conditions will be considered when computing the skip logic.\\n\\nSkip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the `\\"to\\"` property. If no conditions are met, the participant will continue to the next component in the sequence.\\n\\nSkip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.\\n\\nPlease see the interface definitions for more specific information on the different types of skip conditions.","items":{"anyOf":[{"$ref":"#/definitions/IndividualComponentSingleResponseCondition"},{"$ref":"#/definitions/IndividualComponentAllResponsesCondition"},{"$ref":"#/definitions/ComponentBlockCondition"},{"$ref":"#/definitions/RepeatedComponentBlockCondition"}]},"type":"array"},"SliderResponse":{"additionalProperties":false,"description":"The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\\n\\nExample: ```js { \\"id\\": \\"q-slider\\", \\"prompt\\": \\"How are you feeling?\\", \\"location\\": \\"aboveStimulus\\", \\"type\\": \\"slider\\", \\"options\\": [  {    \\"label\\": \\"Bad\\",    \\"value\\": 0  },  {    \\"label\\": \\"OK\\",    \\"value\\": 50  },  {    \\"label\\": \\"Good\\",    \\"value\\": 100  } ] } ```","properties":{"hidden":{"description":"Controls whether the response is hidden.","type":"boolean"},"id":{"description":"The id of the response. This is used to identify the response in the data file.","type":"string"},"location":{"$ref":"#/definitions/ResponseBlockLocation","description":"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},"options":{"description":"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.","items":{"$ref":"#/definitions/NumberOption"},"type":"array"},"paramCapture":{"description":"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.","type":"string"},"prompt":{"description":"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.","type":"string"},"required":{"description":"Controls whether the response is required to be answered. Defaults to true.","type":"boolean"},"requiredLabel":{"description":"You can provide a required label, which makes it so a participant has to answer with a response that matches label.","type":"string"},"requiredValue":{"description":"You can provide a required value, which makes it so a participant has to answer with that value."},"secondaryText":{"description":"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.","type":"string"},"type":{"const":"slider","type":"string"},"withDivider":{"description":"Renders the response with a trailing divider.","type":"boolean"},"withDontKnow":{"description":"Renders the response with an option for \\"I don\'t know\\". This counts as a completed answer for the validation.","type":"boolean"}},"required":["id","options","prompt","type"],"type":"object"},"StringOption":{"additionalProperties":false,"description":"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.","properties":{"label":{"description":"The label displayed to participants.","type":"string"},"value":{"description":"The value stored in the participant\'s data.","type":"string"}},"required":["label","value"],"type":"object"},"VegaComponent":{"anyOf":[{"$ref":"#/definitions/VegaComponentPath"},{"$ref":"#/definitions/VegaComponentConfig"}]},"VegaComponentConfig":{"additionalProperties":false,"description":"The VegaComponentConfig interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component by adding Vega/Vega-Lite specs within the reVISit config itself.\\n\\nTo do this, would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"config\\": { ... vega specs here ...}, }\\n\\nIIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"config":{"description":"The vega or vega-lite configuration.","type":"object"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["config","response","type"],"type":"object"},"VegaComponentPath":{"additionalProperties":false,"description":"The VegaComponentPath interface is used to define the properties of a Vega Component. This component is used to render a Vega/Vega-Lite Component with path pointing to your Vega/Vega-Lite specs file.\\n\\nFor example, to render a vega based stimuli with a path of `<study-name>/assets/vega.spec.json`, you would use the following snippet: ```js { \\"type\\": \\"vega\\", \\"path\\": \\"<study-name>/assets/vega.spec.json\\", } ```\\n\\nIf you are using Vega, you can use signals with `revisitAnswer` to send the user\'s responses back to the reVISit. For example, you can use the following snippet in your Vega spec file\'s signals section: ```js { \\"signals\\": [  {    \\"name\\": \\"revisitAnswer\\",    \\"value\\": {},    \\"on\\": [      {        \\"events\\": \\"rect:click\\",        \\"update\\": \\"{responseId: \'vegaDemoResponse1\', response: datum.category}\\"      }    ]  } ] } In this example, when a user clicks on a rectangle in the Vega chart, the `revisitAnswer` signal is updated with the responseId and response. This signal is then passed to reVISit as the participant\'s response. ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"path":{"description":"The path to the vega file. This should be a relative path from the public folder.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"vega","type":"string"}},"required":["path","response","type"],"type":"object"},"WebsiteComponent":{"additionalProperties":false,"description":"The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/assets/website.html\\", } ```\\n\\nTo pass a data from the config to the website, you can use the `parameters` field as below:\\n\\n```js { \\"type\\": \\"website\\", \\"path\\": \\"<study-name>/website.html\\", \\"parameters\\": {  \\"barData\\": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } \\"response\\": [  {    \\"id\\": \\"barChart\\",    \\"prompt\\": \\"Your selected answer:\\",    \\"location\\": \\"belowStimulus\\",    \\"type\\": \\"reactive\\"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\\n\\n```html <script src=\\"../../revisitUtilities/revisit-communicate.js\\"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\\n\\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\\n\\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\\n\\n```js const trrack = initializeTrrack({ initialState, registry });\\n\\n... Revisit.postProvenance(trrack.graph.backend); ```","properties":{"allowFailedTraining":{"description":"Controls whether the component should allow failed training. If not provided, the default is true.","type":"boolean"},"correctAnswer":{"description":"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.","items":{"$ref":"#/definitions/Answer"},"type":"array"},"description":{"description":"The description of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instruction":{"description":"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.","type":"string"},"instructionLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the instructions."},"meta":{"additionalProperties":{},"description":"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.","type":"object"},"nextButtonDisableTime":{"description":"A timeout (in ms) after which the next button will be disabled.","type":"number"},"nextButtonEnableTime":{"description":"A timer (in ms) after which the next button will be enabled.","type":"number"},"nextButtonLocation":{"$ref":"#/definitions/ResponseBlockLocation","description":"The location of the next button."},"nextButtonText":{"description":"The text that is displayed on the next button.","type":"string"},"parameters":{"additionalProperties":{},"description":"The parameters that are passed to the website (iframe). These can be used within your website to render different things.","type":"object"},"path":{"description":"The path to the website. This should be a relative path from the public folder or could be an external website.","type":"string"},"provideFeedback":{"description":"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.","type":"boolean"},"recordAudio":{"description":"Whether or not to record audio for a component. Only relevant if recordStudyAudio in the uiConfig is true. Defaults to false.","type":"boolean"},"response":{"description":"The responses to the component","items":{"$ref":"#/definitions/Response"},"type":"array"},"responseDividers":{"description":"Whether to show the response dividers. Defaults to false.","type":"boolean"},"trainingAttempts":{"description":"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.","type":"number"},"type":{"const":"website","type":"string"}},"required":["path","response","type"],"type":"object"}}'),ZQt={$ref:XQt,$schema:QQt,definitions:JQt},L5e=new Yoe;L5e.addSchema(ZQt);const eJt=L5e.getSchema("#/definitions/LibraryConfig");function $5e(e,t){return{...e,components:e.components.map(n=>typeof n=="object"?$5e(n,t):`$${t}.components.${n}`)}}function F5e(e,t,n=[]){return{...e,components:e.components.map(r=>{if(typeof r=="object")return F5e(r,t);const i=r.includes(".se.")?".se.":r.includes(".sequences.")?".sequences.":!1;if(typeof r=="string"&&r.startsWith("$")&&i){const[s,o]=r.split(i),a=s.slice(1);if(!t[a]){const c={message:`Library ${a} not found in imported libraries`,instancePath:"",params:{action:"check the library name"}};return n.push(c),r}let l=t[a].sequences[o];if(!l){const c={message:`Sequence ${o} not found in library ${s}`,instancePath:"",params:{action:"check the sequence name"}};return n.push(c),r}return l=$5e(l,a),l}return r})}}function tJt(e,t,n){Object.entries(n).forEach(([r,i])=>{Object.entries(i.components).forEach(([s,o])=>{var a;cI(o)&&!((a=i.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object in library \`${r}\``,instancePath:`/importedLibraries/${r}/components/${s}`,params:{action:"add the base component to the baseComponents object"}})})})}function nJt(e,t){let n=!1,r;try{r=JSON.parse(e),n=eJt(r)}catch{n=!1}const i=[],s=[];return r?n||i.push({message:"Library config is not valid",instancePath:"",params:{action:"fix the errors in the library config"}}):i.push({message:`Could not find library \`${t}\``,instancePath:"/importedLibraries/",params:{action:"make sure the library is in the correct location"}}),{...r,errors:i,warnings:s}}async function rJt(e){const t=await(await fetch(`${qa}libraries/${e}/config.json`)).text();return nJt(t,e)}async function iJt(e,t,n){const r=e.map(async s=>{const o=await rJt(s);return o.errors&&t.push(...o.errors),o.warnings&&n.push(...o.warnings),[s,o]}),i=Object.fromEntries(await Promise.all(r));return Object.entries(i).forEach(([s,o])=>{o.components||delete i[s]}),e.forEach(s=>{i[s]&&(i[s].components=Object.fromEntries(Object.entries(i[s].components).map(([o,a])=>{if(cI(a)){const u=KQt.merge({},i[s].baseComponents[a.baseComponent],a);return delete u.baseComponent,[[`$${s}.components.${o}`,u],[`$${s}.co.${o}`,u]]}return[[`$${s}.components.${o}`,a],[`$${s}.co.${o}`,a]]}).reduce((o,[a,u])=>(o.push(a,u),o),[])))}),i}const B5e=new Yoe;B5e.addSchema(WQt);const Qve=B5e.getSchema("#/definitions/GlobalConfig"),j5e=new Yoe;j5e.addSchema(zQt);const Jve=j5e.getSchema("#/definitions/StudyConfig");function sJt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function oJt(e){const t=JSON.parse(e),n=Qve(t),r=sJt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Qve.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function U5e(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):U5e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function aJt(e,t){const n=[],r=[];tJt(e,n,t),Object.entries(e.components).forEach(([o,a])=>{var u;cI(a)&&!((u=e.baseComponents)!=null&&u[a.baseComponent])&&n.push({message:`Base component \`${a.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${o}`,params:{action:"add the base component to the baseComponents object"}})});const i=n2e(e.sequence);i.forEach(o=>{var a;e.components[o]||n.push({message:(a=e.baseComponents)!=null&&a[o]?`Component \`${o}\` is a base component and cannot be used in the sequence`:`Component \`${o}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(o=>!i.includes(o)&&!o.includes(".se.")&&!o.includes(".sequences.")&&!o.includes(".co.")&&!o.includes(".components.")).forEach(o=>{r.push({message:`Component \`${o}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const s=[];return U5e(e.sequence,s),s.forEach(o=>{n.push({message:`Skip target \`${o}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:n,warnings:r}}async function Koe(e){let t=!1,n;try{n=JSON.parse(e),t=Jve(n)}catch{t=!1}let r=Jve.errors||[],i=[];if(t&&n){const s=n.importedLibraries||[],o=await iJt(s,r,i);Object.values(o).forEach(l=>{n.components={...n.components,...l.components},n.baseComponents={...n.baseComponents,...l.components}}),n.sequence=F5e(n.sequence,o,r);const{errors:a,warnings:u}=aJt(n,o);r=[...r,...a],i=[...i,...u]}else r=[...r,{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}async function uJt(e){const t=await(await fetch(`${qa}${e}`)).text();return await Koe(t)}async function Xoe(e,t){const n=t.configsList.find(r=>gTe(r)===e);if(n){const r=t.configs[n];return await uJt(`${r.path}`)}return null}async function lJt(e){const t={},n=e.configsList.map(async i=>Xoe(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function cJt({globalConfig:e}){const t=jE(),[n,r]=P.useState(null),i=e.configsList.includes(t)||t==="__revisit-widget";P.useEffect(()=>{if(t!=="__revisit-widget")return Xoe(t,e).then(p=>{r(p)}),()=>{};if(e&&t){const p=m=>{m.data.type==="revisitWidget/CONFIG"&&Koe(m.data.payload).then(async g=>{r(g);const v=await L1e(g);window.parent.postMessage({type:"revisitWidget/SEQUENCE_ARRAY",payload:v},"*")})};return window.addEventListener("message",p),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",p)}}return()=>{}},[e,t]);const[s,o]=P.useState([]),[a,u]=P.useState(null),{storageEngine:l}=Oo(),[c]=gx(),f=P.useMemo(()=>c.get("participantId"),[c]);P.useEffect(()=>{async function p(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await L1e(n));const g=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,v=Object.fromEntries(c.entries()),b=await fetch("https://api.ipify.org?format=json").catch(R=>""),w=b instanceof Response?await b.json():{ip:""},E={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:w.ip},T=await l.initializeParticipantSession(t,v,n,E,f||g),C=await l.getModes(t),I=await Zut(t,n,T.sequence,E,T.answers,C,T.participantId);u(I),o([{element:S.jsx(AXt,{}),children:[{path:"/",element:S.jsx(T5e,{to:vp(0),replace:!0})},{path:"/:index",element:n.errors.length>0?S.jsxs(S.Fragment,{children:[S.jsx(oo,{order:2,mb:8,children:"Error loading config"}),S.jsx(nL,{issues:n.errors,type:"error"})]}):S.jsx(cXt,{})}]}])}p()},[l,n,t,c,f]);const d=tTe(s);let h=null;return i?s.length===0?h=S.jsx(ld,{visible:!0}):h=d&&a?S.jsx(o2e.Provider,{value:a,children:S.jsx(Zat,{store:a.store,children:d})}):S.jsx(Sb,{}):h=S.jsx(Sb,{}),h}function T$({studyIds:e}){const t=ig(),{studyId:n}=L0(),r=Eh(),i=e.map(o=>({value:o,label:o})).sort((o,a)=>o.label.localeCompare(a.label)),s=r.pathname.includes("analysis");return S.jsx(Vi.Header,{p:"md",children:S.jsxs(Xf,{mt:-7,align:"center",children:[S.jsx(Xf.Col,{span:6,children:S.jsxs(an,{align:"center",onClick:()=>t("/"),style:{cursor:"pointer"},children:[S.jsx(mx,{w:40,src:`${qa}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),S.jsx(rd,{w:"md"}),S.jsx(oo,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:s?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),S.jsx(Xf.Col,{span:6,children:S.jsxs(an,{justify:"flex-end",direction:"row",children:[s&&S.jsxs(S.Fragment,{children:[S.jsx(OA,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:o=>t(`/analysis/stats/${o}`),mr:16}),S.jsx(yn,{component:"a",href:`${qa}${n}`,target:"_blank",leftSection:S.jsx(fTe,{}),mr:"sm",children:"Go to Study"})]}),S.jsx(hTe,{onClick:()=>t("/settings"),style:{cursor:"pointer",marginTop:s?6:void 0}})]})})]})})}function z5e({visibleParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=zX(!1),[a,u]=P.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;nne(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return S.jsxs(S.Fragment,{children:[S.jsxs(Yr,{style:{gap:n},children:[S.jsx(ss,{label:"Download all participants data as JSON",children:S.jsx(yn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:S.jsx(UZe,{})})}),S.jsx(ss,{label:"Download all participants data as a tidy CSV",children:S.jsx(yn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:S.jsx(pTe,{})})})]}),i&&a.length>0&&S.jsx(lkt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}var Zve={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5e=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},fJt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Qoe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(V5e(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):fJt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new dJt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class dJt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hJt=function(e){const t=V5e(e);return Qoe.encodeByteArray(t,!0)},A8=function(e){return hJt(e).replace(/\./g,"")},H5e=function(e){try{return Qoe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pJt=()=>q5e().__FIREBASE_DEFAULTS__,mJt=()=>{if(typeof process>"u"||typeof Zve>"u")return;const e=Zve.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},gJt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&H5e(e[1]);return t&&JSON.parse(t)},D7=()=>{try{return pJt()||mJt()||gJt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},W5e=e=>{var t,n;return(n=(t=D7())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},yJt=e=>{const t=W5e(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},G5e=()=>{var e;return(e=D7())===null||e===void 0?void 0:e.config},Y5e=e=>{var t;return(t=D7())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vJt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[A8(JSON.stringify(n)),A8(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bJt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gl())}function xJt(){var e;const t=(e=D7())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _Jt(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function wJt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function EJt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function TJt(){const e=gl();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function SJt(){return!xJt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Joe(){try{return typeof indexedDB=="object"}catch{return!1}}function CJt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AJt="FirebaseError";class _g extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=AJt,Object.setPrototypeOf(this,_g.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,NI.prototype.create)}}class NI{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?IJt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new _g(i,a,r)}}function IJt(e,t){return e.replace(kJt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const kJt=/\{\$([^}]+)}/g;function RJt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function SP(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(ebe(s)&&ebe(o)){if(!SP(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ebe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function DJt(e,t){const n=new NJt(e,t);return n.subscribe.bind(n)}class NJt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");PJt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=vq),i.error===void 0&&(i.error=vq),i.complete===void 0&&(i.complete=vq);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PJt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function vq(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OJt=1e3,MJt=2,LJt=4*60*60*1e3,$Jt=.5;function FJt(e,t=OJt,n=MJt){const r=t*Math.pow(n,e),i=Math.round($Jt*r*(Math.random()-.5)*2);return Math.min(LJt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ps(e){return e&&e._delegate?e._delegate:e}class J0{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BJt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new TP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(UJt(t))try{this.getOrInitializeService({instanceIdentifier:rw})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=rw){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=rw){return this.instances.has(t)}getOptions(t=rw){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jJt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=rw){return this.component?this.component.multipleInstances?t:rw:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jJt(e){return e===rw?void 0:e}function UJt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zJt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new BJt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Or;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Or||(Or={}));const VJt={debug:Or.DEBUG,verbose:Or.VERBOSE,info:Or.INFO,warn:Or.WARN,error:Or.ERROR,silent:Or.SILENT},HJt=Or.INFO,qJt={[Or.DEBUG]:"log",[Or.VERBOSE]:"log",[Or.INFO]:"info",[Or.WARN]:"warn",[Or.ERROR]:"error"},WJt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=qJt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class N7{constructor(t){this.name=t,this._logLevel=HJt,this._logHandler=WJt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Or))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?VJt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Or.DEBUG,...t),this._logHandler(this,Or.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Or.VERBOSE,...t),this._logHandler(this,Or.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Or.INFO,...t),this._logHandler(this,Or.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Or.WARN,...t),this._logHandler(this,Or.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Or.ERROR,...t),this._logHandler(this,Or.ERROR,...t)}}const GJt=(e,t)=>t.some(n=>e instanceof n);let tbe,nbe;function YJt(){return tbe||(tbe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KJt(){return nbe||(nbe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K5e=new WeakMap,cX=new WeakMap,X5e=new WeakMap,bq=new WeakMap,Zoe=new WeakMap;function XJt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(gb(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&K5e.set(n,e)}).catch(()=>{}),Zoe.set(t,e),t}function QJt(e){if(cX.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});cX.set(e,t)}let fX={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return cX.get(e);if(t==="objectStoreNames")return e.objectStoreNames||X5e.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gb(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function JJt(e){fX=e(fX)}function ZJt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(xq(this),t,...n);return X5e.set(r,t.sort?t.sort():[t]),gb(r)}:KJt().includes(e)?function(...t){return e.apply(xq(this),t),gb(K5e.get(this))}:function(...t){return gb(e.apply(xq(this),t))}}function eZt(e){return typeof e=="function"?ZJt(e):(e instanceof IDBTransaction&&QJt(e),GJt(e,YJt())?new Proxy(e,fX):e)}function gb(e){if(e instanceof IDBRequest)return XJt(e);if(bq.has(e))return bq.get(e);const t=eZt(e);return t!==e&&(bq.set(e,t),Zoe.set(t,e)),t}const xq=e=>Zoe.get(e);function tZt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=gb(o);return r&&o.addEventListener("upgradeneeded",u=>{r(gb(o.result),u.oldVersion,u.newVersion,gb(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const nZt=["get","getKey","getAll","getAllKeys","count"],rZt=["put","add","delete","clear"],_q=new Map;function rbe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(_q.get(t))return _q.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=rZt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||nZt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return _q.set(t,s),s}JJt(e=>({...e,get:(t,n,r)=>rbe(t,n)||e.get(t,n,r),has:(t,n)=>!!rbe(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sZt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sZt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const dX="@firebase/app",ibe="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1=new N7("@firebase/app"),oZt="@firebase/app-compat",aZt="@firebase/analytics-compat",uZt="@firebase/analytics",lZt="@firebase/app-check-compat",cZt="@firebase/app-check",fZt="@firebase/auth",dZt="@firebase/auth-compat",hZt="@firebase/database",pZt="@firebase/data-connect",mZt="@firebase/database-compat",gZt="@firebase/functions",yZt="@firebase/functions-compat",vZt="@firebase/installations",bZt="@firebase/installations-compat",xZt="@firebase/messaging",_Zt="@firebase/messaging-compat",wZt="@firebase/performance",EZt="@firebase/performance-compat",TZt="@firebase/remote-config",SZt="@firebase/remote-config-compat",CZt="@firebase/storage",AZt="@firebase/storage-compat",IZt="@firebase/firestore",kZt="@firebase/vertexai",RZt="@firebase/firestore-compat",DZt="firebase",NZt="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hX="[DEFAULT]",PZt={[dX]:"fire-core",[oZt]:"fire-core-compat",[uZt]:"fire-analytics",[aZt]:"fire-analytics-compat",[cZt]:"fire-app-check",[lZt]:"fire-app-check-compat",[fZt]:"fire-auth",[dZt]:"fire-auth-compat",[hZt]:"fire-rtdb",[pZt]:"fire-data-connect",[mZt]:"fire-rtdb-compat",[gZt]:"fire-fn",[yZt]:"fire-fn-compat",[vZt]:"fire-iid",[bZt]:"fire-iid-compat",[xZt]:"fire-fcm",[_Zt]:"fire-fcm-compat",[wZt]:"fire-perf",[EZt]:"fire-perf-compat",[TZt]:"fire-rc",[SZt]:"fire-rc-compat",[CZt]:"fire-gcs",[AZt]:"fire-gcs-compat",[IZt]:"fire-fst",[RZt]:"fire-fst-compat",[kZt]:"fire-vertex","fire-js":"fire-js",[DZt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=new Map,OZt=new Map,pX=new Map;function sbe(e,t){try{e.container.addComponent(t)}catch(n){p1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m1(e){const t=e.name;if(pX.has(t))return p1.debug(`There were multiple attempts to register component ${t}.`),!1;pX.set(t,e);for(const n of I8.values())sbe(n,e);for(const n of OZt.values())sbe(n,e);return!0}function PI(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function g0(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MZt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},yb=new NI("app","Firebase",MZt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LZt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new J0("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw yb.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT=NZt;function Q5e(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:hX,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw yb.create("bad-app-name",{appName:String(i)});if(n||(n=G5e()),!n)throw yb.create("no-options");const s=I8.get(i);if(s){if(SP(n,s.options)&&SP(r,s.config))return s;throw yb.create("duplicate-app",{appName:i})}const o=new zJt(i);for(const u of pX.values())o.addComponent(u);const a=new LZt(n,r,o);return I8.set(i,a),a}function eae(e=hX){const t=I8.get(e);if(!t&&e===hX&&G5e())return Q5e();if(!t)throw yb.create("no-app",{appName:e});return t}function Lp(e,t,n){var r;let i=(r=PZt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),p1.warn(a.join(" "));return}m1(new J0(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Zt="firebase-heartbeat-database",FZt=1,CP="firebase-heartbeat-store";let wq=null;function J5e(){return wq||(wq=tZt($Zt,FZt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(CP)}catch(n){console.warn(n)}}}}).catch(e=>{throw yb.create("idb-open",{originalErrorMessage:e.message})})),wq}async function BZt(e){try{const n=(await J5e()).transaction(CP),r=await n.objectStore(CP).get(Z5e(e));return await n.done,r}catch(t){if(t instanceof _g)p1.warn(t.message);else{const n=yb.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});p1.warn(n.message)}}}async function obe(e,t){try{const r=(await J5e()).transaction(CP,"readwrite");await r.objectStore(CP).put(t,Z5e(e)),await r.done}catch(n){if(n instanceof _g)p1.warn(n.message);else{const r=yb.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});p1.warn(r.message)}}}function Z5e(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jZt=1024,UZt=30*24*60*60*1e3;class zZt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HZt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=abe();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=UZt}),this._storage.overwrite(this._heartbeatsCache))}catch(r){p1.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=abe(),{heartbeatsToSend:r,unsentEntries:i}=VZt(this._heartbeatsCache.heartbeats),s=A8(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return p1.warn(n),""}}}function abe(){return new Date().toISOString().substring(0,10)}function VZt(e,t=jZt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ube(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ube(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class HZt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Joe()?CJt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BZt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return obe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return obe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function ube(e){return A8(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qZt(e){m1(new J0("platform-logger",t=>new iZt(t),"PRIVATE")),m1(new J0("heartbeat",t=>new zZt(t),"PRIVATE")),Lp(dX,ibe,e),Lp(dX,ibe,"esm2017"),Lp("fire-js","")}qZt("");function e8e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WZt=e8e,t8e=new NI("auth","Firebase",e8e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=new N7("@firebase/auth");function GZt(e,...t){k8.logLevel<=Or.WARN&&k8.warn(`Auth (${uT}): ${e}`,...t)}function S$(e,...t){k8.logLevel<=Or.ERROR&&k8.error(`Auth (${uT}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(e,...t){throw nae(e,...t)}function $p(e,...t){return nae(e,...t)}function tae(e,t,n){const r=Object.assign(Object.assign({},WZt()),{[t]:n});return new NI("auth","Firebase",r).create(t,{appName:e.name})}function vb(e){return tae(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YZt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Z0(e,"argument-error"),tae(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nae(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return t8e.create(e,...t)}function Yn(e,t,...n){if(!e)throw nae(t,...n)}function Ry(e){const t="INTERNAL ASSERTION FAILED: "+e;throw S$(t),new Error(t)}function g1(e,t){e||Ry(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mX(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function KZt(){return lbe()==="http:"||lbe()==="https:"}function lbe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XZt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(KZt()||wJt()||"connection"in navigator)?navigator.onLine:!0}function QZt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(t,n){this.shortDelay=t,this.longDelay=n,g1(n>t,"Short delay should be less than long delay!"),this.isMobile=bJt()||EJt()}get(){return XZt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rae(e,t){g1(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8e{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ry("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ry("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ry("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JZt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZZt=new mO(3e4,6e4);function P7(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function OI(e,t,n,r,i={}){return r8e(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=pO(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:u},s);return _Jt()||(l.referrerPolicy="no-referrer"),n8e.fetch()(s8e(e,e.config.apiHost,n,a),l)})}async function r8e(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},JZt),t);try{const i=new een(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw kM(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw kM(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw kM(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw kM(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw tae(e,c,l);Z0(e,c)}}catch(i){if(i instanceof _g)throw i;Z0(e,"network-request-failed",{message:String(i)})}}async function i8e(e,t,n,r,i={}){const s=await OI(e,t,n,r,i);return"mfaPendingCredential"in s&&Z0(e,"multi-factor-auth-required",{_serverResponse:s}),s}function s8e(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?rae(e.config,i):`${e.config.apiScheme}://${i}`}class een{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r($p(this.auth,"network-request-failed")),ZZt.get())})}}function kM(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=$p(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ten(e,t){return OI(e,"POST","/v1/accounts:delete",t)}async function o8e(e,t){return OI(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aN(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function nen(e,t=!1){const n=ps(e),r=await n.getIdToken(t),i=iae(r);Yn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:aN(Eq(i.auth_time)),issuedAtTime:aN(Eq(i.iat)),expirationTime:aN(Eq(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Eq(e){return Number(e)*1e3}function iae(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return S$("JWT malformed, contained fewer than 3 sections"),null;try{const i=H5e(n);return i?JSON.parse(i):(S$("Failed to decode base64 JWT payload"),null)}catch(i){return S$("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function cbe(e){const t=iae(e);return Yn(t,"internal-error"),Yn(typeof t.exp<"u","internal-error"),Yn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof _g&&ren(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function ren({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ien{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gX{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=aN(this.lastLoginAt),this.creationTime=aN(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R8(e){var t;const n=e.auth,r=await e.getIdToken(),i=await AP(e,o8e(n,{idToken:r}));Yn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?a8e(s.providerUserInfo):[],a=oen(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new gX(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function sen(e){const t=ps(e);await R8(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function oen(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function a8e(e){return e.map(t=>{var{providerId:n}=t,r=FP(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aen(e,t){const n=await r8e(e,{},async()=>{const r=pO({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=s8e(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",n8e.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function uen(e,t){return OI(e,"POST","/v2/accounts:revokeToken",P7(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Yn(t.idToken,"internal-error"),Yn(typeof t.idToken<"u","internal-error"),Yn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):cbe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Yn(t.length!==0,"internal-error");const n=cbe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Yn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await aen(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new iC;return r&&(Yn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(Yn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(Yn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new iC,this.toJSON())}_performRefresh(){return Ry("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(e,t){Yn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Dy{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=FP(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ien(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new gX(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await AP(this,this.stsTokenManager.getToken(this.auth,t));return Yn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return nen(this,t)}reload(){return sen(this)}_assign(t){this!==t&&(Yn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Dy(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){Yn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await R8(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(g0(this.auth.app))return Promise.reject(vb(this.auth));const t=await this.getIdToken();return await AP(this,ten(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(l=n.createdAt)!==null&&l!==void 0?l:void 0,b=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:w,emailVerified:E,isAnonymous:T,providerData:C,stsTokenManager:I}=n;Yn(w&&I,t,"internal-error");const R=iC.fromJSON(this.name,I);Yn(typeof w=="string",t,"internal-error"),Cv(f,t.name),Cv(d,t.name),Yn(typeof E=="boolean",t,"internal-error"),Yn(typeof T=="boolean",t,"internal-error"),Cv(h,t.name),Cv(p,t.name),Cv(m,t.name),Cv(g,t.name),Cv(v,t.name),Cv(b,t.name);const N=new Dy({uid:w,auth:t,email:d,emailVerified:E,displayName:f,isAnonymous:T,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:R,createdAt:v,lastLoginAt:b});return C&&Array.isArray(C)&&(N.providerData=C.map(O=>Object.assign({},O))),g&&(N._redirectEventId=g),N}static async _fromIdTokenResponse(t,n,r=!1){const i=new iC;i.updateFromServerResponse(n);const s=new Dy({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await R8(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];Yn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?a8e(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new iC;a.updateFromIdToken(r);const u=new Dy({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new gX(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fbe=new Map;function Ny(e){g1(e instanceof Function,"Expected a class definition");let t=fbe.get(e);return t?(g1(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,fbe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u8e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}u8e.type="NONE";const dbe=u8e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C$(e,t,n){return`firebase:${e}:${t}:${n}`}class sC{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=C$(this.userKey,i.apiKey,s),this.fullPersistenceKey=C$("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Dy._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new sC(Ny(dbe),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Ny(dbe);const o=C$(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Dy._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new sC(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new sC(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hbe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(d8e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(l8e(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(p8e(t))return"Blackberry";if(m8e(t))return"Webos";if(c8e(t))return"Safari";if((t.includes("chrome/")||f8e(t))&&!t.includes("edge/"))return"Chrome";if(h8e(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function l8e(e=gl()){return/firefox\//i.test(e)}function c8e(e=gl()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function f8e(e=gl()){return/crios\//i.test(e)}function d8e(e=gl()){return/iemobile/i.test(e)}function h8e(e=gl()){return/android/i.test(e)}function p8e(e=gl()){return/blackberry/i.test(e)}function m8e(e=gl()){return/webos/i.test(e)}function sae(e=gl()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function len(e=gl()){var t;return sae(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function cen(){return TJt()&&document.documentMode===10}function g8e(e=gl()){return sae(e)||h8e(e)||m8e(e)||p8e(e)||/windows phone/i.test(e)||d8e(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8e(e,t=[]){let n;switch(e){case"Browser":n=hbe(gl());break;case"Worker":n=`${hbe(gl())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${uT}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fen{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function den(e,t={}){return OI(e,"GET","/v2/passwordPolicy",P7(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hen=6;class pen{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:hen,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class men{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pbe(this),this.idTokenSubscription=new pbe(this),this.beforeStateQueue=new fen(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t8e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Ny(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await sC.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await o8e(this,{idToken:t}),r=await Dy._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(g0(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Yn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await R8(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=QZt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(g0(this.app))return Promise.reject(vb(this));const n=t?ps(t):null;return n&&Yn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Yn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return g0(this.app)?Promise.reject(vb(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return g0(this.app)?Promise.reject(vb(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ny(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await den(this),n=new pen(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new NI("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await uen(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Ny(t)||this._popupRedirectResolver;Yn(n,this,"argument-error"),this.redirectPersistenceManager=await sC.create(this,[Ny(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Yn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Yn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=y8e(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&GZt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gO(e){return ps(e)}class pbe{constructor(t){this.auth=t,this.observer=null,this.addObserver=DJt(n=>this.observer=n)}get next(){return Yn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oae={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gen(e){oae=e}function yen(e){return oae.loadJS(e)}function ven(){return oae.gapiScript}function ben(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xen(e,t){const n=PI(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(SP(s,t??{}))return i;Z0(i,"already-initialized")}return n.initialize({options:t})}function _en(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ny);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function wen(e,t,n){const r=gO(e);Yn(r._canInitEmulator,r,"emulator-config-failed"),Yn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=v8e(t),{host:o,port:a}=Een(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Ten()}function v8e(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Een(e){const t=v8e(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:mbe(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:mbe(o)}}}function mbe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Ten(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8e{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Ry("not implemented")}_getIdTokenResponse(t){return Ry("not implemented")}_linkToIdToken(t,n){return Ry("not implemented")}_getReauthenticationResolver(t){return Ry("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(e,t){return i8e(e,"POST","/v1/accounts:signInWithIdp",P7(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sen="http://localhost";class EE extends b8e{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new EE(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Z0("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=FP(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new EE(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return oC(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,oC(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,oC(t,n)}buildRequest(){const t={requestUri:Sen,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=pO(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aae{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO extends aae{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends yO{constructor(){super("facebook.com")}static credential(t){return EE._fromParams({providerId:qv.PROVIDER_ID,signInMethod:qv.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return qv.credentialFromTaggedObject(t)}static credentialFromError(t){return qv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return qv.credential(t.oauthAccessToken)}catch{return null}}}qv.FACEBOOK_SIGN_IN_METHOD="facebook.com";qv.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy extends yO{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return EE._fromParams({providerId:wy.PROVIDER_ID,signInMethod:wy.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return wy.credentialFromTaggedObject(t)}static credentialFromError(t){return wy.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return wy.credential(n,r)}catch{return null}}}wy.GOOGLE_SIGN_IN_METHOD="google.com";wy.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv extends yO{constructor(){super("github.com")}static credential(t){return EE._fromParams({providerId:Wv.PROVIDER_ID,signInMethod:Wv.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Wv.credentialFromTaggedObject(t)}static credentialFromError(t){return Wv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Wv.credential(t.oauthAccessToken)}catch{return null}}}Wv.GITHUB_SIGN_IN_METHOD="github.com";Wv.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv extends yO{constructor(){super("twitter.com")}static credential(t,n){return EE._fromParams({providerId:Gv.PROVIDER_ID,signInMethod:Gv.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Gv.credentialFromTaggedObject(t)}static credentialFromError(t){return Gv.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Gv.credential(n,r)}catch{return null}}}Gv.TWITTER_SIGN_IN_METHOD="twitter.com";Gv.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cen(e,t){return i8e(e,"POST","/v1/accounts:signUp",P7(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Dy._fromIdTokenResponse(t,r,i),o=gbe(r);return new ex({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=gbe(r);return new ex({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function gbe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aen(e){var t;if(g0(e.app))return Promise.reject(vb(e));const n=gO(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new ex({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Cen(n,{returnSecureToken:!0}),i=await ex._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8 extends _g{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,D8.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new D8(t,n,r,i)}}function x8e(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?D8._fromErrorAndOperation(e,s,t,r):s})}async function Ien(e,t,n=!1){const r=await AP(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return ex._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ken(e,t,n=!1){const{auth:r}=e;if(g0(r.app))return Promise.reject(vb(r));const i="reauthenticate";try{const s=await AP(e,x8e(r,i,t,e),n);Yn(s.idToken,r,"internal-error");const o=iae(s.idToken);Yn(o,r,"internal-error");const{sub:a}=o;return Yn(e.uid===a,r,"user-mismatch"),ex._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Z0(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ren(e,t,n=!1){if(g0(e.app))return Promise.reject(vb(e));const r="signIn",i=await x8e(e,r,t),s=await ex._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function Den(e,t,n,r){return ps(e).onIdTokenChanged(t,n,r)}function Nen(e,t,n){return ps(e).beforeAuthStateChanged(t,n)}function Pen(e,t,n,r){return ps(e).onAuthStateChanged(t,n,r)}function Oen(e){return ps(e).signOut()}const N8="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _8e{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(N8,"1"),this.storage.removeItem(N8),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Men=1e3,Len=10;class w8e extends _8e{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g8e(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);cen()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,Len):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},Men)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}w8e.type="LOCAL";const $en=w8e;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8e extends _8e{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}E8e.type="SESSION";const T8e=E8e;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fen(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new O7(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await Fen(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}O7.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uae(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ben{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=uae("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(){return window}function jen(e){R0().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8e(){return typeof R0().WorkerGlobalScope<"u"&&typeof R0().importScripts=="function"}async function Uen(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zen(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function Ven(){return S8e()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8e="firebaseLocalStorageDb",Hen=1,P8="firebaseLocalStorage",A8e="fbase_key";class vO{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function M7(e,t){return e.transaction([P8],t?"readwrite":"readonly").objectStore(P8)}function qen(){const e=indexedDB.deleteDatabase(C8e);return new vO(e).toPromise()}function yX(){const e=indexedDB.open(C8e,Hen);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(P8,{keyPath:A8e})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(P8)?t(r):(r.close(),await qen(),t(await yX()))})})}async function ybe(e,t,n){const r=M7(e,!0).put({[A8e]:t,value:n});return new vO(r).toPromise()}async function Wen(e,t){const n=M7(e,!1).get(t),r=await new vO(n).toPromise();return r===void 0?null:r.value}function vbe(e,t){const n=M7(e,!0).delete(t);return new vO(n).toPromise()}const Gen=800,Yen=3;class I8e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yX(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>Yen)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S8e()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=O7._getInstance(Ven()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await Uen(),!this.activeServiceWorker)return;this.sender=new Ben(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||zen()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await yX();return await ybe(t,N8,"1"),await vbe(t,N8),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ybe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>Wen(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>vbe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=M7(i,!1).getAll();return new vO(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Gen)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}I8e.type="LOCAL";const Ken=I8e;new mO(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k8e(e,t){return t?Ny(t):(Yn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lae extends b8e{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return oC(t,this._buildIdpRequest())}_linkToIdToken(t,n){return oC(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return oC(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Xen(e){return Ren(e.auth,new lae(e),e.bypassAuthState)}function Qen(e){const{auth:t,user:n}=e;return Yn(n,t,"internal-error"),ken(n,new lae(e),e.bypassAuthState)}async function Jen(e){const{auth:t,user:n}=e;return Yn(n,t,"internal-error"),Ien(n,new lae(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8e{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Xen;case"linkViaPopup":case"linkViaRedirect":return Jen;case"reauthViaPopup":case"reauthViaRedirect":return Qen;default:Z0(this.auth,"internal-error")}}resolve(t){g1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){g1(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zen=new mO(2e3,1e4);async function etn(e,t,n){if(g0(e.app))return Promise.reject($p(e,"operation-not-supported-in-this-environment"));const r=gO(e);YZt(e,t,aae);const i=k8e(r,n);return new Dw(r,"signInViaPopup",t,i).executeNotNull()}class Dw extends R8e{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Dw.currentPopupAction&&Dw.currentPopupAction.cancel(),Dw.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Yn(t,this.auth,"internal-error"),t}async onExecution(){g1(this.filter.length===1,"Popup operations only handle one event");const t=uae();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($p(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject($p(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dw.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($p(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Zen.get())};t()}}Dw.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ttn="pendingRedirect",A$=new Map;class ntn extends R8e{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=A$.get(this.auth._key());if(!t){try{const r=await rtn(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}A$.set(this.auth._key(),t)}return this.bypassAuthState||A$.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rtn(e,t){const n=otn(t),r=stn(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function itn(e,t){A$.set(e._key(),t)}function stn(e){return Ny(e._redirectPersistence)}function otn(e){return C$(ttn,e.config.apiKey,e.name)}async function atn(e,t,n=!1){if(g0(e.app))return Promise.reject(vb(e));const r=gO(e),i=k8e(r,t),o=await new ntn(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const utn=10*60*1e3;class ltn{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!ctn(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!D8e(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError($p(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=utn&&this.cachedEventUids.clear(),this.cachedEventUids.has(bbe(t))}saveEventToCache(t){this.cachedEventUids.add(bbe(t)),this.lastProcessedEventTime=Date.now()}}function bbe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function D8e({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function ctn(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D8e(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ftn(e,t={}){return OI(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dtn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,htn=/^https?/;async function ptn(e){if(e.config.emulator)return;const{authorizedDomains:t}=await ftn(e);for(const n of t)try{if(mtn(n))return}catch{}Z0(e,"unauthorized-domain")}function mtn(e){const t=mX(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!htn.test(n))return!1;if(dtn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gtn=new mO(3e4,6e4);function xbe(){const e=R0().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function ytn(e){return new Promise((t,n)=>{var r,i,s;function o(){xbe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{xbe(),n($p(e,"network-request-failed"))},timeout:gtn.get()})}if(!((i=(r=R0().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=R0().gapi)===null||s===void 0)&&s.load)o();else{const a=ben("iframefcb");return R0()[a]=()=>{gapi.load?o():n($p(e,"network-request-failed"))},yen(`${ven()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw I$=null,t})}let I$=null;function vtn(e){return I$=I$||ytn(e),I$}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const btn=new mO(5e3,15e3),xtn="__/auth/iframe",_tn="emulator/auth/iframe",wtn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Etn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ttn(e){const t=e.config;Yn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?rae(t,_tn):`https://${e.config.authDomain}/${xtn}`,r={apiKey:t.apiKey,appName:e.name,v:uT},i=Etn.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${pO(r).slice(1)}`}async function Stn(e){const t=await vtn(e),n=R0().gapi;return Yn(n,e,"internal-error"),t.open({where:document.body,url:Ttn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wtn,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=$p(e,"network-request-failed"),a=R0().setTimeout(()=>{s(o)},btn.get());function u(){R0().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ctn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Atn=500,Itn=600,ktn="_blank",Rtn="http://localhost";class _be{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Dtn(e,t,n,r=Atn,i=Itn){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},Ctn),{width:r.toString(),height:i.toString(),top:s,left:o}),l=gl().toLowerCase();n&&(a=f8e(l)?ktn:n),l8e(l)&&(t=t||Rtn,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(len(l)&&a!=="_self")return Ntn(t||"",a),new _be(null);const f=window.open(t||"",a,c);Yn(f,e,"popup-blocked");try{f.focus()}catch{}return new _be(f)}function Ntn(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ptn="__/auth/handler",Otn="emulator/auth/handler",Mtn=encodeURIComponent("fac");async function wbe(e,t,n,r,i,s){Yn(e.config.authDomain,e,"auth-domain-config-required"),Yn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:uT,eventId:i};if(t instanceof aae){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",RJt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof yO){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${Mtn}=${encodeURIComponent(u)}`:"";return`${Ltn(e)}?${pO(a).slice(1)}${l}`}function Ltn({config:e}){return e.emulator?rae(e,Otn):`https://${e.authDomain}/${Ptn}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq="webStorageSupport";class $tn{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=T8e,this._completeRedirectFn=atn,this._overrideRedirectResult=itn}async _openPopup(t,n,r,i){var s;g1((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await wbe(t,n,r,mX(),i);return Dtn(t,o,uae())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await wbe(t,n,r,mX(),i);return jen(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(g1(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await Stn(t),r=new ltn(t);return n.register("authEvent",i=>(Yn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(Tq,{type:Tq},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Tq];o!==void 0&&n(!!o),Z0(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ptn(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return g8e()||c8e()||sae()}}const N8e=$tn;var Ebe="@firebase/auth",Tbe="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ftn{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Yn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Btn(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jtn(e){m1(new J0("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Yn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:y8e(e)},l=new men(r,i,s,u);return _en(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),m1(new J0("auth-internal",t=>{const n=gO(t.getProvider("auth").getImmediate());return(r=>new Ftn(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lp(Ebe,Tbe,Btn(e)),Lp(Ebe,Tbe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Utn=5*60,ztn=Y5e("authIdTokenMaxAge")||Utn;let Sbe=null;const Vtn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ztn)return;const i=n==null?void 0:n.token;Sbe!==i&&(Sbe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function O8(e=eae()){const t=PI(e,"auth");if(t.isInitialized())return t.getImmediate();const n=xen(e,{popupRedirectResolver:N8e,persistence:[Ken,$en,T8e]}),r=Y5e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=Vtn(s.toString());Nen(n,o,()=>o(n.currentUser)),Den(n,a=>o(a))}}const i=W5e("auth");return i&&wen(n,`http://${i}`),n}function Htn(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}gen({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=$p("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",Htn().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jtn("Browser");var Sq,Cbe;function L7(){if(Cbe)return Sq;Cbe=1;var e=a2e;function t(o,a){var u,l="",c=0,f=!0,d=0,h;function p(){return h=o.charAt(d),d++,h}for(p(),h==="-"&&(l="-",p());h>="0"&&h<="9";)f&&(h=="0"?c++:f=!1),l+=h,p();if(f&&c--,h===".")for(l+=".";p()&&h>="0"&&h<="9";)l+=h;if(h==="e"||h==="E")for(l+=h,p(),(h==="-"||h==="+")&&(l+=h,p());h>="0"&&h<="9";)l+=h,p();for(;h&&h<=" ";)p();if(a&&(h===","||h==="}"||h==="]"||h==="#"||h==="/"&&(o[d]==="/"||o[d]==="*"))&&(h=0),u=+l,!(h||c||!isFinite(u)))return u}function n(o,a){return Object.defineProperty&&Object.defineProperty(o,"__COMMENTS__",{enumerable:!1,writable:!0}),o.__COMMENTS__=a||{}}function r(o){Object.defineProperty(o,"__COMMENTS__",{value:void 0})}function i(o){return o.__COMMENTS__}function s(o){if(!o)return"";var a=o.split(`
`),u,l,c,f;for(c=0;c<a.length;c++)for(u=a[c],f=u.length,l=0;l<f;l++){var d=u[l];if(d==="#")break;if(d==="/"&&(u[l+1]==="/"||u[l+1]==="*")){u[l+1]==="*"&&(c=a.length);break}else if(d>" "){a[c]="# "+u;break}}return a.join(`
`)}return Sq={EOL:e.EOL||`
`,tryParseNumber:t,createComment:n,removeComment:r,getComment:i,forceComment:s},Sq}var Cq,Abe;function qtn(){return Abe||(Abe=1,Cq="3.2.1"),Cq}var Aq,Ibe;function cae(){if(Ibe)return Aq;Ibe=1;function e(a,u){if(Object.prototype.toString.apply(a)!=="[object Array]"){if(a)throw new Error("dsf option must contain an array!");return n}else if(a.length===0)return n;var l=[];function c(f){return{}.toString.call(f)==="[object Function]"}return a.forEach(function(f){if(!f.name||!c(f.parse)||!c(f.stringify))throw new Error("extension does not match the DSF interface");l.push(function(){try{if(u=="parse")return f.parse.apply(null,arguments);if(u=="stringify"){var d=f.stringify.apply(null,arguments);if(d!==void 0&&(typeof d!="string"||d.length===0||d[0]==='"'||[].some.call(d,function(h){return r(h)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+d);return d}else throw new Error("Invalid type")}catch(h){throw new Error("DSF-"+f.name+" failed; "+h.message)}})}),t.bind(null,l)}function t(a,u){if(a)for(var l=0;l<a.length;l++){var c=a[l](u);if(c!==void 0)return c}}function n(){}function r(a){return a==="{"||a==="}"||a==="["||a==="]"||a===","}function i(){return{name:"math",parse:function(a){switch(a){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(a){if(typeof a=="number"){if(1/a===-1/0)return"-0";if(a===1/0)return"Inf";if(a===-1/0)return"-Inf";if(isNaN(a))return"NaN"}}}}i.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function s(a){var u=a&&a.out;return{name:"hex",parse:function(l){if(/^0x[0-9A-Fa-f]+$/.test(l))return parseInt(l,16)},stringify:function(l){if(u&&Number.isInteger(l))return"0x"+l.toString(16)}}}s.description="parse hexadecimal numbers prefixed with 0x";function o(){return{name:"date",parse:function(a){if(/^\d{4}-\d{2}-\d{2}$/.test(a)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(a)){var u=Date.parse(a);if(!isNaN(u))return new Date(u)}},stringify:function(a){if(Object.prototype.toString.call(a)==="[object Date]"){var u=a.toISOString();return u.indexOf("T00:00:00.000Z",u.length-14)!==-1?u.substr(0,10):u}}}}return o.description="support ISO dates",Aq={loadDsf:e,std:{math:i,hex:s,date:o}},Aq}var Iq,kbe;function Wtn(){return kbe||(kbe=1,Iq=function(e,t){var n=L7(),r=cae(),i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f(H){return H==="{"||H==="}"||H==="["||H==="]"||H===","||H===":"}function d(H){var Q,J=0,ne=1;for(Q=s-1;Q>0&&i[Q]!==`
`;Q--,J++);for(;Q>0;Q--)i[Q]===`
`&&ne++;throw new Error(H+" at line "+ne+","+J+" >>>"+i.substr(s-J,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p(H){return i.charAt(s+H)}function m(H){for(var Q="",J=o;h();){if(o===J)return h(),H&&J==="'"&&o==="'"&&Q.length===0?(h(),g()):Q;if(o==="\\")if(h(),o==="u"){for(var ne=0,Z=0;Z<4;Z++){h();var ie=o.charCodeAt(0),q;o>="0"&&o<="9"?q=ie-48:o>="a"&&o<="f"?q=ie-97+10:o>="A"&&o<="F"?q=ie-65+10:d("Bad \\u char "+o),ne=ne*16+q}Q+=String.fromCharCode(ne)}else if(typeof a[o]=="string")Q+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):Q+=o}d("Bad string")}function g(){for(var H="",Q=0,J=0;;){var ne=p(-J-5);if(!ne||ne===`
`)break;J++}function Z(){for(var ie=J;o&&o<=" "&&o!==`
`&&ie-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),Z());;){if(!o)d("Bad multiline string");else if(o==="'"){if(Q++,h(),Q===3)return H.slice(-1)===`
`&&(H=H.slice(0,-1)),H;continue}else for(;Q>0;)H+="'",Q--;o===`
`?(H+=`
`,h(),Z()):(o!=="\r"&&(H+=o),h())}}function v(){if(o==='"'||o==="'")return m(!1);for(var H="",Q=s,J=-1;;){if(o===":")return H?J>=0&&J!==H.length&&(s=Q+J,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),H;o<=" "?o?J<0&&(J=H.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):H+=o,h()}}function b(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function w(){var H=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var Q=o==="\r"||o===`
`||o==="";if(Q||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var J=H[0];switch(J){case"f":if(H.trim()==="false")return!1;break;case"n":if(H.trim()==="null")return null;break;case"t":if(H.trim()==="true")return!0;break;default:if(J==="-"||J>="0"&&J<="9"){var ne=n.tryParseNumber(H);if(ne!==void 0)return ne}}if(Q){H=H.trim();var Z=l(H);return Z!==void 0?Z:H}}H+=o}}function E(H,Q){var J;for(H--,J=s-2;J>H&&i[J]<=" "&&i[J]!==`
`;J--);i[J]===`
`&&J--,i[J]==="\r"&&J--;var ne=i.substr(H,J-H+1);for(J=0;J<ne.length;J++)if(ne[J]>" "){var Z=ne.indexOf(`
`);if(Z>=0){var ie=[ne.substr(0,Z),ne.substr(Z+1)];return Q&&ie[0].trim().length===0&&ie.shift(),ie}else return[ne]}return[]}function T(H){function Q(ne,Z){var ie,q,U,G;switch(typeof ne){case"string":ne.indexOf(Z)>=0&&(G=ne);break;case"object":if(Object.prototype.toString.apply(ne)==="[object Array]")for(ie=0,U=ne.length;ie<U;ie++)G=Q(ne[ie],Z)||G;else for(q in ne)Object.prototype.hasOwnProperty.call(ne,q)&&(G=Q(ne[q],Z)||G)}return G}function J(ne){var Z=Q(H,ne);return Z?"found '"+ne+`' in a string value, your mistake could be with:
  > `+Z+`
  (unquoted strings contain everything up to the next line!)`:""}return J("}")||J("]")}function C(){var H=[],Q,J,ne;try{if(u&&(Q=n.createComment(H,{a:[]})),h(),J=s,b(),Q&&(ne=E(J,!0).join(`
`)),o==="]")return h(),Q&&(Q.e=[ne]),H;for(;o;){if(H.push(R()),J=s,b(),o===","&&(h(),J=s,b()),Q){var Z=E(J);Q.a.push([ne||"",Z[0]||""]),ne=Z[1]}if(o==="]")return h(),Q&&(Q.a[Q.a.length-1][1]+=ne||""),H;b()}d("End of input while parsing an array (missing ']')")}catch(ie){throw ie.hint=ie.hint||T(H),ie}}function I(H){var Q="",J={},ne,Z,ie;try{if(u&&(ne=n.createComment(J,{c:{},o:[]})),H?Z=1:(h(),Z=s),b(),ne&&(ie=E(Z,!0).join(`
`)),o==="}"&&!H)return ne&&(ne.e=[ie]),h(),J;for(;o;){if(Q=v(),b(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),J[Q]=R(),Z=s,b(),o===","&&(h(),Z=s,b()),ne){var q=E(Z);ne.c[Q]=[ie||"",q[0]||""],ie=q[1],ne.o.push(Q)}if(o==="}"&&!H)return h(),ne&&(ne.c[Q][1]+=ie||""),J;b()}if(H)return J;d("End of input while parsing an object (missing '}')")}catch(U){throw U.hint=U.hint||T(J),U}}function R(){switch(b(),o){case"{":return I();case"[":return C();case"'":case'"':return m(!0);default:return w()}}function N(H,Q){var J=s;if(b(),o&&d("Syntax error, found trailing characters"),u){var ne=Q.join(`
`),Z=E(J).join(`
`);if(Z||ne){var ie=n.createComment(H,n.getComment(H));ie.r=[ne,Z]}}return H}function O(){b();var H=u?E(1):null;switch(o){case"{":return N(I(),H);case"[":return N(C(),H);default:return N(R(),H)}}function L(){b();var H=u?E(1):null;switch(o){case"{":return N(I(),H);case"[":return N(C(),H)}try{return N(I(!0),H)}catch(Q){c();try{return N(R(),H)}catch{throw Q}}}if(typeof e!="string")throw new Error("source is not a string");var B=null,F=!0;return t&&typeof t=="object"&&(u=t.keepWsc,B=t.dsf,F=t.legacyRoot!==!1),l=r.loadDsf(B,"parse"),i=e,c(),F?L():O()}),Iq}var kq,Rbe;function Gtn(){return Rbe||(Rbe=1,kq=function(e,t){var n=L7(),r=cae(),i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var v,b=Object.keys(i);for(v=b.length-1;v>=0;v--){var w=b[v];g[w].push(i[w][0].length,i[w][1].length)}}var E,T="---\u2028--\uFEFF-",C=new RegExp('[\\\\\\"\0-'+T+"]","g"),I=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+T+"]","g"),R=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+T+"]","g"),N=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),O={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},L=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,B="",F=0;function H(G,V){return F+=G[0].length+G[1].length-G[2]-G[3],G[0]+V+G[1]}function Q(G){return G.replace(C,function(V){var Y=O[V];return typeof Y=="string"?H(g.esc,Y):H(g.uni,("0000"+V.charCodeAt(0).toString(16)).slice(-4))})}function J(G,V,Y,ee){return G?(I.lastIndex=0,N.lastIndex=0,c||Y||I.test(G)||n.tryParseNumber(G,!0)!==void 0||N.test(G)?(C.lastIndex=0,R.lastIndex=0,C.test(G)?!R.test(G)&&!ee&&d?ne(G,V):H(g.qstr,Q(G)):H(g.qstr,G)):H(g.str,G)):H(g.qstr,"")}function ne(G,V){var Y,ee=G.replace(/\r/g,"").split(`
`);if(V+=o,ee.length===1)return H(g.mstr,ee[0]);var ae=s+V+g.mstr[0];for(Y=0;Y<ee.length;Y++)ae+=s,ee[Y]&&(ae+=V+ee[Y]);return ae+s+V+g.mstr[1]}function Z(G){return G?l||L.test(G)?(C.lastIndex=0,H(g.qkey,C.test(G)?Q(G):G)):H(g.key,G):'""'}function ie(G,V,Y,ee){function ae(Un){return Un&&Un[Un[0]==="\r"?1:0]===`
`}function _e(Un){return Un&&!ae(Un)}function pe(Un,tr,Ai){if(!Un)return"";Un=n.forceComment(Un);var Sr,Lo=Un.length;for(Sr=0;Sr<Lo&&Un[Sr]<=" ";Sr++);return Ai&&Sr>0&&(Un=Un.substr(Sr)),Sr<Lo?tr+H(g.rem,Un):Un}var Te=E(G);if(Te!==void 0)return H(g.dsf,Te);switch(typeof G){case"string":return J(G,B,V,ee);case"number":return isFinite(G)?H(g.num,String(G)):H(g.lit,"null");case"boolean":return H(g.lit,String(G));case"object":if(!G)return H(g.lit,"null");var Le;a&&(Le=n.getComment(G));var ye=Object.prototype.toString.apply(G)==="[object Array]",he=B;B+=o;var $e=s+he,De=s+B,tt=Y||u?"":$e,it=[],Me,Ge=f?[]:null,at=c,yt=d,Tt=h?"":g.com[0],Ot=0,qe,dt,wt,ke,Oe,ht,Lt,Ft,dn;if(ye){for(qe=0,dt=G.length;qe<dt;qe++){if(Me=qe<dt-1,Le?(ht=Le.a[qe]||[],Lt=_e(ht[1]),it.push(pe(ht[0],`
`)+De),Ge&&(ht[0]||ht[1]||Lt)&&(Ge=null)):it.push(De),F=0,ke=G[qe],it.push(ie(ke,Le?Lt:!1,!0)+(Me?h:"")),Ge){switch(typeof ke){case"string":F=0,c=!0,d=0,Ge.push(ie(ke,!1,!0)+(Me?g.com[0]:"")),c=at,d=yt;break;case"object":if(ke){Ge=null;break}default:Ge.push(it[it.length-1]+(Me?Tt:""));break}Me&&(F+=g.com[0].length-g.com[2]),Ot+=F}Le&&ht[1]&&it.push(pe(ht[1],Lt?" ":`
`,Lt))}dt===0?Le&&Le.e&&it.push(pe(Le.e[0],`
`)+$e):it.push($e),it.length===0?Ft=H(g.arr,""):(Ft=tt+H(g.arr,it.join("")),Ge&&(dn=Ge.join(" "),dn.length-Ot<=f&&(Ft=H(g.arr,dn))))}else{var Nn=Le?Le.o.slice():[],Tr=[];for(wt in G)Object.prototype.hasOwnProperty.call(G,wt)&&Nn.indexOf(wt)<0&&Tr.push(wt);m&&Tr.sort();var Ni=Nn.concat(Tr);for(qe=0,dt=Ni.length;qe<dt;qe++)if(Me=qe<dt-1,wt=Ni[qe],Le?(ht=Le.c[wt]||[],Lt=_e(ht[1]),it.push(pe(ht[0],`
`)+De),Ge&&(ht[0]||ht[1]||Lt)&&(Ge=null)):it.push(De),F=0,ke=G[wt],Oe=ie(ke,Le&&Lt),it.push(Z(wt)+g.col[0]+(ae(Oe)?"":" ")+Oe+(Me?h:"")),Le&&ht[1]&&it.push(pe(ht[1],Lt?" ":`
`,Lt)),Ge){switch(typeof ke){case"string":F=0,c=!0,d=0,Oe=ie(ke,!1),c=at,d=yt,Ge.push(Z(wt)+g.col[0]+" "+Oe+(Me?g.com[0]:""));break;case"object":if(ke){Ge=null;break}default:Ge.push(it[it.length-1]+(Me?Tt:""));break}F+=g.col[0].length-g.col[2],Me&&(F+=g.com[0].length-g.com[2]),Ot+=F}dt===0?Le&&Le.e&&it.push(pe(Le.e[0],`
`)+$e):it.push($e),it.length===0?Ft=H(g.obj,""):(Ft=tt+H(g.obj,it.join("")),Ge&&(dn=Ge.join(" "),dn.length-Ot<=f&&(Ft=H(g.obj,dn))))}return B=he,Ft}}E=r.loadDsf(p,"stringify");var q="",U=a?U=(n.getComment(e)||{}).r:null;return U&&U[0]&&(q=U[0]+`
`),q+=ie(e,null,!0,!0),U&&(q+=U[1]||""),q}),kq}var Rq,Dbe;function Ytn(){if(Dbe)return Rq;Dbe=1;var e=L7();function t(c,f,d){var h;return c&&(h={b:c}),f&&((h=h||{}).a=f),d&&((h=h||{}).x=d),h}function n(c,f){if(!(c===null||typeof c!="object")){var d=e.getComment(c);d&&e.removeComment(c);var h,p,m,g;if(Object.prototype.toString.apply(c)==="[object Array]"){for(g={a:{}},h=0,p=c.length;h<p;h++)s(g.a,h,d.a[h],n(c[h]))&&(m=!0);!m&&d.e&&(g.e=t(d.e[0],d.e[1]),m=!0)}else{g={s:{}};var v,b=Object.keys(c);for(d&&d.o?(v=[],d.o.concat(b).forEach(function(E){Object.prototype.hasOwnProperty.call(c,E)&&v.indexOf(E)<0&&v.push(E)})):v=b,g.o=v,h=0,p=v.length;h<p;h++){var w=v[h];s(g.s,w,d.c[w],n(c[w]))&&(m=!0)}!m&&d.e&&(g.e=t(d.e[0],d.e[1]),m=!0)}return f&&d&&d.r&&(g.r=t(d.r[0],d.r[1])),m?g:void 0}}function r(){var c="";return[].forEach.call(arguments,function(f){f&&f.trim()!==""&&(c&&(c+="; "),c+=f.trim())}),c}function i(c,f){var d=[];if(u(c,f,d,[]),d.length>0){var h=l(f,null,1);h+=`
# Orphaned comments:
`,d.forEach(function(p){h+=("# "+p.path.join("/")+": "+r(p.b,p.a,p.e)).replace(`
`,"\\n ")+`
`}),l(f,h,1)}}function s(c,f,d,h){var p=t(d?d[0]:void 0,d?d[1]:void 0,h);return p&&(c[f]=p),p}function o(c,f){var d=t(f.b,f.a);return d.path=c,d}function a(c,f,d){if(c){var h,p;if(c.a)for(h=0,p=c.a.length;h<p;h++){var m=d.slice().concat([h]),g=c.a[h];g&&(f.push(o(m,g)),a(g.x,f,m))}else c.o&&c.o.forEach(function(v){var b=d.slice().concat([v]),w=c.s[v];w&&(f.push(o(b,w)),a(w.x,f,b))});c.e&&f.push(o(d,c.e))}}function u(c,f,d,h){if(c){if(f===null||typeof f!="object"){a(c,d,h);return}var p,m=e.createComment(f);if(h.length===0&&c.r&&(m.r=[c.r.b,c.r.a]),Object.prototype.toString.apply(f)==="[object Array]"){m.a=[];var g=c.a||{};for(var v in g)if(g.hasOwnProperty(v)){p=parseInt(v);var b=c.a[v];if(b){var w=h.slice().concat([p]);p<f.length?(m.a[p]=[b.b,b.a],u(b.x,f[p],d,w)):(d.push(o(w,b)),a(b.x,d,w))}}p===0&&c.e&&(m.e=[c.e.b,c.e.a])}else m.c={},m.o=[],(c.o||[]).forEach(function(E){var T=h.slice().concat([E]),C=c.s[E];Object.prototype.hasOwnProperty.call(f,E)?(m.o.push(E),C&&(m.c[E]=[C.b,C.a],u(C.x,f[E],d,T))):C&&(d.push(o(T,C)),a(C.x,d,T))}),c.e&&(m.e=[c.e.b,c.e.a])}}function l(c,f,d){var h=e.createComment(c,e.getComment(c));return h.r||(h.r=["",""]),(f||f==="")&&(h.r[d]=e.forceComment(f)),h.r[d]||""}return Rq={extract:function(c){return n(c,!0)},merge:i,header:function(c,f){return l(c,f,0)},footer:function(c,f){return l(c,f,1)}},Rq}/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Dq,Nbe;function Ktn(){if(Nbe)return Dq;Nbe=1;var e=L7(),t=qtn(),n=Wtn(),r=Gtn(),i=Ytn(),s=cae();return Dq={parse:n,stringify:r,endOfLine:function(){return e.EOL},setEndOfLine:function(o){(o===`
`||o===`\r
`)&&(e.EOL=o)},version:t,rt:{parse:function(o,a){return(a=a||{}).keepWsc=!0,n(o,a)},stringify:function(o,a){return(a=a||{}).keepWsc=!0,r(o,a)}},comments:i,dsf:s.std},Dq}var Xtn=Ktn(),Qtn="firebase",Jtn="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lp(Qtn,Jtn,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8e="firebasestorage.googleapis.com",O8e="storageBucket",Ztn=2*60*1e3,enn=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo extends _g{constructor(t,n,r=0){super(Nq(t),`Firebase Storage: ${n} (${Nq(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fo.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Nq(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var co;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(co||(co={}));function Nq(e){return"storage/"+e}function fae(){const e="An unknown error occurred, please check the error payload for server response.";return new fo(co.UNKNOWN,e)}function tnn(e){return new fo(co.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function nnn(e){return new fo(co.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rnn(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new fo(co.UNAUTHENTICATED,e)}function inn(){return new fo(co.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function snn(e){return new fo(co.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function onn(){return new fo(co.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function ann(){return new fo(co.CANCELED,"User canceled the upload/download.")}function unn(e){return new fo(co.INVALID_URL,"Invalid URL '"+e+"'.")}function lnn(e){return new fo(co.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function cnn(){return new fo(co.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+O8e+"' property when initializing the app?")}function fnn(){return new fo(co.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function dnn(){return new fo(co.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hnn(e){return new fo(co.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vX(e){return new fo(co.INVALID_ARGUMENT,e)}function M8e(){return new fo(co.APP_DELETED,"The Firebase app was deleted.")}function pnn(e){return new fo(co.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uN(e,t){return new fo(co.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function MR(e){throw new fo(co.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Wl.makeFromUrl(t,n)}catch{return new Wl(t,"")}if(r.path==="")return r;throw lnn(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(E){E.path.charAt(E.path.length-1)==="/"&&(E.path_=E.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(E){E.path_=decodeURIComponent(E.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===P8e?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",v=new RegExp(`^https?://${m}/${i}/${g}`,"i"),w=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:v,indices:{bucket:1,path:2},postModify:l}];for(let E=0;E<w.length;E++){const T=w[E],C=T.regex.exec(t);if(C){const I=C[T.indices.bucket];let R=C[T.indices.path];R||(R=""),r=new Wl(I,R),T.postModify(r);break}}if(r==null)throw unn(t);return r}}class mnn{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gnn(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...v){if(l){d();return}if(g){d(),c.call(null,g,...v);return}if(u()||o){d(),c.call(null,g,...v);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function ynn(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vnn(e){return e!==void 0}function bnn(e){return typeof e=="object"&&!Array.isArray(e)}function dae(e){return typeof e=="string"||e instanceof String}function Pbe(e){return hae()&&e instanceof Blob}function hae(){return typeof Blob<"u"}function bX(e,t,n,r){if(r<t)throw vX(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw vX(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function L8e(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var qw;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(qw||(qw={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xnn(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _nn{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new RM(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===qw.NO_ERROR,u=s.getStatus();if(!a||xnn(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===qw.ABORT;r(!1,new RM(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new RM(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());vnn(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=fae();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?M8e():ann();o(u)}else{const u=onn();o(u)}};this.canceled_?n(!1,new RM(!1,null,!0)):this.backoffId_=gnn(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&ynn(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RM{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function wnn(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function Enn(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function Tnn(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Snn(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function Cnn(e,t,n,r,i,s,o=!0){const a=L8e(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return Tnn(l,t),wnn(l,n),Enn(l,s),Snn(l,r),new _nn(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ann(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Inn(...e){const t=Ann();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(hae())return new Blob(e);throw new fo(co.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function knn(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rnn(e){if(typeof atob>"u")throw hnn("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Pq{constructor(t,n){this.data=t,this.contentType=n||null}}function Dnn(e,t){switch(e){case y0.RAW:return new Pq($8e(t));case y0.BASE64:case y0.BASE64URL:return new Pq(F8e(e,t));case y0.DATA_URL:return new Pq(Pnn(t),Onn(t))}throw fae()}function $8e(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function Nnn(e){let t;try{t=decodeURIComponent(e)}catch{throw uN(y0.DATA_URL,"Malformed data URL.")}return $8e(t)}function F8e(e,t){switch(e){case y0.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw uN(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case y0.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw uN(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Rnn(t)}catch(i){throw i.message.includes("polyfill")?i:uN(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class B8e{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw uN(y0.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Mnn(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function Pnn(e){const t=new B8e(e);return t.base64?F8e(y0.BASE64,t.rest):Nnn(t.rest)}function Onn(e){return new B8e(e).contentType}function Mnn(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yv{constructor(t,n){let r=0,i="";Pbe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Pbe(this.data_)){const r=this.data_,i=knn(r,t,n);return i===null?null:new Yv(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Yv(r,!0)}}static getBlob(...t){if(hae()){const n=t.map(r=>r instanceof Yv?r.data_:r);return new Yv(Inn.apply(null,n))}else{const n=t.map(o=>dae(o)?Dnn(y0.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Yv(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pae(e){let t;try{t=JSON.parse(e)}catch{return null}return bnn(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lnn(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function $nn(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function j8e(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fnn(e,t){return t}class Ml{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Fnn}}let DM=null;function Bnn(e){return!dae(e)||e.length<2?e:j8e(e)}function U8e(){if(DM)return DM;const e=[];e.push(new Ml("bucket")),e.push(new Ml("generation")),e.push(new Ml("metageneration")),e.push(new Ml("name","fullPath",!0));function t(s,o){return Bnn(o)}const n=new Ml("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ml("size");return i.xform=r,e.push(i),e.push(new Ml("timeCreated")),e.push(new Ml("updated")),e.push(new Ml("md5Hash",null,!0)),e.push(new Ml("cacheControl",null,!0)),e.push(new Ml("contentDisposition",null,!0)),e.push(new Ml("contentEncoding",null,!0)),e.push(new Ml("contentLanguage",null,!0)),e.push(new Ml("contentType",null,!0)),e.push(new Ml("metadata","customMetadata",!0)),DM=e,DM}function jnn(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Wl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function Unn(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return jnn(r,e),r}function z8e(e,t,n){const r=pae(t);return r===null?null:Unn(e,r,n)}function znn(e,t,n,r){const i=pae(t);if(i===null||!dae(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=bO(d,n,r),p=L8e({alt:"media",token:l});return h+p})[0]}function Vnn(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Obe="prefixes",Mbe="items";function Hnn(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Obe])for(const i of n[Obe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Wl(t,s));r.prefixes.push(o)}if(n[Mbe])for(const i of n[Mbe]){const s=e._makeStorageReference(new Wl(t,i.name));r.items.push(s)}return r}function qnn(e,t,n){const r=pae(n);return r===null?null:Hnn(e,t,r)}class $7{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mae(e){if(!e)throw fae()}function Wnn(e,t){function n(r,i){const s=z8e(e,i,t);return mae(s!==null),s}return n}function Gnn(e,t){function n(r,i){const s=qnn(e,t,i);return mae(s!==null),s}return n}function Ynn(e,t){function n(r,i){const s=z8e(e,i,t);return mae(s!==null),znn(s,i,e.host,e._protocol)}return n}function gae(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=inn():i=rnn():n.getStatus()===402?i=nnn(e.bucket):n.getStatus()===403?i=snn(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function V8e(e){const t=gae(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=tnn(e.path)),s.serverResponse=i.serverResponse,s}return n}function Knn(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=bO(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new $7(a,u,Gnn(e,t.bucket),l);return c.urlParams=s,c.errorHandler=gae(t),c}function Xnn(e,t,n){const r=t.fullServerUrl(),i=bO(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new $7(i,s,Ynn(e,n),o);return a.errorHandler=V8e(t),a}function Qnn(e,t){const n=t.fullServerUrl(),r=bO(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new $7(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=V8e(t),a}function Jnn(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Znn(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Jnn(null,t)),r}function ern(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let w="";for(let E=0;E<2;E++)w=w+Math.random().toString().slice(2);return w}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=Znn(t,r,i),c=Vnn(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Yv.getBlob(f,r,d);if(h===null)throw fnn();const p={name:l.fullPath},m=bO(s,e.host,e._protocol),g="POST",v=e.maxUploadRetryTime,b=new $7(m,g,Wnn(e,n),v);return b.urlParams=p,b.headers=o,b.body=h.uploadData(),b.errorHandler=gae(t),b}class trn{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=qw.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=qw.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=qw.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw MR("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw MR("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw MR("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw MR("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw MR("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class nrn extends trn{initXhr(){this.xhr_.responseType="text"}}function F7(){return new nrn}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(t,n){this._service=t,n instanceof Wl?this._location=n:this._location=Wl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new TE(t,n)}get root(){const t=new Wl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return j8e(this._location.path)}get storage(){return this._service}get parent(){const t=Lnn(this._location.path);if(t===null)return null;const n=new Wl(this._location.bucket,t);return new TE(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw pnn(t)}}function rrn(e,t,n){e._throwIfRoot("uploadBytes");const r=ern(e.storage,e._location,U8e(),new Yv(t,!0),n);return e.storage.makeRequestWithTokens(r,F7).then(i=>({metadata:i,ref:e}))}function irn(e){const t={prefixes:[],items:[]};return H8e(e,t).then(()=>t)}async function H8e(e,t,n){const i=await srn(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await H8e(e,t,i.nextPageToken)}function srn(e,t){t!=null&&typeof t.maxResults=="number"&&bX("options.maxResults",1,1e3,t.maxResults);const n=t,r=Knn(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,F7)}function orn(e){e._throwIfRoot("getDownloadURL");const t=Xnn(e.storage,e._location,U8e());return e.storage.makeRequestWithTokens(t,F7).then(n=>{if(n===null)throw dnn();return n})}function arn(e){e._throwIfRoot("deleteObject");const t=Qnn(e.storage,e._location);return e.storage.makeRequestWithTokens(t,F7)}function urn(e,t){const n=$nn(e._location.path,t),r=new Wl(e._location.bucket,n);return new TE(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lrn(e){return/^[A-Za-z]+:\/\//.test(e)}function crn(e,t){return new TE(e,t)}function q8e(e,t){if(e instanceof yae){const n=e;if(n._bucket==null)throw cnn();const r=new TE(n,n._bucket);return t!=null?q8e(r,t):r}else return t!==void 0?urn(e,t):e}function frn(e,t){if(t&&lrn(t)){if(e instanceof yae)return crn(e,t);throw vX("To use ref(service, url), the first argument must be a Storage instance.")}else return q8e(e,t)}function Lbe(e,t){const n=t==null?void 0:t[O8e];return n==null?null:Wl.makeFromBucketSpec(n,e)}function drn(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:vJt(i,e.app.options.projectId))}class yae{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=P8e,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ztn,this._maxUploadRetryTime=enn,this._requests=new Set,i!=null?this._bucket=Wl.makeFromBucketSpec(i,this._host):this._bucket=Lbe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Wl.makeFromBucketSpec(this._url,t):this._bucket=Lbe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){bX("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){bX("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new TE(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new mnn(M8e());{const o=Cnn(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const $be="@firebase/storage",Fbe="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8e="storage";function NM(e,t,n){return e=ps(e),rrn(e,t,n)}function LR(e){return e=ps(e),irn(e)}function PM(e){return e=ps(e),orn(e)}function Bbe(e){return e=ps(e),arn(e)}function Bf(e,t){return e=ps(e),frn(e,t)}function jbe(e=eae(),t){e=ps(e);const r=PI(e,W8e).getImmediate({identifier:t}),i=yJt("storage");return i&&hrn(r,...i),r}function hrn(e,t,n,r={}){drn(e,t,n,r)}function prn(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new yae(n,r,i,t,uT)}function mrn(){m1(new J0(W8e,prn,"PUBLIC").setMultipleInstances(!0)),Lp($be,Fbe,""),Lp($be,Fbe,"esm2017")}mrn();var Ube=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bb,G8e;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,R){function N(){}N.prototype=R.prototype,I.D=R.prototype,I.prototype=new N,I.prototype.constructor=I,I.C=function(O,L,B){for(var F=Array(arguments.length-2),H=2;H<arguments.length;H++)F[H-2]=arguments[H];return R.prototype[L].apply(O,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,R,N){N||(N=0);var O=Array(16);if(typeof R=="string")for(var L=0;16>L;++L)O[L]=R.charCodeAt(N++)|R.charCodeAt(N++)<<8|R.charCodeAt(N++)<<16|R.charCodeAt(N++)<<24;else for(L=0;16>L;++L)O[L]=R[N++]|R[N++]<<8|R[N++]<<16|R[N++]<<24;R=I.g[0],N=I.g[1],L=I.g[2];var B=I.g[3],F=R+(B^N&(L^B))+O[0]+3614090360&4294967295;R=N+(F<<7&4294967295|F>>>25),F=B+(L^R&(N^L))+O[1]+3905402710&4294967295,B=R+(F<<12&4294967295|F>>>20),F=L+(N^B&(R^N))+O[2]+606105819&4294967295,L=B+(F<<17&4294967295|F>>>15),F=N+(R^L&(B^R))+O[3]+3250441966&4294967295,N=L+(F<<22&4294967295|F>>>10),F=R+(B^N&(L^B))+O[4]+4118548399&4294967295,R=N+(F<<7&4294967295|F>>>25),F=B+(L^R&(N^L))+O[5]+1200080426&4294967295,B=R+(F<<12&4294967295|F>>>20),F=L+(N^B&(R^N))+O[6]+2821735955&4294967295,L=B+(F<<17&4294967295|F>>>15),F=N+(R^L&(B^R))+O[7]+4249261313&4294967295,N=L+(F<<22&4294967295|F>>>10),F=R+(B^N&(L^B))+O[8]+1770035416&4294967295,R=N+(F<<7&4294967295|F>>>25),F=B+(L^R&(N^L))+O[9]+2336552879&4294967295,B=R+(F<<12&4294967295|F>>>20),F=L+(N^B&(R^N))+O[10]+4294925233&4294967295,L=B+(F<<17&4294967295|F>>>15),F=N+(R^L&(B^R))+O[11]+2304563134&4294967295,N=L+(F<<22&4294967295|F>>>10),F=R+(B^N&(L^B))+O[12]+1804603682&4294967295,R=N+(F<<7&4294967295|F>>>25),F=B+(L^R&(N^L))+O[13]+4254626195&4294967295,B=R+(F<<12&4294967295|F>>>20),F=L+(N^B&(R^N))+O[14]+2792965006&4294967295,L=B+(F<<17&4294967295|F>>>15),F=N+(R^L&(B^R))+O[15]+1236535329&4294967295,N=L+(F<<22&4294967295|F>>>10),F=R+(L^B&(N^L))+O[1]+4129170786&4294967295,R=N+(F<<5&4294967295|F>>>27),F=B+(N^L&(R^N))+O[6]+3225465664&4294967295,B=R+(F<<9&4294967295|F>>>23),F=L+(R^N&(B^R))+O[11]+643717713&4294967295,L=B+(F<<14&4294967295|F>>>18),F=N+(B^R&(L^B))+O[0]+3921069994&4294967295,N=L+(F<<20&4294967295|F>>>12),F=R+(L^B&(N^L))+O[5]+3593408605&4294967295,R=N+(F<<5&4294967295|F>>>27),F=B+(N^L&(R^N))+O[10]+38016083&4294967295,B=R+(F<<9&4294967295|F>>>23),F=L+(R^N&(B^R))+O[15]+3634488961&4294967295,L=B+(F<<14&4294967295|F>>>18),F=N+(B^R&(L^B))+O[4]+3889429448&4294967295,N=L+(F<<20&4294967295|F>>>12),F=R+(L^B&(N^L))+O[9]+568446438&4294967295,R=N+(F<<5&4294967295|F>>>27),F=B+(N^L&(R^N))+O[14]+3275163606&4294967295,B=R+(F<<9&4294967295|F>>>23),F=L+(R^N&(B^R))+O[3]+4107603335&4294967295,L=B+(F<<14&4294967295|F>>>18),F=N+(B^R&(L^B))+O[8]+1163531501&4294967295,N=L+(F<<20&4294967295|F>>>12),F=R+(L^B&(N^L))+O[13]+2850285829&4294967295,R=N+(F<<5&4294967295|F>>>27),F=B+(N^L&(R^N))+O[2]+4243563512&4294967295,B=R+(F<<9&4294967295|F>>>23),F=L+(R^N&(B^R))+O[7]+1735328473&4294967295,L=B+(F<<14&4294967295|F>>>18),F=N+(B^R&(L^B))+O[12]+2368359562&4294967295,N=L+(F<<20&4294967295|F>>>12),F=R+(N^L^B)+O[5]+4294588738&4294967295,R=N+(F<<4&4294967295|F>>>28),F=B+(R^N^L)+O[8]+2272392833&4294967295,B=R+(F<<11&4294967295|F>>>21),F=L+(B^R^N)+O[11]+1839030562&4294967295,L=B+(F<<16&4294967295|F>>>16),F=N+(L^B^R)+O[14]+4259657740&4294967295,N=L+(F<<23&4294967295|F>>>9),F=R+(N^L^B)+O[1]+2763975236&4294967295,R=N+(F<<4&4294967295|F>>>28),F=B+(R^N^L)+O[4]+1272893353&4294967295,B=R+(F<<11&4294967295|F>>>21),F=L+(B^R^N)+O[7]+4139469664&4294967295,L=B+(F<<16&4294967295|F>>>16),F=N+(L^B^R)+O[10]+3200236656&4294967295,N=L+(F<<23&4294967295|F>>>9),F=R+(N^L^B)+O[13]+681279174&4294967295,R=N+(F<<4&4294967295|F>>>28),F=B+(R^N^L)+O[0]+3936430074&4294967295,B=R+(F<<11&4294967295|F>>>21),F=L+(B^R^N)+O[3]+3572445317&4294967295,L=B+(F<<16&4294967295|F>>>16),F=N+(L^B^R)+O[6]+76029189&4294967295,N=L+(F<<23&4294967295|F>>>9),F=R+(N^L^B)+O[9]+3654602809&4294967295,R=N+(F<<4&4294967295|F>>>28),F=B+(R^N^L)+O[12]+3873151461&4294967295,B=R+(F<<11&4294967295|F>>>21),F=L+(B^R^N)+O[15]+530742520&4294967295,L=B+(F<<16&4294967295|F>>>16),F=N+(L^B^R)+O[2]+3299628645&4294967295,N=L+(F<<23&4294967295|F>>>9),F=R+(L^(N|~B))+O[0]+4096336452&4294967295,R=N+(F<<6&4294967295|F>>>26),F=B+(N^(R|~L))+O[7]+1126891415&4294967295,B=R+(F<<10&4294967295|F>>>22),F=L+(R^(B|~N))+O[14]+2878612391&4294967295,L=B+(F<<15&4294967295|F>>>17),F=N+(B^(L|~R))+O[5]+4237533241&4294967295,N=L+(F<<21&4294967295|F>>>11),F=R+(L^(N|~B))+O[12]+1700485571&4294967295,R=N+(F<<6&4294967295|F>>>26),F=B+(N^(R|~L))+O[3]+2399980690&4294967295,B=R+(F<<10&4294967295|F>>>22),F=L+(R^(B|~N))+O[10]+4293915773&4294967295,L=B+(F<<15&4294967295|F>>>17),F=N+(B^(L|~R))+O[1]+2240044497&4294967295,N=L+(F<<21&4294967295|F>>>11),F=R+(L^(N|~B))+O[8]+1873313359&4294967295,R=N+(F<<6&4294967295|F>>>26),F=B+(N^(R|~L))+O[15]+4264355552&4294967295,B=R+(F<<10&4294967295|F>>>22),F=L+(R^(B|~N))+O[6]+2734768916&4294967295,L=B+(F<<15&4294967295|F>>>17),F=N+(B^(L|~R))+O[13]+1309151649&4294967295,N=L+(F<<21&4294967295|F>>>11),F=R+(L^(N|~B))+O[4]+4149444226&4294967295,R=N+(F<<6&4294967295|F>>>26),F=B+(N^(R|~L))+O[11]+3174756917&4294967295,B=R+(F<<10&4294967295|F>>>22),F=L+(R^(B|~N))+O[2]+718787259&4294967295,L=B+(F<<15&4294967295|F>>>17),F=N+(B^(L|~R))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(L+(F<<21&4294967295|F>>>11))&4294967295,I.g[2]=I.g[2]+L&4294967295,I.g[3]=I.g[3]+B&4294967295}r.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var N=R-this.blockSize,O=this.B,L=this.h,B=0;B<R;){if(L==0)for(;B<=N;)i(this,I,B),B+=this.blockSize;if(typeof I=="string"){for(;B<R;)if(O[L++]=I.charCodeAt(B++),L==this.blockSize){i(this,O),L=0;break}}else for(;B<R;)if(O[L++]=I[B++],L==this.blockSize){i(this,O),L=0;break}}this.h=L,this.o+=R},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var N=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=N&255,N/=256;for(this.u(I),I=Array(16),R=N=0;4>R;++R)for(var O=0;32>O;O+=8)I[N++]=this.g[R]>>>O&255;return I};function s(I,R){var N=a;return Object.prototype.hasOwnProperty.call(N,I)?N[I]:N[I]=R(I)}function o(I,R){this.h=R;for(var N=[],O=!0,L=I.length-1;0<=L;L--){var B=I[L]|0;O&&B==R||(N[L]=B,O=!1)}this.g=N}var a={};function u(I){return-128<=I&&128>I?s(I,function(R){return new o([R|0],0>R?-1:0)}):new o([I|0],0>I?-1:0)}function l(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return g(l(-I));for(var R=[],N=1,O=0;I>=N;O++)R[O]=I/N|0,N*=4294967296;return new o(R,0)}function c(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return g(c(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=l(Math.pow(R,8)),O=f,L=0;L<I.length;L+=8){var B=Math.min(8,I.length-L),F=parseInt(I.substring(L,L+B),R);8>B?(B=l(Math.pow(R,B)),O=O.j(B).add(l(F))):(O=O.j(N),O=O.add(l(F)))}return O}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var I=0,R=1,N=0;N<this.g.length;N++){var O=this.i(N);I+=(0<=O?O:4294967296+O)*R,R*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(p(this))return"0";if(m(this))return"-"+g(this).toString(I);for(var R=l(Math.pow(I,6)),N=this,O="";;){var L=E(N,R).g;N=v(N,L.j(R));var B=((0<N.g.length?N.g[0]:N.h)>>>0).toString(I);if(N=L,p(N))return B+O;for(;6>B.length;)B="0"+B;O=B+O}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function p(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function m(I){return I.h==-1}e.l=function(I){return I=v(this,I),m(I)?-1:p(I)?0:1};function g(I){for(var R=I.g.length,N=[],O=0;O<R;O++)N[O]=~I.g[O];return new o(N,~I.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],O=0,L=0;L<=R;L++){var B=O+(this.i(L)&65535)+(I.i(L)&65535),F=(B>>>16)+(this.i(L)>>>16)+(I.i(L)>>>16);O=F>>>16,B&=65535,F&=65535,N[L]=F<<16|B}return new o(N,N[N.length-1]&-2147483648?-1:0)};function v(I,R){return I.add(g(R))}e.j=function(I){if(p(this)||p(I))return f;if(m(this))return m(I)?g(this).j(g(I)):g(g(this).j(I));if(m(I))return g(this.j(g(I)));if(0>this.l(h)&&0>I.l(h))return l(this.m()*I.m());for(var R=this.g.length+I.g.length,N=[],O=0;O<2*R;O++)N[O]=0;for(O=0;O<this.g.length;O++)for(var L=0;L<I.g.length;L++){var B=this.i(O)>>>16,F=this.i(O)&65535,H=I.i(L)>>>16,Q=I.i(L)&65535;N[2*O+2*L]+=F*Q,b(N,2*O+2*L),N[2*O+2*L+1]+=B*Q,b(N,2*O+2*L+1),N[2*O+2*L+1]+=F*H,b(N,2*O+2*L+1),N[2*O+2*L+2]+=B*H,b(N,2*O+2*L+2)}for(O=0;O<R;O++)N[O]=N[2*O+1]<<16|N[2*O];for(O=R;O<2*R;O++)N[O]=0;return new o(N,0)};function b(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function w(I,R){this.g=I,this.h=R}function E(I,R){if(p(R))throw Error("division by zero");if(p(I))return new w(f,f);if(m(I))return R=E(g(I),R),new w(g(R.g),g(R.h));if(m(R))return R=E(I,g(R)),new w(g(R.g),R.h);if(30<I.g.length){if(m(I)||m(R))throw Error("slowDivide_ only works with positive integers.");for(var N=d,O=R;0>=O.l(I);)N=T(N),O=T(O);var L=C(N,1),B=C(O,1);for(O=C(O,2),N=C(N,2);!p(O);){var F=B.add(O);0>=F.l(I)&&(L=L.add(N),B=F),O=C(O,1),N=C(N,1)}return R=v(I,L.j(R)),new w(L,R)}for(L=f;0<=I.l(R);){for(N=Math.max(1,Math.floor(I.m()/R.m())),O=Math.ceil(Math.log(N)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),B=l(N),F=B.j(R);m(F)||0<F.l(I);)N-=O,B=l(N),F=B.j(R);p(B)&&(B=d),L=L.add(B),I=v(I,F)}return new w(L,I)}e.A=function(I){return E(this,I).h},e.and=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],O=0;O<R;O++)N[O]=this.i(O)&I.i(O);return new o(N,this.h&I.h)},e.or=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],O=0;O<R;O++)N[O]=this.i(O)|I.i(O);return new o(N,this.h|I.h)},e.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),N=[],O=0;O<R;O++)N[O]=this.i(O)^I.i(O);return new o(N,this.h^I.h)};function T(I){for(var R=I.g.length+1,N=[],O=0;O<R;O++)N[O]=I.i(O)<<1|I.i(O-1)>>>31;return new o(N,I.h)}function C(I,R){var N=R>>5;R%=32;for(var O=I.g.length-N,L=[],B=0;B<O;B++)L[B]=0<R?I.i(B+N)>>>R|I.i(B+N+1)<<32-R:I.i(B+N);return new o(L,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,G8e=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,bb=o}).apply(typeof Ube<"u"?Ube:typeof self<"u"?self:typeof window<"u"?window:{});var OM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Y8e,SD,K8e,k$,xX,X8e,Q8e,J8e;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(D,W,te){return D==Array.prototype||D==Object.prototype||(D[W]=te.value),D};function n(D){D=[typeof globalThis=="object"&&globalThis,D,typeof window=="object"&&window,typeof self=="object"&&self,typeof OM=="object"&&OM];for(var W=0;W<D.length;++W){var te=D[W];if(te&&te.Math==Math)return te}throw Error("Cannot find global object")}var r=n(this);function i(D,W){if(W)e:{var te=r;D=D.split(".");for(var ce=0;ce<D.length-1;ce++){var ze=D[ce];if(!(ze in te))break e;te=te[ze]}D=D[D.length-1],ce=te[D],W=W(ce),W!=ce&&W!=null&&t(te,D,{configurable:!0,writable:!0,value:W})}}function s(D,W){D instanceof String&&(D+="");var te=0,ce=!1,ze={next:function(){if(!ce&&te<D.length){var Ze=te++;return{value:W(Ze,D[Ze]),done:!1}}return ce=!0,{done:!0,value:void 0}}};return ze[Symbol.iterator]=function(){return ze},ze}i("Array.prototype.values",function(D){return D||function(){return s(this,function(W,te){return te})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(D){var W=typeof D;return W=W!="object"?W:D?Array.isArray(D)?"array":W:"null",W=="array"||W=="object"&&typeof D.length=="number"}function l(D){var W=typeof D;return W=="object"&&D!=null||W=="function"}function c(D,W,te){return D.call.apply(D.bind,arguments)}function f(D,W,te){if(!D)throw Error();if(2<arguments.length){var ce=Array.prototype.slice.call(arguments,2);return function(){var ze=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ze,ce),D.apply(W,ze)}}return function(){return D.apply(W,arguments)}}function d(D,W,te){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(D,W){var te=Array.prototype.slice.call(arguments,1);return function(){var ce=te.slice();return ce.push.apply(ce,arguments),D.apply(this,ce)}}function p(D,W){function te(){}te.prototype=W.prototype,D.aa=W.prototype,D.prototype=new te,D.prototype.constructor=D,D.Qb=function(ce,ze,Ze){for(var Ut=Array(arguments.length-2),ai=2;ai<arguments.length;ai++)Ut[ai-2]=arguments[ai];return W.prototype[ze].apply(ce,Ut)}}function m(D){const W=D.length;if(0<W){const te=Array(W);for(let ce=0;ce<W;ce++)te[ce]=D[ce];return te}return[]}function g(D,W){for(let te=1;te<arguments.length;te++){const ce=arguments[te];if(u(ce)){const ze=D.length||0,Ze=ce.length||0;D.length=ze+Ze;for(let Ut=0;Ut<Ze;Ut++)D[ze+Ut]=ce[Ut]}else D.push(ce)}}class v{constructor(W,te){this.i=W,this.j=te,this.h=0,this.g=null}get(){let W;return 0<this.h?(this.h--,W=this.g,this.g=W.next,W.next=null):W=this.i(),W}}function b(D){return/^[\s\xa0]*$/.test(D)}function w(){var D=a.navigator;return D&&(D=D.userAgent)?D:""}function E(D){return E[" "](D),D}E[" "]=function(){};var T=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function C(D,W,te){for(const ce in D)W.call(te,D[ce],ce,D)}function I(D,W){for(const te in D)W.call(void 0,D[te],te,D)}function R(D){const W={};for(const te in D)W[te]=D[te];return W}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(D,W){let te,ce;for(let ze=1;ze<arguments.length;ze++){ce=arguments[ze];for(te in ce)D[te]=ce[te];for(let Ze=0;Ze<N.length;Ze++)te=N[Ze],Object.prototype.hasOwnProperty.call(ce,te)&&(D[te]=ce[te])}}function L(D){var W=1;D=D.split(":");const te=[];for(;0<W&&D.length;)te.push(D.shift()),W--;return D.length&&te.push(D.join(":")),te}function B(D){a.setTimeout(()=>{throw D},0)}function F(){var D=ie;let W=null;return D.g&&(W=D.g,D.g=D.g.next,D.g||(D.h=null),W.next=null),W}class H{constructor(){this.h=this.g=null}add(W,te){const ce=Q.get();ce.set(W,te),this.h?this.h.next=ce:this.g=ce,this.h=ce}}var Q=new v(()=>new J,D=>D.reset());class J{constructor(){this.next=this.g=this.h=null}set(W,te){this.h=W,this.g=te,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,Z=!1,ie=new H,q=()=>{const D=a.Promise.resolve(void 0);ne=()=>{D.then(U)}};var U=()=>{for(var D;D=F();){try{D.h.call(D.g)}catch(te){B(te)}var W=Q;W.j(D),100>W.h&&(W.h++,D.next=W.g,W.g=D)}Z=!1};function G(){this.s=this.s,this.C=this.C}G.prototype.s=!1,G.prototype.ma=function(){this.s||(this.s=!0,this.N())},G.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(D,W){this.type=D,this.g=this.target=W,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var D=!1,W=Object.defineProperty({},"passive",{get:function(){D=!0}});try{const te=()=>{};a.addEventListener("test",te,W),a.removeEventListener("test",te,W)}catch{}return D}();function ee(D,W){if(V.call(this,D?D.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,D){var te=this.type=D.type,ce=D.changedTouches&&D.changedTouches.length?D.changedTouches[0]:null;if(this.target=D.target||D.srcElement,this.g=W,W=D.relatedTarget){if(T){e:{try{E(W.nodeName);var ze=!0;break e}catch{}ze=!1}ze||(W=null)}}else te=="mouseover"?W=D.fromElement:te=="mouseout"&&(W=D.toElement);this.relatedTarget=W,ce?(this.clientX=ce.clientX!==void 0?ce.clientX:ce.pageX,this.clientY=ce.clientY!==void 0?ce.clientY:ce.pageY,this.screenX=ce.screenX||0,this.screenY=ce.screenY||0):(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0),this.button=D.button,this.key=D.key||"",this.ctrlKey=D.ctrlKey,this.altKey=D.altKey,this.shiftKey=D.shiftKey,this.metaKey=D.metaKey,this.pointerId=D.pointerId||0,this.pointerType=typeof D.pointerType=="string"?D.pointerType:ae[D.pointerType]||"",this.state=D.state,this.i=D,D.defaultPrevented&&ee.aa.h.call(this)}}p(ee,V);var ae={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var D=this.i;D.preventDefault?D.preventDefault():D.returnValue=!1};var _e="closure_listenable_"+(1e6*Math.random()|0),pe=0;function Te(D,W,te,ce,ze){this.listener=D,this.proxy=null,this.src=W,this.type=te,this.capture=!!ce,this.ha=ze,this.key=++pe,this.da=this.fa=!1}function Le(D){D.da=!0,D.listener=null,D.proxy=null,D.src=null,D.ha=null}function ye(D){this.src=D,this.g={},this.h=0}ye.prototype.add=function(D,W,te,ce,ze){var Ze=D.toString();D=this.g[Ze],D||(D=this.g[Ze]=[],this.h++);var Ut=$e(D,W,ce,ze);return-1<Ut?(W=D[Ut],te||(W.fa=!1)):(W=new Te(W,this.src,Ze,!!ce,ze),W.fa=te,D.push(W)),W};function he(D,W){var te=W.type;if(te in D.g){var ce=D.g[te],ze=Array.prototype.indexOf.call(ce,W,void 0),Ze;(Ze=0<=ze)&&Array.prototype.splice.call(ce,ze,1),Ze&&(Le(W),D.g[te].length==0&&(delete D.g[te],D.h--))}}function $e(D,W,te,ce){for(var ze=0;ze<D.length;++ze){var Ze=D[ze];if(!Ze.da&&Ze.listener==W&&Ze.capture==!!te&&Ze.ha==ce)return ze}return-1}var De="closure_lm_"+(1e6*Math.random()|0),tt={};function it(D,W,te,ce,ze){if(Array.isArray(W)){for(var Ze=0;Ze<W.length;Ze++)it(D,W[Ze],te,ce,ze);return null}return te=wt(te),D&&D[_e]?D.K(W,te,l(ce)?!!ce.capture:!1,ze):Me(D,W,te,!1,ce,ze)}function Me(D,W,te,ce,ze,Ze){if(!W)throw Error("Invalid event type");var Ut=l(ze)?!!ze.capture:!!ze,ai=qe(D);if(ai||(D[De]=ai=new ye(D)),te=ai.add(W,te,ce,Ut,Ze),te.proxy)return te;if(ce=Ge(),te.proxy=ce,ce.src=D,ce.listener=te,D.addEventListener)Y||(ze=Ut),ze===void 0&&(ze=!1),D.addEventListener(W.toString(),ce,ze);else if(D.attachEvent)D.attachEvent(Tt(W.toString()),ce);else if(D.addListener&&D.removeListener)D.addListener(ce);else throw Error("addEventListener and attachEvent are unavailable.");return te}function Ge(){function D(te){return W.call(D.src,D.listener,te)}const W=Ot;return D}function at(D,W,te,ce,ze){if(Array.isArray(W))for(var Ze=0;Ze<W.length;Ze++)at(D,W[Ze],te,ce,ze);else ce=l(ce)?!!ce.capture:!!ce,te=wt(te),D&&D[_e]?(D=D.i,W=String(W).toString(),W in D.g&&(Ze=D.g[W],te=$e(Ze,te,ce,ze),-1<te&&(Le(Ze[te]),Array.prototype.splice.call(Ze,te,1),Ze.length==0&&(delete D.g[W],D.h--)))):D&&(D=qe(D))&&(W=D.g[W.toString()],D=-1,W&&(D=$e(W,te,ce,ze)),(te=-1<D?W[D]:null)&&yt(te))}function yt(D){if(typeof D!="number"&&D&&!D.da){var W=D.src;if(W&&W[_e])he(W.i,D);else{var te=D.type,ce=D.proxy;W.removeEventListener?W.removeEventListener(te,ce,D.capture):W.detachEvent?W.detachEvent(Tt(te),ce):W.addListener&&W.removeListener&&W.removeListener(ce),(te=qe(W))?(he(te,D),te.h==0&&(te.src=null,W[De]=null)):Le(D)}}}function Tt(D){return D in tt?tt[D]:tt[D]="on"+D}function Ot(D,W){if(D.da)D=!0;else{W=new ee(W,this);var te=D.listener,ce=D.ha||D.src;D.fa&&yt(D),D=te.call(ce,W)}return D}function qe(D){return D=D[De],D instanceof ye?D:null}var dt="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(D){return typeof D=="function"?D:(D[dt]||(D[dt]=function(W){return D.handleEvent(W)}),D[dt])}function ke(){G.call(this),this.i=new ye(this),this.M=this,this.F=null}p(ke,G),ke.prototype[_e]=!0,ke.prototype.removeEventListener=function(D,W,te,ce){at(this,D,W,te,ce)};function Oe(D,W){var te,ce=D.F;if(ce)for(te=[];ce;ce=ce.F)te.push(ce);if(D=D.M,ce=W.type||W,typeof W=="string")W=new V(W,D);else if(W instanceof V)W.target=W.target||D;else{var ze=W;W=new V(ce,D),O(W,ze)}if(ze=!0,te)for(var Ze=te.length-1;0<=Ze;Ze--){var Ut=W.g=te[Ze];ze=ht(Ut,ce,!0,W)&&ze}if(Ut=W.g=D,ze=ht(Ut,ce,!0,W)&&ze,ze=ht(Ut,ce,!1,W)&&ze,te)for(Ze=0;Ze<te.length;Ze++)Ut=W.g=te[Ze],ze=ht(Ut,ce,!1,W)&&ze}ke.prototype.N=function(){if(ke.aa.N.call(this),this.i){var D=this.i,W;for(W in D.g){for(var te=D.g[W],ce=0;ce<te.length;ce++)Le(te[ce]);delete D.g[W],D.h--}}this.F=null},ke.prototype.K=function(D,W,te,ce){return this.i.add(String(D),W,!1,te,ce)},ke.prototype.L=function(D,W,te,ce){return this.i.add(String(D),W,!0,te,ce)};function ht(D,W,te,ce){if(W=D.i.g[String(W)],!W)return!0;W=W.concat();for(var ze=!0,Ze=0;Ze<W.length;++Ze){var Ut=W[Ze];if(Ut&&!Ut.da&&Ut.capture==te){var ai=Ut.listener,vo=Ut.ha||Ut.src;Ut.fa&&he(D.i,Ut),ze=ai.call(vo,ce)!==!1&&ze}}return ze&&!ce.defaultPrevented}function Lt(D,W,te){if(typeof D=="function")te&&(D=d(D,te));else if(D&&typeof D.handleEvent=="function")D=d(D.handleEvent,D);else throw Error("Invalid listener argument");return 2147483647<Number(W)?-1:a.setTimeout(D,W||0)}function Ft(D){D.g=Lt(()=>{D.g=null,D.i&&(D.i=!1,Ft(D))},D.l);const W=D.h;D.h=null,D.m.apply(null,W)}class dn extends G{constructor(W,te){super(),this.m=W,this.l=te,this.h=null,this.i=!1,this.g=null}j(W){this.h=arguments,this.g?this.i=!0:Ft(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nn(D){G.call(this),this.h=D,this.g={}}p(Nn,G);var Tr=[];function Ni(D){C(D.g,function(W,te){this.g.hasOwnProperty(te)&&yt(W)},D),D.g={}}Nn.prototype.N=function(){Nn.aa.N.call(this),Ni(this)},Nn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Un=a.JSON.stringify,tr=a.JSON.parse,Ai=class{stringify(D){return a.JSON.stringify(D,void 0)}parse(D){return a.JSON.parse(D,void 0)}};function Sr(){}Sr.prototype.h=null;function Lo(D){return D.h||(D.h=D.i())}function Ji(){}var Pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zi(){V.call(this,"d")}p(Zi,V);function Qr(){V.call(this,"c")}p(Qr,V);var $o={},oc=null;function xa(){return oc=oc||new ke}$o.La="serverreachability";function Du(D){V.call(this,$o.La,D)}p(Du,V);function Jr(D){const W=xa();Oe(W,new Du(W))}$o.STAT_EVENT="statevent";function ji(D,W){V.call(this,$o.STAT_EVENT,D),this.stat=W}p(ji,V);function oi(D){const W=xa();Oe(W,new ji(W,D))}$o.Ma="timingevent";function Ws(D,W){V.call(this,$o.Ma,D),this.size=W}p(Ws,V);function Fr(D,W){if(typeof D!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){D()},W)}function es(){this.g=!0}es.prototype.xa=function(){this.g=!1};function Fo(D,W,te,ce,ze,Ze){D.info(function(){if(D.g)if(Ze)for(var Ut="",ai=Ze.split("&"),vo=0;vo<ai.length;vo++){var Rr=ai[vo].split("=");if(1<Rr.length){var di=Rr[0];Rr=Rr[1];var Ss=di.split("_");Ut=2<=Ss.length&&Ss[1]=="type"?Ut+(di+"="+Rr+"&"):Ut+(di+"=redacted&")}}else Ut=null;else Ut=Ze;return"XMLHTTP REQ ("+ce+") [attempt "+ze+"]: "+W+`
`+te+`
`+Ut})}function ho(D,W,te,ce,ze,Ze,Ut){D.info(function(){return"XMLHTTP RESP ("+ce+") [ attempt "+ze+"]: "+W+`
`+te+`
`+Ze+" "+Ut})}function Qo(D,W,te,ce){D.info(function(){return"XMLHTTP TEXT ("+W+"): "+Nh(D,te)+(ce?" "+ce:"")})}function _l(D,W){D.info(function(){return"TIMEOUT: "+W})}es.prototype.info=function(){};function Nh(D,W){if(!D.g)return W;if(!W)return null;try{var te=JSON.parse(W);if(te){for(D=0;D<te.length;D++)if(Array.isArray(te[D])){var ce=te[D];if(!(2>ce.length)){var ze=ce[1];if(Array.isArray(ze)&&!(1>ze.length)){var Ze=ze[0];if(Ze!="noop"&&Ze!="stop"&&Ze!="close")for(var Ut=1;Ut<ze.length;Ut++)ze[Ut]=""}}}}return Un(te)}catch{return W}}var Pr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ac={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ms;function Xa(){}p(Xa,Sr),Xa.prototype.g=function(){return new XMLHttpRequest},Xa.prototype.i=function(){return{}},ms=new Xa;function Jo(D,W,te,ce){this.j=D,this.i=W,this.l=te,this.R=ce||1,this.U=new Nn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new hm}function hm(){this.i=null,this.g="",this.h=!1}var Ph={},_d={};function wd(D,W,te){D.L=1,D.v=nr(xt(W)),D.m=te,D.P=!0,gf(D,null)}function gf(D,W){D.F=Date.now(),fr(D),D.A=xt(D.v);var te=D.A,ce=D.R;Array.isArray(ce)||(ce=[String(ce)]),xf(te.i,"t",ce),D.C=0,te=D.j.J,D.h=new hm,D.g=mT(D.j,te?W:null,!D.m),0<D.O&&(D.M=new dn(d(D.Y,D,D.g),D.O)),W=D.U,te=D.g,ce=D.ca;var ze="readystatechange";Array.isArray(ze)||(ze&&(Tr[0]=ze.toString()),ze=Tr);for(var Ze=0;Ze<ze.length;Ze++){var Ut=it(te,ze[Ze],ce||W.handleEvent,!1,W.h||W);if(!Ut)break;W.g[Ut.key]=Ut}W=D.H?R(D.H):{},D.m?(D.u||(D.u="POST"),W["Content-Type"]="application/x-www-form-urlencoded",D.g.ea(D.A,D.u,D.m,W)):(D.u="GET",D.g.ea(D.A,D.u,null,W)),Jr(),Fo(D.i,D.u,D.A,D.l,D.R,D.m)}Jo.prototype.ca=function(D){D=D.target;const W=this.M;W&&Zr(D)==3?W.j():this.Y(D)},Jo.prototype.Y=function(D){try{if(D==this.g)e:{const Ss=Zr(this.g);var W=this.g.Ba();const wa=this.g.Z();if(!(3>Ss)&&(Ss!=3||this.g&&(this.h.h||this.g.oa()||Ks(this.g)))){this.J||Ss!=4||W==7||(W==8||0>=wa?Jr(3):Jr(2)),po(this);var te=this.g.Z();this.X=te;t:if(yf(this)){var ce=Ks(this.g);D="";var ze=ce.length,Ze=Zr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gs(this),wl(this);var Ut="";break t}this.h.i=new a.TextDecoder}for(W=0;W<ze;W++)this.h.h=!0,D+=this.h.i.decode(ce[W],{stream:!(Ze&&W==ze-1)});ce.length=0,this.h.g+=D,this.C=0,Ut=this.h.g}else Ut=this.g.oa();if(this.o=te==200,ho(this.i,this.u,this.A,this.l,this.R,Ss,te),this.o){if(this.T&&!this.K){t:{if(this.g){var ai,vo=this.g;if((ai=vo.g?vo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(ai)){var Rr=ai;break t}}Rr=null}if(te=Rr)Qo(this.i,this.l,te,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uc(this,te);else{this.o=!1,this.s=3,oi(12),Gs(this),wl(this);break e}}if(this.P){te=!0;let Ou;for(;!this.J&&this.C<Ut.length;)if(Ou=vf(this,Ut),Ou==_d){Ss==4&&(this.s=4,oi(14),te=!1),Qo(this.i,this.l,null,"[Incomplete Response]");break}else if(Ou==Ph){this.s=4,oi(15),Qo(this.i,this.l,Ut,"[Invalid Chunk]"),te=!1;break}else Qo(this.i,this.l,Ou,null),uc(this,Ou);if(yf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ss!=4||Ut.length!=0||this.h.h||(this.s=1,oi(16),te=!1),this.o=this.o&&te,!te)Qo(this.i,this.l,Ut,"[Invalid Chunked Response]"),Gs(this),wl(this);else if(0<Ut.length&&!this.W){this.W=!0;var di=this.j;di.g==this&&di.ba&&!di.M&&(di.j.info("Great, no buffering proxy detected. Bytes received: "+Ut.length),hc(di),di.M=!0,oi(11))}}else Qo(this.i,this.l,Ut,null),uc(this,Ut);Ss==4&&Gs(this),this.o&&!this.J&&(Ss==4?Ei(this.j,this):(this.o=!1,fr(this)))}else Pu(this.g),te==400&&0<Ut.indexOf("Unknown SID")?(this.s=3,oi(12)):(this.s=0,oi(13)),Gs(this),wl(this)}}}catch{}finally{}};function yf(D){return D.g?D.u=="GET"&&D.L!=2&&D.j.Ca:!1}function vf(D,W){var te=D.C,ce=W.indexOf(`
`,te);return ce==-1?_d:(te=Number(W.substring(te,ce)),isNaN(te)?Ph:(ce+=1,ce+te>W.length?_d:(W=W.slice(ce,ce+te),D.C=ce+te,W)))}Jo.prototype.cancel=function(){this.J=!0,Gs(this)};function fr(D){D.S=Date.now()+D.I,Oh(D,D.I)}function Oh(D,W){if(D.B!=null)throw Error("WatchDog timer not null");D.B=Fr(d(D.ba,D),W)}function po(D){D.B&&(a.clearTimeout(D.B),D.B=null)}Jo.prototype.ba=function(){this.B=null;const D=Date.now();0<=D-this.S?(_l(this.i,this.A),this.L!=2&&(Jr(),oi(17)),Gs(this),this.s=2,wl(this)):Oh(this,this.S-D)};function wl(D){D.j.G==0||D.J||Ei(D.j,D)}function Gs(D){po(D);var W=D.M;W&&typeof W.ma=="function"&&W.ma(),D.M=null,Ni(D.U),D.g&&(W=D.g,D.g=null,W.abort(),W.ma())}function uc(D,W){try{var te=D.j;if(te.G!=0&&(te.g==D||go(te.h,D))){if(!D.K&&go(te.h,D)&&te.G==3){try{var ce=te.Da.g.parse(W)}catch{ce=null}if(Array.isArray(ce)&&ce.length==3){var ze=ce;if(ze[0]==0){e:if(!te.u){if(te.g)if(te.g.F+3e3<D.F)mm(te),dc(te);else break e;Sg(te),oi(18)}}else te.za=ze[1],0<te.za-te.T&&37500>ze[2]&&te.F&&te.v==0&&!te.C&&(te.C=Fr(d(te.Za,te),6e3));if(1>=pm(te.h)&&te.ca){try{te.ca()}catch{}te.ca=void 0}}else Sf(te,11)}else if((D.K||te.g==D)&&mm(te),!b(W))for(ze=te.Da.g.parse(W),W=0;W<ze.length;W++){let Rr=ze[W];if(te.T=Rr[0],Rr=Rr[1],te.G==2)if(Rr[0]=="c"){te.K=Rr[1],te.ia=Rr[2];const di=Rr[3];di!=null&&(te.la=di,te.j.info("VER="+te.la));const Ss=Rr[4];Ss!=null&&(te.Aa=Ss,te.j.info("SVER="+te.Aa));const wa=Rr[5];wa!=null&&typeof wa=="number"&&0<wa&&(ce=1.5*wa,te.L=ce,te.j.info("backChannelRequestTimeoutMs_="+ce)),ce=te;const Ou=D.g;if(Ou){const gm=Ou.g?Ou.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gm){var Ze=ce.h;Ze.g||gm.indexOf("spdy")==-1&&gm.indexOf("quic")==-1&&gm.indexOf("h2")==-1||(Ze.j=Ze.l,Ze.g=new Set,Ze.h&&(ue(Ze,Ze.h),Ze.h=null))}if(ce.D){const q1=Ou.g?Ou.g.getResponseHeader("X-HTTP-Session-Id"):null;q1&&(ce.ya=q1,un(ce.I,ce.D,q1))}}te.G=3,te.l&&te.l.ua(),te.ba&&(te.R=Date.now()-D.F,te.j.info("Handshake RTT: "+te.R+"ms")),ce=te;var Ut=D;if(ce.qa=V1(ce,ce.J?ce.ia:null,ce.W),Ut.K){Se(ce.h,Ut);var ai=Ut,vo=ce.L;vo&&(ai.I=vo),ai.B&&(po(ai),fr(ai)),ce.g=Ut}else Tg(ce);0<te.i.length&&Ef(te)}else Rr[0]!="stop"&&Rr[0]!="close"||Sf(te,7);else te.G==3&&(Rr[0]=="stop"||Rr[0]=="close"?Rr[0]=="stop"?Sf(te,7):Fs(te):Rr[0]!="noop"&&te.l&&te.l.ta(Rr),te.v=0)}}Jr(4)}catch{}}var Mh=class{constructor(D,W){this.g=D,this.map=W}};function lc(D){this.l=D||10,a.PerformanceNavigationTiming?(D=a.performance.getEntriesByType("navigation"),D=0<D.length&&(D[0].nextHopProtocol=="hq"||D[0].nextHopProtocol=="h2")):D=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=D?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mo(D){return D.h?!0:D.g?D.g.size>=D.j:!1}function pm(D){return D.h?1:D.g?D.g.size:0}function go(D,W){return D.h?D.h==W:D.g?D.g.has(W):!1}function ue(D,W){D.g?D.g.add(W):D.h=W}function Se(D,W){D.h&&D.h==W?D.h=null:D.g&&D.g.has(W)&&D.g.delete(W)}lc.prototype.cancel=function(){if(this.i=ge(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const D of this.g.values())D.cancel();this.g.clear()}};function ge(D){if(D.h!=null)return D.i.concat(D.h.D);if(D.g!=null&&D.g.size!==0){let W=D.i;for(const te of D.g.values())W=W.concat(te.D);return W}return m(D.i)}function Ne(D){if(D.V&&typeof D.V=="function")return D.V();if(typeof Map<"u"&&D instanceof Map||typeof Set<"u"&&D instanceof Set)return Array.from(D.values());if(typeof D=="string")return D.split("");if(u(D)){for(var W=[],te=D.length,ce=0;ce<te;ce++)W.push(D[ce]);return W}W=[],te=0;for(ce in D)W[te++]=D[ce];return W}function Be(D){if(D.na&&typeof D.na=="function")return D.na();if(!D.V||typeof D.V!="function"){if(typeof Map<"u"&&D instanceof Map)return Array.from(D.keys());if(!(typeof Set<"u"&&D instanceof Set)){if(u(D)||typeof D=="string"){var W=[];D=D.length;for(var te=0;te<D;te++)W.push(te);return W}W=[],te=0;for(const ce in D)W[te++]=ce;return W}}}function Re(D,W){if(D.forEach&&typeof D.forEach=="function")D.forEach(W,void 0);else if(u(D)||typeof D=="string")Array.prototype.forEach.call(D,W,void 0);else for(var te=Be(D),ce=Ne(D),ze=ce.length,Ze=0;Ze<ze;Ze++)W.call(void 0,ce[Ze],te&&te[Ze],D)}var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bt(D,W){if(D){D=D.split("&");for(var te=0;te<D.length;te++){var ce=D[te].indexOf("="),ze=null;if(0<=ce){var Ze=D[te].substring(0,ce);ze=D[te].substring(ce+1)}else Ze=D[te];W(Ze,ze?decodeURIComponent(ze.replace(/\+/g," ")):"")}}}function Et(D){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,D instanceof Et){this.h=D.h,Dt(this,D.j),this.o=D.o,this.g=D.g,qt(this,D.s),this.l=D.l;var W=D.i,te=new Bo;te.i=W.i,W.g&&(te.g=new Map(W.g),te.h=W.h),In(this,te),this.m=D.m}else D&&(W=String(D).match(rt))?(this.h=!1,Dt(this,W[1]||"",!0),this.o=ln(W[2]||""),this.g=ln(W[3]||"",!0),qt(this,W[4]),this.l=ln(W[5]||"",!0),In(this,W[6]||"",!0),this.m=ln(W[7]||"")):(this.h=!1,this.i=new Bo(null,this.h))}Et.prototype.toString=function(){var D=[],W=this.j;W&&D.push(br(W,Qa,!0),":");var te=this.g;return(te||W=="file")&&(D.push("//"),(W=this.o)&&D.push(br(W,Qa,!0),"@"),D.push(encodeURIComponent(String(te)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),te=this.s,te!=null&&D.push(":",String(te))),(te=this.l)&&(this.g&&te.charAt(0)!="/"&&D.push("/"),D.push(br(te,te.charAt(0)=="/"?Lh:cc,!0))),(te=this.i.toString())&&D.push("?",te),(te=this.m)&&D.push("#",br(te,$h)),D.join("")};function xt(D){return new Et(D)}function Dt(D,W,te){D.j=te?ln(W,!0):W,D.j&&(D.j=D.j.replace(/:$/,""))}function qt(D,W){if(W){if(W=Number(W),isNaN(W)||0>W)throw Error("Bad port number "+W);D.s=W}else D.s=null}function In(D,W,te){W instanceof Bo?(D.i=W,Nu(D.i,D.h)):(te||(W=br(W,bf)),D.i=new Bo(W,D.h))}function un(D,W,te){D.i.set(W,te)}function nr(D){return un(D,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),D}function ln(D,W){return D?W?decodeURI(D.replace(/%25/g,"%2525")):decodeURIComponent(D):""}function br(D,W,te){return typeof D=="string"?(D=encodeURI(D).replace(W,Ys),te&&(D=D.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),D):null}function Ys(D){return D=D.charCodeAt(0),"%"+(D>>4&15).toString(16)+(D&15).toString(16)}var Qa=/[#\/\?@]/g,cc=/[#\?:]/g,Lh=/[#\?]/g,bf=/[#\?@]/g,$h=/#/g;function Bo(D,W){this.h=this.g=null,this.i=D||null,this.j=!!W}function gs(D){D.g||(D.g=new Map,D.h=0,D.i&&bt(D.i,function(W,te){D.add(decodeURIComponent(W.replace(/\+/g," ")),te)}))}e=Bo.prototype,e.add=function(D,W){gs(this),this.i=null,D=Za(this,D);var te=this.g.get(D);return te||this.g.set(D,te=[]),te.push(W),this.h+=1,this};function jo(D,W){gs(D),W=Za(D,W),D.g.has(W)&&(D.i=null,D.h-=D.g.get(W).length,D.g.delete(W))}function Ja(D,W){return gs(D),W=Za(D,W),D.g.has(W)}e.forEach=function(D,W){gs(this),this.g.forEach(function(te,ce){te.forEach(function(ze){D.call(W,ze,ce,this)},this)},this)},e.na=function(){gs(this);const D=Array.from(this.g.values()),W=Array.from(this.g.keys()),te=[];for(let ce=0;ce<W.length;ce++){const ze=D[ce];for(let Ze=0;Ze<ze.length;Ze++)te.push(W[ce])}return te},e.V=function(D){gs(this);let W=[];if(typeof D=="string")Ja(this,D)&&(W=W.concat(this.g.get(Za(this,D))));else{D=Array.from(this.g.values());for(let te=0;te<D.length;te++)W=W.concat(D[te])}return W},e.set=function(D,W){return gs(this),this.i=null,D=Za(this,D),Ja(this,D)&&(this.h-=this.g.get(D).length),this.g.set(D,[W]),this.h+=1,this},e.get=function(D,W){return D?(D=this.V(D),0<D.length?String(D[0]):W):W};function xf(D,W,te){jo(D,W),0<te.length&&(D.i=null,D.g.set(Za(D,W),m(te)),D.h+=te.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const D=[],W=Array.from(this.g.keys());for(var te=0;te<W.length;te++){var ce=W[te];const Ze=encodeURIComponent(String(ce)),Ut=this.V(ce);for(ce=0;ce<Ut.length;ce++){var ze=Ze;Ut[ce]!==""&&(ze+="="+encodeURIComponent(String(Ut[ce]))),D.push(ze)}}return this.i=D.join("&")};function Za(D,W){return W=String(W),D.j&&(W=W.toLowerCase()),W}function Nu(D,W){W&&!D.j&&(gs(D),D.i=null,D.g.forEach(function(te,ce){var ze=ce.toLowerCase();ce!=ze&&(jo(this,ce),xf(this,ze,te))},D)),D.j=W}function U1(D,W){const te=new es;if(a.Image){const ce=new Image;ce.onload=h(Ts,te,"TestLoadImage: loaded",!0,W,ce),ce.onerror=h(Ts,te,"TestLoadImage: error",!1,W,ce),ce.onabort=h(Ts,te,"TestLoadImage: abort",!1,W,ce),ce.ontimeout=h(Ts,te,"TestLoadImage: timeout",!1,W,ce),a.setTimeout(function(){ce.ontimeout&&ce.ontimeout()},1e4),ce.src=D}else W(!1)}function fc(D,W){const te=new es,ce=new AbortController,ze=setTimeout(()=>{ce.abort(),Ts(te,"TestPingServer: timeout",!1,W)},1e4);fetch(D,{signal:ce.signal}).then(Ze=>{clearTimeout(ze),Ze.ok?Ts(te,"TestPingServer: ok",!0,W):Ts(te,"TestPingServer: server error",!1,W)}).catch(()=>{clearTimeout(ze),Ts(te,"TestPingServer: error",!1,W)})}function Ts(D,W,te,ce,ze){try{ze&&(ze.onload=null,ze.onerror=null,ze.onabort=null,ze.ontimeout=null),ce(te)}catch{}}function Vx(){this.g=new Ai}function wg(D,W,te){const ce=te||"";try{Re(D,function(ze,Ze){let Ut=ze;l(ze)&&(Ut=Un(ze)),W.push(ce+Ze+"="+encodeURIComponent(Ut))})}catch(ze){throw W.push(ce+"type="+encodeURIComponent("_badmap")),ze}}function _f(D){this.l=D.Ub||null,this.j=D.eb||!1}p(_f,Sr),_f.prototype.g=function(){return new Ed(this.l,this.j)},_f.prototype.i=function(D){return function(){return D}}({});function Ed(D,W){ke.call(this),this.D=D,this.o=W,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Ed,ke),e=Ed.prototype,e.open=function(D,W){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=D,this.A=W,this.readyState=1,dr(this)},e.send=function(D){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const W={headers:this.u,method:this.B,credentials:this.m,cache:void 0};D&&(W.body=D),(this.D||a).fetch(new Request(this.A,W)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},e.Sa=function(D){if(this.g&&(this.l=D,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=D.headers,this.readyState=2,dr(this)),this.g&&(this.readyState=3,dr(this),this.g)))if(this.responseType==="arraybuffer")D.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in D){if(this.j=D.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;z1(this)}else D.text().then(this.Ra.bind(this),this.ga.bind(this))};function z1(D){D.j.read().then(D.Pa.bind(D)).catch(D.ga.bind(D))}e.Pa=function(D){if(this.g){if(this.o&&D.value)this.response.push(D.value);else if(!this.o){var W=D.value?D.value:new Uint8Array(0);(W=this.v.decode(W,{stream:!D.done}))&&(this.response=this.responseText+=W)}D.done?xr(this):dr(this),this.readyState==3&&z1(this)}},e.Ra=function(D){this.g&&(this.response=this.responseText=D,xr(this))},e.Qa=function(D){this.g&&(this.response=D,xr(this))},e.ga=function(){this.g&&xr(this)};function xr(D){D.readyState=4,D.l=null,D.j=null,D.v=null,dr(D)}e.setRequestHeader=function(D,W){this.u.append(D,W)},e.getResponseHeader=function(D){return this.h&&this.h.get(D.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const D=[],W=this.h.entries();for(var te=W.next();!te.done;)te=te.value,D.push(te[0]+": "+te[1]),te=W.next();return D.join(`\r
`)};function dr(D){D.onreadystatechange&&D.onreadystatechange.call(D)}Object.defineProperty(Ed.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(D){this.m=D?"include":"same-origin"}});function wf(D){let W="";return C(D,function(te,ce){W+=ce,W+=":",W+=te,W+=`\r
`}),W}function ve(D,W,te){e:{for(ce in te){var ce=!1;break e}ce=!0}ce||(te=wf(te),typeof D=="string"?te!=null&&encodeURIComponent(String(te)):un(D,W,te))}function Ae(D){ke.call(this),this.headers=new Map,this.o=D||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(Ae,ke);var Qe=/^https?$/i,tn=["POST","PUT"];e=Ae.prototype,e.Ha=function(D){this.J=D},e.ea=function(D,W,te,ce){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+D);W=W?W.toUpperCase():"GET",this.D=D,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ms.g(),this.v=this.o?Lo(this.o):Lo(ms),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(W,String(D),!0),this.B=!1}catch(Ze){rr(this,Ze);return}if(D=te||"",te=new Map(this.headers),ce)if(Object.getPrototypeOf(ce)===Object.prototype)for(var ze in ce)te.set(ze,ce[ze]);else if(typeof ce.keys=="function"&&typeof ce.get=="function")for(const Ze of ce.keys())te.set(Ze,ce.get(Ze));else throw Error("Unknown input type for opt_headers: "+String(ce));ce=Array.from(te.keys()).find(Ze=>Ze.toLowerCase()=="content-type"),ze=a.FormData&&D instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tn,W,void 0))||ce||ze||te.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ze,Ut]of te)this.g.setRequestHeader(Ze,Ut);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Br(this),this.u=!0,this.g.send(D),this.u=!1}catch(Ze){rr(this,Ze)}};function rr(D,W){D.h=!1,D.g&&(D.j=!0,D.g.abort(),D.j=!1),D.l=W,D.m=5,kr(D),cn(D)}function kr(D){D.A||(D.A=!0,Oe(D,"complete"),Oe(D,"error"))}e.abort=function(D){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=D||7,Oe(this,"complete"),Oe(this,"abort"),cn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cn(this,!0)),Ae.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?fi(this):this.bb())},e.bb=function(){fi(this)};function fi(D){if(D.h&&typeof o<"u"&&(!D.v[1]||Zr(D)!=4||D.Z()!=2)){if(D.u&&Zr(D)==4)Lt(D.Ea,0,D);else if(Oe(D,"readystatechange"),Zr(D)==4){D.h=!1;try{const Ut=D.Z();e:switch(Ut){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var W=!0;break e;default:W=!1}var te;if(!(te=W)){var ce;if(ce=Ut===0){var ze=String(D.D).match(rt)[1]||null;!ze&&a.self&&a.self.location&&(ze=a.self.location.protocol.slice(0,-1)),ce=!Qe.test(ze?ze.toLowerCase():"")}te=ce}if(te)Oe(D,"complete"),Oe(D,"success");else{D.m=6;try{var Ze=2<Zr(D)?D.g.statusText:""}catch{Ze=""}D.l=Ze+" ["+D.Z()+"]",kr(D)}}finally{cn(D)}}}}function cn(D,W){if(D.g){Br(D);const te=D.g,ce=D.v[0]?()=>{}:null;D.g=null,D.v=null,W||Oe(D,"ready");try{te.onreadystatechange=ce}catch{}}}function Br(D){D.I&&(a.clearTimeout(D.I),D.I=null)}e.isActive=function(){return!!this.g};function Zr(D){return D.g?D.g.readyState:0}e.Z=function(){try{return 2<Zr(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(D){if(this.g){var W=this.g.responseText;return D&&W.indexOf(D)==0&&(W=W.substring(D.length)),tr(W)}};function Ks(D){try{if(!D.g)return null;if("response"in D.g)return D.g.response;switch(D.H){case"":case"text":return D.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in D.g)return D.g.mozResponseArrayBuffer}return null}catch{return null}}function Pu(D){const W={};D=(D.g&&2<=Zr(D)&&D.g.getAllResponseHeaders()||"").split(`\r
`);for(let ce=0;ce<D.length;ce++){if(b(D[ce]))continue;var te=L(D[ce]);const ze=te[0];if(te=te[1],typeof te!="string")continue;te=te.trim();const Ze=W[ze]||[];W[ze]=Ze,Ze.push(te)}I(W,function(ce){return ce.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ts(D,W,te){return te&&te.internalChannelParams&&te.internalChannelParams[D]||W}function Td(D){this.Aa=0,this.i=[],this.j=new es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ts("failFast",!1,D),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ts("baseRetryDelayMs",5e3,D),this.cb=ts("retryDelaySeedMs",1e4,D),this.Wa=ts("forwardChannelMaxRetries",2,D),this.wa=ts("forwardChannelRequestTimeoutMs",2e4,D),this.pa=D&&D.xmlHttpFactory||void 0,this.Xa=D&&D.Tb||void 0,this.Ca=D&&D.useFetchStreams||!1,this.L=void 0,this.J=D&&D.supportsCrossDomainXhr||!1,this.K="",this.h=new lc(D&&D.concurrentRequestLimit),this.Da=new Vx,this.P=D&&D.fastHandshake||!1,this.O=D&&D.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=D&&D.Rb||!1,D&&D.xa&&this.j.xa(),D&&D.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&D&&D.detectBufferingProxy||!1,this.ja=void 0,D&&D.longPollingTimeout&&0<D.longPollingTimeout&&(this.ja=D.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Td.prototype,e.la=8,e.G=1,e.connect=function(D,W,te,ce){oi(0),this.W=D,this.H=W||{},te&&ce!==void 0&&(this.H.OSID=te,this.H.OAID=ce),this.F=this.X,this.I=V1(this,null,this.W),Ef(this)};function Fs(D){if(Eg(D),D.G==3){var W=D.U++,te=xt(D.I);if(un(te,"SID",D.K),un(te,"RID",W),un(te,"TYPE","terminate"),Fh(D,te),W=new Jo(D,D.j,W),W.L=2,W.v=nr(xt(te)),te=!1,a.navigator&&a.navigator.sendBeacon)try{te=a.navigator.sendBeacon(W.v.toString(),"")}catch{}!te&&a.Image&&(new Image().src=W.v,te=!0),te||(W.g=mT(W.j,null),W.g.ea(W.v)),W.F=Date.now(),fr(W)}pT(D)}function dc(D){D.g&&(hc(D),D.g.cancel(),D.g=null)}function Eg(D){dc(D),D.u&&(a.clearTimeout(D.u),D.u=null),mm(D),D.h.cancel(),D.s&&(typeof D.s=="number"&&a.clearTimeout(D.s),D.s=null)}function Ef(D){if(!mo(D.h)&&!D.s){D.s=!0;var W=D.Ga;ne||q(),Z||(ne(),Z=!0),ie.add(W,D),D.B=0}}function hT(D,W){return pm(D.h)>=D.h.j-(D.s?1:0)?!1:D.s?(D.i=W.D.concat(D.i),!0):D.G==1||D.G==2||D.B>=(D.Va?0:D.Wa)?!1:(D.s=Fr(d(D.Ga,D,W),Tf(D,D.B)),D.B++,!0)}e.Ga=function(D){if(this.s)if(this.s=null,this.G==1){if(!D){this.U=Math.floor(1e5*Math.random()),D=this.U++;const ze=new Jo(this,this.j,D);let Ze=this.o;if(this.S&&(Ze?(Ze=R(Ze),O(Ze,this.S)):Ze=this.S),this.m!==null||this.O||(ze.H=Ze,Ze=null),this.P)e:{for(var W=0,te=0;te<this.i.length;te++){t:{var ce=this.i[te];if("__data__"in ce.map&&(ce=ce.map.__data__,typeof ce=="string")){ce=ce.length;break t}ce=void 0}if(ce===void 0)break;if(W+=ce,4096<W){W=te;break e}if(W===4096||te===this.i.length-1){W=te+1;break e}}W=1e3}else W=1e3;W=yo(this,ze,W),te=xt(this.I),un(te,"RID",D),un(te,"CVER",22),this.D&&un(te,"X-HTTP-Session-Id",this.D),Fh(this,te),Ze&&(this.O?W="headers="+encodeURIComponent(String(wf(Ze)))+"&"+W:this.m&&ve(te,this.m,Ze)),ue(this.h,ze),this.Ua&&un(te,"TYPE","init"),this.P?(un(te,"$req",W),un(te,"SID","null"),ze.T=!0,wd(ze,te,null)):wd(ze,te,W),this.G=2}}else this.G==3&&(D?Uo(this,D):this.i.length==0||mo(this.h)||Uo(this))};function Uo(D,W){var te;W?te=W.l:te=D.U++;const ce=xt(D.I);un(ce,"SID",D.K),un(ce,"RID",te),un(ce,"AID",D.T),Fh(D,ce),D.m&&D.o&&ve(ce,D.m,D.o),te=new Jo(D,D.j,te,D.B+1),D.m===null&&(te.H=D.o),W&&(D.i=W.D.concat(D.i)),W=yo(D,te,1e3),te.I=Math.round(.5*D.wa)+Math.round(.5*D.wa*Math.random()),ue(D.h,te),wd(te,ce,W)}function Fh(D,W){D.H&&C(D.H,function(te,ce){un(W,ce,te)}),D.l&&Re({},function(te,ce){un(W,ce,te)})}function yo(D,W,te){te=Math.min(D.i.length,te);var ce=D.l?d(D.l.Na,D.l,D):null;e:{var ze=D.i;let Ze=-1;for(;;){const Ut=["count="+te];Ze==-1?0<te?(Ze=ze[0].g,Ut.push("ofs="+Ze)):Ze=0:Ut.push("ofs="+Ze);let ai=!0;for(let vo=0;vo<te;vo++){let Rr=ze[vo].g;const di=ze[vo].map;if(Rr-=Ze,0>Rr)Ze=Math.max(0,ze[vo].g-100),ai=!1;else try{wg(di,Ut,"req"+Rr+"_")}catch{ce&&ce(di)}}if(ai){ce=Ut.join("&");break e}}}return D=D.i.splice(0,te),W.D=D,ce}function Tg(D){if(!D.g&&!D.u){D.Y=1;var W=D.Fa;ne||q(),Z||(ne(),Z=!0),ie.add(W,D),D.v=0}}function Sg(D){return D.g||D.u||3<=D.v?!1:(D.Y++,D.u=Fr(d(D.Fa,D),Tf(D,D.v)),D.v++,!0)}e.Fa=function(){if(this.u=null,Cg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var D=2*this.R;this.j.info("BP detection timer enabled: "+D),this.A=Fr(d(this.ab,this),D)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,oi(10),dc(this),Cg(this))};function hc(D){D.A!=null&&(a.clearTimeout(D.A),D.A=null)}function Cg(D){D.g=new Jo(D,D.j,"rpc",D.Y),D.m===null&&(D.g.H=D.o),D.g.O=0;var W=xt(D.qa);un(W,"RID","rpc"),un(W,"SID",D.K),un(W,"AID",D.T),un(W,"CI",D.F?"0":"1"),!D.F&&D.ja&&un(W,"TO",D.ja),un(W,"TYPE","xmlhttp"),Fh(D,W),D.m&&D.o&&ve(W,D.m,D.o),D.L&&(D.g.I=D.L);var te=D.g;D=D.ia,te.L=1,te.v=nr(xt(W)),te.m=null,te.P=!0,gf(te,D)}e.Za=function(){this.C!=null&&(this.C=null,dc(this),Sg(this),oi(19))};function mm(D){D.C!=null&&(a.clearTimeout(D.C),D.C=null)}function Ei(D,W){var te=null;if(D.g==W){mm(D),hc(D),D.g=null;var ce=2}else if(go(D.h,W))te=W.D,Se(D.h,W),ce=1;else return;if(D.G!=0){if(W.o)if(ce==1){te=W.m?W.m.length:0,W=Date.now()-W.F;var ze=D.B;ce=xa(),Oe(ce,new Ws(ce,te)),Ef(D)}else Tg(D);else if(ze=W.s,ze==3||ze==0&&0<W.X||!(ce==1&&hT(D,W)||ce==2&&Sg(D)))switch(te&&0<te.length&&(W=D.h,W.i=W.i.concat(te)),ze){case 1:Sf(D,5);break;case 4:Sf(D,10);break;case 3:Sf(D,6);break;default:Sf(D,2)}}}function Tf(D,W){let te=D.Ta+Math.floor(Math.random()*D.cb);return D.isActive()||(te*=2),te*W}function Sf(D,W){if(D.j.info("Error code "+W),W==2){var te=d(D.fb,D),ce=D.Xa;const ze=!ce;ce=new Et(ce||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Dt(ce,"https"),nr(ce),ze?U1(ce.toString(),te):fc(ce.toString(),te)}else oi(2);D.G=0,D.l&&D.l.sa(W),pT(D),Eg(D)}e.fb=function(D){D?(this.j.info("Successfully pinged google.com"),oi(2)):(this.j.info("Failed to ping google.com"),oi(1))};function pT(D){if(D.G=0,D.ka=[],D.l){const W=ge(D.h);(W.length!=0||D.i.length!=0)&&(g(D.ka,W),g(D.ka,D.i),D.h.i.length=0,m(D.i),D.i.length=0),D.l.ra()}}function V1(D,W,te){var ce=te instanceof Et?xt(te):new Et(te);if(ce.g!="")W&&(ce.g=W+"."+ce.g),qt(ce,ce.s);else{var ze=a.location;ce=ze.protocol,W=W?W+"."+ze.hostname:ze.hostname,ze=+ze.port;var Ze=new Et(null);ce&&Dt(Ze,ce),W&&(Ze.g=W),ze&&qt(Ze,ze),te&&(Ze.l=te),ce=Ze}return te=D.D,W=D.ya,te&&W&&un(ce,te,W),un(ce,"VER",D.la),Fh(D,ce),ce}function mT(D,W,te){if(W&&!D.J)throw Error("Can't create secondary domain capable XhrIo object.");return W=D.Ca&&!D.pa?new Ae(new _f({eb:te})):new Ae(D.pa),W.Ha(D.J),W}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hx(){}e=Hx.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function H1(){}H1.prototype.g=function(D,W){return new _a(D,W)};function _a(D,W){ke.call(this),this.g=new Td(W),this.l=D,this.h=W&&W.messageUrlParams||null,D=W&&W.messageHeaders||null,W&&W.clientProtocolHeaderRequired&&(D?D["X-Client-Protocol"]="webchannel":D={"X-Client-Protocol":"webchannel"}),this.g.o=D,D=W&&W.initMessageHeaders||null,W&&W.messageContentType&&(D?D["X-WebChannel-Content-Type"]=W.messageContentType:D={"X-WebChannel-Content-Type":W.messageContentType}),W&&W.va&&(D?D["X-WebChannel-Client-Profile"]=W.va:D={"X-WebChannel-Client-Profile":W.va}),this.g.S=D,(D=W&&W.Sb)&&!b(D)&&(this.g.m=D),this.v=W&&W.supportsCrossDomainXhr||!1,this.u=W&&W.sendRawJson||!1,(W=W&&W.httpSessionIdParam)&&!b(W)&&(this.g.D=W,D=this.h,D!==null&&W in D&&(D=this.h,W in D&&delete D[W])),this.j=new Sd(this)}p(_a,ke),_a.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_a.prototype.close=function(){Fs(this.g)},_a.prototype.o=function(D){var W=this.g;if(typeof D=="string"){var te={};te.__data__=D,D=te}else this.u&&(te={},te.__data__=Un(D),D=te);W.i.push(new Mh(W.Ya++,D)),W.G==3&&Ef(W)},_a.prototype.N=function(){this.g.l=null,delete this.j,Fs(this.g),delete this.g,_a.aa.N.call(this)};function Ag(D){Zi.call(this),D.__headers__&&(this.headers=D.__headers__,this.statusCode=D.__status__,delete D.__headers__,delete D.__status__);var W=D.__sm__;if(W){e:{for(const te in W){D=te;break e}D=void 0}(this.i=D)&&(D=this.i,W=W!==null&&D in W?W[D]:void 0),this.data=W}else this.data=D}p(Ag,Zi);function Bh(){Qr.call(this),this.status=1}p(Bh,Qr);function Sd(D){this.g=D}p(Sd,Hx),Sd.prototype.ua=function(){Oe(this.g,"a")},Sd.prototype.ta=function(D){Oe(this.g,new Ag(D))},Sd.prototype.sa=function(D){Oe(this.g,new Bh)},Sd.prototype.ra=function(){Oe(this.g,"b")},H1.prototype.createWebChannel=H1.prototype.g,_a.prototype.send=_a.prototype.o,_a.prototype.open=_a.prototype.m,_a.prototype.close=_a.prototype.close,J8e=function(){return new H1},Q8e=function(){return xa()},X8e=$o,xX={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pr.NO_ERROR=0,Pr.TIMEOUT=8,Pr.HTTP_ERROR=6,k$=Pr,ac.COMPLETE="complete",K8e=ac,Ji.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",ke.prototype.listen=ke.prototype.K,SD=Ji,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,Y8e=Ae}).apply(typeof OM<"u"?OM:typeof self<"u"?self:typeof window<"u"?window:{});const zbe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Mc.UNAUTHENTICATED=new Mc(null),Mc.GOOGLE_CREDENTIALS=new Mc("google-credentials-uid"),Mc.FIRST_PARTY=new Mc("first-party-uid"),Mc.MOCK_USER=new Mc("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MI="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=new N7("@firebase/firestore");function d2(){return SE.logLevel}function nn(e,...t){if(SE.logLevel<=Or.DEBUG){const n=t.map(vae);SE.debug(`Firestore (${MI}): ${e}`,...n)}}function y1(e,...t){if(SE.logLevel<=Or.ERROR){const n=t.map(vae);SE.error(`Firestore (${MI}): ${e}`,...n)}}function IP(e,...t){if(SE.logLevel<=Or.WARN){const n=t.map(vae);SE.warn(`Firestore (${MI}): ${e}`,...n)}}function vae(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(e="Unexpected state"){const t=`FIRESTORE (${MI}) INTERNAL ASSERTION FAILED: `+e;throw y1(t),new Error(t)}function Di(e,t){e||Hn()}function Zn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qt extends _g{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class grn{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class yrn{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Mc.UNAUTHENTICATED))}shutdown(){}}class vrn{constructor(t){this.t=t,this.currentUser=Mc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Di(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Gy;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Gy,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{nn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(nn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gy)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(nn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Di(typeof r.accessToken=="string"),new grn(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Di(t===null||typeof t=="string"),new Mc(t)}}class brn{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Mc.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class xrn{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new brn(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Mc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _rn{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wrn{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){Di(this.o===void 0);const r=s=>{s.error!=null&&nn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,nn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{nn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):nn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Di(typeof n.token=="string"),this.R=n.token,new _rn(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ern(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z8e{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=Ern(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function qr(e,t){return e<t?-1:e>t?1:0}function mA(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{static now(){return ha.fromMillis(Date.now())}static fromDate(t){return ha.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new ha(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Qt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Qt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Qt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Qt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?qr(this.nanoseconds,t.nanoseconds):qr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{static fromTimestamp(t){return new Jn(t)}static min(){return new Jn(new ha(0,0))}static max(){return new Jn(new ha(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(t,n,r){n===void 0?n=0:n>t.length&&Hn(),r===void 0?r=t.length-n:r>t.length-n&&Hn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Xm.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Xm?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=Xm.compareSegments(t.get(i),n.get(i));if(s!==0)return s}return Math.sign(t.length-n.length)}static compareSegments(t,n){const r=Xm.isNumericId(t),i=Xm.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Xm.extractNumericId(t).compare(Xm.extractNumericId(n)):t<n?-1:t>n?1:0}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return bb.fromString(t.substring(4,t.length-2))}}class ws extends Xm{construct(t,n,r){return new ws(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Qt(mt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ws(n)}static emptyPath(){return new ws([])}}const Trn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vu extends Xm{construct(t,n,r){return new vu(t,n,r)}static isValidIdentifier(t){return Trn.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vu.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new vu(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Qt(mt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Qt(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Qt(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Qt(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new vu(n)}static emptyPath(){return new vu([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.path=t}static fromPath(t){return new Tn(ws.fromString(t))}static fromName(t){return new Tn(ws.fromString(t).popFirst(5))}static empty(){return new Tn(ws.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ws.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ws.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Tn(new ws(t.slice()))}}function Srn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Jn.fromTimestamp(r===1e9?new ha(n+1,0):new ha(n,r));return new tx(i,Tn.empty(),t)}function Crn(e){return new tx(e.readTime,e.key,-1)}class tx{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new tx(Jn.min(),Tn.empty(),-1)}static max(){return new tx(Jn.max(),Tn.empty(),-1)}}function Arn(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Tn.comparator(e.documentKey,t.documentKey),n!==0?n:qr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Irn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class krn{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LI(e){if(e.code!==mt.FAILED_PRECONDITION||e.message!==Irn)throw e;nn("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Hn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new vt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof vt?n:vt.resolve(n)}catch(n){return vt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):vt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):vt.reject(n)}static resolve(t){return new vt((n,r)=>{n(t)})}static reject(t){return new vt((n,r)=>{r(t)})}static waitFor(t){return new vt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=vt.resolve(!1);for(const r of t)n=n.next(i=>i?vt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new vt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new vt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function Rrn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $I(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}B7.oe=-1;function j7(e){return e==null}function M8(e){return e===0&&1/e==-1/0}function Drn(e){return typeof e=="number"&&Number.isInteger(e)&&!M8(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nrn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Vbe(t)),t=Prn(e.get(n),t);return Vbe(t)}function Prn(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Vbe(e){return e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hbe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ux(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function eBe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t,n){this.comparator=t,this.root=n||hu.EMPTY}insert(t,n){return new qs(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,hu.BLACK,null,null))}remove(t){return new qs(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hu.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new MM(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new MM(this.root,t,this.comparator,!1)}getReverseIterator(){return new MM(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new MM(this.root,t,this.comparator,!0)}}class MM{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class hu{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??hu.RED,this.left=i??hu.EMPTY,this.right=s??hu.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new hu(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return hu.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return hu.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,hu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,hu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Hn();const t=this.left.check();if(t!==this.right.check())throw Hn();return t+(this.isRed()?0:1)}}hu.EMPTY=null,hu.RED=!0,hu.BLACK=!1;hu.EMPTY=new class{constructor(){this.size=0}get key(){throw Hn()}get value(){throw Hn()}get color(){throw Hn()}get left(){throw Hn()}get right(){throw Hn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new hu(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(t){this.comparator=t,this.data=new qs(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new qbe(this.data.getIterator())}getIteratorFrom(t){return new qbe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof pa)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new pa(this.comparator);return n.data=t,n}}class qbe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(t){this.fields=t,t.sort(vu.comparator)}static empty(){return new ed([])}unionWith(t){let n=new pa(vu.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new ed(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return mA(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tBe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new tBe("Invalid base64 string: "+s):s}}(t);return new Au(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Au(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return qr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Au.EMPTY_BYTE_STRING=new Au("");const Orn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nx(e){if(Di(!!e),typeof e=="string"){let t=0;const n=Orn.exec(e);if(Di(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Co(e.seconds),nanos:Co(e.nanos)}}function Co(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function rx(e){return typeof e=="string"?Au.fromBase64String(e):Au.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bae(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function U7(e){const t=e.mapValue.fields.__previous_value__;return bae(t)?U7(t):t}function kP(e){const t=nx(e.mapValue.fields.__local_write_time__.timestampValue);return new ha(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mrn{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class RP{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new RP("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof RP&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ix(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bae(e)?4:$rn(e)?9007199254740991:Lrn(e)?10:11:Hn()}function eg(e,t){if(e===t)return!0;const n=ix(e);if(n!==ix(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return kP(e).isEqual(kP(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=nx(i.timestampValue),a=nx(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return rx(i.bytesValue).isEqual(rx(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Co(i.geoPointValue.latitude)===Co(s.geoPointValue.latitude)&&Co(i.geoPointValue.longitude)===Co(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Co(i.integerValue)===Co(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Co(i.doubleValue),a=Co(s.doubleValue);return o===a?M8(o)===M8(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return mA(e.arrayValue.values||[],t.arrayValue.values||[],eg);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Hbe(o)!==Hbe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!eg(o[u],a[u])))return!1;return!0}(e,t);default:return Hn()}}function DP(e,t){return(e.values||[]).find(n=>eg(n,t))!==void 0}function gA(e,t){if(e===t)return 0;const n=ix(e),r=ix(t);if(n!==r)return qr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return qr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Co(s.integerValue||s.doubleValue),u=Co(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Wbe(e.timestampValue,t.timestampValue);case 4:return Wbe(kP(e),kP(t));case 5:return qr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=rx(s),u=rx(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=qr(a[l],u[l]);if(c!==0)return c}return qr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=qr(Co(s.latitude),Co(o.latitude));return a!==0?a:qr(Co(s.longitude),Co(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Gbe(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,u,l,c;const f=s.fields||{},d=o.fields||{},h=(a=f.value)===null||a===void 0?void 0:a.arrayValue,p=(u=d.value)===null||u===void 0?void 0:u.arrayValue,m=qr(((l=h==null?void 0:h.values)===null||l===void 0?void 0:l.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:Gbe(h,p)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===LM.mapValue&&o===LM.mapValue)return 0;if(s===LM.mapValue)return 1;if(o===LM.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=qr(u[f],c[f]);if(d!==0)return d;const h=gA(a[u[f]],l[c[f]]);if(h!==0)return h}return qr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw Hn()}}function Wbe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return qr(e,t);const n=nx(e),r=nx(t),i=qr(n.seconds,r.seconds);return i!==0?i:qr(n.nanos,r.nanos)}function Gbe(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=gA(n[i],r[i]);if(s)return s}return qr(n.length,r.length)}function yA(e){return _X(e)}function _X(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=nx(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return rx(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Tn.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=_X(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${_X(n.fields[o])}`;return i+"}"}(e.mapValue):Hn()}function R$(e){switch(ix(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=U7(e);return t?16+R$(t):16;case 5:return 2*e.stringValue.length;case 6:return rx(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+R$(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return Ux(r.fields,(s,o)=>{i+=s.length+R$(o)}),i}(e.mapValue);default:throw Hn()}}function Ybe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function wX(e){return!!e&&"integerValue"in e}function xae(e){return!!e&&"arrayValue"in e}function Kbe(e){return!!e&&"nullValue"in e}function Xbe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function D$(e){return!!e&&"mapValue"in e}function Lrn(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function lN(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ux(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=lN(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=lN(e.arrayValue.values[n]);return t}return Object.assign({},e)}function $rn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(t){this.value=t}static empty(){return new Hc({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!D$(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=lN(n)}setAll(t){let n=vu.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=lN(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());D$(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return eg(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];D$(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Ux(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Hc(lN(this.value))}}function nBe(e){const t=[];return Ux(e.fields,(n,r)=>{const i=new vu([n]);if(D$(r)){const s=nBe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new ed(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new tl(t,0,Jn.min(),Jn.min(),Jn.min(),Hc.empty(),0)}static newFoundDocument(t,n,r,i){return new tl(t,1,n,Jn.min(),r,i,0)}static newNoDocument(t,n){return new tl(t,2,n,Jn.min(),Jn.min(),Hc.empty(),0)}static newUnknownDocument(t,n){return new tl(t,3,n,Jn.min(),Jn.min(),Hc.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Jn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Hc.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Hc.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Jn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof tl&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new tl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(t,n){this.position=t,this.inclusive=n}}function Qbe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Tn.comparator(Tn.fromName(o.referenceValue),n.key):r=gA(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Jbe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!eg(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(t,n="asc"){this.field=t,this.dir=n}}function Frn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rBe{}class Wo extends rBe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new jrn(t,n,r):n==="array-contains"?new Vrn(t,r):n==="in"?new Hrn(t,r):n==="not-in"?new qrn(t,r):n==="array-contains-any"?new Wrn(t,r):new Wo(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new Urn(t,r):new zrn(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(gA(n,this.value)):n!==null&&ix(this.value)===ix(n)&&this.matchesComparison(gA(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Hn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qp extends rBe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Qp(t,n)}matches(t){return iBe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function iBe(e){return e.op==="and"}function sBe(e){return Brn(e)&&iBe(e)}function Brn(e){for(const t of e.filters)if(t instanceof Qp)return!1;return!0}function EX(e){if(e instanceof Wo)return e.field.canonicalString()+e.op.toString()+yA(e.value);if(sBe(e))return e.filters.map(t=>EX(t)).join(",");{const t=e.filters.map(n=>EX(n)).join(",");return`${e.op}(${t})`}}function oBe(e,t){return e instanceof Wo?function(r,i){return i instanceof Wo&&r.op===i.op&&r.field.isEqual(i.field)&&eg(r.value,i.value)}(e,t):e instanceof Qp?function(r,i){return i instanceof Qp&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&oBe(o,i.filters[a]),!0):!1}(e,t):void Hn()}function aBe(e){return e instanceof Wo?function(n){return`${n.field.canonicalString()} ${n.op} ${yA(n.value)}`}(e):e instanceof Qp?function(n){return n.op.toString()+" {"+n.getFilters().map(aBe).join(" ,")+"}"}(e):"Filter"}class jrn extends Wo{constructor(t,n,r){super(t,n,r),this.key=Tn.fromName(r.referenceValue)}matches(t){const n=Tn.comparator(t.key,this.key);return this.matchesComparison(n)}}class Urn extends Wo{constructor(t,n){super(t,"in",n),this.keys=uBe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class zrn extends Wo{constructor(t,n){super(t,"not-in",n),this.keys=uBe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function uBe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Tn.fromName(r.referenceValue))}class Vrn extends Wo{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return xae(n)&&DP(n.arrayValue,this.value)}}class Hrn extends Wo{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&DP(this.value.arrayValue,n)}}class qrn extends Wo{constructor(t,n){super(t,"not-in",n)}matches(t){if(DP(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!DP(this.value.arrayValue,n)}}class Wrn extends Wo{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!xae(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>DP(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Grn{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Zbe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Grn(e,t,n,r,i,s,o)}function _ae(e){const t=Zn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>EX(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),j7(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>yA(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>yA(r)).join(",")),t.ue=n}return t.ue}function wae(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Frn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!oBe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Jbe(e.startAt,t.startAt)&&Jbe(e.endAt,t.endAt)}function TX(e){return Tn.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Yrn(e,t,n,r,i,s,o,a){return new FI(e,t,n,r,i,s,o,a)}function Eae(e){return new FI(e)}function exe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function lBe(e){return e.collectionGroup!==null}function cN(e){const t=Zn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new pa(vu.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new NP(s,r))}),n.has(vu.keyField().canonicalString())||t.ce.push(new NP(vu.keyField(),r))}return t.ce}function D0(e){const t=Zn(e);return t.le||(t.le=Krn(t,cN(e))),t.le}function Krn(e,t){if(e.limitType==="F")return Zbe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new NP(i.field,s)});const n=e.endAt?new L8(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new L8(e.startAt.position,e.startAt.inclusive):null;return Zbe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function SX(e,t){const n=e.filters.concat([t]);return new FI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function CX(e,t,n){return new FI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function z7(e,t){return wae(D0(e),D0(t))&&e.limitType===t.limitType}function cBe(e){return`${_ae(D0(e))}|lt:${e.limitType}`}function h2(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>aBe(i)).join(", ")}]`),j7(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>yA(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>yA(i)).join(",")),`Target(${r})`}(D0(e))}; limitType=${e.limitType})`}function V7(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Tn.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of cN(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Qbe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,cN(r),i)||r.endAt&&!function(o,a,u){const l=Qbe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,cN(r),i))}(e,t)}function Xrn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function fBe(e){return(t,n)=>{let r=!1;for(const i of cN(e)){const s=Qrn(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Qrn(e,t,n){const r=e.field.isKeyField()?Tn.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?gA(u,l):Hn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Hn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ux(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return eBe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jrn=new qs(Tn.comparator);function v1(){return Jrn}const dBe=new qs(Tn.comparator);function CD(...e){let t=dBe;for(const n of e)t=t.insert(n.key,n);return t}function hBe(e){let t=dBe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Nw(){return fN()}function pBe(){return fN()}function fN(){return new lT(e=>e.toString(),(e,t)=>e.isEqual(t))}const Zrn=new qs(Tn.comparator),ein=new pa(Tn.comparator);function Mr(...e){let t=ein;for(const n of e)t=t.add(n);return t}const tin=new pa(qr);function nin(){return tin}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tae(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:M8(t)?"-0":t}}function mBe(e){return{integerValue:""+e}}function rin(e,t){return Drn(t)?mBe(t):Tae(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H7{constructor(){this._=void 0}}function iin(e,t,n){return e instanceof PP?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bae(s)&&(s=U7(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof OP?yBe(e,t):e instanceof MP?vBe(e,t):function(i,s){const o=gBe(i,s),a=txe(o)+txe(i.Pe);return wX(o)&&wX(i.Pe)?mBe(a):Tae(i.serializer,a)}(e,t)}function sin(e,t,n){return e instanceof OP?yBe(e,t):e instanceof MP?vBe(e,t):n}function gBe(e,t){return e instanceof $8?function(r){return wX(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class PP extends H7{}class OP extends H7{constructor(t){super(),this.elements=t}}function yBe(e,t){const n=bBe(t);for(const r of e.elements)n.some(i=>eg(i,r))||n.push(r);return{arrayValue:{values:n}}}class MP extends H7{constructor(t){super(),this.elements=t}}function vBe(e,t){let n=bBe(t);for(const r of e.elements)n=n.filter(i=>!eg(i,r));return{arrayValue:{values:n}}}class $8 extends H7{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function txe(e){return Co(e.integerValue||e.doubleValue)}function bBe(e){return xae(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oin{constructor(t,n){this.field=t,this.transform=n}}function ain(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof OP&&i instanceof OP||r instanceof MP&&i instanceof MP?mA(r.elements,i.elements,eg):r instanceof $8&&i instanceof $8?eg(r.Pe,i.Pe):r instanceof PP&&i instanceof PP}(e.transform,t.transform)}class uin{constructor(t,n){this.version=t,this.transformResults=n}}class ad{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ad}static exists(t){return new ad(void 0,t)}static updateTime(t){return new ad(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function N$(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class q7{}function xBe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Sae(e.key,ad.none()):new xO(e.key,e.data,ad.none());{const n=e.data,r=Hc.empty();let i=new pa(vu.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zx(e.key,r,new ed(i.toArray()),ad.none())}}function lin(e,t,n){e instanceof xO?function(i,s,o){const a=i.value.clone(),u=rxe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof zx?function(i,s,o){if(!N$(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=rxe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(_Be(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function dN(e,t,n,r){return e instanceof xO?function(s,o,a,u){if(!N$(s.precondition,o))return a;const l=s.value.clone(),c=ixe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof zx?function(s,o,a,u){if(!N$(s.precondition,o))return a;const l=ixe(s.fieldTransforms,u,o),c=o.data;return c.setAll(_Be(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return N$(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function cin(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=gBe(r.transform,i||null);s!=null&&(n===null&&(n=Hc.empty()),n.set(r.field,s))}return n||null}function nxe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&mA(r,i,(s,o)=>ain(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class xO extends q7{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zx extends q7{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function _Be(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function rxe(e,t,n){const r=new Map;Di(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,sin(o,a,n[i]))}return r}function ixe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,iin(s,o,t))}return r}class Sae extends q7{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fin extends q7{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class din{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&lin(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=dN(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=dN(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=pBe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=xBe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Jn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Mr())}isEqual(t){return this.batchId===t.batchId&&mA(this.mutations,t.mutations,(n,r)=>nxe(n,r))&&mA(this.baseMutations,t.baseMutations,(n,r)=>nxe(n,r))}}class Cae{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Di(t.mutations.length===r.length);let i=function(){return Zrn}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Cae(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hin{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pin{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ho,ri;function min(e){switch(e){default:return Hn();case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0}}function wBe(e){if(e===void 0)return y1("GRPC error has no .code"),mt.UNKNOWN;switch(e){case Ho.OK:return mt.OK;case Ho.CANCELLED:return mt.CANCELLED;case Ho.UNKNOWN:return mt.UNKNOWN;case Ho.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case Ho.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case Ho.INTERNAL:return mt.INTERNAL;case Ho.UNAVAILABLE:return mt.UNAVAILABLE;case Ho.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case Ho.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case Ho.NOT_FOUND:return mt.NOT_FOUND;case Ho.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case Ho.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case Ho.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case Ho.ABORTED:return mt.ABORTED;case Ho.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case Ho.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case Ho.DATA_LOSS:return mt.DATA_LOSS;default:return Hn()}}(ri=Ho||(Ho={}))[ri.OK=0]="OK",ri[ri.CANCELLED=1]="CANCELLED",ri[ri.UNKNOWN=2]="UNKNOWN",ri[ri.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ri[ri.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ri[ri.NOT_FOUND=5]="NOT_FOUND",ri[ri.ALREADY_EXISTS=6]="ALREADY_EXISTS",ri[ri.PERMISSION_DENIED=7]="PERMISSION_DENIED",ri[ri.UNAUTHENTICATED=16]="UNAUTHENTICATED",ri[ri.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ri[ri.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ri[ri.ABORTED=10]="ABORTED",ri[ri.OUT_OF_RANGE=11]="OUT_OF_RANGE",ri[ri.UNIMPLEMENTED=12]="UNIMPLEMENTED",ri[ri.INTERNAL=13]="INTERNAL",ri[ri.UNAVAILABLE=14]="UNAVAILABLE",ri[ri.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gin(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yin=new bb([4294967295,4294967295],0);function sxe(e){const t=gin().encode(e),n=new G8e;return n.update(t),new Uint8Array(n.digest())}function oxe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new bb([n,r],0),new bb([i,s],0)]}class Aae{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new AD(`Invalid padding: ${n}`);if(r<0)throw new AD(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new AD(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new AD(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=bb.fromNumber(this.Te)}de(t,n,r){let i=t.add(n.multiply(bb.fromNumber(r)));return i.compare(yin)===1&&(i=new bb([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=sxe(t),[r,i]=oxe(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ee(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Aae(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=sxe(t),[r,i]=oxe(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class AD extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W7{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,_O.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new W7(Jn.min(),i,new qs(qr),v1(),Mr())}}class _O{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new _O(r,n,Mr(),Mr(),Mr())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P${constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class EBe{constructor(t,n){this.targetId=t,this.me=n}}class TBe{constructor(t,n,r=Au.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class axe{constructor(){this.fe=0,this.ge=uxe(),this.pe=Au.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Mr(),n=Mr(),r=Mr();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Hn()}}),new _O(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=uxe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Di(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class vin{constructor(t){this.Be=t,this.Le=new Map,this.ke=v1(),this.qe=$M(),this.Qe=$M(),this.Ke=new qs(qr)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:Hn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.me.count,i=this.Ye(n);if(i){const s=i.target;if(TX(s))if(r===0){const o=new Tn(s.path);this.We(n,o,tl.newNoDocument(o,Jn.min()))}else Di(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=rx(r).toUint8Array()}catch(u){if(u instanceof tBe)return IP("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Aae(o,i,s)}catch(u){return IP(u instanceof AD?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.Le.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&TX(a.target)){const u=new Tn(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,tl.newNoDocument(u,t))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Mr();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new W7(t,n,this.Ke,this.ke,r);return this.ke=v1(),this.qe=$M(),this.Qe=$M(),this.Ke=new qs(qr),i}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.ot(t,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Le.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Be.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Le.get(t);return n||(n=new axe,this.Le.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new pa(qr),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new pa(qr),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||nn("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Le.get(t);return n&&n.Se?null:this.Be.ut(t)}He(t){this.Le.set(t,new axe),this.Be.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Be.getRemoteKeysForTarget(t).has(n)}}function $M(){return new qs(Tn.comparator)}function uxe(){return new qs(Tn.comparator)}const bin={asc:"ASCENDING",desc:"DESCENDING"},xin={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_in={and:"AND",or:"OR"};class win{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function AX(e,t){return e.useProto3Json||j7(t)?t:{value:t}}function F8(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function SBe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ein(e,t){return F8(e,t.toTimestamp())}function N0(e){return Di(!!e),Jn.fromTimestamp(function(n){const r=nx(n);return new ha(r.seconds,r.nanos)}(e))}function Iae(e,t){return IX(e,t).canonicalString()}function IX(e,t){const n=function(i){return new ws(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function CBe(e){const t=ws.fromString(e);return Di(DBe(t)),t}function kX(e,t){return Iae(e.databaseId,t.path)}function Oq(e,t){const n=CBe(t);if(n.get(1)!==e.databaseId.projectId)throw new Qt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Qt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Tn(IBe(n))}function ABe(e,t){return Iae(e.databaseId,t)}function Tin(e){const t=CBe(e);return t.length===4?ws.emptyPath():IBe(t)}function RX(e){return new ws(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function IBe(e){return Di(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function lxe(e,t,n){return{name:kX(e,t),fields:n.value.mapValue.fields}}function Sin(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Hn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Di(c===void 0||typeof c=="string"),Au.fromBase64String(c||"")):(Di(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Au.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?mt.UNKNOWN:wBe(l.code);return new Qt(c,l.message||"")}(o);n=new TBe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Oq(e,r.document.name),s=N0(r.document.updateTime),o=r.document.createTime?N0(r.document.createTime):Jn.min(),a=new Hc({mapValue:{fields:r.document.fields}}),u=tl.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new P$(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Oq(e,r.document),s=r.readTime?N0(r.readTime):Jn.min(),o=tl.newNoDocument(i,s),a=r.removedTargetIds||[];n=new P$([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Oq(e,r.document),s=r.removedTargetIds||[];n=new P$([],s,i,null)}else{if(!("filter"in t))return Hn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new pin(i,s),a=r.targetId;n=new EBe(a,o)}}return n}function Cin(e,t){let n;if(t instanceof xO)n={update:lxe(e,t.key,t.value)};else if(t instanceof Sae)n={delete:kX(e,t.key)};else if(t instanceof zx)n={update:lxe(e,t.key,t.data),updateMask:Min(t.fieldMask)};else{if(!(t instanceof fin))return Hn();n={verify:kX(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof PP)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof OP)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof MP)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $8)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Hn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Ein(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Hn()}(e,t.precondition)),n}function Ain(e,t){return e&&e.length>0?(Di(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?N0(i.updateTime):N0(s);return o.isEqual(Jn.min())&&(o=N0(s)),new uin(o,i.transformResults||[])}(n,t))):[]}function Iin(e,t){return{documents:[ABe(e,t.path)]}}function kin(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ABe(e,i);const s=function(l){if(l.length!==0)return RBe(Qp.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:p2(d.field),direction:Nin(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=AX(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ct:n,parent:i}}function Rin(e){let t=Tin(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Di(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=kBe(f);return d instanceof Qp&&sBe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new NP(m2(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,j7(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new L8(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new L8(h,d)}(n.endAt)),Yrn(t,i,o,s,a,"F",u,l)}function Din(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function kBe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=m2(n.unaryFilter.field);return Wo.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=m2(n.unaryFilter.field);return Wo.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=m2(n.unaryFilter.field);return Wo.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=m2(n.unaryFilter.field);return Wo.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Hn()}}(e):e.fieldFilter!==void 0?function(n){return Wo.create(m2(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Hn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Qp.create(n.compositeFilter.filters.map(r=>kBe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Hn()}}(n.compositeFilter.op))}(e):Hn()}function Nin(e){return bin[e]}function Pin(e){return xin[e]}function Oin(e){return _in[e]}function p2(e){return{fieldPath:e.canonicalString()}}function m2(e){return vu.fromServerFormat(e.fieldPath)}function RBe(e){return e instanceof Wo?function(n){if(n.op==="=="){if(Xbe(n.value))return{unaryFilter:{field:p2(n.field),op:"IS_NAN"}};if(Kbe(n.value))return{unaryFilter:{field:p2(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Xbe(n.value))return{unaryFilter:{field:p2(n.field),op:"IS_NOT_NAN"}};if(Kbe(n.value))return{unaryFilter:{field:p2(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:p2(n.field),op:Pin(n.op),value:n.value}}}(e):e instanceof Qp?function(n){const r=n.getFilters().map(i=>RBe(i));return r.length===1?r[0]:{compositeFilter:{op:Oin(n.op),filters:r}}}(e):Hn()}function Min(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function DBe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(t,n,r,i,s=Jn.min(),o=Jn.min(),a=Au.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new ob(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new ob(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new ob(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new ob(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lin{constructor(t){this.ht=t}}function $in(e){const t=Rin({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?CX(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fin{constructor(){this.ln=new Bin}addToCollectionParentIndex(t,n){return this.ln.add(n),vt.resolve()}getCollectionParents(t,n){return vt.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return vt.resolve()}deleteFieldIndex(t,n){return vt.resolve()}deleteAllFieldIndexes(t){return vt.resolve()}createTargetIndexes(t,n){return vt.resolve()}getDocumentsMatchingTarget(t,n){return vt.resolve(null)}getIndexType(t,n){return vt.resolve(0)}getFieldIndexes(t,n){return vt.resolve([])}getNextCollectionGroupToUpdate(t){return vt.resolve(null)}getMinOffset(t,n){return vt.resolve(tx.min())}getMinOffsetFromCollectionGroup(t,n){return vt.resolve(tx.min())}updateCollectionGroup(t,n,r){return vt.resolve()}updateIndexEntries(t,n){return vt.resolve()}}class Bin{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new pa(ws.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new pa(ws.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cxe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Lc{static withCacheSize(t){return new Lc(t,Lc.DEFAULT_COLLECTION_PERCENTILE,Lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lc.DEFAULT_COLLECTION_PERCENTILE=10,Lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lc.DEFAULT=new Lc(41943040,Lc.DEFAULT_COLLECTION_PERCENTILE,Lc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lc.DISABLED=new Lc(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new vA(0)}static Qn(){return new vA(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fxe([e,t],[n,r]){const i=qr(e,n);return i===0?qr(t,r):i}class jin{constructor(t){this.Gn=t,this.buffer=new pa(fxe),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();fxe(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Uin{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){nn("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$I(n)?nn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await LI(n)}await this.Yn(3e5)})}}class zin{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return vt.resolve(B7.oe);const r=new jin(n);return this.Zn.forEachTarget(t,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(t,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(nn("LruGarbageCollector","Garbage collection skipped; disabled"),vt.resolve(cxe)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(nn("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cxe):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(nn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(t,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(t,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(f=>(l=Date.now(),d2()<=Or.DEBUG&&nn("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),vt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function Vin(e,t){return new zin(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hin{constructor(){this.changes=new lT(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,tl.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?vt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qin{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Win{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&dN(r.mutation,i,ed.empty(),ha.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Mr()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Mr()){const i=Nw();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=CD();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Nw();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Mr()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=v1();const o=fN(),a=function(){return fN()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof zx)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),dN(c.mutation,l,c.mutation.getFieldMask(),ha.now())):o.set(l.key,ed.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new qin(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=fN();let i=new qs((o,a)=>o-a),s=Mr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||ed.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Mr()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=pBe();c.forEach(d=>{if(!s.has(d)){const h=xBe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return vt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Tn.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):lBe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):vt.resolve(Nw());let a=-1,u=s;return o.next(l=>vt.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?vt.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Mr())).next(c=>({batchId:a,changes:hBe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Tn(n)).next(r=>{let i=CD();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=CD();return this.indexManager.getCollectionParents(t,s).next(a=>vt.forEach(a,u=>{const l=function(f,d){return new FI(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,tl.newInvalidDocument(c)))});let a=CD();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&dN(c.mutation,l,ed.empty(),ha.now()),V7(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gin{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return vt.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:N0(i.createTime)}}(n)),vt.resolve()}getNamedQuery(t,n){return vt.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:$in(i.bundledQuery),readTime:N0(i.readTime)}}(n)),vt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yin{constructor(){this.overlays=new qs(Tn.comparator),this.dr=new Map}getOverlay(t,n){return vt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Nw();return vt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.Tt(t,n,s)}),vt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),vt.resolve()}getOverlaysForCollection(t,n,r){const i=Nw(),s=n.length+1,o=new Tn(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return vt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new qs((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Nw(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Nw(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return vt.resolve(a)}Tt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new hin(n,r));let s=this.dr.get(n);s===void 0&&(s=Mr(),this.dr.set(n,s)),this.dr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kin{constructor(){this.sessionToken=Au.EMPTY_BYTE_STRING}getSessionToken(t){return vt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,vt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kae{constructor(){this.Er=new pa(Oa.Ar),this.Rr=new pa(Oa.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(t,n){const r=new Oa(t,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new Oa(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new Tn(new ws([])),r=new Oa(n,t),i=new Oa(n,t+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.Er.forEach(t=>this.gr(t))}gr(t){this.Er=this.Er.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new Tn(new ws([])),r=new Oa(n,t),i=new Oa(n,t+1);let s=Mr();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Oa(t,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Oa{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return Tn.comparator(t.key,n.key)||qr(t.br,n.br)}static Vr(t,n){return qr(t.br,n.br)||Tn.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xin{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new pa(Oa.Ar)}checkEmpty(t){return vt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new din(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Oa(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return vt.resolve(o)}lookupMutationBatch(t,n){return vt.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return vt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return vt.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return vt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Oa(n,0),i=new Oa(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),vt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new pa(qr);return n.forEach(i=>{const s=new Oa(i,0),o=new Oa(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),vt.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Tn.isDocumentKey(s)||(s=s.child(""));const o=new Oa(new Tn(s),0);let a=new pa(qr);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},o),vt.resolve(this.Mr(a))}Mr(t){const n=[];return t.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Di(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return vt.forEach(n.mutations,i=>{const s=new Oa(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.vr=r})}Bn(t){}containsKey(t,n){const r=new Oa(n,0),i=this.vr.firstAfterOrEqual(r);return vt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,vt.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qin{constructor(t){this.Nr=t,this.docs=function(){return new qs(Tn.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return vt.resolve(r?r.document.mutableCopy():tl.newInvalidDocument(n))}getEntries(t,n){let r=v1();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():tl.newInvalidDocument(i))}),vt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=v1();const o=n.path,a=new Tn(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Arn(Crn(c),r)<=0||(i.has(c.key)||V7(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return vt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){Hn()}Br(t,n){return vt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Jin(this)}getSize(t){return vt.resolve(this.size)}}class Jin extends Hin{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(t,i)):this.hr.removeEntry(r)}),vt.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zin{constructor(t){this.persistence=t,this.Lr=new lT(n=>_ae(n),wae),this.lastRemoteSnapshotVersion=Jn.min(),this.highestTargetId=0,this.kr=0,this.qr=new kae,this.targetCount=0,this.Qr=vA.qn()}forEachTarget(t,n){return this.Lr.forEach((r,i)=>n(i)),vt.resolve()}getLastRemoteSnapshotVersion(t){return vt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return vt.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),vt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),vt.resolve()}Un(t){this.Lr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new vA(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,vt.resolve()}updateTargetData(t,n){return this.Un(n),vt.resolve()}removeTargetData(t,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,vt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Lr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),vt.waitFor(s).next(()=>i)}getTargetCount(t){return vt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Lr.get(n)||null;return vt.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),vt.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),vt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),vt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return vt.resolve(r)}containsKey(t,n){return vt.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NBe{constructor(t,n){this.Kr={},this.overlays={},this.$r=new B7(0),this.Ur=!1,this.Ur=!0,this.Wr=new Kin,this.referenceDelegate=t(this),this.Gr=new Zin(this),this.indexManager=new Fin,this.remoteDocumentCache=function(i){return new Qin(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new Lin(n),this.jr=new Gin(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new Yin,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new Xin(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){nn("MemoryPersistence","Starting transaction:",t);const i=new esn(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(t,n){return vt.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class esn extends krn{constructor(t){super(),this.currentSequenceNumber=t}}class Rae{constructor(t){this.persistence=t,this.Zr=new kae,this.Xr=null}static ei(t){return new Rae(t)}get ti(){if(this.Xr)return this.Xr;throw Hn()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),vt.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),vt.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),vt.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vt.forEach(this.ti,r=>{const i=Tn.fromPath(r);return this.ni(t,i).next(s=>{s||n.removeEntry(i,Jn.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return vt.or([()=>vt.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class B8{constructor(t,n){this.persistence=t,this.ri=new lT(r=>Nrn(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Vin(this,n)}static ei(t,n){return new B8(t,n)}Hr(){}Jr(t){return vt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return vt.forEach(this.ri,(r,i)=>this.ir(t,r,i).next(s=>s?vt.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Br(t,o=>this.ir(t,o,n).next(a=>{a||(r++,s.removeEntry(o,Jn.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),vt.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),vt.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),vt.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),vt.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=R$(t.data.value)),n}ir(t,n,r){return vt.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.ri.get(n);return vt.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dae{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(t,n){let r=Mr(),i=Mr();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Dae(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tsn{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nsn{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return SJt()?8:Rrn(gl())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.Xi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new tsn;return this.ts(t,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(t,n,o,a.size)})}).next(()=>s.result)}ns(t,n,r,i){return r.documentReadCount<this.Ji?(d2()<=Or.DEBUG&&nn("QueryEngine","SDK will not create cache indexes for query:",h2(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),vt.resolve()):(d2()<=Or.DEBUG&&nn("QueryEngine","Query:",h2(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(d2()<=Or.DEBUG&&nn("QueryEngine","The SDK decides to create cache indexes for query:",h2(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,D0(n))):vt.resolve())}Xi(t,n){if(exe(n))return vt.resolve(null);let r=D0(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=CX(n,null,"F"),r=D0(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Mr(...s);return this.Zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.rs(n,a);return this.ss(n,l,o,u.readTime)?this.Xi(t,CX(n,null,"F")):this.os(t,l,n,u)}))})))}es(t,n,r,i){return exe(n)||i.isEqual(Jn.min())?vt.resolve(null):this.Zi.getDocuments(t,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?vt.resolve(null):(d2()<=Or.DEBUG&&nn("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),h2(n)),this.os(t,o,n,Srn(i,-1)).next(a=>a))})}rs(t,n){let r=new pa(fBe(t));return n.forEach((i,s)=>{V7(t,s)&&(r=r.add(s))}),r}ss(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(t,n,r){return d2()<=Or.DEBUG&&nn("QueryEngine","Using full collection scan to execute query:",h2(n)),this.Zi.getDocumentsMatchingQuery(t,n,tx.min(),r)}os(t,n,r,i){return this.Zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rsn{constructor(t,n,r,i){this.persistence=t,this._s=n,this.serializer=i,this.us=new qs(qr),this.cs=new lT(s=>_ae(s),wae),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Win(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function isn(e,t,n,r){return new rsn(e,t,n,r)}async function PBe(e,t){const n=Zn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Mr();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})}function ssn(e,t){const n=Zn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=vt.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Di(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Mr();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function OBe(e){const t=Zn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function osn(e,t){const n=Zn(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Gr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Au.EMPTY_BYTE_STRING,Jn.min()).withLastLimboFreeSnapshotVersion(Jn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,v){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(d,h,c)&&a.push(n.Gr.updateTargetData(s,h))});let u=v1(),l=Mr();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(asn(s,o,t.documentUpdates).next(c=>{u=c.Is,l=c.ds})),!r.isEqual(Jn.min())){const c=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return vt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.us=i,s))}function asn(e,t,n){let r=Mr(),i=Mr();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=v1();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(Jn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):nn("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:o,ds:i}})}function usn(e,t){const n=Zn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function lsn(e,t){const n=Zn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,t).next(s=>s?(i=s,vt.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new ob(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function DX(e,t,n){const r=Zn(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$I(o))throw o;nn("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function dxe(e,t,n){const r=Zn(e);let i=Jn.min(),s=Mr();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=Zn(u),d=f.cs.get(c);return d!==void 0?vt.resolve(f.us.get(d)):f.Gr.getTargetData(l,c)}(r,o,D0(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,t,n?i:Jn.min(),n?s:Mr())).next(a=>(csn(r,Xrn(t),a),{documents:a,Es:s})))}function csn(e,t,n){let r=e.ls.get(t)||Jn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ls.set(t,r)}class hxe{constructor(){this.activeTargetIds=nin()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class fsn{constructor(){this._o=new hxe,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new hxe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dsn{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pxe{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){nn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){nn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FM=null;function Mq(){return FM===null?FM=function(){return 268435456+Math.round(2147483648*Math.random())}():FM++,"0x"+FM.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hsn={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class psn{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wu="WebChannelConnection";class msn extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=Mq(),u=this.No(n,r.toUriEncodedString());nn("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,s,o),this.Lo(n,u,l,i).then(c=>(nn("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw IP("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+MI}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=hsn[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Lo(t,n,r,i){const s=Mq();return new Promise((o,a)=>{const u=new Y8e;u.setWithCredentials(!0),u.listenOnce(K8e.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case k$.NO_ERROR:const c=u.getResponseJson();nn(Wu,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case k$.TIMEOUT:nn(Wu,`RPC '${t}' ${s} timed out`),a(new Qt(mt.DEADLINE_EXCEEDED,"Request time out"));break;case k$.HTTP_ERROR:const f=u.getStatus();if(nn(Wu,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const v=g.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(v)>=0?v:mt.UNKNOWN}(h.status);a(new Qt(p,h.message))}else a(new Qt(mt.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Qt(mt.UNAVAILABLE,"Connection failed."));break;default:Hn()}}finally{nn(Wu,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);nn(Wu,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(t,n,r){const i=Mq(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=J8e(),a=Q8e(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Bo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");nn(Wu,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new psn({Eo:g=>{h?nn(Wu,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(nn(Wu,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),nn(Wu,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},Ao:()=>f.close()}),m=(g,v,b)=>{g.listen(v,w=>{try{b(w)}catch(E){setTimeout(()=>{throw E},0)}})};return m(f,SD.EventType.OPEN,()=>{h||(nn(Wu,`RPC '${t}' stream ${i} transport opened.`),p.So())}),m(f,SD.EventType.CLOSE,()=>{h||(h=!0,nn(Wu,`RPC '${t}' stream ${i} transport closed`),p.Do())}),m(f,SD.EventType.ERROR,g=>{h||(h=!0,IP(Wu,`RPC '${t}' stream ${i} transport errored:`,g),p.Do(new Qt(mt.UNAVAILABLE,"The operation could not be completed")))}),m(f,SD.EventType.MESSAGE,g=>{var v;if(!h){const b=g.data[0];Di(!!b);const w=b,E=(w==null?void 0:w.error)||((v=w[0])===null||v===void 0?void 0:v.error);if(E){nn(Wu,`RPC '${t}' stream ${i} received error:`,E);const T=E.status;let C=function(N){const O=Ho[N];if(O!==void 0)return wBe(O)}(T),I=E.message;C===void 0&&(C=mt.INTERNAL,I="Unknown error status: "+T+" with message "+E.message),h=!0,p.Do(new Qt(C,I)),f.close()}else nn(Wu,`RPC '${t}' stream ${i} received:`,b),p.vo(b)}}),m(a,X8e.STAT_EVENT,g=>{g.stat===xX.PROXY?nn(Wu,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===xX.NOPROXY&&nn(Wu,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.bo()},0),p}}function Lq(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G7(e){return new win(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MBe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&nn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LBe{constructor(t,n,r,i,s,o,a,u){this.li=t,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new MBe(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===mt.RESOURCE_EXHAUSTED?(y1(n.toString()),y1("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{t(()=>{const i=new Qt(mt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.E_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(t){return nn("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(nn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gsn extends LBe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}E_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=Sin(this.serializer,t),r=function(s){if(!("targetChange"in s))return Jn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Jn.min():o.readTime?N0(o.readTime):Jn.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=RX(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=TX(u)?{documents:Iin(s,u)}:{query:kin(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=SBe(s,o.resumeToken);const l=AX(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(Jn.min())>0){a.readTime=F8(s,o.snapshotVersion.toTimestamp());const l=AX(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=Din(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=RX(this.serializer),n.removeTarget=t,this.c_(n)}}class ysn extends LBe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(t,n){return this.connection.qo("Write",t,n)}A_(t){return Di(!!t.streamToken),this.lastStreamToken=t.streamToken,Di(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){Di(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=Ain(t.writeResults,t.commitTime),r=N0(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=RX(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Cin(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vsn extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new Qt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(t,IX(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Qt(mt.UNKNOWN,s.toString())})}ko(t,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(t,IX(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Qt(mt.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class bsn{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(y1(n),this.C_=!1):nn("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xsn{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{cT(this)&&(nn("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=Zn(u);l.k_.add(4),await EO(l),l.K_.set("Unknown"),l.k_.delete(4),await wO(l)}(this))})}),this.K_=new bsn(r,i)}}async function wO(e){if(cT(e))for(const t of e.q_)await t(!0)}async function EO(e){for(const t of e.q_)await t(!1)}function $Be(e,t){const n=Zn(e);n.L_.has(t.targetId)||(n.L_.set(t.targetId,t),Mae(n)?Oae(n):BI(n).s_()&&Pae(n,t))}function Nae(e,t){const n=Zn(e),r=BI(n);n.L_.delete(t),r.s_()&&FBe(n,t),n.L_.size===0&&(r.s_()?r.a_():cT(n)&&n.K_.set("Unknown"))}function Pae(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Jn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}BI(e).V_(t)}function FBe(e,t){e.U_.xe(t),BI(e).m_(t)}function Oae(e){e.U_=new vin({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.L_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),BI(e).start(),e.K_.F_()}function Mae(e){return cT(e)&&!BI(e).i_()&&e.L_.size>0}function cT(e){return Zn(e).k_.size===0}function BBe(e){e.U_=void 0}async function _sn(e){e.K_.set("Online")}async function wsn(e){e.L_.forEach((t,n)=>{Pae(e,t)})}async function Esn(e,t){BBe(e),Mae(e)?(e.K_.O_(t),Oae(e)):e.K_.set("Unknown")}async function Tsn(e,t,n){if(e.K_.set("Online"),t instanceof TBe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.L_.delete(a),i.U_.removeTarget(a))}(e,t)}catch(r){nn("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await j8(e,r)}else if(t instanceof P$?e.U_.$e(t):t instanceof EBe?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(Jn.min()))try{const r=await OBe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.L_.get(l);c&&s.L_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.L_.get(u);if(!c)return;s.L_.set(u,c.withResumeToken(Au.EMPTY_BYTE_STRING,c.snapshotVersion)),FBe(s,u);const f=new ob(c.target,u,l,c.sequenceNumber);Pae(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){nn("RemoteStore","Failed to raise snapshot:",r),await j8(e,r)}}async function j8(e,t,n){if(!$I(t))throw t;e.k_.add(1),await EO(e),e.K_.set("Offline"),n||(n=()=>OBe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{nn("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await wO(e)})}function jBe(e,t){return t().catch(n=>j8(e,n,t))}async function Y7(e){const t=Zn(e),n=sx(t);let r=t.B_.length>0?t.B_[t.B_.length-1].batchId:-1;for(;Ssn(t);)try{const i=await usn(t.localStore,r);if(i===null){t.B_.length===0&&n.a_();break}r=i.batchId,Csn(t,i)}catch(i){await j8(t,i)}UBe(t)&&zBe(t)}function Ssn(e){return cT(e)&&e.B_.length<10}function Csn(e,t){e.B_.push(t);const n=sx(e);n.s_()&&n.f_&&n.g_(t.mutations)}function UBe(e){return cT(e)&&!sx(e).i_()&&e.B_.length>0}function zBe(e){sx(e).start()}async function Asn(e){sx(e).w_()}async function Isn(e){const t=sx(e);for(const n of e.B_)t.g_(n.mutations)}async function ksn(e,t,n){const r=e.B_.shift(),i=Cae.from(r,t,n);await jBe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Y7(e)}async function Rsn(e,t){t&&sx(e).f_&&await async function(r,i){if(function(o){return min(o)&&o!==mt.ABORTED}(i.code)){const s=r.B_.shift();sx(r).__(),await jBe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Y7(r)}}(e,t),UBe(e)&&zBe(e)}async function mxe(e,t){const n=Zn(e);n.asyncQueue.verifyOperationInProgress(),nn("RemoteStore","RemoteStore received new credentials");const r=cT(n);n.k_.add(3),await EO(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await wO(n)}async function Dsn(e,t){const n=Zn(e);t?(n.k_.delete(2),await wO(n)):t||(n.k_.add(2),await EO(n),n.K_.set("Unknown"))}function BI(e){return e.W_||(e.W_=function(n,r,i){const s=Zn(n);return s.b_(),new gsn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:_sn.bind(null,e),mo:wsn.bind(null,e),po:Esn.bind(null,e),R_:Tsn.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),Mae(e)?Oae(e):e.K_.set("Unknown")):(await e.W_.stop(),BBe(e))})),e.W_}function sx(e){return e.G_||(e.G_=function(n,r,i){const s=Zn(n);return s.b_(),new ysn(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:Asn.bind(null,e),po:Rsn.bind(null,e),p_:Isn.bind(null,e),y_:ksn.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await Y7(e)):(await e.G_.stop(),e.B_.length>0&&(nn("RemoteStore",`Stopping write stream with ${e.B_.length} pending writes`),e.B_=[]))})),e.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lae{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gy,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Lae(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Qt(mt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $ae(e,t){if(y1("AsyncQueue",`${t}: ${e}`),$I(e))return new Qt(mt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{static emptySet(t){return new aC(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Tn.comparator(n.key,r.key):(n,r)=>Tn.comparator(n.key,r.key),this.keyedMap=CD(),this.sortedSet=new qs(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof aC)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new aC;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gxe{constructor(){this.z_=new qs(Tn.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):Hn():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class bA{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new bA(t,n,aC.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&z7(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nsn{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class Psn{constructor(){this.queries=yxe(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=Zn(n),s=i.queries;i.queries=yxe(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new Qt(mt.ABORTED,"Firestore shutting down"))}}function yxe(){return new lT(e=>cBe(e),z7)}async function VBe(e,t){const n=Zn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new Nsn,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=$ae(o,`Initialization of query '${h2(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&Fae(n)}async function HBe(e,t){const n=Zn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(t);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Osn(e,t){const n=Zn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&Fae(n)}function Msn(e,t,n){const r=Zn(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function Fae(e){e.X_.forEach(t=>{t.next()})}var NX,vxe;(vxe=NX||(NX={})).na="default",vxe.Cache="cache";class qBe{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new bA(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=bA.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==NX.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WBe{constructor(t){this.key=t}}class GBe{constructor(t){this.key=t}}class Lsn{constructor(t,n){this.query=t,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Mr(),this.mutatedKeys=Mr(),this.Va=fBe(t),this.ma=new aC(this.Va)}get fa(){return this.Ea}ga(t,n){const r=n?n.pa:new gxe,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=V7(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.ya(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Va(h,u)>0||l&&this.Va(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const o=t.pa.j_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hn()}};return m(h)-m(p)}(c.type,f.type)||this.Va(c.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,o.length!==0||l?{snapshot:new bA(this.query,t.ma,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new gxe,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.Ea.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=Mr(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new GBe(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new WBe(r))}),n}va(t){this.Ea=t.Es,this.Ra=Mr();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return bA.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class $sn{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Fsn{constructor(t){this.key=t,this.Fa=!1}}class Bsn{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new lT(a=>cBe(a),z7),this.Oa=new Map,this.Na=new Set,this.Ba=new qs(Tn.comparator),this.La=new Map,this.ka=new kae,this.qa={},this.Qa=new Map,this.Ka=vA.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function jsn(e,t,n=!0){const r=ZBe(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await YBe(r,t,n,!0),i}async function Usn(e,t){const n=ZBe(e);await YBe(n,t,!0,!1)}async function YBe(e,t,n,r){const i=await lsn(e.localStore,D0(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await zsn(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&$Be(e.remoteStore,i),a}async function zsn(e,t,n,r,i){e.Ua=(f,d,h)=>async function(m,g,v,b){let w=g.view.ga(v);w.ss&&(w=await dxe(m.localStore,g.query,!1).then(({documents:I})=>g.view.ga(I,w)));const E=b&&b.targetChanges.get(g.targetId),T=b&&b.targetMismatches.get(g.targetId)!=null,C=g.view.applyChanges(w,m.isPrimaryClient,E,T);return xxe(m,g.targetId,C.ba),C.snapshot}(e,f,d,h);const s=await dxe(e.localStore,t,!0),o=new Lsn(t,s.Es),a=o.ga(s.documents),u=_O.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);xxe(e,n,l.ba);const c=new $sn(t,n,o);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),l.snapshot}async function Vsn(e,t,n){const r=Zn(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!z7(o,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await DX(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Nae(r.remoteStore,i.targetId),PX(r,i.targetId)}).catch(LI)):(PX(r,i.targetId),await DX(r.localStore,i.targetId,!0))}async function Hsn(e,t){const n=Zn(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Nae(n.remoteStore,r.targetId))}async function qsn(e,t,n){const r=Jsn(e);try{const i=await function(o,a){const u=Zn(o),l=ha.now(),c=a.reduce((h,p)=>h.add(p.key),Mr());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=v1(),m=Mr();return u.hs.getEntries(h,c).next(g=>{p=g,p.forEach((v,b)=>{b.isValidDocument()||(m=m.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const v=[];for(const b of a){const w=cin(b,f.get(b.key).overlayedDocument);w!=null&&v.push(new zx(b.key,w,nBe(w.value.mapValue),ad.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,v,a)}).next(g=>{d=g;const v=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,v)})}).then(()=>({batchId:d.batchId,changes:hBe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.qa[o.currentUser.toKey()];l||(l=new qs(qr)),l=l.insert(a,u),o.qa[o.currentUser.toKey()]=l}(r,i.batchId,n),await TO(r,i.changes),await Y7(r.remoteStore)}catch(i){const s=$ae(i,"Failed to persist write");n.reject(s)}}async function KBe(e,t){const n=Zn(e);try{const r=await osn(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.La.get(s);o&&(Di(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Di(o.Fa):i.removedDocuments.size>0&&(Di(o.Fa),o.Fa=!1))}),await TO(n,r,t)}catch(r){await LI(r)}}function bxe(e,t,n){const r=Zn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=Zn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.J_)d.ea(a)&&(l=!0)}),l&&Fae(u)}(r.eventManager,t),i.length&&r.Ma.R_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Wsn(e,t,n){const r=Zn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.La.get(t),s=i&&i.key;if(s){let o=new qs(Tn.comparator);o=o.insert(s,tl.newNoDocument(s,Jn.min()));const a=Mr().add(s),u=new W7(Jn.min(),new Map,new qs(qr),o,a);await KBe(r,u),r.Ba=r.Ba.remove(s),r.La.delete(t),Bae(r)}else await DX(r.localStore,t,!1).then(()=>PX(r,t,n)).catch(LI)}async function Gsn(e,t){const n=Zn(e),r=t.batch.batchId;try{const i=await ssn(n.localStore,t);QBe(n,r,null),XBe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await TO(n,i)}catch(i){await LI(i)}}async function Ysn(e,t,n){const r=Zn(e);try{const i=await function(o,a){const u=Zn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Di(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);QBe(r,t,n),XBe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await TO(r,i)}catch(i){await LI(i)}}function XBe(e,t){(e.Qa.get(t)||[]).forEach(n=>{n.resolve()}),e.Qa.delete(t)}function QBe(e,t,n){const r=Zn(e);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function PX(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(r=>{e.ka.containsKey(r)||JBe(e,r)})}function JBe(e,t){e.Na.delete(t.path.canonicalString());const n=e.Ba.get(t);n!==null&&(Nae(e.remoteStore,n),e.Ba=e.Ba.remove(t),e.La.delete(n),Bae(e))}function xxe(e,t,n){for(const r of n)r instanceof WBe?(e.ka.addReference(r.key,t),Ksn(e,r)):r instanceof GBe?(nn("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||JBe(e,r.key)):Hn()}function Ksn(e,t){const n=t.key,r=n.path.canonicalString();e.Ba.get(n)||e.Na.has(r)||(nn("SyncEngine","New document in limbo: "+n),e.Na.add(r),Bae(e))}function Bae(e){for(;e.Na.size>0&&e.Ba.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new Tn(ws.fromString(t)),r=e.Ka.next();e.La.set(r,new Fsn(n)),e.Ba=e.Ba.insert(n,r),$Be(e.remoteStore,new ob(D0(Eae(n.path)),r,"TargetPurposeLimboResolution",B7.oe))}}async function TO(e,t,n){const r=Zn(e),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=Dae.zi(u.targetId,l);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,l){const c=Zn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>vt.forEach(l,d=>vt.forEach(d.Wi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>vt.forEach(d.Gi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!$I(f))throw f;nn("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.us.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.us=c.us.insert(d,m)}}}(r.localStore,s))}async function Xsn(e,t){const n=Zn(e);if(!n.currentUser.isEqual(t)){nn("SyncEngine","User change. New user:",t.toKey());const r=await PBe(n.localStore,t);n.currentUser=t,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new Qt(mt.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await TO(n,r.Ts)}}function Qsn(e,t){const n=Zn(e),r=n.La.get(t);if(r&&r.Fa)return Mr().add(r.key);{let i=Mr();const s=n.Oa.get(t);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function ZBe(e){const t=Zn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=KBe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qsn.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Wsn.bind(null,t),t.Ma.R_=Osn.bind(null,t.eventManager),t.Ma.Wa=Msn.bind(null,t.eventManager),t}function Jsn(e){const t=Zn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Gsn.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Ysn.bind(null,t),t}class U8{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=G7(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return isn(this.persistence,new nsn,t.initialUser,this.serializer)}ja(t){return new NBe(Rae.ei,this.serializer)}za(t){return new fsn}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}U8.provider={build:()=>new U8};class Zsn extends U8{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){Di(this.persistence.referenceDelegate instanceof B8);const r=this.persistence.referenceDelegate.garbageCollector;return new Uin(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?Lc.withCacheSize(this.cacheSizeBytes):Lc.DEFAULT;return new NBe(r=>B8.ei(r,n),this.serializer)}}class OX{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bxe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xsn.bind(null,this.syncEngine),await Dsn(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new Psn}()}createDatastore(t){const n=G7(t.databaseInfo.databaseId),r=function(s){return new msn(s)}(t.databaseInfo);return function(s,o,a,u){return new vsn(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new xsn(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>bxe(this.syncEngine,n,0),function(){return pxe.p()?new pxe:new dsn}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new Bsn(i,s,o,a,u,l);return c&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=Zn(i);nn("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await EO(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}OX.provider={build:()=>new OX};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e9e{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):y1("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eon{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Mc.UNAUTHENTICATED,this.clientId=Z8e.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{nn("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(nn("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Gy;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=$ae(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function $q(e,t){e.asyncQueue.verifyOperationInProgress(),nn("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await PBe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function _xe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await t9e(e);nn("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>mxe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>mxe(t.remoteStore,i)),e._onlineComponents=t}async function t9e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){nn("FirestoreClient","Using user provided OfflineComponentProvider");try{await $q(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===mt.FAILED_PRECONDITION||i.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;IP("Error using user provided cache. Falling back to memory cache: "+n),await $q(e,new U8)}}else nn("FirestoreClient","Using default OfflineComponentProvider"),await $q(e,new Zsn(void 0));return e._offlineComponents}async function jae(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(nn("FirestoreClient","Using user provided OnlineComponentProvider"),await _xe(e,e._uninitializedComponentsProvider._online)):(nn("FirestoreClient","Using default OnlineComponentProvider"),await _xe(e,new OX))),e._onlineComponents}function ton(e){return t9e(e).then(t=>t.persistence)}function non(e){return jae(e).then(t=>t.remoteStore)}function ron(e){return jae(e).then(t=>t.syncEngine)}async function n9e(e){const t=await jae(e),n=t.eventManager;return n.onListen=jsn.bind(null,t.syncEngine),n.onUnlisten=Vsn.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Usn.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Hsn.bind(null,t.syncEngine),n}function ion(e){return e.asyncQueue.enqueue(async()=>{const t=await ton(e),n=await non(e);return t.setNetworkEnabled(!0),function(i){const s=Zn(i);return s.k_.delete(0),wO(s)}(n)})}function son(e,t,n={}){const r=new Gy;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new e9e({next:d=>{c.eu(),o.enqueueAndForget(()=>HBe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new Qt(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new Qt(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new qBe(Eae(a.path),c,{includeMetadataChanges:!0,ua:!0});return VBe(s,f)}(await n9e(e),e.asyncQueue,t,n,r)),r.promise}function oon(e,t,n={}){const r=new Gy;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new e9e({next:d=>{c.eu(),o.enqueueAndForget(()=>HBe(s,f)),d.fromCache&&u.source==="server"?l.reject(new Qt(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new qBe(a,c,{includeMetadataChanges:!0,ua:!0});return VBe(s,f)}(await n9e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r9e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wxe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9e(e,t,n){if(!n)throw new Qt(mt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function aon(e,t,n,r){if(t===!0&&r===!0)throw new Qt(mt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Exe(e){if(!Tn.isDocumentKey(e))throw new Qt(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Txe(e){if(Tn.isDocumentKey(e))throw new Qt(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function K7(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Hn()}function tg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Qt(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=K7(e);throw new Qt(mt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sxe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Qt(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Qt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}aon("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r9e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Qt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Qt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Qt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Uae{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sxe({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Qt(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sxe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yrn;switch(r.type){case"firstParty":return new xrn(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Qt(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=wxe.get(n);r&&(nn("ComponentProvider","Removing Datastore"),wxe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new fT(this.firestore,t,this._query)}}class Kl{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xb(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Kl(this.firestore,t,this._key)}}class xb extends fT{constructor(t,n,r){super(t,n,Eae(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Kl(this.firestore,null,new Tn(t))}withConverter(t){return new xb(this.firestore,t,this._path)}}function Nc(e,t,...n){if(e=ps(e),i9e("collection","path",t),e instanceof Uae){const r=ws.fromString(t,...n);return Txe(r),new xb(e,null,r)}{if(!(e instanceof Kl||e instanceof xb))throw new Qt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ws.fromString(t,...n));return Txe(r),new xb(e.firestore,null,r)}}function bs(e,t,...n){if(e=ps(e),arguments.length===1&&(t=Z8e.newId()),i9e("doc","path",t),e instanceof Uae){const r=ws.fromString(t,...n);return Exe(r),new Kl(e,null,new Tn(r))}{if(!(e instanceof Kl||e instanceof xb))throw new Qt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ws.fromString(t,...n));return Exe(r),new Kl(e.firestore,e instanceof xb?e.converter:null,new Tn(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cxe{constructor(t=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new MBe(this,"async_queue_retry"),this.fu=()=>{const r=Lq();r&&nn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=Lq();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.du){this.du=!0,this.Vu=t||!1;const n=Lq();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.du)return new Promise(()=>{});const n=new Gy;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!$I(t))throw t;nn("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw y1("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=Lae.createAndSchedule(this,t,n,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&Hn()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.Eu)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.Eu.indexOf(t);this.Eu.splice(n,1)}}class dT extends Uae{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new Cxe,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Cxe(t),this._firestoreClient=void 0,await t}}}function uon(e,t,n){n||(n="(default)");const r=PI(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(SP(s,t))return i;throw new Qt(mt.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Qt(mt.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Qt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function SO(e){if(e._terminated)throw new Qt(mt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||lon(e),e._firestoreClient}function lon(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new Mrn(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,r9e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new eon(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}function con(e){return ion(SO(e=tg(e,dT)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(t){this._byteString=t}static fromBase64String(t){try{return new xA(Au.fromBase64String(t))}catch(n){throw new Qt(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new xA(Au.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Qt(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vu(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X7{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zae{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Qt(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Qt(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return qr(this._lat,t._lat)||qr(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vae{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fon=/^__.*__$/;class don{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new zx(t,this.data,this.fieldMask,n,this.fieldTransforms):new xO(t,this.data,n,this.fieldTransforms)}}class s9e{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new zx(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function o9e(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hn()}}class Hae{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new Hae(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Bu(t),i}Lu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return z8(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Bu(this.path.get(t))}Bu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(o9e(this.Mu)&&fon.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class hon{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||G7(t)}$u(t,n,r,i=!1){return new Hae({Mu:t,methodName:n,Ku:r,path:vu.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Q7(e){const t=e._freezeSettings(),n=G7(e._databaseId);return new hon(e._databaseId,!!t.ignoreUndefinedProperties,n)}function a9e(e,t,n,r,i,s={}){const o=e.$u(s.merge||s.mergeFields?2:0,t,n,i);Wae("Data must be an object, but it was:",o,r);const a=c9e(r,o);let u,l;if(s.merge)u=new ed(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=MX(t,f,n);if(!o.contains(d))throw new Qt(mt.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);d9e(c,d)||c.push(d)}u=new ed(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new don(new Hc(a),u,l)}class J7 extends X7{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof J7}}class qae extends X7{_toFieldTransform(t){return new oin(t.path,new PP)}isEqual(t){return t instanceof qae}}function u9e(e,t,n,r){const i=e.$u(1,t,n);Wae("Data must be an object, but it was:",i,r);const s=[],o=Hc.empty();Ux(r,(u,l)=>{const c=Gae(t,u,n);l=ps(l);const f=i.Lu(c);if(l instanceof J7)s.push(c);else{const d=AO(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new ed(s);return new s9e(o,a,i.fieldTransforms)}function l9e(e,t,n,r,i,s){const o=e.$u(1,t,n),a=[MX(t,r,n)],u=[i];if(s.length%2!=0)throw new Qt(mt.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(MX(t,s[d])),u.push(s[d+1]);const l=[],c=Hc.empty();for(let d=a.length-1;d>=0;--d)if(!d9e(l,a[d])){const h=a[d];let p=u[d];p=ps(p);const m=o.Lu(h);if(p instanceof J7)l.push(h);else{const g=AO(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new ed(l);return new s9e(c,f,o.fieldTransforms)}function pon(e,t,n,r=!1){return AO(n,e.$u(r?4:3,t))}function AO(e,t){if(f9e(e=ps(e)))return Wae("Unsupported field value:",t,e),c9e(e,t);if(e instanceof X7)return function(r,i){if(!o9e(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=AO(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ps(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rin(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ha.fromDate(r);return{timestampValue:F8(i.serializer,s)}}if(r instanceof ha){const s=new ha(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:F8(i.serializer,s)}}if(r instanceof zae)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xA)return{bytesValue:SBe(i.serializer,r._byteString)};if(r instanceof Kl){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Iae(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vae)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return Tae(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${K7(r)}`)}(e,t)}function c9e(e,t){const n={};return eBe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ux(e,(r,i)=>{const s=AO(i,t.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function f9e(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ha||e instanceof zae||e instanceof xA||e instanceof Kl||e instanceof X7||e instanceof Vae)}function Wae(e,t,n){if(!f9e(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=K7(n);throw r==="an object"?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function MX(e,t,n){if((t=ps(t))instanceof CO)return t._internalPath;if(typeof t=="string")return Gae(e,t);throw z8("Field path arguments must be of type string or ",e,!1,void 0,n)}const mon=new RegExp("[~\\*/\\[\\]]");function Gae(e,t,n){if(t.search(mon)>=0)throw z8(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new CO(...t.split("."))._internalPath}catch{throw z8(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function z8(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Qt(mt.INVALID_ARGUMENT,a+e+u)}function d9e(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9e{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kl(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new gon(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Z7("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gon extends h9e{data(){return super.data()}}function Z7(e,t){return typeof t=="string"?Gae(e,t):t instanceof CO?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yon(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Qt(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Yae{}class p9e extends Yae{}function Fq(e,t,...n){let r=[];t instanceof Yae&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Kae).length,a=s.filter(u=>u instanceof eU).length;if(o>1||o>0&&a>0)throw new Qt(mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class eU extends p9e{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new eU(t,n,r)}_apply(t){const n=this._parse(t);return m9e(t._query,n),new fT(t.firestore,t.converter,SX(t._query,n))}_parse(t){const n=Q7(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Qt(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Rxe(f,c);const h=[];for(const p of f)h.push(kxe(u,s,p));d={arrayValue:{values:h}}}else d=kxe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Rxe(f,c),d=pon(a,o,f,c==="in"||c==="not-in");return Wo.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Axe(e,t,n){const r=t,i=Z7("where",e);return eU._create(i,r,n)}class Kae extends Yae{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Kae(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Qp.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)m9e(o,u),o=SX(o,u)}(t._query,n),new fT(t.firestore,t.converter,SX(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Xae extends p9e{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Xae(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Qt(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Qt(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new NP(s,o)}(t._query,this._field,this._direction);return new fT(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new FI(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function Ixe(e,t="asc"){const n=t,r=Z7("orderBy",e);return Xae._create(r,n)}function kxe(e,t,n){if(typeof(n=ps(n))=="string"){if(n==="")throw new Qt(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lBe(t)&&n.indexOf("/")!==-1)throw new Qt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ws.fromString(n));if(!Tn.isDocumentKey(r))throw new Qt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ybe(e,new Tn(r))}if(n instanceof Kl)return Ybe(e,n._key);throw new Qt(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${K7(n)}.`)}function Rxe(e,t){if(!Array.isArray(e)||e.length===0)throw new Qt(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function m9e(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Qt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Qt(mt.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class von{convertValue(t,n="none"){switch(ix(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Co(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(rx(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Hn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Ux(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Co(o.doubleValue));return new Vae(s)}convertGeoPoint(t){return new zae(Co(t.latitude),Co(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=U7(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(kP(t));default:return null}}convertTimestamp(t){const n=nx(t);return new ha(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ws.fromString(t);Di(DBe(r));const i=new RP(r.get(1),r.get(3)),s=new Tn(r.popFirst(5));return i.isEqual(n)||y1(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g9e(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class y9e extends h9e{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new O$(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Z7("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class O$ extends y9e{data(t={}){return super.data(t)}}class bon{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new ID(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new O$(this._firestore,this._userDataWriter,r.key,r,new ID(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Qt(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new O$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ID(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new O$(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ID(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:xon(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xon(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BM(e){e=tg(e,Kl);const t=tg(e.firestore,dT);return son(SO(t),e._key).then(n=>_on(t,e,n))}class v9e extends von{constructor(t){super(),this.firestore=t}convertBytes(t){return new xA(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Kl(this.firestore,null,n)}}function e2(e){e=tg(e,fT);const t=tg(e.firestore,dT),n=SO(t),r=new v9e(t);return yon(e._query),oon(n,e._query).then(i=>new bon(t,r,e,i))}function Gu(e,t,n){e=tg(e,Kl);const r=tg(e.firestore,dT),i=g9e(e.converter,t,n);return Qae(r,[a9e(Q7(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,ad.none())])}function Dxe(e,t,n,...r){e=tg(e,Kl);const i=tg(e.firestore,dT),s=Q7(i);let o;return o=typeof(t=ps(t))=="string"||t instanceof CO?l9e(s,"updateDoc",e._key,t,n,r):u9e(s,"updateDoc",e._key,t),Qae(i,[o.toMutation(e._key,ad.exists(!0))])}function Qae(e,t){return function(r,i){const s=new Gy;return r.asyncQueue.enqueueAndForget(async()=>qsn(await ron(r),i,s)),s.promise}(SO(e),t)}function _on(e,t,n){const r=n.docs.get(t._key),i=new v9e(e);return new y9e(e,i,t._key,r,new ID(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class won{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Q7(t)}set(t,n,r){this._verifyNotCommitted();const i=Bq(t,this._firestore),s=g9e(i.converter,n,r),o=a9e(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ad.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=Bq(t,this._firestore);let o;return o=typeof(n=ps(n))=="string"||n instanceof CO?l9e(this._dataReader,"WriteBatch.update",s._key,n,r,i):u9e(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ad.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Bq(t,this._firestore);return this._mutations=this._mutations.concat(new Sae(n._key,ad.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qt(mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Bq(e,t){if((e=ps(e)).firestore!==t)throw new Qt(mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function jM(){return new qae("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nxe(e){return SO(e=tg(e,dT)),new won(e,t=>Qae(e,t))}(function(t,n=!0){(function(i){MI=i})(uT),m1(new J0("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new dT(new vrn(r.getProvider("auth-internal")),new wrn(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Qt(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new RP(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Lp(zbe,"4.7.6",t),Lp(zbe,"4.7.6","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX=new Map,b9e={activated:!1,tokenObservers:[]},Eon={initialized:!1,enabled:!1};function ma(e){return LX.get(e)||Object.assign({},b9e)}function Ton(e,t){return LX.set(e,t),LX.get(e)}function tU(){return Eon}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9e="https://content-firebaseappcheck.googleapis.com/v1",Son="exchangeRecaptchaV3Token",Con="exchangeDebugToken",Pxe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Aon=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ion{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new TP,this.pending.promise.catch(n=>{}),await kon(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new TP,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function kon(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ron={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Yc=new NI("appCheck","AppCheck",Ron);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oxe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Jae(e){if(!ma(e).activated)throw Yc.create("use-before-activation",{appName:e.name})}function _9e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=UM(n)+"d:"),r&&(o+=UM(r)+"h:"),o+=UM(i)+"m:"+UM(s)+"s",o}function UM(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zae({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Yc.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Yc.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Yc.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Yc.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function Don(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${x9e}/projects/${n}/apps/${r}:${Son}?key=${i}`,body:{recaptcha_v3_token:t}}}function w9e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${x9e}/projects/${n}/apps/${r}:${Con}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Non="firebase-app-check-database",Pon=1,LP="firebase-app-check-store",E9e="debug-token";let zM=null;function T9e(){return zM||(zM=new Promise((e,t)=>{try{const n=indexedDB.open(Non,Pon);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Yc.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(LP,{keyPath:"compositeKey"})}}}catch(n){t(Yc.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),zM)}function Oon(e){return C9e(A9e(e))}function Mon(e,t){return S9e(A9e(e),t)}function Lon(e){return S9e(E9e,e)}function $on(){return C9e(E9e)}async function S9e(e,t){const r=(await T9e()).transaction(LP,"readwrite"),s=r.objectStore(LP).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Yc.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function C9e(e){const n=(await T9e()).transaction(LP,"readonly"),i=n.objectStore(LP).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Yc.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function A9e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=new N7("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fon(e){if(Joe()){let t;try{t=await Oon(e)}catch(n){$P.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function jq(e,t){return Joe()?Mon(e,t).catch(n=>{$P.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function Bon(){let e;try{e=await $on()}catch{}if(e)return e;{const t=crypto.randomUUID();return Lon(t).catch(n=>$P.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eue(){return tU().enabled}async function tue(){const e=tU();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function jon(){const e=q5e(),t=tU();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new TP;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(Bon())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uon={error:"UNKNOWN_ERROR"};function zon(e){return Qoe.encodeString(JSON.stringify(e),!1)}async function $X(e,t=!1){const n=e.app;Jae(n);const r=ma(n);let i=r.token,s;if(i&&!R2(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(R2(u)?i=u:await jq(n,void 0))}if(!t&&i&&R2(i))return{token:i.token};let o=!1;if(eue()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Zae(w9e(n,await tue()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await jq(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await ma(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?$P.warn(u.message):$P.error(u),s=u}let a;return i?s?R2(i)?a={token:i.token,internalError:s}:a=Lxe(s):(a={token:i.token},r.token=i,await jq(n,i)):a=Lxe(s),o&&R9e(n,a),a}async function Von(e){const t=e.app;Jae(t);const{provider:n}=ma(t);if(eue()){const r=await tue(),{token:i}=await Zae(w9e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function I9e(e,t,n,r){const{app:i}=e,s=ma(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&R2(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Mxe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Mxe(e))}function k9e(e,t){const n=ma(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Mxe(e){const{app:t}=e,n=ma(t);let r=n.tokenRefresher;r||(r=Hon(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Hon(e){const{app:t}=e;return new Ion(async()=>{const n=ma(t);let r;if(n.token?r=await $X(e,!0):r=await $X(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=ma(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Pxe.RETRIAL_MIN_WAIT,Pxe.RETRIAL_MAX_WAIT)}function R9e(e,t){const n=ma(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function R2(e){return e.expireTimeMillis-Date.now()>0}function Lxe(e){return{token:zon(Uon),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qon{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=ma(this.app);for(const n of t)k9e(this.app,n.next);return Promise.resolve()}}function Won(e,t){return new qon(e,t)}function Gon(e){return{getToken:t=>$X(e,t),getLimitedUseToken:()=>Von(e),addTokenListener:t=>I9e(e,"INTERNAL",t),removeTokenListener:t=>k9e(e.app,t)}}const Yon="@firebase/app-check",Kon="0.8.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xon="https://www.google.com/recaptcha/api.js";function Qon(e,t){const n=new TP,r=ma(e);r.reCAPTCHAState={initialized:n};const i=Jon(e),s=Oxe(!1);return s?$xe(e,t,s,i,n):tan(()=>{const o=Oxe(!1);if(!o)throw new Error("no recaptcha");$xe(e,t,o,i,n)}),n.promise}function $xe(e,t,n,r,i){n.ready(()=>{ean(e,t,n,r),i.resolve(n)})}function Jon(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function Zon(e){Jae(e);const n=await ma(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=ma(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function ean(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{ma(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{ma(e).reCAPTCHAState.succeeded=!1}}),s=ma(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function tan(e){const t=document.createElement("script");t.src=Xon,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nue{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;ran(this._throttleData);const i=await Zon(this._app).catch(o=>{throw Yc.create("recaptcha-error")});if(!(!((t=ma(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Yc.create("recaptcha-error");let s;try{s=await Zae(Don(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=nan(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Yc.create("throttled",{time:_9e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=PI(t,"heartbeat"),Qon(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof nue?this._siteKey===t._siteKey:!1}}function nan(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+Aon,httpStatus:e};{const n=t?t.backoffCount:0,r=FJt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function ran(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Yc.create("throttled",{time:_9e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ian(e=eae(),t){e=ps(e);const n=PI(e,"app-check");if(tU().initialized||jon(),eue()&&tue().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Yc.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return san(e,t.provider,t.isTokenAutoRefreshEnabled),ma(e).isTokenAutoRefreshEnabled&&I9e(r,"INTERNAL",()=>{}),r}function san(e,t,n){const r=Ton(e,Object.assign({},b9e));r.activated=!0,r.provider=t,r.cachedTokenPromise=Fon(e).then(i=>(i&&R2(i)&&(r.token=i,R9e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const oan="app-check",Fxe="app-check-internal";function aan(){m1(new J0(oan,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return Won(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Fxe).initialize()})),m1(new J0(Fxe,e=>{const t=e.getProvider("app-check").getImmediate();return Gon(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Lp(Yon,Kon)}aan();var Uq={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/var Bxe;function uan(){return Bxe||(Bxe=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof VR=="function"&&VR;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof VR=="function"&&VR,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,v,b=h.length;b;){for(v=h,h=[],g=-1;++g<b;)v[g]();b=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof la<"u"?la:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(T){if(typeof T!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,T!==o&&m(this,T)}f.prototype.catch=function(T){return this.then(null,T)},f.prototype.then=function(T,C){if(typeof T!="function"&&this.state===l||typeof C!="function"&&this.state===u)return this;var I=new this.constructor(o);if(this.state!==c){var R=this.state===l?T:C;h(I,R,this.outcome)}else this.queue.push(new d(I,T,C));return I};function d(T,C,I){this.promise=T,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof I=="function"&&(this.onRejected=I,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(T){a.resolve(this.promise,T)},d.prototype.otherCallFulfilled=function(T){h(this.promise,this.onFulfilled,T)},d.prototype.callRejected=function(T){a.reject(this.promise,T)},d.prototype.otherCallRejected=function(T){h(this.promise,this.onRejected,T)};function h(T,C,I){s(function(){var R;try{R=C(I)}catch(N){return a.reject(T,N)}R===T?a.reject(T,new TypeError("Cannot resolve promise with itself")):a.resolve(T,R)})}a.resolve=function(T,C){var I=g(p,C);if(I.status==="error")return a.reject(T,I.value);var R=I.value;if(R)m(T,R);else{T.state=l,T.outcome=C;for(var N=-1,O=T.queue.length;++N<O;)T.queue[N].callFulfilled(C)}return T},a.reject=function(T,C){T.state=u,T.outcome=C;for(var I=-1,R=T.queue.length;++I<R;)T.queue[I].callRejected(C);return T};function p(T){var C=T&&T.then;if(T&&(typeof T=="object"||typeof T=="function")&&typeof C=="function")return function(){C.apply(T,arguments)}}function m(T,C){var I=!1;function R(B){I||(I=!0,a.reject(T,B))}function N(B){I||(I=!0,a.resolve(T,B))}function O(){C(N,R)}var L=g(O);L.status==="error"&&R(L.value)}function g(T,C){var I={};try{I.value=T(C),I.status="success"}catch(R){I.status="error",I.value=R}return I}f.resolve=v;function v(T){return T instanceof this?T:a.resolve(new this(o),T)}f.reject=b;function b(T){var C=new this(o);return a.reject(C,T)}f.all=w;function w(T){var C=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=T.length,R=!1;if(!I)return this.resolve([]);for(var N=new Array(I),O=0,L=-1,B=new this(o);++L<I;)F(T[L],L);return B;function F(H,Q){C.resolve(H).then(J,function(ne){R||(R=!0,a.reject(B,ne))});function J(ne){N[Q]=ne,++O===I&&!R&&(R=!0,a.resolve(B,N))}}}f.race=E;function E(T){var C=this;if(Object.prototype.toString.call(T)!=="[object Array]")return this.reject(new TypeError("must be an array"));var I=T.length,R=!1;if(!I)return this.resolve([]);for(var N=-1,O=new this(o);++N<I;)L(T[N]);return O;function L(B){C.resolve(B).then(function(F){R||(R=!0,a.resolve(O,F))},function(F){R||(R=!0,a.reject(O,F))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof la<"u"?la:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ue){return typeof ue}:function(ue){return ue&&typeof Symbol=="function"&&ue.constructor===Symbol&&ue!==Symbol.prototype?"symbol":typeof ue};function o(ue,Se){if(!(ue instanceof Se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var ue=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ue||Se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(ue,Se){ue=ue||[],Se=Se||{};try{return new Blob(ue,Se)}catch(Re){if(Re.name!=="TypeError")throw Re;for(var ge=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,Ne=new ge,Be=0;Be<ue.length;Be+=1)Ne.append(ue[Be]);return Ne.getBlob(Se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(ue,Se){Se&&ue.then(function(ge){Se(null,ge)},function(ge){Se(ge)})}function h(ue,Se,ge){typeof Se=="function"&&ue.then(Se),typeof ge=="function"&&ue.catch(ge)}function p(ue){return typeof ue!="string"&&(console.warn(ue+" used as a key, but it is not a string."),ue=String(ue)),ue}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",v=void 0,b={},w=Object.prototype.toString,E="readonly",T="readwrite";function C(ue){for(var Se=ue.length,ge=new ArrayBuffer(Se),Ne=new Uint8Array(ge),Be=0;Be<Se;Be++)Ne[Be]=ue.charCodeAt(Be);return ge}function I(ue){return new f(function(Se){var ge=ue.transaction(g,T),Ne=c([""]);ge.objectStore(g).put(Ne,"key"),ge.onabort=function(Be){Be.preventDefault(),Be.stopPropagation(),Se(!1)},ge.oncomplete=function(){var Be=navigator.userAgent.match(/Chrome\/(\d+)/),Re=navigator.userAgent.match(/Edge\//);Se(Re||!Be||parseInt(Be[1],10)>=43)}}).catch(function(){return!1})}function R(ue){return typeof v=="boolean"?f.resolve(v):I(ue).then(function(Se){return v=Se,v})}function N(ue){var Se=b[ue.name],ge={};ge.promise=new f(function(Ne,Be){ge.resolve=Ne,ge.reject=Be}),Se.deferredOperations.push(ge),Se.dbReady?Se.dbReady=Se.dbReady.then(function(){return ge.promise}):Se.dbReady=ge.promise}function O(ue){var Se=b[ue.name],ge=Se.deferredOperations.pop();if(ge)return ge.resolve(),ge.promise}function L(ue,Se){var ge=b[ue.name],Ne=ge.deferredOperations.pop();if(Ne)return Ne.reject(Se),Ne.promise}function B(ue,Se){return new f(function(ge,Ne){if(b[ue.name]=b[ue.name]||G(),ue.db)if(Se)N(ue),ue.db.close();else return ge(ue.db);var Be=[ue.name];Se&&Be.push(ue.version);var Re=u.open.apply(u,Be);Se&&(Re.onupgradeneeded=function(rt){var bt=Re.result;try{bt.createObjectStore(ue.storeName),rt.oldVersion<=1&&bt.createObjectStore(g)}catch(Et){if(Et.name==="ConstraintError")console.warn('The database "'+ue.name+'" has been upgraded from version '+rt.oldVersion+" to version "+rt.newVersion+', but the storage "'+ue.storeName+'" already exists.');else throw Et}}),Re.onerror=function(rt){rt.preventDefault(),Ne(Re.error)},Re.onsuccess=function(){var rt=Re.result;rt.onversionchange=function(bt){bt.target.close()},ge(rt),O(ue)}})}function F(ue){return B(ue,!1)}function H(ue){return B(ue,!0)}function Q(ue,Se){if(!ue.db)return!0;var ge=!ue.db.objectStoreNames.contains(ue.storeName),Ne=ue.version<ue.db.version,Be=ue.version>ue.db.version;if(Ne&&(ue.version!==Se&&console.warn('The database "'+ue.name+`" can't be downgraded from version `+ue.db.version+" to version "+ue.version+"."),ue.version=ue.db.version),Be||ge){if(ge){var Re=ue.db.version+1;Re>ue.version&&(ue.version=Re)}return!0}return!1}function J(ue){return new f(function(Se,ge){var Ne=new FileReader;Ne.onerror=ge,Ne.onloadend=function(Be){var Re=btoa(Be.target.result||"");Se({__local_forage_encoded_blob:!0,data:Re,type:ue.type})},Ne.readAsBinaryString(ue)})}function ne(ue){var Se=C(atob(ue.data));return c([Se],{type:ue.type})}function Z(ue){return ue&&ue.__local_forage_encoded_blob}function ie(ue){var Se=this,ge=Se._initReady().then(function(){var Ne=b[Se._dbInfo.name];if(Ne&&Ne.dbReady)return Ne.dbReady});return h(ge,ue,ue),ge}function q(ue){N(ue);for(var Se=b[ue.name],ge=Se.forages,Ne=0;Ne<ge.length;Ne++){var Be=ge[Ne];Be._dbInfo.db&&(Be._dbInfo.db.close(),Be._dbInfo.db=null)}return ue.db=null,F(ue).then(function(Re){return ue.db=Re,Q(ue)?H(ue):Re}).then(function(Re){ue.db=Se.db=Re;for(var rt=0;rt<ge.length;rt++)ge[rt]._dbInfo.db=Re}).catch(function(Re){throw L(ue,Re),Re})}function U(ue,Se,ge,Ne){Ne===void 0&&(Ne=1);try{var Be=ue.db.transaction(ue.storeName,Se);ge(null,Be)}catch(Re){if(Ne>0&&(!ue.db||Re.name==="InvalidStateError"||Re.name==="NotFoundError"))return f.resolve().then(function(){if(!ue.db||Re.name==="NotFoundError"&&!ue.db.objectStoreNames.contains(ue.storeName)&&ue.version<=ue.db.version)return ue.db&&(ue.version=ue.db.version+1),H(ue)}).then(function(){return q(ue).then(function(){U(ue,Se,ge,Ne-1)})}).catch(ge);ge(Re)}}function G(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function V(ue){var Se=this,ge={db:null};if(ue)for(var Ne in ue)ge[Ne]=ue[Ne];var Be=b[ge.name];Be||(Be=G(),b[ge.name]=Be),Be.forages.push(Se),Se._initReady||(Se._initReady=Se.ready,Se.ready=ie);var Re=[];function rt(){return f.resolve()}for(var bt=0;bt<Be.forages.length;bt++){var Et=Be.forages[bt];Et!==Se&&Re.push(Et._initReady().catch(rt))}var xt=Be.forages.slice(0);return f.all(Re).then(function(){return ge.db=Be.db,F(ge)}).then(function(Dt){return ge.db=Dt,Q(ge,Se._defaultConfig.version)?H(ge):Dt}).then(function(Dt){ge.db=Be.db=Dt,Se._dbInfo=ge;for(var qt=0;qt<xt.length;qt++){var In=xt[qt];In!==Se&&(In._dbInfo.db=ge.db,In._dbInfo.version=ge.version)}})}function Y(ue,Se){var ge=this;ue=p(ue);var Ne=new f(function(Be,Re){ge.ready().then(function(){U(ge._dbInfo,E,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=Et.get(ue);xt.onsuccess=function(){var Dt=xt.result;Dt===void 0&&(Dt=null),Z(Dt)&&(Dt=ne(Dt)),Be(Dt)},xt.onerror=function(){Re(xt.error)}}catch(Dt){Re(Dt)}})}).catch(Re)});return d(Ne,Se),Ne}function ee(ue,Se){var ge=this,Ne=new f(function(Be,Re){ge.ready().then(function(){U(ge._dbInfo,E,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=Et.openCursor(),Dt=1;xt.onsuccess=function(){var qt=xt.result;if(qt){var In=qt.value;Z(In)&&(In=ne(In));var un=ue(In,qt.key,Dt++);un!==void 0?Be(un):qt.continue()}else Be()},xt.onerror=function(){Re(xt.error)}}catch(qt){Re(qt)}})}).catch(Re)});return d(Ne,Se),Ne}function ae(ue,Se,ge){var Ne=this;ue=p(ue);var Be=new f(function(Re,rt){var bt;Ne.ready().then(function(){return bt=Ne._dbInfo,w.call(Se)==="[object Blob]"?R(bt.db).then(function(Et){return Et?Se:J(Se)}):Se}).then(function(Et){U(Ne._dbInfo,T,function(xt,Dt){if(xt)return rt(xt);try{var qt=Dt.objectStore(Ne._dbInfo.storeName);Et===null&&(Et=void 0);var In=qt.put(Et,ue);Dt.oncomplete=function(){Et===void 0&&(Et=null),Re(Et)},Dt.onabort=Dt.onerror=function(){var un=In.error?In.error:In.transaction.error;rt(un)}}catch(un){rt(un)}})}).catch(rt)});return d(Be,ge),Be}function _e(ue,Se){var ge=this;ue=p(ue);var Ne=new f(function(Be,Re){ge.ready().then(function(){U(ge._dbInfo,T,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=Et.delete(ue);bt.oncomplete=function(){Be()},bt.onerror=function(){Re(xt.error)},bt.onabort=function(){var Dt=xt.error?xt.error:xt.transaction.error;Re(Dt)}}catch(Dt){Re(Dt)}})}).catch(Re)});return d(Ne,Se),Ne}function pe(ue){var Se=this,ge=new f(function(Ne,Be){Se.ready().then(function(){U(Se._dbInfo,T,function(Re,rt){if(Re)return Be(Re);try{var bt=rt.objectStore(Se._dbInfo.storeName),Et=bt.clear();rt.oncomplete=function(){Ne()},rt.onabort=rt.onerror=function(){var xt=Et.error?Et.error:Et.transaction.error;Be(xt)}}catch(xt){Be(xt)}})}).catch(Be)});return d(ge,ue),ge}function Te(ue){var Se=this,ge=new f(function(Ne,Be){Se.ready().then(function(){U(Se._dbInfo,E,function(Re,rt){if(Re)return Be(Re);try{var bt=rt.objectStore(Se._dbInfo.storeName),Et=bt.count();Et.onsuccess=function(){Ne(Et.result)},Et.onerror=function(){Be(Et.error)}}catch(xt){Be(xt)}})}).catch(Be)});return d(ge,ue),ge}function Le(ue,Se){var ge=this,Ne=new f(function(Be,Re){if(ue<0){Be(null);return}ge.ready().then(function(){U(ge._dbInfo,E,function(rt,bt){if(rt)return Re(rt);try{var Et=bt.objectStore(ge._dbInfo.storeName),xt=!1,Dt=Et.openKeyCursor();Dt.onsuccess=function(){var qt=Dt.result;if(!qt){Be(null);return}ue===0||xt?Be(qt.key):(xt=!0,qt.advance(ue))},Dt.onerror=function(){Re(Dt.error)}}catch(qt){Re(qt)}})}).catch(Re)});return d(Ne,Se),Ne}function ye(ue){var Se=this,ge=new f(function(Ne,Be){Se.ready().then(function(){U(Se._dbInfo,E,function(Re,rt){if(Re)return Be(Re);try{var bt=rt.objectStore(Se._dbInfo.storeName),Et=bt.openKeyCursor(),xt=[];Et.onsuccess=function(){var Dt=Et.result;if(!Dt){Ne(xt);return}xt.push(Dt.key),Dt.continue()},Et.onerror=function(){Be(Et.error)}}catch(Dt){Be(Dt)}})}).catch(Be)});return d(ge,ue),ge}function he(ue,Se){Se=m.apply(this,arguments);var ge=this.config();ue=typeof ue!="function"&&ue||{},ue.name||(ue.name=ue.name||ge.name,ue.storeName=ue.storeName||ge.storeName);var Ne=this,Be;if(!ue.name)Be=f.reject("Invalid arguments");else{var Re=ue.name===ge.name&&Ne._dbInfo.db,rt=Re?f.resolve(Ne._dbInfo.db):F(ue).then(function(bt){var Et=b[ue.name],xt=Et.forages;Et.db=bt;for(var Dt=0;Dt<xt.length;Dt++)xt[Dt]._dbInfo.db=bt;return bt});ue.storeName?Be=rt.then(function(bt){if(bt.objectStoreNames.contains(ue.storeName)){var Et=bt.version+1;N(ue);var xt=b[ue.name],Dt=xt.forages;bt.close();for(var qt=0;qt<Dt.length;qt++){var In=Dt[qt];In._dbInfo.db=null,In._dbInfo.version=Et}var un=new f(function(nr,ln){var br=u.open(ue.name,Et);br.onerror=function(Ys){var Qa=br.result;Qa.close(),ln(Ys)},br.onupgradeneeded=function(){var Ys=br.result;Ys.deleteObjectStore(ue.storeName)},br.onsuccess=function(){var Ys=br.result;Ys.close(),nr(Ys)}});return un.then(function(nr){xt.db=nr;for(var ln=0;ln<Dt.length;ln++){var br=Dt[ln];br._dbInfo.db=nr,O(br._dbInfo)}}).catch(function(nr){throw(L(ue,nr)||f.resolve()).catch(function(){}),nr})}}):Be=rt.then(function(bt){N(ue);var Et=b[ue.name],xt=Et.forages;bt.close();for(var Dt=0;Dt<xt.length;Dt++){var qt=xt[Dt];qt._dbInfo.db=null}var In=new f(function(un,nr){var ln=u.deleteDatabase(ue.name);ln.onerror=function(){var br=ln.result;br&&br.close(),nr(ln.error)},ln.onblocked=function(){console.warn('dropInstance blocked for database "'+ue.name+'" until all open connections are closed')},ln.onsuccess=function(){var br=ln.result;br&&br.close(),un(br)}});return In.then(function(un){Et.db=un;for(var nr=0;nr<xt.length;nr++){var ln=xt[nr];O(ln._dbInfo)}}).catch(function(un){throw(L(ue,un)||f.resolve()).catch(function(){}),un})})}return d(Be,Se),Be}var $e={_driver:"asyncStorage",_initStorage:V,_support:l(),iterate:ee,getItem:Y,setItem:ae,removeItem:_e,clear:pe,length:Te,key:Le,keys:ye,dropInstance:he};function De(){return typeof openDatabase=="function"}var tt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",Me=/^~~local_forage_type~([^~]+)~/,Ge="__lfsc__:",at=Ge.length,yt="arbf",Tt="blob",Ot="si08",qe="ui08",dt="uic8",wt="si16",ke="si32",Oe="ur16",ht="ui32",Lt="fl32",Ft="fl64",dn=at+yt.length,Nn=Object.prototype.toString;function Tr(ue){var Se=ue.length*.75,ge=ue.length,Ne,Be=0,Re,rt,bt,Et;ue[ue.length-1]==="="&&(Se--,ue[ue.length-2]==="="&&Se--);var xt=new ArrayBuffer(Se),Dt=new Uint8Array(xt);for(Ne=0;Ne<ge;Ne+=4)Re=tt.indexOf(ue[Ne]),rt=tt.indexOf(ue[Ne+1]),bt=tt.indexOf(ue[Ne+2]),Et=tt.indexOf(ue[Ne+3]),Dt[Be++]=Re<<2|rt>>4,Dt[Be++]=(rt&15)<<4|bt>>2,Dt[Be++]=(bt&3)<<6|Et&63;return xt}function Ni(ue){var Se=new Uint8Array(ue),ge="",Ne;for(Ne=0;Ne<Se.length;Ne+=3)ge+=tt[Se[Ne]>>2],ge+=tt[(Se[Ne]&3)<<4|Se[Ne+1]>>4],ge+=tt[(Se[Ne+1]&15)<<2|Se[Ne+2]>>6],ge+=tt[Se[Ne+2]&63];return Se.length%3===2?ge=ge.substring(0,ge.length-1)+"=":Se.length%3===1&&(ge=ge.substring(0,ge.length-2)+"=="),ge}function Un(ue,Se){var ge="";if(ue&&(ge=Nn.call(ue)),ue&&(ge==="[object ArrayBuffer]"||ue.buffer&&Nn.call(ue.buffer)==="[object ArrayBuffer]")){var Ne,Be=Ge;ue instanceof ArrayBuffer?(Ne=ue,Be+=yt):(Ne=ue.buffer,ge==="[object Int8Array]"?Be+=Ot:ge==="[object Uint8Array]"?Be+=qe:ge==="[object Uint8ClampedArray]"?Be+=dt:ge==="[object Int16Array]"?Be+=wt:ge==="[object Uint16Array]"?Be+=Oe:ge==="[object Int32Array]"?Be+=ke:ge==="[object Uint32Array]"?Be+=ht:ge==="[object Float32Array]"?Be+=Lt:ge==="[object Float64Array]"?Be+=Ft:Se(new Error("Failed to get type for BinaryArray"))),Se(Be+Ni(Ne))}else if(ge==="[object Blob]"){var Re=new FileReader;Re.onload=function(){var rt=it+ue.type+"~"+Ni(this.result);Se(Ge+Tt+rt)},Re.readAsArrayBuffer(ue)}else try{Se(JSON.stringify(ue))}catch(rt){console.error("Couldn't convert value into a JSON string: ",ue),Se(null,rt)}}function tr(ue){if(ue.substring(0,at)!==Ge)return JSON.parse(ue);var Se=ue.substring(dn),ge=ue.substring(at,dn),Ne;if(ge===Tt&&Me.test(Se)){var Be=Se.match(Me);Ne=Be[1],Se=Se.substring(Be[0].length)}var Re=Tr(Se);switch(ge){case yt:return Re;case Tt:return c([Re],{type:Ne});case Ot:return new Int8Array(Re);case qe:return new Uint8Array(Re);case dt:return new Uint8ClampedArray(Re);case wt:return new Int16Array(Re);case Oe:return new Uint16Array(Re);case ke:return new Int32Array(Re);case ht:return new Uint32Array(Re);case Lt:return new Float32Array(Re);case Ft:return new Float64Array(Re);default:throw new Error("Unkown type: "+ge)}}var Ai={serialize:Un,deserialize:tr,stringToBuffer:Tr,bufferToString:Ni};function Sr(ue,Se,ge,Ne){ue.executeSql("CREATE TABLE IF NOT EXISTS "+Se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ge,Ne)}function Lo(ue){var Se=this,ge={db:null};if(ue)for(var Ne in ue)ge[Ne]=typeof ue[Ne]!="string"?ue[Ne].toString():ue[Ne];var Be=new f(function(Re,rt){try{ge.db=openDatabase(ge.name,String(ge.version),ge.description,ge.size)}catch(bt){return rt(bt)}ge.db.transaction(function(bt){Sr(bt,ge,function(){Se._dbInfo=ge,Re()},function(Et,xt){rt(xt)})},rt)});return ge.serializer=Ai,Be}function Ji(ue,Se,ge,Ne,Be,Re){ue.executeSql(ge,Ne,Be,function(rt,bt){bt.code===bt.SYNTAX_ERR?rt.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Se.storeName],function(Et,xt){xt.rows.length?Re(Et,bt):Sr(Et,Se,function(){Et.executeSql(ge,Ne,Be,Re)},Re)},Re):Re(rt,bt)},Re)}function Pi(ue,Se){var ge=this;ue=p(ue);var Ne=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Ji(bt,rt,"SELECT * FROM "+rt.storeName+" WHERE key = ? LIMIT 1",[ue],function(Et,xt){var Dt=xt.rows.length?xt.rows.item(0).value:null;Dt&&(Dt=rt.serializer.deserialize(Dt)),Be(Dt)},function(Et,xt){Re(xt)})})}).catch(Re)});return d(Ne,Se),Ne}function Zi(ue,Se){var ge=this,Ne=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Ji(bt,rt,"SELECT * FROM "+rt.storeName,[],function(Et,xt){for(var Dt=xt.rows,qt=Dt.length,In=0;In<qt;In++){var un=Dt.item(In),nr=un.value;if(nr&&(nr=rt.serializer.deserialize(nr)),nr=ue(nr,un.key,In+1),nr!==void 0){Be(nr);return}}Be()},function(Et,xt){Re(xt)})})}).catch(Re)});return d(Ne,Se),Ne}function Qr(ue,Se,ge,Ne){var Be=this;ue=p(ue);var Re=new f(function(rt,bt){Be.ready().then(function(){Se===void 0&&(Se=null);var Et=Se,xt=Be._dbInfo;xt.serializer.serialize(Se,function(Dt,qt){qt?bt(qt):xt.db.transaction(function(In){Ji(In,xt,"INSERT OR REPLACE INTO "+xt.storeName+" (key, value) VALUES (?, ?)",[ue,Dt],function(){rt(Et)},function(un,nr){bt(nr)})},function(In){if(In.code===In.QUOTA_ERR){if(Ne>0){rt(Qr.apply(Be,[ue,Et,ge,Ne-1]));return}bt(In)}})})}).catch(bt)});return d(Re,ge),Re}function $o(ue,Se,ge){return Qr.apply(this,[ue,Se,ge,1])}function oc(ue,Se){var ge=this;ue=p(ue);var Ne=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Ji(bt,rt,"DELETE FROM "+rt.storeName+" WHERE key = ?",[ue],function(){Be()},function(Et,xt){Re(xt)})})}).catch(Re)});return d(Ne,Se),Ne}function xa(ue){var Se=this,ge=new f(function(Ne,Be){Se.ready().then(function(){var Re=Se._dbInfo;Re.db.transaction(function(rt){Ji(rt,Re,"DELETE FROM "+Re.storeName,[],function(){Ne()},function(bt,Et){Be(Et)})})}).catch(Be)});return d(ge,ue),ge}function Du(ue){var Se=this,ge=new f(function(Ne,Be){Se.ready().then(function(){var Re=Se._dbInfo;Re.db.transaction(function(rt){Ji(rt,Re,"SELECT COUNT(key) as c FROM "+Re.storeName,[],function(bt,Et){var xt=Et.rows.item(0).c;Ne(xt)},function(bt,Et){Be(Et)})})}).catch(Be)});return d(ge,ue),ge}function Jr(ue,Se){var ge=this,Ne=new f(function(Be,Re){ge.ready().then(function(){var rt=ge._dbInfo;rt.db.transaction(function(bt){Ji(bt,rt,"SELECT key FROM "+rt.storeName+" WHERE id = ? LIMIT 1",[ue+1],function(Et,xt){var Dt=xt.rows.length?xt.rows.item(0).key:null;Be(Dt)},function(Et,xt){Re(xt)})})}).catch(Re)});return d(Ne,Se),Ne}function ji(ue){var Se=this,ge=new f(function(Ne,Be){Se.ready().then(function(){var Re=Se._dbInfo;Re.db.transaction(function(rt){Ji(rt,Re,"SELECT key FROM "+Re.storeName,[],function(bt,Et){for(var xt=[],Dt=0;Dt<Et.rows.length;Dt++)xt.push(Et.rows.item(Dt).key);Ne(xt)},function(bt,Et){Be(Et)})})}).catch(Be)});return d(ge,ue),ge}function oi(ue){return new f(function(Se,ge){ue.transaction(function(Ne){Ne.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Be,Re){for(var rt=[],bt=0;bt<Re.rows.length;bt++)rt.push(Re.rows.item(bt).name);Se({db:ue,storeNames:rt})},function(Be,Re){ge(Re)})},function(Ne){ge(Ne)})})}function Ws(ue,Se){Se=m.apply(this,arguments);var ge=this.config();ue=typeof ue!="function"&&ue||{},ue.name||(ue.name=ue.name||ge.name,ue.storeName=ue.storeName||ge.storeName);var Ne=this,Be;return ue.name?Be=new f(function(Re){var rt;ue.name===ge.name?rt=Ne._dbInfo.db:rt=openDatabase(ue.name,"","",0),ue.storeName?Re({db:rt,storeNames:[ue.storeName]}):Re(oi(rt))}).then(function(Re){return new f(function(rt,bt){Re.db.transaction(function(Et){function xt(un){return new f(function(nr,ln){Et.executeSql("DROP TABLE IF EXISTS "+un,[],function(){nr()},function(br,Ys){ln(Ys)})})}for(var Dt=[],qt=0,In=Re.storeNames.length;qt<In;qt++)Dt.push(xt(Re.storeNames[qt]));f.all(Dt).then(function(){rt()}).catch(function(un){bt(un)})},function(Et){bt(Et)})})}):Be=f.reject("Invalid arguments"),d(Be,Se),Be}var Fr={_driver:"webSQLStorage",_initStorage:Lo,_support:De(),iterate:Zi,getItem:Pi,setItem:$o,removeItem:oc,clear:xa,length:Du,key:Jr,keys:ji,dropInstance:Ws};function es(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Fo(ue,Se){var ge=ue.name+"/";return ue.storeName!==Se.storeName&&(ge+=ue.storeName+"/"),ge}function ho(){var ue="_localforage_support_test";try{return localStorage.setItem(ue,!0),localStorage.removeItem(ue),!1}catch{return!0}}function Qo(){return!ho()||localStorage.length>0}function _l(ue){var Se=this,ge={};if(ue)for(var Ne in ue)ge[Ne]=ue[Ne];return ge.keyPrefix=Fo(ue,Se._defaultConfig),Qo()?(Se._dbInfo=ge,ge.serializer=Ai,f.resolve()):f.reject()}function Nh(ue){var Se=this,ge=Se.ready().then(function(){for(var Ne=Se._dbInfo.keyPrefix,Be=localStorage.length-1;Be>=0;Be--){var Re=localStorage.key(Be);Re.indexOf(Ne)===0&&localStorage.removeItem(Re)}});return d(ge,ue),ge}function Pr(ue,Se){var ge=this;ue=p(ue);var Ne=ge.ready().then(function(){var Be=ge._dbInfo,Re=localStorage.getItem(Be.keyPrefix+ue);return Re&&(Re=Be.serializer.deserialize(Re)),Re});return d(Ne,Se),Ne}function ac(ue,Se){var ge=this,Ne=ge.ready().then(function(){for(var Be=ge._dbInfo,Re=Be.keyPrefix,rt=Re.length,bt=localStorage.length,Et=1,xt=0;xt<bt;xt++){var Dt=localStorage.key(xt);if(Dt.indexOf(Re)===0){var qt=localStorage.getItem(Dt);if(qt&&(qt=Be.serializer.deserialize(qt)),qt=ue(qt,Dt.substring(rt),Et++),qt!==void 0)return qt}}});return d(Ne,Se),Ne}function ms(ue,Se){var ge=this,Ne=ge.ready().then(function(){var Be=ge._dbInfo,Re;try{Re=localStorage.key(ue)}catch{Re=null}return Re&&(Re=Re.substring(Be.keyPrefix.length)),Re});return d(Ne,Se),Ne}function Xa(ue){var Se=this,ge=Se.ready().then(function(){for(var Ne=Se._dbInfo,Be=localStorage.length,Re=[],rt=0;rt<Be;rt++){var bt=localStorage.key(rt);bt.indexOf(Ne.keyPrefix)===0&&Re.push(bt.substring(Ne.keyPrefix.length))}return Re});return d(ge,ue),ge}function Jo(ue){var Se=this,ge=Se.keys().then(function(Ne){return Ne.length});return d(ge,ue),ge}function hm(ue,Se){var ge=this;ue=p(ue);var Ne=ge.ready().then(function(){var Be=ge._dbInfo;localStorage.removeItem(Be.keyPrefix+ue)});return d(Ne,Se),Ne}function Ph(ue,Se,ge){var Ne=this;ue=p(ue);var Be=Ne.ready().then(function(){Se===void 0&&(Se=null);var Re=Se;return new f(function(rt,bt){var Et=Ne._dbInfo;Et.serializer.serialize(Se,function(xt,Dt){if(Dt)bt(Dt);else try{localStorage.setItem(Et.keyPrefix+ue,xt),rt(Re)}catch(qt){(qt.name==="QuotaExceededError"||qt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&bt(qt),bt(qt)}})})});return d(Be,ge),Be}function _d(ue,Se){if(Se=m.apply(this,arguments),ue=typeof ue!="function"&&ue||{},!ue.name){var ge=this.config();ue.name=ue.name||ge.name,ue.storeName=ue.storeName||ge.storeName}var Ne=this,Be;return ue.name?Be=new f(function(Re){ue.storeName?Re(Fo(ue,Ne._defaultConfig)):Re(ue.name+"/")}).then(function(Re){for(var rt=localStorage.length-1;rt>=0;rt--){var bt=localStorage.key(rt);bt.indexOf(Re)===0&&localStorage.removeItem(bt)}}):Be=f.reject("Invalid arguments"),d(Be,Se),Be}var wd={_driver:"localStorageWrapper",_initStorage:_l,_support:es(),iterate:ac,getItem:Pr,setItem:Ph,removeItem:hm,clear:Nh,length:Jo,key:ms,keys:Xa,dropInstance:_d},gf=function(Se,ge){return Se===ge||typeof Se=="number"&&typeof ge=="number"&&isNaN(Se)&&isNaN(ge)},yf=function(Se,ge){for(var Ne=Se.length,Be=0;Be<Ne;){if(gf(Se[Be],ge))return!0;Be++}return!1},vf=Array.isArray||function(ue){return Object.prototype.toString.call(ue)==="[object Array]"},fr={},Oh={},po={INDEXEDDB:$e,WEBSQL:Fr,LOCALSTORAGE:wd},wl=[po.INDEXEDDB._driver,po.WEBSQL._driver,po.LOCALSTORAGE._driver],Gs=["dropInstance"],uc=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Gs),Mh={description:"",driver:wl.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function lc(ue,Se){ue[Se]=function(){var ge=arguments;return ue.ready().then(function(){return ue[Se].apply(ue,ge)})}}function mo(){for(var ue=1;ue<arguments.length;ue++){var Se=arguments[ue];if(Se)for(var ge in Se)Se.hasOwnProperty(ge)&&(vf(Se[ge])?arguments[0][ge]=Se[ge].slice():arguments[0][ge]=Se[ge])}return arguments[0]}var pm=function(){function ue(Se){o(this,ue);for(var ge in po)if(po.hasOwnProperty(ge)){var Ne=po[ge],Be=Ne._driver;this[ge]=Be,fr[Be]||this.defineDriver(Ne)}this._defaultConfig=mo({},Mh),this._config=mo({},this._defaultConfig,Se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ue.prototype.config=function(ge){if((typeof ge>"u"?"undefined":s(ge))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var Ne in ge){if(Ne==="storeName"&&(ge[Ne]=ge[Ne].replace(/\W/g,"_")),Ne==="version"&&typeof ge[Ne]!="number")return new Error("Database version must be a number.");this._config[Ne]=ge[Ne]}return"driver"in ge&&ge.driver?this.setDriver(this._config.driver):!0}else return typeof ge=="string"?this._config[ge]:this._config},ue.prototype.defineDriver=function(ge,Ne,Be){var Re=new f(function(rt,bt){try{var Et=ge._driver,xt=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ge._driver){bt(xt);return}for(var Dt=uc.concat("_initStorage"),qt=0,In=Dt.length;qt<In;qt++){var un=Dt[qt],nr=!yf(Gs,un);if((nr||ge[un])&&typeof ge[un]!="function"){bt(xt);return}}var ln=function(){for(var Qa=function(Bo){return function(){var gs=new Error("Method "+Bo+" is not implemented by the current driver"),jo=f.reject(gs);return d(jo,arguments[arguments.length-1]),jo}},cc=0,Lh=Gs.length;cc<Lh;cc++){var bf=Gs[cc];ge[bf]||(ge[bf]=Qa(bf))}};ln();var br=function(Qa){fr[Et]&&console.info("Redefining LocalForage driver: "+Et),fr[Et]=ge,Oh[Et]=Qa,rt()};"_support"in ge?ge._support&&typeof ge._support=="function"?ge._support().then(br,bt):br(!!ge._support):br(!0)}catch(Ys){bt(Ys)}});return h(Re,Ne,Be),Re},ue.prototype.driver=function(){return this._driver||null},ue.prototype.getDriver=function(ge,Ne,Be){var Re=fr[ge]?f.resolve(fr[ge]):f.reject(new Error("Driver not found."));return h(Re,Ne,Be),Re},ue.prototype.getSerializer=function(ge){var Ne=f.resolve(Ai);return h(Ne,ge),Ne},ue.prototype.ready=function(ge){var Ne=this,Be=Ne._driverSet.then(function(){return Ne._ready===null&&(Ne._ready=Ne._initDriver()),Ne._ready});return h(Be,ge,ge),Be},ue.prototype.setDriver=function(ge,Ne,Be){var Re=this;vf(ge)||(ge=[ge]);var rt=this._getSupportedDrivers(ge);function bt(){Re._config.driver=Re.driver()}function Et(qt){return Re._extend(qt),bt(),Re._ready=Re._initStorage(Re._config),Re._ready}function xt(qt){return function(){var In=0;function un(){for(;In<qt.length;){var nr=qt[In];return In++,Re._dbInfo=null,Re._ready=null,Re.getDriver(nr).then(Et).catch(un)}bt();var ln=new Error("No available storage method found.");return Re._driverSet=f.reject(ln),Re._driverSet}return un()}}var Dt=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=Dt.then(function(){var qt=rt[0];return Re._dbInfo=null,Re._ready=null,Re.getDriver(qt).then(function(In){Re._driver=In._driver,bt(),Re._wrapLibraryMethodsWithReady(),Re._initDriver=xt(rt)})}).catch(function(){bt();var qt=new Error("No available storage method found.");return Re._driverSet=f.reject(qt),Re._driverSet}),h(this._driverSet,Ne,Be),this._driverSet},ue.prototype.supports=function(ge){return!!Oh[ge]},ue.prototype._extend=function(ge){mo(this,ge)},ue.prototype._getSupportedDrivers=function(ge){for(var Ne=[],Be=0,Re=ge.length;Be<Re;Be++){var rt=ge[Be];this.supports(rt)&&Ne.push(rt)}return Ne},ue.prototype._wrapLibraryMethodsWithReady=function(){for(var ge=0,Ne=uc.length;ge<Ne;ge++)lc(this,uc[ge])},ue.prototype.createInstance=function(ge){return new ue(ge)},ue}(),go=new pm;r.exports=go},{3:3}]},{},[4])(4)})}(Uq)),Uq.exports}var lan=uan();const g2=yh(lan),lu=[];for(let e=0;e<256;++e)lu.push((e+256).toString(16).slice(1));function can(e,t=0){return(lu[e[t+0]]+lu[e[t+1]]+lu[e[t+2]]+lu[e[t+3]]+"-"+lu[e[t+4]]+lu[e[t+5]]+"-"+lu[e[t+6]]+lu[e[t+7]]+"-"+lu[e[t+8]]+lu[e[t+9]]+"-"+lu[e[t+10]]+lu[e[t+11]]+lu[e[t+12]]+lu[e[t+13]]+lu[e[t+14]]+lu[e[t+15]]).toLowerCase()}let zq;const fan=new Uint8Array(16);function dan(){if(!zq){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");zq=crypto.getRandomValues.bind(crypto)}return zq(fan)}const han=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),jxe={randomUUID:han};function V8(e,t,n){var i;if(jxe.randomUUID&&!e)return jxe.randomUUID();e=e||{};const r=e.random??((i=e.rng)==null?void 0:i.call(e))??dan();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,can(r)}class D9e{constructor(t){Rl(this,"engine");Rl(this,"connected",!1);Rl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function H8(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function $R(e){return e.participantId!==void 0}class gp extends D9e{constructor(){super("firebase");Rl(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");Rl(this,"firestore");Rl(this,"collectionPrefix","prod-");Rl(this,"studyCollection");Rl(this,"storage");Rl(this,"studyId","");Rl(this,"localForage",g2.createInstance({name:"currentParticipantId"}));Rl(this,"participantData",null);Rl(this,"userManagementData",{});const n=Xtn.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=Q5e(n);this.firestore=uon(r,{}),this.storage=jbe();try{ian(r,{provider:new nue(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await con(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=O8();if(!i.currentUser&&(await Aen(i),!i.currentUser))throw new Error("Login failed with firebase");this.studyCollection=Nc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n;const s=await this.getCurrentConfigHash(),o=await H8(JSON.stringify(r));if(await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this._setCurrentConfigHash(o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if($R(a))return this.participantData=a,a;const l=await H8(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence();return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=bs(this.studyCollection,"configHash"),r=await BM(n);return r.exists()?r.data().configHash:null}async _setCurrentConfigHash(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=bs(this.studyCollection,"configHash");await Gu(r,{configHash:n})}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Bf(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=V8(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAudio(n,r){let i=null;const s=async o=>{i||(i=setTimeout(async()=>{this._pushToFirebaseStorage(`/audio/${this.currentParticipantId}`,r,o.data)},500))};n.addEventListener("dataavailable",s),n.requestData()}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=bs(this.studyCollection,"sequenceAssignment");await Gu(i,{});const s=Nc(i,"sequenceAssignment"),o=bs(s,this.currentParticipantId),a=Fq(s,Axe("rejected","==",!0),Axe("claimed","==",!1)),u=await e2(a);if(u.docs.length>0){const v=u.docs[0],b=v.data().timestamp;r.dataCollectionEnabled&&(await Gu(v.ref,{claimed:!0}),await Gu(o,{participantId:this.currentParticipantId,timestamp:b,rejected:!1,claimed:!1,completed:null,createdTime:jM()}))}else r.dataCollectionEnabled&&await Gu(o,{participantId:this.currentParticipantId,timestamp:jM(),rejected:!1,claimed:!1,completed:null,createdTime:jM()});const l=Fq(s,Ixe("timestamp","asc")),f=(await e2(l)).docs.map(v=>v.data()),d=f.filter(v=>!v.rejected).findIndex(v=>v.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");const g=f.sort((v,b)=>v.createdTime-b.createdTime).findIndex(v=>v.participantId===this.currentParticipantId)+1;return{currentRow:p,creationIndex:g}}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Bf(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await LR(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");$R(a)&&i.push(a)});return await Promise.all(s),i}async getAudio(n,r){const i=jbe(),s=await PM(Bf(i,`${this.collectionPrefix}${this.studyId}/audio/${r}_${n}`));return new Promise(a=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const l=u.response,c=URL.createObjectURL(l);a(c)},u.open("GET",s),u.send()})}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null&&!n)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return $R(r)?r:null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=V8();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);if(this.participantData.completed)return!0;this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData);const r=bs(this.studyCollection,"sequenceAssignment"),i=Nc(r,"sequenceAssignment"),s=bs(i,this.currentParticipantId);return await Dxe(s,{completed:jM()}),!0}async getUserManagementData(n){if(Object.keys(this.userManagementData).length===0){const r=Nc(this.firestore,"user-management"),i=await e2(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));this.userManagementData=s}return n in this.userManagementData?this.userManagementData[n]:null}async validateUser(n,r=!1){if(r&&(this.userManagementData={}),n!=null&&n.user){const i=await this.getUserManagementData("authentication");if(i!=null&&i.isEnabled){const s=await this.getUserManagementData("adminUsers");if(s&&s.adminUsersList){const o=Object.fromEntries(s.adminUsersList.map(u=>[u.email,u.uid]));if(n.user.email&&(o[n.user.email]===n.user.uid||o[n.user.email]===null)){if(n.user.email&&o[n.user.email]===null){const u=s.adminUsersList.find(l=>l.email===n.user.email);u&&(u.uid=n.user.uid),await Gu(bs(this.firestore,"user-management","adminUsers"),{adminUsersList:s.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Gu(bs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Gu(bs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Gu(bs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Gu(bs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Bf(this.storage,`${this.collectionPrefix}${n}/participants`),i=await LR(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");$R(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r,i){const s=Nc(this.firestore,`${this.collectionPrefix}${n}`),o=Bf(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),a=await this._getFromFirebaseStorageByRef(o,"participantData");try{if(!a||!$R(a)||a.rejected)return;a.rejected={reason:i,timestamp:new Date().getTime()},await this._pushToFirebaseStorageByRef(o,"participantData",a);const u=bs(s,"sequenceAssignment"),l=Nc(u,"sequenceAssignment"),c=bs(l,r);await Dxe(c,{rejected:!0})}catch{console.warn("Failed to reject the participant.")}}async rejectCurrentParticipant(n,r){if(!this.currentParticipantId)throw new Error("Participant not initialized");return await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){const s=bs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Gu(s,{[r]:i},{merge:!0})}async getModes(n){const r=bs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await BM(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Gu(r,s),s}async getParticipantsStatusCounts(n){const r=Nc(this.firestore,`${this.collectionPrefix}${n}`),i=bs(r,"sequenceAssignment"),s=Nc(i,"sequenceAssignment"),o=Fq(s,Ixe("timestamp","asc")),u=(await e2(o)).docs.map(p=>p.data()),l=u.filter(p=>p.completed&&!p.rejected).length,c=u.filter(p=>p.rejected).length,f=u.length-l-c,d=u.length>0?u[0].timestamp:null,h=u.length>0?u.at(-1).timestamp:null;return{completed:l,rejected:c,inProgress:f,minTime:d,maxTime:h}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=bs(this.firestore,"metadata","collections"),i=await BM(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=bs(this.firestore,"metadata","collections");await Gu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=bs(this.firestore,"metadata","collections");return await Gu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=bs(this.firestore,"metadata","collections"),i=await BM(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Gu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Bf(this.storage,n),s=(await LR(r)).items.map(o=>Bbe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Bf(this.storage,n),o=(await LR(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Bf(this.storage,n),s=Bf(this.storage,r),o=await PM(i),u=await(await fetch(o)).blob();await NM(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Nc(this.firestore,n),s=bs(i,"sequenceAssignment"),o=Nc(s,"sequenceAssignment"),a=Nc(this.firestore,r),u=bs(a,"sequenceAssignment");await Gu(u,{});const l=Nc(u,"sequenceAssignment"),c=await e2(o),f=Nxe(this.firestore);c.docs.forEach(d=>{const h=bs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Nc(this.firestore,n),i=bs(r,"sequenceAssignment"),s=Nc(i,"sequenceAssignment"),o=await e2(s),a=Nxe(this.firestore);o.forEach(u=>{const l=bs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Bf(this.storage,n);return(await LR(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Bf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await PM(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await PM(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){const s=Bf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);if(i instanceof Blob)await NM(s,i);else if(Object.keys(i).length>0){const o=new Blob([JSON.stringify(i)],{type:"application/json"});await NM(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await NM(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Bf(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Bbe(i)}}const N9e=P.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),IO=()=>P.useContext(N9e);function pan({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=P.useState(t),[o,a]=P.useState(!1),{storageEngine:u}=Oo(),l=async()=>{const h=O8();try{await Oen(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h,!0):!1;P.useEffect(()=>{s(t);let h;if(u instanceof gp)try{h=O8()}catch{console.warn("No firebase store.")}const p=async v=>{if(s(b=>({user:b.user,isAdmin:b.isAdmin,determiningStatus:!0,adminVerification:!1})),v){const b={user:v,determiningStatus:!1,isAdmin:!1,adminVerification:!0},w=await f(b);b.isAdmin=!!w,s(b)}else l()},g=(async()=>{if(u instanceof gp){const v=await(u==null?void 0:u.getUserManagementData("authentication"));if(v!=null&&v.isEnabled){const b=Pen(h,async w=>await p(w));return()=>b()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(v=>v())}},[u,o]);const d=P.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return S.jsx(N9e.Provider,{value:d,children:i.determiningStatus?S.jsx(ld,{visible:!0}):e})}function man({cellData:e}){return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?S.jsx(En.Td,{children:S.jsx(uo,{miw:100,children:e.timedOut?S.jsx(lt,{children:"Timed out"}):Object.entries(e.answer).map(([t,n])=>S.jsxs(je,{children:[S.jsxs(lt,{fw:700,span:!0,children:[" ",`${t}: `]}),typeof n=="object"?S.jsx(lt,{size:"xs",component:"pre",span:!0,children:`${JSON.stringify(n,null,2)}`}):S.jsx(lt,{span:!0,children:n})]},`cell-${t}`))})}):S.jsx(En.Td,{children:"N/A"})}function Uxe({cellData:e}){const t=(e.endTime-e.startTime)/1e3,n=nPe(e);return Number.isFinite(e.endTime)&&Number.isFinite(e.startTime)?S.jsxs(En.Td,{children:[t.toFixed(1)," ","s",n&&S.jsxs(S.Fragment,{children:[S.jsx("br",{})," ","(",(n/1e3).toFixed(1)," ","s)"]})]}):S.jsx(En.Td,{children:"N/A"})}function gan(e){const{metaData:t}=e;return S.jsx(En.Td,{children:S.jsx(EJ,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:S.jsxs(uo,{gap:"xs",children:[S.jsxs(je,{children:["IP:"," ",t.ip]}),S.jsxs(je,{children:["Language:"," ",t.language]}),S.jsxs(je,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),S.jsxs(je,{children:["User Agent:"," ",t.userAgent]})]})})})}function yan({visibleParticipants:e,studyConfig:t,refresh:n}){const{storageEngine:r}=Oo(),{studyId:i}=L0(),{user:s}=IO(),o=async(E,T)=>{if(r&&i)if(s.isAdmin){const C=T===""?"Rejected by admin":T;await r.rejectParticipant(i,E,C),await n()}else console.warn("You are not authorized to perform this action.")},[a,u]=P.useState([]),[l,c]=P.useState(!1),[f,d]=P.useState(!1),[h,p]=P.useState(""),m=async()=>{c(!0),d(!1);const E=a.map(async T=>await o(T,h));await Promise.all(E),u([]),await n(),c(!1)};function g(E){E==="all"?a.length===e.length?u([]):u(e.map(T=>T.participantId)):a.includes(E)?u(a.filter(T=>T!==E)):u([...a,E])}const v=s2e(t.sequence),b=[S.jsx(En.Th,{children:S.jsx(an,{justify:"center",children:S.jsx(sl,{mb:-4,checked:a.length===e.length,onChange:()=>g("all")})})},"action"),S.jsx(En.Th,{children:"ID"},"ID"),S.jsx(En.Th,{children:"Status"},"status"),S.jsx(En.Th,{children:"Tags"},"tags"),S.jsx(En.Th,{children:"Meta"},"meta"),...v.flatMap(E=>[S.jsx(En.Th,{children:E.componentName},`header-${E.componentName}-${E.timesSeenInBlock}`),S.jsxs(En.Th,{children:[S.jsx("span",{style:{whiteSpace:"nowrap"},children:E.componentName})," ","Duration (clean)"]},`header-${E.componentName}-${E.timesSeenInBlock}-duration`)]),S.jsx(En.Th,{children:"Total Duration (clean)"},"total-duration")],w=e.map(E=>S.jsxs(En.Tr,{children:[S.jsx(En.Td,{children:S.jsx(an,{justify:"center",children:S.jsx(sl,{mb:-4,checked:a.includes(E.participantId),onChange:()=>g(E.participantId)})})}),S.jsx(En.Td,{style:{whiteSpace:"nowrap"},children:E.participantId}),S.jsx(En.Td,{children:S.jsxs(an,{direction:"column",miw:100,children:[S.jsxs(an,{direction:"row",align:"center",children:[E.rejected?S.jsx(ss,{label:"Rejected",children:S.jsx(QP,{size:16,color:"red",style:{marginBottom:-3}})}):E.completed?S.jsx(ss,{label:"Completed",children:S.jsx(kB,{size:16,color:"teal",style:{marginBottom:-3}})}):S.jsx(ss,{label:"In Progress",children:S.jsx(dTe,{size:16,color:"orange",style:{marginBottom:-3}})}),!E.completed&&S.jsxs(lt,{size:"sm",mb:-1,ml:4,children:[(Object.entries(E.answers).filter(([T,C])=>C.endTime!==-1&&C.endTime!==void 0).length/(jp(E.sequence).length-1)*100).toFixed(2),"%"]})]}),E.rejected&&S.jsx(lt,{mt:5,fz:10,children:E.rejected.reason})]})}),S.jsx(En.Td,{children:S.jsx(an,{direction:"column",miw:100,children:(E.participantTags||[]).map(T=>S.jsxs(lt,{fz:10,children:["-"," ",T]},`tag-${T}`))})}),E.metadata?S.jsx(gan,{metaData:E.metadata}):S.jsx(En.Td,{children:"N/A"}),v.map(T=>{const C=pZ(E.sequence,T.orderPath),I=C&&Object.entries(E.answers).sort((R,N)=>{const O=parseInt(R[0].slice(R[0].lastIndexOf("_")+1),10),L=parseInt(N[0].slice(N[0].lastIndexOf("_")+1),10);return O-L}).filter(([R])=>{const N=R.slice(0,R.lastIndexOf("_")),O=parseInt(R.slice(R.lastIndexOf("_")+1),10);return N===T.componentName&&O<=C[0].lastIndex&&O>=C[0].firstIndex});return I!==null&&I.length>=T.timesSeenInBlock+1&&I[T.timesSeenInBlock][1].endTime!==-1?S.jsxs(ci.Fragment,{children:[S.jsx(man,{cellData:I[T.timesSeenInBlock][1]}),S.jsx(Uxe,{cellData:I[T.timesSeenInBlock][1]})]},`cellgroup-${E.participantId}-${T.componentName}-${T.timesSeenInBlock}`):S.jsxs(ci.Fragment,{children:[S.jsx(En.Td,{children:"N/A"}),S.jsx(En.Td,{children:"N/A"})]},`cellgroup-${E.participantId}-${T.componentName}-${T.timesSeenInBlock}`)}),S.jsx(Uxe,{cellData:{startTime:Math.min(...Object.values(E.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.startTime)),endTime:Math.max(...Object.values(E.answers).filter(T=>T.endTime!==-1&&T.endTime!==void 0).map(T=>T.endTime)),answer:{},helpButtonClickedCount:0,incorrectAnswers:{},windowEvents:Object.values(E.answers).flatMap(T=>T.windowEvents),timedOut:!1}},`cell-${E.participantId}-total-duration`)]},E.participantId));return e.length>0?S.jsxs(S.Fragment,{children:[S.jsx(ld,{visible:l,overlayProps:{blur:2}}),S.jsxs(an,{justify:"space-between",mb:8,p:8,children:[S.jsx(Yr,{children:S.jsx(OA,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...new Set(e.map(E=>E.participantId))],searchable:!0,value:null,leftSection:S.jsx(tet,{size:14}),onChange:E=>E&&g(E)})}),S.jsxs(Yr,{children:[S.jsx(z5e,{visibleParticipants:e,studyId:i||""}),S.jsxs(yn,{disabled:a.length===0||!s.isAdmin,onClick:()=>d(!0),color:"red",children:["Reject Participants (",a.length,")"]})]})]}),S.jsx(an,{direction:"column",style:{width:"100%",overflow:"auto"},children:S.jsxs(En,{striped:!0,withTableBorder:!0,children:[S.jsx(En.Thead,{children:S.jsx(En.Tr,{children:b})}),S.jsx(En.Tbody,{children:w})]})}),S.jsxs(Vs,{opened:f,onClose:()=>d(!1),title:S.jsxs(lt,{children:["Reject Participants (",a.length,")"]}),children:[S.jsx(Ey,{label:"Please enter the reason for rejection.",onChange:E=>p(E.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{d(!1),p("")},children:"Cancel"}),S.jsx(yn,{color:"red",onClick:()=>m(),children:"Reject Participants"})]})]})]}):S.jsxs(S.Fragment,{children:[S.jsx(rd,{h:"xl"}),S.jsx(an,{justify:"center",align:"center",children:S.jsx(lt,{children:"No data available"})})]})}function van({studyId:e,refresh:t}){const[n,r]=P.useState(!1),[i,s]=P.useState(!1),[o,a]=P.useState(!1),[u,l]=P.useState(!1),[c,f]=P.useState(""),[d,h]=P.useState([]),[p,m]=P.useState(""),[g,v]=P.useState(""),[b,w]=P.useState(!1),[E,T]=P.useState(!1),{storageEngine:C}=Oo(),I=C,R=P.useCallback(async()=>{T(!0);const q=await I.getSnapshots(e);h(q),T(!1)},[I,e]);P.useEffect(()=>{R()},[R]);const N=async(q,...U)=>{w(!0);const G=await q(...U);G.status==="SUCCESS"?(R(),w(!1),await t(),G.notifications&&G.notifications.forEach(V=>{tP(V)})):(w(!1),tP({title:G.error.title,message:G.error.message,color:"red"}))},O=async()=>{await N(I.createSnapshot.bind(I),e,!1)},L=async()=>{m(""),r(!1),await N(I.createSnapshot.bind(I),e,!0)},B=async()=>{a(!1),await N(I.renameSnapshot.bind(I),c,g)},F=async q=>{await N(I.restoreSnapshot.bind(I),e,q)},H=async()=>{m(""),s(!1),await N(I.removeSnapshotOrLive.bind(I),c,!0)},Q=async()=>{m(""),l(!1),await N(I.removeSnapshotOrLive.bind(I),e,!0)},J=()=>Xle({title:"Create a Snapshot",children:S.jsx(lt,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>O()}),ne=q=>Xle({title:"Restore Snapshot",children:S.jsx(lt,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>F(q)}),Z=q=>{const U=/-snapshot-(.+)$/,G=q.match(U);return G&&G[1]?G[1].replace("T"," "):null},ie=async q=>{const U=q.slice(q.indexOf("-")+1);return await I.getAllParticipantsDataByStudy(U)};return S.jsxs(S.Fragment,{children:[S.jsx(ld,{visible:b}),S.jsxs(an,{justify:"space-between",align:"center",children:[S.jsxs(je,{style:{width:"70%"},children:[S.jsx(oo,{order:5,children:"Create a Snapshot"}),S.jsxs(lt,{children:["This will create a snapshot of the live"," ",S.jsx(lt,{span:!0,fw:700,children:e})," ","database. It will"," ",S.jsx(lt,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),S.jsx(ss,{label:"Create a snapshot",children:S.jsx(yn,{onClick:J,children:"Snapshot"})})]}),S.jsx(rd,{h:"lg"}),S.jsxs(an,{justify:"space-between",align:"center",children:[S.jsxs(je,{style:{width:"70%"},children:[S.jsx(oo,{order:5,children:"Archive Data"}),S.jsxs(lt,{children:["This will create a snapshot of the live"," ",S.jsx(lt,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),S.jsx(ss,{label:"Snapshot and Delete Data",children:S.jsx(yn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),S.jsx(rd,{h:"lg"}),S.jsxs(an,{justify:"space-between",align:"center",children:[S.jsxs(je,{style:{width:"70%"},children:[S.jsx(oo,{order:5,children:"Delete Data"}),S.jsxs(lt,{children:["This will delete the live"," ",S.jsx(lt,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),S.jsx(ss,{label:"Delete Data",children:S.jsx(yn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),S.jsx(rd,{h:"xl"}),S.jsxs(an,{direction:"column",children:[S.jsx(an,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:S.jsx(oo,{order:5,children:"Snapshots"})}),S.jsxs(je,{style:{position:"relative"},children:[S.jsx(ld,{visible:E}),d.length>0?S.jsxs(En,{children:[S.jsx(En.Thead,{children:S.jsxs(En.Tr,{children:[S.jsx(En.Th,{children:"Snapshot Name"}),S.jsx(En.Th,{children:"Date Created"}),S.jsx(En.Th,{children:"Actions"})]})}),S.jsx(En.Tbody,{children:d.map(q=>S.jsxs(En.Tr,{children:[S.jsx(En.Td,{children:q.alternateName}),S.jsx(En.Td,{children:Z(q.originalName)}),S.jsx(En.Td,{children:S.jsxs(an,{children:[S.jsx(ss,{label:"Rename",children:S.jsx(yn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(q.originalName)},children:S.jsx(XZe,{})})}),S.jsx(ss,{label:"Restore Snapshot",children:S.jsx(yn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{ne(q.originalName)},children:S.jsx(ZZe,{})})}),S.jsx(ss,{label:"Delete Snapshot",children:S.jsx(yn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(q.originalName)},children:S.jsx(mTe,{})})}),S.jsx(z5e,{visibleParticipants:()=>ie(q.originalName),studyId:e,gap:"10px",fileName:q.alternateName})]})})]},q.originalName))})]}):S.jsx(lt,{children:"No snapshots."})]})]}),S.jsxs(Vs,{opened:n,onClose:()=>{r(!1),m("")},title:S.jsx(lt,{children:"Archive Data"}),children:[S.jsx(lt,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),S.jsx(Ey,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:q=>m(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),S.jsx(yn,{color:"red",onClick:L,disabled:p!==e,children:"Archive"})]})]}),S.jsxs(Vs,{opened:i,onClose:()=>{s(!1),m("")},title:S.jsx(lt,{children:"Delete Snapshot"}),children:[S.jsxs(lt,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",S.jsx(lt,{span:!0,fw:700,children:"irreversible"}),"."]}),S.jsx(Ey,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:q=>m(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),S.jsx(yn,{color:"red",onClick:H,disabled:p!==e,children:"Delete"})]})]}),S.jsxs(Vs,{opened:o,onClose:()=>{a(!1),v("")},title:S.jsx(lt,{children:"Rename Snapshot"}),children:[S.jsx(Ey,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:q=>v(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),v("")},children:"Cancel"}),S.jsx(yn,{color:"green",onClick:B,disabled:!g||g.length===0,children:"Rename"})]})]}),S.jsxs(Vs,{opened:u,onClose:()=>{l(!1),m("")},title:S.jsx(lt,{children:"Delete Live Data"}),children:[S.jsxs(lt,{mb:"sm",children:["This will permanently delete the live"," ",S.jsx(lt,{span:!0,fw:700,children:e})," ","data. This action is"," ",S.jsx(lt,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),S.jsx(Ey,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:q=>m(q.target.value)}),S.jsxs(an,{mt:"sm",justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),S.jsx(yn,{color:"red",onClick:Q,disabled:p!==e,children:"Delete"})]})]})]})}function ban({studyId:e}){const{storageEngine:t}=Oo(),[n,r]=P.useState(!1),[i,s]=P.useState(!1),[o,a]=P.useState(!1),[u,l]=P.useState(!1);P.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&S.jsxs(uo,{children:[S.jsx(Ow,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),S.jsx(Ow,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),S.jsx(Ow,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function xan({studyId:e,refresh:t}){const{storageEngine:n}=Oo();return S.jsx(Xy,{children:S.jsxs(Ju,{multiple:!0,variant:"contained",children:[S.jsxs(Ju.Item,{value:"ReVISit Modes",children:[S.jsx(Ju.Control,{children:S.jsx(oo,{order:5,children:"ReVISit Modes"})}),S.jsx(Ju.Panel,{children:S.jsx(ban,{studyId:e})})]},"modes"),S.jsxs(Ju.Item,{value:"Data Management",children:[S.jsx(Ju.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:S.jsx(oo,{order:5,children:"Data Management"})}),S.jsx(Ju.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&S.jsx(van,{studyId:e,refresh:t})})]},"dataManagement")]})})}function _an({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=zX(!0),[o,a]=td(),u=P.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=P.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=P.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.filter(([g,v])=>v.endTime!==-1).map(([g,v])=>(v.endTime-v.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return S.jsxs(wA,{p:"lg",withBorder:!0,ref:o,children:[S.jsxs(an,{direction:"row",justify:"space-between",onClick:s,children:[S.jsxs(an,{align:"center",children:[e.type==="metadata"&&S.jsx(jZe,{size:20}),e.type==="numerical"&&S.jsx(YZe,{size:20}),(e.type==="shortText"||e.type==="longText")&&S.jsx($Ze,{size:20}),e.type==="likert"&&S.jsx(VZe,{size:20}),e.type==="dropdown"&&S.jsx(net,{size:20}),e.type==="slider"&&S.jsx(DZe,{size:20}),e.type==="radio"&&S.jsx(JZe,{size:20}),e.type==="checkbox"&&S.jsx(ret,{size:20}),e.type==="reactive"&&S.jsx(qZe,{size:20}),S.jsx(oo,{order:5,ml:4,children:e.id})]}),S.jsx(BZe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),S.jsxs(J8,{in:i,mah:400,children:[S.jsx(je,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:S.jsx(NE,{})}),S.jsxs(xJ,{cols:2,h:360,children:[S.jsx(Yy,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="reactive"?S.jsx(k1e,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):S.jsxs(an,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&S.jsx(DD,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&S.jsxs(S.Fragment,{children:[S.jsx(lt,{fw:700,children:"Response Values: "}),u.map((f,d)=>S.jsx(an,{align:"center",gap:"xs",children:S.jsx(lt,{children:f[e.id]})},d))]})]})}),S.jsx(Yy,{mih:200,children:e.type==="metadata"?S.jsx(k1e,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):S.jsxs(S.Fragment,{children:[S.jsx(lt,{fw:700,children:"Response Specification: "}),S.jsx(DD,{block:!0,children:JSON.stringify(e,null,2)}),S.jsx("br",{}),l&&S.jsxs(S.Fragment,{children:[S.jsx(lt,{fw:700,children:"Correct Answer: "}),S.jsx(DD,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function wan({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&I5e(t.components[n],t),i=P.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?S.jsx(an,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>S.jsx(_an,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):S.jsx(an,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:S.jsx(lt,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function Ean({studyConfig:e,visibleParticipants:t}){const n=P.useMemo(()=>{let i=$y(e.sequence);return i=mZ(i,"root"),i.components.push("end"),i},[e.sequence]),{trialId:r}=L0();return S.jsx(wA,{shadow:"sm",p:"md",withBorder:!0,children:t.length===0?S.jsx(an,{justify:"center",align:"center",pt:"lg",pb:"md",children:S.jsx(lt,{children:"No data available."})}):S.jsxs(an,{direction:"row",children:[S.jsx(je,{w:340,children:S.jsx(T8,{configSequence:n,participantSequence:n,fullSequence:n,participantView:!1,studyConfig:e,analysisNavigation:!0})}),S.jsx(NE,{orientation:"vertical",mx:"md"}),S.jsx(wan,{participantData:t,studyConfig:e,trialId:r})]})})}function Tan({xScale:e,answer:t,height:n,labelHeight:r=0}){return S.jsx("g",{children:S.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const VM=3,t2=25,HM=25,qM=20,zxe=1,Vq=15;function San({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0,isCorrect:a,hasCorrect:u}){const[l,c]=P.useState(!1),[f,{width:d}]=td();return S.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),style:{cursor:"pointer"},children:[S.jsx("rect",{opacity:1,fill:l||s?"cornflowerblue":"lightgray",x:e(t.startTime)+zxe,width:e(t.endTime)-e(t.startTime)-zxe*2,y:r-t2,height:t2}),S.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-VM,width:d+VM*2+(u?Vq:0),y:r-t2-HM-o,height:qM,fill:"whitesmoke"}),S.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-VM,x2:d+e(t.startTime)+VM+(u?Vq:0),y1:r-t2-HM+qM-o,y2:r-t2-HM+qM-o}),S.jsx("foreignObject",{x:e(t.startTime),width:d+(u?Vq:0),y:r-t2-HM-o,height:qM,children:S.jsx(ga,{style:{width:"fit-content"},children:S.jsxs(Yr,{wrap:"nowrap",gap:2,children:[S.jsx(lt,{lineClamp:1,ref:f,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n}),u?a?S.jsx(kB,{color:"var(--mantine-color-green-6)",style:{marginTop:2,strokeWidth:4},size:"14"}):S.jsx(QP,{color:"var(--mantine-color-red-6)",style:{marginTop:2,strokeWidth:4},size:14}):""]})})})]})}const Vxe=25,Can=8,Hq={left:20,top:0,right:20,bottom:0};function Aan({participantData:e,width:t,height:n,selectedTask:r,studyId:i,studyConfig:s,maxLength:o}){const a=P.useCallback(g=>{const v=g.split("_"),b=+v[v.length-1];window.open(`${qa}${i}/${vp(b)}?participantId=${e.participantId}`,"_blank")},[e.participantId,i]),u=P.useMemo(()=>{const g=Object.values(e.answers||{}).filter(w=>w.startTime).map(w=>[w.startTime,w.endTime]).flat(),v=CN(g);return ef([Hq.left,t-Hq.left-Hq.right]).domain([v[0],o?v[0]+o:v[1]]).clamp(!0)},[o,e.answers,t]),[l,c,f]=P.useMemo(()=>{let g=0;const v=Object.entries(e.answers||{}).filter(T=>!!T[1].startTime).sort((T,C)=>T[1].startTime-C[1].startTime);let b=0,w=0;const E=v.map((T,C)=>{const[I,R]=T,N=C>0?v[C-g-1]:null;N&&N[0].length*(Can+1)+u(N[1].startTime)>u(R.startTime)?g+=1:g=0;const O=I.split("_"),L=O.slice(0,O.length-1).join("_"),B=s==null?void 0:s.components[L];let F=!0,H=!1;return B&&B.correctAnswer?(B.correctAnswer.forEach(Q=>{const{id:J,answer:ne}=Q;(!B||!B.correctAnswer||R.answer[J]!==ne)&&(F=!1)}),H=!0):H=!1,H&&(w+=1,F&&(b+=1)),{line:S.jsx(Tan,{labelHeight:g*Vxe,answer:R,height:n,xScale:u},I),label:S.jsx(ss,{withinPortal:!0,position:"bottom-start",px:4,py:0,withArrow:!0,label:S.jsx(uo,{gap:0,children:Object.entries(R.answer).map(Q=>{var ie,q;const[J,ne]=Q,Z=(q=(ie=B==null?void 0:B.correctAnswer)==null?void 0:ie.find(U=>U.id===J))==null?void 0:q.answer;return S.jsx(lt,{children:`${J}: ${ne} ${Z?`[${Z}]`:""}`},J)})}),children:S.jsx("g",{children:S.jsx(San,{isCorrect:F,hasCorrect:H,labelHeight:g*Vxe,isSelected:r===I,setSelectedTask:a,answer:R,height:n,name:I,xScale:u},I)})})}});return[b,w,E]},[e.answers,u,s==null?void 0:s.components,n,r,a]),d=P.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const g=Object.values(e.answers).filter(v=>v.startTime).sort((v,b)=>v.startTime-b.startTime);return new Date(g[g.length-1].endTime-(g[0]?g[0].startTime:0)).getTime()},[e]),h=P.useMemo(()=>Object.entries(e.answers||{}).sort((v,b)=>v[1].startTime-b[1].startTime).map(v=>{const[b,w]=v,E=[];let T=[-1,-1],C="visible";if(w.windowEvents)for(let I=0;I<w.windowEvents.length;I+=1)w.windowEvents[I][1]==="visibility"&&(w.windowEvents[I][2]==="hidden"&&C==="visible"?(T=[w.windowEvents[I][0],-1],C="hidden"):w.windowEvents[I][2]==="visible"&&C==="hidden"&&(T[1]=w.windowEvents[I][0],E.push(T),T=[-1,-1],C="visible"));return E.map((I,R)=>S.jsx(ss,{withinPortal:!0,label:"Browsed away",children:S.jsx("rect",{x:u(I[0]),width:u(I[1])-u(I[0]),y:n-5,height:10})},R))}),[u,n,e.answers]),p=P.useMemo(()=>{if(s!=null&&s.uiConfig&&s.uiConfig.participantNameField){const[g,v]=s.uiConfig.participantNameField.split("."),b=Object.keys(e.answers).find(w=>w.startsWith(g));if(b)return`${e.answers[b].answer[v]}`}return null},[e.answers,s]),m=P.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return"";const g=Object.values(e.answers).filter(b=>b.startTime).sort((b,w)=>b.startTime-w.startTime),v=new Date(g[g.length-1].endTime);return e.completed?`${v.toLocaleDateString()} ${v.toLocaleTimeString()}`:""},[e]);return S.jsx(ga,{children:S.jsxs(uo,{gap:15,style:{width:"100%"},children:[S.jsx(NE,{size:"md"}),S.jsxs(Yr,{justify:"space-between",children:[S.jsxs(Yr,{justify:"center",children:[e.participantIndex?S.jsx(lt,{children:`P-${e.participantIndex<10?"0":"none"}${e.participantIndex}`}):null,S.jsx(lt,{size:"md",fw:700,children:p||e.participantId}),S.jsx(lt,{size:"md",children:m}),e.completed?null:S.jsx(lt,{size:"xl",c:"red",children:"Not completed"}),S.jsxs(Yr,{gap:10,children:[S.jsx(Rp,{variant:"light",size:"lg",color:"green",leftSection:S.jsx(kB,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:l}),S.jsx(Rp,{variant:"light",size:"lg",color:"red",leftSection:S.jsx(QP,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:c-l}),S.jsx(Rp,{variant:"light",size:"lg",color:"gray",leftSection:S.jsx(HZe,{width:18,height:18,style:{paddingTop:1}}),pb:1,children:lX(d)})]})]}),S.jsx(yn,{rightSection:S.jsx(cTe,{size:14}),component:"a",href:`${qa}${i}/${vp(0)}?participantId=${e.participantId}`,target:"_blank",children:"Go to replay"})]}),e.completed?S.jsxs("svg",{style:{width:t,height:n,overflow:"visible"},children:[f.map(g=>g.line),f.map(g=>g.label),h]}):null]})})}function Ian({visibleParticipants:e,studyConfig:t}){const{studyId:n}=L0(),[r,{width:i}]=td(),[s,o]=P.useState(!1),a=P.useMemo(()=>s?Math.max(...e.map(l=>{const c=Math.min(...Object.values(l.answers).map(d=>d.startTime||0)),f=Math.max(...Object.values(l.answers).map(d=>d.endTime||0));return f&&c?f-c:0})):void 0,[s,e]);return S.jsxs(uo,{ref:r,style:{width:"100%"},children:[S.jsx(Yr,{children:S.jsx(Ow,{checked:s,label:"Scale by time",onChange:u=>o(u.currentTarget.checked)})}),e.map(u=>S.jsx(Aan,{maxLength:a,studyConfig:t,studyId:n||"",height:200,participantData:u,width:i},u.participantId))]})}function kan({globalConfig:e}){const{studyId:t}=L0(),[n,r]=P.useState([]),[i,s]=P.useState(void 0),[o,a]=P.useState(!1),{storageEngine:u}=Oo(),l=ig(),{tab:c}=L0(),{user:f}=IO();P.useEffect(()=>{if(!t)return()=>{};if(t==="__revisit-widget"){const w=async E=>{if(E.data.type==="revisitWidget/CONFIG"&&u){const T=await Koe(E.data.payload);s(T)}};return window.addEventListener("message",w),window.parent.postMessage({type:"revisitWidget/READY"},"*"),()=>{window.removeEventListener("message",w)}}return Xoe(t,e).then(w=>{w&&s(w)}),()=>{}},[t,e,u]);const d=P.useCallback(async()=>{if(a(!0),t){if(!i||!u)return;await u.initializeStudyDb(t,i);const w=await u.getAllParticipantsData();r(w),a(!1)}},[u,t,i]);P.useEffect(()=>{d()},[e,u,t,d]);const[h,p]=P.useState([]),[m,g,v]=P.useMemo(()=>{const w=n.filter(C=>!C.rejected&&C.completed),E=n.filter(C=>!C.rejected&&!C.completed),T=n.filter(C=>C.rejected);return p([...w,...E,...T]),[w,E,T]},[n]),b=P.useCallback(w=>{const E=[];w.includes("completed")&&E.push(...m),w.includes("inprogress")&&E.push(...g),w.includes("rejected")&&E.push(...v),p(E)},[m,g,v]);return S.jsxs(S.Fragment,{children:[S.jsx(T$,{studyIds:e.configsList}),S.jsx(Vi.Main,{children:S.jsxs(Xy,{fluid:!0,style:{height:"100%",position:"relative"},children:[S.jsx(ld,{visible:o}),S.jsxs(an,{direction:"row",align:"center",justify:"space-between",children:[S.jsx(oo,{order:5,children:t}),S.jsxs(an,{direction:"row",align:"center",children:[S.jsx(lt,{mt:-2,size:"sm",children:"Participants: "}),S.jsx(sl.Group,{defaultValue:["completed","inprogress","rejected"],onChange:b,mb:"xs",mt:8,ml:"xs",children:S.jsxs(Yr,{children:[S.jsx(sl,{value:"completed",label:"Completed"}),S.jsx(sl,{value:"inprogress",label:"In Progress"}),S.jsx(sl,{value:"rejected",label:"Rejected"})]})})]})]}),S.jsx(rd,{h:"xs"}),S.jsxs(Vr,{variant:"outline",value:c,onChange:w=>l(`/analysis/stats/${t}/${w}`),style:{height:"100%"},children:[S.jsxs(Vr.List,{children:[S.jsx(Vr.Tab,{value:"table",leftSection:S.jsx(iet,{size:16}),children:"Table View"}),S.jsx(Vr.Tab,{value:"stats",leftSection:S.jsx(FZe,{size:16}),children:"Trial Stats"}),S.jsx(Vr.Tab,{value:"replay",leftSection:S.jsx(QZe,{size:16}),children:"Participant Replay"}),S.jsx(Vr.Tab,{value:"manage",leftSection:S.jsx(hTe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),S.jsx(Vr.Panel,{value:"table",pt:"xs",children:i&&S.jsx(yan,{visibleParticipants:h,studyConfig:i,refresh:d})}),S.jsx(Vr.Panel,{value:"stats",pt:"xs",children:i&&S.jsx(Ean,{studyConfig:i,visibleParticipants:h})}),S.jsx(Vr.Panel,{value:"replay",pt:"xs",children:S.jsx(Ian,{visibleParticipants:h,studyConfig:i})}),S.jsx(Vr.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?S.jsx(xan,{studyId:t,refresh:d}):S.jsx(Xy,{mt:20,children:S.jsx(Oy,{title:"Unauthorized Access",variant:"light",color:"red",icon:S.jsx(VJ,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Hxe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=IO(),{storageEngine:o}=Oo(),[a,u]=P.useState(!1),l=L0();return P.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?S.jsx(ld,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?S.jsx(FJ,{to:"/login"}):S.jsx(S.Fragment,{children:e})}async function P9e(e,t){if(e instanceof gp){t(!0);const n=new wy,r=O8();try{await etn(r,n,N8e)}catch(i){tP({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function Ran(){const{user:e}=IO(),[t,n]=P.useState(!1),{storageEngine:r}=Oo();return P.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&tP({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?S.jsx(FJ,{to:"/"}):S.jsx(Xy,{children:S.jsx(RA,{padding:"lg",children:S.jsxs(an,{align:"center",direction:"column",justify:"center",children:[S.jsx(mx,{maw:200,mt:50,mb:100,src:`${qa}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),S.jsxs(S.Fragment,{children:[S.jsx(lt,{mb:20,children:"To access admin settings, please sign in using your Google account."}),S.jsx(yn,{onClick:()=>P9e(r,n),leftSection:S.jsx(set,{}),variant:"filled",children:"Sign In With Google"})]}),S.jsx(ld,{visible:t})]})})})}function Dan(){const{user:e,triggerAuth:t}=IO(),{storageEngine:n}=Oo(),[r,i]=P.useState(!1),[s,o]=P.useState([]),[a,u]=P.useState(!1),[l,c]=P.useState(!1),[f,d]=P.useState(!1),[h,p]=P.useState(!1),[m,g]=P.useState(!1),[v,b]=P.useState(""),[w,E]=P.useState(null),T=h2e({initialValues:{email:""},validate:{email:Oct("Invalid email")}});P.useEffect(()=>{(async()=>{if(u(!0),n instanceof gp){const F=await(n==null?void 0:n.getUserManagementData("authentication"));i((F==null?void 0:F.isEnabled)||!1);const H=await(n==null?void 0:n.getUserManagementData("adminUsers"));H&&H.adminUsersList&&o(H==null?void 0:H.adminUsersList.map(Q=>Q.email))}else i(!1);u(!1)})()},[n]);const C=async()=>{if(u(!0),n instanceof gp){const B=await P9e(n,u);B&&B.email?(E({email:B.email,uid:B.uid}),p(!0)):g(!0)}u(!1)},I=async B=>{u(!0),n instanceof gp&&B&&(await n.changeAuth(!0),await n.addAdminUser(B),o([B.email]),i(!0),t()),p(!1),u(!1)},R=async()=>{if(u(!0),n instanceof gp){await n.addAdminUser({email:T.values.email,uid:null});const B=await n.getUserManagementData("adminUsers");o((B==null?void 0:B.adminUsersList.map(F=>F.email))||[])}u(!1),c(!1),T.setValues({email:""})},N=B=>{d(!0),b(B)},O=async()=>{if(u(!0),n instanceof gp){await n.removeAdminUser(v);const B=await n.getUserManagementData("adminUsers");o((B==null?void 0:B.adminUsersList.map(F=>F.email))||[])}d(!1),u(!1)},L=P.useMemo(()=>n instanceof gp,[n]);return S.jsxs(S.Fragment,{children:[S.jsx(Xy,{children:S.jsxs(RA,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[S.jsx(oo,{mb:20,order:3,children:"Authentication"}),r?S.jsx(an,{children:S.jsx(lt,{children:"Authentication is enabled."})}):S.jsxs(an,{justify:"space-between",children:[S.jsx(je,{children:S.jsx(lt,{children:"Authentication is currently disabled."})}),S.jsx(ss,{label:"You can only enable auth when using Firebase",disabled:L,children:S.jsx(yn,{onClick:B=>L?C():B.preventDefault(),color:"green","data-disabled":L?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?S.jsxs(an,{mt:40,direction:"column",children:[S.jsxs(an,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[S.jsx(oo,{order:6,children:"Enabled Users"}),S.jsx(HJ,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(B=>{var F;return S.jsxs(an,{justify:"space-between",mb:10,children:[S.jsx(lt,{children:B}),B===((F=e.user)==null?void 0:F.email)?S.jsx(lt,{color:"blue",size:"xs",children:"You"}):S.jsx(dx,{variant:"subtle",onClick:()=>N(B),children:S.jsx(mTe,{color:"red"})})]},B)}):null]}):null]})}),S.jsx(Vs,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:S.jsxs(je,{component:"form",onSubmit:T.onSubmit(()=>R()),children:[S.jsx(Ey,{leftSection:S.jsx(OZe,{}),placeholder:"User Gmail Account",...T.getInputProps("email")}),S.jsxs(an,{mt:30,justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),S.jsx(yn,{type:"submit",children:"Save"})]})]})}),S.jsxs(Vs,{opened:f,size:"large",onClose:()=>d(!1),title:S.jsxs(lt,{fw:700,children:["Remove",v,"?"]}),children:[S.jsxs(lt,{mt:40,children:["Are you sure you want to remove",S.jsx("b",{children:v})," ","as an administrator?"]}),S.jsxs(an,{mt:40,justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),S.jsx(yn,{onClick:()=>O(),children:"Yes, I'm sure."})]})]}),S.jsxs(Vs,{opened:h,size:"md",onClose:()=>p(!1),title:S.jsx(lt,{fw:700,children:"Enable Authentication?"}),children:[S.jsxs(lt,{mt:40,children:["User"," ",S.jsx("b",{children:w==null?void 0:w.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),S.jsxs(an,{mt:40,justify:"right",children:[S.jsx(yn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),S.jsx(yn,{onClick:()=>I(w),children:"Yes, I'm sure."})]})]}),S.jsxs(Vs,{opened:m,size:"md",onClose:()=>g(!1),title:S.jsx(lt,{fw:700,children:"An Error Occurred."}),children:[S.jsxs(lt,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",S.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),S.jsx(an,{mt:40,justify:"right",children:S.jsx(yn,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),S.jsx(ld,{visible:a})]})}class Nan extends D9e{constructor(){super("localStorage");Rl(this,"studyDatabase");Rl(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await g2.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await H8(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(void 0)}async saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async initializeParticipantSession(n,r,i,s,o){var h;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await H8(JSON.stringify(i)),{currentRow:c,creationIndex:f}=await this.getSequence(),d={participantId:this.currentParticipantId,participantConfigHash:l,sequence:c,participantIndex:f,answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1,participantTags:[]};return u.dataCollectionEnabled&&await((h=this.studyDatabase)==null?void 0:h.setItem(this.currentParticipantId,d)),d}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await g2.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=V8();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),{currentRow:i,creationIndex:1e3-n.length}}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=g2.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=n||await this.studyDatabase.getItem("currentParticipant");return r?await this.studyDatabase.getItem(r):null}async getParticipantTags(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.participantTags}async addParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=[...new Set([...r.participantTags,...n])],await this.studyDatabase.setItem(this.currentParticipantId,r)}async removeParticipantTags(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.getParticipantData();if(!r)throw new Error("Participant not initialized");r.participantTags=r.participantTags.filter(i=>!n.includes(i)),await this.studyDatabase.setItem(this.currentParticipantId,r)}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=V8();await this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed||(n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n)),!0}async validateUser(n){return!0}async rejectParticipant(n,r,i){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const s=await this.studyDatabase.getItem(r);if(!s)throw new Error("Participant not found");if(s.rejected)return;s.rejected={reason:i,timestamp:new Date().getTime()};const o=await this.studyDatabase.getItem("sequenceArray");o&&(o.unshift(s.sequence),this.setSequenceArray(o)),await this.studyDatabase.setItem(r,s)}async rejectCurrentParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");await this.rejectParticipant(n,this.currentParticipantId,r)}async setMode(n,r,i){this.studyDatabase=await g2.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await g2.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}async getParticipantsStatusCounts(n){const r=await this.getAllParticipantsDataByStudy(n),i=r.filter(l=>l.completed&&!l.rejected).length,s=r.filter(l=>l.rejected).length,o=r.filter(l=>!l.completed&&!l.rejected).length,a=Math.min(...r.map(l=>Math.min(...Object.values(l.answers).map(c=>c.startTime)))),u=Math.max(...r.map(l=>Math.max(...Object.values(l.answers).map(c=>c.endTime))));return{completed:i,rejected:s,inProgress:o,minTime:a===1/0?null:a,maxTime:u===-1/0?null:u}}_verifyStudyDatabase(n){return n!==void 0}}async function Pan(){let e,t=!1;{const n=new gp;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new Nan;await n.connect(),e=n}return e}function FR({title:e}){const t=Eh();return P.useEffect(()=>{document.title=e},[t,e]),null}async function Oan(){const t=await(await fetch(`${qa}global.json`)).text();return oJt(t)}function Man(){const[e,t]=P.useState(null),[n,r]=P.useState({});P.useEffect(()=>{async function a(){e&&r(await lJt(e))}a()},[e]),P.useEffect(()=>{e||Oan().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Oo();P.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await Pan();s(u)}a()},[s,i]);const o=async a=>i instanceof gp?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?S.jsx(pZe,{basename:qa,children:S.jsx(pan,{children:S.jsx(kZe,{children:S.jsxs(VJe,{children:[S.jsx(q_,{path:"/",element:S.jsxs(S.Fragment,{children:[S.jsx(FR,{title:"ReVISit | Home"}),S.jsxs(Vi,{padding:"md",header:{height:70},children:[S.jsx(T$,{studyIds:e.configsList}),S.jsx(Fat,{globalConfig:e,studyConfigs:n})]})]})}),S.jsx(q_,{path:"/:studyId/*",element:S.jsxs(S.Fragment,{children:[S.jsx(FR,{title:"ReVISit | Study"}),S.jsx(cJt,{globalConfig:e})]})}),S.jsx(q_,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:S.jsxs(S.Fragment,{children:[S.jsx(FR,{title:"ReVISit | Analysis"}),S.jsx(Hxe,{paramToCheck:"studyId",paramCallback:o,children:S.jsx(Vi,{padding:"md",header:{height:70},children:S.jsx(kan,{globalConfig:e})})})]})}),S.jsx(q_,{path:"/analysis/stats/:studyId",element:S.jsx(T5e,{to:"./table",replace:!0})}),S.jsx(q_,{path:"/settings",element:S.jsxs(Hxe,{children:[S.jsx(FR,{title:"ReVISit | Settings"}),S.jsxs(Vi,{padding:"md",header:{height:70},children:[S.jsx(T$,{studyIds:e.configsList}),S.jsx(Vi.Main,{children:S.jsx(Dan,{})})]})]})}),S.jsx(q_,{path:"/login",element:S.jsxs(S.Fragment,{children:[S.jsx(FR,{title:"ReVISit | Login"}),S.jsxs(Vi,{padding:"md",header:{height:70},children:[S.jsx(T$,{studyIds:e.configsList}),S.jsx(Vi.Main,{children:S.jsx(Ran,{})})]})]})})]})})})}):null}vUe.createRoot(document.getElementById("root")).render(S.jsx(ci.StrictMode,{children:S.jsx(JQe,{children:S.jsxs(m_e,{children:[S.jsx(T1,{}),S.jsx(Man,{})]})})}))});export default Lan();
